<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>test: usercli.h File Reference</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="../../main.html">Main&nbsp;Page</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Class&nbsp;List</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Class&nbsp;Members</a> | <a class="qindex" href="../../globals.html">File&nbsp;Members</a></div>
<h1>usercli.h File Reference</h1><code>#include &lt;windows.h&gt;</code><br>
<code>#include &lt;winnls32.h&gt;</code><br>
<code>#include &lt;w32gdip.h&gt;</code><br>
<code>#include &lt;w32err.h&gt;</code><br>
<code>#include &lt;ddeml.h&gt;</code><br>
<code>#include "ddemlp.h"</code><br>
<code>#include "winuserp.h"</code><br>
<code>#include "w32wow64.h"</code><br>
<code>#include "winuserk.h"</code><br>
<code>#include &lt;winnlsp.h&gt;</code><br>
<code>#include &lt;dde.h&gt;</code><br>
<code>#include &lt;<a class="el" href="../../d7/d3/ddetrack_8h-source.html">ddetrack.h</a>&gt;</code><br>
<code>#include "kbd.h"</code><br>
<code>#include &lt;wowuserp.h&gt;</code><br>
<code>#include "<a class="el" href="../../d9/d9/immstruc_8h-source.html">immstruc.h</a>"</code><br>
<code>#include "<a class="el" href="../../d0/d0/immuser_8h-source.html">immuser.h</a>"</code><br>
<code>#include &lt;winbasep.h&gt;</code><br>
<code>#include "<a class="el" href="../../d2/d9/inc_2user_8h-source.html">user.h</a>"</code><br>
<code>#include "<a class="el" href="../../d1/d4/callproc_8h-source.html">callproc.h</a>"</code><br>
<code>#include &lt;ole2.h&gt;</code><br>
<code>#include "<a class="el" href="../../d1/d3/ddemlcli_8h-source.html">ddemlcli.h</a>"</code><br>
<code>#include "<a class="el" href="../../d9/d5/ntuser_2client_2globals_8h-source.html">globals.h</a>"</code><br>
<code>#include "cscall.h"</code><br>
<code>#include "<a class="el" href="../../d1/d9/ntuser_8h-source.html">ntuser.h</a>"</code><br>

<p>
<a href="../../d7/d9/usercli_8h-source.html">Go to the source code of this file.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d1/struct__IN__STRING.html">_IN_STRING</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d8/struct__LARGE__IN__STRING.html">_LARGE_IN_STRING</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d2/d4/struct__LOOKASIDE.html">_LOOKASIDE</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d1/struct__TL.html">_TL</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d8/structtagUNDO.html">tagUNDO</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d4/structtagED.html">tagED</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d4/structtagEDITWND.html">tagEDITWND</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d8/structtagBLOCK.html">tagBLOCK</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d7/structSTRIPINFO.html">STRIPINFO</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/structtagLBItem.html">tagLBItem</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d9/structtagLBODItem.html">tagLBODItem</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/structtagSTAT.html">tagSTAT</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d7/structtagSTATWND.html">tagSTATWND</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d2/structtagCURSORRESOURCE.html">tagCURSORRESOURCE</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d2/struct__FILEINFO.html">_FILEINFO</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d6/structtagSHORTCREATE.html">tagSHORTCREATE</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d0/structtagMDIACTIVATEPOS.html">tagMDIACTIVATEPOS</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d1/structtagMNIDROPTARGET.html">tagMNIDROPTARGET</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d5/structtagGETPROCINFO.html">tagGETPROCINFO</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d7/structtagACCELCACHE.html">tagACCELCACHE</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d5/structtagREADERMODE.html">tagREADERMODE</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d4/structtagREADERINFO.html">tagREADERINFO</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d5/structtagREADERWND.html">tagREADERWND</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d2/d7/structImmApiEntries.html">ImmApiEntries</a></td></tr>

<tr><td colspan=2><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a0">OEMRESOURCE</a>&nbsp;&nbsp;&nbsp;1</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a1">USERGLOBALUNLOCK</a>(h)&nbsp;&nbsp;&nbsp;GlobalUnlock((HANDLE)(h))</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a2">UserGlobalFree</a>(h)&nbsp;&nbsp;&nbsp;GlobalFree((HANDLE)(h))</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a3">UserGlobalAlloc</a>(flags, size)&nbsp;&nbsp;&nbsp;GlobalAlloc(flags, size)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a4">USERGLOBALLOCK</a>(h, p)&nbsp;&nbsp;&nbsp;p = GlobalLock((HANDLE)(h))</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a5">UserGlobalReAlloc</a>(pmem, cnt, flags)&nbsp;&nbsp;&nbsp;GlobalReAlloc(pmem,cnt,flags)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a6">UserGlobalSize</a>(pmem)&nbsp;&nbsp;&nbsp;GlobalSize(pmem)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a7">WOWGLOBALFREE</a>(pmem)&nbsp;&nbsp;&nbsp;GlobalFree(pmem)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a8">RESERVED_MSG_BITS</a>&nbsp;&nbsp;&nbsp;(0xFFFE0000)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a9">FDEFWINDOWMSG</a>(<a class="el" href="../../d2/d1/userexts_8c.html#a129">msg</a>, procname)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a10">FWINDOWMSG</a>(<a class="el" href="../../d2/d1/userexts_8c.html#a129">msg</a>, fnid)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a11">CsSendMessage</a>(hwnd, <a class="el" href="../../d2/d1/userexts_8c.html#a129">msg</a>, wParam, lParam, xParam, pfn, bAnsi)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a12">GetWindowProcess</a>(hwnd)&nbsp;&nbsp;&nbsp;NtUserQueryWindow(hwnd, WindowProcess)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a13">GETPROCESSID</a>()&nbsp;&nbsp;&nbsp;(NtCurrentTeb()-&gt;ClientId.UniqueProcess)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a14">GETTHREADID</a>()&nbsp;&nbsp;&nbsp;(NtCurrentTeb()-&gt;ClientId.UniqueThread)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a15">SAMEWOWHANDLE</a>(h1, h2)&nbsp;&nbsp;&nbsp;((BOOL)!(((ULONG_PTR)(h1) ^ (ULONG_PTR)(h2)) &amp; 0xffff))</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a16">DIFFWOWHANDLE</a>(h1, h2)&nbsp;&nbsp;&nbsp;(!SAMEWOWHANDLE(h1, h2))</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a17">CALLPROC</a>(p)&nbsp;&nbsp;&nbsp;((<a class="el" href="../../d6/d0/usercli_8h.html#a348">GENERICPROC</a>)p)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a18">CALLPROC_WOWCHECKPWW_DLG</a>(pfn, hwnd, <a class="el" href="../../d2/d1/userexts_8c.html#a129">msg</a>, wParam, lParam, pww)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a19">CALLPROC_WOWCHECKPWW</a>(pfn, hwnd, <a class="el" href="../../d2/d1/userexts_8c.html#a129">msg</a>, wParam, lParam, pww)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a20">CALLPROC_WOWCHECK</a>(pfn, hwnd, <a class="el" href="../../d2/d1/userexts_8c.html#a129">msg</a>, wParam, lParam)&nbsp;&nbsp;&nbsp;CALLPROC_WOWCHECKPWW(pfn, hwnd, <a class="el" href="../../d2/d1/userexts_8c.html#a129">msg</a>, wParam, lParam, NULL)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a21">RevalidateHwnd</a>(hwnd)&nbsp;&nbsp;&nbsp;((<a class="el" href="../../d6/d9/structtagWND.html">PWND</a>)HMValidateHandleNoSecure(hwnd, TYPE_WINDOW))</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a22">VALIDATEHMENU</a>(hmenu)&nbsp;&nbsp;&nbsp;((<a class="el" href="../../d1/d1/structtagMENU.html">PMENU</a>)HMValidateHandle(hmenu, TYPE_MENU))</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a23">VALIDATEHMONITOR</a>(hmonitor)&nbsp;&nbsp;&nbsp;((<a class="el" href="../../d0/d2/structtagMONITOR.html">PMONITOR</a>)HMValidateSharedHandle(hmonitor, TYPE_MONITOR))</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a24">REBASEALWAYS</a>(p, elem)&nbsp;&nbsp;&nbsp;((PVOID)((KERNEL_ULONG_PTR)(p) + ((KERNEL_ULONG_PTR)(p)-&gt;elem - (KERNEL_ULONG_PTR)(p)-&gt;head.pSelf)))</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a25">REBASEPTR</a>(obj, p)&nbsp;&nbsp;&nbsp;((PVOID)((KERNEL_ULONG_PTR)(p) - ((KERNEL_ULONG_PTR)(obj)-&gt;head.pSelf - (KERNEL_ULONG_PTR)(obj))))</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a26">REBASE</a>(p, elem)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a27">REBASEPWND</a>(p, elem)&nbsp;&nbsp;&nbsp;((<a class="el" href="../../d6/d9/structtagWND.html">PWND</a>)REBASE(p, elem))</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a28">VALIDATECLASSANDSIZE</a>(pwnd, inFNID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a29">INITCONTROLLOOKASIDE</a>(plaType, <a class="el" href="../../d4/d4/iafptrap_8c.html#a9">type</a>, pwnditem, count)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a30">ISREMOTESESSION</a>()&nbsp;&nbsp;&nbsp;(NtCurrentPeb()-&gt;SessionId != 0)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a31">SetBestStretchMode</a>(hdc, planes, bpp)&nbsp;&nbsp;&nbsp;SetStretchBltMode(hdc, (((planes) * (bpp)) == 1 ? BLACKONWHITE : COLORONCOLOR))</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a32">BitmapSize</a>(cx, <a class="el" href="../../d1/d1/inctlpan_8c.html#a3">cy</a>, planes, bits)&nbsp;&nbsp;&nbsp;(BitmapWidth(cx, bits) * (<a class="el" href="../../d1/d1/inctlpan_8c.html#a3">cy</a>) * (planes))</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a33">BitmapWidth</a>(cx, bpp)&nbsp;&nbsp;&nbsp;(((((cx)*(bpp)) + 31) &amp; ~31) &gt;&gt; 3)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a34">RGBX</a>(rgb)&nbsp;&nbsp;&nbsp;RGB(GetBValue(rgb), GetGValue(rgb), GetRValue(rgb))</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pobj)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(pobj, ptl)&nbsp;&nbsp;&nbsp;DBG_UNREFERENCED_LOCAL_VARIABLE(*ptl)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a37">ThreadLockAlways</a>(pobj, ptl)&nbsp;&nbsp;&nbsp;DBG_UNREFERENCED_LOCAL_VARIABLE(*ptl)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a38">ThreadLockWithPti</a>(pti, pobj, ptl)&nbsp;&nbsp;&nbsp;DBG_UNREFERENCED_LOCAL_VARIABLE(*ptl)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a39">ThreadLockAlwaysWithPti</a>(pti, pobj, ptl)&nbsp;&nbsp;&nbsp;DBG_UNREFERENCED_LOCAL_VARIABLE(*ptl)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(ptl)&nbsp;&nbsp;&nbsp;(ptl)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a41">Lock</a>(ppobj, pobj)&nbsp;&nbsp;&nbsp;(*ppobj = pobj)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a42">Unlock</a>(ppobj)&nbsp;&nbsp;&nbsp;(*ppobj = NULL)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a43">BUTTONSTATE</a>(pbutn)&nbsp;&nbsp;&nbsp;(pbutn-&gt;buttonState)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a44">BST_CHECKMASK</a>&nbsp;&nbsp;&nbsp;0x0003</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a45">BST_INCLICK</a>&nbsp;&nbsp;&nbsp;0x0010</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a46">BST_CAPTURED</a>&nbsp;&nbsp;&nbsp;0x0020</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a47">BST_MOUSE</a>&nbsp;&nbsp;&nbsp;0x0040</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a48">BST_DONTCLICK</a>&nbsp;&nbsp;&nbsp;0x0080</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a49">BST_INBMCLICK</a>&nbsp;&nbsp;&nbsp;0x0100</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a50">PBF_PUSHABLE</a>&nbsp;&nbsp;&nbsp;0x0001</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a51">PBF_DEFAULT</a>&nbsp;&nbsp;&nbsp;0x0002</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a52">DBT_TEXT</a>&nbsp;&nbsp;&nbsp;0x0001</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a53">DBT_FOCUS</a>&nbsp;&nbsp;&nbsp;0x0002</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a54">CBLISTBOXID</a>&nbsp;&nbsp;&nbsp;1000</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a55">CBEDITID</a>&nbsp;&nbsp;&nbsp;1001</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a56">CBBUTTONID</a>&nbsp;&nbsp;&nbsp;1002</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a57">SDROPPABLE</a>&nbsp;&nbsp;&nbsp;CBS_DROPDOWN</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a58">SEDITABLE</a>&nbsp;&nbsp;&nbsp;CBS_SIMPLE</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a59">SSIMPLE</a>&nbsp;&nbsp;&nbsp;SEDITABLE</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a60">SDROPDOWNLIST</a>&nbsp;&nbsp;&nbsp;SDROPPABLE</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a61">SDROPDOWN</a>&nbsp;&nbsp;&nbsp;(SDROPPABLE | SEDITABLE)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a62">OWNERDRAWFIXED</a>&nbsp;&nbsp;&nbsp;1</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a63">OWNERDRAWVAR</a>&nbsp;&nbsp;&nbsp;2</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a64">UPPERCASE</a>&nbsp;&nbsp;&nbsp;1</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a65">LOWERCASE</a>&nbsp;&nbsp;&nbsp;2</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a66">CaretCreate</a>(plb)&nbsp;&nbsp;&nbsp;((plb)-&gt;fCaret = TRUE)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a67">LBS_COMBOBOX</a>&nbsp;&nbsp;&nbsp;0x8000L</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a68">COMBOBOXSTYLE</a>(style)&nbsp;&nbsp;&nbsp;((LOBYTE(style)) &amp; 3)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a69">IsComboVisible</a>(pcbox)&nbsp;&nbsp;&nbsp;(!pcbox-&gt;fNoRedraw &amp;&amp; IsVisible(pcbox-&gt;spwnd))</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a70">CBEDITEXTRA</a>&nbsp;&nbsp;&nbsp;6</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a71">CCHALLOCEXTRA</a>&nbsp;&nbsp;&nbsp;0x20</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a72">MAXPIXELWIDTH</a>&nbsp;&nbsp;&nbsp;30000</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a73">MAXCLIPENDPOS</a>&nbsp;&nbsp;&nbsp;32764</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a74">MAXLINELENGTH</a>&nbsp;&nbsp;&nbsp;1024</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a75">MAXTEXT</a>&nbsp;&nbsp;&nbsp;30000</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a76">NONEDOWN</a>&nbsp;&nbsp;&nbsp;0 /* Neither shift nor <a class="el" href="../../d3/d0/user32_8def.html#a59">control</a> down */</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a77">CTRLDOWN</a>&nbsp;&nbsp;&nbsp;1 /* Control key <a class="el" href="../../d3/d0/imm32_8def.html#a1">only</a> down */</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a78">SHFTDOWN</a>&nbsp;&nbsp;&nbsp;2 /* Shift key <a class="el" href="../../d3/d0/imm32_8def.html#a1">only</a> down */</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a79">SHCTDOWN</a>&nbsp;&nbsp;&nbsp;3 /* Shift and <a class="el" href="../../d3/d0/user32_8def.html#a59">control</a> keys down = CTRLDOWN + SHFTDOWN */</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a80">NOMODIFY</a>&nbsp;&nbsp;&nbsp;4 /* Neither shift nor <a class="el" href="../../d3/d0/user32_8def.html#a59">control</a> down */</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a81">CALLWORDBREAKPROC</a>(proc, pText, iStart, cch, iAction)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a82">UNDO_NONE</a>&nbsp;&nbsp;&nbsp;0  /* We can't undo <a class="el" href="../../d7/d1/genuedef_8c.html#a2">the</a> last operation. */</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a83">UNDO_INSERT</a>&nbsp;&nbsp;&nbsp;1  /* We can undo <a class="el" href="../../d7/d1/genuedef_8c.html#a2">the</a> user's insertion of characters */</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a84">UNDO_DELETE</a>&nbsp;&nbsp;&nbsp;2  /* We can undo <a class="el" href="../../d7/d1/genuedef_8c.html#a2">the</a> user's deletion of characters */</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a85">Pundo</a>(ped)&nbsp;&nbsp;&nbsp;((<a class="el" href="../../d9/d8/structtagUNDO.html">PUNDO</a>)&amp;(ped)-&gt;undoType)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a86">CHAR_WIDTH_BUFFER_LENGTH</a>&nbsp;&nbsp;&nbsp;128</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a87">FAREAST_CHARSET_BITS</a>&nbsp;&nbsp;&nbsp;(FS_JISJAPAN | FS_CHINESESIMP | FS_WANSUNG | FS_CHINESETRAD)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a88">ID_CNTX_RTL</a>&nbsp;&nbsp;&nbsp;0x00008000L</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a89">ID_CNTX_DISPLAYCTRL</a>&nbsp;&nbsp;&nbsp;0x00008001L</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a90">ID_CNTX_INSERTCTRL</a>&nbsp;&nbsp;&nbsp;0x00008013L</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a91">ID_CNTX_ZWJ</a>&nbsp;&nbsp;&nbsp;0x00008002L</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a92">ID_CNTX_ZWNJ</a>&nbsp;&nbsp;&nbsp;0x00008003L</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a93">ID_CNTX_LRM</a>&nbsp;&nbsp;&nbsp;0x00008004L</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a94">ID_CNTX_RLM</a>&nbsp;&nbsp;&nbsp;0x00008005L</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a95">ID_CNTX_LRE</a>&nbsp;&nbsp;&nbsp;0x00008006L</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a96">ID_CNTX_RLE</a>&nbsp;&nbsp;&nbsp;0x00008007L</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a97">ID_CNTX_LRO</a>&nbsp;&nbsp;&nbsp;0x00008008L</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a98">ID_CNTX_RLO</a>&nbsp;&nbsp;&nbsp;0x00008009L</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a99">ID_CNTX_PDF</a>&nbsp;&nbsp;&nbsp;0x0000800AL</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a100">ID_CNTX_NADS</a>&nbsp;&nbsp;&nbsp;0x0000800BL</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a101">ID_CNTX_NODS</a>&nbsp;&nbsp;&nbsp;0x0000800CL</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a102">ID_CNTX_ASS</a>&nbsp;&nbsp;&nbsp;0x0000800DL</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a103">ID_CNTX_ISS</a>&nbsp;&nbsp;&nbsp;0x0000800EL</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a104">ID_CNTX_AAFS</a>&nbsp;&nbsp;&nbsp;0x0000800FL</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a105">ID_CNTX_IAFS</a>&nbsp;&nbsp;&nbsp;0x00008010L</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a106">ID_CNTX_RS</a>&nbsp;&nbsp;&nbsp;0x00008011L</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a107">ID_CNTX_US</a>&nbsp;&nbsp;&nbsp;0x00008012L</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a108">IsLBoxVisible</a>(plb)&nbsp;&nbsp;&nbsp;(plb-&gt;fRedraw &amp;&amp; IsVisible(plb-&gt;spwnd))</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a109">CITEMSALLOC</a>&nbsp;&nbsp;&nbsp;32</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a110">EQ</a>&nbsp;&nbsp;&nbsp;0</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a111">PREFIX</a>&nbsp;&nbsp;&nbsp;1</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a112">LT</a>&nbsp;&nbsp;&nbsp;2</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a113">GT</a>&nbsp;&nbsp;&nbsp;3</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a114">SINGLESEL</a>&nbsp;&nbsp;&nbsp;0</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a115">MULTIPLESEL</a>&nbsp;&nbsp;&nbsp;1</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a116">EXTENDEDSEL</a>&nbsp;&nbsp;&nbsp;2</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a117">LBI_ADD</a>&nbsp;&nbsp;&nbsp;0x0004</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a118">LBUP_RELEASECAPTURE</a>&nbsp;&nbsp;&nbsp;0x0001</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a119">LBUP_RESETSELECTION</a>&nbsp;&nbsp;&nbsp;0x0002</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a120">LBUP_NOTIFY</a>&nbsp;&nbsp;&nbsp;0x0004</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a121">LBUP_SUCCESS</a>&nbsp;&nbsp;&nbsp;0x0008</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a122">LBUP_SELCHANGE</a>&nbsp;&nbsp;&nbsp;0x0010</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a123">NextWordBoundary</a>(p)&nbsp;&nbsp;&nbsp;((<a class="el" href="../../d9/d7/halvprnt_8c.html#a1">PBYTE</a>)(p) + ((ULONG_PTR)(p) &amp; 1))</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a124">NextDWordBoundary</a>(p)&nbsp;&nbsp;&nbsp;((<a class="el" href="../../d9/d7/halvprnt_8c.html#a1">PBYTE</a>)(p) + ((ULONG_PTR)(-(LONG_PTR)(p)) &amp; 3))</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a125">FINDRESOURCEA</a>(hModule, lpName, lpType)&nbsp;&nbsp;&nbsp;((*(<a class="el" href="../../d8/d6/ntuser_2client_2globals_8h.html#a45">pfnFindResourceExA</a>))(hModule, lpType, lpName, 0))</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a126">FINDRESOURCEW</a>(hModule, lpName, lpType)&nbsp;&nbsp;&nbsp;((*(<a class="el" href="../../d8/d6/ntuser_2client_2globals_8h.html#a46">pfnFindResourceExW</a>))(hModule, lpType, lpName, 0))</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a127">FINDRESOURCEEXA</a>(hModule, lpName, lpType, wLang)&nbsp;&nbsp;&nbsp;((*(<a class="el" href="../../d8/d6/ntuser_2client_2globals_8h.html#a45">pfnFindResourceExA</a>))(hModule, lpType, lpName, wLang))</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a128">FINDRESOURCEEXW</a>(hModule, lpName, lpType, wLang)&nbsp;&nbsp;&nbsp;((*(<a class="el" href="../../d8/d6/ntuser_2client_2globals_8h.html#a46">pfnFindResourceExW</a>))(hModule, lpType, lpName, wLang))</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a129">LOADRESOURCE</a>(hModule, hResInfo)&nbsp;&nbsp;&nbsp;((*(<a class="el" href="../../d8/d6/ntuser_2client_2globals_8h.html#a47">pfnLoadResource</a>))(hModule, hResInfo))</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a130">LOCKRESOURCE</a>(hResData, hModule)&nbsp;&nbsp;&nbsp;((*(<a class="el" href="../../d8/d6/ntuser_2client_2globals_8h.html#a48">pfnLockResource</a>))(hResData, hModule))</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a131">UNLOCKRESOURCE</a>(hResData, hModule)&nbsp;&nbsp;&nbsp;((*(<a class="el" href="../../d8/d6/ntuser_2client_2globals_8h.html#a49">pfnUnlockResource</a>))(hResData, hModule))</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a132">FREERESOURCE</a>(hResData, hModule)&nbsp;&nbsp;&nbsp;((*(<a class="el" href="../../d8/d6/ntuser_2client_2globals_8h.html#a50">pfnFreeResource</a>))(hResData, hModule))</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a133">SIZEOFRESOURCE</a>(hModule, hResInfo)&nbsp;&nbsp;&nbsp;((*(<a class="el" href="../../d8/d6/ntuser_2client_2globals_8h.html#a51">pfnSizeofResource</a>))(hModule, hResInfo))</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a134">GETEXPWINVER</a>(hModule)&nbsp;&nbsp;&nbsp;((*(<a class="el" href="../../d8/d6/ntuser_2client_2globals_8h.html#a58">pfnGetExpWinVer</a>))((hModule)?(hModule):GetModuleHandle(NULL)))</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a135">CCHFILEMAX</a>&nbsp;&nbsp;&nbsp;MAX_PATH</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a136">UserLocalAlloc</a>(uFlag, uBytes)&nbsp;&nbsp;&nbsp;HeapAlloc(<a class="el" href="../../d8/d6/ntuser_2client_2globals_8h.html#a21">pUserHeap</a>, uFlag, (uBytes))</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a137">UserLocalReAlloc</a>(p, uBytes, uFlags)&nbsp;&nbsp;&nbsp;HeapReAlloc(<a class="el" href="../../d8/d6/ntuser_2client_2globals_8h.html#a21">pUserHeap</a>, uFlags, (LPSTR)(p), (uBytes))</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a138">UserLocalFree</a>(p)&nbsp;&nbsp;&nbsp;HeapFree(<a class="el" href="../../d8/d6/ntuser_2client_2globals_8h.html#a21">pUserHeap</a>, 0, (LPSTR)(p))</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a139">UserLocalSize</a>(p)&nbsp;&nbsp;&nbsp;HeapSize(<a class="el" href="../../d8/d6/ntuser_2client_2globals_8h.html#a21">pUserHeap</a>, 0, (LPSTR)(p))</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a140">UserLocalLock</a>(p)&nbsp;&nbsp;&nbsp;(LPSTR)(p)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a141">UserLocalUnlock</a>(p)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a142">UserLocalFlags</a>(p)&nbsp;&nbsp;&nbsp;0</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a143">UserLocalHandle</a>(p)&nbsp;&nbsp;&nbsp;(HLOCAL)(p)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a144">CrackCombinedDbcsLB</a>(<a class="el" href="../../d7/d1/genuedef_8c.html#a8">c</a>)&nbsp;&nbsp;&nbsp;((<a class="el" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a>)(<a class="el" href="../../d7/d1/genuedef_8c.html#a8">c</a>))</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a145">CrackCombinedDbcsTB</a>(<a class="el" href="../../d7/d1/genuedef_8c.html#a8">c</a>)&nbsp;&nbsp;&nbsp;((<a class="el" href="../../d7/d1/genuedef_8c.html#a8">c</a>) &gt;&gt; 8)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a146">ECT_CALC</a>&nbsp;&nbsp;&nbsp;0</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a147">ECT_NORMAL</a>&nbsp;&nbsp;&nbsp;1</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a148">ECT_SELECTED</a>&nbsp;&nbsp;&nbsp;2</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a149">ECGetCaretWidth</a>()&nbsp;&nbsp;&nbsp;(<a class="el" href="../../d9/d6/ntuser_2kernel_2globals_8h.html#a317">gpsi</a>-&gt;uCaretWidth)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a150">GETAPPVER</a>()&nbsp;&nbsp;&nbsp;GetClientInfo()-&gt;dwExpWinVer</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a151">THREAD_HKL</a>()&nbsp;&nbsp;&nbsp;(GetClientInfo()-&gt;hKL)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a152">ISDELIMETERA</a>(ch)&nbsp;&nbsp;&nbsp;((ch == ' ') || (ch == '\t'))</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a153">ISDELIMETERW</a>(ch)&nbsp;&nbsp;&nbsp;((ch == L' ') || (ch == L'\t'))</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a154">AWCOMPARECHAR</a>(ped, pbyte, awchar)&nbsp;&nbsp;&nbsp;(ped-&gt;fAnsi ? (*(PUCHAR)(pbyte) == (UCHAR)(awchar)) : (*(LPWSTR)(pbyte) == (WCHAR)(awchar)))</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a155">ID_EC_PROPERTY_MENU</a>&nbsp;&nbsp;&nbsp;1</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a156">IDD_MDI_ACTIVATE</a>&nbsp;&nbsp;&nbsp;9</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a157">STR_ERROR</a>&nbsp;&nbsp;&nbsp;0x00000002L</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a158">STR_MOREWINDOWS</a>&nbsp;&nbsp;&nbsp;0x0000000DL</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a159">STR_NOMEMBITMAP</a>&nbsp;&nbsp;&nbsp;0x0000000EL</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a160">STR_IMEOPEN</a>&nbsp;&nbsp;&nbsp;700</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a161">STR_IMECLOSE</a>&nbsp;&nbsp;&nbsp;701</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a162">STR_SOFTKBDOPEN</a>&nbsp;&nbsp;&nbsp;702</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a163">STR_SOFTKBDCLOSE</a>&nbsp;&nbsp;&nbsp;703</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a164">STR_RECONVERTSTRING</a>&nbsp;&nbsp;&nbsp;705</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a165">_GetWindowLongPtr</a>&nbsp;&nbsp;&nbsp;_GetWindowLong</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a166">fnCOPYDATA</a>&nbsp;&nbsp;&nbsp;NtUserMessageCall</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a167">fnDDEINIT</a>&nbsp;&nbsp;&nbsp;NtUserMessageCall</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a168">fnDWORD</a>&nbsp;&nbsp;&nbsp;NtUserMessageCall</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a169">fnDWORDOPTINLPMSG</a>&nbsp;&nbsp;&nbsp;NtUserMessageCall</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a170">fnGETTEXTLENGTHS</a>&nbsp;&nbsp;&nbsp;NtUserMessageCall</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a171">fnGETDBCSTEXTLENGTHS</a>&nbsp;&nbsp;&nbsp;NtUserMessageCall</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a172">fnINLPCREATESTRUCT</a>&nbsp;&nbsp;&nbsp;NtUserMessageCall</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a173">fnINLPCOMPAREITEMSTRUCT</a>&nbsp;&nbsp;&nbsp;NtUserMessageCall</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a174">fnINLPDELETEITEMSTRUCT</a>&nbsp;&nbsp;&nbsp;NtUserMessageCall</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a175">fnINLPDRAWITEMSTRUCT</a>&nbsp;&nbsp;&nbsp;NtUserMessageCall</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a176">fnINLPHELPINFOSTRUCT</a>&nbsp;&nbsp;&nbsp;NtUserMessageCall</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a177">fnINLPHLPSTRUCT</a>&nbsp;&nbsp;&nbsp;NtUserMessageCall</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a178">fnINLPWINDOWPOS</a>&nbsp;&nbsp;&nbsp;NtUserMessageCall</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a179">fnINOUTDRAG</a>&nbsp;&nbsp;&nbsp;NtUserMessageCall</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a180">fnINOUTLPMEASUREITEMSTRUCT</a>&nbsp;&nbsp;&nbsp;NtUserMessageCall</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a181">fnINOUTLPPOINT5</a>&nbsp;&nbsp;&nbsp;NtUserMessageCall</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a182">fnINOUTLPRECT</a>&nbsp;&nbsp;&nbsp;NtUserMessageCall</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a183">fnINOUTLPSCROLLINFO</a>&nbsp;&nbsp;&nbsp;NtUserMessageCall</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a184">fnINOUTLPWINDOWPOS</a>&nbsp;&nbsp;&nbsp;NtUserMessageCall</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a185">fnINOUTNCCALCSIZE</a>&nbsp;&nbsp;&nbsp;NtUserMessageCall</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a186">fnINOUTNEXTMENU</a>&nbsp;&nbsp;&nbsp;NtUserMessageCall</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a187">fnINOUTSTYLECHANGE</a>&nbsp;&nbsp;&nbsp;NtUserMessageCall</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a188">fnOPTOUTLPDWORDOPTOUTLPDWORD</a>&nbsp;&nbsp;&nbsp;NtUserMessageCall</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a189">fnOUTLPRECT</a>&nbsp;&nbsp;&nbsp;NtUserMessageCall</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a190">fnPOPTINLPUINT</a>&nbsp;&nbsp;&nbsp;NtUserMessageCall</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a191">fnPOUTLPINT</a>&nbsp;&nbsp;&nbsp;NtUserMessageCall</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a192">fnSENTDDEMSG</a>&nbsp;&nbsp;&nbsp;NtUserMessageCall</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a193">fnOUTDWORDINDWORD</a>&nbsp;&nbsp;&nbsp;NtUserMessageCall</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a194">fnINOUTMENUGETOBJECT</a>&nbsp;&nbsp;&nbsp;NtUserMessageCall</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a195">fnINCBOXSTRING</a>&nbsp;&nbsp;&nbsp;NtUserMessageCall</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a196">fnINCNTOUTSTRING</a>&nbsp;&nbsp;&nbsp;NtUserMessageCall</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a197">fnINCNTOUTSTRINGNULL</a>&nbsp;&nbsp;&nbsp;NtUserMessageCall</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a198">fnINLBOXSTRING</a>&nbsp;&nbsp;&nbsp;NtUserMessageCall</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a199">fnINLPMDICREATESTRUCT</a>&nbsp;&nbsp;&nbsp;NtUserMessageCall</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a200">fnINSTRING</a>&nbsp;&nbsp;&nbsp;NtUserMessageCall</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a201">fnINSTRINGNULL</a>&nbsp;&nbsp;&nbsp;NtUserMessageCall</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a202">fnINWPARAMCHAR</a>&nbsp;&nbsp;&nbsp;NtUserMessageCall</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a203">fnOUTCBOXSTRING</a>&nbsp;&nbsp;&nbsp;NtUserMessageCall</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a204">fnOUTLBOXSTRING</a>&nbsp;&nbsp;&nbsp;NtUserMessageCall</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a205">fnOUTSTRING</a>&nbsp;&nbsp;&nbsp;NtUserMessageCall</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a206">fnKERNELONLY</a>&nbsp;&nbsp;&nbsp;NtUserMessageCall</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a207">MESSAGEPROTO</a>(func)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a208">IsHooked</a>(pci, fsHook)&nbsp;&nbsp;&nbsp;((fsHook &amp; (pci-&gt;fsHooks | pci-&gt;pDeskInfo-&gt;fsHooks)) != 0)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a209">_SetWindowLongPtr</a>&nbsp;&nbsp;&nbsp;_SetWindowLong</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a210">_GetClassLongPtr</a>&nbsp;&nbsp;&nbsp;_GetClassLong</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a211">NtUserReleaseDC</a>(hwnd, hdc)&nbsp;&nbsp;&nbsp;NtUserCallOneParam((ULONG_PTR)(hdc), SFI__RELEASEDC)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a212">NtUserArrangeIconicWindows</a>(hwnd)&nbsp;&nbsp;&nbsp;(UINT)NtUserCallHwndLock((hwnd), SFI_XXXARRANGEICONICWINDOWS)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a213">NtUserBeginDeferWindowPos</a>(nNumWindows)&nbsp;&nbsp;&nbsp;(HANDLE)NtUserCallOneParam((nNumWindows),SFI__BEGINDEFERWINDOWPOS)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a214">NtUserCreateMenu</a>()&nbsp;&nbsp;&nbsp;(HMENU)NtUserCallNoParam(SFI__CREATEMENU)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a215">NtUserDestroyCaret</a>()&nbsp;&nbsp;&nbsp;(BOOL)NtUserCallNoParam(SFI_ZZZDESTROYCARET)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a216">NtUserEnableWindow</a>(hwnd, bEnable)&nbsp;&nbsp;&nbsp;(BOOL)NtUserCallHwndParamLock((hwnd), (bEnable),SFI_XXXENABLEWINDOW)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a217">NtUserGetMessagePos</a>()&nbsp;&nbsp;&nbsp;(<a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)NtUserCallNoParam(SFI__GETMESSAGEPOS)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a218">NtUserKillSystemTimer</a>(hwnd, nIDEvent)&nbsp;&nbsp;&nbsp;(BOOL)NtUserCallHwndParam((hwnd), (nIDEvent), SFI__KILLSYSTEMTIMER)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a219">NtUserMessageBeep</a>(wType)&nbsp;&nbsp;&nbsp;(BOOL)NtUserCallOneParam((wType), SFI_XXXMESSAGEBEEP)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a220">NtUserSetWindowContextHelpId</a>(hwnd, id)&nbsp;&nbsp;&nbsp;(BOOL)NtUserCallHwndParam((hwnd), (id), SFI__SETWINDOWCONTEXTHELPID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a221">NtUserGetWindowContextHelpId</a>(hwnd)&nbsp;&nbsp;&nbsp;(BOOL)NtUserCallHwnd((hwnd), SFI__GETWINDOWCONTEXTHELPID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a222">NtUserRedrawFrame</a>(hwnd)&nbsp;&nbsp;&nbsp;NtUserCallHwndLock((hwnd), SFI_XXXREDRAWFRAME)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a223">NtUserRedrawFrameAndHook</a>(hwnd)&nbsp;&nbsp;&nbsp;NtUserCallHwndLock((hwnd), SFI_XXXREDRAWFRAMEANDHOOK)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a224">NtUserRedrawTitle</a>(hwnd, wFlags)&nbsp;&nbsp;&nbsp;NtUserCallHwndParamLock((hwnd), (wFlags), SFI_XXXREDRAWTITLE)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a225">NtUserReleaseCapture</a>()&nbsp;&nbsp;&nbsp;(BOOL)NtUserCallNoParam(SFI_XXXRELEASECAPTURE)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a226">NtUserSetCaretPos</a>(X, Y)&nbsp;&nbsp;&nbsp;(BOOL)NtUserCallTwoParam((<a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)(X), (<a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)(Y), SFI_ZZZSETCARETPOS)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a227">NtUserSetCursorPos</a>(X, Y)&nbsp;&nbsp;&nbsp;(BOOL)NtUserCallTwoParam((X), (Y), SFI_ZZZSETCURSORPOS)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a228">NtUserSetForegroundWindow</a>(hwnd)&nbsp;&nbsp;&nbsp;(BOOL)NtUserCallHwndLock((hwnd), SFI_XXXSTUBSETFOREGROUNDWINDOW)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a229">NtUserSetSysMenu</a>(hwnd)&nbsp;&nbsp;&nbsp;NtUserCallHwndLock((hwnd), SFI_XXXSETSYSMENU)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a230">NtUserSetVisible</a>(hwnd, fSet)&nbsp;&nbsp;&nbsp;NtUserCallHwndParam((hwnd), (fSet), SFI_SETVISIBLE)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a231">NtUserShowCursor</a>(bShow)&nbsp;&nbsp;&nbsp;(int)NtUserCallOneParam((bShow), SFI_ZZZSHOWCURSOR)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a232">NtUserUpdateClientRect</a>(hwnd)&nbsp;&nbsp;&nbsp;NtUserCallHwndLock((hwnd), SFI_XXXUPDATECLIENTRECT)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a233">CreateCaret</a>&nbsp;&nbsp;&nbsp;NtUserCreateCaret</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a234">FillWindow</a>&nbsp;&nbsp;&nbsp;NtUserFillWindow</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a235">GetControlBrush</a>&nbsp;&nbsp;&nbsp;NtUserGetControlBrush</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a236">GetControlColor</a>&nbsp;&nbsp;&nbsp;NtUserGetControlColor</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a237">GetDCEx</a>&nbsp;&nbsp;&nbsp;NtUserGetDCEx</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a238">GetWindowPlacement</a>&nbsp;&nbsp;&nbsp;NtUserGetWindowPlacement</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a239">RedrawWindow</a>&nbsp;&nbsp;&nbsp;NtUserRedrawWindow</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a240">BFT_ICON</a>&nbsp;&nbsp;&nbsp;0x4349</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a241">BFT_BITMAP</a>&nbsp;&nbsp;&nbsp;0x4D42</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a242">BFT_CURSOR</a>&nbsp;&nbsp;&nbsp;0x5450</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a243">OFFSET_SCALE_DPI</a>&nbsp;&nbsp;&nbsp;000</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a244">OFFSET_96_DPI</a>&nbsp;&nbsp;&nbsp;100</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a245">OFFSET_120_DPI</a>&nbsp;&nbsp;&nbsp;200</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a246">OFFSET_160_DPI</a>&nbsp;&nbsp;&nbsp;300</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a247">MAX_RESOURCE_INDEX</a>&nbsp;&nbsp;&nbsp;32768</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a248">HILITEONLY</a>&nbsp;&nbsp;&nbsp;0x0001</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a249">SELONLY</a>&nbsp;&nbsp;&nbsp;0x0002</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a250">HILITEANDSEL</a>&nbsp;&nbsp;&nbsp;(HILITEONLY + SELONLY)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a251">HILITE</a>&nbsp;&nbsp;&nbsp;1</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a252">VERKEY_SLASH</a>&nbsp;&nbsp;&nbsp;0xBF   /* Vertual key for '/' character */</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a253">VERKEY_BACKSLASH</a>&nbsp;&nbsp;&nbsp;0xDC   /* Vertual key for '\' character */</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a254">MENUAPI_INSERT</a>&nbsp;&nbsp;&nbsp;0</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a255">MENUAPI_GET</a>&nbsp;&nbsp;&nbsp;1</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a256">MENUAPI_SET</a>&nbsp;&nbsp;&nbsp;2</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a257">WINDOWLIST_PROP_NAME</a>&nbsp;&nbsp;&nbsp;TEXT("SysBW")</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a258">MSGBOX_CALLBACK</a>&nbsp;&nbsp;&nbsp;TEXT("SysMB")</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a259">UNICODE_RLM</a>&nbsp;&nbsp;&nbsp;0x200f</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a260">MAXITEMS</a>&nbsp;&nbsp;&nbsp;10</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a261">WS_MDISTYLE</a>&nbsp;&nbsp;&nbsp;(WS_CHILD | WS_CLIPSIBLINGS | WS_SYSMENU|WS_CAPTION|WS_THICKFRAME|WS_MAXIMIZEBOX|WS_MINIMIZEBOX)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a262">WS_MDICOMMANDS</a>&nbsp;&nbsp;&nbsp;(WS_SYSMENU | WS_MINIMIZEBOX | WS_MAXIMIZEBOX)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a263">WS_MDIALLOWED</a>&nbsp;&nbsp;&nbsp;(WS_MINIMIZE | WS_MAXIMIZE | WS_CLIPCHILDREN | WS_DISABLED | WS_HSCROLL | WS_VSCROLL | 0x0000FFFFL)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a264">HAS_SBVERT</a>&nbsp;&nbsp;&nbsp;0x0100</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a265">HAS_SBHORZ</a>&nbsp;&nbsp;&nbsp;0x0200</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a266">OTHERMAXING</a>&nbsp;&nbsp;&nbsp;0x0400</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a267">CALCSCROLL</a>&nbsp;&nbsp;&nbsp;0x0800</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a268">SCROLLSUPPRESS</a>&nbsp;&nbsp;&nbsp;0x0003</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a269">SCROLLCOUNT</a>&nbsp;&nbsp;&nbsp;0x00FF</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a270">CKIDS</a>(pmdi)&nbsp;&nbsp;&nbsp;(pmdi-&gt;cKids)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a271">MAXED</a>(pmdi)&nbsp;&nbsp;&nbsp;(pmdi-&gt;hwndMaxedChild)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a272">ACTIVE</a>(pmdi)&nbsp;&nbsp;&nbsp;(pmdi-&gt;hwndActiveChild)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a273">WINDOW</a>(pmdi)&nbsp;&nbsp;&nbsp;(pmdi-&gt;hmenuWindow)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a274">FIRST</a>(pmdi)&nbsp;&nbsp;&nbsp;(pmdi-&gt;idFirstChild)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a275">SCROLL</a>(pmdi)&nbsp;&nbsp;&nbsp;(pmdi-&gt;wScroll)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a276">ITILELEVEL</a>(pmdi)&nbsp;&nbsp;&nbsp;(pmdi-&gt;iChildTileLevel)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a277">HTITLE</a>(pmdi)&nbsp;&nbsp;&nbsp;(pmdi-&gt;pTitle)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a278">PROP_MDICLIENT</a>&nbsp;&nbsp;&nbsp;MAKEINTRESOURCE(0x8CAC)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a279">MDIACTIVATE_PROP_NAME</a>&nbsp;&nbsp;&nbsp;TEXT("MDIA")</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a280">COM_NO_WINDOWS_H</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a281">RPC_NO_WINDOWS_H</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a282">OLEWONTLOAD</a>&nbsp;&nbsp;&nbsp;(HINSTANCE)IntToPtr(0xFFFFFFFF)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a283">UserCallbackReturn</a>&nbsp;&nbsp;&nbsp;NtCallbackReturn</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a284">RDRMODE_VERT</a>&nbsp;&nbsp;&nbsp;0x00000001</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a285">RDRMODE_HORZ</a>&nbsp;&nbsp;&nbsp;0x00000002</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a286">RDRMODE_DIAG</a>&nbsp;&nbsp;&nbsp;0x00000004</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a287">RDRCODE_START</a>&nbsp;&nbsp;&nbsp;1</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a288">RDRCODE_SCROLL</a>&nbsp;&nbsp;&nbsp;2</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a289">RDRCODE_END</a>&nbsp;&nbsp;&nbsp;3</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a290">GetDispatchDbcsInfo</a>()&nbsp;&nbsp;&nbsp;(&amp;(GetClientInfo()-&gt;achDbcsCF[0]))</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a291">GetForwardDbcsInfo</a>()&nbsp;&nbsp;&nbsp;(&amp;(GetClientInfo()-&gt;achDbcsCF[1]))</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a292">GetCallBackDbcsInfo</a>()&nbsp;&nbsp;&nbsp;(&amp;(GetClientInfo()-&gt;msgDbcsCB))</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a293">GET_DBCS_MESSAGE_IF_EXIST</a>(_apiName, _pmsg, _wMsgFilterMin, _wMsgFilterMax, bRemoveMsg)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a294">BUILD_DBCS_MESSAGE_TO_SERVER_FROM_CLIENTA</a>(_msg, _wParam, _RetVal)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a295">BUILD_DBCS_MESSAGE_TO_CLIENTW_FROM_CLIENTA</a>(_msg, _wParam, _RetVal)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a296">BUILD_DBCS_MESSAGE_TO_CLIENTA_FROM_SERVER</a>(_pmsg, _dwAnsi, _bIrDbcsFormat, bSaveMsg)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a297">BUILD_DBCS_MESSAGE_TO_CLIENTW_FROM_SERVER</a>(_msg, _wParam)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a298">BUILD_DBCS_MESSAGE_TO_CLIENTA_FROM_CLIENTW</a>(_hwnd, _msg, _wParam, _lParam, _time, _pt, _bDbcs)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a299">DISPATCH_DBCS_MESSAGE_IF_EXIST</a>(_msg, _wParam, _bDbcs, _apiName)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a300">CalcAnsiStringLengthW</a>(_unicodestring, _unicodeLength, _ansiLength)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a301">CalcAnsiStringLengthA</a>(_ansistring, _unicodeLength, _ansiLength)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a302">CalcUnicodeStringLengthA</a>(_ansistring, _ansiLength, _unicodeLength)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a303">CalcUnicodeStringLengthW</a>(_unicodestring, _ansiLength, _unicodeLength)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a304">fpImmAssociateContext</a>&nbsp;&nbsp;&nbsp;<a class="el" href="../../d6/d0/usercli_8h.html#a404">gImmApiEntries</a>.ImmAssociateContext</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a305">fpImmEscapeA</a>&nbsp;&nbsp;&nbsp;<a class="el" href="../../d6/d0/usercli_8h.html#a404">gImmApiEntries</a>.ImmEscapeA</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a306">fpImmEscapeW</a>&nbsp;&nbsp;&nbsp;<a class="el" href="../../d6/d0/usercli_8h.html#a404">gImmApiEntries</a>.ImmEscapeW</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a307">fpImmGetContext</a>&nbsp;&nbsp;&nbsp;<a class="el" href="../../d6/d0/usercli_8h.html#a404">gImmApiEntries</a>.ImmGetContext</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a308">fpImmGetCompositionStringA</a>&nbsp;&nbsp;&nbsp;<a class="el" href="../../d6/d0/usercli_8h.html#a404">gImmApiEntries</a>.ImmGetCompositionStringA</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a309">fpImmGetCompositionStringW</a>&nbsp;&nbsp;&nbsp;<a class="el" href="../../d6/d0/usercli_8h.html#a404">gImmApiEntries</a>.ImmGetCompositionStringW</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a310">fpImmGetCompositionWindow</a>&nbsp;&nbsp;&nbsp;<a class="el" href="../../d6/d0/usercli_8h.html#a404">gImmApiEntries</a>.ImmGetCompositionWindow</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a311">fpImmGetDefaultIMEWnd</a>&nbsp;&nbsp;&nbsp;<a class="el" href="../../d6/d0/usercli_8h.html#a404">gImmApiEntries</a>.ImmGetDefaultIMEWnd</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a312">fpImmIsIME</a>&nbsp;&nbsp;&nbsp;<a class="el" href="../../d6/d0/usercli_8h.html#a404">gImmApiEntries</a>.ImmIsIME</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a313">fpImmLockIMC</a>&nbsp;&nbsp;&nbsp;<a class="el" href="../../d6/d0/usercli_8h.html#a404">gImmApiEntries</a>.ImmLockIMC</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a314">fpImmReleaseContext</a>&nbsp;&nbsp;&nbsp;<a class="el" href="../../d6/d0/usercli_8h.html#a404">gImmApiEntries</a>.ImmReleaseContext</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a315">fpImmRegisterClient</a>&nbsp;&nbsp;&nbsp;<a class="el" href="../../d6/d0/usercli_8h.html#a404">gImmApiEntries</a>.ImmRegisterClient</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a316">fpImmGetCompositionFontW</a>&nbsp;&nbsp;&nbsp;<a class="el" href="../../d6/d0/usercli_8h.html#a404">gImmApiEntries</a>.ImmGetCompositionFontW</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a317">fpImmGetCompositionFontA</a>&nbsp;&nbsp;&nbsp;<a class="el" href="../../d6/d0/usercli_8h.html#a404">gImmApiEntries</a>.ImmGetCompositionFontA</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a318">fpImmSetCompositionFontW</a>&nbsp;&nbsp;&nbsp;<a class="el" href="../../d6/d0/usercli_8h.html#a404">gImmApiEntries</a>.ImmSetCompositionFontW</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a319">fpImmSetCompositionFontA</a>&nbsp;&nbsp;&nbsp;<a class="el" href="../../d6/d0/usercli_8h.html#a404">gImmApiEntries</a>.ImmSetCompositionFontA</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a320">fpImmSetCompositionFont</a>&nbsp;&nbsp;&nbsp;<a class="el" href="../../d6/d0/usercli_8h.html#a404">gImmApiEntries</a>.ImmSetCompositionFont</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a321">fpImmSetCompositionWindow</a>&nbsp;&nbsp;&nbsp;<a class="el" href="../../d6/d0/usercli_8h.html#a404">gImmApiEntries</a>.ImmSetCompositionWindow</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a322">fpImmNotifyIME</a>&nbsp;&nbsp;&nbsp;<a class="el" href="../../d6/d0/usercli_8h.html#a404">gImmApiEntries</a>.ImmNotifyIME</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a323">fpImmUnlockIMC</a>&nbsp;&nbsp;&nbsp;<a class="el" href="../../d6/d0/usercli_8h.html#a404">gImmApiEntries</a>.ImmUnlockIMC</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a324">fpImmLoadIME</a>&nbsp;&nbsp;&nbsp;<a class="el" href="../../d6/d0/usercli_8h.html#a404">gImmApiEntries</a>.ImmLoadIME</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a325">fpImmSetOpenStatus</a>&nbsp;&nbsp;&nbsp;<a class="el" href="../../d6/d0/usercli_8h.html#a404">gImmApiEntries</a>.ImmSetOpenStatus</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a326">fpImmFreeLayout</a>&nbsp;&nbsp;&nbsp;<a class="el" href="../../d6/d0/usercli_8h.html#a404">gImmApiEntries</a>.ImmFreeLayout</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a327">fpImmActivateLayout</a>&nbsp;&nbsp;&nbsp;<a class="el" href="../../d6/d0/usercli_8h.html#a404">gImmApiEntries</a>.ImmActivateLayout</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a328">fpImmSetCandidateWindow</a>&nbsp;&nbsp;&nbsp;<a class="el" href="../../d6/d0/usercli_8h.html#a404">gImmApiEntries</a>.ImmSetCandidateWindow</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a329">fpImmConfigureIMEW</a>&nbsp;&nbsp;&nbsp;<a class="el" href="../../d6/d0/usercli_8h.html#a404">gImmApiEntries</a>.ImmConfigureIMEW</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a330">fpImmGetConversionStatus</a>&nbsp;&nbsp;&nbsp;<a class="el" href="../../d6/d0/usercli_8h.html#a404">gImmApiEntries</a>.ImmGetConversionStatus</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a331">fpImmSetConversionStatus</a>&nbsp;&nbsp;&nbsp;<a class="el" href="../../d6/d0/usercli_8h.html#a404">gImmApiEntries</a>.ImmSetConversionStatus</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a332">fpImmSetStatusWindowPos</a>&nbsp;&nbsp;&nbsp;<a class="el" href="../../d6/d0/usercli_8h.html#a404">gImmApiEntries</a>.ImmSetStatusWindowPos</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a333">fpImmGetImeInfoEx</a>&nbsp;&nbsp;&nbsp;<a class="el" href="../../d6/d0/usercli_8h.html#a404">gImmApiEntries</a>.ImmGetImeInfoEx</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a334">fpImmLockImeDpi</a>&nbsp;&nbsp;&nbsp;<a class="el" href="../../d6/d0/usercli_8h.html#a404">gImmApiEntries</a>.ImmLockImeDpi</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a335">fpImmUnlockImeDpi</a>&nbsp;&nbsp;&nbsp;<a class="el" href="../../d6/d0/usercli_8h.html#a404">gImmApiEntries</a>.ImmUnlockImeDpi</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a336">fpImmGetOpenStatus</a>&nbsp;&nbsp;&nbsp;<a class="el" href="../../d6/d0/usercli_8h.html#a404">gImmApiEntries</a>.ImmGetOpenStatus</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a337">fpImmSetActiveContext</a>&nbsp;&nbsp;&nbsp;<a class="el" href="../../d6/d0/usercli_8h.html#a404">gImmApiEntries</a>.ImmSetActiveContext</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a338">fpImmTranslateMessage</a>&nbsp;&nbsp;&nbsp;<a class="el" href="../../d6/d0/usercli_8h.html#a404">gImmApiEntries</a>.ImmTranslateMessage</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a339">fpImmLoadLayout</a>&nbsp;&nbsp;&nbsp;<a class="el" href="../../d6/d0/usercli_8h.html#a404">gImmApiEntries</a>.ImmLoadLayout</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a340">fpImmProcessKey</a>&nbsp;&nbsp;&nbsp;<a class="el" href="../../d6/d0/usercli_8h.html#a404">gImmApiEntries</a>.ImmProcessKey</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a341">fpImmPutImeMenuItemsIntoMappedFile</a>&nbsp;&nbsp;&nbsp;<a class="el" href="../../d6/d0/usercli_8h.html#a404">gImmApiEntries</a>.ImmPutImeMenuItemsIntoMappedFile</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a342">fpImmGetProperty</a>&nbsp;&nbsp;&nbsp;<a class="el" href="../../d6/d0/usercli_8h.html#a404">gImmApiEntries</a>.ImmGetProperty</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a343">fpImmSetCompositionStringA</a>&nbsp;&nbsp;&nbsp;<a class="el" href="../../d6/d0/usercli_8h.html#a404">gImmApiEntries</a>.ImmSetCompositionStringA</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a344">fpImmSetCompositionStringW</a>&nbsp;&nbsp;&nbsp;<a class="el" href="../../d6/d0/usercli_8h.html#a404">gImmApiEntries</a>.ImmSetCompositionStringW</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a345">fpImmEnumInputContext</a>&nbsp;&nbsp;&nbsp;<a class="el" href="../../d6/d0/usercli_8h.html#a404">gImmApiEntries</a>.ImmEnumInputContext</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a346">fpImmSystemHandler</a>&nbsp;&nbsp;&nbsp;<a class="el" href="../../d6/d0/usercli_8h.html#a404">gImmApiEntries</a>.ImmSystemHandler</td></tr>

<tr><td colspan=2><br><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>typedef LRESULT(APIENTRY *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a347">CFNSCSENDMESSAGE</a> )(HWND, UINT, WPARAM, LPARAM, ULONG_PTR, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>, BOOL)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef int(WINAPI *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a348">GENERICPROC</a> )()</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d8/d1/struct__IN__STRING.html">_IN_STRING</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a350">IN_STRING</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d8/d1/struct__IN__STRING.html">_IN_STRING</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a351">PIN_STRING</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d8/d8/struct__LARGE__IN__STRING.html">_LARGE_IN_STRING</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a352">LARGE_IN_STRING</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d8/d8/struct__LARGE__IN__STRING.html">_LARGE_IN_STRING</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a353">PLARGE_IN_STRING</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d2/d4/struct__LOOKASIDE.html">_LOOKASIDE</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a354">LOOKASIDE</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d2/d4/struct__LOOKASIDE.html">_LOOKASIDE</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a355">PLOOKASIDE</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d5/d1/struct__TL.html">_TL</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a356">TL</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d9/d8/structtagUNDO.html">tagUNDO</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a357">UNDO</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d9/d8/structtagUNDO.html">tagUNDO</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a358">PUNDO</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d3/d4/structtagED.html">tagED</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a359">ED</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d3/d4/structtagED.html">tagED</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a360">PED</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d3/d4/structtagED.html">tagED</a> **&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a361">PPED</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d4/d4/structtagEDITWND.html">tagEDITWND</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a362">EDITWND</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d4/d4/structtagEDITWND.html">tagEDITWND</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a363">PEDITWND</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d7/d8/structtagBLOCK.html">tagBLOCK</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a364">BLOCK</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d7/d8/structtagBLOCK.html">tagBLOCK</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a365">LPBLOCK</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d6/d7/structSTRIPINFO.html">STRIPINFO</a> FAR *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a366">LPSTRIPINFO</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d6/d9/structtagLBItem.html">tagLBItem</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a367">LBItem</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d6/d9/structtagLBItem.html">tagLBItem</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a368">lpLBItem</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d8/d9/structtagLBODItem.html">tagLBODItem</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a369">LBODItem</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d8/d9/structtagLBODItem.html">tagLBODItem</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a370">lpLBODItem</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d1/d7/structtagSTAT.html">tagSTAT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a371">STAT</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d1/d7/structtagSTAT.html">tagSTAT</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a372">PSTAT</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d3/d7/structtagSTATWND.html">tagSTATWND</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a373">STATWND</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d3/d7/structtagSTATWND.html">tagSTATWND</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a374">PSTATWND</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d0/d2/structtagCURSORRESOURCE.html">tagCURSORRESOURCE</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a375">CURSORRESOURCE</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d0/d2/structtagCURSORRESOURCE.html">tagCURSORRESOURCE</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a376">PCURSORRESOURCE</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef BITMAPINFO UNALIGNED *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a377">UPBITMAPINFO</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef BITMAPINFOHEADER UNALIGNED *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a378">UPBITMAPINFOHEADER</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef BITMAPCOREHEADER UNALIGNED *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a379">UPBITMAPCOREHEADER</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d1/d2/struct__FILEINFO.html">_FILEINFO</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a380">FILEINFO</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d1/d2/struct__FILEINFO.html">_FILEINFO</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a381">PFILEINFO</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d5/d6/structtagSHORTCREATE.html">tagSHORTCREATE</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a382">SHORTCREATE</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d5/d6/structtagSHORTCREATE.html">tagSHORTCREATE</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a383">PSHORTCREATE</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d9/d0/structtagMDIACTIVATEPOS.html">tagMDIACTIVATEPOS</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a384">MDIACTIVATEPOS</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d9/d0/structtagMDIACTIVATEPOS.html">tagMDIACTIVATEPOS</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a385">PMDIACTIVATEPOS</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef HRESULT(*&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a386">OLEINITIALIZEPROC</a> )(<a class="el" href="../../d0/d5/perfuser_8c.html#a5">LPVOID</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef HRESULT(*&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a387">OLEUNINITIALIZEPROC</a> )(VOID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef HRESULT(*&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a388">REGISTERDDPROC</a> )(HWND, LPDROPTARGET)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef HRESULT(*&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a389">REVOKEDDPROC</a> )(HWND)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef HRESULT(*&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a390">DODDPROC</a> )(LPDATAOBJECT, LPDROPSOURCE, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>, LPDWORD)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d8/d1/structtagMNIDROPTARGET.html">tagMNIDROPTARGET</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a391">MNIDROPTARGET</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d8/d1/structtagMNIDROPTARGET.html">tagMNIDROPTARGET</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a392">PMNIDROPTARGET</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d9/d5/structtagGETPROCINFO.html">tagGETPROCINFO</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a393">GETPROCINFO</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d9/d7/structtagACCELCACHE.html">tagACCELCACHE</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a394">ACCELCACHE</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d9/d7/structtagACCELCACHE.html">tagACCELCACHE</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a395">PACCELCACHE</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef LONG(CALLBACK *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a396">READERMODEPROC</a> )(LPARAM lParam, int nCode, int dx, int dy)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d0/d5/structtagREADERMODE.html">tagREADERMODE</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a397">READERMODE</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d0/d5/structtagREADERMODE.html">tagREADERMODE</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a398">PREADERMODE</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d0/d5/structtagREADERMODE.html">tagREADERMODE</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a399">LPREADERMODE</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d9/d4/structtagREADERINFO.html">tagREADERINFO</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a400">READERINFO</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d9/d4/structtagREADERINFO.html">tagREADERINFO</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a401">PREADERINFO</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d1/d5/structtagREADERWND.html">tagREADERWND</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a402">READERWND</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d1/d5/structtagREADERWND.html">tagREADERWND</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a403">PREADERWND</a></td></tr>

<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a406">InitLookaside</a> (<a class="el" href="../../d2/d4/struct__LOOKASIDE.html">PLOOKASIDE</a> pla, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> cbEntry, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> cEntries)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>PVOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a407">AllocLookasideEntry</a> (<a class="el" href="../../d2/d4/struct__LOOKASIDE.html">PLOOKASIDE</a> pla)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a408">FreeLookasideEntry</a> (<a class="el" href="../../d2/d4/struct__LOOKASIDE.html">PLOOKASIDE</a> pla, PVOID pEntry)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a409">LBEvent</a> (<a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>, UINT, int)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a410">Event</a> (<a class="el" href="../../d7/d4/structtagEVENT__PACKET.html">PEVENT_PACKET</a> pep)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>PVOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a411">CsValidateInstance</a> (HANDLE <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a0">hInst</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a412">_FreeResource</a> (HANDLE hResData, HINSTANCE hModule)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LPSTR APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a413">_LockResource</a> (HANDLE hResData, HINSTANCE hModule)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a414">_UnlockResource</a> (HANDLE hResData, HINSTANCE hModule)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>HANDLE&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a415">LocalReallocSafe</a> (HANDLE hMem, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwBytes, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> <a class="el" href="../../d3/d8/propapi_8h.html#a34">dwFlags</a>, <a class="el" href="../../d3/d4/structtagED.html">PPED</a> pped)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>HLOCAL WINAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a416">DispatchLocalAlloc</a> (UINT uFlags, UINT uBytes, HANDLE hInstance)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>HLOCAL WINAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a417">DispatchLocalReAlloc</a> (HLOCAL hMem, UINT uBytes, UINT uFlags, HANDLE hInstance, PVOID *ppv)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a5">LPVOID</a> WINAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a418">DispatchLocalLock</a> (HLOCAL hMem, HANDLE hInstance)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL WINAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a419">DispatchLocalUnlock</a> (HLOCAL hMem, HANDLE hInstance)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>UINT WINAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a420">DispatchLocalSize</a> (HLOCAL hMem, HANDLE hInstance)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>HLOCAL WINAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a421">DispatchLocalFree</a> (HLOCAL hMem, HANDLE hInstance)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LONG&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a422">TabTextOut</a> (HDC hdc, int x, int y, LPCWSTR lpstring, int nCount, int nTabPositions, CONST <a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a> *lpTabPositions, int iTabOrigin, BOOL fDrawTheText, int iCharset)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LONG&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a423">UserLpkTabbedTextOut</a> (HDC hdc, int x, int y, LPCWSTR lpstring, int nCount, int nTabPositions, CONST <a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a> *lpTabPositions, int iTabOrigin, BOOL fDrawTheText, int cxCharWidth, int cyCharHeight, int iCharset)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a424">UserLpkPSMTextOut</a> (HDC hdc, int xLeft, int yTop, LPWSTR lpsz, int cch, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> <a class="el" href="../../d3/d8/propapi_8h.html#a34">dwFlags</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a425">PSMTextOut</a> (HDC hdc, int xLeft, int yTop, LPWSTR lpsz, int cch, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> <a class="el" href="../../d3/d8/propapi_8h.html#a34">dwFlags</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a426">ECUpdateFormat</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a> ped, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwStyle, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwExStyle)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a427">LoadStringOrError</a> (HANDLE, UINT, LPTSTR, int, WORD)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a428">RtlGetIdFromDirectory</a> (<a class="el" href="../../d9/d7/halvprnt_8c.html#a1">PBYTE</a>, BOOL, int, int, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>, PDWORD)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a429">RtlCaptureAnsiString</a> (<a class="el" href="../../d8/d1/struct__IN__STRING.html">PIN_STRING</a>, LPCSTR, BOOL)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a430">RtlCaptureLargeAnsiString</a> (<a class="el" href="../../d8/d8/struct__LARGE__IN__STRING.html">PLARGE_IN_STRING</a>, LPCSTR, BOOL)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d6/d9/structtagWND.html">PWND</a> FASTCALL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a431">ValidateHwnd</a> (HWND hwnd)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d6/d9/structtagWND.html">PWND</a> FASTCALL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a432">ValidateHwndNoRip</a> (HWND hwnd)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>PSTR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a433">ECLock</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a> ped)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a434">ECUnlock</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a> ped)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a435">ECNcCreate</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a>, <a class="el" href="../../d6/d9/structtagWND.html">PWND</a>, LPCREATESTRUCT)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a436">ECInvalidateClient</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a> ped, BOOL fErase)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a437">ECCreate</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a> ped, LONG windowStyle)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a438">ECWord</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a>, <a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>, BOOL, <a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a> *, <a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a> *)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a439">ECFindTab</a> (LPSTR, <a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a440">ECNcDestroyHandler</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a>, <a class="el" href="../../d3/d4/structtagED.html">PED</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a441">ECSetText</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a>, LPSTR)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a442">ECSetPasswordChar</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a>, UINT)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a443">ECCchInWidth</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a>, HDC, LPSTR, <a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>, int, BOOL)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a444">ECEmptyUndo</a> (<a class="el" href="../../d9/d8/structtagUNDO.html">PUNDO</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a445">ECSaveUndo</a> (<a class="el" href="../../d9/d8/structtagUNDO.html">PUNDO</a> pundoFrom, <a class="el" href="../../d9/d8/structtagUNDO.html">PUNDO</a> pundoTo, BOOL fClear)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a446">ECInsertText</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a>, LPSTR, <a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a> *)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a447">ECDeleteText</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a448">ECResetTextInfo</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a> ped)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a449">ECNotifyParent</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a>, int)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a450">ECSetEditClip</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a>, HDC, BOOL)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>HDC&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a451">ECGetEditDC</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a>, BOOL)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a452">ECReleaseEditDC</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a>, HDC, BOOL)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a453">ECGetText</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a>, <a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>, LPSTR, BOOL)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a454">ECSetFont</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a>, HFONT, BOOL)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a455">ECSetMargin</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a>, UINT, long, BOOL)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a456">ECCopy</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a457">ECCalcChangeSelection</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a>, <a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>, <a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>, <a class="el" href="../../d7/d8/structtagBLOCK.html">LPBLOCK</a>, <a class="el" href="../../d7/d8/structtagBLOCK.html">LPBLOCK</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a458">ECFindXORblks</a> (<a class="el" href="../../d7/d8/structtagBLOCK.html">LPBLOCK</a>, <a class="el" href="../../d7/d8/structtagBLOCK.html">LPBLOCK</a>, <a class="el" href="../../d7/d8/structtagBLOCK.html">LPBLOCK</a>, <a class="el" href="../../d7/d8/structtagBLOCK.html">LPBLOCK</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a459">ECIsCharNumeric</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a> ped, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> keyPress)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>WORD&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a460">DbcsCombine</a> (HWND, WORD)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a461">ECAdjustIch</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a>, LPSTR, <a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a462">ECAdjustIchNext</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a>, LPSTR, <a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a463">ECGetDBCSVector</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a>, HDC, <a class="el" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a464">ECIsDBCSLeadByte</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a>, <a class="el" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LPSTR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a465">ECAnsiNext</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a>, LPSTR)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LPSTR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a466">ECAnsiPrev</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a>, LPSTR, LPSTR)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a467">ECPrevIch</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a>, LPSTR, <a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a468">ECNextIch</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a>, LPSTR, <a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a469">ECEnableDisableIME</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a> ped)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a470">ECImmSetCompositionFont</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a> ped)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a471">ECImmSetCompositionWindow</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a> ped, LONG, LONG)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a472">ECSetCaretHandler</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a> ped)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a473">ECInitInsert</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a> ped, HKL hkl)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LRESULT&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a474">ECImeComposition</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a> ped, WPARAM wParam, LPARAM lParam)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LRESULT&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a475">EcImeRequestHandler</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a>, WPARAM, LPARAM)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a476">HanjaKeyHandler</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a> ped)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a477">ECInOutReconversionMode</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a> ped, BOOL fIn)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>UINT&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a478">ECTabTheTextOut</a> (HDC, int, int, int, int, LPSTR, int, <a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>, <a class="el" href="../../d3/d4/structtagED.html">PED</a>, int, BOOL, <a class="el" href="../../d6/d0/usercli_8h.html#a366">LPSTRIPINFO</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>HBRUSH&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a479">ECGetControlBrush</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a>, HDC, LONG)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>HBRUSH&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a480">ECGetBrush</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a> ped, HDC hdc)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a481">ECGetModKeys</a> (int)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a482">ECSize</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a>, LPRECT, BOOL)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a483">MLInsertText</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a>, LPSTR, <a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>, BOOL)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a484">MLDeleteText</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a485">MLEnsureCaretVisible</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a486">MLDrawText</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a>, HDC, <a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>, <a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>, BOOL)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a487">MLDrawLine</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a>, HDC, int, <a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>, int, BOOL)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a488">MLPaintABlock</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a>, HDC, int, int)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a489">GetBlkEndLine</a> (int, int, BOOL FAR *, int, int)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a490">MLBuildchLines</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a>, <a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>, int, BOOL, PLONG, PLONG)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a491">MLShiftchLines</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a>, <a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>, int)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a492">MLInsertchLine</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a>, <a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>, <a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>, BOOL)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a493">MLSetCaretPosition</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a>, HDC)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a494">MLIchToXYPos</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a>, HDC, <a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>, BOOL, LPPOINT)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a495">MLIchToLine</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a>, <a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a496">MLRepaintChangedSelection</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a>, HDC, <a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>, <a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a497">MLMouseMotion</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a>, UINT, UINT, LPPOINT)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a498">MLLine</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a>, <a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a499">MLStripCrCrLf</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a500">MLCalcXOffset</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a>, HDC, int)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a501">MLUndo</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LRESULT&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a502">MLEditWndProc</a> (HWND, <a class="el" href="../../d3/d4/structtagED.html">PED</a>, UINT, WPARAM, LPARAM)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a503">MLChar</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a>, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>, int)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a504">MLKeyDown</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a>, UINT, int)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a505">MLPasteText</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a506">MLSetSelection</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a>, BOOL, <a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>, <a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LONG&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a507">MLCreate</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a>, LPCREATESTRUCT)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a508">MLInsertCrCrLf</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a509">MLSetHandle</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a>, HANDLE)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LONG&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a510">MLGetLine</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a>, <a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>, <a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>, LPSTR)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a511">MLLineIndex</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a>, <a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a512">MLSize</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a>, BOOL)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a513">MLChangeSelection</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a>, HDC, <a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>, <a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a514">MLSetRectHandler</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a>, LPRECT)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a515">MLExpandTabs</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a516">MLSetTabStops</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a>, int, LPINT)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LONG&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a517">MLScroll</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a>, BOOL, int, int, BOOL)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a518">MLThumbPosFromPed</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a>, BOOL)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a519">MLUpdateiCaretLine</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a> ped)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a520">MLLineLength</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a>, <a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a521">MLReplaceSel</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a>, LPSTR)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a522">SLReplaceSel</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a>, LPSTR)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a523">SLUndo</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a524">SLSetCaretPosition</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a>, HDC)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a525">SLIchToLeftXPos</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a>, HDC, <a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a526">SLChangeSelection</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a>, HDC, <a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>, <a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a527">SLDrawText</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a>, HDC, <a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a528">SLDrawLine</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a>, HDC, int, int, <a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>, int, BOOL)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a529">SLGetBlkEnd</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a>, <a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>, <a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>, BOOL FAR *)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a530">SLScrollText</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a>, HDC)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a531">SLSetSelection</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a>, <a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>, <a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a532">SLInsertText</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a>, LPSTR, <a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a533">SLPasteText</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a534">SLChar</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a>, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a535">SLKeyDown</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a>, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>, int)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a536">SLMouseToIch</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a>, HDC, LPPOINT)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a537">SLMouseMotion</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a>, UINT, UINT, LPPOINT)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LONG&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a538">SLCreate</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a>, LPCREATESTRUCT)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">!! CREATESTRUCT AorW and in other routines  <a href="#a538"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a539">SLPaint</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a>, HDC)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a540">SLSetFocus</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a541">SLKillFocus</a> (<a class="el" href="../../d3/d4/structtagED.html">PED</a>, HWND)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LRESULT&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a542">SLEditWndProc</a> (HWND, <a class="el" href="../../d3/d4/structtagED.html">PED</a>, UINT, WPARAM, LPARAM)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LRESULT&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a543">EditWndProc</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a>, UINT, WPARAM, LPARAM)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>UINT&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a544">HelpMenu</a> (HWND hwnd, PPOINT ppt)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a545">InitClientDrawing</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a546">InternalScrollWindowEx</a> (HWND hwnd, int dx, int dy, CONST RECT *prcScroll, CONST RECT *prcClip, HRGN hrgnUpdate, LPRECT prcUpdate, UINT <a class="el" href="../../d3/d8/propapi_8h.html#a34">dwFlags</a>, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwTime)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a547">IsMetaFile</a> (HDC hdc)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a548">DrawDiagonal</a> (HDC hdc, LPRECT lprc, HBRUSH hbrTL, HBRUSH hbrBR, UINT flags)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a549">FillTriangle</a> (HDC hdc, LPRECT lprc, HBRUSH hbr, UINT flags)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a550">_ClientFreeLibrary</a> (HANDLE hmod)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a551">_ClientGetListboxString</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, UINT <a class="el" href="../../d2/d1/userexts_8c.html#a129">msg</a>, WPARAM wParam, LPSTR lParam, ULONG_PTR xParam, PROC xpfn)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LPHLP&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a552">HFill</a> (LPCSTR lpszHelp, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> ulCommand, ULONG_PTR ulData)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a553">SetVideoTimeout</a> (<a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwVideoTimeout)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a554">_GetWindowLong</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, int index, BOOL bAnsi)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>WORD&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a555">_GetWindowWord</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, int index)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>HWND&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a556">InternalFindWindowExA</a> (HWND hwndParent, HWND hwndChild, LPCSTR pClassName, LPCSTR pWindowName, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwFlag)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>HWND&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a557">InternalFindWindowExW</a> (HWND hwndParent, HWND hwndChild, LPCTSTR pClassName, LPCTSTR pWindowName, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwFlag)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a558">MESSAGEPROTO</a> (COPYGLOBALDATA)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a559">MESSAGEPROTO</a> (INDEVICECHANGE)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a560">MESSAGEPROTO</a> (INPAINTCLIPBRD)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a561">MESSAGEPROTO</a> (INSIZECLIPBRD)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a562">MESSAGEPROTO</a> (IMECONTROL)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a563">MESSAGEPROTO</a> (IMEREQUEST)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a564">MESSAGEPROTO</a> (INWPARAMDBCSCHAR)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a565">MESSAGEPROTO</a> (EMGETSEL)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a566">MESSAGEPROTO</a> (EMSETSEL)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a567">MESSAGEPROTO</a> (CBGETEDITSEL)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LRESULT&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a568">fnHkINLPCWPSTRUCTW</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, UINT message, WPARAM wParam, LPARAM lParam, ULONG_PTR xParam)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LRESULT&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a569">fnHkINLPCWPSTRUCTA</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, UINT message, WPARAM wParam, LPARAM lParam, ULONG_PTR xParam)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LRESULT&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a570">fnHkINLPCWPRETSTRUCTW</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, UINT message, WPARAM wParam, LPARAM lParam, ULONG_PTR xParam)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LRESULT&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a571">fnHkINLPCWPRETSTRUCTA</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, UINT message, WPARAM wParam, LPARAM lParam, ULONG_PTR xParam)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LRESULT&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a572">DispatchHookW</a> (int dw, WPARAM wParam, LPARAM lParam, HOOKPROC pfn)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LRESULT&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a573">DispatchHookA</a> (int dw, WPARAM wParam, LPARAM lParam, HOOKPROC pfn)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LRESULT APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a574">ButtonWndProcA</a> (HWND hwnd, UINT <a class="el" href="../../d2/d1/userexts_8c.html#a129">msg</a>, WPARAM wParam, LPARAM lParam)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LRESULT APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a575">ButtonWndProcW</a> (HWND hwnd, UINT <a class="el" href="../../d2/d1/userexts_8c.html#a129">msg</a>, WPARAM wParam, LPARAM lParam)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LRESULT APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a576">MenuWndProcA</a> (HWND hwnd, UINT <a class="el" href="../../d2/d1/userexts_8c.html#a129">msg</a>, WPARAM wParam, LPARAM lParam)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LRESULT APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a577">MenuWndProcW</a> (HWND hwnd, UINT <a class="el" href="../../d2/d1/userexts_8c.html#a129">msg</a>, WPARAM wParam, LPARAM lParam)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LRESULT APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a578">DesktopWndProcA</a> (HWND hwnd, UINT <a class="el" href="../../d2/d1/userexts_8c.html#a129">msg</a>, WPARAM wParam, LPARAM lParam)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LRESULT APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a579">DesktopWndProcW</a> (HWND hwnd, UINT <a class="el" href="../../d2/d1/userexts_8c.html#a129">msg</a>, WPARAM wParam, LPARAM lParam)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LRESULT APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a580">ScrollBarWndProcA</a> (HWND hwnd, UINT <a class="el" href="../../d2/d1/userexts_8c.html#a129">msg</a>, WPARAM wParam, LPARAM lParam)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LRESULT APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a581">ScrollBarWndProcW</a> (HWND hwnd, UINT <a class="el" href="../../d2/d1/userexts_8c.html#a129">msg</a>, WPARAM wParam, LPARAM lParam)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LRESULT APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a582">ListBoxWndProcA</a> (HWND hwnd, UINT <a class="el" href="../../d2/d1/userexts_8c.html#a129">msg</a>, WPARAM wParam, LPARAM lParam)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LRESULT APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a583">ListBoxWndProcW</a> (HWND hwnd, UINT <a class="el" href="../../d2/d1/userexts_8c.html#a129">msg</a>, WPARAM wParam, LPARAM lParam)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LRESULT APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a584">StaticWndProcA</a> (HWND hwnd, UINT <a class="el" href="../../d2/d1/userexts_8c.html#a129">msg</a>, WPARAM wParam, LPARAM lParam)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LRESULT APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a585">StaticWndProcW</a> (HWND hwnd, UINT <a class="el" href="../../d2/d1/userexts_8c.html#a129">msg</a>, WPARAM wParam, LPARAM lParam)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LRESULT APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a586">ComboBoxWndProcA</a> (HWND hwnd, UINT <a class="el" href="../../d2/d1/userexts_8c.html#a129">msg</a>, WPARAM wParam, LPARAM lParam)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LRESULT APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a587">ComboBoxWndProcW</a> (HWND hwnd, UINT <a class="el" href="../../d2/d1/userexts_8c.html#a129">msg</a>, WPARAM wParam, LPARAM lParam)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LRESULT APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a588">ComboListBoxWndProcA</a> (HWND hwnd, UINT <a class="el" href="../../d2/d1/userexts_8c.html#a129">msg</a>, WPARAM wParam, LPARAM lParam)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LRESULT APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a589">ComboListBoxWndProcW</a> (HWND hwnd, UINT <a class="el" href="../../d2/d1/userexts_8c.html#a129">msg</a>, WPARAM wParam, LPARAM lParam)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LRESULT APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a590">MDIClientWndProcA</a> (HWND hwnd, UINT <a class="el" href="../../d2/d1/userexts_8c.html#a129">msg</a>, WPARAM wParam, LPARAM lParam)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LRESULT APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a591">MDIClientWndProcW</a> (HWND hwnd, UINT <a class="el" href="../../d2/d1/userexts_8c.html#a129">msg</a>, WPARAM wParam, LPARAM lParam)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>INT_PTR APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a592">MB_DlgProcA</a> (HWND hwnd, UINT <a class="el" href="../../d2/d1/userexts_8c.html#a129">msg</a>, WPARAM wParam, LPARAM lParam)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>INT_PTR APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a593">MB_DlgProcW</a> (HWND hwnd, UINT <a class="el" href="../../d2/d1/userexts_8c.html#a129">msg</a>, WPARAM wParam, LPARAM lParam)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>INT_PTR APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a594">MDIActivateDlgProcA</a> (HWND hwnd, UINT <a class="el" href="../../d2/d1/userexts_8c.html#a129">msg</a>, WPARAM wParam, LPARAM lParam)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>INT_PTR APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a595">MDIActivateDlgProcW</a> (HWND hwnd, UINT <a class="el" href="../../d2/d1/userexts_8c.html#a129">msg</a>, WPARAM wParam, LPARAM lParam)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LRESULT APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a596">EditWndProcA</a> (HWND hwnd, UINT <a class="el" href="../../d2/d1/userexts_8c.html#a129">msg</a>, WPARAM wParam, LPARAM lParam)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LRESULT APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a597">EditWndProcW</a> (HWND hwnd, UINT <a class="el" href="../../d2/d1/userexts_8c.html#a129">msg</a>, WPARAM wParam, LPARAM lParam)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LRESULT APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a598">ImeWndProcA</a> (HWND hwnd, UINT <a class="el" href="../../d2/d1/userexts_8c.html#a129">msg</a>, WPARAM wParam, LPARAM lParam)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LRESULT APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a599">ImeWndProcW</a> (HWND hwnd, UINT <a class="el" href="../../d2/d1/userexts_8c.html#a129">msg</a>, WPARAM wParam, LPARAM lParam)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LRESULT&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a600">SendMessageWorker</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, UINT message, WPARAM wParam, LPARAM lParam, BOOL fAnsi)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LRESULT&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a601">SendMessageTimeoutWorker</a> (HWND hwnd, UINT message, WPARAM wParam, LPARAM lParam, UINT fuFlags, UINT uTimeout, PULONG_PTR lpdwResult, BOOL fAnsi)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a602">ClientEmptyClipboard</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a603">GetActiveKeyboardName</a> (LPWSTR lpszName)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>HANDLE&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a604">OpenKeyboardLayoutFile</a> (LPWSTR lpszKLName, <a class="el" href="../../d9/d5/ndismain_8h.html#a266">PUINT</a> puFlags, <a class="el" href="../../d9/d5/ndismain_8h.html#a266">PUINT</a> poffTable, <a class="el" href="../../d9/d5/ndismain_8h.html#a266">PUINT</a> pKbdInputLocale)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a605">LoadPreloadKeyboardLayouts</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a606">SetWindowState</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, UINT flags)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a607">ClearWindowState</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, UINT flags)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>HKL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a608">LoadKeyboardLayoutWorker</a> (HKL hkl, LPCWSTR lpszKLName, UINT uFlags, BOOL fFailSafe)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LRESULT&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a609">DispatchClientMessage</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, UINT message, WPARAM wParam, LPARAM lParam, ULONG_PTR pfn)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LRESULT&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a610">DefWindowProcWorker</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, UINT message, WPARAM wParam, LPARAM lParam, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> fAnsi)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LRESULT&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a611">ButtonWndProcWorker</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, UINT <a class="el" href="../../d2/d1/userexts_8c.html#a129">msg</a>, WPARAM wParam, LPARAM lParam, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> fAnsi)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LRESULT&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a612">ListBoxWndProcWorker</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, UINT <a class="el" href="../../d2/d1/userexts_8c.html#a129">msg</a>, WPARAM wParam, LPARAM lParam, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> fAnsi)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LRESULT&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a613">StaticWndProcWorker</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, UINT <a class="el" href="../../d2/d1/userexts_8c.html#a129">msg</a>, WPARAM wParam, LPARAM lParam, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> fAnsi)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LRESULT&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a614">ComboBoxWndProcWorker</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, UINT <a class="el" href="../../d2/d1/userexts_8c.html#a129">msg</a>, WPARAM wParam, LPARAM lParam, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> fAnsi)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LRESULT&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a615">ComboListBoxWndProcWorker</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, UINT <a class="el" href="../../d2/d1/userexts_8c.html#a129">msg</a>, WPARAM wParam, LPARAM lParam, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> fAnsi)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LRESULT&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a616">MDIClientWndProcWorker</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, UINT <a class="el" href="../../d2/d1/userexts_8c.html#a129">msg</a>, WPARAM wParam, LPARAM lParam, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> fAnsi)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LRESULT&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a617">EditWndProcWorker</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, UINT <a class="el" href="../../d2/d1/userexts_8c.html#a129">msg</a>, WPARAM wParam, LPARAM lParam, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> fAnsi)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LRESULT&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a618">DefDlgProcWorker</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, UINT <a class="el" href="../../d2/d1/userexts_8c.html#a129">msg</a>, WPARAM wParam, LPARAM lParam, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> fAnsi)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LRESULT&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a619">ImeWndProcWorker</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, UINT <a class="el" href="../../d2/d1/userexts_8c.html#a129">msg</a>, WPARAM wParam, LPARAM lParam, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> fAnsi)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LONG&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a620">_SetWindowLong</a> (HWND <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a29">hWnd</a>, int nIndex, LONG dwNewLong, BOOL bAnsi)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a621">_PeekMessage</a> (LPMSG pmsg, HWND hwnd, UINT wMsgFilterMin, UINT wMsgFilterMax, UINT wRemoveMsg, BOOL bAnsi)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a622">_DefSetText</a> (HWND hwnd, LPCWSTR pstr, BOOL bAnsi)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>HCURSOR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a623">_GetCursorFrameInfo</a> (HCURSOR hcur, LPWSTR id, int iFrame, LPDWORD pjifRate, LPINT pccur)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>HWND&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a624">_CreateWindowEx</a> (<a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwExStyle, LPCTSTR pClassName, LPCTSTR pWindowName, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwStyle, int x, int y, int nWidth, int nHeight, HWND hwndParent, HMENU hmenu, HANDLE hModule, <a class="el" href="../../d0/d5/perfuser_8c.html#a5">LPVOID</a> pParam, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> <a class="el" href="../../d3/d8/propapi_8h.html#a34">dwFlags</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>HKL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a625">_LoadKeyboardLayoutEx</a> (HANDLE hFile, UINT offTable, HKL hkl, LPCWSTR pwszKL, UINT KbdInputLocale, UINT Flags)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a626">_SetCursorIconData</a> (HCURSOR hCursor, <a class="el" href="../../d8/d1/structtagCURSORDATA.html">PCURSORDATA</a> pcur)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>HCURSOR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a627">FindExistingCursorIcon</a> (LPWSTR pszModName, LPCWSTR pszResName, <a class="el" href="../../d9/d1/structtagCURSORFIND.html">PCURSORFIND</a> pcfSearch)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>HANDLE&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a628">CreateLocalMemHandle</a> (HANDLE hMem)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>HANDLE&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a629">ConvertMemHandle</a> (HANDLE hMem, UINT cbNULL)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>HHOOK&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a630">_SetWindowsHookEx</a> (HANDLE hmod, LPTSTR pszLib, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> idThread, int nFilterType, PROC pfnFilterProc, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> <a class="el" href="../../d3/d8/propapi_8h.html#a34">dwFlags</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>ULONG_PTR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a631">_GetClassData</a> (<a class="el" href="../../d7/d0/structtagCLS.html">PCLS</a> pcls, <a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, int index, BOOL bAnsi)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a632">_GetClassLong</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, int index, BOOL bAnsi)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a633">BitBltSysBmp</a> (HDC hdc, int x, int y, UINT i)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a634">BuildHwndList</a> (HDESK hdesk, HWND hwndNext, BOOL fEnumChildren, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> idThread, HWND **phwndFirst)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>ATOM&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a635">RegisterClassExWOWA</a> (PWNDCLASSEXA lpWndClass, LPDWORD pdwWOWstuff, WORD fnid)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>ATOM&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a636">RegisterClassExWOWW</a> (PWNDCLASSEXW lpWndClass, LPDWORD pdwWOWstuff, WORD fnid)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a637">CopyLogFontAtoW</a> (PLOGFONTW pdest, PLOGFONTA psrc)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a638">CopyLogFontWtoA</a> (PLOGFONTA pdest, PLOGFONTW psrc)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a639">_NextControl</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwndDlg, <a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, UINT uFlags)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a640">_PrevControl</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwndDlg, <a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, UINT uFlags)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a641">_GetNextDlgGroupItem</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwndDlg, <a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, BOOL fPrev)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a642">_GetNextDlgTabItem</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwndDlg, <a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, BOOL fPrev)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a643">_GetChildControl</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwndDlg, <a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwndLevel)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a644">FChildVisible</a> (HWND hwnd)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a645">PaintRect</a> (HWND hwndBrush, HWND hwndPaint, HDC hdc, HBRUSH hbr, LPRECT lprc)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a646">FindMnemChar</a> (LPWSTR lpstr, WCHAR ch, BOOL fFirst, BOOL fPrefix)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a647">WowGetModuleFileName</a> (HMODULE hModule, LPWSTR pwsz, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> cchMax)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>HICON&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a648">WowServerLoadCreateCursorIcon</a> (HANDLE hmod, LPTSTR lpModName, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwExpWinVer, LPCTSTR lpName, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> cb, PVOID pcr, LPTSTR lpType, BOOL fClient)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>HANDLE&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a649">InternalCopyImage</a> (HANDLE hImage, UINT IMAGE_flag, int cxNew, int cyNew, UINT LR_flags)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>HMENU&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a650">CreateMenuFromResource</a> (LPBYTE)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>HANDLE&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a651">LoadCursorIconFromFileMap</a> (IN <a class="el" href="../../d1/d2/struct__FILEINFO.html">PFILEINFO</a> pfi, IN OUT LPWSTR *prt, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> cxDesired, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> cyDesired, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> LR_flags, OUT LPBOOL pfAni)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a652">GetIcoCurWidth</a> (<a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> cxOrg, BOOL fIcon, UINT LR_flags, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> cxDesired)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a653">GetIcoCurHeight</a> (<a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> cyOrg, BOOL fIcon, UINT LR_flags, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> cyDesired)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a654">GetIcoCurBpp</a> (UINT LR_flags)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>HICON&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a655">LoadIcoCur</a> (HINSTANCE hmod, LPCWSTR lpName, LPWSTR <a class="el" href="../../d4/d4/iafptrap_8c.html#a9">type</a>, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> cxDesired, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> cyDesired, UINT LR_flags)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>HANDLE&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a656">ObjectFromDIBResource</a> (HINSTANCE hmod, LPCWSTR lpName, LPWSTR <a class="el" href="../../d4/d4/iafptrap_8c.html#a9">type</a>, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> cxDesired, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> cyDesired, UINT LR_flags)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>HANDLE&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a657">RtlLoadObjectFromDIBFile</a> (LPCWSTR lpszName, LPWSTR <a class="el" href="../../d4/d4/iafptrap_8c.html#a9">type</a>, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> cxDesired, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> cyDesired, UINT LR_flags)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>HCURSOR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a658">LoadCursorOrIconFromFile</a> (LPCWSTR pszFilename, BOOL fIcon)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>HBITMAP&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a659">ConvertDIBBitmap</a> (<a class="el" href="../../d6/d0/usercli_8h.html#a378">UPBITMAPINFOHEADER</a> lpbih, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> cxDesired, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> cyDesired, UINT flags, LPBITMAPINFOHEADER *lplpbih, LPSTR *lplpBits)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>HICON&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a660">ConvertDIBIcon</a> (LPBITMAPINFOHEADER lpbih, HINSTANCE hmod, LPCWSTR lpName, BOOL fIcon, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> cxNew, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> cyNew, UINT LR_flags)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a661">SmartStretchDIBits</a> (HDC hdc, int xD, int yD, int dxD, int dyD, int xS, int yS, int dxS, int dyS, <a class="el" href="../../d0/d5/perfuser_8c.html#a5">LPVOID</a> lpBits, LPBITMAPINFO lpbi, UINT wUsage, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> rop)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LONG&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a662">xxxCBCommandHandler</a> (<a class="el" href="../../d7/d9/structtagCBox.html">PCBOX</a>, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>, HWND)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LRESULT&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a663">xxxCBMessageItemHandler</a> (<a class="el" href="../../d7/d9/structtagCBox.html">PCBOX</a>, UINT, <a class="el" href="../../d0/d5/perfuser_8c.html#a5">LPVOID</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a664">xxxCBDir</a> (<a class="el" href="../../d7/d9/structtagCBox.html">PCBOX</a>, UINT, LPWSTR)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a665">xxxCBPaint</a> (<a class="el" href="../../d7/d9/structtagCBox.html">PCBOX</a>, HDC)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a666">xxxCBCompleteEditWindow</a> (<a class="el" href="../../d7/d9/structtagCBox.html">PCBOX</a> pcbox)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a667">xxxCBHideListBoxWindow</a> (<a class="el" href="../../d7/d9/structtagCBox.html">PCBOX</a> pcbox, BOOL fNotifyParent, BOOL fSelEndOK)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a668">xxxCBShowListBoxWindow</a> (<a class="el" href="../../d7/d9/structtagCBox.html">PCBOX</a> pcbox, BOOL fTrack)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a669">xxxCBPosition</a> (<a class="el" href="../../d7/d9/structtagCBox.html">PCBOX</a> pcbox)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>long&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a670">CBNcCreateHandler</a> (<a class="el" href="../../d7/d9/structtagCBox.html">PCBOX</a>, <a class="el" href="../../d6/d9/structtagWND.html">PWND</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LRESULT&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a671">xxxCBCreateHandler</a> (<a class="el" href="../../d7/d9/structtagCBox.html">PCBOX</a>, <a class="el" href="../../d6/d9/structtagWND.html">PWND</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a672">xxxCBCalcControlRects</a> (<a class="el" href="../../d7/d9/structtagCBox.html">PCBOX</a> pcbox, LPRECT lprcList)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a673">xxxCBNcDestroyHandler</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a>, <a class="el" href="../../d7/d9/structtagCBox.html">PCBOX</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a674">xxxCBNotifyParent</a> (<a class="el" href="../../d7/d9/structtagCBox.html">PCBOX</a>, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a13">SHORT</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a675">xxxCBUpdateListBoxWindow</a> (<a class="el" href="../../d7/d9/structtagCBox.html">PCBOX</a>, BOOL)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a676">xxxCBInternalUpdateEditWindow</a> (<a class="el" href="../../d7/d9/structtagCBox.html">PCBOX</a>, HDC)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a677">xxxCBGetFocusHelper</a> (<a class="el" href="../../d7/d9/structtagCBox.html">PCBOX</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a678">xxxCBKillFocusHelper</a> (<a class="el" href="../../d7/d9/structtagCBox.html">PCBOX</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a679">xxxCBInvertStaticWindow</a> (<a class="el" href="../../d7/d9/structtagCBox.html">PCBOX</a>, BOOL, HDC)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a680">xxxCBSetFontHandler</a> (<a class="el" href="../../d7/d9/structtagCBox.html">PCBOX</a>, HANDLE, BOOL)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a681">xxxCBSizeHandler</a> (<a class="el" href="../../d7/d9/structtagCBox.html">PCBOX</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LONG&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a682">xxxCBSetEditItemHeight</a> (<a class="el" href="../../d7/d9/structtagCBox.html">PCBOX</a> pcbox, int editHeight)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a683">xxxFindString</a> (<a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>, LPWSTR, <a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>, <a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>, BOOL)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a684">InitHStrings</a> (<a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a685">xxxLBInsertItem</a> (<a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>, LPWSTR, int, UINT)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a686">ISelFromPt</a> (<a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>, POINT, LPDWORD)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a687">IsSelected</a> (<a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>, <a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>, UINT)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a688">LBSetCItemFullMax</a> (<a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a> plb)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a689">xxxLBSelRange</a> (<a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>, <a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>, <a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>, BOOL)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a690">xxxLBSetCurSel</a> (<a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>, <a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a691">LBoxGetSelItems</a> (<a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>, BOOL, <a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>, LPINT)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LONG&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a692">xxxLBSetSel</a> (<a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>, BOOL, <a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a693">xxxSetISelBase</a> (<a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>, <a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a694">SetSelected</a> (<a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>, <a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>, BOOL, UINT)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a695">xxxLBSetCaret</a> (<a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a> plb, BOOL fSetCaret)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a696">xxxCaretDestroy</a> (<a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LONG&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a697">xxxLBCreate</a> (<a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>, <a class="el" href="../../d6/d9/structtagWND.html">PWND</a>, LPCREATESTRUCT)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a698">xxxDestroyLBox</a> (<a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>, <a class="el" href="../../d6/d9/structtagWND.html">PWND</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a699">xxxLBoxDeleteItem</a> (<a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>, <a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a700">xxxLBoxDoDeleteItems</a> (<a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a701">xxxLBoxDrawItem</a> (<a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>, <a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>, UINT, UINT, LPRECT)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a702">LBCalcVarITopScrollAmt</a> (<a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>, <a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>, <a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a703">xxxLBoxCtlHScroll</a> (<a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>, <a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>, <a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a704">xxxLBoxCtlHScrollMultiColumn</a> (<a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>, <a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>, <a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a705">xxxLBoxCtlScroll</a> (<a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>, <a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>, <a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a706">xxxLBShowHideScrollBars</a> (<a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a707">xxxLBoxCtlDelete</a> (<a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>, <a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a708">xxxLBoxCtlCharInput</a> (<a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>, UINT, BOOL)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a709">xxxLBoxCtlKeyInput</a> (<a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>, UINT, UINT)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a710">xxxLBPaint</a> (<a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>, HDC, LPRECT)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a711">xxxLBInvalidateRect</a> (<a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a> plb, LPRECT lprc, BOOL fErase)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a712">xxxAlterHilite</a> (<a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>, <a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>, <a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>, BOOL, <a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>, BOOL)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a713">CItemInWindow</a> (<a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>, BOOL)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a714">xxxCheckRedraw</a> (<a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>, BOOL, <a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LPWSTR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a715">GetLpszItem</a> (<a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>, <a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a716">xxxInsureVisible</a> (<a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>, <a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>, BOOL)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a717">xxxInvertLBItem</a> (<a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>, <a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>, BOOL)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a718">xxxLBBlockHilite</a> (<a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>, <a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>, BOOL)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a719">LBGetSetItemHeightHandler</a> (<a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a> plb, UINT message, int item, UINT height)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a720">LBDropObjectHandler</a> (<a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>, PDROPSTRUCT)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LONG_PTR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a721">LBGetItemData</a> (<a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>, <a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a722">LBGetText</a> (<a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>, BOOL, BOOL, <a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>, LPWSTR)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a723">xxxLBSetFont</a> (<a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>, HANDLE, BOOL)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a724">LBSetItemData</a> (<a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>, <a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>, LONG_PTR)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a725">LBSetTabStops</a> (<a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>, <a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>, LPINT)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a726">xxxLBSize</a> (<a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>, <a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>, <a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a727">LastFullVisible</a> (<a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a728">xxxLbDir</a> (<a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>, UINT, LPWSTR)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a729">xxxLbInsertFile</a> (<a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>, LPWSTR)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a730">xxxNewITop</a> (<a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>, <a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a731">xxxNewITopEx</a> (<a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>, <a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a732">xxxNotifyOwner</a> (<a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>, <a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a733">xxxResetWorld</a> (<a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>, <a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>, <a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>, BOOL)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a734">xxxTrackMouse</a> (<a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>, UINT, POINT)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a735">xxxDlgDirListHelper</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a>, LPWSTR, LPBYTE, int, int, UINT, BOOL)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a736">DlgDirSelectHelper</a> (LPWSTR pFileName, int cbFileName, HWND hwndListBox)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a737">xxxLBResetContent</a> (<a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a> plb)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a738">xxxLBSetRedraw</a> (<a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a> plb, BOOL fRedraw)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a739">xxxSetLBScrollParms</a> (<a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a> plb, int nCtl)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a740">xxxLBButtonUp</a> (<a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a> plb, UINT uFlags)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a741">CItemInWindowVarOwnerDraw</a> (<a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>, BOOL)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a742">LBPage</a> (<a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>, <a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>, BOOL)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a743">LBCalcItemRowsAndColumns</a> (<a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a744">LBGetItemRect</a> (<a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>, <a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>, LPRECT)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a745">LBSetVariableHeightItemHeight</a> (<a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>, <a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>, <a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a746">LBGetVariableHeightItemHeight</a> (<a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>, <a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a747">xxxLBSetCount</a> (<a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>, <a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>UINT&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a748">LBCalcAllocNeeded</a> (<a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>, <a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LONG&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a749">xxxLBInitStorage</a> (<a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a> plb, BOOL fAnsi, <a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a> cItems, <a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a> cb)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>HWND&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a750">InternalCreateDialog</a> (HANDLE hmod, LPDLGTEMPLATE lpDlgTemplate, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> cb, HWND hwndOwner, DLGPROC pfnWndProc, LPARAM dwInitParam, UINT fFlags)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>INT_PTR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a751">InternalDialogBox</a> (HANDLE hmod, LPDLGTEMPLATE lpDlgTemplate, HWND hwndOwner, DLGPROC pfnWndProc, LPARAM dwInitParam, UINT fFlags)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a752">_FindDlgItem</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwndParent, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> id)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a753">_GetDlgItem</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a>, int)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>long&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a754">_GetDialogBaseUnits</a> (VOID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a755">GetParentDialog</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwndDialog)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a756">xxxRemoveDefaultButton</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwndDlg, <a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwndStart)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a757">xxxCheckDefPushButton</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwndDlg, HWND hwndOldFocus, HWND hwndNewFocus)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a758">xxxGotoNextMnem</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwndDlg, <a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwndStart, WCHAR ch)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a759">DlgSetFocus</a> (HWND hwnd)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a760">RepositionRect</a> (<a class="el" href="../../d0/d2/structtagMONITOR.html">PMONITOR</a> pMonitor, LPRECT lprc, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwStyle, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwExStyle)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a761">ValidateDialogPwnd</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d2/structtagMONITOR.html">PMONITOR</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a762">GetDialogMonitor</a> (HWND hwndOwner, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> <a class="el" href="../../d3/d8/propapi_8h.html#a34">dwFlags</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>HANDLE&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a763">GetEditDS</a> (VOID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a764">ReleaseEditDS</a> (HANDLE h)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a765">TellWOWThehDlg</a> (HWND hDlg)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>UINT&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a766">GetACPCharSet</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a767">GetMenuItemInfoInternalW</a> (HMENU hMenu, UINT uID, BOOL fByPosition, LPMENUITEMINFOW lpmii)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a768">InternalInsertMenuItem</a> (HMENU hMenu, UINT uID, BOOL fByPosition, LPCMENUITEMINFO lpmii)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a769">ValidateMENUITEMINFO</a> (LPMENUITEMINFOW lpmiiIn, LPMENUITEMINFOW lpmii, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwAPICode)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a770">ValidateMENUINFO</a> (LPCMENUINFO lpmi, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwAPICode)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a771">ThunkedMenuItemInfo</a> (HMENU hMenu, UINT nPosition, BOOL fByPosition, BOOL fInsert, LPMENUITEMINFOW lpmii, BOOL fAnsi)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a772">SetMenuItemInfoStruct</a> (HMENU hMenu, UINT wFlags, UINT_PTR wIDNew, LPWSTR pwszNew, LPMENUITEMINFOW pmii)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a773">CreateMDIChild</a> (<a class="el" href="../../d5/d6/structtagSHORTCREATE.html">PSHORTCREATE</a> pcs, LPMDICREATESTRUCT pmcs, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwExpWinVerAndFlags, HMENU *phSysMenu, <a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwndParent)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a774">MDICompleteChildCreation</a> (HWND hwndChild, HMENU hSysMenu, BOOL fVisible, BOOL fDisabled)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a775">FindPwndChild</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwndMDI, UINT wChildID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a776">MakeMenuItem</a> (LPWSTR lpOut, <a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a777">ModifyMenuItem</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a778">MDIAddSysMenu</a> (HMENU hmenuFrame, HWND hwndChild)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a779">MDIRemoveSysMenu</a> (HMENU hMenuFrame, HWND hwndChild)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a780">ShiftMenuIDs</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, <a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwndVictim)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>HMENU&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a781">MDISetMenu</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a>, BOOL, HMENU, HMENU)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a782">EnterReaderModeHelper</a> (HWND hwnd)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a783">UserGetCodePage</a> (HDC hdc)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a784">UserIsFullWidth</a> (<a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwCodePage, WCHAR wChar)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a785">UserIsFELineBreak</a> (<a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwCodePage, WCHAR wChar)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a786">InitializeImmEntryTable</a> (VOID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a787">GetImmFileName</a> (PWSTR)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a788">CliImmInitializeHotKeys</a> (<a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwAction, HKL hkl)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a789">SyncSoftKbdState</a> (HIMC hImc, LPARAM lParam)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>__inline PVOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a790">REBASESHAREDPTRALWAYS</a> (KERNEL_PVOID p)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>__inline PVOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a791">REBASESHAREDPTR</a> (KERNEL_PVOID p)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>__inline <a class="el" href="../../d9/d3/structtagDISPLAYINFO.html">PDISPLAYINFO</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a792">GetDispInfo</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>__inline <a class="el" href="../../d0/d2/structtagMONITOR.html">PMONITOR</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a793">GetPrimaryMonitor</a> (void)</td></tr>

<tr><td colspan=2><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d2/d8/structtagTHREADINFO.html">PTHREADINFO</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a349">PtiCurrent</a> (VOID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d2/d7/structImmApiEntries.html">ImmApiEntries</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a404">gImmApiEntries</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>HMODULE&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/usercli_8h.html#a405">ghImm32</a></td></tr>

</table>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="a210" doxytag="usercli.h::_GetClassLongPtr" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define _GetClassLongPtr&nbsp;&nbsp;&nbsp;_GetClassLong          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01469">1469</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00440">GetClassLongPtr()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a165" doxytag="usercli.h::_GetWindowLongPtr" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define _GetWindowLongPtr&nbsp;&nbsp;&nbsp;_GetWindowLong          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01191">1191</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00388">GetWindowLongPtr()</a>, and <a class="el" href="../../d2/d7/w32_2ntuser_2kernel_2event_8c-source.html#l00224">xxxEventWndProc()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a209" doxytag="usercli.h::_SetWindowLongPtr" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define _SetWindowLongPtr&nbsp;&nbsp;&nbsp;_SetWindowLong          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01366">1366</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00408">SetWindowLongPtr()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a272" doxytag="usercli.h::ACTIVE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ACTIVE          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">pmdi&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;(pmdi-&gt;hwndActiveChild)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02069">2069</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02101">DefFrameProcWorker()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02531">DefMDIChildProcWorker()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01657">MDIClientWndProcWorker()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02735">MDICompleteChildCreation()</a>, <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00499">MDISetMenu()</a>, <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00104">ModifyMenuItem()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00096">TranslateMDISysAccel()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01237">xxxMDIActivate()</a>, and <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01540">xxxMDIDestroy()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a154" doxytag="usercli.h::AWCOMPARECHAR" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define AWCOMPARECHAR          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">ped,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>pbyte,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>awchar&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;(ped-&gt;fAnsi ? (*(PUCHAR)(pbyte) == (UCHAR)(awchar)) : (*(LPWSTR)(pbyte) == (WCHAR)(awchar)))</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01132">1132</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d2/d4/editml_8c-source.html#l01562">MLBuildchLines()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l00553">MLIchToXYPos()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l00502">MLIchToYPos()</a>, and <a class="el" href="../../d2/d4/editml_8c-source.html#l01003">MLUpdateiCaretLine()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a241" doxytag="usercli.h::BFT_BITMAP" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define BFT_BITMAP&nbsp;&nbsp;&nbsp;0x4D42          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01629">1629</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d4/d1/rtlres_8c-source.html#l00142">RtlLoadObjectFromDIBFile()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a242" doxytag="usercli.h::BFT_CURSOR" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define BFT_CURSOR&nbsp;&nbsp;&nbsp;0x5450          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01630">1630</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a240" doxytag="usercli.h::BFT_ICON" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define BFT_ICON&nbsp;&nbsp;&nbsp;0x4349          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01628">1628</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a32" doxytag="usercli.h::BitmapSize" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define BitmapSize          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">cx,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d1/d1/inctlpan_8c.html#a3">cy</a>,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>planes,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>bits&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;(BitmapWidth(cx, bits) * (<a class="el" href="../../d1/d1/inctlpan_8c.html#a3">cy</a>) * (planes))</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00302">302</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d4/d1/rtlres_8c-source.html#l00142">RtlLoadObjectFromDIBFile()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a33" doxytag="usercli.h::BitmapWidth" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define BitmapWidth          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">cx,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>bpp&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;(((((cx)*(bpp)) + 31) &amp; ~31) &gt;&gt; 3)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00305">305</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d5/d8/clres_8c-source.html#l03679">ConvertDIBBitmap()</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l03546">CopyDibHdr()</a>, and <a class="el" href="../../d8/d6/cldib_8c-source.html#l00185">ScaleDIB()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a46" doxytag="usercli.h::BST_CAPTURED" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define BST_CAPTURED&nbsp;&nbsp;&nbsp;0x0020          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00392">392</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d0/btnctl_8c-source.html#l01338">ButtonWndProcWorker()</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l00654">xxxBNReleaseCapture()</a>, and <a class="el" href="../../d9/d0/btnctl_8c-source.html#l00590">xxxBNSetCapture()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a44" doxytag="usercli.h::BST_CHECKMASK" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define BST_CHECKMASK&nbsp;&nbsp;&nbsp;0x0003          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00390">390</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d0/btnctl_8c-source.html#l01338">ButtonWndProcWorker()</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l00722">xxxBNDrawText()</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l00654">xxxBNReleaseCapture()</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l00995">xxxButtonDrawCheck()</a>, and <a class="el" href="../../d9/d0/btnctl_8c-source.html#l01159">xxxDrawButton()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a48" doxytag="usercli.h::BST_DONTCLICK" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define BST_DONTCLICK&nbsp;&nbsp;&nbsp;0x0080          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00394">394</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d0/btnctl_8c-source.html#l01338">ButtonWndProcWorker()</a>, <a class="el" href="../../d6/d8/dlgmgr2_8c-source.html#l00317">IsDialogMessageW()</a>, and <a class="el" href="../../d6/d9/dmmnem_8c-source.html#l00219">xxxGotoNextMnem()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a49" doxytag="usercli.h::BST_INBMCLICK" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define BST_INBMCLICK&nbsp;&nbsp;&nbsp;0x0100          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00395">395</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d0/btnctl_8c-source.html#l01338">ButtonWndProcWorker()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a45" doxytag="usercli.h::BST_INCLICK" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define BST_INCLICK&nbsp;&nbsp;&nbsp;0x0010          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00391">391</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d0/btnctl_8c-source.html#l01338">ButtonWndProcWorker()</a>, and <a class="el" href="../../d9/d0/btnctl_8c-source.html#l00590">xxxBNSetCapture()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a47" doxytag="usercli.h::BST_MOUSE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define BST_MOUSE&nbsp;&nbsp;&nbsp;0x0040          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00393">393</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d0/btnctl_8c-source.html#l01338">ButtonWndProcWorker()</a>, and <a class="el" href="../../d9/d0/btnctl_8c-source.html#l00654">xxxBNReleaseCapture()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a298" doxytag="usercli.h::BUILD_DBCS_MESSAGE_TO_CLIENTA_FROM_CLIENTW" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define BUILD_DBCS_MESSAGE_TO_CLIENTA_FROM_CLIENTW          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">_hwnd,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>_msg,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>_wParam,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>_lParam,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>_time,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>_pt,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>_bDbcs&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02366">2366</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d1/d8/clmsg_8c-source.html#l01533">DispatchMessageWorker()</a>, and <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00270">SendMessageWorker()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a296" doxytag="usercli.h::BUILD_DBCS_MESSAGE_TO_CLIENTA_FROM_SERVER" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define BUILD_DBCS_MESSAGE_TO_CLIENTA_FROM_SERVER          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">_pmsg,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>_dwAnsi,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>_bIrDbcsFormat,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>bSaveMsg&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02311">2311</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00556">_PeekMessage()</a>, and <a class="el" href="../../d1/d7/ntcftxt_8h-source.html#l00249">GetMessage()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a295" doxytag="usercli.h::BUILD_DBCS_MESSAGE_TO_CLIENTW_FROM_CLIENTA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define BUILD_DBCS_MESSAGE_TO_CLIENTW_FROM_CLIENTA          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">_msg,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>_wParam,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>_RetVal&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02282">2282</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d1/d8/clmsg_8c-source.html#l01533">DispatchMessageWorker()</a>, <a class="el" href="../../d6/d8/dlgmgr2_8c-source.html#l00230">IsDialogMessageA()</a>, and <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00270">SendMessageWorker()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a297" doxytag="usercli.h::BUILD_DBCS_MESSAGE_TO_CLIENTW_FROM_SERVER" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define BUILD_DBCS_MESSAGE_TO_CLIENTW_FROM_SERVER          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">_msg,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>_wParam&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Value:</b><pre class="fragment"><div>\
        <span class="keywordflow">if</span> (((_msg) == WM_CHAR) || ((_msg) == EM_SETPASSWORDCHAR)) {                        \
            <span class="comment">/*                                                                              \</span>
<span class="comment">             * Only LOWORD of WPARAM is valid for WM_CHAR....                               \</span>
<span class="comment">             * (Mask off DBCS messaging information.)                                       \</span>
<span class="comment">             */</span>                                                                             \
            (_wParam) &amp;= 0x0000FFFF;                                                        \
        }
</div></pre>
<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02359">2359</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00556">_PeekMessage()</a>, and <a class="el" href="../../d1/d7/ntcftxt_8h-source.html#l00249">GetMessage()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a294" doxytag="usercli.h::BUILD_DBCS_MESSAGE_TO_SERVER_FROM_CLIENTA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define BUILD_DBCS_MESSAGE_TO_SERVER_FROM_CLIENTA          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">_msg,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>_wParam,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>_RetVal&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02253">2253</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d1/d7/ntcftxt_8h-source.html#l01460">CallMsgFilter()</a>, <a class="el" href="../../d1/d8/clmsg_8c-source.html#l01533">DispatchMessageWorker()</a>, <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l01444">MESSAGECALL()</a>, <a class="el" href="../../d1/d7/ntcftxt_8h-source.html#l00427">PostMessage()</a>, <a class="el" href="../../d1/d7/ntcftxt_8h-source.html#l00481">PostThreadMessage()</a>, <a class="el" href="../../d1/d7/ntcftxt_8h-source.html#l00850">SendMessageCallback()</a>, and <a class="el" href="../../d1/d7/ntcftxt_8h-source.html#l00883">SendNotifyMessage()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a43" doxytag="usercli.h::BUTTONSTATE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define BUTTONSTATE          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">pbutn&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;(pbutn-&gt;buttonState)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00388">388</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d0/btnctl_8c-source.html#l01338">ButtonWndProcWorker()</a>, <a class="el" href="../../d6/d8/dlgmgr2_8c-source.html#l00317">IsDialogMessageW()</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l00722">xxxBNDrawText()</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l00310">xxxBNOwnerDraw()</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l01206">xxxBNPaint()</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l00654">xxxBNReleaseCapture()</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l00590">xxxBNSetCapture()</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l00995">xxxButtonDrawCheck()</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l01116">xxxButtonDrawNewState()</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l01159">xxxDrawButton()</a>, and <a class="el" href="../../d6/d9/dmmnem_8c-source.html#l00219">xxxGotoNextMnem()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a301" doxytag="usercli.h::CalcAnsiStringLengthA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define CalcAnsiStringLengthA          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">_ansistring,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>_unicodeLength,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>_ansiLength&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Value:</b><pre class="fragment"><div><span class="comment">/*                                                                                      \</span>
<span class="comment">         * Get AnsiStringLength from AnsiString,UnicodeLength                                   \</span>
<span class="comment">         */</span>                                                                                     \
        {                                                                                       \
            LPSTR _string = (_ansistring);                                                      \
            LONG  _length = (LONG)(_unicodeLength);                                             \
            (*(_ansiLength)) = 0;                                                               \
            <span class="keywordflow">while</span>(*_string &amp;&amp; _length) {                                                        \
                <span class="keywordflow">if</span>(IsDBCSLeadByte(*_string)) {                                                  \
                    (*(_ansiLength)) += 2; _string++;                                           \
                } <span class="keywordflow">else</span> {                                                                        \
                    (*(_ansiLength))++;                                                         \
                }                                                                               \
                _string++; _length--;                                                           \
            }                                                                                   \
        }
</div></pre>
<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02410">2410</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l02089">MESSAGECALL()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a300" doxytag="usercli.h::CalcAnsiStringLengthW" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define CalcAnsiStringLengthW          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">_unicodestring,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>_unicodeLength,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>_ansiLength&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Value:</b><pre class="fragment"><div><span class="comment">/*                                                                                      \</span>
<span class="comment">         * Get AnsiStringLength from UnicodeString,UnicodeLength                                \</span>
<span class="comment">         */</span>                                                                                     \
        {                                                                                       \
            <a class="code" href="../../d9/d6/nlsxlat_8c.html#a36">RtlUnicodeToMultiByteSize</a>((ULONG *)(_ansiLength),                                   \
                                      (LPWSTR)(_unicodestring),                                 \
                                      (ULONG)((_unicodeLength)*<span class="keyword">sizeof</span>(WCHAR)));                 \
        }
</div></pre>
<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02402">2402</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l02208">MESSAGECALL()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a267" doxytag="usercli.h::CALCSCROLL" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define CALCSCROLL&nbsp;&nbsp;&nbsp;0x0800          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02062">2062</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01657">MDIClientWndProcWorker()</a>, and <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00483">RecalculateScrollRanges()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a302" doxytag="usercli.h::CalcUnicodeStringLengthA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define CalcUnicodeStringLengthA          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">_ansistring,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>_ansiLength,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>_unicodeLength&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Value:</b><pre class="fragment"><div><span class="comment">/*                                                                                      \</span>
<span class="comment">         * Get UnicodeLength from AnsiString,AnsiLength                                         \</span>
<span class="comment">         */</span>                                                                                     \
        {                                                                                       \
            <a class="code" href="../../d9/d6/nlsxlat_8c.html#a35">RtlMultiByteToUnicodeSize</a>((ULONG *)(_unicodeLength),                                \
                                      (LPSTR)(_ansistring),                                     \
                                      (ULONG)(_ansiLength));                                    \
            (*(_unicodeLength)) /= <span class="keyword">sizeof</span>(WCHAR);                                               \
        }
</div></pre>
<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02426">2426</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l02208">MESSAGECALL()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a303" doxytag="usercli.h::CalcUnicodeStringLengthW" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define CalcUnicodeStringLengthW          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">_unicodestring,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>_ansiLength,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>_unicodeLength&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Value:</b><pre class="fragment"><div><span class="comment">/*                                                                                      \</span>
<span class="comment">         * Get UnicodeLength from UnicodeString,AnsiLength                                      \</span>
<span class="comment">         */</span>                                                                                     \
        {                                                                                       \
            LPWSTR _string = (_unicodestring);                                                  \
            LONG   _length = (LONG)(_ansiLength);                                               \
            LONG   _charlength;                                                                 \
            (*(_unicodeLength)) = 0;                                                            \
            <span class="keywordflow">while</span>(*_string &amp;&amp; (_length &gt; 0)) {                                                  \
                <a class="code" href="../../d6/d0/usercli_8h.html#a300">CalcAnsiStringLengthW</a>(_string,1,&amp;_charlength);                                  \
                _length -= _charlength;                                                         \
                <span class="keywordflow">if</span>(_length &gt;= 0) {                                                              \
                    (*(_unicodeLength))++;                                                      \
                }                                                                               \
                _string++;                                                                      \
            }                                                                                   \
        }
</div></pre>
<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02435">2435</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l02089">MESSAGECALL()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a17" doxytag="usercli.h::CALLPROC" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define CALLPROC          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">p&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;((<a class="el" href="../../d6/d0/usercli_8h.html#a348">GENERICPROC</a>)p)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00176">176</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l09837">MESSAGECALL()</a>, and <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l09804">NtUserMessageCall()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a20" doxytag="usercli.h::CALLPROC_WOWCHECK" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define CALLPROC_WOWCHECK          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">pfn,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>hwnd,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d2/d1/userexts_8c.html#a129">msg</a>,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>wParam,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>lParam&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;CALLPROC_WOWCHECKPWW(pfn, hwnd, <a class="el" href="../../d2/d1/userexts_8c.html#a129">msg</a>, wParam, lParam, NULL)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00191">191</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d1/d8/clmsg_8c-source.html#l01399">CallWindowProcAorW()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a19" doxytag="usercli.h::CALLPROC_WOWCHECKPWW" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define CALLPROC_WOWCHECKPWW          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">pfn,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>hwnd,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d2/d1/userexts_8c.html#a129">msg</a>,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>wParam,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>lParam,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>pww&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Value:</b><pre class="fragment"><div>(IsWOWProc(pfn) ? (*pfnWowWndProcEx)(hwnd, <a class="code" href="../../d2/d1/userexts_8c.html#a129">msg</a>, wParam, lParam, PtrToUlong(pfn), pww) : \
        <a class="code" href="../../d0/d5/callproc_8h.html#a0">UserCallWinProc</a>((WNDPROC)pfn, hwnd, msg, wParam, lParam))
</div></pre>
<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00187">187</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/client_8c-source.html#l02822">DispatchClientMessage()</a>, <a class="el" href="../../d1/d8/clmsg_8c-source.html#l01533">DispatchMessageWorker()</a>, and <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00270">SendMessageWorker()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a18" doxytag="usercli.h::CALLPROC_WOWCHECKPWW_DLG" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define CALLPROC_WOWCHECKPWW_DLG          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">pfn,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>hwnd,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d2/d1/userexts_8c.html#a129">msg</a>,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>wParam,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>lParam,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>pww&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Value:</b><pre class="fragment"><div>(IsWOWProc(pfn) ? (*pfnWowDlgProcEx)(hwnd, <a class="code" href="../../d2/d1/userexts_8c.html#a129">msg</a>, wParam, lParam, PtrToUlong(pfn), pww) : \
        <a class="code" href="../../d0/d5/callproc_8h.html#a0">UserCallWinProc</a>((WNDPROC)pfn, hwnd, msg, wParam, lParam))
</div></pre>
<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00183">183</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l00460">DefDlgProcWorker()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a81" doxytag="usercli.h::CALLWORDBREAKPROC" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define CALLWORDBREAKPROC          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">proc,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>pText,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>iStart,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>cch,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>iAction&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Value:</b><pre class="fragment"><div>(IsWOWProc(proc) ?                                                      \
        (* pfnWowEditNextWord)(pText, iStart, cch, iAction, PtrToUlong(proc)) :  \
        (* proc)(pText, iStart, cch, iAction))
</div></pre>
<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00516">516</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d2/d4/editml_8c-source.html#l01562">MLBuildchLines()</a>, and <a class="el" href="../../d9/d3/editec_8c-source.html#l01446">NextWordCallBack()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a66" doxytag="usercli.h::CaretCreate" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define CaretCreate          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">plb&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;((plb)-&gt;fCaret = TRUE)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00442">442</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d7/d0/lb1_8c-source.html#l00032">ListBoxWndProcWorker()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a56" doxytag="usercli.h::CBBUTTONID" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define CBBUTTONID&nbsp;&nbsp;&nbsp;1002          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00418">418</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a70" doxytag="usercli.h::CBEDITEXTRA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define CBEDITEXTRA&nbsp;&nbsp;&nbsp;6          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00478">478</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d7/d7/clinit_8c-source.html#l00378">RW_RegisterControls()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a55" doxytag="usercli.h::CBEDITID" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define CBEDITID&nbsp;&nbsp;&nbsp;1001          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00417">417</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d4/d3/comboini_8c-source.html#l00070">xxxCBCreateHandler()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a54" doxytag="usercli.h::CBLISTBOXID" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define CBLISTBOXID&nbsp;&nbsp;&nbsp;1000          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00416">416</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d7/d4/edslrare_8c-source.html#l00027">SLCreate()</a>, and <a class="el" href="../../d4/d3/comboini_8c-source.html#l00070">xxxCBCreateHandler()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a71" doxytag="usercli.h::CCHALLOCEXTRA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define CCHALLOCEXTRA&nbsp;&nbsp;&nbsp;0x20          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00484">484</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/editec_8c-source.html#l02293">ECDeleteText()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02059">ECInsertText()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l00285">ECNcCreate()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02612">ECSetText()</a>, and <a class="el" href="../../d6/d4/edmlrare_8c-source.html#l00222">MLSetHandle()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a135" doxytag="usercli.h::CCHFILEMAX" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define CCHFILEMAX&nbsp;&nbsp;&nbsp;MAX_PATH          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00926">926</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d1/d1/lboxctl3_8c-source.html#l00682">DlgDirSelectHelper()</a>, <a class="el" href="../../d1/d1/lboxctl3_8c-source.html#l00190">xxxDlgDirListHelper()</a>, <a class="el" href="../../d1/d1/lboxctl3_8c-source.html#l00839">xxxLbDir()</a>, and <a class="el" href="../../d1/d1/lboxctl3_8c-source.html#l01036">xxxLbInsertFile()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a86" doxytag="usercli.h::CHAR_WIDTH_BUFFER_LENGTH" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define CHAR_WIDTH_BUFFER_LENGTH&nbsp;&nbsp;&nbsp;128          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00549">549</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d6/d3/edecrare_8c-source.html#l00708">ECSetFont()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00770">ECTabTheTextOut()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00117">GetActualNegA()</a>, and <a class="el" href="../../d6/d3/edecrare_8c-source.html#l00555">GetNegABCwidthInfo()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a35" doxytag="usercli.h::CheckLock" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define CheckLock          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">pobj&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">361</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d7/d1/kbdlyout_8c-source.html#l01140">AdjustPushStateForKL()</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l01338">ButtonWndProcWorker()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00200">CalcClientScrolling()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l00207">ComboBoxWndProcWorker()</a>, <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l00460">DefDlgProcWorker()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02101">DefFrameProcWorker()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02531">DefMDIChildProcWorker()</a>, <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l01036">DialogBox2()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01601">DupConvTerminate()</a>, <a class="el" href="../../d3/d8/dlgend_8c-source.html#l00024">EndDialog()</a>, <a class="el" href="../../d0/d9/imectl_8c-source.html#l00083">ImeWndProcWorker()</a>, <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l01246">InternalDialogBox()</a>, <a class="el" href="../../d6/d8/dlgmgr2_8c-source.html#l00317">IsDialogMessageW()</a>, <a class="el" href="../../d7/d0/lb1_8c-source.html#l00032">ListBoxWndProcWorker()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01657">MDIClientWndProcWorker()</a>, <a class="el" href="../../d5/d1/mncomput_8c-source.html#l00796">MNRecalcTabStrings()</a>, <a class="el" href="../../d3/d6/class_8c-source.html#l01329">SetClassCursor()</a>, <a class="el" href="../../d6/d4/statctl_8c-source.html#l00840">StaticWndProcWorker()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00096">TranslateMDISysAccel()</a>, <a class="el" href="../../d4/d5/focusact_8c-source.html#l00336">xxxActivateApp()</a>, <a class="el" href="../../d7/d1/kbdlyout_8c-source.html#l00916">xxxActivateKeyboardLayout()</a>, <a class="el" href="../../d4/d5/focusact_8c-source.html#l00472">xxxActivateThisWindow()</a>, <a class="el" href="../../d4/d5/focusact_8c-source.html#l02060">xxxActivateWindow()</a>, <a class="el" href="../../d6/d2/ntuser_2kernel_2input_8c-source.html#l02327">xxxActiveWindowTracking()</a>, <a class="el" href="../../d9/d6/winloop2_8c-source.html#l00151">xxxAddFullScreen()</a>, <a class="el" href="../../d5/d7/createw_8c-source.html#l01401">xxxAdjustSize()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00942">xxxAdvise()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00978">xxxAdviseAck()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01028">xxxAdviseData()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01113">xxxAdviseDataAck()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l03754">xxxAlterHilite()</a>, <a class="el" href="../../d5/d8/minmax_8c-source.html#l00558">xxxAnimateCaption()</a>, <a class="el" href="../../d8/d8/icons_8c-source.html#l00031">xxxArrangeIconicWindows()</a>, <a class="el" href="../../d0/d2/paint_8c-source.html#l00310">xxxBeginPaint()</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l00258">xxxBNGetDC()</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l00193">xxxBNInitDC()</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l01206">xxxBNPaint()</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l00654">xxxBNReleaseCapture()</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l00590">xxxBNSetCapture()</a>, <a class="el" href="../../d1/d2/palette_8c-source.html#l00243">xxxBroadcastPaletteChanged()</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l01116">xxxButtonDrawNewState()</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l00625">xxxButtonNotifyParent()</a>, <a class="el" href="../../d2/d4/caption_8c-source.html#l00030">xxxCalcCaptionButton()</a>, <a class="el" href="../../d0/d2/calcclrc_8c-source.html#l00021">xxxCalcClientRect()</a>, <a class="el" href="../../d3/d6/ntuser_2kernel_2menu_8c-source.html#l03951">xxxCallHandleMenuMessages()</a>, <a class="el" href="../../d2/d3/tooltips_8c-source.html#l01125">xxxCancelMouseMoveTracking()</a>, <a class="el" href="../../d4/d4/w32_2ntuser_2kernel_2capture_8c-source.html#l00124">xxxCapture()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l03411">xxxCaretDestroy()</a>, <a class="el" href="../../d4/d3/comboini_8c-source.html#l00253">xxxCBCalcControlRects()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l01494">xxxCBCommandHandler()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l01624">xxxCBCompleteEditWindow()</a>, <a class="el" href="../../d4/d3/comboini_8c-source.html#l00070">xxxCBCreateHandler()</a>, <a class="el" href="../../d3/d3/combodir_8c-source.html#l00028">xxxCBDir()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l02343">xxxCBGetFocusHelper()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l02496">xxxCBGetTextHelper()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l01719">xxxCBHideListBoxWindow()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l02028">xxxCBInternalUpdateEditWindow()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l02230">xxxCBInvertStaticWindow()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l02402">xxxCBKillFocusHelper()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l01393">xxxCBMessageItemHandler()</a>, <a class="el" href="../../d4/d3/comboini_8c-source.html#l00394">xxxCBNcDestroyHandler()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l01589">xxxCBNotifyParent()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l01431">xxxCBPaint()</a>, <a class="el" href="../../d4/d3/comboini_8c-source.html#l00485">xxxCBSetEditItemHeight()</a>, <a class="el" href="../../d4/d3/comboini_8c-source.html#l00443">xxxCBSetFontHandler()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l01819">xxxCBShowListBoxWindow()</a>, <a class="el" href="../../d4/d3/comboini_8c-source.html#l00563">xxxCBSizeHandler()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l02255">xxxCBUpdateListBoxWindow()</a>, <a class="el" href="../../d9/d7/ntuser_2kernel_2clipbrd_8c-source.html#l02618">xxxChangeClipboardChain()</a>, <a class="el" href="../../d6/d8/dlgmgr2_8c-source.html#l00084">xxxCheckDefPushButton()</a>, <a class="el" href="../../d4/d5/focusact_8c-source.html#l02549">xxxCheckFocus()</a>, <a class="el" href="../../d3/d7/swp_8c-source.html#l05305">xxxCheckFullScreen()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l03387">xxxCheckRedraw()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02425">xxxChildResize()</a>, <a class="el" href="../../d3/d6/ntuser_2kernel_2menu_8c-source.html#l01908">xxxCleanupDesktopMenu()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01913">xxxContScroll()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01835">xxxCopyAckIn()</a>, <a class="el" href="../../d5/d4/caret_8c-source.html#l00254">xxxCreateCaret()</a>, <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00875">xxxCreateTooltip()</a>, <a class="el" href="../../d5/d7/createw_8c-source.html#l00033">xxxCreateWindowEx()</a>, <a class="el" href="../../d9/d2/dwp_8c-source.html#l01223">xxxCreateWindowSmIcon()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00320">xxxDDETrackPostHook()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00768">xxxDDETrackWindowDying()</a>, <a class="el" href="../../d9/d2/dwp_8c-source.html#l01264">xxxDefWindowProc()</a>, <a class="el" href="../../d2/d2/dtbitmap_8c-source.html#l01402">xxxDesktopPaintCallback()</a>, <a class="el" href="../../d0/d6/desktop_8c-source.html#l00883">xxxDesktopWndProc()</a>, <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00375">xxxDestroyLBox()</a>, <a class="el" href="../../d5/d7/createw_8c-source.html#l01591">xxxDestroyWindow()</a>, <a class="el" href="../../d1/d1/lboxctl3_8c-source.html#l00190">xxxDlgDirListHelper()</a>, <a class="el" href="../../d0/d2/paint_8c-source.html#l01084">xxxDoSyncPaint()</a>, <a class="el" href="../../d7/d0/dragdrop_8c-source.html#l00026">xxxDragObject()</a>, <a class="el" href="../../d5/d8/minmax_8c-source.html#l01042">xxxDrawAnimatedRects()</a>, <a class="el" href="../../d2/d4/caption_8c-source.html#l00986">xxxDrawCaptionBar()</a>, <a class="el" href="../../d2/d4/caption_8c-source.html#l00688">xxxDrawCaptionTemp()</a>, <a class="el" href="../../d9/d2/movesize_8c-source.html#l01562">xxxDrawDragRect()</a>, <a class="el" href="../../d7/d1/mndraw_8c-source.html#l01670">xxxDrawMenuBar()</a>, <a class="el" href="../../d7/d1/mndraw_8c-source.html#l01972">xxxDrawMenuBarTemp()</a>, <a class="el" href="../../d7/d1/mndraw_8c-source.html#l02082">xxxDrawMenuBarUnderlines()</a>, <a class="el" href="../../d7/d1/mndraw_8c-source.html#l00750">xxxDrawMenuItem()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00800">xxxDrawSB2()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01464">xxxDrawScrollBar()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01277">xxxDrawThumb()</a>, <a class="el" href="../../d2/d2/dtbitmap_8c-source.html#l00829">xxxDrawWallpaper()</a>, <a class="el" href="../../d2/d1/drawfrm_8c-source.html#l00076">xxxDrawWindowFrame()</a>, <a class="el" href="../../d5/d7/createw_8c-source.html#l01989">xxxDW_DestroyOwnedWindows()</a>, <a class="el" href="../../d5/d7/createw_8c-source.html#l02053">xxxDW_SendDestroyMessages()</a>, <a class="el" href="../../d9/d2/dwp_8c-source.html#l00696">xxxDWP_DoNCActivate()</a>, <a class="el" href="../../d9/d2/dwp_8c-source.html#l00340">xxxDWP_EraseBkgnd()</a>, <a class="el" href="../../d9/d2/dwp_8c-source.html#l00601">xxxDWP_NCMouse()</a>, <a class="el" href="../../d9/d2/dwp_8c-source.html#l00286">xxxDWP_Paint()</a>, <a class="el" href="../../d9/d2/dwp_8c-source.html#l00402">xxxDWP_SetCursor()</a>, <a class="el" href="../../d9/d2/dwp_8c-source.html#l01109">xxxDWP_SetIcon()</a>, <a class="el" href="../../d9/d2/dwp_8c-source.html#l00055">xxxDWP_SetRedraw()</a>, <a class="el" href="../../d9/d2/dwp_8c-source.html#l00846">xxxDWPPrint()</a>, <a class="el" href="../../d6/d2/mnsys_8c-source.html#l00494">xxxEnableMenuItem()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00211">xxxEnableSBCtlArrows()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00392">xxxEnableScrollBar()</a>, <a class="el" href="../../d0/d7/kernel_2winmgr_8c-source.html#l00184">xxxEnableWindow()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00271">xxxEnableWndSBArrows()</a>, <a class="el" href="../../d3/d7/swp_8c-source.html#l04773">xxxEndDeferWindowPosEx()</a>, <a class="el" href="../../d0/d2/paint_8c-source.html#l00449">xxxEndPaint()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01782">xxxEndScroll()</a>, <a class="el" href="../../d2/d7/w32_2ntuser_2kernel_2event_8c-source.html#l00224">xxxEventWndProc()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01460">xxxExecute()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01515">xxxExecuteAck()</a>, <a class="el" href="../../d0/d2/paint_8c-source.html#l00033">xxxFillWindow()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02802">xxxFindString()</a>, <a class="el" href="../../d0/d7/kernel_2winmgr_8c-source.html#l00027">xxxFlashWindow()</a>, <a class="el" href="../../d1/d2/palette_8c-source.html#l00220">xxxFlushPalette()</a>, <a class="el" href="../../d6/d7/ntimm_8c-source.html#l00405">xxxFocusSetInputContext()</a>, <a class="el" href="../../d5/d7/createw_8c-source.html#l02218">xxxFreeWindow()</a>, <a class="el" href="../../d5/d7/createw_8c-source.html#l02126">xxxFW_DestroyAllChildren()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00540">xxxGetColorObjects()</a>, <a class="el" href="../../d9/d3/w32_2ntuser_2kernel_2random_8c-source.html#l00241">xxxGetControlBrush()</a>, <a class="el" href="../../d6/d6/kernel_2winable_8c-source.html#l00936">xxxGetEventProc()</a>, <a class="el" href="../../d5/d2/mnstate_8c-source.html#l00808">xxxGetInitMenuParam()</a>, <a class="el" href="../../d7/d6/winable2_8c-source.html#l00580">xxxGetMenuBarInfo()</a>, <a class="el" href="../../d5/d1/mncomput_8c-source.html#l00911">xxxGetMenuItemRect()</a>, <a class="el" href="../../d6/d2/mnsys_8c-source.html#l00189">xxxGetSysMenu()</a>, <a class="el" href="../../d6/d2/mnsys_8c-source.html#l00142">xxxGetSysMenuHandle()</a>, <a class="el" href="../../d6/d2/mnsys_8c-source.html#l00368">xxxGetSystemMenu()</a>, <a class="el" href="../../d7/d6/winable2_8c-source.html#l00170">xxxGetTitleBarInfo()</a>, <a class="el" href="../../d9/d8/update_8c-source.html#l01525">xxxGetUpdateRect()</a>, <a class="el" href="../../d9/d8/update_8c-source.html#l01665">xxxGetUpdateRgn()</a>, <a class="el" href="../../d2/d4/caption_8c-source.html#l00306">xxxGetWindowSmIcon()</a>, <a class="el" href="../../d0/d7/kernel_2winmgr_8c-source.html#l00257">xxxGetWindowText()</a>, <a class="el" href="../../d6/d9/dmmnem_8c-source.html#l00115">xxxGNM_FindNextMnem()</a>, <a class="el" href="../../d6/d9/dmmnem_8c-source.html#l00219">xxxGotoNextMnem()</a>, <a class="el" href="../../d5/d7/syscmd_8c-source.html#l00023">xxxHandleNCMouseGuys()</a>, <a class="el" href="../../d1/d4/ntuser_2kernel_2getset_8c-source.html#l00499">xxxHandleOwnerSwitch()</a>, <a class="el" href="../../d3/d7/swp_8c-source.html#l03381">xxxHandleWindowPosChanged()</a>, <a class="el" href="../../d3/d9/kernel_2help_8c-source.html#l00073">xxxHelpLoop()</a>, <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00836">xxxHotTrack()</a>, <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00733">xxxHotTrackMenu()</a>, <a class="el" href="../../d6/d1/hungapp_8c-source.html#l00446">xxxHungAppDemon()</a>, <a class="el" href="../../d6/d7/ntimm_8c-source.html#l00749">xxxImmActivateAndUnloadThreadsLayout()</a>, <a class="el" href="../../d6/d7/ntimm_8c-source.html#l00921">xxxImmActivateLayout()</a>, <a class="el" href="../../d6/d7/ntimm_8c-source.html#l00646">xxxImmActivateThreadsLayout()</a>, <a class="el" href="../../d6/d7/ntimm_8c-source.html#l01286">xxxImmProcessKey()</a>, <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00611">xxxInitActivateDlg()</a>, <a class="el" href="../../d5/d8/minmax_8c-source.html#l00032">xxxInitSendValidateMinMaxInfo()</a>, <a class="el" href="../../d4/d1/mnchange_8c-source.html#l00323">xxxInsertMenuItem()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02092">xxxInsureVisible()</a>, <a class="el" href="../../d7/d1/kbdlyout_8c-source.html#l01203">xxxInternalActivateKeyboardLayout()</a>, <a class="el" href="../../d0/d2/paint_8c-source.html#l00885">xxxInternalDoSyncPaint()</a>, <a class="el" href="../../d5/d6/enumwin_8c-source.html#l00040">xxxInternalEnumWindow()</a>, <a class="el" href="../../d9/d8/update_8c-source.html#l01302">xxxInternalInvalidate()</a>, <a class="el" href="../../d2/d2/dtbitmap_8c-source.html#l01615">xxxInternalPaintDesktop()</a>, <a class="el" href="../../d9/d8/update_8c-source.html#l01259">xxxInternalUpdateWindow()</a>, <a class="el" href="../../d2/d2/dtbitmap_8c-source.html#l01557">xxxInvalidateDesktopOnPaletteChange()</a>, <a class="el" href="../../d9/d8/update_8c-source.html#l00039">xxxInvalidateRect()</a>, <a class="el" href="../../d9/d8/update_8c-source.html#l00110">xxxInvalidateRgn()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01111">xxxInvertLBItem()</a>, <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l00722">xxxLBBinarySearchString()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l03651">xxxLBBlockHilite()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01875">xxxLBButtonUp()</a>, <a class="el" href="../../d1/d1/lboxctl3_8c-source.html#l00839">xxxLbDir()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00354">xxxLBDrawLBItem()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00060">xxxLBGetBrush()</a>, <a class="el" href="../../d1/d1/lboxctl3_8c-source.html#l01036">xxxLbInsertFile()</a>, <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l00407">xxxLBInsertItem()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00038">xxxLBInvalidateRect()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02948">xxxLBoxCtlCharInput()</a>, <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l00842">xxxLBoxCtlDelete()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00691">xxxLBoxCtlHScroll()</a>, <a class="el" href="../../d2/d1/lboxmult_8c-source.html#l00071">xxxLBoxCtlHScrollMultiColumn()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02183">xxxLBoxCtlKeyInput()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00561">xxxLBoxCtlScroll()</a>, <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l01053">xxxLBoxDeleteItem()</a>, <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00350">xxxLBoxDoDeleteItems()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l03558">xxxLBoxDrawItem()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00798">xxxLBPaint()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l03206">xxxLBSelRange()</a>, <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l01107">xxxLBSetCount()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l03259">xxxLBSetCurSel()</a>, <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00438">xxxLBSetFont()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l03172">xxxLBSetRedraw()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l03455">xxxLBSetSel()</a>, <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00514">xxxLBSize()</a>, <a class="el" href="../../d9/d7/fullscr_8c-source.html#l00166">xxxMakeWindowForegroundWithState()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01237">xxxMDIActivate()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01540">xxxMDIDestroy()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01420">xxxMDINext()</a>, <a class="el" href="../../d5/d1/mncomput_8c-source.html#l00706">xxxMenuBarCompute()</a>, <a class="el" href="../../d7/d1/mndraw_8c-source.html#l01373">xxxMenuBarDraw()</a>, <a class="el" href="../../d7/d1/mndraw_8c-source.html#l01534">xxxMenuDraw()</a>, <a class="el" href="../../d5/d1/mncomput_8c-source.html#l00972">xxxMenuItemFromPoint()</a>, <a class="el" href="../../d3/d6/ntuser_2kernel_2menu_8c-source.html#l04022">xxxMenuWindowProc()</a>, <a class="el" href="../../d5/d8/minmax_8c-source.html#l02005">xxxMinimizeHungWindow()</a>, <a class="el" href="../../d5/d8/minmax_8c-source.html#l01329">xxxMinMaximize()</a>, <a class="el" href="../../d6/d6/ntuser_2rtl_2menu_8c-source.html#l00078">xxxMNCanClose()</a>, <a class="el" href="../../d5/d1/mncomput_8c-source.html#l00233">xxxMNCompute()</a>, <a class="el" href="../../d7/d1/mndraw_8c-source.html#l01697">xxxMNInvertItem()</a>, <a class="el" href="../../d5/d1/mncomput_8c-source.html#l00062">xxxMNItemSize()</a>, <a class="el" href="../../d5/d1/mncomput_8c-source.html#l00758">xxxMNRecomputeBarIfNeeded()</a>, <a class="el" href="../../d5/d2/mnstate_8c-source.html#l00540">xxxMNStartMenuState()</a>, <a class="el" href="../../d6/d2/ntuser_2kernel_2input_8c-source.html#l02444">xxxMouseActivate()</a>, <a class="el" href="../../d9/d2/movesize_8c-source.html#l01053">xxxMoveSize()</a>, <a class="el" href="../../d2/d2/tmswitch_8c-source.html#l01325">xxxMoveSwitchWndHilite()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01596">xxxMoveThumb()</a>, <a class="el" href="../../d3/d7/swp_8c-source.html#l00144">xxxMoveWindow()</a>, <a class="el" href="../../d9/d2/movesize_8c-source.html#l00437">xxxMS_TrackMove()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02012">xxxNewITopEx()</a>, <a class="el" href="../../d6/d7/ntimm_8c-source.html#l02295">xxxNotifyIMEStatus()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01244">xxxNotifyOwner()</a>, <a class="el" href="../../d9/d7/ntuser_2kernel_2clipbrd_8c-source.html#l00124">xxxOpenClipboard()</a>, <a class="el" href="../../d2/d2/tmswitch_8c-source.html#l00808">xxxPaintIconsInSwitchWindow()</a>, <a class="el" href="../../d0/d2/paint_8c-source.html#l00072">xxxPaintRect()</a>, <a class="el" href="../../d2/d2/tmswitch_8c-source.html#l01012">xxxPaintSwitchWindow()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01344">xxxPoke()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01411">xxxPokeAck()</a>, <a class="el" href="../../d7/d2/queue_8c-source.html#l03736">xxxProcessHungThreadEvent()</a>, <a class="el" href="../../d7/d0/dragdrop_8c-source.html#l00243">xxxQueryDropObject()</a>, <a class="el" href="../../d7/d1/mndraw_8c-source.html#l00954">xxxRealDrawMenuItem()</a>, <a class="el" href="../../d0/d6/desktop_8c-source.html#l00863">xxxRealizeDesktop()</a>, <a class="el" href="../../d3/d7/metrics_8c-source.html#l00075">xxxRecreateSmallIcons()</a>, <a class="el" href="../../d2/d1/drawfrm_8c-source.html#l00192">xxxRedrawFrame()</a>, <a class="el" href="../../d2/d1/drawfrm_8c-source.html#l00205">xxxRedrawFrameAndHook()</a>, <a class="el" href="../../d6/d1/hungapp_8c-source.html#l00135">xxxRedrawHungWindow()</a>, <a class="el" href="../../d6/d1/hungapp_8c-source.html#l00107">xxxRedrawHungWindowFrame()</a>, <a class="el" href="../../d9/d2/dwp_8c-source.html#l00766">xxxRedrawTitle()</a>, <a class="el" href="../../d9/d8/update_8c-source.html#l00299">xxxRedrawWindow()</a>, <a class="el" href="../../d6/d8/dlgmgr2_8c-source.html#l00031">xxxRemoveDefaultButton()</a>, <a class="el" href="../../d4/d1/mnchange_8c-source.html#l00644">xxxRemoveDeleteMenuHelper()</a>, <a class="el" href="../../d9/d6/winloop2_8c-source.html#l00205">xxxRemoveFullScreen()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01234">xxxRequestAck()</a>, <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00453">xxxResetTooltip()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01181">xxxResetWorld()</a>, <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l00110">xxxRestoreDlgFocus()</a>, <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l00083">xxxSaveDlgFocus()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l02196">xxxSBTrackInit()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l02123">xxxSBTrackLoop()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l02582">xxxSBWndProc()</a>, <a class="el" href="../../d0/d4/scrollw_8c-source.html#l00741">xxxScrollWindowEx()</a>, <a class="el" href="../../d0/d2/paint_8c-source.html#l00278">xxxSendChildNCPaint()</a>, <a class="el" href="../../d0/d2/paint_8c-source.html#l01147">xxxSendEraseBkgnd()</a>, <a class="el" href="../../d4/d5/focusact_8c-source.html#l00220">xxxSendFocusMessages()</a>, <a class="el" href="../../d3/d9/kernel_2help_8c-source.html#l00043">xxxSendHelpMessage()</a>, <a class="el" href="../../d7/d1/mndraw_8c-source.html#l00617">xxxSendMenuDrawItemMessage()</a>, <a class="el" href="../../d4/d2/mnsel_8c-source.html#l00029">xxxSendMenuSelect()</a>, <a class="el" href="../../d4/d5/kernel_2sendmsg_8c-source.html#l01114">xxxSendMessageCallback()</a>, <a class="el" href="../../d4/d5/kernel_2sendmsg_8c-source.html#l00764">xxxSendMessageTimeout()</a>, <a class="el" href="../../d0/d2/paint_8c-source.html#l00232">xxxSendNCPaint()</a>, <a class="el" href="../../d4/d5/focusact_8c-source.html#l01990">xxxSetActiveWindow()</a>, <a class="el" href="../../d3/d6/class_8c-source.html#l01399">xxxSetClassData()</a>, <a class="el" href="../../d7/d6/classchg_8c-source.html#l00056">xxxSetClassIcon()</a>, <a class="el" href="../../d7/d6/classchg_8c-source.html#l00026">xxxSetClassIconEnum()</a>, <a class="el" href="../../d3/d6/class_8c-source.html#l00909">xxxSetClassLongPtr()</a>, <a class="el" href="../../d9/d7/ntuser_2kernel_2clipbrd_8c-source.html#l02572">xxxSetClipboardViewer()</a>, <a class="el" href="../../d3/d1/mnapi_8c-source.html#l00095">xxxSetDialogSystemMenu()</a>, <a class="el" href="../../d4/d5/focusact_8c-source.html#l01815">xxxSetFocus()</a>, <a class="el" href="../../d4/d5/focusact_8c-source.html#l01235">xxxSetForegroundWindow()</a>, <a class="el" href="../../d4/d5/focusact_8c-source.html#l01342">xxxSetForegroundWindow2()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00032">xxxSetFrameTitle()</a>, <a class="el" href="../../d0/d7/kernel_2winmgr_8c-source.html#l01054">xxxSetInternalWindowPos()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01265">xxxSetISelBase()</a>, <a class="el" href="../../d9/d3/sprite_8c-source.html#l00467">xxxSetLayeredWindow()</a>, <a class="el" href="../../d4/d1/mnchange_8c-source.html#l00796">xxxSetLPITEMInfo()</a>, <a class="el" href="../../d3/d1/mnapi_8c-source.html#l00027">xxxSetMenu()</a>, <a class="el" href="../../d4/d1/mnchange_8c-source.html#l00204">xxxSetMenuInfo()</a>, <a class="el" href="../../d4/d1/mnchange_8c-source.html#l00146">xxxSetMenuItemInfo()</a>, <a class="el" href="../../d0/d7/kernel_2winmgr_8c-source.html#l00311">xxxSetParent()</a>, <a class="el" href="../../d7/d1/kbdlyout_8c-source.html#l00560">xxxSetPKLinThreads()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01316">xxxSetScrollBar()</a>, <a class="el" href="../../d6/d4/statctl_8c-source.html#l00094">xxxSetStaticImage()</a>, <a class="el" href="../../d6/d2/mnsys_8c-source.html#l00232">xxxSetSysMenu()</a>, <a class="el" href="../../d3/d1/mnapi_8c-source.html#l00065">xxxSetSystemMenu()</a>, <a class="el" href="../../d9/d6/winloop2_8c-source.html#l00100">xxxSetTrayWindow()</a>, <a class="el" href="../../d1/d4/ntuser_2kernel_2getset_8c-source.html#l00568">xxxSetWindowData()</a>, <a class="el" href="../../d0/d7/kernel_2winmgr_8c-source.html#l00911">xxxSetWindowPlacement()</a>, <a class="el" href="../../d3/d7/swp_8c-source.html#l01468">xxxSetWindowPos()</a>, <a class="el" href="../../d7/d6/classchg_8c-source.html#l00203">xxxSetWindowStyle()</a>, <a class="el" href="../../d1/d8/showwin_8c-source.html#l00593">xxxShowOwnedPopups()</a>, <a class="el" href="../../d1/d8/showwin_8c-source.html#l00437">xxxShowOwnedWindows()</a>, <a class="el" href="../../d8/d3/kernel_2sbapi_8c-source.html#l00032">xxxShowScrollBar()</a>, <a class="el" href="../../d2/d2/tmswitch_8c-source.html#l01476">xxxShowSwitchWindow()</a>, <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00484">xxxShowTooltip()</a>, <a class="el" href="../../d1/d8/showwin_8c-source.html#l00085">xxxShowWindow()</a>, <a class="el" href="../../d0/d2/paint_8c-source.html#l00740">xxxSimpleDoSyncPaint()</a>, <a class="el" href="../../d6/d8/snapshot_8c-source.html#l00023">xxxSnapWindow()</a>, <a class="el" href="../../d6/d4/statctl_8c-source.html#l00246">xxxStaticLoadImage()</a>, <a class="el" href="../../d6/d4/statctl_8c-source.html#l00419">xxxStaticPaint()</a>, <a class="el" href="../../d2/d2/tmswitch_8c-source.html#l00253">xxxSwitchToThisWindow()</a>, <a class="el" href="../../d2/d2/tmswitch_8c-source.html#l01564">xxxSwitchWndProc()</a>, <a class="el" href="../../d3/d7/swp_8c-source.html#l01586">xxxSwpActivate()</a>, <a class="el" href="../../d5/d7/syscmd_8c-source.html#l00193">xxxSysCommand()</a>, <a class="el" href="../../d5/d1/timers_8c-source.html#l00882">xxxSystemTimerProc()</a>, <a class="el" href="../../d2/d1/mnaccel_8c-source.html#l00145">xxxTA_AccelerateMenu()</a>, <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00570">xxxTooltipWndProc()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01971">xxxTrackBox()</a>, <a class="el" href="../../d2/d4/caption_8c-source.html#l00158">xxxTrackCaptionButton()</a>, <a class="el" href="../../d9/d2/movesize_8c-source.html#l00873">xxxTrackInitSize()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01290">xxxTrackMouse()</a>, <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00904">xxxTrackMouseMove()</a>, <a class="el" href="../../d3/d2/mnpopup_8c-source.html#l00052">xxxTrackPopupMenuEx()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l02061">xxxTrackThumb()</a>, <a class="el" href="../../d2/d1/mnaccel_8c-source.html#l00251">xxxTranslateAccelerator()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01193">xxxUnadviseAck()</a>, <a class="el" href="../../d9/d2/movesize_8c-source.html#l01485">xxxUpdateOtherThreadsWindows()</a>, <a class="el" href="../../d9/d2/movesize_8c-source.html#l01523">xxxUpdateThreadsWindows()</a>, <a class="el" href="../../d4/d5/focusact_8c-source.html#l00374">xxxUpdateTray()</a>, <a class="el" href="../../d9/d8/update_8c-source.html#l01430">xxxUpdateWindow()</a>, <a class="el" href="../../d9/d8/update_8c-source.html#l01121">xxxUpdateWindow2()</a>, <a class="el" href="../../d9/d3/w32_2ntuser_2kernel_2random_8c-source.html#l00025">xxxUpdateWindows()</a>, <a class="el" href="../../d9/d8/update_8c-source.html#l00077">xxxValidateRect()</a>, <a class="el" href="../../d9/d8/update_8c-source.html#l00132">xxxValidateRgn()</a>, <a class="el" href="../../d0/d8/winwhere_8c-source.html#l00274">xxxWindowHitTest()</a>, and <a class="el" href="../../d0/d8/winwhere_8c-source.html#l00315">xxxWindowHitTest2()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a109" doxytag="usercli.h::CITEMSALLOC" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define CITEMSALLOC&nbsp;&nbsp;&nbsp;32          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00785">785</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l00407">xxxLBInsertItem()</a>, and <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l01107">xxxLBSetCount()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a270" doxytag="usercli.h::CKIDS" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define CKIDS          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">pmdi&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;(pmdi-&gt;cKids)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02067">2067</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02794">CreateMDIChild()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02101">DefFrameProcWorker()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01657">MDIClientWndProcWorker()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02735">MDICompleteChildCreation()</a>, <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00499">MDISetMenu()</a>, <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00467">ShiftMenuIDs()</a>, <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00611">xxxInitActivateDlg()</a>, and <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01540">xxxMDIDestroy()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a280" doxytag="usercli.h::COM_NO_WINDOWS_H" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define COM_NO_WINDOWS_H          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02090">2090</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a68" doxytag="usercli.h::COMBOBOXSTYLE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define COMBOBOXSTYLE          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">style&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;((LOBYTE(style)) &amp; 3)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00458">458</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a144" doxytag="usercli.h::CrackCombinedDbcsLB" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define CrackCombinedDbcsLB          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d1/genuedef_8c.html#a8">c</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;((<a class="el" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a>)(<a class="el" href="../../d7/d1/genuedef_8c.html#a8">c</a>))</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01022">1022</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a145" doxytag="usercli.h::CrackCombinedDbcsTB" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define CrackCombinedDbcsTB          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d1/genuedef_8c.html#a8">c</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;((<a class="el" href="../../d7/d1/genuedef_8c.html#a8">c</a>) &gt;&gt; 8)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01023">1023</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d2/d3/combo_8c-source.html#l00104">ComboBoxDBCharHandler()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a233" doxytag="usercli.h::CreateCaret" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define <a class="el" href="../../d3/d0/user32_8def.html#a67">CreateCaret</a>&nbsp;&nbsp;&nbsp;NtUserCreateCaret          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01579">1579</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01225">ECSetCaretHandler()</a>, and <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00288">WndProc()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a11" doxytag="usercli.h::CsSendMessage" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define CsSendMessage          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">hwnd,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d2/d1/userexts_8c.html#a129">msg</a>,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>wParam,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>lParam,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>xParam,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>pfn,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>bAnsi&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Value:</b><pre class="fragment"><div>(((<a class="code" href="../../d2/d1/userexts_8c.html#a129">msg</a>) &gt;= WM_USER) ? \
            <a class="code" href="../../d0/d0/ntuser_8h.html#a249">NtUserMessageCall</a>(hwnd, msg, wParam, lParam, xParam, pfn, bAnsi) : \
            <a class="code" href="../../d8/d6/ntuser_2client_2globals_8h.html#a22">gapfnScSendMessage</a>[<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a1144">MessageTable</a>[<a class="code" href="../../d2/d1/userexts_8c.html#a129">msg</a>].iFunction](hwnd, <a class="code" href="../../d2/d1/userexts_8c.html#a129">msg</a>, wParam, lParam, xParam, pfn, bAnsi))
</div></pre>
<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00148">148</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l02439">BroadcastSystemMessageWorker()</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00724">CallNextHookEx()</a>, <a class="el" href="../../d1/d8/clmsg_8c-source.html#l01399">CallWindowProcAorW()</a>, <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00574">DefWindowProcWorker()</a>, <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00078">DesktopWndProcWorker()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02831">EditWndProcWorker()</a>, <a class="el" href="../../d1/d8/clmsg_8c-source.html#l01486">MenuWindowProcA()</a>, <a class="el" href="../../d1/d8/clmsg_8c-source.html#l01475">MenuWindowProcW()</a>, <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00127">MenuWndProcWorker()</a>, <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00187">ScrollBarWndProcWorker()</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00652">SendMessage()</a>, <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00498">SendMessageTimeoutWorker()</a>, and <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00270">SendMessageWorker()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a77" doxytag="usercli.h::CTRLDOWN" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define CTRLDOWN&nbsp;&nbsp;&nbsp;1 /* Control key <a class="el" href="../../d3/d0/imm32_8def.html#a1">only</a> down */          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00510">510</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/editec_8c-source.html#l00733">ECGetModKeys()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l02531">MLChar()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l02028">MLKeyDown()</a>, and <a class="el" href="../../d4/d4/editsl_8c-source.html#l01529">SLKeyDown()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a53" doxytag="usercli.h::DBT_FOCUS" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define DBT_FOCUS&nbsp;&nbsp;&nbsp;0x0002          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00404">404</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d0/btnctl_8c-source.html#l01338">ButtonWndProcWorker()</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l00722">xxxBNDrawText()</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l01206">xxxBNPaint()</a>, and <a class="el" href="../../d9/d0/btnctl_8c-source.html#l01159">xxxDrawButton()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a52" doxytag="usercli.h::DBT_TEXT" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define DBT_TEXT&nbsp;&nbsp;&nbsp;0x0001          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00403">403</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d0/btnctl_8c-source.html#l00722">xxxBNDrawText()</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l01206">xxxBNPaint()</a>, and <a class="el" href="../../d9/d0/btnctl_8c-source.html#l01159">xxxDrawButton()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a16" doxytag="usercli.h::DIFFWOWHANDLE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define DIFFWOWHANDLE          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">h1,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>h2&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;(!SAMEWOWHANDLE(h1, h2))</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00161">161</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02531">DefMDIChildProcWorker()</a>, and <a class="el" href="../../d7/d3/msgbox_8c-source.html#l01892">StartTaskModalDialog()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a299" doxytag="usercli.h::DISPATCH_DBCS_MESSAGE_IF_EXIST" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define DISPATCH_DBCS_MESSAGE_IF_EXIST          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">_msg,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>_wParam,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>_bDbcs,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>_apiName&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Value:</b><pre class="fragment"><div><span class="comment">/*                                                                                      \</span>
<span class="comment">         * Check we need to send trailing byte or not, if the wParam has Dbcs character         \</span>
<span class="comment">         */</span>                                                                                     \
        <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a125">IS_DBCS_ENABLED</a>() &amp;&amp; (_bDbcs) &amp;&amp; (<a class="code" href="../../d6/d0/usercli_8h.html#a292">GetCallBackDbcsInfo</a>()-&gt;wParam)) {                 \
            PKERNEL_MSG pmsgDbcsCB = <a class="code" href="../../d6/d0/usercli_8h.html#a292">GetCallBackDbcsInfo</a>();                                            \
            <span class="comment">/*                                                                                  \</span>
<span class="comment">             * If an app didn't peek (or get) the trailing byte from within                     \</span>
<span class="comment">             * WndProc, and then pass the DBCS TrailingByte to the ANSI WndProc here            \</span>
<span class="comment">             * pmsgDbcsCB-&gt;wParam has DBCS TrailingByte here.. see above..                      \</span>
<span class="comment">             */</span>                                                                                 \
            (_wParam) = KERNEL_WPARAM_TO_WPARAM(pmsgDbcsCB-&gt;wParam);                            \
            <span class="comment">/*                                                                                  \</span>
<span class="comment">             * Invalidate cached message.                                                       \</span>
<span class="comment">             */</span>                                                                                 \
            pmsgDbcsCB-&gt;wParam = 0;                                                             \
            <span class="comment">/*                                                                                  \</span>
<span class="comment">             * Send it....                                                                      \</span>
<span class="comment">             */</span>                                                                                 \
            <span class="keywordflow">goto</span> _apiName ## Again;                                                             \
        }
</div></pre>
<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02390">2390</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d1/d8/clmsg_8c-source.html#l01533">DispatchMessageWorker()</a>, and <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00270">SendMessageWorker()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a149" doxytag="usercli.h::ECGetCaretWidth" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ECGetCaretWidth          </td>
          <td class="md" valign="top">(&nbsp;</td>
&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;(<a class="el" href="../../d9/d6/ntuser_2kernel_2globals_8h.html#a317">gpsi</a>-&gt;uCaretWidth)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01051">1051</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d6/d3/edecrare_8c-source.html#l00708">ECSetFont()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l03457">MLEditWndProc()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l00292">MLSetCaretPosition()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l03274">MLSetFocus()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l02520">SLEditWndProc()</a>, and <a class="el" href="../../d4/d4/editsl_8c-source.html#l02341">SLSetFocus()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a146" doxytag="usercli.h::ECT_CALC" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ECT_CALC&nbsp;&nbsp;&nbsp;0          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01047">1047</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/editec_8c-source.html#l01281">ECCchInWidth()</a>, and <a class="el" href="../../d2/d4/editml_8c-source.html#l00040">MLGetLineWidth()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a147" doxytag="usercli.h::ECT_NORMAL" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ECT_NORMAL&nbsp;&nbsp;&nbsp;1          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01048">1048</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d2/d4/editml_8c-source.html#l03991">MLDrawText()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a148" doxytag="usercli.h::ECT_SELECTED" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ECT_SELECTED&nbsp;&nbsp;&nbsp;2          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01049">1049</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/editec_8c-source.html#l00770">ECTabTheTextOut()</a>, and <a class="el" href="../../d2/d4/editml_8c-source.html#l03991">MLDrawText()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a110" doxytag="usercli.h::EQ" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define EQ&nbsp;&nbsp;&nbsp;0          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00788">788</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02757">Compare()</a>, <a class="el" href="../../d7/d0/lb1_8c-source.html#l00032">ListBoxWndProcWorker()</a>, and <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02802">xxxFindString()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a116" doxytag="usercli.h::EXTENDEDSEL" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define EXTENDEDSEL&nbsp;&nbsp;&nbsp;2          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00795">795</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01875">xxxLBButtonUp()</a>, <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00062">xxxLBCreate()</a>, <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l00842">xxxLBoxCtlDelete()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02183">xxxLBoxCtlKeyInput()</a>, and <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01290">xxxTrackMouse()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a87" doxytag="usercli.h::FAREAST_CHARSET_BITS" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define FAREAST_CHARSET_BITS&nbsp;&nbsp;&nbsp;(FS_JISJAPAN | FS_CHINESESIMP | FS_WANSUNG | FS_CHINESETRAD)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00724">724</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/editec_8c-source.html#l03820">ECGetDBCSVector()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a9" doxytag="usercli.h::FDEFWINDOWMSG" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define FDEFWINDOWMSG          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d2/d1/userexts_8c.html#a129">msg</a>,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>procname&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Value:</b><pre class="fragment"><div>((<a class="code" href="../../d2/d1/userexts_8c.html#a129">msg</a> &lt;= (<a class="code" href="../../d1/d8/clglobal_8c.html#a5">gSharedInfo</a>.procname.maxMsgs)) &amp;&amp; \
            ((<a class="code" href="../../d1/d8/clglobal_8c.html#a5">gSharedInfo</a>.procname.abMsgs)[<a class="code" href="../../d2/d1/userexts_8c.html#a129">msg</a> / 8] &amp; (1 &lt;&lt; (<a class="code" href="../../d2/d1/userexts_8c.html#a129">msg</a> &amp; 7))))
</div></pre>
<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00141">141</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00574">DefWindowProcWorker()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a234" doxytag="usercli.h::FillWindow" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define FillWindow&nbsp;&nbsp;&nbsp;NtUserFillWindow          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01580">1580</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l00460">DefDlgProcWorker()</a>, <a class="el" href="../../d7/d0/lb1_8c-source.html#l00032">ListBoxWndProcWorker()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l03457">MLEditWndProc()</a>, and <a class="el" href="../../d4/d7/client_8c-source.html#l02696">UserRegisterWowHandlers()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a125" doxytag="usercli.h::FINDRESOURCEA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define FINDRESOURCEA          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">hModule,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>lpName,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>lpType&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;((*(<a class="el" href="../../d8/d6/ntuser_2client_2globals_8h.html#a45">pfnFindResourceExA</a>))(hModule, lpType, lpName, 0))</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00907">907</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d5/d8/clres_8c-source.html#l00941">CreateDialogParamA()</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l00868">DialogBoxParamA()</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l00501">LoadAcceleratorsA()</a>, and <a class="el" href="../../d0/d8/clmenu_8c-source.html#l00410">LoadMenuA()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a127" doxytag="usercli.h::FINDRESOURCEEXA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define FINDRESOURCEEXA          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">hModule,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>lpName,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>lpType,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>wLang&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;((*(<a class="el" href="../../d8/d6/ntuser_2client_2globals_8h.html#a45">pfnFindResourceExA</a>))(hModule, lpType, lpName, wLang))</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00909">909</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d5/d8/clres_8c-source.html#l04127">WOWFindResourceExWCover()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a128" doxytag="usercli.h::FINDRESOURCEEXW" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define FINDRESOURCEEXW          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">hModule,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>lpName,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>lpType,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>wLang&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;((*(<a class="el" href="../../d8/d6/ntuser_2client_2globals_8h.html#a46">pfnFindResourceExW</a>))(hModule, lpType, lpName, wLang))</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00910">910</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d4/d1/rtlres_8c-source.html#l00037">LoadStringOrError()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a126" doxytag="usercli.h::FINDRESOURCEW" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define FINDRESOURCEW          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">hModule,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>lpName,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>lpType&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;((*(<a class="el" href="../../d8/d6/ntuser_2client_2globals_8h.html#a46">pfnFindResourceExW</a>))(hModule, lpType, lpName, 0))</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00908">908</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d5/d8/clres_8c-source.html#l00975">CreateDialogParamW()</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l00902">DialogBoxParamW()</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l00512">LoadAcceleratorsW()</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l01899">LoadBmp()</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l02544">LoadDIB()</a>, <a class="el" href="../../d0/d8/clmenu_8c-source.html#l00422">LoadMenuW()</a>, and <a class="el" href="../../d5/d8/clres_8c-source.html#l00088">SplFindResource()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a274" doxytag="usercli.h::FIRST" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define FIRST          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">pmdi&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;(pmdi-&gt;idFirstChild)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02071">2071</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00362">AppendToWindowsMenu()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02794">CreateMDIChild()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02101">DefFrameProcWorker()</a>, <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00047">MakeMenuItem()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01657">MDIClientWndProcWorker()</a>, <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00499">MDISetMenu()</a>, <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00104">ModifyMenuItem()</a>, <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00467">ShiftMenuIDs()</a>, <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00611">xxxInitActivateDlg()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01237">xxxMDIActivate()</a>, and <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01540">xxxMDIDestroy()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a166" doxytag="usercli.h::fnCOPYDATA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define fnCOPYDATA&nbsp;&nbsp;&nbsp;NtUserMessageCall          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01204">1204</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a167" doxytag="usercli.h::fnDDEINIT" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define fnDDEINIT&nbsp;&nbsp;&nbsp;NtUserMessageCall          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01205">1205</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a168" doxytag="usercli.h::fnDWORD" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define fnDWORD&nbsp;&nbsp;&nbsp;NtUserMessageCall          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01206">1206</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a169" doxytag="usercli.h::fnDWORDOPTINLPMSG" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define fnDWORDOPTINLPMSG&nbsp;&nbsp;&nbsp;NtUserMessageCall          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01207">1207</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a171" doxytag="usercli.h::fnGETDBCSTEXTLENGTHS" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define fnGETDBCSTEXTLENGTHS&nbsp;&nbsp;&nbsp;NtUserMessageCall          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01209">1209</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a170" doxytag="usercli.h::fnGETTEXTLENGTHS" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define fnGETTEXTLENGTHS&nbsp;&nbsp;&nbsp;NtUserMessageCall          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01208">1208</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a195" doxytag="usercli.h::fnINCBOXSTRING" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define fnINCBOXSTRING&nbsp;&nbsp;&nbsp;NtUserMessageCall          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01233">1233</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a196" doxytag="usercli.h::fnINCNTOUTSTRING" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define fnINCNTOUTSTRING&nbsp;&nbsp;&nbsp;NtUserMessageCall          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01234">1234</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a197" doxytag="usercli.h::fnINCNTOUTSTRINGNULL" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define fnINCNTOUTSTRINGNULL&nbsp;&nbsp;&nbsp;NtUserMessageCall          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01235">1235</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a198" doxytag="usercli.h::fnINLBOXSTRING" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define fnINLBOXSTRING&nbsp;&nbsp;&nbsp;NtUserMessageCall          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01236">1236</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a173" doxytag="usercli.h::fnINLPCOMPAREITEMSTRUCT" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define fnINLPCOMPAREITEMSTRUCT&nbsp;&nbsp;&nbsp;NtUserMessageCall          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01211">1211</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a172" doxytag="usercli.h::fnINLPCREATESTRUCT" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define fnINLPCREATESTRUCT&nbsp;&nbsp;&nbsp;NtUserMessageCall          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01210">1210</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a174" doxytag="usercli.h::fnINLPDELETEITEMSTRUCT" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define fnINLPDELETEITEMSTRUCT&nbsp;&nbsp;&nbsp;NtUserMessageCall          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01212">1212</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a175" doxytag="usercli.h::fnINLPDRAWITEMSTRUCT" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define fnINLPDRAWITEMSTRUCT&nbsp;&nbsp;&nbsp;NtUserMessageCall          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01213">1213</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a176" doxytag="usercli.h::fnINLPHELPINFOSTRUCT" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define fnINLPHELPINFOSTRUCT&nbsp;&nbsp;&nbsp;NtUserMessageCall          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01214">1214</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a177" doxytag="usercli.h::fnINLPHLPSTRUCT" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define fnINLPHLPSTRUCT&nbsp;&nbsp;&nbsp;NtUserMessageCall          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01215">1215</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a199" doxytag="usercli.h::fnINLPMDICREATESTRUCT" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define fnINLPMDICREATESTRUCT&nbsp;&nbsp;&nbsp;NtUserMessageCall          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01237">1237</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a178" doxytag="usercli.h::fnINLPWINDOWPOS" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define fnINLPWINDOWPOS&nbsp;&nbsp;&nbsp;NtUserMessageCall          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01216">1216</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a179" doxytag="usercli.h::fnINOUTDRAG" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define fnINOUTDRAG&nbsp;&nbsp;&nbsp;NtUserMessageCall          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01217">1217</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a180" doxytag="usercli.h::fnINOUTLPMEASUREITEMSTRUCT" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define fnINOUTLPMEASUREITEMSTRUCT&nbsp;&nbsp;&nbsp;NtUserMessageCall          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01218">1218</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a181" doxytag="usercli.h::fnINOUTLPPOINT5" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define fnINOUTLPPOINT5&nbsp;&nbsp;&nbsp;NtUserMessageCall          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01219">1219</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a182" doxytag="usercli.h::fnINOUTLPRECT" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define fnINOUTLPRECT&nbsp;&nbsp;&nbsp;NtUserMessageCall          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01220">1220</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a183" doxytag="usercli.h::fnINOUTLPSCROLLINFO" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define fnINOUTLPSCROLLINFO&nbsp;&nbsp;&nbsp;NtUserMessageCall          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01221">1221</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a184" doxytag="usercli.h::fnINOUTLPWINDOWPOS" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define fnINOUTLPWINDOWPOS&nbsp;&nbsp;&nbsp;NtUserMessageCall          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01222">1222</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a194" doxytag="usercli.h::fnINOUTMENUGETOBJECT" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define fnINOUTMENUGETOBJECT&nbsp;&nbsp;&nbsp;NtUserMessageCall          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01232">1232</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a185" doxytag="usercli.h::fnINOUTNCCALCSIZE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define fnINOUTNCCALCSIZE&nbsp;&nbsp;&nbsp;NtUserMessageCall          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01223">1223</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a186" doxytag="usercli.h::fnINOUTNEXTMENU" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define fnINOUTNEXTMENU&nbsp;&nbsp;&nbsp;NtUserMessageCall          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01224">1224</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a187" doxytag="usercli.h::fnINOUTSTYLECHANGE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define fnINOUTSTYLECHANGE&nbsp;&nbsp;&nbsp;NtUserMessageCall          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01225">1225</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a200" doxytag="usercli.h::fnINSTRING" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define fnINSTRING&nbsp;&nbsp;&nbsp;NtUserMessageCall          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01238">1238</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a201" doxytag="usercli.h::fnINSTRINGNULL" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define fnINSTRINGNULL&nbsp;&nbsp;&nbsp;NtUserMessageCall          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01239">1239</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a202" doxytag="usercli.h::fnINWPARAMCHAR" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define fnINWPARAMCHAR&nbsp;&nbsp;&nbsp;NtUserMessageCall          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01240">1240</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a206" doxytag="usercli.h::fnKERNELONLY" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define fnKERNELONLY&nbsp;&nbsp;&nbsp;NtUserMessageCall          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01244">1244</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a188" doxytag="usercli.h::fnOPTOUTLPDWORDOPTOUTLPDWORD" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define fnOPTOUTLPDWORDOPTOUTLPDWORD&nbsp;&nbsp;&nbsp;NtUserMessageCall          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01226">1226</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a203" doxytag="usercli.h::fnOUTCBOXSTRING" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define fnOUTCBOXSTRING&nbsp;&nbsp;&nbsp;NtUserMessageCall          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01241">1241</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a193" doxytag="usercli.h::fnOUTDWORDINDWORD" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define fnOUTDWORDINDWORD&nbsp;&nbsp;&nbsp;NtUserMessageCall          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01231">1231</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a204" doxytag="usercli.h::fnOUTLBOXSTRING" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define fnOUTLBOXSTRING&nbsp;&nbsp;&nbsp;NtUserMessageCall          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01242">1242</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a189" doxytag="usercli.h::fnOUTLPRECT" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define fnOUTLPRECT&nbsp;&nbsp;&nbsp;NtUserMessageCall          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01227">1227</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a205" doxytag="usercli.h::fnOUTSTRING" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define fnOUTSTRING&nbsp;&nbsp;&nbsp;NtUserMessageCall          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01243">1243</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a190" doxytag="usercli.h::fnPOPTINLPUINT" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define fnPOPTINLPUINT&nbsp;&nbsp;&nbsp;NtUserMessageCall          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01228">1228</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a191" doxytag="usercli.h::fnPOUTLPINT" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define fnPOUTLPINT&nbsp;&nbsp;&nbsp;NtUserMessageCall          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01229">1229</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a192" doxytag="usercli.h::fnSENTDDEMSG" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define fnSENTDDEMSG&nbsp;&nbsp;&nbsp;NtUserMessageCall          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01230">1230</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a327" doxytag="usercli.h::fpImmActivateLayout" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define fpImmActivateLayout&nbsp;&nbsp;&nbsp;<a class="el" href="../../d6/d0/usercli_8h.html#a404">gImmApiEntries</a>.ImmActivateLayout          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02552">2552</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d0/d9/imectl_8c-source.html#l00417">ImeSystemHandler()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a304" doxytag="usercli.h::fpImmAssociateContext" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define fpImmAssociateContext&nbsp;&nbsp;&nbsp;<a class="el" href="../../d6/d0/usercli_8h.html#a404">gImmApiEntries</a>.ImmAssociateContext          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02529">2529</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01037">ECEnableDisableIME()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a329" doxytag="usercli.h::fpImmConfigureIMEW" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define fpImmConfigureIMEW&nbsp;&nbsp;&nbsp;<a class="el" href="../../d6/d0/usercli_8h.html#a404">gImmApiEntries</a>.ImmConfigureIMEW          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02554">2554</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d0/d9/imectl_8c-source.html#l00417">ImeSystemHandler()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a345" doxytag="usercli.h::fpImmEnumInputContext" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define fpImmEnumInputContext&nbsp;&nbsp;&nbsp;<a class="el" href="../../d6/d0/usercli_8h.html#a404">gImmApiEntries</a>.ImmEnumInputContext          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02570">2570</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/editec_8c-source.html#l00423">ECDoIMEMenuCommand()</a>, and <a class="el" href="../../d0/d9/imectl_8c-source.html#l00417">ImeSystemHandler()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a305" doxytag="usercli.h::fpImmEscapeA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define fpImmEscapeA&nbsp;&nbsp;&nbsp;<a class="el" href="../../d6/d0/usercli_8h.html#a404">gImmApiEntries</a>.ImmEscapeA          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02530">2530</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01683">HanjaKeyHandler()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a306" doxytag="usercli.h::fpImmEscapeW" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define fpImmEscapeW&nbsp;&nbsp;&nbsp;<a class="el" href="../../d6/d0/usercli_8h.html#a404">gImmApiEntries</a>.ImmEscapeW          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02531">2531</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01683">HanjaKeyHandler()</a>, and <a class="el" href="../../d0/d9/imectl_8c-source.html#l00417">ImeSystemHandler()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a326" doxytag="usercli.h::fpImmFreeLayout" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define fpImmFreeLayout&nbsp;&nbsp;&nbsp;<a class="el" href="../../d6/d0/usercli_8h.html#a404">gImmApiEntries</a>.ImmFreeLayout          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02551">2551</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d0/d9/imectl_8c-source.html#l00417">ImeSystemHandler()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a317" doxytag="usercli.h::fpImmGetCompositionFontA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define fpImmGetCompositionFontA&nbsp;&nbsp;&nbsp;<a class="el" href="../../d6/d0/usercli_8h.html#a404">gImmApiEntries</a>.ImmGetCompositionFontA          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02542">2542</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d0/d9/imectl_8c-source.html#l00657">ImeControlHandler()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a316" doxytag="usercli.h::fpImmGetCompositionFontW" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define fpImmGetCompositionFontW&nbsp;&nbsp;&nbsp;<a class="el" href="../../d6/d0/usercli_8h.html#a404">gImmApiEntries</a>.ImmGetCompositionFontW          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02541">2541</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d0/d9/imectl_8c-source.html#l00657">ImeControlHandler()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a308" doxytag="usercli.h::fpImmGetCompositionStringA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define fpImmGetCompositionStringA&nbsp;&nbsp;&nbsp;<a class="el" href="../../d6/d0/usercli_8h.html#a404">gImmApiEntries</a>.ImmGetCompositionStringA          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02533">2533</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00574">DefWindowProcWorker()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a309" doxytag="usercli.h::fpImmGetCompositionStringW" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define fpImmGetCompositionStringW&nbsp;&nbsp;&nbsp;<a class="el" href="../../d6/d0/usercli_8h.html#a404">gImmApiEntries</a>.ImmGetCompositionStringW          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02534">2534</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00574">DefWindowProcWorker()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a310" doxytag="usercli.h::fpImmGetCompositionWindow" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define fpImmGetCompositionWindow&nbsp;&nbsp;&nbsp;<a class="el" href="../../d6/d0/usercli_8h.html#a404">gImmApiEntries</a>.ImmGetCompositionWindow          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02535">2535</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01085">ECImmSetCompositionWindow()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a307" doxytag="usercli.h::fpImmGetContext" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define fpImmGetContext&nbsp;&nbsp;&nbsp;<a class="el" href="../../d6/d0/usercli_8h.html#a404">gImmApiEntries</a>.ImmGetContext          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02532">2532</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00574">DefWindowProcWorker()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00423">ECDoIMEMenuCommand()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01037">ECEnableDisableIME()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01337">ECImeComposition()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01150">ECImmSetCompositionFont()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01085">ECImmSetCompositionWindow()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01287">ECResultStrHandler()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00278">ECSetIMEMenu()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02904">EditWndProc()</a>, <a class="el" href="../../d0/d9/imectl_8c-source.html#l01296">FocusSetIMCContext()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01683">HanjaKeyHandler()</a>, <a class="el" href="../../d0/d9/imectl_8c-source.html#l00798">ImeSetContextHandler()</a>, and <a class="el" href="../../d0/d9/imectl_8c-source.html#l00417">ImeSystemHandler()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a330" doxytag="usercli.h::fpImmGetConversionStatus" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define fpImmGetConversionStatus&nbsp;&nbsp;&nbsp;<a class="el" href="../../d6/d0/usercli_8h.html#a404">gImmApiEntries</a>.ImmGetConversionStatus          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02555">2555</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/editec_8c-source.html#l00423">ECDoIMEMenuCommand()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00278">ECSetIMEMenu()</a>, <a class="el" href="../../d0/d9/imectl_8c-source.html#l00657">ImeControlHandler()</a>, <a class="el" href="../../d0/d9/imectl_8c-source.html#l00417">ImeSystemHandler()</a>, and <a class="el" href="../../d0/d9/imectl_8c-source.html#l01448">SyncSoftKbdState()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a311" doxytag="usercli.h::fpImmGetDefaultIMEWnd" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define fpImmGetDefaultIMEWnd&nbsp;&nbsp;&nbsp;<a class="el" href="../../d6/d0/usercli_8h.html#a404">gImmApiEntries</a>.ImmGetDefaultIMEWnd          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02536">2536</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00574">DefWindowProcWorker()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a333" doxytag="usercli.h::fpImmGetImeInfoEx" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define fpImmGetImeInfoEx&nbsp;&nbsp;&nbsp;<a class="el" href="../../d6/d0/usercli_8h.html#a404">gImmApiEntries</a>.ImmGetImeInfoEx          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02558">2558</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d0/d9/imectl_8c-source.html#l01083">CreateIMEUI()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a336" doxytag="usercli.h::fpImmGetOpenStatus" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define fpImmGetOpenStatus&nbsp;&nbsp;&nbsp;<a class="el" href="../../d6/d0/usercli_8h.html#a404">gImmApiEntries</a>.ImmGetOpenStatus          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02561">2561</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/editec_8c-source.html#l00423">ECDoIMEMenuCommand()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00278">ECSetIMEMenu()</a>, and <a class="el" href="../../d0/d9/imectl_8c-source.html#l00657">ImeControlHandler()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a342" doxytag="usercli.h::fpImmGetProperty" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define fpImmGetProperty&nbsp;&nbsp;&nbsp;<a class="el" href="../../d6/d0/usercli_8h.html#a404">gImmApiEntries</a>.ImmGetProperty          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02567">2567</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/editec_8c-source.html#l00278">ECSetIMEMenu()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a312" doxytag="usercli.h::fpImmIsIME" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define fpImmIsIME&nbsp;&nbsp;&nbsp;<a class="el" href="../../d6/d0/usercli_8h.html#a404">gImmApiEntries</a>.ImmIsIME          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02537">2537</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01735">EcImeRequestHandler()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01183">ECInitInsert()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00548">ECMenu()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l00708">ECSetFont()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00278">ECSetIMEMenu()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l00597">ECSize()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02904">EditWndProc()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l00292">MLSetCaretPosition()</a>, and <a class="el" href="../../d4/d4/editsl_8c-source.html#l00126">SLSetCaretPosition()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a324" doxytag="usercli.h::fpImmLoadIME" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define fpImmLoadIME&nbsp;&nbsp;&nbsp;<a class="el" href="../../d6/d0/usercli_8h.html#a404">gImmApiEntries</a>.ImmLoadIME          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02549">2549</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d0/d9/imectl_8c-source.html#l00272">ImeWndCreateHandler()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a339" doxytag="usercli.h::fpImmLoadLayout" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define fpImmLoadLayout&nbsp;&nbsp;&nbsp;<a class="el" href="../../d6/d0/usercli_8h.html#a404">gImmApiEntries</a>.ImmLoadLayout          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02564">2564</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a313" doxytag="usercli.h::fpImmLockIMC" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define fpImmLockIMC&nbsp;&nbsp;&nbsp;<a class="el" href="../../d6/d0/usercli_8h.html#a404">gImmApiEntries</a>.ImmLockIMC          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02538">2538</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/editec_8c-source.html#l02904">EditWndProc()</a>, <a class="el" href="../../d0/d9/imectl_8c-source.html#l01020">ImeNotifyHandler()</a>, <a class="el" href="../../d0/d9/imectl_8c-source.html#l00798">ImeSetContextHandler()</a>, and <a class="el" href="../../d0/d9/imectl_8c-source.html#l00417">ImeSystemHandler()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a334" doxytag="usercli.h::fpImmLockImeDpi" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define fpImmLockImeDpi&nbsp;&nbsp;&nbsp;<a class="el" href="../../d6/d0/usercli_8h.html#a404">gImmApiEntries</a>.ImmLockImeDpi          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02559">2559</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d0/d9/imectl_8c-source.html#l01083">CreateIMEUI()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a322" doxytag="usercli.h::fpImmNotifyIME" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define fpImmNotifyIME&nbsp;&nbsp;&nbsp;<a class="el" href="../../d6/d0/usercli_8h.html#a404">gImmApiEntries</a>.ImmNotifyIME          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02547">2547</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01337">ECImeComposition()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02904">EditWndProc()</a>, and <a class="el" href="../../d0/d9/imectl_8c-source.html#l00417">ImeSystemHandler()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a340" doxytag="usercli.h::fpImmProcessKey" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define fpImmProcessKey&nbsp;&nbsp;&nbsp;<a class="el" href="../../d6/d0/usercli_8h.html#a404">gImmApiEntries</a>.ImmProcessKey          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02565">2565</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a341" doxytag="usercli.h::fpImmPutImeMenuItemsIntoMappedFile" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define fpImmPutImeMenuItemsIntoMappedFile&nbsp;&nbsp;&nbsp;<a class="el" href="../../d6/d0/usercli_8h.html#a404">gImmApiEntries</a>.ImmPutImeMenuItemsIntoMappedFile          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02566">2566</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d0/d9/imectl_8c-source.html#l00417">ImeSystemHandler()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a315" doxytag="usercli.h::fpImmRegisterClient" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define fpImmRegisterClient&nbsp;&nbsp;&nbsp;<a class="el" href="../../d6/d0/usercli_8h.html#a404">gImmApiEntries</a>.ImmRegisterClient          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02540">2540</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d3/d0/fareast_8c-source.html#l00344">User32InitializeImmEntryTable()</a>, and <a class="el" href="../../d7/d7/clinit_8c-source.html#l00059">UserClientDllInitialize()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a314" doxytag="usercli.h::fpImmReleaseContext" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define fpImmReleaseContext&nbsp;&nbsp;&nbsp;<a class="el" href="../../d6/d0/usercli_8h.html#a404">gImmApiEntries</a>.ImmReleaseContext          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02539">2539</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00574">DefWindowProcWorker()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00423">ECDoIMEMenuCommand()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01037">ECEnableDisableIME()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01337">ECImeComposition()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01150">ECImmSetCompositionFont()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01085">ECImmSetCompositionWindow()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01287">ECResultStrHandler()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00278">ECSetIMEMenu()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02904">EditWndProc()</a>, <a class="el" href="../../d0/d9/imectl_8c-source.html#l01296">FocusSetIMCContext()</a>, and <a class="el" href="../../d0/d9/imectl_8c-source.html#l00417">ImeSystemHandler()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a337" doxytag="usercli.h::fpImmSetActiveContext" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define fpImmSetActiveContext&nbsp;&nbsp;&nbsp;<a class="el" href="../../d6/d0/usercli_8h.html#a404">gImmApiEntries</a>.ImmSetActiveContext          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02562">2562</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d0/d9/imectl_8c-source.html#l01296">FocusSetIMCContext()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a328" doxytag="usercli.h::fpImmSetCandidateWindow" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define fpImmSetCandidateWindow&nbsp;&nbsp;&nbsp;<a class="el" href="../../d6/d0/usercli_8h.html#a404">gImmApiEntries</a>.ImmSetCandidateWindow          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02553">2553</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d0/d9/imectl_8c-source.html#l00657">ImeControlHandler()</a>, and <a class="el" href="../../d0/d9/imectl_8c-source.html#l00417">ImeSystemHandler()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a320" doxytag="usercli.h::fpImmSetCompositionFont" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define fpImmSetCompositionFont&nbsp;&nbsp;&nbsp;<a class="el" href="../../d6/d0/usercli_8h.html#a404">gImmApiEntries</a>.ImmSetCompositionFont          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02545">2545</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d0/d9/imectl_8c-source.html#l00417">ImeSystemHandler()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a319" doxytag="usercli.h::fpImmSetCompositionFontA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define fpImmSetCompositionFontA&nbsp;&nbsp;&nbsp;<a class="el" href="../../d6/d0/usercli_8h.html#a404">gImmApiEntries</a>.ImmSetCompositionFontA          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02544">2544</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d0/d9/imectl_8c-source.html#l00657">ImeControlHandler()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a318" doxytag="usercli.h::fpImmSetCompositionFontW" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define fpImmSetCompositionFontW&nbsp;&nbsp;&nbsp;<a class="el" href="../../d6/d0/usercli_8h.html#a404">gImmApiEntries</a>.ImmSetCompositionFontW          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02543">2543</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01150">ECImmSetCompositionFont()</a>, and <a class="el" href="../../d0/d9/imectl_8c-source.html#l00657">ImeControlHandler()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a343" doxytag="usercli.h::fpImmSetCompositionStringA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define fpImmSetCompositionStringA&nbsp;&nbsp;&nbsp;<a class="el" href="../../d6/d0/usercli_8h.html#a404">gImmApiEntries</a>.ImmSetCompositionStringA          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02568">2568</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/editec_8c-source.html#l00423">ECDoIMEMenuCommand()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a344" doxytag="usercli.h::fpImmSetCompositionStringW" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define fpImmSetCompositionStringW&nbsp;&nbsp;&nbsp;<a class="el" href="../../d6/d0/usercli_8h.html#a404">gImmApiEntries</a>.ImmSetCompositionStringW          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02569">2569</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/editec_8c-source.html#l00423">ECDoIMEMenuCommand()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a321" doxytag="usercli.h::fpImmSetCompositionWindow" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define fpImmSetCompositionWindow&nbsp;&nbsp;&nbsp;<a class="el" href="../../d6/d0/usercli_8h.html#a404">gImmApiEntries</a>.ImmSetCompositionWindow          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02546">2546</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01085">ECImmSetCompositionWindow()</a>, <a class="el" href="../../d0/d9/imectl_8c-source.html#l00657">ImeControlHandler()</a>, <a class="el" href="../../d0/d9/imectl_8c-source.html#l00798">ImeSetContextHandler()</a>, and <a class="el" href="../../d0/d9/imectl_8c-source.html#l00417">ImeSystemHandler()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a331" doxytag="usercli.h::fpImmSetConversionStatus" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define fpImmSetConversionStatus&nbsp;&nbsp;&nbsp;<a class="el" href="../../d6/d0/usercli_8h.html#a404">gImmApiEntries</a>.ImmSetConversionStatus          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02556">2556</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d0/d9/imectl_8c-source.html#l00657">ImeControlHandler()</a>, and <a class="el" href="../../d0/d9/imectl_8c-source.html#l01448">SyncSoftKbdState()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a325" doxytag="usercli.h::fpImmSetOpenStatus" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define fpImmSetOpenStatus&nbsp;&nbsp;&nbsp;<a class="el" href="../../d6/d0/usercli_8h.html#a404">gImmApiEntries</a>.ImmSetOpenStatus          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02550">2550</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/editec_8c-source.html#l00423">ECDoIMEMenuCommand()</a>, <a class="el" href="../../d0/d9/imectl_8c-source.html#l00657">ImeControlHandler()</a>, and <a class="el" href="../../d0/d9/imectl_8c-source.html#l00417">ImeSystemHandler()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a332" doxytag="usercli.h::fpImmSetStatusWindowPos" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define fpImmSetStatusWindowPos&nbsp;&nbsp;&nbsp;<a class="el" href="../../d6/d0/usercli_8h.html#a404">gImmApiEntries</a>.ImmSetStatusWindowPos          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02557">2557</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d0/d9/imectl_8c-source.html#l00657">ImeControlHandler()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a346" doxytag="usercli.h::fpImmSystemHandler" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define fpImmSystemHandler&nbsp;&nbsp;&nbsp;<a class="el" href="../../d6/d0/usercli_8h.html#a404">gImmApiEntries</a>.ImmSystemHandler          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02571">2571</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d0/d9/imectl_8c-source.html#l00417">ImeSystemHandler()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a338" doxytag="usercli.h::fpImmTranslateMessage" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define fpImmTranslateMessage&nbsp;&nbsp;&nbsp;<a class="el" href="../../d6/d0/usercli_8h.html#a404">gImmApiEntries</a>.ImmTranslateMessage          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02563">2563</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00885">TranslateMessage()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a323" doxytag="usercli.h::fpImmUnlockIMC" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define fpImmUnlockIMC&nbsp;&nbsp;&nbsp;<a class="el" href="../../d6/d0/usercli_8h.html#a404">gImmApiEntries</a>.ImmUnlockIMC          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02548">2548</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/editec_8c-source.html#l02904">EditWndProc()</a>, <a class="el" href="../../d0/d9/imectl_8c-source.html#l01020">ImeNotifyHandler()</a>, <a class="el" href="../../d0/d9/imectl_8c-source.html#l00798">ImeSetContextHandler()</a>, and <a class="el" href="../../d0/d9/imectl_8c-source.html#l00417">ImeSystemHandler()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a335" doxytag="usercli.h::fpImmUnlockImeDpi" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define fpImmUnlockImeDpi&nbsp;&nbsp;&nbsp;<a class="el" href="../../d6/d0/usercli_8h.html#a404">gImmApiEntries</a>.ImmUnlockImeDpi          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02560">2560</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d0/d9/imectl_8c-source.html#l01083">CreateIMEUI()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a132" doxytag="usercli.h::FREERESOURCE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define FREERESOURCE          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">hResData,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>hModule&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;((*(<a class="el" href="../../d8/d6/ntuser_2client_2globals_8h.html#a50">pfnFreeResource</a>))(hResData, hModule))</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00914">914</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d5/d8/clres_8c-source.html#l00941">CreateDialogParamA()</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l00975">CreateDialogParamW()</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l00868">DialogBoxParamA()</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l00403">LoadAcc()</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l01899">LoadBmp()</a>, and <a class="el" href="../../d5/d8/clres_8c-source.html#l00105">SplFreeResource()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a10" doxytag="usercli.h::FWINDOWMSG" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define FWINDOWMSG          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d2/d1/userexts_8c.html#a129">msg</a>,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>fnid&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Value:</b><pre class="fragment"><div>((<a class="code" href="../../d2/d1/userexts_8c.html#a129">msg</a> &lt;= (<a class="code" href="../../d1/d8/clglobal_8c.html#a5">gSharedInfo</a>.<a class="code" href="../../d4/d6/structtagSHAREDINFO.html#o5">awmControl</a>[fnid - <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a191">FNID_START</a>].<a class="code" href="../../d1/d9/struct__WNDMSG.html#o0">maxMsgs</a>)) &amp;&amp; \
            ((<a class="code" href="../../d1/d8/clglobal_8c.html#a5">gSharedInfo</a>.<a class="code" href="../../d4/d6/structtagSHAREDINFO.html#o5">awmControl</a>[fnid - <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a191">FNID_START</a>].<a class="code" href="../../d1/d9/struct__WNDMSG.html#o1">abMsgs</a>)[<a class="code" href="../../d2/d1/userexts_8c.html#a129">msg</a> / 8] &amp; (1 &lt;&lt; (<a class="code" href="../../d2/d1/userexts_8c.html#a129">msg</a> &amp; 7))))
</div></pre>
<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00144">144</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d0/btnctl_8c-source.html#l01907">ButtonWndProcA()</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l01929">ButtonWndProcW()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l01335">ComboBoxWndProcA()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l01359">ComboBoxWndProcW()</a>, <a class="el" href="../../d7/d0/lb1_8c-source.html#l00788">ComboListBoxWndProcA()</a>, <a class="el" href="../../d7/d0/lb1_8c-source.html#l00810">ComboListBoxWndProcW()</a>, <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00078">DesktopWndProcWorker()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02787">EditWndProcA()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02808">EditWndProcW()</a>, <a class="el" href="../../d0/d9/imectl_8c-source.html#l00083">ImeWndProcWorker()</a>, <a class="el" href="../../d7/d0/lb1_8c-source.html#l00744">ListBoxWndProcA()</a>, <a class="el" href="../../d7/d0/lb1_8c-source.html#l00766">ListBoxWndProcW()</a>, <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00127">MenuWndProcWorker()</a>, <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00187">ScrollBarWndProcWorker()</a>, and <a class="el" href="../../d6/d4/statctl_8c-source.html#l00840">StaticWndProcWorker()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a293" doxytag="usercli.h::GET_DBCS_MESSAGE_IF_EXIST" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define GET_DBCS_MESSAGE_IF_EXIST          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">_apiName,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>_pmsg,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>_wMsgFilterMin,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>_wMsgFilterMax,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>bRemoveMsg&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02229">2229</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00556">_PeekMessage()</a>, and <a class="el" href="../../d1/d7/ntcftxt_8h-source.html#l00249">GetMessage()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a150" doxytag="usercli.h::GETAPPVER" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define GETAPPVER          </td>
          <td class="md" valign="top">(&nbsp;</td>
&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;GetClientInfo()-&gt;dwExpWinVer</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01123">1123</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/winmgrc_8c-source.html#l00604">_AdjustWindowRectEx()</a>, <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00574">DefWindowProcWorker()</a>, <a class="el" href="../../d6/d1/rtl_2drawtext_8c-source.html#l01708">DrawTextExWorker()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l01412">ECGetBrush()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02059">ECInsertText()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l00708">ECSetFont()</a>, <a class="el" href="../../d4/d7/winmgrc_8c-source.html#l00514">GetAppCompatFlags2()</a>, <a class="el" href="../../d1/d8/dlgbegin_8c-source.html#l00553">InternalCreateDialog()</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l01899">LoadBmp()</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l02657">LoadIcoCur()</a>, and <a class="el" href="../../d2/d4/editml_8c-source.html#l02028">MLKeyDown()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a292" doxytag="usercli.h::GetCallBackDbcsInfo" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define GetCallBackDbcsInfo          </td>
          <td class="md" valign="top">(&nbsp;</td>
&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;(&amp;(GetClientInfo()-&gt;msgDbcsCB))</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02217">2217</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00483">PeekMessage()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a235" doxytag="usercli.h::GetControlBrush" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define GetControlBrush&nbsp;&nbsp;&nbsp;NtUserGetControlBrush          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01581">1581</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d0/btnctl_8c-source.html#l00193">xxxBNInitDC()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l02028">xxxCBInternalUpdateEditWindow()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l01431">xxxCBPaint()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00060">xxxLBGetBrush()</a>, and <a class="el" href="../../d6/d4/statctl_8c-source.html#l00419">xxxStaticPaint()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a236" doxytag="usercli.h::GetControlColor" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define GetControlColor&nbsp;&nbsp;&nbsp;NtUserGetControlColor          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01582">1582</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d8/d0/client_2draw_8c-source.html#l00025">PaintRect()</a>, and <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00060">xxxLBGetBrush()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a237" doxytag="usercli.h::GetDCEx" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define GetDCEx&nbsp;&nbsp;&nbsp;NtUserGetDCEx          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01583">1583</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/winmgrc_8c-source.html#l00810">AnimateWindow()</a>, and <a class="el" href="../../d4/d7/winmgrc_8c-source.html#l01210">SmoothScrollWindowEx()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a290" doxytag="usercli.h::GetDispatchDbcsInfo" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define GetDispatchDbcsInfo          </td>
          <td class="md" valign="top">(&nbsp;</td>
&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;(&amp;(GetClientInfo()-&gt;achDbcsCF[0]))</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02209">2209</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a134" doxytag="usercli.h::GETEXPWINVER" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define GETEXPWINVER          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">hModule&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;((*(<a class="el" href="../../d8/d6/ntuser_2client_2globals_8h.html#a58">pfnGetExpWinVer</a>))((hModule)?(hModule):GetModuleHandle(NULL)))</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00916">916</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l01197">_CreateWindowEx()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l00285">ECNcCreate()</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l00609">GetSizeDialogTemplate()</a>, <a class="el" href="../../d1/d8/dlgbegin_8c-source.html#l00553">InternalCreateDialog()</a>, and <a class="el" href="../../d5/d8/clres_8c-source.html#l02443">LoadImageW()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a291" doxytag="usercli.h::GetForwardDbcsInfo" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define GetForwardDbcsInfo          </td>
          <td class="md" valign="top">(&nbsp;</td>
&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;(&amp;(GetClientInfo()-&gt;achDbcsCF[1]))</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02213">2213</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a13" doxytag="usercli.h::GETPROCESSID" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define GETPROCESSID          </td>
          <td class="md" valign="top">(&nbsp;</td>
&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;(NtCurrentTeb()-&gt;ClientId.UniqueProcess)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00154">154</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d1/d7/ntcftxt_8h-source.html#l00427">PostMessage()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00598">TestInputContextProcess()</a>, and <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00619">TestWindowProcess()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a14" doxytag="usercli.h::GETTHREADID" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define GETTHREADID          </td>
          <td class="md" valign="top">(&nbsp;</td>
&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;(NtCurrentTeb()-&gt;ClientId.UniqueThread)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00155">155</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a238" doxytag="usercli.h::GetWindowPlacement" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define GetWindowPlacement&nbsp;&nbsp;&nbsp;NtUserGetWindowPlacement          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01584">1584</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02101">DefFrameProcWorker()</a>, and <a class="el" href="../../d2/d6/ntcon_2server_2menu_8c-source.html#l00459">PropertiesUpdate()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a12" doxytag="usercli.h::GetWindowProcess" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define GetWindowProcess          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">hwnd&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;NtUserQueryWindow(hwnd, WindowProcess)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00153">153</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d1/d7/ntcftxt_8h-source.html#l00427">PostMessage()</a>, and <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00619">TestWindowProcess()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a113" doxytag="usercli.h::GT" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define GT&nbsp;&nbsp;&nbsp;3          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00791">791</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02757">Compare()</a>, and <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02802">xxxFindString()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a265" doxytag="usercli.h::HAS_SBHORZ" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define HAS_SBHORZ&nbsp;&nbsp;&nbsp;0x0200          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02060">2060</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01657">MDIClientWndProcWorker()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a264" doxytag="usercli.h::HAS_SBVERT" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define HAS_SBVERT&nbsp;&nbsp;&nbsp;0x0100          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02059">2059</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01657">MDIClientWndProcWorker()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a251" doxytag="usercli.h::HILITE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define HILITE&nbsp;&nbsp;&nbsp;1          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01748">1748</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01290">xxxTrackMouse()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a250" doxytag="usercli.h::HILITEANDSEL" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define HILITEANDSEL&nbsp;&nbsp;&nbsp;(HILITEONLY + SELONLY)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01746">1746</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01028">SetSelected()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l03651">xxxLBBlockHilite()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02183">xxxLBoxCtlKeyInput()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l03206">xxxLBSelRange()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l03455">xxxLBSetSel()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01181">xxxResetWorld()</a>, and <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01290">xxxTrackMouse()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a248" doxytag="usercli.h::HILITEONLY" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define HILITEONLY&nbsp;&nbsp;&nbsp;0x0001          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01744">1744</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00480">IsSelected()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01028">SetSelected()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l03754">xxxAlterHilite()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l03651">xxxLBBlockHilite()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02183">xxxLBoxCtlKeyInput()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00798">xxxLBPaint()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00430">xxxLBSetCaret()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01181">xxxResetWorld()</a>, and <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01290">xxxTrackMouse()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a277" doxytag="usercli.h::HTITLE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define HTITLE          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">pmdi&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;(pmdi-&gt;pTitle)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02074">2074</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01657">MDIClientWndProcWorker()</a>, and <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00032">xxxSetFrameTitle()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a104" doxytag="usercli.h::ID_CNTX_AAFS" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ID_CNTX_AAFS&nbsp;&nbsp;&nbsp;0x0000800FL          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00745">745</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a102" doxytag="usercli.h::ID_CNTX_ASS" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ID_CNTX_ASS&nbsp;&nbsp;&nbsp;0x0000800DL          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00743">743</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a89" doxytag="usercli.h::ID_CNTX_DISPLAYCTRL" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ID_CNTX_DISPLAYCTRL&nbsp;&nbsp;&nbsp;0x00008001L          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00730">730</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/editec_8c-source.html#l00548">ECMenu()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a105" doxytag="usercli.h::ID_CNTX_IAFS" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ID_CNTX_IAFS&nbsp;&nbsp;&nbsp;0x00008010L          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00746">746</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a90" doxytag="usercli.h::ID_CNTX_INSERTCTRL" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ID_CNTX_INSERTCTRL&nbsp;&nbsp;&nbsp;0x00008013L          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00731">731</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/editec_8c-source.html#l00548">ECMenu()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a103" doxytag="usercli.h::ID_CNTX_ISS" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ID_CNTX_ISS&nbsp;&nbsp;&nbsp;0x0000800EL          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00744">744</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a95" doxytag="usercli.h::ID_CNTX_LRE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ID_CNTX_LRE&nbsp;&nbsp;&nbsp;0x00008006L          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00736">736</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a93" doxytag="usercli.h::ID_CNTX_LRM" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ID_CNTX_LRM&nbsp;&nbsp;&nbsp;0x00008004L          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00734">734</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a97" doxytag="usercli.h::ID_CNTX_LRO" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ID_CNTX_LRO&nbsp;&nbsp;&nbsp;0x00008008L          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00738">738</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a100" doxytag="usercli.h::ID_CNTX_NADS" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ID_CNTX_NADS&nbsp;&nbsp;&nbsp;0x0000800BL          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00741">741</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a101" doxytag="usercli.h::ID_CNTX_NODS" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ID_CNTX_NODS&nbsp;&nbsp;&nbsp;0x0000800CL          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00742">742</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a99" doxytag="usercli.h::ID_CNTX_PDF" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ID_CNTX_PDF&nbsp;&nbsp;&nbsp;0x0000800AL          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00740">740</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a96" doxytag="usercli.h::ID_CNTX_RLE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ID_CNTX_RLE&nbsp;&nbsp;&nbsp;0x00008007L          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00737">737</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a94" doxytag="usercli.h::ID_CNTX_RLM" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ID_CNTX_RLM&nbsp;&nbsp;&nbsp;0x00008005L          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00735">735</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a98" doxytag="usercli.h::ID_CNTX_RLO" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ID_CNTX_RLO&nbsp;&nbsp;&nbsp;0x00008009L          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00739">739</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a106" doxytag="usercli.h::ID_CNTX_RS" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ID_CNTX_RS&nbsp;&nbsp;&nbsp;0x00008011L          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00747">747</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a88" doxytag="usercli.h::ID_CNTX_RTL" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ID_CNTX_RTL&nbsp;&nbsp;&nbsp;0x00008000L          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00729">729</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/editec_8c-source.html#l00548">ECMenu()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a107" doxytag="usercli.h::ID_CNTX_US" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ID_CNTX_US&nbsp;&nbsp;&nbsp;0x00008012L          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00748">748</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a91" doxytag="usercli.h::ID_CNTX_ZWJ" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ID_CNTX_ZWJ&nbsp;&nbsp;&nbsp;0x00008002L          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00732">732</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a92" doxytag="usercli.h::ID_CNTX_ZWNJ" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ID_CNTX_ZWNJ&nbsp;&nbsp;&nbsp;0x00008003L          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00733">733</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a155" doxytag="usercli.h::ID_EC_PROPERTY_MENU" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ID_EC_PROPERTY_MENU&nbsp;&nbsp;&nbsp;1          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01137">1137</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/editec_8c-source.html#l00548">ECMenu()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a156" doxytag="usercli.h::IDD_MDI_ACTIVATE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define IDD_MDI_ACTIVATE&nbsp;&nbsp;&nbsp;9          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01139">1139</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02101">DefFrameProcWorker()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a29" doxytag="usercli.h::INITCONTROLLOOKASIDE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define INITCONTROLLOOKASIDE          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">plaType,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d4/d4/iafptrap_8c.html#a9">type</a>,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>pwnditem,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>count&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Value:</b><pre class="fragment"><div><span class="keywordflow">if</span> (!*((PULONG_PTR)(pwnd + 1))) {                                       \
        P ## <a class="code" href="../../d3/d5/i386_2trapc_8c.html#a9">type</a> pType;                                                    \
        <span class="keywordflow">if</span> (fInit) {                                                        \
            <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(<a class="code" href="../../d1/d2/rtlinit_8c.html#a5">InitLookaside</a>(plaType, <span class="keyword">sizeof</span>(type), count))) { \
                <a class="code" href="../../d0/d0/ntuser_8h.html#a189">NtUserSetWindowFNID</a>(hwnd, FNID_CLEANEDUP_BIT);              \
                <a class="code" href="../../d3/d4/w32_2ntuser_2client_2nt6_2pch_8h.html#a7">NtUserDestroyWindow</a>(hwnd);                                  \
                <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;                                               \
            }                                                               \
            fInit = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;                                                  \
        }                                                                   \
        <span class="keywordflow">if</span> ((pType = (P ## <a class="code" href="../../d3/d5/i386_2trapc_8c.html#a9">type</a>)<a class="code" href="../../d1/d2/rtlinit_8c.html#a6">AllocLookasideEntry</a>(plaType))) {            \
            <a class="code" href="../../d0/d0/ntuser_8h.html#a3">NtUserSetWindowLongPtr</a>(hwnd, 0, (LONG_PTR)pType, FALSE);        \
            <a class="code" href="../../d6/d0/usercli_8h.html#a41">Lock</a>(&amp;(pType-&gt;pwnditem), pwnd);                                 \
        } <span class="keywordflow">else</span> {                                                            \
            <a class="code" href="../../d0/d0/ntuser_8h.html#a189">NtUserSetWindowFNID</a>(hwnd, FNID_CLEANEDUP_BIT);                  \
            <a class="code" href="../../d3/d4/w32_2ntuser_2client_2nt6_2pch_8h.html#a7">NtUserDestroyWindow</a>(hwnd);                                      \
            <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;                                                   \
        }                                                                   \
    }
</div></pre>
<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00270">270</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d0/btnctl_8c-source.html#l01338">ButtonWndProcWorker()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l00207">ComboBoxWndProcWorker()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02831">EditWndProcWorker()</a>, <a class="el" href="../../d0/d9/imectl_8c-source.html#l00083">ImeWndProcWorker()</a>, <a class="el" href="../../d7/d0/lb1_8c-source.html#l00032">ListBoxWndProcWorker()</a>, and <a class="el" href="../../d6/d4/statctl_8c-source.html#l00840">StaticWndProcWorker()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a69" doxytag="usercli.h::IsComboVisible" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define IsComboVisible          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">pcbox&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;(!pcbox-&gt;fNoRedraw &amp;&amp; IsVisible(pcbox-&gt;spwnd))</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00460">460</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d2/d3/combo_8c-source.html#l00207">ComboBoxWndProcWorker()</a>, and <a class="el" href="../../d2/d3/combo_8c-source.html#l02028">xxxCBInternalUpdateEditWindow()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a152" doxytag="usercli.h::ISDELIMETERA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ISDELIMETERA          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">ch&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;((ch == ' ') || (ch == '\t'))</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01129">1129</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/editec_8c-source.html#l01552">ECWord()</a>, and <a class="el" href="../../d2/d4/editml_8c-source.html#l01562">MLBuildchLines()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a153" doxytag="usercli.h::ISDELIMETERW" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ISDELIMETERW          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">ch&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;((ch == L' ') || (ch == L'\t'))</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01130">1130</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/editec_8c-source.html#l01552">ECWord()</a>, and <a class="el" href="../../d2/d4/editml_8c-source.html#l01562">MLBuildchLines()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a208" doxytag="usercli.h::IsHooked" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define IsHooked          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">pci,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>fsHook&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;((fsHook &amp; (pci-&gt;fsHooks | pci-&gt;pDeskInfo-&gt;fsHooks)) != 0)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01266">1266</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d2/d1/hooks_8c-source.html#l01210">_CallMsgFilter()</a>, <a class="el" href="../../d1/d7/ntcftxt_8h-source.html#l01460">CallMsgFilter()</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00624">GetCursorPos()</a>, <a class="el" href="../../d7/d2/queue_8c-source.html#l01416">GetJournallingQueue()</a>, <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00270">SendMessageWorker()</a>, <a class="el" href="../../d4/d5/focusact_8c-source.html#l00472">xxxActivateThisWindow()</a>, <a class="el" href="../../d2/d1/hooks_8c-source.html#l01288">xxxCallHook2()</a>, <a class="el" href="../../d5/d7/createw_8c-source.html#l00033">xxxCreateWindowEx()</a>, <a class="el" href="../../d9/d2/dwp_8c-source.html#l01264">xxxDefWindowProc()</a>, <a class="el" href="../../d5/d7/createw_8c-source.html#l01591">xxxDestroyWindow()</a>, <a class="el" href="../../d7/d2/queue_8c-source.html#l05238">xxxGetInputEvent()</a>, <a class="el" href="../../d7/d1/kbdlyout_8c-source.html#l01203">xxxInternalActivateKeyboardLayout()</a>, <a class="el" href="../../d6/d2/ntuser_2kernel_2input_8c-source.html#l00213">xxxInternalGetMessage()</a>, <a class="el" href="../../d7/d1/kbdlyout_8c-source.html#l01571">xxxInternalUnloadKeyboardLayout()</a>, <a class="el" href="../../d7/d1/kbdlyout_8c-source.html#l00654">xxxLoadKeyboardLayoutEx()</a>, <a class="el" href="../../d5/d8/minmax_8c-source.html#l01329">xxxMinMaximize()</a>, <a class="el" href="../../d7/d7/ntinput_8c-source.html#l01936">xxxMoveEventAbsolute()</a>, <a class="el" href="../../d7/d2/queue_8c-source.html#l04271">xxxMsgWaitForMultipleObjects()</a>, <a class="el" href="../../d6/d7/ntimm_8c-source.html#l02295">xxxNotifyIMEStatus()</a>, <a class="el" href="../../d7/d2/queue_8c-source.html#l03772">xxxProcessEventMessage()</a>, <a class="el" href="../../d4/d5/kernel_2sendmsg_8c-source.html#l01964">xxxReceiveMessage()</a>, <a class="el" href="../../d6/d2/ntuser_2kernel_2input_8c-source.html#l03305">xxxScanSysQueue()</a>, <a class="el" href="../../d4/d5/kernel_2sendmsg_8c-source.html#l01114">xxxSendMessageCallback()</a>, <a class="el" href="../../d4/d5/kernel_2sendmsg_8c-source.html#l00764">xxxSendMessageTimeout()</a>, <a class="el" href="../../d5/d4/rare_8c-source.html#l03675">xxxSendMinRectMessages()</a>, <a class="el" href="../../d4/d5/focusact_8c-source.html#l01815">xxxSetFocus()</a>, <a class="el" href="../../d7/d8/taskman_8c-source.html#l00252">xxxSleepTask()</a>, <a class="el" href="../../d7/d2/queue_8c-source.html#l04382">xxxSleepThread()</a>, and <a class="el" href="../../d5/d7/syscmd_8c-source.html#l00193">xxxSysCommand()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a108" doxytag="usercli.h::IsLBoxVisible" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define IsLBoxVisible          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">plb&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;(plb-&gt;fRedraw &amp;&amp; IsVisible(plb-&gt;spwnd))</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00779">779</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d7/d0/lb1_8c-source.html#l00032">ListBoxWndProcWorker()</a>, <a class="el" href="../../d1/d1/lboxctl3_8c-source.html#l00190">xxxDlgDirListHelper()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01111">xxxInvertLBItem()</a>, <a class="el" href="../../d1/d1/lboxctl3_8c-source.html#l00839">xxxLbDir()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00038">xxxLBInvalidateRect()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00430">xxxLBSetCaret()</a>, <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00514">xxxLBSize()</a>, and <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02012">xxxNewITopEx()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a30" doxytag="usercli.h::ISREMOTESESSION" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ISREMOTESESSION          </td>
          <td class="md" valign="top">(&nbsp;</td>
&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;(NtCurrentPeb()-&gt;SessionId != 0)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00293">293</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/client_8c-source.html#l02154">CommonCreateWindowStation()</a>, <a class="el" href="../../d7/d7/clinit_8c-source.html#l01729">CtxInitUser32()</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l03097">GetClientKeyboardType()</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l03143">GetKeyboardType()</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l02091">GetRemoteKeyboardLayout()</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00401">GetSystemMetrics()</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l03976">LoadPreloadKeyboardLayouts()</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l04019">OpenKeyboardLayoutFile()</a>, and <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02139">xxxLBoxCaretBlinker()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a276" doxytag="usercli.h::ITILELEVEL" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ITILELEVEL          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">pmdi&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;(pmdi-&gt;iChildTileLevel)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02073">2073</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00557">MDICheckCascadeRect()</a>, and <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02735">MDICompleteChildCreation()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a117" doxytag="usercli.h::LBI_ADD" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define LBI_ADD&nbsp;&nbsp;&nbsp;0x0004          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00797">797</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d7/d0/lb1_8c-source.html#l00032">ListBoxWndProcWorker()</a>, <a class="el" href="../../d1/d1/lboxctl3_8c-source.html#l00839">xxxLbDir()</a>, <a class="el" href="../../d1/d1/lboxctl3_8c-source.html#l01036">xxxLbInsertFile()</a>, and <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l00407">xxxLBInsertItem()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a67" doxytag="usercli.h::LBS_COMBOBOX" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define LBS_COMBOBOX&nbsp;&nbsp;&nbsp;0x8000L          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00448">448</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d4/d3/comboini_8c-source.html#l00070">xxxCBCreateHandler()</a>, and <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00062">xxxLBCreate()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a120" doxytag="usercli.h::LBUP_NOTIFY" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define LBUP_NOTIFY&nbsp;&nbsp;&nbsp;0x0004          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00813">813</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d7/d0/lb1_8c-source.html#l00032">ListBoxWndProcWorker()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l03411">xxxCaretDestroy()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01875">xxxLBButtonUp()</a>, and <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01290">xxxTrackMouse()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a118" doxytag="usercli.h::LBUP_RELEASECAPTURE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define LBUP_RELEASECAPTURE&nbsp;&nbsp;&nbsp;0x0001          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00811">811</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d7/d0/lb1_8c-source.html#l00032">ListBoxWndProcWorker()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l03411">xxxCaretDestroy()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01875">xxxLBButtonUp()</a>, and <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01290">xxxTrackMouse()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a119" doxytag="usercli.h::LBUP_RESETSELECTION" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define LBUP_RESETSELECTION&nbsp;&nbsp;&nbsp;0x0002          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00812">812</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d7/d0/lb1_8c-source.html#l00032">ListBoxWndProcWorker()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01875">xxxLBButtonUp()</a>, and <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01290">xxxTrackMouse()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a122" doxytag="usercli.h::LBUP_SELCHANGE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define LBUP_SELCHANGE&nbsp;&nbsp;&nbsp;0x0010          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00815">815</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d7/d0/lb1_8c-source.html#l00032">ListBoxWndProcWorker()</a>, and <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01875">xxxLBButtonUp()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a121" doxytag="usercli.h::LBUP_SUCCESS" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define LBUP_SUCCESS&nbsp;&nbsp;&nbsp;0x0008          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00814">814</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l03411">xxxCaretDestroy()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01875">xxxLBButtonUp()</a>, and <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01290">xxxTrackMouse()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a129" doxytag="usercli.h::LOADRESOURCE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define LOADRESOURCE          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">hModule,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>hResInfo&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;((*(<a class="el" href="../../d8/d6/ntuser_2client_2globals_8h.html#a47">pfnLoadResource</a>))(hModule, hResInfo))</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00911">911</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d0/d8/clmenu_8c-source.html#l00378">CommonLoadMenu()</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l00941">CreateDialogParamA()</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l00975">CreateDialogParamW()</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l00868">DialogBoxParamA()</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l00403">LoadAcc()</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l01899">LoadBmp()</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l02544">LoadDIB()</a>, and <a class="el" href="../../d4/d1/rtlres_8c-source.html#l00037">LoadStringOrError()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a41" doxytag="usercli.h::Lock" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define Lock          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">ppobj,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>pobj&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;(*ppobj = pobj)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00367">367</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d8/d0/w32_2ntuser_2kernel_2init_8c-source.html#l01568">_LoadCursorsAndIcons()</a>, <a class="el" href="../../d4/d1/hotkeys_8c-source.html#l00125">_RegisterHotKey()</a>, <a class="el" href="../../d5/d3/kernel_2acons_8c-source.html#l00319">_SetCursorIconData()</a>, <a class="el" href="../../d6/d4/logon_8c-source.html#l00153">_SetLogonNotifyWindow()</a>, <a class="el" href="../../d0/d0/miscutil_8c-source.html#l00048">_SetProgmanWindow()</a>, <a class="el" href="../../d0/d0/miscutil_8c-source.html#l00063">_SetTaskmanWindow()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00217">AddConvProp()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01634">AnticipatePost()</a>, <a class="el" href="../../d6/d7/ntimm_8c-source.html#l00040">CreateInputContext()</a>, <a class="el" href="../../d6/d6/kernel_2winable_8c-source.html#l00425">CreateNotify()</a>, <a class="el" href="../../d2/d3/spb_8c-source.html#l00341">CreateSpb()</a>, <a class="el" href="../../d2/d4/caption_8c-source.html#l00462">DrawCaptionIcon()</a>, <a class="el" href="../../d8/d6/winhtky_8c-source.html#l00096">DWP_SetHotKey()</a>, <a class="el" href="../../d6/d1/poolhack_8c-source.html#l00413">ExAllocatePool()</a>, <a class="el" href="../../d3/d1/ex_2pool_8c-source.html#l01104">ExAllocatePoolWithTag()</a>, <a class="el" href="../../d6/d1/poolhack_8c-source.html#l00970">ExFreePool()</a>, <a class="el" href="../../d9/d3/intrloc2_8c-source.html#l00075">ExInterlockedDecrementLong()</a>, <a class="el" href="../../d7/d5/ex_2region_8c-source.html#l00110">ExInterlockedExtendRegion()</a>, <a class="el" href="../../d9/d0/zone_8c-source.html#l00212">ExInterlockedExtendZone()</a>, <a class="el" href="../../d9/d3/intrloc2_8c-source.html#l00030">ExInterlockedIncrementLong()</a>, <a class="el" href="../../d3/d1/ex_2pool_8c-source.html#l00397">ExOkayToLockRoutine()</a>, <a class="el" href="../../d9/d7/winsta_8c-source.html#l00745">FreeWindowStation()</a>, <a class="el" href="../../d6/d2/filelock_8c-source.html#l02469">FsRtlCheckNoExclusiveConflict()</a>, <a class="el" href="../../d6/d2/filelock_8c-source.html#l03589">FsRtlFastUnlockSingleExclusive()</a>, <a class="el" href="../../d6/d2/filelock_8c-source.html#l03337">FsRtlFastUnlockSingleShared()</a>, <a class="el" href="../../d6/d2/filelock_8c-source.html#l01856">FsRtlFindFirstOverlapInNode()</a>, <a class="el" href="../../d6/d2/filelock_8c-source.html#l01687">FsRtlFindFirstOverlappingExclusiveNode()</a>, <a class="el" href="../../d6/d2/filelock_8c-source.html#l01517">FsRtlFindFirstOverlappingSharedNode()</a>, <a class="el" href="../../d6/d2/filelock_8c-source.html#l05046">FsRtlPrivateCheckForSharedLockAccess()</a>, <a class="el" href="../../d6/d2/filelock_8c-source.html#l04343">FsRtlPrivateInsertSharedLock()</a>, <a class="el" href="../../d6/d2/filelock_8c-source.html#l02865">FsRtlSplitLocks()</a>, <a class="el" href="../../d1/d4/ntuser_2kernel_2getset_8c-source.html#l00875">GetCPD()</a>, <a class="el" href="../../d6/d7/ntimm_8c-source.html#l01770">ImeSetFutureOwner()</a>, <a class="el" href="../../d5/d1/timers_8c-source.html#l00225">InternalSetTimer()</a>, <a class="el" href="../../d8/d6/io_2remlock_8c-source.html#l00114">IoAcquireRemoveLockEx()</a>, <a class="el" href="../../d8/d6/io_2remlock_8c-source.html#l00061">IoInitializeRemoveLockEx()</a>, <a class="el" href="../../d8/d6/io_2remlock_8c-source.html#l00394">IoReleaseRemoveLockAndWaitEx()</a>, <a class="el" href="../../d8/d6/io_2remlock_8c-source.html#l00244">IoReleaseRemoveLockEx()</a>, <a class="el" href="../../d5/d0/dpcobj_8c-source.html#l00089">KeInsertQueueDpc()</a>, <a class="el" href="../../d5/d0/dpcobj_8c-source.html#l00272">KeRemoveQueueDpc()</a>, <a class="el" href="../../d2/d8/clock_8c-source.html#l00208">KeUpdateRunTime()</a>, <a class="el" href="../../d5/d7/createw_8c-source.html#l01478">LinkWindow()</a>, <a class="el" href="../../d6/d2/mnsys_8c-source.html#l00074">LockDesktopMenu()</a>, <a class="el" href="../../d3/d6/ntuser_2kernel_2menu_8c-source.html#l03097">LockMFMWFPWindow()</a>, <a class="el" href="../../d3/d6/ntuser_2kernel_2menu_8c-source.html#l00296">LockPopupMenu()</a>, <a class="el" href="../../d2/d3/spb_8c-source.html#l00802">LockWindowUpdate2()</a>, <a class="el" href="../../d3/d6/ntuser_2kernel_2menu_8c-source.html#l00422">LockWndMenu()</a>, <a class="el" href="../../d7/d1/tlock_8c-source.html#l00031">main()</a>, <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00499">MDISetMenu()</a>, <a class="el" href="../../d5/d2/mnstate_8c-source.html#l00025">MNPositionSysMenu()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l12956">NtUserSetImeOwnerWindow()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l13037">NtUserSetThreadLayoutHandles()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l02001">PopState()</a>, <a class="el" href="../../d3/d6/class_8c-source.html#l01645">ReferenceClass()</a>, <a class="el" href="../../d7/d1/kbdlyout_8c-source.html#l00944">ReorderKeyboardLayouts()</a>, <a class="el" href="../../d2/d8/rtl_2heap_8c-source.html#l00191">RtlCreateHeap()</a>, <a class="el" href="../../d5/d8/heapdbg_8c-source.html#l00204">RtlDebugCreateHeap()</a>, <a class="el" href="../../d7/d8/heappage_8c-source.html#l01997">RtlpDebugPageHeapCreate()</a>, <a class="el" href="../../d5/d8/heapdbg_8c-source.html#l00323">RtlpSerializeHeap()</a>, <a class="el" href="../../d3/d6/class_8c-source.html#l01329">SetClassCursor()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00264">UnlinkConv()</a>, <a class="el" href="../../d5/d7/createw_8c-source.html#l02867">UnlinkWindow()</a>, <a class="el" href="../../d3/d6/class_8c-source.html#l00211">ValidateAndLockCursor()</a>, <a class="el" href="../../d4/d5/focusact_8c-source.html#l00472">xxxActivateThisWindow()</a>, <a class="el" href="../../d7/d7/ntinput_8c-source.html#l00472">xxxButtonEvent()</a>, <a class="el" href="../../d2/d1/hooks_8c-source.html#l01288">xxxCallHook2()</a>, <a class="el" href="../../d2/d2/tmswitch_8c-source.html#l01635">xxxCancelCoolSwitch()</a>, <a class="el" href="../../d4/d4/w32_2ntuser_2kernel_2capture_8c-source.html#l00124">xxxCapture()</a>, <a class="el" href="../../d4/d3/comboini_8c-source.html#l00070">xxxCBCreateHandler()</a>, <a class="el" href="../../d9/d7/ntuser_2kernel_2clipbrd_8c-source.html#l02618">xxxChangeClipboardChain()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02425">xxxChildResize()</a>, <a class="el" href="../../d5/d4/caret_8c-source.html#l00254">xxxCreateCaret()</a>, <a class="el" href="../../d7/d6/classchg_8c-source.html#l00172">xxxCreateClassSmIcon()</a>, <a class="el" href="../../d0/d6/desktop_8c-source.html#l01797">xxxCreateDesktop()</a>, <a class="el" href="../../d7/d2/queue_8c-source.html#l01501">xxxCreateThreadInfo()</a>, <a class="el" href="../../d5/d7/createw_8c-source.html#l00033">xxxCreateWindowEx()</a>, <a class="el" href="../../d9/d7/winsta_8c-source.html#l00243">xxxCreateWindowStation()</a>, <a class="el" href="../../d2/d3/ddemlsvr_8c-source.html#l00019">xxxCsDdeInitialize()</a>, <a class="el" href="../../d4/d5/focusact_8c-source.html#l00034">xxxDeactivate()</a>, <a class="el" href="../../d5/d7/createw_8c-source.html#l01591">xxxDestroyWindow()</a>, <a class="el" href="../../d7/d1/mndraw_8c-source.html#l01972">xxxDrawMenuBarTemp()</a>, <a class="el" href="../../d9/d7/ntuser_2kernel_2clipbrd_8c-source.html#l00851">xxxEmptyClipboard()</a>, <a class="el" href="../../d5/d7/createw_8c-source.html#l02218">xxxFreeWindow()</a>, <a class="el" href="../../d6/d2/mnsys_8c-source.html#l00368">xxxGetSystemMenu()</a>, <a class="el" href="../../d6/d7/ntimm_8c-source.html#l00749">xxxImmActivateAndUnloadThreadsLayout()</a>, <a class="el" href="../../d6/d7/ntimm_8c-source.html#l00921">xxxImmActivateLayout()</a>, <a class="el" href="../../d6/d7/ntimm_8c-source.html#l00646">xxxImmActivateThreadsLayout()</a>, <a class="el" href="../../d7/d1/kbdlyout_8c-source.html#l01203">xxxInternalActivateKeyboardLayout()</a>, <a class="el" href="../../d7/d1/kbdlyout_8c-source.html#l01571">xxxInternalUnloadKeyboardLayout()</a>, <a class="el" href="../../d4/d5/kernel_2sendmsg_8c-source.html#l01296">xxxInterSendMsgEx()</a>, <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00062">xxxLBCreate()</a>, <a class="el" href="../../d7/d1/kbdlyout_8c-source.html#l00654">xxxLoadKeyboardLayoutEx()</a>, <a class="el" href="../../d9/d7/fullscr_8c-source.html#l00166">xxxMakeWindowForegroundWithState()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01237">xxxMDIActivate()</a>, <a class="el" href="../../d3/d6/ntuser_2kernel_2menu_8c-source.html#l04022">xxxMenuWindowProc()</a>, <a class="el" href="../../d3/d6/ntuser_2kernel_2menu_8c-source.html#l02517">xxxMNCloseHierarchy()</a>, <a class="el" href="../../d5/d1/mncomput_8c-source.html#l00233">xxxMNCompute()</a>, <a class="el" href="../../d3/d6/ntuser_2kernel_2menu_8c-source.html#l01251">xxxMNKeyDown()</a>, <a class="el" href="../../d3/d6/ntuser_2kernel_2menu_8c-source.html#l01934">xxxMNOpenHierarchy()</a>, <a class="el" href="../../d3/d6/ntuser_2kernel_2menu_8c-source.html#l02818">xxxMNSelectItem()</a>, <a class="el" href="../../d5/d2/mnstate_8c-source.html#l00540">xxxMNStartMenuState()</a>, <a class="el" href="../../d3/d6/ntuser_2kernel_2menu_8c-source.html#l00795">xxxMNSwitchToAlternateMenu()</a>, <a class="el" href="../../d9/d2/movesize_8c-source.html#l01053">xxxMoveSize()</a>, <a class="el" href="../../d2/d2/tmswitch_8c-source.html#l01675">xxxNextWindow()</a>, <a class="el" href="../../d2/d2/tmswitch_8c-source.html#l02121">xxxOldNextWindow()</a>, <a class="el" href="../../d9/d7/ntuser_2kernel_2clipbrd_8c-source.html#l00124">xxxOpenClipboard()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l02196">xxxSBTrackInit()</a>, <a class="el" href="../../d4/d5/focusact_8c-source.html#l00220">xxxSendFocusMessages()</a>, <a class="el" href="../../d7/d6/classchg_8c-source.html#l00056">xxxSetClassIcon()</a>, <a class="el" href="../../d9/d7/ntuser_2kernel_2clipbrd_8c-source.html#l02572">xxxSetClipboardViewer()</a>, <a class="el" href="../../d4/d1/mnchange_8c-source.html#l00796">xxxSetLPITEMInfo()</a>, <a class="el" href="../../d0/d7/kernel_2winmgr_8c-source.html#l00311">xxxSetParent()</a>, <a class="el" href="../../d7/d1/kbdlyout_8c-source.html#l00560">xxxSetPKLinThreads()</a>, <a class="el" href="../../d0/d0/miscutil_8c-source.html#l00097">xxxSetShellWindow()</a>, <a class="el" href="../../d9/d6/winloop2_8c-source.html#l00100">xxxSetTrayWindow()</a>, <a class="el" href="../../d1/d4/ntuser_2kernel_2getset_8c-source.html#l00568">xxxSetWindowData()</a>, <a class="el" href="../../d0/d6/desktop_8c-source.html#l03358">xxxSwitchDesktop()</a>, <a class="el" href="../../d5/d4/rare_8c-source.html#l01497">xxxSystemParametersInfo()</a>, <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00904">xxxTrackMouseMove()</a>, <a class="el" href="../../d3/d2/mnpopup_8c-source.html#l00052">xxxTrackPopupMenuEx()</a>, <a class="el" href="../../d6/d2/ntuser_2kernel_2input_8c-source.html#l05940">zzzAttachToQueue()</a>, and <a class="el" href="../../d6/d2/ntuser_2kernel_2input_8c-source.html#l01363">zzzSetFMouseMoved()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a130" doxytag="usercli.h::LOCKRESOURCE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define LOCKRESOURCE          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">hResData,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>hModule&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;((*(<a class="el" href="../../d8/d6/ntuser_2client_2globals_8h.html#a48">pfnLockResource</a>))(hResData, hModule))</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00912">912</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d0/d8/clmenu_8c-source.html#l00378">CommonLoadMenu()</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l00941">CreateDialogParamA()</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l00975">CreateDialogParamW()</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l00868">DialogBoxParamA()</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l02502">GetIconIdEx()</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l00403">LoadAcc()</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l01899">LoadBmp()</a>, <a class="el" href="../../d4/d1/rtlres_8c-source.html#l00037">LoadStringOrError()</a>, and <a class="el" href="../../d5/d8/clres_8c-source.html#l02847">ObjectFromDIBResource()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a65" doxytag="usercli.h::LOWERCASE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define LOWERCASE&nbsp;&nbsp;&nbsp;2          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00440">440</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d7/d0/lb1_8c-source.html#l00032">ListBoxWndProcWorker()</a>, <a class="el" href="../../d4/d3/comboini_8c-source.html#l00070">xxxCBCreateHandler()</a>, and <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l00407">xxxLBInsertItem()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a112" doxytag="usercli.h::LT" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define LT&nbsp;&nbsp;&nbsp;2          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00790">790</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02757">Compare()</a>, and <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02802">xxxFindString()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a247" doxytag="usercli.h::MAX_RESOURCE_INDEX" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define MAX_RESOURCE_INDEX&nbsp;&nbsp;&nbsp;32768          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01738">1738</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d5/d8/clres_8c-source.html#l01899">LoadBmp()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a73" doxytag="usercli.h::MAXCLIPENDPOS" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define MAXCLIPENDPOS&nbsp;&nbsp;&nbsp;32764          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00490">490</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/editec_8c-source.html#l00770">ECTabTheTextOut()</a>, and <a class="el" href="../../d2/d4/editml_8c-source.html#l03991">MLDrawText()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a271" doxytag="usercli.h::MAXED" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define MAXED          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">pmdi&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;(pmdi-&gt;hwndMaxedChild)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02068">2068</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02794">CreateMDIChild()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02101">DefFrameProcWorker()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02531">DefMDIChildProcWorker()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01657">MDIClientWndProcWorker()</a>, <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00499">MDISetMenu()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02425">xxxChildResize()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01237">xxxMDIActivate()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01540">xxxMDIDestroy()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01420">xxxMDINext()</a>, and <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00032">xxxSetFrameTitle()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a260" doxytag="usercli.h::MAXITEMS" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define MAXITEMS&nbsp;&nbsp;&nbsp;10          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02028">2028</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00362">AppendToWindowsMenu()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02101">DefFrameProcWorker()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01657">MDIClientWndProcWorker()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02735">MDICompleteChildCreation()</a>, <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00499">MDISetMenu()</a>, <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00611">xxxInitActivateDlg()</a>, and <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01237">xxxMDIActivate()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a74" doxytag="usercli.h::MAXLINELENGTH" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define MAXLINELENGTH&nbsp;&nbsp;&nbsp;1024          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00496">496</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/editec_8c-source.html#l01281">ECCchInWidth()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00770">ECTabTheTextOut()</a>, and <a class="el" href="../../d2/d4/editml_8c-source.html#l01562">MLBuildchLines()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a72" doxytag="usercli.h::MAXPIXELWIDTH" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define MAXPIXELWIDTH&nbsp;&nbsp;&nbsp;30000          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00488">488</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a75" doxytag="usercli.h::MAXTEXT" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define MAXTEXT&nbsp;&nbsp;&nbsp;30000          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00503">503</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d6/d3/edecrare_8c-source.html#l00387">ECCreate()</a>, and <a class="el" href="../../d5/d4/edmlonce_8c-source.html#l00023">MLCreate()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a279" doxytag="usercli.h::MDIACTIVATE_PROP_NAME" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define MDIACTIVATE_PROP_NAME&nbsp;&nbsp;&nbsp;TEXT("MDIA")          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02077">2077</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00775">MDIActivateDlgInit()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a255" doxytag="usercli.h::MENUAPI_GET" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define MENUAPI_GET&nbsp;&nbsp;&nbsp;1          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01991">1991</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d0/d8/clmenu_8c-source.html#l00652">GetMenuInfo()</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l01643">GetMenuItemInfo()</a>, <a class="el" href="../../d0/d8/clmenu_8c-source.html#l00607">ValidateMENUINFO()</a>, and <a class="el" href="../../d0/d8/clmenu_8c-source.html#l00454">ValidateMENUITEMINFO()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a254" doxytag="usercli.h::MENUAPI_INSERT" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define MENUAPI_INSERT&nbsp;&nbsp;&nbsp;0          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01990">1990</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a256" doxytag="usercli.h::MENUAPI_SET" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define MENUAPI_SET&nbsp;&nbsp;&nbsp;2          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01992">1992</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d6/d8/cltxt_8h-source.html#l01702">InsertMenuItem()</a>, <a class="el" href="../../d8/d6/menuc_8c-source.html#l00115">SetMenuInfo()</a>, and <a class="el" href="../../d6/d8/cltxt_8h-source.html#l01685">SetMenuItemInfo()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a207" doxytag="usercli.h::MESSAGEPROTO" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define MESSAGEPROTO          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">func&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Value:</b><pre class="fragment"><div>LRESULT CALLBACK fn ## func(                               \
        HWND hwnd, UINT msg, WPARAM wParam, LPARAM lParam, \
        ULONG_PTR xParam, DWORD xpfnWndProc, BOOL bAnsi)
</div></pre>
<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01246">1246</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a258" doxytag="usercli.h::MSGBOX_CALLBACK" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define MSGBOX_CALLBACK&nbsp;&nbsp;&nbsp;TEXT("SysMB")          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02016">2016</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d7/d3/msgbox_8c-source.html#l01648">MB_DlgProcWorker()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a115" doxytag="usercli.h::MULTIPLESEL" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define MULTIPLESEL&nbsp;&nbsp;&nbsp;1          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00794">794</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00820">LBEvent()</a>, <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00062">xxxLBCreate()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02948">xxxLBoxCtlCharInput()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02183">xxxLBoxCtlKeyInput()</a>, and <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01290">xxxTrackMouse()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a124" doxytag="usercli.h::NextDWordBoundary" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define NextDWordBoundary          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">p&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;((<a class="el" href="../../d9/d7/halvprnt_8c.html#a1">PBYTE</a>)(p) + ((ULONG_PTR)(-(LONG_PTR)(p)) &amp; 3))</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00887">887</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d1/d8/dlgbegin_8c-source.html#l00072">DWordSkipSz()</a>, <a class="el" href="../../d1/d8/dlgbegin_8c-source.html#l00553">InternalCreateDialog()</a>, <a class="el" href="../../d7/d3/msgbox_8c-source.html#l01541">MB_FindDlgTemplateSize()</a>, <a class="el" href="../../d7/d3/msgbox_8c-source.html#l01284">MB_UpdateDlgHdr()</a>, and <a class="el" href="../../d7/d3/msgbox_8c-source.html#l01425">MB_UpdateDlgItem()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a123" doxytag="usercli.h::NextWordBoundary" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define NextWordBoundary          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">p&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;((<a class="el" href="../../d9/d7/halvprnt_8c.html#a1">PBYTE</a>)(p) + ((ULONG_PTR)(p) &amp; 1))</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00886">886</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d3/d0/userexts_8c-source.html#l12434">GetInxStr()</a>, <a class="el" href="../../d1/d8/dlgbegin_8c-source.html#l00553">InternalCreateDialog()</a>, <a class="el" href="../../d7/d3/msgbox_8c-source.html#l01541">MB_FindDlgTemplateSize()</a>, <a class="el" href="../../d7/d3/msgbox_8c-source.html#l01284">MB_UpdateDlgHdr()</a>, <a class="el" href="../../d7/d3/msgbox_8c-source.html#l01425">MB_UpdateDlgItem()</a>, <a class="el" href="../../d0/d8/clmenu_8c-source.html#l00029">MenuLoadWinTemplates()</a>, and <a class="el" href="../../d1/d8/dlgbegin_8c-source.html#l00065">WordSkipSz()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a80" doxytag="usercli.h::NOMODIFY" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define NOMODIFY&nbsp;&nbsp;&nbsp;4 /* Neither shift nor <a class="el" href="../../d3/d0/user32_8def.html#a59">control</a> down */          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00513">513</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/editec_8c-source.html#l00733">ECGetModKeys()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a76" doxytag="usercli.h::NONEDOWN" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define NONEDOWN&nbsp;&nbsp;&nbsp;0 /* Neither shift nor <a class="el" href="../../d3/d0/user32_8def.html#a59">control</a> down */          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00509">509</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d2/d4/editml_8c-source.html#l02028">MLKeyDown()</a>, and <a class="el" href="../../d4/d4/editsl_8c-source.html#l01529">SLKeyDown()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a212" doxytag="usercli.h::NtUserArrangeIconicWindows" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define NtUserArrangeIconicWindows          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">hwnd&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;(UINT)NtUserCallHwndLock((hwnd), SFI_XXXARRANGEICONICWINDOWS)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01557">1557</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00711">ArrangeWindows()</a>, and <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01657">MDIClientWndProcWorker()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a213" doxytag="usercli.h::NtUserBeginDeferWindowPos" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define NtUserBeginDeferWindowPos          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">nNumWindows&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;(HANDLE)NtUserCallOneParam((nNumWindows),SFI__BEGINDEFERWINDOWPOS)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01558">1558</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00711">ArrangeWindows()</a>, <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00685">MDIActivateDlgSize()</a>, and <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01420">xxxMDINext()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a214" doxytag="usercli.h::NtUserCreateMenu" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define NtUserCreateMenu          </td>
          <td class="md" valign="top">(&nbsp;</td>
&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;(HMENU)NtUserCallNoParam(SFI__CREATEMENU)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01559">1559</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d0/d8/clmenu_8c-source.html#l00176">MenuLoadChicagoTemplates()</a>, and <a class="el" href="../../d0/d8/clmenu_8c-source.html#l00029">MenuLoadWinTemplates()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a215" doxytag="usercli.h::NtUserDestroyCaret" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define NtUserDestroyCaret          </td>
          <td class="md" valign="top">(&nbsp;</td>
&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;(BOOL)NtUserCallNoParam(SFI_ZZZDESTROYCARET)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01560">1560</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d6/d3/edecrare_8c-source.html#l00708">ECSetFont()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l03457">MLEditWndProc()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l03329">MLKillFocus()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l02520">SLEditWndProc()</a>, and <a class="el" href="../../d4/d4/editsl_8c-source.html#l02394">SLKillFocus()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a216" doxytag="usercli.h::NtUserEnableWindow" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define NtUserEnableWindow          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">hwnd,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>bEnable&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;(BOOL)NtUserCallHwndParamLock((hwnd), (bEnable),SFI_XXXENABLEWINDOW)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01561">1561</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d2/d3/combo_8c-source.html#l00207">ComboBoxWndProcWorker()</a>, <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l01036">DialogBox2()</a>, <a class="el" href="../../d3/d8/dlgend_8c-source.html#l00024">EndDialog()</a>, <a class="el" href="../../d7/d3/msgbox_8c-source.html#l01944">EndTaskModalDialog()</a>, <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l01246">InternalDialogBox()</a>, and <a class="el" href="../../d7/d3/msgbox_8c-source.html#l01892">StartTaskModalDialog()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a217" doxytag="usercli.h::NtUserGetMessagePos" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define NtUserGetMessagePos          </td>
          <td class="md" valign="top">(&nbsp;</td>
&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;(<a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)NtUserCallNoParam(SFI__GETMESSAGEPOS)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01562">1562</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d7/d3/msgbox_8c-source.html#l00136">SendHelpMessage()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a221" doxytag="usercli.h::NtUserGetWindowContextHelpId" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define NtUserGetWindowContextHelpId          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">hwnd&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;(BOOL)NtUserCallHwnd((hwnd), SFI__GETWINDOWCONTEXTHELPID)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01566">1566</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d7/d3/msgbox_8c-source.html#l01648">MB_DlgProcWorker()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a218" doxytag="usercli.h::NtUserKillSystemTimer" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define NtUserKillSystemTimer          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">hwnd,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>nIDEvent&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;(BOOL)NtUserCallHwndParam((hwnd), (nIDEvent), SFI__KILLSYSTEMTIMER)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01563">1563</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d2/d4/editml_8c-source.html#l03457">MLEditWndProc()</a>, and <a class="el" href="../../d2/d4/editml_8c-source.html#l02792">MLMouseMotion()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a219" doxytag="usercli.h::NtUserMessageBeep" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define NtUserMessageBeep          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">wType&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;(BOOL)NtUserCallOneParam((wType), SFI_XXXMESSAGEBEEP)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01564">1564</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l00460">DefDlgProcWorker()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02703">ECCopy()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01337">ECImeComposition()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01683">HanjaKeyHandler()</a>, <a class="el" href="../../d6/d8/dlgmgr2_8c-source.html#l00317">IsDialogMessageW()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l02531">MLChar()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l01040">MLInsertText()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l01304">SLChar()</a>, and <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02948">xxxLBoxCtlCharInput()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a222" doxytag="usercli.h::NtUserRedrawFrame" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define NtUserRedrawFrame          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">hwnd&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;NtUserCallHwndLock((hwnd), SFI_XXXREDRAWFRAME)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01567">1567</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00200">CalcClientScrolling()</a>, <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00165">MDIAddSysMenu()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02735">MDICompleteChildCreation()</a>, <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00289">MDIRemoveSysMenu()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01540">xxxMDIDestroy()</a>, and <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00032">xxxSetFrameTitle()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a223" doxytag="usercli.h::NtUserRedrawFrameAndHook" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define NtUserRedrawFrameAndHook          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">hwnd&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;NtUserCallHwndLock((hwnd), SFI_XXXREDRAWFRAMEANDHOOK)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01568">1568</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00032">xxxSetFrameTitle()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a224" doxytag="usercli.h::NtUserRedrawTitle" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define NtUserRedrawTitle          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">hwnd,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>wFlags&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;NtUserCallHwndParamLock((hwnd), (wFlags), SFI_XXXREDRAWTITLE)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01569">1569</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00032">xxxSetFrameTitle()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a225" doxytag="usercli.h::NtUserReleaseCapture" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define NtUserReleaseCapture          </td>
          <td class="md" valign="top">(&nbsp;</td>
&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;(BOOL)NtUserCallNoParam(SFI_XXXRELEASECAPTURE)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01570">1570</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d2/d3/combo_8c-source.html#l00207">ComboBoxWndProcWorker()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l02792">MLMouseMotion()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l02098">SLMouseMotion()</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l00654">xxxBNReleaseCapture()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01875">xxxLBButtonUp()</a>, and <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01290">xxxTrackMouse()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a211" doxytag="usercli.h::NtUserReleaseDC" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define NtUserReleaseDC          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">hwnd,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>hdc&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;NtUserCallOneParam((ULONG_PTR)(hdc), SFI__RELEASEDC)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01556">1556</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d1/d8/hdata_8c-source.html#l00579">CopyBitmap()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00160">LBReleaseDC()</a>, <a class="el" href="../../d7/d3/msgbox_8c-source.html#l00730">SoftModalMessageBox()</a>, <a class="el" href="../../d6/d4/statctl_8c-source.html#l00784">StaticRepaint()</a>, <a class="el" href="../../d4/d3/comboini_8c-source.html#l00253">xxxCBCalcControlRects()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l02028">xxxCBInternalUpdateEditWindow()</a>, <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00611">xxxInitActivateDlg()</a>, <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00062">xxxLBCreate()</a>, and <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00438">xxxLBSetFont()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a226" doxytag="usercli.h::NtUserSetCaretPos" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define NtUserSetCaretPos          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">X,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>Y&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;(BOOL)NtUserCallTwoParam((<a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)(X), (<a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)(Y), SFI_ZZZSETCARETPOS)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01571">1571</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d2/d4/editml_8c-source.html#l00292">MLSetCaretPosition()</a>, and <a class="el" href="../../d4/d4/editsl_8c-source.html#l00126">SLSetCaretPosition()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a227" doxytag="usercli.h::NtUserSetCursorPos" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define NtUserSetCursorPos          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">X,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>Y&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;(BOOL)NtUserCallTwoParam((X), (Y), SFI_ZZZSETCURSORPOS)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01572">1572</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l00460">DefDlgProcWorker()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a228" doxytag="usercli.h::NtUserSetForegroundWindow" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define NtUserSetForegroundWindow          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">hwnd&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;(BOOL)NtUserCallHwndLock((hwnd), SFI_XXXSTUBSETFOREGROUNDWINDOW)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01573">1573</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l01036">DialogBox2()</a>, <a class="el" href="../../d1/d8/dlgbegin_8c-source.html#l00553">InternalCreateDialog()</a>, and <a class="el" href="../../d4/d7/client_8c-source.html#l03499">SetForegroundWindow()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a229" doxytag="usercli.h::NtUserSetSysMenu" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define NtUserSetSysMenu          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">hwnd&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;NtUserCallHwndLock((hwnd), SFI_XXXSETSYSMENU)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01574">1574</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02101">DefFrameProcWorker()</a>, <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00165">MDIAddSysMenu()</a>, and <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02425">xxxChildResize()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a230" doxytag="usercli.h::NtUserSetVisible" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define NtUserSetVisible          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">hwnd,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>fSet&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;NtUserCallHwndParam((hwnd), (fSet), SFI_SETVISIBLE)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01575">1575</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01420">xxxMDINext()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a220" doxytag="usercli.h::NtUserSetWindowContextHelpId" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define NtUserSetWindowContextHelpId          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">hwnd,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>id&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;(BOOL)NtUserCallHwndParam((hwnd), (id), SFI__SETWINDOWCONTEXTHELPID)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01565">1565</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d1/d8/dlgbegin_8c-source.html#l00553">InternalCreateDialog()</a>, and <a class="el" href="../../d7/d3/msgbox_8c-source.html#l01648">MB_DlgProcWorker()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a231" doxytag="usercli.h::NtUserShowCursor" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define NtUserShowCursor          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">bShow&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;(int)NtUserCallOneParam((bShow), SFI_ZZZSHOWCURSOR)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01576">1576</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l00460">DefDlgProcWorker()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a232" doxytag="usercli.h::NtUserUpdateClientRect" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define NtUserUpdateClientRect          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">hwnd&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;NtUserCallHwndLock((hwnd), SFI_XXXUPDATECLIENTRECT)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01577">1577</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01657">MDIClientWndProcWorker()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a0" doxytag="usercli.h::OEMRESOURCE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define OEMRESOURCE&nbsp;&nbsp;&nbsp;1          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00018">18</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a245" doxytag="usercli.h::OFFSET_120_DPI" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define OFFSET_120_DPI&nbsp;&nbsp;&nbsp;200          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01730">1730</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d5/d8/clres_8c-source.html#l01899">LoadBmp()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a246" doxytag="usercli.h::OFFSET_160_DPI" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define OFFSET_160_DPI&nbsp;&nbsp;&nbsp;300          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01731">1731</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a244" doxytag="usercli.h::OFFSET_96_DPI" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define OFFSET_96_DPI&nbsp;&nbsp;&nbsp;100          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01729">1729</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d5/d8/clres_8c-source.html#l01899">LoadBmp()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a243" doxytag="usercli.h::OFFSET_SCALE_DPI" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define OFFSET_SCALE_DPI&nbsp;&nbsp;&nbsp;000          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01728">1728</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a282" doxytag="usercli.h::OLEWONTLOAD" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define OLEWONTLOAD&nbsp;&nbsp;&nbsp;(HINSTANCE)IntToPtr(0xFFFFFFFF)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02126">2126</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d0/d7/menuddc_8c-source.html#l00362">__ClientLoadOLE()</a>, and <a class="el" href="../../d0/d7/menuddc_8c-source.html#l00281">LoadOLEOnce()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a266" doxytag="usercli.h::OTHERMAXING" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define OTHERMAXING&nbsp;&nbsp;&nbsp;0x0400          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02061">2061</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02425">xxxChildResize()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a62" doxytag="usercli.h::OWNERDRAWFIXED" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define OWNERDRAWFIXED&nbsp;&nbsp;&nbsp;1          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00436">436</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d4/d3/comboini_8c-source.html#l00070">xxxCBCreateHandler()</a>, and <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00062">xxxLBCreate()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a63" doxytag="usercli.h::OWNERDRAWVAR" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define OWNERDRAWVAR&nbsp;&nbsp;&nbsp;2          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00437">437</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00526">CItemInWindow()</a>, <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l00285">GrowMem()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00920">ISelFromPt()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01090">LastFullVisible()</a>, <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l01220">LBCalcAllocNeeded()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00179">LBGetItemRect()</a>, <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00759">LBGetSetItemHeightHandler()</a>, <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00025">LBSetCItemFullMax()</a>, <a class="el" href="../../d4/d3/comboini_8c-source.html#l00070">xxxCBCreateHandler()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02092">xxxInsureVisible()</a>, <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00062">xxxLBCreate()</a>, <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l00407">xxxLBInsertItem()</a>, <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l00842">xxxLBoxCtlDelete()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02183">xxxLBoxCtlKeyInput()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00561">xxxLBoxCtlScroll()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00798">xxxLBPaint()</a>, and <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02012">xxxNewITopEx()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a51" doxytag="usercli.h::PBF_DEFAULT" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define PBF_DEFAULT&nbsp;&nbsp;&nbsp;0x0002          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00398">398</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d0/btnctl_8c-source.html#l00361">BNCalcRect()</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l00071">IsPushButton()</a>, and <a class="el" href="../../d9/d0/btnctl_8c-source.html#l01159">xxxDrawButton()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a50" doxytag="usercli.h::PBF_PUSHABLE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define PBF_PUSHABLE&nbsp;&nbsp;&nbsp;0x0001          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00397">397</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d0/btnctl_8c-source.html#l01338">ButtonWndProcWorker()</a>, and <a class="el" href="../../d9/d0/btnctl_8c-source.html#l00071">IsPushButton()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a111" doxytag="usercli.h::PREFIX" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define PREFIX&nbsp;&nbsp;&nbsp;1          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00789">789</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02757">Compare()</a>, <a class="el" href="../../d7/d0/lb1_8c-source.html#l00032">ListBoxWndProcWorker()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02802">xxxFindString()</a>, and <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02948">xxxLBoxCtlCharInput()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a278" doxytag="usercli.h::PROP_MDICLIENT" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define PROP_MDICLIENT&nbsp;&nbsp;&nbsp;MAKEINTRESOURCE(0x8CAC)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02076">2076</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a85" doxytag="usercli.h::Pundo" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define Pundo          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">ped&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;((<a class="el" href="../../d9/d8/structtagUNDO.html">PUNDO</a>)&amp;(ped)-&gt;undoType)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00540">540</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/editec_8c-source.html#l02293">ECDeleteText()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02059">ECInsertText()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02547">ECResetTextInfo()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02904">EditWndProc()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l03457">MLEditWndProc()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l01040">MLInsertText()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l01309">MLReplaceSel()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l02520">SLEditWndProc()</a>, and <a class="el" href="../../d4/d4/editsl_8c-source.html#l01225">SLReplaceSel()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a289" doxytag="usercli.h::RDRCODE_END" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define RDRCODE_END&nbsp;&nbsp;&nbsp;3          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02175">2175</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d4/reader_8c-source.html#l00158">ReaderWndProc()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a288" doxytag="usercli.h::RDRCODE_SCROLL" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define RDRCODE_SCROLL&nbsp;&nbsp;&nbsp;2          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02174">2174</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d4/reader_8c-source.html#l00141">ReaderFeedback()</a>, and <a class="el" href="../../d9/d4/reader_8c-source.html#l00311">ReaderProcInternal()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a287" doxytag="usercli.h::RDRCODE_START" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define RDRCODE_START&nbsp;&nbsp;&nbsp;1          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02173">2173</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d4/reader_8c-source.html#l00158">ReaderWndProc()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a286" doxytag="usercli.h::RDRMODE_DIAG" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define RDRMODE_DIAG&nbsp;&nbsp;&nbsp;0x00000004          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02171">2171</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d4/reader_8c-source.html#l00030">FReaderDiag()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a285" doxytag="usercli.h::RDRMODE_HORZ" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define RDRMODE_HORZ&nbsp;&nbsp;&nbsp;0x00000002          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02170">2170</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d4/reader_8c-source.html#l00415">EnterReaderModeHelper()</a>, <a class="el" href="../../d9/d4/reader_8c-source.html#l00017">FReader2Dim()</a>, and <a class="el" href="../../d9/d4/reader_8c-source.html#l00026">FReaderHorz()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a284" doxytag="usercli.h::RDRMODE_VERT" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define RDRMODE_VERT&nbsp;&nbsp;&nbsp;0x00000001          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02169">2169</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d4/reader_8c-source.html#l00415">EnterReaderModeHelper()</a>, <a class="el" href="../../d9/d4/reader_8c-source.html#l00017">FReader2Dim()</a>, and <a class="el" href="../../d9/d4/reader_8c-source.html#l00022">FReaderVert()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a26" doxytag="usercli.h::REBASE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define REBASE          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">p,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>elem&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Value:</b><pre class="fragment"><div>((KERNEL_ULONG_PTR)((p)-&gt;elem) &lt;= (KERNEL_ULONG_PTR)<a class="code" href="../../d1/d8/clglobal_8c.html#a7">gHighestUserAddress</a> ? \
        ((PVOID)(p)-&gt;elem) : <a class="code" href="../../d6/d0/usercli_8h.html#a24">REBASEALWAYS</a>(p, elem))
</div></pre>
<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00213">213</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d8/d7/rtl_2winprop_8c-source.html#l00046">_FindProp()</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l00361">BNCalcRect()</a>, <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l00409">CheckRadioButton()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02101">DefFrameProcWorker()</a>, <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00574">DefWindowProcWorker()</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00180">GetMenu()</a>, <a class="el" href="../../d4/d7/winmgrc_8c-source.html#l00335">GetScrollRange()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01657">MDIClientWndProcWorker()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02735">MDICompleteChildCreation()</a>, <a class="el" href="../../d4/d7/winmgrc_8c-source.html#l00661">ShowWindowNoRepaint()</a>, <a class="el" href="../../d6/d4/statctl_8c-source.html#l00344">StaticCallback()</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l00722">xxxBNDrawText()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02425">xxxChildResize()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01540">xxxMDIDestroy()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00032">xxxSetFrameTitle()</a>, and <a class="el" href="../../d6/d4/statctl_8c-source.html#l00419">xxxStaticPaint()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a24" doxytag="usercli.h::REBASEALWAYS" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define REBASEALWAYS          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">p,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>elem&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;((PVOID)((KERNEL_ULONG_PTR)(p) + ((KERNEL_ULONG_PTR)(p)-&gt;elem - (KERNEL_ULONG_PTR)(p)-&gt;head.pSelf)))</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00210">210</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d6/d6/classc_8c-source.html#l00246">_GetClassLongPtr()</a>, <a class="el" href="../../d6/d6/ntuser_2rtl_2menu_8c-source.html#l00026">_GetMenuDefaultItem()</a>, <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00796">_GetSubMenu()</a>, <a class="el" href="../../d3/d7/rtl_2winmgr_8c-source.html#l00763">_HasCaptionIcon()</a>, <a class="el" href="../../d7/d8/dlgmgrc_8c-source.html#l00151">_NextSibblingOrAncestor()</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l01338">ButtonWndProcWorker()</a>, <a class="el" href="../../d4/d3/ddemlwp_8c-source.html#l00376">DDEMLClientWndProc()</a>, <a class="el" href="../../d9/d4/reader_8c-source.html#l00391">FScrollEnabled()</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00067">GetClassNameA()</a>, <a class="el" href="../../d6/d6/classc_8c-source.html#l00305">GetClassWord()</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00234">GetMenuItemID()</a>, <a class="el" href="../../d4/d7/winmgrc_8c-source.html#l00383">GetScrollInfo()</a>, <a class="el" href="../../d4/d7/winmgrc_8c-source.html#l00293">GetScrollPos()</a>, <a class="el" href="../../d5/d4/getsetc_8c-source.html#l00343">GetWindowData()</a>, <a class="el" href="../../d5/d6/client_2winable_8c-source.html#l00024">GetWindowInfo()</a>, <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00047">MakeMenuItem()</a>, <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00165">MDIAddSysMenu()</a>, <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00486">MNLookUpItem()</a>, <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00104">ModifyMenuItem()</a>, <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l01031">PhkNextValid()</a>, <a class="el" href="../../d4/d3/ddemlwp_8c-source.html#l00059">ProcessDDEMLInitiate()</a>, <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00270">SendMessageWorker()</a>, <a class="el" href="../../d0/d6/register_8c-source.html#l00030">SendRegisterMessageToClass()</a>, <a class="el" href="../../d8/d6/menuc_8c-source.html#l00062">SetMenuItemInfoStruct()</a>, <a class="el" href="../../d4/d7/winmgrc_8c-source.html#l01210">SmoothScrollWindowEx()</a>, <a class="el" href="../../d6/d4/statctl_8c-source.html#l00840">StaticWndProcWorker()</a>, and <a class="el" href="../../d6/d6/ntuser_2rtl_2menu_8c-source.html#l00078">xxxMNCanClose()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a25" doxytag="usercli.h::REBASEPTR" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define REBASEPTR          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">obj,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>p&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;((PVOID)((KERNEL_ULONG_PTR)(p) - ((KERNEL_ULONG_PTR)(obj)-&gt;head.pSelf - (KERNEL_ULONG_PTR)(obj))))</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00211">211</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d6/d6/ntuser_2rtl_2menu_8c-source.html#l00026">_GetMenuDefaultItem()</a>, <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00583">_GetMenuState()</a>, <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00796">_GetSubMenu()</a>, <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00668">_GetWindow()</a>, <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00574">DefWindowProcWorker()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l03776">ECGetControlBrush()</a>, <a class="el" href="../../d3/d8/dlgend_8c-source.html#l00024">EndDialog()</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00067">GetClassNameA()</a>, <a class="el" href="../../d5/d4/edmlonce_8c-source.html#l00023">MLCreate()</a>, <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00486">MNLookUpItem()</a>, <a class="el" href="../../d7/d4/edslrare_8c-source.html#l00027">SLCreate()</a>, and <a class="el" href="../../d6/d6/ntuser_2rtl_2menu_8c-source.html#l00078">xxxMNCanClose()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a27" doxytag="usercli.h::REBASEPWND" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define REBASEPWND          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">p,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>elem&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;((<a class="el" href="../../d6/d9/structtagWND.html">PWND</a>)REBASE(p, elem))</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00215">215</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d3/d7/rtl_2winmgr_8c-source.html#l00294">_FChildVisible()</a>, <a class="el" href="../../d7/d8/dlgmgrc_8c-source.html#l00125">_GetChildControl()</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00141">_GetDlgItem()</a>, <a class="el" href="../../d3/d7/rtl_2winmgr_8c-source.html#l00490">_GetLastActivePopup()</a>, <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00762">_GetParent()</a>, <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00668">_GetWindow()</a>, <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00826">_IsChild()</a>, <a class="el" href="../../d3/d7/rtl_2winmgr_8c-source.html#l00513">_IsDescendant()</a>, <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00860">_IsWindowVisible()</a>, <a class="el" href="../../d7/d8/dlgmgrc_8c-source.html#l00207">_NextControl()</a>, <a class="el" href="../../d4/d7/winmgrc_8c-source.html#l00116">AnyPopup()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00711">ArrangeWindows()</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l01338">ButtonWndProcWorker()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00200">CalcClientScrolling()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00927">CascadeWindowsEnum()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02380">ChildMinMaxInfo()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l00207">ComboBoxWndProcWorker()</a>, <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l00460">DefDlgProcWorker()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02531">DefMDIChildProcWorker()</a>, <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00574">DefWindowProcWorker()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l00439">ECNcDestroyHandler()</a>, <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00024">FindPwndChild()</a>, <a class="el" href="../../d5/d9/rtl_2help_8c-source.html#l00028">GetContextHelpId()</a>, <a class="el" href="../../d2/d8/nt6_2dlgbegin_8c-source.html#l00351">GetDialogMonitor()</a>, <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l00043">GetParentDialog()</a>, <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00631">GetPrevPwnd()</a>, <a class="el" href="../../d3/d7/rtl_2winmgr_8c-source.html#l00856">GetRect()</a>, <a class="el" href="../../d3/d7/rtl_2winmgr_8c-source.html#l00817">GetTopLevelWindow()</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00487">GetTopWindow()</a>, <a class="el" href="../../d5/d4/getsetc_8c-source.html#l00343">GetWindowData()</a>, <a class="el" href="../../d0/d9/imectl_8c-source.html#l01020">ImeNotifyHandler()</a>, <a class="el" href="../../d0/d9/imectl_8c-source.html#l00798">ImeSetContextHandler()</a>, <a class="el" href="../../d3/d7/rtl_2winmgr_8c-source.html#l00537">IsVisible()</a>, <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00047">MakeMenuItem()</a>, <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00685">MDIActivateDlgSize()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01657">MDIClientWndProcWorker()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02735">MDICompleteChildCreation()</a>, <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00499">MDISetMenu()</a>, <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00104">ModifyMenuItem()</a>, <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00467">ShiftMenuIDs()</a>, <a class="el" href="../../d3/d7/rtl_2winmgr_8c-source.html#l00636">SizeBoxHwnd()</a>, <a class="el" href="../../d6/d4/statctl_8c-source.html#l00812">StaticNotifyParent()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00869">ValidatePositionableWindow()</a>, <a class="el" href="../../d2/d9/client_2help_8c-source.html#l00447">WinHelpA()</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l00310">xxxBNOwnerDraw()</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l01206">xxxBNPaint()</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l00654">xxxBNReleaseCapture()</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l00995">xxxButtonDrawCheck()</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l00625">xxxButtonNotifyParent()</a>, <a class="el" href="../../d4/d3/comboini_8c-source.html#l00070">xxxCBCreateHandler()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02425">xxxChildResize()</a>, <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00375">xxxDestroyLBox()</a>, <a class="el" href="../../d6/d9/dmmnem_8c-source.html#l00219">xxxGotoNextMnem()</a>, <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00062">xxxLBCreate()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00060">xxxLBGetBrush()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01237">xxxMDIActivate()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01540">xxxMDIDestroy()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01420">xxxMDINext()</a>, and <a class="el" href="../../d6/d4/statctl_8c-source.html#l00419">xxxStaticPaint()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a239" doxytag="usercli.h::RedrawWindow" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define RedrawWindow&nbsp;&nbsp;&nbsp;NtUserRedrawWindow          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01585">1585</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/winmgrc_8c-source.html#l00810">AnimateWindow()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l03457">MLEditWndProc()</a>, <a class="el" href="../../d4/d7/winmgrc_8c-source.html#l01210">SmoothScrollWindowEx()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00603">UnmaximizeChildWindows()</a>, and <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l03172">xxxLBSetRedraw()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a8" doxytag="usercli.h::RESERVED_MSG_BITS" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define RESERVED_MSG_BITS&nbsp;&nbsp;&nbsp;(0xFFFE0000)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00133">133</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l02439">BroadcastSystemMessageWorker()</a>, <a class="el" href="../../d1/d7/ntcftxt_8h-source.html#l01460">CallMsgFilter()</a>, <a class="el" href="../../d1/d8/clmsg_8c-source.html#l01533">DispatchMessageWorker()</a>, <a class="el" href="../../d1/d7/ntcftxt_8h-source.html#l00249">GetMessage()</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00652">SendMessage()</a>, <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00498">SendMessageTimeoutWorker()</a>, and <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00851">TranslateMessageEx()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a21" doxytag="usercli.h::RevalidateHwnd" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define RevalidateHwnd          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">hwnd&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;((<a class="el" href="../../d6/d9/structtagWND.html">PWND</a>)HMValidateHandleNoSecure(hwnd, TYPE_WINDOW))</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00194">194</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d0/d7/kernel_2winmgr_8c-source.html#l00524">_FindWindowEx()</a>, <a class="el" href="../../d2/d2/tmswitch_8c-source.html#l02635">_GetAltTabInfo()</a>, <a class="el" href="../../d2/d2/tmswitch_8c-source.html#l00418">_RemoveNonTaskWindows()</a>, <a class="el" href="../../d6/d7/ntimm_8c-source.html#l00299">AssociateInputContextEx()</a>, <a class="el" href="../../d3/d7/swp_8c-source.html#l02529">BltValidInit()</a>, <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l00460">DefDlgProcWorker()</a>, <a class="el" href="../../d9/d3/sprite_8c-source.html#l00714">DeleteFadeSprite()</a>, <a class="el" href="../../d6/d7/ntimm_8c-source.html#l00122">DestroyInputContext()</a>, <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l01036">DialogBox2()</a>, <a class="el" href="../../d2/d2/tmswitch_8c-source.html#l00674">DrawIconCallBack()</a>, <a class="el" href="../../d2/d2/tmswitch_8c-source.html#l00538">DrawSwitchWndHilite()</a>, <a class="el" href="../../d7/d2/queue_8c-source.html#l03336">FindQMsg()</a>, <a class="el" href="../../d2/d2/tmswitch_8c-source.html#l01120">InitSwitchWndInfo()</a>, <a class="el" href="../../d1/d8/dlgbegin_8c-source.html#l00553">InternalCreateDialog()</a>, <a class="el" href="../../d3/d7/swp_8c-source.html#l00562">IsStillWindowC()</a>, <a class="el" href="../../d3/d7/swp_8c-source.html#l00301">PWInsertAfter()</a>, <a class="el" href="../../d2/d4/srvmsg_8c-source.html#l00147">SfnINCBOXSTRING()</a>, <a class="el" href="../../d2/d4/srvmsg_8c-source.html#l00039">SfnINLBOXSTRING()</a>, <a class="el" href="../../d2/d4/srvmsg_8c-source.html#l00203">SfnOUTCBOXSTRING()</a>, <a class="el" href="../../d2/d4/srvmsg_8c-source.html#l00095">SfnOUTLBOXSTRING()</a>, <a class="el" href="../../d9/d2/ntuser_2kernel_2access_8c-source.html#l02898">SoundSentryTimer()</a>, <a class="el" href="../../d7/d3/msgbox_8c-source.html#l01892">StartTaskModalDialog()</a>, <a class="el" href="../../d9/d3/sprite_8c-source.html#l00739">UpdateFade()</a>, <a class="el" href="../../d9/d3/sprite_8c-source.html#l00290">UserRecreateRedirectionBitmap()</a>, <a class="el" href="../../d9/d3/sprite_8c-source.html#l00310">UserRemoveRedirectionBitmap()</a>, <a class="el" href="../../d9/d3/sprite_8c-source.html#l00570">UserVisrgnFromHwnd()</a>, <a class="el" href="../../d3/d7/swp_8c-source.html#l00591">ValidateSmwp()</a>, <a class="el" href="../../d3/d7/swp_8c-source.html#l00429">ValidateWindowPos()</a>, <a class="el" href="../../d8/d8/icons_8c-source.html#l00031">xxxArrangeIconicWindows()</a>, <a class="el" href="../../d3/d7/swp_8c-source.html#l00821">xxxCalcValidRects()</a>, <a class="el" href="../../d2/d1/hooks_8c-source.html#l01797">xxxCallJournalPlaybackHook()</a>, <a class="el" href="../../d2/d1/hooks_8c-source.html#l01695">xxxCallJournalRecordHook()</a>, <a class="el" href="../../d6/d7/ntimm_8c-source.html#l02375">xxxCheckImeShowStatus()</a>, <a class="el" href="../../d2/d9/kernel_2exitwin_8c-source.html#l00428">xxxClientShutdown2()</a>, <a class="el" href="../../d5/d7/createw_8c-source.html#l00033">xxxCreateWindowEx()</a>, <a class="el" href="../../d9/d2/dwp_8c-source.html#l01264">xxxDefWindowProc()</a>, <a class="el" href="../../d5/d4/rare_8c-source.html#l00605">xxxDesktopRecalc()</a>, <a class="el" href="../../d0/d6/desktop_8c-source.html#l00883">xxxDesktopWndProc()</a>, <a class="el" href="../../d6/d2/ntuser_2kernel_2input_8c-source.html#l00762">xxxDispatchMessage()</a>, <a class="el" href="../../d7/d0/dragdrop_8c-source.html#l00026">xxxDragObject()</a>, <a class="el" href="../../d9/d2/dwp_8c-source.html#l00402">xxxDWP_SetCursor()</a>, <a class="el" href="../../d9/d2/dwp_8c-source.html#l00846">xxxDWPPrint()</a>, <a class="el" href="../../d3/d7/swp_8c-source.html#l04773">xxxEndDeferWindowPosEx()</a>, <a class="el" href="../../d0/d2/paint_8c-source.html#l00885">xxxInternalDoSyncPaint()</a>, <a class="el" href="../../d5/d6/enumwin_8c-source.html#l00040">xxxInternalEnumWindow()</a>, <a class="el" href="../../d3/d6/ntuser_2kernel_2menu_8c-source.html#l04022">xxxMenuWindowProc()</a>, <a class="el" href="../../d2/d7/w32_2ntuser_2kernel_2event_8c-source.html#l00275">xxxMessageEvent()</a>, <a class="el" href="../../d5/d4/rare_8c-source.html#l00362">xxxMetricsRecalc()</a>, <a class="el" href="../../d5/d8/minmax_8c-source.html#l01329">xxxMinMaximize()</a>, <a class="el" href="../../d3/d6/ntuser_2kernel_2menu_8c-source.html#l03180">xxxMNFindWindowFromPoint()</a>, <a class="el" href="../../d3/d6/ntuser_2kernel_2menu_8c-source.html#l01251">xxxMNKeyDown()</a>, <a class="el" href="../../d2/d2/tmswitch_8c-source.html#l01675">xxxNextWindow()</a>, <a class="el" href="../../d6/d7/ntimm_8c-source.html#l02544">xxxNotifyImeShowStatus()</a>, <a class="el" href="../../d2/d2/tmswitch_8c-source.html#l02121">xxxOldNextWindow()</a>, <a class="el" href="../../d2/d2/tmswitch_8c-source.html#l00808">xxxPaintIconsInSwitchWindow()</a>, <a class="el" href="../../d7/d2/queue_8c-source.html#l03772">xxxProcessEventMessage()</a>, <a class="el" href="../../d6/d2/ntuser_2kernel_2input_8c-source.html#l03305">xxxScanSysQueue()</a>, <a class="el" href="../../d4/d5/kernel_2sendmsg_8c-source.html#l00315">xxxSendBSMtoDesktop()</a>, <a class="el" href="../../d3/d7/swp_8c-source.html#l01669">xxxSendChangedMsgs()</a>, <a class="el" href="../../d6/d7/ntimm_8c-source.html#l02461">xxxSendMessageToUI()</a>, <a class="el" href="../../d4/d5/focusact_8c-source.html#l01990">xxxSetActiveWindow()</a>, <a class="el" href="../../d4/d4/w32_2ntuser_2kernel_2capture_8c-source.html#l00023">xxxSetCapture()</a>, <a class="el" href="../../d9/d7/ntuser_2kernel_2clipbrd_8c-source.html#l02572">xxxSetClipboardViewer()</a>, <a class="el" href="../../d4/d5/focusact_8c-source.html#l01815">xxxSetFocus()</a>, <a class="el" href="../../d1/d8/showwin_8c-source.html#l00437">xxxShowOwnedWindows()</a>, <a class="el" href="../../d5/d7/syscmd_8c-source.html#l00193">xxxSysCommand()</a>, <a class="el" href="../../d0/d8/winwhere_8c-source.html#l00128">xxxWindowFromPoint()</a>, <a class="el" href="../../d3/d7/swp_8c-source.html#l02681">zzzBltValidBits()</a>, and <a class="el" href="../../d3/d7/swp_8c-source.html#l01955">zzzChangeStates()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a34" doxytag="usercli.h::RGBX" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define RGBX          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">rgb&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;RGB(GetBValue(rgb), GetGValue(rgb), GetRValue(rgb))</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00307">307</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d5/d8/clres_8c-source.html#l03203">ChangeDibColors()</a>, and <a class="el" href="../../d8/d6/cldib_8c-source.html#l00595">MixRGBI()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a281" doxytag="usercli.h::RPC_NO_WINDOWS_H" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define RPC_NO_WINDOWS_H          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02091">2091</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a15" doxytag="usercli.h::SAMEWOWHANDLE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define SAMEWOWHANDLE          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">h1,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>h2&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;((BOOL)!(((ULONG_PTR)(h1) ^ (ULONG_PTR)(h2)) &amp; 0xffff))</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00160">160</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02531">DefMDIChildProcWorker()</a>, <a class="el" href="../../d3/d8/dlgend_8c-source.html#l00024">EndDialog()</a>, <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l01246">InternalDialogBox()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01657">MDIClientWndProcWorker()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l01494">xxxCBCommandHandler()</a>, <a class="el" href="../../d6/d8/dlgmgr2_8c-source.html#l00084">xxxCheckDefPushButton()</a>, and <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01540">xxxMDIDestroy()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a275" doxytag="usercli.h::SCROLL" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define SCROLL          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">pmdi&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;(pmdi-&gt;wScroll)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02072">2072</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01657">MDIClientWndProcWorker()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00483">RecalculateScrollRanges()</a>, and <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02425">xxxChildResize()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a269" doxytag="usercli.h::SCROLLCOUNT" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define SCROLLCOUNT&nbsp;&nbsp;&nbsp;0x00FF          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02065">2065</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01657">MDIClientWndProcWorker()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00483">RecalculateScrollRanges()</a>, and <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02425">xxxChildResize()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a268" doxytag="usercli.h::SCROLLSUPPRESS" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define SCROLLSUPPRESS&nbsp;&nbsp;&nbsp;0x0003          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02064">2064</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01657">MDIClientWndProcWorker()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a61" doxytag="usercli.h::SDROPDOWN" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define SDROPDOWN&nbsp;&nbsp;&nbsp;(SDROPPABLE | SEDITABLE)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00430">430</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d2/d3/combo_8c-source.html#l00207">ComboBoxWndProcWorker()</a>, <a class="el" href="../../d4/d3/comboini_8c-source.html#l00070">xxxCBCreateHandler()</a>, and <a class="el" href="../../d2/d3/combo_8c-source.html#l01819">xxxCBShowListBoxWindow()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a60" doxytag="usercli.h::SDROPDOWNLIST" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define SDROPDOWNLIST&nbsp;&nbsp;&nbsp;SDROPPABLE          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00429">429</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d2/d3/combo_8c-source.html#l00207">ComboBoxWndProcWorker()</a>, <a class="el" href="../../d4/d3/comboini_8c-source.html#l00070">xxxCBCreateHandler()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l02343">xxxCBGetFocusHelper()</a>, and <a class="el" href="../../d2/d3/combo_8c-source.html#l02402">xxxCBKillFocusHelper()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a57" doxytag="usercli.h::SDROPPABLE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define SDROPPABLE&nbsp;&nbsp;&nbsp;CBS_DROPDOWN          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00424">424</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d2/d3/combo_8c-source.html#l00207">ComboBoxWndProcWorker()</a>, <a class="el" href="../../d4/d3/comboini_8c-source.html#l00253">xxxCBCalcControlRects()</a>, <a class="el" href="../../d4/d3/comboini_8c-source.html#l00070">xxxCBCreateHandler()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l01719">xxxCBHideListBoxWindow()</a>, <a class="el" href="../../d4/d3/comboini_8c-source.html#l00485">xxxCBSetEditItemHeight()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l01819">xxxCBShowListBoxWindow()</a>, and <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02183">xxxLBoxCtlKeyInput()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a58" doxytag="usercli.h::SEDITABLE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define SEDITABLE&nbsp;&nbsp;&nbsp;CBS_SIMPLE          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00425">425</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d2/d3/combo_8c-source.html#l00207">ComboBoxWndProcWorker()</a>, and <a class="el" href="../../d2/d3/combo_8c-source.html#l01719">xxxCBHideListBoxWindow()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a249" doxytag="usercli.h::SELONLY" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define SELONLY&nbsp;&nbsp;&nbsp;0x0002          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01745">1745</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l03131">LBoxGetSelItems()</a>, <a class="el" href="../../d7/d0/lb1_8c-source.html#l00032">ListBoxWndProcWorker()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01028">SetSelected()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l03754">xxxAlterHilite()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01875">xxxLBButtonUp()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02183">xxxLBoxCtlKeyInput()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l03206">xxxLBSelRange()</a>, and <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l03455">xxxLBSetSel()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a31" doxytag="usercli.h::SetBestStretchMode" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define SetBestStretchMode          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">hdc,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>planes,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>bpp&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;SetStretchBltMode(hdc, (((planes) * (bpp)) == 1 ? BLACKONWHITE : COLORONCOLOR))</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00299">299</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d5/d8/clres_8c-source.html#l02950">BitmapFromDIB()</a>, <a class="el" href="../../d1/d8/wmicon_8c-source.html#l00032">BltIcon()</a>, and <a class="el" href="../../d2/d2/dtbitmap_8c-source.html#l00463">ConvertToDDB()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a79" doxytag="usercli.h::SHCTDOWN" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define SHCTDOWN&nbsp;&nbsp;&nbsp;3 /* Shift and <a class="el" href="../../d3/d0/user32_8def.html#a59">control</a> keys down = CTRLDOWN + SHFTDOWN */          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00512">512</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a78" doxytag="usercli.h::SHFTDOWN" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define SHFTDOWN&nbsp;&nbsp;&nbsp;2 /* Shift key <a class="el" href="../../d3/d0/imm32_8def.html#a1">only</a> down */          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00511">511</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/editec_8c-source.html#l00733">ECGetModKeys()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l02028">MLKeyDown()</a>, and <a class="el" href="../../d4/d4/editsl_8c-source.html#l01529">SLKeyDown()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a114" doxytag="usercli.h::SINGLESEL" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define SINGLESEL&nbsp;&nbsp;&nbsp;0          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00793">793</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l00285">GrowMem()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00480">IsSelected()</a>, <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l01220">LBCalcAllocNeeded()</a>, <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00820">LBEvent()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l03131">LBoxGetSelItems()</a>, <a class="el" href="../../d7/d0/lb1_8c-source.html#l00032">ListBoxWndProcWorker()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01028">SetSelected()</a>, <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00062">xxxLBCreate()</a>, <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l00407">xxxLBInsertItem()</a>, <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l00842">xxxLBoxCtlDelete()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02183">xxxLBoxCtlKeyInput()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l03455">xxxLBSetSel()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01181">xxxResetWorld()</a>, and <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01290">xxxTrackMouse()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a133" doxytag="usercli.h::SIZEOFRESOURCE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define SIZEOFRESOURCE          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">hModule,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>hResInfo&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;((*(<a class="el" href="../../d8/d6/ntuser_2client_2globals_8h.html#a51">pfnSizeofResource</a>))(hModule, hResInfo))</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00915">915</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a59" doxytag="usercli.h::SSIMPLE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define SSIMPLE&nbsp;&nbsp;&nbsp;SEDITABLE          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00428">428</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d4/d3/comboini_8c-source.html#l00070">xxxCBCreateHandler()</a>, and <a class="el" href="../../d4/d3/comboini_8c-source.html#l00485">xxxCBSetEditItemHeight()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a157" doxytag="usercli.h::STR_ERROR" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define STR_ERROR&nbsp;&nbsp;&nbsp;0x00000002L          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01145">1145</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d7/d3/msgbox_8c-source.html#l00489">MessageBoxWorker()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a161" doxytag="usercli.h::STR_IMECLOSE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define STR_IMECLOSE&nbsp;&nbsp;&nbsp;701          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01153">1153</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/editec_8c-source.html#l00278">ECSetIMEMenu()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a160" doxytag="usercli.h::STR_IMEOPEN" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define STR_IMEOPEN&nbsp;&nbsp;&nbsp;700          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01152">1152</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/editec_8c-source.html#l00278">ECSetIMEMenu()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a158" doxytag="usercli.h::STR_MOREWINDOWS" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define STR_MOREWINDOWS&nbsp;&nbsp;&nbsp;0x0000000DL          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01146">1146</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00362">AppendToWindowsMenu()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a159" doxytag="usercli.h::STR_NOMEMBITMAP" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define STR_NOMEMBITMAP&nbsp;&nbsp;&nbsp;0x0000000EL          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01147">1147</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a164" doxytag="usercli.h::STR_RECONVERTSTRING" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define STR_RECONVERTSTRING&nbsp;&nbsp;&nbsp;705          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01156">1156</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/editec_8c-source.html#l00278">ECSetIMEMenu()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a163" doxytag="usercli.h::STR_SOFTKBDCLOSE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define STR_SOFTKBDCLOSE&nbsp;&nbsp;&nbsp;703          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01155">1155</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/editec_8c-source.html#l00278">ECSetIMEMenu()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a162" doxytag="usercli.h::STR_SOFTKBDOPEN" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define STR_SOFTKBDOPEN&nbsp;&nbsp;&nbsp;702          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01154">1154</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/editec_8c-source.html#l00278">ECSetIMEMenu()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a151" doxytag="usercli.h::THREAD_HKL" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define THREAD_HKL          </td>
          <td class="md" valign="top">(&nbsp;</td>
&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;(GetClientInfo()-&gt;hKL)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01124">1124</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d6/d3/edecrare_8c-source.html#l00387">ECCreate()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01037">ECEnableDisableIME()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01735">EcImeRequestHandler()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01010">ECIsCharNumeric()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00548">ECMenu()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l00708">ECSetFont()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00278">ECSetIMEMenu()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l00597">ECSize()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02904">EditWndProc()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01683">HanjaKeyHandler()</a>, <a class="el" href="../../d0/d9/imectl_8c-source.html#l00272">ImeWndCreateHandler()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l00292">MLSetCaretPosition()</a>, and <a class="el" href="../../d4/d4/editsl_8c-source.html#l00126">SLSetCaretPosition()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a36" doxytag="usercli.h::ThreadLock" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ThreadLock          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">pobj,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>ptl&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;DBG_UNREFERENCED_LOCAL_VARIABLE(*ptl)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00362">362</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d2/ntuser_2kernel_2access_8c-source.html#l02943">_UserSoundSentryWorker()</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l01338">ButtonWndProcWorker()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l00207">ComboBoxWndProcWorker()</a>, <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l00460">DefDlgProcWorker()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02101">DefFrameProcWorker()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02531">DefMDIChildProcWorker()</a>, <a class="el" href="../../d1/d1/lboxctl3_8c-source.html#l00600">DlgDirListA()</a>, <a class="el" href="../../d3/d3/combodir_8c-source.html#l00130">DlgDirListComboBoxA()</a>, <a class="el" href="../../d3/d3/combodir_8c-source.html#l00172">DlgDirListComboBoxW()</a>, <a class="el" href="../../d1/d1/lboxctl3_8c-source.html#l00645">DlgDirListW()</a>, <a class="el" href="../../d2/d2/tmswitch_8c-source.html#l00538">DrawSwitchWndHilite()</a>, <a class="el" href="../../d9/d7/fullscr_8c-source.html#l00101">FullScreenCleanup()</a>, <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l01246">InternalDialogBox()</a>, <a class="el" href="../../d6/d8/dlgmgr2_8c-source.html#l00230">IsDialogMessageA()</a>, <a class="el" href="../../d6/d8/dlgmgr2_8c-source.html#l00317">IsDialogMessageW()</a>, <a class="el" href="../../d7/d0/lb1_8c-source.html#l00032">ListBoxWndProcWorker()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01657">MDIClientWndProcWorker()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l03988">NtUserDeleteMenu()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04812">NtUserDrawAnimatedRects()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05330">NtUserInvalidateRect()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05481">NtUserOpenClipboard()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05715">NtUserRemoveMenu()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05801">NtUserSetActiveWindow()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05822">NtUserSetCapture()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05865">NtUserSetClipboardViewer()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05902">NtUserSetFocus()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04730">NtUserThunkedMenuInfo()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04663">NtUserThunkedMenuItemInfo()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06457">NtUserValidateRect()</a>, <a class="el" href="../../d4/d5/kernel_2sendmsg_8c-source.html#l02534">ReceiverDied()</a>, <a class="el" href="../../d9/d7/fullscr_8c-source.html#l01634">RemoteRedrawRectangle()</a>, <a class="el" href="../../d2/d4/srvmsg_8c-source.html#l00203">SfnOUTCBOXSTRING()</a>, <a class="el" href="../../d2/d4/srvmsg_8c-source.html#l00095">SfnOUTLBOXSTRING()</a>, <a class="el" href="../../d9/d2/ntuser_2kernel_2access_8c-source.html#l02898">SoundSentryTimer()</a>, <a class="el" href="../../d6/d4/statctl_8c-source.html#l00812">StaticNotifyParent()</a>, <a class="el" href="../../d5/d1/timers_8c-source.html#l00746">TimersProc()</a>, <a class="el" href="../../d9/d6/winloop2_8c-source.html#l00151">xxxAddFullScreen()</a>, <a class="el" href="../../d9/d7/fullscr_8c-source.html#l01545">xxxbFullscreenSwitch()</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l00310">xxxBNOwnerDraw()</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l01206">xxxBNPaint()</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l00654">xxxBNReleaseCapture()</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l00625">xxxButtonNotifyParent()</a>, <a class="el" href="../../d3/d7/swp_8c-source.html#l00821">xxxCalcValidRects()</a>, <a class="el" href="../../d4/d3/comboini_8c-source.html#l00253">xxxCBCalcControlRects()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l01624">xxxCBCompleteEditWindow()</a>, <a class="el" href="../../d3/d3/combodir_8c-source.html#l00028">xxxCBDir()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l02343">xxxCBGetFocusHelper()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l02496">xxxCBGetTextHelper()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l02460">xxxCBGetTextLengthHelper()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l01719">xxxCBHideListBoxWindow()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l02028">xxxCBInternalUpdateEditWindow()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l02402">xxxCBKillFocusHelper()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l01393">xxxCBMessageItemHandler()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l01589">xxxCBNotifyParent()</a>, <a class="el" href="../../d4/d3/comboini_8c-source.html#l00589">xxxCBPosition()</a>, <a class="el" href="../../d4/d3/comboini_8c-source.html#l00617">xxxCBSetDroppedSize()</a>, <a class="el" href="../../d4/d3/comboini_8c-source.html#l00485">xxxCBSetEditItemHeight()</a>, <a class="el" href="../../d4/d3/comboini_8c-source.html#l00443">xxxCBSetFontHandler()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l01819">xxxCBShowListBoxWindow()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l02255">xxxCBUpdateListBoxWindow()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02425">xxxChildResize()</a>, <a class="el" href="../../d6/d7/ntimm_8c-source.html#l00531">xxxCreateDefaultImeWindow()</a>, <a class="el" href="../../d0/d6/desktop_8c-source.html#l01797">xxxCreateDesktop()</a>, <a class="el" href="../../d5/d7/createw_8c-source.html#l00033">xxxCreateWindowEx()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00768">xxxDDETrackWindowDying()</a>, <a class="el" href="../../d7/d2/queue_8c-source.html#l02552">xxxDestroyThreadInfo()</a>, <a class="el" href="../../d6/d2/ntuser_2kernel_2input_8c-source.html#l00762">xxxDispatchMessage()</a>, <a class="el" href="../../d4/d1/hotkeys_8c-source.html#l00434">xxxDoHotKeyStuff()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01549">xxxDoScroll()</a>, <a class="el" href="../../d9/d2/movesize_8c-source.html#l01562">xxxDrawDragRect()</a>, <a class="el" href="../../d7/d1/mndraw_8c-source.html#l01972">xxxDrawMenuBarTemp()</a>, <a class="el" href="../../d7/d1/mndraw_8c-source.html#l02082">xxxDrawMenuBarUnderlines()</a>, <a class="el" href="../../d5/d7/createw_8c-source.html#l02053">xxxDW_SendDestroyMessages()</a>, <a class="el" href="../../d6/d2/mnsys_8c-source.html#l00494">xxxEnableMenuItem()</a>, <a class="el" href="../../d2/d2/mnloop_8c-source.html#l00584">xxxEndMenuLoop()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02802">xxxFindString()</a>, <a class="el" href="../../d9/d3/w32_2ntuser_2kernel_2random_8c-source.html#l00241">xxxGetControlBrush()</a>, <a class="el" href="../../d6/d9/dmmnem_8c-source.html#l00115">xxxGNM_FindNextMnem()</a>, <a class="el" href="../../d6/d9/dmmnem_8c-source.html#l00219">xxxGotoNextMnem()</a>, <a class="el" href="../../d2/d2/mnloop_8c-source.html#l00043">xxxHandleMenuMessages()</a>, <a class="el" href="../../d5/d7/syscmd_8c-source.html#l00023">xxxHandleNCMouseGuys()</a>, <a class="el" href="../../d3/d9/kernel_2help_8c-source.html#l00073">xxxHelpLoop()</a>, <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00733">xxxHotTrackMenu()</a>, <a class="el" href="../../d6/d1/hungapp_8c-source.html#l00446">xxxHungAppDemon()</a>, <a class="el" href="../../d4/d1/mnchange_8c-source.html#l00323">xxxInsertMenuItem()</a>, <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l00722">xxxLBBinarySearchString()</a>, <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00062">xxxLBCreate()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00060">xxxLBGetBrush()</a>, <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l00407">xxxLBInsertItem()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02948">xxxLBoxCtlCharInput()</a>, <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l00842">xxxLBoxCtlDelete()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02183">xxxLBoxCtlKeyInput()</a>, <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l01053">xxxLBoxDeleteItem()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l03558">xxxLBoxDrawItem()</a>, <a class="el" href="../../d9/d7/fullscr_8c-source.html#l00166">xxxMakeWindowForegroundWithState()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01237">xxxMDIActivate()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01540">xxxMDIDestroy()</a>, <a class="el" href="../../d7/d1/mndraw_8c-source.html#l01373">xxxMenuBarDraw()</a>, <a class="el" href="../../d3/d6/ntuser_2kernel_2menu_8c-source.html#l04022">xxxMenuWindowProc()</a>, <a class="el" href="../../d3/d6/ntuser_2kernel_2menu_8c-source.html#l03395">xxxMNCancel()</a>, <a class="el" href="../../d3/d6/ntuser_2kernel_2menu_8c-source.html#l01011">xxxMNChar()</a>, <a class="el" href="../../d3/d6/ntuser_2kernel_2menu_8c-source.html#l02697">xxxMNDoubleClick()</a>, <a class="el" href="../../d7/d1/mndraw_8c-source.html#l01697">xxxMNInvertItem()</a>, <a class="el" href="../../d3/d6/ntuser_2kernel_2menu_8c-source.html#l01251">xxxMNKeyDown()</a>, <a class="el" href="../../d2/d2/mnloop_8c-source.html#l00635">xxxMNLoop()</a>, <a class="el" href="../../d3/d6/ntuser_2kernel_2menu_8c-source.html#l03618">xxxMNMouseMove()</a>, <a class="el" href="../../d3/d6/ntuser_2kernel_2menu_8c-source.html#l01934">xxxMNOpenHierarchy()</a>, <a class="el" href="../../d3/d6/ntuser_2kernel_2menu_8c-source.html#l02818">xxxMNSelectItem()</a>, <a class="el" href="../../d5/d2/mnstate_8c-source.html#l00677">xxxMNStartMenu()</a>, <a class="el" href="../../d3/d6/ntuser_2kernel_2menu_8c-source.html#l00795">xxxMNSwitchToAlternateMenu()</a>, <a class="el" href="../../d9/d6/menudd_8c-source.html#l00279">xxxMNUpdateDraggingInfo()</a>, <a class="el" href="../../d4/d1/mnchange_8c-source.html#l01106">xxxMNUpdateShownMenu()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01244">xxxNotifyOwner()</a>, <a class="el" href="../../d2/d2/tmswitch_8c-source.html#l00808">xxxPaintIconsInSwitchWindow()</a>, <a class="el" href="../../d7/d0/dragdrop_8c-source.html#l00243">xxxQueryDropObject()</a>, <a class="el" href="../../d7/d1/mndraw_8c-source.html#l00954">xxxRealDrawMenuItem()</a>, <a class="el" href="../../d1/d2/palette_8c-source.html#l00146">xxxRealizePalette()</a>, <a class="el" href="../../d4/d5/kernel_2sendmsg_8c-source.html#l01964">xxxReceiveMessage()</a>, <a class="el" href="../../d6/d1/hungapp_8c-source.html#l00135">xxxRedrawHungWindow()</a>, <a class="el" href="../../d9/d8/update_8c-source.html#l00299">xxxRedrawWindow()</a>, <a class="el" href="../../d6/d8/dlgmgr2_8c-source.html#l00031">xxxRemoveDefaultButton()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l02582">xxxSBWndProc()</a>, <a class="el" href="../../d5/d4/rare_8c-source.html#l03675">xxxSendMinRectMessages()</a>, <a class="el" href="../../d7/d6/classchg_8c-source.html#l00056">xxxSetClassIcon()</a>, <a class="el" href="../../d7/d2/queue_8c-source.html#l06419">xxxSetConsoleCaretInfo()</a>, <a class="el" href="../../d4/d1/mnchange_8c-source.html#l00204">xxxSetMenuInfo()</a>, <a class="el" href="../../d0/d7/kernel_2winmgr_8c-source.html#l00311">xxxSetParent()</a>, <a class="el" href="../../d1/d4/ntuser_2kernel_2getset_8c-source.html#l00568">xxxSetWindowData()</a>, <a class="el" href="../../d2/d2/tmswitch_8c-source.html#l00253">xxxSwitchToThisWindow()</a>, <a class="el" href="../../d5/d7/syscmd_8c-source.html#l00193">xxxSysCommand()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01290">xxxTrackMouse()</a>, <a class="el" href="../../d3/d2/mnpopup_8c-source.html#l00052">xxxTrackPopupMenuEx()</a>, <a class="el" href="../../d2/d1/mnaccel_8c-source.html#l00251">xxxTranslateAccelerator()</a>, <a class="el" href="../../d4/d5/focusact_8c-source.html#l00374">xxxUpdateTray()</a>, <a class="el" href="../../d0/d6/desktop_8c-source.html#l03136">xxxUserResetDisplayDevice()</a>, <a class="el" href="../../d0/d8/winwhere_8c-source.html#l00128">xxxWindowFromPoint()</a>, and <a class="el" href="../../d0/d8/winwhere_8c-source.html#l00315">xxxWindowHitTest2()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a37" doxytag="usercli.h::ThreadLockAlways" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ThreadLockAlways          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">pobj,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>ptl&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;DBG_UNREFERENCED_LOCAL_VARIABLE(*ptl)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00363">363</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l00460">DefDlgProcWorker()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02531">DefMDIChildProcWorker()</a>, <a class="el" href="../../d2/d2/tmswitch_8c-source.html#l00674">DrawIconCallBack()</a>, <a class="el" href="../../d6/d8/dlgmgr2_8c-source.html#l00317">IsDialogMessageW()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01657">MDIClientWndProcWorker()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04154">NtUserEnableMenuItem()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l01865">NtUserEndDeferWindowPosEx()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05648">NtUserSendMessageCallback()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05599">NtUserSendNotifyMessage()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l02001">PopState()</a>, <a class="el" href="../../d9/d7/fullscr_8c-source.html#l00985">ResetSharedDesktops()</a>, <a class="el" href="../../d0/d2/paint_8c-source.html#l01321">UserRedrawDesktop()</a>, <a class="el" href="../../d6/d2/ntuser_2kernel_2input_8c-source.html#l02327">xxxActiveWindowTracking()</a>, <a class="el" href="../../d8/d8/icons_8c-source.html#l00031">xxxArrangeIconicWindows()</a>, <a class="el" href="../../d1/d2/palette_8c-source.html#l00243">xxxBroadcastPaletteChanged()</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l00995">xxxButtonDrawCheck()</a>, <a class="el" href="../../d7/d7/ntinput_8c-source.html#l00472">xxxButtonEvent()</a>, <a class="el" href="../../d0/d2/calcclrc_8c-source.html#l00021">xxxCalcClientRect()</a>, <a class="el" href="../../d3/d7/swp_8c-source.html#l00821">xxxCalcValidRects()</a>, <a class="el" href="../../d2/d3/tooltips_8c-source.html#l01125">xxxCancelMouseMoveTracking()</a>, <a class="el" href="../../d4/d4/w32_2ntuser_2kernel_2capture_8c-source.html#l00124">xxxCapture()</a>, <a class="el" href="../../d9/d7/ntuser_2kernel_2clipbrd_8c-source.html#l02618">xxxChangeClipboardChain()</a>, <a class="el" href="../../d6/d8/dlgmgr2_8c-source.html#l00084">xxxCheckDefPushButton()</a>, <a class="el" href="../../d3/d7/swp_8c-source.html#l05305">xxxCheckFullScreen()</a>, <a class="el" href="../../d6/d7/ntimm_8c-source.html#l02375">xxxCheckImeShowStatus()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02425">xxxChildResize()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00548">xxxCleanupDdeConv()</a>, <a class="el" href="../../d3/d6/ntuser_2kernel_2menu_8c-source.html#l01908">xxxCleanupDesktopMenu()</a>, <a class="el" href="../../d2/d9/kernel_2exitwin_8c-source.html#l00428">xxxClientShutdown2()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00618">xxxDDETrackGetMessageHook()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00320">xxxDDETrackPostHook()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00768">xxxDDETrackWindowDying()</a>, <a class="el" href="../../d9/d2/dwp_8c-source.html#l01264">xxxDefWindowProc()</a>, <a class="el" href="../../d0/d6/desktop_8c-source.html#l00114">xxxDesktopThread()</a>, <a class="el" href="../../d0/d6/desktop_8c-source.html#l00883">xxxDesktopWndProc()</a>, <a class="el" href="../../d1/d1/lboxctl3_8c-source.html#l00190">xxxDlgDirListHelper()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l02489">xxxDoScrollMenu()</a>, <a class="el" href="../../d9/d7/ntuser_2kernel_2clipbrd_8c-source.html#l00220">xxxDrawClipboard()</a>, <a class="el" href="../../d5/d7/createw_8c-source.html#l02053">xxxDW_SendDestroyMessages()</a>, <a class="el" href="../../d9/d2/dwp_8c-source.html#l00402">xxxDWP_SetCursor()</a>, <a class="el" href="../../d9/d2/dwp_8c-source.html#l00846">xxxDWPPrint()</a>, <a class="el" href="../../d2/d2/mnloop_8c-source.html#l00584">xxxEndMenuLoop()</a>, <a class="el" href="../../d2/d2/dtbitmap_8c-source.html#l00880">xxxExpandBitmap()</a>, <a class="el" href="../../d6/d7/ntimm_8c-source.html#l00405">xxxFocusSetInputContext()</a>, <a class="el" href="../../d5/d7/createw_8c-source.html#l02218">xxxFreeWindow()</a>, <a class="el" href="../../d9/d7/ntuser_2kernel_2clipbrd_8c-source.html#l02303">xxxGetRenderData()</a>, <a class="el" href="../../d2/d2/mnloop_8c-source.html#l00043">xxxHandleMenuMessages()</a>, <a class="el" href="../../d3/d9/kernel_2help_8c-source.html#l00073">xxxHelpLoop()</a>, <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00611">xxxInitActivateDlg()</a>, <a class="el" href="../../d5/d6/enumwin_8c-source.html#l00040">xxxInternalEnumWindow()</a>, <a class="el" href="../../d2/d2/dtbitmap_8c-source.html#l01557">xxxInvalidateDesktopOnPaletteChange()</a>, <a class="el" href="../../d7/d7/ntinput_8c-source.html#l01338">xxxKeyEvent()</a>, <a class="el" href="../../d6/d6/ntuser_2rtl_2menu_8c-source.html#l00117">xxxLoadSysMenu()</a>, <a class="el" href="../../d3/d6/ntuser_2kernel_2menu_8c-source.html#l04022">xxxMenuWindowProc()</a>, <a class="el" href="../../d3/d6/ntuser_2kernel_2menu_8c-source.html#l02517">xxxMNCloseHierarchy()</a>, <a class="el" href="../../d3/d6/ntuser_2kernel_2menu_8c-source.html#l00880">xxxMNDestroyHandler()</a>, <a class="el" href="../../d9/d6/menudd_8c-source.html#l00156">xxxMNDragOver()</a>, <a class="el" href="../../d3/d6/ntuser_2kernel_2menu_8c-source.html#l03180">xxxMNFindWindowFromPoint()</a>, <a class="el" href="../../d3/d6/ntuser_2kernel_2menu_8c-source.html#l02492">xxxMNHideNextHierarchy()</a>, <a class="el" href="../../d2/d2/mnloop_8c-source.html#l00635">xxxMNLoop()</a>, <a class="el" href="../../d3/d6/ntuser_2kernel_2menu_8c-source.html#l01934">xxxMNOpenHierarchy()</a>, <a class="el" href="../../d9/d6/menudd_8c-source.html#l00063">xxxMNSetGapState()</a>, <a class="el" href="../../d5/d2/mnstate_8c-source.html#l00540">xxxMNStartMenuState()</a>, <a class="el" href="../../d6/d6/kernel_2winable_8c-source.html#l00068">xxxProcessNotifyWinEvent()</a>, <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00453">xxxResetTooltip()</a>, <a class="el" href="../../d3/d7/swp_8c-source.html#l01669">xxxSendChangedMsgs()</a>, <a class="el" href="../../d9/d7/ntuser_2kernel_2clipbrd_8c-source.html#l00783">xxxSendClipboardMessage()</a>, <a class="el" href="../../d7/d1/mndraw_8c-source.html#l00617">xxxSendMenuDrawItemMessage()</a>, <a class="el" href="../../d6/d7/ntimm_8c-source.html#l02461">xxxSendMessageToUI()</a>, <a class="el" href="../../d6/d7/ntimm_8c-source.html#l02518">xxxSendOpenStatusNotify()</a>, <a class="el" href="../../d2/d2/dtbitmap_8c-source.html#l01079">xxxSetDeskWallpaper()</a>, <a class="el" href="../../d4/d5/focusact_8c-source.html#l01235">xxxSetForegroundWindow()</a>, <a class="el" href="../../d6/d7/ntimm_8c-source.html#l02606">xxxSetIMEShowStatus()</a>, <a class="el" href="../../d6/d2/mnsys_8c-source.html#l00232">xxxSetSysMenu()</a>, <a class="el" href="../../d1/d8/showwin_8c-source.html#l00437">xxxShowOwnedWindows()</a>, <a class="el" href="../../d5/d7/syscmd_8c-source.html#l00193">xxxSysCommand()</a>, <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00526">xxxTooltipHandleTimer()</a>, <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00904">xxxTrackMouseMove()</a>, <a class="el" href="../../d3/d2/mnpopup_8c-source.html#l00052">xxxTrackPopupMenuEx()</a>, <a class="el" href="../../d8/d1/power_8c-source.html#l00481">xxxUserPowerStateCalloutWorker()</a>, <a class="el" href="../../d8/d0/ntuser_2kernel_2cursor_8c-source.html#l00389">zzzAnimateCursor()</a>, and <a class="el" href="../../d3/d7/swp_8c-source.html#l01955">zzzChangeStates()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a39" doxytag="usercli.h::ThreadLockAlwaysWithPti" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ThreadLockAlwaysWithPti          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">pti,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>pobj,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>ptl&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;DBG_UNREFERENCED_LOCAL_VARIABLE(*ptl)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00365">365</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d6/d2/ntuser_2kernel_2input_8c-source.html#l00981">_PostMessage()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l10107">MESSAGECALL()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l08087">NtUserCreateWindowEx()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l09444">NtUserDrawMenuBarTemp()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l13325">NtUserFlashWindowEx()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04974">NtUserGetControlColor()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l07381">NtUserGetMenuItemRect()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05294">NtUserHiliteMenuItem()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l07426">NtUserMenuItemFromPoint()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l02307">NtUserSetShellWindowEx()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l08507">NtUserSetSystemMenu()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06339">NtUserTrackPopupMenuEx()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l01991">NtUserTranslateAccelerator()</a>, <a class="el" href="../../d7/d1/kbdlyout_8c-source.html#l00916">xxxActivateKeyboardLayout()</a>, <a class="el" href="../../d5/d8/minmax_8c-source.html#l01218">xxxActivateOnMinimize()</a>, <a class="el" href="../../d4/d5/focusact_8c-source.html#l02060">xxxActivateWindow()</a>, <a class="el" href="../../d2/d1/hooks_8c-source.html#l01288">xxxCallHook2()</a>, <a class="el" href="../../d9/d2/movesize_8c-source.html#l01891">xxxCancelTracking()</a>, <a class="el" href="../../d5/d7/createw_8c-source.html#l00033">xxxCreateWindowEx()</a>, <a class="el" href="../../d2/d7/w32_2ntuser_2kernel_2event_8c-source.html#l00120">xxxCsEvent()</a>, <a class="el" href="../../d4/d5/focusact_8c-source.html#l00034">xxxDeactivate()</a>, <a class="el" href="../../d9/d2/dwp_8c-source.html#l01264">xxxDefWindowProc()</a>, <a class="el" href="../../d0/d6/desktop_8c-source.html#l00114">xxxDesktopThread()</a>, <a class="el" href="../../d0/d6/desktop_8c-source.html#l00883">xxxDesktopWndProc()</a>, <a class="el" href="../../d5/d7/createw_8c-source.html#l01591">xxxDestroyWindow()</a>, <a class="el" href="../../d7/d0/dragdrop_8c-source.html#l00026">xxxDragObject()</a>, <a class="el" href="../../d9/d2/dwp_8c-source.html#l00228">xxxDWP_ProcessVirtKey()</a>, <a class="el" href="../../d3/d7/swp_8c-source.html#l04773">xxxEndDeferWindowPosEx()</a>, <a class="el" href="../../d2/d4/multimon_8c-source.html#l00099">xxxEnumDisplayMonitors()</a>, <a class="el" href="../../d5/d7/createw_8c-source.html#l02218">xxxFreeWindow()</a>, <a class="el" href="../../d5/d7/createw_8c-source.html#l02126">xxxFW_DestroyAllChildren()</a>, <a class="el" href="../../d6/d7/ntimm_8c-source.html#l00921">xxxImmActivateLayout()</a>, <a class="el" href="../../d6/d7/ntimm_8c-source.html#l01070">xxxImmUnloadLayout()</a>, <a class="el" href="../../d5/d8/minmax_8c-source.html#l00032">xxxInitSendValidateMinMaxInfo()</a>, <a class="el" href="../../d7/d1/kbdlyout_8c-source.html#l01203">xxxInternalActivateKeyboardLayout()</a>, <a class="el" href="../../d0/d2/paint_8c-source.html#l00885">xxxInternalDoSyncPaint()</a>, <a class="el" href="../../d6/d2/ntuser_2kernel_2input_8c-source.html#l00213">xxxInternalGetMessage()</a>, <a class="el" href="../../d7/d1/kbdlyout_8c-source.html#l01571">xxxInternalUnloadKeyboardLayout()</a>, <a class="el" href="../../d7/d1/kbdlyout_8c-source.html#l00654">xxxLoadKeyboardLayoutEx()</a>, <a class="el" href="../../d3/d6/ntuser_2kernel_2menu_8c-source.html#l04022">xxxMenuWindowProc()</a>, <a class="el" href="../../d5/d4/rare_8c-source.html#l00362">xxxMetricsRecalc()</a>, <a class="el" href="../../d5/d8/minmax_8c-source.html#l01329">xxxMinMaximize()</a>, <a class="el" href="../../d6/d2/ntuser_2kernel_2input_8c-source.html#l02444">xxxMouseActivate()</a>, <a class="el" href="../../d9/d2/movesize_8c-source.html#l01053">xxxMoveSize()</a>, <a class="el" href="../../d2/d2/tmswitch_8c-source.html#l01675">xxxNextWindow()</a>, <a class="el" href="../../d2/d2/tmswitch_8c-source.html#l02121">xxxOldNextWindow()</a>, <a class="el" href="../../d7/d2/queue_8c-source.html#l03772">xxxProcessEventMessage()</a>, <a class="el" href="../../d6/d2/ntuser_2kernel_2input_8c-source.html#l03305">xxxScanSysQueue()</a>, <a class="el" href="../../d4/d5/kernel_2sendmsg_8c-source.html#l00315">xxxSendBSMtoDesktop()</a>, <a class="el" href="../../d4/d5/focusact_8c-source.html#l01342">xxxSetForegroundWindow2()</a>, <a class="el" href="../../d0/d6/desktop_8c-source.html#l03358">xxxSwitchDesktop()</a>, <a class="el" href="../../d9/d2/dc_8c-source.html#l01812">zzzInvalidateDCCache()</a>, and <a class="el" href="../../d2/d1/hooks_8c-source.html#l00576">zzzSetWindowsHookEx()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a38" doxytag="usercli.h::ThreadLockWithPti" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ThreadLockWithPti          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">pti,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>pobj,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>ptl&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;DBG_UNREFERENCED_LOCAL_VARIABLE(*ptl)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00364">364</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d4/d5/kernel_2sendmsg_8c-source.html#l00198">_ReplyMessage()</a>, <a class="el" href="../../d6/d2/ntuser_2kernel_2input_8c-source.html#l05671">CancelInputState()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l03864">NtUserChangeClipboardChain()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l08087">NtUserCreateWindowEx()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l01552">NtUserDragObject()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l09490">NtUserDrawCaptionTemp()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l02986">NtUserFillWindow()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04883">NtUserPaintDesktop()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05923">NtUserSetMenu()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05955">NtUserSetParent()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l02180">NtUserSetWindowPos()</a>, <a class="el" href="../../d4/d5/focusact_8c-source.html#l00472">xxxActivateThisWindow()</a>, <a class="el" href="../../d2/d1/hooks_8c-source.html#l01288">xxxCallHook2()</a>, <a class="el" href="../../d2/d1/hooks_8c-source.html#l01797">xxxCallJournalPlaybackHook()</a>, <a class="el" href="../../d4/d5/focusact_8c-source.html#l02549">xxxCheckFocus()</a>, <a class="el" href="../../d0/d6/desktop_8c-source.html#l01797">xxxCreateDesktop()</a>, <a class="el" href="../../d5/d7/createw_8c-source.html#l00033">xxxCreateWindowEx()</a>, <a class="el" href="../../d4/d5/focusact_8c-source.html#l00034">xxxDeactivate()</a>, <a class="el" href="../../d9/d2/dwp_8c-source.html#l01264">xxxDefWindowProc()</a>, <a class="el" href="../../d0/d6/desktop_8c-source.html#l00883">xxxDesktopWndProc()</a>, <a class="el" href="../../d5/d7/createw_8c-source.html#l01591">xxxDestroyWindow()</a>, <a class="el" href="../../d7/d0/dragdrop_8c-source.html#l00026">xxxDragObject()</a>, <a class="el" href="../../d3/d7/swp_8c-source.html#l04773">xxxEndDeferWindowPosEx()</a>, <a class="el" href="../../d5/d8/minmax_8c-source.html#l00032">xxxInitSendValidateMinMaxInfo()</a>, <a class="el" href="../../d7/d1/kbdlyout_8c-source.html#l01203">xxxInternalActivateKeyboardLayout()</a>, <a class="el" href="../../d7/d0/dragdrop_8c-source.html#l00354">xxxIsDragging()</a>, <a class="el" href="../../d5/d8/minmax_8c-source.html#l01329">xxxMinMaximize()</a>, <a class="el" href="../../d6/d2/ntuser_2kernel_2input_8c-source.html#l02444">xxxMouseActivate()</a>, <a class="el" href="../../d2/d2/tmswitch_8c-source.html#l01675">xxxNextWindow()</a>, <a class="el" href="../../d2/d2/tmswitch_8c-source.html#l02121">xxxOldNextWindow()</a>, <a class="el" href="../../d6/d2/ntuser_2kernel_2input_8c-source.html#l03305">xxxScanSysQueue()</a>, <a class="el" href="../../d4/d5/focusact_8c-source.html#l00220">xxxSendFocusMessages()</a>, <a class="el" href="../../d4/d5/focusact_8c-source.html#l01815">xxxSetFocus()</a>, <a class="el" href="../../d6/d8/snapshot_8c-source.html#l00023">xxxSnapWindow()</a>, <a class="el" href="../../d0/d6/desktop_8c-source.html#l03358">xxxSwitchDesktop()</a>, <a class="el" href="../../d2/d2/tmswitch_8c-source.html#l01564">xxxSwitchWndProc()</a>, <a class="el" href="../../d6/d6/kernel_2winable_8c-source.html#l00274">xxxWindowEvent()</a>, <a class="el" href="../../d5/d4/caret_8c-source.html#l00189">zzzInternalDestroyCaret()</a>, and <a class="el" href="../../d8/d0/ntuser_2kernel_2cursor_8c-source.html#l00028">zzzSetCursor()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a40" doxytag="usercli.h::ThreadUnlock" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ThreadUnlock          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">ptl&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;(ptl)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00366">366</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d6/d2/ntuser_2kernel_2input_8c-source.html#l00981">_PostMessage()</a>, <a class="el" href="../../d4/d5/kernel_2sendmsg_8c-source.html#l00198">_ReplyMessage()</a>, <a class="el" href="../../d9/d2/ntuser_2kernel_2access_8c-source.html#l02943">_UserSoundSentryWorker()</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l01338">ButtonWndProcWorker()</a>, <a class="el" href="../../d6/d2/ntuser_2kernel_2input_8c-source.html#l05671">CancelInputState()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l00207">ComboBoxWndProcWorker()</a>, <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l00460">DefDlgProcWorker()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02101">DefFrameProcWorker()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02531">DefMDIChildProcWorker()</a>, <a class="el" href="../../d5/d7/handtabl_8c-source.html#l02284">DestroyThreadsObjects()</a>, <a class="el" href="../../d1/d1/lboxctl3_8c-source.html#l00600">DlgDirListA()</a>, <a class="el" href="../../d3/d3/combodir_8c-source.html#l00130">DlgDirListComboBoxA()</a>, <a class="el" href="../../d3/d3/combodir_8c-source.html#l00172">DlgDirListComboBoxW()</a>, <a class="el" href="../../d1/d1/lboxctl3_8c-source.html#l00645">DlgDirListW()</a>, <a class="el" href="../../d2/d2/tmswitch_8c-source.html#l00674">DrawIconCallBack()</a>, <a class="el" href="../../d2/d2/tmswitch_8c-source.html#l00538">DrawSwitchWndHilite()</a>, <a class="el" href="../../d9/d7/fullscr_8c-source.html#l00101">FullScreenCleanup()</a>, <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l01246">InternalDialogBox()</a>, <a class="el" href="../../d6/d8/dlgmgr2_8c-source.html#l00230">IsDialogMessageA()</a>, <a class="el" href="../../d6/d8/dlgmgr2_8c-source.html#l00317">IsDialogMessageW()</a>, <a class="el" href="../../d7/d0/lb1_8c-source.html#l00032">ListBoxWndProcWorker()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01657">MDIClientWndProcWorker()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l10107">MESSAGECALL()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l03864">NtUserChangeClipboardChain()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l08087">NtUserCreateWindowEx()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l03988">NtUserDeleteMenu()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l01552">NtUserDragObject()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04812">NtUserDrawAnimatedRects()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l09490">NtUserDrawCaptionTemp()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l09444">NtUserDrawMenuBarTemp()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04154">NtUserEnableMenuItem()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l01865">NtUserEndDeferWindowPosEx()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l02986">NtUserFillWindow()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l13325">NtUserFlashWindowEx()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04974">NtUserGetControlColor()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l07381">NtUserGetMenuItemRect()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05294">NtUserHiliteMenuItem()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05330">NtUserInvalidateRect()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l07426">NtUserMenuItemFromPoint()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05481">NtUserOpenClipboard()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04883">NtUserPaintDesktop()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05715">NtUserRemoveMenu()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05648">NtUserSendMessageCallback()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05599">NtUserSendNotifyMessage()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05801">NtUserSetActiveWindow()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05822">NtUserSetCapture()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05865">NtUserSetClipboardViewer()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05902">NtUserSetFocus()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05923">NtUserSetMenu()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05955">NtUserSetParent()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l02307">NtUserSetShellWindowEx()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l08507">NtUserSetSystemMenu()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l02180">NtUserSetWindowPos()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04730">NtUserThunkedMenuInfo()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04663">NtUserThunkedMenuItemInfo()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06339">NtUserTrackPopupMenuEx()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l01991">NtUserTranslateAccelerator()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06457">NtUserValidateRect()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l02001">PopState()</a>, <a class="el" href="../../d4/d5/kernel_2sendmsg_8c-source.html#l02534">ReceiverDied()</a>, <a class="el" href="../../d9/d7/fullscr_8c-source.html#l01634">RemoteRedrawRectangle()</a>, <a class="el" href="../../d9/d7/fullscr_8c-source.html#l00985">ResetSharedDesktops()</a>, <a class="el" href="../../d2/d4/srvmsg_8c-source.html#l00203">SfnOUTCBOXSTRING()</a>, <a class="el" href="../../d2/d4/srvmsg_8c-source.html#l00095">SfnOUTLBOXSTRING()</a>, <a class="el" href="../../d9/d2/ntuser_2kernel_2access_8c-source.html#l02898">SoundSentryTimer()</a>, <a class="el" href="../../d6/d4/statctl_8c-source.html#l00812">StaticNotifyParent()</a>, <a class="el" href="../../d5/d1/timers_8c-source.html#l00746">TimersProc()</a>, <a class="el" href="../../d0/d2/paint_8c-source.html#l01321">UserRedrawDesktop()</a>, <a class="el" href="../../d7/d1/kbdlyout_8c-source.html#l00916">xxxActivateKeyboardLayout()</a>, <a class="el" href="../../d5/d8/minmax_8c-source.html#l01218">xxxActivateOnMinimize()</a>, <a class="el" href="../../d4/d5/focusact_8c-source.html#l00472">xxxActivateThisWindow()</a>, <a class="el" href="../../d4/d5/focusact_8c-source.html#l02060">xxxActivateWindow()</a>, <a class="el" href="../../d6/d2/ntuser_2kernel_2input_8c-source.html#l02327">xxxActiveWindowTracking()</a>, <a class="el" href="../../d9/d6/winloop2_8c-source.html#l00151">xxxAddFullScreen()</a>, <a class="el" href="../../d8/d8/icons_8c-source.html#l00031">xxxArrangeIconicWindows()</a>, <a class="el" href="../../d9/d7/fullscr_8c-source.html#l01545">xxxbFullscreenSwitch()</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l00310">xxxBNOwnerDraw()</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l01206">xxxBNPaint()</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l00654">xxxBNReleaseCapture()</a>, <a class="el" href="../../d1/d2/palette_8c-source.html#l00243">xxxBroadcastPaletteChanged()</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l00995">xxxButtonDrawCheck()</a>, <a class="el" href="../../d7/d7/ntinput_8c-source.html#l00472">xxxButtonEvent()</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l00625">xxxButtonNotifyParent()</a>, <a class="el" href="../../d0/d2/calcclrc_8c-source.html#l00021">xxxCalcClientRect()</a>, <a class="el" href="../../d3/d7/swp_8c-source.html#l00821">xxxCalcValidRects()</a>, <a class="el" href="../../d2/d1/hooks_8c-source.html#l01288">xxxCallHook2()</a>, <a class="el" href="../../d2/d1/hooks_8c-source.html#l01797">xxxCallJournalPlaybackHook()</a>, <a class="el" href="../../d2/d3/tooltips_8c-source.html#l01125">xxxCancelMouseMoveTracking()</a>, <a class="el" href="../../d9/d2/movesize_8c-source.html#l01891">xxxCancelTracking()</a>, <a class="el" href="../../d4/d4/w32_2ntuser_2kernel_2capture_8c-source.html#l00124">xxxCapture()</a>, <a class="el" href="../../d4/d3/comboini_8c-source.html#l00253">xxxCBCalcControlRects()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l01624">xxxCBCompleteEditWindow()</a>, <a class="el" href="../../d3/d3/combodir_8c-source.html#l00028">xxxCBDir()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l02343">xxxCBGetFocusHelper()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l02496">xxxCBGetTextHelper()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l02460">xxxCBGetTextLengthHelper()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l01719">xxxCBHideListBoxWindow()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l02028">xxxCBInternalUpdateEditWindow()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l02402">xxxCBKillFocusHelper()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l01393">xxxCBMessageItemHandler()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l01589">xxxCBNotifyParent()</a>, <a class="el" href="../../d4/d3/comboini_8c-source.html#l00589">xxxCBPosition()</a>, <a class="el" href="../../d4/d3/comboini_8c-source.html#l00617">xxxCBSetDroppedSize()</a>, <a class="el" href="../../d4/d3/comboini_8c-source.html#l00485">xxxCBSetEditItemHeight()</a>, <a class="el" href="../../d4/d3/comboini_8c-source.html#l00443">xxxCBSetFontHandler()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l01819">xxxCBShowListBoxWindow()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l02255">xxxCBUpdateListBoxWindow()</a>, <a class="el" href="../../d9/d7/ntuser_2kernel_2clipbrd_8c-source.html#l02618">xxxChangeClipboardChain()</a>, <a class="el" href="../../d6/d8/dlgmgr2_8c-source.html#l00084">xxxCheckDefPushButton()</a>, <a class="el" href="../../d4/d5/focusact_8c-source.html#l02549">xxxCheckFocus()</a>, <a class="el" href="../../d3/d7/swp_8c-source.html#l05305">xxxCheckFullScreen()</a>, <a class="el" href="../../d6/d7/ntimm_8c-source.html#l02375">xxxCheckImeShowStatus()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02425">xxxChildResize()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00548">xxxCleanupDdeConv()</a>, <a class="el" href="../../d3/d6/ntuser_2kernel_2menu_8c-source.html#l01908">xxxCleanupDesktopMenu()</a>, <a class="el" href="../../d2/d9/kernel_2exitwin_8c-source.html#l00428">xxxClientShutdown2()</a>, <a class="el" href="../../d6/d7/ntimm_8c-source.html#l00531">xxxCreateDefaultImeWindow()</a>, <a class="el" href="../../d0/d6/desktop_8c-source.html#l01797">xxxCreateDesktop()</a>, <a class="el" href="../../d5/d7/createw_8c-source.html#l00033">xxxCreateWindowEx()</a>, <a class="el" href="../../d2/d7/w32_2ntuser_2kernel_2event_8c-source.html#l00120">xxxCsEvent()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00618">xxxDDETrackGetMessageHook()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00320">xxxDDETrackPostHook()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00768">xxxDDETrackWindowDying()</a>, <a class="el" href="../../d4/d5/focusact_8c-source.html#l00034">xxxDeactivate()</a>, <a class="el" href="../../d9/d2/dwp_8c-source.html#l01264">xxxDefWindowProc()</a>, <a class="el" href="../../d0/d6/desktop_8c-source.html#l00114">xxxDesktopThread()</a>, <a class="el" href="../../d0/d6/desktop_8c-source.html#l00883">xxxDesktopWndProc()</a>, <a class="el" href="../../d7/d2/queue_8c-source.html#l02552">xxxDestroyThreadInfo()</a>, <a class="el" href="../../d5/d7/createw_8c-source.html#l01591">xxxDestroyWindow()</a>, <a class="el" href="../../d6/d2/ntuser_2kernel_2input_8c-source.html#l00762">xxxDispatchMessage()</a>, <a class="el" href="../../d1/d1/lboxctl3_8c-source.html#l00190">xxxDlgDirListHelper()</a>, <a class="el" href="../../d4/d1/hotkeys_8c-source.html#l00434">xxxDoHotKeyStuff()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01549">xxxDoScroll()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l02489">xxxDoScrollMenu()</a>, <a class="el" href="../../d7/d0/dragdrop_8c-source.html#l00026">xxxDragObject()</a>, <a class="el" href="../../d9/d7/ntuser_2kernel_2clipbrd_8c-source.html#l00220">xxxDrawClipboard()</a>, <a class="el" href="../../d9/d2/movesize_8c-source.html#l01562">xxxDrawDragRect()</a>, <a class="el" href="../../d7/d1/mndraw_8c-source.html#l01972">xxxDrawMenuBarTemp()</a>, <a class="el" href="../../d7/d1/mndraw_8c-source.html#l02082">xxxDrawMenuBarUnderlines()</a>, <a class="el" href="../../d5/d7/createw_8c-source.html#l02053">xxxDW_SendDestroyMessages()</a>, <a class="el" href="../../d9/d2/dwp_8c-source.html#l00228">xxxDWP_ProcessVirtKey()</a>, <a class="el" href="../../d9/d2/dwp_8c-source.html#l00402">xxxDWP_SetCursor()</a>, <a class="el" href="../../d9/d2/dwp_8c-source.html#l00846">xxxDWPPrint()</a>, <a class="el" href="../../d6/d2/mnsys_8c-source.html#l00494">xxxEnableMenuItem()</a>, <a class="el" href="../../d3/d7/swp_8c-source.html#l04773">xxxEndDeferWindowPosEx()</a>, <a class="el" href="../../d2/d2/mnloop_8c-source.html#l00584">xxxEndMenuLoop()</a>, <a class="el" href="../../d2/d4/multimon_8c-source.html#l00099">xxxEnumDisplayMonitors()</a>, <a class="el" href="../../d2/d2/dtbitmap_8c-source.html#l00880">xxxExpandBitmap()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02802">xxxFindString()</a>, <a class="el" href="../../d6/d7/ntimm_8c-source.html#l00405">xxxFocusSetInputContext()</a>, <a class="el" href="../../d5/d7/createw_8c-source.html#l02218">xxxFreeWindow()</a>, <a class="el" href="../../d5/d7/createw_8c-source.html#l02126">xxxFW_DestroyAllChildren()</a>, <a class="el" href="../../d9/d3/w32_2ntuser_2kernel_2random_8c-source.html#l00241">xxxGetControlBrush()</a>, <a class="el" href="../../d9/d7/ntuser_2kernel_2clipbrd_8c-source.html#l02303">xxxGetRenderData()</a>, <a class="el" href="../../d6/d9/dmmnem_8c-source.html#l00115">xxxGNM_FindNextMnem()</a>, <a class="el" href="../../d6/d9/dmmnem_8c-source.html#l00219">xxxGotoNextMnem()</a>, <a class="el" href="../../d2/d2/mnloop_8c-source.html#l00043">xxxHandleMenuMessages()</a>, <a class="el" href="../../d5/d7/syscmd_8c-source.html#l00023">xxxHandleNCMouseGuys()</a>, <a class="el" href="../../d3/d9/kernel_2help_8c-source.html#l00073">xxxHelpLoop()</a>, <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00733">xxxHotTrackMenu()</a>, <a class="el" href="../../d6/d1/hungapp_8c-source.html#l00446">xxxHungAppDemon()</a>, <a class="el" href="../../d6/d7/ntimm_8c-source.html#l00921">xxxImmActivateLayout()</a>, <a class="el" href="../../d6/d7/ntimm_8c-source.html#l01070">xxxImmUnloadLayout()</a>, <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00611">xxxInitActivateDlg()</a>, <a class="el" href="../../d5/d8/minmax_8c-source.html#l00032">xxxInitSendValidateMinMaxInfo()</a>, <a class="el" href="../../d4/d1/mnchange_8c-source.html#l00323">xxxInsertMenuItem()</a>, <a class="el" href="../../d7/d1/kbdlyout_8c-source.html#l01203">xxxInternalActivateKeyboardLayout()</a>, <a class="el" href="../../d0/d2/paint_8c-source.html#l00885">xxxInternalDoSyncPaint()</a>, <a class="el" href="../../d5/d6/enumwin_8c-source.html#l00040">xxxInternalEnumWindow()</a>, <a class="el" href="../../d6/d2/ntuser_2kernel_2input_8c-source.html#l00213">xxxInternalGetMessage()</a>, <a class="el" href="../../d7/d1/kbdlyout_8c-source.html#l01571">xxxInternalUnloadKeyboardLayout()</a>, <a class="el" href="../../d2/d2/dtbitmap_8c-source.html#l01557">xxxInvalidateDesktopOnPaletteChange()</a>, <a class="el" href="../../d7/d0/dragdrop_8c-source.html#l00354">xxxIsDragging()</a>, <a class="el" href="../../d7/d7/ntinput_8c-source.html#l01338">xxxKeyEvent()</a>, <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l00722">xxxLBBinarySearchString()</a>, <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00062">xxxLBCreate()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00060">xxxLBGetBrush()</a>, <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l00407">xxxLBInsertItem()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02948">xxxLBoxCtlCharInput()</a>, <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l00842">xxxLBoxCtlDelete()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02183">xxxLBoxCtlKeyInput()</a>, <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l01053">xxxLBoxDeleteItem()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l03558">xxxLBoxDrawItem()</a>, <a class="el" href="../../d7/d1/kbdlyout_8c-source.html#l00654">xxxLoadKeyboardLayoutEx()</a>, <a class="el" href="../../d6/d6/ntuser_2rtl_2menu_8c-source.html#l00117">xxxLoadSysMenu()</a>, <a class="el" href="../../d9/d7/fullscr_8c-source.html#l00166">xxxMakeWindowForegroundWithState()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01237">xxxMDIActivate()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01540">xxxMDIDestroy()</a>, <a class="el" href="../../d7/d1/mndraw_8c-source.html#l01373">xxxMenuBarDraw()</a>, <a class="el" href="../../d3/d6/ntuser_2kernel_2menu_8c-source.html#l04022">xxxMenuWindowProc()</a>, <a class="el" href="../../d5/d4/rare_8c-source.html#l00362">xxxMetricsRecalc()</a>, <a class="el" href="../../d5/d8/minmax_8c-source.html#l01329">xxxMinMaximize()</a>, <a class="el" href="../../d3/d6/ntuser_2kernel_2menu_8c-source.html#l03395">xxxMNCancel()</a>, <a class="el" href="../../d3/d6/ntuser_2kernel_2menu_8c-source.html#l01011">xxxMNChar()</a>, <a class="el" href="../../d3/d6/ntuser_2kernel_2menu_8c-source.html#l02517">xxxMNCloseHierarchy()</a>, <a class="el" href="../../d3/d6/ntuser_2kernel_2menu_8c-source.html#l00880">xxxMNDestroyHandler()</a>, <a class="el" href="../../d3/d6/ntuser_2kernel_2menu_8c-source.html#l02697">xxxMNDoubleClick()</a>, <a class="el" href="../../d9/d6/menudd_8c-source.html#l00156">xxxMNDragOver()</a>, <a class="el" href="../../d3/d6/ntuser_2kernel_2menu_8c-source.html#l03180">xxxMNFindWindowFromPoint()</a>, <a class="el" href="../../d3/d6/ntuser_2kernel_2menu_8c-source.html#l02492">xxxMNHideNextHierarchy()</a>, <a class="el" href="../../d7/d1/mndraw_8c-source.html#l01697">xxxMNInvertItem()</a>, <a class="el" href="../../d3/d6/ntuser_2kernel_2menu_8c-source.html#l01251">xxxMNKeyDown()</a>, <a class="el" href="../../d2/d2/mnloop_8c-source.html#l00635">xxxMNLoop()</a>, <a class="el" href="../../d3/d6/ntuser_2kernel_2menu_8c-source.html#l03618">xxxMNMouseMove()</a>, <a class="el" href="../../d3/d6/ntuser_2kernel_2menu_8c-source.html#l01934">xxxMNOpenHierarchy()</a>, <a class="el" href="../../d3/d6/ntuser_2kernel_2menu_8c-source.html#l02818">xxxMNSelectItem()</a>, <a class="el" href="../../d9/d6/menudd_8c-source.html#l00063">xxxMNSetGapState()</a>, <a class="el" href="../../d5/d2/mnstate_8c-source.html#l00677">xxxMNStartMenu()</a>, <a class="el" href="../../d5/d2/mnstate_8c-source.html#l00540">xxxMNStartMenuState()</a>, <a class="el" href="../../d3/d6/ntuser_2kernel_2menu_8c-source.html#l00795">xxxMNSwitchToAlternateMenu()</a>, <a class="el" href="../../d9/d6/menudd_8c-source.html#l00279">xxxMNUpdateDraggingInfo()</a>, <a class="el" href="../../d4/d1/mnchange_8c-source.html#l01106">xxxMNUpdateShownMenu()</a>, <a class="el" href="../../d6/d2/ntuser_2kernel_2input_8c-source.html#l02444">xxxMouseActivate()</a>, <a class="el" href="../../d9/d2/movesize_8c-source.html#l01053">xxxMoveSize()</a>, <a class="el" href="../../d2/d2/tmswitch_8c-source.html#l01675">xxxNextWindow()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01244">xxxNotifyOwner()</a>, <a class="el" href="../../d2/d2/tmswitch_8c-source.html#l02121">xxxOldNextWindow()</a>, <a class="el" href="../../d2/d2/tmswitch_8c-source.html#l00808">xxxPaintIconsInSwitchWindow()</a>, <a class="el" href="../../d7/d2/queue_8c-source.html#l03772">xxxProcessEventMessage()</a>, <a class="el" href="../../d6/d6/kernel_2winable_8c-source.html#l00068">xxxProcessNotifyWinEvent()</a>, <a class="el" href="../../d7/d0/dragdrop_8c-source.html#l00243">xxxQueryDropObject()</a>, <a class="el" href="../../d7/d1/mndraw_8c-source.html#l00954">xxxRealDrawMenuItem()</a>, <a class="el" href="../../d1/d2/palette_8c-source.html#l00146">xxxRealizePalette()</a>, <a class="el" href="../../d4/d5/kernel_2sendmsg_8c-source.html#l01964">xxxReceiveMessage()</a>, <a class="el" href="../../d6/d1/hungapp_8c-source.html#l00135">xxxRedrawHungWindow()</a>, <a class="el" href="../../d9/d8/update_8c-source.html#l00299">xxxRedrawWindow()</a>, <a class="el" href="../../d6/d8/dlgmgr2_8c-source.html#l00031">xxxRemoveDefaultButton()</a>, <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00453">xxxResetTooltip()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l02582">xxxSBWndProc()</a>, <a class="el" href="../../d6/d2/ntuser_2kernel_2input_8c-source.html#l03305">xxxScanSysQueue()</a>, <a class="el" href="../../d0/d4/scrollw_8c-source.html#l00741">xxxScrollWindowEx()</a>, <a class="el" href="../../d4/d5/kernel_2sendmsg_8c-source.html#l00315">xxxSendBSMtoDesktop()</a>, <a class="el" href="../../d3/d7/swp_8c-source.html#l01669">xxxSendChangedMsgs()</a>, <a class="el" href="../../d0/d2/paint_8c-source.html#l00278">xxxSendChildNCPaint()</a>, <a class="el" href="../../d9/d7/ntuser_2kernel_2clipbrd_8c-source.html#l00783">xxxSendClipboardMessage()</a>, <a class="el" href="../../d4/d5/focusact_8c-source.html#l00220">xxxSendFocusMessages()</a>, <a class="el" href="../../d7/d1/mndraw_8c-source.html#l00617">xxxSendMenuDrawItemMessage()</a>, <a class="el" href="../../d6/d7/ntimm_8c-source.html#l02461">xxxSendMessageToUI()</a>, <a class="el" href="../../d5/d4/rare_8c-source.html#l03675">xxxSendMinRectMessages()</a>, <a class="el" href="../../d6/d7/ntimm_8c-source.html#l02518">xxxSendOpenStatusNotify()</a>, <a class="el" href="../../d7/d6/classchg_8c-source.html#l00056">xxxSetClassIcon()</a>, <a class="el" href="../../d7/d2/queue_8c-source.html#l06419">xxxSetConsoleCaretInfo()</a>, <a class="el" href="../../d2/d2/dtbitmap_8c-source.html#l01079">xxxSetDeskWallpaper()</a>, <a class="el" href="../../d4/d5/focusact_8c-source.html#l01815">xxxSetFocus()</a>, <a class="el" href="../../d4/d5/focusact_8c-source.html#l01235">xxxSetForegroundWindow()</a>, <a class="el" href="../../d4/d5/focusact_8c-source.html#l01342">xxxSetForegroundWindow2()</a>, <a class="el" href="../../d6/d7/ntimm_8c-source.html#l02606">xxxSetIMEShowStatus()</a>, <a class="el" href="../../d4/d1/mnchange_8c-source.html#l00204">xxxSetMenuInfo()</a>, <a class="el" href="../../d0/d7/kernel_2winmgr_8c-source.html#l00311">xxxSetParent()</a>, <a class="el" href="../../d6/d2/mnsys_8c-source.html#l00232">xxxSetSysMenu()</a>, <a class="el" href="../../d1/d4/ntuser_2kernel_2getset_8c-source.html#l00568">xxxSetWindowData()</a>, <a class="el" href="../../d1/d8/showwin_8c-source.html#l00437">xxxShowOwnedWindows()</a>, <a class="el" href="../../d6/d8/snapshot_8c-source.html#l00023">xxxSnapWindow()</a>, <a class="el" href="../../d0/d6/desktop_8c-source.html#l03358">xxxSwitchDesktop()</a>, <a class="el" href="../../d2/d2/tmswitch_8c-source.html#l00253">xxxSwitchToThisWindow()</a>, <a class="el" href="../../d2/d2/tmswitch_8c-source.html#l01564">xxxSwitchWndProc()</a>, <a class="el" href="../../d5/d7/syscmd_8c-source.html#l00193">xxxSysCommand()</a>, <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00526">xxxTooltipHandleTimer()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01290">xxxTrackMouse()</a>, <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00904">xxxTrackMouseMove()</a>, <a class="el" href="../../d3/d2/mnpopup_8c-source.html#l00052">xxxTrackPopupMenuEx()</a>, <a class="el" href="../../d2/d1/mnaccel_8c-source.html#l00251">xxxTranslateAccelerator()</a>, <a class="el" href="../../d9/d2/movesize_8c-source.html#l01485">xxxUpdateOtherThreadsWindows()</a>, <a class="el" href="../../d9/d2/movesize_8c-source.html#l01523">xxxUpdateThreadsWindows()</a>, <a class="el" href="../../d4/d5/focusact_8c-source.html#l00374">xxxUpdateTray()</a>, <a class="el" href="../../d9/d8/update_8c-source.html#l01121">xxxUpdateWindow2()</a>, <a class="el" href="../../d8/d1/power_8c-source.html#l00481">xxxUserPowerStateCalloutWorker()</a>, <a class="el" href="../../d0/d6/desktop_8c-source.html#l03136">xxxUserResetDisplayDevice()</a>, <a class="el" href="../../d6/d6/kernel_2winable_8c-source.html#l00274">xxxWindowEvent()</a>, <a class="el" href="../../d0/d8/winwhere_8c-source.html#l00128">xxxWindowFromPoint()</a>, <a class="el" href="../../d0/d8/winwhere_8c-source.html#l00274">xxxWindowHitTest()</a>, <a class="el" href="../../d0/d8/winwhere_8c-source.html#l00315">xxxWindowHitTest2()</a>, <a class="el" href="../../d8/d0/ntuser_2kernel_2cursor_8c-source.html#l00389">zzzAnimateCursor()</a>, <a class="el" href="../../d3/d7/swp_8c-source.html#l01955">zzzChangeStates()</a>, <a class="el" href="../../d5/d4/caret_8c-source.html#l00189">zzzInternalDestroyCaret()</a>, <a class="el" href="../../d9/d2/dc_8c-source.html#l01812">zzzInvalidateDCCache()</a>, <a class="el" href="../../d8/d0/ntuser_2kernel_2cursor_8c-source.html#l00028">zzzSetCursor()</a>, and <a class="el" href="../../d2/d1/hooks_8c-source.html#l00576">zzzSetWindowsHookEx()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a84" doxytag="usercli.h::UNDO_DELETE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define UNDO_DELETE&nbsp;&nbsp;&nbsp;2  /* We can undo <a class="el" href="../../d7/d1/genuedef_8c.html#a2">the</a> user's deletion of characters */          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00526">526</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/editec_8c-source.html#l02293">ECDeleteText()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l01996">ECMergeUndoInsertInfo()</a>, <a class="el" href="../../d6/d4/edmlrare_8c-source.html#l00556">MLUndo()</a>, and <a class="el" href="../../d7/d4/edslrare_8c-source.html#l00087">SLUndo()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a83" doxytag="usercli.h::UNDO_INSERT" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define UNDO_INSERT&nbsp;&nbsp;&nbsp;1  /* We can undo <a class="el" href="../../d7/d1/genuedef_8c.html#a2">the</a> user's insertion of characters */          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00525">525</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/editec_8c-source.html#l02293">ECDeleteText()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l01996">ECMergeUndoInsertInfo()</a>, <a class="el" href="../../d6/d4/edmlrare_8c-source.html#l00556">MLUndo()</a>, and <a class="el" href="../../d7/d4/edslrare_8c-source.html#l00087">SLUndo()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a82" doxytag="usercli.h::UNDO_NONE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define UNDO_NONE&nbsp;&nbsp;&nbsp;0  /* We can't undo <a class="el" href="../../d7/d1/genuedef_8c.html#a2">the</a> last operation. */          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00524">524</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/editec_8c-source.html#l02293">ECDeleteText()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00548">ECMenu()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l01996">ECMergeUndoInsertInfo()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02904">EditWndProc()</a>, <a class="el" href="../../d6/d4/edmlrare_8c-source.html#l00556">MLUndo()</a>, <a class="el" href="../../d7/d4/edslrare_8c-source.html#l00027">SLCreate()</a>, and <a class="el" href="../../d7/d4/edslrare_8c-source.html#l00087">SLUndo()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a259" doxytag="usercli.h::UNICODE_RLM" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define UNICODE_RLM&nbsp;&nbsp;&nbsp;0x200f          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02019">2019</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d7/d3/msgbox_8c-source.html#l00730">SoftModalMessageBox()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a42" doxytag="usercli.h::Unlock" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define Unlock          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">ppobj&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;(*ppobj = NULL)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00368">368</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d8/d3/loadbits_8c-source.html#l00539">_DestroyCursor()</a>, <a class="el" href="../../d8/d1/mndstry_8c-source.html#l00027">_DestroyMenu()</a>, <a class="el" href="../../d5/d3/kernel_2acons_8c-source.html#l00319">_SetCursorIconData()</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l01338">ButtonWndProcWorker()</a>, <a class="el" href="../../d6/d2/ntuser_2kernel_2input_8c-source.html#l05671">CancelInputState()</a>, <a class="el" href="../../d2/d0/inctlpan_8c-source.html#l00494">CreateBitmapStrip()</a>, <a class="el" href="../../d2/d3/spb_8c-source.html#l00341">CreateSpb()</a>, <a class="el" href="../../d5/d3/kernel_2acons_8c-source.html#l00229">DestroyAniIcon()</a>, <a class="el" href="../../d3/d6/class_8c-source.html#l01207">DestroyClass()</a>, <a class="el" href="../../d7/d6/classchg_8c-source.html#l00146">DestroyClassSmIcon()</a>, <a class="el" href="../../d7/d1/kbdlyout_8c-source.html#l01688">DestroyKL()</a>, <a class="el" href="../../d4/d1/hotkeys_8c-source.html#l00056">DestroyThreadsHotKeys()</a>, <a class="el" href="../../d5/d7/handtabl_8c-source.html#l02284">DestroyThreadsObjects()</a>, <a class="el" href="../../d4/d1/hotkeys_8c-source.html#l00093">DestroyWindowsHotKeys()</a>, <a class="el" href="../../d9/d7/ntuser_2kernel_2clipbrd_8c-source.html#l02687">DisownClipboard()</a>, <a class="el" href="../../d8/d6/winhtky_8c-source.html#l00096">DWP_SetHotKey()</a>, <a class="el" href="../../d4/d1/hotkeys_8c-source.html#l00290">FindHotKey()</a>, <a class="el" href="../../d9/d7/ntuser_2kernel_2clipbrd_8c-source.html#l02779">ForceEmptyClipboard()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l02042">FreeDdeConv()</a>, <a class="el" href="../../d2/d3/spb_8c-source.html#l01171">FreeSpb()</a>, <a class="el" href="../../d2/d1/hooks_8c-source.html#l02227">FreeThreadsWindowHooks()</a>, <a class="el" href="../../d5/d1/timers_8c-source.html#l00112">FreeTimer()</a>, <a class="el" href="../../d9/d7/winsta_8c-source.html#l00745">FreeWindowStation()</a>, <a class="el" href="../../d9/d7/fullscr_8c-source.html#l00101">FullScreenCleanup()</a>, <a class="el" href="../../d6/d7/ntimm_8c-source.html#l01503">ImeCanDestroyDefIME()</a>, <a class="el" href="../../d0/d9/imectl_8c-source.html#l00083">ImeWndProcWorker()</a>, <a class="el" href="../../d7/d7/ntinput_8c-source.html#l02146">InitiateWin32kCleanup()</a>, <a class="el" href="../../d3/d6/class_8c-source.html#l00244">InternalRegisterClassEx()</a>, <a class="el" href="../../d2/d3/spb_8c-source.html#l00802">LockWindowUpdate2()</a>, <a class="el" href="../../d3/d6/ntuser_2kernel_2menu_8c-source.html#l00422">LockWndMenu()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01657">MDIClientWndProcWorker()</a>, <a class="el" href="../../d6/d5/iosup_8c-source.html#l01347">MmUnlockPages()</a>, <a class="el" href="../../d5/d2/mnstate_8c-source.html#l00165">MNFreePopup()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l02001">PopState()</a>, <a class="el" href="../../d4/d5/kernel_2sendmsg_8c-source.html#l02534">ReceiverDied()</a>, <a class="el" href="../../d6/d6/kernel_2winable_8c-source.html#l00495">RemoveNotify()</a>, <a class="el" href="../../d6/d4/statctl_8c-source.html#l00840">StaticWndProcWorker()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00264">UnlinkConv()</a>, <a class="el" href="../../d5/d7/createw_8c-source.html#l02867">UnlinkWindow()</a>, <a class="el" href="../../d8/d0/w32_2ntuser_2kernel_2init_8c-source.html#l01642">UnloadCursorsAndIcons()</a>, <a class="el" href="../../d3/d6/class_8c-source.html#l01092">UnlockAndFreeCPDs()</a>, <a class="el" href="../../d6/d2/mnsys_8c-source.html#l00124">UnlockDesktopMenu()</a>, <a class="el" href="../../d3/d6/ntuser_2kernel_2menu_8c-source.html#l03128">UnlockMFMWFPWindow()</a>, <a class="el" href="../../d5/d7/createw_8c-source.html#l02192">UnlockNotifyWindow()</a>, <a class="el" href="../../d3/d6/ntuser_2kernel_2menu_8c-source.html#l00367">UnlockPopupMenu()</a>, <a class="el" href="../../d3/d6/ntuser_2kernel_2menu_8c-source.html#l00258">UnlockPopupMenuWindow()</a>, <a class="el" href="../../d4/d1/mnchange_8c-source.html#l00052">UnlockSubMenu()</a>, <a class="el" href="../../d3/d6/ntuser_2kernel_2menu_8c-source.html#l00458">UnlockWndMenu()</a>, <a class="el" href="../../d8/d0/w32_2ntuser_2kernel_2init_8c-source.html#l00097">Win32kNtUserCleanup()</a>, <a class="el" href="../../d7/d7/ntinput_8c-source.html#l00472">xxxButtonEvent()</a>, <a class="el" href="../../d4/d4/w32_2ntuser_2kernel_2capture_8c-source.html#l00124">xxxCapture()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l01624">xxxCBCompleteEditWindow()</a>, <a class="el" href="../../d4/d3/comboini_8c-source.html#l00394">xxxCBNcDestroyHandler()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02425">xxxChildResize()</a>, <a class="el" href="../../d3/d6/ntuser_2kernel_2menu_8c-source.html#l01908">xxxCleanupDesktopMenu()</a>, <a class="el" href="../../d9/d7/ntuser_2kernel_2clipbrd_8c-source.html#l00538">xxxCloseClipboard()</a>, <a class="el" href="../../d0/d6/desktop_8c-source.html#l01797">xxxCreateDesktop()</a>, <a class="el" href="../../d4/d5/focusact_8c-source.html#l00034">xxxDeactivate()</a>, <a class="el" href="../../d0/d6/desktop_8c-source.html#l00114">xxxDesktopThread()</a>, <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00375">xxxDestroyLBox()</a>, <a class="el" href="../../d2/d3/ddemlsvr_8c-source.html#l00127">xxxDestroyThreadDDEObject()</a>, <a class="el" href="../../d7/d2/queue_8c-source.html#l02552">xxxDestroyThreadInfo()</a>, <a class="el" href="../../d5/d7/createw_8c-source.html#l01591">xxxDestroyWindow()</a>, <a class="el" href="../../d5/d7/createw_8c-source.html#l01989">xxxDW_DestroyOwnedWindows()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01782">xxxEndScroll()</a>, <a class="el" href="../../d7/d1/kbdlyout_8c-source.html#l01647">xxxFreeKeyboardLayouts()</a>, <a class="el" href="../../d5/d7/createw_8c-source.html#l02218">xxxFreeWindow()</a>, <a class="el" href="../../d2/d2/mnloop_8c-source.html#l00043">xxxHandleMenuMessages()</a>, <a class="el" href="../../d7/d7/ntinput_8c-source.html#l01338">xxxKeyEvent()</a>, <a class="el" href="../../d9/d7/fullscr_8c-source.html#l00166">xxxMakeWindowForegroundWithState()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01540">xxxMDIDestroy()</a>, <a class="el" href="../../d3/d6/ntuser_2kernel_2menu_8c-source.html#l02517">xxxMNCloseHierarchy()</a>, <a class="el" href="../../d3/d6/ntuser_2kernel_2menu_8c-source.html#l01934">xxxMNOpenHierarchy()</a>, <a class="el" href="../../d3/d6/ntuser_2kernel_2menu_8c-source.html#l00795">xxxMNSwitchToAlternateMenu()</a>, <a class="el" href="../../d9/d2/movesize_8c-source.html#l01053">xxxMoveSize()</a>, <a class="el" href="../../d2/d2/tmswitch_8c-source.html#l01675">xxxNextWindow()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l02196">xxxSBTrackInit()</a>, <a class="el" href="../../d4/d1/mnchange_8c-source.html#l00796">xxxSetLPITEMInfo()</a>, <a class="el" href="../../d1/d4/ntuser_2kernel_2getset_8c-source.html#l00568">xxxSetWindowData()</a>, <a class="el" href="../../d6/d8/snapshot_8c-source.html#l00023">xxxSnapWindow()</a>, <a class="el" href="../../d0/d6/desktop_8c-source.html#l03358">xxxSwitchDesktop()</a>, <a class="el" href="../../d0/d0/miscutil_8c-source.html#l00016">ZapActiveAndFocus()</a>, <a class="el" href="../../d6/d2/ntuser_2kernel_2input_8c-source.html#l05940">zzzAttachToQueue()</a>, <a class="el" href="../../d7/d2/queue_8c-source.html#l02211">zzzDestroyQueue()</a>, and <a class="el" href="../../d5/d4/caret_8c-source.html#l00189">zzzInternalDestroyCaret()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a131" doxytag="usercli.h::UNLOCKRESOURCE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define UNLOCKRESOURCE          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">hResData,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>hModule&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;((*(<a class="el" href="../../d8/d6/ntuser_2client_2globals_8h.html#a49">pfnUnlockResource</a>))(hResData, hModule))</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00913">913</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d0/d8/clmenu_8c-source.html#l00378">CommonLoadMenu()</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l00941">CreateDialogParamA()</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l00975">CreateDialogParamW()</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l00868">DialogBoxParamA()</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l02502">GetIconIdEx()</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l00403">LoadAcc()</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l01899">LoadBmp()</a>, <a class="el" href="../../d4/d1/rtlres_8c-source.html#l00037">LoadStringOrError()</a>, and <a class="el" href="../../d5/d8/clres_8c-source.html#l02847">ObjectFromDIBResource()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a64" doxytag="usercli.h::UPPERCASE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define UPPERCASE&nbsp;&nbsp;&nbsp;1          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00439">439</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d2/d3/combo_8c-source.html#l00207">ComboBoxWndProcWorker()</a>, <a class="el" href="../../d7/d0/lb1_8c-source.html#l00032">ListBoxWndProcWorker()</a>, <a class="el" href="../../d4/d3/comboini_8c-source.html#l00070">xxxCBCreateHandler()</a>, and <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l00407">xxxLBInsertItem()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a283" doxytag="usercli.h::UserCallbackReturn" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define UserCallbackReturn&nbsp;&nbsp;&nbsp;NtCallbackReturn          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02154">2154</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d0/d7/menuddc_8c-source.html#l00362">__ClientLoadOLE()</a>, <a class="el" href="../../d0/d7/menuddc_8c-source.html#l00224">__ClientRegisterDragDrop()</a>, and <a class="el" href="../../d0/d7/menuddc_8c-source.html#l00261">__ClientRevokeDragDrop()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="usercli.h::UserGlobalAlloc" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define UserGlobalAlloc          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">flags,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>size&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;GlobalAlloc(flags, size)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00125">125</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d5/d3/client_2ddetrack_8c-source.html#l00305">_ClientCopyDDEOut1()</a>, <a class="el" href="../../d3/d5/stdptcl_8c-source.html#l01479">AllocAndSetDDEData()</a>, <a class="el" href="../../d1/d8/hdata_8c-source.html#l00660">CopyDDEData()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02703">ECCopy()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02293">ECDeleteText()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01287">ECResultStrHandler()</a>, <a class="el" href="../../d1/d8/hdata_8c-source.html#l00094">InternalCreateDataHandle()</a>, <a class="el" href="../../d3/d5/stdptcl_8c-source.html#l00791">MaybeTranslateExecuteData()</a>, <a class="el" href="../../d7/d3/msgbox_8c-source.html#l01176">MB_CopyToClipboard()</a>, and <a class="el" href="../../d5/d3/client_2ddetrack_8c-source.html#l00563">PackDDElParam()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="usercli.h::UserGlobalFree" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define UserGlobalFree          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">h&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;GlobalFree((HANDLE)(h))</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00124">124</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d5/d3/client_2ddetrack_8c-source.html#l00015">_ClientCopyDDEIn1()</a>, <a class="el" href="../../d5/d3/client_2ddetrack_8c-source.html#l00305">_ClientCopyDDEOut1()</a>, <a class="el" href="../../d1/d8/hdata_8c-source.html#l00660">CopyDDEData()</a>, <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00230">CreateLocalMemHandle()</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l00285">DeleteClientClipboardHandle()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l01977">ECEmptyUndo()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l01996">ECMergeUndoInsertInfo()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l00439">ECNcDestroyHandler()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01287">ECResultStrHandler()</a>, <a class="el" href="../../d5/d3/client_2ddetrack_8c-source.html#l00642">FreeDDElParam()</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l00390">GetClipboardData()</a>, <a class="el" href="../../d7/d7/clinit_8c-source.html#l00933">LoadAppDlls()</a>, <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l01478">MESSAGECALL()</a>, <a class="el" href="../../d6/d4/edmlrare_8c-source.html#l00556">MLUndo()</a>, and <a class="el" href="../../d7/d4/edslrare_8c-source.html#l00087">SLUndo()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="usercli.h::USERGLOBALLOCK" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define USERGLOBALLOCK          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">h,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>p&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;p = GlobalLock((HANDLE)(h))</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00128">128</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d5/d3/client_2ddetrack_8c-source.html#l00015">_ClientCopyDDEIn1()</a>, <a class="el" href="../../d5/d3/client_2ddetrack_8c-source.html#l00305">_ClientCopyDDEOut1()</a>, <a class="el" href="../../d5/d3/client_2ddetrack_8c-source.html#l00532">_ClientGetDDEFlags()</a>, <a class="el" href="../../d9/d3/w32_2ntuser_2client_2callback_8c-source.html#l00500">_ClientGetDDEHookData()</a>, <a class="el" href="../../d3/d5/stdptcl_8c-source.html#l01479">AllocAndSetDDEData()</a>, <a class="el" href="../../d3/d5/stdptcl_8c-source.html#l00362">ClSpontAdviseData()</a>, <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00189">ConvertMemHandle()</a>, <a class="el" href="../../d1/d8/hdata_8c-source.html#l00660">CopyDDEData()</a>, <a class="el" href="../../d1/d8/hdata_8c-source.html#l00304">DdeAccessData()</a>, <a class="el" href="../../d1/d8/hdata_8c-source.html#l00166">DdeAddData()</a>, <a class="el" href="../../d1/d0/xact_8c-source.html#l00024">DdeClientTransaction()</a>, <a class="el" href="../../d1/d8/hdata_8c-source.html#l00234">DdeGetData()</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l00285">DeleteClientClipboardHandle()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02703">ECCopy()</a>, <a class="el" href="../../d3/d5/stdptcl_8c-source.html#l01591">ExtractDDEDataInfo()</a>, <a class="el" href="../../d5/d3/client_2ddetrack_8c-source.html#l00208">FixupDdeExecuteIfNecessary()</a>, <a class="el" href="../../d1/d8/hdata_8c-source.html#l00491">FreeDDEData()</a>, <a class="el" href="../../d1/d8/hdata_8c-source.html#l00094">InternalCreateDataHandle()</a>, <a class="el" href="../../d3/d5/stdptcl_8c-source.html#l00791">MaybeTranslateExecuteData()</a>, <a class="el" href="../../d7/d3/msgbox_8c-source.html#l01176">MB_CopyToClipboard()</a>, <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l01478">MESSAGECALL()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l02720">MLPasteText()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l01157">SLPasteText()</a>, and <a class="el" href="../../d3/d5/stdptcl_8c-source.html#l00263">SvStartAdviseUpdate()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="usercli.h::UserGlobalReAlloc" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define UserGlobalReAlloc          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">pmem,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>cnt,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>flags&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;GlobalReAlloc(pmem,cnt,flags)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00129">129</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d1/d8/hdata_8c-source.html#l00166">DdeAddData()</a>, and <a class="el" href="../../d9/d3/editec_8c-source.html#l02293">ECDeleteText()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a6" doxytag="usercli.h::UserGlobalSize" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define UserGlobalSize          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">pmem&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;GlobalSize(pmem)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00130">130</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d5/d3/client_2ddetrack_8c-source.html#l00015">_ClientCopyDDEIn1()</a>, <a class="el" href="../../d9/d3/w32_2ntuser_2client_2callback_8c-source.html#l00500">_ClientGetDDEHookData()</a>, <a class="el" href="../../d1/d8/hdata_8c-source.html#l00660">CopyDDEData()</a>, <a class="el" href="../../d1/d8/hdata_8c-source.html#l00304">DdeAccessData()</a>, <a class="el" href="../../d1/d8/hdata_8c-source.html#l00166">DdeAddData()</a>, and <a class="el" href="../../d1/d8/hdata_8c-source.html#l00234">DdeGetData()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="usercli.h::USERGLOBALUNLOCK" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define USERGLOBALUNLOCK          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">h&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;GlobalUnlock((HANDLE)(h))</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00123">123</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d5/d3/client_2ddetrack_8c-source.html#l00015">_ClientCopyDDEIn1()</a>, <a class="el" href="../../d5/d3/client_2ddetrack_8c-source.html#l00185">_ClientCopyDDEIn2()</a>, <a class="el" href="../../d5/d3/client_2ddetrack_8c-source.html#l00305">_ClientCopyDDEOut1()</a>, <a class="el" href="../../d5/d3/client_2ddetrack_8c-source.html#l00379">_ClientCopyDDEOut2()</a>, <a class="el" href="../../d5/d3/client_2ddetrack_8c-source.html#l00532">_ClientGetDDEFlags()</a>, <a class="el" href="../../d9/d3/w32_2ntuser_2client_2callback_8c-source.html#l00500">_ClientGetDDEHookData()</a>, <a class="el" href="../../d3/d5/stdptcl_8c-source.html#l01479">AllocAndSetDDEData()</a>, <a class="el" href="../../d3/d5/stdptcl_8c-source.html#l00362">ClSpontAdviseData()</a>, <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00189">ConvertMemHandle()</a>, <a class="el" href="../../d1/d8/hdata_8c-source.html#l00660">CopyDDEData()</a>, <a class="el" href="../../d1/d8/hdata_8c-source.html#l00166">DdeAddData()</a>, <a class="el" href="../../d1/d0/xact_8c-source.html#l00024">DdeClientTransaction()</a>, <a class="el" href="../../d1/d8/hdata_8c-source.html#l00234">DdeGetData()</a>, <a class="el" href="../../d1/d8/hdata_8c-source.html#l00346">DdeUnaccessData()</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l00285">DeleteClientClipboardHandle()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02703">ECCopy()</a>, <a class="el" href="../../d3/d5/stdptcl_8c-source.html#l01591">ExtractDDEDataInfo()</a>, <a class="el" href="../../d5/d3/client_2ddetrack_8c-source.html#l00208">FixupDdeExecuteIfNecessary()</a>, <a class="el" href="../../d1/d8/hdata_8c-source.html#l00491">FreeDDEData()</a>, <a class="el" href="../../d1/d8/hdata_8c-source.html#l00094">InternalCreateDataHandle()</a>, <a class="el" href="../../d3/d5/stdptcl_8c-source.html#l00791">MaybeTranslateExecuteData()</a>, <a class="el" href="../../d7/d3/msgbox_8c-source.html#l01176">MB_CopyToClipboard()</a>, <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l01478">MESSAGECALL()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l02720">MLPasteText()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l01157">SLPasteText()</a>, and <a class="el" href="../../d3/d5/stdptcl_8c-source.html#l00263">SvStartAdviseUpdate()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a136" doxytag="usercli.h::UserLocalAlloc" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define UserLocalAlloc          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">uFlag,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>uBytes&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;HeapAlloc(<a class="el" href="../../d8/d6/ntuser_2client_2globals_8h.html#a21">pUserHeap</a>, uFlag, (uBytes))</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00958">958</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d2/d1/rtlinit_8c-source.html#l00299">AllocLookasideEntry()</a>, <a class="el" href="../../d3/d5/fntsweep_8c-source.html#l00996">bCleanConvertedTTFs()</a>, <a class="el" href="../../d1/d7/clenum_8c-source.html#l00037">BuildHwndList()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00927">CascadeWindowsEnum()</a>, <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00129">CliImmInitializeHotKeys()</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l03546">CopyDibHdr()</a>, <a class="el" href="../../d4/d3/client_2acons_8c-source.html#l00581">CreateAniIcon()</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l01084">CreateIcoCurIndirect()</a>, <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00574">DefWindowProcWorker()</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l04279">DIBFromBitmap()</a>, <a class="el" href="../../d3/d3/combodir_8c-source.html#l00070">DlgDirSelectComboBoxExA()</a>, <a class="el" href="../../d1/d1/lboxctl3_8c-source.html#l00784">DlgDirSelectExA()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l00109">ECCalcMarginForDBCSFont()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00423">ECDoIMEMenuCommand()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l00708">ECSetFont()</a>, <a class="el" href="../../d1/d7/ntcftxt_8h-source.html#l01211">EnumDisplaySettingsEx()</a>, <a class="el" href="../../d5/d3/client_2ddetrack_8c-source.html#l00208">FixupDdeExecuteIfNecessary()</a>, <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l00285">GrowMem()</a>, <a class="el" href="../../d4/d1/rtlres_8c-source.html#l00396">IconFromBestImage()</a>, <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00713">InitHStrings()</a>, <a class="el" href="../../d2/d1/rtlinit_8c-source.html#l00221">InitLookaside()</a>, <a class="el" href="../../d1/d7/clenum_8c-source.html#l00398">InternalEnumObjects()</a>, <a class="el" href="../../d1/d7/clenum_8c-source.html#l00251">InternalEnumProps()</a>, <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00652">LBSetTabStops()</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l00403">LoadAcc()</a>, <a class="el" href="../../d4/d3/client_2acons_8c-source.html#l00777">LoadAniIcon()</a>, <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00775">MDIActivateDlgInit()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01657">MDIClientWndProcWorker()</a>, <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l01554">MESSAGECALL()</a>, <a class="el" href="../../d6/d4/edmlrare_8c-source.html#l00458">MLSetTabStops()</a>, <a class="el" href="../../d9/d9/rtl_2text_8c-source.html#l00072">PSMGetTextExtent()</a>, <a class="el" href="../../d9/d4/reader_8c-source.html#l00158">ReaderWndProc()</a>, <a class="el" href="../../d4/d3/client_2acons_8c-source.html#l00454">ReadIconGuts()</a>, <a class="el" href="../../d8/d3/w32_2ntuser_2client_2random_8c-source.html#l00063">SetSysColorsTemp()</a>, <a class="el" href="../../d8/d6/cldib_8c-source.html#l00084">SmartStretchDIBits()</a>, <a class="el" href="../../d8/d3/w32_2ntuser_2client_2random_8c-source.html#l00164">TextAlloc()</a>, <a class="el" href="../../d4/d1/client_2drawtext_8c-source.html#l00580">UserLpkPSMTextOut()</a>, <a class="el" href="../../d7/d7/clinit_8c-source.html#l01614">UserRtlAllocMem()</a>, <a class="el" href="../../d3/d5/fntsweep_8c-source.html#l00577">vSweepFonts()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l01624">xxxCBCompleteEditWindow()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l02496">xxxCBGetTextHelper()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l02028">xxxCBInternalUpdateEditWindow()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l02255">xxxCBUpdateListBoxWindow()</a>, <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l00407">xxxLBInsertItem()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02948">xxxLBoxCtlCharInput()</a>, and <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l01107">xxxLBSetCount()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a142" doxytag="usercli.h::UserLocalFlags" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define UserLocalFlags          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">p&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;0</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00964">964</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a138" doxytag="usercli.h::UserLocalFree" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define UserLocalFree          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">p&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;HeapFree(<a class="el" href="../../d8/d6/ntuser_2client_2globals_8h.html#a21">pUserHeap</a>, 0, (LPSTR)(p))</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00960">960</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/w32_2ntuser_2client_2callback_8c-source.html#l00129">_ClientEventCallback()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00711">ArrangeWindows()</a>, <a class="el" href="../../d3/d5/fntsweep_8c-source.html#l00996">bCleanConvertedTTFs()</a>, <a class="el" href="../../d1/d7/clenum_8c-source.html#l00037">BuildHwndList()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00927">CascadeWindowsEnum()</a>, <a class="el" href="../../d6/d6/strings_8c-source.html#l00335">CharLowerBuffA()</a>, <a class="el" href="../../d6/d6/strings_8c-source.html#l00416">CharUpperBuffA()</a>, <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00129">CliImmInitializeHotKeys()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l00207">ComboBoxWndProcWorker()</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l03679">ConvertDIBBitmap()</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l03344">ConvertDIBIcon()</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l04377">CopyBmp()</a>, <a class="el" href="../../d4/d3/client_2acons_8c-source.html#l00581">CreateAniIcon()</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l01084">CreateIcoCurIndirect()</a>, <a class="el" href="../../d0/d9/imectl_8c-source.html#l01083">CreateIMEUI()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02101">DefFrameProcWorker()</a>, <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00574">DefWindowProcWorker()</a>, <a class="el" href="../../d1/d1/lboxctl3_8c-source.html#l00600">DlgDirListA()</a>, <a class="el" href="../../d3/d3/combodir_8c-source.html#l00130">DlgDirListComboBoxA()</a>, <a class="el" href="../../d3/d3/combodir_8c-source.html#l00070">DlgDirSelectComboBoxExA()</a>, <a class="el" href="../../d1/d1/lboxctl3_8c-source.html#l00784">DlgDirSelectExA()</a>, <a class="el" href="../../d0/d2/mngrayc_8c-source.html#l00530">DrawStateA()</a>, <a class="el" href="../../d4/d1/client_2drawtext_8c-source.html#l00047">DrawTextExA()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l00109">ECCalcMarginForDBCSFont()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00423">ECDoIMEMenuCommand()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l00439">ECNcDestroyHandler()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l00708">ECSetFont()</a>, <a class="el" href="../../d7/d3/msgbox_8c-source.html#l01944">EndTaskModalDialog()</a>, <a class="el" href="../../d5/d3/client_2ddetrack_8c-source.html#l00208">FixupDdeExecuteIfNecessary()</a>, <a class="el" href="../../d2/d1/rtlinit_8c-source.html#l00344">FreeLookasideEntry()</a>, <a class="el" href="../../d4/d1/client_2drawtext_8c-source.html#l00508">GetTabbedTextExtentA()</a>, <a class="el" href="../../d4/d1/rtlres_8c-source.html#l00396">IconFromBestImage()</a>, <a class="el" href="../../d2/d1/rtlinit_8c-source.html#l00221">InitLookaside()</a>, <a class="el" href="../../d1/d7/clenum_8c-source.html#l00398">InternalEnumObjects()</a>, <a class="el" href="../../d1/d7/clenum_8c-source.html#l00251">InternalEnumProps()</a>, <a class="el" href="../../d1/d7/clenum_8c-source.html#l00095">InternalEnumWindows()</a>, <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00652">LBSetTabStops()</a>, <a class="el" href="../../d7/d0/lb1_8c-source.html#l00032">ListBoxWndProcWorker()</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l00403">LoadAcc()</a>, <a class="el" href="../../d4/d3/client_2acons_8c-source.html#l00777">LoadAniIcon()</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l02292">LoadBitmapA()</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l02329">LoadCursorA()</a>, <a class="el" href="../../d4/d3/client_2acons_8c-source.html#l00117">LoadCursorFromFileA()</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l02373">LoadIconA()</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l02414">LoadImageA()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01657">MDIClientWndProcWorker()</a>, <a class="el" href="../../d7/d3/msgbox_8c-source.html#l00351">MessageBoxExA()</a>, <a class="el" href="../../d7/d3/msgbox_8c-source.html#l00427">MessageBoxIndirectA()</a>, <a class="el" href="../../d7/d3/msgbox_8c-source.html#l00489">MessageBoxWorker()</a>, <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l01554">MESSAGECALL()</a>, <a class="el" href="../../d6/d4/edmlrare_8c-source.html#l00458">MLSetTabStops()</a>, <a class="el" href="../../d7/d9/extract_8c-source.html#l00735">PrivateExtractIconExA()</a>, <a class="el" href="../../d7/d9/extract_8c-source.html#l01019">PrivateExtractIconsA()</a>, <a class="el" href="../../d9/d9/rtl_2text_8c-source.html#l00072">PSMGetTextExtent()</a>, <a class="el" href="../../d9/d4/reader_8c-source.html#l00158">ReaderWndProc()</a>, <a class="el" href="../../d4/d3/client_2acons_8c-source.html#l00700">ReadIconFromFileMap()</a>, <a class="el" href="../../d4/d3/client_2acons_8c-source.html#l00454">ReadIconGuts()</a>, <a class="el" href="../../d1/d7/ntcftxt_8h-source.html#l00883">SendNotifyMessage()</a>, <a class="el" href="../../d8/d3/w32_2ntuser_2client_2random_8c-source.html#l00063">SetSysColorsTemp()</a>, <a class="el" href="../../d8/d6/cldib_8c-source.html#l00084">SmartStretchDIBits()</a>, <a class="el" href="../../d7/d3/msgbox_8c-source.html#l00730">SoftModalMessageBox()</a>, <a class="el" href="../../d7/d3/msgbox_8c-source.html#l01892">StartTaskModalDialog()</a>, <a class="el" href="../../d4/d1/client_2drawtext_8c-source.html#l00459">TabbedTextOutA()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00603">UnmaximizeChildWindows()</a>, <a class="el" href="../../d4/d1/client_2drawtext_8c-source.html#l00580">UserLpkPSMTextOut()</a>, <a class="el" href="../../d7/d7/clinit_8c-source.html#l01620">UserRtlFreeMem()</a>, <a class="el" href="../../d3/d5/fntsweep_8c-source.html#l00577">vSweepFonts()</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l04127">WOWFindResourceExWCover()</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l04158">WOWLoadBitmapA()</a>, <a class="el" href="../../d7/d9/wsprintf_8c-source.html#l00168">wvsprintfA()</a>, <a class="el" href="../../d7/d9/wsprintf_8c-source.html#l00638">wvsprintfW()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l01624">xxxCBCompleteEditWindow()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l02496">xxxCBGetTextHelper()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l02028">xxxCBInternalUpdateEditWindow()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l02255">xxxCBUpdateListBoxWindow()</a>, <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00375">xxxDestroyLBox()</a>, <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l00797">xxxLBResetContent()</a>, and <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00032">xxxSetFrameTitle()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a143" doxytag="usercli.h::UserLocalHandle" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define UserLocalHandle          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">p&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;(HLOCAL)(p)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00965">965</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a140" doxytag="usercli.h::UserLocalLock" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define UserLocalLock          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">p&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;(LPSTR)(p)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00962">962</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a137" doxytag="usercli.h::UserLocalReAlloc" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define UserLocalReAlloc          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">p,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>uBytes,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>uFlags&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;HeapReAlloc(<a class="el" href="../../d8/d6/ntuser_2client_2globals_8h.html#a21">pUserHeap</a>, uFlags, (LPSTR)(p), (uBytes))</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00959">959</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d4/d1/client_2drawtext_8c-source.html#l00047">DrawTextExA()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l00708">ECSetFont()</a>, <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l00285">GrowMem()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l01487">MLInsertchLine()</a>, <a class="el" href="../../d6/d4/edmlrare_8c-source.html#l00458">MLSetTabStops()</a>, <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l00342">xxxLBInitStorage()</a>, <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l00407">xxxLBInsertItem()</a>, and <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l01107">xxxLBSetCount()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a139" doxytag="usercli.h::UserLocalSize" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define UserLocalSize          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">p&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;HeapSize(<a class="el" href="../../d8/d6/ntuser_2client_2globals_8h.html#a21">pUserHeap</a>, 0, (LPSTR)(p))</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00961">961</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d2/d4/editml_8c-source.html#l01487">MLInsertchLine()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a141" doxytag="usercli.h::UserLocalUnlock" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define UserLocalUnlock          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">p&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00963">963</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a28" doxytag="usercli.h::VALIDATECLASSANDSIZE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define VALIDATECLASSANDSIZE          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">pwnd,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>inFNID&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00227">227</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d0/btnctl_8c-source.html#l01338">ButtonWndProcWorker()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l00207">ComboBoxWndProcWorker()</a>, <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l00460">DefDlgProcWorker()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02831">EditWndProcWorker()</a>, <a class="el" href="../../d0/d9/imectl_8c-source.html#l00083">ImeWndProcWorker()</a>, <a class="el" href="../../d7/d0/lb1_8c-source.html#l00032">ListBoxWndProcWorker()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01657">MDIClientWndProcWorker()</a>, <a class="el" href="../../d6/d4/statctl_8c-source.html#l00840">StaticWndProcWorker()</a>, <a class="el" href="../../d0/d6/desktop_8c-source.html#l00883">xxxDesktopWndProc()</a>, <a class="el" href="../../d3/d6/ntuser_2kernel_2menu_8c-source.html#l04022">xxxMenuWindowProc()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l02582">xxxSBWndProc()</a>, <a class="el" href="../../d2/d2/tmswitch_8c-source.html#l01564">xxxSwitchWndProc()</a>, and <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00570">xxxTooltipWndProc()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a22" doxytag="usercli.h::VALIDATEHMENU" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define VALIDATEHMENU          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">hmenu&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;((<a class="el" href="../../d1/d1/structtagMENU.html">PMENU</a>)HMValidateHandle(hmenu, TYPE_MENU))</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00196">196</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d8/d6/menuc_8c-source.html#l00015">CheckMenuItem()</a>, <a class="el" href="../../d8/d6/menuc_8c-source.html#l00354">CheckMenuRadioItem()</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00685">EnableMenuItem()</a>, <a class="el" href="../../d8/d6/menuc_8c-source.html#l00233">GetMenuContextHelpId()</a>, <a class="el" href="../../d8/d6/menuc_8c-source.html#l00045">GetMenuDefaultItem()</a>, <a class="el" href="../../d0/d8/clmenu_8c-source.html#l00652">GetMenuInfo()</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00213">GetMenuItemCount()</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00234">GetMenuItemID()</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00260">GetMenuState()</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00350">GetSubMenu()</a>, <a class="el" href="../../d8/d6/menuc_8c-source.html#l00062">SetMenuItemInfoStruct()</a>, and <a class="el" href="../../d0/d8/clmenu_8c-source.html#l00454">ValidateMENUITEMINFO()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a23" doxytag="usercli.h::VALIDATEHMONITOR" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define VALIDATEHMONITOR          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">hmonitor&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;((<a class="el" href="../../d0/d2/structtagMONITOR.html">PMONITOR</a>)HMValidateSharedHandle(hmonitor, TYPE_MONITOR))</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00197">197</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00927">CascadeWindowsEnum()</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l01824">GetMonitorInfo()</a>, and <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01072">TileWindowsEnum()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a253" doxytag="usercli.h::VERKEY_BACKSLASH" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define VERKEY_BACKSLASH&nbsp;&nbsp;&nbsp;0xDC   /* Vertual key for '\' character */          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01753">1753</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02183">xxxLBoxCtlKeyInput()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a252" doxytag="usercli.h::VERKEY_SLASH" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define VERKEY_SLASH&nbsp;&nbsp;&nbsp;0xBF   /* Vertual key for '/' character */          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l01752">1752</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02183">xxxLBoxCtlKeyInput()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a273" doxytag="usercli.h::WINDOW" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define WINDOW          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">pmdi&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;(pmdi-&gt;hmenuWindow)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02070">2070</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00362">AppendToWindowsMenu()</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l03203">ChangeDibColors()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02531">DefMDIChildProcWorker()</a>, <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00574">DefWindowProcWorker()</a>, <a class="el" href="../../d0/d1/rtl_2draw_8c-source.html#l00460">DrawBox()</a>, <a class="el" href="../../d0/d1/rtl_2draw_8c-source.html#l00896">DrawEdge()</a>, <a class="el" href="../../d0/d1/rtl_2draw_8c-source.html#l00400">DrawGrip()</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l01899">LoadBmp()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01657">MDIClientWndProcWorker()</a>, <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00499">MDISetMenu()</a>, <a class="el" href="../../d9/d2/dwp_8c-source.html#l01264">xxxDefWindowProc()</a>, <a class="el" href="../../d2/d4/caption_8c-source.html#l00688">xxxDrawCaptionTemp()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00430">xxxLBSetCaret()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01237">xxxMDIActivate()</a>, and <a class="el" href="../../d6/d1/hungapp_8c-source.html#l00135">xxxRedrawHungWindow()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a257" doxytag="usercli.h::WINDOWLIST_PROP_NAME" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define WINDOWLIST_PROP_NAME&nbsp;&nbsp;&nbsp;TEXT("SysBW")          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02015">2015</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d7/d3/msgbox_8c-source.html#l01648">MB_DlgProcWorker()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a7" doxytag="usercli.h::WOWGLOBALFREE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define WOWGLOBALFREE          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">pmem&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;GlobalFree(pmem)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00131">131</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d5/d3/client_2ddetrack_8c-source.html#l00015">_ClientCopyDDEIn1()</a>, <a class="el" href="../../d5/d3/client_2ddetrack_8c-source.html#l00185">_ClientCopyDDEIn2()</a>, <a class="el" href="../../d5/d3/client_2ddetrack_8c-source.html#l00456">_ClientFreeDDEHandle()</a>, <a class="el" href="../../d3/d5/stdptcl_8c-source.html#l01479">AllocAndSetDDEData()</a>, <a class="el" href="../../d3/d5/stdptcl_8c-source.html#l00190">ClRespAdviseAck()</a>, <a class="el" href="../../d3/d5/stdptcl_8c-source.html#l00958">ClRespExecuteAck()</a>, <a class="el" href="../../d3/d5/stdptcl_8c-source.html#l00067">ClStartAdvise()</a>, <a class="el" href="../../d1/d8/hdata_8c-source.html#l00660">CopyDDEData()</a>, <a class="el" href="../../d4/d3/ddemlwp_8c-source.html#l00714">DumpDDEMessage()</a>, <a class="el" href="../../d1/d8/hdata_8c-source.html#l00491">FreeDDEData()</a>, <a class="el" href="../../d1/d8/hdata_8c-source.html#l00094">InternalCreateDataHandle()</a>, <a class="el" href="../../d1/d8/hdata_8c-source.html#l00416">InternalFreeDataHandle()</a>, <a class="el" href="../../d3/d5/stdptcl_8c-source.html#l00791">MaybeTranslateExecuteData()</a>, <a class="el" href="../../d3/d5/stdptcl_8c-source.html#l00112">SvSpontAdvise()</a>, and <a class="el" href="../../d3/d5/stdptcl_8c-source.html#l00885">SvSpontExecute()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a263" doxytag="usercli.h::WS_MDIALLOWED" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define WS_MDIALLOWED&nbsp;&nbsp;&nbsp;(WS_MINIMIZE | WS_MAXIMIZE | WS_CLIPCHILDREN | WS_DISABLED | WS_HSCROLL | WS_VSCROLL | 0x0000FFFFL)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02057">2057</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02794">CreateMDIChild()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a262" doxytag="usercli.h::WS_MDICOMMANDS" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define WS_MDICOMMANDS&nbsp;&nbsp;&nbsp;(WS_SYSMENU | WS_MINIMIZEBOX | WS_MAXIMIZEBOX)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02056">2056</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a261" doxytag="usercli.h::WS_MDISTYLE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define WS_MDISTYLE&nbsp;&nbsp;&nbsp;(WS_CHILD | WS_CLIPSIBLINGS | WS_SYSMENU|WS_CAPTION|WS_THICKFRAME|WS_MAXIMIZEBOX|WS_MINIMIZEBOX)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02055">2055</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02794">CreateMDIChild()</a>.    </td>
  </tr>
</table>
<hr><h2>Typedef Documentation</h2>
<a class="anchor" name="a394" doxytag="usercli.h::ACCELCACHE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d9/d7/structtagACCELCACHE.html">tagACCELCACHE</a>  <a class="el" href="../../d9/d7/structtagACCELCACHE.html">ACCELCACHE</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d5/d8/clres_8c-source.html#l00327">AddAccResource()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a364" doxytag="usercli.h::BLOCK" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d7/d8/structtagBLOCK.html">tagBLOCK</a>   <a class="el" href="../../d7/d8/structtagBLOCK.html">BLOCK</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d9/d3/editec_8c-source.html#l03692">ECCalcChangeSelection()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a347" doxytag="usercli.h::CFNSCSENDMESSAGE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef LRESULT(APIENTRY * <a class="el" href="../../d6/d0/usercli_8h.html#a347">CFNSCSENDMESSAGE</a>)(HWND, UINT, WPARAM, LPARAM, ULONG_PTR, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>, BOOL)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00048">48</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a375" doxytag="usercli.h::CURSORRESOURCE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d0/d2/structtagCURSORRESOURCE.html">tagCURSORRESOURCE</a>  <a class="el" href="../../d0/d2/structtagCURSORRESOURCE.html">CURSORRESOURCE</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d4/d3/client_2acons_8c-source.html#l00454">ReadIconGuts()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a390" doxytag="usercli.h::DODDPROC" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef HRESULT(*  <a class="el" href="../../d6/d0/usercli_8h.html#a390">DODDPROC</a>)(LPDATAOBJECT, LPDROPSOURCE, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>, LPDWORD)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02101">2101</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a359" doxytag="usercli.h::ED" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d3/d4/structtagED.html">tagED</a>  <a class="el" href="../../d3/d4/structtagED.html">ED</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d9/d3/editec_8c-source.html#l02831">EditWndProcWorker()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a362" doxytag="usercli.h::EDITWND" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d4/d4/structtagEDITWND.html">tagEDITWND</a>  <a class="el" href="../../d4/d4/structtagEDITWND.html">EDITWND</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d7/d7/clinit_8c-source.html#l00378">RW_RegisterControls()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a380" doxytag="usercli.h::FILEINFO" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d1/d2/struct__FILEINFO.html">_FILEINFO</a>  <a class="el" href="../../d1/d2/struct__FILEINFO.html">FILEINFO</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d5/d8/clres_8c-source.html#l01573">LoadCursorIconFromResource()</a>, and <a class="el" href="../../d4/d1/rtlres_8c-source.html#l00142">RtlLoadObjectFromDIBFile()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a348" doxytag="usercli.h::GENERICPROC" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef int(WINAPI * <a class="el" href="../../d6/d0/usercli_8h.html#a348">GENERICPROC</a>)()          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00174">174</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d1/d8/clmsg_8c-source.html#l01513">_ClientGetListboxString()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a393" doxytag="usercli.h::GETPROCINFO" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d9/d5/structtagGETPROCINFO.html">tagGETPROCINFO</a>  <a class="el" href="../../d9/d5/structtagGETPROCINFO.html">GETPROCINFO</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d0/d7/menuddc_8c-source.html#l00281">LoadOLEOnce()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a350" doxytag="usercli.h::IN_STRING" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d8/d1/struct__IN__STRING.html">_IN_STRING</a>  <a class="el" href="../../d8/d1/struct__IN__STRING.html">IN_STRING</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00959">SystemParametersInfo()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a352" doxytag="usercli.h::LARGE_IN_STRING" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d8/d8/struct__LARGE__IN__STRING.html">_LARGE_IN_STRING</a>  <a class="el" href="../../d8/d8/struct__LARGE__IN__STRING.html">LARGE_IN_STRING</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l01197">_CreateWindowEx()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a367" doxytag="usercli.h::LBItem" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d6/d9/structtagLBItem.html">tagLBItem</a>  <a class="el" href="../../d6/d9/structtagLBItem.html">LBItem</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l00176">LBGetItemData()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a369" doxytag="usercli.h::LBODItem" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d8/d9/structtagLBODItem.html">tagLBODItem</a>  <a class="el" href="../../d8/d9/structtagLBODItem.html">LBODItem</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l00176">LBGetItemData()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a354" doxytag="usercli.h::LOOKASIDE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d2/d4/struct__LOOKASIDE.html">_LOOKASIDE</a>  <a class="el" href="../../d2/d4/struct__LOOKASIDE.html">LOOKASIDE</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a365" doxytag="usercli.h::LPBLOCK" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d7/d8/structtagBLOCK.html">tagBLOCK</a> * <a class="el" href="../../d7/d8/structtagBLOCK.html">LPBLOCK</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d9/d3/editec_8c-source.html#l03652">ECFindXORblks()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a368" doxytag="usercli.h::lpLBItem" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d6/d9/structtagLBItem.html">tagLBItem</a> * <a class="el" href="../../d6/d9/structtagLBItem.html">lpLBItem</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d7/d0/lb1_8c-source.html#l00842">GetLpszItem()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a370" doxytag="usercli.h::lpLBODItem" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d8/d9/structtagLBODItem.html">tagLBODItem</a> * <a class="el" href="../../d8/d9/structtagLBODItem.html">lpLBODItem</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l00176">LBGetItemData()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a399" doxytag="usercli.h::LPREADERMODE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d0/d5/structtagREADERMODE.html">tagREADERMODE</a> * <a class="el" href="../../d0/d5/structtagREADERMODE.html">LPREADERMODE</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a366" doxytag="usercli.h::LPSTRIPINFO" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef <a class="el" href="../../d6/d7/structSTRIPINFO.html">STRIPINFO</a> FAR* <a class="el" href="../../d6/d0/usercli_8h.html#a366">LPSTRIPINFO</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00770">770</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/editec_8c-source.html#l00117">GetActualNegA()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a384" doxytag="usercli.h::MDIACTIVATEPOS" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d9/d0/structtagMDIACTIVATEPOS.html">tagMDIACTIVATEPOS</a>  <a class="el" href="../../d9/d0/structtagMDIACTIVATEPOS.html">MDIACTIVATEPOS</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00775">MDIActivateDlgInit()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a391" doxytag="usercli.h::MNIDROPTARGET" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d8/d1/structtagMNIDROPTARGET.html">tagMNIDROPTARGET</a>  <a class="el" href="../../d8/d1/structtagMNIDROPTARGET.html">MNIDROPTARGET</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d0/d7/menuddc_8c-source.html#l00224">__ClientRegisterDragDrop()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a386" doxytag="usercli.h::OLEINITIALIZEPROC" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef HRESULT(*  <a class="el" href="../../d6/d0/usercli_8h.html#a386">OLEINITIALIZEPROC</a>)(<a class="el" href="../../d0/d5/perfuser_8c.html#a5">LPVOID</a>)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02097">2097</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d0/d7/menuddc_8c-source.html#l00281">LoadOLEOnce()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a387" doxytag="usercli.h::OLEUNINITIALIZEPROC" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef HRESULT(*  <a class="el" href="../../d6/d0/usercli_8h.html#a387">OLEUNINITIALIZEPROC</a>)(VOID)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02098">2098</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a395" doxytag="usercli.h::PACCELCACHE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d9/d7/structtagACCELCACHE.html">tagACCELCACHE</a> * <a class="el" href="../../d9/d7/structtagACCELCACHE.html">PACCELCACHE</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a376" doxytag="usercli.h::PCURSORRESOURCE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d0/d2/structtagCURSORRESOURCE.html">tagCURSORRESOURCE</a> * <a class="el" href="../../d0/d2/structtagCURSORRESOURCE.html">PCURSORRESOURCE</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a360" doxytag="usercli.h::PED" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d3/d4/structtagED.html">tagED</a> * <a class="el" href="../../d3/d4/structtagED.html">PED</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a363" doxytag="usercli.h::PEDITWND" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d4/d4/structtagEDITWND.html">tagEDITWND</a> * <a class="el" href="../../d4/d4/structtagEDITWND.html">PEDITWND</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d9/d3/editec_8c-source.html#l02831">EditWndProcWorker()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a381" doxytag="usercli.h::PFILEINFO" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d1/d2/struct__FILEINFO.html">_FILEINFO</a> * <a class="el" href="../../d1/d2/struct__FILEINFO.html">PFILEINFO</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a351" doxytag="usercli.h::PIN_STRING" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d8/d1/struct__IN__STRING.html">_IN_STRING</a> * <a class="el" href="../../d8/d1/struct__IN__STRING.html">PIN_STRING</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d1/d7/ntcftxt_8h-source.html#l00535">InitClsMenuName()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a353" doxytag="usercli.h::PLARGE_IN_STRING" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d8/d8/struct__LARGE__IN__STRING.html">_LARGE_IN_STRING</a> * <a class="el" href="../../d8/d8/struct__LARGE__IN__STRING.html">PLARGE_IN_STRING</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d2/d1/rtlinit_8c-source.html#l00095">RtlCaptureLargeAnsiString()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a355" doxytag="usercli.h::PLOOKASIDE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d2/d4/struct__LOOKASIDE.html">_LOOKASIDE</a> * <a class="el" href="../../d2/d4/struct__LOOKASIDE.html">PLOOKASIDE</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d2/d1/rtlinit_8c-source.html#l00221">InitLookaside()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a385" doxytag="usercli.h::PMDIACTIVATEPOS" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d9/d0/structtagMDIACTIVATEPOS.html">tagMDIACTIVATEPOS</a> * <a class="el" href="../../d9/d0/structtagMDIACTIVATEPOS.html">PMDIACTIVATEPOS</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00685">MDIActivateDlgSize()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a392" doxytag="usercli.h::PMNIDROPTARGET" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d8/d1/structtagMNIDROPTARGET.html">tagMNIDROPTARGET</a> *  <a class="el" href="../../d8/d1/structtagMNIDROPTARGET.html">PMNIDROPTARGET</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d0/d7/menuddc_8c-source.html#l00224">__ClientRegisterDragDrop()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a361" doxytag="usercli.h::PPED" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d3/d4/structtagED.html">tagED</a> ** <a class="el" href="../../d3/d4/structtagED.html">PPED</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a401" doxytag="usercli.h::PREADERINFO" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d9/d4/structtagREADERINFO.html">tagREADERINFO</a> * <a class="el" href="../../d9/d4/structtagREADERINFO.html">PREADERINFO</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d9/d4/reader_8c-source.html#l00017">FReader2Dim()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a398" doxytag="usercli.h::PREADERMODE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d0/d5/structtagREADERMODE.html">tagREADERMODE</a> * <a class="el" href="../../d0/d5/structtagREADERMODE.html">PREADERMODE</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d9/d4/reader_8c-source.html#l00158">ReaderWndProc()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a403" doxytag="usercli.h::PREADERWND" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d1/d5/structtagREADERWND.html">tagREADERWND</a> * <a class="el" href="../../d1/d5/structtagREADERWND.html">PREADERWND</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d9/d4/reader_8c-source.html#l00158">ReaderWndProc()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a383" doxytag="usercli.h::PSHORTCREATE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d5/d6/structtagSHORTCREATE.html">tagSHORTCREATE</a> * <a class="el" href="../../d5/d6/structtagSHORTCREATE.html">PSHORTCREATE</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02794">CreateMDIChild()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a372" doxytag="usercli.h::PSTAT" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d1/d7/structtagSTAT.html">tagSTAT</a> * <a class="el" href="../../d1/d7/structtagSTAT.html">PSTAT</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d1/d1/lboxctl3_8c-source.html#l00061">ChopText()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a374" doxytag="usercli.h::PSTATWND" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d3/d7/structtagSTATWND.html">tagSTATWND</a> * <a class="el" href="../../d3/d7/structtagSTATWND.html">PSTATWND</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d1/d1/lboxctl3_8c-source.html#l00061">ChopText()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a358" doxytag="usercli.h::PUNDO" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d9/d8/structtagUNDO.html">tagUNDO</a> * <a class="el" href="../../d9/d8/structtagUNDO.html">PUNDO</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d9/d3/editec_8c-source.html#l01955">ECSaveUndo()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a400" doxytag="usercli.h::READERINFO" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d9/d4/structtagREADERINFO.html">tagREADERINFO</a>  <a class="el" href="../../d9/d4/structtagREADERINFO.html">READERINFO</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d9/d4/reader_8c-source.html#l00158">ReaderWndProc()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a397" doxytag="usercli.h::READERMODE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d0/d5/structtagREADERMODE.html">tagREADERMODE</a>  <a class="el" href="../../d0/d5/structtagREADERMODE.html">READERMODE</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d9/d4/reader_8c-source.html#l00158">ReaderWndProc()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a396" doxytag="usercli.h::READERMODEPROC" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef LONG(CALLBACK* <a class="el" href="../../d6/d0/usercli_8h.html#a396">READERMODEPROC</a>)(LPARAM lParam, int nCode, int dx, int dy)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02160">2160</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a402" doxytag="usercli.h::READERWND" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d1/d5/structtagREADERWND.html">tagREADERWND</a>  <a class="el" href="../../d1/d5/structtagREADERWND.html">READERWND</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a388" doxytag="usercli.h::REGISTERDDPROC" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef HRESULT(*  <a class="el" href="../../d6/d0/usercli_8h.html#a388">REGISTERDDPROC</a>)(HWND, LPDROPTARGET)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02099">2099</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d0/d7/menuddc_8c-source.html#l00224">__ClientRegisterDragDrop()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a389" doxytag="usercli.h::REVOKEDDPROC" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef HRESULT(*  <a class="el" href="../../d6/d0/usercli_8h.html#a389">REVOKEDDPROC</a>)(HWND)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02100">2100</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d0/d7/menuddc_8c-source.html#l00261">__ClientRevokeDragDrop()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a382" doxytag="usercli.h::SHORTCREATE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d5/d6/structtagSHORTCREATE.html">tagSHORTCREATE</a>  <a class="el" href="../../d5/d6/structtagSHORTCREATE.html">SHORTCREATE</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l01197">_CreateWindowEx()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a371" doxytag="usercli.h::STAT" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d1/d7/structtagSTAT.html">tagSTAT</a>  <a class="el" href="../../d1/d7/structtagSTAT.html">STAT</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d6/d4/statctl_8c-source.html#l00840">StaticWndProcWorker()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a373" doxytag="usercli.h::STATWND" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d3/d7/structtagSTATWND.html">tagSTATWND</a>  <a class="el" href="../../d3/d7/structtagSTATWND.html">STATWND</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d7/d7/clinit_8c-source.html#l00378">RW_RegisterControls()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a356" doxytag="usercli.h::TL" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d5/d1/struct__TL.html">_TL</a>  <a class="el" href="../../d5/d1/struct__TL.html">TL</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d9/d2/ntuser_2kernel_2access_8c-source.html#l02898">SoundSentryTimer()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a357" doxytag="usercli.h::UNDO" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d9/d8/structtagUNDO.html">tagUNDO</a>  <a class="el" href="../../d9/d8/structtagUNDO.html">UNDO</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d9/d3/editec_8c-source.html#l01955">ECSaveUndo()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a379" doxytag="usercli.h::UPBITMAPCOREHEADER" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef BITMAPCOREHEADER UNALIGNED* <a class="el" href="../../d6/d0/usercli_8h.html#a379">UPBITMAPCOREHEADER</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00924">924</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d4/d1/rtlres_8c-source.html#l00142">RtlLoadObjectFromDIBFile()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a377" doxytag="usercli.h::UPBITMAPINFO" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef BITMAPINFO UNALIGNED* <a class="el" href="../../d6/d0/usercli_8h.html#a377">UPBITMAPINFO</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00922">922</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a378" doxytag="usercli.h::UPBITMAPINFOHEADER" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef BITMAPINFOHEADER UNALIGNED* <a class="el" href="../../d6/d0/usercli_8h.html#a378">UPBITMAPINFOHEADER</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l00923">923</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d5/d8/clres_8c-source.html#l03546">CopyDibHdr()</a>, <a class="el" href="../../d7/d9/extract_8c-source.html#l00517">ExtractIconFromEXE()</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l03165">HowManyColors()</a>, and <a class="el" href="../../d4/d1/rtlres_8c-source.html#l00142">RtlLoadObjectFromDIBFile()</a>.    </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="a550" doxytag="usercli.h::_ClientFreeLibrary" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL _ClientFreeLibrary           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HANDLE&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hmod</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a551" doxytag="usercli.h::_ClientGetListboxString" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> _ClientGetListboxString           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>msg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>ULONG_PTR&nbsp;</td>
          <td class="mdname" nowrap> <em>xParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PROC&nbsp;</td>
          <td class="mdname" nowrap> <em>xpfn</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d8/clmsg_8c-source.html#l01513">1513</a> of file <a class="el" href="../../d1/d8/clmsg_8c-source.html">clmsg.c</a>.
<p>
References <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00174">GENERICPROC</a>, and <a class="el" href="../../d3/d0/userexts_8c-source.html#l01830">msg</a>.
<p>
<pre class="fragment"><div>01520 {
01521     <span class="keywordflow">return</span> ((<a class="code" href="../../d6/d0/usercli_8h.html#a348">GENERICPROC</a>)xpfn)(pwnd, <a class="code" href="../../d2/d1/userexts_8c.html#a129">msg</a>, wParam, (LPARAM)lParam, xParam);
01522 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a624" doxytag="usercli.h::_CreateWindowEx" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HWND _CreateWindowEx           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwExStyle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPCTSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>pClassName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPCTSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>pWindowName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwStyle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>x</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>y</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>nWidth</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>nHeight</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwndParent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HMENU&nbsp;</td>
          <td class="mdname" nowrap> <em>hmenu</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hModule</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a5">LPVOID</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwFlags</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l01197">1197</a> of file <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html">client/ntstubs.c</a>.
<p>
References <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l00451">_LARGE_STRING::bAnsi</a>, <a class="el" href="../../d8/d8/ntsend_8h-source.html#l00027">BEGINCALL</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00421">_LARGE_STRING::Buffer</a>, <a class="el" href="../../d8/d8/ntsend_8h-source.html#l00176">CLEANUPLPSTRW</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02794">CreateMDIChild()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02744">CW_FLAGS_DIFFHMOD</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02035">tagSHORTCREATE::cx</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02034">tagSHORTCREATE::cy</a>, <a class="el" href="../../d4/d7/propapi_8h-source.html#l00043">dwFlags</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d8/d8/ntsend_8h-source.html#l00047">ENDCALL</a>, <a class="el" href="../../d8/d8/ntsend_8h-source.html#l00035">ERRORTRAP</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00322">_LARGE_IN_STRING::fAllocated</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00799">FNID_MDICLIENT</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00916">GETEXPWINVER</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00843">GETFNID</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02039">tagSHORTCREATE::hMenu</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00410">IS_PTR</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d6/d0/usercli_8h.html#a352">LARGE_IN_STRING</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l00449">_LARGE_STRING::Length</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l00450">_LARGE_STRING::MaximumLength</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02735">MDICompleteChildCreation()</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l08087">NtUserCreateWindowEx()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d0/d7/halvprnt_8c-source.html#l00031">PBYTE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00321">_LARGE_IN_STRING::pstr</a>, <a class="el" href="../../d2/d1/rtlinit_8c-source.html#l00095">RtlCaptureLargeAnsiString()</a>, <a class="el" href="../../d6/d5/chartran_8c-source.html#l00608">RtlInitLargeAnsiString()</a>, <a class="el" href="../../d6/d5/chartran_8c-source.html#l00636">RtlInitLargeUnicodeString()</a>, <a class="el" href="../../d6/d0/usercli_8h.html#a382">SHORTCREATE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00320">_LARGE_IN_STRING::strCapture</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02038">tagSHORTCREATE::style</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00120">ValidateHwnd</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00475">VER40</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00728">WS_EX_ANSICREATOR</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00727">WS_EX_MDICHILD</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02037">tagSHORTCREATE::x</a>, and <a class="el" href="../../d7/d9/usercli_8h-source.html#l02036">tagSHORTCREATE::y</a>.
<p>
Referenced by <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00038">CreateWindowEx()</a>, <a class="el" href="../../d9/d4/reader_8c-source.html#l00355">EnterReaderMode()</a>, <a class="el" href="../../d0/d3/ddemlcli_8c-source.html#l00065">InternalDdeInitialize()</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l02696">UserRegisterWowHandlers()</a>, and <a class="el" href="../../d4/d3/comboini_8c-source.html#l00070">xxxCBCreateHandler()</a>.
<p>
<pre class="fragment"><div>01211 {
01212     <a class="code" href="../../d8/d8/struct__LARGE__IN__STRING.html">LARGE_IN_STRING</a> strClassName;
01213     <a class="code" href="../../d1/d9/struct__LARGE__STRING.html">LARGE_STRING</a> strWindowName;
01214     <a class="code" href="../../d1/d9/struct__LARGE__STRING.html">PLARGE_STRING</a> pstrClassName;
01215     <a class="code" href="../../d1/d9/struct__LARGE__STRING.html">PLARGE_STRING</a> pstrWindowName;
01216     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwExpWinVerAndFlags;
01217 
01218     <span class="comment">/*</span>
01219 <span class="comment">     * Make sure cleanup will work successfully</span>
01220 <span class="comment">     */</span>
01221     strClassName.<a class="code" href="../../d8/d8/struct__LARGE__IN__STRING.html#o2">fAllocated</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01222 
01223     <span class="comment">/*</span>
01224 <span class="comment">     * To be compatible with Chicago, we test the validity of</span>
01225 <span class="comment">     * the ExStyle bits and fail if any invalid bits are found.</span>
01226 <span class="comment">     * And for backward compatibilty with NT apps, we only fail for</span>
01227 <span class="comment">     * new apps (post NT 3.1).</span>
01228 <span class="comment">     */</span>
01229 
01230 <span class="comment">// BOGUS</span>
01231 
01232     <span class="keywordflow">if</span> (dwExStyle &amp; 0x00000800<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>) {
01233         dwExStyle |= WS_EX_TOOLWINDOW;
01234         dwExStyle &amp;= 0xfffff7ff<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>;
01235     }
01236 
01237     dwExpWinVerAndFlags = (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)(WORD)<a class="code" href="../../d6/d0/usercli_8h.html#a134">GETEXPWINVER</a>(hModule);
01238     <span class="keywordflow">if</span> ((dwExStyle &amp; ~WS_EX_VALID50) &amp;&amp; (dwExpWinVerAndFlags &gt;= <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a101">VER40</a>) ) {
01239         RIPMSG0(RIP_ERROR, <span class="stringliteral">"Invalid 5.0 ExStyle\n"</span>);
01240         <span class="keywordflow">return</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
01241     }
01242     {
01243 
01244     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fMDIchild = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01245     MDICREATESTRUCT mdics;
01246     HMENU hSysMenu;
01247 
01248     <a class="code" href="../../d7/d9/ntsend_8h.html#a1">BEGINCALL</a>()
01249 
01250         if ((fMDIchild = (BOOL)(dwExStyle &amp; WS_EX_MDICHILD))) {
01251             <a class="code" href="../../d5/d6/structtagSHORTCREATE.html">SHORTCREATE</a> sc;
01252             <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwndParent;
01253 
01254             pwndParent = <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(hwndParent);
01255 
01256             <span class="keywordflow">if</span> ((pwndParent == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) || (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a232">GETFNID</a>(pwndParent) != <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a206">FNID_MDICLIENT</a>)) {
01257                 RIPMSG0(RIP_ERROR, <span class="stringliteral">"Invalid parent for MDI child window\n"</span>);
01258                 <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>();
01259             }
01260 
01261             mdics.lParam  = (LPARAM)pParam;
01262             pParam = &amp;mdics;
01263             mdics.x = sc.<a class="code" href="../../d5/d6/structtagSHORTCREATE.html#o3">x</a> = x;
01264             mdics.y = sc.<a class="code" href="../../d5/d6/structtagSHORTCREATE.html#o2">y</a> = y;
01265             mdics.cx = sc.<a class="code" href="../../d5/d6/structtagSHORTCREATE.html#o1">cx</a> = nWidth;
01266             mdics.cy = sc.<a class="code" href="../../d5/d6/structtagSHORTCREATE.html#o0">cy</a> = nHeight;
01267             mdics.style = sc.<a class="code" href="../../d5/d6/structtagSHORTCREATE.html#o4">style</a> = dwStyle;
01268             mdics.hOwner = hModule;
01269             mdics.szClass = pClassName;
01270             mdics.szTitle = pWindowName;
01271 
01272             <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d0/usercli_8h.html#a773">CreateMDIChild</a>(&amp;sc, &amp;mdics, dwExpWinVerAndFlags, &amp;hSysMenu, pwndParent))
01273                 <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>();
01274 
01275             x = sc.<a class="code" href="../../d5/d6/structtagSHORTCREATE.html#o3">x</a>;
01276             y = sc.<a class="code" href="../../d5/d6/structtagSHORTCREATE.html#o2">y</a>;
01277             nWidth = sc.<a class="code" href="../../d5/d6/structtagSHORTCREATE.html#o1">cx</a>;
01278             nHeight = sc.<a class="code" href="../../d5/d6/structtagSHORTCREATE.html#o0">cy</a>;
01279             dwStyle = sc.<a class="code" href="../../d5/d6/structtagSHORTCREATE.html#o4">style</a>;
01280             hmenu = sc.<a class="code" href="../../d5/d6/structtagSHORTCREATE.html#o5">hMenu</a>;
01281         }
01282 
01283         <span class="comment">/*</span>
01284 <span class="comment">         * Set up class and window name.  If the window name is an</span>
01285 <span class="comment">         * ordinal, make it look like a string so the callback thunk</span>
01286 <span class="comment">         * will be able to ensure it is in the correct format.</span>
01287 <span class="comment">         */</span>
01288         pstrWindowName = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
01289         <span class="keywordflow">if</span> (<a class="code" href="../../d3/d8/propapi_8h.html#a34">dwFlags</a> &amp; CW_FLAGS_ANSI) {
01290             dwExStyle = dwExStyle | <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a188">WS_EX_ANSICREATOR</a>;
01291             <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a98">IS_PTR</a>(pClassName)) {
01292                 <a class="code" href="../../d6/d0/usercli_8h.html#a430">RtlCaptureLargeAnsiString</a>(&amp;strClassName,
01293                         (PCHAR)pClassName, TRUE);
01294                 pstrClassName = (<a class="code" href="../../d1/d9/struct__LARGE__STRING.html">PLARGE_STRING</a>)strClassName.<a class="code" href="../../d8/d8/struct__LARGE__IN__STRING.html#o1">pstr</a>;
01295             } <span class="keywordflow">else</span>
01296                 pstrClassName = (<a class="code" href="../../d1/d9/struct__LARGE__STRING.html">PLARGE_STRING</a>)pClassName;
01297 
01298             <span class="keywordflow">if</span> (pWindowName != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01299                 <span class="keywordflow">if</span> (*(<a class="code" href="../../d9/d7/halvprnt_8c.html#a1">PBYTE</a>)pWindowName == 0xff) {
01300                     strWindowName.<a class="code" href="../../d1/d9/struct__LARGE__STRING.html#o2">bAnsi</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01301                     strWindowName.<a class="code" href="../../d1/d9/struct__LARGE__STRING.html#o3">Buffer</a> = (PVOID)pWindowName;
01302                     strWindowName.<a class="code" href="../../d1/d9/struct__LARGE__STRING.html#o0">Length</a> = 3;
01303                     strWindowName.<a class="code" href="../../d1/d9/struct__LARGE__STRING.html#o1">MaximumLength</a> = 3;
01304                 } <span class="keywordflow">else</span>
01305                     <a class="code" href="../../d5/d6/chartran_8c.html#a6">RtlInitLargeAnsiString</a>((<a class="code" href="../../d5/d8/struct__LARGE__ANSI__STRING.html">PLARGE_ANSI_STRING</a>)&amp;strWindowName,
01306                             (LPSTR)pWindowName, (UINT)-1);
01307                 pstrWindowName = &amp;strWindowName;
01308             }
01309         } <span class="keywordflow">else</span> {
01310             <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a98">IS_PTR</a>(pClassName)) {
01311                 <a class="code" href="../../d5/d6/chartran_8c.html#a7">RtlInitLargeUnicodeString</a>(
01312                         (<a class="code" href="../../d2/d9/struct__LARGE__UNICODE__STRING.html">PLARGE_UNICODE_STRING</a>)&amp;strClassName.<a class="code" href="../../d8/d8/struct__LARGE__IN__STRING.html#o0">strCapture</a>,
01313                         pClassName, (UINT)-1);
01314                 pstrClassName = (<a class="code" href="../../d1/d9/struct__LARGE__STRING.html">PLARGE_STRING</a>)&amp;strClassName.<a class="code" href="../../d8/d8/struct__LARGE__IN__STRING.html#o0">strCapture</a>;
01315             } <span class="keywordflow">else</span>
01316                 pstrClassName = (<a class="code" href="../../d1/d9/struct__LARGE__STRING.html">PLARGE_STRING</a>)pClassName;
01317 
01318             <span class="keywordflow">if</span> (pWindowName != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01319                 <span class="keywordflow">if</span> (pWindowName != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> &amp;&amp;
01320                      *(PWORD)pWindowName == 0xffff) {
01321                     strWindowName.<a class="code" href="../../d1/d9/struct__LARGE__STRING.html#o2">bAnsi</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01322                     strWindowName.<a class="code" href="../../d1/d9/struct__LARGE__STRING.html#o3">Buffer</a> = (PVOID)pWindowName;
01323                     strWindowName.<a class="code" href="../../d1/d9/struct__LARGE__STRING.html#o0">Length</a> = 4;
01324                     strWindowName.<a class="code" href="../../d1/d9/struct__LARGE__STRING.html#o1">MaximumLength</a> = 4;
01325                 } <span class="keywordflow">else</span>
01326                     <a class="code" href="../../d5/d6/chartran_8c.html#a7">RtlInitLargeUnicodeString</a>((<a class="code" href="../../d2/d9/struct__LARGE__UNICODE__STRING.html">PLARGE_UNICODE_STRING</a>)&amp;strWindowName,
01327                             pWindowName, (UINT)-1);
01328                 pstrWindowName = &amp;strWindowName;
01329             }
01330         }
01331         <span class="keywordflow">if</span> (<a class="code" href="../../d3/d8/propapi_8h.html#a34">dwFlags</a> &amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a771">CW_FLAGS_DIFFHMOD</a>) {
01332             dwExpWinVerAndFlags |= <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a771">CW_FLAGS_DIFFHMOD</a>;
01333         }
01334 
01335         retval = (ULONG_PTR)<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a290">NtUserCreateWindowEx</a>(
01336                 dwExStyle,
01337                 pstrClassName,
01338                 pstrWindowName,
01339                 dwStyle,
01340                 x,
01341                 y,
01342                 nWidth,
01343                 nHeight,
01344                 hwndParent,
01345                 hmenu,
01346                 hModule,
01347                 pParam,
01348                 dwExpWinVerAndFlags);
01349 
01350     <span class="comment">// If this is an MDI child, we need to do some more to complete the</span>
01351     <span class="comment">// process of creating an MDI child.</span>
01352     <span class="keywordflow">if</span> (retval &amp;&amp; fMDIchild) {
01353         <a class="code" href="../../d6/d0/usercli_8h.html#a774">MDICompleteChildCreation</a>((HWND)retval, hSysMenu, ((dwStyle &amp; WS_VISIBLE) != 0L), (BOOL)((dwStyle &amp; WS_DISABLED)!= 0L));
01354     }
01355 
01356 
01357     <a class="code" href="../../d7/d9/ntsend_8h.html#a3">ERRORTRAP</a>(0);
01358     <a class="code" href="../../d7/d9/ntsend_8h.html#a29">CLEANUPLPSTRW</a>(strClassName);
01359     <a class="code" href="../../d7/d9/ntsend_8h.html#a5">ENDCALL</a>(HWND);
01360     }
01361 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a622" doxytag="usercli.h::_DefSetText" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL _DefSetText           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPCWSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>pstr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>bAnsi</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l01171">1171</a> of file <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html">client/ntstubs.c</a>.
<p>
References <a class="el" href="../../d8/d8/ntsend_8h-source.html#l00027">BEGINCALL</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d8/d8/ntsend_8h-source.html#l00047">ENDCALL</a>, <a class="el" href="../../d8/d8/ntsend_8h-source.html#l00035">ERRORTRAP</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l07490">NtUserDefSetText()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d0/d0/client_2nt6_2user_8h.html#a971">PLARGE_ANSI_STRING</a>, <a class="el" href="../../d6/d5/chartran_8c-source.html#l00608">RtlInitLargeAnsiString()</a>, <a class="el" href="../../d6/d5/chartran_8c-source.html#l00636">RtlInitLargeUnicodeString()</a>, and <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>.
<p>
Referenced by <a class="el" href="../../d9/d0/btnctl_8c-source.html#l01338">ButtonWndProcWorker()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01657">MDIClientWndProcWorker()</a>, <a class="el" href="../../d6/d4/statctl_8c-source.html#l00840">StaticWndProcWorker()</a>, and <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00032">xxxSetFrameTitle()</a>.
<p>
<pre class="fragment"><div>01175 {
01176     <a class="code" href="../../d1/d9/struct__LARGE__STRING.html">LARGE_STRING</a> str;
01177 
01178     <a class="code" href="../../d7/d9/ntsend_8h.html#a1">BEGINCALL</a>()
01179 
01180         if (lpszText) {
01181             <span class="keywordflow">if</span> (bAnsi)
01182                 <a class="code" href="../../d5/d6/chartran_8c.html#a6">RtlInitLargeAnsiString</a>((<a class="code" href="../../d5/d8/struct__LARGE__ANSI__STRING.html">PLARGE_ANSI_STRING</a>)&amp;str,
01183                         (LPSTR)lpszText, (UINT)-1);
01184             <span class="keywordflow">else</span>
01185                 <a class="code" href="../../d5/d6/chartran_8c.html#a7">RtlInitLargeUnicodeString</a>((<a class="code" href="../../d2/d9/struct__LARGE__UNICODE__STRING.html">PLARGE_UNICODE_STRING</a>)&amp;str,
01186                         lpszText, (UINT)-1);
01187         }
01188 
01189         retval = (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a275">NtUserDefSetText</a>(
01190                 hwnd,
01191                 lpszText ? &amp;str : NULL);
01192 
01193     <a class="code" href="../../d7/d9/ntsend_8h.html#a3">ERRORTRAP</a>(0);
01194     <a class="code" href="../../d7/d9/ntsend_8h.html#a5">ENDCALL</a>(BOOL);
01195 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a752" doxytag="usercli.h::_FindDlgItem" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d6/d9/structtagWND.html">PWND</a> _FindDlgItem           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwndParent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>id</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d8/dlgmgr2_8c-source.html#l00749">749</a> of file <a class="el" href="../../d6/d8/dlgmgr2_8c-source.html">dlgmgr2.c</a>.
<p>
References <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00141">_GetDlgItem()</a>, <a class="el" href="../../d7/d8/dlgmgrc_8c-source.html#l00207">_NextControl()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01764">tagWND::spmenu</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02319">WFWIN40COMPAT</a>.
<p>
Referenced by <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l00460">DefDlgProcWorker()</a>, <a class="el" href="../../d6/d8/dlgmgr2_8c-source.html#l00317">IsDialogMessageW()</a>, and <a class="el" href="../../d6/d8/dlgmgr2_8c-source.html#l00084">xxxCheckDefPushButton()</a>.
<p>
<pre class="fragment"><div>00750 {
00751     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a>    pwndChild;
00752     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a>    pwndOrig;
00753 
00754     <span class="comment">// QUICK TRY:</span>
00755     pwndChild = <a class="code" href="../../d3/d9/client_2wow_8c.html#a5">_GetDlgItem</a>(pwndParent, <span class="keywordtype">id</span>);
00756     <span class="keywordflow">if</span> (pwndChild || !<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwndParent, WFWIN40COMPAT))
00757         <span class="keywordflow">return</span>(pwndChild);
00758 
00759     pwndOrig = <a class="code" href="../../d6/d0/usercli_8h.html#a639">_NextControl</a>(pwndParent, NULL, CWP_SKIPINVISIBLE);
00760     <span class="keywordflow">if</span> (pwndOrig == pwndParent)
00761         <span class="keywordflow">return</span>(<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>);
00762 
00763     pwndChild = pwndOrig;
00764 
00765 <span class="comment">//    VerifyWindow(pwndChild);</span>
00766 
00767     <span class="keywordflow">do</span>
00768     {
00769         <span class="keywordflow">if</span> (PtrToUlong(pwndChild-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o16">spmenu</a>) == <span class="keywordtype">id</span>)
00770             <span class="keywordflow">return</span>(pwndChild);
00771 
00772         pwndChild = <a class="code" href="../../d6/d0/usercli_8h.html#a639">_NextControl</a>(pwndParent, pwndChild, CWP_SKIPINVISIBLE);
00773     }
00774     <span class="keywordflow">while</span> (pwndChild &amp;&amp; (pwndChild != pwndOrig));
00775 
00776     <span class="keywordflow">return</span>(<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>);
00777 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a412" doxytag="usercli.h::_FreeResource" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL APIENTRY _FreeResource           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hResData</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HINSTANCE&nbsp;</td>
          <td class="mdname" nowrap> <em>hModule</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d8/clres_8c-source.html#l01499">1499</a> of file <a class="el" href="../../d5/d8/clres_8c-source.html">clres.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>.
<p>
<pre class="fragment"><div>01502 {
01503     UNREFERENCED_PARAMETER(hResData);
01504     UNREFERENCED_PARAMETER(hModule);
01505 
01506     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01507 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a643" doxytag="usercli.h::_GetChildControl" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d6/d9/structtagWND.html">PWND</a> _GetChildControl           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwndDlg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwndLevel</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d8/dlgmgrc_8c-source.html#l00125">125</a> of file <a class="el" href="../../d7/d8/dlgmgrc_8c-source.html">dlgmgrc.c</a>.
<p>
References <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00215">REBASEPWND</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02561">TestwndChild</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02377">WEFCONTROLPARENT</a>.
<p>
Referenced by <a class="el" href="../../d7/d8/dlgmgrc_8c-source.html#l00439">_GetNextDlgGroupItem()</a>, <a class="el" href="../../d7/d8/dlgmgrc_8c-source.html#l00348">_GetNextDlgTabItem()</a>, <a class="el" href="../../d7/d8/dlgmgrc_8c-source.html#l00151">_NextSibblingOrAncestor()</a>, <a class="el" href="../../d2/d9/client_2help_8c-source.html#l00290">GetNextDlgHelpItem()</a>, <a class="el" href="../../d6/d9/dmmnem_8c-source.html#l00115">xxxGNM_FindNextMnem()</a>, and <a class="el" href="../../d6/d8/dlgmgr2_8c-source.html#l00031">xxxRemoveDefaultButton()</a>.
<p>
<pre class="fragment"><div>00125                                                       {
00126     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a>    pwndControl = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00127 
00128     <span class="keywordflow">while</span> (pwndChild &amp;&amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a735">TestwndChild</a>(pwndChild) &amp;&amp; (pwndChild != pwndRoot)) {
00129         pwndControl = pwndChild;
00130         pwndChild = <a class="code" href="../../d6/d0/usercli_8h.html#a27">REBASEPWND</a>(pwndChild, spwndParent);
00131 
00132         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwndChild, WEFCONTROLPARENT))
00133             <span class="keywordflow">break</span>;
00134     }
00135 
00136     <span class="keywordflow">return</span>(pwndControl);
00137 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a631" doxytag="usercli.h::_GetClassData" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ULONG_PTR _GetClassData           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d0/structtagCLS.html">PCLS</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pcls</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>index</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>bAnsi</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d6/classc_8c-source.html#l00100">100</a> of file <a class="el" href="../../d6/d6/classc_8c-source.html">classc.c</a>.
<p>
References <a class="el" href="../../d6/d6/classc_8c-source.html#l00021">afClassDWord</a>, <a class="el" href="../../d6/d6/classc_8c-source.html#l00051">aiClassOffset</a>, <a class="el" href="../../d0/d7/halvprnt_8c-source.html#l00031">BYTE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01561">CPD_ANSI_TO_UNICODE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01562">CPD_UNICODE_TO_ANSI</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01568">CPD_WNDTOCLS</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01686">CSF_ANSIPROC</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01744">tagCLS::CSF_flags</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01685">CSF_SERVERSIDEPROC</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01689">CSF_WOWCLASS</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01690">CSF_WOWEXTRA</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d1/d4/ntuser_2kernel_2getset_8c-source.html#l00875">GetCPD()</a>, <a class="el" href="../../d6/d6/classc_8c-source.html#l00084">INDEX_OFFSET</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00410">IS_PTR</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01666">tagCLS::lpszClientAnsiMenuName</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01667">tagCLS::lpszClientUnicodeMenuName</a>, <a class="el" href="../../d3/d4/ntuser_2rtl_2getset_8c-source.html#l00049">MapClientNeuterToClientPfn()</a>, <a class="el" href="../../d3/d4/ntuser_2rtl_2getset_8c-source.html#l00022">MapServerToClientPfn()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04602">NtUserCallHwndParam()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01512">PtoH</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01617">PWCFromPCLS</a>.
<p>
Referenced by <a class="el" href="../../d6/d6/classc_8c-source.html#l00246">_GetClassLongPtr()</a>, <a class="el" href="../../d6/d6/classc_8c-source.html#l00305">GetClassWord()</a>, and <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00100">GetClassWOWWords()</a>.
<p>
<pre class="fragment"><div>00105 {
00106     KERNEL_ULONG_PTR dwData;
00107     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwCPDType = 0;
00108 
00109     index -= <a class="code" href="../../d5/d7/classc_8c.html#a0">INDEX_OFFSET</a>;
00110 
00111     <span class="keywordflow">if</span> (index &lt; 0) {
00112         RIPERR0(ERROR_INVALID_INDEX, RIP_VERBOSE, <span class="stringliteral">""</span>);
00113         <span class="keywordflow">return</span> 0;
00114     }
00115 
00116     UserAssert(index &gt;= 0);
00117     UserAssert(index &lt; <span class="keyword">sizeof</span>(afClassDWord));
00118     UserAssert(<span class="keyword">sizeof</span>(afClassDWord) == <span class="keyword">sizeof</span>(aiClassOffset));
00119     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7/classc_8c.html#a1">afClassDWord</a>[index] == <span class="keyword">sizeof</span>(<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)) {
00120         dwData = *(<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> *)(((<a class="code" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a> *)pcls) + <a class="code" href="../../d5/d7/classc_8c.html#a2">aiClassOffset</a>[index]);
00121     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7/classc_8c.html#a1">afClassDWord</a>[index] == <span class="keyword">sizeof</span>(KERNEL_ULONG_PTR)) {
00122         dwData = *(KERNEL_ULONG_PTR *)(((<a class="code" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a> *)pcls) + <a class="code" href="../../d5/d7/classc_8c.html#a2">aiClassOffset</a>[index]);
00123     } <span class="keywordflow">else</span> {
00124         dwData = (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)*(WORD *)(((<a class="code" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a> *)pcls) + <a class="code" href="../../d5/d7/classc_8c.html#a2">aiClassOffset</a>[index]);
00125     }
00126 
00127     index += <a class="code" href="../../d5/d7/classc_8c.html#a0">INDEX_OFFSET</a>;
00128 
00129     <span class="comment">/*</span>
00130 <span class="comment">     * If we're returning an icon or cursor handle, do the reverse</span>
00131 <span class="comment">     * mapping here.</span>
00132 <span class="comment">     */</span>
00133     <span class="keywordflow">switch</span>(index) {
00134     <span class="keywordflow">case</span> GCLP_MENUNAME:
00135         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a98">IS_PTR</a>(pcls-&gt;lpszMenuName)) {
00136             <span class="comment">/*</span>
00137 <span class="comment">             * The Menu Name is a real string: return the client-side address.</span>
00138 <span class="comment">             * (If the class was registered by another app this returns an</span>
00139 <span class="comment">             * address in that app's addr. space, but it's the best we can do)</span>
00140 <span class="comment">             */</span>
00141             dwData = bAnsi ?
00142                     (ULONG_PTR)pcls-&gt;<a class="code" href="../../d7/d0/structtagCLS.html#o8">lpszClientAnsiMenuName</a> :
00143                     (ULONG_PTR)pcls-&gt;<a class="code" href="../../d7/d0/structtagCLS.html#o9">lpszClientUnicodeMenuName</a>;
00144         }
00145         <span class="keywordflow">break</span>;
00146 
00147     <span class="keywordflow">case</span> GCLP_HICON:
00148     <span class="keywordflow">case</span> GCLP_HCURSOR:
00149     <span class="keywordflow">case</span> GCLP_HICONSM:
00150         <span class="comment">/*</span>
00151 <span class="comment">         * We have to go to the kernel to convert the pcursor to a handle because</span>
00152 <span class="comment">         * cursors are allocated out of POOL, which is not accessable from the client.</span>
00153 <span class="comment">         */</span>
00154         <span class="keywordflow">if</span> (dwData) {
00155             dwData = <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a178">NtUserCallHwndParam</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a448">PtoH</a>(pwnd), index, SFI_GETCLASSICOCUR);
00156         }
00157         <span class="keywordflow">break</span>;
00158 
00159     <span class="keywordflow">case</span> GCLP_WNDPROC:
00160         {
00161 
00162         <span class="comment">/*</span>
00163 <span class="comment">         * Always return the client wndproc in case this is a server</span>
00164 <span class="comment">         * window class.</span>
00165 <span class="comment">         */</span>
00166 
00167         <span class="keywordflow">if</span> (pcls-&gt;<a class="code" href="../../d7/d0/structtagCLS.html#o7">CSF_flags</a> &amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a492">CSF_SERVERSIDEPROC</a>) {
00168             dwData = <a class="code" href="../../d2/d5/ntuser_2rtl_2getset_8c.html#a0">MapServerToClientPfn</a>(dwData, bAnsi);
00169         } <span class="keywordflow">else</span> {
00170             KERNEL_ULONG_PTR dwT = dwData;
00171 
00172             dwData = <a class="code" href="../../d2/d5/ntuser_2rtl_2getset_8c.html#a1">MapClientNeuterToClientPfn</a>(pcls, dwT, bAnsi);
00173 
00174             <span class="comment">/*</span>
00175 <span class="comment">             * If the client mapping didn't change the window proc then see if</span>
00176 <span class="comment">             * we need a callproc handle.</span>
00177 <span class="comment">             */</span>
00178             <span class="keywordflow">if</span> (dwData == dwT) {
00179                 <span class="comment">/*</span>
00180 <span class="comment">                 * Need to return a CallProc handle if there is an Ansi/Unicode mismatch</span>
00181 <span class="comment">                 */</span>
00182                 <span class="keywordflow">if</span> (bAnsi != !!(pcls-&gt;<a class="code" href="../../d7/d0/structtagCLS.html#o7">CSF_flags</a> &amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a493">CSF_ANSIPROC</a>)) {
00183                     dwCPDType |= bAnsi ? <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a459">CPD_ANSI_TO_UNICODE</a> : <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a460">CPD_UNICODE_TO_ANSI</a>;
00184                 }
00185             }
00186         }
00187 
00188         <span class="keywordflow">if</span> (dwCPDType) {
00189             ULONG_PTR dwCPD;
00190 
00191             dwCPD = <a class="code" href="../../d0/d5/ntuser_2kernel_2getset_8c.html#a7">GetCPD</a>(pwnd, dwCPDType | CPD_WNDTOCLS, KERNEL_ULONG_PTR_TO_ULONG_PTR(dwData));
00192 
00193             <span class="keywordflow">if</span> (dwCPD) {
00194                 dwData = dwCPD;
00195             } <span class="keywordflow">else</span> {
00196                 RIPMSG0(RIP_WARNING, <span class="stringliteral">"GetClassLong unable to alloc CPD returning handle\n"</span>);
00197             }
00198         }
00199         }
00200         <span class="keywordflow">break</span>;
00201 
00202     <span class="keywordflow">case</span> GCL_CBCLSEXTRA:
00203         <span class="keywordflow">if</span> ((pcls-&gt;<a class="code" href="../../d7/d0/structtagCLS.html#o7">CSF_flags</a> &amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a496">CSF_WOWCLASS</a>) &amp;&amp; (pcls-&gt;<a class="code" href="../../d7/d0/structtagCLS.html#o7">CSF_flags</a> &amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a497">CSF_WOWEXTRA</a>)) {
00204             <span class="comment">/*</span>
00205 <span class="comment">             * The 16-bit app changed its Extra bytes value.  Return the changed</span>
00206 <span class="comment">             * value.  FritzS</span>
00207 <span class="comment">             */</span>
00208 
00209             <span class="keywordflow">return</span> <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a491">PWCFromPCLS</a>(pcls)-&gt;iClsExtra;
00210         }
00211         <span class="keywordflow">else</span>
00212             <span class="keywordflow">return</span> pcls-&gt;cbclsExtra;
00213 
00214         <span class="keywordflow">break</span>;
00215 
00216     <span class="comment">/*</span>
00217 <span class="comment">     * WOW uses a pointer straight into the class structure.</span>
00218 <span class="comment">     */</span>
00219     <span class="keywordflow">case</span> GCLP_WOWWORDS:
00220         <span class="keywordflow">if</span> (pcls-&gt;<a class="code" href="../../d7/d0/structtagCLS.html#o7">CSF_flags</a> &amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a496">CSF_WOWCLASS</a>) {
00221             <span class="keywordflow">return</span> ((ULONG_PTR)<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a491">PWCFromPCLS</a>(pcls));
00222         } <span class="keywordflow">else</span>
00223             <span class="keywordflow">return</span> 0;
00224 
00225     <span class="keywordflow">case</span> GCL_STYLE:
00226         dwData &amp;= CS_VALID;
00227         <span class="keywordflow">break</span>;
00228     }
00229 
00230     <span class="keywordflow">return</span> KERNEL_ULONG_PTR_TO_ULONG_PTR(dwData);
00231 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a632" doxytag="usercli.h::_GetClassLong" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> _GetClassLong           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>index</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>bAnsi</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a623" doxytag="usercli.h::_GetCursorFrameInfo" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HCURSOR _GetCursorFrameInfo           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HCURSOR&nbsp;</td>
          <td class="mdname" nowrap> <em>hcur</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPWSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>id</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>iFrame</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>pjifRate</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPINT&nbsp;</td>
          <td class="mdname" nowrap> <em>pccur</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a754" doxytag="usercli.h::_GetDialogBaseUnits" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> long _GetDialogBaseUnits           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">VOID&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a753" doxytag="usercli.h::_GetDlgItem" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d6/d9/structtagWND.html">PWND</a> _GetDlgItem           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00141">141</a> of file <a class="el" href="../../d4/d8/client_2wow_8c-source.html">client/wow.c</a>.
<p>
References <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00215">REBASEPWND</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01764">tagWND::spmenu</a>.
<p>
Referenced by <a class="el" href="../../d6/d8/dlgmgr2_8c-source.html#l00749">_FindDlgItem()</a>, <a class="el" href="../../d1/d1/lboxctl3_8c-source.html#l00061">ChopText()</a>, <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l00460">DefDlgProcWorker()</a>, <a class="el" href="../../d3/d3/combodir_8c-source.html#l00093">DlgDirSelectComboBoxExW()</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00158">GetDlgItem()</a>, and <a class="el" href="../../d1/d1/lboxctl3_8c-source.html#l00190">xxxDlgDirListHelper()</a>.
<p>
<pre class="fragment"><div>00144 {
00145     <span class="keywordflow">if</span> (pwnd != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00146         pwnd = <a class="code" href="../../d6/d0/usercli_8h.html#a27">REBASEPWND</a>(pwnd, spwndChild);
00147         <span class="keywordflow">while</span> (pwnd != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00148             <span class="keywordflow">if</span> (PtrToLong(pwnd-&gt;spmenu) == <span class="keywordtype">id</span>)
00149                 <span class="keywordflow">break</span>;
00150             pwnd = <a class="code" href="../../d6/d0/usercli_8h.html#a27">REBASEPWND</a>(pwnd, spwndNext);
00151         }
00152     }
00153 
00154     <span class="keywordflow">return</span> pwnd;
00155 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a641" doxytag="usercli.h::_GetNextDlgGroupItem" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d6/d9/structtagWND.html">PWND</a> _GetNextDlgGroupItem           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwndDlg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fPrev</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d8/dlgmgrc_8c-source.html#l00439">439</a> of file <a class="el" href="../../d7/d8/dlgmgrc_8c-source.html">dlgmgrc.c</a>.
<p>
References <a class="el" href="../../d7/d8/dlgmgrc_8c-source.html#l00125">_GetChildControl()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d7/d8/dlgmgrc_8c-source.html#l00050">UT_NextGroupItem()</a>, <a class="el" href="../../d7/d8/dlgmgrc_8c-source.html#l00022">UT_PrevGroupItem()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02418">WFDISABLED</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02419">WFVISIBLE</a>.
<p>
Referenced by <a class="el" href="../../d7/d8/dlgmgrc_8c-source.html#l00407">GetNextDlgGroupItem()</a>, <a class="el" href="../../d6/d8/dlgmgr2_8c-source.html#l00317">IsDialogMessageW()</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l00654">xxxBNReleaseCapture()</a>, and <a class="el" href="../../d6/d9/dmmnem_8c-source.html#l00115">xxxGNM_FindNextMnem()</a>.
<p>
<pre class="fragment"><div>00443 {
00444     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwndCurrent;
00445     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fOnceAround = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00446 
00447     pwnd = pwndCurrent = <a class="code" href="../../d6/d0/usercli_8h.html#a643">_GetChildControl</a>(pwndDlg, pwnd);
00448 
00449     <span class="keywordflow">do</span> {
00450         pwnd = (fPrev ? <a class="code" href="../../d6/d9/dlgmgrc_8c.html#a0">UT_PrevGroupItem</a>(pwndDlg, pwnd) :
00451                         <a class="code" href="../../d6/d9/dlgmgrc_8c.html#a1">UT_NextGroupItem</a>(pwndDlg, pwnd));
00452 
00453         <span class="keywordflow">if</span> (pwnd == pwndCurrent)
00454             fOnceAround = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00455 
00456         <span class="keywordflow">if</span> (!pwndCurrent)
00457             pwndCurrent = pwnd;
00458     }
00459     <span class="keywordflow">while</span> (!fOnceAround &amp;&amp; ((<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFDISABLED) || !<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFVISIBLE))));
00460 
00461     <span class="keywordflow">return</span> pwnd;
00462 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a642" doxytag="usercli.h::_GetNextDlgTabItem" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d6/d9/structtagWND.html">PWND</a> _GetNextDlgTabItem           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwndDlg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fPrev</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d8/dlgmgrc_8c-source.html#l00348">348</a> of file <a class="el" href="../../d7/d8/dlgmgrc_8c-source.html">dlgmgrc.c</a>.
<p>
References <a class="el" href="../../d7/d8/dlgmgrc_8c-source.html#l00125">_GetChildControl()</a>, <a class="el" href="../../d3/d7/rtl_2winmgr_8c-source.html#l00513">_IsDescendant()</a>, <a class="el" href="../../d7/d8/dlgmgrc_8c-source.html#l00207">_NextControl()</a>, <a class="el" href="../../d7/d8/dlgmgrc_8c-source.html#l00078">_PrevControl()</a>, and <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>.
<p>
Referenced by <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l00460">DefDlgProcWorker()</a>, <a class="el" href="../../d7/d8/dlgmgrc_8c-source.html#l00318">GetNextDlgTabItem()</a>, <a class="el" href="../../d1/d8/dlgbegin_8c-source.html#l00553">InternalCreateDialog()</a>, <a class="el" href="../../d6/d8/dlgmgr2_8c-source.html#l00317">IsDialogMessageW()</a>, and <a class="el" href="../../d6/d9/dmmnem_8c-source.html#l00219">xxxGotoNextMnem()</a>.
<p>
<pre class="fragment"><div>00352 {
00353     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwndSave;
00354 
00355     <span class="keywordflow">if</span> (pwnd == pwndDlg)
00356         pwnd = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00357     <span class="keywordflow">else</span>
00358     {
00359         pwnd = <a class="code" href="../../d6/d0/usercli_8h.html#a643">_GetChildControl</a>(pwndDlg, pwnd);
00360         <span class="keywordflow">if</span> (pwnd &amp;&amp; !<a class="code" href="../../d2/d8/rtl_2winmgr_8c.html#a5">_IsDescendant</a>(pwndDlg, pwnd))
00361             <span class="keywordflow">return</span>(<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>);
00362     }
00363 
00364     <span class="comment">//</span>
00365     <span class="comment">// BACKWARD COMPATIBILITY</span>
00366     <span class="comment">//</span>
00367     <span class="comment">// Note that the result when there are no tabstops of</span>
00368     <span class="comment">// IGetNextDlgTabItem(pwndDlg, NULL, FALSE) was the last item, now</span>
00369     <span class="comment">// will be the first item.  We could put a check for fRecurse here</span>
00370     <span class="comment">// and do the old thing if not set.</span>
00371     <span class="comment">//</span>
00372 
00373     <span class="comment">// We are going to bug out if we hit the first child a second time.</span>
00374 
00375     pwndSave = pwnd;
00376 
00377     pwnd = (fPrev ? <a class="code" href="../../d6/d0/usercli_8h.html#a640">_PrevControl</a>(pwndDlg, pwnd, CWP_SKIPINVISIBLE | CWP_SKIPDISABLED) :
00378                     <a class="code" href="../../d6/d9/dlgmgrc_8c.html#a5">_NextControl</a>(pwndDlg, pwnd, CWP_SKIPINVISIBLE | CWP_SKIPDISABLED));
00379 
00380     <span class="keywordflow">if</span> (!pwnd)
00381         <span class="keywordflow">goto</span> AllOver;
00382 
00383     <span class="keywordflow">while</span> ((pwnd != pwndSave) &amp;&amp; (pwnd != pwndDlg)) {
00384         UserAssert(pwnd);
00385 
00386         <span class="keywordflow">if</span> (!pwndSave)
00387             pwndSave = pwnd;
00388 
00389         <span class="keywordflow">if</span> ((pwnd-&gt;style &amp; (WS_TABSTOP | WS_VISIBLE | WS_DISABLED))  == (WS_TABSTOP | WS_VISIBLE))
00390             <span class="comment">// Found it.</span>
00391             <span class="keywordflow">break</span>;
00392 
00393         pwnd = (fPrev ? <a class="code" href="../../d6/d0/usercli_8h.html#a640">_PrevControl</a>(pwndDlg, pwnd, CWP_SKIPINVISIBLE | CWP_SKIPDISABLED) :
00394                         <a class="code" href="../../d6/d9/dlgmgrc_8c.html#a5">_NextControl</a>(pwndDlg, pwnd, CWP_SKIPINVISIBLE | CWP_SKIPDISABLED));
00395     }
00396 
00397 AllOver:
00398     <span class="keywordflow">return</span> pwnd;
00399 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a554" doxytag="usercli.h::_GetWindowLong" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> _GetWindowLong           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>index</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>bAnsi</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a555" doxytag="usercli.h::_GetWindowWord" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> WORD _GetWindowWord           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>index</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/getsetc_8c-source.html#l00026">26</a> of file <a class="el" href="../../d5/d4/getsetc_8c-source.html">getsetc.c</a>.
<p>
References <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l03187">tagBUTN::buttonState</a>, <a class="el" href="../../d0/d7/halvprnt_8c-source.html#l00031">BYTE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00842">CBFNID</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01856">tagWND::cbwndExtra</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01767">tagWND::dwUserData</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00793">FNID_BUTTON</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00796">FNID_DIALOG</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00799">FNID_MDICLIENT</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00843">GETFNID</a>, and <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/winmgrc_8c-source.html#l00028">GetWindowWord()</a>.
<p>
<pre class="fragment"><div>00029 {
00030     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a232">GETFNID</a>(pwnd) != 0) {
00031         <span class="keywordflow">if</span> ((index &gt;= 0) &amp;&amp; (index &lt;
00032                 (<span class="keywordtype">int</span>)(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a231">CBFNID</a>(pwnd-&gt;fnid)-<span class="keyword">sizeof</span>(<a class="code" href="../../d6/d9/structtagWND.html">WND</a>)))) {
00033 
00034             <span class="keywordflow">switch</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a232">GETFNID</a>(pwnd)) {
00035             <span class="keywordflow">case</span> <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a206">FNID_MDICLIENT</a>:
00036                 <span class="keywordflow">if</span> (index == 0)
00037                     <span class="keywordflow">break</span>;
00038                 <span class="keywordflow">goto</span> DoDefault;
00039 
00040             <span class="keywordflow">case</span> <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a200">FNID_BUTTON</a>:
00041                 <span class="comment">/*</span>
00042 <span class="comment">                 * CorelDraw does a get/set on the first button window word.</span>
00043 <span class="comment">                 * Allow it to.</span>
00044 <span class="comment">                 */</span>
00045                 <span class="keywordflow">if</span> (index == 0) {
00046                     <span class="comment">/*</span>
00047 <span class="comment">                     *  Since we now use a lookaside buffer for the control's</span>
00048 <span class="comment">                     *  private data, we need to indirect into this structure.</span>
00049 <span class="comment">                     */</span>
00050                     <a class="code" href="../../d2/d9/structtagBUTN.html">PBUTN</a> pbutn = ((<a class="code" href="../../d3/d9/structtagBUTNWND.html">PBUTNWND</a>)pwnd)-&gt;pbutn;
00051                     <span class="keywordflow">if</span> (!pbutn || (LONG_PTR)pbutn == (LONG_PTR)-1) {
00052                         <span class="keywordflow">return</span> 0;
00053                     } <span class="keywordflow">else</span> {
00054                         <span class="keywordflow">return</span> (WORD)(pbutn-&gt;<a class="code" href="../../d2/d9/structtagBUTN.html#o1">buttonState</a>);
00055                     }
00056                 }
00057                 <span class="keywordflow">goto</span> DoDefault;
00058 
00059             <span class="keywordflow">case</span> <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a203">FNID_DIALOG</a>:
00060                 <span class="keywordflow">if</span> (index == DWLP_USER)
00061                     <span class="keywordflow">return</span> LOWORD(((<a class="code" href="../../d4/d5/struct__DIALOG.html">PDIALOG</a>)pwnd)-&gt;unused);
00062                 <span class="keywordflow">if</span> (index == DWLP_USER+2)
00063                     <span class="keywordflow">return</span> HIWORD(((<a class="code" href="../../d4/d5/struct__DIALOG.html">PDIALOG</a>)pwnd)-&gt;unused);
00064                 <span class="keywordflow">goto</span> DoDefault;
00065 
00066             <span class="keywordflow">default</span>:
00067 DoDefault:
00068                 RIPERR3(ERROR_INVALID_INDEX,
00069                         RIP_WARNING,
00070                         <span class="stringliteral">"GetWindowWord: Trying to read private server data pwnd=(%#p) index=(%ld) fnid=(%lX)"</span>,
00071                         pwnd, index, (DWORD)pwnd-&gt;fnid);
00072                 <span class="keywordflow">return</span> 0;
00073                 <span class="keywordflow">break</span>;
00074             }
00075         }
00076     }
00077 
00078     <span class="keywordflow">if</span> (index == GWLP_USERDATA)
00079         <span class="keywordflow">return</span> (WORD)pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o18">dwUserData</a>;
00080 
00081     <span class="keywordflow">if</span> ((index &lt; 0) || ((UINT)index + sizeof(WORD) &gt; (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o10">cbwndExtra</a>)) {
00082         RIPERR0(ERROR_INVALID_INDEX, RIP_VERBOSE, <span class="stringliteral">""</span>);
00083         <span class="keywordflow">return</span> 0;
00084     } <span class="keywordflow">else</span> {
00085         <span class="keywordflow">return</span> *((WORD UNALIGNED *)((<a class="code" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a> *)(pwnd + 1) + index));
00086     }
00087 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a625" doxytag="usercli.h::_LoadKeyboardLayoutEx" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HKL _LoadKeyboardLayoutEx           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hFile</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>offTable</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HKL&nbsp;</td>
          <td class="mdname" nowrap> <em>hkl</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPCWSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>pwszKL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>KbdInputLocale</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>Flags</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d4/d7/client_8c-source.html#l04385">LoadKeyboardLayoutWorker()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a413" doxytag="usercli.h::_LockResource" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LPSTR APIENTRY _LockResource           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hResData</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HINSTANCE&nbsp;</td>
          <td class="mdname" nowrap> <em>hModule</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d8/clres_8c-source.html#l01509">1509</a> of file <a class="el" href="../../d5/d8/clres_8c-source.html">clres.c</a>.
<p>
<pre class="fragment"><div>01512 {
01513     UNREFERENCED_PARAMETER(hModule);
01514 
01515     <span class="keywordflow">return</span> (LPSTR)(hResData);
01516 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a639" doxytag="usercli.h::_NextControl" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d6/d9/structtagWND.html">PWND</a> _NextControl           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwndDlg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>uFlags</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d8/dlgmgrc_8c-source.html#l00207">207</a> of file <a class="el" href="../../d7/d8/dlgmgrc_8c-source.html">dlgmgrc.c</a>.
<p>
References <a class="el" href="../../d3/d7/rtl_2winmgr_8c-source.html#l00513">_IsDescendant()</a>, <a class="el" href="../../d7/d8/dlgmgrc_8c-source.html#l00151">_NextSibblingOrAncestor()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00215">REBASEPWND</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01745">tagWND::spwndParent</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02377">WEFCONTROLPARENT</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02418">WFDISABLED</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02419">WFVISIBLE</a>.
<p>
Referenced by <a class="el" href="../../d6/d8/dlgmgr2_8c-source.html#l00749">_FindDlgItem()</a>, <a class="el" href="../../d7/d8/dlgmgrc_8c-source.html#l00348">_GetNextDlgTabItem()</a>, <a class="el" href="../../d7/d8/dlgmgrc_8c-source.html#l00078">_PrevControl()</a>, <a class="el" href="../../d2/d9/client_2help_8c-source.html#l00290">GetNextDlgHelpItem()</a>, <a class="el" href="../../d7/d8/dlgmgrc_8c-source.html#l00050">UT_NextGroupItem()</a>, <a class="el" href="../../d7/d8/dlgmgrc_8c-source.html#l00022">UT_PrevGroupItem()</a>, <a class="el" href="../../d6/d9/dmmnem_8c-source.html#l00115">xxxGNM_FindNextMnem()</a>, and <a class="el" href="../../d6/d8/dlgmgr2_8c-source.html#l00031">xxxRemoveDefaultButton()</a>.
<p>
<pre class="fragment"><div>00211 {
00212     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fSkip, fAncestor;
00213     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwndLast, pwndSibblingLoop;
00214     <span class="comment">/* Bug 272874 - joejo</span>
00215 <span class="comment">     *</span>
00216 <span class="comment">     * Stop infinite loop by only looping a finite number of times and</span>
00217 <span class="comment">     * then bailing.</span>
00218 <span class="comment">     */</span>
00219     <span class="keywordtype">int</span> nLoopCount = 0;
00220     
00221     UserAssert (pwndRoot != NULL);
00222 
00223     <span class="keywordflow">if</span> (pwndStart == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00224         <span class="comment">// Start with pwndRoot's first child</span>
00225         pwndStart = <a class="code" href="../../d6/d0/usercli_8h.html#a27">REBASEPWND</a>(pwndRoot, spwndChild);
00226         pwndLast = pwndStart;
00227         fAncestor = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00228     } <span class="keywordflow">else</span> {
00229         UserAssert ((pwndRoot != pwndStart) &amp;&amp; <a class="code" href="../../d2/d8/rtl_2winmgr_8c.html#a5">_IsDescendant</a>(pwndRoot, pwndStart));
00230 
00231         <span class="comment">// Save starting handle and get next one</span>
00232         pwndLast = pwndStart;
00233         pwndSibblingLoop = pwndStart;
00234         fAncestor = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00235         <span class="keywordflow">goto</span> TryNextOne;
00236     }
00237 
00238 
00239     <span class="comment">// If no more controls, game over</span>
00240     <span class="keywordflow">if</span> (pwndStart == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00241         <span class="keywordflow">return</span> pwndRoot;
00242     }
00243 
00244     <span class="comment">// Search for a non WS_EX_CONTROLPARENT window; if a window should be skipped,</span>
00245     <span class="comment">// try its spwndNext; otherwise, walk down its child chain.</span>
00246     pwndSibblingLoop = pwndStart;
00247     <span class="keywordflow">do</span> {
00248         
00249         <span class="comment">//If not WS_EX_CONTROLPARENT parent, done.</span>
00250         <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwndStart, WEFCONTROLPARENT)) {
00251             <span class="keywordflow">return</span> pwndStart;
00252         }
00253 
00254         <span class="comment">// Do they want to skip this window?</span>
00255         fSkip = ((uFlags &amp; CWP_SKIPINVISIBLE) &amp;&amp; !<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwndStart, WFVISIBLE))
00256                 || ((uFlags &amp; CWP_SKIPDISABLED) &amp;&amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwndStart, WFDISABLED));
00257 
00258 
00259         <span class="comment">// Remember the current window</span>
00260         pwndLast = pwndStart;
00261 
00262         <span class="comment">// Walk down child chain?</span>
00263         <span class="keywordflow">if</span> (!fSkip &amp;&amp; !fAncestor) {
00264             pwndStart = <a class="code" href="../../d6/d0/usercli_8h.html#a639">_NextControl</a> (pwndStart, NULL, uFlags);
00265             <span class="comment">// If it found one, done.</span>
00266             <span class="keywordflow">if</span> (pwndStart != pwndLast) {
00267                 <span class="keywordflow">return</span> pwndStart;
00268             }
00269         }
00270 
00271 TryNextOne:
00272         <span class="comment">// Try the next one.</span>
00273         pwndStart = <a class="code" href="../../d6/d9/dlgmgrc_8c.html#a4">_NextSibblingOrAncestor</a> (pwndRoot, pwndStart);
00274         <span class="keywordflow">if</span> (pwndStart == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00275             <span class="keywordflow">break</span>;
00276         }
00277 
00278         <span class="comment">// If parents are the same, we are still in the same sibbling chain</span>
00279         <span class="keywordflow">if</span> (pwndLast-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o3">spwndParent</a> == pwndStart-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o3">spwndParent</a>) {
00280             <span class="comment">// If we had just moved up the parent chain last time around,</span>
00281             <span class="comment">//  mark this as the beginning of the new sibbling chain.</span>
00282             <span class="comment">// Otherwise, check if we've looped through all sibblings already.</span>
00283             <span class="keywordflow">if</span> (fAncestor) {
00284                 <span class="comment">// Beggining of new sibbling chain.</span>
00285                 pwndSibblingLoop = pwndStart;
00286             } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pwndStart == pwndSibblingLoop) {
00287                 <span class="comment">// Already visited all sibblings, so done.</span>
00288                 <span class="keywordflow">break</span>;
00289             }
00290             fAncestor = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00291         } <span class="keywordflow">else</span> {
00292             <span class="comment">// We must have moved up the parent chain, so don't</span>
00293             <span class="comment">//  walk down the child chain right away (try the next window first)</span>
00294             <span class="comment">// Eventhough we are on a new sibbling chain, we don't update</span>
00295             <span class="comment">// pwndSibblingLoop yet; this is because we must walk down this</span>
00296             <span class="comment">// child chain again to make sure we visit all the descendents</span>
00297             fAncestor = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00298         }
00299 
00300     <span class="comment">/* Bug 272874 - joejo</span>
00301 <span class="comment">     *</span>
00302 <span class="comment">     * Stop infinite loop by only looping a finite number of times and</span>
00303 <span class="comment">     * then bailing.</span>
00304 <span class="comment">     */</span>
00305     } <span class="keywordflow">while</span> (nLoopCount++ &lt; 256 * 4);
00306 
00307     <span class="comment">// It couldn't find one...</span>
00308     <span class="keywordflow">return</span> pwndRoot;
00309 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a621" doxytag="usercli.h::_PeekMessage" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL _PeekMessage           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">LPMSG&nbsp;</td>
          <td class="mdname" nowrap> <em>pmsg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>wMsgFilterMin</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>wMsgFilterMax</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>wRemoveMsg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>bAnsi</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00556">556</a> of file <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html">client/ntstubs.c</a>.
<p>
References <a class="el" href="../../d8/d8/ntsend_8h-source.html#l00027">BEGINCALL</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02311">BUILD_DBCS_MESSAGE_TO_CLIENTA_FROM_SERVER</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02359">BUILD_DBCS_MESSAGE_TO_CLIENTW_FROM_SERVER</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d8/d8/ntsend_8h-source.html#l00047">ENDCALL</a>, <a class="el" href="../../d8/d8/ntsend_8h-source.html#l00035">ERRORTRAP</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02229">GET_DBCS_MESSAGE_IF_EXIST</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05514">NtUserPeekMessage()</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00483">PeekMessage()</a>, <a class="el" href="../../d6/d5/chartran_8c-source.html#l00361">RtlWCSMessageWParamCharToMB()</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00483">PeekMessage()</a>.
<p>
<pre class="fragment"><div>00563 {
00564     <a class="code" href="../../d7/d9/ntsend_8h.html#a1">BEGINCALL</a>()
00565 
00566         if (bAnsi) {
00567             <span class="comment">//</span>
00568             <span class="comment">// If we have pushed message for DBCS messaging, we should pass this one</span>
00569             <span class="comment">// to Apps at first...</span>
00570             <span class="comment">//</span>
00571             <a class="code" href="../../d6/d0/usercli_8h.html#a293">GET_DBCS_MESSAGE_IF_EXIST</a>(
00572                 PeekMessage,pmsg,wMsgFilterMin,wMsgFilterMax,((wRemoveMsg &amp; PM_REMOVE) ? TRUE:FALSE));
00573         }
00574 
00575         retval = (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a213">NtUserPeekMessage</a>(
00576                 pmsg,
00577                 hwnd,
00578                 wMsgFilterMin,
00579                 wMsgFilterMax,
00580                 wRemoveMsg);
00581 
00582         <span class="keywordflow">if</span> (retval) {
00583             <span class="comment">// May have a bit more work to do if this MSG is for an ANSI app</span>
00584 
00585             <span class="keywordflow">if</span> (bAnsi) {
00586                 <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/chartran_8c.html#a4">RtlWCSMessageWParamCharToMB</a>(pmsg-&gt;message, &amp;(pmsg-&gt;wParam))) {
00587                     WPARAM dwAnsi = pmsg-&gt;wParam;
00588                     <span class="comment">//</span>
00589                     <span class="comment">// Build DBCS-ware wParam. (for EM_SETPASSWORDCHAR...)</span>
00590                     <span class="comment">//</span>
00591                     <a class="code" href="../../d6/d0/usercli_8h.html#a296">BUILD_DBCS_MESSAGE_TO_CLIENTA_FROM_SERVER</a>(
00592                         pmsg,dwAnsi,TRUE,((wRemoveMsg &amp; PM_REMOVE) ? TRUE:FALSE));
00593                 } <span class="keywordflow">else</span> {
00594                     retval = 0;
00595                 }
00596             } <span class="keywordflow">else</span> {
00597                <span class="comment">//</span>
00598                <span class="comment">// Only LOWORD of WPARAM is valid for WM_CHAR....</span>
00599                <span class="comment">// (Mask off DBCS messaging information.)</span>
00600                <span class="comment">//</span>
00601                <a class="code" href="../../d6/d0/usercli_8h.html#a297">BUILD_DBCS_MESSAGE_TO_CLIENTW_FROM_SERVER</a>(pmsg-&gt;message,pmsg-&gt;wParam);
00602             }
00603         }
00604 
00605 ExitPeekMessage:
00606 
00607     <a class="code" href="../../d7/d9/ntsend_8h.html#a3">ERRORTRAP</a>(0);
00608     <a class="code" href="../../d7/d9/ntsend_8h.html#a5">ENDCALL</a>(BOOL);
00609 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a640" doxytag="usercli.h::_PrevControl" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d6/d9/structtagWND.html">PWND</a> _PrevControl           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwndDlg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>uFlags</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d8/dlgmgrc_8c-source.html#l00078">78</a> of file <a class="el" href="../../d7/d8/dlgmgrc_8c-source.html">dlgmgrc.c</a>.
<p>
References <a class="el" href="../../d7/d8/dlgmgrc_8c-source.html#l00207">_NextControl()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02377">WEFCONTROLPARENT</a>.
<p>
Referenced by <a class="el" href="../../d7/d8/dlgmgrc_8c-source.html#l00348">_GetNextDlgTabItem()</a>, <a class="el" href="../../d7/d8/dlgmgrc_8c-source.html#l00050">UT_NextGroupItem()</a>, and <a class="el" href="../../d7/d8/dlgmgrc_8c-source.html#l00022">UT_PrevGroupItem()</a>.
<p>
<pre class="fragment"><div>00082 {
00083     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fFirstFound;
00084     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwndNext;
00085     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, pwndFirst;
00086 
00087     <span class="keywordflow">if</span> (!pwndStart)
00088         <span class="keywordflow">return</span>(<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>);
00089 
00090     UserAssert(pwndRoot != pwndStart);
00091     UserAssert(!<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwndStart, WEFCONTROLPARENT));
00092 
00093     pwnd = <a class="code" href="../../d6/d0/usercli_8h.html#a639">_NextControl</a>(pwndRoot, NULL, uFlags);
00094 
00095     pwndFirst = pwnd;
00096     fFirstFound = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00097     <span class="keywordflow">while</span> (pwndNext = <a class="code" href="../../d6/d0/usercli_8h.html#a639">_NextControl</a>(pwndRoot, pwnd, uFlags)) {
00098 
00099         <span class="keywordflow">if</span> (pwndNext == pwndStart)
00100             <span class="keywordflow">break</span>;
00101 
00102         <span class="keywordflow">if</span> (pwndNext == pwndFirst) {
00103             <span class="keywordflow">if</span> (fFirstFound) {
00104                 RIPMSG0(RIP_WARNING, <span class="stringliteral">"_PrevControl: Loop Detected"</span>);
00105                 <span class="keywordflow">break</span>;
00106             } <span class="keywordflow">else</span> {
00107                 fFirstFound = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00108             }
00109         }
00110 
00111         pwnd = pwndNext;
00112     }
00113 
00114     <span class="keywordflow">return</span> pwnd;
00115 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a626" doxytag="usercli.h::_SetCursorIconData" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL _SetCursorIconData           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HCURSOR&nbsp;</td>
          <td class="mdname" nowrap> <em>hCursor</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d8/d1/structtagCURSORDATA.html">PCURSORDATA</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pcur</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l01138">1138</a> of file <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html">client/ntstubs.c</a>.
<p>
References <a class="el" href="../../d8/d8/ntsend_8h-source.html#l00027">BEGINCALL</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d8/d8/ntsend_8h-source.html#l00235">CLEANUPLPWSTR</a>, <a class="el" href="../../d8/d8/ntsend_8h-source.html#l00199">COPYLPWSTRIDOPT</a>, <a class="el" href="../../d8/d8/ntsend_8h-source.html#l00200">COPYLPWSTROPT</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d8/d8/ntsend_8h-source.html#l00047">ENDCALL</a>, <a class="el" href="../../d8/d8/ntsend_8h-source.html#l00035">ERRORTRAP</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00316">_IN_STRING::fAllocated</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02186">tagCURSORDATA::lpModName</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02185">tagCURSORDATA::lpName</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l07305">NtUserSetCursorIconData()</a>, <a class="el" href="../../d0/d0/client_2nt6_2user_8h.html#a1071">PCURSORDATA</a>, and <a class="el" href="../../d7/d9/usercli_8h-source.html#l00315">_IN_STRING::pstr</a>.
<p>
<pre class="fragment"><div>01141 {
01142     <a class="code" href="../../d8/d1/struct__IN__STRING.html">IN_STRING</a>  strModName;
01143     <a class="code" href="../../d8/d1/struct__IN__STRING.html">IN_STRING</a>  strResName;
01144 
01145     <span class="comment">/*</span>
01146 <span class="comment">     * Make sure cleanup will work successfully</span>
01147 <span class="comment">     */</span>
01148     strModName.<a class="code" href="../../d8/d1/struct__IN__STRING.html#o2">fAllocated</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01149     strResName.<a class="code" href="../../d8/d1/struct__IN__STRING.html#o2">fAllocated</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01150 
01151     <a class="code" href="../../d7/d9/ntsend_8h.html#a1">BEGINCALL</a>()
01152 
01153         COPYLPWSTROPT(&amp;strModName, pcur-&gt;lpModName);
01154         COPYLPWSTRIDOPT(&amp;strResName, pcur-&gt;lpName);
01155 
01156         retval = (DWORD)NtUserSetCursorIconData(hCursor,
01157                                                 strModName.pstr,
01158                                                 strResName.pstr,
01159                                                 pcur);
01160 
01161     ERRORTRAP(0);
01162 
01163     CLEANUPLPWSTR(strModName);
01164     CLEANUPLPWSTR(strResName);
01165 
01166     ENDCALL(BOOL);
01167 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a620" doxytag="usercli.h::_SetWindowLong" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LONG _SetWindowLong           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hWnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>nIndex</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LONG&nbsp;</td>
          <td class="mdname" nowrap> <em>dwNewLong</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>bAnsi</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a630" doxytag="usercli.h::_SetWindowsHookEx" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HHOOK _SetWindowsHookEx           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hmod</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPTSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>pszLib</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>idThread</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>nFilterType</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PROC&nbsp;</td>
          <td class="mdname" nowrap> <em>pfnFilterProc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwFlags</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00258">258</a> of file <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html">client/ntstubs.c</a>.
<p>
References <a class="el" href="../../d8/d8/ntsend_8h-source.html#l00027">BEGINCALL</a>, <a class="el" href="../../d8/d8/ntsend_8h-source.html#l00235">CLEANUPLPWSTR</a>, <a class="el" href="../../d4/d7/propapi_8h-source.html#l00043">dwFlags</a>, <a class="el" href="../../d8/d8/ntsend_8h-source.html#l00047">ENDCALL</a>, <a class="el" href="../../d8/d8/ntsend_8h-source.html#l00035">ERRORTRAP</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00316">_IN_STRING::fAllocated</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d8/d8/ntsend_8h-source.html#l00230">FIRSTCOPYLPWSTROPT</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l03376">NtUserSetWindowsHookEx()</a>, and <a class="el" href="../../d7/d9/usercli_8h-source.html#l00315">_IN_STRING::pstr</a>.
<p>
Referenced by <a class="el" href="../../d3/d7/clhook_8c-source.html#l00026">SetWindowsHookExAW()</a>.
<p>
<pre class="fragment"><div>00265 {
00266     <a class="code" href="../../d8/d1/struct__IN__STRING.html">IN_STRING</a> strLib;
00267 
00268     <span class="comment">/*</span>
00269 <span class="comment">     * Make sure cleanup will work successfully</span>
00270 <span class="comment">     */</span>
00271     strLib.<a class="code" href="../../d8/d1/struct__IN__STRING.html#o2">fAllocated</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00272 
00273     <a class="code" href="../../d7/d9/ntsend_8h.html#a1">BEGINCALL</a>()
00274 
00275         FIRSTCOPYLPWSTROPT(&amp;strLib, pszLib);
00276 
00277         retval = (ULONG_PTR)NtUserSetWindowsHookEx(
00278                 hmod,
00279                 strLib.pstr,
00280                 idThread,
00281                 nFilterType,
00282                 pfnFilterProc,
00283                 dwFlags);
00284 
00285     ERRORTRAP(0);
00286     CLEANUPLPWSTR(strLib);
00287     ENDCALL(HHOOK);
00288 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a414" doxytag="usercli.h::_UnlockResource" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL APIENTRY _UnlockResource           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hResData</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HINSTANCE&nbsp;</td>
          <td class="mdname" nowrap> <em>hModule</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d8/clres_8c-source.html#l01518">1518</a> of file <a class="el" href="../../d5/d8/clres_8c-source.html">clres.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
<pre class="fragment"><div>01521 {
01522     UNREFERENCED_PARAMETER(hResData);
01523     UNREFERENCED_PARAMETER(hModule);
01524 
01525     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01526 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a407" doxytag="usercli.h::AllocLookasideEntry" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> PVOID AllocLookasideEntry           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d2/d4/struct__LOOKASIDE.html">PLOOKASIDE</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pla</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d1/rtlinit_8c-source.html#l00299">299</a> of file <a class="el" href="../../d2/d1/rtlinit_8c-source.html">rtlinit.c</a>.
<p>
References <a class="el" href="../../d2/d1/rtlinit_8c-source.html#l00171">AllocateFromZone</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00333">_LOOKASIDE::EntrySize</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00089">gcsLookaside</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00332">_LOOKASIDE::LookasideZone</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d7/d9/usercli_8h-source.html#l00958">UserLocalAlloc</a>.
<p>
Referenced by <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l00192">ValidateDialogPwnd()</a>.
<p>
<pre class="fragment"><div>00301 {
00302     PVOID pEntry;
00303 
00304     <span class="comment">//</span>
00305     <span class="comment">// Attempt to get an entry from the zone. If this fails, then</span>
00306     <span class="comment">// LocalAlloc the entry</span>
00307     <span class="comment">//</span>
00308 
00309     RtlEnterCriticalSection(&amp;gcsLookaside);
00310     pEntry = <a class="code" href="../../d1/d2/rtlinit_8c.html#a1">AllocateFromZone</a>(&amp;pla-&gt;<a class="code" href="../../d2/d4/struct__LOOKASIDE.html#o2">LookasideZone</a>);
00311     RtlLeaveCriticalSection(&amp;gcsLookaside);
00312 
00313     <span class="keywordflow">if</span> ( !pEntry ) {
00314 
00315         <span class="comment">/*</span>
00316 <span class="comment">         * Allocate a local structure.</span>
00317 <span class="comment">         */</span>
00318 <span class="preprocessor">#if DBG</span>
00319 <span class="preprocessor"></span>        pla-&gt;AllocSlowCalls++;
00320 <span class="preprocessor">#endif // DBG</span>
00321 <span class="preprocessor"></span>        <span class="keywordflow">if</span> ((pEntry = <a class="code" href="../../d6/d0/usercli_8h.html#a136">UserLocalAlloc</a>(0, pla-&gt;<a class="code" href="../../d2/d4/struct__LOOKASIDE.html#o3">EntrySize</a>)) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00322             <span class="keywordflow">return</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00323         }
00324     RtlZeroMemory(pEntry, pla-&gt;<a class="code" href="../../d2/d4/struct__LOOKASIDE.html#o3">EntrySize</a>);
00325 <span class="preprocessor">#if DBG</span>
00326 <span class="preprocessor"></span>    pla-&gt;AllocCalls++;
00327 
00328     <span class="keywordflow">if</span> (pla-&gt;AllocCalls - pla-&gt;DelCalls &gt; pla-&gt;AllocHiWater ) {
00329         pla-&gt;AllocHiWater = pla-&gt;AllocCalls - pla-&gt;DelCalls;
00330         }
00331 <span class="preprocessor">#endif // DBG</span>
00332 <span class="preprocessor"></span>
00333     <span class="keywordflow">return</span> pEntry;
00334 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a633" doxytag="usercli.h::BitBltSysBmp" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL BitBltSysBmp           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HDC&nbsp;</td>
          <td class="mdname" nowrap> <em>hdc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>x</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>y</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>i</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d2/mngrayc_8c-source.html#l00029">29</a> of file <a class="el" href="../../d0/d2/mngrayc_8c-source.html">mngrayc.c</a>.
<p>
<pre class="fragment"><div>00030 {
00031     <a class="code" href="../../d0/d3/structtagOEMBITMAPINFO.html">POEMBITMAPINFO</a> pOem = <a class="code" href="../../d1/d8/clglobal_8c.html#a4">gpsi</a>-&gt;oembmi + i;
00032 
00033     <span class="keywordflow">return</span>(<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a330">NtUserBitBltSysBmp</a>(hdc, x, y, pOem-&gt;<a class="code" href="../../d0/d3/structtagOEMBITMAPINFO.html#o2">cx</a>, pOem-&gt;<a class="code" href="../../d0/d3/structtagOEMBITMAPINFO.html#o3">cy</a>, pOem-&gt;<a class="code" href="../../d0/d3/structtagOEMBITMAPINFO.html#o0">x</a>, pOem-&gt;<a class="code" href="../../d0/d3/structtagOEMBITMAPINFO.html#o1">y</a>, SRCCOPY));
00034 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a634" doxytag="usercli.h::BuildHwndList" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> BuildHwndList           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HDESK&nbsp;</td>
          <td class="mdname" nowrap> <em>hdesk</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwndNext</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fEnumChildren</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>idThread</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HWND **&nbsp;</td>
          <td class="mdname" nowrap> <em>phwndFirst</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d7/clenum_8c-source.html#l00037">37</a> of file <a class="el" href="../../d1/d7/clenum_8c-source.html">clenum.c</a>.
<p>
References <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l08222">NtUserBuildHwndList()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d7/clenum_8c-source.html#l00018">phwndCache</a>, <a class="el" href="../../d3/d0/cttoken_8c-source.html#l00135">Status</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00958">UserLocalAlloc</a>, and <a class="el" href="../../d7/d9/usercli_8h-source.html#l00960">UserLocalFree</a>.
<p>
<pre class="fragment"><div>00043 {
00044     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> cHwnd;
00045     HWND *phwndFirst;
00046     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
00047     <span class="keywordtype">int</span> cTries;
00048 
00049     <span class="comment">/*</span>
00050 <span class="comment">     * Allocate a buffer to hold the names.</span>
00051 <span class="comment">     */</span>
00052     cHwnd = 64;
00053     phwndFirst = (HWND *)InterlockedExchangePointer(&amp;(PVOID)phwndCache, 0);
00054     <span class="keywordflow">if</span> (phwndFirst == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00055         phwndFirst = <a class="code" href="../../d6/d0/usercli_8h.html#a136">UserLocalAlloc</a>(0, cHwnd * <span class="keyword">sizeof</span>(HWND));
00056         <span class="keywordflow">if</span> (phwndFirst == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00057             <span class="keywordflow">return</span> 0;
00058     }
00059 
00060     <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a291">NtUserBuildHwndList</a>(hdesk, hwndNext, fEnumChildren,
00061             idThread, cHwnd, phwndFirst, &amp;cHwnd);
00062 
00063     <span class="comment">/*</span>
00064 <span class="comment">     * If the buffer wasn't big enough, reallocate</span>
00065 <span class="comment">     * the buffer and try again.</span>
00066 <span class="comment">     */</span>
00067     cTries = 0;
00068     <span class="keywordflow">while</span> (<a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> == STATUS_BUFFER_TOO_SMALL) {
00069         <a class="code" href="../../d6/d0/usercli_8h.html#a138">UserLocalFree</a>(phwndFirst);
00070 
00071         <span class="comment">/*</span>
00072 <span class="comment">         * If we can't seem to get it right,</span>
00073 <span class="comment">         * call it quits</span>
00074 <span class="comment">         */</span>
00075         <span class="keywordflow">if</span> (cTries++ == 10)
00076             <span class="keywordflow">return</span> 0;
00077 
00078         phwndFirst = <a class="code" href="../../d6/d0/usercli_8h.html#a136">UserLocalAlloc</a>(0, cHwnd * <span class="keyword">sizeof</span>(HWND));
00079         <span class="keywordflow">if</span> (phwndFirst == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00080             <span class="keywordflow">return</span> 0;
00081 
00082         <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a291">NtUserBuildHwndList</a>(hdesk, hwndNext, fEnumChildren,
00083                 idThread, cHwnd, phwndFirst, &amp;cHwnd);
00084     }
00085 
00086     <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(Status) || cHwnd &lt;= 1) {
00087         <a class="code" href="../../d6/d0/usercli_8h.html#a138">UserLocalFree</a>(phwndFirst);
00088         <span class="keywordflow">return</span> 0;
00089     }
00090 
00091     *pphwndFirst = phwndFirst;
00092     <span class="keywordflow">return</span> cHwnd - 1;
00093 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a574" doxytag="usercli.h::ButtonWndProcA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LRESULT APIENTRY ButtonWndProcA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>msg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d0/btnctl_8c-source.html#l01907">1907</a> of file <a class="el" href="../../d9/d0/btnctl_8c-source.html">btnctl.c</a>.
<p>
References <a class="el" href="../../d9/d0/btnctl_8c-source.html#l01338">ButtonWndProcWorker()</a>, <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00574">DefWindowProcWorker()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00793">FNID_BUTTON</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00144">FWINDOWMSG</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d5/d9/immcli_8h-source.html#l00120">ValidateHwnd</a>.
<p>
Referenced by <a class="el" href="../../d7/d7/clinit_8c-source.html#l01219">ClientThreadSetup()</a>.
<p>
<pre class="fragment"><div>01912 {
01913     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwnd;
01914 
01915     <span class="keywordflow">if</span> ((pwnd = <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(hwnd)) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01916         <span class="keywordflow">return</span> (0<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>);
01917     }
01918 
01919     <span class="comment">/*</span>
01920 <span class="comment">     * If the control is not interested in this message,</span>
01921 <span class="comment">     * pass it to DefWindowProc.</span>
01922 <span class="comment">     */</span>
01923     <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d0/usercli_8h.html#a10">FWINDOWMSG</a>(message, FNID_BUTTON))
01924         <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a610">DefWindowProcWorker</a>(pwnd, message, wParam, lParam, TRUE);
01925 
01926     <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a611">ButtonWndProcWorker</a>(pwnd, message, wParam, lParam, TRUE);
01927 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a575" doxytag="usercli.h::ButtonWndProcW" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LRESULT APIENTRY ButtonWndProcW           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>msg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d0/btnctl_8c-source.html#l01929">1929</a> of file <a class="el" href="../../d9/d0/btnctl_8c-source.html">btnctl.c</a>.
<p>
References <a class="el" href="../../d9/d0/btnctl_8c-source.html#l01338">ButtonWndProcWorker()</a>, <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00574">DefWindowProcWorker()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00793">FNID_BUTTON</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00144">FWINDOWMSG</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d5/d9/immcli_8h-source.html#l00120">ValidateHwnd</a>.
<p>
Referenced by <a class="el" href="../../d7/d7/clinit_8c-source.html#l01219">ClientThreadSetup()</a>, and <a class="el" href="../../d7/d7/clinit_8c-source.html#l00378">RW_RegisterControls()</a>.
<p>
<pre class="fragment"><div>01934 {
01935     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwnd;
01936 
01937     <span class="keywordflow">if</span> ((pwnd = <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(hwnd)) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01938         <span class="keywordflow">return</span> (0<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>);
01939     }
01940 
01941     <span class="comment">/*</span>
01942 <span class="comment">     * If the control is not interested in this message,</span>
01943 <span class="comment">     * pass it to DefWindowProc.</span>
01944 <span class="comment">     */</span>
01945     <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d0/usercli_8h.html#a10">FWINDOWMSG</a>(message, FNID_BUTTON))
01946         <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a610">DefWindowProcWorker</a>(pwnd, message, wParam, lParam, FALSE);
01947 
01948     <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a611">ButtonWndProcWorker</a>(pwnd, message, wParam, lParam, FALSE);
01949 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a611" doxytag="usercli.h::ButtonWndProcWorker" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LRESULT ButtonWndProcWorker           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>msg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>fAnsi</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d0/btnctl_8c-source.html#l01338">1338</a> of file <a class="el" href="../../d9/d0/btnctl_8c-source.html">btnctl.c</a>.
<p>
References <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l01171">_DefSetText()</a>, <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00924">_GetClientRect()</a>, <a class="el" href="../../d2/d0/bench_8c-source.html#l00048">APIENTRY</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01738">tagCLS::atomClassName</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01297">tagSERVERINFO::atomSysClass</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02441">BFIMAGEMASK</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02455">BFNOTIFY</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02453">BFPUSHLIKE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02436">BFTYPEMASK</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l00361">BNCalcRect()</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l00288">BNReleaseDC()</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l00171">BNSetFont()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00392">BST_CAPTURED</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00390">BST_CHECKMASK</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00394">BST_DONTCLICK</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00395">BST_INBMCLICK</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00391">BST_INCLICK</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00393">BST_MOUSE</a>, <a class="el" href="../../d0/d0/client_2nt6_2user_8h.html#a1097">BUTN</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l00058">ButtonLookaside</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00388">BUTTONSTATE</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l00021">CBR_GROUPTEXT</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d9/d3/w32_2ntuser_2kernel_2random_8c-source.html#l00102">ClearWindowState()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00404">DBT_FOCUS</a>, <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00574">DefWindowProcWorker()</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00793">FNID_BUTTON</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00836">FNID_CLEANEDUP_BIT</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l03190">tagBUTN::fPaintKbdCuesOnly</a>, <a class="el" href="../../d2/d1/rtlinit_8c-source.html#l00344">FreeLookasideEntry()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01265">FWINABLE</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00051">gpsi</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l03188">tagBUTN::hFont</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l03189">tagBUTN::hImage</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01514">HW</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01515">HWq</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00349">ICLS_DIALOG</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l00040">IMAGE_BMMAX</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00270">INITCONTROLLOOKASIDE</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02596">ISBSTEXTOROD</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l00047">IsValidImage</a>, <a class="el" href="../../d3/d7/rtl_2winmgr_8c-source.html#l00537">IsVisible()</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d6/d8/ntrtlp_8h-source.html#l00183">LOBYTE</a>, <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00354">NotifyWinEvent()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l07752">NtUserAlterWindowStyle()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06520">NtUserBeginPaint()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06575">NtUserEndPaint()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05330">NtUserInvalidateRect()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l07715">NtUserSetWindowFNID()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d8/d0/client_2draw_8c-source.html#l00025">PaintRect()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00397">PBF_PUSHABLE</a>, <a class="el" href="../../d0/d0/client_2nt6_2user_8h.html#a1100">PBUTNWND</a>, <a class="el" href="../../d4/d5/rect_8c-source.html#l00118">PtInRect()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00210">REBASEALWAYS</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00215">REBASEPWND</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l01322">RepaintButton()</a>, <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00270">SendMessageWorker()</a>, <a class="el" href="../../d9/d3/w32_2ntuser_2kernel_2random_8c-source.html#l00083">SetWindowState()</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l03186">tagBUTN::spwnd</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01745">tagWND::spwndParent</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02561">TestwndChild</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00362">ThreadLock</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00366">ThreadUnlock</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00368">Unlock</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00227">VALIDATECLASSANDSIZE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02372">WEFRIGHT</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02401">WFTABSTOP</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02419">WFVISIBLE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02318">WFWIN31COMPAT</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02319">WFWIN40COMPAT</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l00722">xxxBNDrawText()</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l00258">xxxBNGetDC()</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l00310">xxxBNOwnerDraw()</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l01206">xxxBNPaint()</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l00654">xxxBNReleaseCapture()</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l00590">xxxBNSetCapture()</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l00995">xxxButtonDrawCheck()</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l01116">xxxButtonDrawNewState()</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l00625">xxxButtonNotifyParent()</a>, and <a class="el" href="../../d9/d0/btnctl_8c-source.html#l01159">xxxDrawButton()</a>.
<p>
Referenced by <a class="el" href="../../d9/d0/btnctl_8c-source.html#l01907">ButtonWndProcA()</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l01929">ButtonWndProcW()</a>, and <a class="el" href="../../d7/d7/clinit_8c-source.html#l01219">ClientThreadSetup()</a>.
<p>
<pre class="fragment"><div>01344 {
01345     HWND hwnd = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(pwnd);
01346     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> bsWnd;
01347     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> wOldState;
01348     RECT rc;
01349     POINT pt;
01350     HDC hdc;
01351     HBRUSH      hbr;
01352     PAINTSTRUCT ps;
01353     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpwndParent;
01354     <a class="code" href="../../d2/d9/structtagBUTN.html">PBUTN</a> pbutn;
01355     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwndParent;
01356     <span class="keyword">static</span> <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fInit = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01357     LONG lResult;
01358 
01359     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pwnd);
01360 
01361     bsWnd = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, BFTYPEMASK);
01362 
01363     <a class="code" href="../../d6/d0/usercli_8h.html#a28">VALIDATECLASSANDSIZE</a>(pwnd, FNID_BUTTON);
01364     <a class="code" href="../../d6/d0/usercli_8h.html#a29">INITCONTROLLOOKASIDE</a>(&amp;ButtonLookaside, <a class="code" href="../../d2/d9/structtagBUTN.html">BUTN</a>, spwnd, 8);
01365 
01366     <span class="comment">/*</span>
01367 <span class="comment">     * Get the pbutn for the given window now since we will use it a lot in</span>
01368 <span class="comment">     * various handlers. This was stored using SetWindowLong(hwnd,0,pbutn) when</span>
01369 <span class="comment">     * we initially created the button control.</span>
01370 <span class="comment">     */</span>
01371     pbutn = ((<a class="code" href="../../d3/d9/structtagBUTNWND.html">PBUTNWND</a>)pwnd)-&gt;pbutn;
01372 
01373     <span class="keywordflow">switch</span> (message) {
01374     <span class="keywordflow">case</span> WM_NCHITTEST:
01375         <span class="keywordflow">if</span> (bsWnd == <a class="code" href="../../d5/d9/ntrtlp_8h.html#a4">LOBYTE</a>(BS_GROUPBOX)) {
01376             <span class="keywordflow">return</span> (LONG)HTTRANSPARENT;
01377         } <span class="keywordflow">else</span> {
01378             <span class="keywordflow">goto</span> CallDWP;
01379         }
01380 
01381     <span class="keywordflow">case</span> WM_ERASEBKGND:
01382         <span class="keywordflow">if</span> (bsWnd == <a class="code" href="../../d5/d9/ntrtlp_8h.html#a4">LOBYTE</a>(BS_OWNERDRAW)) {
01383 
01384             <span class="comment">/*</span>
01385 <span class="comment">             * Handle erase background for owner draw buttons.</span>
01386 <span class="comment">             */</span>
01387             <a class="code" href="../../d6/d9/rtl_2wow_8c.html#a19">_GetClientRect</a>(pwnd, &amp;rc);
01388             <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o3">spwndParent</a>, &amp;tlpwndParent);
01389             pwndParent = <a class="code" href="../../d6/d0/usercli_8h.html#a27">REBASEPWND</a>(pwnd, spwndParent);
01390             <a class="code" href="../../d6/d0/usercli_8h.html#a645">PaintRect</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a450">HW</a>(pwndParent), hwnd, (HDC)wParam, (HBRUSH)CTLCOLOR_BTN, &amp;rc);
01391             <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndParent);
01392         }
01393 
01394         <span class="comment">/*</span>
01395 <span class="comment">         * Do nothing for other buttons, but don't let DefWndProc() do it</span>
01396 <span class="comment">         * either.  It will be erased in xxxBNPaint().</span>
01397 <span class="comment">         */</span>
01398         <span class="keywordflow">return</span> (LONG)<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01399 
01400     <span class="keywordflow">case</span> WM_PRINTCLIENT:
01401         <a class="code" href="../../d8/d1/btnctl_8c.html#a30">xxxBNPaint</a>(pbutn, (HDC)wParam);
01402         <span class="keywordflow">break</span>;
01403 
01404     <span class="keywordflow">case</span> WM_PAINT:
01405 
01406         <span class="comment">/*</span>
01407 <span class="comment">         * If wParam != NULL, then this is a subclassed paint.</span>
01408 <span class="comment">         */</span>
01409         <span class="keywordflow">if</span> ((hdc = (HDC)wParam) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
01410             hdc = <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a246">NtUserBeginPaint</a>(hwnd, &amp;ps);
01411 
01412         <span class="keywordflow">if</span> (<a class="code" href="../../d2/d8/rtl_2winmgr_8c.html#a6">IsVisible</a>(pwnd))
01413             <a class="code" href="../../d8/d1/btnctl_8c.html#a30">xxxBNPaint</a>(pbutn, hdc);
01414 
01415         <span class="keywordflow">if</span> (!wParam)
01416             <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a248">NtUserEndPaint</a>(hwnd, &amp;ps);
01417         <span class="keywordflow">break</span>;
01418 
01419     <span class="keywordflow">case</span> WM_SETFOCUS:
01420         <a class="code" href="../../d6/d0/usercli_8h.html#a43">BUTTONSTATE</a>(pbutn) |= BST_FOCUS;
01421         <span class="keywordflow">if</span> ((hdc = <a class="code" href="../../d8/d1/btnctl_8c.html#a18">xxxBNGetDC</a>(pbutn, NULL)) != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01422             <a class="code" href="../../d8/d1/btnctl_8c.html#a27">xxxBNDrawText</a>(pbutn, hdc, DBT_FOCUS, FALSE);
01423 
01424             <a class="code" href="../../d8/d1/btnctl_8c.html#a19">BNReleaseDC</a>(pbutn, hdc);
01425         }
01426 
01427         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, BFNOTIFY))
01428             <a class="code" href="../../d8/d1/btnctl_8c.html#a25">xxxButtonNotifyParent</a>(pwnd, BN_SETFOCUS);
01429 
01430         <span class="keywordflow">if</span> (!(<a class="code" href="../../d6/d0/usercli_8h.html#a43">BUTTONSTATE</a>(pbutn) &amp; <a class="code" href="../../d6/d0/usercli_8h.html#a45">BST_INCLICK</a>)) {
01431             <span class="keywordflow">switch</span> (bsWnd) {
01432             <span class="keywordflow">case</span> <a class="code" href="../../d5/d9/ntrtlp_8h.html#a4">LOBYTE</a>(BS_RADIOBUTTON):
01433             case <a class="code" href="../../d5/d9/ntrtlp_8h.html#a4">LOBYTE</a>(BS_AUTORADIOBUTTON):
01434                 if (!(<a class="code" href="../../d6/d0/usercli_8h.html#a43">BUTTONSTATE</a>(pbutn) &amp; <a class="code" href="../../d6/d0/usercli_8h.html#a48">BST_DONTCLICK</a>)) {
01435                     <span class="keywordflow">if</span> (!(<a class="code" href="../../d6/d0/usercli_8h.html#a43">BUTTONSTATE</a>(pbutn) &amp; <a class="code" href="../../d6/d0/usercli_8h.html#a44">BST_CHECKMASK</a>)) {
01436                         <a class="code" href="../../d8/d1/btnctl_8c.html#a25">xxxButtonNotifyParent</a>(pwnd, BN_CLICKED);
01437                     }
01438                 }
01439                 <span class="keywordflow">break</span>;
01440             }
01441         }
01442         <span class="keywordflow">break</span>;
01443 
01444     <span class="keywordflow">case</span> WM_GETDLGCODE:
01445         <span class="keywordflow">switch</span> (bsWnd) {
01446         <span class="keywordflow">case</span> <a class="code" href="../../d5/d9/ntrtlp_8h.html#a4">LOBYTE</a>(BS_DEFPUSHBUTTON):
01447             wParam = DLGC_DEFPUSHBUTTON;
01448             <span class="keywordflow">break</span>;
01449 
01450         <span class="keywordflow">case</span> <a class="code" href="../../d5/d9/ntrtlp_8h.html#a4">LOBYTE</a>(BS_PUSHBUTTON):
01451         case <a class="code" href="../../d5/d9/ntrtlp_8h.html#a4">LOBYTE</a>(BS_PUSHBOX):
01452             wParam = DLGC_UNDEFPUSHBUTTON;
01453             <span class="keywordflow">break</span>;
01454 
01455         <span class="keywordflow">case</span> <a class="code" href="../../d5/d9/ntrtlp_8h.html#a4">LOBYTE</a>(BS_AUTORADIOBUTTON):
01456         case <a class="code" href="../../d5/d9/ntrtlp_8h.html#a4">LOBYTE</a>(BS_RADIOBUTTON):
01457             wParam = DLGC_RADIOBUTTON;
01458             <span class="keywordflow">break</span>;
01459 
01460         <span class="keywordflow">case</span> <a class="code" href="../../d5/d9/ntrtlp_8h.html#a4">LOBYTE</a>(BS_GROUPBOX):
01461             return (LONG)DLGC_STATIC;
01462 
01463         <span class="keywordflow">case</span> <a class="code" href="../../d5/d9/ntrtlp_8h.html#a4">LOBYTE</a>(BS_CHECKBOX):
01464         case <a class="code" href="../../d5/d9/ntrtlp_8h.html#a4">LOBYTE</a>(BS_AUTOCHECKBOX):
01465 
01466             <span class="comment">/*</span>
01467 <span class="comment">             * If this is a char that is a '=/+', or '-', we want it</span>
01468 <span class="comment">             */</span>
01469             if (lParam &amp;&amp; ((LPMSG)lParam)-&gt;message == WM_CHAR) {
01470                 <span class="keywordflow">switch</span> (wParam) {
01471                 <span class="keywordflow">case</span> TEXT(<span class="charliteral">'='</span>):
01472                 case TEXT('+'):
01473                 case TEXT('-'):
01474                     wParam = DLGC_WANTCHARS;
01475                     <span class="keywordflow">break</span>;
01476 
01477                 <span class="keywordflow">default</span>:
01478                     wParam = 0;
01479                 }
01480             } <span class="keywordflow">else</span> {
01481                 wParam = 0;
01482             }
01483             <span class="keywordflow">break</span>;
01484 
01485         <span class="keywordflow">default</span>:
01486             wParam = 0;
01487         }
01488         <span class="keywordflow">return</span> (LONG)(wParam | DLGC_BUTTON);
01489 
01490     <span class="keywordflow">case</span> WM_CAPTURECHANGED:
01491         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a43">BUTTONSTATE</a>(pbutn) &amp; <a class="code" href="../../d6/d0/usercli_8h.html#a46">BST_CAPTURED</a>) {
01492             <span class="comment">// Unwittingly, we've been kicked out of capture,</span>
01493             <span class="comment">// so undepress etc.</span>
01494             <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a43">BUTTONSTATE</a>(pbutn) &amp; <a class="code" href="../../d6/d0/usercli_8h.html#a47">BST_MOUSE</a>)
01495                 <a class="code" href="../../d6/d0/usercli_8h.html#a600">SendMessageWorker</a>(pwnd, BM_SETSTATE, FALSE, 0, FALSE);
01496             <a class="code" href="../../d6/d0/usercli_8h.html#a43">BUTTONSTATE</a>(pbutn) &amp;= ~(<a class="code" href="../../d6/d0/usercli_8h.html#a46">BST_CAPTURED</a> | <a class="code" href="../../d6/d0/usercli_8h.html#a47">BST_MOUSE</a>);
01497         }
01498         <span class="keywordflow">break</span>;
01499 
01500     <span class="keywordflow">case</span> WM_KILLFOCUS:
01501 
01502         <span class="comment">/*</span>
01503 <span class="comment">         * If we are losing the focus and we are in "capture mode", click</span>
01504 <span class="comment">         * the button.  This allows tab and space keys to overlap for</span>
01505 <span class="comment">         * fast toggle of a series of buttons.</span>
01506 <span class="comment">         */</span>
01507         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a43">BUTTONSTATE</a>(pbutn) &amp; <a class="code" href="../../d6/d0/usercli_8h.html#a47">BST_MOUSE</a>) {
01508 
01509             <span class="comment">/*</span>
01510 <span class="comment">             * If for some reason we are killing the focus, and we have the</span>
01511 <span class="comment">             * mouse captured, don't notify the parent we got clicked.  This</span>
01512 <span class="comment">             * breaks Omnis Quartz otherwise.</span>
01513 <span class="comment">             */</span>
01514             <a class="code" href="../../d6/d0/usercli_8h.html#a600">SendMessageWorker</a>(pwnd, BM_SETSTATE, FALSE, 0, FALSE);
01515         }
01516 
01517         <a class="code" href="../../d8/d1/btnctl_8c.html#a26">xxxBNReleaseCapture</a>(pbutn, TRUE);
01518 
01519         <a class="code" href="../../d6/d0/usercli_8h.html#a43">BUTTONSTATE</a>(pbutn) &amp;= ~BST_FOCUS;
01520         <span class="keywordflow">if</span> ((hdc = <a class="code" href="../../d8/d1/btnctl_8c.html#a18">xxxBNGetDC</a>(pbutn, NULL)) != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01521             <a class="code" href="../../d8/d1/btnctl_8c.html#a27">xxxBNDrawText</a>(pbutn, hdc, DBT_FOCUS, FALSE);
01522 
01523             <a class="code" href="../../d8/d1/btnctl_8c.html#a19">BNReleaseDC</a>(pbutn, hdc);
01524         }
01525 
01526         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, BFNOTIFY))
01527             <a class="code" href="../../d8/d1/btnctl_8c.html#a25">xxxButtonNotifyParent</a>(pwnd, BN_KILLFOCUS);
01528 
01529         <span class="comment">/*</span>
01530 <span class="comment">         * Since the bold border around the defpushbutton is done by</span>
01531 <span class="comment">         * someone else, we need to invalidate the rect so that the</span>
01532 <span class="comment">         * focus rect is repainted properly.</span>
01533 <span class="comment">         */</span>
01534         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a206">NtUserInvalidateRect</a>(hwnd, NULL, FALSE);
01535         <span class="keywordflow">break</span>;
01536 
01537     <span class="keywordflow">case</span> WM_LBUTTONDBLCLK:
01538 
01539         <span class="comment">/*</span>
01540 <span class="comment">         * Double click messages are recognized for BS_RADIOBUTTON,</span>
01541 <span class="comment">         * BS_USERBUTTON, and BS_OWNERDRAW styles.  For all other buttons,</span>
01542 <span class="comment">         * double click is handled like a normal button down.</span>
01543 <span class="comment">         */</span>
01544         <span class="keywordflow">switch</span> (bsWnd) {
01545         <span class="keywordflow">default</span>:
01546             <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, BFNOTIFY))
01547                 <span class="keywordflow">goto</span> btnclick;
01548 
01549         <span class="keywordflow">case</span> <a class="code" href="../../d5/d9/ntrtlp_8h.html#a4">LOBYTE</a>(BS_USERBUTTON):
01550         case <a class="code" href="../../d5/d9/ntrtlp_8h.html#a4">LOBYTE</a>(BS_RADIOBUTTON):
01551         case <a class="code" href="../../d5/d9/ntrtlp_8h.html#a4">LOBYTE</a>(BS_OWNERDRAW):
01552             <a class="code" href="../../d8/d1/btnctl_8c.html#a25">xxxButtonNotifyParent</a>(pwnd, BN_DOUBLECLICKED);
01553             <span class="keywordflow">break</span>;
01554         }
01555         <span class="keywordflow">break</span>;
01556 
01557     <span class="keywordflow">case</span> WM_LBUTTONUP:
01558         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a43">BUTTONSTATE</a>(pbutn) &amp; <a class="code" href="../../d6/d0/usercli_8h.html#a47">BST_MOUSE</a>) {
01559             <a class="code" href="../../d8/d1/btnctl_8c.html#a26">xxxBNReleaseCapture</a>(pbutn, TRUE);
01560         }
01561         <span class="keywordflow">break</span>;
01562 
01563     <span class="keywordflow">case</span> WM_MOUSEMOVE:
01564         <span class="keywordflow">if</span> (!(<a class="code" href="../../d6/d0/usercli_8h.html#a43">BUTTONSTATE</a>(pbutn) &amp; <a class="code" href="../../d6/d0/usercli_8h.html#a47">BST_MOUSE</a>)) {
01565             <span class="keywordflow">break</span>;
01566         }
01567 
01568         <span class="comment">/*</span>
01569 <span class="comment">         *** FALL THRU **</span>
01570 <span class="comment">         */</span>
01571     <span class="keywordflow">case</span> WM_LBUTTONDOWN:
01572 btnclick:
01573         <span class="keywordflow">if</span> (<a class="code" href="../../d8/d1/btnctl_8c.html#a24">xxxBNSetCapture</a>(pbutn, BST_MOUSE)) {
01574             <a class="code" href="../../d6/d9/rtl_2wow_8c.html#a19">_GetClientRect</a>(pwnd, &amp;rc);
01575             POINTSTOPOINT(pt, lParam);
01576             <a class="code" href="../../d6/d0/usercli_8h.html#a600">SendMessageWorker</a>(pwnd, BM_SETSTATE, <a class="code" href="../../d3/d6/rect_8c.html#a5">PtInRect</a>(&amp;rc, pt), 0, FALSE);
01577         }
01578         <span class="keywordflow">break</span>;
01579 
01580     <span class="keywordflow">case</span> WM_CHAR:
01581         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a43">BUTTONSTATE</a>(pbutn) &amp; <a class="code" href="../../d6/d0/usercli_8h.html#a47">BST_MOUSE</a>)
01582             <span class="keywordflow">goto</span> CallDWP;
01583 
01584         <span class="keywordflow">if</span> (bsWnd != <a class="code" href="../../d5/d9/ntrtlp_8h.html#a4">LOBYTE</a>(BS_CHECKBOX) &amp;&amp;
01585             bsWnd != <a class="code" href="../../d5/d9/ntrtlp_8h.html#a4">LOBYTE</a>(BS_AUTOCHECKBOX))
01586             <span class="keywordflow">goto</span> CallDWP;
01587 
01588         <span class="keywordflow">switch</span> (wParam) {
01589         <span class="keywordflow">case</span> TEXT(<span class="charliteral">'+'</span>):
01590         case TEXT('='):
01591             wParam = 1;    <span class="comment">// we must Set the check mark on.</span>
01592             <span class="keywordflow">goto</span>   SetCheck;
01593 
01594         <span class="keywordflow">case</span> TEXT(<span class="charliteral">'-'</span>):
01595             wParam = 0;    <span class="comment">// Set the check mark off.</span>
01596 SetCheck:
01597             <span class="comment">// Must notify only if the check status changes</span>
01598             <span class="keywordflow">if</span> ((WORD)(<a class="code" href="../../d6/d0/usercli_8h.html#a43">BUTTONSTATE</a>(pbutn) &amp; <a class="code" href="../../d6/d0/usercli_8h.html#a44">BST_CHECKMASK</a>) != (WORD)wParam)
01599             {
01600                 <span class="comment">// We must check/uncheck only if it is AUTO</span>
01601                 <span class="keywordflow">if</span> (bsWnd == <a class="code" href="../../d5/d9/ntrtlp_8h.html#a4">LOBYTE</a>(BS_AUTOCHECKBOX))
01602                 {
01603                     <span class="keywordflow">if</span> (<a class="code" href="../../d8/d1/btnctl_8c.html#a24">xxxBNSetCapture</a>(pbutn, 0))
01604                     {
01605                         <a class="code" href="../../d6/d0/usercli_8h.html#a600">SendMessageWorker</a>(pwnd, BM_SETCHECK, wParam, 0, FALSE);
01606 
01607                         <a class="code" href="../../d8/d1/btnctl_8c.html#a26">xxxBNReleaseCapture</a>(pbutn, TRUE);
01608                     }
01609                 }
01610 
01611                 <a class="code" href="../../d8/d1/btnctl_8c.html#a25">xxxButtonNotifyParent</a>(pwnd, BN_CLICKED);
01612             }
01613             <span class="keywordflow">break</span>;
01614 
01615         <span class="keywordflow">default</span>:
01616             <span class="keywordflow">goto</span> CallDWP;
01617         }
01618         <span class="keywordflow">break</span>;
01619 
01620     <span class="keywordflow">case</span> BM_CLICK:
01621         <span class="comment">// Don't recurse into this code!</span>
01622         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a43">BUTTONSTATE</a>(pbutn) &amp; <a class="code" href="../../d6/d0/usercli_8h.html#a49">BST_INBMCLICK</a>)
01623             <span class="keywordflow">break</span>;
01624 
01625         <a class="code" href="../../d6/d0/usercli_8h.html#a43">BUTTONSTATE</a>(pbutn) |= <a class="code" href="../../d6/d0/usercli_8h.html#a49">BST_INBMCLICK</a>;
01626         <a class="code" href="../../d6/d0/usercli_8h.html#a600">SendMessageWorker</a>(pwnd, WM_LBUTTONDOWN, 0, 0, FALSE);
01627         <a class="code" href="../../d6/d0/usercli_8h.html#a600">SendMessageWorker</a>(pwnd, WM_LBUTTONUP, 0, 0, FALSE);
01628         <a class="code" href="../../d6/d0/usercli_8h.html#a43">BUTTONSTATE</a>(pbutn) &amp;= ~<a class="code" href="../../d6/d0/usercli_8h.html#a49">BST_INBMCLICK</a>;
01629 
01630         <span class="comment">/*</span>
01631 <span class="comment">         *** FALL THRU **</span>
01632 <span class="comment">         */</span>
01633 
01634     <span class="keywordflow">case</span> WM_KEYDOWN:
01635         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a43">BUTTONSTATE</a>(pbutn) &amp; <a class="code" href="../../d6/d0/usercli_8h.html#a47">BST_MOUSE</a>)
01636             <span class="keywordflow">break</span>;
01637 
01638         <span class="keywordflow">if</span> (wParam == VK_SPACE) {
01639             <span class="keywordflow">if</span> (<a class="code" href="../../d8/d1/btnctl_8c.html#a24">xxxBNSetCapture</a>(pbutn, 0)) {
01640                 <a class="code" href="../../d6/d0/usercli_8h.html#a600">SendMessageWorker</a>(pwnd, BM_SETSTATE, TRUE, 0, FALSE);
01641             }
01642         } <span class="keywordflow">else</span> {
01643             <a class="code" href="../../d8/d1/btnctl_8c.html#a26">xxxBNReleaseCapture</a>(pbutn, FALSE);
01644         }
01645         <span class="keywordflow">break</span>;
01646 
01647     <span class="keywordflow">case</span> WM_KEYUP:
01648     <span class="keywordflow">case</span> WM_SYSKEYUP:
01649         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a43">BUTTONSTATE</a>(pbutn) &amp; <a class="code" href="../../d6/d0/usercli_8h.html#a47">BST_MOUSE</a>) {
01650             <span class="keywordflow">goto</span> CallDWP;
01651         }
01652 
01653         <span class="comment">/*</span>
01654 <span class="comment">         * Don't cancel the capture mode on the up of the tab in case the</span>
01655 <span class="comment">         * guy is overlapping tab and space keys.</span>
01656 <span class="comment">         */</span>
01657         <span class="keywordflow">if</span> (wParam == VK_TAB) {
01658             <span class="keywordflow">goto</span> CallDWP;
01659         }
01660 
01661         <span class="comment">/*</span>
01662 <span class="comment">         * WARNING: pwnd is history after this call!</span>
01663 <span class="comment">         */</span>
01664         <a class="code" href="../../d8/d1/btnctl_8c.html#a26">xxxBNReleaseCapture</a>(pbutn, (wParam == VK_SPACE));
01665 
01666         <span class="keywordflow">if</span> (message == WM_SYSKEYUP) {
01667             <span class="keywordflow">goto</span> CallDWP;
01668         }
01669         <span class="keywordflow">break</span>;
01670 
01671     <span class="keywordflow">case</span> BM_GETSTATE:
01672         <span class="keywordflow">return</span> (LONG)<a class="code" href="../../d6/d0/usercli_8h.html#a43">BUTTONSTATE</a>(pbutn);
01673 
01674     <span class="keywordflow">case</span> BM_SETSTATE:
01675         wOldState = (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)(<a class="code" href="../../d6/d0/usercli_8h.html#a43">BUTTONSTATE</a>(pbutn) &amp; BST_PUSHED);
01676         <span class="keywordflow">if</span> (wParam) {
01677             <a class="code" href="../../d6/d0/usercli_8h.html#a43">BUTTONSTATE</a>(pbutn) |= BST_PUSHED;
01678         } <span class="keywordflow">else</span> {
01679             <a class="code" href="../../d6/d0/usercli_8h.html#a43">BUTTONSTATE</a>(pbutn) &amp;= ~BST_PUSHED;
01680         }
01681 
01682         <span class="keywordflow">if</span> ((hdc = <a class="code" href="../../d8/d1/btnctl_8c.html#a18">xxxBNGetDC</a>(pbutn, &amp;hbr)) != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01683             <span class="keywordflow">if</span> (bsWnd == <a class="code" href="../../d5/d9/ntrtlp_8h.html#a4">LOBYTE</a>(BS_USERBUTTON)) {
01684                 <a class="code" href="../../d8/d1/btnctl_8c.html#a25">xxxButtonNotifyParent</a>(pwnd, (UINT)(wParam ? BN_PUSHED : BN_UNPUSHED));
01685             } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (bsWnd == <a class="code" href="../../d5/d9/ntrtlp_8h.html#a4">LOBYTE</a>(BS_OWNERDRAW)) {
01686                 <span class="keywordflow">if</span> (wOldState != (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)(<a class="code" href="../../d6/d0/usercli_8h.html#a43">BUTTONSTATE</a>(pbutn) &amp; BST_PUSHED)) {
01687                     <span class="comment">/*</span>
01688 <span class="comment">                     * Only notify for drawing if state has changed..</span>
01689 <span class="comment">                     */</span>
01690                     <a class="code" href="../../d8/d1/btnctl_8c.html#a20">xxxBNOwnerDraw</a>(pbutn, hdc, ODA_SELECT);
01691                 }
01692             } <span class="keywordflow">else</span> {
01693                 <a class="code" href="../../d8/d1/btnctl_8c.html#a29">xxxButtonDrawNewState</a>(pbutn, hdc, hbr, wOldState);
01694             }
01695 
01696             <a class="code" href="../../d8/d1/btnctl_8c.html#a19">BNReleaseDC</a>(pbutn, hdc);
01697         }
01698         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a405">FWINABLE</a>() &amp;&amp; (wOldState != (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>)(<a class="code" href="../../d6/d0/usercli_8h.html#a43">BUTTONSTATE</a>(pbutn) &amp; BST_PUSHED))) {
01699             <a class="code" href="../../d8/d9/client_2ntstubs_8c.html#a12">NotifyWinEvent</a>(EVENT_OBJECT_STATECHANGE, hwnd, OBJID_CLIENT, INDEXID_CONTAINER);
01700         }
01701         <span class="keywordflow">break</span>;
01702 
01703     <span class="keywordflow">case</span> BM_GETCHECK:
01704         <span class="keywordflow">return</span> (LONG)(<a class="code" href="../../d6/d0/usercli_8h.html#a43">BUTTONSTATE</a>(pbutn) &amp; <a class="code" href="../../d6/d0/usercli_8h.html#a44">BST_CHECKMASK</a>);
01705 
01706     <span class="keywordflow">case</span> BM_SETCHECK:
01707         <span class="keywordflow">switch</span> (bsWnd) {
01708         <span class="keywordflow">case</span> <a class="code" href="../../d5/d9/ntrtlp_8h.html#a4">LOBYTE</a>(BS_RADIOBUTTON):
01709         case <a class="code" href="../../d5/d9/ntrtlp_8h.html#a4">LOBYTE</a>(BS_AUTORADIOBUTTON):
01710             if (wParam) {
01711                     <a class="code" href="../../d4/d1/userk_8h.html#a1628">SetWindowState</a>(pwnd, WFTABSTOP);
01712             } <span class="keywordflow">else</span> {
01713                     <a class="code" href="../../d4/d1/userk_8h.html#a1629">ClearWindowState</a>(pwnd, WFTABSTOP);
01714             }
01715 
01716             <span class="comment">/*</span>
01717 <span class="comment">             *** FALL THRU **</span>
01718 <span class="comment">             */</span>
01719         <span class="keywordflow">case</span> <a class="code" href="../../d5/d9/ntrtlp_8h.html#a4">LOBYTE</a>(BS_CHECKBOX):
01720         case <a class="code" href="../../d5/d9/ntrtlp_8h.html#a4">LOBYTE</a>(BS_AUTOCHECKBOX):
01721             if (wParam) {
01722                 wParam = 1;
01723             }
01724             <span class="keywordflow">goto</span> CheckIt;
01725 
01726         <span class="keywordflow">case</span> <a class="code" href="../../d5/d9/ntrtlp_8h.html#a4">LOBYTE</a>(BS_3STATE):
01727         case <a class="code" href="../../d5/d9/ntrtlp_8h.html#a4">LOBYTE</a>(BS_AUTO3STATE):
01728             if (wParam &gt; BST_INDETERMINATE) {
01729                 wParam = BST_INDETERMINATE;
01730             }
01731 CheckIt:
01732             <span class="keywordflow">if</span> ((<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)(<a class="code" href="../../d6/d0/usercli_8h.html#a43">BUTTONSTATE</a>(pbutn) &amp; <a class="code" href="../../d6/d0/usercli_8h.html#a44">BST_CHECKMASK</a>) != (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)wParam) {
01733                 <a class="code" href="../../d6/d0/usercli_8h.html#a43">BUTTONSTATE</a>(pbutn) &amp;= ~<a class="code" href="../../d6/d0/usercli_8h.html#a44">BST_CHECKMASK</a>;
01734                 <a class="code" href="../../d6/d0/usercli_8h.html#a43">BUTTONSTATE</a>(pbutn) |= (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)wParam;
01735 
01736                 <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d8/rtl_2winmgr_8c.html#a6">IsVisible</a>(pwnd))
01737                     <span class="keywordflow">break</span>;
01738 
01739                 <span class="keywordflow">if</span> ((hdc = <a class="code" href="../../d8/d1/btnctl_8c.html#a18">xxxBNGetDC</a>(pbutn, &amp;hbr)) != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01740                     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, BFPUSHLIKE)) {
01741                         <a class="code" href="../../d8/d1/btnctl_8c.html#a13">xxxDrawButton</a>(pbutn, hdc, PBF_PUSHABLE);
01742                     } <span class="keywordflow">else</span> {
01743                         <a class="code" href="../../d8/d1/btnctl_8c.html#a28">xxxButtonDrawCheck</a>(pbutn, hdc, hbr);
01744                     }
01745                     <a class="code" href="../../d8/d1/btnctl_8c.html#a19">BNReleaseDC</a>(pbutn, hdc);
01746                 }
01747 
01748                 <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a405">FWINABLE</a>())
01749                     <a class="code" href="../../d8/d9/client_2ntstubs_8c.html#a12">NotifyWinEvent</a>(EVENT_OBJECT_STATECHANGE, hwnd, OBJID_CLIENT, INDEXID_CONTAINER);
01750             }
01751             <span class="keywordflow">break</span>;
01752         }
01753         <span class="keywordflow">break</span>;
01754 
01755     <span class="keywordflow">case</span> BM_SETSTYLE:
01756         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a285">NtUserAlterWindowStyle</a>(hwnd, BS_TYPEMASK, (DWORD)wParam);
01757 
01758         <span class="keywordflow">if</span> (lParam) {
01759             <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a206">NtUserInvalidateRect</a>(hwnd, NULL, TRUE);
01760         }
01761         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a405">FWINABLE</a>()) {
01762             <a class="code" href="../../d8/d9/client_2ntstubs_8c.html#a12">NotifyWinEvent</a>(EVENT_OBJECT_STATECHANGE, hwnd, OBJID_CLIENT, INDEXID_CONTAINER);
01763         }
01764         <span class="keywordflow">break</span>;
01765 
01766     <span class="keywordflow">case</span> WM_SETTEXT:
01767 
01768         <span class="comment">/*</span>
01769 <span class="comment">         * In case the new group name is longer than the old name,</span>
01770 <span class="comment">         * this paints over the old name before repainting the group</span>
01771 <span class="comment">         * box with the new name.</span>
01772 <span class="comment">         */</span>
01773         <span class="keywordflow">if</span> (bsWnd == <a class="code" href="../../d5/d9/ntrtlp_8h.html#a4">LOBYTE</a>(BS_GROUPBOX)) {
01774             hdc = <a class="code" href="../../d8/d1/btnctl_8c.html#a18">xxxBNGetDC</a>(pbutn, &amp;hbr);
01775             <span class="keywordflow">if</span> (hdc != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01776                 <a class="code" href="../../d8/d1/btnctl_8c.html#a21">BNCalcRect</a>(pwnd, hdc, &amp;rc, CBR_GROUPTEXT, 0);
01777                 <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a206">NtUserInvalidateRect</a>(hwnd, &amp;rc, TRUE);
01778 
01779                 pwndParent = <a class="code" href="../../d6/d0/usercli_8h.html#a27">REBASEPWND</a>(pwnd, spwndParent);
01780                 <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o3">spwndParent</a>, &amp;tlpwndParent);
01781                 <a class="code" href="../../d6/d0/usercli_8h.html#a645">PaintRect</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a450">HW</a>(pwndParent), hwnd, hdc, hbr, &amp;rc);
01782                 <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndParent);
01783 
01784                 <a class="code" href="../../d8/d1/btnctl_8c.html#a19">BNReleaseDC</a>(pbutn, hdc);
01785             }
01786         }
01787 
01788         lResult = <a class="code" href="../../d6/d0/usercli_8h.html#a622">_DefSetText</a>(hwnd, (LPWSTR)lParam, (BOOL)fAnsi);
01789 
01790         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a405">FWINABLE</a>()) {
01791             <a class="code" href="../../d8/d9/client_2ntstubs_8c.html#a12">NotifyWinEvent</a>(EVENT_OBJECT_NAMECHANGE, hwnd, OBJID_WINDOW, INDEXID_CONTAINER);
01792         }
01793         <span class="keywordflow">goto</span> DoEnable;
01794 
01795         <span class="comment">/*</span>
01796 <span class="comment">         *** FALL THRU **</span>
01797 <span class="comment">         */</span>
01798     <span class="keywordflow">case</span> WM_ENABLE:
01799         lResult = 0<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>;
01800 DoEnable:
01801         <a class="code" href="../../d8/d1/btnctl_8c.html#a31">RepaintButton</a>(pbutn);
01802         <span class="keywordflow">return</span> lResult;
01803 
01804     <span class="keywordflow">case</span> WM_SETFONT:
01805         <span class="comment">/*</span>
01806 <span class="comment">         * wParam - handle to the font</span>
01807 <span class="comment">         * lParam - if true, redraw else don't</span>
01808 <span class="comment">         */</span>
01809         <a class="code" href="../../d8/d1/btnctl_8c.html#a16">BNSetFont</a>(pbutn, (HFONT)wParam, (BOOL)(lParam != 0));
01810         <span class="keywordflow">break</span>;
01811 
01812     <span class="keywordflow">case</span> WM_GETFONT:
01813         <span class="keywordflow">return</span> (LRESULT)pbutn-&gt;<a class="code" href="../../d2/d9/structtagBUTN.html#o2">hFont</a>;
01814 
01815     <span class="keywordflow">case</span> BM_GETIMAGE:
01816     <span class="keywordflow">case</span> BM_SETIMAGE:
01817         <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d1/btnctl_8c.html#a7">IsValidImage</a>(wParam, <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, BFIMAGEMASK), IMAGE_BMMAX)) {
01818             RIPERR0(ERROR_INVALID_PARAMETER, RIP_WARNING, <span class="stringliteral">"Invalid button image type"</span>);
01819         } <span class="keywordflow">else</span> {
01820             HANDLE  hOld = pbutn-&gt;<a class="code" href="../../d2/d9/structtagBUTN.html#o3">hImage</a>;
01821 
01822             <span class="keywordflow">if</span> (message == BM_SETIMAGE) {
01823                 pbutn-&gt;<a class="code" href="../../d2/d9/structtagBUTN.html#o3">hImage</a> = (HANDLE)lParam;
01824                 <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFVISIBLE)) {
01825                     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a206">NtUserInvalidateRect</a>(hwnd, NULL, TRUE);
01826                 }
01827             }
01828             <span class="keywordflow">return</span> (LRESULT)hOld;
01829         }
01830         <span class="keywordflow">break</span>;
01831 
01832     <span class="keywordflow">case</span> WM_NCDESTROY:
01833     <span class="keywordflow">case</span> WM_FINALDESTROY:
01834         <span class="keywordflow">if</span> (pbutn) {
01835             <a class="code" href="../../d6/d0/usercli_8h.html#a42">Unlock</a>(&amp;pbutn-&gt;<a class="code" href="../../d2/d9/structtagBUTN.html#o0">spwnd</a>);
01836             <a class="code" href="../../d6/d0/usercli_8h.html#a408">FreeLookasideEntry</a>(&amp;ButtonLookaside, pbutn);
01837         }
01838         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a284">NtUserSetWindowFNID</a>(hwnd, FNID_CLEANEDUP_BIT);
01839         <span class="keywordflow">break</span>;
01840 
01841     <span class="keywordflow">case</span> WM_NCCREATE:
01842         <span class="comment">// Borland's OBEX has a button with style 0x98; We didn't strip</span>
01843         <span class="comment">// these bits in win3.1 because we checked for 0x08.</span>
01844         <span class="comment">// Stripping these bits cause a GP Fault in OBEX.</span>
01845         <span class="comment">// For win3.1 guys, I use the old code to strip the style bits.</span>
01846         <span class="comment">//</span>
01847         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFWIN31COMPAT)) {
01848             <span class="keywordflow">if</span>(((!<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFWIN40COMPAT)) &amp;&amp;
01849                 (((<a class="code" href="../../d5/d9/ntrtlp_8h.html#a4">LOBYTE</a>(pwnd-&gt;style)) &amp; (<a class="code" href="../../d5/d9/ntrtlp_8h.html#a4">LOBYTE</a>(~BS_LEFTTEXT))) == <a class="code" href="../../d5/d9/ntrtlp_8h.html#a4">LOBYTE</a>(BS_USERBUTTON))) ||
01850                (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFWIN40COMPAT) &amp;&amp;
01851                (bsWnd == <a class="code" href="../../d5/d9/ntrtlp_8h.html#a4">LOBYTE</a>(BS_USERBUTTON))))
01852             {
01853                 <span class="comment">// BS_USERBUTTON is no longer allowed for 3.1 and beyond.</span>
01854                 <span class="comment">// Just turn to normal push button.</span>
01855                 <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a285">NtUserAlterWindowStyle</a>(hwnd, BS_TYPEMASK, 0);
01856                 RIPMSG0(RIP_WARNING, <span class="stringliteral">"BS_USERBUTTON no longer supported"</span>);
01857             }
01858         }
01859         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd,WEFRIGHT)) {
01860             <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a285">NtUserAlterWindowStyle</a>(hwnd, BS_RIGHT | BS_RIGHTBUTTON, BS_RIGHT | BS_RIGHTBUTTON);
01861         }
01862         <span class="keywordflow">goto</span> CallDWP;
01863 
01864     <span class="keywordflow">case</span> WM_INPUTLANGCHANGEREQUEST:
01865 
01866         <span class="comment">//</span>
01867         <span class="comment">// #115190</span>
01868         <span class="comment">// If the window is one of controls on top of dialogbox,</span>
01869         <span class="comment">// let the parent dialog handle it.</span>
01870         <span class="comment">//</span>
01871         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a735">TestwndChild</a>(pwnd) &amp;&amp; pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o3">spwndParent</a>) {
01872             <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwndParent = <a class="code" href="../../d6/d0/usercli_8h.html#a27">REBASEPWND</a>(pwnd, spwndParent);
01873             <span class="keywordflow">if</span> (pwndParent) {
01874                 <a class="code" href="../../d7/d0/structtagCLS.html">PCLS</a> pclsParent = <a class="code" href="../../d6/d0/usercli_8h.html#a24">REBASEALWAYS</a>(pwndParent, pcls);
01875 
01876                 UserAssert(pclsParent != NULL);
01877                 <span class="keywordflow">if</span> (pclsParent-&gt;<a class="code" href="../../d7/d0/structtagCLS.html#o1">atomClassName</a> == <a class="code" href="../../d1/d8/clglobal_8c.html#a4">gpsi</a>-&gt;<a class="code" href="../../d2/d6/structtagSERVERINFO.html#o12">atomSysClass</a>[<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a76">ICLS_DIALOG</a>]) {
01878                     RIPMSG0(RIP_VERBOSE, <span class="stringliteral">"Button: WM_INPUTLANGCHANGEREQUEST is sent to parent.\n"</span>);
01879                     <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a600">SendMessageWorker</a>(pwndParent, message, wParam, lParam, FALSE);
01880                 }
01881             }
01882         }
01883         <span class="keywordflow">goto</span> CallDWP;
01884 
01885     <span class="keywordflow">case</span> WM_UPDATEUISTATE:
01886         {
01887             <a class="code" href="../../d6/d0/usercli_8h.html#a610">DefWindowProcWorker</a>(pwnd, message, wParam, lParam, fAnsi);
01888             <span class="keywordflow">if</span> (<a class="code" href="../../d1/d0/inc_2user_8h.html#a668">ISBSTEXTOROD</a>(pwnd)) {
01889                 pbutn-&gt;<a class="code" href="../../d2/d9/structtagBUTN.html#o4">fPaintKbdCuesOnly</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01890                 <a class="code" href="../../d8/d1/btnctl_8c.html#a31">RepaintButton</a>(pbutn);
01891                 pbutn-&gt;<a class="code" href="../../d2/d9/structtagBUTN.html#o4">fPaintKbdCuesOnly</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01892             }
01893         }
01894         <span class="keywordflow">break</span>;
01895 
01896     <span class="keywordflow">default</span>:
01897 CallDWP:
01898         <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a610">DefWindowProcWorker</a>(pwnd, message, wParam, lParam, fAnsi);
01899     }
01900 
01901     <span class="keywordflow">return</span> 0<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>;
01902 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a670" doxytag="usercli.h::CBNcCreateHandler" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> long CBNcCreateHandler           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d9/structtagCBox.html">PCBOX</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d3/comboini_8c-source.html#l00031">31</a> of file <a class="el" href="../../d4/d3/comboini_8c-source.html">comboini.c</a>.
<p>
References <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02474">CBFHASSTRINGS</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02469">CBFOWNERDRAW</a>, <a class="el" href="../../d9/d3/w32_2ntuser_2kernel_2random_8c-source.html#l00102">ClearWindowState()</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01905">tagCBox::f3DCombo</a>, <a class="el" href="../../d6/d8/ntrtlp_8h-source.html#l00184">HIBYTE</a>, <a class="el" href="../../d9/d3/w32_2ntuser_2kernel_2random_8c-source.html#l00083">SetWindowState()</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01915">tagCBox::styleSave</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02366">WEFCLIENTEDGE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02367">WEFEDGEMASK</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02410">WFBORDER</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02406">WFHSCROLL</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02407">WFVSCROLL</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02319">WFWIN40COMPAT</a>.
<p>
Referenced by <a class="el" href="../../d2/d3/combo_8c-source.html#l00207">ComboBoxWndProcWorker()</a>.
<p>
<pre class="fragment"><div>00034 {
00035     <span class="comment">/*</span>
00036 <span class="comment">     * Save the style bits so that we have them when we create the client area</span>
00037 <span class="comment">     * of the combo box window.</span>
00038 <span class="comment">     */</span>
00039     pcbox-&gt;styleSave = pwnd-&gt;style &amp; (WS_VSCROLL | WS_HSCROLL);
00040 
00041     <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, CBFOWNERDRAW))
00042         <span class="comment">// Add in CBS_HASSTRINGS if the style is implied...</span>
00043         <a class="code" href="../../d4/d1/userk_8h.html#a1628">SetWindowState</a>(pwnd, CBFHASSTRINGS);
00044 
00045     UserAssert(<a class="code" href="../../d5/d9/ntrtlp_8h.html#a5">HIBYTE</a>(WFVSCROLL) == <a class="code" href="../../d5/d9/ntrtlp_8h.html#a5">HIBYTE</a>(WFHSCROLL));
00046     UserAssert(<a class="code" href="../../d5/d9/ntrtlp_8h.html#a5">HIBYTE</a>(WFHSCROLL) == <a class="code" href="../../d5/d9/ntrtlp_8h.html#a5">HIBYTE</a>(WFBORDER));
00047     <a class="code" href="../../d4/d1/userk_8h.html#a1629">ClearWindowState</a>(pwnd, WFVSCROLL | WFHSCROLL | WFBORDER);
00048 
00049     <span class="comment">//</span>
00050     <span class="comment">// If the window is 4.0 compatible or has a CLIENTEDGE, draw the combo</span>
00051     <span class="comment">// in 3D.  Otherwise, use a flat border.</span>
00052     <span class="comment">//</span>
00053     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFWIN40COMPAT) || <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WEFCLIENTEDGE))
00054         pcbox-&gt;f3DCombo = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00055 
00056     <a class="code" href="../../d4/d1/userk_8h.html#a1629">ClearWindowState</a>(pwnd, WEFEDGEMASK);
00057 
00058     <span class="keywordflow">return</span> (LONG)<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00059 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a713" doxytag="usercli.h::CItemInWindow" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a> CItemInWindow           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00526">526</a> of file <a class="el" href="../../d0/d1/lboxctl2_8c-source.html">lboxctl2.c</a>.
<p>
References <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00924">_GetClientRect()</a>, <a class="el" href="../../d4/d1/lboxvar_8c-source.html#l00101">CItemInWindowVarOwnerDraw()</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01957">tagLBIV::cyChar</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01995">tagLBIV::fMultiColumn</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00025">INT</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01959">tagLBIV::itemsPerColumn</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01960">tagLBIV::numberOfColumns</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01964">tagLBIV::OwnerDraw</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00437">OWNERDRAWVAR</a>, and <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01940">tagLBIV::spwnd</a>.
<p>
Referenced by <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01090">LastFullVisible()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00179">LBGetItemRect()</a>, <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00025">LBSetCItemFullMax()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l03754">xxxAlterHilite()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l03387">xxxCheckRedraw()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02092">xxxInsureVisible()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01111">xxxInvertLBItem()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01875">xxxLBButtonUp()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00798">xxxLBPaint()</a>, and <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01181">xxxResetWorld()</a>.
<p>
<pre class="fragment"><div>00529 {
00530     RECT rect;
00531 
00532     <span class="keywordflow">if</span> (plb-&gt;OwnerDraw == <a class="code" href="../../d6/d0/usercli_8h.html#a63">OWNERDRAWVAR</a>) {
00533         <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a741">CItemInWindowVarOwnerDraw</a>(plb, fPartial);
00534     }
00535 
00536     <span class="keywordflow">if</span> (plb-&gt;fMultiColumn) {
00537         <span class="keywordflow">return</span> plb-&gt;itemsPerColumn * (plb-&gt;numberOfColumns + (fPartial ? 1 : 0));
00538     }
00539 
00540     <a class="code" href="../../d6/d9/rtl_2wow_8c.html#a19">_GetClientRect</a>(plb-&gt;spwnd, &amp;rect);
00541 
00542     <span class="comment">/*</span>
00543 <span class="comment">     * fPartial must be considered only if the listbox height is not an</span>
00544 <span class="comment">     * integral multiple of character height.</span>
00545 <span class="comment">     * A part of the fix for Bug #3727 -- 01/14/91 -- SANKAR --</span>
00546 <span class="comment">     */</span>
00547     UserAssert(plb-&gt;cyChar);
00548     <span class="keywordflow">return</span> (<a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a>)((rect.bottom / plb-&gt;cyChar) +
00549             ((rect.bottom % plb-&gt;cyChar)? (fPartial ? 1 : 0) : 0));
00550 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a741" doxytag="usercli.h::CItemInWindowVarOwnerDraw" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a> CItemInWindowVarOwnerDraw           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d1/lboxvar_8c-source.html#l00101">101</a> of file <a class="el" href="../../d4/d1/lboxvar_8c-source.html">lboxvar.c</a>.
<p>
References <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00924">_GetClientRect()</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01948">tagLBIV::cMac</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00025">INT</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01941">tagLBIV::iTop</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00179">LBGetItemRect()</a>, and <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01940">tagLBIV::spwnd</a>.
<p>
Referenced by <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00526">CItemInWindow()</a>.
<p>
<pre class="fragment"><div>00104 {
00105     RECT rect;
00106     <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a> sItem;
00107     <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a> clientbottom;
00108 
00109     <a class="code" href="../../d6/d9/rtl_2wow_8c.html#a19">_GetClientRect</a>(plb-&gt;spwnd, (LPRECT)&amp;rect);
00110     clientbottom = rect.bottom;
00111 
00112     <span class="comment">/*</span>
00113 <span class="comment">     * Find the number of var height ownerdraw items which are visible starting</span>
00114 <span class="comment">     * from plb-&gt;iTop.</span>
00115 <span class="comment">     */</span>
00116     <span class="keywordflow">for</span> (sItem = plb-&gt;iTop; sItem &lt; plb-&gt;cMac; sItem++) {
00117 
00118         <span class="comment">/*</span>
00119 <span class="comment">         * Find out if the item is visible or not</span>
00120 <span class="comment">         */</span>
00121         <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d0/usercli_8h.html#a744">LBGetItemRect</a>(plb, sItem, (LPRECT)&amp;rect)) {
00122 
00123             <span class="comment">/*</span>
00124 <span class="comment">             * This is the first item which is completely invisible, so return</span>
00125 <span class="comment">             * how many items are visible.</span>
00126 <span class="comment">             */</span>
00127             <span class="keywordflow">return</span> (sItem - plb-&gt;iTop);
00128         }
00129 
00130         <span class="keywordflow">if</span> (!fPartial &amp;&amp; rect.bottom &gt; clientbottom) {
00131 
00132             <span class="comment">/*</span>
00133 <span class="comment">             * If we only want fully visible items, then if this item is</span>
00134 <span class="comment">             * visible, we check if the bottom of the item is below the client</span>
00135 <span class="comment">             * rect, so we return how many are fully visible.</span>
00136 <span class="comment">             */</span>
00137             <span class="keywordflow">return</span> (sItem - plb-&gt;iTop - 1);
00138         }
00139     }
00140 
00141     <span class="comment">/*</span>
00142 <span class="comment">     * All the items are visible</span>
00143 <span class="comment">     */</span>
00144     <span class="keywordflow">return</span> (plb-&gt;cMac - plb-&gt;iTop);
00145 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a607" doxytag="usercli.h::ClearWindowState" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void ClearWindowState           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>flags</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l03373">3373</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01515">HWq</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04602">NtUserCallHwndParam()</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>.
<p>
<pre class="fragment"><div>03376 {
03377     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, flags))
03378         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a178">NtUserCallHwndParam</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(pwnd), flags, SFI_CLEARWINDOWSTATE);
03379 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a602" doxytag="usercli.h::ClientEmptyClipboard" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void ClientEmptyClipboard           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l00353">353</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d4/d7/client_8c-source.html#l00285">DeleteClientClipboardHandle()</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00091">gcsClipboard</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l00277">gphn</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l00272">_HANDLENODE::handleClient</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00134">pfnWowEmptyClipBoard</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l00275">PHANDLENODE</a>, and <a class="el" href="../../d4/d7/client_8c-source.html#l00269">_HANDLENODE::pnext</a>.
<p>
Referenced by <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00540">OpenClipboard()</a>.
<p>
<pre class="fragment"><div>00354 {
00355     <a class="code" href="../../d3/d4/struct__HANDLENODE.html">PHANDLENODE</a> phnNext;
00356     <a class="code" href="../../d3/d4/struct__HANDLENODE.html">PHANDLENODE</a> phnT;
00357 
00358     RtlEnterCriticalSection(&amp;gcsClipboard);
00359 
00360     phnT = <a class="code" href="../../d3/d8/client_8c.html#a22">gphn</a>;
00361     <span class="keywordflow">while</span> (phnT != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00362         phnNext = phnT-&gt;<a class="code" href="../../d3/d4/struct__HANDLENODE.html#o0">pnext</a>;
00363 
00364         <span class="keywordflow">if</span> (phnT-&gt;<a class="code" href="../../d3/d4/struct__HANDLENODE.html#o3">handleClient</a> != (HANDLE)0)
00365             <a class="code" href="../../d3/d8/client_8c.html#a40">DeleteClientClipboardHandle</a>(phnT);
00366 
00367         LocalFree(phnT);
00368 
00369         phnT = phnNext;
00370     }
00371     <a class="code" href="../../d3/d8/client_8c.html#a22">gphn</a> = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00372 
00373     <span class="comment">/*</span>
00374 <span class="comment">     * Tell wow to cleanup it's clipboard stuff</span>
00375 <span class="comment">     */</span>
00376     <span class="keywordflow">if</span> (<a class="code" href="../../d1/d8/clglobal_8c.html#a52">pfnWowEmptyClipBoard</a>) {
00377         <a class="code" href="../../d8/d6/ntuser_2client_2globals_8h.html#a62">pfnWowEmptyClipBoard</a>();
00378     }
00379 
00380     RtlLeaveCriticalSection(&amp;gcsClipboard);
00381 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a788" doxytag="usercli.h::CliImmInitializeHotKeys" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID CliImmInitializeHotKeys           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwAction</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HKL&nbsp;</td>
          <td class="mdname" nowrap> <em>hkl</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00129">129</a> of file <a class="el" href="../../d6/d9/immhotky_8c-source.html">immhotky.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00260">CliGetImeHotKeysFromRegistry()</a>, <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00229">CliGetPreloadKeyboardLayouts()</a>, <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00631">CliImmSetHotKeyWorker()</a>, <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00197">CliSetDefaultImeHotKeys()</a>, <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00085">DefaultHotKeyNumC</a>, <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00073">DefaultHotKeyNumJ</a>, <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00079">DefaultHotKeyNumT</a>, <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00081">DefaultHotKeyTableC</a>, <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00070">DefaultHotKeyTableJ</a>, <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00075">DefaultHotKeyTableT</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00064">tagFE_KEYBOARDS::fCHS</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00063">tagFE_KEYBOARDS::fCHT</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00062">tagFE_KEYBOARDS::fJPN</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00065">tagFE_KEYBOARDS::fKOR</a>, <a class="el" href="../../d9/d9/immstruc_8h-source.html#l00078">ISHK_INITIALIZE</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l09058">NtUserGetKeyboardLayoutList()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00099">SetFeKeyboardFlags()</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00958">UserLocalAlloc</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00960">UserLocalFree</a>, and <a class="el" href="../../d2/d7/hal_8h.html#a212">VOID()</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/client_8c-source.html#l04385">LoadKeyboardLayoutWorker()</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l04483">UnloadKeyboardLayout()</a>, and <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00049">UpdatePerUserSystemParameters()</a>.
<p>
<pre class="fragment"><div>00130 {
00131     <a class="code" href="../../d2/d5/structtagFE__KEYBOARDS.html">FE_KEYBOARDS</a> feKbds = { 0, 0, 0, 0, };
00132     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fFoundAny;
00133 
00134     UNREFERENCED_PARAMETER(hkl);
00135 
00136     <span class="comment">// First, initialize the hotkey list</span>
00137     <a class="code" href="../../d5/d0/immhotky_8c.html#a17">CliImmSetHotKeyWorker</a>(0, 0, 0, NULL, ISHK_INITIALIZE);
00138 
00139     <span class="comment">// Check if the user has customized IME hotkeys</span>
00140     <span class="comment">// (they're stored in the registry)</span>
00141     fFoundAny = <a class="code" href="../../d5/d0/immhotky_8c.html#a19">CliGetImeHotKeysFromRegistry</a>();
00142 
00143     <span class="keywordflow">if</span> (dwAction == <a class="code" href="../../d8/d0/immstruc_8h.html#a30">ISHK_INITIALIZE</a>) {
00144         TAGMSG0(DBGTAG_IMM, <span class="stringliteral">"Setting IME HotKeys for Init.\n"</span>);
00145 
00146         <span class="comment">// Get the user's default locale and set its flag</span>
00147         <a class="code" href="../../d5/d0/immhotky_8c.html#a23">SetFeKeyboardFlags</a>(LANGIDFROMLCID(GetUserDefaultLCID()), &amp;feKbds);
00148 
00149         <span class="comment">// Get preloaded keyboards' locales and set their flags</span>
00150         <a class="code" href="../../d5/d0/immhotky_8c.html#a22">CliGetPreloadKeyboardLayouts</a>(&amp;feKbds);
00151 
00152     }
00153     <span class="keywordflow">else</span> {
00154         <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> i;
00155         <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> nLayouts;
00156         LPHKL lphkl;
00157 
00158         TAGMSG0(DBGTAG_IMM, <span class="stringliteral">"Setting IME HotKeys for Add.\n"</span>);
00159 
00160         nLayouts = <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a312">NtUserGetKeyboardLayoutList</a>(0, NULL);
00161         <span class="keywordflow">if</span> (nLayouts == 0) {
00162             <span class="keywordflow">return</span>;
00163         }
00164         lphkl = <a class="code" href="../../d6/d0/usercli_8h.html#a136">UserLocalAlloc</a>(0, nLayouts * <span class="keyword">sizeof</span>(HKL));
00165         <span class="keywordflow">if</span> (lphkl == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00166             <span class="keywordflow">return</span>;
00167         }
00168         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a312">NtUserGetKeyboardLayoutList</a>(nLayouts, lphkl);
00169         <span class="keywordflow">for</span> (i = 0; i &lt; nLayouts; ++i) {
00170             <span class="comment">//</span>
00171             <span class="comment">// Set language flags. By its definition, LOWORD(hkl) is LANGID</span>
00172             <span class="comment">//</span>
00173             <a class="code" href="../../d5/d0/immhotky_8c.html#a23">SetFeKeyboardFlags</a>(LOWORD(HandleToUlong(lphkl[i])), &amp;feKbds);
00174         }
00175         <a class="code" href="../../d6/d0/usercli_8h.html#a138">UserLocalFree</a>(lphkl);
00176     }
00177 
00178     <span class="keywordflow">if</span> (feKbds.<a class="code" href="../../d2/d5/structtagFE__KEYBOARDS.html#o0">fJPN</a>) {
00179         TAGMSG0(DBGTAG_IMM, <span class="stringliteral">"JPN KL Preloaded.\n"</span>);
00180         <a class="code" href="../../d5/d0/immhotky_8c.html#a21">CliSetDefaultImeHotKeys</a>(DefaultHotKeyTableJ, DefaultHotKeyNumJ, fFoundAny);
00181     }
00182 
00183     <span class="keywordflow">if</span> (feKbds.<a class="code" href="../../d2/d5/structtagFE__KEYBOARDS.html#o3">fKOR</a>) {
00184         TAGMSG0(DBGTAG_IMM, <span class="stringliteral">"KOR KL Preloaded, but KOR hotkeys will not be registered.\n"</span>);
00185     }
00186 
00187     <span class="keywordflow">if</span> (feKbds.<a class="code" href="../../d2/d5/structtagFE__KEYBOARDS.html#o1">fCHT</a>) {
00188         TAGMSG0(DBGTAG_IMM, <span class="stringliteral">"CHT KL Preloaded.\n"</span>);
00189         <a class="code" href="../../d5/d0/immhotky_8c.html#a21">CliSetDefaultImeHotKeys</a>(DefaultHotKeyTableT, DefaultHotKeyNumT, fFoundAny);
00190     }
00191     <span class="keywordflow">if</span> (feKbds.<a class="code" href="../../d2/d5/structtagFE__KEYBOARDS.html#o2">fCHS</a>) {
00192         TAGMSG0(DBGTAG_IMM, <span class="stringliteral">"CHS KL Preloaded.\n"</span>);
00193         <a class="code" href="../../d5/d0/immhotky_8c.html#a21">CliSetDefaultImeHotKeys</a>(DefaultHotKeyTableC, DefaultHotKeyNumC, fFoundAny);
00194     }
00195 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a586" doxytag="usercli.h::ComboBoxWndProcA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LRESULT APIENTRY ComboBoxWndProcA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>msg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d3/combo_8c-source.html#l01335">1335</a> of file <a class="el" href="../../d2/d3/combo_8c-source.html">combo.c</a>.
<p>
References <a class="el" href="../../d2/d3/combo_8c-source.html#l00207">ComboBoxWndProcWorker()</a>, <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00574">DefWindowProcWorker()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00794">FNID_COMBOBOX</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00144">FWINDOWMSG</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00202">SYSMET</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d5/d9/immcli_8h-source.html#l00120">ValidateHwnd</a>.
<p>
Referenced by <a class="el" href="../../d7/d7/clinit_8c-source.html#l01219">ClientThreadSetup()</a>.
<p>
<pre class="fragment"><div>01340 {
01341     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwnd;
01342 
01343     <span class="keywordflow">if</span> ((pwnd = <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(hwnd)) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01344         <span class="keywordflow">return</span> (0<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>);
01345     }
01346 
01347     <span class="comment">/*</span>
01348 <span class="comment">     * If the control is not interested in this message,</span>
01349 <span class="comment">     * pass it to DefWindowProc.</span>
01350 <span class="comment">     */</span>
01351     <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d0/usercli_8h.html#a10">FWINDOWMSG</a>(message, FNID_COMBOBOX) &amp;&amp;
01352             !(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(PENWINDOWS) &amp;&amp;
01353                     (message &gt;= WM_PENWINFIRST &amp;&amp; message &lt;= WM_PENWINLAST)))
01354         <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a610">DefWindowProcWorker</a>(pwnd, message, wParam, lParam, TRUE);
01355 
01356     <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a614">ComboBoxWndProcWorker</a>(pwnd, message, wParam, lParam, TRUE);
01357 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a587" doxytag="usercli.h::ComboBoxWndProcW" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LRESULT APIENTRY ComboBoxWndProcW           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>msg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d3/combo_8c-source.html#l01359">1359</a> of file <a class="el" href="../../d2/d3/combo_8c-source.html">combo.c</a>.
<p>
References <a class="el" href="../../d2/d3/combo_8c-source.html#l00207">ComboBoxWndProcWorker()</a>, <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00574">DefWindowProcWorker()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00794">FNID_COMBOBOX</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00144">FWINDOWMSG</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00202">SYSMET</a>, and <a class="el" href="../../d5/d9/immcli_8h-source.html#l00120">ValidateHwnd</a>.
<p>
Referenced by <a class="el" href="../../d7/d7/clinit_8c-source.html#l01219">ClientThreadSetup()</a>, and <a class="el" href="../../d7/d7/clinit_8c-source.html#l00378">RW_RegisterControls()</a>.
<p>
<pre class="fragment"><div>01364 {
01365     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwnd;
01366 
01367     <span class="keywordflow">if</span> ((pwnd = <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(hwnd)) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01368         <span class="keywordflow">return</span> (0<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>);
01369     }
01370 
01371     <span class="comment">/*</span>
01372 <span class="comment">     * If the control is not interested in this message,</span>
01373 <span class="comment">     * pass it to DefWindowProc.</span>
01374 <span class="comment">     */</span>
01375     <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d0/usercli_8h.html#a10">FWINDOWMSG</a>(message, FNID_COMBOBOX) &amp;&amp;
01376             !(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(PENWINDOWS) &amp;&amp;
01377                     (message &gt;= WM_PENWINFIRST &amp;&amp; message &lt;= WM_PENWINLAST)))
01378         <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a610">DefWindowProcWorker</a>(pwnd, message, wParam, lParam, FALSE);
01379 
01380     <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a614">ComboBoxWndProcWorker</a>(pwnd, message, wParam, lParam, FALSE);
01381 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a614" doxytag="usercli.h::ComboBoxWndProcWorker" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LRESULT ComboBoxWndProcWorker           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>msg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>fAnsi</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d3/combo_8c-source.html#l00207">207</a> of file <a class="el" href="../../d2/d3/combo_8c-source.html">combo.c</a>.
<p>
References <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00893">_ClientToScreen()</a>, <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00826">_IsChild()</a>, <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00995">_ScreenToClient()</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l02354">abs</a>, <a class="el" href="../../d2/d0/bench_8c-source.html#l00048">APIENTRY</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01872">tagCBox::buttonrc</a>, <a class="el" href="../../d0/d7/halvprnt_8c-source.html#l00031">BYTE</a>, <a class="el" href="../../d4/d3/comboini_8c-source.html#l00031">CBNcCreateHandler()</a>, <a class="el" href="../../d0/d0/client_2nt6_2user_8h.html#a1050">CBOX</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01882">tagCBox::CBoxStyle</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l00104">ComboBoxDBCharHandler()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l00016">ComboboxLookaside</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l00158">ComboBoxMsgOKInInit()</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01874">tagCBox::cxCombo</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01876">tagCBox::cxDrop</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01875">tagCBox::cyCombo</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01877">tagCBox::cyDrop</a>, <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00574">DefWindowProcWorker()</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01870">tagCBox::editrc</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01887">tagCBox::fButtonPressed</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01903">tagCBox::fCase</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01900">tagCBox::fExtendedUI</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01883">tagCBox::fFocus</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01889">tagCBox::fLBoxVisible</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01885">tagCBox::fMouseDown</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00794">FNID_COMBOBOX</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01906">tagCBox::fNoEdit</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01884">tagCBox::fNoRedraw</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01912">tagCBox::fRightAlign</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01913">tagCBox::fRtoLReading</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01265">FWINABLE</a>, <a class="el" href="../../d5/d9/rtl_2help_8c-source.html#l00028">GetContextHelpId()</a>, <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00506">GetKeyState()</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01914">tagCBox::hFont</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01514">HW</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01515">HWq</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00270">INITCONTROLLOOKASIDE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00590">IS_DBCS_ENABLED</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00460">IsComboVisible</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02048">tagLBIV::iTypeSearch</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">LPVOID</a>, <a class="el" href="../../d9/d5/sertl_8c-source.html#l00332">max</a>, <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00354">NotifyWinEvent()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06520">NtUserBeginPaint()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01561">NtUserEnableWindow</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06575">NtUserEndPaint()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05330">NtUserInvalidateRect()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01570">NtUserReleaseCapture</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05822">NtUserSetCapture()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05902">NtUserSetFocus()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d0/d0/client_2nt6_2user_8h.html#a1057">PLBIV</a>, <a class="el" href="../../d0/d0/client_2nt6_2user_8h.html#a1059">PLBWND</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02049">tagLBIV::pszTypeSearch</a>, <a class="el" href="../../d4/d5/rect_8c-source.html#l00118">PtInRect()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00411">PTR_TO_ID</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01839">tagWND::rcClient</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01838">tagWND::rcWindow</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00215">REBASEPWND</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00430">SDROPDOWN</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00429">SDROPDOWNLIST</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00424">SDROPPABLE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00425">SEDITABLE</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00652">SendMessage()</a>, <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00270">SendMessageWorker()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00062">SHORT</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01764">tagWND::spmenu</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01791">tagCBox::spwndEdit</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01792">tagCBox::spwndList</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00202">SYSMET</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00558">THREAD_CODEPAGE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00362">ThreadLock</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00366">ThreadUnlock</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00439">UPPERCASE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00960">UserLocalFree</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00227">VALIDATECLASSANDSIZE</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00120">ValidateHwnd</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02372">WEFRIGHT</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02373">WEFRTLREADING</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02418">WFDISABLED</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02419">WFVISIBLE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02319">WFWIN40COMPAT</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l01494">xxxCBCommandHandler()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l01624">xxxCBCompleteEditWindow()</a>, <a class="el" href="../../d4/d3/comboini_8c-source.html#l00070">xxxCBCreateHandler()</a>, <a class="el" href="../../d3/d3/combodir_8c-source.html#l00028">xxxCBDir()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l02343">xxxCBGetFocusHelper()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l02496">xxxCBGetTextHelper()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l02460">xxxCBGetTextLengthHelper()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l01719">xxxCBHideListBoxWindow()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l02028">xxxCBInternalUpdateEditWindow()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l02402">xxxCBKillFocusHelper()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l01393">xxxCBMessageItemHandler()</a>, <a class="el" href="../../d4/d3/comboini_8c-source.html#l00394">xxxCBNcDestroyHandler()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l01431">xxxCBPaint()</a>, <a class="el" href="../../d4/d3/comboini_8c-source.html#l00589">xxxCBPosition()</a>, <a class="el" href="../../d4/d3/comboini_8c-source.html#l00485">xxxCBSetEditItemHeight()</a>, <a class="el" href="../../d4/d3/comboini_8c-source.html#l00443">xxxCBSetFontHandler()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l01819">xxxCBShowListBoxWindow()</a>, <a class="el" href="../../d4/d3/comboini_8c-source.html#l00563">xxxCBSizeHandler()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l02255">xxxCBUpdateListBoxWindow()</a>, and <a class="el" href="../../d2/d3/combo_8c-source.html#l00029">xxxPressButton()</a>.
<p>
Referenced by <a class="el" href="../../d7/d7/clinit_8c-source.html#l01219">ClientThreadSetup()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l01335">ComboBoxWndProcA()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l01359">ComboBoxWndProcW()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l00439">ECNcDestroyHandler()</a>, and <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00375">xxxDestroyLBox()</a>.
<p>
<pre class="fragment"><div>00213 {
00214     HWND hwnd = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(pwnd);
00215     <a class="code" href="../../d7/d9/structtagCBox.html">PCBOX</a> pcbox;
00216     POINT pt;
00217     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpwndEdit;
00218     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpwndList;
00219     PAINTSTRUCT ps;
00220     LPWSTR lpwsz = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00221     LRESULT lReturn;
00222     <span class="keyword">static</span> <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fInit = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00223     <span class="keywordtype">int</span>  i;
00224 
00225     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pwnd);
00226 
00227     <a class="code" href="../../d6/d0/usercli_8h.html#a28">VALIDATECLASSANDSIZE</a>(pwnd, FNID_COMBOBOX);
00228     <a class="code" href="../../d6/d0/usercli_8h.html#a29">INITCONTROLLOOKASIDE</a>(&amp;ComboboxLookaside, <a class="code" href="../../d7/d9/structtagCBox.html">CBOX</a>, spwnd, 8);
00229 
00230     <span class="comment">/*</span>
00231 <span class="comment">     * Get the pcbox for the given window now since we will use it a lot in</span>
00232 <span class="comment">     * various handlers.  This is stored by NtUserSetWindowLongPtr() in the</span>
00233 <span class="comment">     * INITCONTROLLOOKASIDE macro above.</span>
00234 <span class="comment">     */</span>
00235     pcbox = ((<a class="code" href="../../d0/d1/structtagCOMBOWND.html">PCOMBOWND</a>)pwnd)-&gt;pcbox;
00236 
00237     <span class="comment">/*</span>
00238 <span class="comment">     * Protect the combobox during the initialization.</span>
00239 <span class="comment">     */</span>
00240     <span class="keywordflow">if</span> (pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o9">spwndList</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00241         LRESULT lRet;
00242 
00243         <span class="keywordflow">if</span> (!<a class="code" href="../../d1/d4/combo_8c.html#a6">ComboBoxMsgOKInInit</a>(message, &amp;lRet)) {
00244             RIPMSG2(RIP_WARNING, <span class="stringliteral">"ComboBoxWndProcWorker: msg=%04x is sent to hwnd=%08x in the middle of initialization."</span>,
00245                     message, hwnd);
00246             <span class="keywordflow">return</span> lRet;
00247         }
00248     }
00249 
00250     <span class="comment">/*</span>
00251 <span class="comment">     * Dispatch the various messages we can receive</span>
00252 <span class="comment">     */</span>
00253     <span class="keywordflow">switch</span> (message) {
00254     <span class="keywordflow">case</span> CBEC_KILLCOMBOFOCUS:
00255 
00256         <span class="comment">/*</span>
00257 <span class="comment">         * Private message coming from editcontrol informing us that the combo</span>
00258 <span class="comment">         * box is losing the focus to a window which isn't in this combo box.</span>
00259 <span class="comment">         */</span>
00260         <a class="code" href="../../d6/d0/usercli_8h.html#a678">xxxCBKillFocusHelper</a>(pcbox);
00261         <span class="keywordflow">break</span>;
00262 
00263     <span class="keywordflow">case</span> WM_COMMAND:
00264 
00265         <span class="comment">/*</span>
00266 <span class="comment">         * So that we can handle notification messages from the listbox and</span>
00267 <span class="comment">         * edit control.</span>
00268 <span class="comment">         */</span>
00269         <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a662">xxxCBCommandHandler</a>(pcbox, (DWORD)wParam, (HWND)lParam);
00270 
00271     <span class="keywordflow">case</span> WM_STYLECHANGED:
00272         UserAssert(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o9">spwndList</a> != NULL);
00273         {
00274             LONG OldStyle;
00275             LONG NewStyle = 0;
00276 
00277             pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o23">fRtoLReading</a> = (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WEFRTLREADING) != 0);
00278             pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o22">fRightAlign</a>  = (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WEFRIGHT) != 0);
00279             <span class="keywordflow">if</span> (pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o23">fRtoLReading</a>)
00280                 NewStyle |= (WS_EX_RTLREADING | WS_EX_LEFTSCROLLBAR);
00281             <span class="keywordflow">if</span> (pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o22">fRightAlign</a>)
00282                 NewStyle |= WS_EX_RIGHT;
00283 
00284             <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o9">spwndList</a>, &amp;tlpwndList);
00285             OldStyle = GetWindowLong(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o9">spwndList</a>), GWL_EXSTYLE) &amp; ~(WS_EX_RIGHT|WS_EX_RTLREADING|WS_EX_LEFTSCROLLBAR);
00286             SetWindowLong(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o9">spwndList</a>), GWL_EXSTYLE, OldStyle|NewStyle);
00287             <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndList);
00288 
00289             <span class="keywordflow">if</span> (!pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o21">fNoEdit</a> &amp;&amp; pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o8">spwndEdit</a>) {
00290                 <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o8">spwndEdit</a>, &amp;tlpwndEdit);
00291                 OldStyle = GetWindowLong(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o8">spwndEdit</a>), GWL_EXSTYLE) &amp; ~(WS_EX_RIGHT|WS_EX_RTLREADING|WS_EX_LEFTSCROLLBAR);
00292                 SetWindowLong(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o8">spwndEdit</a>), GWL_EXSTYLE, OldStyle|NewStyle);
00293                 <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndEdit);
00294             }
00295             <a class="code" href="../../d6/d0/usercli_8h.html#a669">xxxCBPosition</a>(pcbox);
00296             <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a206">NtUserInvalidateRect</a>(hwnd, NULL, FALSE);
00297         }
00298         <span class="keywordflow">break</span>;
00299 
00300     <span class="keywordflow">case</span> WM_CTLCOLORMSGBOX:
00301     <span class="keywordflow">case</span> WM_CTLCOLOREDIT:
00302     <span class="keywordflow">case</span> WM_CTLCOLORLISTBOX:
00303     <span class="keywordflow">case</span> WM_CTLCOLORBTN:
00304     <span class="keywordflow">case</span> WM_CTLCOLORDLG:
00305     <span class="keywordflow">case</span> WM_CTLCOLORSCROLLBAR:
00306     <span class="keywordflow">case</span> WM_CTLCOLORSTATIC:
00307     <span class="keywordflow">case</span> WM_CTLCOLOR:
00308         <span class="comment">//</span>
00309         <span class="comment">// Causes compatibility problems for 3.X apps.  Forward only</span>
00310         <span class="comment">// for 4.0</span>
00311         <span class="comment">//</span>
00312         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFWIN40COMPAT)) {
00313             <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpwndParent;
00314             LRESULT ret;
00315             <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwndParent;
00316 
00317             pwndParent = <a class="code" href="../../d6/d0/usercli_8h.html#a27">REBASEPWND</a>(pwnd, spwndParent);
00318             <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(pwndParent, &amp;tlpwndParent);
00319             ret = <a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a450">HW</a>(pwndParent), message, wParam, lParam);
00320             <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(tlpwndParent);
00321             <span class="keywordflow">return</span> ret;
00322         } <span class="keywordflow">else</span>
00323             <span class="keywordflow">return</span>(<a class="code" href="../../d6/d0/usercli_8h.html#a610">DefWindowProcWorker</a>(pwnd, message, wParam, lParam, fAnsi));
00324         <span class="keywordflow">break</span>;
00325 
00326     <span class="keywordflow">case</span> WM_GETTEXT:
00327         <span class="keywordflow">if</span> (pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o21">fNoEdit</a>) {
00328             <span class="keywordflow">return</span> <a class="code" href="../../d1/d4/combo_8c.html#a3">xxxCBGetTextHelper</a>(pcbox, (<span class="keywordtype">int</span>)wParam, (LPWSTR)lParam, fAnsi);
00329         }
00330         <span class="keywordflow">goto</span> CallEditSendMessage;
00331         <span class="keywordflow">break</span>;
00332 
00333     <span class="keywordflow">case</span> WM_GETTEXTLENGTH:
00334 
00335         <span class="comment">/*</span>
00336 <span class="comment">         * If the is not edit control, CBS_DROPDOWNLIST, then we have to</span>
00337 <span class="comment">         * ask the list box for the size</span>
00338 <span class="comment">         */</span>
00339 
00340         <span class="keywordflow">if</span> (pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o21">fNoEdit</a>) {
00341             <span class="keywordflow">return</span> <a class="code" href="../../d1/d4/combo_8c.html#a2">xxxCBGetTextLengthHelper</a>(pcbox, fAnsi);
00342         }
00343 
00344         <span class="comment">// FALL THROUGH</span>
00345 
00346     <span class="keywordflow">case</span> WM_CLEAR:
00347     <span class="keywordflow">case</span> WM_CUT:
00348     <span class="keywordflow">case</span> WM_PASTE:
00349     <span class="keywordflow">case</span> WM_COPY:
00350     <span class="keywordflow">case</span> WM_SETTEXT:
00351         <span class="keywordflow">goto</span> CallEditSendMessage;
00352         <span class="keywordflow">break</span>;
00353 
00354     <span class="keywordflow">case</span> WM_CREATE:
00355 
00356         <span class="comment">/*</span>
00357 <span class="comment">         * wParam - not used</span>
00358 <span class="comment">         * lParam - Points to the CREATESTRUCT data structure for the window.</span>
00359 <span class="comment">         */</span>
00360         <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a671">xxxCBCreateHandler</a>(pcbox, pwnd);
00361 
00362     <span class="keywordflow">case</span> WM_ERASEBKGND:
00363 
00364         <span class="comment">/*</span>
00365 <span class="comment">         * Just return 1L so that the background isn't erased</span>
00366 <span class="comment">         */</span>
00367         <span class="keywordflow">return</span> 1<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>;
00368 
00369     <span class="keywordflow">case</span> WM_GETFONT:
00370         <span class="keywordflow">return</span> (LRESULT)pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o24">hFont</a>;
00371 
00372     <span class="keywordflow">case</span> WM_PRINT:
00373         <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d0/usercli_8h.html#a610">DefWindowProcWorker</a>(pwnd, message, wParam, lParam, fAnsi))
00374             <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00375 
00376         <span class="keywordflow">if</span> ((lParam &amp; PRF_OWNED) &amp;&amp; (pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o10">CBoxStyle</a> &amp; <a class="code" href="../../d6/d0/usercli_8h.html#a57">SDROPPABLE</a>) &amp;&amp;
00377             <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o9">spwndList</a>, WFVISIBLE)) {
00378             <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tpwndList;
00379             <span class="keywordtype">int</span> iDC = SaveDC((HDC) wParam);
00380             OffsetWindowOrgEx((HDC) wParam, 0, pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o6">rcWindow</a>.top - pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o9">spwndList</a>-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o6">rcWindow</a>.top, NULL);
00381             lParam &amp;= ~PRF_CHECKVISIBLE;
00382             <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o9">spwndList</a>, &amp;tpwndList);
00383             <a class="code" href="../../d6/d0/usercli_8h.html#a600">SendMessageWorker</a>(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o9">spwndList</a>, WM_PRINT, wParam, lParam, FALSE);
00384             RestoreDC((HDC) wParam, iDC);
00385         }
00386         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00387 
00388     <span class="keywordflow">case</span> WM_PRINTCLIENT:
00389         <a class="code" href="../../d6/d0/usercli_8h.html#a665">xxxCBPaint</a>(pcbox, (HDC) wParam);
00390         <span class="keywordflow">break</span>;
00391 
00392     <span class="keywordflow">case</span> WM_PAINT: {
00393         HDC hdc;
00394 
00395         <span class="comment">/*</span>
00396 <span class="comment">         * wParam - perhaps a hdc</span>
00397 <span class="comment">         */</span>
00398         hdc = (wParam) ? (HDC) wParam : <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a246">NtUserBeginPaint</a>(hwnd, &amp;ps);
00399 
00400         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a69">IsComboVisible</a>(pcbox))
00401             <a class="code" href="../../d6/d0/usercli_8h.html#a665">xxxCBPaint</a>(pcbox, hdc);
00402 
00403         <span class="keywordflow">if</span> (!wParam)
00404             <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a248">NtUserEndPaint</a>(hwnd, &amp;ps);
00405         <span class="keywordflow">break</span>;
00406     }
00407     <span class="keywordflow">case</span> WM_GETDLGCODE:
00408 
00409         <span class="comment">/*</span>
00410 <span class="comment">         * wParam - not used</span>
00411 <span class="comment">         * lParam - not used</span>
00412 <span class="comment">         */</span>
00413         {
00414             LRESULT code = DLGC_WANTCHARS | DLGC_WANTARROWS;
00415 
00416             <span class="comment">// If the listbox is dropped and the ENTER key is pressed,</span>
00417             <span class="comment">// we want this message so we can close up the listbox</span>
00418             <span class="keywordflow">if</span> ((lParam != 0) &amp;&amp;
00419                 (((LPMSG)lParam)-&gt;message == WM_KEYDOWN) &amp;&amp;
00420                 pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o15">fLBoxVisible</a> &amp;&amp;
00421                 ((wParam == VK_RETURN) || (wParam == VK_ESCAPE)))
00422             {
00423                 code |= DLGC_WANTMESSAGE;
00424             }
00425             <span class="keywordflow">return</span> code;
00426         }
00427         <span class="comment">/*</span>
00428 <span class="comment">         * No fall through</span>
00429 <span class="comment">         */</span>
00430 
00431     <span class="keywordflow">case</span> WM_SETFONT:
00432         <a class="code" href="../../d6/d0/usercli_8h.html#a680">xxxCBSetFontHandler</a>(pcbox, (HANDLE)wParam, LOWORD(lParam));
00433         <span class="keywordflow">break</span>;
00434 
00435     <span class="keywordflow">case</span> WM_SYSKEYDOWN:
00436         <span class="keywordflow">if</span> (lParam &amp; 0x20000000<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>)  <span class="comment">/* Check if the alt key is down */</span> {
00437 
00438             <span class="comment">/*</span>
00439 <span class="comment">             * Handle Combobox support.  We want alt up or down arrow to behave</span>
00440 <span class="comment">             * like F4 key which completes the combo box selection</span>
00441 <span class="comment">             */</span>
00442             <span class="keywordflow">if</span> (lParam &amp; 0x1000000) {
00443 
00444                 <span class="comment">/*</span>
00445 <span class="comment">                 * This is an extended key such as the arrow keys not on the</span>
00446 <span class="comment">                 * numeric keypad so just drop the combobox.</span>
00447 <span class="comment">                 */</span>
00448                 <span class="keywordflow">if</span> (wParam == VK_DOWN || wParam == VK_UP)
00449                     <span class="keywordflow">goto</span> DropCombo;
00450 
00451                 <span class="keywordflow">goto</span> CallDWP;
00452             }
00453 
00454             <span class="keywordflow">if</span> (<a class="code" href="../../d8/d9/client_2ntstubs_8c.html#a16">GetKeyState</a>(VK_NUMLOCK) &amp; 0x1) {
00455                 <span class="comment">/*</span>
00456 <span class="comment">                 * If numlock down, just send all system keys to dwp</span>
00457 <span class="comment">                 */</span>
00458                 <span class="keywordflow">goto</span> CallDWP;
00459             } <span class="keywordflow">else</span> {
00460 
00461                 <span class="comment">/*</span>
00462 <span class="comment">                 * We just want to ignore keys on the number pad...</span>
00463 <span class="comment">                 */</span>
00464                 <span class="keywordflow">if</span> (!(wParam == VK_DOWN || wParam == VK_UP))
00465                     <span class="keywordflow">goto</span> CallDWP;
00466             }
00467 DropCombo:
00468             <span class="keywordflow">if</span> (!pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o15">fLBoxVisible</a>) {
00469 
00470                 <span class="comment">/*</span>
00471 <span class="comment">                 * If the listbox isn't visible, just show it</span>
00472 <span class="comment">                 */</span>
00473                 <a class="code" href="../../d6/d0/usercli_8h.html#a668">xxxCBShowListBoxWindow</a>(pcbox, TRUE);
00474             } <span class="keywordflow">else</span> {
00475 
00476                 <span class="comment">/*</span>
00477 <span class="comment">                 * Ok, the listbox is visible.  So hide the listbox window.</span>
00478 <span class="comment">                 */</span>
00479                 <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d0/usercli_8h.html#a667">xxxCBHideListBoxWindow</a>(pcbox, TRUE, TRUE))
00480                     <span class="keywordflow">return</span>(0<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>);
00481             }
00482         }
00483         <span class="keywordflow">goto</span> CallDWP;
00484         <span class="keywordflow">break</span>;
00485 
00486     <span class="keywordflow">case</span> WM_KEYDOWN:
00487         <span class="comment">/*</span>
00488 <span class="comment">         * If the listbox is dropped and the ENTER key is pressed,</span>
00489 <span class="comment">         * close up the listbox successfully.  If ESCAPE is pressed,</span>
00490 <span class="comment">         * close it up like cancel.</span>
00491 <span class="comment">         */</span>
00492         <span class="keywordflow">if</span> (pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o15">fLBoxVisible</a>) {
00493             <span class="keywordflow">if</span> ((wParam == VK_RETURN) || (wParam == VK_ESCAPE)) {
00494                 <a class="code" href="../../d6/d0/usercli_8h.html#a667">xxxCBHideListBoxWindow</a>(pcbox, TRUE, (wParam != VK_ESCAPE));
00495                 <span class="keywordflow">break</span>;
00496             }
00497         }
00498         <span class="comment">// FALL THROUGH</span>
00499 
00500     <span class="keywordflow">case</span> WM_CHAR:
00501         <span class="keywordflow">if</span> (fAnsi &amp;&amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a125">IS_DBCS_ENABLED</a>() &amp;&amp; IsDBCSLeadByteEx(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a118">THREAD_CODEPAGE</a>(), (BYTE)wParam)) {
00502             <span class="keywordflow">return</span> <a class="code" href="../../d1/d4/combo_8c.html#a5">ComboBoxDBCharHandler</a>(pcbox, hwnd, message, wParam, lParam);
00503         }
00504 
00505         <span class="keywordflow">if</span> (pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o21">fNoEdit</a>) {
00506             <span class="keywordflow">goto</span> CallListSendMessage;
00507         }
00508         <span class="keywordflow">else</span>
00509             <span class="keywordflow">goto</span> CallEditSendMessage;
00510         <span class="keywordflow">break</span>;
00511 
00512     <span class="keywordflow">case</span> WM_LBUTTONDBLCLK:
00513     <span class="keywordflow">case</span> WM_LBUTTONDOWN:
00514 
00515 <span class="preprocessor">#ifdef COLOR_HOTTRACKING</span>
00516 <span class="preprocessor"></span>        pcbox-&gt;fButtonHotTracked = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00517 <span class="preprocessor">#endif // COLOR_HOTTRACKING</span>
00518 <span class="preprocessor"></span>
00519         <span class="comment">/*</span>
00520 <span class="comment">         * Set the focus to the combo box if we get a mouse click on it.</span>
00521 <span class="comment">         */</span>
00522         <span class="keywordflow">if</span> (!pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o11">fFocus</a>) {
00523             <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a225">NtUserSetFocus</a>(hwnd);
00524             <span class="keywordflow">if</span> (!pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o11">fFocus</a>) {
00525 
00526                 <span class="comment">/*</span>
00527 <span class="comment">                 * Don't do anything if we still don't have the focus.</span>
00528 <span class="comment">                 */</span>
00529                 <span class="keywordflow">break</span>;
00530             }
00531         }
00532 
00533         <span class="comment">/*</span>
00534 <span class="comment">         * If user clicked in button rect and we are a combobox with edit, then</span>
00535 <span class="comment">         * drop the listbox.  (The button rect is 0 if there is no button so the</span>
00536 <span class="comment">         * ptinrect will return false.) If a drop down list (no edit), clicking</span>
00537 <span class="comment">         * anywhere on the face causes the list to drop.</span>
00538 <span class="comment">         */</span>
00539 
00540         POINTSTOPOINT(pt, lParam);
00541         <span class="keywordflow">if</span> ((pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o10">CBoxStyle</a> == <a class="code" href="../../d6/d0/usercli_8h.html#a61">SDROPDOWN</a> &amp;&amp;
00542                 <a class="code" href="../../d3/d6/rect_8c.html#a5">PtInRect</a>(&amp;pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o3">buttonrc</a>, pt)) ||
00543                 pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o10">CBoxStyle</a> == <a class="code" href="../../d6/d0/usercli_8h.html#a60">SDROPDOWNLIST</a>) {
00544 
00545             <span class="comment">/*</span>
00546 <span class="comment">             * Set the fMouseDown flag so that we can handle clicking on</span>
00547 <span class="comment">             * the popdown button and dragging into the listbox (when it just</span>
00548 <span class="comment">             * dropped down) to make a selection.</span>
00549 <span class="comment">             */</span>
00550             pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o14">fButtonPressed</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00551             <span class="keywordflow">if</span> (pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o15">fLBoxVisible</a>) {
00552                 <span class="keywordflow">if</span> (pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o13">fMouseDown</a>) {
00553                     pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o13">fMouseDown</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00554                     <a class="code" href="../../d6/d0/usercli_8h.html#a225">NtUserReleaseCapture</a>();
00555                 }
00556                 <a class="code" href="../../d1/d4/combo_8c.html#a4">xxxPressButton</a>(pcbox, FALSE);
00557 
00558                 <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d0/usercli_8h.html#a667">xxxCBHideListBoxWindow</a>(pcbox, TRUE, TRUE))
00559                     <span class="keywordflow">return</span>(0<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>);
00560             } <span class="keywordflow">else</span> {
00561                 <a class="code" href="../../d6/d0/usercli_8h.html#a668">xxxCBShowListBoxWindow</a>(pcbox, FALSE);
00562 
00563                 <span class="comment">// Setting and resetting this flag must always be followed</span>
00564                 <span class="comment">// imediately by SetCapture or ReleaseCapture</span>
00565                 <span class="comment">//</span>
00566                 pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o13">fMouseDown</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00567                 <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a221">NtUserSetCapture</a>(hwnd);
00568                 <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a405">FWINABLE</a>()) {
00569                     <a class="code" href="../../d8/d9/client_2ntstubs_8c.html#a12">NotifyWinEvent</a>(EVENT_OBJECT_STATECHANGE, hwnd, OBJID_CLIENT, INDEX_COMBOBOX_BUTTON);
00570                 }
00571             }
00572         }
00573         <span class="keywordflow">break</span>;
00574 
00575     <span class="keywordflow">case</span> WM_MOUSEWHEEL:
00576         <span class="comment">/*</span>
00577 <span class="comment">         * Handle only scrolling.</span>
00578 <span class="comment">         */</span>
00579         <span class="keywordflow">if</span> (wParam &amp; (MK_CONTROL | MK_SHIFT))
00580             <span class="keywordflow">goto</span> CallDWP;
00581 
00582         <span class="comment">/*</span>
00583 <span class="comment">         * If the listbox is visible, send it the message to scroll.</span>
00584 <span class="comment">         */</span>
00585         <span class="keywordflow">if</span> (pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o15">fLBoxVisible</a>)
00586             <span class="keywordflow">goto</span> CallListSendMessage;
00587 
00588         <span class="comment">/*</span>
00589 <span class="comment">         * If we're in extended UI mode or the edit control isn't yet created,</span>
00590 <span class="comment">         * bail.</span>
00591 <span class="comment">         */</span>
00592         <span class="keywordflow">if</span> (pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o18">fExtendedUI</a> || pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o8">spwndEdit</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00593             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00594 
00595         <span class="comment">/*</span>
00596 <span class="comment">         * Emulate arrow up/down messages to the edit control.</span>
00597 <span class="comment">         */</span>
00598         i = <a class="code" href="../../d4/d1/userk_8h.html#a259">abs</a>(((<span class="keywordtype">short</span>)HIWORD(wParam))/WHEEL_DELTA);
00599         wParam = ((<span class="keywordtype">short</span>)HIWORD(wParam) &gt; 0) ? VK_UP : VK_DOWN;
00600 
00601         <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o8">spwndEdit</a>, &amp;tlpwndEdit);
00602         <span class="keywordflow">while</span> (i-- &gt; 0) {
00603             <a class="code" href="../../d6/d0/usercli_8h.html#a600">SendMessageWorker</a>(
00604                     pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o8">spwndEdit</a>, WM_KEYDOWN, wParam, 0, fAnsi);
00605         }
00606         <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndEdit);
00607         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00608 
00609     <span class="keywordflow">case</span> WM_CAPTURECHANGED:
00610         <span class="keywordflow">if</span> (!(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFWIN40COMPAT)))
00611             <span class="keywordflow">return</span> 0;
00612 
00613         <span class="keywordflow">if</span> ((pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o13">fMouseDown</a>)) {
00614             pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o13">fMouseDown</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00615             <a class="code" href="../../d1/d4/combo_8c.html#a4">xxxPressButton</a>(pcbox, FALSE);
00616 
00617             <span class="comment">//</span>
00618             <span class="comment">// Pop combo listbox back up, canceling.</span>
00619             <span class="comment">//</span>
00620             <span class="keywordflow">if</span> (pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o15">fLBoxVisible</a>)
00621                 <a class="code" href="../../d6/d0/usercli_8h.html#a667">xxxCBHideListBoxWindow</a>(pcbox, TRUE, FALSE);
00622         }
00623         <span class="keywordflow">break</span>;
00624 
00625     <span class="keywordflow">case</span> WM_LBUTTONUP:
00626         <a class="code" href="../../d1/d4/combo_8c.html#a4">xxxPressButton</a>(pcbox, FALSE);
00627 
00628         <span class="comment">/*</span>
00629 <span class="comment">         * Clear this flag so that mouse moves aren't sent to the listbox</span>
00630 <span class="comment">         */</span>
00631         <span class="keywordflow">if</span> (pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o13">fMouseDown</a>) {
00632             pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o13">fMouseDown</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00633 
00634             <span class="keywordflow">if</span> (pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o10">CBoxStyle</a> == <a class="code" href="../../d6/d0/usercli_8h.html#a61">SDROPDOWN</a>) {
00635                 <span class="comment">// If an item in the listbox matches the text in the edit</span>
00636                 <span class="comment">// control, scroll it to the top of the listbox. Select the</span>
00637                 <span class="comment">// item only if the mouse button isn't down otherwise we</span>
00638                 <span class="comment">// will select the item when the mouse button goes up.</span>
00639                 <a class="code" href="../../d6/d0/usercli_8h.html#a675">xxxCBUpdateListBoxWindow</a>(pcbox, TRUE);
00640                 <a class="code" href="../../d6/d0/usercli_8h.html#a666">xxxCBCompleteEditWindow</a>(pcbox);
00641             }
00642             <a class="code" href="../../d6/d0/usercli_8h.html#a225">NtUserReleaseCapture</a>();
00643 
00644             <span class="comment">// Now, we want listbox to track mouse moves while mouse up</span>
00645             <span class="comment">// until mouse down, and select items as though they were</span>
00646             <span class="comment">// clicked on.</span>
00647             <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFWIN40COMPAT)) {
00648 
00649                 <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o9">spwndList</a>, &amp;tlpwndList);
00650                 <a class="code" href="../../d6/d0/usercli_8h.html#a600">SendMessageWorker</a>(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o9">spwndList</a>, LBCB_STARTTRACK, FALSE, 0, FALSE);
00651                 <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndList);
00652             }
00653         }
00654 <span class="preprocessor">#ifdef COLOR_HOTTRACKING</span>
00655 <span class="preprocessor"></span>        HotTrack(pcbox);
00656         <span class="keywordflow">break</span>;
00657 
00658     <span class="keywordflow">case</span> WM_MOUSELEAVE:
00659         pcbox-&gt;fButtonHotTracked = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00660         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a206">NtUserInvalidateRect</a>(hwnd, &amp;pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o3">buttonrc</a>, TRUE);
00661 <span class="preprocessor">#endif // COLOR_HOTTRACKING</span>
00662 <span class="preprocessor"></span>        <span class="keywordflow">break</span>;
00663 
00664     <span class="keywordflow">case</span> WM_MOUSEMOVE:
00665         <span class="keywordflow">if</span> (pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o13">fMouseDown</a>) {
00666             POINTSTOPOINT(pt, lParam);
00667 
00668             <span class="comment">// Note conversion of INT bit field to BOOL (1 or 0)</span>
00669 
00670             <span class="keywordflow">if</span> (<a class="code" href="../../d3/d6/rect_8c.html#a5">PtInRect</a>(&amp;pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o3">buttonrc</a>, pt) != !!pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o14">fButtonPressed</a>) {
00671                 <a class="code" href="../../d1/d4/combo_8c.html#a4">xxxPressButton</a>(pcbox, (pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o14">fButtonPressed</a> == 0));
00672             }
00673 
00674             <a class="code" href="../../d6/d9/rtl_2wow_8c.html#a18">_ClientToScreen</a>(pwnd, &amp;pt);
00675             <span class="keywordflow">if</span> (<a class="code" href="../../d3/d6/rect_8c.html#a5">PtInRect</a>(&amp;pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o9">spwndList</a>-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o7">rcClient</a>, pt)) {
00676 
00677                 <span class="comment">/*</span>
00678 <span class="comment">                 * This handles dropdown comboboxes/listboxes so that clicking</span>
00679 <span class="comment">                 * on the dropdown button and dragging into the listbox window</span>
00680 <span class="comment">                 * will let the user make a listbox selection.</span>
00681 <span class="comment">                 */</span>
00682                 pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o13">fMouseDown</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00683                 <a class="code" href="../../d6/d0/usercli_8h.html#a225">NtUserReleaseCapture</a>();
00684 
00685                 <span class="keywordflow">if</span> (pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o10">CBoxStyle</a> &amp; <a class="code" href="../../d6/d0/usercli_8h.html#a58">SEDITABLE</a>) {
00686 
00687                     <span class="comment">/*</span>
00688 <span class="comment">                     * If an item in the listbox matches the text in the edit</span>
00689 <span class="comment">                     * control, scroll it to the top of the listbox.  Select the</span>
00690 <span class="comment">                     * item only if the mouse button isn't down otherwise we</span>
00691 <span class="comment">                     * will select the item when the mouse button goes up.</span>
00692 <span class="comment">                     */</span>
00693 
00694                     <span class="comment">/*</span>
00695 <span class="comment">                     * We need to select the item which matches the editcontrol</span>
00696 <span class="comment">                     * so that if the user drags out of the listbox, we don't</span>
00697 <span class="comment">                     * cancel back to his origonal selection</span>
00698 <span class="comment">                     */</span>
00699                     <a class="code" href="../../d6/d0/usercli_8h.html#a675">xxxCBUpdateListBoxWindow</a>(pcbox, TRUE);
00700                 }
00701 
00702                 <span class="comment">/*</span>
00703 <span class="comment">                 * Convert point to listbox coordinates and send a buttondown</span>
00704 <span class="comment">                 * message to the listbox window.</span>
00705 <span class="comment">                 */</span>
00706                 <a class="code" href="../../d6/d9/rtl_2wow_8c.html#a21">_ScreenToClient</a>(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o9">spwndList</a>, &amp;pt);
00707                 lParam = POINTTOPOINTS(pt);
00708                 message = WM_LBUTTONDOWN;
00709                 <span class="keywordflow">goto</span> CallListSendMessage;
00710             }
00711         }
00712 <span class="preprocessor">#ifdef COLOR_HOTTRACKING</span>
00713 <span class="preprocessor"></span>        HotTrack(pcbox);
00714 <span class="preprocessor">#endif // COLOR_HOTTRACKING</span>
00715 <span class="preprocessor"></span>        <span class="keywordflow">break</span>;
00716 
00717     <span class="keywordflow">case</span> WM_NCDESTROY:
00718     <span class="keywordflow">case</span> WM_FINALDESTROY:
00719         <a class="code" href="../../d6/d0/usercli_8h.html#a673">xxxCBNcDestroyHandler</a>(pwnd, pcbox);
00720         <span class="keywordflow">break</span>;
00721 
00722     <span class="keywordflow">case</span> WM_SETFOCUS:
00723         <span class="keywordflow">if</span> (pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o21">fNoEdit</a>) {
00724 
00725             <span class="comment">/*</span>
00726 <span class="comment">             * There is no editcontrol so set the focus to the combo box itself.</span>
00727 <span class="comment">             */</span>
00728             <a class="code" href="../../d6/d0/usercli_8h.html#a677">xxxCBGetFocusHelper</a>(pcbox);
00729         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o8">spwndEdit</a>) {
00730             <span class="comment">/*</span>
00731 <span class="comment">             * Set the focus to the edit control window if there is one</span>
00732 <span class="comment">             */</span>
00733             <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o8">spwndEdit</a>, &amp;tlpwndEdit);
00734             <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a225">NtUserSetFocus</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o8">spwndEdit</a>));
00735             <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndEdit);
00736         }
00737         <span class="keywordflow">break</span>;
00738 
00739     <span class="keywordflow">case</span> WM_KILLFOCUS:
00740 
00741         <span class="comment">/*</span>
00742 <span class="comment">         * wParam has the new focus hwnd</span>
00743 <span class="comment">         */</span>
00744         <span class="keywordflow">if</span> (wParam != 0)
00745             wParam = (WPARAM)<a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>((HWND)wParam);
00746         <span class="keywordflow">if</span> ((wParam == 0) || !<a class="code" href="../../d6/d9/rtl_2wow_8c.html#a16">_IsChild</a>(pwnd, (<a class="code" href="../../d6/d9/structtagWND.html">PWND</a>)wParam)) {
00747 
00748             <span class="comment">/*</span>
00749 <span class="comment">             * We only give up the focus if the new window getting the focus</span>
00750 <span class="comment">             * doesn't belong to the combo box.</span>
00751 <span class="comment">             */</span>
00752             <a class="code" href="../../d6/d0/usercli_8h.html#a678">xxxCBKillFocusHelper</a>(pcbox);
00753         }
00754 
00755         UserAssert(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o9">spwndList</a>);
00756         {
00757             <a class="code" href="../../d7/d9/structtagLBIV.html">PLBIV</a> plb = ((<a class="code" href="../../d9/d9/structtagLBWND.html">PLBWND</a>)pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o9">spwndList</a>)-&gt;pLBIV;
00758 
00759             <span class="keywordflow">if</span> ((plb != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) &amp;&amp; (plb != (<a class="code" href="../../d7/d9/structtagLBIV.html">PLBIV</a>)-1)) {
00760                 plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o61">iTypeSearch</a> = 0;
00761                 <span class="keywordflow">if</span> (plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o62">pszTypeSearch</a>) {
00762                     <a class="code" href="../../d6/d0/usercli_8h.html#a138">UserLocalFree</a>(plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o62">pszTypeSearch</a>);
00763                     plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o62">pszTypeSearch</a> = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00764                 }
00765             }
00766         }
00767         <span class="keywordflow">break</span>;
00768 
00769     <span class="keywordflow">case</span> WM_SETREDRAW:
00770 
00771         <span class="comment">/*</span>
00772 <span class="comment">         * wParam - specifies state of the redraw flag.  nonzero = redraw</span>
00773 <span class="comment">         * lParam - not used</span>
00774 <span class="comment">         */</span>
00775 
00776         <span class="comment">/*</span>
00777 <span class="comment">         * effects: Sets the state of the redraw flag for this combo box</span>
00778 <span class="comment">         * and its children.</span>
00779 <span class="comment">         */</span>
00780         pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o12">fNoRedraw</a> = (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)!((<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>)wParam);
00781 
00782         <span class="comment">/*</span>
00783 <span class="comment">         * Must check pcbox-&gt;spwnEdit in case we get this message before</span>
00784 <span class="comment">         * WM_CREATE - PCBOX won't be initialized yet. (Eudora does this)</span>
00785 <span class="comment">         */</span>
00786         <span class="keywordflow">if</span> (!pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o21">fNoEdit</a> &amp;&amp; pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o8">spwndEdit</a>) {
00787             <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o8">spwndEdit</a>, &amp;tlpwndEdit);
00788             <a class="code" href="../../d6/d0/usercli_8h.html#a600">SendMessageWorker</a>(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o8">spwndEdit</a>, message, wParam, lParam, FALSE);
00789             <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndEdit);
00790         }
00791         <span class="keywordflow">goto</span> CallListSendMessage;
00792         <span class="keywordflow">break</span>;
00793 
00794     <span class="keywordflow">case</span> WM_ENABLE:
00795 
00796         <span class="comment">/*</span>
00797 <span class="comment">         * Invalidate the rect to cause it to be drawn in grey for its</span>
00798 <span class="comment">         * disabled view or ungreyed for non-disabled view.</span>
00799 <span class="comment">         */</span>
00800         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a206">NtUserInvalidateRect</a>(hwnd, NULL, FALSE);
00801         <span class="keywordflow">if</span> ((pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o10">CBoxStyle</a> &amp; <a class="code" href="../../d6/d0/usercli_8h.html#a58">SEDITABLE</a>) &amp;&amp; pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o8">spwndEdit</a>) {
00802 
00803             <span class="comment">/*</span>
00804 <span class="comment">             * Enable/disable the edit control window</span>
00805 <span class="comment">             */</span>
00806             <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o8">spwndEdit</a>, &amp;tlpwndEdit);
00807             <a class="code" href="../../d6/d0/usercli_8h.html#a216">NtUserEnableWindow</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o8">spwndEdit</a>), (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFDISABLED) == 0));
00808             <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndEdit);
00809         }
00810 
00811         <span class="comment">/*</span>
00812 <span class="comment">         * Enable/disable the listbox window</span>
00813 <span class="comment">         */</span>
00814         UserAssert(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o9">spwndList</a>);
00815         <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o9">spwndList</a>, &amp;tlpwndList);
00816         <a class="code" href="../../d6/d0/usercli_8h.html#a216">NtUserEnableWindow</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o9">spwndList</a>), (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFDISABLED) == 0));
00817         <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndList);
00818       <span class="keywordflow">break</span>;
00819 
00820     <span class="keywordflow">case</span> WM_SIZE:
00821 
00822         <span class="comment">/*</span>
00823 <span class="comment">         * wParam - defines the type of resizing fullscreen, sizeiconic,</span>
00824 <span class="comment">         *          sizenormal etc.</span>
00825 <span class="comment">         * lParam - new width in LOWORD, new height in HIGHUINT of client area</span>
00826 <span class="comment">         */</span>
00827         UserAssert(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o9">spwndList</a>);
00828         <span class="keywordflow">if</span> (LOWORD(lParam) == 0 || HIWORD(lParam) == 0) {
00829 
00830             <span class="comment">/*</span>
00831 <span class="comment">             * If being sized to a zero width or to a zero height or we aren't</span>
00832 <span class="comment">             * fully initialized, just return.</span>
00833 <span class="comment">             */</span>
00834             <span class="keywordflow">return</span> 0;
00835         }
00836 
00837         <span class="comment">// OPTIMIZATIONS -- first check if old and new widths are the same</span>
00838         <span class="keywordflow">if</span> (pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o4">cxCombo</a> == pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o6">rcWindow</a>.right - pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o6">rcWindow</a>.left) {
00839             <span class="keywordtype">int</span> iNewHeight = pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o6">rcWindow</a>.bottom - pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o6">rcWindow</a>.top;
00840 
00841             <span class="comment">// now check if new height is the dropped down height</span>
00842             <span class="keywordflow">if</span> (pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o15">fLBoxVisible</a>) {
00843                 <span class="comment">// Check if new height is the full size height</span>
00844                 <span class="keywordflow">if</span> (pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o7">cyDrop</a> + pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o5">cyCombo</a> == iNewHeight)
00845                     <span class="keywordflow">return</span>(0<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>);
00846             } <span class="keywordflow">else</span> {
00847                 <span class="comment">// Check if new height is the closed up height</span>
00848                 <span class="keywordflow">if</span> (pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o5">cyCombo</a> == iNewHeight)
00849                     <span class="keywordflow">return</span>(0<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>);
00850             }
00851         }
00852 
00853         <a class="code" href="../../d6/d0/usercli_8h.html#a681">xxxCBSizeHandler</a>(pcbox);
00854         <span class="keywordflow">break</span>;
00855 
00856     <span class="keywordflow">case</span> CB_GETDROPPEDSTATE:
00857 
00858         <span class="comment">/*</span>
00859 <span class="comment">         * returns 1 if combo is dropped down else 0</span>
00860 <span class="comment">         * wParam - not used</span>
00861 <span class="comment">         * lParam - not used</span>
00862 <span class="comment">         */</span>
00863         <span class="keywordflow">return</span> pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o15">fLBoxVisible</a>;
00864 
00865     <span class="keywordflow">case</span> CB_GETDROPPEDCONTROLRECT:
00866 
00867         <span class="comment">/*</span>
00868 <span class="comment">         * wParam - not used</span>
00869 <span class="comment">         * lParam - lpRect which will get the dropped down window rect in</span>
00870 <span class="comment">         *          screen coordinates.</span>
00871 <span class="comment">         */</span>
00872         ((LPRECT)lParam)-&gt;left      = pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o6">rcWindow</a>.left;
00873         ((LPRECT)lParam)-&gt;top       = pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o6">rcWindow</a>.top;
00874         ((LPRECT)lParam)-&gt;right     = pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o6">rcWindow</a>.left + <a class="code" href="../../d8/d6/sertl_8c.html#a1">max</a>(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o6">cxDrop</a>, pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o4">cxCombo</a>);
00875         ((LPRECT)lParam)-&gt;bottom    = pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o6">rcWindow</a>.top + pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o5">cyCombo</a> + pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o7">cyDrop</a>;
00876         <span class="keywordflow">break</span>;
00877 
00878     <span class="keywordflow">case</span> CB_SETDROPPEDWIDTH:
00879         <span class="keywordflow">if</span> (pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o10">CBoxStyle</a> &amp; <a class="code" href="../../d6/d0/usercli_8h.html#a57">SDROPPABLE</a>) {
00880             <span class="keywordflow">if</span> (wParam) {
00881                 wParam = <a class="code" href="../../d8/d6/sertl_8c.html#a1">max</a>(wParam, (UINT)pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o4">cxCombo</a>);
00882 
00883                 <span class="keywordflow">if</span> (wParam != (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>) pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o6">cxDrop</a>)
00884                 {
00885                     pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o6">cxDrop</a> = (<span class="keywordtype">int</span>)wParam;
00886                     <a class="code" href="../../d6/d0/usercli_8h.html#a669">xxxCBPosition</a>(pcbox);
00887                 }
00888             }
00889         }
00890         <span class="comment">// fall thru</span>
00891 
00892     <span class="keywordflow">case</span> CB_GETDROPPEDWIDTH:
00893         <span class="keywordflow">if</span> (pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o10">CBoxStyle</a> &amp; <a class="code" href="../../d6/d0/usercli_8h.html#a57">SDROPPABLE</a>)
00894             <span class="keywordflow">return</span>((LRESULT) <a class="code" href="../../d8/d6/sertl_8c.html#a1">max</a>(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o6">cxDrop</a>, pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o4">cxCombo</a>));
00895         <span class="keywordflow">else</span>
00896             <span class="keywordflow">return</span>(CB_ERR);
00897         <span class="keywordflow">break</span>;
00898 
00899     <span class="keywordflow">case</span> CB_DIR:
00900         <span class="comment">/*</span>
00901 <span class="comment">         * wParam - Dos attribute value.</span>
00902 <span class="comment">         * lParam - Points to a file specification string</span>
00903 <span class="comment">         */</span>
00904         <span class="keywordflow">if</span> (fAnsi &amp;&amp; lParam != 0) {
00905             <span class="keywordflow">if</span> (MBToWCS((LPSTR)lParam, -1, &amp;lpwsz, -1, TRUE) == 0)
00906                 <span class="keywordflow">return</span> CB_ERR;
00907             lParam = (LPARAM)lpwsz;
00908         }
00909         lReturn = <a class="code" href="../../d6/d0/usercli_8h.html#a664">xxxCBDir</a>(pcbox, LOWORD(wParam), (LPWSTR)lParam);
00910         <span class="keywordflow">if</span> (fAnsi &amp;&amp; lParam != 0) {
00911             <a class="code" href="../../d6/d0/usercli_8h.html#a138">UserLocalFree</a>(lpwsz);
00912         }
00913         <span class="keywordflow">return</span> lReturn;
00914 
00915     <span class="keywordflow">case</span> CB_SETEXTENDEDUI:
00916 
00917         <span class="comment">/*</span>
00918 <span class="comment">         * wParam - specifies state to set extendui flag to.</span>
00919 <span class="comment">         * Currently only 1 is allowed.  Return CB_ERR (-1) if</span>
00920 <span class="comment">         * failure else 0 if success.</span>
00921 <span class="comment">         */</span>
00922         <span class="keywordflow">if</span> (pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o10">CBoxStyle</a> &amp; <a class="code" href="../../d6/d0/usercli_8h.html#a57">SDROPPABLE</a>) {
00923             <span class="keywordflow">if</span> (!wParam) {
00924                 pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o18">fExtendedUI</a> = 0;
00925                 <span class="keywordflow">return</span> 0;
00926             }
00927 
00928             <span class="keywordflow">if</span> (wParam == 1) {
00929               pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o18">fExtendedUI</a> = 1;
00930               <span class="keywordflow">return</span> 0;
00931             }
00932 
00933             RIPERR1(ERROR_INVALID_PARAMETER,
00934                     RIP_WARNING,
00935                     <span class="stringliteral">"Invalid parameter \"wParam\" (%ld) to ComboBoxWndProcWorker"</span>,
00936                     wParam);
00937 
00938         } <span class="keywordflow">else</span> {
00939             RIPERR1(ERROR_INVALID_MESSAGE,
00940                     RIP_WARNING,
00941                     <span class="stringliteral">"Invalid message (%ld) sent to ComboBoxWndProcWorker"</span>,
00942                     message);
00943         }
00944 
00945         <span class="keywordflow">return</span> CB_ERR;
00946 
00947     <span class="keywordflow">case</span> CB_GETEXTENDEDUI:
00948         <span class="keywordflow">if</span> (pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o10">CBoxStyle</a> &amp; <a class="code" href="../../d6/d0/usercli_8h.html#a57">SDROPPABLE</a>) {
00949             <span class="keywordflow">if</span> (pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o18">fExtendedUI</a>)
00950                 <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00951         }
00952         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00953 
00954     <span class="keywordflow">case</span> CB_GETEDITSEL:
00955 
00956         <span class="comment">/*</span>
00957 <span class="comment">         * wParam - not used</span>
00958 <span class="comment">         * lParam - not used</span>
00959 <span class="comment">         * effects: Gets the selection range for the given edit control.  The</span>
00960 <span class="comment">         * starting BYTE-position is in the low order word.  It contains the</span>
00961 <span class="comment">         * the BYTE-position of the first nonselected character after the end</span>
00962 <span class="comment">         * of the selection in the high order word.  Returns CB_ERR if no</span>
00963 <span class="comment">         * editcontrol.</span>
00964 <span class="comment">         */</span>
00965         message = EM_GETSEL;
00966         <span class="keywordflow">goto</span> CallEditSendMessage;
00967         <span class="keywordflow">break</span>;
00968 
00969     <span class="keywordflow">case</span> CB_LIMITTEXT:
00970 
00971         <span class="comment">/*</span>
00972 <span class="comment">         * wParam - max number of bytes that can be entered</span>
00973 <span class="comment">         * lParam - not used</span>
00974 <span class="comment">         * effects: Specifies the maximum number of bytes of text the user may</span>
00975 <span class="comment">         * enter.  If maxLength is 0, we may enter MAXINT number of BYTES.</span>
00976 <span class="comment">         */</span>
00977         message = EM_LIMITTEXT;
00978         <span class="keywordflow">goto</span> CallEditSendMessage;
00979         <span class="keywordflow">break</span>;
00980 
00981     <span class="keywordflow">case</span> CB_SETEDITSEL:
00982 
00983         <span class="comment">/*</span>
00984 <span class="comment">         * wParam - ichStart</span>
00985 <span class="comment">         * lParam - ichEnd</span>
00986 <span class="comment">         *</span>
00987 <span class="comment">         */</span>
00988         message = EM_SETSEL;
00989 
00990         wParam = (<span class="keywordtype">int</span>)(<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a13">SHORT</a>)LOWORD(lParam);
00991         lParam = (<span class="keywordtype">int</span>)(<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a13">SHORT</a>)HIWORD(lParam);
00992         <span class="keywordflow">goto</span> CallEditSendMessage;
00993         <span class="keywordflow">break</span>;
00994 
00995     <span class="keywordflow">case</span> CB_ADDSTRING:
00996 
00997         <span class="comment">/*</span>
00998 <span class="comment">         * wParam - not used</span>
00999 <span class="comment">         * lParam - Points to null terminated string to be added to listbox</span>
01000 <span class="comment">         */</span>
01001         <span class="keywordflow">if</span> (!pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o19">fCase</a>)
01002             message = LB_ADDSTRING;
01003         <span class="keywordflow">else</span>
01004             message = (pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o19">fCase</a> &amp; <a class="code" href="../../d6/d0/usercli_8h.html#a64">UPPERCASE</a>) ? LB_ADDSTRINGUPPER : LB_ADDSTRINGLOWER;
01005         <span class="keywordflow">goto</span> CallListSendMessage;
01006         <span class="keywordflow">break</span>;
01007 
01008     <span class="keywordflow">case</span> CB_DELETESTRING:
01009 
01010         <span class="comment">/*</span>
01011 <span class="comment">         * wParam - index to string to be deleted</span>
01012 <span class="comment">         * lParam - not used</span>
01013 <span class="comment">         */</span>
01014         message = LB_DELETESTRING;
01015         <span class="keywordflow">goto</span> CallListSendMessage;
01016         <span class="keywordflow">break</span>;
01017 
01018     <span class="keywordflow">case</span> CB_INITSTORAGE:
01019         <span class="comment">// wParamLo - number of items</span>
01020         <span class="comment">// lParam - number of bytes of string space</span>
01021         message = LB_INITSTORAGE;
01022         <span class="keywordflow">goto</span> CallListSendMessage;
01023 
01024     <span class="keywordflow">case</span> CB_SETTOPINDEX:
01025         <span class="comment">// wParamLo - index to make top</span>
01026         <span class="comment">// lParam - not used</span>
01027         message = LB_SETTOPINDEX;
01028         <span class="keywordflow">goto</span> CallListSendMessage;
01029 
01030     <span class="keywordflow">case</span> CB_GETTOPINDEX:
01031         <span class="comment">// wParamLo / lParam - not used</span>
01032         message = LB_GETTOPINDEX;
01033         <span class="keywordflow">goto</span> CallListSendMessage;
01034 
01035     <span class="keywordflow">case</span> CB_GETCOUNT:
01036 
01037         <span class="comment">/*</span>
01038 <span class="comment">         * wParam - not used</span>
01039 <span class="comment">         * lParam - not used</span>
01040 <span class="comment">         */</span>
01041         message = LB_GETCOUNT;
01042         <span class="keywordflow">goto</span> CallListSendMessage;
01043         <span class="keywordflow">break</span>;
01044 
01045     <span class="keywordflow">case</span> CB_GETCURSEL:
01046 
01047         <span class="comment">/*</span>
01048 <span class="comment">         * wParam - not used</span>
01049 <span class="comment">         * lParam - not used</span>
01050 <span class="comment">         */</span>
01051         message = LB_GETCURSEL;
01052         <span class="keywordflow">goto</span> CallListSendMessage;
01053         <span class="keywordflow">break</span>;
01054 
01055     <span class="keywordflow">case</span> CB_GETLBTEXT:
01056 
01057         <span class="comment">/*</span>
01058 <span class="comment">         * wParam - index of string to be copied</span>
01059 <span class="comment">         * lParam - buffer that is to receive the string</span>
01060 <span class="comment">         */</span>
01061         message = LB_GETTEXT;
01062         <span class="keywordflow">goto</span> CallListSendMessage;
01063         <span class="keywordflow">break</span>;
01064 
01065     <span class="keywordflow">case</span> CB_GETLBTEXTLEN:
01066 
01067         <span class="comment">/*</span>
01068 <span class="comment">         * wParam - index to string</span>
01069 <span class="comment">         * lParam - now used for cbANSI</span>
01070 <span class="comment">         */</span>
01071         message = LB_GETTEXTLEN;
01072         <span class="keywordflow">goto</span> CallListSendMessage;
01073         <span class="keywordflow">break</span>;
01074 
01075     <span class="keywordflow">case</span> CB_INSERTSTRING:
01076 
01077         <span class="comment">/*</span>
01078 <span class="comment">         * wParam - position to receive the string</span>
01079 <span class="comment">         * lParam - points to the string</span>
01080 <span class="comment">         */</span>
01081         <span class="keywordflow">if</span> (!pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o19">fCase</a>)
01082             message = LB_INSERTSTRING;
01083         <span class="keywordflow">else</span>
01084             message = (pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o19">fCase</a> &amp; <a class="code" href="../../d6/d0/usercli_8h.html#a64">UPPERCASE</a>) ? LB_INSERTSTRINGUPPER : LB_INSERTSTRINGLOWER;
01085         <span class="keywordflow">goto</span> CallListSendMessage;
01086         <span class="keywordflow">break</span>;
01087 
01088     <span class="keywordflow">case</span> CB_RESETCONTENT:
01089 
01090         <span class="comment">/*</span>
01091 <span class="comment">         * wParam - not used</span>
01092 <span class="comment">         * lParam - not used</span>
01093 <span class="comment">         * If we come here before WM_CREATE has been processed,</span>
01094 <span class="comment">         * pcbox-&gt;spwndList will be NULL.</span>
01095 <span class="comment">         */</span>
01096         UserAssert(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o9">spwndList</a>);
01097         <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o9">spwndList</a>, &amp;tlpwndList);
01098         <a class="code" href="../../d6/d0/usercli_8h.html#a600">SendMessageWorker</a>(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o9">spwndList</a>, LB_RESETCONTENT, 0, 0, FALSE);
01099         <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndList);
01100         <a class="code" href="../../d6/d0/usercli_8h.html#a676">xxxCBInternalUpdateEditWindow</a>(pcbox, NULL);
01101         <span class="keywordflow">break</span>;
01102 
01103     <span class="keywordflow">case</span> CB_GETHORIZONTALEXTENT:
01104         message = LB_GETHORIZONTALEXTENT;
01105         <span class="keywordflow">goto</span> CallListSendMessage;
01106 
01107     <span class="keywordflow">case</span> CB_SETHORIZONTALEXTENT:
01108         message = LB_SETHORIZONTALEXTENT;
01109         <span class="keywordflow">goto</span> CallListSendMessage;
01110 
01111     <span class="keywordflow">case</span> CB_FINDSTRING:
01112 
01113         <span class="comment">/*</span>
01114 <span class="comment">         * wParam - index of starting point for search</span>
01115 <span class="comment">         * lParam - points to prefix string</span>
01116 <span class="comment">         */</span>
01117         message = LB_FINDSTRING;
01118         <span class="keywordflow">goto</span> CallListSendMessage;
01119         <span class="keywordflow">break</span>;
01120 
01121     <span class="keywordflow">case</span> CB_FINDSTRINGEXACT:
01122 
01123         <span class="comment">/*</span>
01124 <span class="comment">         * wParam - index of starting point for search</span>
01125 <span class="comment">         * lParam - points to a exact string</span>
01126 <span class="comment">         */</span>
01127         message = LB_FINDSTRINGEXACT;
01128         <span class="keywordflow">goto</span> CallListSendMessage;
01129         <span class="keywordflow">break</span>;
01130 
01131     <span class="keywordflow">case</span> CB_SELECTSTRING:
01132 
01133         <span class="comment">/*</span>
01134 <span class="comment">         * wParam - index of starting point for search</span>
01135 <span class="comment">         * lParam - points to prefix string</span>
01136 <span class="comment">         */</span>
01137         UserAssert(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o9">spwndList</a>);
01138         <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o9">spwndList</a>, &amp;tlpwndList);
01139         lParam = <a class="code" href="../../d6/d0/usercli_8h.html#a600">SendMessageWorker</a>(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o9">spwndList</a>, LB_SELECTSTRING,
01140                 wParam, lParam, fAnsi);
01141         <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndList);
01142         <a class="code" href="../../d6/d0/usercli_8h.html#a676">xxxCBInternalUpdateEditWindow</a>(pcbox, NULL);
01143         <span class="keywordflow">return</span> lParam;
01144 
01145     <span class="keywordflow">case</span> CB_SETCURSEL:
01146 
01147         <span class="comment">/*</span>
01148 <span class="comment">         * wParam - Contains index to be selected</span>
01149 <span class="comment">         * lParam - not used</span>
01150 <span class="comment">         * If we come here before WM_CREATE has been processed,</span>
01151 <span class="comment">         * pcbox-&gt;spwndList will be NULL.</span>
01152 <span class="comment">         */</span>
01153 
01154         UserAssert(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o9">spwndList</a>);
01155 
01156         <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o9">spwndList</a>, &amp;tlpwndList);
01157         lParam = <a class="code" href="../../d6/d0/usercli_8h.html#a600">SendMessageWorker</a>(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o9">spwndList</a>, LB_SETCURSEL, wParam, lParam, FALSE);
01158         <span class="keywordflow">if</span> (lParam != -1) {
01159             <a class="code" href="../../d6/d0/usercli_8h.html#a600">SendMessageWorker</a>(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o9">spwndList</a>, LB_SETTOPINDEX, wParam, 0, FALSE);
01160         }
01161         <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndList);
01162         <a class="code" href="../../d6/d0/usercli_8h.html#a676">xxxCBInternalUpdateEditWindow</a>(pcbox, NULL);
01163         <span class="keywordflow">return</span> lParam;
01164 
01165     <span class="keywordflow">case</span> CB_GETITEMDATA:
01166         message = LB_GETITEMDATA;
01167         <span class="keywordflow">goto</span> CallListSendMessage;
01168         <span class="keywordflow">break</span>;
01169 
01170     <span class="keywordflow">case</span> CB_SETITEMDATA:
01171         message = LB_SETITEMDATA;
01172         <span class="keywordflow">goto</span> CallListSendMessage;
01173         <span class="keywordflow">break</span>;
01174 
01175     <span class="keywordflow">case</span> CB_SETITEMHEIGHT:
01176         <span class="keywordflow">if</span> (wParam == -1) {
01177             <span class="keywordflow">if</span> (HIWORD(lParam) != 0)
01178                 <span class="keywordflow">return</span> CB_ERR;
01179             <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a682">xxxCBSetEditItemHeight</a>(pcbox, LOWORD(lParam));
01180         }
01181 
01182         message = LB_SETITEMHEIGHT;
01183         <span class="keywordflow">goto</span> CallListSendMessage;
01184         <span class="keywordflow">break</span>;
01185 
01186     <span class="keywordflow">case</span> CB_GETITEMHEIGHT:
01187         <span class="keywordflow">if</span> (wParam == -1)
01188             <span class="keywordflow">return</span> pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o2">editrc</a>.bottom - pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o2">editrc</a>.top;
01189 
01190         message = LB_GETITEMHEIGHT;
01191         <span class="keywordflow">goto</span> CallListSendMessage;
01192         <span class="keywordflow">break</span>;
01193 
01194     <span class="keywordflow">case</span> CB_SHOWDROPDOWN:
01195 
01196         <span class="comment">/*</span>
01197 <span class="comment">         * wParam - True then drop down the listbox if possible else hide it</span>
01198 <span class="comment">         * lParam - not used</span>
01199 <span class="comment">         */</span>
01200         <span class="keywordflow">if</span> (wParam &amp;&amp; !pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o15">fLBoxVisible</a>) {
01201             <a class="code" href="../../d6/d0/usercli_8h.html#a668">xxxCBShowListBoxWindow</a>(pcbox, TRUE);
01202         } <span class="keywordflow">else</span> {
01203             <span class="keywordflow">if</span> (!wParam &amp;&amp; pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o15">fLBoxVisible</a>) {
01204                 <a class="code" href="../../d6/d0/usercli_8h.html#a667">xxxCBHideListBoxWindow</a>(pcbox, TRUE, FALSE);
01205             }
01206         }
01207         <span class="keywordflow">break</span>;
01208 
01209     <span class="keywordflow">case</span> CB_SETLOCALE:
01210 
01211         <span class="comment">/*</span>
01212 <span class="comment">         * wParam - locale id</span>
01213 <span class="comment">         * lParam - not used</span>
01214 <span class="comment">         */</span>
01215         message = LB_SETLOCALE;
01216         <span class="keywordflow">goto</span> CallListSendMessage;
01217         <span class="keywordflow">break</span>;
01218 
01219     <span class="keywordflow">case</span> CB_GETLOCALE:
01220 
01221         <span class="comment">/*</span>
01222 <span class="comment">         * wParam - not used</span>
01223 <span class="comment">         * lParam - not used</span>
01224 <span class="comment">         */</span>
01225         message = LB_GETLOCALE;
01226         <span class="keywordflow">goto</span> CallListSendMessage;
01227         <span class="keywordflow">break</span>;
01228 
01229     <span class="keywordflow">case</span> WM_MEASUREITEM:
01230     <span class="keywordflow">case</span> WM_DELETEITEM:
01231     <span class="keywordflow">case</span> WM_DRAWITEM:
01232     <span class="keywordflow">case</span> WM_COMPAREITEM:
01233         <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a663">xxxCBMessageItemHandler</a>(pcbox, message, (LPVOID)lParam);
01234 
01235     <span class="keywordflow">case</span> WM_NCCREATE:
01236 
01237         <span class="comment">/*</span>
01238 <span class="comment">         * wParam - Contains a handle to the window being created</span>
01239 <span class="comment">         * lParam - Points to the CREATESTRUCT data structure for the window.</span>
01240 <span class="comment">         */</span>
01241         <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a670">CBNcCreateHandler</a>(pcbox, pwnd);
01242 
01243     <span class="keywordflow">case</span> WM_PARENTNOTIFY:
01244         <span class="keywordflow">if</span> (LOWORD(wParam) == WM_DESTROY) {
01245             <span class="keywordflow">if</span> ((HWND)lParam == <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a450">HW</a>(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o8">spwndEdit</a>)) {
01246                 pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o10">CBoxStyle</a> &amp;= ~<a class="code" href="../../d6/d0/usercli_8h.html#a58">SEDITABLE</a>;
01247                 pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o21">fNoEdit</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01248                 pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o8">spwndEdit</a> = pwnd;
01249             } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((HWND)lParam == <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a450">HW</a>(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o9">spwndList</a>)) {
01250                 pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o10">CBoxStyle</a> &amp;= ~<a class="code" href="../../d6/d0/usercli_8h.html#a57">SDROPPABLE</a>;
01251                 pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o9">spwndList</a> = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
01252             }
01253         }
01254         <span class="keywordflow">break</span>;
01255 
01256     <span class="keywordflow">case</span> WM_UPDATEUISTATE:
01257         <span class="comment">/*</span>
01258 <span class="comment">         * Propagate the change to the list control, if any</span>
01259 <span class="comment">         */</span>
01260         UserAssert(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o9">spwndList</a>);
01261         <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o9">spwndList</a>, &amp;tlpwndList);
01262         <a class="code" href="../../d6/d0/usercli_8h.html#a600">SendMessageWorker</a>(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o9">spwndList</a>, WM_UPDATEUISTATE,
01263                           wParam, lParam, fAnsi);
01264         <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndList);
01265         <span class="keywordflow">goto</span> CallDWP;
01266 
01267     <span class="keywordflow">case</span> WM_HELP:
01268         {
01269             LPHELPINFO lpHelpInfo;
01270 
01271             <span class="comment">/* Check if this message is form a child of this combo</span>
01272 <span class="comment">             */</span>
01273             <span class="keywordflow">if</span> ((lpHelpInfo = (LPHELPINFO)lParam) != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> &amp;&amp;
01274                 ((pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o8">spwndEdit</a> &amp;&amp; lpHelpInfo-&gt;iCtrlId == (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a13">SHORT</a>)(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a99">PTR_TO_ID</a>(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o8">spwndEdit</a>-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o16">spmenu</a>))) ||
01275                  lpHelpInfo-&gt;iCtrlId == (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a13">SHORT</a>)(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a99">PTR_TO_ID</a>(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o9">spwndList</a>-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o16">spmenu</a>)) )) {
01276 
01277                 <span class="comment">// BUGBUG - What to do here?</span>
01278                 lpHelpInfo-&gt;iCtrlId = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a13">SHORT</a>)(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a99">PTR_TO_ID</a>(pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o16">spmenu</a>));
01279                 lpHelpInfo-&gt;hItemHandle = hwnd;
01280                 lpHelpInfo-&gt;dwContextId = <a class="code" href="../../d4/d0/rtl_2help_8c.html#a1">GetContextHelpId</a>(pwnd);
01281             }
01282         }
01283         <span class="comment">/*</span>
01284 <span class="comment">         * Fall through to DefWindowProc</span>
01285 <span class="comment">         */</span>
01286 
01287     <span class="keywordflow">default</span>:
01288 
01289         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(PENWINDOWS) &amp;&amp;
01290                 (message &gt;= WM_PENWINFIRST &amp;&amp; message &lt;= WM_PENWINLAST))
01291             <span class="keywordflow">goto</span> CallEditSendMessage;
01292 
01293 CallDWP:
01294         <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a610">DefWindowProcWorker</a>(pwnd, message, wParam, lParam, fAnsi);
01295     }  <span class="comment">/* switch (message) */</span>
01296 
01297     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01298 
01299 <span class="comment">/*</span>
01300 <span class="comment"> * The following forward messages off to the child controls.</span>
01301 <span class="comment"> */</span>
01302 CallEditSendMessage:
01303     <span class="keywordflow">if</span> (!pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o21">fNoEdit</a> &amp;&amp; pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o8">spwndEdit</a>) {
01304         <span class="comment">/*</span>
01305 <span class="comment">         * pcbox-&gt;spwndEdit will be NULL if we haven't done WM_CREATE yet!</span>
01306 <span class="comment">         */</span>
01307         <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o8">spwndEdit</a>, &amp;tlpwndEdit);
01308         lReturn = <a class="code" href="../../d6/d0/usercli_8h.html#a600">SendMessageWorker</a>(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o8">spwndEdit</a>, message,
01309                 wParam, lParam, fAnsi);
01310         <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndEdit);
01311     }
01312     <span class="keywordflow">else</span> {
01313         RIPERR0(ERROR_INVALID_COMBOBOX_MESSAGE, RIP_VERBOSE, <span class="stringliteral">""</span>);
01314         lReturn = CB_ERR;
01315     }
01316     <span class="keywordflow">return</span> lReturn;
01317 
01318 CallListSendMessage:
01319     <span class="comment">/*</span>
01320 <span class="comment">     * pcbox-&gt;spwndList will be NULL if we haven't done WM_CREATE yet!</span>
01321 <span class="comment">     */</span>
01322     UserAssert(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o9">spwndList</a>);
01323     <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o9">spwndList</a>, &amp;tlpwndList);
01324     lReturn = <a class="code" href="../../d6/d0/usercli_8h.html#a600">SendMessageWorker</a>(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o9">spwndList</a>, message,
01325             wParam, lParam, fAnsi);
01326     <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndList);
01327     <span class="keywordflow">return</span> lReturn;
01328 
01329 }  <span class="comment">/* ComboBoxWndProcWorker */</span>
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a588" doxytag="usercli.h::ComboListBoxWndProcA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LRESULT APIENTRY ComboListBoxWndProcA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>msg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d0/lb1_8c-source.html#l00788">788</a> of file <a class="el" href="../../d7/d0/lb1_8c-source.html">lb1.c</a>.
<p>
References <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00574">DefWindowProcWorker()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00798">FNID_LISTBOX</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00144">FWINDOWMSG</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d7/d0/lb1_8c-source.html#l00032">ListBoxWndProcWorker()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d5/d9/immcli_8h-source.html#l00120">ValidateHwnd</a>.
<p>
Referenced by <a class="el" href="../../d7/d7/clinit_8c-source.html#l01219">ClientThreadSetup()</a>.
<p>
<pre class="fragment"><div>00793 {
00794     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwnd;
00795 
00796     <span class="keywordflow">if</span> ((pwnd = <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(hwnd)) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00797         <span class="keywordflow">return</span> (0<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>);
00798     }
00799 
00800     <span class="comment">/*</span>
00801 <span class="comment">     * If the control is not interested in this message,</span>
00802 <span class="comment">     * pass it to DefWindowProc.</span>
00803 <span class="comment">     */</span>
00804     <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d0/usercli_8h.html#a10">FWINDOWMSG</a>(message, FNID_LISTBOX))
00805         <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a610">DefWindowProcWorker</a>(pwnd, message, wParam, lParam, TRUE);
00806 
00807     <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a612">ListBoxWndProcWorker</a>(pwnd, message, wParam, lParam, TRUE);
00808 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a589" doxytag="usercli.h::ComboListBoxWndProcW" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LRESULT APIENTRY ComboListBoxWndProcW           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>msg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d0/lb1_8c-source.html#l00810">810</a> of file <a class="el" href="../../d7/d0/lb1_8c-source.html">lb1.c</a>.
<p>
References <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00574">DefWindowProcWorker()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00798">FNID_LISTBOX</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00144">FWINDOWMSG</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d7/d0/lb1_8c-source.html#l00032">ListBoxWndProcWorker()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d5/d9/immcli_8h-source.html#l00120">ValidateHwnd</a>.
<p>
Referenced by <a class="el" href="../../d7/d7/clinit_8c-source.html#l01219">ClientThreadSetup()</a>, and <a class="el" href="../../d7/d7/clinit_8c-source.html#l00378">RW_RegisterControls()</a>.
<p>
<pre class="fragment"><div>00815 {
00816     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwnd;
00817 
00818     <span class="keywordflow">if</span> ((pwnd = <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(hwnd)) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00819         <span class="keywordflow">return</span> (0<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>);
00820     }
00821 
00822     <span class="comment">/*</span>
00823 <span class="comment">     * If the control is not interested in this message,</span>
00824 <span class="comment">     * pass it to DefWindowProc.</span>
00825 <span class="comment">     */</span>
00826     <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d0/usercli_8h.html#a10">FWINDOWMSG</a>(message, FNID_LISTBOX))
00827         <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a610">DefWindowProcWorker</a>(pwnd, message, wParam, lParam, FALSE);
00828 
00829     <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a612">ListBoxWndProcWorker</a>(pwnd, message, wParam, lParam, FALSE);
00830 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a615" doxytag="usercli.h::ComboListBoxWndProcWorker" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LRESULT ComboListBoxWndProcWorker           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>msg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>fAnsi</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a659" doxytag="usercli.h::ConvertDIBBitmap" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HBITMAP ConvertDIBBitmap           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d0/usercli_8h.html#a378">UPBITMAPINFOHEADER</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpbih</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cxDesired</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cyDesired</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>flags</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPBITMAPINFOHEADER *&nbsp;</td>
          <td class="mdname" nowrap> <em>lplpbih</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPSTR *&nbsp;</td>
          <td class="mdname" nowrap> <em>lplpBits</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d5/d8/clres_8c-source.html#l03344">ConvertDIBIcon()</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l04377">CopyBmp()</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l02847">ObjectFromDIBResource()</a>, <a class="el" href="../../d4/d1/rtlres_8c-source.html#l00142">RtlLoadObjectFromDIBFile()</a>, and <a class="el" href="../../d5/d8/clres_8c-source.html#l04158">WOWLoadBitmapA()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a660" doxytag="usercli.h::ConvertDIBIcon" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HICON ConvertDIBIcon           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">LPBITMAPINFOHEADER&nbsp;</td>
          <td class="mdname" nowrap> <em>lpbih</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HINSTANCE&nbsp;</td>
          <td class="mdname" nowrap> <em>hmod</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPCWSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>lpName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fIcon</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cxNew</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cyNew</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>LR_flags</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d8/clres_8c-source.html#l03344">3344</a> of file <a class="el" href="../../d5/d8/clres_8c-source.html">clres.c</a>.
<p>
References <a class="el" href="../../d5/d8/clres_8c-source.html#l02950">BitmapFromDIB()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l03203">ChangeDibColors()</a>, <a class="el" href="../../d6/d0/usercli_8h.html#a659">ConvertDIBBitmap()</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l01029">CreateIcoCur()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02178">CURSORF_ACONFRAME</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02173">CURSORF_FROMRESOURCE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02174">CURSORF_GLOBAL</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02175">CURSORF_LRSHARED</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00053">hmodUser</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00025">INT</a>, <a class="el" href="../../d4/d8/arcinst_8c-source.html#l00065">MAX_PATH</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00624">MultDiv</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00411">PTR_TO_ID</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00063">szUSER32</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00960">UserLocalFree</a>, and <a class="el" href="../../d5/d8/clres_8c-source.html#l00128">WowGetModuleFileName()</a>.
<p>
Referenced by <a class="el" href="../../d5/d8/clres_8c-source.html#l01627">CreateIconFromResourceEx()</a>, <a class="el" href="../../d4/d3/client_2acons_8c-source.html#l00279">LoadCursorIconFromFileMap()</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l02847">ObjectFromDIBResource()</a>, <a class="el" href="../../d4/d3/client_2acons_8c-source.html#l00700">ReadIconFromFileMap()</a>, and <a class="el" href="../../d5/d8/clres_8c-source.html#l04200">WowServerLoadCreateCursorIcon()</a>.
<p>
<pre class="fragment"><div>03352 {
03353     LPBITMAPINFOHEADER lpbihNew = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
03354     LPSTR              lpBitsNextMask = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
03355     HICON              hicoNew = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
03356     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>               fOldFormat = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
03357     <a class="code" href="../../d8/d1/structtagCURSORDATA.html">CURSORDATA</a>         cur;
03358     WCHAR              achModName[<a class="code" href="../../d3/d9/arcinst_8c.html#a6">MAX_PATH</a>];
03359 
03360     <span class="comment">/*</span>
03361 <span class="comment">     * Because Icons/Cursors always get public bitmaps, we cannot use</span>
03362 <span class="comment">     * LR_CREATEDIBSECTION on them.</span>
03363 <span class="comment">     */</span>
03364     <span class="keywordflow">if</span> (LR_flags &amp; LR_CREATEDIBSECTION)
03365         LR_flags = (LR_flags &amp; ~LR_CREATEDIBSECTION) | LR_CREATEREALDIB;
03366 
03367     RtlZeroMemory(&amp;cur, <span class="keyword">sizeof</span>(cur));
03368 
03369     <span class="keywordflow">if</span> (!fIcon) {
03370         <span class="comment">/*</span>
03371 <span class="comment">         * Cursors have an extra two words preceeding the BITMAPINFOHEADER</span>
03372 <span class="comment">         * indicating the hot-spot.  After doing the increments, the</span>
03373 <span class="comment">         * pointer should be at the dib-header.</span>
03374 <span class="comment">         */</span>
03375         cur.<a class="code" href="../../d8/d1/structtagCURSORDATA.html#o8">xHotspot</a> = (<span class="keywordtype">short</span>)(<span class="keywordtype">int</span>)*(((LPWORD)lpbih)++);
03376         cur.<a class="code" href="../../d8/d1/structtagCURSORDATA.html#o9">yHotspot</a> = (<span class="keywordtype">short</span>)(<span class="keywordtype">int</span>)*(((LPWORD)lpbih)++);
03377     }
03378 
03379     <span class="comment">/*</span>
03380 <span class="comment">     * Get the XOR/Color mask.</span>
03381 <span class="comment">     * The XOR bits are first in the DIB because the header info</span>
03382 <span class="comment">     * pertains to them.</span>
03383 <span class="comment">     * The AND mask is always monochrome.</span>
03384 <span class="comment">     */</span>
03385     lpBitsNextMask = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;  <span class="comment">// not passing lpBits in.</span>
03386     cur.<a class="code" href="../../d8/d1/structtagCURSORDATA.html#o11">hbmColor</a> = <a class="code" href="../../d6/d0/usercli_8h.html#a659">ConvertDIBBitmap</a>(lpbih,
03387                                     cxNew,
03388                                     cyNew,
03389                                     LR_flags,
03390                                     &amp;lpbihNew,
03391                                     &amp;lpBitsNextMask);
03392     <span class="keywordflow">if</span> (cur.<a class="code" href="../../d8/d1/structtagCURSORDATA.html#o11">hbmColor</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
03393         <span class="keywordflow">return</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
03394 
03395     <span class="keywordflow">if</span> (hmod == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
03396         cur.<a class="code" href="../../d8/d1/structtagCURSORDATA.html#o2">lpModName</a> = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
03397     } <span class="keywordflow">else</span> {
03398         cur.<a class="code" href="../../d8/d1/structtagCURSORDATA.html#o0">CURSORF_flags</a> = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a534">CURSORF_FROMRESOURCE</a>;
03399         <span class="keywordflow">if</span> (hmod == <a class="code" href="../../d1/d8/clglobal_8c.html#a6">hmodUser</a>) {
03400             cur.<a class="code" href="../../d8/d1/structtagCURSORDATA.html#o2">lpModName</a>     = <a class="code" href="../../d1/d8/clglobal_8c.html#a12">szUSER32</a>;
03401         } <span class="keywordflow">else</span>  {
03402             <a class="code" href="../../d6/d0/usercli_8h.html#a647">WowGetModuleFileName</a>(hmod,
03403                               achModName,
03404                               <span class="keyword">sizeof</span>(achModName) / <span class="keyword">sizeof</span>(WCHAR));
03405             cur.<a class="code" href="../../d8/d1/structtagCURSORDATA.html#o2">lpModName</a> = achModName;
03406         }
03407     }
03408     cur.<a class="code" href="../../d8/d1/structtagCURSORDATA.html#o3">rt</a>     = (fIcon ? <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a99">PTR_TO_ID</a>(RT_ICON) : <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a99">PTR_TO_ID</a>(RT_CURSOR));
03409     cur.<a class="code" href="../../d8/d1/structtagCURSORDATA.html#o1">lpName</a> = (LPWSTR)lpName;
03410     cur.<a class="code" href="../../d8/d1/structtagCURSORDATA.html#o5">bpp</a>    = lpbihNew-&gt;biBitCount * lpbihNew-&gt;biPlanes;
03411 
03412     <span class="keywordflow">if</span> (cxNew == 0)
03413         cxNew = lpbihNew-&gt;biWidth;
03414 
03415     <span class="keywordflow">if</span> (cyNew == 0)
03416         cyNew = lpbihNew-&gt;biHeight / 2;
03417 
03418     <span class="keywordflow">if</span> (!fIcon) {
03419 
03420         cur.<a class="code" href="../../d8/d1/structtagCURSORDATA.html#o8">xHotspot</a> = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a141">MultDiv</a>(cur.<a class="code" href="../../d8/d1/structtagCURSORDATA.html#o8">xHotspot</a>,
03421                                cxNew,
03422                                lpbihNew-&gt;biWidth);
03423         cur.<a class="code" href="../../d8/d1/structtagCURSORDATA.html#o9">yHotspot</a> = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a141">MultDiv</a>(cur.<a class="code" href="../../d8/d1/structtagCURSORDATA.html#o9">yHotspot</a>,
03424                                cyNew,
03425                                lpbihNew-&gt;biHeight / 2);
03426     } <span class="keywordflow">else</span> {
03427 
03428         <span class="comment">/*</span>
03429 <span class="comment">         * For an icon the hot spot is the center of the icon</span>
03430 <span class="comment">         */</span>
03431         cur.<a class="code" href="../../d8/d1/structtagCURSORDATA.html#o8">xHotspot</a> = (<a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a>)(cxNew) / 2;
03432         cur.<a class="code" href="../../d8/d1/structtagCURSORDATA.html#o9">yHotspot</a> = (<a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a>)(cyNew) / 2;
03433     }
03434 
03435     <span class="comment">/*</span>
03436 <span class="comment">     * Setup header for monochrome DIB.  Note that we use the COPY.</span>
03437 <span class="comment">     */</span>
03438     <a class="code" href="../../d4/d9/clres_8c.html#a88">ChangeDibColors</a>(lpbihNew, LR_MONOCHROME);
03439 
03440     <span class="keywordflow">if</span> (lpBitsNextMask != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
03441         cur.<a class="code" href="../../d8/d1/structtagCURSORDATA.html#o10">hbmMask</a> = <a class="code" href="../../d4/d9/clres_8c.html#a86">BitmapFromDIB</a>(cxNew,
03442                                     cyNew * 2,
03443                                     1,
03444                                     1,
03445                                     0,
03446                                     lpbihNew-&gt;biWidth,
03447                                     lpbihNew-&gt;biHeight,
03448                                     lpBitsNextMask,
03449                                     (LPBITMAPINFO)lpbihNew,
03450                                     NULL);
03451         <span class="keywordflow">if</span> (cur.<a class="code" href="../../d8/d1/structtagCURSORDATA.html#o10">hbmMask</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
03452             DeleteObject(cur.<a class="code" href="../../d8/d1/structtagCURSORDATA.html#o11">hbmColor</a>);
03453             <a class="code" href="../../d6/d0/usercli_8h.html#a138">UserLocalFree</a>(lpbihNew);
03454             <span class="keywordflow">return</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
03455         }
03456 
03457     } <span class="keywordflow">else</span> {
03458         cur.<a class="code" href="../../d8/d1/structtagCURSORDATA.html#o10">hbmMask</a> = cur.<a class="code" href="../../d8/d1/structtagCURSORDATA.html#o11">hbmColor</a>;
03459         cur.<a class="code" href="../../d8/d1/structtagCURSORDATA.html#o11">hbmColor</a> = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
03460     }
03461 
03462     cur.<a class="code" href="../../d8/d1/structtagCURSORDATA.html#o6">cx</a> = cxNew;
03463     cur.<a class="code" href="../../d8/d1/structtagCURSORDATA.html#o7">cy</a> = cyNew * 2;
03464 
03465     <span class="comment">/*</span>
03466 <span class="comment">     * Free our dib header copy allocated by ConvertDIBBitmap</span>
03467 <span class="comment">     */</span>
03468     <a class="code" href="../../d6/d0/usercli_8h.html#a138">UserLocalFree</a>(lpbihNew);
03469 
03470     <span class="keywordflow">if</span> (LR_flags &amp; LR_SHARED)
03471         cur.<a class="code" href="../../d8/d1/structtagCURSORDATA.html#o0">CURSORF_flags</a> |= <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a536">CURSORF_LRSHARED</a>;
03472 
03473     <span class="keywordflow">if</span> (LR_flags &amp; LR_GLOBAL)
03474         cur.<a class="code" href="../../d8/d1/structtagCURSORDATA.html#o0">CURSORF_flags</a> |= <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a535">CURSORF_GLOBAL</a>;
03475 
03476     <span class="keywordflow">if</span> (LR_flags &amp; LR_ACONFRAME)
03477         cur.<a class="code" href="../../d8/d1/structtagCURSORDATA.html#o0">CURSORF_flags</a> |= <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a539">CURSORF_ACONFRAME</a>;
03478 
03479     <span class="keywordflow">return</span> <a class="code" href="../../d4/d9/clres_8c.html#a56">CreateIcoCur</a>(&amp;cur);
03480 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a629" doxytag="usercli.h::ConvertMemHandle" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HANDLE ConvertMemHandle           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hMem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>cbNULL</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00189">189</a> of file <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html">client/ntstubs.c</a>.
<p>
References <a class="el" href="../../d8/d8/ntsend_8h-source.html#l00027">BEGINCALL</a>, <a class="el" href="../../d8/d8/ntsend_8h-source.html#l00047">ENDCALL</a>, <a class="el" href="../../d8/d8/ntsend_8h-source.html#l00035">ERRORTRAP</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l03310">NtUserConvertMemHandle()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00128">USERGLOBALLOCK</a>, and <a class="el" href="../../d7/d9/usercli_8h-source.html#l00123">USERGLOBALUNLOCK</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/client_8c-source.html#l00390">GetClipboardData()</a>, and <a class="el" href="../../d4/d7/client_8c-source.html#l00876">SetClipboardData()</a>.
<p>
<pre class="fragment"><div>00192 {
00193     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> cbData;
00194     LPBYTE lpData;
00195 
00196     <a class="code" href="../../d7/d9/ntsend_8h.html#a1">BEGINCALL</a>()
00197 
00198         if (GlobalFlags(hData) == GMEM_INVALID_HANDLE) {
00199             RIPMSG0(RIP_WARNING, <span class="stringliteral">"ConvertMemHandle hMem is not valid\n"</span>);
00200             <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>();
00201             }
00202 
00203         <span class="keywordflow">if</span> (!(cbData = (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)GlobalSize(hData)))
00204             <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>();
00205 
00206         <a class="code" href="../../d6/d0/usercli_8h.html#a4">USERGLOBALLOCK</a>(hData, lpData);
00207         <span class="keywordflow">if</span> (lpData == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00208             <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>();
00209         }
00210 
00211         <span class="comment">/*</span>
00212 <span class="comment">         * Make sure text formats are NULL terminated.</span>
00213 <span class="comment">         */</span>
00214         <span class="keywordflow">switch</span> (cbNULL) {
00215         <span class="keywordflow">case</span> 2:
00216             lpData[cbData - 2] = 0;
00217             <span class="comment">// FALL THROUGH</span>
00218         <span class="keywordflow">case</span> 1:
00219             lpData[cbData - 1] = 0;
00220         }
00221 
00222         retval = (ULONG_PTR)<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a132">NtUserConvertMemHandle</a>(lpData, cbData);
00223 
00224         <a class="code" href="../../d6/d0/usercli_8h.html#a1">USERGLOBALUNLOCK</a>(hData);
00225 
00226     <a class="code" href="../../d7/d9/ntsend_8h.html#a3">ERRORTRAP</a>(NULL);
00227     <a class="code" href="../../d7/d9/ntsend_8h.html#a5">ENDCALL</a>(HANDLE);
00228 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a637" doxytag="usercli.h::CopyLogFontAtoW" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void CopyLogFontAtoW           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">PLOGFONTW&nbsp;</td>
          <td class="mdname" nowrap> <em>pdest</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PLOGFONTA&nbsp;</td>
          <td class="mdname" nowrap> <em>psrc</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l01669">MESSAGECALL()</a>, and <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00959">SystemParametersInfo()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a638" doxytag="usercli.h::CopyLogFontWtoA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void CopyLogFontWtoA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">PLOGFONTA&nbsp;</td>
          <td class="mdname" nowrap> <em>pdest</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PLOGFONTW&nbsp;</td>
          <td class="mdname" nowrap> <em>psrc</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l01669">MESSAGECALL()</a>, and <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00959">SystemParametersInfo()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a628" doxytag="usercli.h::CreateLocalMemHandle" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HANDLE CreateLocalMemHandle           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HANDLE&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hMem</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00230">230</a> of file <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html">client/ntstubs.c</a>.
<p>
References <a class="el" href="../../d8/d8/ntsend_8h-source.html#l00027">BEGINCALL</a>, <a class="el" href="../../d8/d8/ntsend_8h-source.html#l00047">ENDCALL</a>, <a class="el" href="../../d8/d8/ntsend_8h-source.html#l00035">ERRORTRAP</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l03336">NtUserCreateLocalMemHandle()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d3/d0/cttoken_8c-source.html#l00135">Status</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, and <a class="el" href="../../d7/d9/usercli_8h-source.html#l00124">UserGlobalFree</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/client_8c-source.html#l00390">GetClipboardData()</a>.
<p>
<pre class="fragment"><div>00232 {
00233     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> cbData;
00234     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
00235 
00236     <a class="code" href="../../d7/d9/ntsend_8h.html#a1">BEGINCALL</a>()
00237 
00238         Status = NtUserCreateLocalMemHandle(hMem, NULL, 0, &amp;cbData);
00239         if (Status != STATUS_BUFFER_TOO_SMALL) {
00240             RIPMSG0(RIP_WARNING, <span class="stringliteral">"__CreateLocalMemHandle server returned failure\n"</span>);
00241             <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>();
00242         }
00243 
00244         <span class="keywordflow">if</span> (!(retval = (ULONG_PTR)GlobalAlloc(GMEM_FIXED, cbData)))
00245             <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>();
00246 
00247         <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a133">NtUserCreateLocalMemHandle</a>(hMem, (LPBYTE)retval, cbData, NULL);
00248         <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(Status)) {
00249             RIPMSG0(RIP_WARNING, <span class="stringliteral">"__CreateLocalMemHandle server returned failure\n"</span>);
00250             <a class="code" href="../../d6/d0/usercli_8h.html#a2">UserGlobalFree</a>((HANDLE)retval);
00251             <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>();
00252         }
00253 
00254     <a class="code" href="../../d7/d9/ntsend_8h.html#a3">ERRORTRAP</a>(0);
00255     <a class="code" href="../../d7/d9/ntsend_8h.html#a5">ENDCALL</a>(HANDLE);
00256 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a773" doxytag="usercli.h::CreateMDIChild" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL CreateMDIChild           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d5/d6/structtagSHORTCREATE.html">PSHORTCREATE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pcs</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPMDICREATESTRUCT&nbsp;</td>
          <td class="mdname" nowrap> <em>pmcs</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwExpWinVerAndFlags</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HMENU *&nbsp;</td>
          <td class="mdname" nowrap> <em>phSysMenu</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwndParent</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02794">2794</a> of file <a class="el" href="../../d7/d4/mdiwin_8c-source.html">mdiwin.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02594">CHILDSYSMENU</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02067">CKIDS</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02035">tagSHORTCREATE::cx</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02034">tagSHORTCREATE::cy</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02071">FIRST</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02039">tagSHORTCREATE::hMenu</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00277">IsWindow()</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02068">MAXED</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00557">MDICheckCascadeRect()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05406">NtUserMinMaximize()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d6/d0/usercli_8h.html#a383">PSHORTCREATE</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00652">SendMessage()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02038">tagSHORTCREATE::style</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00475">VER40</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02057">WS_MDIALLOWED</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02055">WS_MDISTYLE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02037">tagSHORTCREATE::x</a>, <a class="el" href="../../d6/d6/ntuser_2rtl_2menu_8c-source.html#l00117">xxxLoadSysMenu()</a>, and <a class="el" href="../../d7/d9/usercli_8h-source.html#l02036">tagSHORTCREATE::y</a>.
<p>
Referenced by <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l01197">_CreateWindowEx()</a>.
<p>
<pre class="fragment"><div>02800 {
02801     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fVisible;
02802     RECT rcT;
02803     HMENU hSysMenu = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
02804     HWND hwndPrevMaxed;
02805     <a class="code" href="../../d8/d0/structtagMDI.html">PMDI</a> pmdi;
02806 
02807     <span class="comment">/*</span>
02808 <span class="comment">     * Get a pointer to the MDI structure</span>
02809 <span class="comment">     */</span>
02810     pmdi = ((<a class="code" href="../../d0/d1/structtagMDIWND.html">PMDIWND</a>)(pwndParent))-&gt;pmdi;
02811 
02812     pmcs-&gt;style = psc-&gt;style;
02813 
02814     <span class="comment">// Mask off ignored style bits and add required ones.</span>
02815     psc-&gt;style |= (WS_CHILD | WS_CLIPSIBLINGS);
02816     <span class="keywordflow">if</span> (!(pwndParent-&gt;style &amp; MDIS_ALLCHILDSTYLES))
02817     {
02818         psc-&gt;style &amp;= <a class="code" href="../../d6/d0/usercli_8h.html#a263">WS_MDIALLOWED</a>;
02819         psc-&gt;style |= (<a class="code" href="../../d6/d0/usercli_8h.html#a261">WS_MDISTYLE</a> | WS_VISIBLE);
02820     }
02821     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (psc-&gt;style &amp; WS_POPUP)
02822     {
02823         RIPMSG0(RIP_ERROR, <span class="stringliteral">"CreateWindowEx: WS_POPUP not allowed on MDI children"</span>);
02824         <span class="keywordflow">if</span> (LOWORD(dwExpWinVerAndFlags) &gt;= <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a101">VER40</a>)
02825             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
02826     }
02827 
02828     fVisible = ((psc-&gt;style &amp; WS_VISIBLE) != 0<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>);
02829 
02830     <span class="comment">//</span>
02831     <span class="comment">// Save ORIGINAL parameters in MDICREATESTRUCT.  This is for</span>
02832     <span class="comment">// compatibility with old WM_MDICREATE.</span>
02833     <span class="comment">//</span>
02834     pmcs-&gt;x   = rcT.left   = psc-&gt;x;
02835     pmcs-&gt;y   = rcT.top    = psc-&gt;y;
02836     pmcs-&gt;cx  = rcT.right  = psc-&gt;cx;
02837     pmcs-&gt;cy  = rcT.bottom = psc-&gt;cy;
02838 
02839     <a class="code" href="../../d6/d5/mdiwin_8c.html#a15">MDICheckCascadeRect</a>(pwndParent, &amp;rcT);
02840 
02841     <span class="comment">//</span>
02842     <span class="comment">// Setup creation coords</span>
02843     <span class="comment">//</span>
02844     psc-&gt;x       = rcT.left;
02845     psc-&gt;y       = rcT.top;
02846     psc-&gt;cx      = rcT.right;
02847     psc-&gt;cy      = rcT.bottom;
02848 
02849     <span class="comment">// Load the system menu</span>
02850     <span class="keywordflow">if</span> (psc-&gt;style &amp; WS_SYSMENU) {
02851         hSysMenu = <a class="code" href="../../d5/d7/ntuser_2rtl_2menu_8c.html#a2">xxxLoadSysMenu</a>(CHILDSYSMENU);
02852         <span class="keywordflow">if</span> (hSysMenu == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
02853             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
02854         }
02855     }
02856 
02857 
02858     <span class="comment">// The window got created ok: now restore the current maximized window</span>
02859     <span class="comment">// so we can maximize ourself in its place.</span>
02860     hwndPrevMaxed = <a class="code" href="../../d6/d0/usercli_8h.html#a271">MAXED</a>(pmdi);
02861     <span class="keywordflow">if</span> (fVisible &amp;&amp; <a class="code" href="../../d3/d9/client_2wow_8c.html#a11">IsWindow</a>(hwndPrevMaxed))
02862     {
02863         <span class="keywordflow">if</span> (psc-&gt;style &amp; WS_MAXIMIZE)
02864             <a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(hwndPrevMaxed, WM_SETREDRAW, (WPARAM)FALSE, 0L);
02865 
02866         <span class="comment">// we could nuke the hwndPrevMaxed during the SendMessage32</span>
02867         <span class="comment">// so recheck just in case, B#11122, [t-arthb]</span>
02868 
02869         <span class="keywordflow">if</span> ( <a class="code" href="../../d3/d9/client_2wow_8c.html#a11">IsWindow</a>(hwndPrevMaxed) )
02870         {
02871             <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a209">NtUserMinMaximize</a>(hwndPrevMaxed, SW_SHOWNORMAL, TRUE);
02872 
02873             <span class="keywordflow">if</span> ( psc-&gt;style &amp; WS_MAXIMIZE )
02874                <a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(hwndPrevMaxed, WM_SETREDRAW, (WPARAM)TRUE, 0L);
02875         }
02876 
02877     }
02878 
02879     <span class="comment">// Set the proper Child Window ID for this MDI child.</span>
02880     psc-&gt;hMenu = (HMENU)UIntToPtr( (<a class="code" href="../../d6/d0/usercli_8h.html#a274">FIRST</a>(pmdi) + <a class="code" href="../../d6/d0/usercli_8h.html#a270">CKIDS</a>(pmdi)) );
02881 
02882     *phSysMenu = hSysMenu;
02883 
02884     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
02885 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a650" doxytag="usercli.h::CreateMenuFromResource" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HMENU CreateMenuFromResource           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">LPBYTE&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d8/clmenu_8c-source.html#l00319">319</a> of file <a class="el" href="../../d0/d8/clmenu_8c-source.html">clmenu.c</a>.
<p>
References <a class="el" href="../../d0/d8/clmenu_8c-source.html#l00176">MenuLoadChicagoTemplates()</a>, <a class="el" href="../../d0/d8/clmenu_8c-source.html#l00029">MenuLoadWinTemplates()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>.
<p>
Referenced by <a class="el" href="../../d0/d8/clmenu_8c-source.html#l00378">CommonLoadMenu()</a>, and <a class="el" href="../../d5/d8/clres_8c-source.html#l04250">WowServerLoadCreateMenu()</a>.
<p>
<pre class="fragment"><div>00321 {
00322     HMENU hMenu = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00323     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> menuTemplateVersion;
00324     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> menuTemplateHeaderSize;
00325 
00326     <span class="comment">/*</span>
00327 <span class="comment">     * Win3 menu resource: First, strip version number word out of the menu</span>
00328 <span class="comment">     * template.  This value should be 0 for Win3, 1 for win4.</span>
00329 <span class="comment">     */</span>
00330     menuTemplateVersion = *((WORD *)lpMenuTemplate)++;
00331     <span class="keywordflow">if</span> (menuTemplateVersion &gt; 1) {
00332         RIPMSG0(RIP_WARNING, <span class="stringliteral">"Menu Version number &gt; 1"</span>);
00333         <span class="keywordflow">return</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00334     }
00335     menuTemplateHeaderSize = *((WORD *)lpMenuTemplate)++;
00336     lpMenuTemplate += menuTemplateHeaderSize;
00337     <span class="keywordflow">switch</span> (menuTemplateVersion) {
00338     <span class="keywordflow">case</span> 0:
00339         <a class="code" href="../../d9/d8/clmenu_8c.html#a0">MenuLoadWinTemplates</a>(lpMenuTemplate, &amp;hMenu);
00340         <span class="keywordflow">break</span>;
00341 
00342     <span class="keywordflow">case</span> 1:
00343         <a class="code" href="../../d9/d8/clmenu_8c.html#a1">MenuLoadChicagoTemplates</a>((PMENUITEMTEMPLATE2)lpMenuTemplate, &amp;hMenu, 0, 0);
00344         <span class="keywordflow">break</span>;
00345     }
00346     <span class="keywordflow">return</span> hMenu;
00347 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a411" doxytag="usercli.h::CsValidateInstance" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> PVOID CsValidateInstance           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HANDLE&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hInst</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a460" doxytag="usercli.h::DbcsCombine" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> WORD DbcsCombine           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WORD&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d3/editec_8c-source.html#l04109">4109</a> of file <a class="el" href="../../d9/d3/editec_8c-source.html">editec.c</a>.
<p>
References <a class="el" href="../../d3/d0/userexts_8c-source.html#l01830">msg</a>.
<p>
Referenced by <a class="el" href="../../d2/d3/combo_8c-source.html#l00104">ComboBoxDBCharHandler()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l02531">MLChar()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l01304">SLChar()</a>, and <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02948">xxxLBoxCtlCharInput()</a>.
<p>
<pre class="fragment"><div>04110 {
04111     MSG <a class="code" href="../../d2/d1/userexts_8c.html#a129">msg</a>;
04112     <span class="keywordtype">int</span> i = 10; <span class="comment">/* loop counter to avoid the infinite loop */</span>
04113 
04114     <span class="keywordflow">while</span> (!PeekMessageA(&amp;msg, hwnd, WM_CHAR, WM_CHAR, PM_REMOVE)) {
04115         <span class="keywordflow">if</span> (--i == 0)
04116             <span class="keywordflow">return</span> 0;
04117         Sleep(1);
04118     }
04119 
04120     <span class="keywordflow">return</span> (WORD)ch | ((WORD)(<a class="code" href="../../d2/d1/userexts_8c.html#a129">msg</a>.wParam) &lt;&lt; 8);
04121 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a618" doxytag="usercli.h::DefDlgProcWorker" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LRESULT DefDlgProcWorker           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>msg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>fAnsi</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l00460">460</a> of file <a class="el" href="../../d4/d8/dlgmgr_8c-source.html">dlgmgr.c</a>.
<p>
References <a class="el" href="../../d6/d8/dlgmgr2_8c-source.html#l00749">_FindDlgItem()</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00141">_GetDlgItem()</a>, <a class="el" href="../../d7/d8/dlgmgrc_8c-source.html#l00348">_GetNextDlgTabItem()</a>, <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00826">_IsChild()</a>, <a class="el" href="../../d0/d1/mmrtl_8c-source.html#l00221">_MonitorFromRect()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00183">CALLPROC_WOWCHECKPWW_DLG</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d9/d3/w32_2ntuser_2kernel_2random_8c-source.html#l00102">ClearWindowState()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00243">CopyRect</a>, <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00574">DefWindowProcWorker()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02484">DF3DLOOK</a>, <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l00020">DialogLookaside</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02824">DLGF_ANSI</a>, <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l00152">DlgSetFocus()</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01580">FillWindow</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00794">FNID_COMBOBOX</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00787">FNID_DESKTOP</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00796">FNID_DIALOG</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00838">FNID_STATUS_BITS</a>, <a class="el" href="../../d2/d1/rtlinit_8c-source.html#l00344">FreeLookasideEntry()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01265">FWINABLE</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00158">GetDlgItem()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00843">GETFNID</a>, <a class="el" href="../../d4/d7/winmgrc_8c-source.html#l00090">GetFocus()</a>, <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l00043">GetParentDialog()</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00655">GetWindowRect()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01514">HW</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01515">HWq</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00591">IS_IME_ENABLED</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00598">IS_MIDEAST_ENABLED</a>, <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l00024">IsInForegroundQueue</a>, <a class="el" href="../../d7/d3/msgbox_8c-source.html#l01866">MB_DlgProcA()</a>, <a class="el" href="../../d7/d3/msgbox_8c-source.html#l01875">MB_DlgProcW()</a>, <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00354">NotifyWinEvent()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04602">NtUserCallHwndParam()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01564">NtUserMessageBeep</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01572">NtUserSetCursorPos</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l07777">NtUserSetThreadState()</a>, <a class="el" href="../../d1/d9/ntuser_8h-source.html#l00964">NtUserSetWindowLongPtr</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l02180">NtUserSetWindowPos()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01576">NtUserShowCursor</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d0/d0/client_2nt6_2user_8h.html#a1088">PDIALOG</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02819">PDLG</a>, <a class="el" href="../../d1/d7/ntcftxt_8h-source.html#l00427">PostMessage()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01072">PUSIF_SNAPTO</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l03022">QF_DIALOGACTIVE</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01838">tagWND::rcWindow</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00215">REBASEPWND</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l02783">ReleaseEditDS()</a>, <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l01363">RepositionRect()</a>, <a class="el" href="../../d6/d7/resizedlg_8cpp-source.html#l00037">ResizeDlgMessage()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00194">RevalidateHwnd</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00652">SendMessage()</a>, <a class="el" href="../../d9/d3/w32_2ntuser_2kernel_2random_8c-source.html#l00083">SetWindowState()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01076">TEST_PUSIF</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00362">ThreadLock</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00363">ThreadLockAlways</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00366">ThreadUnlock</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00227">VALIDATECLASSANDSIZE</a>, <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l00192">ValidateDialogPwnd()</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00120">ValidateHwnd</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00047">ValidateHwndNoRip()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02377">WEFCONTROLPARENT</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02282">WFDIALOGWINDOW</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02418">WFDISABLED</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02319">WFWIN40COMPAT</a>, <a class="el" href="../../d6/d8/dlgmgr2_8c-source.html#l00084">xxxCheckDefPushButton()</a>, <a class="el" href="../../d5/d8/nt6_2dlgmgr_8c-source.html#l00116">xxxRestoreDlgFocus()</a>, and <a class="el" href="../../d5/d8/nt6_2dlgmgr_8c-source.html#l00089">xxxSaveDlgFocus()</a>.
<p>
Referenced by <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l01014">DefDlgProcA()</a>, and <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l00999">DefDlgProcW()</a>.
<p>
<pre class="fragment"><div>00466 {
00467     HWND hwnd = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(pwnd);
00468     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpwndT1, tlpwndT2, tlpwndT3, tlpwndTop;
00469     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwndT;
00470     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwndT1, pwndT2, pwndT3, pwndTop;
00471     HWND hwndT1;
00472     LRESULT result;
00473     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fSetBit;
00474     DLGPROC pfn;
00475 
00476     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pwnd);
00477 
00478     <span class="comment">/*</span>
00479 <span class="comment">     * use the Win 3.1 documented size</span>
00480 <span class="comment">     */</span>
00481     <a class="code" href="../../d6/d0/usercli_8h.html#a28">VALIDATECLASSANDSIZE</a>(pwnd, FNID_DIALOG);
00482 
00483     <span class="comment">/*</span>
00484 <span class="comment">     * Must do special validation here to make sure pwnd is a dialog window.</span>
00485 <span class="comment">     */</span>
00486     <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d0/usercli_8h.html#a761">ValidateDialogPwnd</a>(pwnd))
00487         <span class="keywordflow">return</span> 0;
00488 
00489     <span class="keywordflow">if</span> (((<a class="code" href="../../d4/d5/struct__DIALOG.html">PDIALOG</a>)pwnd)-&gt;resultWP != 0)
00490         <a class="code" href="../../d0/d0/ntuser_8h.html#a3">NtUserSetWindowLongPtr</a>(hwnd, DWLP_MSGRESULT, 0, FALSE);
00491     result = 0;   <span class="comment">// no dialog proc</span>
00492 
00493     <span class="keywordflow">if</span> (message == WM_FINALDESTROY) {
00494         <span class="keywordflow">goto</span> DoCleanup;
00495     }
00496 
00497     <span class="keywordflow">if</span> ((pfn = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a793">PDLG</a>(pwnd)-&gt;lpfnDlg) != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00498         <span class="comment">/* Bug 234292 - joejo</span>
00499 <span class="comment">         * Since the called window/dialog proc may have a different calling</span>
00500 <span class="comment">         * convention, we must wrap the call and, check esp and replace with</span>
00501 <span class="comment">         * a good esp when the call returns. This is what UserCallWinProc* does.</span>
00502 <span class="comment">        */</span>
00503         result =  <a class="code" href="../../d6/d0/usercli_8h.html#a18">CALLPROC_WOWCHECKPWW_DLG</a>(pfn, hwnd, message, wParam, lParam, &amp;(pwnd-&gt;state));
00504         
00505         <span class="comment">/*</span>
00506 <span class="comment">         * Get out if the window was destroyed in the dialog proc.</span>
00507 <span class="comment">         */</span>
00508         <span class="keywordflow">if</span> ((<a class="code" href="../../d6/d0/usercli_8h.html#a21">RevalidateHwnd</a>(hwnd)==<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) || (pwnd-&gt;fnid &amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a228">FNID_STATUS_BITS</a>))
00509             <span class="keywordflow">return</span> result;
00510     }
00511 
00512     <span class="comment">/*</span>
00513 <span class="comment">     * SPECIAL CASED ... and DOCUMENTED that way !!!</span>
00514 <span class="comment">     * These 6, and ONLY these 6, should be hacked in this fashion.</span>
00515 <span class="comment">     * Anybody who needs the REAL return value to a message should</span>
00516 <span class="comment">     * use SetDlgMsgResult in WINDOWSX.H</span>
00517 <span class="comment">     */</span>
00518 
00519     <span class="keywordflow">switch</span> (message)
00520     {
00521         <span class="keywordflow">case</span> WM_COMPAREITEM:
00522         <span class="keywordflow">case</span> WM_VKEYTOITEM:
00523         <span class="keywordflow">case</span> WM_CHARTOITEM:
00524         <span class="keywordflow">case</span> WM_INITDIALOG:
00525         <span class="keywordflow">case</span> WM_QUERYDRAGICON:
00526             <span class="keywordflow">return</span> ((LRESULT)(<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)result);
00527 
00528         <span class="keywordflow">case</span> WM_CTLCOLOR:
00529         <span class="keywordflow">case</span> WM_CTLCOLORMSGBOX:
00530         <span class="keywordflow">case</span> WM_CTLCOLOREDIT:
00531         <span class="keywordflow">case</span> WM_CTLCOLORLISTBOX:
00532         <span class="keywordflow">case</span> WM_CTLCOLORBTN:
00533         <span class="keywordflow">case</span> WM_CTLCOLORDLG:
00534         <span class="keywordflow">case</span> WM_CTLCOLORSCROLLBAR:
00535         <span class="keywordflow">case</span> WM_CTLCOLORSTATIC:
00536             <span class="comment">// QuarkXPress doesn't like finding the WM_CTLCOLOR result in</span>
00537             <span class="comment">// resultWP -- we should never be setting resultWP -- that's meant</span>
00538             <span class="comment">// as a pass-thru return value -- so let's go back to doing it the</span>
00539             <span class="comment">// old way -- Win95B B#21269 -- 03/13/95 -- tracysh (cr: jeffbog)</span>
00540             <span class="keywordflow">if</span> (result)
00541                 <span class="keywordflow">return</span> result;
00542             <span class="keywordflow">break</span>;
00543     }
00544 
00545     <span class="keywordflow">if</span> (!result) {
00546 
00547         <span class="comment">/*</span>
00548 <span class="comment">         * Save the result value in case our private memory is freed</span>
00549 <span class="comment">         * before we return</span>
00550 <span class="comment">         */</span>
00551 <span class="comment">//        result = PDLG(pwnd)-&gt;resultWP;</span>
00552 
00553         <span class="keywordflow">switch</span> (message) {
00554         <span class="keywordflow">case</span> WM_CTLCOLOR:
00555         <span class="keywordflow">case</span> WM_CTLCOLORMSGBOX:
00556         <span class="keywordflow">case</span> WM_CTLCOLOREDIT:
00557         <span class="keywordflow">case</span> WM_CTLCOLORLISTBOX:
00558         <span class="keywordflow">case</span> WM_CTLCOLORBTN:
00559         <span class="keywordflow">case</span> WM_CTLCOLORDLG:
00560         <span class="keywordflow">case</span> WM_CTLCOLORSCROLLBAR:
00561         <span class="keywordflow">case</span> WM_CTLCOLORSTATIC:
00562         {
00563             <span class="comment">//</span>
00564             <span class="comment">// HACK OF DEATH:</span>
00565             <span class="comment">// To get 3D colors for non 4.0 apps who use 3DLOOK,</span>
00566             <span class="comment">// we temporarily add on the 4.0 compat bit, pass this</span>
00567             <span class="comment">// down to DWP, and clear it.</span>
00568             <span class="comment">//</span>
00569             <span class="comment">// Use "result" var for bool saying we have to add/clear 4.0</span>
00570             <span class="comment">// compat bit.</span>
00571 
00572             fSetBit = (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, DF3DLOOK)!= 0) &amp;&amp;
00573                      (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFWIN40COMPAT) == 0);
00574 
00575             <span class="keywordflow">if</span> (fSetBit)
00576                 <a class="code" href="../../d4/d1/userk_8h.html#a1628">SetWindowState</a>(pwnd, WFWIN40COMPAT);
00577 
00578             result = <a class="code" href="../../d6/d0/usercli_8h.html#a610">DefWindowProcWorker</a>(pwnd, message,
00579                     wParam, lParam, fAnsi);
00580 
00581             <span class="keywordflow">if</span> (fSetBit)
00582                 <a class="code" href="../../d4/d1/userk_8h.html#a1629">ClearWindowState</a>(pwnd, WFWIN40COMPAT);
00583             <span class="keywordflow">return</span> result;
00584         }
00585 
00586         <span class="keywordflow">case</span> WM_ERASEBKGND:
00587             <a class="code" href="../../d6/d0/usercli_8h.html#a234">FillWindow</a>(hwnd, hwnd, (HDC)wParam, (HBRUSH)CTLCOLOR_DLG);
00588             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00589 
00590         <span class="keywordflow">case</span> WM_SHOWWINDOW:
00591 
00592             <span class="comment">/*</span>
00593 <span class="comment">             * If hiding the window, save the focus.  If showing the window</span>
00594 <span class="comment">             * by means of a SW_* command and the fEnd bit is set, do not</span>
00595 <span class="comment">             * pass to DWP so it won't get shown.</span>
00596 <span class="comment">             */</span>
00597             <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a755">GetParentDialog</a>(pwnd) == pwnd) {
00598                 <span class="keywordflow">if</span> (!wParam) {
00599                     <a class="code" href="../../d4/d9/nt6_2dlgmgr_8c.html#a8">xxxSaveDlgFocus</a>(pwnd);
00600                 } <span class="keywordflow">else</span> {
00601 
00602                     <span class="keywordflow">if</span> (LOWORD(lParam) != 0 &amp;&amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a793">PDLG</a>(pwnd)-&gt;fEnd)
00603                         <span class="keywordflow">break</span>;
00604 
00605                     <span class="comment">/*</span>
00606 <span class="comment">                     * Snap the cursor to the center of the default button.</span>
00607 <span class="comment">                     * Only do this if the current thread is in the foreground.</span>
00608 <span class="comment">                     * The _ShowCursor() code is added to work around a</span>
00609 <span class="comment">                     * problem with hardware cursors.  If change is done</span>
00610 <span class="comment">                     * in the same refresh cycle, the display of the cursor</span>
00611 <span class="comment">                     * would not reflect the new position.</span>
00612 <span class="comment">                     */</span>
00613                     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a368">TEST_PUSIF</a>(PUSIF_SNAPTO) &amp;&amp;
00614                             <a class="code" href="../../d3/d9/dlgmgr_8c.html#a1">IsInForegroundQueue</a>(hwnd)) {
00615                         hwndT1 = <a class="code" href="../../d3/d9/client_2wow_8c.html#a6">GetDlgItem</a>(hwnd, (<span class="keywordtype">int</span>)<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a793">PDLG</a>(pwnd)-&gt;result);
00616                         <span class="keywordflow">if</span> (hwndT1) {
00617                             RECT rc;
00618 
00619                             <a class="code" href="../../d6/d0/usercli_8h.html#a231">NtUserShowCursor</a>(FALSE);
00620 
00621                             <a class="code" href="../../d3/d9/client_2wow_8c.html#a26">GetWindowRect</a>(hwndT1, &amp;rc);
00622                             <a class="code" href="../../d6/d0/usercli_8h.html#a227">NtUserSetCursorPos</a>(rc.left + ((rc.right - rc.left)/2),
00623                                          rc.top + ((rc.bottom - rc.top)/2));
00624 
00625                             <a class="code" href="../../d6/d0/usercli_8h.html#a231">NtUserShowCursor</a>(TRUE);
00626                         }
00627                     }
00628                 }
00629             }
00630             <span class="keywordflow">goto</span> CallDWP;
00631 
00632         <span class="keywordflow">case</span> WM_SYSCOMMAND:
00633             <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a755">GetParentDialog</a>(pwnd) == pwnd) {
00634                 <span class="comment">/*</span>
00635 <span class="comment">                 * If hiding the window, save the focus.  If showing the window</span>
00636 <span class="comment">                 * by means of a SW_* command and the fEnd bit is set, do not</span>
00637 <span class="comment">                 * pass to DWP so it won't get shown.</span>
00638 <span class="comment">                 */</span>
00639                 <span class="keywordflow">if</span> ((<span class="keywordtype">int</span>)wParam == SC_MINIMIZE)
00640                     <a class="code" href="../../d4/d9/nt6_2dlgmgr_8c.html#a8">xxxSaveDlgFocus</a>(pwnd);
00641             }
00642             <span class="keywordflow">goto</span> CallDWP;
00643 
00644         <span class="keywordflow">case</span> WM_ACTIVATE:
00645             pwndT1 = <a class="code" href="../../d6/d0/usercli_8h.html#a755">GetParentDialog</a>(pwnd);
00646             <span class="keywordflow">if</span> ( pwndT1 != pwnd) {
00647 
00648                 <span class="comment">/*</span>
00649 <span class="comment">                 * This random bit is used during key processing - bit</span>
00650 <span class="comment">                 * 08000000 of WM_CHAR messages is set if a dialog is currently</span>
00651 <span class="comment">                 * active.</span>
00652 <span class="comment">                 */</span>
00653                 <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a286">NtUserSetThreadState</a>(wParam ? QF_DIALOGACTIVE : 0, QF_DIALOGACTIVE);
00654             }
00655 
00656             <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(pwndT1, &amp;tlpwndT1);
00657             <span class="keywordflow">if</span> (wParam != 0)
00658                 <a class="code" href="../../d4/d9/nt6_2dlgmgr_8c.html#a9">xxxRestoreDlgFocus</a>(pwndT1);
00659             <span class="keywordflow">else</span>
00660                 <a class="code" href="../../d4/d9/nt6_2dlgmgr_8c.html#a8">xxxSaveDlgFocus</a>(pwndT1);
00661 
00662             <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndT1);
00663             <span class="keywordflow">break</span>;
00664 
00665         <span class="keywordflow">case</span> WM_SETFOCUS:
00666             pwndT1 = <a class="code" href="../../d6/d0/usercli_8h.html#a755">GetParentDialog</a>(pwnd);
00667             <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a793">PDLG</a>(pwndT1)-&gt;fEnd &amp;&amp; !<a class="code" href="../../d4/d9/nt6_2dlgmgr_8c.html#a9">xxxRestoreDlgFocus</a>(pwndT1)) {
00668 
00669                 pwndT = <a class="code" href="../../d6/d0/usercli_8h.html#a642">_GetNextDlgTabItem</a>(pwndT1, NULL, FALSE);
00670                 <a class="code" href="../../d6/d0/usercli_8h.html#a759">DlgSetFocus</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a450">HW</a>(pwndT));
00671             }
00672             <span class="keywordflow">break</span>;
00673 
00674         <span class="keywordflow">case</span> WM_CLOSE:
00675             <span class="comment">/*</span>
00676 <span class="comment">             * Make sure cancel button is not disabled before sending the</span>
00677 <span class="comment">             * IDCANCEL.  Note that we need to do this as a message instead</span>
00678 <span class="comment">             * of directly calling the dlg proc so that any dialog box</span>
00679 <span class="comment">             * filters get this.</span>
00680 <span class="comment">             */</span>
00681             pwndT1 = <a class="code" href="../../d3/d9/client_2wow_8c.html#a5">_GetDlgItem</a>(pwnd, IDCANCEL);
00682             <span class="keywordflow">if</span> (pwndT1 &amp;&amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwndT1, WFDISABLED))
00683                 <a class="code" href="../../d6/d0/usercli_8h.html#a219">NtUserMessageBeep</a>(0);
00684             <span class="keywordflow">else</span>
00685                 <a class="code" href="../../d0/d8/ntcftxt_8h.html#a20">PostMessage</a>(hwnd, WM_COMMAND, MAKELONG(IDCANCEL, BN_CLICKED),
00686                         (LPARAM)<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a450">HW</a>(pwndT1));
00687             <span class="keywordflow">break</span>;
00688 
00689         <span class="keywordflow">case</span> WM_NCDESTROY:
00690         <span class="keywordflow">case</span> WM_FINALDESTROY:
00691 DoCleanup:
00692             <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a286">NtUserSetThreadState</a>(0, QF_DIALOGACTIVE);
00693             <span class="keywordflow">if</span> (!(pwnd-&gt;style &amp; DS_LOCALEDIT)) {
00694                 <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a793">PDLG</a>(pwnd)-&gt;hData) {
00695                     <a class="code" href="../../d6/d0/usercli_8h.html#a764">ReleaseEditDS</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a793">PDLG</a>(pwnd)-&gt;hData);
00696                     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a793">PDLG</a>(pwnd)-&gt;hData = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00697                 }
00698             }
00699 
00700             <span class="comment">/*</span>
00701 <span class="comment">             * Delete the user defined font if any</span>
00702 <span class="comment">             */</span>
00703             <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a793">PDLG</a>(pwnd)-&gt;hUserFont) {
00704                 DeleteObject(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a793">PDLG</a>(pwnd)-&gt;hUserFont);
00705                 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a793">PDLG</a>(pwnd)-&gt;hUserFont = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00706             }
00707 
00708             <span class="comment">/*</span>
00709 <span class="comment">             * Free the dialog memory and mark this as a non-dialog window</span>
00710 <span class="comment">             */</span>
00711             <a class="code" href="../../d6/d0/usercli_8h.html#a408">FreeLookasideEntry</a>(&amp;DialogLookaside, <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a793">PDLG</a>(pwnd));
00712             <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a178">NtUserCallHwndParam</a>(hwnd, 0, SFI_SETDIALOGPOINTER);
00713             <span class="keywordflow">break</span>;
00714 
00715         <span class="keywordflow">case</span> DM_REPOSITION:
00716             {
00717                 RECT        rc;
00718                 <a class="code" href="../../d0/d2/structtagMONITOR.html">PMONITOR</a>    pMonitor;
00719 
00720                 <span class="comment">// DAT recorder APP sends it's own private message 0x402</span>
00721                 <span class="comment">// through and we mistake it to be DM_REPOSITION. To avoid</span>
00722                 <span class="comment">// this confusion, we do the following check.</span>
00723                 <span class="comment">// Fix for Bug#25747 -- 9/29/94 --</span>
00724                 <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WEFCONTROLPARENT) ||
00725                     (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a232">GETFNID</a>(pwnd) != <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a196">FNID_DESKTOP</a> &amp;&amp;
00726                      <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a232">GETFNID</a>(<a class="code" href="../../d6/d0/usercli_8h.html#a27">REBASEPWND</a>(pwnd, spwndParent)) != <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a196">FNID_DESKTOP</a>)) {
00727 
00728                     <span class="keywordflow">goto</span> CallDWP;
00729                 }
00730 
00731                 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a33">CopyRect</a>(&amp;rc, &amp;pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o6">rcWindow</a>);
00732                 pMonitor = <a class="code" href="../../d9/d1/mmrtl_8c.html#a7">_MonitorFromRect</a>(&amp;rc, MONITOR_DEFAULTTOPRIMARY);
00733                 <a class="code" href="../../d6/d0/usercli_8h.html#a760">RepositionRect</a>(pMonitor, &amp;rc, pwnd-&gt;style, pwnd-&gt;ExStyle);
00734                 <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a115">NtUserSetWindowPos</a>(hwnd, HWND_TOP, rc.left, rc.top,
00735                              rc.right-rc.left, rc.bottom-rc.top,
00736                              SWP_NOZORDER | SWP_NOSIZE | SWP_NOACTIVATE);
00737             }
00738             <span class="keywordflow">break</span>;
00739 
00740         <span class="keywordflow">case</span> DM_SETDEFID:
00741             pwndT1 = <a class="code" href="../../d6/d0/usercli_8h.html#a755">GetParentDialog</a>(pwnd);
00742             <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(pwndT1, &amp;tlpwndT1);
00743 
00744             <span class="keywordflow">if</span> (!(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a793">PDLG</a>(pwndT1)-&gt;fEnd)) {
00745 
00746                 pwndT2 = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00747                 <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a793">PDLG</a>(pwndT1)-&gt;result != 0)
00748                     pwndT2 = <a class="code" href="../../d6/d0/usercli_8h.html#a752">_FindDlgItem</a>(pwndT1, (<span class="keywordtype">int</span>)<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a793">PDLG</a>(pwndT1)-&gt;result);
00749 
00750                 pwndT3 = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00751                 <span class="keywordflow">if</span> (wParam != 0) {
00752                     pwndT3 = <a class="code" href="../../d3/d9/client_2wow_8c.html#a5">_GetDlgItem</a>(pwnd, (UINT)wParam);
00753                 }
00754 
00755                 <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(pwndT2, &amp;tlpwndT2);
00756                 <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(pwndT3, &amp;tlpwndT3);
00757 
00758                 <a class="code" href="../../d6/d0/usercli_8h.html#a757">xxxCheckDefPushButton</a>(pwndT1, <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a450">HW</a>(pwndT2), <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a450">HW</a>(pwndT3));
00759 
00760                 <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndT3);
00761                 <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndT2);
00762 
00763                 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a793">PDLG</a>(pwndT1)-&gt;result = (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)wParam;
00764 <span class="comment">//                if (PDLG(pwnd)-&gt;spwndFocusSave) {</span>
00765 <span class="comment">//                    Lock(&amp;(PDLG(pwnd)-&gt;spwndFocusSave), pwndT2);</span>
00766 <span class="comment">//                }</span>
00767 
00768                 <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a405">FWINABLE</a>()) {
00769                     <a class="code" href="../../d8/d9/client_2ntstubs_8c.html#a12">NotifyWinEvent</a>(EVENT_OBJECT_DEFACTIONCHANGE, <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a450">HW</a>(pwndT1), OBJID_CLIENT, INDEXID_CONTAINER);
00770                 }
00771             }
00772             <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndT1);
00773             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00774 
00775         <span class="keywordflow">case</span> DM_GETDEFID:
00776             pwndT1 = <a class="code" href="../../d6/d0/usercli_8h.html#a755">GetParentDialog</a>(pwnd);
00777 
00778             <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a793">PDLG</a>(pwndT1)-&gt;fEnd &amp;&amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a793">PDLG</a>(pwndT1)-&gt;result)
00779                 <span class="keywordflow">return</span>(MAKELONG(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a793">PDLG</a>(pwndT1)-&gt;result, DC_HASDEFID));
00780             <span class="keywordflow">else</span>
00781                 <span class="keywordflow">return</span> 0;
00782             <span class="keywordflow">break</span>;
00783 
00784         <span class="comment">/*</span>
00785 <span class="comment">         * This message was added so that user defined controls that want</span>
00786 <span class="comment">         * tab keys can pass the tab off to the next/previous control in the</span>
00787 <span class="comment">         * dialog box.  Without this, all they could do was set the focus</span>
00788 <span class="comment">         * which didn't do the default button stuff.</span>
00789 <span class="comment">         */</span>
00790         <span class="keywordflow">case</span> WM_NEXTDLGCTL:
00791             pwndTop = <a class="code" href="../../d6/d0/usercli_8h.html#a755">GetParentDialog</a>(pwnd);
00792             <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(pwndTop, &amp;tlpwndTop);
00793 
00794             hwndT1 = <a class="code" href="../../d3/d8/winmgrc_8c.html#a11">GetFocus</a>();
00795             pwndT2 = <a class="code" href="../../d3/d9/client_2wow_8c.html#a1">ValidateHwndNoRip</a>(hwndT1);
00796             <span class="keywordflow">if</span> (LOWORD(lParam)) {
00797                 <span class="keywordflow">if</span> (pwndT2 == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00798                     pwndT2 = pwndTop;
00799 
00800                 <span class="comment">/*</span>
00801 <span class="comment">                 * wParam contains the pwnd of the ctl to set focus to.</span>
00802 <span class="comment">                 */</span>
00803                 <span class="keywordflow">if</span> ((pwndT1 = <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>((HWND)wParam)) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00804                     <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndTop);
00805                     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00806                 }
00807             } <span class="keywordflow">else</span> {
00808                 <span class="keywordflow">if</span> (pwndT2 == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00809 
00810                     <span class="comment">/*</span>
00811 <span class="comment">                     * Set focus to the first tab item.</span>
00812 <span class="comment">                     */</span>
00813                     pwndT1 = <a class="code" href="../../d6/d0/usercli_8h.html#a642">_GetNextDlgTabItem</a>(pwndTop, NULL, FALSE);
00814                     pwndT2 = pwndTop;
00815                 } <span class="keywordflow">else</span> {
00816 
00817                     <span class="comment">/*</span>
00818 <span class="comment">                     * If window with focus not a dlg ctl, ignore message.</span>
00819 <span class="comment">                     */</span>
00820                     <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d9/rtl_2wow_8c.html#a16">_IsChild</a>(pwndTop, pwndT2)) {
00821                         <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndTop);
00822                         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00823                     }
00824                     <span class="comment">/*</span>
00825 <span class="comment">                     * wParam = TRUE for previous, FALSE for next</span>
00826 <span class="comment">                     */</span>
00827                     pwndT1 = <a class="code" href="../../d6/d0/usercli_8h.html#a642">_GetNextDlgTabItem</a>(pwndTop, pwndT2, (wParam != 0));
00828 
00829                     <span class="comment">/*</span>
00830 <span class="comment">                     * If there is no next item, ignore the message.</span>
00831 <span class="comment">                     */</span>
00832                     <span class="keywordflow">if</span> (pwndT1 == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00833                         <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndTop);
00834                         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00835                     }
00836                 }
00837             }
00838 
00839             <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(pwndT1, &amp;tlpwndT1);
00840             <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(pwndT2, &amp;tlpwndT2);
00841 
00842             <a class="code" href="../../d6/d0/usercli_8h.html#a759">DlgSetFocus</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a450">HW</a>(pwndT1));
00843             <a class="code" href="../../d6/d0/usercli_8h.html#a757">xxxCheckDefPushButton</a>(pwndTop, <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a450">HW</a>(pwndT2), <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a450">HW</a>(pwndT1));
00844 
00845             <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndT2);
00846             <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndT1);
00847             <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndTop);
00848 
00849             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00850 
00851         <span class="keywordflow">case</span> WM_ENTERMENULOOP:
00852 
00853             <span class="comment">/*</span>
00854 <span class="comment">             * We need to pop up the combo box window if the user brings</span>
00855 <span class="comment">             * down a menu.</span>
00856 <span class="comment">             *</span>
00857 <span class="comment">             * ...  FALL THROUGH...</span>
00858 <span class="comment">             */</span>
00859 
00860         <span class="keywordflow">case</span> WM_LBUTTONDOWN:
00861         <span class="keywordflow">case</span> WM_NCLBUTTONDOWN:
00862             hwndT1 = <a class="code" href="../../d3/d8/winmgrc_8c.html#a11">GetFocus</a>();
00863             <span class="keywordflow">if</span> (hwndT1 != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00864                 pwndT1 = <a class="code" href="../../d3/d9/client_2wow_8c.html#a1">ValidateHwndNoRip</a>(hwndT1);
00865 
00866                 <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a232">GETFNID</a>(pwndT1) == <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a201">FNID_COMBOBOX</a>) {
00867 
00868                     <span class="comment">/*</span>
00869 <span class="comment">                     * If user clicks anywhere in dialog box and a combo box (or</span>
00870 <span class="comment">                     * the editcontrol of a combo box) has the focus, then hide</span>
00871 <span class="comment">                     * it's listbox.</span>
00872 <span class="comment">                     */</span>
00873                     <a class="code" href="../../d6/d0/usercli_8h.html#a37">ThreadLockAlways</a>(pwndT1, &amp;tlpwndT1);
00874                     <a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(pwndT1), CB_SHOWDROPDOWN, FALSE, 0);
00875                     <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndT1);
00876 
00877                 } <span class="keywordflow">else</span> {
00878                     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwndParent;
00879 
00880                     <span class="comment">/*</span>
00881 <span class="comment">                     * It's a subclassed combo box.  See if the listbox and edit</span>
00882 <span class="comment">                     * boxes exist (this is a very cheezy evaluation - what if</span>
00883 <span class="comment">                     * these controls are subclassed too? NOTE: Not checking</span>
00884 <span class="comment">                     * for EditWndProc: it's a client proc address.</span>
00885 <span class="comment">                     */</span>
00886                     pwndParent = <a class="code" href="../../d6/d0/usercli_8h.html#a27">REBASEPWND</a>(pwndT1, spwndParent);
00887                     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a232">GETFNID</a>(pwndParent) == <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a201">FNID_COMBOBOX</a>) {
00888                         pwndT1 = pwndParent;
00889                         <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(pwndT1, &amp;tlpwndT1);
00890                         <a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(pwndT1), CB_SHOWDROPDOWN, FALSE, 0);
00891                         <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndT1);
00892                     }
00893                 }
00894             }
00895 
00896             <span class="comment">/*</span>
00897 <span class="comment">             * Always send the message off to DefWndProc</span>
00898 <span class="comment">             */</span>
00899             <span class="keywordflow">goto</span> CallDWP;
00900 
00901         <span class="keywordflow">case</span> WM_GETFONT:
00902             <span class="keywordflow">return</span> (LRESULT)<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a793">PDLG</a>(pwnd)-&gt;hUserFont;
00903 
00904         <span class="keywordflow">case</span> WM_VKEYTOITEM:
00905         <span class="keywordflow">case</span> WM_COMPAREITEM:
00906         <span class="keywordflow">case</span> WM_CHARTOITEM:
00907         <span class="keywordflow">case</span> WM_INITDIALOG:
00908 
00909             <span class="comment">/*</span>
00910 <span class="comment">             * We need to return the 0 the app may have returned for these</span>
00911 <span class="comment">             * items instead of calling defwindow proc.</span>
00912 <span class="comment">             */</span>
00913             <span class="keywordflow">return</span> result;
00914 
00915         <span class="keywordflow">case</span> WM_NOTIFYFORMAT:
00916             <span class="keywordflow">if</span> (lParam == NF_QUERY)
00917                 <span class="keywordflow">return</span>((<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a793">PDLG</a>(pwnd)-&gt;flags &amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a794">DLGF_ANSI</a> ) ? NFR_ANSI : NFR_UNICODE);
00918             <span class="keywordflow">return</span> result;
00919 
00920         <span class="keywordflow">case</span> WM_INPUTLANGCHANGEREQUEST:
00921             <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a126">IS_IME_ENABLED</a>() || <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a128">IS_MIDEAST_ENABLED</a>()) {
00922                 <span class="comment">/*</span>
00923 <span class="comment">                 * #115190</span>
00924 <span class="comment">                 * For dialogbox itself, buttons/static controls on top of</span>
00925 <span class="comment">                 * dialogbox, we'll simply discard this message. B#3843-win95c</span>
00926 <span class="comment">                 */</span>
00927                 <span class="keywordflow">break</span>;
00928             }
00929             <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a793">PDLG</a>(pwnd)-&gt;lpfnDlg == <a class="code" href="../../d6/d4/msgbox_8c.html#a32">MB_DlgProcA</a> ||
00930                     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a793">PDLG</a>(pwnd)-&gt;lpfnDlg == <a class="code" href="../../d6/d4/msgbox_8c.html#a33">MB_DlgProcW</a>) {
00931                 <span class="keywordflow">break</span>;
00932             }
00933             <span class="keywordflow">goto</span> CallDWP;
00934 
00935         <span class="keywordflow">default</span>:
00936 CallDWP:
00937             <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a610">DefWindowProcWorker</a>(pwnd, message, wParam, lParam, fAnsi);
00938         }
00939     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((message == WM_SHOWWINDOW) &amp;&amp; result) {
00940 
00941         <span class="comment">/*</span>
00942 <span class="comment">         * For a visible-case we want to snap the cursor regardless of</span>
00943 <span class="comment">         * what was returned from the dialog-handler on the client.  If</span>
00944 <span class="comment">         * we're going visible, snap the cursor to the dialog-button.</span>
00945 <span class="comment">         */</span>
00946         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a755">GetParentDialog</a>(pwnd) == pwnd) {
00947 
00948             <span class="keywordflow">if</span> (wParam &amp;&amp; ((LOWORD(lParam) == 0) || !<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a793">PDLG</a>(pwnd)-&gt;fEnd)) {
00949 
00950                 <span class="comment">/*</span>
00951 <span class="comment">                 * Snap the cursor to the center of the default button.</span>
00952 <span class="comment">                 * Only do this if the current thread is in the foreground.</span>
00953 <span class="comment">                 * The _ShowCursor() code is added to work around a</span>
00954 <span class="comment">                 * problem with hardware cursors.  If change is done</span>
00955 <span class="comment">                 * in the same refresh cycle, the display of the cursor</span>
00956 <span class="comment">                 * would not reflect the new position.</span>
00957 <span class="comment">                 */</span>
00958                 <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a368">TEST_PUSIF</a>(PUSIF_SNAPTO) &amp;&amp;
00959                         <a class="code" href="../../d3/d9/dlgmgr_8c.html#a1">IsInForegroundQueue</a>(hwnd)) {
00960                     hwndT1 = <a class="code" href="../../d3/d9/client_2wow_8c.html#a6">GetDlgItem</a>(hwnd, (<span class="keywordtype">int</span>)<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a793">PDLG</a>(pwnd)-&gt;result);
00961                     <span class="keywordflow">if</span> (hwndT1) {
00962                         RECT rc;
00963 
00964                         <a class="code" href="../../d6/d0/usercli_8h.html#a231">NtUserShowCursor</a>(FALSE);
00965 
00966                         <a class="code" href="../../d3/d9/client_2wow_8c.html#a26">GetWindowRect</a>(hwndT1, &amp;rc);
00967                         <a class="code" href="../../d6/d0/usercli_8h.html#a227">NtUserSetCursorPos</a>(rc.left + ((rc.right - rc.left)/2),
00968                                      rc.top + ((rc.bottom - rc.top)/2));
00969 
00970                         <a class="code" href="../../d6/d0/usercli_8h.html#a231">NtUserShowCursor</a>(TRUE);
00971                     }
00972                 }
00973             }
00974         }
00975     }
00976 
00977 
00978     <span class="comment">/*</span>
00979 <span class="comment">     * If this is still marked as a dialog window then return the real</span>
00980 <span class="comment">     * result. Otherwise, we've already processed the WM_NCDESTROY message</span>
00981 <span class="comment">     * and freed our private memory so return the stored value.</span>
00982 <span class="comment">     */</span>
00983     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFDIALOGWINDOW))
00984         <span class="keywordflow">return</span> KERNEL_LRESULT_TO_LRESULT(((<a class="code" href="../../d4/d5/struct__DIALOG.html">PDIALOG</a>)pwnd)-&gt;resultWP);
00985     <span class="keywordflow">else</span>
00986         <span class="keywordflow">return</span> result;
00987 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a610" doxytag="usercli.h::DefWindowProcWorker" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LRESULT DefWindowProcWorker           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>message</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>fAnsi</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00574">574</a> of file <a class="el" href="../../d1/d8/clmsg_8c-source.html">clmsg.c</a>.
<p>
References <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00924">_GetClientRect()</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00107">_GetDesktopWindow()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d0/d7/halvprnt_8c-source.html#l00031">BYTE</a>, <a class="el" href="../../d2/d0/bench_8c-source.html#l00050">CHAR</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00148">CsSendMessage</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l03470">DO_DROPFILE</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00141">FDEFWINDOWMSG</a>, <a class="el" href="../../d3/d7/rtl_2winmgr_8c-source.html#l00019">FindNCHit()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00788">FNID_DEFWINDOWPROC</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02533">fpImmGetCompositionStringA</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02534">fpImmGetCompositionStringW</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02532">fpImmGetContext</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02536">fpImmGetDefaultIMEWnd</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02539">fpImmReleaseContext</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00143">GET_X_LPARAM</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00147">GET_Y_LPARAM</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01123">GETAPPVER</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02568">GetChildParent</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00192">GetClientInfo</a>, <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00041">GetMouseKeyState()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01547">GETPTI</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00051">gpsi</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l03098">tagIMEUI::hIMC</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01514">HW</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01515">HWq</a>, <a class="el" href="../../d0/d9/imectl_8c-source.html#l00083">ImeWndProcWorker()</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l00463">_LARGE_UNICODE_STRING::Length</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l02393">LoadIconW()</a>, <a class="el" href="../../d6/d3/acpitabl_8h-source.html#l00366">min</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d9/d9/immstruc_8h-source.html#l00025">NULL_HIMC</a>, <a class="el" href="../../d0/d0/client_2nt6_2user_8h.html#a1102">PIMEUI</a>, <a class="el" href="../../d0/d0/client_2nt6_2user_8h.html#a1104">PIMEWND</a>, <a class="el" href="../../d0/d9/clmsg_8c.html#a8">ppos</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01839">tagWND::rcClient</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00213">REBASE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00211">REBASEPTR</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00215">REBASEPWND</a>, <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00839">RtlUnicodeToMultiByteSize()</a>, <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00270">SendMessageWorker()</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l03334">SetTaskmanWindow()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00062">SHORT</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01747">tagWND::spwndOwner</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01745">tagWND::spwndParent</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01855">tagWND::strName</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l00021">SYS_ALTERNATE</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l00236">SYSHBRUSH</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00204">SYSRGB</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01174">TEST_KbdCuesPUSIF</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02561">TestwndChild</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00558">THREAD_CODEPAGE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02851">TIF_DISABLEIME</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01302">tagSERVERINFO::uiShellMsg</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00958">UserLocalAlloc</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00960">UserLocalFree</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00047">ValidateHwndNoRip()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00475">VER40</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02524">WEFPUIACCELHIDDEN</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02523">WEFPUIFOCUSHIDDEN</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02302">WFANSICREATOR</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02415">WFMAXIMIZED</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02420">WFMINIMIZED</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02285">WFSERVERSIDEPROC</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02319">WFWIN40COMPAT</a>, and <a class="el" href="../../d7/d9/usercli_8h-source.html#l02070">WINDOW</a>.
<p>
Referenced by <a class="el" href="../../d9/d0/btnctl_8c-source.html#l01907">ButtonWndProcA()</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l01929">ButtonWndProcW()</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l01338">ButtonWndProcWorker()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l01335">ComboBoxWndProcA()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l01359">ComboBoxWndProcW()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l00207">ComboBoxWndProcWorker()</a>, <a class="el" href="../../d7/d0/lb1_8c-source.html#l00788">ComboListBoxWndProcA()</a>, <a class="el" href="../../d7/d0/lb1_8c-source.html#l00810">ComboListBoxWndProcW()</a>, <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l00460">DefDlgProcWorker()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02101">DefFrameProcWorker()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02531">DefMDIChildProcWorker()</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00629">DefWindowProc()</a>, <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00078">DesktopWndProcWorker()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l03776">ECGetControlBrush()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01337">ECImeComposition()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l00285">ECNcCreate()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02904">EditWndProc()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02787">EditWndProcA()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02808">EditWndProcW()</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00781">GetWindowText()</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00825">GetWindowTextLength()</a>, <a class="el" href="../../d0/d9/imectl_8c-source.html#l00083">ImeWndProcWorker()</a>, <a class="el" href="../../d6/d8/dlgmgr2_8c-source.html#l00317">IsDialogMessageW()</a>, <a class="el" href="../../d7/d0/lb1_8c-source.html#l00744">ListBoxWndProcA()</a>, <a class="el" href="../../d7/d0/lb1_8c-source.html#l00766">ListBoxWndProcW()</a>, <a class="el" href="../../d7/d0/lb1_8c-source.html#l00032">ListBoxWndProcWorker()</a>, <a class="el" href="../../d7/d3/msgbox_8c-source.html#l01648">MB_DlgProcWorker()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01657">MDIClientWndProcWorker()</a>, <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00127">MenuWndProcWorker()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l03457">MLEditWndProc()</a>, <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00187">ScrollBarWndProcWorker()</a>, <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00270">SendMessageWorker()</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00848">SetWindowText()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l02520">SLEditWndProc()</a>, and <a class="el" href="../../d6/d4/statctl_8c-source.html#l00840">StaticWndProcWorker()</a>.
<p>
<pre class="fragment"><div>00580 {
00581     HWND hwnd = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(pwnd);
00582     <span class="keywordtype">int</span> icolBack;
00583     <span class="keywordtype">int</span> icolFore;
00584     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwndParent;
00585     HWND hwndDefIme;
00586     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwndDefIme;
00587     <a class="code" href="../../d4/d8/structtagIMEUI.html">PIMEUI</a> pimeui;
00588 
00589 <span class="preprocessor">#if DBG</span>
00590 <span class="preprocessor"></span>    <span class="keywordflow">if</span> (!gfTurboDWP) {
00591         <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a11">CsSendMessage</a>(hwnd, message, wParam, lParam, 0L,
00592                 FNID_DEFWINDOWPROC, fAnsi);
00593     } <span class="keywordflow">else</span> {
00594 <span class="preprocessor">#endif</span>
00595 <span class="preprocessor"></span>
00596 
00597     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a9">FDEFWINDOWMSG</a>(message, DefWindowMsgs)) {
00598         <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a11">CsSendMessage</a>(hwnd, message, wParam, lParam, 0L,
00599                 FNID_DEFWINDOWPROC, fAnsi);
00600     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d0/usercli_8h.html#a9">FDEFWINDOWMSG</a>(message, DefWindowSpecMsgs)) {
00601         <span class="keywordflow">return</span> 0;
00602     }
00603 
00604     <span class="comment">/*</span>
00605 <span class="comment">     * Important:  If you add cases to the switch statement below,</span>
00606 <span class="comment">     *             add the messages to server.c's gawDefWindowSpecMsgs.</span>
00607 <span class="comment">     *             Similarly if you add cases to dwp.c's DefWindowProc</span>
00608 <span class="comment">     *             which can come from the client, add the messages</span>
00609 <span class="comment">     *             to gawDefWindowMsgs.</span>
00610 <span class="comment">     */</span>
00611 
00612     <span class="keywordflow">switch</span> (message) {
00613 
00614     <span class="keywordflow">case</span> WM_HELP:
00615         {
00616         <a class="code" href="../../d6/d9/structtagWND.html">PWND</a>  pwndDest;
00617 
00618         <span class="comment">/*</span>
00619 <span class="comment">         * If this window is a child window, Help message must be passed on</span>
00620 <span class="comment">         * to it's parent; Else, this must be passed on to the owner window.</span>
00621 <span class="comment">         */</span>
00622         pwndDest = (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a735">TestwndChild</a>(pwnd) ? pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o3">spwndParent</a> : pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o5">spwndOwner</a>);
00623         <span class="keywordflow">if</span> (pwndDest) {
00624             pwndDest = <a class="code" href="../../d6/d0/usercli_8h.html#a25">REBASEPTR</a>(pwnd, pwndDest);
00625             <span class="keywordflow">if</span> (pwndDest != <a class="code" href="../../d3/d9/client_2wow_8c.html#a3">_GetDesktopWindow</a>())
00626                 <span class="keywordflow">return</span> SendMessageW(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(pwndDest), WM_HELP, wParam, lParam);;
00627         }
00628         <span class="keywordflow">return</span>(0<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>);
00629         }
00630 
00631     <span class="keywordflow">case</span> WM_MOUSEWHEEL:
00632         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a735">TestwndChild</a>(pwnd)) {
00633             pwndParent = <a class="code" href="../../d6/d0/usercli_8h.html#a27">REBASEPWND</a>(pwnd, spwndParent);
00634             SendMessageW(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a450">HW</a>(pwndParent), WM_MOUSEWHEEL, wParam, lParam);
00635         }
00636         <span class="keywordflow">break</span>;
00637 
00638     <span class="keywordflow">case</span> WM_CONTEXTMENU:
00639         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a735">TestwndChild</a>(pwnd)) {
00640             pwndParent = <a class="code" href="../../d6/d0/usercli_8h.html#a27">REBASEPWND</a>(pwnd, spwndParent);
00641             SendMessageW(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a450">HW</a>(pwndParent), WM_CONTEXTMENU,
00642                     (WPARAM)hwnd, lParam);
00643         }
00644         <span class="keywordflow">break</span>;
00645 
00646     <span class="comment">/*</span>
00647 <span class="comment">     * Default handling for WM_CONTEXTMENU support</span>
00648 <span class="comment">     */</span>
00649     <span class="keywordflow">case</span> WM_RBUTTONUP:
00650 <span class="preprocessor">#ifdef USE_MIRRORING</span>
00651 <span class="preprocessor"></span>        <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WEFLAYOUTRTL)) {
00652             lParam = MAKELONG(pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o7">rcClient</a>.right - <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a7">GET_X_LPARAM</a>(lParam), <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a8">GET_Y_LPARAM</a>(lParam) + pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o7">rcClient</a>.top);
00653         } <span class="keywordflow">else</span>
00654 <span class="preprocessor">#endif</span>
00655 <span class="preprocessor"></span>        {
00656             lParam = MAKELONG(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a7">GET_X_LPARAM</a>(lParam) + pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o7">rcClient</a>.left, <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a8">GET_Y_LPARAM</a>(lParam) + pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o7">rcClient</a>.top);
00657         }
00658         <a class="code" href="../../d6/d0/usercli_8h.html#a600">SendMessageWorker</a>(pwnd, WM_CONTEXTMENU, (WPARAM)hwnd, lParam, fAnsi);
00659         <span class="keywordflow">break</span>;
00660 
00661     <span class="keywordflow">case</span> WM_APPCOMMAND:
00662         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a735">TestwndChild</a>(pwnd)) {
00663             <span class="comment">/*</span>
00664 <span class="comment">             * Bubble the message to the parent</span>
00665 <span class="comment">             */</span>
00666             pwndParent = <a class="code" href="../../d6/d0/usercli_8h.html#a27">REBASEPWND</a>(pwnd, spwndParent);
00667             <span class="keywordflow">return</span> SendMessageW(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a450">HW</a>(pwndParent), WM_APPCOMMAND, wParam, lParam);
00668         } <span class="keywordflow">else</span> {
00669             <span class="comment">/*</span>
00670 <span class="comment">             * Call the server side to send the shell hook HSHELL_APPCOMMAND</span>
00671 <span class="comment">             */</span>
00672             <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a11">CsSendMessage</a>(hwnd, WM_APPCOMMAND, wParam, lParam, 0L, FNID_DEFWINDOWPROC, fAnsi);
00673         }
00674         <span class="keywordflow">break</span>;
00675 
00676     <span class="comment">/*</span>
00677 <span class="comment">     * Default handling for WM_APPCOMMAND support</span>
00678 <span class="comment">     */</span>
00679     <span class="keywordflow">case</span> WM_NCXBUTTONUP:
00680     <span class="keywordflow">case</span> WM_XBUTTONUP:
00681         {
00682             WORD cmd;
00683             WORD keystate;
00684             LPARAM lParamAppCommand;
00685 
00686             <span class="keywordflow">switch</span> (GET_XBUTTON_WPARAM(wParam)) {
00687             <span class="keywordflow">case</span> XBUTTON1:
00688                 cmd = APPCOMMAND_BROWSER_BACKWARD;
00689                 <span class="keywordflow">break</span>;
00690 
00691             <span class="keywordflow">case</span> XBUTTON2:
00692                 cmd = APPCOMMAND_BROWSER_FORWARD;
00693                 <span class="keywordflow">break</span>;
00694 
00695             <span class="keywordflow">default</span>:
00696                 cmd = 0;
00697                 <span class="keywordflow">break</span>;
00698             }
00699 
00700             <span class="keywordflow">if</span> (cmd == 0) {
00701                 <span class="keywordflow">break</span>;
00702             }
00703 
00704             cmd |= FAPPCOMMAND_MOUSE;
00705             <span class="keywordflow">if</span> (message == WM_XBUTTONUP) {
00706                 keystate = GET_KEYSTATE_WPARAM(wParam);
00707             } <span class="keywordflow">else</span> {
00708                 keystate = <a class="code" href="../../d0/d9/clmsg_8c.html#a9">GetMouseKeyState</a>();
00709             }
00710 
00711             lParamAppCommand = MAKELPARAM(keystate, cmd);
00712             <a class="code" href="../../d6/d0/usercli_8h.html#a600">SendMessageWorker</a>(pwnd, WM_APPCOMMAND, (WPARAM)hwnd, lParamAppCommand, fAnsi);
00713             <span class="keywordflow">break</span>;
00714         }
00715 
00716     <span class="keywordflow">case</span> WM_WINDOWPOSCHANGED: {
00717         PWINDOWPOS <a class="code" href="../../d0/d9/clmsg_8c.html#a8">ppos</a> = (PWINDOWPOS)lParam;
00718 
00719         <span class="keywordflow">if</span> (!(<a class="code" href="../../d0/d9/clmsg_8c.html#a8">ppos</a>-&gt;flags &amp; SWP_NOCLIENTMOVE)) {
00720             POINT pt = {pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o7">rcClient</a>.left, pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o7">rcClient</a>.top};
00721             pwndParent = <a class="code" href="../../d6/d0/usercli_8h.html#a27">REBASEPWND</a>(pwnd, spwndParent);
00722 
00723             <span class="keywordflow">if</span> (pwndParent != <a class="code" href="../../d3/d9/client_2wow_8c.html#a3">_GetDesktopWindow</a>()) {
00724                 pt.x -= pwndParent-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o7">rcClient</a>.left;
00725                 pt.y -= pwndParent-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o7">rcClient</a>.top;
00726             }
00727 
00728             <a class="code" href="../../d6/d0/usercli_8h.html#a600">SendMessageWorker</a>(pwnd, WM_MOVE, FALSE, MAKELPARAM(pt.x, pt.y), fAnsi);
00729         }
00730 
00731         <span class="keywordflow">if</span> ((<a class="code" href="../../d0/d9/clmsg_8c.html#a8">ppos</a>-&gt;flags &amp; SWP_STATECHANGE) || !(<a class="code" href="../../d0/d9/clmsg_8c.html#a8">ppos</a>-&gt;flags &amp; SWP_NOCLIENTSIZE)) {
00732             <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> cmd;
00733             RECT rc;
00734 
00735             <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFMINIMIZED))
00736                 cmd = SIZEICONIC;
00737             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFMAXIMIZED))
00738                 cmd = SIZEFULLSCREEN;
00739             <span class="keywordflow">else</span>
00740                 cmd = SIZENORMAL;
00741 
00742         <span class="comment">/*</span>
00743 <span class="comment">         *  HACK ALERT:</span>
00744 <span class="comment">         *  If the window is minimized then the real client width and height are</span>
00745 <span class="comment">         *  zero. But, in win3.1 they were non-zero. Under Chicago, PrintShop</span>
00746 <span class="comment">         *  Deluxe ver 1.2 hits a divide by zero. To fix this we fake the width</span>
00747 <span class="comment">         *  and height for old apps to be non-zero values.</span>
00748 <span class="comment">         *  GetClientRect does that job for us.</span>
00749 <span class="comment">         */</span>
00750             <a class="code" href="../../d6/d9/rtl_2wow_8c.html#a19">_GetClientRect</a>(pwnd, &amp;rc);
00751             <a class="code" href="../../d6/d0/usercli_8h.html#a600">SendMessageWorker</a>(pwnd, WM_SIZE, cmd,
00752                     MAKELONG(rc.right - rc.left,
00753                     rc.bottom - rc.top), fAnsi);
00754         }
00755         <span class="keywordflow">return</span> 0;
00756         }
00757 
00758     <span class="keywordflow">case</span> WM_MOUSEACTIVATE: {
00759         <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwndT;
00760         LRESULT lt;
00761 
00762         <span class="comment">/*</span>
00763 <span class="comment">         * GetChildParent returns either a kernel pointer or NULL.</span>
00764 <span class="comment">         */</span>
00765         pwndT = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a741">GetChildParent</a>(pwnd);
00766         <span class="keywordflow">if</span> (pwndT != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00767             pwndT = <a class="code" href="../../d6/d0/usercli_8h.html#a25">REBASEPTR</a>(pwnd, pwndT);
00768             lt = <a class="code" href="../../d6/d0/usercli_8h.html#a600">SendMessageWorker</a>(pwndT, WM_MOUSEACTIVATE, wParam, lParam, fAnsi);
00769             <span class="keywordflow">if</span> (lt != 0)
00770                 <span class="keywordflow">return</span> lt;
00771         }
00772 
00773         <span class="comment">/*</span>
00774 <span class="comment">         * Moving, sizing or minimizing? Activate AFTER we take action.</span>
00775 <span class="comment">         */</span>
00776         <span class="keywordflow">return</span> ((LOWORD(lParam) == HTCAPTION) &amp;&amp; (HIWORD(lParam) == WM_LBUTTONDOWN )) ?
00777                 (LONG)MA_NOACTIVATE : (LONG)MA_ACTIVATE;
00778         }
00779 
00780     <span class="keywordflow">case</span> WM_CTLCOLORSCROLLBAR:
00781         <span class="keywordflow">if</span> ((<a class="code" href="../../d1/d8/clglobal_8c.html#a4">gpsi</a>-&gt;BitCount &lt; 8) ||
00782             (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a20">SYSRGB</a>(3DHILIGHT) != <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a20">SYSRGB</a>(SCROLLBAR)) ||
00783             (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a20">SYSRGB</a>(3DHILIGHT) == <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a20">SYSRGB</a>(WINDOW)))
00784         {
00785             <span class="comment">/*</span>
00786 <span class="comment">             * Remove call to UnrealizeObject().  GDI Handles this for</span>
00787 <span class="comment">             * brushes on NT.</span>
00788 <span class="comment">             *</span>
00789 <span class="comment">             * UnrealizeObject(ghbrGray);</span>
00790 <span class="comment">             */</span>
00791 
00792             SetBkColor((HDC)wParam, <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a20">SYSRGB</a>(3DHILIGHT));
00793             SetTextColor((HDC)wParam, <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a20">SYSRGB</a>(3DFACE));
00794             <span class="keywordflow">return</span>((LRESULT)<a class="code" href="../../d1/d8/clglobal_8c.html#a4">gpsi</a>-&gt;hbrGray);
00795         }
00796 
00797         icolBack = COLOR_3DHILIGHT;
00798         icolFore = COLOR_BTNTEXT;
00799         <span class="keywordflow">goto</span> SetColor;
00800 
00801     <span class="keywordflow">case</span> WM_CTLCOLORBTN:
00802         <span class="keywordflow">if</span> (pwnd == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00803             <span class="keywordflow">goto</span> ColorDefault;
00804 
00805         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFWIN40COMPAT)) {
00806             icolBack = COLOR_3DFACE;
00807             icolFore = COLOR_BTNTEXT;
00808         } <span class="keywordflow">else</span> {
00809             <span class="keywordflow">goto</span> ColorDefault;
00810         }
00811         <span class="keywordflow">goto</span> SetColor;
00812 
00813     <span class="keywordflow">case</span> WM_CTLCOLORSTATIC:
00814     <span class="keywordflow">case</span> WM_CTLCOLORDLG:
00815     <span class="keywordflow">case</span> WM_CTLCOLORMSGBOX:
00816         <span class="comment">// We want static controls in dialogs to have the 3D</span>
00817         <span class="comment">// background color, but statics in windows to inherit</span>
00818         <span class="comment">// their parents' background.</span>
00819 
00820         <span class="keywordflow">if</span> (pwnd == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00821             <span class="keywordflow">goto</span> ColorDefault;
00822 
00823         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFWIN40COMPAT)) {
00824             icolBack = COLOR_3DFACE;
00825             icolFore = COLOR_WINDOWTEXT;
00826             <span class="keywordflow">goto</span> SetColor;
00827         }
00828         <span class="comment">// ELSE FALL THRU...</span>
00829 
00830     <span class="keywordflow">case</span> WM_CTLCOLOR:              <span class="comment">// here for WOW only</span>
00831     <span class="keywordflow">case</span> WM_CTLCOLORLISTBOX:
00832     <span class="keywordflow">case</span> WM_CTLCOLOREDIT:
00833       ColorDefault:
00834         icolBack = COLOR_WINDOW;
00835         icolFore = COLOR_WINDOWTEXT;
00836 
00837       SetColor:
00838       {
00839         SetBkColor((HDC)wParam, <a class="code" href="../../d1/d8/clglobal_8c.html#a4">gpsi</a>-&gt;argbSystem[icolBack]);
00840         SetTextColor((HDC)wParam, <a class="code" href="../../d1/d8/clglobal_8c.html#a4">gpsi</a>-&gt;argbSystem[icolFore]);
00841         <span class="keywordflow">return</span> (LRESULT)(<a class="code" href="../../d1/d0/inc_2user_8h.html#a15">SYSHBRUSH</a>(icolBack));
00842       }
00843 
00844     <span class="keywordflow">case</span> WM_NCHITTEST:
00845         <span class="keywordflow">return</span> <a class="code" href="../../d2/d8/rtl_2winmgr_8c.html#a0">FindNCHit</a>(pwnd, (LONG)lParam);
00846 
00847     <span class="keywordflow">case</span> WM_GETTEXT:
00848         <span class="keywordflow">if</span> (wParam != 0) {
00849 
00850             LPWSTR lpszText;
00851             <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>   cchSrc;
00852 
00853             <span class="keywordflow">if</span> (pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o17">strName</a>.<a class="code" href="../../d2/d9/struct__LARGE__UNICODE__STRING.html#o0">Length</a>) {
00854 
00855                 lpszText = <a class="code" href="../../d6/d0/usercli_8h.html#a26">REBASE</a>(pwnd, strName.Buffer);
00856                 cchSrc = (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o17">strName</a>.<a class="code" href="../../d2/d9/struct__LARGE__UNICODE__STRING.html#o0">Length</a> / <span class="keyword">sizeof</span>(WCHAR);
00857 
00858                 <span class="keywordflow">if</span> (fAnsi) {
00859 
00860                     LPSTR lpName = (LPSTR)lParam;
00861 
00862                     <span class="comment">/*</span>
00863 <span class="comment">                     * Non-zero retval means some text to copy out.  Do not</span>
00864 <span class="comment">                     * copy out more than the requested byte count</span>
00865 <span class="comment">                     * 'chMaxCount'.</span>
00866 <span class="comment">                     */</span>
00867                     cchSrc = WCSToMB(lpszText,
00868                                      cchSrc,
00869                                      (LPSTR *)&amp;lpName,
00870                                      (UINT)(wParam - 1),
00871                                      FALSE);
00872 
00873                     lpName[cchSrc] = <span class="charliteral">'\0'</span>;
00874 
00875                 } <span class="keywordflow">else</span> {
00876 
00877                     LPWSTR lpwName = (LPWSTR)lParam;
00878 
00879                     cchSrc = <a class="code" href="../../d5/d4/acpitabl_8h.html#a69">min</a>(cchSrc, (UINT)(wParam - 1));
00880                     RtlCopyMemory(lpwName, lpszText, cchSrc * <span class="keyword">sizeof</span>(WCHAR));
00881                     lpwName[cchSrc] = 0;
00882                 }
00883 
00884                 <span class="keywordflow">return</span> cchSrc;
00885             }
00886 
00887             <span class="comment">/*</span>
00888 <span class="comment">             * else Null terminate the text buffer since there is no text.</span>
00889 <span class="comment">             */</span>
00890             <span class="keywordflow">if</span> (fAnsi) {
00891                 ((LPSTR)lParam)[0] = 0;
00892             } <span class="keywordflow">else</span> {
00893                 ((LPWSTR)lParam)[0] = 0;
00894             }
00895         }
00896 
00897         <span class="keywordflow">return</span> 0;
00898 
00899     <span class="keywordflow">case</span> WM_GETTEXTLENGTH:
00900         <span class="keywordflow">if</span> (pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o17">strName</a>.<a class="code" href="../../d2/d9/struct__LARGE__UNICODE__STRING.html#o0">Length</a>) {
00901             <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> cch;
00902             <span class="keywordflow">if</span> (fAnsi) {
00903                 <a class="code" href="../../d9/d6/nlsxlat_8c.html#a36">RtlUnicodeToMultiByteSize</a>(&amp;cch,
00904                                           <a class="code" href="../../d6/d0/usercli_8h.html#a26">REBASE</a>(pwnd, strName.Buffer),
00905                                           pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o17">strName</a>.<a class="code" href="../../d2/d9/struct__LARGE__UNICODE__STRING.html#o0">Length</a>);
00906             } <span class="keywordflow">else</span> {
00907                 cch = pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o17">strName</a>.<a class="code" href="../../d2/d9/struct__LARGE__UNICODE__STRING.html#o0">Length</a> / <span class="keyword">sizeof</span>(WCHAR);
00908             }
00909             <span class="keywordflow">return</span> cch;
00910         }
00911         <span class="keywordflow">return</span> 0<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>;
00912 
00913     <span class="keywordflow">case</span> WM_QUERYDRAGICON:
00914         <span class="comment">/*</span>
00915 <span class="comment">         * If the window is WIN40COMPAT or has a kernel side procedure</span>
00916 <span class="comment">         * do not attempt to look into the instance module</span>
00917 <span class="comment">         */</span>
00918         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFWIN40COMPAT) || <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFSERVERSIDEPROC)) {
00919             <span class="keywordflow">return</span> 0;
00920         }
00921         <span class="comment">/*</span>
00922 <span class="comment">         * For old apps, like the VB3 ones, try to load the icon from resources</span>
00923 <span class="comment">         * This is how Win95 does.</span>
00924 <span class="comment">         */</span>
00925         <span class="keywordflow">return</span> (LRESULT)<a class="code" href="../../d4/d9/clres_8c.html#a79">LoadIconW</a>(pwnd-&gt;hModule, MAKEINTRESOURCE(1));
00926 
00927     <span class="keywordflow">case</span> WM_QUERYOPEN:
00928     <span class="keywordflow">case</span> WM_QUERYENDSESSION:
00929     <span class="keywordflow">case</span> WM_DEVICECHANGE:
00930     <span class="keywordflow">case</span> WM_POWERBROADCAST:
00931         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00932 
00933     <span class="keywordflow">case</span> WM_KEYDOWN:
00934         <span class="keywordflow">if</span> (wParam == VK_F10) {
00935             <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a11">CsSendMessage</a>(hwnd, message, wParam, lParam, 0L,
00936                     FNID_DEFWINDOWPROC, fAnsi);
00937         }
00938         <span class="keywordflow">break</span>;
00939 
00940     <span class="keywordflow">case</span> WM_SYSKEYDOWN:
00941         <span class="keywordflow">if</span> ((HIWORD(lParam) &amp; <a class="code" href="../../d3/d5/editsl_8c.html#a0">SYS_ALTERNATE</a>) || (wParam == VK_F10) ||
00942                 (wParam == VK_ESCAPE))
00943             <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a11">CsSendMessage</a>(hwnd, message, wParam, lParam, 0L,
00944                     FNID_DEFWINDOWPROC, fAnsi);
00945         <span class="keywordflow">break</span>;
00946 
00947     <span class="keywordflow">case</span> WM_CHARTOITEM:
00948     <span class="keywordflow">case</span> WM_VKEYTOITEM:
00949         <span class="comment">/*</span>
00950 <span class="comment">         * Do default processing for keystrokes into owner draw listboxes.</span>
00951 <span class="comment">         */</span>
00952         <span class="keywordflow">return</span> -1;
00953 
00954     <span class="keywordflow">case</span> WM_ACTIVATE:
00955         <span class="keywordflow">if</span> (LOWORD(wParam))
00956             <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a11">CsSendMessage</a>(hwnd, message, wParam, lParam, 0L,
00957                     FNID_DEFWINDOWPROC, fAnsi);
00958         <span class="keywordflow">break</span>;
00959 
00960     <span class="keywordflow">case</span> WM_SHOWWINDOW:
00961         <span class="keywordflow">if</span> (lParam != 0)
00962             <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a11">CsSendMessage</a>(hwnd, message, wParam, lParam, 0L,
00963                     FNID_DEFWINDOWPROC, fAnsi);
00964         <span class="keywordflow">break</span>;
00965 
00966     <span class="keywordflow">case</span> WM_DROPOBJECT:
00967        <span class="keywordflow">return</span> <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a910">DO_DROPFILE</a>;
00968 
00969     <span class="keywordflow">case</span> WM_WINDOWPOSCHANGING:
00970         <span class="comment">/*</span>
00971 <span class="comment">         * If the window's size is changing, adjust the passed-in size</span>
00972 <span class="comment">         */</span>
00973 <span class="preprocessor">        #define ppos ((WINDOWPOS *)lParam)</span>
00974 <span class="preprocessor"></span>        <span class="keywordflow">if</span> (!(<a class="code" href="../../d0/d9/clmsg_8c.html#a8">ppos</a>-&gt;flags &amp; SWP_NOSIZE))
00975             <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a11">CsSendMessage</a>(hwnd, message, wParam, lParam, 0L,
00976                     FNID_DEFWINDOWPROC, fAnsi);
00977 <span class="preprocessor">        #undef ppos</span>
00978 <span class="preprocessor"></span>        <span class="keywordflow">break</span>;
00979 
00980     <span class="keywordflow">case</span> WM_KLUDGEMINRECT:
00981         {
00982         SHELLHOOKINFO shi;
00983         LPRECT lprc = (LPRECT)lParam;
00984 
00985         shi.hwnd = (HWND)wParam;
00986         shi.rc.left = MAKELONG(lprc-&gt;left, lprc-&gt;top);
00987         shi.rc.top = MAKELONG(lprc-&gt;right, lprc-&gt;bottom);
00988 
00989         <span class="keywordflow">if</span> (<a class="code" href="../../d1/d8/clglobal_8c.html#a4">gpsi</a>-&gt;<a class="code" href="../../d2/d6/structtagSERVERINFO.html#o15">uiShellMsg</a> == 0)
00990             <a class="code" href="../../d3/d8/client_8c.html#a117">SetTaskmanWindow</a>(NULL);
00991         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a600">SendMessageWorker</a>(pwnd, <a class="code" href="../../d1/d8/clglobal_8c.html#a4">gpsi</a>-&gt;<a class="code" href="../../d2/d6/structtagSERVERINFO.html#o15">uiShellMsg</a>, HSHELL_GETMINRECT,
00992                 (LPARAM)&amp;shi, fAnsi)) {
00993             <span class="comment">//</span>
00994             <span class="comment">// Now convert the RECT back from two POINTS structures into two POINT</span>
00995             <span class="comment">// structures.</span>
00996             <span class="comment">//</span>
00997             lprc-&gt;left   = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a13">SHORT</a>)LOWORD(shi.rc.left);  <span class="comment">// Sign extend</span>
00998             lprc-&gt;top    = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a13">SHORT</a>)HIWORD(shi.rc.left);  <span class="comment">// Sign extend</span>
00999             lprc-&gt;right  = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a13">SHORT</a>)LOWORD(shi.rc.top);   <span class="comment">// Sign extend</span>
01000             lprc-&gt;bottom = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a13">SHORT</a>)HIWORD(shi.rc.top);   <span class="comment">// Sign extend</span>
01001         }
01002         <span class="keywordflow">break</span>;
01003         }
01004 
01005     <span class="keywordflow">case</span> WM_NOTIFYFORMAT:
01006         <span class="keywordflow">if</span> (lParam == NF_QUERY)
01007             <span class="keywordflow">return</span>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFANSICREATOR) ? NFR_ANSI : NFR_UNICODE);
01008         <span class="keywordflow">break</span>;
01009 
01010     <span class="keywordflow">case</span> WM_IME_KEYDOWN:
01011         <span class="keywordflow">if</span> (fAnsi)
01012             PostMessageA(hwnd, WM_KEYDOWN, wParam, lParam);
01013         <span class="keywordflow">else</span>
01014             PostMessageW(hwnd, WM_KEYDOWN, wParam, lParam);
01015         <span class="keywordflow">break</span>;
01016 
01017     <span class="keywordflow">case</span> WM_IME_KEYUP:
01018         <span class="keywordflow">if</span> (fAnsi)
01019             PostMessageA(hwnd, WM_KEYUP, wParam, lParam);
01020         <span class="keywordflow">else</span>
01021             PostMessageW(hwnd, WM_KEYUP, wParam, lParam);
01022         <span class="keywordflow">break</span>;
01023 
01024     <span class="keywordflow">case</span> WM_IME_CHAR:
01025         <span class="comment">//if (TestCF(pwnd, CFIME))</span>
01026         <span class="comment">//    break;</span>
01027 
01028         <span class="keywordflow">if</span> ( fAnsi ) {
01029             <span class="keywordflow">if</span>( IsDBCSLeadByteEx(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a118">THREAD_CODEPAGE</a>(),(BYTE)(wParam &gt;&gt; 8)) ) {
01030                 PostMessageA(hwnd,
01031                              WM_CHAR,
01032                              (WPARAM)((BYTE)(wParam &gt;&gt; 8)),   <span class="comment">// leading byte</span>
01033                              1L);
01034                 PostMessageA(hwnd,
01035                              WM_CHAR,
01036                              (WPARAM)((BYTE)wParam),         <span class="comment">// trailing byte</span>
01037                              1L);
01038             }
01039             <span class="keywordflow">else</span>
01040                 PostMessageA(hwnd,
01041                              WM_CHAR,
01042                              (WPARAM)(wParam),
01043                              1L);
01044         } <span class="keywordflow">else</span> {
01045             PostMessageW(hwnd, WM_CHAR, wParam, 1L);
01046         }
01047         <span class="keywordflow">break</span>;
01048 
01049     <span class="keywordflow">case</span> WM_IME_COMPOSITION:
01050         <span class="comment">//if (TestCF(pwnd, CFIME))</span>
01051         <span class="comment">//    break;</span>
01052 
01053         <span class="keywordflow">if</span> (lParam &amp; GCS_RESULTSTR) {
01054             HIMC  hImc;
01055             <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> cbLen;
01056 
01057             <span class="keywordflow">if</span> ((hImc = <a class="code" href="../../d6/d0/usercli_8h.html#a307">fpImmGetContext</a>(hwnd)) == <a class="code" href="../../d8/d0/immstruc_8h.html#a0">NULL_HIMC</a>)
01058                 <span class="keywordflow">goto</span> dwpime_ToIMEWnd_withchk;
01059 
01060             <span class="keywordflow">if</span> (fAnsi) {
01061                 LPSTR pszBuffer, psz;
01062 
01063                 <span class="comment">/*</span>
01064 <span class="comment">                 * ImmGetComposition returns the size of buffer needed in byte.</span>
01065 <span class="comment">                 */</span>
01066                 <span class="keywordflow">if</span> (!(cbLen = <a class="code" href="../../d6/d0/usercli_8h.html#a308">fpImmGetCompositionStringA</a>(hImc, GCS_RESULTSTR, NULL, 0))) {
01067                     <a class="code" href="../../d6/d0/usercli_8h.html#a314">fpImmReleaseContext</a>(hwnd, hImc);
01068                     <span class="keywordflow">goto</span> dwpime_ToIMEWnd_withchk;
01069                 }
01070 
01071                 pszBuffer = psz = (LPSTR)<a class="code" href="../../d6/d0/usercli_8h.html#a136">UserLocalAlloc</a>(HEAP_ZERO_MEMORY,
01072                                                         cbLen + <span class="keyword">sizeof</span>(CHAR));
01073 
01074                 <span class="keywordflow">if</span> (pszBuffer == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01075                     <a class="code" href="../../d6/d0/usercli_8h.html#a314">fpImmReleaseContext</a>(hwnd, hImc);
01076                     <span class="keywordflow">goto</span> dwpime_ToIMEWnd_withchk;
01077                 }
01078 
01079                 <a class="code" href="../../d6/d0/usercli_8h.html#a308">fpImmGetCompositionStringA</a>(hImc, GCS_RESULTSTR, psz, cbLen);
01080 
01081                 <span class="keywordflow">while</span> (*psz) {
01082                     <span class="keywordflow">if</span> (IsDBCSLeadByteEx(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a118">THREAD_CODEPAGE</a>(),*psz)) {
01083                         <span class="keywordflow">if</span> (*(psz+1)) {
01084                             SendMessageA( hwnd,
01085                                           WM_IME_CHAR,
01086                                           MAKEWPARAM(MAKEWORD(*(psz+1), *psz), 0),
01087                                           1L );
01088                             psz++;
01089                         }
01090                         psz++;
01091                     }
01092                     <span class="keywordflow">else</span>
01093                         SendMessageA( hwnd,
01094                                       WM_IME_CHAR,
01095                                       MAKEWPARAM(MAKEWORD(*(psz++), 0), 0),
01096                                       1L );
01097                 }
01098 
01099                 <a class="code" href="../../d6/d0/usercli_8h.html#a138">UserLocalFree</a>(pszBuffer);
01100 
01101                 <a class="code" href="../../d6/d0/usercli_8h.html#a314">fpImmReleaseContext</a>(hwnd, hImc);
01102             }
01103             <span class="keywordflow">else</span> {
01104                 LPWSTR pwszBuffer, pwsz;
01105 
01106                 <span class="comment">/*</span>
01107 <span class="comment">                 * ImmGetComposition returns the size of buffer needed in byte</span>
01108 <span class="comment">                 */</span>
01109                 <span class="keywordflow">if</span> (!(cbLen = <a class="code" href="../../d6/d0/usercli_8h.html#a309">fpImmGetCompositionStringW</a>(hImc, GCS_RESULTSTR, NULL, 0))) {
01110                     <a class="code" href="../../d6/d0/usercli_8h.html#a314">fpImmReleaseContext</a>(hwnd, hImc);
01111                     <span class="keywordflow">goto</span> dwpime_ToIMEWnd_withchk;
01112                 }
01113 
01114                 pwszBuffer = pwsz = (LPWSTR)<a class="code" href="../../d6/d0/usercli_8h.html#a136">UserLocalAlloc</a>(HEAP_ZERO_MEMORY,
01115                                                            cbLen + <span class="keyword">sizeof</span>(WCHAR));
01116 
01117                 <span class="keywordflow">if</span> (pwszBuffer == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01118                     <a class="code" href="../../d6/d0/usercli_8h.html#a314">fpImmReleaseContext</a>(hwnd, hImc);
01119                     <span class="keywordflow">goto</span> dwpime_ToIMEWnd_withchk;
01120                 }
01121 
01122                 <a class="code" href="../../d6/d0/usercli_8h.html#a309">fpImmGetCompositionStringW</a>(hImc, GCS_RESULTSTR, pwsz, cbLen);
01123 
01124                 <span class="keywordflow">while</span> (*pwsz)
01125                     SendMessageW(hwnd, WM_IME_CHAR, MAKEWPARAM(*pwsz++, 0), 1L);
01126 
01127                 <a class="code" href="../../d6/d0/usercli_8h.html#a138">UserLocalFree</a>(pwszBuffer);
01128 
01129                 <a class="code" href="../../d6/d0/usercli_8h.html#a314">fpImmReleaseContext</a>(hwnd, hImc);
01130             }
01131         }
01132 
01133         <span class="comment">/*</span>
01134 <span class="comment">         * Fall through to send to Default IME Window with checking</span>
01135 <span class="comment">         * activated hIMC.</span>
01136 <span class="comment">         */</span>
01137 
01138     <span class="keywordflow">case</span> WM_IME_STARTCOMPOSITION:
01139     <span class="keywordflow">case</span> WM_IME_ENDCOMPOSITION:
01140 dwpime_ToIMEWnd_withchk:
01141         <span class="comment">//if (TestCF(pwnd, CFIME))</span>
01142         <span class="comment">//    break;</span>
01143 
01144         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a16">GetClientInfo</a>()-&gt;dwTIFlags &amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a817">TIF_DISABLEIME</a>) {
01145             <span class="keywordflow">break</span>;
01146         }
01147         <span class="comment">/*</span>
01148 <span class="comment">         * We assume this Wnd uses DefaultIMEWindow.</span>
01149 <span class="comment">         * If this window has its own IME window, it have to call</span>
01150 <span class="comment">         * ImmIsUIMessage()....</span>
01151 <span class="comment">         */</span>
01152         hwndDefIme = <a class="code" href="../../d6/d0/usercli_8h.html#a311">fpImmGetDefaultIMEWnd</a>(hwnd);
01153 
01154         <span class="keywordflow">if</span> (hwndDefIme == hwnd) {
01155             <span class="comment">/*</span>
01156 <span class="comment">             * VC++ 1.51 TLW0NCL.DLL subclass IME class window</span>
01157 <span class="comment">             * and pass IME messages to DefWindowProc().</span>
01158 <span class="comment">             */</span>
01159             RIPMSG1(RIP_WARNING,
01160                 <span class="stringliteral">"IME Class window is hooked and IME message [%X] are sent to DefWindowProc"</span>,
01161                 message);
01162             <a class="code" href="../../d6/d0/usercli_8h.html#a619">ImeWndProcWorker</a>(pwnd, message, wParam, lParam, fAnsi);
01163             <span class="keywordflow">break</span>;
01164         }
01165 
01166         <span class="keywordflow">if</span> ((pwndDefIme = <a class="code" href="../../d3/d9/client_2wow_8c.html#a1">ValidateHwndNoRip</a>(hwndDefIme)) != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01167             <span class="comment">/*</span>
01168 <span class="comment">             * If hImc of this window is not activated for IME window,</span>
01169 <span class="comment">             * we don't send WM_IME_NOTIFY.</span>
01170 <span class="comment">             */</span>
01171             pimeui = ((<a class="code" href="../../d5/d8/structtagIMEWND.html">PIMEWND</a>)pwndDefIme)-&gt;pimeui;
01172             <span class="keywordflow">if</span> (pimeui-&gt;<a class="code" href="../../d4/d8/structtagIMEUI.html#o1">hIMC</a> == <a class="code" href="../../d6/d0/usercli_8h.html#a307">fpImmGetContext</a>(hwnd))
01173                 <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a600">SendMessageWorker</a>(pwndDefIme, message, wParam, lParam, fAnsi);
01174             <span class="keywordflow">else</span>
01175                 RIPMSG1(RIP_WARNING,
01176                     <span class="stringliteral">"DefWindowProc can not send WM_IME_message [%X] now"</span>,
01177                     message);
01178         }
01179         <span class="keywordflow">break</span>;
01180 
01181 dwpime_ToTopLevel_withchk:
01182         <span class="comment">//if (TestCF(pwnd, CFIME))</span>
01183         <span class="comment">//    break;</span>
01184 
01185         <span class="comment">/*</span>
01186 <span class="comment">         * We assume this Wnd uses DefaultIMEWindow.</span>
01187 <span class="comment">         * If this window has its own IME window, it have to call</span>
01188 <span class="comment">         * ImmIsUIMessage()....</span>
01189 <span class="comment">         */</span>
01190         hwndDefIme = <a class="code" href="../../d6/d0/usercli_8h.html#a311">fpImmGetDefaultIMEWnd</a>(hwnd);
01191 
01192         <span class="keywordflow">if</span> (hwndDefIme == hwnd) {
01193             <span class="comment">/*</span>
01194 <span class="comment">             * VC++ 1.51 TLW0NCL.DLL subclass IME class window</span>
01195 <span class="comment">             * and pass IME messages to DefWindowProc().</span>
01196 <span class="comment">             */</span>
01197             RIPMSG1(RIP_WARNING,
01198                 <span class="stringliteral">"IME Class window is hooked and IME message [%X] are sent to DefWindowProc"</span>,
01199                 message);
01200             <a class="code" href="../../d6/d0/usercli_8h.html#a619">ImeWndProcWorker</a>(pwnd, message, wParam, lParam, fAnsi);
01201             <span class="keywordflow">break</span>;
01202         }
01203 
01204         pwndDefIme = <a class="code" href="../../d3/d9/client_2wow_8c.html#a1">ValidateHwndNoRip</a>(hwndDefIme);
01205 
01206         <span class="keywordflow">if</span> ((pwndDefIme = <a class="code" href="../../d3/d9/client_2wow_8c.html#a1">ValidateHwndNoRip</a>(hwndDefIme)) != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01207             <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwndT, pwndParent;
01208 
01209             pwndT = pwnd;
01210 
01211             <span class="keywordflow">while</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a735">TestwndChild</a>(pwndT)) {
01212                 pwndParent = <a class="code" href="../../d6/d0/usercli_8h.html#a27">REBASEPWND</a>(pwndT, spwndParent);
01213                 <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a455">GETPTI</a>(pwndParent) != <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a455">GETPTI</a>(pwnd))
01214                     <span class="keywordflow">break</span>;
01215                 pwndT = pwndParent;
01216             }
01217 
01218             <span class="comment">/*</span>
01219 <span class="comment">             * If hImc of this window is not activated for IME window,</span>
01220 <span class="comment">             * we don't send WM_IME_NOTIFY.</span>
01221 <span class="comment">             */</span>
01222             <span class="keywordflow">if</span> (pwndT != pwnd) {
01223                 pimeui = ((<a class="code" href="../../d5/d8/structtagIMEWND.html">PIMEWND</a>)pwndDefIme)-&gt;pimeui;
01224                 <span class="keywordflow">if</span> (pimeui-&gt;<a class="code" href="../../d4/d8/structtagIMEUI.html#o1">hIMC</a> == <a class="code" href="../../d6/d0/usercli_8h.html#a307">fpImmGetContext</a>(hwnd))
01225                     <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a600">SendMessageWorker</a>(pwndT, message, wParam, lParam, fAnsi);
01226                 <span class="keywordflow">else</span>
01227                     RIPMSG1(RIP_WARNING,
01228                         <span class="stringliteral">"DefWindowProc can not send WM_IME_message [%X] now"</span>,
01229                         message);
01230             }
01231             <span class="keywordflow">else</span> {
01232                 <span class="comment">/*</span>
01233 <span class="comment">                 * Review !!</span>
01234 <span class="comment">                 * If this is the toplevel window, we pass messages to</span>
01235 <span class="comment">                 * the default IME window...</span>
01236 <span class="comment">                 */</span>
01237                 <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a600">SendMessageWorker</a>(pwndDefIme, message, wParam, lParam, fAnsi);
01238             }
01239         }
01240         <span class="keywordflow">break</span>;
01241 
01242     <span class="keywordflow">case</span> WM_IME_NOTIFY:
01243         <span class="keywordflow">switch</span> (wParam) {
01244         <span class="keywordflow">case</span> IMN_OPENSTATUSWINDOW:
01245         <span class="keywordflow">case</span> IMN_CLOSESTATUSWINDOW:
01246 <span class="preprocessor">#ifndef WKWOK_DEBUG</span>
01247 <span class="preprocessor"></span>            <span class="keywordflow">goto</span> dwpime_ToIMEWnd_withchk;
01248 <span class="preprocessor">#endif</span>
01249 <span class="preprocessor"></span>            <span class="keywordflow">goto</span> dwpime_ToTopLevel_withchk;
01250 
01251         <span class="keywordflow">default</span>:
01252             <span class="keywordflow">goto</span> dwpime_ToIMEWnd_withchk;
01253         }
01254         <span class="keywordflow">break</span>;
01255 
01256     <span class="keywordflow">case</span> WM_IME_REQUEST:
01257         <span class="keywordflow">switch</span> (wParam) {
01258         <span class="keywordflow">case</span> IMR_QUERYCHARPOSITION:
01259             <span class="keywordflow">goto</span> dwpime_ToIMEWnd_withchk;
01260         <span class="keywordflow">default</span>:
01261             <span class="keywordflow">break</span>;
01262         }
01263         <span class="keywordflow">break</span>;
01264 
01265     <span class="keywordflow">case</span> WM_IME_SYSTEM:
01266         <span class="keywordflow">if</span> (wParam == IMS_SETACTIVECONTEXT) {
01267             RIPMSG0(RIP_WARNING, <span class="stringliteral">"DefWindowProc received unexpected WM_IME_SYSTEM"</span>);
01268             <span class="keywordflow">break</span>;
01269         }
01270 
01271         <span class="comment">/*</span>
01272 <span class="comment">         * IMS_SETOPENSTATUS is depended on the activated input context.</span>
01273 <span class="comment">         * It needs to be sent to only the activated system window.</span>
01274 <span class="comment">         */</span>
01275         <span class="keywordflow">if</span> (wParam == IMS_SETOPENSTATUS)
01276             <span class="keywordflow">goto</span> dwpime_ToIMEWnd_withchk;
01277 
01278         <span class="comment">/*</span>
01279 <span class="comment">         * Fall through to send to Default IME Window.</span>
01280 <span class="comment">         */</span>
01281 
01282     <span class="keywordflow">case</span> WM_IME_SETCONTEXT:
01283         <span class="comment">//if (TestCF(pwnd, CFIME))</span>
01284         <span class="comment">//    break;</span>
01285 
01286         hwndDefIme = <a class="code" href="../../d6/d0/usercli_8h.html#a311">fpImmGetDefaultIMEWnd</a>(hwnd);
01287 
01288         <span class="keywordflow">if</span> (hwndDefIme == hwnd) {
01289             <span class="comment">/*</span>
01290 <span class="comment">             * VC++ 1.51 TLW0NCL.DLL subclass IME class window</span>
01291 <span class="comment">             * and pass IME messages to DefWindowProc().</span>
01292 <span class="comment">             */</span>
01293             RIPMSG1(RIP_WARNING,
01294                 <span class="stringliteral">"IME Class window is hooked and IME message [%X] are sent to DefWindowProc"</span>,
01295                 message);
01296             <a class="code" href="../../d6/d0/usercli_8h.html#a619">ImeWndProcWorker</a>(pwnd, message, wParam, lParam, fAnsi);
01297             <span class="keywordflow">break</span>;
01298         }
01299 
01300         <span class="keywordflow">if</span> ((pwndDefIme = <a class="code" href="../../d3/d9/client_2wow_8c.html#a1">ValidateHwndNoRip</a>(hwndDefIme)) != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
01301             <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a600">SendMessageWorker</a>(pwndDefIme, message, wParam, lParam, fAnsi);
01302 
01303         <span class="keywordflow">break</span>;
01304 
01305     <span class="keywordflow">case</span> WM_IME_SELECT:
01306         RIPMSG0(RIP_WARNING, <span class="stringliteral">"DefWindowProc should not receive WM_IME_SELECT"</span>);
01307         <span class="keywordflow">break</span>;
01308 
01309     <span class="keywordflow">case</span> WM_IME_COMPOSITIONFULL:
01310         <span class="comment">//if (TestCF(pwnd, CFIME))</span>
01311         <span class="comment">//    break;</span>
01312 
01313         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a150">GETAPPVER</a>() &lt; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a101">VER40</a>) {
01314             <span class="comment">/*</span>
01315 <span class="comment">             * This is a temporary solution for win31app.</span>
01316 <span class="comment">             * FEREVIEW: For M5 this will call WINNLS message mapping logic</span>
01317 <span class="comment">             *           -yutakan</span>
01318 <span class="comment">             */</span>
01319             <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a600">SendMessageWorker</a>(pwnd, WM_IME_REPORT,
01320                              IR_FULLCONVERT, (LPARAM)0L, fAnsi);
01321         }
01322         <span class="keywordflow">break</span>;
01323 
01324     <span class="keywordflow">case</span> WM_CHANGEUISTATE:
01325         {
01326             WORD wAction = LOWORD(wParam);
01327             WORD wFlags = HIWORD(wParam);
01328             <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> bRealChange = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01329 
01330             <span class="keywordflow">if</span> (wFlags &amp; ~UISF_VALID || wAction &gt; UIS_LASTVALID ||
01331                 lParam || !<a class="code" href="../../d1/d0/inc_2user_8h.html#a384">TEST_KbdCuesPUSIF</a>) {
01332                     <span class="keywordflow">return</span> 0;
01333             }
01334 
01335             <span class="keywordflow">if</span> (wAction == UIS_INITIALIZE) {
01336                 <span class="keywordflow">if</span> (<a class="code" href="../../d1/d8/clglobal_8c.html#a4">gpsi</a>-&gt;bLastRITWasKeyboard) {
01337                     wAction = UIS_CLEAR;
01338                 } <span class="keywordflow">else</span> {
01339                     wAction = UIS_SET;
01340                 }
01341                 wFlags = UISF_HIDEFOCUS | UISF_HIDEACCEL;
01342                 wParam = MAKEWPARAM(wAction, wFlags);
01343             }
01344 
01345             UserAssert(wAction == UIS_SET || wAction == UIS_CLEAR);
01346             <span class="comment">/*</span>
01347 <span class="comment">             * If the state is not going to change, there's nothing to do here</span>
01348 <span class="comment">             */</span>
01349             <span class="keywordflow">if</span> (wFlags &amp; UISF_HIDEFOCUS) {
01350                 bRealChange = (!!<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WEFPUIFOCUSHIDDEN)) ^ (wAction == UIS_SET);
01351             }
01352             <span class="keywordflow">if</span> (wFlags &amp; UISF_HIDEACCEL) {
01353                 bRealChange |= (!!<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WEFPUIACCELHIDDEN)) ^ (wAction == UIS_SET);
01354             }
01355 
01356             <span class="keywordflow">if</span> (!bRealChange) {
01357                 <span class="keywordflow">break</span>;
01358             }
01359             <span class="comment">/*</span>
01360 <span class="comment">             * Children pass this message up</span>
01361 <span class="comment">             * Top level windows update send down to themselves WM_UPDATEUISTATE.</span>
01362 <span class="comment">             * WM_UPDATEUISTATE will change the state bits and broadcast down the message</span>
01363 <span class="comment">             */</span>
01364             <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a735">TestwndChild</a>(pwnd)) {
01365 
01366                 <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a600">SendMessageWorker</a>(<a class="code" href="../../d6/d0/usercli_8h.html#a27">REBASEPWND</a>(pwnd, spwndParent), WM_CHANGEUISTATE,
01367                               wParam, lParam, fAnsi);
01368             } <span class="keywordflow">else</span> {
01369                 <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a600">SendMessageWorker</a>(pwnd, WM_UPDATEUISTATE, wParam, lParam, fAnsi);
01370             }
01371 
01372         }
01373         <span class="keywordflow">break</span>;
01374 
01375     <span class="keywordflow">case</span> WM_QUERYUISTATE:
01376         <span class="keywordflow">return</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WEFPUIFOCUSHIDDEN) ? UISF_HIDEFOCUS : 0) |
01377                (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WEFPUIACCELHIDDEN) ? UISF_HIDEACCEL : 0);
01378         <span class="keywordflow">break</span>;
01379     }
01380 
01381     <span class="keywordflow">return</span> 0;
01382 
01383 <span class="preprocessor">#if DBG</span>
01384 <span class="preprocessor"></span>    } <span class="comment">// gfTurboDWP</span>
01385 <span class="preprocessor">#endif</span>
01386 <span class="preprocessor"></span>}
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a578" doxytag="usercli.h::DesktopWndProcA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LRESULT APIENTRY DesktopWndProcA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>msg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00099">99</a> of file <a class="el" href="../../d1/d8/clmsg_8c-source.html">clmsg.c</a>.
<p>
References <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00078">DesktopWndProcWorker()</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d7/d7/clinit_8c-source.html#l01219">ClientThreadSetup()</a>.
<p>
<pre class="fragment"><div>00104 {
00105     <span class="keywordflow">return</span> <a class="code" href="../../d0/d9/clmsg_8c.html#a10">DesktopWndProcWorker</a>(hwnd, message, wParam, lParam, TRUE);
00106 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a579" doxytag="usercli.h::DesktopWndProcW" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LRESULT APIENTRY DesktopWndProcW           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>msg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00108">108</a> of file <a class="el" href="../../d1/d8/clmsg_8c-source.html">clmsg.c</a>.
<p>
References <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00078">DesktopWndProcWorker()</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>.
<p>
Referenced by <a class="el" href="../../d7/d7/clinit_8c-source.html#l01219">ClientThreadSetup()</a>.
<p>
<pre class="fragment"><div>00113 {
00114     <span class="keywordflow">return</span> <a class="code" href="../../d0/d9/clmsg_8c.html#a10">DesktopWndProcWorker</a>(hwnd, message, wParam, lParam, FALSE);
00115 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a609" doxytag="usercli.h::DispatchClientMessage" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LRESULT DispatchClientMessage           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>message</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>ULONG_PTR&nbsp;</td>
          <td class="mdname" nowrap> <em>pfn</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l02822">2822</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l00187">CALLPROC_WOWCHECKPWW</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00192">GetClientInfo</a>, and <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00047">ValidateHwndNoRip()</a>.
<p>
Referenced by <a class="el" href="../../d7/d7/clinit_8c-source.html#l01219">ClientThreadSetup()</a>.
<p>
<pre class="fragment"><div>02828 {
02829     HWND hwnd = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a16">GetClientInfo</a>()-&gt;CallbackWnd.hwnd;
02830 
02831     <span class="comment">/*</span>
02832 <span class="comment">     * Assert that the header comment is legit (must be).</span>
02833 <span class="comment">     * for WM_TIMERs not associated to a window, pwnd can be NULL. So</span>
02834 <span class="comment">     *  don't rip validating the handle.</span>
02835 <span class="comment">     */</span>
02836     UserAssert(pwnd == <a class="code" href="../../d3/d9/client_2wow_8c.html#a1">ValidateHwndNoRip</a>(hwnd));
02837 
02838     <span class="comment">/*</span>
02839 <span class="comment">     * Add assert to catch dispatching messages to a thread not associated</span>
02840 <span class="comment">     * with a desktop.</span>
02841 <span class="comment">     */</span>
02842     UserAssert(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a16">GetClientInfo</a>()-&gt;ulClientDelta != 0);
02843 
02844     <span class="comment">/*</span>
02845 <span class="comment">     * More complicate then regular CALLPROC_WOWCHECK() we want to get the</span>
02846 <span class="comment">     * PWW so wow doesn't have to</span>
02847 <span class="comment">     */</span>
02848 
02849     <span class="comment">/* Bug 234292 - joejo</span>
02850 <span class="comment">     * Since the called window/dialog proc may have a different calling</span>
02851 <span class="comment">     * convention, we must wrap the call and, check esp and replace with</span>
02852 <span class="comment">     * a good esp when the call returns. This is what UserCallWinProc* does.</span>
02853 <span class="comment">    */</span>
02854 <span class="preprocessor">#ifdef _WIN64</span>
02855 <span class="preprocessor"></span>    UNREFERENCED_PARAMETER(pwnd);
02856 <span class="preprocessor">#endif</span>
02857 <span class="preprocessor"></span>
02858     <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a19">CALLPROC_WOWCHECKPWW</a>((WNDPROC)pfn, hwnd, message, wParam, lParam, &amp;(pwnd-&gt;state));
02859 
02860 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a573" doxytag="usercli.h::DispatchHookA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LRESULT DispatchHookA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname" nowrap> <em>dw</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HOOKPROC&nbsp;</td>
          <td class="mdname" nowrap> <em>pfn</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d7/d7/clinit_8c-source.html#l01219">ClientThreadSetup()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a572" doxytag="usercli.h::DispatchHookW" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LRESULT DispatchHookW           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname" nowrap> <em>dw</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HOOKPROC&nbsp;</td>
          <td class="mdname" nowrap> <em>pfn</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d7/d7/clinit_8c-source.html#l01219">ClientThreadSetup()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a416" doxytag="usercli.h::DispatchLocalAlloc" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HLOCAL WINAPI DispatchLocalAlloc           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>uFlags</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>uBytes</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hInstance</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d7/clinit_8c-source.html#l01549">1549</a> of file <a class="el" href="../../d7/d7/clinit_8c-source.html">clinit.c</a>.
<p>
<pre class="fragment"><div>01553 {
01554     UNREFERENCED_PARAMETER(hInstance);
01555 
01556     <span class="keywordflow">return</span> LocalAlloc(uFlags, uBytes);
01557 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a421" doxytag="usercli.h::DispatchLocalFree" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HLOCAL WINAPI DispatchLocalFree           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HLOCAL&nbsp;</td>
          <td class="mdname" nowrap> <em>hMem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hInstance</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d7/clinit_8c-source.html#l01599">1599</a> of file <a class="el" href="../../d7/d7/clinit_8c-source.html">clinit.c</a>.
<p>
<pre class="fragment"><div>01602 {
01603     UNREFERENCED_PARAMETER(hInstance);
01604 
01605     <span class="keywordflow">return</span> LocalFree(hMem);
01606 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a418" doxytag="usercli.h::DispatchLocalLock" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a5">LPVOID</a> WINAPI DispatchLocalLock           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HLOCAL&nbsp;</td>
          <td class="mdname" nowrap> <em>hMem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hInstance</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d7/clinit_8c-source.html#l01572">1572</a> of file <a class="el" href="../../d7/d7/clinit_8c-source.html">clinit.c</a>.
<p>
References <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">LPVOID</a>.
<p>
<pre class="fragment"><div>01575 {
01576     UNREFERENCED_PARAMETER(hInstance);
01577 
01578     <span class="keywordflow">return</span> LocalLock(hMem);
01579 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a417" doxytag="usercli.h::DispatchLocalReAlloc" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HLOCAL WINAPI DispatchLocalReAlloc           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HLOCAL&nbsp;</td>
          <td class="mdname" nowrap> <em>hMem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>uBytes</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>uFlags</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hInstance</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PVOID *&nbsp;</td>
          <td class="mdname" nowrap> <em>ppv</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d7/clinit_8c-source.html#l01559">1559</a> of file <a class="el" href="../../d7/d7/clinit_8c-source.html">clinit.c</a>.
<p>
<pre class="fragment"><div>01565 {
01566     UNREFERENCED_PARAMETER(hInstance);
01567     UNREFERENCED_PARAMETER(ppv);
01568 
01569     <span class="keywordflow">return</span> LocalReAlloc(hMem, uBytes, uFlags);
01570 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a420" doxytag="usercli.h::DispatchLocalSize" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> UINT WINAPI DispatchLocalSize           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HLOCAL&nbsp;</td>
          <td class="mdname" nowrap> <em>hMem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hInstance</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d7/clinit_8c-source.html#l01590">1590</a> of file <a class="el" href="../../d7/d7/clinit_8c-source.html">clinit.c</a>.
<p>
References <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>.
<p>
<pre class="fragment"><div>01593 {
01594     UNREFERENCED_PARAMETER(hInstance);
01595 
01596     <span class="keywordflow">return</span> (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)LocalSize(hMem);
01597 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a419" doxytag="usercli.h::DispatchLocalUnlock" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL WINAPI DispatchLocalUnlock           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HLOCAL&nbsp;</td>
          <td class="mdname" nowrap> <em>hMem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hInstance</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d7/clinit_8c-source.html#l01581">1581</a> of file <a class="el" href="../../d7/d7/clinit_8c-source.html">clinit.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>.
<p>
<pre class="fragment"><div>01584 {
01585     UNREFERENCED_PARAMETER(hInstance);
01586 
01587     <span class="keywordflow">return</span> LocalUnlock(hMem);
01588 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a736" doxytag="usercli.h::DlgDirSelectHelper" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL DlgDirSelectHelper           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">LPWSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>pFileName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>cbFileName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwndListBox</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d1/lboxctl3_8c-source.html#l00682">682</a> of file <a class="el" href="../../d1/d1/lboxctl3_8c-source.html">lboxctl3.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00926">CCHFILEMAX</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00283">CHARSTOBYTES</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00025">INT</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d6/d5/chartran_8c-source.html#l00636">RtlInitLargeUnicodeString()</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00652">SendMessage()</a>, <a class="el" href="../../d1/d1/lboxctl3_8c-source.html#l00021">TABCHAR</a>, <a class="el" href="../../d2/d4/w32_2ntuser_2rtl_2random_8c-source.html#l00108">TextCopy()</a>, and <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>.
<p>
Referenced by <a class="el" href="../../d3/d3/combodir_8c-source.html#l00093">DlgDirSelectComboBoxExW()</a>, <a class="el" href="../../d1/d1/lboxctl3_8c-source.html#l00784">DlgDirSelectExA()</a>, and <a class="el" href="../../d1/d1/lboxctl3_8c-source.html#l00807">DlgDirSelectExW()</a>.
<p>
<pre class="fragment"><div>00686 {
00687     <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a>   cch;
00688     LPWSTR lpchFile;
00689     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fDir;
00690     <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a> sItem;
00691     LPWSTR lpchT;
00692     WCHAR rgch[<a class="code" href="../../d6/d0/usercli_8h.html#a135">CCHFILEMAX</a> + 2];
00693     <span class="keywordtype">int</span> cchT;
00694     <a class="code" href="../../d2/d9/struct__LARGE__UNICODE__STRING.html">LARGE_UNICODE_STRING</a> str;
00695 
00696     <span class="comment">/*</span>
00697 <span class="comment">     * Callers such as DlgDirSelectEx do not validate the existance</span>
00698 <span class="comment">     * of hwndListBox</span>
00699 <span class="comment">     */</span>
00700     <span class="keywordflow">if</span> (hwndListBox == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00701         RIPERR0(ERROR_CONTROL_ID_NOT_FOUND, RIP_VERBOSE, <span class="stringliteral">""</span>);
00702         <span class="keywordflow">return</span> 0;
00703     }
00704 
00705     sItem = (<a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a>)<a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(hwndListBox, LB_GETCURSEL, 0, 0L);
00706     <span class="keywordflow">if</span> (sItem &lt; 0)
00707         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00708 
00709     cchT = (<a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a>)<a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(hwndListBox, LB_GETTEXT, sItem, (LPARAM)rgch);
00710     UserAssert(cchT &lt; (<span class="keyword">sizeof</span>(rgch)/<span class="keyword">sizeof</span>(rgch[0])));
00711 
00712     lpchFile = rgch;
00713     fDir = (*rgch == TEXT(<span class="charliteral">'['</span>));
00714 
00715     <span class="comment">/*</span>
00716 <span class="comment">     * Check if all details along with file name are to be returned.  Make sure</span>
00717 <span class="comment">     * we can find the listbox because with drop down combo boxes, the</span>
00718 <span class="comment">     * GetDlgItem will fail.</span>
00719 <span class="comment">     *</span>
00720 <span class="comment">     * Make sure this window has been using the listbox window proc because</span>
00721 <span class="comment">     * we store some data as a window long.</span>
00722 <span class="comment">     */</span>
00723 
00724     <span class="comment">/*</span>
00725 <span class="comment">     * Only the file name is to be returned.  Find the end of the filename.</span>
00726 <span class="comment">     */</span>
00727     lpchT = lpchFile;
00728     <span class="keywordflow">while</span> ((*lpchT) &amp;&amp; (*lpchT != <a class="code" href="../../d0/d2/lboxctl3_8c.html#a4">TABCHAR</a>))
00729         lpchT++;
00730     *lpchT = TEXT(<span class="charliteral">'\0'</span>);
00731 
00732     cch = wcslen(lpchFile);
00733 
00734     <span class="comment">/*</span>
00735 <span class="comment">     * Selection is drive or directory.</span>
00736 <span class="comment">     */</span>
00737     <span class="keywordflow">if</span> (fDir) {
00738         lpchFile++;
00739         cch--;
00740         *(lpchFile + cch - 1) = TEXT(<span class="charliteral">'\\'</span>);
00741 
00742         <span class="comment">/*</span>
00743 <span class="comment">         * Selection is drive</span>
00744 <span class="comment">         */</span>
00745         <span class="keywordflow">if</span> (rgch[1] == TEXT(<span class="charliteral">'-'</span>)) {
00746             lpchFile++;
00747             cch--;
00748             *(lpchFile + 1) = TEXT(<span class="charliteral">':'</span>);
00749             *(lpchFile + 2) = 0;
00750         }
00751     } <span class="keywordflow">else</span> {
00752 
00753         <span class="comment">/*</span>
00754 <span class="comment">         * Selection is file.  If filename has no extension, append '.'</span>
00755 <span class="comment">         */</span>
00756         lpchT = lpchFile;
00757         <span class="keywordflow">for</span> (; (cch &gt; 0) &amp;&amp; (*lpchT != <a class="code" href="../../d0/d2/lboxctl3_8c.html#a4">TABCHAR</a>);
00758                 cch--, lpchT++) {
00759             <span class="keywordflow">if</span> (*lpchT == TEXT(<span class="charliteral">'.'</span>))
00760                 <span class="keywordflow">goto</span> Exit;
00761         }
00762         <span class="keywordflow">if</span> (*lpchT == <a class="code" href="../../d0/d2/lboxctl3_8c.html#a4">TABCHAR</a>) {
00763             memmove(lpchT + 1, lpchT, <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a38">CHARSTOBYTES</a>(cch + 1));
00764             *lpchT = TEXT(<span class="charliteral">'.'</span>);
00765         } <span class="keywordflow">else</span> {
00766             *lpchT++ = TEXT(<span class="charliteral">'.'</span>);
00767             *lpchT = 0;
00768         }
00769     }
00770 
00771 Exit:
00772     <a class="code" href="../../d5/d6/chartran_8c.html#a7">RtlInitLargeUnicodeString</a>(&amp;str, lpchFile, (UINT)-1);
00773     <a class="code" href="../../d1/d5/w32_2ntuser_2rtl_2random_8c.html#a2">TextCopy</a>(&amp;str, lpszPathSpec, (UINT)chCount);
00774     <span class="keywordflow">return</span> fDir;
00775 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a759" doxytag="usercli.h::DlgSetFocus" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID DlgSetFocus           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hwnd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l00152">152</a> of file <a class="el" href="../../d4/d8/dlgmgr_8c-source.html">dlgmgr.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05902">NtUserSetFocus()</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00652">SendMessage()</a>, and <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>.
<p>
Referenced by <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l00460">DefDlgProcWorker()</a>, <a class="el" href="../../d1/d8/dlgbegin_8c-source.html#l00553">InternalCreateDialog()</a>, <a class="el" href="../../d6/d8/dlgmgr2_8c-source.html#l00317">IsDialogMessageW()</a>, and <a class="el" href="../../d6/d9/dmmnem_8c-source.html#l00219">xxxGotoNextMnem()</a>.
<p>
<pre class="fragment"><div>00154 {
00155     <span class="keywordflow">if</span> (((<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)<a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(hwnd, WM_GETDLGCODE, 0, 0)) &amp; DLGC_HASSETSEL) {
00156         <a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(hwnd, EM_SETSEL, 0, MAXLONG);
00157     }
00158 
00159     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a225">NtUserSetFocus</a>(hwnd);
00160 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a548" doxytag="usercli.h::DrawDiagonal" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL DrawDiagonal           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HDC&nbsp;</td>
          <td class="mdname" nowrap> <em>hdc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPRECT&nbsp;</td>
          <td class="mdname" nowrap> <em>lprc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HBRUSH&nbsp;</td>
          <td class="mdname" nowrap> <em>hbrTL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HBRUSH&nbsp;</td>
          <td class="mdname" nowrap> <em>hbrBR</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>flags</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d1/rtl_2draw_8c-source.html#l00345">345</a> of file <a class="el" href="../../d0/d1/rtl_2draw_8c-source.html">rtl/draw.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d0/d1/rtl_2draw_8c-source.html#l00114">DrawDiagonalLine()</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d7/d0/userrtl_8h-source.html#l00153">UserSelectBrush</a>.
<p>
Referenced by <a class="el" href="../../d0/d1/rtl_2draw_8c-source.html#l00896">DrawEdge()</a>.
<p>
<pre class="fragment"><div>00351 {
00352     HBRUSH  hbrT;
00353     <span class="keywordtype">int</span>     nDirection;
00354     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>   dAdjust;
00355 
00356     <span class="comment">/*</span>
00357 <span class="comment">     * Away from light source</span>
00358 <span class="comment">     */</span>
00359     hbrT = ((flags &amp; BF_BOTTOM) ? hbrBR : hbrTL);
00360 
00361     <span class="keywordflow">switch</span> (flags &amp; (BF_RECT | BF_DIAGONAL)){
00362 
00363     <span class="keywordflow">case</span> BF_DIAGONAL_ENDTOPLEFT:
00364     <span class="keywordflow">case</span> BF_DIAGONAL_ENDBOTTOMRIGHT:
00365         nDirection = -1;
00366         <span class="keywordflow">break</span>;
00367 
00368     <span class="keywordflow">default</span>:
00369         nDirection = 1;
00370         <span class="keywordflow">break</span>;
00371     }
00372 
00373     hbrT = <a class="code" href="../../d6/d1/userrtl_8h.html#a18">UserSelectBrush</a>(hdc, hbrT);
00374     dAdjust = <a class="code" href="../../d9/d1/rtl_2draw_8c.html#a5">DrawDiagonalLine</a>(hdc, lprc, nDirection, 1, (flags &amp; ~BF_MIDDLE));
00375     <span class="comment">/*</span>
00376 <span class="comment">     * Adjust rectangle for next border</span>
00377 <span class="comment">     */</span>
00378     <span class="keywordflow">if</span> (flags &amp; BF_TOP)
00379         lprc-&gt;left += LOWORD(dAdjust);
00380     <span class="keywordflow">else</span>
00381         lprc-&gt;right -= LOWORD(dAdjust);
00382 
00383     <span class="keywordflow">if</span> (flags &amp; BF_RIGHT)
00384         lprc-&gt;top += HIWORD(dAdjust);
00385     <span class="keywordflow">else</span>
00386         lprc-&gt;bottom -= HIWORD(dAdjust);
00387 
00388     <span class="comment">/*</span>
00389 <span class="comment">     * Moved this to the end to save a check for return value</span>
00390 <span class="comment">     */</span>
00391     <span class="keywordflow">return</span> (<a class="code" href="../../d6/d1/userrtl_8h.html#a18">UserSelectBrush</a>(hdc, hbrT) != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>);
00392 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a461" doxytag="usercli.h::ECAdjustIch" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a> ECAdjustIch           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPSTR&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d3/editec_8c-source.html#l04133">4133</a> of file <a class="el" href="../../d9/d3/editec_8c-source.html">editec.c</a>.
<p>
References <a class="el" href="../../d9/d3/editec_8c-source.html#l04083">ECIsDBCSLeadByte()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00640">tagED::fAnsi</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00611">tagED::fDBCS</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00626">ICH</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/editec_8c-source.html#l04162">ECAdjustIchNext()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l01281">ECCchInWidth()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02059">ECInsertText()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l01562">MLBuildchLines()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l03991">MLDrawText()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l01040">MLInsertText()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l00689">MLMouseToIch()</a>, <a class="el" href="../../d6/d4/edmlrare_8c-source.html#l00368">MLSetSelection()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l00395">SLChangeSelection()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l00737">SLDrawText()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l01934">SLMouseToIch()</a>, and <a class="el" href="../../d4/d4/editsl_8c-source.html#l00932">SLScrollText()</a>.
<p>
<pre class="fragment"><div>04134 {
04135     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a> newch = ch;
04136 
04137     <span class="keywordflow">if</span> (!ped-&gt;fAnsi || !ped-&gt;fDBCS || newch == 0)
04138         <span class="keywordflow">return</span> ( ch );
04139 
04140     <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d0/usercli_8h.html#a464">ECIsDBCSLeadByte</a>(ped,lpstr[--newch]))
04141         <span class="keywordflow">return</span> ( ch );  <span class="comment">// previous char is SBCS</span>
04142     <span class="keywordflow">while</span>(1) {
04143         <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d0/usercli_8h.html#a464">ECIsDBCSLeadByte</a>(ped,lpstr[newch])) {
04144             newch++;
04145             <span class="keywordflow">break</span>;
04146         }
04147         <span class="keywordflow">if</span> (newch)
04148             newch--;
04149         <span class="keywordflow">else</span>
04150             <span class="keywordflow">break</span>;
04151     }
04152     <span class="keywordflow">return</span> ((ch - newch) &amp; 1) ? ch-1 : ch;
04153 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a462" doxytag="usercli.h::ECAdjustIchNext" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a> ECAdjustIchNext           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPSTR&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d3/editec_8c-source.html#l04162">4162</a> of file <a class="el" href="../../d9/d3/editec_8c-source.html">editec.c</a>.
<p>
References <a class="el" href="../../d9/d3/editec_8c-source.html#l04133">ECAdjustIch()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l03926">ECAnsiNext()</a>, <a class="el" href="../../d7/d6/aug98_2dll32_2icmdll_8h-source.html#l00010">FAR</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00626">ICH</a>.
<p>
Referenced by <a class="el" href="../../d2/d4/editml_8c-source.html#l03991">MLDrawText()</a>, and <a class="el" href="../../d4/d4/editsl_8c-source.html#l00932">SLScrollText()</a>.
<p>
<pre class="fragment"><div>04163 {
04164     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a> ichNew = <a class="code" href="../../d6/d0/usercli_8h.html#a461">ECAdjustIch</a>(ped,lpstr,ch);
04165     LPSTR lpnew = lpstr+ichNew;
04166 
04167     <span class="comment">// if ch &gt; ichNew then ECAdjustIch adjusted ich.</span>
04168     <span class="keywordflow">if</span> (ch &gt; ichNew)
04169        lpnew = <a class="code" href="../../d6/d0/usercli_8h.html#a465">ECAnsiNext</a>(ped, lpnew);
04170 
04171     <span class="keywordflow">return</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a>)(lpnew-lpstr);
04172 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a465" doxytag="usercli.h::ECAnsiNext" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LPSTR ECAnsiNext           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPSTR&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d3/editec_8c-source.html#l03926">3926</a> of file <a class="el" href="../../d9/d3/editec_8c-source.html">editec.c</a>.
<p>
References <a class="el" href="../../d9/d3/editec_8c-source.html#l04083">ECIsDBCSLeadByte()</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/editec_8c-source.html#l04162">ECAdjustIchNext()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l01552">ECWord()</a>, and <a class="el" href="../../d4/d4/editsl_8c-source.html#l00507">SLDrawLine()</a>.
<p>
<pre class="fragment"><div>03927 {
03928     <span class="keywordflow">return</span> lpCurrent+((<a class="code" href="../../d6/d0/usercli_8h.html#a464">ECIsDBCSLeadByte</a>(ped,*lpCurrent)==<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>) ? 2 : 1);
03929 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a466" doxytag="usercli.h::ECAnsiPrev" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LPSTR ECAnsiPrev           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPSTR&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPSTR&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d3/editec_8c-source.html#l03938">3938</a> of file <a class="el" href="../../d9/d3/editec_8c-source.html">editec.c</a>.
<p>
References <a class="el" href="../../d9/d3/editec_8c-source.html#l04083">ECIsDBCSLeadByte()</a>, and <a class="el" href="../../d7/d9/usercli_8h-source.html#l00611">tagED::fDBCS</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/editec_8c-source.html#l01552">ECWord()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l01562">MLBuildchLines()</a>, and <a class="el" href="../../d4/d4/editsl_8c-source.html#l00507">SLDrawLine()</a>.
<p>
<pre class="fragment"><div>03939 {
03940     LPSTR lpCurrent = lpStr -1;
03941 
03942     <span class="keywordflow">if</span> (!ped-&gt;fDBCS)
03943         <span class="keywordflow">return</span> lpCurrent;                        <span class="comment">// just return ( lpStr - 1 )</span>
03944 
03945     <span class="keywordflow">if</span> (lpBase &gt;= lpCurrent)
03946         <span class="keywordflow">return</span> lpBase;
03947 
03948     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a464">ECIsDBCSLeadByte</a>(ped, *lpCurrent))     <span class="comment">// this check makes things faster</span>
03949         <span class="keywordflow">return</span> (lpCurrent - 1);                  <span class="comment">// 92/04/04 takaok</span>
03950 
03951     <span class="keywordflow">do</span> {
03952         lpCurrent--;
03953         <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d0/usercli_8h.html#a464">ECIsDBCSLeadByte</a>(ped, *lpCurrent)) {
03954             lpCurrent++;
03955             <span class="keywordflow">break</span>;
03956         }
03957     } <span class="keywordflow">while</span>(lpCurrent != lpBase);
03958 
03959     <span class="keywordflow">return</span> lpStr - (((lpStr - lpCurrent) &amp; 1) ? 1 : 2);
03960 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a457" doxytag="usercli.h::ECCalcChangeSelection" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL ECCalcChangeSelection           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d7/d8/structtagBLOCK.html">LPBLOCK</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d7/d8/structtagBLOCK.html">LPBLOCK</a>&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d3/editec_8c-source.html#l03692">3692</a> of file <a class="el" href="../../d9/d3/editec_8c-source.html">editec.c</a>.
<p>
References <a class="el" href="../../d6/d0/usercli_8h.html#a364">BLOCK</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l03652">ECFindXORblks()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00758">tagBLOCK::EndPos</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00563">tagED::ichMaxSel</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00561">tagED::ichMinSel</a>, <a class="el" href="../../d9/d5/sertl_8c-source.html#l00332">max</a>, <a class="el" href="../../d6/d3/acpitabl_8h-source.html#l00366">min</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00757">tagBLOCK::StPos</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d2/d4/editml_8c-source.html#l00919">MLChangeSelection()</a>, and <a class="el" href="../../d4/d4/editsl_8c-source.html#l00395">SLChangeSelection()</a>.
<p>
<pre class="fragment"><div>03698 {
03699     <a class="code" href="../../d7/d8/structtagBLOCK.html">BLOCK</a> Blk[2];
03700     <span class="keywordtype">int</span> iBlkCount = 0;
03701 
03702     Blk[0].<a class="code" href="../../d7/d8/structtagBLOCK.html#o0">StPos</a> = Blk[0].<a class="code" href="../../d7/d8/structtagBLOCK.html#o1">EndPos</a> = Blk[1].<a class="code" href="../../d7/d8/structtagBLOCK.html#o0">StPos</a> = Blk[1].<a class="code" href="../../d7/d8/structtagBLOCK.html#o1">EndPos</a> = 0xFFFFFFFF;
03703 
03704     <span class="comment">/*</span>
03705 <span class="comment">     * Check if the Old selection block existed</span>
03706 <span class="comment">     */</span>
03707     <span class="keywordflow">if</span> (ichOldMinSel != ichOldMaxSel) {
03708 
03709         <span class="comment">/*</span>
03710 <span class="comment">         * Yes! Old block existed.</span>
03711 <span class="comment">         */</span>
03712         Blk[0].<a class="code" href="../../d7/d8/structtagBLOCK.html#o0">StPos</a> = OldBlk-&gt;StPos;
03713         Blk[0].<a class="code" href="../../d7/d8/structtagBLOCK.html#o1">EndPos</a> = OldBlk-&gt;EndPos;
03714         iBlkCount++;
03715     }
03716 
03717     <span class="comment">/*</span>
03718 <span class="comment">     * Check if the new Selection block exists</span>
03719 <span class="comment">     */</span>
03720     <span class="keywordflow">if</span> (ped-&gt;ichMinSel != ped-&gt;ichMaxSel) {
03721 
03722         <span class="comment">/*</span>
03723 <span class="comment">         * Yes! New block exists</span>
03724 <span class="comment">         */</span>
03725         Blk[1].<a class="code" href="../../d7/d8/structtagBLOCK.html#o0">StPos</a> = NewBlk-&gt;StPos;
03726         Blk[1].<a class="code" href="../../d7/d8/structtagBLOCK.html#o1">EndPos</a> = NewBlk-&gt;EndPos;
03727         iBlkCount++;
03728     }
03729 
03730     <span class="comment">/*</span>
03731 <span class="comment">     * If both the blocks exist find the XOR of them</span>
03732 <span class="comment">     */</span>
03733     <span class="keywordflow">if</span> (iBlkCount == 2) {
03734 
03735         <span class="comment">/*</span>
03736 <span class="comment">         * Check if both blocks start at the same character position</span>
03737 <span class="comment">         */</span>
03738         <span class="keywordflow">if</span> (ichOldMinSel == ped-&gt;ichMinSel) {
03739 
03740             <span class="comment">/*</span>
03741 <span class="comment">             * Check if they end at the same character position</span>
03742 <span class="comment">             */</span>
03743             <span class="keywordflow">if</span> (ichOldMaxSel == ped-&gt;ichMaxSel)
03744                 <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>; <span class="comment">/* Nothing changes */</span>
03745 
03746             Blk[0].<a class="code" href="../../d7/d8/structtagBLOCK.html#o0">StPos</a> = <a class="code" href="../../d5/d4/acpitabl_8h.html#a69">min</a>(NewBlk -&gt; EndPos, OldBlk -&gt; EndPos);
03747             Blk[0].<a class="code" href="../../d7/d8/structtagBLOCK.html#o1">EndPos</a> = <a class="code" href="../../d8/d6/sertl_8c.html#a1">max</a>(NewBlk -&gt; EndPos, OldBlk -&gt; EndPos);
03748             Blk[1].<a class="code" href="../../d7/d8/structtagBLOCK.html#o0">StPos</a> = 0xFFFFFFFF;
03749         } <span class="keywordflow">else</span> {
03750             <span class="keywordflow">if</span> (ichOldMaxSel == ped-&gt;ichMaxSel) {
03751                 Blk[0].<a class="code" href="../../d7/d8/structtagBLOCK.html#o0">StPos</a> = <a class="code" href="../../d5/d4/acpitabl_8h.html#a69">min</a>(NewBlk-&gt;StPos, OldBlk-&gt;StPos);
03752                 Blk[0].<a class="code" href="../../d7/d8/structtagBLOCK.html#o1">EndPos</a> = <a class="code" href="../../d8/d6/sertl_8c.html#a1">max</a>(NewBlk-&gt;StPos, OldBlk-&gt;StPos);
03753                 Blk[1].<a class="code" href="../../d7/d8/structtagBLOCK.html#o0">StPos</a> = 0xFFFFFFFF;
03754             } <span class="keywordflow">else</span> {
03755                 <a class="code" href="../../d6/d0/usercli_8h.html#a458">ECFindXORblks</a>(OldBlk, NewBlk, &amp;Blk[0], &amp;Blk[1]);
03756             }
03757         }
03758     }
03759 
03760     RtlCopyMemory(OldBlk, &amp;Blk[0], <span class="keyword">sizeof</span>(<a class="code" href="../../d7/d8/structtagBLOCK.html">BLOCK</a>));
03761     RtlCopyMemory(NewBlk, &amp;Blk[1], <span class="keyword">sizeof</span>(<a class="code" href="../../d7/d8/structtagBLOCK.html">BLOCK</a>));
03762 
03763     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>; <span class="comment">/* Yup , There is something to paint */</span>
03764 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a443" doxytag="usercli.h::ECCchInWidth" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a> ECCchInWidth           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HDC&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPSTR&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d3/editec_8c-source.html#l01281">1281</a> of file <a class="el" href="../../d9/d3/editec_8c-source.html">editec.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l00677">tagED::aveCharWidth</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00661">tagED::cbChar</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00578">tagED::charPasswordChar</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00582">tagED::cPasswordCharWidth</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l04133">ECAdjustIch()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01047">ECT_CALC</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00770">ECTabTheTextOut()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00640">tagED::fAnsi</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00611">tagED::fDBCS</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00605">tagED::fNonPropFont</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00599">tagED::fSingle</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00626">ICH</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00496">MAXLINELENGTH</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00023">umax</a>, and <a class="el" href="../../d6/d3/edecrare_8c-source.html#l00028">umin</a>.
<p>
Referenced by <a class="el" href="../../d2/d4/editml_8c-source.html#l01562">MLBuildchLines()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l00689">MLMouseToIch()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l00080">SLCalcXOffsetSpecial()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l00737">SLDrawText()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l01074">SLInsertText()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l01934">SLMouseToIch()</a>, and <a class="el" href="../../d4/d4/editsl_8c-source.html#l00932">SLScrollText()</a>.
<p>
<pre class="fragment"><div>01288 {
01289     <span class="keywordtype">int</span> stringExtent;
01290     <span class="keywordtype">int</span> cchhigh;
01291     <span class="keywordtype">int</span> cchnew = 0;
01292     <span class="keywordtype">int</span> cchlow = 0;
01293     SIZE size;
01294     LPSTR lpStart;
01295 
01296     <span class="keywordflow">if</span> ((width &lt;= 0) || !cch)
01297         <span class="keywordflow">return</span> (0);
01298 
01299     <span class="comment">/*</span>
01300 <span class="comment">     * Optimize nonproportional fonts for single line ec since they don't have</span>
01301 <span class="comment">     * tabs.</span>
01302 <span class="comment">     */</span>
01303     <span class="comment">//</span>
01304     <span class="comment">// Change optimize condition for fixed pitch font</span>
01305     <span class="comment">//</span>
01306     <span class="keywordflow">if</span> (ped-&gt;fNonPropFont &amp;&amp; ped-&gt;fSingle &amp;&amp; !ped-&gt;fDBCS) {
01307         <span class="keywordflow">return</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a461">ECAdjustIch</a>( ped, lpText, <a class="code" href="../../d5/d4/edecrare_8c.html#a3">umin</a>(width/ped-&gt;aveCharWidth,(<span class="keywordtype">int</span>)cch)));
01308     }
01309 
01310     <span class="comment">/*</span>
01311 <span class="comment">     * Check if password hidden chars are being used.</span>
01312 <span class="comment">     */</span>
01313     <span class="keywordflow">if</span> (ped-&gt;charPasswordChar) {
01314         <span class="keywordflow">return</span> (<a class="code" href="../../d5/d4/edecrare_8c.html#a3">umin</a>(width / ped-&gt;cPasswordCharWidth, (<span class="keywordtype">int</span>)cch));
01315     }
01316 
01317     <span class="comment">/*</span>
01318 <span class="comment">     * ALWAYS RESTRICT TO AT MOST MAXLINELENGTH to avoid overflow...</span>
01319 <span class="comment">     */</span>
01320     cch = <a class="code" href="../../d5/d4/edecrare_8c.html#a3">umin</a>(MAXLINELENGTH, cch);
01321 
01322     cchhigh = cch + 1;
01323     <span class="keywordflow">while</span> (cchlow &lt; cchhigh - 1) {
01324         cchnew = <a class="code" href="../../d8/d4/editec_8c.html#a1">umax</a>((cchhigh - cchlow) / 2, 1) + cchlow;
01325 
01326         lpStart = lpText;
01327 
01328         <span class="comment">/*</span>
01329 <span class="comment">         * If we want to figure out how many fit starting at the end and moving</span>
01330 <span class="comment">         * backwards, make sure we move to the appropriate position in the</span>
01331 <span class="comment">         * string before calculating the text extent.</span>
01332 <span class="comment">         */</span>
01333         <span class="keywordflow">if</span> (!fForward)
01334             lpStart += (cch - cchnew)*ped-&gt;cbChar;
01335 
01336         <span class="keywordflow">if</span> (ped-&gt;fSingle) {
01337             <span class="keywordflow">if</span> (ped-&gt;fAnsi)
01338                 GetTextExtentPointA(hdc, (LPSTR)lpStart, cchnew, &amp;size);
01339             <span class="keywordflow">else</span>
01340                 GetTextExtentPointW(hdc, (LPWSTR)lpStart, cchnew, &amp;size);
01341             stringExtent = size.cx;
01342         } <span class="keywordflow">else</span> {
01343             stringExtent = <a class="code" href="../../d6/d0/usercli_8h.html#a478">ECTabTheTextOut</a>(hdc, 0, 0, 0, 0,
01344                 lpStart,
01345                 cchnew, 0,
01346                 ped, 0, ECT_CALC, NULL );
01347         }
01348 
01349         <span class="keywordflow">if</span> (stringExtent &gt; width) {
01350             cchhigh = cchnew;
01351         } <span class="keywordflow">else</span> {
01352             cchlow = cchnew;
01353         }
01354     }
01355     <span class="comment">//</span>
01356     <span class="comment">// Call ECAdjustIch ( generic case )</span>
01357     <span class="comment">//</span>
01358     cchlow = <a class="code" href="../../d6/d0/usercli_8h.html#a461">ECAdjustIch</a>( ped, lpText, cchlow );
01359     <span class="keywordflow">return</span> (cchlow);
01360 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a456" doxytag="usercli.h::ECCopy" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a> ECCopy           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d3/editec_8c-source.html#l02703">2703</a> of file <a class="el" href="../../d9/d3/editec_8c-source.html">editec.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l00661">tagED::cbChar</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00578">tagED::charPasswordChar</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00549">CI_16BIT</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00052">ECLock()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00086">ECUnlock()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00640">tagED::fAnsi</a>, <a class="el" href="../../d7/d6/aug98_2dll32_2icmdll_8h-source.html#l00010">FAR</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00192">GetClientInfo</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00584">tagED::hwnd</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00626">ICH</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00563">tagED::ichMaxSel</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00561">tagED::ichMinSel</a>, <a class="el" href="../../d9/d5/ntuser_2client_2globals_8h-source.html#l00090">LHND</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l03252">NtUserCloseClipboard()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l03263">NtUserEmptyClipboard()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01564">NtUserMessageBeep</a>, <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00540">OpenClipboard()</a>, <a class="el" href="../../d9/d5/ntuser_2client_2globals_8h-source.html#l00137">pfnWowEmptyClipBoard</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l00876">SetClipboardData()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00125">UserGlobalAlloc</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00128">USERGLOBALLOCK</a>, and <a class="el" href="../../d7/d9/usercli_8h-source.html#l00123">USERGLOBALUNLOCK</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/editec_8c-source.html#l02904">EditWndProc()</a>.
<p>
<pre class="fragment"><div>02705 {
02706     HANDLE hData;
02707     <span class="keywordtype">char</span> *pchSel;
02708     <span class="keywordtype">char</span> <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a5">FAR</a> *lpchClip;
02709     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a> cbData;
02710 
02711     <span class="comment">/*</span>
02712 <span class="comment">     * Don't allow copies from password style controls</span>
02713 <span class="comment">     */</span>
02714     <span class="keywordflow">if</span> (ped-&gt;charPasswordChar) {
02715         <a class="code" href="../../d6/d0/usercli_8h.html#a219">NtUserMessageBeep</a>(0);
02716         <span class="keywordflow">return</span> 0;
02717     }
02718 
02719     cbData = (ped-&gt;ichMaxSel - ped-&gt;ichMinSel) * ped-&gt;cbChar;
02720 
02721     <span class="keywordflow">if</span> (!cbData)
02722         <span class="keywordflow">return</span> 0;
02723 
02724     <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d9/client_2ntstubs_8c.html#a17">OpenClipboard</a>(ped-&gt;hwnd))
02725         <span class="keywordflow">return</span> 0;
02726 
02727     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a130">NtUserEmptyClipboard</a>();
02728 
02729     <span class="comment">/*</span>
02730 <span class="comment">     * If we just called EmptyClipboard in the context of a 16 bit</span>
02731 <span class="comment">     * app then we also have to tell WOW to nix its 16 handle copy of</span>
02732 <span class="comment">     * clipboard data.  WOW does its own clipboard caching because</span>
02733 <span class="comment">     * some 16 bit apps use clipboard data even after the clipboard</span>
02734 <span class="comment">     * has been emptied.  See the note in the server code.</span>
02735 <span class="comment">     *</span>
02736 <span class="comment">     * Note: this is the only place where EmptyClipboard is called</span>
02737 <span class="comment">     * for a 16 bit app not going through WOW.  If we added others</span>
02738 <span class="comment">     * we might want to move this into EmptyClipboard and have two</span>
02739 <span class="comment">     * versions.</span>
02740 <span class="comment">     */</span>
02741     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a16">GetClientInfo</a>()-&gt;CI_flags &amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a114">CI_16BIT</a>) {
02742         <a class="code" href="../../d8/d6/ntuser_2client_2globals_8h.html#a62">pfnWowEmptyClipBoard</a>();
02743     }
02744 
02745 
02746     <span class="comment">/*</span>
02747 <span class="comment">     * +1 for the terminating NULL</span>
02748 <span class="comment">     */</span>
02749     <span class="keywordflow">if</span> (!(hData = <a class="code" href="../../d6/d0/usercli_8h.html#a3">UserGlobalAlloc</a>(LHND, (LONG)(cbData + ped-&gt;cbChar)))) {
02750         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a129">NtUserCloseClipboard</a>();
02751         <span class="keywordflow">return</span> (0);
02752     }
02753 
02754     <a class="code" href="../../d6/d0/usercli_8h.html#a4">USERGLOBALLOCK</a>(hData, lpchClip);
02755     UserAssert(lpchClip);
02756     pchSel = <a class="code" href="../../d6/d0/usercli_8h.html#a433">ECLock</a>(ped);
02757     pchSel = pchSel + (ped-&gt;ichMinSel * ped-&gt;cbChar);
02758 
02759     RtlCopyMemory(lpchClip, pchSel, cbData);
02760 
02761     <span class="keywordflow">if</span> (ped-&gt;fAnsi)
02762         *(lpchClip + cbData) = 0;
02763     <span class="keywordflow">else</span>
02764         *(LPWSTR)(lpchClip + cbData) = (WCHAR)0;
02765 
02766     <a class="code" href="../../d6/d0/usercli_8h.html#a434">ECUnlock</a>(ped);
02767     <a class="code" href="../../d6/d0/usercli_8h.html#a1">USERGLOBALUNLOCK</a>(hData);
02768 
02769     <a class="code" href="../../d3/d8/client_8c.html#a43">SetClipboardData</a>( ped-&gt;fAnsi ? CF_TEXT : CF_UNICODETEXT, hData);
02770 
02771     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a129">NtUserCloseClipboard</a>();
02772 
02773     <span class="keywordflow">return</span> (cbData);
02774 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a437" doxytag="usercli.h::ECCreate" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL ECCreate           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ped</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LONG&nbsp;</td>
          <td class="mdname" nowrap> <em>windowStyle</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d3/edecrare_8c-source.html#l00387">387</a> of file <a class="el" href="../../d6/d3/edecrare_8c-source.html">edecrare.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d0/d7/halvprnt_8c-source.html#l00031">BYTE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00555">tagED::cchTextMax</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00689">tagED::charSet</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02492">ECGetEditDC()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01183">ECInitInsert()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02524">ECReleaseEditDC()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l03289">tagLPKEDITCALLOUT::EditCreate</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00609">tagED::fAutoHScroll</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00610">tagED::fNoHideSel</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00664">tagED::format</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00111">fpLpkEditControl</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01514">HW</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00626">ICH</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00503">MAXTEXT</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00702">tagED::pLpkEditCallout</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00585">tagED::pwnd</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01124">THREAD_HKL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02372">WEFRIGHT</a>.
<p>
Referenced by <a class="el" href="../../d5/d4/edmlonce_8c-source.html#l00023">MLCreate()</a>, and <a class="el" href="../../d7/d4/edslrare_8c-source.html#l00027">SLCreate()</a>.
<p>
<pre class="fragment"><div>00390 {
00391     HDC hdc;
00392 
00393     <span class="comment">/*</span>
00394 <span class="comment">     * Get values from the window instance data structure and put them in the</span>
00395 <span class="comment">     * ped so that we can access them easier.</span>
00396 <span class="comment">     */</span>
00397     <span class="keywordflow">if</span> (windowStyle &amp; ES_AUTOHSCROLL)
00398         ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o30">fAutoHScroll</a> = 1;
00399     <span class="keywordflow">if</span> (windowStyle &amp; ES_NOHIDESEL)
00400         ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o31">fNoHideSel</a> = 1;
00401 
00402     ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o62">format</a> = (LOWORD(windowStyle) &amp; LOWORD(ES_FMTMASK));
00403     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o15">pwnd</a>, WEFRIGHT) &amp;&amp; !ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o62">format</a>)
00404         ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o62">format</a> = ES_RIGHT;
00405 
00406     ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o2">cchTextMax</a> = <a class="code" href="../../d6/d0/usercli_8h.html#a75">MAXTEXT</a>; <span class="comment">/* Max # chars we will initially allow */</span>
00407 
00408     <span class="comment">/*</span>
00409 <span class="comment">     * Set up undo initial conditions... (ie. nothing to undo)</span>
00410 <span class="comment">     */</span>
00411     ped-&gt;ichDeleted = (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a>)-1;
00412     ped-&gt;ichInsStart = (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a>)-1;
00413     ped-&gt;ichInsEnd = (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a>)-1;
00414 
00415     <span class="comment">// initial charset value - need to do this BEFORE MLCreate is called</span>
00416     <span class="comment">// so that we know not to fool with scrollbars if nessacary</span>
00417     hdc = <a class="code" href="../../d6/d0/usercli_8h.html#a451">ECGetEditDC</a>(ped, TRUE);
00418     ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o75">charSet</a> = (<a class="code" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a>)GetTextCharset(hdc);
00419     <a class="code" href="../../d6/d0/usercli_8h.html#a452">ECReleaseEditDC</a>(ped, hdc, TRUE);
00420 
00421     <span class="comment">// FE_IME</span>
00422     <span class="comment">// EC_INSERT_COMPOSITION_CHARACTER: ECCreate() - call ECInitInsert()</span>
00423     <a class="code" href="../../d6/d0/usercli_8h.html#a473">ECInitInsert</a>(ped, <a class="code" href="../../d6/d0/usercli_8h.html#a151">THREAD_HKL</a>());
00424 
00425     <span class="keywordflow">if</span>(ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o84">pLpkEditCallout</a> = <a class="code" href="../../d1/d8/clglobal_8c.html#a35">fpLpkEditControl</a>) {
00426         <span class="keywordflow">return</span> ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o84">pLpkEditCallout</a>-&gt;<a class="code" href="../../d2/d0/structtagLPKEDITCALLOUT.html#o0">EditCreate</a>(ped, <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a450">HW</a>(ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o15">pwnd</a>));
00427     } <span class="keywordflow">else</span>
00428         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00429 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a447" doxytag="usercli.h::ECDeleteText" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a> ECDeleteText           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d3/editec_8c-source.html#l02293">2293</a> of file <a class="el" href="../../d9/d3/editec_8c-source.html">editec.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l00661">tagED::cbChar</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00557">tagED::cch</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00553">tagED::cchAlloc</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00484">CCHALLOCEXTRA</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l01977">ECEmptyUndo()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02492">ECGetEditDC()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00052">ECLock()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02524">ECReleaseEditDC()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00086">ECUnlock()</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l03417">tagLPKEDITCALLOUT::EditAdjustCaret</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00603">tagED::fDirty</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00706">tagED::hInstance</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00552">tagED::hText</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00626">ICH</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00564">tagED::ichCaret</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00563">tagED::ichMaxSel</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00561">tagED::ichMinSel</a>, <a class="el" href="../../d9/d5/ntuser_2client_2globals_8h-source.html#l00090">LHND</a>, <a class="el" href="../../d9/d5/ntuser_2client_2globals_8h-source.html#l00109">LOCALREALLOC</a>, <a class="el" href="../../d9/d5/ntuser_2client_2globals_8h-source.html#l00115">LOCALSIZE</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00702">tagED::pLpkEditCallout</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00540">Pundo</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00526">UNDO_DELETE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00525">UNDO_INSERT</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00524">UNDO_NONE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00125">UserGlobalAlloc</a>, and <a class="el" href="../../d7/d9/usercli_8h-source.html#l00129">UserGlobalReAlloc</a>.
<p>
Referenced by <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01337">ECImeComposition()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02904">EditWndProc()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l01367">MLDeleteText()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l01304">SLChar()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l02467">SLPaste()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l01225">SLReplaceSel()</a>, and <a class="el" href="../../d7/d4/edslrare_8c-source.html#l00087">SLUndo()</a>.
<p>
<pre class="fragment"><div>02295 {
02296     PSTR pedText;
02297     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a> cchDelete;
02298     LPSTR lpDeleteSaveBuffer;
02299     HANDLE hDeletedText;
02300     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> bufferOffset;
02301 
02302     cchDelete = ped-&gt;ichMaxSel - ped-&gt;ichMinSel;
02303 
02304     <span class="keywordflow">if</span> (!cchDelete)
02305         <span class="keywordflow">return</span> (0);
02306 
02307     <span class="comment">/*</span>
02308 <span class="comment">     * Ok, now lets delete the text.</span>
02309 <span class="comment">     */</span>
02310     pedText = <a class="code" href="../../d6/d0/usercli_8h.html#a433">ECLock</a>(ped);
02311 
02312     <span class="comment">/*</span>
02313 <span class="comment">     * Adjust UNDO fields so that we can undo this delete...</span>
02314 <span class="comment">     */</span>
02315     <span class="keywordflow">if</span> (ped-&gt;undoType == <a class="code" href="../../d6/d0/usercli_8h.html#a82">UNDO_NONE</a>) {
02316 UNDODELETEFROMSCRATCH:
02317         <span class="keywordflow">if</span> (ped-&gt;hDeletedText = <a class="code" href="../../d6/d0/usercli_8h.html#a3">UserGlobalAlloc</a>(GPTR, (LONG)((cchDelete+1)*ped-&gt;cbChar))) {
02318             ped-&gt;undoType = <a class="code" href="../../d6/d0/usercli_8h.html#a84">UNDO_DELETE</a>;
02319             ped-&gt;ichDeleted = ped-&gt;ichMinSel;
02320             ped-&gt;cchDeleted = cchDelete;
02321             lpDeleteSaveBuffer = ped-&gt;hDeletedText;
02322             RtlCopyMemory(lpDeleteSaveBuffer, pedText + ped-&gt;ichMinSel*ped-&gt;cbChar, cchDelete*ped-&gt;cbChar);
02323             lpDeleteSaveBuffer[cchDelete*ped-&gt;cbChar] = 0;
02324         }
02325     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ped-&gt;undoType &amp; <a class="code" href="../../d6/d0/usercli_8h.html#a83">UNDO_INSERT</a>) {
02326 UNDODELETE:
02327         <a class="code" href="../../d6/d0/usercli_8h.html#a444">ECEmptyUndo</a>(<a class="code" href="../../d6/d0/usercli_8h.html#a85">Pundo</a>(ped));
02328 
02329         ped-&gt;ichInsStart = ped-&gt;ichInsEnd = 0xFFFFFFFF;
02330         ped-&gt;ichDeleted = 0xFFFFFFFF;
02331         ped-&gt;cchDeleted = 0;
02332         <span class="keywordflow">goto</span> UNDODELETEFROMSCRATCH;
02333     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ped-&gt;undoType == <a class="code" href="../../d6/d0/usercli_8h.html#a84">UNDO_DELETE</a>) {
02334         <span class="keywordflow">if</span> (ped-&gt;ichDeleted == ped-&gt;ichMaxSel) {
02335 
02336             <span class="comment">/*</span>
02337 <span class="comment">             * Copy deleted text to front of undo buffer</span>
02338 <span class="comment">             */</span>
02339             hDeletedText = <a class="code" href="../../d6/d0/usercli_8h.html#a5">UserGlobalReAlloc</a>(ped-&gt;hDeletedText, (LONG)(cchDelete + ped-&gt;cchDeleted + 1)*ped-&gt;cbChar, GHND);
02340             <span class="keywordflow">if</span> (!hDeletedText)
02341                 <span class="keywordflow">goto</span> UNDODELETE;
02342             bufferOffset = 0;
02343             ped-&gt;ichDeleted = ped-&gt;ichMinSel;
02344         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ped-&gt;ichDeleted == ped-&gt;ichMinSel) {
02345 
02346             <span class="comment">/*</span>
02347 <span class="comment">             * Copy deleted text to end of undo buffer</span>
02348 <span class="comment">             */</span>
02349             hDeletedText = <a class="code" href="../../d6/d0/usercli_8h.html#a5">UserGlobalReAlloc</a>(ped-&gt;hDeletedText, (LONG)(cchDelete + ped-&gt;cchDeleted + 1)*ped-&gt;cbChar, GHND);
02350             <span class="keywordflow">if</span> (!hDeletedText)
02351                 <span class="keywordflow">goto</span> UNDODELETE;
02352             bufferOffset = ped-&gt;cchDeleted*ped-&gt;cbChar;
02353         } <span class="keywordflow">else</span> {
02354 
02355             <span class="comment">/*</span>
02356 <span class="comment">             * Clear the current UNDO delete and add the new one since</span>
02357 <span class="comment">               the deletes aren't contiguous.</span>
02358 <span class="comment">             */</span>
02359             <span class="keywordflow">goto</span> UNDODELETE;
02360         }
02361 
02362         ped-&gt;hDeletedText = hDeletedText;
02363         lpDeleteSaveBuffer = (LPSTR)hDeletedText;
02364         <span class="keywordflow">if</span> (!bufferOffset) {
02365 
02366             <span class="comment">/*</span>
02367 <span class="comment">             * Move text in delete buffer up so that we can insert the next</span>
02368 <span class="comment">             * text at the head of the buffer.</span>
02369 <span class="comment">             */</span>
02370             RtlMoveMemory(lpDeleteSaveBuffer + cchDelete*ped-&gt;cbChar, lpDeleteSaveBuffer,
02371                     ped-&gt;cchDeleted*ped-&gt;cbChar);
02372         }
02373         RtlCopyMemory(lpDeleteSaveBuffer + bufferOffset, pedText + ped-&gt;ichMinSel*ped-&gt;cbChar,
02374                 cchDelete*ped-&gt;cbChar);
02375 
02376         lpDeleteSaveBuffer[(ped-&gt;cchDeleted + cchDelete)*ped-&gt;cbChar] = 0;
02377         ped-&gt;cchDeleted += cchDelete;
02378     }
02379 
02380     <span class="keywordflow">if</span> (ped-&gt;ichMaxSel != ped-&gt;cch) {
02381 
02382         <span class="comment">/*</span>
02383 <span class="comment">         * We are deleting text from the middle of the buffer so we have to</span>
02384 <span class="comment">           shift text to the left.</span>
02385 <span class="comment">         */</span>
02386         RtlMoveMemory(pedText + ped-&gt;ichMinSel*ped-&gt;cbChar, pedText + ped-&gt;ichMaxSel*ped-&gt;cbChar,
02387                 (ped-&gt;cch - ped-&gt;ichMaxSel)*ped-&gt;cbChar);
02388     }
02389 
02390     <span class="keywordflow">if</span> (ped-&gt;cchAlloc - ped-&gt;cch &gt; <a class="code" href="../../d6/d0/usercli_8h.html#a71">CCHALLOCEXTRA</a>) {
02391 
02392         <span class="comment">/*</span>
02393 <span class="comment">         * Free some memory since we deleted a lot</span>
02394 <span class="comment">         */</span>
02395         <a class="code" href="../../d8/d6/ntuser_2client_2globals_8h.html#a3">LOCALREALLOC</a>(ped-&gt;hText, (DWORD)(ped-&gt;cch + (CCHALLOCEXTRA / 2))*ped-&gt;cbChar, LHND, ped-&gt;hInstance, NULL);
02396         ped-&gt;cchAlloc = <a class="code" href="../../d8/d6/ntuser_2client_2globals_8h.html#a6">LOCALSIZE</a>(ped-&gt;hText, ped-&gt;hInstance) / ped-&gt;cbChar;
02397     }
02398 
02399     ped-&gt;cch -= cchDelete;
02400 
02401     <span class="keywordflow">if</span> (ped-&gt;pLpkEditCallout) {
02402         HDC     hdc;
02403 
02404         hdc = <a class="code" href="../../d6/d0/usercli_8h.html#a451">ECGetEditDC</a> (ped, TRUE);
02405         ped-&gt;ichMinSel = ped-&gt;pLpkEditCallout-&gt;EditAdjustCaret (ped, hdc, pedText, ped-&gt;ichMinSel);
02406         <a class="code" href="../../d6/d0/usercli_8h.html#a452">ECReleaseEditDC</a> (ped, hdc, TRUE);
02407     }
02408 
02409     ped-&gt;ichCaret = ped-&gt;ichMaxSel = ped-&gt;ichMinSel;
02410 
02411     <a class="code" href="../../d6/d0/usercli_8h.html#a434">ECUnlock</a>(ped);
02412 
02413     <span class="comment">/*</span>
02414 <span class="comment">     * Set dirty bit</span>
02415 <span class="comment">     */</span>
02416     ped-&gt;fDirty = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
02417 
02418     <span class="keywordflow">return</span> (cchDelete);
02419 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a444" doxytag="usercli.h::ECEmptyUndo" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void ECEmptyUndo           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d9/d8/structtagUNDO.html">PUNDO</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d3/editec_8c-source.html#l01977">1977</a> of file <a class="el" href="../../d9/d3/editec_8c-source.html">editec.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l00530">tagUNDO::hDeletedText</a>, and <a class="el" href="../../d7/d9/usercli_8h-source.html#l00124">UserGlobalFree</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/editec_8c-source.html#l02293">ECDeleteText()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02547">ECResetTextInfo()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02904">EditWndProc()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l03457">MLEditWndProc()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l01040">MLInsertText()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l02720">MLPasteText()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l01309">MLReplaceSel()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l02520">SLEditWndProc()</a>, and <a class="el" href="../../d4/d4/editsl_8c-source.html#l01225">SLReplaceSel()</a>.
<p>
<pre class="fragment"><div>01979 {
01980     <span class="keywordflow">if</span> (pundo-&gt;hDeletedText)
01981         <a class="code" href="../../d6/d0/usercli_8h.html#a2">UserGlobalFree</a>(pundo-&gt;hDeletedText);
01982 
01983     RtlZeroMemory(pundo, <span class="keyword">sizeof</span>(<a class="code" href="../../d9/d8/structtagUNDO.html">UNDO</a>) );
01984 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a469" doxytag="usercli.h::ECEnableDisableIME" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void ECEnableDisableIME           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>ped</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01037">1037</a> of file <a class="el" href="../../d6/d3/edecrare_8c-source.html">edecrare.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l00578">tagED::charPasswordChar</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01150">ECImmSetCompositionFont()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01085">ECImmSetCompositionWindow()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01183">ECInitInsert()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00602">tagED::fFocus</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02529">fpImmAssociateContext</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02532">fpImmGetContext</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02539">fpImmReleaseContext</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00632">tagED::fReadOnly</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00712">tagED::hImcPrev</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00584">tagED::hwnd</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l07458">NtUserGetCaretPos()</a>, <a class="el" href="../../d9/d9/immstruc_8h-source.html#l00025">NULL_HIMC</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01124">THREAD_HKL</a>, and <a class="el" href="../../d2/d7/hal_8h.html#a212">VOID()</a>.
<p>
Referenced by <a class="el" href="../../d6/d3/edecrare_8c-source.html#l00516">ECSetPasswordChar()</a>, and <a class="el" href="../../d9/d3/editec_8c-source.html#l02904">EditWndProc()</a>.
<p>
<pre class="fragment"><div>01038 {
01039     <span class="keywordflow">if</span> ( ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o39">fReadOnly</a> || ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o12">charPasswordChar</a> ) {
01040     <span class="comment">//</span>
01041     <span class="comment">// IME should be disabled</span>
01042     <span class="comment">//</span>
01043         HIMC hImc;
01044         hImc = <a class="code" href="../../d6/d0/usercli_8h.html#a307">fpImmGetContext</a>( ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o14">hwnd</a> );
01045 
01046         <span class="keywordflow">if</span> ( hImc != <a class="code" href="../../d8/d0/immstruc_8h.html#a0">NULL_HIMC</a> ) {
01047             <a class="code" href="../../d6/d0/usercli_8h.html#a314">fpImmReleaseContext</a>( ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o14">hwnd</a>, hImc );
01048             ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o92">hImcPrev</a> = <a class="code" href="../../d6/d0/usercli_8h.html#a304">fpImmAssociateContext</a>( ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o14">hwnd</a>, NULL_HIMC );
01049         }
01050 
01051     } <span class="keywordflow">else</span> {
01052     <span class="comment">//</span>
01053     <span class="comment">// IME should be enabled</span>
01054     <span class="comment">//</span>
01055         <span class="keywordflow">if</span> ( ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o92">hImcPrev</a> != <a class="code" href="../../d8/d0/immstruc_8h.html#a0">NULL_HIMC</a> ) {
01056             ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o92">hImcPrev</a> = <a class="code" href="../../d6/d0/usercli_8h.html#a304">fpImmAssociateContext</a>( ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o14">hwnd</a>, ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o92">hImcPrev</a> );
01057 
01058             <span class="comment">//</span>
01059             <span class="comment">// Font and the caret position might be changed while</span>
01060             <span class="comment">// IME was being disabled. Set those now if the window</span>
01061             <span class="comment">// has the focus.</span>
01062             <span class="comment">//</span>
01063             <span class="keywordflow">if</span> ( ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o23">fFocus</a> ) {
01064                 POINT pt;
01065 
01066                 <a class="code" href="../../d6/d0/usercli_8h.html#a470">ECImmSetCompositionFont</a>( ped );
01067 
01068                 <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a274">NtUserGetCaretPos</a>( &amp;pt );
01069                 <a class="code" href="../../d6/d0/usercli_8h.html#a471">ECImmSetCompositionWindow</a>( ped, pt.x, pt.y  );
01070             }
01071         }
01072     }
01073     <a class="code" href="../../d6/d0/usercli_8h.html#a473">ECInitInsert</a>(ped, <a class="code" href="../../d6/d0/usercli_8h.html#a151">THREAD_HKL</a>());
01074 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a439" doxytag="usercli.h::ECFindTab" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a> ECFindTab           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">LPSTR&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a458" doxytag="usercli.h::ECFindXORblks" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void ECFindXORblks           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d8/structtagBLOCK.html">LPBLOCK</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d7/d8/structtagBLOCK.html">LPBLOCK</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d7/d8/structtagBLOCK.html">LPBLOCK</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d7/d8/structtagBLOCK.html">LPBLOCK</a>&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d3/editec_8c-source.html#l03652">3652</a> of file <a class="el" href="../../d9/d3/editec_8c-source.html">editec.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l00758">tagBLOCK::EndPos</a>, <a class="el" href="../../d6/d0/usercli_8h.html#a365">LPBLOCK</a>, <a class="el" href="../../d9/d5/sertl_8c-source.html#l00332">max</a>, <a class="el" href="../../d6/d3/acpitabl_8h-source.html#l00366">min</a>, and <a class="el" href="../../d7/d9/usercli_8h-source.html#l00757">tagBLOCK::StPos</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/editec_8c-source.html#l03692">ECCalcChangeSelection()</a>.
<p>
<pre class="fragment"><div>03657 {
03658     <span class="keywordflow">if</span> (lpOldBlk-&gt;StPos &gt;= lpNewBlk-&gt;StPos) {
03659         lpBlk1-&gt;StPos = lpNewBlk-&gt;StPos;
03660         lpBlk1-&gt;EndPos = <a class="code" href="../../d5/d4/acpitabl_8h.html#a69">min</a>(lpOldBlk-&gt;StPos, lpNewBlk-&gt;EndPos);
03661     } <span class="keywordflow">else</span> {
03662         lpBlk1-&gt;StPos = lpOldBlk-&gt;StPos;
03663         lpBlk1-&gt;EndPos = <a class="code" href="../../d5/d4/acpitabl_8h.html#a69">min</a>(lpNewBlk-&gt;StPos, lpOldBlk-&gt;EndPos);
03664     }
03665 
03666     <span class="keywordflow">if</span> (lpOldBlk-&gt;EndPos &lt;= lpNewBlk-&gt;EndPos) {
03667         lpBlk2-&gt;StPos = <a class="code" href="../../d8/d6/sertl_8c.html#a1">max</a>(lpOldBlk-&gt;EndPos, lpNewBlk-&gt;StPos);
03668         lpBlk2-&gt;EndPos = lpNewBlk-&gt;EndPos;
03669     } <span class="keywordflow">else</span> {
03670         lpBlk2-&gt;StPos = <a class="code" href="../../d8/d6/sertl_8c.html#a1">max</a>(lpNewBlk-&gt;EndPos, lpOldBlk-&gt;StPos);
03671         lpBlk2-&gt;EndPos = lpOldBlk-&gt;EndPos;
03672     }
03673 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a480" doxytag="usercli.h::ECGetBrush" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HBRUSH ECGetBrush           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ped</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HDC&nbsp;</td>
          <td class="mdname" nowrap> <em>hdc</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d3/editec_8c-source.html#l01412">1412</a> of file <a class="el" href="../../d9/d3/editec_8c-source.html">editec.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l03776">ECGetControlBrush()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00604">tagED::fDisabled</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00632">tagED::fReadOnly</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00599">tagED::fSingle</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01123">GETAPPVER</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00366">GetSysColor()</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00475">VER40</a>.
<p>
Referenced by <a class="el" href="../../d2/d4/editml_8c-source.html#l03991">MLDrawText()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l02966">MLScroll()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l00395">SLChangeSelection()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l00507">SLDrawLine()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l00737">SLDrawText()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l02280">SLPaint()</a>, and <a class="el" href="../../d4/d4/editsl_8c-source.html#l00932">SLScrollText()</a>.
<p>
<pre class="fragment"><div>01413 {
01414     HBRUSH  hbr;
01415     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>    f40Compat;
01416 
01417     f40Compat = (<a class="code" href="../../d6/d0/usercli_8h.html#a150">GETAPPVER</a>() &gt;= <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a101">VER40</a>);
01418 
01419     <span class="comment">// Get background brush</span>
01420     <span class="keywordflow">if</span> ((ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o39">fReadOnly</a> || ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o25">fDisabled</a>) &amp;&amp; f40Compat) {
01421         hbr = <a class="code" href="../../d6/d0/usercli_8h.html#a479">ECGetControlBrush</a>(ped, hdc, WM_CTLCOLORSTATIC);
01422     } <span class="keywordflow">else</span>
01423         hbr = <a class="code" href="../../d6/d0/usercli_8h.html#a479">ECGetControlBrush</a>(ped, hdc, WM_CTLCOLOREDIT);
01424 
01425     <span class="keywordflow">if</span> (ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o25">fDisabled</a> &amp;&amp; (ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o20">fSingle</a> || f40Compat)) {
01426         <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> rgb;
01427 
01428         <span class="comment">// Change text color</span>
01429         rgb = <a class="code" href="../../d3/d9/client_2wow_8c.html#a15">GetSysColor</a>(COLOR_GRAYTEXT);
01430         <span class="keywordflow">if</span> (rgb != GetBkColor(hdc))
01431             SetTextColor(hdc, rgb);
01432     }
01433     <span class="keywordflow">return</span>(hbr);
01434 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a479" doxytag="usercli.h::ECGetControlBrush" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HBRUSH ECGetControlBrush           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HDC&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LONG&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d3/editec_8c-source.html#l03776">3776</a> of file <a class="el" href="../../d9/d3/editec_8c-source.html">editec.c</a>.
<p>
References <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00574">DefWindowProcWorker()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00640">tagED::fAnsi</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01547">GETPTI</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00584">tagED::hwnd</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00058">PtiCurrent</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00211">REBASEPTR</a>, <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00270">SendMessageWorker()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01747">tagWND::spwndOwner</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01745">tagWND::spwndParent</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02565">TestwndPopup</a>, and <a class="el" href="../../d5/d9/immcli_8h-source.html#l00120">ValidateHwnd</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/editec_8c-source.html#l01412">ECGetBrush()</a>.
<p>
<pre class="fragment"><div>03780 {
03781     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwndSend;
03782     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwndEdit;
03783 
03784     pwndEdit = <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(ped-&gt;hwnd);
03785 
03786     <span class="keywordflow">if</span> (pwndEdit == (<a class="code" href="../../d6/d9/structtagWND.html">PWND</a>)<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
03787         <span class="keywordflow">return</span> (HBRUSH)0;
03788 
03789     <span class="keywordflow">if</span> ((pwndSend = (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a739">TestwndPopup</a>(pwndEdit) ? pwndEdit-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o5">spwndOwner</a> : pwndEdit-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o3">spwndParent</a>)) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
03790         pwndSend = pwndEdit;
03791     <span class="keywordflow">else</span>
03792         pwndSend = <a class="code" href="../../d6/d0/usercli_8h.html#a25">REBASEPTR</a>(pwndEdit, pwndSend);
03793 
03794     UserAssert(pwndSend);
03795 
03796     <span class="keywordflow">if</span> (<a class="code" href="../../d4/d1/userk_8h.html#a9">PtiCurrent</a>() != <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a455">GETPTI</a>(pwndSend)) {
03797         <span class="keywordflow">return</span> (HBRUSH)<a class="code" href="../../d6/d0/usercli_8h.html#a610">DefWindowProcWorker</a>(pwndSend, message,
03798                 (WPARAM)hdc, (LPARAM)pwndEdit, ped-&gt;fAnsi);
03799     }
03800 
03801     <span class="comment">/*</span>
03802 <span class="comment">     * By using the correct A/W call we avoid a c/s transition</span>
03803 <span class="comment">     * on this SendMessage().</span>
03804 <span class="comment">     */</span>
03805     <span class="keywordflow">return</span> (HBRUSH)<a class="code" href="../../d6/d0/usercli_8h.html#a600">SendMessageWorker</a>(pwndSend, message, (WPARAM)hdc,
03806             (LPARAM)ped-&gt;hwnd, ped-&gt;fAnsi);
03807 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a463" doxytag="usercli.h::ECGetDBCSVector" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int ECGetDBCSVector           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HDC&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a>&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d3/editec_8c-source.html#l03820">3820</a> of file <a class="el" href="../../d9/d3/editec_8c-source.html">editec.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d0/d7/halvprnt_8c-source.html#l00031">BYTE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00711">tagED::DBCSVector</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00640">tagED::fAnsi</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00724">FAREAST_CHARSET_BITS</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l03810">fFontAssocStatus</a>, <a class="el" href="../../d1/d8/dlgbegin_8c-source.html#l00133">GetACPCharSet()</a>, <a class="el" href="../../d8/d4/editec_8c.html#a49">QueryFontAssocStatus()</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d6/d3/edecrare_8c-source.html#l00708">ECSetFont()</a>.
<p>
<pre class="fragment"><div>03821 {
03822     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> bDBCSCodePage = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
03823     <span class="comment">/*</span>
03824 <span class="comment">     * if DEFAUT_CHARSET was passed, we will convert that to Shell charset..</span>
03825 <span class="comment">     */</span>
03826     <span class="keywordflow">if</span> (CharSet == DEFAULT_CHARSET) {
03827         CharSet = (<a class="code" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a>)GetTextCharset(hdc);
03828 
03829         <span class="comment">/*</span>
03830 <span class="comment">         * if CharSet is still DEFAULT_CHARSET, it means gdi has some problem..</span>
03831 <span class="comment">         * then just return default.. we get charset from CP_ACP..</span>
03832 <span class="comment">         */</span>
03833         <span class="keywordflow">if</span> (CharSet == DEFAULT_CHARSET) {
03834             CharSet = (<a class="code" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a>)<a class="code" href="../../d0/d9/dlgbegin_8c.html#a18">GetACPCharSet</a>();
03835         }
03836     }
03837 
03838     <span class="keywordflow">switch</span> (CharSet) {
03839     <span class="keywordflow">case</span> SHIFTJIS_CHARSET:
03840     <span class="keywordflow">case</span> HANGEUL_CHARSET:
03841     <span class="keywordflow">case</span> CHINESEBIG5_CHARSET:
03842     <span class="keywordflow">case</span> GB2312_CHARSET:
03843         bDBCSCodePage = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
03844         <span class="keywordflow">break</span>;
03845 
03846     <span class="keywordflow">case</span> ANSI_CHARSET:            <span class="comment">// 0</span>
03847     <span class="keywordflow">case</span> SYMBOL_CHARSET:          <span class="comment">// 2</span>
03848     <span class="keywordflow">case</span> OEM_CHARSET:             <span class="comment">// 255</span>
03849         <span class="keywordflow">if</span> (<a class="code" href="../../d8/d4/editec_8c.html#a9">fFontAssocStatus</a> == 0xffff)
03850             <a class="code" href="../../d8/d4/editec_8c.html#a9">fFontAssocStatus</a> = <a class="code" href="../../d8/d4/editec_8c.html#a49">QueryFontAssocStatus</a>();
03851 
03852         <span class="keywordflow">if</span> ((((CharSet + 2) &amp; 0xf) &amp; <a class="code" href="../../d8/d4/editec_8c.html#a9">fFontAssocStatus</a>)) {
03853             bDBCSCodePage = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
03854             <span class="comment">/*</span>
03855 <span class="comment">             * Bug 117558, etc.</span>
03856 <span class="comment">             * Try to get a meaningful character set for associated font.</span>
03857 <span class="comment">             */</span>
03858             CharSet = (<a class="code" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a>)<a class="code" href="../../d0/d9/dlgbegin_8c.html#a18">GetACPCharSet</a>();
03859         } <span class="keywordflow">else</span> {
03860             bDBCSCodePage = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
03861         }
03862         <span class="keywordflow">break</span>;
03863 
03864     <span class="keywordflow">default</span>:
03865         bDBCSCodePage = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
03866     }
03867 
03868     <span class="keywordflow">if</span> (bDBCSCodePage) {
03869         CHARSETINFO CharsetInfo;
03870         <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> CodePage;
03871         CPINFO CPInfo;
03872         <span class="keywordtype">int</span> lbIX;
03873 
03874         <span class="keywordflow">if</span> (TranslateCharsetInfo((DWORD *)CharSet, &amp;CharsetInfo, TCI_SRCCHARSET)) {
03875             CodePage = CharsetInfo.ciACP;
03876         } <span class="keywordflow">else</span> {
03877             CodePage = CP_ACP;
03878         }
03879 
03880         GetCPInfo(CodePage, &amp;CPInfo);
03881         <span class="keywordflow">for</span> (lbIX=0 ; CPInfo.LeadByte[lbIX] != 0 ; lbIX+=2) {
03882             ped-&gt;DBCSVector[lbIX  ] = CPInfo.LeadByte[lbIX];
03883             ped-&gt;DBCSVector[lbIX+1] = CPInfo.LeadByte[lbIX+1];
03884         }
03885         ped-&gt;DBCSVector[lbIX  ] = 0x0;
03886         ped-&gt;DBCSVector[lbIX+1] = 0x0;
03887     } <span class="keywordflow">else</span> {
03888         ped-&gt;DBCSVector[0] = 0x0;
03889         ped-&gt;DBCSVector[1] = 0x0;
03890     }
03891 
03892     <span class="comment">//</span>
03893     <span class="comment">// Final check: if the font supports DBCS glyphs</span>
03894     <span class="comment">//</span>
03895     <span class="comment">// If we've got a font with DBCS glyphs, let's mark PED so.</span>
03896     <span class="comment">// But since the font's primary charset is the one other than FE,</span>
03897     <span class="comment">// we can only support UNICODE Edit control.</span>
03898     <span class="comment">//</span>
03899     <span class="comment">//  a) GDI performs A/W conversion for ANSI apps based on the primary</span>
03900     <span class="comment">//     character set in hDC, so it will break anyway.</span>
03901     <span class="comment">//  b) ANSI applications are only supported on their native system locales:</span>
03902     <span class="comment">//     GetACPCharSet() is expected to return a FE code page.</span>
03903     <span class="comment">//  c) ANSI Edit control requires DBCSVector, which cannot be</span>
03904     <span class="comment">//     initialized without a FE code page.</span>
03905     <span class="comment">//</span>
03906     <span class="keywordflow">if</span> (!ped-&gt;fAnsi) {
03907         FONTSIGNATURE fontSig;
03908 
03909         GetTextCharsetInfo(hdc, &amp;fontSig, 0);
03910         <span class="keywordflow">if</span> (fontSig.fsCsb[0] &amp; <a class="code" href="../../d6/d0/usercli_8h.html#a87">FAREAST_CHARSET_BITS</a>) {
03911             bDBCSCodePage = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
03912             <span class="comment">// Since this is UNICODE, we're not</span>
03913         }
03914     }
03915 
03916     <span class="keywordflow">return</span> bDBCSCodePage;
03917 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a451" doxytag="usercli.h::ECGetEditDC" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HDC ECGetEditDC           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d3/editec_8c-source.html#l02492">2492</a> of file <a class="el" href="../../d9/d3/editec_8c-source.html">editec.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02452">ECSetEditClip()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00674">tagED::hFont</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00584">tagED::hwnd</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06624">NtUserGetDC()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05279">NtUserHideCaret()</a>, and <a class="el" href="../../d7/d9/usercli_8h-source.html#l00575">tagED::xOffset</a>.
<p>
Referenced by <a class="el" href="../../d6/d3/edecrare_8c-source.html#l00387">ECCreate()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02293">ECDeleteText()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01337">ECImeComposition()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02059">ECInsertText()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01225">ECSetCaretHandler()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l00516">ECSetPasswordChar()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02904">EditWndProc()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l01562">MLBuildchLines()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l00085">MLCalcXOffset()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l01367">MLDeleteText()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l03457">MLEditWndProc()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l03379">MLEnsureCaretVisible()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l01040">MLInsertText()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l02028">MLKeyDown()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l03329">MLKillFocus()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l02792">MLMouseMotion()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l00264">MLMoveSelectionRestricted()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l02966">MLScroll()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l03274">MLSetFocus()</a>, <a class="el" href="../../d6/d4/edmlrare_8c-source.html#l00368">MLSetSelection()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l01518">NextWordLpkCallBack()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l01304">SLChar()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l02520">SLEditWndProc()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l01074">SLInsertText()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l01529">SLKeyDown()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l02098">SLMouseMotion()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l01498">SLMoveSelectionRestricted()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l02467">SLPaste()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l01225">SLReplaceSel()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l02341">SLSetFocus()</a>, and <a class="el" href="../../d4/d4/editsl_8c-source.html#l00283">SLSetSelection()</a>.
<p>
<pre class="fragment"><div>02495 {
02496     HDC hdc;
02497 
02498     <span class="keywordflow">if</span> (!fFastDC)
02499         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a204">NtUserHideCaret</a>(ped-&gt;hwnd);
02500 
02501     <span class="keywordflow">if</span> ( hdc = <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a250">NtUserGetDC</a>(ped-&gt;hwnd) ) {
02502         <a class="code" href="../../d6/d0/usercli_8h.html#a450">ECSetEditClip</a>(ped, hdc, (BOOL)(ped-&gt;xOffset == 0));
02503 
02504         <span class="comment">/*</span>
02505 <span class="comment">         * Select the proper font for this edit control's dc.</span>
02506 <span class="comment">         */</span>
02507         <span class="keywordflow">if</span> (ped-&gt;hFont)
02508             SelectObject(hdc, ped-&gt;hFont);
02509     }
02510 
02511     <span class="keywordflow">return</span> hdc;
02512 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a481" doxytag="usercli.h::ECGetModKeys" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int ECGetModKeys           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d3/editec_8c-source.html#l00733">733</a> of file <a class="el" href="../../d9/d3/editec_8c-source.html">editec.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l00510">CTRLDOWN</a>, <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00506">GetKeyState()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00513">NOMODIFY</a>, and <a class="el" href="../../d7/d9/usercli_8h-source.html#l00511">SHFTDOWN</a>.
<p>
Referenced by <a class="el" href="../../d2/d4/editml_8c-source.html#l02531">MLChar()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l02028">MLKeyDown()</a>, and <a class="el" href="../../d4/d4/editsl_8c-source.html#l01529">SLKeyDown()</a>.
<p>
<pre class="fragment"><div>00733                                 {
00734     <span class="keywordtype">int</span> scState;
00735 
00736     scState = 0;
00737 
00738     <span class="keywordflow">if</span> (!keyMods) {
00739         <span class="keywordflow">if</span> (<a class="code" href="../../d8/d9/client_2ntstubs_8c.html#a16">GetKeyState</a>(VK_CONTROL) &lt; 0)
00740             scState |= <a class="code" href="../../d6/d0/usercli_8h.html#a77">CTRLDOWN</a>;
00741         <span class="keywordflow">if</span> (<a class="code" href="../../d8/d9/client_2ntstubs_8c.html#a16">GetKeyState</a>(VK_SHIFT) &lt; 0)
00742             scState |= <a class="code" href="../../d6/d0/usercli_8h.html#a78">SHFTDOWN</a>;
00743     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (keyMods != <a class="code" href="../../d6/d0/usercli_8h.html#a80">NOMODIFY</a>)
00744         scState = keyMods;
00745 
00746     <span class="keywordflow">return</span> scState;
00747 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a453" doxytag="usercli.h::ECGetText" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a> ECGetText           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPSTR&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d3/edecrare_8c-source.html#l00246">246</a> of file <a class="el" href="../../d6/d3/edecrare_8c-source.html">edecrare.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l00661">tagED::cbChar</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00557">tagED::cch</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00052">ECLock()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00086">ECUnlock()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00640">tagED::fAnsi</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00626">ICH</a>, and <a class="el" href="../../d6/d3/acpitabl_8h-source.html#l00366">min</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/editec_8c-source.html#l02904">EditWndProc()</a>, and <a class="el" href="../../d4/d4/editsl_8c-source.html#l02520">SLEditWndProc()</a>.
<p>
<pre class="fragment"><div>00251 {
00252     PSTR pText;
00253 
00254     <span class="keywordflow">if</span> (maxCchToCopy) {
00255 
00256         <span class="comment">/*</span>
00257 <span class="comment">         * Zero terminator takes the extra byte</span>
00258 <span class="comment">         */</span>
00259         <span class="keywordflow">if</span> (fNullTerminate)
00260             maxCchToCopy--;
00261         maxCchToCopy = <a class="code" href="../../d5/d4/acpitabl_8h.html#a69">min</a>(maxCchToCopy, ped-&gt;cch);
00262 
00263         <span class="comment">/*</span>
00264 <span class="comment">         * Zero terminate the string</span>
00265 <span class="comment">         */</span>
00266         <span class="keywordflow">if</span> (ped-&gt;fAnsi)
00267             *(LPSTR)(lpBuffer + maxCchToCopy) = 0;
00268         <span class="keywordflow">else</span>
00269             *(((LPWSTR)lpBuffer) + maxCchToCopy) = 0;
00270 
00271         pText = <a class="code" href="../../d6/d0/usercli_8h.html#a433">ECLock</a>(ped);
00272         RtlCopyMemory(lpBuffer, pText, maxCchToCopy*ped-&gt;cbChar);
00273         <a class="code" href="../../d6/d0/usercli_8h.html#a434">ECUnlock</a>(ped);
00274     }
00275 
00276     <span class="keywordflow">return</span> maxCchToCopy;
00277 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a474" doxytag="usercli.h::ECImeComposition" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LRESULT ECImeComposition           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ped</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01337">1337</a> of file <a class="el" href="../../d6/d3/edecrare_8c-source.html">edecrare.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d0/d7/halvprnt_8c-source.html#l00031">BYTE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00557">tagED::cch</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00555">tagED::cchTextMax</a>, <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00574">DefWindowProcWorker()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02293">ECDeleteText()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02492">ECGetEditDC()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00402">ECInOutReconversionMode()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02429">ECNotifyParent()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02524">ECReleaseEditDC()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01287">ECResultStrHandler()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01225">ECSetCaretHandler()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00640">tagED::fAnsi</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00651">tagED::fInsertCompChr</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00601">tagED::fMouseDown</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00653">tagED::fNoMoveCaret</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02532">fpImmGetContext</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02547">fpImmNotifyIME</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02539">fpImmReleaseContext</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00652">tagED::fReplaceCompChr</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00654">tagED::fResultProcess</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00599">tagED::fSingle</a>, <a class="el" href="../../d6/d8/ntrtlp_8h-source.html#l00184">HIBYTE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00584">tagED::hwnd</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00626">ICH</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00564">tagED::ichCaret</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00563">tagED::ichMaxSel</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00561">tagED::ichMinSel</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00025">INT</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d6/d8/ntrtlp_8h-source.html#l00183">LOBYTE</a>, <a class="el" href="../../d9/d5/sertl_8c-source.html#l00332">max</a>, <a class="el" href="../../d6/d3/acpitabl_8h-source.html#l00366">min</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l01367">MLDeleteText()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l01040">MLInsertText()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01564">NtUserMessageBeep</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00585">tagED::pwnd</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l00737">SLDrawText()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l01074">SLInsertText()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l00932">SLScrollText()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d7/d9/usercli_8h-source.html#l00659">tagED::wImeStatus</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/editec_8c-source.html#l02904">EditWndProc()</a>.
<p>
<pre class="fragment"><div>01338 {
01339     <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a> ich;
01340     LRESULT lReturn = 1;
01341     HDC hdc;
01342     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fSLTextUpdated = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01343     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a> iResult;
01344     HIMC hImc;
01345     <a class="code" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a> TextBuf[4];
01346 
01347     <span class="keywordflow">if</span> (!ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o52">fInsertCompChr</a>) {
01348         <span class="keywordflow">if</span> (lParam &amp; GCS_RESULTSTR) {
01349             <a class="code" href="../../d6/d0/usercli_8h.html#a477">ECInOutReconversionMode</a>(ped, FALSE);
01350 
01351             <span class="keywordflow">if</span> (ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o59">wImeStatus</a> &amp; EIMES_GETCOMPSTRATONCE) {
01352 ResultAtOnce:
01353                 <a class="code" href="../../d5/d4/edecrare_8c.html#a28">ECResultStrHandler</a>(ped);
01354                 lParam &amp;= ~GCS_RESULTSTR;
01355             }
01356         }
01357         <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a610">DefWindowProcWorker</a>(ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o15">pwnd</a>, WM_IME_COMPOSITION, wParam, lParam, ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o42">fAnsi</a>);
01358     }
01359 
01360     <span class="comment">// In case of Ansi edit control, the length of minimum composition string</span>
01361     <span class="comment">// is 2. Check here maximum byte of edit control.</span>
01362     <span class="keywordflow">if</span>( ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o42">fAnsi</a> &amp;&amp; ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o2">cchTextMax</a> == 1 ) {
01363         HIMC hImc;
01364 
01365         hImc = <a class="code" href="../../d6/d0/usercli_8h.html#a307">fpImmGetContext</a>( ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o14">hwnd</a> );
01366         <a class="code" href="../../d6/d0/usercli_8h.html#a322">fpImmNotifyIME</a>(hImc, NI_COMPOSITIONSTR, CPS_CANCEL, 0L);
01367         <a class="code" href="../../d6/d0/usercli_8h.html#a314">fpImmReleaseContext</a>( ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o14">hwnd</a>, hImc );
01368         <a class="code" href="../../d6/d0/usercli_8h.html#a219">NtUserMessageBeep</a>(MB_ICONEXCLAMATION);
01369         <span class="keywordflow">return</span> lReturn;
01370     }
01371 
01372     <span class="comment">// Don't move this after CS_NOMOVECARET check.</span>
01373     <span class="comment">// In case if skip the message, fNoMoveCaret should not be set.</span>
01374     <span class="keywordflow">if</span> ((lParam &amp; CS_INSERTCHAR) &amp;&amp; ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o55">fResultProcess</a>) {
01375 
01376         <span class="comment">// Now we're in result processing. GCS_RESULTSTR ends up</span>
01377         <span class="comment">// to WM_IME_CHAR and WM_CHAR. Since WM_CHAR is posted,</span>
01378         <span class="comment">// the message(s) will come later than this CS_INSERTCHAR</span>
01379         <span class="comment">// message. This composition character should be handled</span>
01380         <span class="comment">// after the WM_CHAR message(s).</span>
01381         <span class="comment">//</span>
01382         <span class="keywordflow">if</span>(ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o42">fAnsi</a>)
01383             PostMessageA(ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o14">hwnd</a>, WM_IME_COMPOSITION, wParam, lParam);
01384         <span class="keywordflow">else</span>
01385             PostMessageW(ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o14">hwnd</a>, WM_IME_COMPOSITION, wParam, lParam);
01386         ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o55">fResultProcess</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01387         <span class="keywordflow">return</span> lReturn;
01388     }
01389 
01390 <span class="comment">//</span>
01391 <span class="comment">// If fReplaceCompChr is TRUE, we change the shape of caret. A block</span>
01392 <span class="comment">// caret is displayed on the composition character. From the user's</span>
01393 <span class="comment">// point of view, there is no difference if the caret is before the</span>
01394 <span class="comment">// composition character or after the composition character. When</span>
01395 <span class="comment">// the composition character is finalized, the insertion point should</span>
01396 <span class="comment">// be moved to after the character, any way. Therefore checking</span>
01397 <span class="comment">// CS_NOMOVECARET bit doesn't make sense in our current implementation.</span>
01398 <span class="comment">// [takaok]</span>
01399 <span class="comment">//</span>
01400 <span class="preprocessor">#if 0</span>
01401 <span class="preprocessor"></span>    <span class="keywordflow">if</span> (lParam &amp; CS_NOMOVECARET)
01402         ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o54">fNoMoveCaret</a>=<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;   <span class="comment">// stick to current caret pos.</span>
01403     <span class="keywordflow">else</span>
01404         ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o54">fNoMoveCaret</a>=<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01405 <span class="preprocessor">#endif</span>
01406 <span class="preprocessor"></span>
01407     <span class="keywordflow">if</span> (lParam &amp; GCS_RESULTSTR) {
01408 
01409         <span class="keywordflow">if</span> (ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o59">wImeStatus</a> &amp; EIMES_GETCOMPSTRATONCE) {
01410             <span class="keywordflow">goto</span> ResultAtOnce;
01411         }
01412 
01413         ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o55">fResultProcess</a>=<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01414         <span class="keywordflow">if</span> ( ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o53">fReplaceCompChr</a> ) {
01415             <span class="comment">//</span>
01416             <span class="comment">// we have a DBCS character to be replaced.</span>
01417             <span class="comment">// let's delete it before inserting the new one.</span>
01418             <span class="comment">//</span>
01419             ich = (ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o42">fAnsi</a>) ? 2 : 1;
01420             ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o53">fReplaceCompChr</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01421             ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o6">ichMaxSel</a> = <a class="code" href="../../d5/d4/acpitabl_8h.html#a69">min</a>(ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o7">ichCaret</a> + ich, ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o3">cch</a>);
01422             ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o5">ichMinSel</a> = ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o7">ichCaret</a>;
01423             <span class="keywordflow">if</span> ( <a class="code" href="../../d6/d0/usercli_8h.html#a447">ECDeleteText</a>( ped ) &gt; 0 ) {
01424                 <span class="keywordflow">if</span> ( ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o20">fSingle</a> ) {
01425                     <span class="comment">//</span>
01426                     <span class="comment">// Update the display</span>
01427                     <span class="comment">//</span>
01428                     <a class="code" href="../../d6/d0/usercli_8h.html#a449">ECNotifyParent</a>(ped, EN_UPDATE);
01429                     hdc = <a class="code" href="../../d6/d0/usercli_8h.html#a451">ECGetEditDC</a>(ped,FALSE);
01430                     <a class="code" href="../../d6/d0/usercli_8h.html#a527">SLDrawText</a>(ped, hdc, 0);
01431                     <a class="code" href="../../d6/d0/usercli_8h.html#a452">ECReleaseEditDC</a>(ped,hdc,FALSE);
01432                     <span class="comment">//</span>
01433                     <span class="comment">// Tell parent our text contents changed.</span>
01434                     <span class="comment">//</span>
01435                     <a class="code" href="../../d6/d0/usercli_8h.html#a449">ECNotifyParent</a>(ped, EN_CHANGE);
01436                 }
01437             }
01438             <a class="code" href="../../d6/d0/usercli_8h.html#a472">ECSetCaretHandler</a>( ped );
01439         }
01440 
01441     } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(lParam &amp; CS_INSERTCHAR) {
01442 
01443         <span class="comment">//</span>
01444         <span class="comment">// If we are in the middle of a mousedown command, don't do anything.</span>
01445         <span class="comment">//</span>
01446         <span class="keywordflow">if</span> (ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o22">fMouseDown</a>) {
01447             <span class="keywordflow">return</span> lReturn;
01448         }
01449 
01450         <span class="comment">//</span>
01451         <span class="comment">// We can safely assume that interimm character is always DBCS.</span>
01452         <span class="comment">//</span>
01453         ich = ( ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o42">fAnsi</a> ) ? 2 : 1;
01454 
01455         <span class="keywordflow">if</span> ( ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o53">fReplaceCompChr</a> ) {
01456             <span class="comment">//</span>
01457             <span class="comment">// we have a character to be replaced.</span>
01458             <span class="comment">// let's delete it before inserting the new one.</span>
01459             <span class="comment">// when we have a composition characters, the</span>
01460             <span class="comment">// caret is placed before the composition character.</span>
01461             <span class="comment">//</span>
01462             ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o6">ichMaxSel</a> = <a class="code" href="../../d5/d4/acpitabl_8h.html#a69">min</a>(ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o7">ichCaret</a>+ich, ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o3">cch</a>);
01463             ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o5">ichMinSel</a> = ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o7">ichCaret</a>;
01464         }
01465 
01466         <span class="comment">//</span>
01467         <span class="comment">// let's delete current selected text or composition character</span>
01468         <span class="comment">//</span>
01469         <span class="keywordflow">if</span> ( ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o20">fSingle</a> ) {
01470             <span class="keywordflow">if</span> ( <a class="code" href="../../d6/d0/usercli_8h.html#a447">ECDeleteText</a>( ped ) &gt; 0 ) {
01471                 fSLTextUpdated = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01472             }
01473         } <span class="keywordflow">else</span> {
01474             <a class="code" href="../../d6/d0/usercli_8h.html#a484">MLDeleteText</a>( ped );
01475         }
01476 
01477         <span class="comment">//</span>
01478         <span class="comment">// When the composition charcter is canceled, IME may give us NULL wParam,</span>
01479         <span class="comment">// with CS_INSERTCHAR flag on. We shouldn't insert a NULL character.</span>
01480         <span class="comment">//</span>
01481         <span class="keywordflow">if</span> ( wParam != 0 ) {
01482 
01483             <span class="keywordflow">if</span> ( ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o42">fAnsi</a> ) {
01484                 TextBuf[0] = <a class="code" href="../../d5/d9/ntrtlp_8h.html#a5">HIBYTE</a>(LOWORD(wParam)); <span class="comment">// leading byte</span>
01485                 TextBuf[1] = <a class="code" href="../../d5/d9/ntrtlp_8h.html#a4">LOBYTE</a>(LOWORD(wParam)); <span class="comment">// trailing byte</span>
01486                 TextBuf[2] = <span class="charliteral">'\0'</span>;
01487             } <span class="keywordflow">else</span> {
01488                 TextBuf[0] = <a class="code" href="../../d5/d9/ntrtlp_8h.html#a4">LOBYTE</a>(LOWORD(wParam));
01489                 TextBuf[1] = <a class="code" href="../../d5/d9/ntrtlp_8h.html#a5">HIBYTE</a>(LOWORD(wParam));
01490                 TextBuf[2] = <span class="charliteral">'\0'</span>;
01491                 TextBuf[3] = <span class="charliteral">'\0'</span>;
01492             }
01493 
01494             <span class="keywordflow">if</span> ( ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o20">fSingle</a> ) {
01495 
01496                 iResult = <a class="code" href="../../d6/d0/usercli_8h.html#a532">SLInsertText</a>( ped, (LPSTR)TextBuf, ich );
01497                 <span class="keywordflow">if</span> (iResult == 0) {
01498                     <span class="comment">/*</span>
01499 <span class="comment">                     * Couldn't insert the text, for e.g. the text exceeded the limit.</span>
01500 <span class="comment">                     */</span>
01501                     <a class="code" href="../../d6/d0/usercli_8h.html#a219">NtUserMessageBeep</a>(0);
01502                 } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (iResult &gt; 0) {
01503                     <span class="comment">/*</span>
01504 <span class="comment">                     * Remember we need to update the text.</span>
01505 <span class="comment">                     */</span>
01506                     fSLTextUpdated = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01507                 }
01508 
01509             } <span class="keywordflow">else</span> {
01510 
01511                 iResult = <a class="code" href="../../d6/d0/usercli_8h.html#a483">MLInsertText</a>( ped, (LPSTR)TextBuf, ich, TRUE);
01512             }
01513 
01514             <span class="keywordflow">if</span> ( iResult &gt; 0 ) {
01515                 <span class="comment">//</span>
01516                 <span class="comment">// ped-&gt;fReplaceCompChr will be reset:</span>
01517                 <span class="comment">//</span>
01518                 <span class="comment">// 1) when the character is finalized.</span>
01519                 <span class="comment">//    we will receive GCS_RESULTSTR</span>
01520                 <span class="comment">//</span>
01521                 <span class="comment">// 2) when the character is canceled.</span>
01522                 <span class="comment">//</span>
01523                 <span class="comment">//    we will receive WM_IME_COMPOSITION|CS_INSERTCHAR</span>
01524                 <span class="comment">//    with wParam == 0 (in case of user types backspace</span>
01525                 <span class="comment">//    at the first element of composition character).</span>
01526                 <span class="comment">//</span>
01527                 <span class="comment">//      or</span>
01528                 <span class="comment">//</span>
01529                 <span class="comment">//    we will receive WM_IME_ENDCOMPOSITION message</span>
01530                 <span class="comment">//</span>
01531                 ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o53">fReplaceCompChr</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01532 
01533                 <span class="comment">//</span>
01534                 <span class="comment">// Caret should be placed BEFORE the composition</span>
01535                 <span class="comment">// character.</span>
01536                 <span class="comment">//</span>
01537                 ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o7">ichCaret</a> = <a class="code" href="../../d8/d6/sertl_8c.html#a1">max</a>( 0, ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o7">ichCaret</a> - ich);
01538                 <a class="code" href="../../d6/d0/usercli_8h.html#a472">ECSetCaretHandler</a>( ped );
01539             } <span class="keywordflow">else</span> {
01540 
01541                 <span class="comment">//</span>
01542                 <span class="comment">// We failed to insert a character. We might run out</span>
01543                 <span class="comment">// of memory, or reached to the text size limit. let's</span>
01544                 <span class="comment">// cancel the composition character.</span>
01545                 <span class="comment">//</span>
01546                 hImc = <a class="code" href="../../d6/d0/usercli_8h.html#a307">fpImmGetContext</a>(ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o14">hwnd</a>);
01547                 <a class="code" href="../../d6/d0/usercli_8h.html#a322">fpImmNotifyIME</a>(hImc, NI_COMPOSITIONSTR, CPS_CANCEL, 0);
01548                 <a class="code" href="../../d6/d0/usercli_8h.html#a314">fpImmReleaseContext</a>(ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o14">hwnd</a>, hImc);
01549 
01550                 ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o53">fReplaceCompChr</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01551                 <a class="code" href="../../d6/d0/usercli_8h.html#a472">ECSetCaretHandler</a>( ped );
01552             }
01553         } <span class="keywordflow">else</span> {
01554             <span class="comment">//</span>
01555             <span class="comment">// the composition character is canceled.</span>
01556             <span class="comment">//</span>
01557             ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o53">fReplaceCompChr</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01558             <a class="code" href="../../d6/d0/usercli_8h.html#a472">ECSetCaretHandler</a>( ped );
01559         }
01560 
01561         <span class="comment">//</span>
01562         <span class="comment">// We won't notify parent the text change</span>
01563         <span class="comment">// because the composition character has</span>
01564         <span class="comment">// not been finalized.</span>
01565         <span class="comment">//</span>
01566         <span class="keywordflow">if</span> ( fSLTextUpdated ) {
01567 
01568             <span class="comment">//</span>
01569             <span class="comment">// Update the display</span>
01570             <span class="comment">//</span>
01571             <a class="code" href="../../d6/d0/usercli_8h.html#a449">ECNotifyParent</a>(ped, EN_UPDATE);
01572 
01573             hdc = <a class="code" href="../../d6/d0/usercli_8h.html#a451">ECGetEditDC</a>(ped,FALSE);
01574 
01575             <span class="keywordflow">if</span> ( ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o53">fReplaceCompChr</a> ) {
01576                 <span class="comment">//</span>
01577                 <span class="comment">// move back the caret to the original position</span>
01578                 <span class="comment">// temporarily so that our new block cursor can</span>
01579                 <span class="comment">// be located within the visible area of window.</span>
01580                 <span class="comment">//</span>
01581                 ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o7">ichCaret</a> = <a class="code" href="../../d5/d4/acpitabl_8h.html#a69">min</a>( ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o3">cch</a>, ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o7">ichCaret</a> + ich);
01582                 <a class="code" href="../../d6/d0/usercli_8h.html#a530">SLScrollText</a>(ped, hdc);
01583                 ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o7">ichCaret</a> = <a class="code" href="../../d8/d6/sertl_8c.html#a1">max</a>( 0, ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o7">ichCaret</a> - ich);
01584             } <span class="keywordflow">else</span> {
01585                 <a class="code" href="../../d6/d0/usercli_8h.html#a530">SLScrollText</a>(ped, hdc);
01586             }
01587             <a class="code" href="../../d6/d0/usercli_8h.html#a527">SLDrawText</a>(ped, hdc, 0);
01588 
01589             <a class="code" href="../../d6/d0/usercli_8h.html#a452">ECReleaseEditDC</a>(ped,hdc,FALSE);
01590 
01591             <span class="comment">//</span>
01592             <span class="comment">// Tell parent our text contents changed.</span>
01593             <span class="comment">//</span>
01594             <a class="code" href="../../d6/d0/usercli_8h.html#a449">ECNotifyParent</a>(ped, EN_CHANGE);
01595         }
01596         <span class="keywordflow">return</span> lReturn;
01597     }
01598 
01599     <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a610">DefWindowProcWorker</a>(ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o15">pwnd</a>, WM_IME_COMPOSITION, wParam, lParam, ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o42">fAnsi</a>);
01600 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a475" doxytag="usercli.h::EcImeRequestHandler" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LRESULT EcImeRequestHandler           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WPARAM&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01735">1735</a> of file <a class="el" href="../../d6/d3/edecrare_8c-source.html">edecrare.c</a>.
<p>
References <a class="el" href="../../d0/d7/halvprnt_8c-source.html#l00031">BYTE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00661">tagED::cbChar</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01085">ECImmSetCompositionWindow()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00402">ECInOutReconversionMode()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00052">ECLock()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00086">ECUnlock()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00640">tagED::fAnsi</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00602">tagED::fFocus</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02537">fpImmIsIME</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00552">tagED::hText</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00563">tagED::ichMaxSel</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00561">tagED::ichMinSel</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00025">INT</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d7/d2/kcodecnv_8c-source.html#l00021">lpDest</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">LPVOID</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01124">THREAD_HKL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/editec_8c-source.html#l02904">EditWndProc()</a>.
<p>
<pre class="fragment"><div>01736 {
01737     LRESULT lreturn = 0<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>;
01738 
01739     <span class="keywordflow">switch</span> (dwSubMsg) {
01740     <span class="keywordflow">case</span> IMR_CONFIRMRECONVERTSTRING:
01741         <span class="comment">// Edit control does not allow IME to change it.</span>
01742         <span class="keywordflow">break</span>;
01743 
01744     <span class="keywordflow">case</span> IMR_RECONVERTSTRING:
01745         <span class="comment">//</span>
01746         <span class="comment">// CHECK VERSION of the structure</span>
01747         <span class="comment">//</span>
01748         <span class="keywordflow">if</span> (lParam &amp;&amp; ((LPRECONVERTSTRING)lParam)-&gt;dwVersion != 0) {
01749             RIPMSG1(RIP_WARNING, <span class="stringliteral">"EcImeRequestHandler: RECONVERTSTRING dwVersion is not expected."</span>,
01750                 ((LPRECONVERTSTRING)lParam)-&gt;dwVersion);
01751             <span class="keywordflow">return</span> 0<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>;
01752         }
01753 
01754         <span class="keywordflow">if</span> (ped &amp;&amp; ped-&gt;fFocus &amp;&amp; ped-&gt;hText &amp;&amp; <a class="code" href="../../d6/d0/usercli_8h.html#a312">fpImmIsIME</a>(<a class="code" href="../../d6/d0/usercli_8h.html#a151">THREAD_HKL</a>())) {
01755             <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> cchLen = ped-&gt;ichMaxSel - ped-&gt;ichMinSel;    <span class="comment">// holds character count.</span>
01756             <span class="keywordflow">if</span> (cchLen == 0) {
01757                 <span class="comment">// if we have no selection,</span>
01758                 <span class="comment">// just return 0.</span>
01759                 <span class="keywordflow">break</span>;
01760             }
01761 
01762             UserAssert(ped-&gt;cbChar == <span class="keyword">sizeof</span>(BYTE) || ped-&gt;cbChar == <span class="keyword">sizeof</span>(WCHAR));
01763 
01764             <span class="comment">// This Edit Control has selection.</span>
01765             <span class="keywordflow">if</span> (lParam == 0) {
01766                 <span class="comment">//</span>
01767                 <span class="comment">// IME just want to get required size for buffer.</span>
01768                 <span class="comment">// cchLen + 1 is needed to reserve room for trailing L'\0'.</span>
01769                 <span class="comment">//       ~~~~</span>
01770                 lreturn = <span class="keyword">sizeof</span>(RECONVERTSTRING) + (cchLen + 1) * ped-&gt;cbChar;
01771             } <span class="keywordflow">else</span> {
01772                 LPRECONVERTSTRING lpRCS = (LPRECONVERTSTRING)lParam;
01773                 <a class="code" href="../../d0/d5/perfuser_8c.html#a5">LPVOID</a> lpSrc;
01774                 <a class="code" href="../../d0/d5/perfuser_8c.html#a5">LPVOID</a> <a class="code" href="../../d6/d3/kcodecnv_8c.html#a4">lpDest</a> = (LPBYTE)lpRCS + <span class="keyword">sizeof</span>(RECONVERTSTRING);
01775 
01776                 <span class="comment">// check buffer size</span>
01777                 <span class="comment">// if the given buffer is smaller than actual needed size,</span>
01778                 <span class="comment">// shrink our size to fit the buffer</span>
01779                 <span class="keywordflow">if</span> ((<a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a>)lpRCS-&gt;dwSize &lt;= <span class="keyword">sizeof</span>(RECONVERTSTRING) + cchLen * ped-&gt;cbChar) {
01780                     RIPMSG0(RIP_WARNING, <span class="stringliteral">"EcImeRequest: ERR09"</span>);
01781                     cchLen = (lpRCS-&gt;dwSize - <span class="keyword">sizeof</span>(RECONVERTSTRING)) / ped-&gt;cbChar - ped-&gt;cbChar;
01782                 }
01783 
01784                 lpRCS-&gt;dwStrOffset = <span class="keyword">sizeof</span>(RECONVERTSTRING); <span class="comment">// buffer begins just after RECONVERTSTRING</span>
01785                 lpRCS-&gt;dwCompStrOffset =
01786                 lpRCS-&gt;dwTargetStrOffset = 0;
01787                 lpRCS-&gt;dwStrLen =
01788                 lpRCS-&gt;dwCompStrLen =
01789                 lpRCS-&gt;dwTargetStrLen = cchLen; <span class="comment">// StrLen means TCHAR count</span>
01790 
01791                 lpSrc = <a class="code" href="../../d6/d0/usercli_8h.html#a433">ECLock</a>(ped);
01792                 <span class="keywordflow">if</span> (lpSrc == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01793                     RIPMSG0(RIP_WARNING, <span class="stringliteral">"EcImeRequestHandler: LOCALLOCK(ped) failed."</span>);
01794                 } <span class="keywordflow">else</span> {
01795                     RtlCopyMemory(lpDest,
01796                                   (LPBYTE)lpSrc + ped-&gt;ichMinSel * ped-&gt;cbChar,
01797                                   cchLen * ped-&gt;cbChar);
01798                     <span class="comment">// Null-Terminate the string</span>
01799                     <span class="keywordflow">if</span> (ped-&gt;fAnsi) {
01800                         LPBYTE psz = (LPBYTE)<a class="code" href="../../d6/d3/kcodecnv_8c.html#a4">lpDest</a>;
01801                         psz[cchLen] = <span class="charliteral">'\0'</span>;
01802                     } <span class="keywordflow">else</span> {
01803                         LPWSTR pwsz = (LPWSTR)<a class="code" href="../../d6/d3/kcodecnv_8c.html#a4">lpDest</a>;
01804                         pwsz[cchLen] = <a class="code" href="../../d2/d0/aw_8h.html#a3">L</a><span class="charliteral">'\0'</span>;
01805                     }
01806                     <a class="code" href="../../d6/d0/usercli_8h.html#a434">ECUnlock</a>(ped);
01807                     <span class="comment">// final buffer size</span>
01808                     lreturn = <span class="keyword">sizeof</span>(RECONVERTSTRING) + (cchLen + 1) * ped-&gt;cbChar;
01809 
01810                     <a class="code" href="../../d6/d0/usercli_8h.html#a477">ECInOutReconversionMode</a>(ped, TRUE);
01811                     <a class="code" href="../../d6/d0/usercli_8h.html#a471">ECImmSetCompositionWindow</a>(ped, 0, 0);
01812                 }
01813             }
01814 
01815         }
01816         <span class="keywordflow">break</span>;
01817     }
01818 
01819     <span class="keywordflow">return</span> lreturn;
01820 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a470" doxytag="usercli.h::ECImmSetCompositionFont" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void ECImmSetCompositionFont           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>ped</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01150">1150</a> of file <a class="el" href="../../d6/d3/edecrare_8c-source.html">edecrare.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l02532">fpImmGetContext</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02539">fpImmReleaseContext</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02543">fpImmSetCompositionFontW</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00674">tagED::hFont</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00584">tagED::hwnd</a>, <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00098">lf</a>, <a class="el" href="../../d9/d9/immstruc_8h-source.html#l00025">NULL_HIMC</a>, and <a class="el" href="../../d2/d7/hal_8h.html#a212">VOID()</a>.
<p>
Referenced by <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01037">ECEnableDisableIME()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l00708">ECSetFont()</a>, and <a class="el" href="../../d9/d3/editec_8c-source.html#l02904">EditWndProc()</a>.
<p>
<pre class="fragment"><div>01151 {
01152     HIMC hImc;
01153     LOGFONTW <a class="code" href="../../d3/d8/aug98_2test_2main_8c.html#a18">lf</a>;
01154 
01155     <span class="keywordflow">if</span> ( (hImc = <a class="code" href="../../d6/d0/usercli_8h.html#a307">fpImmGetContext</a>( ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o14">hwnd</a> )) != <a class="code" href="../../d8/d0/immstruc_8h.html#a0">NULL_HIMC</a> ) {
01156 
01157         <span class="keywordflow">if</span> (ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o66">hFont</a>) {
01158             GetObjectW( ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o66">hFont</a>,
01159                         <span class="keyword">sizeof</span>(LOGFONTW),
01160                         (LPLOGFONTW)&amp;lf);
01161         } <span class="keywordflow">else</span> {
01162             GetObjectW( GetStockObject(SYSTEM_FONT),
01163                         <span class="keyword">sizeof</span>(LOGFONTW),
01164                         (LPLOGFONTW)&amp;lf);
01165         }
01166         <a class="code" href="../../d6/d0/usercli_8h.html#a318">fpImmSetCompositionFontW</a>( hImc, &amp;lf );
01167         <a class="code" href="../../d6/d0/usercli_8h.html#a314">fpImmReleaseContext</a>( ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o14">hwnd</a>, hImc );
01168     }
01169 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a471" doxytag="usercli.h::ECImmSetCompositionWindow" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void ECImmSetCompositionWindow           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ped</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LONG&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LONG&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01085">1085</a> of file <a class="el" href="../../d6/d3/edecrare_8c-source.html">edecrare.c</a>.
<p>
References <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00640">tagED::fAnsi</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00602">tagED::fFocus</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00656">tagED::fInReconversion</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02535">fpImmGetCompositionWindow</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02532">fpImmGetContext</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02539">fpImmReleaseContext</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02546">fpImmSetCompositionWindow</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00599">tagED::fSingle</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00143">GET_X_LPARAM</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00147">GET_Y_LPARAM</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00655">GetWindowRect()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00584">tagED::hwnd</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00561">tagED::ichMinSel</a>, <a class="el" href="../../d4/d7/winmgrc_8c-source.html#l00155">MapWindowPoints()</a>, <a class="el" href="../../d9/d9/immstruc_8h-source.html#l00025">NULL_HIMC</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00713">tagED::ptScreenBounding</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00586">tagED::rcFmt</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00245">SetRectEmpty</a>, and <a class="el" href="../../d2/d7/hal_8h.html#a212">VOID()</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/editec_8c-source.html#l00423">ECDoIMEMenuCommand()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01037">ECEnableDisableIME()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01735">EcImeRequestHandler()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l00597">ECSize()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02904">EditWndProc()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l00292">MLSetCaretPosition()</a>, and <a class="el" href="../../d4/d4/editsl_8c-source.html#l00126">SLSetCaretPosition()</a>.
<p>
<pre class="fragment"><div>01086 {
01087     COMPOSITIONFORM cf;
01088     COMPOSITIONFORM cft;
01089     RECT rcScreenWindow;
01090     HIMC hImc;
01091 
01092     hImc = <a class="code" href="../../d6/d0/usercli_8h.html#a307">fpImmGetContext</a>( ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o14">hwnd</a> );
01093     <span class="keywordflow">if</span> ( hImc != <a class="code" href="../../d8/d0/immstruc_8h.html#a0">NULL_HIMC</a> ) {
01094 
01095         <span class="keywordflow">if</span> ( ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o23">fFocus</a> ) {
01096             <a class="code" href="../../d3/d9/client_2wow_8c.html#a26">GetWindowRect</a>( ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o14">hwnd</a>, &amp;rcScreenWindow);
01097             <span class="comment">// assuming RECT.left is the first and and RECT.top is the second field</span>
01098             <a class="code" href="../../d3/d8/winmgrc_8c.html#a15">MapWindowPoints</a>( ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o14">hwnd</a>, HWND_DESKTOP, (LPPOINT)&amp;rcScreenWindow, 2);
01099             <span class="keywordflow">if</span> (ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o57">fInReconversion</a>) {
01100                 <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwPoint = (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)(ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o42">fAnsi</a> ? SendMessageA : SendMessageW)(ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o14">hwnd</a>, EM_POSFROMCHAR, ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o5">ichMinSel</a>, 0);
01101 
01102                 x = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a7">GET_X_LPARAM</a>(dwPoint);
01103                 y = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a8">GET_Y_LPARAM</a>(dwPoint);
01104 
01105                 RIPMSG2(RIP_WARNING, <span class="stringliteral">"ECImmSetCompositionWindow: fInReconversion (%d,%d)"</span>, x, y);
01106             }
01107             <span class="comment">//</span>
01108             <span class="comment">// The window currently has the focus.</span>
01109             <span class="comment">//</span>
01110             <span class="keywordflow">if</span> (ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o20">fSingle</a>) {
01111                 <span class="comment">//</span>
01112                 <span class="comment">// Single line edit control.</span>
01113                 <span class="comment">//</span>
01114                 cf.dwStyle = CFS_POINT;
01115                 cf.ptCurrentPos.x = x;
01116                 cf.ptCurrentPos.y = y;
01117                 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a35">SetRectEmpty</a>(&amp;cf.rcArea);
01118 
01119             } <span class="keywordflow">else</span> {
01120                 <span class="comment">//</span>
01121                 <span class="comment">// Multi line edit control.</span>
01122                 <span class="comment">//</span>
01123                 cf.dwStyle = CFS_RECT;
01124                 cf.ptCurrentPos.x = x;
01125                 cf.ptCurrentPos.y = y;
01126                 cf.rcArea = ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o16">rcFmt</a>;
01127             }
01128             <a class="code" href="../../d6/d0/usercli_8h.html#a310">fpImmGetCompositionWindow</a>( hImc, &amp;cft );
01129             <span class="keywordflow">if</span> ( (!RtlEqualMemory(&amp;cf,&amp;cft,<span class="keyword">sizeof</span>(COMPOSITIONFORM))) ||
01130                  (ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o93">ptScreenBounding</a>.x != rcScreenWindow.left)    ||
01131                  (ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o93">ptScreenBounding</a>.y  != rcScreenWindow.top) ) {
01132 
01133                 ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o93">ptScreenBounding</a>.x = rcScreenWindow.left;
01134                 ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o93">ptScreenBounding</a>.y = rcScreenWindow.top;
01135                 <a class="code" href="../../d6/d0/usercli_8h.html#a321">fpImmSetCompositionWindow</a>( hImc, &amp;cf );
01136             }
01137         }
01138         <a class="code" href="../../d6/d0/usercli_8h.html#a314">fpImmReleaseContext</a>( ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o14">hwnd</a>, hImc );
01139     }
01140 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a473" doxytag="usercli.h::ECInitInsert" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void ECInitInsert           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ped</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HKL&nbsp;</td>
          <td class="mdname" nowrap> <em>hkl</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01183">1183</a> of file <a class="el" href="../../d6/d3/edecrare_8c-source.html">edecrare.c</a>.
<p>
References <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01225">ECSetCaretHandler()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00651">tagED::fInsertCompChr</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00655">tagED::fKorea</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00653">tagED::fNoMoveCaret</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02537">fpImmIsIME</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00652">tagED::fReplaceCompChr</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00654">tagED::fResultProcess</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d2/d7/hal_8h.html#a212">VOID()</a>.
<p>
Referenced by <a class="el" href="../../d6/d3/edecrare_8c-source.html#l00387">ECCreate()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01037">ECEnableDisableIME()</a>, and <a class="el" href="../../d9/d3/editec_8c-source.html#l02904">EditWndProc()</a>.
<p>
<pre class="fragment"><div>01184 {
01185     ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o56">fKorea</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01186     ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o52">fInsertCompChr</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01187     ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o54">fNoMoveCaret</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01188     ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o55">fResultProcess</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01189 
01190     <span class="keywordflow">if</span> ( <a class="code" href="../../d6/d0/usercli_8h.html#a312">fpImmIsIME</a>(hkl) ) {
01191         <span class="keywordflow">if</span> (  PRIMARYLANGID(LOWORD(HandleToUlong(hkl))) == LANG_KOREAN ) {
01192 
01193             ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o56">fKorea</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01194         }
01195         <span class="comment">//</span>
01196         <span class="comment">// LATER:this flag should be set based on the IME caps</span>
01197         <span class="comment">// retrieved from IME. (Such IME caps should be defined)</span>
01198         <span class="comment">// For now, we can safely assume that only Korean IMEs</span>
01199         <span class="comment">// set CS_INSERTCHAR.</span>
01200         <span class="comment">//</span>
01201         <span class="keywordflow">if</span> ( ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o56">fKorea</a> ) {
01202             ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o52">fInsertCompChr</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01203         }
01204     }
01205 
01206     <span class="comment">//</span>
01207     <span class="comment">// if we had a composition character, the shape of caret</span>
01208     <span class="comment">// is changed. We need to reset the caret shape.</span>
01209     <span class="comment">//</span>
01210     <span class="keywordflow">if</span> ( ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o53">fReplaceCompChr</a> ) {
01211         ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o53">fReplaceCompChr</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01212         <a class="code" href="../../d6/d0/usercli_8h.html#a472">ECSetCaretHandler</a>( ped );
01213     }
01214 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a477" doxytag="usercli.h::ECInOutReconversionMode" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void ECInOutReconversionMode           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ped</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fIn</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d3/editec_8c-source.html#l00402">402</a> of file <a class="el" href="../../d9/d3/editec_8c-source.html">editec.c</a>.
<p>
References <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00602">tagED::fFocus</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00656">tagED::fInReconversion</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00584">tagED::hwnd</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05279">NtUserHideCaret()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06219">NtUserShowCaret()</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/editec_8c-source.html#l00423">ECDoIMEMenuCommand()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01337">ECImeComposition()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01735">EcImeRequestHandler()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02904">EditWndProc()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l02531">MLChar()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l03457">MLEditWndProc()</a>, and <a class="el" href="../../d4/d4/editsl_8c-source.html#l01304">SLChar()</a>.
<p>
<pre class="fragment"><div>00403 {
00404     UserAssert(fIn == TRUE || fIn == FALSE);
00405     <span class="keywordflow">if</span> (fIn == ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o57">fInReconversion</a>) {
00406         <span class="keywordflow">return</span>;
00407     }
00408     ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o57">fInReconversion</a> = fIn;
00409     <span class="keywordflow">if</span> (ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o23">fFocus</a>) {
00410         (fIn ? <a class="code" href="../../d0/d0/ntuser_8h.html#a106">NtUserHideCaret</a>: <a class="code" href="../../d0/d0/ntuser_8h.html#a138">NtUserShowCaret</a>)(ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o14">hwnd</a>);
00411     }
00412 
00413     <span class="keywordflow">return</span>;
00414 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a446" doxytag="usercli.h::ECInsertText" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL ECInsertText           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPSTR&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a> *&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d3/editec_8c-source.html#l02059">2059</a> of file <a class="el" href="../../d9/d3/editec_8c-source.html">editec.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00661">tagED::cbChar</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00557">tagED::cch</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00553">tagED::cchAlloc</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00484">CCHALLOCEXTRA</a>, <a class="el" href="../../d6/d6/strings_8c-source.html#l00335">CharLowerBuffA()</a>, <a class="el" href="../../d9/d9/wstrings_8c-source.html#l00252">CharLowerBuffW()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00689">tagED::charSet</a>, <a class="el" href="../../d3/d1/oemxlate_8c-source.html#l00059">CharToOemBuffA()</a>, <a class="el" href="../../d3/d1/oemxlate_8c-source.html#l00182">CharToOemBuffW()</a>, <a class="el" href="../../d6/d6/strings_8c-source.html#l00416">CharUpperBuffA()</a>, <a class="el" href="../../d9/d9/wstrings_8c-source.html#l00298">CharUpperBuffW()</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l04133">ECAdjustIch()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02492">ECGetEditDC()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l04083">ECIsDBCSLeadByte()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00052">ECLock()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l01996">ECMergeUndoInsertInfo()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02524">ECReleaseEditDC()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00086">ECUnlock()</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l03417">tagLPKEDITCALLOUT::EditAdjustCaret</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l03297">tagLPKEDITCALLOUT::EditVerifyText</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00640">tagED::fAnsi</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00603">tagED::fDirty</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01123">GETAPPVER</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00706">tagED::hInstance</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00552">tagED::hText</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00626">ICH</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00564">tagED::ichCaret</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00563">tagED::ichMaxSel</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00561">tagED::ichMinSel</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00025">INT</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00590">IS_DBCS_ENABLED</a>, <a class="el" href="../../d6/d6/strings_8c-source.html#l00502">IsCharLowerA()</a>, <a class="el" href="../../d9/d9/wstrings_8c-source.html#l00348">IsCharLowerW()</a>, <a class="el" href="../../d9/d5/ntuser_2client_2globals_8h-source.html#l00090">LHND</a>, <a class="el" href="../../d9/d5/ntuser_2client_2globals_8h-source.html#l00109">LOCALREALLOC</a>, <a class="el" href="../../d9/d5/ntuser_2client_2globals_8h-source.html#l00115">LOCALSIZE</a>, <a class="el" href="../../d3/d1/oemxlate_8c-source.html#l00117">OemToCharBuffA()</a>, <a class="el" href="../../d3/d1/oemxlate_8c-source.html#l00253">OemToCharBuffW()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00702">tagED::pLpkEditCallout</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00540">Pundo</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00585">tagED::pwnd</a>, <a class="el" href="../../d2/d7/regtest_8c.html#a2">strlen()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00177">UNICODE_CARRIAGERETURN</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00178">UNICODE_LINEFEED</a>, <a class="el" href="../../d0/d5/verifier_8c-source.html#l03108">UNICODE_TAB</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00474">VER50</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/editec_8c-source.html#l02612">ECSetText()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l01040">MLInsertText()</a>, and <a class="el" href="../../d4/d4/editsl_8c-source.html#l01074">SLInsertText()</a>.
<p>
<pre class="fragment"><div>02063 {
02064     PSTR pedText;
02065     PSTR pTextBuff;
02066     LONG style;
02067     HANDLE hTextCopy;
02068     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> allocamt;
02069 
02070     <span class="comment">//</span>
02071     <span class="comment">// If the last byte (lpText[cchInsert - 1]) is a DBCS leading byte</span>
02072     <span class="comment">// we need to adjust it.</span>
02073     <span class="comment">//</span>
02074     *pcchInsert = <a class="code" href="../../d6/d0/usercli_8h.html#a461">ECAdjustIch</a>(ped, lpText, *pcchInsert);
02075 
02076     <span class="keywordflow">if</span> (!*pcchInsert)
02077         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
02078 
02079     <span class="comment">/*</span>
02080 <span class="comment">     * Do we already have enough memory??</span>
02081 <span class="comment">     */</span>
02082     <span class="keywordflow">if</span> (*pcchInsert &gt;= (ped-&gt;cchAlloc - ped-&gt;cch)) {
02083 
02084         <span class="comment">/*</span>
02085 <span class="comment">         * Allocate what we need plus a little extra. Return FALSE if we are</span>
02086 <span class="comment">         * unsuccessful.</span>
02087 <span class="comment">         */</span>
02088         allocamt = (ped-&gt;cch + *pcchInsert) * ped-&gt;cbChar;
02089         allocamt += <a class="code" href="../../d6/d0/usercli_8h.html#a71">CCHALLOCEXTRA</a>;
02090 
02091 <span class="comment">// if (!ped-&gt;fSingle) {</span>
02092               hTextCopy = <a class="code" href="../../d8/d6/ntuser_2client_2globals_8h.html#a3">LOCALREALLOC</a>(ped-&gt;hText, allocamt, LHND, ped-&gt;hInstance, &amp;lpText);
02093               <span class="keywordflow">if</span> (hTextCopy) {
02094                   ped-&gt;hText = hTextCopy;
02095               } <span class="keywordflow">else</span> {
02096                   <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
02097               }
02098 <span class="comment">// } else {</span>
02099 <span class="comment">// if (!LocalReallocSafe(ped-&gt;hText, allocamt, LHND, pped))</span>
02100 <span class="comment">//                return FALSE;</span>
02101 <span class="comment">// }</span>
02102 
02103         ped-&gt;cchAlloc = <a class="code" href="../../d8/d6/ntuser_2client_2globals_8h.html#a6">LOCALSIZE</a>(ped-&gt;hText, ped-&gt;hInstance) / ped-&gt;cbChar;
02104     }
02105 
02106 
02107     <span class="comment">/*</span>
02108 <span class="comment">     * Ok, we got the memory. Now copy the text into the structure</span>
02109 <span class="comment">     */</span>
02110     pedText = <a class="code" href="../../d6/d0/usercli_8h.html#a433">ECLock</a>(ped);
02111 
02112     <span class="keywordflow">if</span> (ped-&gt;pLpkEditCallout) {
02113         HDC     hdc;
02114         <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a>     iResult;
02115 
02116         hdc = <a class="code" href="../../d6/d0/usercli_8h.html#a451">ECGetEditDC</a> (ped, TRUE);
02117         iResult = ped-&gt;pLpkEditCallout-&gt;EditVerifyText (ped, hdc, pedText, ped-&gt;ichCaret, lpText, *pcchInsert);
02118         <a class="code" href="../../d6/d0/usercli_8h.html#a452">ECReleaseEditDC</a> (ped, hdc, TRUE);
02119 
02120         <span class="keywordflow">if</span> (iResult == 0) {
02121             <a class="code" href="../../d6/d0/usercli_8h.html#a434">ECUnlock</a> (ped);
02122             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
02123         }
02124     }
02125 
02126     <span class="comment">/*</span>
02127 <span class="comment">     * Get a pointer to the place where text is to be inserted</span>
02128 <span class="comment">     */</span>
02129     pTextBuff = pedText + ped-&gt;ichCaret * ped-&gt;cbChar;
02130 
02131     <span class="keywordflow">if</span> (ped-&gt;ichCaret != ped-&gt;cch) {
02132 
02133         <span class="comment">/*</span>
02134 <span class="comment">         * We are inserting text into the middle. We have to shift text to the</span>
02135 <span class="comment">         * right before inserting new text.</span>
02136 <span class="comment">         */</span>
02137          memmove(pTextBuff + *pcchInsert * ped-&gt;cbChar, pTextBuff, (ped-&gt;cch-ped-&gt;ichCaret) * ped-&gt;cbChar);
02138     }
02139 
02140     <span class="comment">/*</span>
02141 <span class="comment">     * Make a copy of the text being inserted in the edit buffer.</span>
02142 <span class="comment">     * Use this copy for doing UPPERCASE/LOWERCASE ANSI/OEM conversions</span>
02143 <span class="comment">     * Fix for Bug #3406 -- 01/29/91 -- SANKAR --</span>
02144 <span class="comment">     */</span>
02145     memmove(pTextBuff, lpText, *pcchInsert * ped-&gt;cbChar);
02146     ped-&gt;cch += *pcchInsert;
02147 
02148     <span class="comment">/*</span>
02149 <span class="comment">     * Get the control's style</span>
02150 <span class="comment">     */</span>
02151     style = ped-&gt;pwnd-&gt;style;
02152 
02153     <span class="comment">/*</span>
02154 <span class="comment">     * Do the Upper/Lower conversion</span>
02155 <span class="comment">     */</span>
02156     <span class="keywordflow">if</span> (style &amp; ES_LOWERCASE) {
02157         <span class="keywordflow">if</span> (ped-&gt;fAnsi)
02158             <a class="code" href="../../d5/d7/strings_8c.html#a13">CharLowerBuffA</a>((LPSTR)pTextBuff, *pcchInsert);
02159         <span class="keywordflow">else</span>
02160             <a class="code" href="../../d8/d0/wstrings_8c.html#a12">CharLowerBuffW</a>((LPWSTR)pTextBuff, *pcchInsert);
02161     } <span class="keywordflow">else</span> {
02162         <span class="keywordflow">if</span> (style &amp; ES_UPPERCASE) {
02163             <span class="keywordflow">if</span> (ped-&gt;fAnsi) {
02164                 <a class="code" href="../../d5/d7/strings_8c.html#a14">CharUpperBuffA</a>(pTextBuff, *pcchInsert);
02165             } <span class="keywordflow">else</span> {
02166                 <a class="code" href="../../d8/d0/wstrings_8c.html#a13">CharUpperBuffW</a>((LPWSTR)pTextBuff, *pcchInsert);
02167             }
02168         }
02169     }
02170 
02171     <span class="comment">/*</span>
02172 <span class="comment">     * Do the OEM conversion</span>
02173 <span class="comment">     */</span>
02174     <span class="keywordflow">if</span> ((style &amp; ES_OEMCONVERT) &amp;&amp;
02175             <span class="comment">// For backward compatibility with NT4, we don't perform OEM conversion</span>
02176             <span class="comment">// for older apps if the system locale is FarEast.</span>
02177             <span class="comment">//</span>
02178             (!<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a125">IS_DBCS_ENABLED</a>() || <a class="code" href="../../d6/d0/usercli_8h.html#a150">GETAPPVER</a>() &gt;= <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a100">VER50</a> || GetOEMCP() != GetACP())) {
02179 
02180         <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a> i;
02181 
02182         <span class="keywordflow">if</span> (ped-&gt;fAnsi) {
02183             <span class="keywordflow">for</span> (i = 0; i &lt; *pcchInsert; i++) {
02184                 <span class="comment">//</span>
02185                 <span class="comment">// We don't need to call CharToOemBuff etc. if the character</span>
02186                 <span class="comment">// is a double byte character.  And, calling ECIsDBCSLeadByte is</span>
02187                 <span class="comment">// faster and less complicated because we don't have to deal</span>
02188                 <span class="comment">// with the 2 byte dbcs cases.</span>
02189                 <span class="comment">//</span>
02190                 <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a125">IS_DBCS_ENABLED</a>() &amp;&amp; <a class="code" href="../../d6/d0/usercli_8h.html#a464">ECIsDBCSLeadByte</a>(ped, *(lpText+i))) {
02191                     i++;
02192                     <span class="keywordflow">continue</span>;
02193                 }
02194 
02195                 <span class="comment">//</span>
02196                 <span class="comment">// Windows Bug (Whistler) 35289</span>
02197                 <span class="comment">// greek has funny rules for casing, so we need to check for it.</span>
02198                 <span class="comment">// for nashville we should be doing something more appropriate</span>
02199                 <span class="comment">// but for now, leave as Win95 golden</span>
02200                 <span class="comment">//</span>
02201                 <span class="keywordflow">if</span> (ped-&gt;charSet != GREEK_CHARSET &amp;&amp; <a class="code" href="../../d5/d7/strings_8c.html#a15">IsCharLowerA</a>(*(pTextBuff + i))) {
02202                     <a class="code" href="../../d5/d7/strings_8c.html#a14">CharUpperBuffA</a>(pTextBuff + i, 1);
02203                     <a class="code" href="../../d2/d2/oemxlate_8c.html#a1">CharToOemBuffA</a>(pTextBuff + i, pTextBuff + i, 1);
02204                     <a class="code" href="../../d2/d2/oemxlate_8c.html#a3">OemToCharBuffA</a>(pTextBuff + i, pTextBuff + i, 1);
02205                     <a class="code" href="../../d5/d7/strings_8c.html#a13">CharLowerBuffA</a>(pTextBuff + i, 1);
02206                 } <span class="keywordflow">else</span> {
02207                     <a class="code" href="../../d2/d2/oemxlate_8c.html#a1">CharToOemBuffA</a>(pTextBuff + i, pTextBuff + i, 1);
02208                     <a class="code" href="../../d2/d2/oemxlate_8c.html#a3">OemToCharBuffA</a>(pTextBuff + i, pTextBuff + i, 1);
02209                 }
02210             }
02211         } <span class="keywordflow">else</span> {
02212             <span class="comment">//</span>
02213             <span class="comment">// Because 'ch' may become DBCS, and have a space for NULL.</span>
02214             <span class="comment">//</span>
02215             UCHAR ch[4];
02216             LPWSTR lpTextW = (LPWSTR)pTextBuff;
02217 
02218             <span class="keywordflow">for</span> (i = 0; i &lt; *pcchInsert; i++) {
02219                 <span class="keywordflow">if</span> (*(lpTextW + i) == <a class="code" href="../../d4/d5/conimep_8h.html#a53">UNICODE_CARRIAGERETURN</a> ||
02220                     *(lpTextW + i) == <a class="code" href="../../d4/d5/conimep_8h.html#a54">UNICODE_LINEFEED</a> ||
02221                     *(lpTextW + i) == <a class="code" href="../../d9/d5/verifier_8c.html#a3">UNICODE_TAB</a>) {
02222                     <span class="keywordflow">continue</span>;
02223                 }
02224                 <span class="comment">//</span>
02225                 <span class="comment">// Windows Bug (Whistler) 35289</span>
02226                 <span class="comment">// greek has funny rules for casing, so we need to check for it.</span>
02227                 <span class="comment">// for nashville we should be doing something more appropriate</span>
02228                 <span class="comment">// but for now, leave as Win95 golden</span>
02229                 <span class="comment">//</span>
02230                 <span class="keywordflow">if</span> (ped-&gt;charSet != GREEK_CHARSET &amp;&amp; <a class="code" href="../../d8/d0/wstrings_8c.html#a14">IsCharLowerW</a>(*(lpTextW + i))) {
02231                     <a class="code" href="../../d8/d0/wstrings_8c.html#a13">CharUpperBuffW</a>(lpTextW + i, 1);
02232                     *(LPDWORD)ch = 0; <span class="comment">// make sure the null-terminate.</span>
02233                     <a class="code" href="../../d2/d2/oemxlate_8c.html#a5">CharToOemBuffW</a>(lpTextW + i, ch, 1);
02234                     <span class="comment">//</span>
02235                     <span class="comment">// We assume any SBCS/DBCS character will converted</span>
02236                     <span class="comment">// to 1 Unicode char, Otherwise, we may overwrite</span>
02237                     <span class="comment">// next character...</span>
02238                     <span class="comment">//</span>
02239                     <a class="code" href="../../d2/d2/oemxlate_8c.html#a7">OemToCharBuffW</a>(ch, lpTextW + i, <a class="code" href="../../d2/d7/regtest_8c.html#a2">strlen</a>(ch));
02240                     <a class="code" href="../../d8/d0/wstrings_8c.html#a12">CharLowerBuffW</a>(lpTextW + i, 1);
02241                 } <span class="keywordflow">else</span> {
02242                     *(LPDWORD)ch = 0; <span class="comment">// make sure the null-terminate.</span>
02243                     <a class="code" href="../../d2/d2/oemxlate_8c.html#a5">CharToOemBuffW</a>(lpTextW + i, ch, 1);
02244                     <span class="comment">//</span>
02245                     <span class="comment">// We assume any SBCS/DBCS character will converted</span>
02246                     <span class="comment">// to 1 Unicode char, Otherwise, we may overwrite</span>
02247                     <span class="comment">// next character...</span>
02248                     <span class="comment">//</span>
02249                     <a class="code" href="../../d2/d2/oemxlate_8c.html#a7">OemToCharBuffW</a>(ch, lpTextW + i, <a class="code" href="../../d2/d7/regtest_8c.html#a2">strlen</a>(ch));
02250                 }
02251             }
02252         }
02253     }
02254 
02255     <span class="comment">/* Adjust UNDO fields so that we can undo this insert... */</span>
02256     <a class="code" href="../../d8/d4/editec_8c.html#a31">ECMergeUndoInsertInfo</a>(<a class="code" href="../../d6/d0/usercli_8h.html#a85">Pundo</a>(ped), ped-&gt;ichCaret, *pcchInsert);
02257 
02258     ped-&gt;ichCaret += *pcchInsert;
02259 
02260     <span class="keywordflow">if</span> (ped-&gt;pLpkEditCallout) {
02261         HDC     hdc;
02262 
02263         hdc = <a class="code" href="../../d6/d0/usercli_8h.html#a451">ECGetEditDC</a> (ped, TRUE);
02264         ped-&gt;ichCaret = ped-&gt;pLpkEditCallout-&gt;EditAdjustCaret (ped, hdc, pedText, ped-&gt;ichCaret);
02265         <a class="code" href="../../d6/d0/usercli_8h.html#a452">ECReleaseEditDC</a> (ped, hdc, TRUE);
02266     }
02267 
02268     ped-&gt;ichMinSel = ped-&gt;ichMaxSel = ped-&gt;ichCaret;
02269 
02270     <a class="code" href="../../d6/d0/usercli_8h.html#a434">ECUnlock</a>(ped);
02271 
02272     <span class="comment">/*</span>
02273 <span class="comment">     * Set dirty bit</span>
02274 <span class="comment">     */</span>
02275     ped-&gt;fDirty = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
02276 
02277     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
02278 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a436" doxytag="usercli.h::ECInvalidateClient" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void ECInvalidateClient           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ped</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fErase</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d3/editec_8c-source.html#l02679">2679</a> of file <a class="el" href="../../d9/d3/editec_8c-source.html">editec.c</a>.
<p>
References <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00924">_GetClientRect()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00643">tagED::fFlatBorder</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00584">tagED::hwnd</a>, <a class="el" href="../../d4/d5/rect_8c-source.html#l00165">InflateRect()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05330">NtUserInvalidateRect()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00585">tagED::pwnd</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00202">SYSMET</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/editec_8c-source.html#l02547">ECResetTextInfo()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l00049">ECSetMargin()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l04185">ECUpdateFormat()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02904">EditWndProc()</a>, and <a class="el" href="../../d7/d4/edslrare_8c-source.html#l00087">SLUndo()</a>.
<p>
<pre class="fragment"><div>02680 {
02681     <span class="keywordflow">if</span> (ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o45">fFlatBorder</a>) {
02682         RECT    rcT;
02683 
02684         <a class="code" href="../../d6/d9/rtl_2wow_8c.html#a19">_GetClientRect</a>(ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o15">pwnd</a>, &amp;rcT);
02685         <a class="code" href="../../d3/d6/rect_8c.html#a7">InflateRect</a>(&amp;rcT, -<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CXBORDER),
02686             -<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CYBORDER));
02687         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a206">NtUserInvalidateRect</a>(ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o14">hwnd</a>, &amp;rcT, fErase);
02688     } <span class="keywordflow">else</span> {
02689         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a206">NtUserInvalidateRect</a>(ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o14">hwnd</a>, NULL, fErase);
02690     }
02691 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a459" doxytag="usercli.h::ECIsCharNumeric" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL ECIsCharNumeric           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ped</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>keyPress</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01010">1010</a> of file <a class="el" href="../../d6/d3/edecrare_8c-source.html">edecrare.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00640">tagED::fAnsi</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01124">THREAD_HKL</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d2/d4/editml_8c-source.html#l02531">MLChar()</a>, and <a class="el" href="../../d4/d4/editsl_8c-source.html#l01304">SLChar()</a>.
<p>
<pre class="fragment"><div>01013 {
01014     WORD wCharType;
01015 
01016     <span class="keywordflow">if</span> (ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o42">fAnsi</a>) {
01017         <span class="keywordtype">char</span> ch = (<span class="keywordtype">char</span>)keyPress;
01018         LCID lcid = (LCID)((ULONG_PTR)<a class="code" href="../../d6/d0/usercli_8h.html#a151">THREAD_HKL</a>() &amp; 0xFFFF);
01019         GetStringTypeA(lcid, CT_CTYPE1, &amp;ch, 1, &amp;wCharType);
01020     } <span class="keywordflow">else</span> {
01021         WCHAR wch = (WCHAR)keyPress;
01022         GetStringTypeW(CT_CTYPE1, &amp;wch, 1, &amp;wCharType);
01023     }
01024     <span class="keywordflow">return</span> (wCharType &amp; C1_DIGIT ? <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a> : <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
01025 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a464" doxytag="usercli.h::ECIsDBCSLeadByte" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL ECIsDBCSLeadByte           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a>&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d3/editec_8c-source.html#l04083">4083</a> of file <a class="el" href="../../d9/d3/editec_8c-source.html">editec.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00711">tagED::DBCSVector</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00640">tagED::fAnsi</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00611">tagED::fDBCS</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/editec_8c-source.html#l04133">ECAdjustIch()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l03926">ECAnsiNext()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l03938">ECAnsiPrev()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02059">ECInsertText()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l03969">ECNextIch()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l04001">ECPrevIch()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00770">ECTabTheTextOut()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l01552">ECWord()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l01562">MLBuildchLines()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l02531">MLChar()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l02792">MLMouseMotion()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l01304">SLChar()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l02098">SLMouseMotion()</a>, and <a class="el" href="../../d4/d4/editsl_8c-source.html#l01934">SLMouseToIch()</a>.
<p>
<pre class="fragment"><div>04084 {
04085     <span class="keywordtype">int</span> i;
04086 
04087     <span class="keywordflow">if</span> (!ped-&gt;fDBCS || !ped-&gt;fAnsi)
04088         <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
04089 
04090     <span class="keywordflow">for</span> (i = 0; ped-&gt;DBCSVector[i]; i += 2) {
04091         <span class="keywordflow">if</span> ((ped-&gt;DBCSVector[i] &lt;= cch) &amp;&amp; (ped-&gt;DBCSVector[i+1] &gt;= cch))
04092             <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
04093     }
04094 
04095     <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
04096 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a433" doxytag="usercli.h::ECLock" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> PSTR ECLock           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>ped</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d3/editec_8c-source.html#l00052">52</a> of file <a class="el" href="../../d9/d3/editec_8c-source.html">editec.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l00661">tagED::cbChar</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00557">tagED::cch</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00708">tagED::fEncoded</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00706">tagED::hInstance</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00552">tagED::hText</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00709">tagED::iLockLevel</a>, <a class="el" href="../../d9/d5/ntuser_2client_2globals_8h-source.html#l00111">LOCALLOCK</a>, <a class="el" href="../../d9/d5/sertl_8c-source.html#l00520">RtlRunDecodeUnicodeString()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00707">tagED::seed</a>, and <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00064">USHORT</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/editec_8c-source.html#l02703">ECCopy()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02293">ECDeleteText()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00423">ECDoIMEMenuCommand()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l00246">ECGetText()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01735">EcImeRequestHandler()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02059">ECInsertText()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l03969">ECNextIch()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l04001">ECPrevIch()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01225">ECSetCaretHandler()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l01552">ECWord()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01683">HanjaKeyHandler()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l01562">MLBuildchLines()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l00085">MLCalcXOffset()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l03991">MLDrawText()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l03457">MLEditWndProc()</a>, <a class="el" href="../../d6/d4/edmlrare_8c-source.html#l00266">MLGetLine()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l00553">MLIchToXYPos()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l00502">MLIchToYPos()</a>, <a class="el" href="../../d6/d4/edmlrare_8c-source.html#l00027">MLInsertCrCrLf()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l01040">MLInsertText()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l02028">MLKeyDown()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l00374">MLLine()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l02792">MLMouseMotion()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l00689">MLMouseToIch()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l00144">MLMoveSelection()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l00264">MLMoveSelectionRestricted()</a>, <a class="el" href="../../d6/d4/edmlrare_8c-source.html#l00222">MLSetHandle()</a>, <a class="el" href="../../d6/d4/edmlrare_8c-source.html#l00368">MLSetSelection()</a>, <a class="el" href="../../d6/d4/edmlrare_8c-source.html#l00159">MLStripCrCrLf()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l01003">MLUpdateiCaretLine()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l01446">NextWordCallBack()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l01518">NextWordLpkCallBack()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l00030">SLCalcStringWidth()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l00080">SLCalcXOffsetSpecial()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l00395">SLChangeSelection()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l00507">SLDrawLine()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l00737">SLDrawText()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l00323">SLGetClipRect()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l00182">SLIchToLeftXPos()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l01074">SLInsertText()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l02098">SLMouseMotion()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l01934">SLMouseToIch()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l01498">SLMoveSelectionRestricted()</a>, and <a class="el" href="../../d4/d4/editsl_8c-source.html#l00932">SLScrollText()</a>.
<p>
<pre class="fragment"><div>00054 {
00055     PSTR ptext = <a class="code" href="../../d8/d6/ntuser_2client_2globals_8h.html#a4">LOCALLOCK</a>(ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o0">hText</a>, ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o87">hInstance</a>);
00056     ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o90">iLockLevel</a>++;
00057 
00058     <span class="comment">/*</span>
00059 <span class="comment">     * If this is the first lock of the text and the text is encoded</span>
00060 <span class="comment">     * decode the text.</span>
00061 <span class="comment">     */</span>
00062     <span class="comment">//RIPMSG2(RIP_VERBOSE, "lock  : %d '%10s'\n", ped-&gt;iLockLevel, ptext);</span>
00063     <span class="keywordflow">if</span> (ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o90">iLockLevel</a> == 1 &amp;&amp; ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o89">fEncoded</a>) {
00064         <span class="comment">/*</span>
00065 <span class="comment">         * rtlrundecode can't handle zero length strings</span>
00066 <span class="comment">         */</span>
00067         <span class="keywordflow">if</span> (ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o3">cch</a> != 0) {
00068             STRING string;
00069             string.Length = string.MaximumLength = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a>)(ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o3">cch</a> * ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o60">cbChar</a>);
00070             string.Buffer = ptext;
00071 
00072             <a class="code" href="../../d8/d6/sertl_8c.html#a32">RtlRunDecodeUnicodeString</a>(ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o88">seed</a>, (PUNICODE_STRING)&amp;string);
00073             <span class="comment">//RIPMSG1(RIP_VERBOSE, "Decoding: '%10s'\n", ptext);</span>
00074         }
00075         ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o89">fEncoded</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00076     }
00077     <span class="keywordflow">return</span> ptext;
00078 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a435" doxytag="usercli.h::ECNcCreate" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL ECNcCreate           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPCREATESTRUCT&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d3/edecrare_8c-source.html#l00285">285</a> of file <a class="el" href="../../d6/d3/edecrare_8c-source.html">edecrare.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00661">tagED::cbChar</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00553">tagED::cchAlloc</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00484">CCHALLOCEXTRA</a>, <a class="el" href="../../d2/d0/bench_8c-source.html#l00050">CHAR</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00688">tagED::charWidthBuffer</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00662">tagED::chLines</a>, <a class="el" href="../../d9/d3/w32_2ntuser_2kernel_2random_8c-source.html#l00102">ClearWindowState()</a>, <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00574">DefWindowProcWorker()</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l00018">EditLookaside</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02491">EFMULTILINE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02500">EFREADONLY</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00642">tagED::f40Compat</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00640">tagED::fAnsi</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00607">tagED::fBorder</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00604">tagED::fDisabled</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00708">tagED::fEncoded</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00643">tagED::fFlatBorder</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00836">FNID_CLEANEDUP_BIT</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00632">tagED::fReadOnly</a>, <a class="el" href="../../d2/d1/rtlinit_8c-source.html#l00344">FreeLookasideEntry()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00599">tagED::fSingle</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00641">tagED::fWin31Compat</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00916">GETEXPWINVER</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00712">tagED::hImcPrev</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00706">tagED::hInstance</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00552">tagED::hText</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00584">tagED::hwnd</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00587">tagED::hwndParent</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01515">HWq</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00709">tagED::iLockLevel</a>, <a class="el" href="../../d9/d5/ntuser_2client_2globals_8h-source.html#l00090">LHND</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00678">tagED::lineHeight</a>, <a class="el" href="../../d9/d5/ntuser_2client_2globals_8h-source.html#l00107">LOCALALLOC</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l07715">NtUserSetWindowFNID()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d9/d9/immstruc_8h-source.html#l00025">NULL_HIMC</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00684">tagED::pTabStops</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02367">WEFEDGEMASK</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02302">WFANSICREATOR</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02410">WFBORDER</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02418">WFDISABLED</a>, and <a class="el" href="../../d7/d9/usercli_8h-source.html#l00659">tagED::wImeStatus</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/editec_8c-source.html#l02904">EditWndProc()</a>.
<p>
<pre class="fragment"><div>00289 {
00290     HWND hwnd = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(pwnd);
00291     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fAnsi;
00292 
00293     fAnsi = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFANSICREATOR);
00294 
00295     <span class="comment">/*</span>
00296 <span class="comment">     * Initialize the ped</span>
00297 <span class="comment">     */</span>
00298     ped-&gt;fEncoded = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00299     ped-&gt;iLockLevel = 0;
00300 
00301     ped-&gt;chLines = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00302     ped-&gt;pTabStops = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00303     ped-&gt;charWidthBuffer = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00304     ped-&gt;fAnsi = fAnsi ? 1 : 0; <span class="comment">// Force TRUE to be 1 because its a 1 bit field</span>
00305     ped-&gt;cbChar = (WORD)(fAnsi ? <span class="keyword">sizeof</span>(<a class="code" href="../../d1/d1/bench_8c.html#a16">CHAR</a>) : <span class="keyword">sizeof</span>(WCHAR));
00306     ped-&gt;hInstance = pwnd-&gt;hModule;
00307     <span class="comment">// IME</span>
00308     ped-&gt;hImcPrev = <a class="code" href="../../d8/d0/immstruc_8h.html#a0">NULL_HIMC</a>;
00309 
00310     {
00311         <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwVer = <a class="code" href="../../d6/d0/usercli_8h.html#a134">GETEXPWINVER</a>(lpCreateStruct-&gt;hInstance);
00312 
00313         ped-&gt;fWin31Compat = (dwVer &gt;= 0x030a);
00314         ped-&gt;f40Compat = (dwVer &gt;= 0x0400);
00315     }
00316 
00317     <span class="comment">//</span>
00318     <span class="comment">// NOTE:</span>
00319     <span class="comment">// The order of the following two checks is important.  People can</span>
00320     <span class="comment">// create edit fields with a 3D and a normal border, and we don't</span>
00321     <span class="comment">// want to disallow that.  But we need to detect the "no 3D border"</span>
00322     <span class="comment">// border case too.</span>
00323     <span class="comment">//</span>
00324     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WEFEDGEMASK))
00325     {
00326         ped-&gt;fBorder = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00327     }
00328     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFBORDER))
00329     {
00330         <a class="code" href="../../d4/d1/userk_8h.html#a1629">ClearWindowState</a>(pwnd, WFBORDER);
00331         ped-&gt;fFlatBorder = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00332         ped-&gt;fBorder = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00333     }
00334 
00335     <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, EFMULTILINE))
00336         ped-&gt;fSingle = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00337 
00338     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFDISABLED))
00339         ped-&gt;fDisabled = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00340 
00341     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, EFREADONLY)) {
00342         <span class="keywordflow">if</span> (!ped-&gt;fWin31Compat) {
00343             <span class="comment">/*</span>
00344 <span class="comment">             * BACKWARD COMPATIBILITY HACK</span>
00345 <span class="comment">             *</span>
00346 <span class="comment">             * "MileStone" unknowingly sets the ES_READONLY style. So, we strip this</span>
00347 <span class="comment">             * style here for all Win3.0 apps (this style is new for Win3.1).</span>
00348 <span class="comment">             * Fix for Bug #12982 -- SANKAR -- 01/24/92 --</span>
00349 <span class="comment">             */</span>
00350              <a class="code" href="../../d4/d1/userk_8h.html#a1629">ClearWindowState</a>(pwnd, EFREADONLY);
00351         } <span class="keywordflow">else</span>
00352             ped-&gt;fReadOnly = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00353     }
00354 
00355 
00356     <span class="comment">/*</span>
00357 <span class="comment">     * Allocate storage for the text for the edit controls. Storage for single</span>
00358 <span class="comment">     * line edit controls will always get allocated in the local data segment.</span>
00359 <span class="comment">     * Multiline will allocate in the local ds but the app may free this and</span>
00360 <span class="comment">     * allocate storage elsewhere...</span>
00361 <span class="comment">     */</span>
00362     ped-&gt;hText = <a class="code" href="../../d8/d6/ntuser_2client_2globals_8h.html#a2">LOCALALLOC</a>(LHND, CCHALLOCEXTRA*ped-&gt;cbChar, ped-&gt;hInstance);
00363     <span class="keywordflow">if</span> (!ped-&gt;hText) {
00364         <a class="code" href="../../d6/d0/usercli_8h.html#a408">FreeLookasideEntry</a>(&amp;EditLookaside, ped);
00365         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a284">NtUserSetWindowFNID</a>(hwnd, FNID_CLEANEDUP_BIT); <span class="comment">/* No ped for this window */</span>
00366         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>; <span class="comment">/* If no_memory error */</span>
00367     }
00368 
00369     ped-&gt;cchAlloc = <a class="code" href="../../d6/d0/usercli_8h.html#a71">CCHALLOCEXTRA</a>;
00370     ped-&gt;lineHeight = 1;
00371 
00372     ped-&gt;hwnd = hwnd;
00373     ped-&gt;hwndParent = lpCreateStruct-&gt;hwndParent;
00374 
00375     ped-&gt;wImeStatus = 0;
00376 
00377     <span class="keywordflow">return</span> (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>)<a class="code" href="../../d6/d0/usercli_8h.html#a610">DefWindowProcWorker</a>(pwnd, WM_NCCREATE, 0,
00378             (LPARAM)lpCreateStruct, fAnsi);
00379 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a440" doxytag="usercli.h::ECNcDestroyHandler" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void ECNcDestroyHandler           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d3/edecrare_8c-source.html#l00439">439</a> of file <a class="el" href="../../d6/d3/edecrare_8c-source.html">edecrare.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l00688">tagED::charWidthBuffer</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00662">tagED::chLines</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l00207">ComboBoxWndProcWorker()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l00018">EditLookaside</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00836">FNID_CLEANEDUP_BIT</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00794">FNID_COMBOBOX</a>, <a class="el" href="../../d2/d1/rtlinit_8c-source.html#l00344">FreeLookasideEntry()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00843">GETFNID</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00703">tagED::hCaretBitmap</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00706">tagED::hInstance</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00552">tagED::hText</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01515">HWq</a>, <a class="el" href="../../d9/d5/ntuser_2client_2globals_8h-source.html#l00117">LOCALFREE</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l07715">NtUserSetWindowFNID()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00702">tagED::pLpkEditCallout</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00684">tagED::pTabStops</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00411">PTR_TO_ID</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00215">REBASEPWND</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01764">tagWND::spmenu</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00124">UserGlobalFree</a>, and <a class="el" href="../../d7/d9/usercli_8h-source.html#l00960">UserLocalFree</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/editec_8c-source.html#l02904">EditWndProc()</a>.
<p>
<pre class="fragment"><div>00442 {
00443     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwndParent;
00444 
00445     <span class="comment">/*</span>
00446 <span class="comment">     * ped could be NULL if WM_NCCREATE failed to create it...</span>
00447 <span class="comment">     */</span>
00448     <span class="keywordflow">if</span> (ped) {
00449 
00450         <span class="comment">/*</span>
00451 <span class="comment">         * Free the text buffer (always present?)</span>
00452 <span class="comment">         */</span>
00453         <a class="code" href="../../d8/d6/ntuser_2client_2globals_8h.html#a7">LOCALFREE</a>(ped-&gt;hText, ped-&gt;hInstance);
00454 
00455         <span class="comment">/*</span>
00456 <span class="comment">         * Free up undo buffer and line start array (if present)</span>
00457 <span class="comment">         */</span>
00458         <span class="keywordflow">if</span> (ped-&gt;hDeletedText != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00459             <a class="code" href="../../d6/d0/usercli_8h.html#a2">UserGlobalFree</a>(ped-&gt;hDeletedText);
00460 
00461         <span class="comment">/*</span>
00462 <span class="comment">         * Free tab stop buffer (if present)</span>
00463 <span class="comment">         */</span>
00464         <span class="keywordflow">if</span> (ped-&gt;pTabStops)
00465             <a class="code" href="../../d6/d0/usercli_8h.html#a138">UserLocalFree</a>(ped-&gt;pTabStops);
00466 
00467         <span class="comment">/*</span>
00468 <span class="comment">         * Free line start array (if present)</span>
00469 <span class="comment">         */</span>
00470         <span class="keywordflow">if</span> (ped-&gt;chLines) {
00471             <a class="code" href="../../d6/d0/usercli_8h.html#a138">UserLocalFree</a>(ped-&gt;chLines);
00472         }
00473 
00474         <span class="comment">/*</span>
00475 <span class="comment">         * Free the character width buffer (if present)</span>
00476 <span class="comment">         */</span>
00477         <span class="keywordflow">if</span> (ped-&gt;charWidthBuffer)
00478             <a class="code" href="../../d6/d0/usercli_8h.html#a138">UserLocalFree</a>(ped-&gt;charWidthBuffer);
00479 
00480         <span class="comment">/*</span>
00481 <span class="comment">         * Free the cursor bitmap</span>
00482 <span class="comment">         */</span>
00483         <span class="keywordflow">if</span> (ped-&gt;pLpkEditCallout &amp;&amp; ped-&gt;hCaretBitmap) {
00484             DeleteObject(ped-&gt;hCaretBitmap);
00485         }
00486 
00487         <span class="comment">/*</span>
00488 <span class="comment">         * Last but not least, free the ped</span>
00489 <span class="comment">         */</span>
00490         <a class="code" href="../../d6/d0/usercli_8h.html#a408">FreeLookasideEntry</a>(&amp;EditLookaside, ped);
00491     }
00492 
00493     <span class="comment">/*</span>
00494 <span class="comment">     * Set the window's fnid status so that we can ignore rogue messages</span>
00495 <span class="comment">     */</span>
00496     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a284">NtUserSetWindowFNID</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(pwnd), FNID_CLEANEDUP_BIT);
00497 
00498     <span class="comment">/*</span>
00499 <span class="comment">     * If we're part of a combo box, let it know we're gone</span>
00500 <span class="comment">     */</span>
00501     pwndParent = <a class="code" href="../../d6/d0/usercli_8h.html#a27">REBASEPWND</a>(pwnd, spwndParent);
00502     <span class="keywordflow">if</span> (pwndParent &amp;&amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a232">GETFNID</a>(pwndParent) == <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a201">FNID_COMBOBOX</a>) {
00503         <a class="code" href="../../d6/d0/usercli_8h.html#a614">ComboBoxWndProcWorker</a>(pwndParent, WM_PARENTNOTIFY,
00504                 MAKELONG(WM_DESTROY, <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a99">PTR_TO_ID</a>(pwnd-&gt;spmenu)), (LPARAM)<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(pwnd), FALSE);
00505     }
00506 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a468" doxytag="usercli.h::ECNextIch" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a> ECNextIch           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPSTR&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d3/editec_8c-source.html#l03969">3969</a> of file <a class="el" href="../../d9/d3/editec_8c-source.html">editec.c</a>.
<p>
References <a class="el" href="../../d9/d3/editec_8c-source.html#l04083">ECIsDBCSLeadByte()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00052">ECLock()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00086">ECUnlock()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00640">tagED::fAnsi</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00611">tagED::fDBCS</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00626">ICH</a>.
<p>
Referenced by <a class="el" href="../../d2/d4/editml_8c-source.html#l01562">MLBuildchLines()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l01367">MLDeleteText()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l00144">MLMoveSelection()</a>, and <a class="el" href="../../d4/d4/editsl_8c-source.html#l01529">SLKeyDown()</a>.
<p>
<pre class="fragment"><div>03970 {
03971     <span class="keywordflow">if</span> (!ped-&gt;fDBCS || !ped-&gt;fAnsi) {
03972 
03973         <span class="keywordflow">return</span> (ichCurrent + 1);
03974 
03975     } <span class="keywordflow">else</span> {
03976 
03977         <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a> ichRet;
03978         LPSTR pText;
03979 
03980         <span class="keywordflow">if</span> (pStart)
03981             pText = pStart + ichCurrent;
03982         <span class="keywordflow">else</span>
03983             pText = (LPSTR)<a class="code" href="../../d6/d0/usercli_8h.html#a433">ECLock</a>(ped) + ichCurrent;
03984 
03985         ichRet = ichCurrent + ( <a class="code" href="../../d6/d0/usercli_8h.html#a464">ECIsDBCSLeadByte</a>(ped, *pText) ? 2 : 1 );
03986 
03987         <span class="keywordflow">if</span> (!pStart)
03988             <a class="code" href="../../d6/d0/usercli_8h.html#a434">ECUnlock</a>(ped);
03989 
03990         <span class="keywordflow">return</span> (ichRet);
03991     }
03992 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a449" doxytag="usercli.h::ECNotifyParent" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void ECNotifyParent           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d3/editec_8c-source.html#l02429">2429</a> of file <a class="el" href="../../d9/d3/editec_8c-source.html">editec.c</a>.
<p>
References <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00584">tagED::hwnd</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00587">tagED::hwndParent</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00411">PTR_TO_ID</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00585">tagED::pwnd</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00652">SendMessage()</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01764">tagWND::spmenu</a>.
<p>
Referenced by <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01337">ECImeComposition()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02547">ECResetTextInfo()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02612">ECSetText()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02904">EditWndProc()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l01367">MLDeleteText()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l01487">MLInsertchLine()</a>, <a class="el" href="../../d6/d4/edmlrare_8c-source.html#l00027">MLInsertCrCrLf()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l01040">MLInsertText()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l03329">MLKillFocus()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l02966">MLScroll()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l03274">MLSetFocus()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l01304">SLChar()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l01074">SLInsertText()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l01529">SLKeyDown()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l02394">SLKillFocus()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l02467">SLPaste()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l01225">SLReplaceSel()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l02341">SLSetFocus()</a>, and <a class="el" href="../../d7/d4/edslrare_8c-source.html#l00087">SLUndo()</a>.
<p>
<pre class="fragment"><div>02432 {
02433     <span class="comment">/*</span>
02434 <span class="comment">     * wParam is NotificationCode (hiword) and WindowID (loword)</span>
02435 <span class="comment">     * lParam is HWND of control sending the message</span>
02436 <span class="comment">     * Windows 95 checks for hwndParent != NULL before sending the message, but</span>
02437 <span class="comment">     * this is surely rare, and SendMessage NULL hwnd does nowt anyway (IanJa)</span>
02438 <span class="comment">     */</span>
02439     <a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(ped-&gt;hwndParent, WM_COMMAND,
02440             (DWORD)MAKELONG(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a99">PTR_TO_ID</a>(ped-&gt;pwnd-&gt;spmenu), notificationCode),
02441             (LPARAM)ped-&gt;hwnd);
02442 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a467" doxytag="usercli.h::ECPrevIch" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a> ECPrevIch           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPSTR&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d3/editec_8c-source.html#l04001">4001</a> of file <a class="el" href="../../d9/d3/editec_8c-source.html">editec.c</a>.
<p>
References <a class="el" href="../../d9/d3/editec_8c-source.html#l04083">ECIsDBCSLeadByte()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00052">ECLock()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00086">ECUnlock()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00640">tagED::fAnsi</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00611">tagED::fDBCS</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00626">ICH</a>, and <a class="el" href="../../d7/d9/usercli_8h-source.html#l00702">tagED::pLpkEditCallout</a>.
<p>
Referenced by <a class="el" href="../../d2/d4/editml_8c-source.html#l00144">MLMoveSelection()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l01304">SLChar()</a>, and <a class="el" href="../../d4/d4/editsl_8c-source.html#l01529">SLKeyDown()</a>.
<p>
<pre class="fragment"><div>04002 {
04003     LPSTR lpCurrent;
04004     LPSTR lpStr;
04005     LPSTR lpBase;
04006 
04007 <span class="preprocessor">#ifdef SURROGATE</span>
04008 <span class="preprocessor"></span>    <span class="comment">// Handle Unicode surrogates pairs when CSLPK is loaded</span>
04009     <span class="keywordflow">if</span> (ped-&gt;fAnsi || !ped-&gt;pLpkEditCallout)  <span class="comment">// if no surrogate processing required</span>
04010 <span class="preprocessor">#endif</span>
04011 <span class="preprocessor"></span>        <span class="keywordflow">if</span> (!ped-&gt;fDBCS || !ped-&gt;fAnsi)
04012             <span class="keywordflow">if</span> ( ichCurrent )
04013                 <span class="keywordflow">return</span> (ichCurrent - 1);
04014             <span class="keywordflow">else</span>
04015                 <span class="keywordflow">return</span> (ichCurrent);
04016 
04017     <span class="keywordflow">if</span> (ichCurrent &lt;= 1)
04018         <span class="keywordflow">return</span> 0;
04019 
04020     <span class="keywordflow">if</span> (pStart)
04021         lpBase = pStart;
04022     <span class="keywordflow">else</span>
04023         lpBase = <a class="code" href="../../d6/d0/usercli_8h.html#a433">ECLock</a>(ped);
04024 
04025 <span class="preprocessor">#ifdef SURROGATE</span>
04026 <span class="preprocessor"></span>
04027     <span class="comment">// Handle characters represented by multiple codepoints</span>
04028 
04029     <span class="keywordflow">if</span> (ped-&gt;fAnsi) {
04030 
04031         <span class="comment">// ANSI PrevIch with DBCS support</span>
04032 <span class="preprocessor">#endif</span>
04033 <span class="preprocessor"></span>
04034         lpStr = lpBase + ichCurrent;
04035         lpCurrent = lpStr - 1;
04036         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a464">ECIsDBCSLeadByte</a>(ped,*lpCurrent)) {
04037             <span class="keywordflow">if</span> (!pStart)
04038                 <a class="code" href="../../d6/d0/usercli_8h.html#a434">ECUnlock</a>(ped);
04039             <span class="keywordflow">return</span> (ichCurrent - 2);
04040         }
04041 
04042         <span class="keywordflow">do</span> {
04043             lpCurrent--;
04044             <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d0/usercli_8h.html#a464">ECIsDBCSLeadByte</a>(ped, *lpCurrent)) {
04045                 lpCurrent++;
04046                 <span class="keywordflow">break</span>;
04047             }
04048         } <span class="keywordflow">while</span>(lpCurrent != lpBase);
04049 
04050         <span class="keywordflow">if</span> (!pStart)
04051             <a class="code" href="../../d6/d0/usercli_8h.html#a434">ECUnlock</a>(ped);
04052         <span class="keywordflow">return</span> (ichCurrent - (((lpStr - lpCurrent) &amp; 1) ? 1 : 2));
04053 
04054 <span class="preprocessor">#ifdef SURROGATE</span>
04055 <span class="preprocessor"></span>
04056     } <span class="keywordflow">else</span> {
04057 
04058         <span class="comment">// Unicode PrevIch with surrogate pair support</span>
04059 
04060         ichCurrent--;
04061 
04062         <span class="keywordflow">if</span> (    (((WCHAR*)lpBase)[ichCurrent]   &amp; 0xFC00) == 0xDC00
04063             &amp;&amp;  (((WCHAR*)lpBase)[ichCurrent-1] &amp; 0xFC00) == 0xD800) {
04064 
04065             ichCurrent--;
04066         }
04067 
04068         <span class="keywordflow">if</span> (!pStart)
04069             <a class="code" href="../../d6/d0/usercli_8h.html#a434">ECUnlock</a>(ped);
04070 
04071         <span class="keywordflow">return</span> ichCurrent;
04072     }
04073 <span class="preprocessor">#endif</span>
04074 <span class="preprocessor"></span>}
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a452" doxytag="usercli.h::ECReleaseEditDC" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void ECReleaseEditDC           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HDC&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d3/editec_8c-source.html#l02524">2524</a> of file <a class="el" href="../../d9/d3/editec_8c-source.html">editec.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l00584">tagED::hwnd</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06219">NtUserShowCaret()</a>, and <a class="el" href="../../d4/d7/client_8c-source.html#l01052">ReleaseDC()</a>.
<p>
Referenced by <a class="el" href="../../d6/d3/edecrare_8c-source.html#l00387">ECCreate()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02293">ECDeleteText()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01337">ECImeComposition()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02059">ECInsertText()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01225">ECSetCaretHandler()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l00516">ECSetPasswordChar()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02904">EditWndProc()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l01562">MLBuildchLines()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l00085">MLCalcXOffset()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l01367">MLDeleteText()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l03457">MLEditWndProc()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l03379">MLEnsureCaretVisible()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l01040">MLInsertText()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l02028">MLKeyDown()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l03329">MLKillFocus()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l02792">MLMouseMotion()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l00264">MLMoveSelectionRestricted()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l02966">MLScroll()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l03274">MLSetFocus()</a>, <a class="el" href="../../d6/d4/edmlrare_8c-source.html#l00368">MLSetSelection()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l01518">NextWordLpkCallBack()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l01304">SLChar()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l02520">SLEditWndProc()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l01074">SLInsertText()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l01529">SLKeyDown()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l02098">SLMouseMotion()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l01498">SLMoveSelectionRestricted()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l02467">SLPaste()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l01225">SLReplaceSel()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l02341">SLSetFocus()</a>, and <a class="el" href="../../d4/d4/editsl_8c-source.html#l00283">SLSetSelection()</a>.
<p>
<pre class="fragment"><div>02528 {
02529     <span class="comment">/*</span>
02530 <span class="comment">     * Restoring font not necessary</span>
02531 <span class="comment">     */</span>
02532 
02533     <a class="code" href="../../d3/d8/client_8c.html#a45">ReleaseDC</a>(ped-&gt;hwnd, hdc);
02534 
02535     <span class="keywordflow">if</span> (!fFastDC)
02536         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a234">NtUserShowCaret</a>(ped-&gt;hwnd);
02537 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a448" doxytag="usercli.h::ECResetTextInfo" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void ECResetTextInfo           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>ped</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d3/editec_8c-source.html#l02547">2547</a> of file <a class="el" href="../../d9/d3/editec_8c-source.html">editec.c</a>.
<p>
References <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00860">_IsWindowVisible()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00559">tagED::cLines</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l01977">ECEmptyUndo()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02679">ECInvalidateClient()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02429">ECNotifyParent()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00603">tagED::fDirty</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00599">tagED::fSingle</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00641">tagED::fWin31Compat</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01265">FWINABLE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01514">HW</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00584">tagED::hwnd</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00566">tagED::iCaretLine</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00564">tagED::ichCaret</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00574">tagED::ichLinesOnScreen</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00563">tagED::ichMaxSel</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00561">tagED::ichMinSel</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00570">tagED::ichScreenStart</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00682">tagED::listboxHwnd</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l01562">MLBuildchLines()</a>, <a class="el" href="../../d6/d4/edmlrare_8c-source.html#l00159">MLStripCrCrLf()</a>, <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00354">NotifyWinEvent()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00540">Pundo</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00585">tagED::pwnd</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l03608">UpdateWindow()</a>, and <a class="el" href="../../d7/d9/usercli_8h-source.html#l00575">tagED::xOffset</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/editec_8c-source.html#l02612">ECSetText()</a>, and <a class="el" href="../../d6/d4/edmlrare_8c-source.html#l00222">MLSetHandle()</a>.
<p>
<pre class="fragment"><div>02548 {
02549     <span class="comment">//</span>
02550     <span class="comment">// Reset caret, selections, scrolling, and dirty information.</span>
02551     <span class="comment">//</span>
02552     ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o8">iCaretLine</a> = ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o7">ichCaret</a> = 0;
02553     ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o5">ichMinSel</a> = ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o6">ichMaxSel</a> = 0;
02554     ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o11">xOffset</a> = ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o9">ichScreenStart</a> = 0;
02555     ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o24">fDirty</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
02556 
02557     <a class="code" href="../../d6/d0/usercli_8h.html#a444">ECEmptyUndo</a>(<a class="code" href="../../d6/d0/usercli_8h.html#a85">Pundo</a>(ped));
02558 
02559     <span class="keywordflow">if</span> (ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o20">fSingle</a>) {
02560         <span class="keywordflow">if</span> (!ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o72">listboxHwnd</a>)
02561             <a class="code" href="../../d6/d0/usercli_8h.html#a449">ECNotifyParent</a>(ped, EN_UPDATE);
02562     } <span class="keywordflow">else</span> {
02563 <span class="preprocessor">#ifdef BOGUS</span>
02564 <span class="preprocessor"></span>        <span class="comment">// B#14640</span>
02565         <span class="comment">// We don't want to strip soft breaks or anything else from text</span>
02566         <span class="comment">// that was passed in by the caller. - karlst.</span>
02567         <a class="code" href="../../d6/d0/usercli_8h.html#a499">MLStripCrCrLf</a>(ped);
02568 <span class="preprocessor">#endif</span>
02569 <span class="preprocessor"></span>        <a class="code" href="../../d6/d0/usercli_8h.html#a490">MLBuildchLines</a>(ped, 0, 0, FALSE, NULL, NULL);
02570     }
02571 
02572     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d9/rtl_2wow_8c.html#a17">_IsWindowVisible</a>(ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o15">pwnd</a>)) {
02573         <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fErase;
02574 
02575         <span class="keywordflow">if</span> (ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o20">fSingle</a>)
02576             fErase = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
02577         <span class="keywordflow">else</span>
02578             fErase = ((ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o10">ichLinesOnScreen</a> + ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o9">ichScreenStart</a>) &gt;= ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o4">cLines</a>);
02579 
02580         <span class="comment">// Always redraw whether or not the insert was successful.  We might</span>
02581         <span class="comment">// have NULL text.  Paint() will check the redraw flag for us.</span>
02582         <a class="code" href="../../d6/d0/usercli_8h.html#a436">ECInvalidateClient</a>(ped, fErase);
02583 
02584         <span class="comment">// BACKWARD COMPAT HACK: RAID expects the text to have been updated,</span>
02585         <span class="comment">// so we have to do an UpdateWindow here.  It moves an edit control</span>
02586         <span class="comment">// around with fRedraw == FALSE, so it'll never get the paint message</span>
02587         <span class="comment">// with the control in the right place.</span>
02588         <span class="keywordflow">if</span> (!ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o43">fWin31Compat</a>)
02589             <a class="code" href="../../d3/d8/client_8c.html#a140">UpdateWindow</a>(ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o14">hwnd</a>);
02590     }
02591 
02592     <span class="keywordflow">if</span> (ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o20">fSingle</a> &amp;&amp; !ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o72">listboxHwnd</a>)
02593         <a class="code" href="../../d6/d0/usercli_8h.html#a449">ECNotifyParent</a>(ped, EN_CHANGE);
02594 
02595     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a405">FWINABLE</a>()) {
02596         <a class="code" href="../../d8/d9/client_2ntstubs_8c.html#a12">NotifyWinEvent</a>(EVENT_OBJECT_VALUECHANGE, <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a450">HW</a>(ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o15">pwnd</a>), OBJID_CLIENT,
02597                 INDEXID_CONTAINER);
02598     }
02599 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a445" doxytag="usercli.h::ECSaveUndo" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void ECSaveUndo           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d9/d8/structtagUNDO.html">PUNDO</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pundoFrom</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d9/d8/structtagUNDO.html">PUNDO</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pundoTo</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fClear</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d3/editec_8c-source.html#l01955">1955</a> of file <a class="el" href="../../d9/d3/editec_8c-source.html">editec.c</a>.
<p>
References <a class="el" href="../../d6/d0/usercli_8h.html#a358">PUNDO</a>, and <a class="el" href="../../d6/d0/usercli_8h.html#a357">UNDO</a>.
<p>
Referenced by <a class="el" href="../../d2/d4/editml_8c-source.html#l01040">MLInsertText()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l01309">MLReplaceSel()</a>, and <a class="el" href="../../d4/d4/editsl_8c-source.html#l01225">SLReplaceSel()</a>.
<p>
<pre class="fragment"><div>01956 {
01957     <span class="comment">/*</span>
01958 <span class="comment">     *  Save undo data</span>
01959 <span class="comment">     */</span>
01960     RtlCopyMemory(pundoTo, pundoFrom, <span class="keyword">sizeof</span>(<a class="code" href="../../d9/d8/structtagUNDO.html">UNDO</a>));
01961 
01962     <span class="comment">/*</span>
01963 <span class="comment">     *  Clear passed in undo buffer</span>
01964 <span class="comment">     */</span>
01965     <span class="keywordflow">if</span> (fClear)
01966         RtlZeroMemory(pundoFrom, <span class="keyword">sizeof</span>(<a class="code" href="../../d9/d8/structtagUNDO.html">UNDO</a>) );
01967 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a472" doxytag="usercli.h::ECSetCaretHandler" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void ECSetCaretHandler           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>ped</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01225">1225</a> of file <a class="el" href="../../d6/d3/edecrare_8c-source.html">edecrare.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l00677">tagED::aveCharWidth</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01579">CreateCaret</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00680">tagED::cxSysCharWidth</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l02981">DestroyCaret()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02492">ECGetEditDC()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00052">ECLock()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02524">ECReleaseEditDC()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00086">ECUnlock()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00640">tagED::fAnsi</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00602">tagED::fFocus</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00652">tagED::fReplaceCompChr</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00599">tagED::fSingle</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00584">tagED::hwnd</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00564">tagED::ichCaret</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00678">tagED::lineHeight</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l00292">MLSetCaretPosition()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05279">NtUserHideCaret()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06219">NtUserShowCaret()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l00126">SLSetCaretPosition()</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01337">ECImeComposition()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01183">ECInitInsert()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01287">ECResultStrHandler()</a>, and <a class="el" href="../../d9/d3/editec_8c-source.html#l02904">EditWndProc()</a>.
<p>
<pre class="fragment"><div>01226 {
01227     HDC     hdc;
01228     SIZE    size;
01229     PSTR    pText;
01230 
01231 <span class="comment">//    if (!ped-&gt;fInsertCompChr || ped-&gt;fReadOnly)</span>
01232 <span class="comment">//        return;</span>
01233 
01234     <span class="comment">// In any case destroy caret beforehand otherwise SetCaretPos()</span>
01235     <span class="comment">// will get crazy.. win95d-B#992,B#2370</span>
01236     <span class="comment">//</span>
01237     <span class="keywordflow">if</span> (ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o23">fFocus</a>) {
01238 
01239         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a204">NtUserHideCaret</a>(ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o14">hwnd</a>);
01240         <a class="code" href="../../d3/d8/client_8c.html#a95">DestroyCaret</a>();
01241         <span class="keywordflow">if</span> ( ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o53">fReplaceCompChr</a> ) {
01242 
01243             hdc = <a class="code" href="../../d6/d0/usercli_8h.html#a451">ECGetEditDC</a>(ped, TRUE );
01244             pText = <a class="code" href="../../d6/d0/usercli_8h.html#a433">ECLock</a>(ped);
01245 
01246             <span class="keywordflow">if</span> ( ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o42">fAnsi</a>)
01247                  GetTextExtentPointA(hdc, pText + ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o7">ichCaret</a>, 2, &amp;size);
01248             <span class="keywordflow">else</span>
01249                  GetTextExtentPointW(hdc, (LPWSTR)pText + ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o7">ichCaret</a>, 1, &amp;size);
01250 
01251             <a class="code" href="../../d6/d0/usercli_8h.html#a434">ECUnlock</a>(ped);
01252             <a class="code" href="../../d6/d0/usercli_8h.html#a452">ECReleaseEditDC</a>(ped, hdc, TRUE);
01253 
01254             <a class="code" href="../../d6/d0/usercli_8h.html#a233">CreateCaret</a>(ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o14">hwnd</a>, (HBITMAP)NULL, size.cx, ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o68">lineHeight</a>);
01255         }
01256         <span class="keywordflow">else</span> {
01257             <a class="code" href="../../d6/d0/usercli_8h.html#a233">CreateCaret</a>(ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o14">hwnd</a>,
01258                         (HBITMAP)NULL,
01259                         (ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o70">cxSysCharWidth</a> &gt; ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o67">aveCharWidth</a> ? 1 : 2),
01260                         ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o68">lineHeight</a>);
01261         }
01262 
01263         hdc = <a class="code" href="../../d6/d0/usercli_8h.html#a451">ECGetEditDC</a>(ped, TRUE );
01264         <span class="keywordflow">if</span> ( ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o20">fSingle</a> )
01265             <a class="code" href="../../d6/d0/usercli_8h.html#a524">SLSetCaretPosition</a>( ped, hdc );
01266         <span class="keywordflow">else</span>
01267             <a class="code" href="../../d6/d0/usercli_8h.html#a493">MLSetCaretPosition</a>( ped, hdc );
01268         <a class="code" href="../../d6/d0/usercli_8h.html#a452">ECReleaseEditDC</a>(ped, hdc, TRUE);
01269         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a234">NtUserShowCaret</a>(ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o14">hwnd</a>);
01270     }
01271 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a450" doxytag="usercli.h::ECSetEditClip" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void ECSetEditClip           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HDC&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d3/editec_8c-source.html#l02452">2452</a> of file <a class="el" href="../../d9/d3/editec_8c-source.html">editec.c</a>.
<p>
References <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00924">_GetClientRect()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00243">CopyRect</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00643">tagED::fFlatBorder</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00615">tagED::fWrap</a>, <a class="el" href="../../d4/d5/rect_8c-source.html#l00165">InflateRect()</a>, <a class="el" href="../../d4/d5/rect_8c-source.html#l00191">IntersectRect()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00702">tagED::pLpkEditCallout</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00585">tagED::pwnd</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00586">tagED::rcFmt</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00202">SYSMET</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00696">tagED::wLeftMargin</a>, and <a class="el" href="../../d7/d9/usercli_8h-source.html#l00697">tagED::wRightMargin</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/editec_8c-source.html#l02492">ECGetEditDC()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l01965">MLPaint()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l02966">MLScroll()</a>, and <a class="el" href="../../d4/d4/editsl_8c-source.html#l00507">SLDrawLine()</a>.
<p>
<pre class="fragment"><div>02453 {
02454     RECT rcClient;
02455     RECT rcClip;
02456 
02457     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a33">CopyRect</a>(&amp;rcClip, &amp;ped-&gt;rcFmt);
02458 
02459     <span class="keywordflow">if</span> (ped-&gt;pLpkEditCallout) {
02460         <span class="comment">// Complex script handling chooses whether to write margins later</span>
02461         rcClip.left  -= ped-&gt;wLeftMargin;
02462         rcClip.right += ped-&gt;wRightMargin;
02463     } <span class="keywordflow">else</span> {
02464         <span class="keywordflow">if</span> (fLeftMargin)  <span class="comment">/* Should we consider the left margin?   */</span>
02465             rcClip.left  -= ped-&gt;wLeftMargin;
02466         <span class="keywordflow">if</span> (ped-&gt;fWrap)        <span class="comment">/* Should we consider the right margin? */</span>
02467             rcClip.right += ped-&gt;wRightMargin;
02468     }
02469 
02470     <span class="comment">/* Set clip rectangle to rectClient intersect rectClip */</span>
02471     <span class="comment">/* We must clip for single line edits also. -- B#1360 */</span>
02472     <a class="code" href="../../d6/d9/rtl_2wow_8c.html#a19">_GetClientRect</a>(ped-&gt;pwnd, &amp;rcClient);
02473     <span class="keywordflow">if</span> (ped-&gt;fFlatBorder)
02474         <a class="code" href="../../d3/d6/rect_8c.html#a7">InflateRect</a>(&amp;rcClient, -<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CXBORDER), -<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CYBORDER));
02475 
02476     <a class="code" href="../../d3/d6/rect_8c.html#a8">IntersectRect</a>(&amp;rcClient, &amp;rcClient, &amp;rcClip);
02477     IntersectClipRect(hdc,rcClient.left, rcClient.top,
02478             rcClient.right, rcClient.bottom);
02479 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a454" doxytag="usercli.h::ECSetFont" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void ECSetFont           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HFONT&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d3/edecrare_8c-source.html#l00708">708</a> of file <a class="el" href="../../d6/d3/edecrare_8c-source.html">edecrare.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l00677">tagED::aveCharWidth</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00549">CHAR_WIDTH_BUFFER_LENGTH</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00679">tagED::charOverhang</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00578">tagED::charPasswordChar</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00689">tagED::charSet</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00688">tagED::charWidthBuffer</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00680">tagED::cxSysCharWidth</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00681">tagED::cySysCharHeight</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l00109">ECCalcMarginForDBCSFont()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01051">ECGetCaretWidth</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l03820">ECGetDBCSVector()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01150">ECImmSetCompositionFont()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l00049">ECSetMargin()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l00516">ECSetPasswordChar()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l00597">ECSize()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l03301">tagLPKEDITCALLOUT::EditCreateCaret</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00642">tagED::f40Compat</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00611">tagED::fDBCS</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00602">tagED::fFocus</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00606">tagED::fNonPropDBCS</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00605">tagED::fNonPropFont</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02537">fpImmIsIME</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00599">tagED::fSingle</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00639">tagED::fTrueType</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00615">tagED::fWrap</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01123">GETAPPVER</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l00039">GetMaxOverlapChars()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l00555">GetNegABCwidthInfo()</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00051">gpsi</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00674">tagED::hFont</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00584">tagED::hwnd</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00678">tagED::lineHeight</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l01562">MLBuildchLines()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06550">NtUserCreateCaret()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01560">NtUserDestroyCaret</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06624">NtUserGetDC()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05279">NtUserHideCaret()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06219">NtUserShowCaret()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00702">tagED::pLpkEditCallout</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l01052">ReleaseDC()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01124">THREAD_HKL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l00185">UserGetCharDimensionsEx()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00958">UserLocalAlloc</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00960">UserLocalFree</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00959">UserLocalReAlloc</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00475">VER40</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00692">tagED::wMaxNegA</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00693">tagED::wMaxNegAcharPos</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00694">tagED::wMaxNegC</a>, and <a class="el" href="../../d7/d9/usercli_8h-source.html#l00695">tagED::wMaxNegCcharPos</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/editec_8c-source.html#l02904">EditWndProc()</a>, <a class="el" href="../../d5/d4/edmlonce_8c-source.html#l00023">MLCreate()</a>, and <a class="el" href="../../d7/d4/edslrare_8c-source.html#l00027">SLCreate()</a>.
<p>
<pre class="fragment"><div>00712 {
00713     <span class="keywordtype">short</span>  i;
00714     TEXTMETRIC      TextMetrics;
00715     HDC             hdc;
00716     HFONT           hOldFont=<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00717     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>            wBuffSize;
00718     LPINT           lpCharWidthBuff;
00719     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>           dwMaxOverlapChars;
00720     CHWIDTHINFO     cwi;
00721     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>            uExtracharPos;
00722 
00723     hdc = <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a250">NtUserGetDC</a>(ped-&gt;hwnd);
00724 
00725     <span class="keywordflow">if</span> (ped-&gt;hFont = hfont) {
00726         <span class="comment">//</span>
00727         <span class="comment">// Since the default font is the system font, no need to select it in</span>
00728         <span class="comment">// if that's what the user wants.</span>
00729         <span class="comment">//</span>
00730         <span class="keywordflow">if</span> (!(hOldFont = SelectObject(hdc, hfont))) {
00731             hfont = ped-&gt;hFont = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00732         }
00733 
00734         <span class="comment">//</span>
00735         <span class="comment">// Get the metrics and ave char width for the currently selected font</span>
00736         <span class="comment">//</span>
00737 
00738         <span class="comment">//</span>
00739         <span class="comment">// Call Vertical font-aware AveWidth compute function...</span>
00740         <span class="comment">//</span>
00741         <span class="comment">// FE_SB</span>
00742         ped-&gt;aveCharWidth = <a class="code" href="../../d5/d4/edecrare_8c.html#a12">UserGetCharDimensionsEx</a>(hdc, hfont, &amp;TextMetrics, &amp;ped-&gt;lineHeight);
00743 
00744         <span class="comment">/*</span>
00745 <span class="comment">         * This might fail when people uses network fonts (or bad fonts).</span>
00746 <span class="comment">         */</span>
00747         <span class="keywordflow">if</span> (ped-&gt;aveCharWidth == 0) {
00748             RIPMSG0(RIP_WARNING, <span class="stringliteral">"ECSetFont: GdiGetCharDimensions failed"</span>);
00749             <span class="keywordflow">if</span> (hOldFont != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00750                 SelectObject(hdc, hOldFont);
00751             }
00752 
00753             <span class="comment">/*</span>
00754 <span class="comment">             * We've messed up the ped so let's reset the font.</span>
00755 <span class="comment">             *  Note that we won't recurse more than once because we'll</span>
00756 <span class="comment">             *  pass hfont == NULL.</span>
00757 <span class="comment">             * Too bad WM_SETFONT doesn't return a value.</span>
00758 <span class="comment">             */</span>
00759             <a class="code" href="../../d6/d0/usercli_8h.html#a454">ECSetFont</a>(ped, NULL, fRedraw);
00760             <span class="keywordflow">return</span>;
00761         }
00762     } <span class="keywordflow">else</span> {
00763         ped-&gt;aveCharWidth = <a class="code" href="../../d1/d8/clglobal_8c.html#a4">gpsi</a>-&gt;cxSysFontChar;
00764         ped-&gt;lineHeight = <a class="code" href="../../d1/d8/clglobal_8c.html#a4">gpsi</a>-&gt;cySysFontChar;
00765         TextMetrics = <a class="code" href="../../d1/d8/clglobal_8c.html#a4">gpsi</a>-&gt;tmSysFont;
00766     }
00767 
00768     ped-&gt;charOverhang = TextMetrics.tmOverhang;
00769 
00770     <span class="comment">//assume that they don't have any negative widths at all.</span>
00771     ped-&gt;wMaxNegA = ped-&gt;wMaxNegC = ped-&gt;wMaxNegAcharPos = ped-&gt;wMaxNegCcharPos = 0;
00772 
00773 
00774     <span class="comment">// Check if Proportional Width Font</span>
00775     <span class="comment">//</span>
00776     <span class="comment">// NOTE: as SDK doc says about TEXTMETRIC:</span>
00777     <span class="comment">// TMPF_FIXED_PITCH</span>
00778     <span class="comment">// If this bit is set the font is a variable pitch font. If this bit is clear</span>
00779     <span class="comment">// the font is a fixed pitch font. Note very carefully that those meanings are</span>
00780     <span class="comment">// the opposite of what the constant name implies.</span>
00781     <span class="comment">//</span>
00782     <span class="comment">// Thus we have to reverse the value using logical not (fNonPropFont has 1 bit width)</span>
00783     <span class="comment">//</span>
00784     ped-&gt;fNonPropFont = !(TextMetrics.tmPitchAndFamily &amp; FIXED_PITCH);
00785 
00786     <span class="comment">// Check for a TrueType font</span>
00787     <span class="comment">// Older app OZWIN chokes if we allocate a bigger buffer for TrueType fonts</span>
00788     <span class="comment">// So, for apps older than 4.0, no special treatment for TrueType fonts.</span>
00789     <span class="keywordflow">if</span> (ped-&gt;f40Compat &amp;&amp; (TextMetrics.tmPitchAndFamily &amp; TMPF_TRUETYPE)) {
00790         ped-&gt;fTrueType = GetCharWidthInfo(hdc, &amp;cwi);
00791 <span class="preprocessor">#if DBG</span>
00792 <span class="preprocessor"></span>        <span class="keywordflow">if</span> (!ped-&gt;fTrueType) {
00793             RIPMSG0(RIP_WARNING, <span class="stringliteral">"ECSetFont: GetCharWidthInfo Failed"</span>);
00794         }
00795 <span class="preprocessor">#endif</span>
00796 <span class="preprocessor"></span>    } <span class="keywordflow">else</span> {
00797         ped-&gt;fTrueType = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00798     }
00799 
00800     <span class="comment">// FE_SB</span>
00801     <span class="comment">//</span>
00802     <span class="comment">// In DBCS Windows, Edit Control must handle Double Byte Character</span>
00803     <span class="comment">// if tmCharSet field of textmetrics is double byte character set</span>
00804     <span class="comment">// such as SHIFTJIS_CHARSET(128:Japan), HANGEUL_CHARSET(129:Korea).</span>
00805     <span class="comment">//</span>
00806     <span class="comment">// We call ECGetDBCSVector even when fAnsi is false so that we could</span>
00807     <span class="comment">// treat ped-&gt;fAnsi and ped-&gt;fDBCS indivisually. I changed ECGetDBCSVector</span>
00808     <span class="comment">// function so that it returns 0 or 1, because I would like to set ped-&gt;fDBCS</span>
00809     <span class="comment">// bit field here.</span>
00810     <span class="comment">//</span>
00811     ped-&gt;fDBCS = <a class="code" href="../../d6/d0/usercli_8h.html#a463">ECGetDBCSVector</a>(ped,hdc,TextMetrics.tmCharSet);
00812     ped-&gt;charSet = TextMetrics.tmCharSet;
00813 
00814     <span class="keywordflow">if</span> (ped-&gt;fDBCS) {
00815         <span class="comment">//</span>
00816         <span class="comment">// Free the character width buffer if ped-&gt;fDBCS.</span>
00817         <span class="comment">//</span>
00818         <span class="comment">// I expect single GetTextExtentPoint call is faster than multiple</span>
00819         <span class="comment">// GetTextExtentPoint call (because the graphic engine has a cache buffer).</span>
00820         <span class="comment">// See editec.c/ECTabTheTextOut().</span>
00821         <span class="comment">//</span>
00822         <span class="keywordflow">if</span> (ped-&gt;charWidthBuffer) {
00823             LocalFree(ped-&gt;charWidthBuffer);
00824             ped-&gt;charWidthBuffer = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00825         }
00826 
00827         <span class="comment">//</span>
00828         <span class="comment">// if FullWidthChar : HalfWidthChar == 2 : 1....</span>
00829         <span class="comment">//</span>
00830         <span class="comment">// TextMetrics.tmMaxCharWidth = FullWidthChar width</span>
00831         <span class="comment">// ped-&gt;aveCharWidth          = HalfWidthChar width</span>
00832         <span class="comment">//</span>
00833         <span class="keywordflow">if</span> (ped-&gt;fNonPropFont &amp;&amp;
00834             ((ped-&gt;aveCharWidth * 2) == TextMetrics.tmMaxCharWidth)) {
00835             ped-&gt;fNonPropDBCS = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00836         } <span class="keywordflow">else</span> {
00837             ped-&gt;fNonPropDBCS = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00838         }
00839 
00840     } <span class="keywordflow">else</span> {
00841 
00842         <span class="comment">//</span>
00843         <span class="comment">// Since the font has changed, let us obtain and save the character width</span>
00844         <span class="comment">// info for this font.</span>
00845         <span class="comment">//</span>
00846         <span class="comment">// First left us find out if the maximum chars that can overlap due to</span>
00847         <span class="comment">// negative widths. Since we can't access USER globals, we make a call here.</span>
00848         <span class="comment">//</span>
00849         <span class="keywordflow">if</span> (!(ped-&gt;fSingle || ped-&gt;pLpkEditCallout)) {  <span class="comment">// Is this a multiline edit control with no LPK present?</span>
00850             <span class="comment">//</span>
00851             <span class="comment">// For multiline edit controls, we maintain a buffer that contains</span>
00852             <span class="comment">// the character width information.</span>
00853             <span class="comment">//</span>
00854             wBuffSize = (ped-&gt;fTrueType) ? (<a class="code" href="../../d6/d0/usercli_8h.html#a86">CHAR_WIDTH_BUFFER_LENGTH</a> * <span class="keyword">sizeof</span>(ABC)) :
00855                                            (<a class="code" href="../../d6/d0/usercli_8h.html#a86">CHAR_WIDTH_BUFFER_LENGTH</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));
00856 
00857             <span class="keywordflow">if</span> (ped-&gt;charWidthBuffer) { <span class="comment">/* If buffer already present */</span>
00858                 lpCharWidthBuff = ped-&gt;charWidthBuffer;
00859                 ped-&gt;charWidthBuffer = <a class="code" href="../../d6/d0/usercli_8h.html#a137">UserLocalReAlloc</a>(lpCharWidthBuff, wBuffSize, HEAP_ZERO_MEMORY);
00860                 <span class="keywordflow">if</span> (ped-&gt;charWidthBuffer == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00861                     <a class="code" href="../../d6/d0/usercli_8h.html#a138">UserLocalFree</a>((HANDLE)lpCharWidthBuff);
00862                 }
00863             } <span class="keywordflow">else</span> {
00864                 ped-&gt;charWidthBuffer = <a class="code" href="../../d6/d0/usercli_8h.html#a136">UserLocalAlloc</a>(HEAP_ZERO_MEMORY, wBuffSize);
00865             }
00866 
00867             <span class="keywordflow">if</span> (ped-&gt;charWidthBuffer != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00868                 <span class="keywordflow">if</span> (ped-&gt;fTrueType) {
00869                     ped-&gt;fTrueType = <a class="code" href="../../d5/d4/edecrare_8c.html#a18">GetNegABCwidthInfo</a>(ped, hdc);
00870                 }
00871 
00872                 <span class="comment">/*</span>
00873 <span class="comment">                 * It is possible that the above attempts could have failed and reset</span>
00874 <span class="comment">                 * the value of fTrueType. So, let us check that value again.</span>
00875 <span class="comment">                 */</span>
00876                 <span class="keywordflow">if</span> (!ped-&gt;fTrueType) {
00877                     <span class="keywordflow">if</span> (!GetCharWidthA(hdc, 0, CHAR_WIDTH_BUFFER_LENGTH-1, ped-&gt;charWidthBuffer)) {
00878                         <a class="code" href="../../d6/d0/usercli_8h.html#a138">UserLocalFree</a>((HANDLE)ped-&gt;charWidthBuffer);
00879                         ped-&gt;charWidthBuffer=<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00880                     } <span class="keywordflow">else</span> {
00881                         <span class="comment">/*</span>
00882 <span class="comment">                         * We need to subtract out the overhang associated with</span>
00883 <span class="comment">                         * each character since GetCharWidth includes it...</span>
00884 <span class="comment">                         */</span>
00885                         <span class="keywordflow">for</span> (i=0;i &lt; <a class="code" href="../../d6/d0/usercli_8h.html#a86">CHAR_WIDTH_BUFFER_LENGTH</a>;i++)
00886                             ped-&gt;charWidthBuffer[i] -= ped-&gt;charOverhang;
00887                     }
00888                 }
00889             } <span class="comment">/* if (ped-&gt;charWidthBuffer != NULL) */</span>
00890         } <span class="comment">/* if (!ped-&gt;fSingle) */</span>
00891     } <span class="comment">/* if (ped-&gt;fDBCS) */</span>
00892 
00893     {
00894         <span class="comment">/*</span>
00895 <span class="comment">         * Calculate MaxNeg A C metrics</span>
00896 <span class="comment">         */</span>
00897         dwMaxOverlapChars = <a class="code" href="../../d5/d4/edecrare_8c.html#a9">GetMaxOverlapChars</a>();
00898         <span class="keywordflow">if</span> (ped-&gt;fTrueType) {
00899             <span class="keywordflow">if</span> (cwi.lMaxNegA &lt; 0)
00900                 ped-&gt;wMaxNegA = -cwi.lMaxNegA;
00901             <span class="keywordflow">else</span>
00902                 ped-&gt;wMaxNegA = 0;
00903             <span class="keywordflow">if</span> (cwi.lMaxNegC &lt; 0)
00904                 ped-&gt;wMaxNegC = -cwi.lMaxNegC;
00905             <span class="keywordflow">else</span>
00906                 ped-&gt;wMaxNegC = 0;
00907             <span class="keywordflow">if</span> (cwi.lMinWidthD != 0) {
00908                 ped-&gt;wMaxNegAcharPos = (ped-&gt;wMaxNegA + cwi.lMinWidthD - 1) / cwi.lMinWidthD;
00909                 ped-&gt;wMaxNegCcharPos = (ped-&gt;wMaxNegC + cwi.lMinWidthD - 1) / cwi.lMinWidthD;
00910                 <span class="keywordflow">if</span> (ped-&gt;wMaxNegA + ped-&gt;wMaxNegC &gt; (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)cwi.lMinWidthD) {
00911                     uExtracharPos = (ped-&gt;wMaxNegA + ped-&gt;wMaxNegC - 1) / cwi.lMinWidthD;
00912                     ped-&gt;wMaxNegAcharPos += uExtracharPos;
00913                     ped-&gt;wMaxNegCcharPos += uExtracharPos;
00914                 }
00915             } <span class="keywordflow">else</span> {
00916                 ped-&gt;wMaxNegAcharPos = LOWORD(dwMaxOverlapChars);     <span class="comment">// Left</span>
00917                 ped-&gt;wMaxNegCcharPos = HIWORD(dwMaxOverlapChars);     <span class="comment">// Right</span>
00918             }
00919 
00920         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ped-&gt;charOverhang != 0) {
00921             <span class="comment">/*</span>
00922 <span class="comment">             * Some bitmaps fonts (i.e., italic) have under/overhangs;</span>
00923 <span class="comment">             *  this is pretty much like having negative A and C widths.</span>
00924 <span class="comment">             */</span>
00925             ped-&gt;wMaxNegA = ped-&gt;wMaxNegC = ped-&gt;charOverhang;
00926             ped-&gt;wMaxNegAcharPos = LOWORD(dwMaxOverlapChars);     <span class="comment">// Left</span>
00927             ped-&gt;wMaxNegCcharPos = HIWORD(dwMaxOverlapChars);     <span class="comment">// Right</span>
00928         }
00929     } <span class="comment">/* if (ped-&gt;fDBCS) */</span>
00930 
00931     <span class="keywordflow">if</span> (!hfont) {
00932         <span class="comment">//</span>
00933         <span class="comment">// We are getting the stats for the system font so update the system</span>
00934         <span class="comment">// font fields in the ed structure since we use these when calculating</span>
00935         <span class="comment">// some spacing.</span>
00936         <span class="comment">//</span>
00937         ped-&gt;cxSysCharWidth = ped-&gt;aveCharWidth;
00938         ped-&gt;cySysCharHeight= ped-&gt;lineHeight;
00939     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (hOldFont)
00940         SelectObject(hdc, hOldFont);
00941 
00942     <span class="keywordflow">if</span> (ped-&gt;fFocus) {
00943         <span class="comment">//</span>
00944         <span class="comment">// Update the caret.</span>
00945         <span class="comment">//</span>
00946         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a204">NtUserHideCaret</a>(ped-&gt;hwnd);
00947         <a class="code" href="../../d6/d0/usercli_8h.html#a215">NtUserDestroyCaret</a>();
00948 
00949         <span class="keywordflow">if</span> (ped-&gt;pLpkEditCallout) {
00950             ped-&gt;pLpkEditCallout-&gt;EditCreateCaret (ped, hdc, <a class="code" href="../../d6/d0/usercli_8h.html#a149">ECGetCaretWidth</a>(), ped-&gt;lineHeight, 0);
00951         }
00952         <span class="keywordflow">else</span> {
00953             <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a247">NtUserCreateCaret</a>(ped-&gt;hwnd, (HBITMAP)NULL, <a class="code" href="../../d6/d0/usercli_8h.html#a149">ECGetCaretWidth</a>(), ped-&gt;lineHeight);
00954         }
00955         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a234">NtUserShowCaret</a>(ped-&gt;hwnd);
00956     }
00957 
00958     <a class="code" href="../../d3/d8/client_8c.html#a45">ReleaseDC</a>(ped-&gt;hwnd, hdc);
00959 
00960     <span class="comment">//</span>
00961     <span class="comment">// Update password character.</span>
00962     <span class="comment">//</span>
00963     <span class="keywordflow">if</span> (ped-&gt;charPasswordChar)
00964         <a class="code" href="../../d6/d0/usercli_8h.html#a442">ECSetPasswordChar</a>(ped, ped-&gt;charPasswordChar);
00965 
00966     <span class="comment">//</span>
00967     <span class="comment">// If it is a TrueType font and it's a new app, set both the margins at the</span>
00968     <span class="comment">// max negative width values for all types of the edit controls.</span>
00969     <span class="comment">// (NOTE: Can't use ped-&gt;f40Compat here because edit-controls inside dialog</span>
00970     <span class="comment">// boxes without DS_LOCALEDIT style are always marked as 4.0 compat.</span>
00971     <span class="comment">// This is the fix for NETBENCH 3.0)</span>
00972     <span class="comment">//</span>
00973 
00974     <span class="keywordflow">if</span> (ped-&gt;fTrueType &amp;&amp; (<a class="code" href="../../d6/d0/usercli_8h.html#a150">GETAPPVER</a>() &gt;= <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a101">VER40</a>))
00975         <span class="keywordflow">if</span> (ped-&gt;fDBCS) {
00976             <span class="comment">// For DBCS TrueType Font, we calc margin from ABC width.</span>
00977             <a class="code" href="../../d5/d4/edecrare_8c.html#a11">ECCalcMarginForDBCSFont</a>(ped, fRedraw);
00978         } <span class="keywordflow">else</span> {
00979             <a class="code" href="../../d6/d0/usercli_8h.html#a455">ECSetMargin</a>(ped, EC_LEFTMARGIN | EC_RIGHTMARGIN,
00980                         MAKELONG(EC_USEFONTINFO, EC_USEFONTINFO), fRedraw);
00981         }
00982 
00983     <span class="comment">//</span>
00984     <span class="comment">// We need to calc maxPixelWidth when font changes.</span>
00985     <span class="comment">// If the word-wrap is ON, then this is done in MLSize() called later.</span>
00986     <span class="comment">//</span>
00987     <span class="keywordflow">if</span>((!ped-&gt;fSingle) &amp;&amp; (!ped-&gt;fWrap))
00988         <a class="code" href="../../d6/d0/usercli_8h.html#a490">MLBuildchLines</a>(ped, 0, 0, FALSE, NULL, NULL);
00989 
00990     <span class="comment">//</span>
00991     <span class="comment">// Recalc the layout.</span>
00992     <span class="comment">//</span>
00993     <a class="code" href="../../d6/d0/usercli_8h.html#a482">ECSize</a>(ped, NULL, fRedraw);
00994 
00995     <span class="keywordflow">if</span> ( ped-&gt;fFocus &amp;&amp; <a class="code" href="../../d6/d0/usercli_8h.html#a312">fpImmIsIME</a>(<a class="code" href="../../d6/d0/usercli_8h.html#a151">THREAD_HKL</a>()) ) {
00996         <a class="code" href="../../d6/d0/usercli_8h.html#a470">ECImmSetCompositionFont</a>( ped );
00997     }
00998 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a455" doxytag="usercli.h::ECSetMargin" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void ECSetMargin           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>long&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d3/edecrare_8c-source.html#l00049">49</a> of file <a class="el" href="../../d6/d3/edecrare_8c-source.html">edecrare.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l00677">tagED::aveCharWidth</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02679">ECInvalidateClient()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d6/d3/acpitabl_8h-source.html#l00366">min</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00586">tagED::rcFmt</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00696">tagED::wLeftMargin</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00692">tagED::wMaxNegA</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00694">tagED::wMaxNegC</a>, and <a class="el" href="../../d7/d9/usercli_8h-source.html#l00697">tagED::wRightMargin</a>.
<p>
Referenced by <a class="el" href="../../d6/d3/edecrare_8c-source.html#l00109">ECCalcMarginForDBCSFont()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l00708">ECSetFont()</a>, and <a class="el" href="../../d9/d3/editec_8c-source.html#l02904">EditWndProc()</a>.
<p>
<pre class="fragment"><div>00050 {
00051     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fUseFontInfo = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00052     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> wValue, wOldLeftMargin, wOldRightMargin;
00053 
00054 
00055     <span class="keywordflow">if</span> (wFlags &amp; EC_LEFTMARGIN)  <span class="comment">/* Set the left margin */</span> {
00056 
00057         <span class="keywordflow">if</span> ((<span class="keywordtype">int</span>) (wValue = (<span class="keywordtype">int</span>)(<span class="keywordtype">short</span>)LOWORD(lMarginValues)) &lt; 0) {
00058             fUseFontInfo = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00059             wValue = <a class="code" href="../../d5/d4/acpitabl_8h.html#a69">min</a>((ped-&gt;aveCharWidth / 2), (<span class="keywordtype">int</span>)ped-&gt;wMaxNegA);
00060         }
00061 
00062         ped-&gt;rcFmt.left += wValue - ped-&gt;wLeftMargin;
00063         wOldLeftMargin = ped-&gt;wLeftMargin;
00064         ped-&gt;wLeftMargin = wValue;
00065     }
00066 
00067     <span class="keywordflow">if</span> (wFlags &amp; EC_RIGHTMARGIN)  <span class="comment">/* Set the Right margin */</span> {
00068 
00069         <span class="keywordflow">if</span> ((<span class="keywordtype">int</span>) (wValue = (<span class="keywordtype">int</span>)(<span class="keywordtype">short</span>)HIWORD(lMarginValues)) &lt; 0) {
00070             fUseFontInfo = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00071             wValue = <a class="code" href="../../d5/d4/acpitabl_8h.html#a69">min</a>((ped-&gt;aveCharWidth / 2), (<span class="keywordtype">int</span>)ped-&gt;wMaxNegC);
00072         }
00073 
00074         ped-&gt;rcFmt.right -= wValue - ped-&gt;wRightMargin;
00075         wOldRightMargin = ped-&gt;wRightMargin;
00076         ped-&gt;wRightMargin = wValue;
00077     }
00078 
00079     <span class="keywordflow">if</span> (fUseFontInfo) {
00080         <span class="keywordflow">if</span> (ped-&gt;rcFmt.right - ped-&gt;rcFmt.left &lt; 2 * ped-&gt;aveCharWidth) {
00081             RIPMSG0(RIP_WARNING, <span class="stringliteral">"ECSetMargin: rcFmt is too narrow for EC_USEFONTINFO"</span>);
00082 
00083             <span class="keywordflow">if</span> (wFlags &amp; EC_LEFTMARGIN)  <span class="comment">/* Reset the left margin */</span> {
00084                 ped-&gt;rcFmt.left += wOldLeftMargin - ped-&gt;wLeftMargin;
00085                 ped-&gt;wLeftMargin = wOldLeftMargin;
00086             }
00087 
00088             <span class="keywordflow">if</span> (wFlags &amp; EC_RIGHTMARGIN)  <span class="comment">/* Reset the Right margin */</span> {
00089                 ped-&gt;rcFmt.right -= wOldRightMargin - ped-&gt;wRightMargin;
00090                 ped-&gt;wRightMargin = wOldRightMargin;
00091             }
00092 
00093             <span class="keywordflow">return</span>;
00094         }
00095     }
00096 
00097 <span class="comment">//    NtUserInvalidateRect(ped-&gt;hwnd, NULL, TRUE);</span>
00098     <span class="keywordflow">if</span> (fRedraw) {
00099         <a class="code" href="../../d6/d0/usercli_8h.html#a436">ECInvalidateClient</a>(ped, TRUE);
00100     }
00101 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a442" doxytag="usercli.h::ECSetPasswordChar" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void ECSetPasswordChar           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d3/edecrare_8c-source.html#l00516">516</a> of file <a class="el" href="../../d6/d3/edecrare_8c-source.html">edecrare.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l00578">tagED::charPasswordChar</a>, <a class="el" href="../../d9/d3/w32_2ntuser_2kernel_2random_8c-source.html#l00102">ClearWindowState()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00582">tagED::cPasswordCharWidth</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01037">ECEnableDisableIME()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02492">ECGetEditDC()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02524">ECReleaseEditDC()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02494">EFPASSWORD</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00640">tagED::fAnsi</a>, <a class="el" href="../../d9/d5/sertl_8c-source.html#l00332">max</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00585">tagED::pwnd</a>, <a class="el" href="../../d9/d3/w32_2ntuser_2kernel_2random_8c-source.html#l00083">SetWindowState()</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d6/d3/edecrare_8c-source.html#l00708">ECSetFont()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02904">EditWndProc()</a>, and <a class="el" href="../../d7/d4/edslrare_8c-source.html#l00027">SLCreate()</a>.
<p>
<pre class="fragment"><div>00519 {
00520     HDC hdc;
00521     SIZE size;
00522 
00523     ped-&gt;charPasswordChar = pwchar;
00524 
00525     <span class="keywordflow">if</span> (pwchar) {
00526         hdc = <a class="code" href="../../d6/d0/usercli_8h.html#a451">ECGetEditDC</a>(ped, TRUE);
00527         <span class="keywordflow">if</span> (ped-&gt;fAnsi)
00528             GetTextExtentPointA(hdc, (LPSTR)&amp;pwchar, 1, &amp;size);
00529         <span class="keywordflow">else</span>
00530             GetTextExtentPointW(hdc, (LPWSTR)&amp;pwchar, 1, &amp;size);
00531 
00532         GetTextExtentPointW(hdc, (LPWSTR)&amp;pwchar, 1, &amp;size);
00533         ped-&gt;cPasswordCharWidth = <a class="code" href="../../d8/d6/sertl_8c.html#a1">max</a>(size.cx, 1);
00534         <a class="code" href="../../d6/d0/usercli_8h.html#a452">ECReleaseEditDC</a>(ped, hdc, TRUE);
00535     }
00536     <span class="keywordflow">if</span> (pwchar)
00537         <a class="code" href="../../d4/d1/userk_8h.html#a1628">SetWindowState</a>(ped-&gt;pwnd, EFPASSWORD);
00538     <span class="keywordflow">else</span>
00539         <a class="code" href="../../d4/d1/userk_8h.html#a1629">ClearWindowState</a>(ped-&gt;pwnd, EFPASSWORD);
00540 
00541     <a class="code" href="../../d6/d0/usercli_8h.html#a469">ECEnableDisableIME</a>(ped);
00542 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a441" doxytag="usercli.h::ECSetText" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL ECSetText           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPSTR&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d3/editec_8c-source.html#l02612">2612</a> of file <a class="el" href="../../d9/d3/editec_8c-source.html">editec.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00661">tagED::cbChar</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00557">tagED::cch</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00553">tagED::cchAlloc</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00484">CCHALLOCEXTRA</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02059">ECInsertText()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02429">ECNotifyParent()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02547">ECResetTextInfo()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00640">tagED::fAnsi</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00599">tagED::fSingle</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00706">tagED::hInstance</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00552">tagED::hText</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00584">tagED::hwnd</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00626">ICH</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00564">tagED::ichCaret</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00277">IsWindow()</a>, <a class="el" href="../../d9/d5/ntuser_2client_2globals_8h-source.html#l00090">LHND</a>, <a class="el" href="../../d9/d5/ntuser_2client_2globals_8h-source.html#l00109">LOCALREALLOC</a>, <a class="el" href="../../d9/d5/ntuser_2client_2globals_8h-source.html#l00115">LOCALSIZE</a>, <a class="el" href="../../d6/d3/acpitabl_8h-source.html#l00366">min</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l00480">StringLength()</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/editec_8c-source.html#l02904">EditWndProc()</a>, <a class="el" href="../../d5/d4/edmlonce_8c-source.html#l00023">MLCreate()</a>, and <a class="el" href="../../d7/d4/edslrare_8c-source.html#l00027">SLCreate()</a>.
<p>
<pre class="fragment"><div>02615 {
02616     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a> cchLength;
02617     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a> cchSave = ped-&gt;cch;
02618     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a> ichCaretSave = ped-&gt;ichCaret;
02619     HWND hwndSave    = ped-&gt;hwnd;
02620     HANDLE hText;
02621 
02622     ped-&gt;cch = ped-&gt;ichCaret = 0;
02623 
02624     ped-&gt;cchAlloc = <a class="code" href="../../d8/d6/ntuser_2client_2globals_8h.html#a6">LOCALSIZE</a>(ped-&gt;hText, ped-&gt;hInstance) / ped-&gt;cbChar;
02625     <span class="keywordflow">if</span> (!lpstr) {
02626         hText = <a class="code" href="../../d8/d6/ntuser_2client_2globals_8h.html#a3">LOCALREALLOC</a>(ped-&gt;hText, CCHALLOCEXTRA*ped-&gt;cbChar, LHND, ped-&gt;hInstance, &amp;lpstr);
02627         <span class="keywordflow">if</span> (hText != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
02628             ped-&gt;hText = hText;
02629         } <span class="keywordflow">else</span> {
02630             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
02631         }
02632     } <span class="keywordflow">else</span> {
02633         cchLength = <a class="code" href="../../d1/d0/inc_2user_8h.html#a1134">StringLength</a>(lpstr, ped-&gt;fAnsi);
02634 
02635 <span class="preprocessor">#ifdef NEVER</span>
02636 <span class="preprocessor"></span><span class="comment">// win3.1 does limit single line edit controls to 32K (minus 3) but NT doesn't</span>
02637 
02638         <span class="keywordflow">if</span> (ped-&gt;fSingle) {
02639             <span class="comment">/*</span>
02640 <span class="comment">             * Limit single line edit controls to 32K</span>
02641 <span class="comment">             */</span>
02642             cchLength = <a class="code" href="../../d5/d4/acpitabl_8h.html#a69">min</a>(cchLength, (ICH)(0x7FFD/ped-&gt;cbChar));
02643         }
02644 <span class="preprocessor">#endif</span>
02645 <span class="preprocessor"></span>
02646         <span class="comment">/*</span>
02647 <span class="comment">         * Add the text</span>
02648 <span class="comment">         */</span>
02649         <span class="keywordflow">if</span> (cchLength &amp;&amp; !<a class="code" href="../../d6/d0/usercli_8h.html#a446">ECInsertText</a>(ped, lpstr, &amp;cchLength)) {
02650 
02651             <span class="comment">/*</span>
02652 <span class="comment">             * Restore original state and notify parent we ran out of memory.</span>
02653 <span class="comment">             */</span>
02654             ped-&gt;cch = cchSave;
02655             ped-&gt;ichCaret = ichCaretSave;
02656             <a class="code" href="../../d6/d0/usercli_8h.html#a449">ECNotifyParent</a>(ped, EN_ERRSPACE);
02657             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
02658         }
02659     }
02660 
02661     ped-&gt;cchAlloc = <a class="code" href="../../d8/d6/ntuser_2client_2globals_8h.html#a6">LOCALSIZE</a>(ped-&gt;hText, ped-&gt;hInstance) / ped-&gt;cbChar;
02662 
02663     <span class="keywordflow">if</span> (<a class="code" href="../../d3/d9/client_2wow_8c.html#a11">IsWindow</a>(hwndSave))
02664         <a class="code" href="../../d6/d0/usercli_8h.html#a448">ECResetTextInfo</a>(ped);
02665 
02666     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
02667 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a482" doxytag="usercli.h::ECSize" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void ECSize           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPRECT&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d3/edecrare_8c-source.html#l00597">597</a> of file <a class="el" href="../../d6/d3/edecrare_8c-source.html">edecrare.c</a>.
<p>
References <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00924">_GetClientRect()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00677">tagED::aveCharWidth</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00243">CopyRect</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01085">ECImmSetCompositionWindow()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00607">tagED::fBorder</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00635">tagED::fCaretHidden</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00643">tagED::fFlatBorder</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00602">tagED::fFocus</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02537">fpImmIsIME</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00599">tagED::fSingle</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00584">tagED::hwnd</a>, <a class="el" href="../../d4/d5/rect_8c-source.html#l00165">InflateRect()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00678">tagED::lineHeight</a>, <a class="el" href="../../d6/d3/acpitabl_8h-source.html#l00366">min</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l00056">MLSize()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l07458">NtUserGetCaretPos()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05330">NtUserInvalidateRect()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00585">tagED::pwnd</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00586">tagED::rcFmt</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00202">SYSMET</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01124">THREAD_HKL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00696">tagED::wLeftMargin</a>, and <a class="el" href="../../d7/d9/usercli_8h-source.html#l00697">tagED::wRightMargin</a>.
<p>
Referenced by <a class="el" href="../../d6/d3/edecrare_8c-source.html#l00708">ECSetFont()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l03457">MLEditWndProc()</a>, and <a class="el" href="../../d4/d4/editsl_8c-source.html#l02520">SLEditWndProc()</a>.
<p>
<pre class="fragment"><div>00601 {
00602     RECT    rc;
00603 
00604     <span class="comment">/*</span>
00605 <span class="comment">     *  BiDi VB32 Creates an Edit Control and immediately sends a WM_SIZE</span>
00606 <span class="comment">     *  message which causes EXSize to be called before ECSetFont, which</span>
00607 <span class="comment">     *  in turn causes a divide by zero exception below. This check for</span>
00608 <span class="comment">     *  ped-&gt;lineHeight will pick it up safely. [samera] 3/5/97</span>
00609 <span class="comment">     */</span>
00610     <span class="keywordflow">if</span>(ped-&gt;lineHeight == 0)
00611         <span class="keywordflow">return</span>;
00612 
00613     <span class="comment">// assume that we won't be able to display the caret</span>
00614     ped-&gt;fCaretHidden = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00615 
00616 
00617     <span class="keywordflow">if</span> ( lprc )
00618         <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a33">CopyRect</a>(&amp;rc, lprc);
00619     <span class="keywordflow">else</span>
00620         <a class="code" href="../../d6/d9/rtl_2wow_8c.html#a19">_GetClientRect</a>(ped-&gt;pwnd, &amp;rc);
00621 
00622     <span class="keywordflow">if</span> (!(rc.right - rc.left) || !(rc.bottom - rc.top)) {
00623         <span class="keywordflow">if</span> (ped-&gt;rcFmt.right - ped-&gt;rcFmt.left)
00624             <span class="keywordflow">return</span>;
00625 
00626         rc.left     = 0;
00627         rc.top      = 0;
00628         rc.right    = ped-&gt;aveCharWidth * 10;
00629         rc.bottom   = ped-&gt;lineHeight;
00630     }
00631 
00632     <span class="keywordflow">if</span> (!lprc) {
00633         <span class="comment">// subtract the margins from the given rectangle --</span>
00634         <span class="comment">// make sure that this rectangle is big enough to have these margins.</span>
00635         <span class="keywordflow">if</span> ((rc.right - rc.left) &gt; (<span class="keywordtype">int</span>)(ped-&gt;wLeftMargin + ped-&gt;wRightMargin)) {
00636             rc.left  += ped-&gt;wLeftMargin;
00637             rc.right -= ped-&gt;wRightMargin;
00638         }
00639     }
00640 
00641     <span class="comment">//</span>
00642     <span class="comment">// Leave space so text doesn't touch borders.</span>
00643     <span class="comment">// For 3.1 compatibility, don't subtract out vertical borders unless</span>
00644     <span class="comment">// there is room.</span>
00645     <span class="comment">//</span>
00646     <span class="keywordflow">if</span> (ped-&gt;fBorder) {
00647         <span class="keywordtype">int</span> cxBorder = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CXBORDER);
00648         <span class="keywordtype">int</span> cyBorder = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CYBORDER);
00649 
00650         <span class="keywordflow">if</span> (ped-&gt;fFlatBorder)
00651         {
00652             cxBorder *= 2;
00653             cyBorder *= 2;
00654         }
00655 
00656         <span class="keywordflow">if</span> (rc.bottom &lt; rc.top + ped-&gt;lineHeight + 2*cyBorder)
00657             cyBorder = 0;
00658 
00659         <a class="code" href="../../d3/d6/rect_8c.html#a7">InflateRect</a>(&amp;rc, -cxBorder, -cyBorder);
00660     }
00661 
00662     <span class="comment">// Is the resulting rectangle too small?  Don't change it then.</span>
00663     <span class="keywordflow">if</span> ((!ped-&gt;fSingle) &amp;&amp; ((rc.right - rc.left &lt; (<span class="keywordtype">int</span>) ped-&gt;aveCharWidth) ||
00664         ((rc.bottom - rc.top) / ped-&gt;lineHeight == 0)))
00665         <span class="keywordflow">return</span>;
00666 
00667     <span class="comment">// now, we know we're safe to display the caret</span>
00668     ped-&gt;fCaretHidden = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00669 
00670     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a33">CopyRect</a>(&amp;ped-&gt;rcFmt, &amp;rc);
00671 
00672     <span class="keywordflow">if</span> (ped-&gt;fSingle)
00673         ped-&gt;rcFmt.bottom = <a class="code" href="../../d5/d4/acpitabl_8h.html#a69">min</a>(rc.bottom, rc.top + ped-&gt;lineHeight);
00674     <span class="keywordflow">else</span>
00675         <a class="code" href="../../d6/d0/usercli_8h.html#a512">MLSize</a>(ped, fRedraw);
00676 
00677     <span class="keywordflow">if</span> (fRedraw) {
00678         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a206">NtUserInvalidateRect</a>(ped-&gt;hwnd, NULL, TRUE);
00679         <span class="comment">// UpdateWindow31(ped-&gt;hwnd);    Evaluates to NOP in Chicago - Johnl</span>
00680     }
00681 
00682     <span class="comment">// FE_IME</span>
00683     <span class="comment">// ECSize()  - call ECImmSetCompositionWindow()</span>
00684     <span class="comment">//</span>
00685     <span class="comment">// normally this isn't needed because WM_SIZE will cause</span>
00686     <span class="comment">// WM_PAINT and the paint handler will take care of IME</span>
00687     <span class="comment">// composition window. However when the edit window is</span>
00688     <span class="comment">// restored from maximized window and client area is out</span>
00689     <span class="comment">// of screen, the window will not be redrawn.</span>
00690     <span class="comment">//</span>
00691     <span class="keywordflow">if</span> (ped-&gt;fFocus &amp;&amp; <a class="code" href="../../d6/d0/usercli_8h.html#a312">fpImmIsIME</a>(<a class="code" href="../../d6/d0/usercli_8h.html#a151">THREAD_HKL</a>())) {
00692         POINT pt;
00693 
00694         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a274">NtUserGetCaretPos</a>(&amp;pt);
00695         <a class="code" href="../../d6/d0/usercli_8h.html#a471">ECImmSetCompositionWindow</a>(ped, pt.x, pt.y);
00696     }
00697 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a478" doxytag="usercli.h::ECTabTheTextOut" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> UINT ECTabTheTextOut           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HDC&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPSTR&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d6/d0/usercli_8h.html#a366">LPSTRIPINFO</a>&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d3/editec_8c-source.html#l00770">770</a> of file <a class="el" href="../../d9/d3/editec_8c-source.html">editec.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l00677">tagED::aveCharWidth</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00661">tagED::cbChar</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00549">CHAR_WIDTH_BUFFER_LENGTH</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00679">tagED::charOverhang</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00688">tagED::charWidthBuffer</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l01371">ECFindTabA()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l01388">ECFindTabW()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l04083">ECIsDBCSLeadByte()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01049">ECT_SELECTED</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00640">tagED::fAnsi</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00611">tagED::fDBCS</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00639">tagED::fTrueType</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00117">GetActualNegA()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00766">STRIPINFO::ichString</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00025">INT</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00678">tagED::lineHeight</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00765">STRIPINFO::lpString</a>, <a class="el" href="../../d9/d5/sertl_8c-source.html#l00332">max</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00490">MAXCLIPENDPOS</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00496">MAXLINELENGTH</a>, <a class="el" href="../../d6/d3/acpitabl_8h-source.html#l00366">min</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00767">STRIPINFO::nCount</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00025">PINT</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00684">tagED::pTabStops</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00692">tagED::wMaxNegA</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00694">tagED::wMaxNegC</a>, and <a class="el" href="../../d7/d9/usercli_8h-source.html#l00768">STRIPINFO::XStartPos</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/editec_8c-source.html#l01281">ECCchInWidth()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l03991">MLDrawText()</a>, and <a class="el" href="../../d2/d4/editml_8c-source.html#l00040">MLGetLineWidth()</a>.
<p>
<pre class="fragment"><div>00783 {
00784     <span class="keywordtype">int</span>     nTabPositions;         <span class="comment">// Count of tabstops in tabstop array.</span>
00785     LPINT   lpintTabStopPositions; <span class="comment">// Tab stop positions in pixels.</span>
00786 
00787     <span class="keywordtype">int</span>     cch;
00788     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>    textextent;
00789     <span class="keywordtype">int</span>     xEnd;
00790     <span class="keywordtype">int</span>     pixeltabstop = 0;
00791     <span class="keywordtype">int</span>     i;
00792     <span class="keywordtype">int</span>     cxCharWidth;
00793     RECT    rc;
00794     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>    fOpaque;
00795     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>    fFirstPass = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00796     <a class="code" href="../../d9/d5/ndismain_8h.html#a264">PINT</a>    charWidthBuff;
00797 
00798     <span class="keywordtype">int</span>     iTabLength;
00799     <span class="keywordtype">int</span>     nConsecutiveTabs;
00800     <span class="keywordtype">int</span>     xStripStPos;
00801     <span class="keywordtype">int</span>     xStripEndPos;
00802     <span class="keywordtype">int</span>     xEndOfStrip;
00803     <a class="code" href="../../d6/d7/structSTRIPINFO.html">STRIPINFO</a>  RedrawStripInfo;
00804     <a class="code" href="../../d6/d7/structSTRIPINFO.html">STRIPINFO</a>  NegAInfo;
00805     LPSTR    lpTab;
00806     LPWSTR   lpwTab;
00807     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>     wNegCwidth, wNegAwidth;
00808     <span class="keywordtype">int</span>      xRightmostPoint = xClipStPos;
00809     <span class="keywordtype">int</span>      xTabStartPos;
00810     <span class="keywordtype">int</span>      iSavedBkMode = 0;
00811     WCHAR    wchar;
00812     SIZE     size;
00813     ABC   abc ;
00814 
00815     <span class="comment">// Algorithm: Draw the strip opaquely first. If a tab length is so</span>
00816     <span class="comment">// small that the portions of text on either side of a tab overlap with</span>
00817     <span class="comment">// the other, then this will result in some clipping. So, such portion</span>
00818     <span class="comment">// of the strip is remembered in "RedrawStripInfo" and redrawn</span>
00819     <span class="comment">// transparently later to compensate the clippings.</span>
00820     <span class="comment">//    NOTE: "RedrawStripInfo" can hold info about just one portion. So, if</span>
00821     <span class="comment">// more than one portion of the strip needs to be redrawn transparently,</span>
00822     <span class="comment">// then we "merge" all such portions into a single strip and redraw that</span>
00823     <span class="comment">// strip at the end.</span>
00824 
00825     <span class="keywordflow">if</span> (fDraw) {
00826         <span class="comment">// To begin with, let us assume that there is no Negative C for this</span>
00827         <span class="comment">// strip and initialize the Negative Width Info structure.</span>
00828         NegCInfoForStrip-&gt;nCount = 0;
00829         NegCInfoForStrip-&gt;XStartPos = xClipEndPos;
00830 
00831         <span class="comment">// We may not have to redraw any portion of this strip.</span>
00832         RedrawStripInfo.<a class="code" href="../../d6/d7/structSTRIPINFO.html#o2">nCount</a> = 0;
00833 
00834         fOpaque = (GetBkMode(hdc) == OPAQUE) || (fDraw == <a class="code" href="../../d6/d0/usercli_8h.html#a148">ECT_SELECTED</a>);
00835     }
00836 <span class="preprocessor">#if DBG</span>
00837 <span class="preprocessor"></span>    <span class="keywordflow">else</span> {
00838         <span class="comment">//</span>
00839         <span class="comment">// Both MLGetLineWidth() and ECCchInWidth() should be clipping</span>
00840         <span class="comment">// nCount to avoid overflow.</span>
00841         <span class="comment">//</span>
00842         <span class="keywordflow">if</span> (nCount &gt; <a class="code" href="../../d6/d0/usercli_8h.html#a74">MAXLINELENGTH</a>)
00843             RIPMSG0(RIP_WARNING, <span class="stringliteral">"ECTabTheTextOut: nCount &gt; MAXLINELENGTH"</span>);
00844     }
00845 <span class="preprocessor">#endif</span>
00846 <span class="preprocessor"></span>
00847     <span class="comment">// Let us define the Clip rectangle.</span>
00848     rc.left   = xClipStPos;
00849     rc.right  = xClipEndPos;
00850     rc.top    = y;
00851     rc.bottom = y + ped-&gt;lineHeight;
00852 
00853     <span class="comment">// Check if anything needs to be drawn.</span>
00854     <span class="keywordflow">if</span> (!lpstring || !nCount) {
00855         <span class="keywordflow">if</span> (fDraw)
00856             ExtTextOutW(hdc, xClipStPos, y,
00857                   (fOpaque ? ETO_OPAQUE | ETO_CLIPPED : ETO_CLIPPED),
00858                   &amp;rc, L<span class="stringliteral">""</span>, 0, 0L);
00859         <span class="keywordflow">return</span>(0<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>);
00860     }
00861 
00862     <span class="comment">//</span>
00863     <span class="comment">// Starting position</span>
00864     <span class="comment">//</span>
00865     xEnd = xStart;
00866 
00867     cxCharWidth  = ped-&gt;aveCharWidth;
00868 
00869     nTabPositions = (ped-&gt;pTabStops ? *(ped-&gt;pTabStops) : 0);
00870     <span class="keywordflow">if</span> (ped-&gt;pTabStops) {
00871         lpintTabStopPositions = (LPINT)(ped-&gt;pTabStops+1);
00872         <span class="keywordflow">if</span> (nTabPositions == 1) {
00873             pixeltabstop = lpintTabStopPositions[0];
00874             <span class="keywordflow">if</span> (!pixeltabstop)
00875                 pixeltabstop = 1;
00876         }
00877     } <span class="keywordflow">else</span> {
00878         lpintTabStopPositions = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00879         pixeltabstop = 8*cxCharWidth;
00880     }
00881 
00882     <span class="comment">// The first time we will draw the strip Opaquely. If some portions need</span>
00883     <span class="comment">// to be redrawn , then we will set the mode to TRANSPARENT and</span>
00884     <span class="comment">// jump to this location to redraw those portions.</span>
00885 
00886 RedrawStrip:
00887     <span class="keywordflow">while</span> (nCount) {
00888         wNegCwidth = ped-&gt;wMaxNegC;
00889 
00890         <span class="comment">// Search for the first TAB in this strip; also compute the extent</span>
00891         <span class="comment">// of the the strip upto and not including the tab character.</span>
00892         <span class="comment">//</span>
00893         <span class="comment">// Note - If the langpack is loaded, there will be no charWidthBuffer.</span>
00894         <span class="comment">//</span>
00895         <span class="keywordflow">if</span> (ped-&gt;charWidthBuffer) {     <span class="comment">// Do we have a character width buffer?</span>
00896             textextent = 0;
00897             cch = nCount;
00898 
00899             <span class="keywordflow">if</span> (ped-&gt;fTrueType) {     <span class="comment">// If so, does it have ABC widths?</span>
00900 
00901                 <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> iRightmostPoint = 0;
00902                 <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> wCharIndex;
00903                 PABC pABCwidthBuff;
00904 
00905                 pABCwidthBuff = (PABC) ped-&gt;charWidthBuffer;
00906 
00907                 <span class="keywordflow">if</span> ( ped-&gt;fAnsi ) {
00908                     <span class="keywordflow">for</span> (i = 0; i &lt; nCount; i++) {
00909 
00910                         <span class="keywordflow">if</span> (lpstring[i] == VK_TAB) {
00911                             cch = i;
00912                             <span class="keywordflow">break</span>;
00913                         }
00914 
00915                         wCharIndex = (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)(((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>  *)lpstring)[i]);
00916                         <span class="keywordflow">if</span> (wCharIndex &lt; <a class="code" href="../../d6/d0/usercli_8h.html#a86">CHAR_WIDTH_BUFFER_LENGTH</a>) {
00917                             textextent += (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)(pABCwidthBuff[wCharIndex].abcA +
00918                                 pABCwidthBuff[wCharIndex].abcB);
00919                         } <span class="keywordflow">else</span> {    <span class="comment">// not in cache, will ask driver</span>
00920                             GetCharABCWidthsA(hdc, wCharIndex, wCharIndex, &amp;abc);
00921                             textextent += abc.abcA + abc.abcB ;
00922                         }
00923 
00924                         <span class="keywordflow">if</span> (textextent &gt; iRightmostPoint)
00925                             iRightmostPoint = textextent;
00926 
00927                         <span class="keywordflow">if</span> (wCharIndex &lt; <a class="code" href="../../d6/d0/usercli_8h.html#a86">CHAR_WIDTH_BUFFER_LENGTH</a>) {
00928                             textextent += pABCwidthBuff[wCharIndex].abcC;
00929                         } <span class="keywordflow">else</span> {    <span class="comment">// not in cache</span>
00930                             textextent += abc.abcC;
00931                         }
00932 
00933                         <span class="keywordflow">if</span> (textextent &gt; iRightmostPoint)
00934                             iRightmostPoint = textextent;
00935                     }
00936 
00937                 } <span class="keywordflow">else</span> {   <span class="comment">// Unicode</span>
00938                     <span class="keywordflow">for</span> (i = 0; i &lt; nCount; i++) {
00939                         WCHAR UNALIGNED * lpwstring = (WCHAR UNALIGNED *)lpstring;
00940 
00941                         <span class="keywordflow">if</span> (lpwstring[i] == VK_TAB) {
00942                             cch = i;
00943                             <span class="keywordflow">break</span>;
00944                         }
00945 
00946                         wCharIndex = lpwstring[i] ;
00947                         <span class="keywordflow">if</span> ( wCharIndex &lt; <a class="code" href="../../d6/d0/usercli_8h.html#a86">CHAR_WIDTH_BUFFER_LENGTH</a> )
00948                             textextent += pABCwidthBuff[wCharIndex].abcA +
00949                                           pABCwidthBuff[wCharIndex].abcB;
00950                         <span class="keywordflow">else</span> {
00951                             GetCharABCWidthsW(hdc, wCharIndex, wCharIndex, &amp;abc) ;
00952                             textextent += abc.abcA + abc.abcB ;
00953                         }
00954 
00955                         <span class="comment">/*</span>
00956 <span class="comment">                         * Note that abcC could be negative so we need this</span>
00957 <span class="comment">                         * statement here *and* below</span>
00958 <span class="comment">                         */</span>
00959                         <span class="keywordflow">if</span> (textextent &gt; iRightmostPoint)
00960                             iRightmostPoint = textextent;
00961 
00962                         <span class="keywordflow">if</span> ( wCharIndex &lt; <a class="code" href="../../d6/d0/usercli_8h.html#a86">CHAR_WIDTH_BUFFER_LENGTH</a> )
00963                             textextent += pABCwidthBuff[wCharIndex].abcC;
00964                         <span class="keywordflow">else</span>
00965                             textextent += abc.abcC ;
00966 
00967                         <span class="keywordflow">if</span> (textextent &gt; iRightmostPoint)
00968                             iRightmostPoint = textextent;
00969                     }
00970                 }
00971 
00972                 wNegCwidth = (<span class="keywordtype">int</span>)(iRightmostPoint - textextent);
00973             } <span class="keywordflow">else</span> {   <span class="comment">// !ped-&gt;fTrueType</span>
00974                 <span class="comment">// No! This is not a TrueType font; So, we have only character</span>
00975                 <span class="comment">// width info in this buffer.</span>
00976 
00977                 charWidthBuff = ped-&gt;charWidthBuffer;
00978 
00979                 <span class="keywordflow">if</span> ( ped-&gt;fAnsi ) {
00980                     <span class="comment">// Initially assume no tabs exist in the text so cch=nCount.</span>
00981                     <span class="keywordflow">for</span> (i = 0; i &lt; nCount; i++) {
00982                         <span class="keywordflow">if</span> (lpstring[i] == VK_TAB) {
00983                             cch = i;
00984                             <span class="keywordflow">break</span>;
00985                         }
00986 
00987                         <span class="comment">//</span>
00988                         <span class="comment">// Call GetTextExtentPoint for dbcs/hankaku characters</span>
00989                         <span class="comment">//</span>
00990                         <span class="keywordflow">if</span> (ped-&gt;fDBCS &amp;&amp; (i+1 &lt; nCount)
00991                                 &amp;&amp; <a class="code" href="../../d6/d0/usercli_8h.html#a464">ECIsDBCSLeadByte</a>(ped,lpstring[i])) {
00992                             GetTextExtentPointA(hdc, &amp;lpstring[i], 2, &amp;size);
00993                             textextent += size.cx;
00994                             i++;
00995                         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((UCHAR)lpstring[i] &gt;= <a class="code" href="../../d6/d0/usercli_8h.html#a86">CHAR_WIDTH_BUFFER_LENGTH</a>) {
00996                             <span class="comment">// Skip this GetExtentPoint call for non hankaku code points</span>
00997                             <span class="comment">// Or if the character is in the width cache.</span>
00998                             GetTextExtentPointA(hdc, &amp;lpstring[i], 1, &amp;size);
00999                             textextent += size.cx;
01000                         } <span class="keywordflow">else</span> {
01001                             textextent += (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)(charWidthBuff[(<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)(((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>  *)lpstring)[i])]);
01002                         }
01003                     }
01004                 } <span class="keywordflow">else</span> {
01005                     LPWSTR lpwstring = (LPWSTR) lpstring ;
01006                     <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a>    cchUStart;  <span class="comment">// start of unicode character count</span>
01007 
01008                     <span class="keywordflow">for</span> (i = 0; i &lt; nCount; i++) {
01009                         <span class="keywordflow">if</span> (lpwstring[i] == VK_TAB) {
01010                             cch = i;
01011                             <span class="keywordflow">break</span>;
01012                         }
01013 
01014                         wchar = lpwstring[i];
01015                         <span class="keywordflow">if</span> (wchar &gt;= <a class="code" href="../../d6/d0/usercli_8h.html#a86">CHAR_WIDTH_BUFFER_LENGTH</a>) {
01016 
01017                             <span class="comment">/*</span>
01018 <span class="comment">                             * We have a Unicode character that is not in our</span>
01019 <span class="comment">                             * cache, get all the characters outside the cache</span>
01020 <span class="comment">                             * before getting the text extent on this part of the</span>
01021 <span class="comment">                             * string.</span>
01022 <span class="comment">                             */</span>
01023                             cchUStart = i;
01024                             <span class="keywordflow">while</span> (wchar &gt;= <a class="code" href="../../d6/d0/usercli_8h.html#a86">CHAR_WIDTH_BUFFER_LENGTH</a> &amp;&amp;
01025                                     wchar != VK_TAB &amp;&amp; i &lt; nCount) {
01026                                 wchar = lpwstring[++i];
01027                             }
01028 
01029                             GetTextExtentPointW(hdc, (LPWSTR)lpwstring + cchUStart,
01030                                     i-cchUStart, &amp;size);
01031                             textextent += size.cx;
01032 
01033 
01034                             <span class="keywordflow">if</span> (wchar == VK_TAB || i &gt;= nCount) {
01035                                 cch = i;
01036                                 <span class="keywordflow">break</span>;
01037                             }
01038                             <span class="comment">/*</span>
01039 <span class="comment">                             * We have a char that is in the cache, fall through.</span>
01040 <span class="comment">                             */</span>
01041                         }
01042                         <span class="comment">/*</span>
01043 <span class="comment">                         * The width of this character is in the cache buffer.</span>
01044 <span class="comment">                         */</span>
01045                         textextent += ped-&gt;charWidthBuffer[wchar];
01046                     }
01047                 }
01048             } <span class="comment">// fTrueType else.</span>
01049 
01050             nCount -= cch;
01051         } <span class="keywordflow">else</span> {  <span class="comment">// If we don't have a buffer that contains the width info.</span>
01052             <span class="comment">/*</span>
01053 <span class="comment">             * Gotta call the driver to do our text extent.</span>
01054 <span class="comment">             */</span>
01055 
01056             <span class="keywordflow">if</span> ( ped-&gt;fAnsi ) {
01057                 cch = (<span class="keywordtype">int</span>)<a class="code" href="../../d8/d4/editec_8c.html#a10">ECFindTabA</a>(lpstring, nCount);
01058                 GetTextExtentPointA(hdc, lpstring, cch, &amp;size) ;
01059             } <span class="keywordflow">else</span> {
01060                 cch = (<span class="keywordtype">int</span>)<a class="code" href="../../d8/d4/editec_8c.html#a11">ECFindTabW</a>((LPWSTR) lpstring, nCount);
01061                 GetTextExtentPointW(hdc, (LPWSTR)lpstring, cch, &amp;size);
01062             }
01063             nCount -= cch;
01064             <span class="comment">//</span>
01065             <span class="comment">// Subtruct Overhang for Italic fonts.</span>
01066             <span class="comment">//</span>
01067             textextent = (size.cx - ped-&gt;charOverhang);
01068         }
01069 
01070         <span class="comment">//</span>
01071         <span class="comment">// textextent is computed.</span>
01072         <span class="comment">//</span>
01073 
01074         xStripStPos = xEnd;
01075         xEnd += (<span class="keywordtype">int</span>)textextent;
01076         xStripEndPos = xEnd;
01077 
01078         <span class="comment">// We will consider the negative widths only if when we draw opaquely.</span>
01079         <span class="keywordflow">if</span> (fFirstPass &amp;&amp; fDraw) {
01080             xRightmostPoint = <a class="code" href="../../d8/d6/sertl_8c.html#a1">max</a>(xStripEndPos + (<span class="keywordtype">int</span>)wNegCwidth, xRightmostPoint);
01081 
01082             <span class="comment">// Check if this strip peeps beyond the clip region.</span>
01083             <span class="keywordflow">if</span> (xRightmostPoint &gt; xClipEndPos) {
01084                 <span class="keywordflow">if</span> (!NegCInfoForStrip-&gt;nCount) {
01085                     NegCInfoForStrip-&gt;lpString = lpstring;
01086                     NegCInfoForStrip-&gt;ichString = ichString;
01087                     NegCInfoForStrip-&gt;nCount = nCount+cch;
01088                     NegCInfoForStrip-&gt;XStartPos = xStripStPos;
01089                 }
01090             }
01091         }  <span class="comment">/* if (fFirstPass &amp;&amp; fDraw) */</span>
01092 
01093         <span class="keywordflow">if</span> ( ped-&gt;fAnsi )
01094             lpTab = lpstring + cch; <span class="comment">// Possibly Points to a tab character.</span>
01095         <span class="keywordflow">else</span>
01096             lpwTab = ((LPWSTR)lpstring) + cch ;
01097 
01098         <span class="comment">// we must consider all the consecutive tabs and calculate the</span>
01099         <span class="comment">// the begining of next strip.</span>
01100         nConsecutiveTabs = 0;
01101         <span class="keywordflow">while</span> (nCount &amp;&amp;
01102                (ped-&gt;fAnsi ? (*lpTab == VK_TAB) : (*lpwTab == VK_TAB))) {
01103             <span class="comment">// Find the next tab position and update the x value.</span>
01104             xTabStartPos = xEnd;
01105             <span class="keywordflow">if</span> (pixeltabstop)
01106                 xEnd = (((xEnd-iTabOrigin)/pixeltabstop)*pixeltabstop) +
01107                     pixeltabstop + iTabOrigin;
01108             <span class="keywordflow">else</span> {
01109                 <span class="keywordflow">for</span> (i = 0; i &lt; nTabPositions; i++) {
01110                     <span class="keywordflow">if</span> (xEnd &lt; (lpintTabStopPositions[i] + iTabOrigin)) {
01111                         xEnd = (lpintTabStopPositions[i] + iTabOrigin);
01112                         <span class="keywordflow">break</span>;
01113                     }
01114                  }
01115 
01116                 <span class="comment">// Check if all the tabstops set are exhausted; Then start using</span>
01117                 <span class="comment">// default tab stop positions.</span>
01118                 <span class="keywordflow">if</span> (i == nTabPositions) {
01119                     pixeltabstop = 8*cxCharWidth;
01120                     xEnd = ((xEnd - iTabOrigin)/pixeltabstop)*pixeltabstop +
01121                         pixeltabstop + iTabOrigin;
01122                 }
01123             }
01124 
01125             <span class="keywordflow">if</span> (fFirstPass &amp;&amp; fDraw) {
01126                 xRightmostPoint = <a class="code" href="../../d8/d6/sertl_8c.html#a1">max</a>(xEnd, xRightmostPoint);
01127 
01128                 <span class="comment">/* Check if this strip peeps beyond the clip region */</span>
01129                 <span class="keywordflow">if</span> (xRightmostPoint &gt; xClipEndPos) {
01130                     <span class="keywordflow">if</span> (!NegCInfoForStrip-&gt;nCount) {
01131                         NegCInfoForStrip-&gt;ichString = ichString + cch + nConsecutiveTabs;
01132                         NegCInfoForStrip-&gt;nCount = nCount;
01133                         NegCInfoForStrip-&gt;lpString = (ped-&gt;fAnsi ?
01134                                                         lpTab : (LPSTR) lpwTab);
01135                         NegCInfoForStrip-&gt;XStartPos = xTabStartPos;
01136                     }
01137                 }
01138             }   <span class="comment">/* if(fFirstPass) */</span>
01139 
01140             nConsecutiveTabs++;
01141             nCount--;
01142             ped-&gt;fAnsi ? lpTab++ : (LPSTR) (lpwTab++) ;  <span class="comment">// Move to the next character.</span>
01143         }  <span class="comment">// while(*lpTab == TAB) //</span>
01144 
01145         <span class="keywordflow">if</span> (fDraw) {
01146             <span class="keywordflow">if</span> (fFirstPass) {
01147                 <span class="comment">// Is anything remaining to be drawn in this strip?</span>
01148                 <span class="keywordflow">if</span> (!nCount)
01149                     rc.right = xEnd;      <span class="comment">// No! We are done.</span>
01150                 <span class="keywordflow">else</span> {
01151                     <span class="comment">// "x" is the effective starting position of next strip.</span>
01152                     iTabLength = xEnd - xStripEndPos;
01153 
01154                     <span class="comment">// Check if there is a possibility of this tab length being too small</span>
01155                     <span class="comment">// compared to the negative A and C widths if any.</span>
01156                     <span class="keywordflow">if</span> ((wNegCwidth + (wNegAwidth = ped-&gt;wMaxNegA)) &gt; (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)iTabLength) {
01157                         <span class="comment">// Unfortunately, there is a possiblity of an overlap.</span>
01158                         <span class="comment">// Let us find out the actual NegA for the next strip.</span>
01159                         wNegAwidth = <a class="code" href="../../d8/d4/editec_8c.html#a14">GetActualNegA</a>(
01160                               hdc,
01161                               ped,
01162                               xEnd,
01163                               lpstring + (cch + nConsecutiveTabs)*ped-&gt;cbChar,
01164                               ichString + cch + nConsecutiveTabs,
01165                               nCount,
01166                               &amp;NegAInfo);
01167                     }
01168 
01169                     <span class="comment">// Check if they actually overlap //</span>
01170                     <span class="keywordflow">if</span> ((wNegCwidth + wNegAwidth) &lt;= (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)iTabLength) {
01171                         <span class="comment">// No overlap between the strips. This is the ideal situation.</span>
01172                         rc.right = xEnd - wNegAwidth;
01173                     } <span class="keywordflow">else</span> {
01174                         <span class="comment">// Yes! They overlap.</span>
01175                         rc.right = xEnd;
01176 
01177                         <span class="comment">// See if negative C width is too large compared to tab length.</span>
01178                         <span class="keywordflow">if</span> (wNegCwidth &gt; (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)iTabLength) {
01179                             <span class="comment">// Must redraw transparently a part of the current strip later.</span>
01180                             <span class="keywordflow">if</span> (RedrawStripInfo.<a class="code" href="../../d6/d7/structSTRIPINFO.html#o2">nCount</a>) {
01181                                 <span class="comment">// A previous strip also needs to be redrawn; So, merge this</span>
01182                                 <span class="comment">// strip to that strip.</span>
01183                                 RedrawStripInfo.<a class="code" href="../../d6/d7/structSTRIPINFO.html#o2">nCount</a> = (ichString -
01184                                     RedrawStripInfo.<a class="code" href="../../d6/d7/structSTRIPINFO.html#o1">ichString</a>) + cch;
01185                             } <span class="keywordflow">else</span> {
01186                                 RedrawStripInfo.<a class="code" href="../../d6/d7/structSTRIPINFO.html#o2">nCount</a> = cch;
01187                                 RedrawStripInfo.<a class="code" href="../../d6/d7/structSTRIPINFO.html#o0">lpString</a> = lpstring;
01188                                 RedrawStripInfo.<a class="code" href="../../d6/d7/structSTRIPINFO.html#o1">ichString</a> = ichString;
01189                                 RedrawStripInfo.<a class="code" href="../../d6/d7/structSTRIPINFO.html#o3">XStartPos</a> = xStripStPos;
01190                             }
01191                         }
01192 
01193                         <span class="keywordflow">if</span> (wNegAwidth) {
01194                             <span class="comment">// Must redraw transparently the first part of the next strip later.</span>
01195                             <span class="keywordflow">if</span> (RedrawStripInfo.<a class="code" href="../../d6/d7/structSTRIPINFO.html#o2">nCount</a>) {
01196                                 <span class="comment">// A previous strip also needs to be redrawn; So, merge this</span>
01197                                 <span class="comment">// strip to that strip.</span>
01198                                 RedrawStripInfo.<a class="code" href="../../d6/d7/structSTRIPINFO.html#o2">nCount</a> = (NegAInfo.<a class="code" href="../../d6/d7/structSTRIPINFO.html#o1">ichString</a> - RedrawStripInfo.<a class="code" href="../../d6/d7/structSTRIPINFO.html#o1">ichString</a>) +
01199                                        NegAInfo.<a class="code" href="../../d6/d7/structSTRIPINFO.html#o2">nCount</a>;
01200                             } <span class="keywordflow">else</span>
01201                                 RedrawStripInfo = NegAInfo;
01202                         }
01203                     }
01204                 } <span class="comment">// else (!nCount) //</span>
01205             }  <span class="comment">// if (fFirstPass) //</span>
01206 
01207             <span class="keywordflow">if</span> (rc.left &lt; xClipEndPos) {
01208                 <span class="keywordflow">if</span> (fFirstPass) {
01209                     <span class="comment">// If this is the end of the strip, then complete the rectangle.</span>
01210                     <span class="keywordflow">if</span> ((!nCount) &amp;&amp; (xClipEndPos == <a class="code" href="../../d6/d0/usercli_8h.html#a73">MAXCLIPENDPOS</a>))
01211                         rc.right = <a class="code" href="../../d8/d6/sertl_8c.html#a1">max</a>(rc.right, xClipEndPos);
01212                     <span class="keywordflow">else</span>
01213                         rc.right = <a class="code" href="../../d5/d4/acpitabl_8h.html#a69">min</a>(rc.right, xClipEndPos);
01214                 }
01215 
01216                 <span class="comment">// Draw the current strip.</span>
01217                 <span class="keywordflow">if</span> (rc.left &lt; rc.right)
01218                     <span class="keywordflow">if</span> ( ped-&gt;fAnsi )
01219                         ExtTextOutA(hdc,
01220                                     xStripStPos,
01221                                     y,
01222                                     (fFirstPass &amp;&amp; fOpaque ? (ETO_OPAQUE | ETO_CLIPPED) : ETO_CLIPPED),
01223                                     (LPRECT)&amp;rc, lpstring, cch, 0L);
01224                     <span class="keywordflow">else</span>
01225                         ExtTextOutW(hdc,
01226                                     xStripStPos,
01227                                     y,
01228                                     (fFirstPass &amp;&amp; fOpaque ? (ETO_OPAQUE | ETO_CLIPPED) : ETO_CLIPPED),
01229                                     (LPRECT)&amp;rc, (LPWSTR)lpstring, cch, 0L);
01230 
01231             }
01232 
01233             <span class="keywordflow">if</span> (fFirstPass)
01234                 rc.left = <a class="code" href="../../d8/d6/sertl_8c.html#a1">max</a>(rc.right, xClipStPos);
01235             ichString += (cch+nConsecutiveTabs);
01236         }  <span class="comment">// if (fDraw) //</span>
01237 
01238         <span class="comment">// Skip over the tab and the characters we just drew.</span>
01239         lpstring += (cch + nConsecutiveTabs) * ped-&gt;cbChar;
01240     }  <span class="comment">// while (nCount) //</span>
01241 
01242     xEndOfStrip = xEnd;
01243 
01244     <span class="comment">// check if we need to draw some portions transparently.</span>
01245     <span class="keywordflow">if</span> (fFirstPass &amp;&amp; fDraw &amp;&amp; RedrawStripInfo.<a class="code" href="../../d6/d7/structSTRIPINFO.html#o2">nCount</a>) {
01246         iSavedBkMode = SetBkMode(hdc, TRANSPARENT);
01247         fFirstPass = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01248 
01249         nCount = RedrawStripInfo.<a class="code" href="../../d6/d7/structSTRIPINFO.html#o2">nCount</a>;
01250         rc.left = xClipStPos;
01251         rc.right = xClipEndPos;
01252         lpstring = RedrawStripInfo.<a class="code" href="../../d6/d7/structSTRIPINFO.html#o0">lpString</a>;
01253         ichString = RedrawStripInfo.<a class="code" href="../../d6/d7/structSTRIPINFO.html#o1">ichString</a>;
01254         xEnd = RedrawStripInfo.<a class="code" href="../../d6/d7/structSTRIPINFO.html#o3">XStartPos</a>;
01255         <span class="keywordflow">goto</span> RedrawStrip;  <span class="comment">// Redraw Transparently.</span>
01256     }
01257 
01258     <span class="keywordflow">if</span> (iSavedBkMode)             <span class="comment">// Did we change the Bk mode?</span>
01259         SetBkMode(hdc, iSavedBkMode);  <span class="comment">// Then, let us set it back!</span>
01260 
01261     <span class="keywordflow">return</span>((<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)(xEndOfStrip - xStart));
01262 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a434" doxytag="usercli.h::ECUnlock" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void ECUnlock           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>ped</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d3/editec_8c-source.html#l00086">86</a> of file <a class="el" href="../../d9/d3/editec_8c-source.html">editec.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l00661">tagED::cbChar</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00557">tagED::cch</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00578">tagED::charPasswordChar</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00708">tagED::fEncoded</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00706">tagED::hInstance</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00552">tagED::hText</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00709">tagED::iLockLevel</a>, <a class="el" href="../../d9/d5/ntuser_2client_2globals_8h-source.html#l00111">LOCALLOCK</a>, <a class="el" href="../../d9/d5/ntuser_2client_2globals_8h-source.html#l00113">LOCALUNLOCK</a>, <a class="el" href="../../d9/d5/sertl_8c-source.html#l00388">RtlRunEncodeUnicodeString()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00707">tagED::seed</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00064">USHORT</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/editec_8c-source.html#l02703">ECCopy()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02293">ECDeleteText()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00423">ECDoIMEMenuCommand()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l00246">ECGetText()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01735">EcImeRequestHandler()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02059">ECInsertText()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l03969">ECNextIch()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l04001">ECPrevIch()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01225">ECSetCaretHandler()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l01552">ECWord()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01683">HanjaKeyHandler()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l01562">MLBuildchLines()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l00085">MLCalcXOffset()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l03991">MLDrawText()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l03457">MLEditWndProc()</a>, <a class="el" href="../../d6/d4/edmlrare_8c-source.html#l00266">MLGetLine()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l00553">MLIchToXYPos()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l00502">MLIchToYPos()</a>, <a class="el" href="../../d6/d4/edmlrare_8c-source.html#l00027">MLInsertCrCrLf()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l02028">MLKeyDown()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l00374">MLLine()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l02792">MLMouseMotion()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l00689">MLMouseToIch()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l00144">MLMoveSelection()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l00264">MLMoveSelectionRestricted()</a>, <a class="el" href="../../d6/d4/edmlrare_8c-source.html#l00222">MLSetHandle()</a>, <a class="el" href="../../d6/d4/edmlrare_8c-source.html#l00368">MLSetSelection()</a>, <a class="el" href="../../d6/d4/edmlrare_8c-source.html#l00159">MLStripCrCrLf()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l01003">MLUpdateiCaretLine()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l01446">NextWordCallBack()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l01518">NextWordLpkCallBack()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l00030">SLCalcStringWidth()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l00080">SLCalcXOffsetSpecial()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l00395">SLChangeSelection()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l00507">SLDrawLine()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l00737">SLDrawText()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l00323">SLGetClipRect()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l00182">SLIchToLeftXPos()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l01074">SLInsertText()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l02098">SLMouseMotion()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l01934">SLMouseToIch()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l01498">SLMoveSelectionRestricted()</a>, and <a class="el" href="../../d4/d4/editsl_8c-source.html#l00932">SLScrollText()</a>.
<p>
<pre class="fragment"><div>00088 {
00089     <span class="comment">/*</span>
00090 <span class="comment">     * if we are removing the last lock on the text and the password</span>
00091 <span class="comment">     * character is set then encode the text</span>
00092 <span class="comment">     */</span>
00093     <span class="comment">//RIPMSG1(RIP_VERBOSE, "unlock: %d '%10s'\n", ped-&gt;iLockLevel, ped-&gt;ptext);</span>
00094     <span class="keywordflow">if</span> (ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o12">charPasswordChar</a> &amp;&amp; ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o90">iLockLevel</a> == 1 &amp;&amp; ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o3">cch</a> != 0) {
00095         UNICODE_STRING string;
00096         string.Length = string.MaximumLength = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a>)(ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o3">cch</a> * ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o60">cbChar</a>);
00097         string.Buffer = <a class="code" href="../../d8/d6/ntuser_2client_2globals_8h.html#a4">LOCALLOCK</a>(ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o0">hText</a>, ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o87">hInstance</a>);
00098 
00099         <a class="code" href="../../d8/d6/sertl_8c.html#a31">RtlRunEncodeUnicodeString</a>(&amp;(ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o88">seed</a>), &amp;string);
00100         <span class="comment">//RIPMSG1(RIP_VERBOSE, "Encoding: '%10s'\n", ped-&gt;ptext);</span>
00101         ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o89">fEncoded</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00102         <a class="code" href="../../d8/d6/ntuser_2client_2globals_8h.html#a5">LOCALUNLOCK</a>(ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o0">hText</a>, ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o87">hInstance</a>);
00103     }
00104     <a class="code" href="../../d8/d6/ntuser_2client_2globals_8h.html#a5">LOCALUNLOCK</a>(ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o0">hText</a>, ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o87">hInstance</a>);
00105     ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o90">iLockLevel</a>--;
00106 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a426" doxytag="usercli.h::ECUpdateFormat" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void ECUpdateFormat           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ped</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwStyle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwExStyle</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d3/editec_8c-source.html#l04185">4185</a> of file <a class="el" href="../../d9/d3/editec_8c-source.html">editec.c</a>.
<p>
References <a class="el" href="../../d9/d3/editec_8c-source.html#l02679">ECInvalidateClient()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00664">tagED::format</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00649">tagED::fRtoLReading</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00615">tagED::fWrap</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l01562">MLBuildchLines()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l02966">MLScroll()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l01003">MLUpdateiCaretLine()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>.
<p>
Referenced by <a class="el" href="../../d2/d4/editml_8c-source.html#l03457">MLEditWndProc()</a>, and <a class="el" href="../../d4/d4/editsl_8c-source.html#l02520">SLEditWndProc()</a>.
<p>
<pre class="fragment"><div>04189 {
04190     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> fNewRtoLReading;
04191     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> uiNewFormat;
04192 
04193     <span class="comment">// Extract new format and reading order from style</span>
04194 
04195     fNewRtoLReading = dwExStyle &amp; WS_EX_RTLREADING ? 1 : 0;
04196     uiNewFormat     = dwStyle &amp; ES_FMTMASK;
04197 
04198 
04199     <span class="comment">// WS_EX_RIGHT is ignored unless dwStyle is ES_LEFT</span>
04200 
04201     <span class="keywordflow">if</span> (uiNewFormat == ES_LEFT &amp;&amp; dwExStyle &amp; WS_EX_RIGHT) {
04202         uiNewFormat = ES_RIGHT;
04203     }
04204 
04205 
04206     <span class="comment">// Internally ES_LEFT and ES_RIGHT are swapped for RtoLReading order</span>
04207     <span class="comment">// (Think of them as ES_LEADING and ES_TRAILING)</span>
04208 
04209     <span class="keywordflow">if</span> (fNewRtoLReading) {
04210         <span class="keywordflow">switch</span> (uiNewFormat) {
04211             <span class="keywordflow">case</span> ES_LEFT:  uiNewFormat = ES_RIGHT; <span class="keywordflow">break</span>;
04212             <span class="keywordflow">case</span> ES_RIGHT: uiNewFormat = ES_LEFT;  <span class="keywordflow">break</span>;
04213         }
04214     }
04215 
04216 
04217     <span class="comment">// Format change does not cause redisplay by itself</span>
04218 
04219     ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o62">format</a> = uiNewFormat;
04220 
04221 
04222     <span class="comment">// Refresh display on change of reading order</span>
04223 
04224     <span class="keywordflow">if</span> (fNewRtoLReading != ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o51">fRtoLReading</a>) {
04225 
04226         ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o51">fRtoLReading</a> = fNewRtoLReading;
04227 
04228         <span class="keywordflow">if</span> (ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o34">fWrap</a>) {
04229             <span class="comment">// Redo wordwrap</span>
04230             <a class="code" href="../../d6/d0/usercli_8h.html#a490">MLBuildchLines</a>(ped, 0, 0, FALSE, NULL, NULL);
04231             <a class="code" href="../../d6/d0/usercli_8h.html#a519">MLUpdateiCaretLine</a>(ped);
04232         } <span class="keywordflow">else</span> {
04233             <span class="comment">// Refresh horizontal scrollbar display</span>
04234             <a class="code" href="../../d6/d0/usercli_8h.html#a517">MLScroll</a>(ped, FALSE, 0xffffffff, 0, TRUE);
04235         }
04236         <a class="code" href="../../d6/d0/usercli_8h.html#a436">ECInvalidateClient</a>(ped, TRUE);
04237     }
04238 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a438" doxytag="usercli.h::ECWord" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void ECWord           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a> *&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a> *&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d3/editec_8c-source.html#l01552">1552</a> of file <a class="el" href="../../d9/d3/editec_8c-source.html">editec.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00661">tagED::cbChar</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00557">tagED::cch</a>, <a class="el" href="../../d2/d0/bench_8c-source.html#l00050">CHAR</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00578">tagED::charPasswordChar</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l03926">ECAnsiNext()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l03938">ECAnsiPrev()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l04083">ECIsDBCSLeadByte()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00052">ECLock()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00086">ECUnlock()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00640">tagED::fAnsi</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00626">ICH</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01129">ISDELIMETERA</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01130">ISDELIMETERW</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00667">tagED::lpfnNextWord</a>, <a class="el" href="../../d6/d3/acpitabl_8h-source.html#l00366">min</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l01446">NextWordCallBack()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l01518">NextWordLpkCallBack()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00702">tagED::pLpkEditCallout</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d6/d1/rtl_2drawtext_8c-source.html#l00535">UserIsFullWidth()</a>.
<p>
Referenced by <a class="el" href="../../d2/d4/editml_8c-source.html#l01562">MLBuildchLines()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l02028">MLKeyDown()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l02792">MLMouseMotion()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l01529">SLKeyDown()</a>, and <a class="el" href="../../d4/d4/editsl_8c-source.html#l02098">SLMouseMotion()</a>.
<p>
<pre class="fragment"><div>01558 {
01559     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> charLocated = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01560     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> spaceLocated = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01561 
01562     <span class="keywordflow">if</span> ((!ichStart &amp;&amp; fLeft) || (ichStart == ped-&gt;cch &amp;&amp; !fLeft)) {
01563 
01564         <span class="comment">/*</span>
01565 <span class="comment">         * We are at the beginning of the text (looking left) or we are at end</span>
01566 <span class="comment">         * of text (looking right), no word here</span>
01567 <span class="comment">         */</span>
01568         <span class="keywordflow">if</span> (pichMin) *pichMin=0;
01569         <span class="keywordflow">if</span> (pichMax) *pichMax=0;
01570         <span class="keywordflow">return</span>;
01571     }
01572 
01573     <span class="comment">/*</span>
01574 <span class="comment">     * Don't give out hints about word breaks if password chars are being used,</span>
01575 <span class="comment">     */</span>
01576     <span class="keywordflow">if</span> (ped-&gt;charPasswordChar) {
01577         <span class="keywordflow">if</span> (pichMin) *pichMin=0;
01578         <span class="keywordflow">if</span> (pichMax) *pichMax=ped-&gt;cch;
01579         <span class="keywordflow">return</span>;
01580     }
01581 
01582     <span class="keywordflow">if</span> (ped-&gt;fAnsi) {
01583         PSTR pText;
01584         PSTR pWordMinSel;
01585         PSTR pWordMaxSel;
01586         PSTR pPrevChar;
01587 
01588         UserAssert(ped-&gt;cbChar == <span class="keyword">sizeof</span>(CHAR));
01589 
01590         <span class="keywordflow">if</span> (ped-&gt;lpfnNextWord) {
01591             <a class="code" href="../../d8/d4/editec_8c.html#a26">NextWordCallBack</a>(ped, ichStart, fLeft, pichMin, pichMax);
01592             <span class="keywordflow">return</span>;
01593         }
01594 
01595         <span class="keywordflow">if</span> (ped-&gt;pLpkEditCallout) {
01596             <a class="code" href="../../d8/d4/editec_8c.html#a27">NextWordLpkCallBack</a>(ped, ichStart, fLeft, pichMin, pichMax);
01597             <span class="keywordflow">return</span>;
01598         }
01599 
01600         pText = <a class="code" href="../../d6/d0/usercli_8h.html#a433">ECLock</a>(ped);
01601         pWordMinSel = pWordMaxSel = pText + ichStart;
01602 
01603         <span class="comment">/*</span>
01604 <span class="comment">         * if fLeft: Move pWordMinSel to the left looking for the start of a word.</span>
01605 <span class="comment">         * If we start at a space, we will include spaces in the selection as we</span>
01606 <span class="comment">         * move left untill we find a nonspace character. At that point, we continue</span>
01607 <span class="comment">         * looking left until we find a space. Thus, the selection will consist of</span>
01608 <span class="comment">         * a word with its trailing spaces or, it will consist of any leading at the</span>
01609 <span class="comment">         * beginning of a line of text.</span>
01610 <span class="comment">         */</span>
01611 
01612         <span class="comment">/*</span>
01613 <span class="comment">         * if !fLeft: (ie. right word) Move pWordMinSel looking for the start of a</span>
01614 <span class="comment">         * word. If the pWordMinSel points to a character, then we move left</span>
01615 <span class="comment">         * looking for a space which will signify the start of the word. If</span>
01616 <span class="comment">         * pWordMinSel points to a space, we look right till we come upon a</span>
01617 <span class="comment">         * character. pMaxWord will look right starting at pMinWord looking for the</span>
01618 <span class="comment">         * end of the word and its trailing spaces.</span>
01619 <span class="comment">         */</span>
01620 
01621         <span class="keywordflow">if</span> (fLeft || !<a class="code" href="../../d6/d0/usercli_8h.html#a152">ISDELIMETERA</a>(*pWordMinSel) &amp;&amp; *pWordMinSel != 0x0D) {
01622 
01623             <span class="comment">/*</span>
01624 <span class="comment">             * If we are moving left or if we are moving right and we are not on a</span>
01625 <span class="comment">             * space or a CR (the start of a word), then we was look left for the</span>
01626 <span class="comment">             * start of a word which is either a CR or a character. We do this by</span>
01627 <span class="comment">             * looking left till we find a character (or if CR we stop), then we</span>
01628 <span class="comment">             * continue looking left till we find a space or LF.</span>
01629 <span class="comment">             */</span>
01630             <span class="keywordflow">while</span> (pWordMinSel &gt; pText &amp;&amp; ((!<a class="code" href="../../d6/d0/usercli_8h.html#a152">ISDELIMETERA</a>(*(pWordMinSel - 1)) &amp;&amp;
01631                     *(pWordMinSel - 1) != 0x0A) || !charLocated)) {
01632 
01633                 <span class="comment">/*</span>
01634 <span class="comment">                 * Treat double byte character as a word  ( in ansi pWordMinSel loop )</span>
01635 <span class="comment">                 */</span>
01636                 pPrevChar = <a class="code" href="../../d6/d0/usercli_8h.html#a466">ECAnsiPrev</a>( ped, pText, pWordMinSel );
01637 
01638                 <span class="comment">/*</span>
01639 <span class="comment">                ** we are looking right ( !fLeft ).</span>
01640 <span class="comment">                ** if current character is a double byte chararacter or</span>
01641 <span class="comment">                ** previous character is a double byte character, we</span>
01642 <span class="comment">                ** are on the beggining of a word.</span>
01643 <span class="comment">                */</span>
01644                 <span class="keywordflow">if</span> ( !fLeft &amp;&amp; ( <a class="code" href="../../d6/d0/usercli_8h.html#a152">ISDELIMETERA</a>( *pPrevChar )           ||
01645                                  *pPrevChar == 0x0A                   ||
01646                                  <a class="code" href="../../d6/d0/usercli_8h.html#a464">ECIsDBCSLeadByte</a>(ped, *pWordMinSel)  ||
01647                                  pWordMinSel - pPrevChar == 2 ) ) {
01648                     <span class="comment">/*</span>
01649 <span class="comment">                     * If we are looking for the start of the word right, then we</span>
01650 <span class="comment">                     * stop when we have found it. (needed in case charLocated is</span>
01651 <span class="comment">                     * still FALSE)</span>
01652 <span class="comment">                     */</span>
01653                     <span class="keywordflow">break</span>;
01654                 }
01655 
01656                 <span class="keywordflow">if</span> ( pWordMinSel - pPrevChar == 2 ) {
01657                     <span class="comment">/*</span>
01658 <span class="comment">                    ** previous character is a double byte character.</span>
01659 <span class="comment">                    ** if we are in a word ( charLocated == TRUE )</span>
01660 <span class="comment">                    ** current position is the beginning of the word</span>
01661 <span class="comment">                    ** if we are not in a word ( charLocated == FALSE )</span>
01662 <span class="comment">                    ** the previous character is what we looking for.</span>
01663 <span class="comment">                    */</span>
01664                     <span class="keywordflow">if</span> ( ! charLocated ) {
01665                         pWordMinSel = pPrevChar;
01666                     }
01667                     <span class="keywordflow">break</span>;
01668                 }
01669                 pWordMinSel = pPrevChar;
01670 
01671                 <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d0/usercli_8h.html#a152">ISDELIMETERA</a>(*pWordMinSel) &amp;&amp; *pWordMinSel != 0x0A) {
01672 
01673                     <span class="comment">/*</span>
01674 <span class="comment">                     * We have found the last char in the word. Continue looking</span>
01675 <span class="comment">                     * backwards till we find the first char of the word</span>
01676 <span class="comment">                     */</span>
01677                     charLocated = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01678 
01679                     <span class="comment">/*</span>
01680 <span class="comment">                     * We will consider a CR the start of a word</span>
01681 <span class="comment">                     */</span>
01682                     <span class="keywordflow">if</span> (*pWordMinSel == 0x0D)
01683                         <span class="keywordflow">break</span>;
01684                 }
01685             }
01686         } <span class="keywordflow">else</span> {
01687             <span class="keywordflow">while</span> ((<a class="code" href="../../d6/d0/usercli_8h.html#a152">ISDELIMETERA</a>(*pWordMinSel) || *pWordMinSel == 0x0A) &amp;&amp; pWordMinSel &lt; pText + ped-&gt;cch)
01688                 pWordMinSel++;
01689         }
01690 
01691         <span class="comment">/*</span>
01692 <span class="comment">         * Adjust the initial position of pWordMaxSel ( in ansi )</span>
01693 <span class="comment">         */</span>
01694         pWordMaxSel = <a class="code" href="../../d6/d0/usercli_8h.html#a465">ECAnsiNext</a>(ped, pWordMinSel);
01695         pWordMaxSel = <a class="code" href="../../d5/d4/acpitabl_8h.html#a69">min</a>(pWordMaxSel, pText + ped-&gt;cch);
01696 
01697         <span class="comment">/*</span>
01698 <span class="comment">        ** If pWordMinSel points a double byte character AND</span>
01699 <span class="comment">        **    pWordMaxSel points non space</span>
01700 <span class="comment">        ** then</span>
01701 <span class="comment">        **    pWordMaxSel points the beggining of next word.</span>
01702 <span class="comment">        */</span>
01703         <span class="keywordflow">if</span> ( ( pWordMaxSel - pWordMinSel == 2 ) &amp;&amp; ! <a class="code" href="../../d6/d0/usercli_8h.html#a152">ISDELIMETERA</a>(*pWordMaxSel) )
01704             <span class="keywordflow">goto</span> FastReturnA;
01705         <span class="keywordflow">if</span> (*pWordMinSel == 0x0D) {
01706             <span class="keywordflow">if</span> (pWordMinSel &gt; pText &amp;&amp; *(pWordMinSel - 1) == 0x0D)
01707                 <span class="comment">/* So that we can treat CRCRLF as one word also. */</span>
01708                 pWordMinSel--;
01709             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (*(pWordMinSel + 1) == 0x0D)
01710                 <span class="comment">/* Move MaxSel on to the LF */</span>
01711                 pWordMaxSel++;
01712         }
01713 
01714 
01715 
01716         <span class="comment">/*</span>
01717 <span class="comment">         * Check if we have a one character word</span>
01718 <span class="comment">         */</span>
01719         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a152">ISDELIMETERA</a>(*pWordMaxSel))
01720             spaceLocated = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01721 
01722         <span class="comment">/*</span>
01723 <span class="comment">         * Move pWordMaxSel to the right looking for the end of a word and its</span>
01724 <span class="comment">         * trailing spaces. WordMaxSel stops on the first character of the next</span>
01725 <span class="comment">         * word. Thus, we break either at a CR or at the first nonspace char after</span>
01726 <span class="comment">         * a run of spaces or LFs.</span>
01727 <span class="comment">         */</span>
01728         <span class="keywordflow">while</span> ((pWordMaxSel &lt; pText + ped-&gt;cch) &amp;&amp; (!spaceLocated || (<a class="code" href="../../d6/d0/usercli_8h.html#a152">ISDELIMETERA</a>(*pWordMaxSel)))) {
01729             <span class="keywordflow">if</span> (*pWordMaxSel == 0x0D)
01730                 <span class="keywordflow">break</span>;
01731 
01732             <span class="comment">/*</span>
01733 <span class="comment">             * Treat double byte character as a word ( in ansi pWordMaxSel loop )</span>
01734 <span class="comment">             */</span>
01735             <span class="comment">/*</span>
01736 <span class="comment">            ** if it's a double byte character then</span>
01737 <span class="comment">            ** we are at the beginning of next word</span>
01738 <span class="comment">            ** which is a double byte character.</span>
01739 <span class="comment">            */</span>
01740             <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a464">ECIsDBCSLeadByte</a>( ped, *pWordMaxSel))
01741                 <span class="keywordflow">break</span>;
01742 
01743             pWordMaxSel++;
01744 
01745             <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a152">ISDELIMETERA</a>(*pWordMaxSel))
01746                 spaceLocated = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01747 
01748             <span class="keywordflow">if</span> (*(pWordMaxSel - 1) == 0x0A)
01749                 <span class="keywordflow">break</span>;
01750         }
01751 
01752         <span class="comment">/*</span>
01753 <span class="comment">         * label for fast return ( for Ansi )</span>
01754 <span class="comment">         */</span>
01755 FastReturnA:
01756         <a class="code" href="../../d6/d0/usercli_8h.html#a434">ECUnlock</a>(ped);
01757 
01758         <span class="keywordflow">if</span> (pichMin)   *pichMin = (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a>)(pWordMinSel - pText);
01759         <span class="keywordflow">if</span> (pichMax)   *pichMax = (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a>)(pWordMaxSel - pText);
01760         <span class="keywordflow">return</span>;
01761 
01762     } <span class="keywordflow">else</span> {  <span class="comment">// !fAnsi</span>
01763         LPWSTR pwText;
01764         LPWSTR pwWordMinSel;
01765         LPWSTR pwWordMaxSel;
01766         <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> charLocated = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01767         <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> spaceLocated = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01768         PWSTR pwPrevChar;
01769 
01770         UserAssert(ped-&gt;cbChar == <span class="keyword">sizeof</span>(WCHAR));
01771 
01772         <span class="keywordflow">if</span> (ped-&gt;lpfnNextWord) {
01773             <a class="code" href="../../d8/d4/editec_8c.html#a26">NextWordCallBack</a>(ped, ichStart, fLeft, pichMin, pichMax);
01774             <span class="keywordflow">return</span>;
01775         }
01776 
01777         <span class="keywordflow">if</span> (ped-&gt;pLpkEditCallout) {
01778             <a class="code" href="../../d8/d4/editec_8c.html#a27">NextWordLpkCallBack</a>(ped, ichStart, fLeft, pichMin, pichMax);
01779             <span class="keywordflow">return</span>;
01780         }
01781 
01782         pwText = (LPWSTR)<a class="code" href="../../d6/d0/usercli_8h.html#a433">ECLock</a>(ped);
01783         pwWordMinSel = pwWordMaxSel = pwText + ichStart;
01784 
01785         <span class="comment">/*</span>
01786 <span class="comment">         * if fLeft: Move pWordMinSel to the left looking for the start of a word.</span>
01787 <span class="comment">         * If we start at a space, we will include spaces in the selection as we</span>
01788 <span class="comment">         * move left untill we find a nonspace character. At that point, we continue</span>
01789 <span class="comment">         * looking left until we find a space. Thus, the selection will consist of</span>
01790 <span class="comment">         * a word with its trailing spaces or, it will consist of any leading at the</span>
01791 <span class="comment">         * beginning of a line of text.</span>
01792 <span class="comment">         */</span>
01793 
01794         <span class="comment">/*</span>
01795 <span class="comment">         * if !fLeft: (ie. right word) Move pWordMinSel looking for the start of a</span>
01796 <span class="comment">         * word. If the pWordMinSel points to a character, then we move left</span>
01797 <span class="comment">         * looking for a space which will signify the start of the word. If</span>
01798 <span class="comment">         * pWordMinSel points to a space, we look right till we come upon a</span>
01799 <span class="comment">         * character. pMaxWord will look right starting at pMinWord looking for the</span>
01800 <span class="comment">         * end of the word and its trailing spaces.</span>
01801 <span class="comment">         */</span>
01802 
01803 
01804         <span class="keywordflow">if</span> (fLeft || (!<a class="code" href="../../d6/d0/usercli_8h.html#a153">ISDELIMETERW</a>(*pwWordMinSel) &amp;&amp; *pwWordMinSel != 0x0D))
01805          <span class="comment">/* If we are moving left or if we are moving right and we are not on a</span>
01806 <span class="comment">          * space or a CR (the start of a word), then we was look left for the</span>
01807 <span class="comment">          * start of a word which is either a CR or a character. We do this by</span>
01808 <span class="comment">          * looking left till we find a character (or if CR we stop), then we</span>
01809 <span class="comment">          * continue looking left till we find a space or LF.</span>
01810 <span class="comment">          */</span> {
01811             <span class="keywordflow">while</span> (pwWordMinSel &gt; pwText &amp;&amp; ((!<a class="code" href="../../d6/d0/usercli_8h.html#a153">ISDELIMETERW</a>(*(pwWordMinSel - 1)) &amp;&amp; *(pwWordMinSel - 1) != 0x0A) || !charLocated)) {
01812                 <span class="comment">/*</span>
01813 <span class="comment">                 * Treat double byte character as a word  ( in unicode pwWordMinSel loop )</span>
01814 <span class="comment">                 */</span>
01815                 pwPrevChar = pwWordMinSel - 1;
01816                 <span class="comment">/*</span>
01817 <span class="comment">                ** we are looking right ( !fLeft ).</span>
01818 <span class="comment">                **</span>
01819 <span class="comment">                ** if current character is a double width chararacter</span>
01820 <span class="comment">                ** or previous character is a double width character,</span>
01821 <span class="comment">                ** we are on the beggining of a word.</span>
01822 <span class="comment">                */</span>
01823                 <span class="keywordflow">if</span> (!fLeft &amp;&amp; (<a class="code" href="../../d6/d0/usercli_8h.html#a153">ISDELIMETERW</a>( *pwPrevChar)  ||
01824                                *pwPrevChar == 0x0A         ||
01825                                <a class="code" href="../../d5/d2/rtl_2drawtext_8c.html#a35">UserIsFullWidth</a>(CP_ACP,*pwWordMinSel) ||
01826                                <a class="code" href="../../d5/d2/rtl_2drawtext_8c.html#a35">UserIsFullWidth</a>(CP_ACP,*pwPrevChar)))    {
01827                     <span class="comment">/*</span>
01828 <span class="comment">                     * If we are looking for the start of the word right, then we</span>
01829 <span class="comment">                     * stop when we have found it. (needed in case charLocated is</span>
01830 <span class="comment">                     * still FALSE)</span>
01831 <span class="comment">                     */</span>
01832                     <span class="keywordflow">break</span>;
01833                 }
01834 
01835                 <span class="keywordflow">if</span> (<a class="code" href="../../d5/d2/rtl_2drawtext_8c.html#a35">UserIsFullWidth</a>(CP_ACP,*pwPrevChar)) {
01836                     <span class="comment">/*</span>
01837 <span class="comment">                    ** Previous character is a double width character.</span>
01838 <span class="comment">                    **</span>
01839 <span class="comment">                    ** if we are in a word ( charLocated == TRUE )</span>
01840 <span class="comment">                    ** current position is the beginning of the word</span>
01841 <span class="comment">                    ** if we are not in a word ( charLocated == FALSE )</span>
01842 <span class="comment">                    ** the previous character is what we looking for.</span>
01843 <span class="comment">                    */</span>
01844                     <span class="keywordflow">if</span> ( ! charLocated ) {
01845                         pwWordMinSel = pwPrevChar;
01846                     }
01847                     <span class="keywordflow">break</span>;
01848                 }
01849                 pwWordMinSel = pwPrevChar;
01850 
01851                 <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d0/usercli_8h.html#a153">ISDELIMETERW</a>(*pwWordMinSel) &amp;&amp; *pwWordMinSel != 0x0A)
01852                  <span class="comment">/*</span>
01853 <span class="comment">                  * We have found the last char in the word. Continue looking</span>
01854 <span class="comment">                  * backwards till we find the first char of the word</span>
01855 <span class="comment">                  */</span> {
01856                     charLocated = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01857 
01858                     <span class="comment">/*</span>
01859 <span class="comment">                     * We will consider a CR the start of a word</span>
01860 <span class="comment">                     */</span>
01861                     <span class="keywordflow">if</span> (*pwWordMinSel == 0x0D)
01862                         <span class="keywordflow">break</span>;
01863                 }
01864             }
01865         } <span class="keywordflow">else</span> {
01866 
01867             <span class="comment">/*</span>
01868 <span class="comment">             * We are moving right and we are in between words so we need to move</span>
01869 <span class="comment">             * right till we find the start of a word (either a CR or a character.</span>
01870 <span class="comment">             */</span>
01871             <span class="keywordflow">while</span> ((<a class="code" href="../../d6/d0/usercli_8h.html#a153">ISDELIMETERW</a>(*pwWordMinSel) || *pwWordMinSel == 0x0A) &amp;&amp; pwWordMinSel &lt; pwText + ped-&gt;cch)
01872                 pwWordMinSel++;
01873         }
01874 
01875         pwWordMaxSel = <a class="code" href="../../d5/d4/acpitabl_8h.html#a69">min</a>((pwWordMinSel + 1), (pwText + ped-&gt;cch));
01876 
01877         <span class="comment">/*</span>
01878 <span class="comment">        ** If pwWordMinSel points a double width character AND</span>
01879 <span class="comment">        **    pwWordMaxSel points non space</span>
01880 <span class="comment">        ** then</span>
01881 <span class="comment">        **    pwWordMaxSel points the beggining of next word.</span>
01882 <span class="comment">        */</span>
01883         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d2/rtl_2drawtext_8c.html#a35">UserIsFullWidth</a>(CP_ACP,*pwWordMinSel) &amp;&amp; ! <a class="code" href="../../d6/d0/usercli_8h.html#a153">ISDELIMETERW</a>(*pwWordMaxSel))
01884             <span class="keywordflow">goto</span> FastReturnW;
01885         <span class="keywordflow">if</span> (*pwWordMinSel == 0x0D) {
01886             <span class="keywordflow">if</span> (pwWordMinSel &gt; pwText &amp;&amp; *(pwWordMinSel - 1) == 0x0D)
01887                 <span class="comment">/* So that we can treat CRCRLF as one word also. */</span>
01888                 pwWordMinSel--;
01889             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (*(pwWordMinSel + 1) == 0x0D)
01890                 <span class="comment">/* Move MaxSel on to the LF */</span>
01891                 pwWordMaxSel++;
01892         }
01893 
01894 
01895 
01896         <span class="comment">/*</span>
01897 <span class="comment">         * Check if we have a one character word</span>
01898 <span class="comment">         */</span>
01899         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a153">ISDELIMETERW</a>(*pwWordMaxSel))
01900             spaceLocated = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01901 
01902         <span class="comment">/*</span>
01903 <span class="comment">         * Move pwWordMaxSel to the right looking for the end of a word and its</span>
01904 <span class="comment">         * trailing spaces. WordMaxSel stops on the first character of the next</span>
01905 <span class="comment">         * word. Thus, we break either at a CR or at the first nonspace char after</span>
01906 <span class="comment">         * a run of spaces or LFs.</span>
01907 <span class="comment">         */</span>
01908         <span class="keywordflow">while</span> ((pwWordMaxSel &lt; pwText + ped-&gt;cch) &amp;&amp; (!spaceLocated || (<a class="code" href="../../d6/d0/usercli_8h.html#a153">ISDELIMETERW</a>(*pwWordMaxSel)))) {
01909             <span class="keywordflow">if</span> (*pwWordMaxSel == 0x0D)
01910                 <span class="keywordflow">break</span>;
01911 
01912             <span class="comment">/*</span>
01913 <span class="comment">             * treat double byte character as a word ( in unicode pwWordMaxSel loop )</span>
01914 <span class="comment">             */</span>
01915             <span class="comment">/*</span>
01916 <span class="comment">            ** if it's a double width character</span>
01917 <span class="comment">            ** then we are at the beginning of</span>
01918 <span class="comment">            ** the next word which is a double</span>
01919 <span class="comment">            ** width character.</span>
01920 <span class="comment">            */</span>
01921             <span class="keywordflow">if</span> (<a class="code" href="../../d5/d2/rtl_2drawtext_8c.html#a35">UserIsFullWidth</a>(CP_ACP,*pwWordMaxSel))
01922                 <span class="keywordflow">break</span>;
01923 
01924             pwWordMaxSel++;
01925 
01926             <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a153">ISDELIMETERW</a>(*pwWordMaxSel))
01927                 spaceLocated = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01928 
01929 
01930             <span class="keywordflow">if</span> (*(pwWordMaxSel - 1) == 0x0A)
01931                 <span class="keywordflow">break</span>;
01932         }
01933 
01934         <span class="comment">/*</span>
01935 <span class="comment">         * label for fast return ( for Unicode )</span>
01936 <span class="comment">         */</span>
01937 FastReturnW:
01938         <a class="code" href="../../d6/d0/usercli_8h.html#a434">ECUnlock</a>(ped);
01939 
01940         <span class="keywordflow">if</span> (pichMin)   *pichMin = (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a>)(pwWordMinSel - pwText);
01941         <span class="keywordflow">if</span> (pichMax)   *pichMax = (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a>)(pwWordMaxSel - pwText);
01942         <span class="keywordflow">return</span>;
01943     }
01944 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a543" doxytag="usercli.h::EditWndProc" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LRESULT EditWndProc           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WPARAM&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d3/editec_8c-source.html#l02904">2904</a> of file <a class="el" href="../../d9/d3/editec_8c-source.html">editec.c</a>.
<p>
References <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00924">_GetClientRect()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00557">tagED::cch</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00555">tagED::cchTextMax</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00578">tagED::charPasswordChar</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00549">CI_16BIT</a>, <a class="el" href="../../d9/d3/w32_2ntuser_2kernel_2random_8c-source.html#l00102">ClearWindowState()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00559">tagED::cLines</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00243">CopyRect</a>, <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00574">DefWindowProcWorker()</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00692">ECClearText()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02703">ECCopy()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00712">ECCutText()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02293">ECDeleteText()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l01977">ECEmptyUndo()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01037">ECEnableDisableIME()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02492">ECGetEditDC()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l00246">ECGetText()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01337">ECImeComposition()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01735">EcImeRequestHandler()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01150">ECImmSetCompositionFont()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01085">ECImmSetCompositionWindow()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01183">ECInitInsert()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00402">ECInOutReconversionMode()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02679">ECInvalidateClient()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00242">ECIsAncestorActive()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00548">ECMenu()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l00285">ECNcCreate()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l00439">ECNcDestroyHandler()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02429">ECNotifyParent()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02524">ECReleaseEditDC()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01225">ECSetCaretHandler()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l00708">ECSetFont()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l00049">ECSetMargin()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l00516">ECSetPasswordChar()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02612">ECSetText()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02500">EFREADONLY</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00647">tagED::fAllowRTL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00640">tagED::fAnsi</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00603">tagED::fDirty</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00604">tagED::fDisabled</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00602">tagED::fFocus</a>, <a class="el" href="../../d3/d7/rtl_2winmgr_8c-source.html#l00019">FindNCHit()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00656">tagED::fInReconversion</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00651">tagED::fInsertCompChr</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00655">tagED::fKorea</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00657">tagED::fLShift</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00601">tagED::fMouseDown</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00664">tagED::format</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02532">fpImmGetContext</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02537">fpImmIsIME</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02538">fpImmLockIMC</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02547">fpImmNotifyIME</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02539">fpImmReleaseContext</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02548">fpImmUnlockIMC</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00632">tagED::fReadOnly</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00652">tagED::fReplaceCompChr</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00649">tagED::fRtoLReading</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00644">tagED::fSawRButtonDown</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00599">tagED::fSingle</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00646">tagED::fSwapRoOnUp</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00192">GetClientInfo</a>, <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00506">GetKeyState()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00674">tagED::hFont</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00584">tagED::hwnd</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01515">HWq</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00626">ICH</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00564">tagED::ichCaret</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00563">tagED::ichMaxSel</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00561">tagED::ichMinSel</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00667">tagED::lpfnNextWord</a>, <a class="el" href="../../d1/d7/ntcftxt_8h-source.html#l00339">MapVirtualKey()</a>, <a class="el" href="../../d6/d3/acpitabl_8h-source.html#l00366">min</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l01367">MLDeleteText()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l03457">MLEditWndProc()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l07458">NtUserGetCaretPos()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d9/d9/immstruc_8h-source.html#l00025">NULL_HIMC</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00702">tagED::pLpkEditCallout</a>, <a class="el" href="../../d4/d5/rect_8c-source.html#l00118">PtInRect()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00713">tagED::ptScreenBounding</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00540">Pundo</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00586">tagED::rcFmt</a>, <a class="el" href="../../d9/d3/w32_2ntuser_2kernel_2random_8c-source.html#l00083">SetWindowState()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l00737">SLDrawText()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l02520">SLEditWndProc()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l00021">SYS_ALTERNATE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01124">THREAD_HKL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00524">UNDO_NONE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02308">WFOLDUI</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00659">tagED::wImeStatus</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00696">tagED::wLeftMargin</a>, and <a class="el" href="../../d7/d9/usercli_8h-source.html#l00697">tagED::wRightMargin</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/editec_8c-source.html#l02831">EditWndProcWorker()</a>.
<p>
<pre class="fragment"><div>02909 {
02910     HWND hwnd = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(pwnd);
02911     LRESULT lreturn;
02912     <a class="code" href="../../d3/d4/structtagED.html">PED</a>  ped;
02913 
02914     <span class="comment">/*</span>
02915 <span class="comment">     * Get the ped for the given window now since we will use it a lot in</span>
02916 <span class="comment">     * various handlers. This was stored using SetWindowLong(hwnd,0,hped) when</span>
02917 <span class="comment">     * we initially created the edit control.</span>
02918 <span class="comment">     */</span>
02919     ped = ((<a class="code" href="../../d4/d4/structtagEDITWND.html">PEDITWND</a>)pwnd)-&gt;ped;
02920 
02921     <span class="comment">/*</span>
02922 <span class="comment">     * Dispatch the various messages we can receive</span>
02923 <span class="comment">     */</span>
02924     lreturn = 1<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>;
02925     <span class="keywordflow">switch</span> (message) {
02926 
02927     <span class="comment">/*</span>
02928 <span class="comment">     * Messages which are handled the same way for both single and multi line</span>
02929 <span class="comment">     * edit controls.</span>
02930 <span class="comment">     */</span>
02931     <span class="keywordflow">case</span> WM_KEYDOWN:
02932          <span class="comment">// LPK handling of Ctrl/LShift, Ctrl/RShift</span>
02933          <span class="keywordflow">if</span> (ped &amp;&amp; ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o84">pLpkEditCallout</a> &amp;&amp; ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o49">fAllowRTL</a>) {
02934 
02935              ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o48">fSwapRoOnUp</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>; <span class="comment">// Any keydown cancels a ctrl/shift reading order change</span>
02936 
02937              <span class="keywordflow">switch</span> (wParam) {
02938                  <span class="keywordflow">case</span> VK_SHIFT:
02939                      <span class="keywordflow">if</span> ((<a class="code" href="../../d8/d9/client_2ntstubs_8c.html#a16">GetKeyState</a>(VK_CONTROL) &amp; 0x8000) &amp;&amp; !(<a class="code" href="../../d8/d9/client_2ntstubs_8c.html#a16">GetKeyState</a>(VK_MENU) &amp; 0x8000)) {
02940                          <span class="comment">// Left shift or right shift pressed while control held down</span>
02941                          <span class="comment">// Check that alt (VK_MENU) isn't down to avoid false firing on AltGr which equals Ctrl+Alt.</span>
02942                          <span class="keywordflow">if</span> (<a class="code" href="../../d0/d8/ntcftxt_8h.html#a18">MapVirtualKey</a>((LONG)lParam&gt;&gt;16&amp;0xff, 3) == VK_LSHIFT) {
02943                              <span class="comment">// User wants left to right reading order</span>
02944                              ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o48">fSwapRoOnUp</a> = (ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o51">fRtoLReading</a>)  || (ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o62">format</a> &amp; ES_RIGHT) ;
02945                              ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o58">fLShift</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
02946                          } <span class="keywordflow">else</span> {
02947                              <span class="comment">// User wants right to left reading order</span>
02948                              ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o48">fSwapRoOnUp</a> = (!ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o51">fRtoLReading</a>) || (ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o62">format</a> &amp; ES_RIGHT);
02949                              ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o58">fLShift</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
02950                          }
02951                      }
02952                      <span class="keywordflow">break</span>;
02953 
02954                  <span class="keywordflow">case</span> VK_LEFT:
02955                      <span class="keywordflow">if</span> (ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o51">fRtoLReading</a>) {
02956                         wParam = VK_RIGHT;
02957                      }
02958                      <span class="keywordflow">break</span>;
02959 
02960                  <span class="keywordflow">case</span> VK_RIGHT:
02961                      <span class="keywordflow">if</span> (ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o51">fRtoLReading</a>) {
02962                          wParam = VK_LEFT;
02963                      }
02964                      <span class="keywordflow">break</span>;
02965              }
02966          }
02967          <span class="keywordflow">goto</span> HandleEditMsg;
02968 
02969     <span class="keywordflow">case</span> WM_KEYUP:
02970         <span class="keywordflow">if</span> (ped &amp;&amp; ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o84">pLpkEditCallout</a> &amp;&amp; ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o49">fAllowRTL</a> &amp;&amp; ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o48">fSwapRoOnUp</a>) {
02971 
02972             <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fReadingOrder;
02973             <span class="comment">// Complete reading order change detected earlier during keydown</span>
02974 
02975             ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o48">fSwapRoOnUp</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
02976             fReadingOrder = ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o51">fRtoLReading</a>;
02977 
02978             <span class="comment">// Remove any overriding ES_CENTRE or ES_RIGHT format from dwStyle</span>
02979             SetWindowLong(hwnd, GWL_STYLE, GetWindowLong(hwnd, GWL_STYLE) &amp; ~ES_FMTMASK);
02980 
02981             <span class="keywordflow">if</span> (ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o58">fLShift</a>) {
02982                 <span class="comment">// Set Left to Right reading order and right scrollbar in EX_STYLE</span>
02983                 SetWindowLong(hwnd, GWL_EXSTYLE, GetWindowLong(hwnd, GWL_EXSTYLE)
02984                               &amp; ~(WS_EX_RTLREADING | WS_EX_RIGHT | WS_EX_LEFTSCROLLBAR));
02985 
02986                 <span class="comment">// Edit control is LTR now, then notify the parent.</span>
02987                 <a class="code" href="../../d6/d0/usercli_8h.html#a449">ECNotifyParent</a>(ped, EN_ALIGN_LTR_EC);
02988                 <span class="comment">// ? Select a keyboard layout appropriate to LTR operation</span>
02989             } <span class="keywordflow">else</span> {
02990                 <span class="comment">// Set Right to Left reading order, right alignment and left scrollbar</span>
02991                 SetWindowLong(hwnd, GWL_EXSTYLE, GetWindowLong(hwnd, GWL_EXSTYLE)
02992                               | WS_EX_RTLREADING | WS_EX_RIGHT | WS_EX_LEFTSCROLLBAR);
02993 
02994                 <span class="comment">// Edit control is RTL now, then notify the parent.</span>
02995                 <a class="code" href="../../d6/d0/usercli_8h.html#a449">ECNotifyParent</a>(ped, EN_ALIGN_RTL_EC);
02996                 <span class="comment">// ? Select a keyboard layout appropriate to RTL operation</span>
02997             }
02998 
02999             <span class="comment">// If reading order didn't change, so we are sure the alignment changed and the edit window didn't invalidate yet.</span>
03000             <span class="keywordflow">if</span> (fReadingOrder == (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>) ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o51">fRtoLReading</a>) {
03001               <a class="code" href="../../d6/d0/usercli_8h.html#a436">ECInvalidateClient</a>(ped, TRUE);
03002             }
03003         }
03004         <span class="keywordflow">goto</span> HandleEditMsg;
03005 
03006     <span class="keywordflow">case</span> WM_INPUTLANGCHANGE:
03007         <span class="keywordflow">if</span> (ped) {
03008             <span class="comment">// EC_INSERT_COMPOSITION_CHAR : WM_INPUTLANGCHANGE - call ECInitInsert()</span>
03009             HKL hkl = <a class="code" href="../../d6/d0/usercli_8h.html#a151">THREAD_HKL</a>();
03010 
03011             <a class="code" href="../../d6/d0/usercli_8h.html#a473">ECInitInsert</a>(ped, hkl);
03012 
03013             <span class="keywordflow">if</span> (ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o57">fInReconversion</a>) {
03014                 <a class="code" href="../../d6/d0/usercli_8h.html#a477">ECInOutReconversionMode</a>(ped, FALSE);
03015             }
03016 
03017             <span class="comment">//</span>
03018             <span class="comment">// Font and caret position might be changed while</span>
03019             <span class="comment">// another keyboard layout is active. Set those</span>
03020             <span class="comment">// if the edit control has the focus.</span>
03021             <span class="comment">//</span>
03022             <span class="keywordflow">if</span> (ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o23">fFocus</a> &amp;&amp; <a class="code" href="../../d6/d0/usercli_8h.html#a312">fpImmIsIME</a>(hkl)) {
03023                 POINT pt;
03024 
03025                 <a class="code" href="../../d6/d0/usercli_8h.html#a470">ECImmSetCompositionFont</a>(ped);
03026                 <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a274">NtUserGetCaretPos</a>(&amp;pt);
03027                 <a class="code" href="../../d6/d0/usercli_8h.html#a471">ECImmSetCompositionWindow</a>(ped, pt.x, pt.y);
03028             }
03029         }
03030 
03031         <span class="keywordflow">goto</span> HandleEditMsg;
03032 
03033     <span class="keywordflow">case</span> WM_COPY:
03034 
03035         <span class="comment">/*</span>
03036 <span class="comment">         * wParam - not used</span>
03037 <span class="comment">         * lParam - not used</span>
03038 <span class="comment">         */</span>
03039         lreturn = (LONG)<a class="code" href="../../d6/d0/usercli_8h.html#a456">ECCopy</a>(ped);
03040         <span class="keywordflow">break</span>;
03041 
03042     <span class="keywordflow">case</span> WM_CUT:
03043         <span class="comment">/*</span>
03044 <span class="comment">         *</span>
03045 <span class="comment">         * wParamLo --    unused</span>
03046 <span class="comment">         * lParam --    unused</span>
03047 <span class="comment">         */</span>
03048         <a class="code" href="../../d8/d4/editec_8c.html#a21">ECCutText</a>(ped);
03049         <span class="keywordflow">return</span> 0;
03050 
03051     <span class="keywordflow">case</span> WM_CLEAR:
03052         <span class="comment">/*</span>
03053 <span class="comment">         * wParamLo --    unused</span>
03054 <span class="comment">         * lParam --    unused</span>
03055 <span class="comment">         */</span>
03056         <a class="code" href="../../d8/d4/editec_8c.html#a20">ECClearText</a>(ped);
03057         <span class="keywordflow">return</span> 0;
03058 
03059     <span class="keywordflow">case</span> WM_ENABLE:
03060 
03061         <span class="comment">/*</span>
03062 <span class="comment">         * wParam - nonzero if window is enabled else disable window if 0.</span>
03063 <span class="comment">         * lParam - not used</span>
03064 <span class="comment">         */</span>
03065         lreturn = (LONG)(ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o25">fDisabled</a> = !((<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>)wParam));
03066         <a class="code" href="../../d6/d0/usercli_8h.html#a436">ECInvalidateClient</a>(ped, TRUE);
03067         <span class="keywordflow">break</span>;
03068 
03069     <span class="keywordflow">case</span> WM_SYSCHAR:
03070         <span class="comment">//</span>
03071         <span class="comment">// wParamLo --    key value</span>
03072         <span class="comment">// lParam --    unused</span>
03073         <span class="comment">//</span>
03074 
03075         <span class="comment">//</span>
03076         <span class="comment">// If this is a WM_SYSCHAR message generated by the UNDO</span>
03077         <span class="comment">// keystroke we want to EAT IT</span>
03078         <span class="comment">//</span>
03079         <span class="keywordflow">if</span> ((lParam &amp; <a class="code" href="../../d3/d5/editsl_8c.html#a0">SYS_ALTERNATE</a>) &amp;&amp; ((WORD)wParam == VK_BACK))
03080             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
03081         <span class="keywordflow">else</span> {
03082             <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a610">DefWindowProcWorker</a>(pwnd, message, wParam, lParam, ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o42">fAnsi</a>);
03083         }
03084         <span class="keywordflow">break</span>;
03085 
03086     <span class="keywordflow">case</span> EM_GETLINECOUNT:
03087 
03088         <span class="comment">/*</span>
03089 <span class="comment">         * wParam - not used</span>
03090 <span class="comment">           lParam - not used</span>
03091 <span class="comment">         */</span>
03092         lreturn = (LONG)ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o4">cLines</a>;
03093         <span class="keywordflow">break</span>;
03094 
03095     <span class="keywordflow">case</span> EM_GETMODIFY:
03096 
03097         <span class="comment">/*</span>
03098 <span class="comment">         * wParam - not used</span>
03099 <span class="comment">           lParam - not used</span>
03100 <span class="comment">         */</span>
03101 
03102         <span class="comment">/*</span>
03103 <span class="comment">         * Gets the state of the modify flag for this edit control.</span>
03104 <span class="comment">         */</span>
03105         lreturn = (LONG)ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o24">fDirty</a>;
03106         <span class="keywordflow">break</span>;
03107 
03108     <span class="keywordflow">case</span> EM_SETMODIFY:
03109 
03110         <span class="comment">/*</span>
03111 <span class="comment">         * wParam - specifies the new value for the modify flag</span>
03112 <span class="comment">           lParam - not used</span>
03113 <span class="comment">         */</span>
03114 
03115         <span class="comment">/*</span>
03116 <span class="comment">         * Sets the state of the modify flag for this edit control.</span>
03117 <span class="comment">         */</span>
03118         ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o24">fDirty</a> = (wParam != 0);
03119         <span class="keywordflow">break</span>;
03120 
03121     <span class="keywordflow">case</span> EM_GETRECT:
03122 
03123         <span class="comment">/*</span>
03124 <span class="comment">         * wParam - not used</span>
03125 <span class="comment">           lParam - pointer to a RECT data structure that gets the dimensions.</span>
03126 <span class="comment">         */</span>
03127 
03128         <span class="comment">/*</span>
03129 <span class="comment">         * Copies the rcFmt rect to *lpRect.</span>
03130 <span class="comment">         */</span>
03131         <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a33">CopyRect</a>((LPRECT)lParam, (LPRECT)&amp;ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o16">rcFmt</a>);
03132         lreturn = (LONG)<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
03133         <span class="keywordflow">break</span>;
03134 
03135     <span class="keywordflow">case</span> WM_GETFONT:
03136 
03137         <span class="comment">/*</span>
03138 <span class="comment">         * wParam - not used</span>
03139 <span class="comment">           lParam - not used</span>
03140 <span class="comment">         */</span>
03141         lreturn = (LRESULT)ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o66">hFont</a>;
03142         <span class="keywordflow">break</span>;
03143 
03144     <span class="keywordflow">case</span> WM_SETFONT:
03145 
03146         <span class="comment">/*</span>
03147 <span class="comment">         * wParam - handle to the font</span>
03148 <span class="comment">           lParam - redraw if true else don't</span>
03149 <span class="comment">         */</span>
03150         <a class="code" href="../../d6/d0/usercli_8h.html#a454">ECSetFont</a>(ped, (HANDLE)wParam, (BOOL)LOWORD(lParam));
03151         <span class="keywordflow">break</span>;
03152 
03153     <span class="keywordflow">case</span> WM_GETTEXT:
03154 
03155         <span class="comment">/*</span>
03156 <span class="comment">         * wParam - max number of _bytes_ (not characters) to copy</span>
03157 <span class="comment">         * lParam - buffer to copy text to. Text is 0 terminated.</span>
03158 <span class="comment">         */</span>
03159         lreturn = (LRESULT)<a class="code" href="../../d6/d0/usercli_8h.html#a453">ECGetText</a>(ped, (ICH)wParam, (LPSTR)lParam, TRUE);
03160         <span class="keywordflow">break</span>;
03161 
03162     <span class="keywordflow">case</span> WM_SETTEXT:
03163         <span class="comment">//</span>
03164         <span class="comment">// wParamLo --    unused</span>
03165         <span class="comment">// lParam --    LPSTR, null-terminated, with new text.</span>
03166         <span class="comment">//</span>
03167         lreturn = (LRESULT)<a class="code" href="../../d6/d0/usercli_8h.html#a441">ECSetText</a>(ped, (LPSTR)lParam);
03168         <span class="keywordflow">break</span>;
03169 
03170     <span class="keywordflow">case</span> WM_GETTEXTLENGTH:
03171 
03172         <span class="comment">/*</span>
03173 <span class="comment">         * Return count of CHARs!!!</span>
03174 <span class="comment">         */</span>
03175         lreturn = (LONG)ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o3">cch</a>;
03176         <span class="keywordflow">break</span>;
03177 
03178     <span class="keywordflow">case</span> WM_NCDESTROY:
03179     <span class="keywordflow">case</span> WM_FINALDESTROY:
03180 
03181         <span class="comment">/*</span>
03182 <span class="comment">         * wParam - not used</span>
03183 <span class="comment">           lParam - not used</span>
03184 <span class="comment">         */</span>
03185         <a class="code" href="../../d6/d0/usercli_8h.html#a440">ECNcDestroyHandler</a>(pwnd, ped);
03186         <span class="keywordflow">return</span> 0;
03187 
03188     <span class="comment">/*</span>
03189 <span class="comment">     * Most apps (i.e. everyone but Quicken) don't pass on the rbutton</span>
03190 <span class="comment">     * messages when they do something with 'em inside of subclassed</span>
03191 <span class="comment">     * edit fields.  As such, we keep track of whether we saw the</span>
03192 <span class="comment">     * down before the up.  If we don't see the up, then DefWindowProc</span>
03193 <span class="comment">     * won't generate the context menu message, so no big deal.  If</span>
03194 <span class="comment">     * we didn't see the down, then don't let WM_CONTEXTMENU do</span>
03195 <span class="comment">     * anything.</span>
03196 <span class="comment">     *</span>
03197 <span class="comment">     * We also might want to not generate WM_CONTEXTMENUs for old</span>
03198 <span class="comment">     * apps when the mouse is captured.</span>
03199 <span class="comment">     */</span>
03200 
03201     <span class="keywordflow">case</span> WM_RBUTTONDOWN:
03202         ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o46">fSawRButtonDown</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
03203         <span class="keywordflow">goto</span> HandleEditMsg;
03204 
03205     <span class="keywordflow">case</span> WM_RBUTTONUP:
03206         <span class="keywordflow">if</span> (ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o46">fSawRButtonDown</a>) {
03207             ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o46">fSawRButtonDown</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
03208             <span class="keywordflow">if</span> (!ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o57">fInReconversion</a>) {
03209                 <span class="keywordflow">goto</span> HandleEditMsg;
03210             }
03211         }
03212         <span class="comment">// Don't pass this on to DWP so WM_CONTEXTMENU isn't generated.</span>
03213         <span class="keywordflow">return</span> 0;
03214 
03215     <span class="keywordflow">case</span> WM_CONTEXTMENU: {
03216             POINT pt ;
03217             <span class="keywordtype">int</span> nHit = <a class="code" href="../../d2/d8/rtl_2winmgr_8c.html#a0">FindNCHit</a>(pwnd, (LONG)lParam);
03218             <span class="keywordflow">if</span> ((nHit == HTVSCROLL) || (nHit == HTHSCROLL)) {
03219                 <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a610">DefWindowProcWorker</a>(pwnd, message, wParam, lParam, ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o42">fAnsi</a>);
03220             }
03221             POINTSTOPOINT(pt, lParam);
03222             <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFOLDUI) &amp;&amp; <a class="code" href="../../d8/d4/editec_8c.html#a15">ECIsAncestorActive</a>(hwnd))
03223                 <a class="code" href="../../d8/d4/editec_8c.html#a19">ECMenu</a>(hwnd, ped, &amp;pt);
03224         }
03225         <span class="keywordflow">return</span> 0;
03226 
03227     <span class="keywordflow">case</span> EM_CANUNDO:
03228 
03229         <span class="comment">/*</span>
03230 <span class="comment">         * wParam - not used</span>
03231 <span class="comment">           lParam - not used</span>
03232 <span class="comment">         */</span>
03233         lreturn = (LONG)(ped-&gt;undoType != <a class="code" href="../../d6/d0/usercli_8h.html#a82">UNDO_NONE</a>);
03234         <span class="keywordflow">break</span>;
03235 
03236     <span class="keywordflow">case</span> EM_EMPTYUNDOBUFFER:
03237 
03238         <span class="comment">/*</span>
03239 <span class="comment">         * wParam - not used</span>
03240 <span class="comment">           lParam - not used</span>
03241 <span class="comment">         */</span>
03242         <a class="code" href="../../d6/d0/usercli_8h.html#a444">ECEmptyUndo</a>(<a class="code" href="../../d6/d0/usercli_8h.html#a85">Pundo</a>(ped));
03243         <span class="keywordflow">break</span>;
03244 
03245     <span class="keywordflow">case</span> EM_GETMARGINS:
03246         <span class="comment">//</span>
03247         <span class="comment">// wParam --    unused</span>
03248         <span class="comment">// lParam --    unused</span>
03249         <span class="comment">//</span>
03250         <span class="keywordflow">return</span>(MAKELONG(ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o80">wLeftMargin</a>, ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o81">wRightMargin</a>));
03251 
03252     <span class="keywordflow">case</span> EM_SETMARGINS:
03253         <span class="comment">//</span>
03254         <span class="comment">// wParam --    EC_ margin flags</span>
03255         <span class="comment">// lParam --    LOWORD is left, HIWORD is right margin</span>
03256         <span class="comment">//</span>
03257         <a class="code" href="../../d6/d0/usercli_8h.html#a455">ECSetMargin</a>(ped, (UINT)wParam, (DWORD)lParam, TRUE);
03258         <span class="keywordflow">return</span> 0;
03259 
03260     <span class="keywordflow">case</span> EM_GETSEL:
03261 
03262         <span class="comment">/*</span>
03263 <span class="comment">         * Gets the selection range for the given edit control. The</span>
03264 <span class="comment">         * starting position is in the low order word. It contains the position</span>
03265 <span class="comment">         * of the first nonselected character after the end of the selection in</span>
03266 <span class="comment">         * the high order word.</span>
03267 <span class="comment">         */</span>
03268         <span class="keywordflow">if</span> ((PDWORD)wParam != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
03269            *((PDWORD)wParam) = ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o5">ichMinSel</a>;
03270         }
03271         <span class="keywordflow">if</span> ((PDWORD)lParam != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
03272            *((PDWORD)lParam) = ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o6">ichMaxSel</a>;
03273         }
03274         lreturn = MAKELONG(ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o5">ichMinSel</a>,ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o6">ichMaxSel</a>);
03275         <span class="keywordflow">break</span>;
03276 
03277     <span class="keywordflow">case</span> EM_GETLIMITTEXT:
03278         <span class="comment">//</span>
03279         <span class="comment">// wParamLo --    unused</span>
03280         <span class="comment">// lParam --    unused</span>
03281         <span class="comment">//</span>
03282         <span class="keywordflow">return</span>(ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o2">cchTextMax</a>);
03283 
03284     <span class="keywordflow">case</span> EM_SETLIMITTEXT:        <span class="comment">/* Renamed from EM_LIMITTEXT in Chicago */</span>
03285         <span class="comment">/*</span>
03286 <span class="comment">         * wParam - max number of CHARACTERS that can be entered</span>
03287 <span class="comment">         * lParam - not used</span>
03288 <span class="comment">         */</span>
03289 
03290         <span class="comment">/*</span>
03291 <span class="comment">         * Specifies the maximum number of characters of text the user may</span>
03292 <span class="comment">         * enter. If maxLength is 0, we may enter MAXINT number of CHARACTERS.</span>
03293 <span class="comment">         */</span>
03294         <span class="keywordflow">if</span> (ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o20">fSingle</a>) {
03295             <span class="keywordflow">if</span> (wParam) {
03296                 wParam = <a class="code" href="../../d5/d4/acpitabl_8h.html#a69">min</a>(0x7FFFFFFEu, wParam);
03297             } <span class="keywordflow">else</span> {
03298                 wParam = 0x7FFFFFFEu;
03299             }
03300         }
03301 
03302         <span class="keywordflow">if</span> (wParam) {
03303             ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o2">cchTextMax</a> = (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a>)wParam;
03304         } <span class="keywordflow">else</span> {
03305             ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o2">cchTextMax</a> = 0xFFFFFFFFu;
03306         }
03307         <span class="keywordflow">break</span>;
03308 
03309     <span class="keywordflow">case</span> EM_POSFROMCHAR:
03310         <span class="comment">//</span>
03311         <span class="comment">// Validate that char index is within text range</span>
03312         <span class="comment">//</span>
03313         <span class="keywordflow">if</span> (wParam &gt;= ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o3">cch</a>) {
03314             <span class="keywordflow">return</span>(-1<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>);
03315         }
03316         <span class="keywordflow">goto</span> HandleEditMsg;
03317 
03318     <span class="keywordflow">case</span> EM_CHARFROMPOS: {
03319         <span class="comment">// Validate that point is within client of edit field</span>
03320         RECT    rc;
03321         POINT   pt;
03322 
03323         POINTSTOPOINT(pt, lParam);
03324         <a class="code" href="../../d6/d9/rtl_2wow_8c.html#a19">_GetClientRect</a>(pwnd, &amp;rc);
03325         <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d6/rect_8c.html#a5">PtInRect</a>(&amp;rc, pt)) {
03326             <span class="keywordflow">return</span>(-1<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>);
03327         }
03328         <span class="keywordflow">goto</span> HandleEditMsg;
03329     }
03330 
03331     <span class="keywordflow">case</span> EM_SETPASSWORDCHAR:
03332 
03333         <span class="comment">/*</span>
03334 <span class="comment">         * wParam - sepecifies the new char to display instead of the</span>
03335 <span class="comment">         * real text. if null, display the real text.</span>
03336 <span class="comment">         */</span>
03337         <a class="code" href="../../d6/d0/usercli_8h.html#a442">ECSetPasswordChar</a>(ped, (UINT)wParam);
03338         <span class="keywordflow">break</span>;
03339 
03340     <span class="keywordflow">case</span> EM_GETPASSWORDCHAR:
03341         lreturn = (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o12">charPasswordChar</a>;
03342         <span class="keywordflow">break</span>;
03343 
03344     <span class="keywordflow">case</span> EM_SETREADONLY:
03345 
03346         <span class="comment">/*</span>
03347 <span class="comment">         * wParam - state to set read only flag to</span>
03348 <span class="comment">         */</span>
03349         ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o39">fReadOnly</a> = (wParam != 0);
03350         <span class="keywordflow">if</span> (wParam)
03351             <a class="code" href="../../d4/d1/userk_8h.html#a1628">SetWindowState</a>(pwnd, EFREADONLY);
03352         <span class="keywordflow">else</span>
03353             <a class="code" href="../../d4/d1/userk_8h.html#a1629">ClearWindowState</a>(pwnd, EFREADONLY);
03354         lreturn = 1<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>;
03355 
03356         <a class="code" href="../../d6/d0/usercli_8h.html#a469">ECEnableDisableIME</a>( ped );
03357         <span class="comment">// We need to redraw the edit field so that the background color</span>
03358         <span class="comment">// changes.  Read-only edits are drawn in CTLCOLOR_STATIC while</span>
03359         <span class="comment">// others are drawn with CTLCOLOR_EDIT.</span>
03360         <a class="code" href="../../d6/d0/usercli_8h.html#a436">ECInvalidateClient</a>(ped, TRUE);
03361         <span class="keywordflow">break</span>;
03362 
03363     <span class="keywordflow">case</span> EM_SETWORDBREAKPROC:
03364 
03365         <span class="comment">/*</span>
03366 <span class="comment">         * wParam - unused</span>
03367 <span class="comment">         * lParam - FARPROC address of an app supplied call back function</span>
03368 <span class="comment">         */</span>
03369         ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o63">lpfnNextWord</a> = (EDITWORDBREAKPROCA)lParam;
03370         <span class="keywordflow">break</span>;
03371 
03372     <span class="keywordflow">case</span> EM_GETWORDBREAKPROC:
03373         lreturn = (LRESULT)ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o63">lpfnNextWord</a>;
03374         <span class="keywordflow">break</span>;
03375 
03376     <span class="comment">// IME</span>
03377     <span class="keywordflow">case</span> EM_GETIMESTATUS:
03378         <span class="comment">// wParam == sub command</span>
03379         <span class="keywordflow">switch</span> (wParam) {
03380         <span class="keywordflow">case</span>  EMSIS_COMPOSITIONSTRING:
03381             <span class="keywordflow">return</span> ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o59">wImeStatus</a>;
03382 <span class="preprocessor">#if 0   // memphis</span>
03383 <span class="preprocessor"></span>        <span class="keywordflow">case</span>  EMSIS_GETLBBIT:
03384             <span class="keywordflow">return</span> (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)ped-&gt;bLBBit;
03385 <span class="preprocessor">#endif</span>
03386 <span class="preprocessor"></span>        }
03387         <span class="keywordflow">break</span>;
03388 
03389     <span class="keywordflow">case</span> EM_SETIMESTATUS:
03390         <span class="comment">// wParam == sub command</span>
03391         <span class="keywordflow">switch</span> (wParam) {
03392         <span class="keywordflow">case</span> EMSIS_COMPOSITIONSTRING:
03393             ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o59">wImeStatus</a> = (WORD)lParam;
03394         }
03395         <span class="keywordflow">break</span>;
03396 
03397 
03398     <span class="keywordflow">case</span> WM_NCCREATE:
03399         lreturn = <a class="code" href="../../d6/d0/usercli_8h.html#a435">ECNcCreate</a>(ped, pwnd, (LPCREATESTRUCT)lParam);
03400         <span class="keywordflow">break</span>;
03401 
03402     <span class="keywordflow">case</span> WM_LBUTTONDOWN:
03403         <span class="comment">//</span>
03404         <span class="comment">// B#3623</span>
03405         <span class="comment">// Don't set focus to edit field if it is within an inactive,</span>
03406         <span class="comment">// captioned child.</span>
03407         <span class="comment">// We might want to version switch this...  I haven't found</span>
03408         <span class="comment">// any problems by not, but you never know...</span>
03409         <span class="comment">//</span>
03410         <span class="keywordflow">if</span> (<a class="code" href="../../d8/d4/editec_8c.html#a15">ECIsAncestorActive</a>(hwnd)) {
03411             <span class="comment">/*</span>
03412 <span class="comment">             * Reconversion support: quit reconversion if left button is clicked.</span>
03413 <span class="comment">             * Otherwise, if the current KL is Korean, finailize the composition string.</span>
03414 <span class="comment">             */</span>
03415             <span class="keywordflow">if</span> (ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o57">fInReconversion</a> || ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o56">fKorea</a>) {
03416                 BOOLEAN fReconversion = (BOOLEAN)ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o57">fInReconversion</a>;
03417                 <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwIndex = fReconversion ? CPS_CANCEL : CPS_COMPLETE;
03418                 HIMC hImc;
03419 
03420                 ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o53">fReplaceCompChr</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
03421 
03422                 hImc = <a class="code" href="../../d6/d0/usercli_8h.html#a307">fpImmGetContext</a>(ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o14">hwnd</a>);
03423                 <span class="keywordflow">if</span> (hImc) {
03424                     <a class="code" href="../../d6/d0/usercli_8h.html#a322">fpImmNotifyIME</a>(hImc, NI_COMPOSITIONSTR, dwIndex, 0);
03425                     <a class="code" href="../../d6/d0/usercli_8h.html#a314">fpImmReleaseContext</a>(ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o14">hwnd</a>, hImc);
03426                 }
03427 
03428                 <span class="keywordflow">if</span> (fReconversion) {
03429                     <a class="code" href="../../d6/d0/usercli_8h.html#a477">ECInOutReconversionMode</a>(ped, FALSE);
03430                 }
03431 
03432                 <a class="code" href="../../d6/d0/usercli_8h.html#a472">ECSetCaretHandler</a>(ped);
03433             }
03434 
03435             <span class="keywordflow">goto</span> HandleEditMsg;
03436         }
03437         <span class="keywordflow">break</span>;
03438 
03439     <span class="keywordflow">case</span> WM_MOUSEMOVE:
03440         <span class="comment">//</span>
03441         <span class="comment">// We only care about mouse messages when mouse is down.</span>
03442         <span class="comment">//</span>
03443         <span class="keywordflow">if</span> (ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o22">fMouseDown</a>)
03444             <span class="keywordflow">goto</span> HandleEditMsg;
03445         <span class="keywordflow">break</span>;
03446 
03447     <span class="keywordflow">case</span> WM_IME_SETCONTEXT:
03448         <span class="comment">//</span>
03449         <span class="comment">// If ped-&gt;fInsertCompChr is TRUE, that means we will do</span>
03450         <span class="comment">// all the composition character drawing by ourself.</span>
03451         <span class="comment">//</span>
03452         <span class="keywordflow">if</span> ( ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o52">fInsertCompChr</a> ) {
03453             lParam &amp;= ~ISC_SHOWUICOMPOSITIONWINDOW;
03454         }
03455 
03456         <span class="keywordflow">if</span> ( wParam ) {
03457 
03458             PINPUTCONTEXT pInputContext;
03459             HIMC hImc;
03460 
03461             hImc = <a class="code" href="../../d6/d0/usercli_8h.html#a307">fpImmGetContext</a>( hwnd );
03462             <span class="keywordflow">if</span> ( (pInputContext = <a class="code" href="../../d6/d0/usercli_8h.html#a313">fpImmLockIMC</a>( hImc )) != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> ) {
03463                 pInputContext-&gt;fdw31Compat &amp;= ~F31COMPAT_ECSETCFS;
03464                 <a class="code" href="../../d6/d0/usercli_8h.html#a323">fpImmUnlockIMC</a>( hImc );
03465             }
03466             <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a16">GetClientInfo</a>()-&gt;CI_flags &amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a114">CI_16BIT</a>) {
03467                 <a class="code" href="../../d6/d0/usercli_8h.html#a322">fpImmNotifyIME</a>(hImc, NI_COMPOSITIONSTR, CPS_CANCEL, 0L);
03468             }
03469             <a class="code" href="../../d6/d0/usercli_8h.html#a314">fpImmReleaseContext</a>( hwnd, hImc );
03470         }
03471         <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a610">DefWindowProcWorker</a>(pwnd, message, wParam, lParam, ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o42">fAnsi</a>);
03472 
03473     <span class="keywordflow">case</span> WM_IME_ENDCOMPOSITION:
03474         <a class="code" href="../../d6/d0/usercli_8h.html#a477">ECInOutReconversionMode</a>(ped, FALSE);
03475 
03476         <span class="keywordflow">if</span> (ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o53">fReplaceCompChr</a>) {
03477             <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a> ich;
03478             HDC hdc;
03479             <span class="comment">//</span>
03480             <span class="comment">// we have a DBCS character to be replaced.</span>
03481             <span class="comment">// let's delete it before inserting the new one.</span>
03482             <span class="comment">//</span>
03483             ich = (ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o42">fAnsi</a>) ? 2 : 1;
03484             ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o53">fReplaceCompChr</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
03485             ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o6">ichMaxSel</a> = <a class="code" href="../../d5/d4/acpitabl_8h.html#a69">min</a>(ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o7">ichCaret</a> + ich, ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o3">cch</a>);
03486             ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o5">ichMinSel</a> = ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o7">ichCaret</a>;
03487             <span class="keywordflow">if</span> (ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o20">fSingle</a>) {
03488                 <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a447">ECDeleteText</a>( ped ) &gt; 0) {
03489                     <span class="comment">//</span>
03490                     <span class="comment">// Update the display</span>
03491                     <span class="comment">//</span>
03492                     <a class="code" href="../../d6/d0/usercli_8h.html#a449">ECNotifyParent</a>(ped, EN_UPDATE);
03493                     hdc = <a class="code" href="../../d6/d0/usercli_8h.html#a451">ECGetEditDC</a>(ped, FALSE);
03494                     <a class="code" href="../../d6/d0/usercli_8h.html#a527">SLDrawText</a>(ped, hdc, 0);
03495                     <a class="code" href="../../d6/d0/usercli_8h.html#a452">ECReleaseEditDC</a>(ped, hdc, FALSE);
03496                     <span class="comment">//</span>
03497                     <span class="comment">// Tell parent our text contents changed.</span>
03498                     <span class="comment">//</span>
03499                     <a class="code" href="../../d6/d0/usercli_8h.html#a449">ECNotifyParent</a>(ped, EN_CHANGE);
03500                 }
03501             }
03502             <span class="keywordflow">else</span> {
03503                 <a class="code" href="../../d6/d0/usercli_8h.html#a484">MLDeleteText</a>(ped);
03504             }
03505 
03506             <a class="code" href="../../d6/d0/usercli_8h.html#a472">ECSetCaretHandler</a>( ped );
03507         }
03508         <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a610">DefWindowProcWorker</a>(pwnd, message, wParam, lParam, ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o42">fAnsi</a>);
03509 
03510     <span class="keywordflow">case</span> WM_IME_STARTCOMPOSITION:
03511         <span class="keywordflow">if</span> ( ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o52">fInsertCompChr</a> ) {
03512             <span class="comment">//</span>
03513             <span class="comment">// BUG BUG</span>
03514             <span class="comment">//</span>
03515             <span class="comment">// sending WM_IME_xxxCOMPOSITION will let</span>
03516             <span class="comment">// IME draw composition window. IME should</span>
03517             <span class="comment">// not do that since we cleared</span>
03518             <span class="comment">// ISC_SHOWUICOMPOSITIONWINDOW bit when</span>
03519             <span class="comment">// we got WM_IME_SETCONTEXT message.</span>
03520             <span class="comment">//</span>
03521             <span class="comment">// Korean IME should be fixed in the future.</span>
03522             <span class="comment">//</span>
03523             <span class="keywordflow">break</span>;
03524 
03525         } <span class="keywordflow">else</span> {
03526             <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a610">DefWindowProcWorker</a>(pwnd, message, wParam, lParam, ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o42">fAnsi</a>);
03527         }
03528 
03529     <span class="comment">// simple composition character support for FE IME.</span>
03530     <span class="keywordflow">case</span> WM_IME_COMPOSITION:
03531         <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a474">ECImeComposition</a>(ped, wParam, lParam);
03532 
03533     <span class="keywordflow">case</span> WM_KILLFOCUS:
03534         <span class="comment">//</span>
03535         <span class="comment">// when focus is removed from the window,</span>
03536         <span class="comment">// composition character should be finalized</span>
03537         <span class="comment">//</span>
03538         <span class="keywordflow">if</span> (ped &amp;&amp; <a class="code" href="../../d6/d0/usercli_8h.html#a312">fpImmIsIME</a>(<a class="code" href="../../d6/d0/usercli_8h.html#a151">THREAD_HKL</a>())) {
03539             HIMC hImc = <a class="code" href="../../d6/d0/usercli_8h.html#a307">fpImmGetContext</a>(hwnd);
03540 
03541             <span class="keywordflow">if</span> (hImc != <a class="code" href="../../d8/d0/immstruc_8h.html#a0">NULL_HIMC</a>) {
03542                 <span class="keywordflow">if</span> (ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o53">fReplaceCompChr</a> || (ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o59">wImeStatus</a> &amp; EIMES_COMPLETECOMPSTRKILLFOCUS)) {
03543                     <span class="comment">// If the composition string to be determined upon kill focus,</span>
03544                     <span class="comment">// do it now.</span>
03545                     <a class="code" href="../../d6/d0/usercli_8h.html#a322">fpImmNotifyIME</a>(hImc, NI_COMPOSITIONSTR, CPS_COMPLETE, 0);
03546                 } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o57">fInReconversion</a>) {
03547                     <span class="comment">// If the composition string it not to be determined,</span>
03548                     <span class="comment">// and if we're in reconversion mode, cancel reconversion now.</span>
03549                     <a class="code" href="../../d6/d0/usercli_8h.html#a322">fpImmNotifyIME</a>(hImc, NI_COMPOSITIONSTR, CPS_CANCEL, 0);
03550                 }
03551 
03552                 <span class="comment">// Get out from reconversion mode</span>
03553                 <span class="keywordflow">if</span> (ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o57">fInReconversion</a>) {
03554                     <a class="code" href="../../d6/d0/usercli_8h.html#a477">ECInOutReconversionMode</a>(ped, FALSE);
03555                 }
03556 
03557                 <a class="code" href="../../d6/d0/usercli_8h.html#a314">fpImmReleaseContext</a>(hwnd, hImc);
03558             }
03559         }
03560         <span class="keywordflow">goto</span> HandleEditMsg;
03561         <span class="keywordflow">break</span>;
03562 
03563     <span class="keywordflow">case</span> WM_SETFOCUS:
03564         <span class="keywordflow">if</span> (ped &amp;&amp; !ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o23">fFocus</a>) {
03565             HKL hkl = <a class="code" href="../../d6/d0/usercli_8h.html#a151">THREAD_HKL</a>();
03566 
03567             <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a312">fpImmIsIME</a>(hkl)) {
03568                 HIMC hImc;
03569 
03570                 hImc = <a class="code" href="../../d6/d0/usercli_8h.html#a307">fpImmGetContext</a>(hwnd);
03571                 <span class="keywordflow">if</span> (hImc) {
03572                     LPINPUTCONTEXT lpImc;
03573 
03574                     <span class="keywordflow">if</span> (ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o59">wImeStatus</a> &amp; EIMES_CANCELCOMPSTRINFOCUS) {
03575                         <span class="comment">// cancel when in-focus</span>
03576                         <a class="code" href="../../d6/d0/usercli_8h.html#a322">fpImmNotifyIME</a>(hImc, NI_COMPOSITIONSTR, CPS_CANCEL, 0);
03577                     }
03578 
03579                     <a class="code" href="../../d6/d0/usercli_8h.html#a470">ECImmSetCompositionFont</a>(ped);
03580 
03581                     <span class="keywordflow">if</span> ((lpImc = <a class="code" href="../../d6/d0/usercli_8h.html#a313">fpImmLockIMC</a>(hImc)) != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
03582 
03583                         <span class="comment">// We presume the CompForm will reset to CFS_DEFAULT,</span>
03584                         <span class="comment">// when the edit control loses Focus.</span>
03585                         <span class="comment">// IMEWndProc32 will call ImmSetCompositionWindow with</span>
03586                         <span class="comment">// CFS_DEFAULT, when it receive WM_IME_SETCONTEXT.</span>
03587                         lpImc-&gt;fdw31Compat |= F31COMPAT_ECSETCFS;
03588 
03589                         <a class="code" href="../../d6/d0/usercli_8h.html#a323">fpImmUnlockIMC</a>(hImc);
03590                     }
03591                     <a class="code" href="../../d6/d0/usercli_8h.html#a314">fpImmReleaseContext</a>(hwnd, hImc);
03592                 }
03593 
03594                 <span class="comment">//</span>
03595                 <span class="comment">// force to set IME composition window when</span>
03596                 <span class="comment">// first getting focus.</span>
03597                 <span class="comment">//</span>
03598                 ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o93">ptScreenBounding</a>.x = -1;
03599                 ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o93">ptScreenBounding</a>.y = -1;
03600             }
03601             <a class="code" href="../../d6/d0/usercli_8h.html#a473">ECInitInsert</a>(ped, hkl);
03602         }
03603         <span class="keywordflow">goto</span> HandleEditMsg;
03604         <span class="keywordflow">break</span>;
03605 
03606     <span class="keywordflow">case</span> WM_IME_REQUEST:
03607         <span class="comment">// simple ImeRequest Handler</span>
03608         <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a475">EcImeRequestHandler</a>(ped, wParam, lParam);
03609 
03610     <span class="keywordflow">case</span> WM_CREATE:
03611         <span class="keywordflow">if</span> (ped)
03612             <a class="code" href="../../d6/d0/usercli_8h.html#a469">ECEnableDisableIME</a>(ped);
03613         <span class="keywordflow">goto</span> HandleEditMsg;
03614         <span class="keywordflow">break</span>;
03615 
03616     <span class="keywordflow">default</span>:
03617 HandleEditMsg:
03618         <span class="comment">/* (picked up from NT40FE SP3)</span>
03619 <span class="comment">         * HACK ALERT: We may receive messages before the PED has been</span>
03620 <span class="comment">         * allocated (eg: WM_GETMINMAXINFO is sent before WM_NCCREATE)</span>
03621 <span class="comment">         * so we must test ped before dreferencing.</span>
03622 <span class="comment">         */</span>
03623         <span class="keywordflow">if</span> (ped != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
03624             <span class="keywordflow">if</span> (ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o20">fSingle</a>) {
03625                 lreturn = <a class="code" href="../../d6/d0/usercli_8h.html#a542">SLEditWndProc</a>(hwnd, ped, message, wParam, lParam);
03626             } <span class="keywordflow">else</span> {
03627                 lreturn = <a class="code" href="../../d6/d0/usercli_8h.html#a502">MLEditWndProc</a>(hwnd, ped, message, wParam, lParam);
03628             }
03629         }
03630     }
03631 
03632     <span class="keywordflow">return</span> lreturn;
03633 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a596" doxytag="usercli.h::EditWndProcA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LRESULT APIENTRY EditWndProcA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>msg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d3/editec_8c-source.html#l02787">2787</a> of file <a class="el" href="../../d9/d3/editec_8c-source.html">editec.c</a>.
<p>
References <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00574">DefWindowProcWorker()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02831">EditWndProcWorker()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00797">FNID_EDIT</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00144">FWINDOWMSG</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d5/d9/immcli_8h-source.html#l00120">ValidateHwnd</a>.
<p>
Referenced by <a class="el" href="../../d7/d7/clinit_8c-source.html#l01219">ClientThreadSetup()</a>, and <a class="el" href="../../d9/d3/editec_8c-source.html#l02831">EditWndProcWorker()</a>.
<p>
<pre class="fragment"><div>02792 {
02793     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwnd;
02794 
02795     <span class="keywordflow">if</span> ((pwnd = <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(hwnd)) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
02796         <span class="keywordflow">return</span> 0;
02797 
02798     <span class="comment">/*</span>
02799 <span class="comment">     * If the control is not interested in this message,</span>
02800 <span class="comment">     * pass it to DefWindowProc.</span>
02801 <span class="comment">     */</span>
02802     <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d0/usercli_8h.html#a10">FWINDOWMSG</a>(message, FNID_EDIT))
02803         <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a610">DefWindowProcWorker</a>(pwnd, message, wParam, lParam, TRUE);
02804 
02805     <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a617">EditWndProcWorker</a>(pwnd, message, wParam, lParam, TRUE);
02806 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a597" doxytag="usercli.h::EditWndProcW" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LRESULT APIENTRY EditWndProcW           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>msg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d3/editec_8c-source.html#l02808">2808</a> of file <a class="el" href="../../d9/d3/editec_8c-source.html">editec.c</a>.
<p>
References <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00574">DefWindowProcWorker()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02831">EditWndProcWorker()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00797">FNID_EDIT</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00144">FWINDOWMSG</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d5/d9/immcli_8h-source.html#l00120">ValidateHwnd</a>.
<p>
Referenced by <a class="el" href="../../d7/d7/clinit_8c-source.html#l01219">ClientThreadSetup()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02831">EditWndProcWorker()</a>, and <a class="el" href="../../d7/d7/clinit_8c-source.html#l00378">RW_RegisterControls()</a>.
<p>
<pre class="fragment"><div>02813 {
02814     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwnd;
02815 
02816     <span class="keywordflow">if</span> ((pwnd = <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(hwnd)) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
02817         <span class="keywordflow">return</span> 0;
02818 
02819     <span class="comment">/*</span>
02820 <span class="comment">     * If the control is not interested in this message,</span>
02821 <span class="comment">     * pass it to DefWindowProc.</span>
02822 <span class="comment">     */</span>
02823     <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d0/usercli_8h.html#a10">FWINDOWMSG</a>(message, FNID_EDIT)) {
02824         <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a610">DefWindowProcWorker</a>(pwnd, message, wParam, lParam, FALSE);
02825     }
02826 
02827     <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a617">EditWndProcWorker</a>(pwnd, message, wParam, lParam, FALSE);
02828 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a617" doxytag="usercli.h::EditWndProcWorker" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LRESULT EditWndProcWorker           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>msg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>fAnsi</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d3/editec_8c-source.html#l02831">2831</a> of file <a class="el" href="../../d9/d3/editec_8c-source.html">editec.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l03668">tagMSG_TABLE_ENTRY::bThunkMessage</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00148">CsSendMessage</a>, <a class="el" href="../../d6/d0/usercli_8h.html#a359">ED</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l00018">EditLookaside</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02904">EditWndProc()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02787">EditWndProcA()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02808">EditWndProcW()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00640">tagED::fAnsi</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00645">tagED::fInitialized</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00815">FNID_CALLWINDOWPROC</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00797">FNID_EDIT</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01515">HWq</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00270">INITCONTROLLOOKASIDE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l03524">MessageTable</a>, <a class="el" href="../../d6/d0/usercli_8h.html#a363">PEDITWND</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00227">VALIDATECLASSANDSIZE</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02302">WFANSICREATOR</a>.
<p>
Referenced by <a class="el" href="../../d7/d7/clinit_8c-source.html#l01219">ClientThreadSetup()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02787">EditWndProcA()</a>, and <a class="el" href="../../d9/d3/editec_8c-source.html#l02808">EditWndProcW()</a>.
<p>
<pre class="fragment"><div>02837 {
02838     <a class="code" href="../../d3/d4/structtagED.html">PED</a> ped;
02839     HWND hwnd = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(pwnd);
02840     <span class="keyword">static</span> <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fInit = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
02841 
02842     <a class="code" href="../../d6/d0/usercli_8h.html#a28">VALIDATECLASSANDSIZE</a>(pwnd, FNID_EDIT);
02843     <a class="code" href="../../d6/d0/usercli_8h.html#a29">INITCONTROLLOOKASIDE</a>(&amp;EditLookaside, <a class="code" href="../../d3/d4/structtagED.html">ED</a>, pwnd, 4);
02844 
02845     <span class="comment">/*</span>
02846 <span class="comment">     * Get the ped for the given window now since we will use it a lot in</span>
02847 <span class="comment">     * various handlers. This was stored using SetWindowLong(hwnd,0,hped) when</span>
02848 <span class="comment">     * we initially created the edit control.</span>
02849 <span class="comment">     */</span>
02850     ped = ((<a class="code" href="../../d4/d4/structtagEDITWND.html">PEDITWND</a>)pwnd)-&gt;ped;
02851 
02852     <span class="comment">/*</span>
02853 <span class="comment">     * Make sure the ANSI flag is set correctly.</span>
02854 <span class="comment">     */</span>
02855     <span class="keywordflow">if</span> (!ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o47">fInitialized</a>) {
02856         ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o47">fInitialized</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
02857         ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o42">fAnsi</a> = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFANSICREATOR) ? <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a> : <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
02858     }
02859 
02860     <span class="comment">/*</span>
02861 <span class="comment">     * We just call the regular EditWndProc if the ped is not created, the</span>
02862 <span class="comment">     * incoming message type already matches the PED type or the message</span>
02863 <span class="comment">     * does not need any translation.</span>
02864 <span class="comment">     */</span>
02865     <span class="keywordflow">if</span> (ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o42">fAnsi</a> == fAnsi ||
02866             (message &gt;= WM_USER) ||
02867             !<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a1144">MessageTable</a>[message].<a class="code" href="../../d6/d2/structtagMSG__TABLE__ENTRY.html#o1">bThunkMessage</a>) {
02868         <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a543">EditWndProc</a>(pwnd, message, wParam, lParam);
02869     }
02870 
02871     <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a11">CsSendMessage</a>(hwnd, message, wParam, lParam,
02872                          fAnsi ? (ULONG_PTR)EditWndProcW : (ULONG_PTR)EditWndProcA,
02873                          FNID_CALLWINDOWPROC, fAnsi);
02874 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a782" doxytag="usercli.h::EnterReaderModeHelper" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL EnterReaderModeHelper           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hwnd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d4/reader_8c-source.html#l00415">415</a> of file <a class="el" href="../../d9/d4/reader_8c-source.html">reader.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02163">tagREADERMODE::cbSize</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02164">tagREADERMODE::dwFlags</a>, <a class="el" href="../../d9/d4/reader_8c-source.html#l00355">EnterReaderMode()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d9/d4/reader_8c-source.html#l00391">FScrollEnabled()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02166">tagREADERMODE::lParam</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02165">tagREADERMODE::pfnReaderModeProc</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02170">RDRMODE_HORZ</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02169">RDRMODE_VERT</a>, <a class="el" href="../../d9/d4/reader_8c-source.html#l00311">ReaderProcInternal()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d5/d9/immcli_8h-source.html#l00120">ValidateHwnd</a>.
<p>
Referenced by <a class="el" href="../../d7/d0/lb1_8c-source.html#l00032">ListBoxWndProcWorker()</a>, and <a class="el" href="../../d2/d4/editml_8c-source.html#l03457">MLEditWndProc()</a>.
<p>
<pre class="fragment"><div>00416 {
00417     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwnd = <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(hwnd);
00418     <a class="code" href="../../d0/d5/structtagREADERMODE.html">READERMODE</a> rdrm;
00419 
00420     rdrm.<a class="code" href="../../d0/d5/structtagREADERMODE.html#o0">cbSize</a> = <span class="keyword">sizeof</span>(<a class="code" href="../../d0/d5/structtagREADERMODE.html">READERMODE</a>);
00421     rdrm.<a class="code" href="../../d0/d5/structtagREADERMODE.html#o2">pfnReaderModeProc</a> = <a class="code" href="../../d8/d5/reader_8c.html#a11">ReaderProcInternal</a>;
00422     rdrm.<a class="code" href="../../d0/d5/structtagREADERMODE.html#o3">lParam</a> = (LPARAM)hwnd;
00423     rdrm.<a class="code" href="../../d0/d5/structtagREADERMODE.html#o1">dwFlags</a> = 0;
00424 
00425     <span class="keywordflow">if</span> (<a class="code" href="../../d8/d5/reader_8c.html#a13">FScrollEnabled</a>(pwnd, TRUE)) {
00426         rdrm.<a class="code" href="../../d0/d5/structtagREADERMODE.html#o1">dwFlags</a> |= <a class="code" href="../../d6/d0/usercli_8h.html#a284">RDRMODE_VERT</a>;
00427     }
00428     <span class="keywordflow">if</span> (<a class="code" href="../../d8/d5/reader_8c.html#a13">FScrollEnabled</a>(pwnd, FALSE)) {
00429         rdrm.<a class="code" href="../../d0/d5/structtagREADERMODE.html#o1">dwFlags</a> |= <a class="code" href="../../d6/d0/usercli_8h.html#a285">RDRMODE_HORZ</a>;
00430     }
00431 
00432     <span class="keywordflow">return</span> <a class="code" href="../../d8/d5/reader_8c.html#a12">EnterReaderMode</a>(&amp;rdrm);
00433 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a410" doxytag="usercli.h::Event" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> Event           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d4/structtagEVENT__PACKET.html">PEVENT_PACKET</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pep</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00086">86</a> of file <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html">client/ntstubs.c</a>.
<p>
References <a class="el" href="../../d8/d8/ntsend_8h-source.html#l00027">BEGINCALL</a>, <a class="el" href="../../d1/d3/ddemlcli_8h-source.html#l00059">CheckDDECritOut</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d8/d8/ntsend_8h-source.html#l00047">ENDCALL</a>, <a class="el" href="../../d8/d8/ntsend_8h-source.html#l00035">ERRORTRAP</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l02956">NtUserEvent()</a>, and <a class="el" href="../../d1/d8/w32_2ntuser_2kernel_2event_8c.html#a2">pep</a>.
<p>
Referenced by <a class="el" href="../../d1/d7/dir_8c-source.html#l00057">BuildQueryDirectoryIrp()</a>, <a class="el" href="../../d6/d6/copysup_8c-source.html#l01790">CcCanIWrite()</a>, <a class="el" href="../../d7/d1/cachesub_8c-source.html#l02717">CcSetValidData()</a>, <a class="el" href="../../d6/d0/lazyrite_8c-source.html#l00158">CcWaitForCurrentLazyWriterActivity()</a>, <a class="el" href="../../d6/d2/vacbsup_8c-source.html#l01062">CcWaitOnActiveCount()</a>, <a class="el" href="../../d6/d7/fssup_8c-source.html#l02952">CcZeroData()</a>, <a class="el" href="../../d9/d3/w32_2ntuser_2client_2callback_8c-source.html#l00024">DoCallback()</a>, <a class="el" href="../../d9/d7/ex_2resource_8c-source.html#l00492">ExAcquireResourceExclusiveLite()</a>, <a class="el" href="../../d9/d7/ex_2resource_8c-source.html#l00410">ExpAcquireResourceExclusiveLite()</a>, <a class="el" href="../../d7/d7/sysinfo_8c-source.html#l03060">ExpGetProcessInformation()</a>, <a class="el" href="../../d9/d7/ex_2resource_8c-source.html#l00273">ExReinitializeResourceLite()</a>, <a class="el" href="../../d8/d0/faulttol_8c-source.html#l00031">FsRtlBalanceReads()</a>, <a class="el" href="../../d4/d0/fastio_8c-source.html#l02691">FsRtlGetFileSize()</a>, <a class="el" href="../../d4/d8/fsrtl_2pnp_8c-source.html#l00041">FsRtlNotifyVolumeEvent()</a>, <a class="el" href="../../d6/d1/oplock_8c-source.html#l02454">FsRtlOplockBreakToII()</a>, <a class="el" href="../../d6/d1/oplock_8c-source.html#l02690">FsRtlOplockBreakToNone()</a>, <a class="el" href="../../d5/d4/stackovf_8c-source.html#l00177">FsRtlPostPagingFileStackOverflow()</a>, <a class="el" href="../../d5/d4/stackovf_8c-source.html#l00139">FsRtlPostStackOverflow()</a>, <a class="el" href="../../d5/d4/stackovf_8c-source.html#l00215">FsRtlpPostStackOverflow()</a>, <a class="el" href="../../d4/d0/fastio_8c-source.html#l02864">FsRtlSetFileSize()</a>, <a class="el" href="../../d8/d0/faulttol_8c-source.html#l00096">FsRtlSyncVolumes()</a>, <a class="el" href="../../d6/d1/oplock_8c-source.html#l03025">FsRtlWaitOnIrp()</a>, <a class="el" href="../../d1/d6/server_2stream_8c-source.html#l00263">GetChar()</a>, <a class="el" href="../../d5/d5/iosubs_8c-source.html#l01552">IoBuildDeviceIoControlRequest()</a>, <a class="el" href="../../d5/d5/iosubs_8c-source.html#l01933">IoBuildSynchronousFsdRequest()</a>, <a class="el" href="../../d3/d2/dumpctl_8c-source.html#l01300">IoFreeDumpStack()</a>, <a class="el" href="../../d5/d5/iosubs_8c-source.html#l08509">IoPageRead()</a>, <a class="el" href="../../d3/d3/internal_8c-source.html#l00417">IopCancelAlertedRequest()</a>, <a class="el" href="../../d3/d2/dumpctl_8c-source.html#l00384">IopGetDumpStack()</a>, <a class="el" href="../../d3/d3/internal_8c-source.html#l06926">IopSynchronousApiServiceTail()</a>, <a class="el" href="../../d3/d3/internal_8c-source.html#l07272">IopTrackLink()</a>, <a class="el" href="../../d3/d3/internal_8c-source.html#l08084">IopXxxControlFile()</a>, <a class="el" href="../../d5/d5/iosubs_8c-source.html#l10957">IoSynchronousPageWrite()</a>, <a class="el" href="../../d7/d5/ioverifier_8c-source.html#l00486">IovBuildDeviceIoControlRequest()</a>, <a class="el" href="../../d9/d2/kdapi_8c-source.html#l00453">KdUpdateTimeSlipEvent()</a>, <a class="el" href="../../d3/d7/eventobj_8c-source.html#l00134">KeClearEvent()</a>, <a class="el" href="../../d3/d7/eventobj_8c-source.html#l00053">KeInitializeEvent()</a>, <a class="el" href="../../d3/d7/eventobj_8c-source.html#l00167">KePulseEvent()</a>, <a class="el" href="../../d3/d7/eventobj_8c-source.html#l00253">KeReadStateEvent()</a>, <a class="el" href="../../d3/d7/eventobj_8c-source.html#l00285">KeResetEvent()</a>, <a class="el" href="../../d6/d0/i386_2thredini_8c-source.html#l00454">KeSetAutoAlignmentThread()</a>, <a class="el" href="../../d3/d7/eventobj_8c-source.html#l00343">KeSetEvent()</a>, <a class="el" href="../../d3/d7/eventobj_8c-source.html#l00458">KeSetEventBoostPriority()</a>, <a class="el" href="../../d3/d6/waitsup_8c-source.html#l00277">KiWaitTest()</a>, <a class="el" href="../../d4/d6/session_8c-source.html#l01544">MiDereferenceSession()</a>, <a class="el" href="../../d8/d4/pfnlist_8c-source.html#l00941">MiEnsureAvailablePageOrWait()</a>, <a class="el" href="../../d9/d1/pagfault_8c-source.html#l03523">MiInitializeReadInProgressPfn()</a>, <a class="el" href="../../d5/d4/procsup_8c-source.html#l05287">MiMakeOutswappedPageResident()</a>, <a class="el" href="../../d6/d4/sectsup_8c-source.html#l00191">MiSegmentDelete()</a>, <a class="el" href="../../d8/d1/alpha_2hypermap_8c-source.html#l00243">MiUnmapImageHeaderInHyperSpace()</a>, <a class="el" href="../../d5/d4/procsup_8c-source.html#l01695">MmCleanProcessAddressSpace()</a>, <a class="el" href="../../d2/d4/mapcache_8c-source.html#l01274">MmCopyToCachedPage()</a>, <a class="el" href="../../d1/d7/creasect_8c-source.html#l00390">MmCreateSection()</a>, <a class="el" href="../../d8/d2/monitor_8c-source.html#l00167">MonitorConv()</a>, <a class="el" href="../../d8/d2/monitor_8c-source.html#l00090">MonitorLink()</a>, <a class="el" href="../../d8/d2/monitor_8c-source.html#l00031">MonitorStringHandle()</a>, <a class="el" href="../../d1/d7/ex_2event_8c-source.html#l00126">NtClearEvent()</a>, <a class="el" href="../../d1/d7/ex_2event_8c-source.html#l00180">NtCreateEvent()</a>, <a class="el" href="../../d2/d6/io_2devctrl_8c-source.html#l00034">NtDeviceIoControlFile()</a>, <a class="el" href="../../d9/d6/io_2fsctrl_8c-source.html#l00034">NtFsControlFile()</a>, <a class="el" href="../../d2/d4/lock_8c-source.html#l00035">NtLockFile()</a>, <a class="el" href="../../d1/d7/dir_8c-source.html#l00821">NtNotifyChangeDirectoryFile()</a>, <a class="el" href="../../d8/d6/ntapi_8c-source.html#l01156">NtNotifyChangeKey()</a>, <a class="el" href="../../d8/d6/ntapi_8c-source.html#l01319">NtNotifyChangeMultipleKeys()</a>, <a class="el" href="../../d1/d7/ex_2event_8c-source.html#l00412">NtPulseEvent()</a>, <a class="el" href="../../d1/d7/dir_8c-source.html#l00682">NtQueryDirectoryFile()</a>, <a class="el" href="../../d1/d7/ex_2event_8c-source.html#l00514">NtQueryEvent()</a>, <a class="el" href="../../d7/d4/io_2read_8c-source.html#l00036">NtReadFile()</a>, <a class="el" href="../../d7/d4/io_2read_8c-source.html#l00730">NtReadFileScatter()</a>, <a class="el" href="../../d1/d7/ex_2event_8c-source.html#l00648">NtResetEvent()</a>, <a class="el" href="../../d1/d7/ex_2event_8c-source.html#l00748">NtSetEvent()</a>, <a class="el" href="../../d7/d7/sysinfo_8c-source.html#l02264">NtSetSystemInformation()</a>, <a class="el" href="../../d1/d9/io_2write_8c-source.html#l00035">NtWriteFile()</a>, <a class="el" href="../../d1/d9/io_2write_8c-source.html#l00801">NtWriteFileGather()</a>, <a class="el" href="../../d1/d1/obtype_8c-source.html#l00069">ObCreateObjectType()</a>, <a class="el" href="../../d3/d0/threads_8c-source.html#l01145">RtlDeleteTimer()</a>, <a class="el" href="../../d3/d0/threads_8c-source.html#l00809">RtlDeleteTimerQueueEx()</a>, <a class="el" href="../../d3/d0/threads_8c-source.html#l00256">RtlDeregisterWaitEx()</a>, <a class="el" href="../../d3/d0/threads_8c-source.html#l05648">RtlpFreeWaitEvent()</a>, <a class="el" href="../../d3/d0/threads_8c-source.html#l05575">RtlpGetWaitEvent()</a>, <a class="el" href="../../d3/d0/threads_8c-source.html#l05503">RtlpWaitForEvent()</a>, <a class="el" href="../../d3/d0/threads_8c-source.html#l00077">RtlRegisterWait()</a>, <a class="el" href="../../d1/d3/instance_8c-source.html#l00137">SetLastDDEMLError()</a>, <a class="el" href="../../d4/d6/deviosup_8c-source.html#l00573">UdfPerformDevIoCtrl()</a>, <a class="el" href="../../d5/d8/udfs_2pnp_8c-source.html#l00710">UdfPnpCompletionRoutine()</a>, <a class="el" href="../../d5/d8/udfs_2pnp_8c-source.html#l00194">UdfPnpQueryRemove()</a>, <a class="el" href="../../d5/d8/udfs_2pnp_8c-source.html#l00350">UdfPnpRemove()</a>, <a class="el" href="../../d5/d8/udfs_2pnp_8c-source.html#l00500">UdfPnpSurpriseRemove()</a>, <a class="el" href="../../d4/d6/deviosup_8c-source.html#l00685">UdfReadSectors()</a>, <a class="el" href="../../d0/d4/vdmints_8c-source.html#l00408">VdmpQueueIntNormalRoutine()</a>, <a class="el" href="../../d4/d3/vdm_2vdm_8c-source.html#l00087">VdmQueryDirectoryFile()</a>, and <a class="el" href="../../d0/d5/verifier_8c-source.html#l02160">VerifierSetEvent()</a>.
<p>
<pre class="fragment"><div>00088 {
00089     <a class="code" href="../../d7/d9/ntsend_8h.html#a1">BEGINCALL</a>()
00090 
00091         CheckDDECritOut;
00092 
00093         retval = (DWORD)NtUserEvent(
00094                 pep);
00095 
00096     ERRORTRAP(0);
00097     ENDCALL(DWORD);
00098 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a644" doxytag="usercli.h::FChildVisible" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL FChildVisible           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hwnd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/winmgrc_8c-source.html#l00052">52</a> of file <a class="el" href="../../d4/d7/winmgrc_8c-source.html">winmgrc.c</a>.
<p>
References <a class="el" href="../../d3/d7/rtl_2winmgr_8c-source.html#l00294">_FChildVisible()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d5/d9/immcli_8h-source.html#l00120">ValidateHwnd</a>.
<p>
Referenced by <a class="el" href="../../d7/d4/edslrare_8c-source.html#l00087">SLUndo()</a>.
<p>
<pre class="fragment"><div>00054 {
00055     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwnd;
00056 
00057     pwnd = <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(hwnd);
00058 
00059     <span class="keywordflow">if</span> (pwnd == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00060         <span class="keywordflow">return</span> 0;
00061 
00062     <span class="keywordflow">return</span> (<a class="code" href="../../d2/d8/rtl_2winmgr_8c.html#a1">_FChildVisible</a>(pwnd));
00063 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a549" doxytag="usercli.h::FillTriangle" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL FillTriangle           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HDC&nbsp;</td>
          <td class="mdname" nowrap> <em>hdc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPRECT&nbsp;</td>
          <td class="mdname" nowrap> <em>lprc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HBRUSH&nbsp;</td>
          <td class="mdname" nowrap> <em>hbr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>flags</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d1/rtl_2draw_8c-source.html#l00302">302</a> of file <a class="el" href="../../d0/d1/rtl_2draw_8c-source.html">rtl/draw.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d0/d1/rtl_2draw_8c-source.html#l00114">DrawDiagonalLine()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d7/d0/userrtl_8h-source.html#l00153">UserSelectBrush</a>.
<p>
Referenced by <a class="el" href="../../d0/d1/rtl_2draw_8c-source.html#l00896">DrawEdge()</a>.
<p>
<pre class="fragment"><div>00307 {
00308     HBRUSH hbrT;
00309     <span class="keywordtype">int</span>    nDirection;
00310 
00311     <span class="keywordflow">switch</span> (flags &amp; (BF_RECT | BF_DIAGONAL)) {
00312 
00313     <span class="keywordflow">case</span> BF_DIAGONAL_ENDTOPLEFT:
00314     <span class="keywordflow">case</span> BF_DIAGONAL_ENDBOTTOMRIGHT:
00315         nDirection = -1;
00316         <span class="keywordflow">break</span>;
00317 
00318     <span class="keywordflow">default</span>:
00319         nDirection = 1;
00320         <span class="keywordflow">break</span>;
00321     }
00322     hbrT = <a class="code" href="../../d6/d1/userrtl_8h.html#a18">UserSelectBrush</a>(hdc, hbr);
00323     <a class="code" href="../../d9/d1/rtl_2draw_8c.html#a5">DrawDiagonalLine</a>(hdc, lprc, nDirection, 1, flags);
00324     <span class="comment">/*</span>
00325 <span class="comment">     * Don't care if the above functions failed for a bad hdc</span>
00326 <span class="comment">     */</span>
00327     <span class="keywordflow">return</span> (<a class="code" href="../../d6/d1/userrtl_8h.html#a18">UserSelectBrush</a>(hdc, hbrT) != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>);
00328 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a627" doxytag="usercli.h::FindExistingCursorIcon" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HCURSOR FindExistingCursorIcon           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">LPWSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>pszModName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPCWSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>pszResName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d9/d1/structtagCURSORFIND.html">PCURSORFIND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pcfSearch</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l01102">1102</a> of file <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html">client/ntstubs.c</a>.
<p>
References <a class="el" href="../../d8/d8/ntsend_8h-source.html#l00027">BEGINCALL</a>, <a class="el" href="../../d8/d8/ntsend_8h-source.html#l00235">CLEANUPLPWSTR</a>, <a class="el" href="../../d8/d8/ntsend_8h-source.html#l00183">COPYLPWSTR</a>, <a class="el" href="../../d8/d8/ntsend_8h-source.html#l00188">COPYLPWSTRID</a>, <a class="el" href="../../d8/d8/ntsend_8h-source.html#l00047">ENDCALL</a>, <a class="el" href="../../d8/d8/ntsend_8h-source.html#l00035">ERRORTRAP</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00316">_IN_STRING::fAllocated</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l07243">NtUserFindExistingCursorIcon()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00315">_IN_STRING::pstr</a>, and <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00063">szUSER32</a>.
<p>
Referenced by <a class="el" href="../../d5/d8/clres_8c-source.html#l04436">CopyImageFromRes()</a>, and <a class="el" href="../../d5/d8/clres_8c-source.html#l02657">LoadIcoCur()</a>.
<p>
<pre class="fragment"><div>01106 {
01107     <a class="code" href="../../d8/d1/struct__IN__STRING.html">IN_STRING</a> strModName;
01108     <a class="code" href="../../d8/d1/struct__IN__STRING.html">IN_STRING</a> strResName;
01109 
01110     <span class="comment">/*</span>
01111 <span class="comment">     * Make sure cleanup will work successfully</span>
01112 <span class="comment">     */</span>
01113     strModName.<a class="code" href="../../d8/d1/struct__IN__STRING.html#o2">fAllocated</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01114     strResName.<a class="code" href="../../d8/d1/struct__IN__STRING.html#o2">fAllocated</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01115 
01116     <a class="code" href="../../d7/d9/ntsend_8h.html#a1">BEGINCALL</a>()
01117 
01118         if (pszModName == NULL)
01119             pszModName = szUSER32;
01120 
01121         COPYLPWSTR(&amp;strModName, pszModName);
01122         COPYLPWSTRID(&amp;strResName, pszResName);
01123 
01124         retval = (ULONG_PTR)NtUserFindExistingCursorIcon(strModName.pstr,
01125                                                      strResName.pstr,
01126                                                      pcfSearch);
01127 
01128     ERRORTRAP(0);
01129 
01130     CLEANUPLPWSTR(strModName);
01131     CLEANUPLPWSTR(strResName);
01132 
01133     ENDCALL(HCURSOR);
01134 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a646" doxytag="usercli.h::FindMnemChar" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int FindMnemChar           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">LPWSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>lpstr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>ch</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fFirst</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fPrefix</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d9/dmmnem_8c-source.html#l00027">27</a> of file <a class="el" href="../../d6/d9/dmmnem_8c-source.html">dmmnem.c</a>.
<p>
References <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l03178">CH_ENGLISHPREFIX</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l03172">CH_PREFIX</a>, <a class="el" href="../../d9/d9/wstrings_8c-source.html#l00049">CharLowerW()</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00062">SHORT</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00041">UTCHAR</a>, and <a class="el" href="../../d4/d9/user32_8def-source.html#l00395">VkKeyScanW</a>.
<p>
Referenced by <a class="el" href="../../d6/d9/dmmnem_8c-source.html#l00115">xxxGNM_FindNextMnem()</a>.
<p>
<pre class="fragment"><div>00032 {
00033     WCHAR chc;
00034     WCHAR chnext;
00035     WCHAR chFirst;
00036 
00037     <span class="keywordflow">while</span> (*lpstr == TEXT(<span class="charliteral">' '</span>))
00038         lpstr++;
00039 
00040     ch = (WCHAR)(ULONG_PTR)<a class="code" href="../../d8/d0/wstrings_8c.html#a8">CharLowerW</a>((LPWSTR)ULongToPtr( (DWORD)(UTCHAR)ch ));
00041     chFirst = (WCHAR)(ULONG_PTR)<a class="code" href="../../d8/d0/wstrings_8c.html#a8">CharLowerW</a>((LPWSTR)ULongToPtr( (DWORD)(UTCHAR)(*lpstr) ));
00042 
00043 <span class="preprocessor">#ifdef FE_SB // FindMnemChar()</span>
00044 <span class="preprocessor"></span>    <span class="comment">//</span>
00045     <span class="comment">// HIRO: LATER: CH_ENGLISHPREFIX is obsolete, so entire FE_SB can be removed ?</span>
00046     <span class="comment">//</span>
00047     <span class="keywordflow">if</span> (fPrefix) {
00048         <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a13">SHORT</a> wvch, xvkey;
00049         <span class="comment">//</span>
00050         <span class="comment">// get OEM-dependent virtual key code</span>
00051         <span class="comment">//</span>
00052         <span class="keywordflow">if</span> ((wvch = <a class="code" href="../../d3/d0/user32_8def.html#a48">VkKeyScanW</a>(ch)) != -1)
00053             wvch &amp;= 0x00FF;
00054 
00055         <span class="keywordflow">while</span> (chc = *lpstr++) {
00056             <span class="comment">//</span>
00057             <span class="comment">// This should think about KOREA &amp; TAIWAN case. But probably OK.</span>
00058             <span class="comment">//</span>
00059             <span class="keywordflow">if</span> ((chc == <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a894">CH_PREFIX</a>) || (chc == <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a895">CH_ENGLISHPREFIX</a>)) {
00060                 chnext = (WCHAR)(ULONG_PTR)<a class="code" href="../../d8/d0/wstrings_8c.html#a8">CharLowerW</a>((LPWSTR)ULongToPtr( (DWORD)(UTCHAR)*lpstr ));
00061 
00062                 <span class="keywordflow">if</span> (chnext == <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a894">CH_PREFIX</a>)
00063                     lpstr++;
00064                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> (chnext == ch)
00065                     <span class="keywordflow">return</span>(0x01);
00066                 <span class="keywordflow">else</span> {
00067                     <span class="comment">//</span>
00068                     <span class="comment">// Compare should be done with virtual key in Kanji menu mode</span>
00069                     <span class="comment">// in order to accept Digit shortcut key and save English</span>
00070                     <span class="comment">// windows applications!</span>
00071                     <span class="comment">//</span>
00072                     xvkey = <a class="code" href="../../d3/d0/user32_8def.html#a48">VkKeyScanW</a>(chnext);
00073                     <span class="keywordflow">if</span> (xvkey != 0xFFFF &amp;&amp; ((xvkey &amp; 0x00FF) == wvch))
00074                         <span class="keywordflow">return</span>(0x01);
00075                     <span class="keywordflow">else</span>
00076                         <span class="keywordflow">return</span>(0x00);
00077                }
00078             }
00079         }
00080     }
00081 <span class="preprocessor">#else</span>
00082 <span class="preprocessor"></span>    <span class="keywordflow">if</span> (fPrefix) {
00083         <span class="keywordflow">while</span> (chc = *lpstr++) {
00084             <span class="keywordflow">if</span> (((WCHAR)CharLower((LPWSTR)(DWORD)(UTCHAR)chc) == <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a894">CH_PREFIX</a>)) {
00085                 chnext = (WCHAR)<a class="code" href="../../d8/d0/wstrings_8c.html#a8">CharLowerW</a>((LPWSTR)(DWORD)(UTCHAR)*lpstr);
00086 
00087                 <span class="keywordflow">if</span> (chnext == <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a894">CH_PREFIX</a>)
00088                     lpstr++;
00089                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> (chnext == ch)
00090                     <span class="keywordflow">return</span> 0x01;
00091                 <span class="keywordflow">else</span> {
00092                     <span class="keywordflow">return</span> 0x00;
00093                 }
00094             }
00095         }
00096     }
00097 <span class="preprocessor">#endif // FE_SB</span>
00098 <span class="preprocessor"></span>
00099     <span class="keywordflow">if</span> (fFirst &amp;&amp; (ch == chFirst))
00100         <span class="keywordflow">return</span> 0x80;
00101 
00102     <span class="keywordflow">return</span> 0x00;
00103 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a775" doxytag="usercli.h::FindPwndChild" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d6/d9/structtagWND.html">PWND</a> FindPwndChild           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwndMDI</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>wChildID</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00024">24</a> of file <a class="el" href="../../d6/d4/mdimenu_8c-source.html">mdimenu.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l00215">REBASEPWND</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01764">tagWND::spmenu</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01747">tagWND::spwndOwner</a>.
<p>
Referenced by <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02101">DefFrameProcWorker()</a>, <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00499">MDISetMenu()</a>, <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00611">xxxInitActivateDlg()</a>, and <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01237">xxxMDIActivate()</a>.
<p>
<pre class="fragment"><div>00027 {
00028     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwndT;
00029 
00030     <span class="keywordflow">for</span> (pwndT = <a class="code" href="../../d6/d0/usercli_8h.html#a27">REBASEPWND</a>(pwndMDI, spwndChild);
00031             pwndT &amp;&amp; (pwndT-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o5">spwndOwner</a> || PtrToUlong(pwndT-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o16">spmenu</a>) != wChildID);
00032             pwndT = <a class="code" href="../../d6/d0/usercli_8h.html#a27">REBASEPWND</a>(pwndT, spwndNext))
00033         ;
00034 
00035     <span class="keywordflow">return</span> pwndT;
00036 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a571" doxytag="usercli.h::fnHkINLPCWPRETSTRUCTA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LRESULT fnHkINLPCWPRETSTRUCTA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>message</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>ULONG_PTR&nbsp;</td>
          <td class="mdname" nowrap> <em>xParam</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d7/d7/clinit_8c-source.html#l01219">ClientThreadSetup()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a570" doxytag="usercli.h::fnHkINLPCWPRETSTRUCTW" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LRESULT fnHkINLPCWPRETSTRUCTW           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>message</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>ULONG_PTR&nbsp;</td>
          <td class="mdname" nowrap> <em>xParam</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d7/d7/clinit_8c-source.html#l01219">ClientThreadSetup()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a569" doxytag="usercli.h::fnHkINLPCWPSTRUCTA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LRESULT fnHkINLPCWPSTRUCTA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>message</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>ULONG_PTR&nbsp;</td>
          <td class="mdname" nowrap> <em>xParam</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d7/d7/clinit_8c-source.html#l01219">ClientThreadSetup()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a568" doxytag="usercli.h::fnHkINLPCWPSTRUCTW" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LRESULT fnHkINLPCWPSTRUCTW           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>message</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>ULONG_PTR&nbsp;</td>
          <td class="mdname" nowrap> <em>xParam</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d7/d7/clinit_8c-source.html#l01219">ClientThreadSetup()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a408" doxytag="usercli.h::FreeLookasideEntry" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void FreeLookasideEntry           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d2/d4/struct__LOOKASIDE.html">PLOOKASIDE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pla</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PVOID&nbsp;</td>
          <td class="mdname" nowrap> <em>pEntry</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d1/rtlinit_8c-source.html#l00344">344</a> of file <a class="el" href="../../d2/d1/rtlinit_8c-source.html">rtlinit.c</a>.
<p>
References <a class="el" href="../../d2/d1/rtlinit_8c-source.html#l00205">FreeToZone</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00089">gcsLookaside</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00330">_LOOKASIDE::LookasideBase</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00331">_LOOKASIDE::LookasideBounds</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00332">_LOOKASIDE::LookasideZone</a>, and <a class="el" href="../../d7/d9/usercli_8h-source.html#l00960">UserLocalFree</a>.
<p>
Referenced by <a class="el" href="../../d9/d0/btnctl_8c-source.html#l01338">ButtonWndProcWorker()</a>, <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l00460">DefDlgProcWorker()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l00285">ECNcCreate()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l00439">ECNcDestroyHandler()</a>, <a class="el" href="../../d0/d9/imectl_8c-source.html#l00083">ImeWndProcWorker()</a>, <a class="el" href="../../d6/d4/statctl_8c-source.html#l00840">StaticWndProcWorker()</a>, <a class="el" href="../../d4/d3/comboini_8c-source.html#l00394">xxxCBNcDestroyHandler()</a>, and <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00375">xxxDestroyLBox()</a>.
<p>
<pre class="fragment"><div>00347 {
00348 <span class="preprocessor">#if DBG</span>
00349 <span class="preprocessor"></span>    pla-&gt;DelCalls++;
00350 <span class="preprocessor">#endif // DBG</span>
00351 <span class="preprocessor"></span>
00352     <span class="comment">//</span>
00353     <span class="comment">// If the pEntry was from zone, then free to zone</span>
00354     <span class="comment">//</span>
00355     <span class="keywordflow">if</span> ( (PVOID)pEntry &gt;= pla-&gt;<a class="code" href="../../d2/d4/struct__LOOKASIDE.html#o0">LookasideBase</a> &amp;&amp; (PVOID)pEntry &lt; pla-&gt;<a class="code" href="../../d2/d4/struct__LOOKASIDE.html#o1">LookasideBounds</a> ) {
00356         RtlEnterCriticalSection(&amp;gcsLookaside);
00357         <a class="code" href="../../d1/d2/rtlinit_8c.html#a2">FreeToZone</a>(&amp;pla-&gt;<a class="code" href="../../d2/d4/struct__LOOKASIDE.html#o2">LookasideZone</a>,pEntry);
00358         RtlLeaveCriticalSection(&amp;gcsLookaside);
00359     } <span class="keywordflow">else</span> {
00360 <span class="preprocessor">#if DBG</span>
00361 <span class="preprocessor"></span>        pla-&gt;DelSlowCalls++;
00362 <span class="preprocessor">#endif // DBG</span>
00363 <span class="preprocessor"></span>        <a class="code" href="../../d6/d0/usercli_8h.html#a138">UserLocalFree</a>(pEntry);
00364     }
00365 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a766" doxytag="usercli.h::GetACPCharSet" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> UINT GetACPCharSet           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d8/dlgbegin_8c-source.html#l00133">133</a> of file <a class="el" href="../../d1/d8/dlgbegin_8c-source.html">dlgbegin.c</a>.
<p>
References <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, and <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>.
<p>
<pre class="fragment"><div>00134 {
00135     <span class="keyword">static</span> <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> charset = (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)~0;
00136     CHARSETINFO csInfo;
00137 
00138     <span class="keywordflow">if</span> (charset != (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)~0) {
00139         <span class="keywordflow">return</span> charset;
00140     }
00141 
00142     <span class="comment">// Sundown: In the TCI_SRCCODEPAGE case, the GetACP() return value is zero-extended.</span>
00143     <span class="keywordflow">if</span> (!TranslateCharsetInfo((DWORD*)UIntToPtr( GetACP() ), &amp;csInfo, TCI_SRCCODEPAGE)) {
00144         <span class="keywordflow">return</span> DEFAULT_CHARSET;
00145     }
00146     charset = csInfo.ciCharset;
00147     UserAssert(charset != (UINT)~0);
00148     <span class="keywordflow">return</span> csInfo.ciCharset;
00149 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a603" doxytag="usercli.h::GetActiveKeyboardName" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID GetActiveKeyboardName           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">LPWSTR&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>lpszName</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l03729">3729</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d4/d7/client_8c-source.html#l04516">CheckValidLayoutName()</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00591">IS_IME_ENABLED</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d6/d9/obclose_8c-source.html#l00037">NtClose()</a>, <a class="el" href="../../d8/d6/ntapi_8c-source.html#l00166">NtCreateKey()</a>, <a class="el" href="../../d8/d6/ntapi_8c-source.html#l00504">NtDeleteValueKey()</a>, <a class="el" href="../../d8/d6/ntapi_8c-source.html#l01870">NtOpenKey()</a>, <a class="el" href="../../d8/d6/ntapi_8c-source.html#l02187">NtQueryValueKey()</a>, <a class="el" href="../../d8/d6/ntapi_8c-source.html#l02672">NtSetValueKey()</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d3/d6/string_8c-source.html#l00148">RtlInitUnicodeString()</a>, <a class="el" href="../../d5/d6/rtl_2regutil_8c-source.html#l01564">RtlOpenCurrentUser()</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, <a class="el" href="../../d2/d7/hal_8h.html#a212">VOID()</a>, and <a class="el" href="../../d2/d4/w32_2ntuser_2rtl_2random_8c-source.html#l00146">wcsncpycch()</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/client_8c-source.html#l02154">CommonCreateWindowStation()</a>, and <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00049">UpdatePerUserSystemParameters()</a>.
<p>
<pre class="fragment"><div>03731 {
03732     LPTSTR szKbdActive = TEXT(<span class="stringliteral">"Active"</span>);
03733     LPTSTR szKbdLayout = TEXT(<span class="stringliteral">"Keyboard Layout"</span>);
03734     LPTSTR szKbdLayoutPreload = TEXT(<span class="stringliteral">"Keyboard Layout\\Preload"</span>);
03735     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> rc;
03736     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> cbSize;
03737     HANDLE UserKeyHandle, hKey, hKeyPreload;
03738     OBJECT_ATTRIBUTES ObjA;
03739     UNICODE_STRING UnicodeString;
03740     ULONG CreateDisposition;
03741     <span class="keyword">struct </span>{
03742         KEY_VALUE_PARTIAL_INFORMATION KeyInfo;
03743         WCHAR KeyLayoutId[KL_NAMELENGTH];
03744     } KeyValueId;
03745 
03746     <span class="comment">/*</span>
03747 <span class="comment">     * Load initial keyboard name ( HKEY_CURRENT_USER\Keyboard Layout\Preload\1 )</span>
03748 <span class="comment">     */</span>
03749     rc = <a class="code" href="../../d4/d7/rtl_2regutil_8c.html#a27">RtlOpenCurrentUser</a>( MAXIMUM_ALLOWED, &amp;UserKeyHandle );
03750     <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>( rc ))
03751     {
03752         RIPMSG1( RIP_WARNING, <span class="stringliteral">"GetActiveKeyboardName - Could NOT open HKEY_CURRENT_USER (%lx).\n"</span>, rc );
03753         wcscpy( lpszName, L<span class="stringliteral">"00000409"</span> );
03754         <span class="keywordflow">return</span>;
03755     }
03756 
03757     <a class="code" href="../../d2/d7/string_8c.html#a7">RtlInitUnicodeString</a>( &amp;UnicodeString, szKbdLayoutPreload );
03758     InitializeObjectAttributes( &amp;ObjA,
03759                                 &amp;UnicodeString,
03760                                 OBJ_CASE_INSENSITIVE,
03761                                 UserKeyHandle,
03762                                 NULL );
03763     rc = <a class="code" href="../../d7/d7/ntapi_8c.html#a23">NtOpenKey</a>( &amp;hKey,
03764                     KEY_ALL_ACCESS,
03765                     &amp;ObjA );
03766     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>( rc ))
03767     {
03768         <span class="comment">/*</span>
03769 <span class="comment">         *  Query the value from the registry.</span>
03770 <span class="comment">         */</span>
03771         <a class="code" href="../../d2/d7/string_8c.html#a7">RtlInitUnicodeString</a>( &amp;UnicodeString, L<span class="stringliteral">"1"</span> );
03772 
03773         rc = <a class="code" href="../../d7/d7/ntapi_8c.html#a25">NtQueryValueKey</a>( hKey,
03774                               &amp;UnicodeString,
03775                               KeyValuePartialInformation,
03776                               &amp;KeyValueId,
03777                               <span class="keyword">sizeof</span>(KeyValueId),
03778                               &amp;cbSize );
03779 
03780         <span class="keywordflow">if</span> ( rc == STATUS_BUFFER_OVERFLOW ) {
03781             RIPMSG0(RIP_WARNING, <span class="stringliteral">"GetActiveKeyboardName - Buffer overflow."</span>);
03782             rc = STATUS_SUCCESS;
03783         }
03784         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>( rc )) {
03785             <a class="code" href="../../d1/d5/w32_2ntuser_2rtl_2random_8c.html#a3">wcsncpycch</a>( lpszName, (LPWSTR)KeyValueId.KeyInfo.Data, KL_NAMELENGTH - 1 );
03786             lpszName[KL_NAMELENGTH - 1] = <a class="code" href="../../d2/d0/aw_8h.html#a3">L</a><span class="charliteral">'\0'</span>;
03787         } <span class="keywordflow">else</span> {
03788             <span class="comment">/*</span>
03789 <span class="comment">             * Error reading value...use default</span>
03790 <span class="comment">             */</span>
03791             wcscpy( lpszName, L<span class="stringliteral">"00000409"</span> );
03792         }
03793 
03794         <a class="code" href="../../d5/d0/obclose_8c.html#a1">NtClose</a>( hKey );
03795         <a class="code" href="../../d5/d0/obclose_8c.html#a1">NtClose</a>( UserKeyHandle );
03796         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a126">IS_IME_ENABLED</a>()) {
03797             <a class="code" href="../../d3/d8/client_8c.html#a31">CheckValidLayoutName</a>( lpszName );
03798         }
03799         <span class="keywordflow">return</span>;
03800     }
03801 
03802     <span class="comment">/*</span>
03803 <span class="comment">     * NOTE: The code below is only executed the first time a user logs</span>
03804 <span class="comment">     *       on after an upgrade from NT3.x to NT4.0.</span>
03805 <span class="comment">     */</span>
03806     <span class="comment">/*</span>
03807 <span class="comment">     * The Preload key does not exist in the registry.  Try reading the</span>
03808 <span class="comment">     * old registry entry "Keyboard Layout\Active".  If it exists, we</span>
03809 <span class="comment">     * convert it to the new style Preload key.</span>
03810 <span class="comment">     */</span>
03811     <a class="code" href="../../d2/d7/string_8c.html#a7">RtlInitUnicodeString</a>( &amp;UnicodeString, szKbdLayout );
03812     InitializeObjectAttributes( &amp;ObjA,
03813                                 &amp;UnicodeString,
03814                                 OBJ_CASE_INSENSITIVE,
03815                                 UserKeyHandle,
03816                                 NULL );
03817     rc = <a class="code" href="../../d7/d7/ntapi_8c.html#a23">NtOpenKey</a>( &amp;hKey,
03818                     KEY_ALL_ACCESS,
03819                     &amp;ObjA );
03820 
03821     <a class="code" href="../../d5/d0/obclose_8c.html#a1">NtClose</a>( UserKeyHandle );
03822 
03823     <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>( rc ))
03824     {
03825         RIPMSG1( RIP_WARNING, <span class="stringliteral">"GetActiveKeyboardName - Could not determine active keyboard layout (%lx).\n"</span>, rc  );
03826         wcscpy( lpszName, L<span class="stringliteral">"00000409"</span> );
03827         <span class="keywordflow">return</span>;
03828     }
03829 
03830     <span class="comment">/*</span>
03831 <span class="comment">     *  Query the value from the registry.</span>
03832 <span class="comment">     */</span>
03833     <a class="code" href="../../d2/d7/string_8c.html#a7">RtlInitUnicodeString</a>( &amp;UnicodeString, szKbdActive );
03834 
03835     rc = <a class="code" href="../../d7/d7/ntapi_8c.html#a25">NtQueryValueKey</a>( hKey,
03836                           &amp;UnicodeString,
03837                           KeyValuePartialInformation,
03838                           &amp;KeyValueId,
03839                           <span class="keyword">sizeof</span>(KeyValueId),
03840                           &amp;cbSize );
03841 
03842     <span class="keywordflow">if</span> ( rc == STATUS_BUFFER_OVERFLOW ) {
03843         RIPMSG0(RIP_WARNING, <span class="stringliteral">"GetActiveKeyboardName - Buffer overflow."</span>);
03844         rc = STATUS_SUCCESS;
03845     }
03846     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>( rc )) {
03847         <a class="code" href="../../d1/d5/w32_2ntuser_2rtl_2random_8c.html#a3">wcsncpycch</a>( lpszName, (LPWSTR)KeyValueId.KeyInfo.Data, KL_NAMELENGTH - 1 );
03848         lpszName[KL_NAMELENGTH - 1] = <a class="code" href="../../d2/d0/aw_8h.html#a3">L</a><span class="charliteral">'\0'</span>;
03849     } <span class="keywordflow">else</span> {
03850         <span class="comment">/*</span>
03851 <span class="comment">         * Error reading value...use default</span>
03852 <span class="comment">         */</span>
03853         RIPMSG1( RIP_WARNING, <span class="stringliteral">"GetActiveKeyboardName - Could not query active keyboard layout (%lx).\n"</span>, rc );
03854         wcscpy( lpszName, L<span class="stringliteral">"00000409"</span> );
03855         <a class="code" href="../../d5/d0/obclose_8c.html#a1">NtClose</a>( hKey );
03856         <span class="keywordflow">return</span>;
03857     }
03858 
03859     <span class="comment">/*</span>
03860 <span class="comment">     * if 'Active' keyboard layout is for Japanese/Korean layout. just put</span>
03861 <span class="comment">     * IME prefix, because user prefer to have keyboard layout with IME as</span>
03862 <span class="comment">     * default.</span>
03863 <span class="comment">     */</span>
03864     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a126">IS_IME_ENABLED</a>()) {
03865         <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> wLanguageId = (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)wcstoul(lpszName, NULL, 16);
03866 
03867         <span class="comment">/*</span>
03868 <span class="comment">         * Default keyboard layout values.</span>
03869 <span class="comment">         *</span>
03870 <span class="comment">         * [LATER, if needed]</span>
03871 <span class="comment">         *</span>
03872 <span class="comment">         * The hard-codeed default value might be wanted</span>
03873 <span class="comment">         * come from registry or somewhere...</span>
03874 <span class="comment">         */</span>
03875         CONST LPWSTR lpszJapaneseDefaultLayout = <a class="code" href="../../d2/d0/aw_8h.html#a3">L</a><span class="stringliteral">"E0010411"</span>;
03876         CONST LPWSTR lpszKoreanDefaultLayout   = <a class="code" href="../../d2/d0/aw_8h.html#a3">L</a><span class="stringliteral">"E0010412"</span>;
03877 
03878         <span class="comment">/*</span>
03879 <span class="comment">         * Need to mask off hi-word to look up locale ID, because</span>
03880 <span class="comment">         * NEC PC-9800 Series version of Windows NT 3.5 contains</span>
03881 <span class="comment">         * bogus value in hi-word.</span>
03882 <span class="comment">         */</span>
03883         wLanguageId &amp;= 0x0000FFFF;
03884 
03885         <span class="keywordflow">if</span> (PRIMARYLANGID(wLanguageId) == LANG_JAPANESE) {
03886 
03887             <span class="comment">/*</span>
03888 <span class="comment">             * Set Japanese default layout Id.</span>
03889 <span class="comment">             */</span>
03890             wcscpy(lpszName,lpszJapaneseDefaultLayout);
03891 
03892         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (PRIMARYLANGID(wLanguageId) == LANG_KOREAN) {
03893 
03894             <span class="comment">/*</span>
03895 <span class="comment">             * Set Korean default layout Id.</span>
03896 <span class="comment">             */</span>
03897             wcscpy(lpszName,lpszKoreanDefaultLayout);
03898         }
03899     }
03900 
03901     <span class="comment">/*</span>
03902 <span class="comment">     * We have the Active value.  Now create the Preload key.</span>
03903 <span class="comment">     */</span>
03904     <a class="code" href="../../d2/d7/string_8c.html#a7">RtlInitUnicodeString</a>( &amp;UnicodeString, L<span class="stringliteral">"Preload"</span> );
03905     InitializeObjectAttributes( &amp;ObjA,
03906                                 &amp;UnicodeString,
03907                                 OBJ_CASE_INSENSITIVE,
03908                                 hKey,
03909                                 NULL );
03910     rc = <a class="code" href="../../d7/d7/ntapi_8c.html#a14">NtCreateKey</a>( &amp;hKeyPreload,
03911                       STANDARD_RIGHTS_WRITE |
03912                         KEY_QUERY_VALUE |
03913                         KEY_ENUMERATE_SUB_KEYS |
03914                         KEY_SET_VALUE |
03915                         KEY_CREATE_SUB_KEY,
03916                       &amp;ObjA,
03917                       0,
03918                       NULL,
03919                       0,
03920                       &amp;CreateDisposition );
03921 
03922     <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>( rc ))
03923     {
03924         RIPMSG1( RIP_WARNING, <span class="stringliteral">"GetActiveKeyboardName - Could NOT create Preload key (%lx).\n"</span>, rc );
03925         <a class="code" href="../../d5/d0/obclose_8c.html#a1">NtClose</a>( hKey );
03926         <span class="keywordflow">return</span>;
03927     }
03928 
03929     <span class="comment">/*</span>
03930 <span class="comment">     * Set the new value entry.</span>
03931 <span class="comment">     */</span>
03932     <a class="code" href="../../d2/d7/string_8c.html#a7">RtlInitUnicodeString</a>( &amp;UnicodeString, L<span class="stringliteral">"1"</span> );
03933     rc = <a class="code" href="../../d7/d7/ntapi_8c.html#a29">NtSetValueKey</a>( hKeyPreload,
03934                         &amp;UnicodeString,
03935                         0,
03936                         REG_SZ,
03937                         lpszName,
03938                         (wcslen(lpszName)+1) * <span class="keyword">sizeof</span>(WCHAR)
03939                       );
03940 
03941     <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>( rc ))
03942     {
03943         RIPMSG1( RIP_WARNING, <span class="stringliteral">"GetActiveKeyboardName - Could NOT create value entry 1 for Preload key (%lx).\n"</span>, rc );
03944         <a class="code" href="../../d5/d0/obclose_8c.html#a1">NtClose</a>( hKey );
03945         <a class="code" href="../../d5/d0/obclose_8c.html#a1">NtClose</a>( hKeyPreload );
03946         <span class="keywordflow">return</span>;
03947     }
03948 
03949     <span class="comment">/*</span>
03950 <span class="comment">     * Success: attempt to delete the Active value key.</span>
03951 <span class="comment">     */</span>
03952     <a class="code" href="../../d2/d7/string_8c.html#a7">RtlInitUnicodeString</a>( &amp;UnicodeString, szKbdActive );
03953     rc = <a class="code" href="../../d7/d7/ntapi_8c.html#a16">NtDeleteValueKey</a>( hKey, &amp;UnicodeString );
03954 
03955     <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>( rc ))
03956     {
03957         RIPMSG1( RIP_WARNING, <span class="stringliteral">"GetActiveKeyboardName - Could NOT delete value key 'Active'.\n"</span>, rc );
03958     }
03959     <a class="code" href="../../d5/d0/obclose_8c.html#a1">NtClose</a>( hKey );
03960     <a class="code" href="../../d5/d0/obclose_8c.html#a1">NtClose</a>( hKeyPreload );
03961 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a489" doxytag="usercli.h::GetBlkEndLine" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int GetBlkEndLine           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL FAR *&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a762" doxytag="usercli.h::GetDialogMonitor" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d2/structtagMONITOR.html">PMONITOR</a> GetDialogMonitor           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwndOwner</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwFlags</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d8/dlgbegin_8c-source.html#l00490">490</a> of file <a class="el" href="../../d1/d8/dlgbegin_8c-source.html">dlgbegin.c</a>.
<p>
References <a class="el" href="../../d0/d1/mmrtl_8c-source.html#l00426">_MonitorFromWindow()</a>, <a class="el" href="../../d4/d7/propapi_8h-source.html#l00043">dwFlags</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00787">FNID_DESKTOP</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00843">GETFNID</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02604">GetPrimaryMonitor()</a>, <a class="el" href="../../d4/d7/winmgrc_8c-source.html#l00251">GetWindowThreadProcessId()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05163">NtUserGetForegroundWindow()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00215">REBASEPWND</a>, and <a class="el" href="../../d5/d9/immcli_8h-source.html#l00120">ValidateHwnd</a>.
<p>
Referenced by <a class="el" href="../../d1/d8/dlgbegin_8c-source.html#l00553">InternalCreateDialog()</a>, and <a class="el" href="../../d7/d3/msgbox_8c-source.html#l00730">SoftModalMessageBox()</a>.
<p>
<pre class="fragment"><div>00491 {
00492     <a class="code" href="../../d0/d2/structtagMONITOR.html">PMONITOR</a>    pMonitor;
00493     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a>        pwnd;
00494     HWND        hwndForeground;
00495     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>       pid;
00496 
00497     UserAssert(dwFlags == MONITOR_DEFAULTTONULL ||
00498                dwFlags == MONITOR_DEFAULTTOPRIMARY);
00499 
00500     pMonitor = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00501     <span class="keywordflow">if</span> (hwndOwner) {
00502         pwnd = <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(hwndOwner);
00503         <span class="keywordflow">if</span> (pwnd &amp;&amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a232">GETFNID</a>(pwnd) != <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a196">FNID_DESKTOP</a>) {
00504             pMonitor = <a class="code" href="../../d9/d1/mmrtl_8c.html#a8">_MonitorFromWindow</a>(pwnd, MONITOR_DEFAULTTOPRIMARY);
00505         }
00506     } <span class="keywordflow">else</span> {
00507         <span class="comment">/*</span>
00508 <span class="comment">         * HACK!  They passed in no owner and are creating a top level</span>
00509 <span class="comment">         * dialog window.  Does this process own the foreground window?</span>
00510 <span class="comment">         * If so, pin to that window's monitor.  That way 16-bit apps</span>
00511 <span class="comment">         * will work mostly as expected, and old multithreaded dudes just</span>
00512 <span class="comment">         * might too.  Especially the shell, for whom many system UI pieces</span>
00513 <span class="comment">         * pop up random dialogs inside of API calls.</span>
00514 <span class="comment">         */</span>
00515 
00516         hwndForeground = <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a199">NtUserGetForegroundWindow</a>();
00517         <span class="keywordflow">if</span> (hwndForeground) {
00518             <a class="code" href="../../d3/d8/winmgrc_8c.html#a18">GetWindowThreadProcessId</a>(hwndForeground, &amp;pid);
00519             <span class="keywordflow">if</span> (pid == HandleToUlong(NtCurrentTeb()-&gt;ClientId.UniqueProcess)) {
00520                 pwnd = <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(hwndForeground);
00521                 <span class="keywordflow">if</span> (pwnd) {
00522                     pMonitor = <a class="code" href="../../d9/d1/mmrtl_8c.html#a8">_MonitorFromWindow</a>(pwnd, MONITOR_DEFAULTTOPRIMARY);
00523                 }
00524             }
00525         }
00526     }
00527 
00528     <span class="keywordflow">if</span> (!pMonitor &amp;&amp; <a class="code" href="../../d3/d8/propapi_8h.html#a34">dwFlags</a> == MONITOR_DEFAULTTOPRIMARY) {
00529         pMonitor = <a class="code" href="../../d6/d0/usercli_8h.html#a793">GetPrimaryMonitor</a>();
00530     }
00531 
00532     <span class="keywordflow">return</span> pMonitor;
00533 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a792" doxytag="usercli.h::GetDispInfo" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> __inline <a class="el" href="../../d9/d3/structtagDISPLAYINFO.html">PDISPLAYINFO</a> GetDispInfo           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02598">2598</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d0/d1/mmrtl_8c-source.html#l00056">_MonitorFromPoint()</a>, and <a class="el" href="../../d0/d1/mmrtl_8c-source.html#l00221">_MonitorFromRect()</a>.
<p>
<pre class="fragment"><div>02716 {
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a763" doxytag="usercli.h::GetEditDS" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HANDLE GetEditDS           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">VOID&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a654" doxytag="usercli.h::GetIcoCurBpp" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> GetIcoCurBpp           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">UINT&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>LR_flags</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d8/clres_8c-source.html#l04096">4096</a> of file <a class="el" href="../../d5/d8/clres_8c-source.html">clres.c</a>.
<p>
References <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01071">PUSIF_PALETTEDISPLAY</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00202">SYSMET</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01076">TEST_PUSIF</a>.
<p>
Referenced by <a class="el" href="../../d5/d8/clres_8c-source.html#l04377">CopyBmp()</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l04493">CopyIcoCur()</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l02657">LoadIcoCur()</a>, and <a class="el" href="../../d5/d8/clres_8c-source.html#l04759">RtlGetIdFromDirectory()</a>.
<p>
<pre class="fragment"><div>04098 {
04099     <span class="keywordflow">if</span> (lrFlags &amp; LR_MONOCHROME) {
04100 
04101 <span class="preprocessor">#if DBG</span>
04102 <span class="preprocessor"></span>        <span class="keywordflow">if</span> (lrFlags &amp; LR_VGACOLOR) {
04103             RIPMSG0(RIP_WARNING, <span class="stringliteral">"lrFlags has both MONOCHROME and VGACOLOR; assuming MONOCHROME"</span>);
04104         }
04105 <span class="preprocessor">#endif</span>
04106 <span class="preprocessor"></span>        <span class="keywordflow">return</span> 1;
04107 
04108     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (
04109             <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a368">TEST_PUSIF</a>(PUSIF_PALETTEDISPLAY) ||
04110             (lrFlags &amp; LR_VGACOLOR) ||
04111             !<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(SAMEDISPLAYFORMAT)) {
04112 
04113         <span class="keywordflow">return</span> 4;
04114     } <span class="keywordflow">else</span> {
04115         <span class="keywordflow">return</span> 0;
04116     }
04117 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a653" doxytag="usercli.h::GetIcoCurHeight" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> GetIcoCurHeight           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cyOrg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fIcon</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>LR_flags</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cyDesired</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d8/clres_8c-source.html#l04074">4074</a> of file <a class="el" href="../../d5/d8/clres_8c-source.html">clres.c</a>.
<p>
References <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00202">SYSMET</a>.
<p>
Referenced by <a class="el" href="../../d5/d8/clres_8c-source.html#l04493">CopyIcoCur()</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l01627">CreateIconFromResourceEx()</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l02657">LoadIcoCur()</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l04759">RtlGetIdFromDirectory()</a>, and <a class="el" href="../../d5/d8/clres_8c-source.html#l04200">WowServerLoadCreateCursorIcon()</a>.
<p>
<pre class="fragment"><div>04079 {
04080     <span class="keywordflow">if</span> (cyOrg) {
04081         <span class="keywordflow">return</span> cyOrg;
04082     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (lrFlags &amp; LR_DEFAULTSIZE) {
04083         <span class="keywordflow">return</span> (fIcon ? <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CYICON) : <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CYCURSOR));
04084     } <span class="keywordflow">else</span> {
04085         <span class="keywordflow">return</span> cyDes;
04086     }
04087 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a652" doxytag="usercli.h::GetIcoCurWidth" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> GetIcoCurWidth           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cxOrg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fIcon</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>LR_flags</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cxDesired</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d8/clres_8c-source.html#l04052">4052</a> of file <a class="el" href="../../d5/d8/clres_8c-source.html">clres.c</a>.
<p>
References <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00202">SYSMET</a>.
<p>
Referenced by <a class="el" href="../../d5/d8/clres_8c-source.html#l04493">CopyIcoCur()</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l01627">CreateIconFromResourceEx()</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l02657">LoadIcoCur()</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l04759">RtlGetIdFromDirectory()</a>, and <a class="el" href="../../d5/d8/clres_8c-source.html#l04200">WowServerLoadCreateCursorIcon()</a>.
<p>
<pre class="fragment"><div>04057 {
04058     <span class="keywordflow">if</span> (cxOrg) {
04059         <span class="keywordflow">return</span> cxOrg;
04060     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (lrFlags &amp; LR_DEFAULTSIZE) {
04061         <span class="keywordflow">return</span> (fIcon ? <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CXICON) : <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CXCURSOR));
04062     } <span class="keywordflow">else</span> {
04063         <span class="keywordflow">return</span> cxDes;
04064     }
04065 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a787" doxytag="usercli.h::GetImmFileName" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID GetImmFileName           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">PWSTR&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d3/d0/fareast_8c-source.html#l00213">213</a> of file <a class="el" href="../../d3/d0/fareast_8c-source.html">fareast.c</a>.
<p>
References <a class="el" href="../../d3/d0/fareast_8c-source.html#l00209">IMMMODULENAME</a>, <a class="el" href="../../d3/d0/fareast_8c-source.html#l00211">IMMMODULENAMELEN</a>, <a class="el" href="../../d4/d8/arcinst_8c-source.html#l00065">MAX_PATH</a>, <a class="el" href="../../d3/d0/fareast_8c-source.html#l00210">PATHDLM</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, and <a class="el" href="../../d2/d7/hal_8h.html#a212">VOID()</a>.
<p>
Referenced by <a class="el" href="../../d3/d0/fareast_8c-source.html#l00238">_InitializeImmEntryTable()</a>, <a class="el" href="../../d3/d0/fareast_8c-source.html#l00344">User32InitializeImmEntryTable()</a>, and <a class="el" href="../../d7/d7/clinit_8c-source.html#l00059">UserClientDllInitialize()</a>.
<p>
<pre class="fragment"><div>00214 {
00215     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> i = GetSystemDirectoryW(wszImmFile, MAX_PATH);
00216     <span class="keywordflow">if</span> (i &gt; 0 &amp;&amp; i &lt; <a class="code" href="../../d3/d9/arcinst_8c.html#a6">MAX_PATH</a> - <a class="code" href="../../d2/d1/fareast_8c.html#a3">IMMMODULENAMELEN</a>) {
00217         wszImmFile += i;
00218         <span class="keywordflow">if</span> (wszImmFile[-1] != <a class="code" href="../../d2/d1/fareast_8c.html#a2">PATHDLM</a>) {
00219             *wszImmFile++ = <a class="code" href="../../d2/d1/fareast_8c.html#a2">PATHDLM</a>;
00220         }
00221     }
00222     wcscpy(wszImmFile, IMMMODULENAME);
00223 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a715" doxytag="usercli.h::GetLpszItem" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LPWSTR GetLpszItem           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d0/lb1_8c-source.html#l00842">842</a> of file <a class="el" href="../../d7/d0/lb1_8c-source.html">lb1.c</a>.
<p>
References <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01948">tagLBIV::cMac</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01952">tagLBIV::hStrings</a>, <a class="el" href="../../d6/d0/usercli_8h.html#a368">lpLBItem</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00845">tagLBItem::offsz</a>, <a class="el" href="../../d0/d7/halvprnt_8c-source.html#l00031">PBYTE</a>, and <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01951">tagLBIV::rgpch</a>.
<p>
Referenced by <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l00214">LBGetText()</a>, and <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00354">xxxLBDrawLBItem()</a>.
<p>
<pre class="fragment"><div>00845 {
00846     LONG offsz;
00847     <a class="code" href="../../d6/d9/structtagLBItem.html">lpLBItem</a> plbi;
00848 
00849     <span class="keywordflow">if</span> (sItem &lt; 0 || sItem &gt;= pLBIV-&gt;cMac) {
00850         RIPERR1(ERROR_INVALID_PARAMETER,
00851                 RIP_WARNING,
00852                 <span class="stringliteral">"Invalid parameter \"sItem\" (%ld) to GetLpszItem"</span>,
00853                 sItem);
00854 
00855         <span class="keywordflow">return</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00856     }
00857 
00858     <span class="comment">/*</span>
00859 <span class="comment">     * get pointer to item index array</span>
00860 <span class="comment">     * NOTE: NOT OWNERDRAW</span>
00861 <span class="comment">     */</span>
00862     plbi = (<a class="code" href="../../d6/d9/structtagLBItem.html">lpLBItem</a>)(pLBIV-&gt;rgpch);
00863     offsz = plbi[sItem].<a class="code" href="../../d6/d9/structtagLBItem.html#o0">offsz</a>;
00864     <span class="keywordflow">return</span> (LPWSTR)((<a class="code" href="../../d9/d7/halvprnt_8c.html#a1">PBYTE</a>)(pLBIV-&gt;hStrings) + offsz);
00865 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a767" doxytag="usercli.h::GetMenuItemInfoInternalW" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL GetMenuItemInfoInternalW           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HMENU&nbsp;</td>
          <td class="mdname" nowrap> <em>hMenu</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>uID</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fByPosition</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPMENUITEMINFOW&nbsp;</td>
          <td class="mdname" nowrap> <em>lpmii</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00417">SwitchWindowsMenus()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a755" doxytag="usercli.h::GetParentDialog" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d6/d9/structtagWND.html">PWND</a> GetParentDialog           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pwndDialog</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l00043">43</a> of file <a class="el" href="../../d4/d8/dlgmgr_8c-source.html">dlgmgr.c</a>.
<p>
References <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02488">DFCONTROL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00215">REBASEPWND</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02377">WEFCONTROLPARENT</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02421">WFCHILD</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02282">WFDIALOGWINDOW</a>.
<p>
Referenced by <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l00460">DefDlgProcWorker()</a>, <a class="el" href="../../d6/d8/dlgmgr2_8c-source.html#l00230">IsDialogMessageA()</a>, and <a class="el" href="../../d6/d8/dlgmgr2_8c-source.html#l00317">IsDialogMessageW()</a>.
<p>
<pre class="fragment"><div>00044 {
00045     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a>    pwndParent;
00046 
00047     pwndParent = pwndDialog;
00048 
00049     <span class="comment">//</span>
00050     <span class="comment">// Walk up the parent chain.  We're looking for the top-most dialog</span>
00051     <span class="comment">// window.  Most cases, the window is a top level one.  But in case of</span>
00052     <span class="comment">// backup app, the window will be a child of some other window.</span>
00053     <span class="comment">//</span>
00054     <span class="keywordflow">for</span> (; pwndDialog; pwndDialog = <a class="code" href="../../d6/d0/usercli_8h.html#a27">REBASEPWND</a>(pwndDialog, spwndParent))
00055     {
00056         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwndDialog, WFDIALOGWINDOW))
00057         {
00058             <span class="comment">//</span>
00059             <span class="comment">// For old guys:  If not DS_RECURSE, then stop here.</span>
00060             <span class="comment">// that way old apps which try to do the nested dialog</span>
00061             <span class="comment">// stuff in their old limited way don't die.</span>
00062             <span class="comment">//</span>
00063             <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwndDialog, WEFCONTROLPARENT))
00064                 pwndParent = pwndDialog;
00065             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwndDialog, DFCONTROL))
00066                 <span class="keywordflow">break</span>;
00067         }
00068 
00069         <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwndDialog, WFCHILD))
00070             <span class="keywordflow">break</span>;
00071     }
00072 
00073     <span class="keywordflow">return</span>(pwndParent);
00074 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a793" doxytag="usercli.h::GetPrimaryMonitor" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> __inline <a class="el" href="../../d0/d2/structtagMONITOR.html">PMONITOR</a> GetPrimaryMonitor           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02604">2604</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d8/d0/immstruc_8h.html#a42">IMEINFOEXCLASS</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">LPVOID</a>, and <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>.
<p>
Referenced by <a class="el" href="../../d0/d1/mmrtl_8c-source.html#l00056">_MonitorFromPoint()</a>, <a class="el" href="../../d0/d1/mmrtl_8c-source.html#l00221">_MonitorFromRect()</a>, <a class="el" href="../../d3/d7/swp_8c-source.html#l05919">FixBogusSWP()</a>, <a class="el" href="../../d1/d8/dlgbegin_8c-source.html#l00490">GetDialogMonitor()</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l01824">GetMonitorInfo()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00833">GetParentArrangeRect()</a>, <a class="el" href="../../d3/d7/rtl_2winmgr_8c-source.html#l00417">GetRealClientRect()</a>, <a class="el" href="../../d0/d6/kernel_2server_8c-source.html#l01738">InitLoadResources()</a>, <a class="el" href="../../d2/d2/tmswitch_8c-source.html#l01120">InitSwitchWndInfo()</a>, <a class="el" href="../../d1/d8/dlgbegin_8c-source.html#l00553">InternalCreateDialog()</a>, <a class="el" href="../../d3/d7/swp_8c-source.html#l05895">IsRectBogus()</a>, <a class="el" href="../../d5/d4/rare_8c-source.html#l00103">NormalizeRect()</a>, <a class="el" href="../../d7/d7/ntinput_8c-source.html#l03858">RawInputThread()</a>, <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l01363">RepositionRect()</a>, <a class="el" href="../../d5/d4/rare_8c-source.html#l00336">SetDesktopMetrics()</a>, <a class="el" href="../../d3/d7/swp_8c-source.html#l05305">xxxCheckFullScreen()</a>, <a class="el" href="../../d5/d7/createw_8c-source.html#l00033">xxxCreateWindowEx()</a>, <a class="el" href="../../d2/d2/dtbitmap_8c-source.html#l00880">xxxExpandBitmap()</a>, <a class="el" href="../../d5/d8/minmax_8c-source.html#l00032">xxxInitSendValidateMinMaxInfo()</a>, <a class="el" href="../../d2/d2/dtbitmap_8c-source.html#l01615">xxxInternalPaintDesktop()</a>, <a class="el" href="../../d9/d2/movesize_8c-source.html#l01053">xxxMoveSize()</a>, <a class="el" href="../../d9/d2/movesize_8c-source.html#l00437">xxxMS_TrackMove()</a>, <a class="el" href="../../d9/d6/winloop2_8c-source.html#l00100">xxxSetTrayWindow()</a>, <a class="el" href="../../d2/d2/tmswitch_8c-source.html#l01476">xxxShowSwitchWindow()</a>, and <a class="el" href="../../d5/d4/rare_8c-source.html#l01497">xxxSystemParametersInfo()</a>.
<p>
<pre class="fragment"><div>02716 {
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a476" doxytag="usercli.h::HanjaKeyHandler" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL HanjaKeyHandler           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>ped</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01683">1683</a> of file <a class="el" href="../../d6/d3/edecrare_8c-source.html">edecrare.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00661">tagED::cbChar</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00557">tagED::cch</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00052">ECLock()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00086">ECUnlock()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00640">tagED::fAnsi</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00655">tagED::fKorea</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02530">fpImmEscapeA</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02531">fpImmEscapeW</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02532">fpImmGetContext</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00632">tagED::fReadOnly</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00652">tagED::fReplaceCompChr</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00584">tagED::hwnd</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00626">ICH</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00564">tagED::ichCaret</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00563">tagED::ichMaxSel</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00561">tagED::ichMinSel</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01564">NtUserMessageBeep</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01124">THREAD_HKL</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d2/d4/editml_8c-source.html#l02028">MLKeyDown()</a>, and <a class="el" href="../../d4/d4/editsl_8c-source.html#l01529">SLKeyDown()</a>.
<p>
<pre class="fragment"><div>01684 {
01685     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> changeSelection = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01686 
01687     <span class="keywordflow">if</span> (ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o56">fKorea</a> &amp;&amp; !ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o39">fReadOnly</a>) {
01688         <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a> oldCaret = ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o7">ichCaret</a>;
01689 
01690         <span class="keywordflow">if</span> (ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o53">fReplaceCompChr</a>)
01691                 <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01692 
01693         <span class="keywordflow">if</span> (ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o5">ichMinSel</a> &lt; ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o6">ichMaxSel</a>)
01694             ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o7">ichCaret</a> = ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o5">ichMinSel</a>;
01695 
01696         <span class="keywordflow">if</span> (!ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o3">cch</a> || ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o3">cch</a> == ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o7">ichCaret</a>) {
01697             ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o7">ichCaret</a> = oldCaret;
01698             <a class="code" href="../../d6/d0/usercli_8h.html#a219">NtUserMessageBeep</a>(MB_ICONEXCLAMATION);
01699             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01700         }
01701 
01702         <span class="keywordflow">if</span> (ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o42">fAnsi</a>) {
01703             <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a305">fpImmEscapeA</a>(<a class="code" href="../../d6/d0/usercli_8h.html#a151">THREAD_HKL</a>(), <a class="code" href="../../d6/d0/usercli_8h.html#a307">fpImmGetContext</a>(ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o14">hwnd</a>),
01704                 IME_ESC_HANJA_MODE, (<a class="code" href="../../d8/d4/editec_8c.html#a12">ECLock</a>(ped) + ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o7">ichCaret</a> * ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o60">cbChar</a>))) {
01705                 changeSelection = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01706             }
01707             <span class="keywordflow">else</span>
01708                 ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o7">ichCaret</a> = oldCaret;
01709             <a class="code" href="../../d6/d0/usercli_8h.html#a434">ECUnlock</a>(ped);
01710         }
01711         <span class="keywordflow">else</span> {
01712             <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a306">fpImmEscapeW</a>(<a class="code" href="../../d6/d0/usercli_8h.html#a151">THREAD_HKL</a>(), <a class="code" href="../../d6/d0/usercli_8h.html#a307">fpImmGetContext</a>(ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o14">hwnd</a>),
01713                 IME_ESC_HANJA_MODE, (<a class="code" href="../../d8/d4/editec_8c.html#a12">ECLock</a>(ped) + ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o7">ichCaret</a> * ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o60">cbChar</a>))) {
01714                 changeSelection = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01715             }
01716             <span class="keywordflow">else</span>
01717                 ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o7">ichCaret</a> = oldCaret;
01718             <a class="code" href="../../d6/d0/usercli_8h.html#a434">ECUnlock</a>(ped);
01719         }
01720     }
01721     <span class="keywordflow">return</span> changeSelection;
01722 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a544" doxytag="usercli.h::HelpMenu" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> UINT HelpMenu           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PPOINT&nbsp;</td>
          <td class="mdname" nowrap> <em>ppt</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d9/client_2help_8c-source.html#l00348">348</a> of file <a class="el" href="../../d2/d9/client_2help_8c-source.html">client/help.c</a>.
<p>
References <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00350">GetSubMenu()</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00053">hmodUser</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02663">ID_HELPMENU</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00025">INT</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04100">NtUserDestroyMenu()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d8/d6/menuc_8c-source.html#l00246">TrackPopupMenu()</a>, and <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>.
<p>
Referenced by <a class="el" href="../../d2/d9/client_2help_8c-source.html#l00447">WinHelpA()</a>.
<p>
<pre class="fragment"><div>00351 {
00352     <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a>     cmd;
00353     HMENU   hmenu = LoadMenu( hmodUser, MAKEINTRESOURCE(ID_HELPMENU));
00354 
00355     <span class="keywordflow">if</span> (hmenu != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00356         cmd = <a class="code" href="../../d7/d7/menuc_8c.html#a8">TrackPopupMenu</a>( <a class="code" href="../../d3/d9/client_2wow_8c.html#a14">GetSubMenu</a>(hmenu, 0),
00357               TPM_LEFTALIGN | TPM_TOPALIGN | TPM_RETURNCMD | TPM_RIGHTBUTTON,
00358               ppt-&gt;x, ppt-&gt;y, 0, hwnd, NULL);
00359         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a158">NtUserDestroyMenu</a>(hmenu);
00360         <span class="keywordflow">return</span> cmd;
00361     }
00362 
00363     <span class="keywordflow">return</span> (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)-1;
00364 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a552" doxytag="usercli.h::HFill" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LPHLP HFill           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">LPCSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>lpszHelp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ulCommand</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>ULONG_PTR&nbsp;</td>
          <td class="mdname" nowrap> <em>ulData</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d9/client_2help_8c-source.html#l00060">60</a> of file <a class="el" href="../../d2/d9/client_2help_8c-source.html">client/help.c</a>.
<p>
References <a class="el" href="../../d0/d7/halvprnt_8c-source.html#l00031">BYTE</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d6/d8/ntrtlp_8h-source.html#l00184">HIBYTE</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d2/d7/regtest_8c.html#a2">strlen()</a>.
<p>
Referenced by <a class="el" href="../../d2/d9/client_2help_8c-source.html#l00447">WinHelpA()</a>.
<p>
<pre class="fragment"><div>00064 {
00065     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>   cb;     <span class="comment">// Size of the data block</span>
00066     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>   cbStr;  <span class="comment">// Length of the help file name</span>
00067     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>   cbData; <span class="comment">// Size of the dwData parameter in bytes (0 if not used)</span>
00068     LPHLP   phlp;   <span class="comment">// Pointer to data block</span>
00069     <a class="code" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a>    bType;  <span class="comment">// dwData parameter type</span>
00070 
00071     <span class="comment">/*</span>
00072 <span class="comment">     * Get the length of the help file name</span>
00073 <span class="comment">     */</span>
00074     cbStr = (lpszHelp) ? <a class="code" href="../../d2/d7/regtest_8c.html#a2">strlen</a>(lpszHelp) + 1 : 0;
00075 
00076     <span class="comment">/*</span>
00077 <span class="comment">     * Get the length of any dwData parameters</span>
00078 <span class="comment">     */</span>
00079     bType = <a class="code" href="../../d5/d9/ntrtlp_8h.html#a5">HIBYTE</a>(LOWORD(ulCommand));
00080     <span class="keywordflow">if</span> (ulData) {
00081         <span class="keywordflow">switch</span> (bType) {
00082         <span class="keywordflow">case</span> <a class="code" href="../../d5/d9/ntrtlp_8h.html#a5">HIBYTE</a>(HELP_HB_STRING):
00083             <span class="comment">/*</span>
00084 <span class="comment">             * ulData is an ANSI string, so compute its length</span>
00085 <span class="comment">             */</span>
00086             cbData = <a class="code" href="../../d2/d7/regtest_8c.html#a2">strlen</a>((LPSTR)ulData) + 1;
00087             <span class="keywordflow">break</span>;
00088 
00089         <span class="keywordflow">case</span> <a class="code" href="../../d5/d9/ntrtlp_8h.html#a5">HIBYTE</a>(HELP_HB_STRUCT):
00090             <span class="comment">/*</span>
00091 <span class="comment">             * ulData points to a structure who's first member is</span>
00092 <span class="comment">             * an int that contains the size of the structure in bytes.</span>
00093 <span class="comment">             */</span>
00094             cbData = *((<a class="code" href="../../d3/d8/propapi_8h.html#a49">int</a> *)ulData);
00095             <span class="keywordflow">break</span>;
00096 
00097         <span class="keywordflow">default</span>:
00098             <span class="comment">/*</span>
00099 <span class="comment">             * dwData has no parameter</span>
00100 <span class="comment">             */</span>
00101             cbData = 0;
00102         }
00103     } <span class="keywordflow">else</span> {
00104         <span class="comment">/*</span>
00105 <span class="comment">         * No parameter is present</span>
00106 <span class="comment">         */</span>
00107         cbData = 0;
00108     }
00109 
00110     <span class="comment">/*</span>
00111 <span class="comment">     * Calculate size (NOTE: HLP is called WINHLP in Win95)</span>
00112 <span class="comment">     */</span>
00113     cb = <span class="keyword">sizeof</span>(HLP) + cbStr + cbData;
00114 
00115     <span class="comment">/*</span>
00116 <span class="comment">     * Get data block</span>
00117 <span class="comment">     */</span>
00118     <span class="keywordflow">if</span> ((phlp = (LPHLP)LocalAlloc(LPTR, cb)) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00119         <span class="keywordflow">return</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00120 
00121     <span class="comment">/*</span>
00122 <span class="comment">     * Fill in info</span>
00123 <span class="comment">     */</span>
00124     phlp-&gt;cbData = (WORD)cb;
00125     phlp-&gt;usCommand = (WORD)ulCommand;
00126     phlp-&gt;ulReserved = 0;
00127     <span class="comment">// phlp-&gt;ulTopic = 0;</span>
00128 
00129     <span class="comment">/*</span>
00130 <span class="comment">     * Fill in file name</span>
00131 <span class="comment">     */</span>
00132     <span class="keywordflow">if</span> (lpszHelp) {
00133         phlp-&gt;offszHelpFile = <span class="keyword">sizeof</span>(HLP);  <span class="comment">// NOTE: HLP is called WINHLP in Win95</span>
00134         strcpy((LPSTR)(phlp + 1), lpszHelp);
00135     } <span class="keywordflow">else</span> {
00136         phlp-&gt;offszHelpFile = 0;
00137     }
00138 
00139     <span class="comment">/*</span>
00140 <span class="comment">     * Fill in data</span>
00141 <span class="comment">     */</span>
00142     <span class="keywordflow">switch</span> (bType) {
00143     <span class="keywordflow">case</span> <a class="code" href="../../d5/d9/ntrtlp_8h.html#a5">HIBYTE</a>(HELP_HB_STRING):
00144         if (cbData) {
00145             phlp-&gt;offabData = (WORD)(<span class="keyword">sizeof</span>(HLP) + cbStr);  <span class="comment">// NOTE: HLP is called WINHLP in Win95</span>
00146             strcpy((LPSTR)phlp + phlp-&gt;offabData, (LPSTR)ulData);
00147         } <span class="keywordflow">else</span> {
00148             phlp-&gt;offabData = 0;
00149         }
00150         <span class="keywordflow">break</span>;
00151 
00152     <span class="keywordflow">case</span> <a class="code" href="../../d5/d9/ntrtlp_8h.html#a5">HIBYTE</a>(HELP_HB_STRUCT):
00153         if (cbData) {
00154             phlp-&gt;offabData = (WORD)(<span class="keyword">sizeof</span>(HLP) + cbStr);  <span class="comment">// NOTE: HLP is called WINHLP in Win95</span>
00155             RtlCopyMemory((LPBYTE)phlp + phlp-&gt;offabData, (PVOID)ulData,
00156                     *((<span class="keywordtype">int</span> far *)ulData));
00157         } <span class="keywordflow">else</span> {
00158             phlp-&gt;offabData = 0;
00159         }
00160         <span class="keywordflow">break</span>;
00161 
00162     <span class="keywordflow">default</span>:
00163         phlp-&gt;offabData = 0;
00164 <span class="comment">// BradG - This item is named differently in the Win95 WINHLP structure</span>
00165 <span class="comment">//      phlp-&gt;ctx   = ulData;</span>
00166         phlp-&gt;ulTopic = ulData;
00167         <span class="keywordflow">break</span>;
00168     }
00169 
00170     <span class="keywordflow">return</span>(phlp);
00171 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a598" doxytag="usercli.h::ImeWndProcA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LRESULT APIENTRY ImeWndProcA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>msg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/imectl_8c-source.html#l00240">240</a> of file <a class="el" href="../../d0/d9/imectl_8c-source.html">imectl.c</a>.
<p>
References <a class="el" href="../../d0/d9/imectl_8c-source.html#l00083">ImeWndProcWorker()</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d5/d9/immcli_8h-source.html#l00120">ValidateHwnd</a>.
<p>
Referenced by <a class="el" href="../../d7/d7/clinit_8c-source.html#l01219">ClientThreadSetup()</a>.
<p>
<pre class="fragment"><div>00245 {
00246     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwnd;
00247 
00248     <span class="keywordflow">if</span> ((pwnd = <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(hwnd)) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00249         <span class="keywordflow">return</span> (0<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>);
00250     }
00251 
00252     <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a619">ImeWndProcWorker</a>(pwnd, message, wParam, lParam, TRUE);
00253 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a599" doxytag="usercli.h::ImeWndProcW" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LRESULT APIENTRY ImeWndProcW           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>msg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/imectl_8c-source.html#l00256">256</a> of file <a class="el" href="../../d0/d9/imectl_8c-source.html">imectl.c</a>.
<p>
References <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d0/d9/imectl_8c-source.html#l00083">ImeWndProcWorker()</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d5/d9/immcli_8h-source.html#l00120">ValidateHwnd</a>.
<p>
Referenced by <a class="el" href="../../d7/d7/clinit_8c-source.html#l01219">ClientThreadSetup()</a>, and <a class="el" href="../../d7/d7/clinit_8c-source.html#l00378">RW_RegisterControls()</a>.
<p>
<pre class="fragment"><div>00261 {
00262     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwnd;
00263 
00264     <span class="keywordflow">if</span> ((pwnd = <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(hwnd)) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00265         <span class="keywordflow">return</span> (0<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>);
00266     }
00267 
00268     <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a619">ImeWndProcWorker</a>(pwnd, message, wParam, lParam, FALSE);
00269 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a619" doxytag="usercli.h::ImeWndProcWorker" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LRESULT ImeWndProcWorker           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>msg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>fAnsi</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/imectl_8c-source.html#l00083">83</a> of file <a class="el" href="../../d0/d9/imectl_8c-source.html">imectl.c</a>.
<p>
References <a class="el" href="../../d2/d0/bench_8c-source.html#l00048">APIENTRY</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00574">DefWindowProcWorker()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00836">FNID_CLEANEDUP_BIT</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00802">FNID_IME</a>, <a class="el" href="../../d2/d1/rtlinit_8c-source.html#l00344">FreeLookasideEntry()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00144">FWINDOWMSG</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01515">HWq</a>, <a class="el" href="../../d0/d9/imectl_8c-source.html#l00657">ImeControlHandler()</a>, <a class="el" href="../../d0/d9/imectl_8c-source.html#l01476">ImeCopyDataHandler()</a>, <a class="el" href="../../d0/d9/imectl_8c-source.html#l01020">ImeNotifyHandler()</a>, <a class="el" href="../../d0/d9/imectl_8c-source.html#l00588">ImeSelectHandler()</a>, <a class="el" href="../../d0/d9/imectl_8c-source.html#l00798">ImeSetContextHandler()</a>, <a class="el" href="../../d0/d9/imectl_8c-source.html#l00417">ImeSystemHandler()</a>, <a class="el" href="../../d0/d9/imectl_8c-source.html#l00056">ImeUILookaside</a>, <a class="el" href="../../d0/d9/imectl_8c-source.html#l00272">ImeWndCreateHandler()</a>, <a class="el" href="../../d0/d9/imectl_8c-source.html#l00345">ImeWndDestroyHandler()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00270">INITCONTROLLOOKASIDE</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l03207">tagIMEUI::nCntInIMEProc</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l07715">NtUserSetWindowFNID()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d0/d9/imectl_8c-source.html#l01195">SendMessageToUI()</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l03202">tagIMEUI::spwnd</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00368">Unlock</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00227">VALIDATECLASSANDSIZE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02304">WFDESTROYED</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02312">WFINDESTROY</a>.
<p>
Referenced by <a class="el" href="../../d7/d7/clinit_8c-source.html#l01219">ClientThreadSetup()</a>, <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00574">DefWindowProcWorker()</a>, <a class="el" href="../../d0/d9/imectl_8c-source.html#l00240">ImeWndProcA()</a>, and <a class="el" href="../../d0/d9/imectl_8c-source.html#l00256">ImeWndProcW()</a>.
<p>
<pre class="fragment"><div>00089 {
00090     HWND        hwnd = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(pwnd);
00091     <a class="code" href="../../d4/d8/structtagIMEUI.html">PIMEUI</a>      pimeui;
00092     <span class="keyword">static</span> <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fInit = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00093 
00094     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pwnd);
00095 
00096     <a class="code" href="../../d6/d0/usercli_8h.html#a28">VALIDATECLASSANDSIZE</a>(pwnd, FNID_IME);
00097     <a class="code" href="../../d6/d0/usercli_8h.html#a29">INITCONTROLLOOKASIDE</a>(&amp;ImeUILookaside, <a class="code" href="../../d4/d8/structtagIMEUI.html">IMEUI</a>, spwnd, 8);
00098 
00099     <span class="comment">/*</span>
00100 <span class="comment">     * If the control is not interested in this message,</span>
00101 <span class="comment">     * pass it to DefWindowProc.</span>
00102 <span class="comment">     */</span>
00103     <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d0/usercli_8h.html#a10">FWINDOWMSG</a>(message, FNID_IME))
00104         <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a610">DefWindowProcWorker</a>(pwnd, message, wParam, lParam, fAnsi);
00105 
00106     <span class="comment">/*</span>
00107 <span class="comment">     * Get the pimeui for the given window now since we will use it a lot in</span>
00108 <span class="comment">     * various handlers. This was stored using SetWindowLong(hwnd,0,pimeui) when</span>
00109 <span class="comment">     * we initially created the IME control.</span>
00110 <span class="comment">     */</span>
00111     pimeui = ((<a class="code" href="../../d5/d8/structtagIMEWND.html">PIMEWND</a>)pwnd)-&gt;pimeui;
00112 
00113     <span class="keywordflow">if</span> (pimeui == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00114         <span class="comment">/*</span>
00115 <span class="comment">         * Further processing not needed</span>
00116 <span class="comment">         */</span>
00117         RIPMSG0(RIP_WARNING, <span class="stringliteral">"ImeWndProcWorker: pimeui == NULL\n"</span>);
00118         <span class="keywordflow">return</span> 0<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>;
00119     }
00120 
00121     <span class="comment">/*</span>
00122 <span class="comment">     * This is necessary to avoid recursion call from IME UI.</span>
00123 <span class="comment">     */</span>
00124     UserAssert(pimeui-&gt;<a class="code" href="../../d4/d8/structtagIMEUI.html#o5">nCntInIMEProc</a> &gt;= 0);
00125 
00126     <span class="keywordflow">if</span> (pimeui-&gt;<a class="code" href="../../d4/d8/structtagIMEUI.html#o5">nCntInIMEProc</a> &gt; 0) {
00127         TAGMSG5(DBGTAG_IMM, <span class="stringliteral">"ImeWndProcWorker: Recursive for pwnd=%08p, msg=%08x, wp=%08x, lp=%08x, fAnsi=%d\n"</span>,
00128                 pwnd, message, wParam, lParam, fAnsi);
00129         <span class="keywordflow">switch</span> (message) {
00130         <span class="keywordflow">case</span> WM_IME_SYSTEM:
00131             <span class="keywordflow">switch</span> (wParam) {
00132             <span class="keywordflow">case</span> IMS_ISACTIVATED:
00133             <span class="keywordflow">case</span> IMS_SETOPENSTATUS:
00134 <span class="comment">//          case IMS_SETCONVERSIONSTATUS:</span>
00135             <span class="keywordflow">case</span> IMS_SETSOFTKBDONOFF:
00136                 <span class="comment">/*</span>
00137 <span class="comment">                 * Because these will not be pass to UI.</span>
00138 <span class="comment">                 * We can do it.</span>
00139 <span class="comment">                 */</span>
00140                 <span class="keywordflow">break</span>;
00141 
00142             <span class="keywordflow">default</span>:
00143                 <span class="keywordflow">return</span> 0<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>;
00144             }
00145             <span class="keywordflow">break</span>;
00146 
00147         <span class="keywordflow">case</span> WM_IME_STARTCOMPOSITION:
00148         <span class="keywordflow">case</span> WM_IME_ENDCOMPOSITION:
00149         <span class="keywordflow">case</span> WM_IME_COMPOSITION:
00150         <span class="keywordflow">case</span> WM_IME_SETCONTEXT:
00151         <span class="keywordflow">case</span> WM_IME_NOTIFY:
00152         <span class="keywordflow">case</span> WM_IME_CONTROL:
00153         <span class="keywordflow">case</span> WM_IME_COMPOSITIONFULL:
00154         <span class="keywordflow">case</span> WM_IME_SELECT:
00155         <span class="keywordflow">case</span> WM_IME_CHAR:
00156         <span class="keywordflow">case</span> WM_IME_REQUEST:
00157             <span class="keywordflow">return</span> 0<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>;
00158 
00159         <span class="keywordflow">default</span>:
00160             <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a610">DefWindowProcWorker</a>(pwnd, message, wParam, lParam, fAnsi);
00161         }
00162     }
00163 
00164     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFINDESTROY) || <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFDESTROYED)) {
00165         <span class="keywordflow">switch</span> (message) {
00166         <span class="keywordflow">case</span> WM_DESTROY:
00167         <span class="keywordflow">case</span> WM_NCDESTROY:
00168         <span class="keywordflow">case</span> WM_FINALDESTROY:
00169             <span class="keywordflow">break</span>;
00170         <span class="keywordflow">default</span>:
00171             RIPMSG1(RIP_WARNING, <span class="stringliteral">"ImeWndProcWorker: message %x is sent to destroyed window."</span>, message);
00172             <span class="keywordflow">return</span> 0<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>;
00173         }
00174     }
00175 
00176     <span class="keywordflow">switch</span> (message) {
00177     <span class="keywordflow">case</span> WM_ERASEBKGND:
00178         <span class="keywordflow">return</span> (LONG)<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00179 
00180     <span class="keywordflow">case</span> WM_PAINT:
00181         <span class="keywordflow">break</span>;
00182 
00183     <span class="keywordflow">case</span> WM_CREATE:
00184 
00185         <span class="keywordflow">return</span> <a class="code" href="../../d9/d9/imectl_8c.html#a11">ImeWndCreateHandler</a>(pimeui, (LPCREATESTRUCT)lParam);
00186 
00187     <span class="keywordflow">case</span> WM_DESTROY:
00188         <span class="comment">/*</span>
00189 <span class="comment">         * We are destroying the IME window, destroy</span>
00190 <span class="comment">         * any UI window that it owns.</span>
00191 <span class="comment">         */</span>
00192         <a class="code" href="../../d9/d9/imectl_8c.html#a12">ImeWndDestroyHandler</a>(pimeui);
00193         <span class="keywordflow">break</span>;
00194 
00195     <span class="keywordflow">case</span> WM_NCDESTROY:
00196     <span class="keywordflow">case</span> WM_FINALDESTROY:
00197         <span class="keywordflow">if</span> (pimeui) {
00198             <a class="code" href="../../d6/d0/usercli_8h.html#a42">Unlock</a>(&amp;pimeui-&gt;<a class="code" href="../../d4/d8/structtagIMEUI.html#o0">spwnd</a>);
00199             <a class="code" href="../../d6/d0/usercli_8h.html#a408">FreeLookasideEntry</a>(&amp;ImeUILookaside, pimeui);
00200         }
00201         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a284">NtUserSetWindowFNID</a>(hwnd, FNID_CLEANEDUP_BIT);
00202         <span class="keywordflow">goto</span> CallDWP;
00203 
00204     <span class="keywordflow">case</span> WM_IME_SYSTEM:
00205         UserAssert(pimeui-&gt;<a class="code" href="../../d4/d8/structtagIMEUI.html#o0">spwnd</a> == pwnd);
00206         <span class="keywordflow">return</span> <a class="code" href="../../d9/d9/imectl_8c.html#a13">ImeSystemHandler</a>(pimeui, message, wParam, lParam);
00207 
00208     <span class="keywordflow">case</span> WM_IME_SELECT:
00209         <span class="keywordflow">return</span> <a class="code" href="../../d9/d9/imectl_8c.html#a14">ImeSelectHandler</a>(pimeui, message, wParam, lParam);
00210 
00211     <span class="keywordflow">case</span> WM_IME_CONTROL:
00212         <span class="keywordflow">return</span> <a class="code" href="../../d9/d9/imectl_8c.html#a15">ImeControlHandler</a>(pimeui, message, wParam, lParam, fAnsi);
00213 
00214     <span class="keywordflow">case</span> WM_IME_SETCONTEXT:
00215         <span class="keywordflow">return</span> <a class="code" href="../../d9/d9/imectl_8c.html#a16">ImeSetContextHandler</a>(pimeui, message, wParam, lParam);
00216 
00217     <span class="keywordflow">case</span> WM_IME_NOTIFY:
00218         <span class="keywordflow">return</span> <a class="code" href="../../d9/d9/imectl_8c.html#a17">ImeNotifyHandler</a>(pimeui, message, wParam, lParam);
00219 
00220     <span class="keywordflow">case</span> WM_IME_REQUEST:
00221         <span class="keywordflow">return</span> 0;
00222 
00223     <span class="keywordflow">case</span> WM_IME_COMPOSITION:
00224     <span class="keywordflow">case</span> WM_IME_ENDCOMPOSITION:
00225     <span class="keywordflow">case</span> WM_IME_STARTCOMPOSITION:
00226         <span class="keywordflow">return</span> <a class="code" href="../../d9/d9/imectl_8c.html#a20">SendMessageToUI</a>(pimeui, message, wParam, lParam, fAnsi);
00227 
00228     <span class="keywordflow">case</span> WM_COPYDATA:
00229         <span class="keywordflow">return</span> <a class="code" href="../../d9/d9/imectl_8c.html#a28">ImeCopyDataHandler</a>(wParam, lParam);
00230 
00231     <span class="keywordflow">default</span>:
00232 CallDWP:
00233         <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a610">DefWindowProcWorker</a>(pwnd, message, wParam, lParam, fAnsi);
00234     }
00235 
00236     <span class="keywordflow">return</span> 0<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>;
00237 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a545" doxytag="usercli.h::InitClientDrawing" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL InitClientDrawing           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d7/d7/clinit_8c-source.html#l01219">ClientThreadSetup()</a>, and <a class="el" href="../../d7/d7/clinit_8c-source.html#l01729">CtxInitUser32()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a684" doxytag="usercli.h::InitHStrings" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID InitHStrings           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00713">713</a> of file <a class="el" href="../../d3/d1/lboxrare_8c-source.html">lboxrare.c</a>.
<p>
References <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01953">tagLBIV::cchStrings</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01980">tagLBIV::fHasStrings</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01952">tagLBIV::hStrings</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01954">tagLBIV::ichAlloc</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, and <a class="el" href="../../d7/d9/usercli_8h-source.html#l00958">UserLocalAlloc</a>.
<p>
Referenced by <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00062">xxxLBCreate()</a>, and <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l00797">xxxLBResetContent()</a>.
<p>
<pre class="fragment"><div>00715 {
00716     <span class="keywordflow">if</span> (plb-&gt;fHasStrings) {
00717         plb-&gt;ichAlloc = 0;
00718         plb-&gt;cchStrings = 0;
00719         plb-&gt;hStrings = <a class="code" href="../../d6/d0/usercli_8h.html#a136">UserLocalAlloc</a>(0, 0L);
00720     }
00721 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a786" doxytag="usercli.h::InitializeImmEntryTable" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID InitializeImmEntryTable           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">VOID&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d3/d0/fareast_8c-source.html#l00338">338</a> of file <a class="el" href="../../d3/d0/fareast_8c-source.html">fareast.c</a>.
<p>
References <a class="el" href="../../d3/d0/fareast_8c-source.html#l00238">_InitializeImmEntryTable()</a>, <a class="el" href="../../d3/d0/fareast_8c-source.html#l00336">bImmInitializing</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d2/d7/hal_8h.html#a212">VOID()</a>.
<p>
Referenced by <a class="el" href="../../d7/d7/clinit_8c-source.html#l00059">UserClientDllInitialize()</a>.
<p>
<pre class="fragment"><div>00339 {
00340     <a class="code" href="../../d2/d1/fareast_8c.html#a7">bImmInitializing</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00341     <a class="code" href="../../d2/d1/fareast_8c.html#a23">_InitializeImmEntryTable</a>();
00342 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a406" doxytag="usercli.h::InitLookaside" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS InitLookaside           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d2/d4/struct__LOOKASIDE.html">PLOOKASIDE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pla</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cbEntry</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cEntries</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d1/rtlinit_8c-source.html#l00221">221</a> of file <a class="el" href="../../d2/d1/rtlinit_8c-source.html">rtlinit.c</a>.
<p>
References <a class="el" href="../../d6/d7/ex_8h-source.html#l02047">_ZONE_HEADER::BlockSize</a>, <a class="el" href="../../d4/d7/udfprocs_8h-source.html#l00278">BlockSize</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00333">_LOOKASIDE::EntrySize</a>, <a class="el" href="../../d6/d7/ex_8h-source.html#l02045">_ZONE_HEADER::FreeList</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00089">gcsLookaside</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00330">_LOOKASIDE::LookasideBase</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00331">_LOOKASIDE::LookasideBounds</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00332">_LOOKASIDE::LookasideZone</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d6/d0/usercli_8h.html#a355">PLOOKASIDE</a>, <a class="el" href="../../d5/d8/ex_8h.html#a120">PZONE_HEADER</a>, <a class="el" href="../../d6/d7/ex_8h-source.html#l02046">_ZONE_HEADER::SegmentList</a>, <a class="el" href="../../d6/d7/ex_8h-source.html#l02048">_ZONE_HEADER::TotalSegmentSize</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00958">UserLocalAlloc</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00960">UserLocalFree</a>, and <a class="el" href="../../d5/d8/ex_8h.html#a117">ZONE_SEGMENT_HEADER</a>.
<p>
Referenced by <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l00192">ValidateDialogPwnd()</a>.
<p>
<pre class="fragment"><div>00225 {
00226     ULONG i;
00227     PCH p;
00228     ULONG <a class="code" href="../../d3/d8/udfprocs_8h.html#a54">BlockSize</a>;
00229     <a class="code" href="../../d0/d0/struct__ZONE__HEADER.html">PZONE_HEADER</a> Zone;
00230     PVOID InitialSegment;
00231     ULONG InitialSegmentSize;
00232 
00233     InitialSegmentSize = (cEntries * cbEntry) + <span class="keyword">sizeof</span>(<a class="code" href="../../d1/d0/struct__ZONE__SEGMENT__HEADER.html">ZONE_SEGMENT_HEADER</a>);
00234 
00235     p = (PCH)<a class="code" href="../../d6/d0/usercli_8h.html#a136">UserLocalAlloc</a>(0, InitialSegmentSize);
00236 
00237     <span class="keywordflow">if</span> ( !p ) {
00238         <span class="keywordflow">return</span> STATUS_NO_MEMORY;
00239         }
00240 
00241     RtlEnterCriticalSection(&amp;gcsLookaside);
00242 
00243     <span class="comment">//</span>
00244     <span class="comment">// If the lookaside list has already been initialized, we're done.</span>
00245     <span class="comment">//</span>
00246 
00247     <span class="keywordflow">if</span> (pla-&gt;<a class="code" href="../../d2/d4/struct__LOOKASIDE.html#o0">LookasideBase</a> != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> &amp;&amp; pla-&gt;<a class="code" href="../../d2/d4/struct__LOOKASIDE.html#o3">EntrySize</a> == cbEntry) {
00248         RtlLeaveCriticalSection(&amp;gcsLookaside);
00249         <a class="code" href="../../d6/d0/usercli_8h.html#a138">UserLocalFree</a>(p);
00250         <span class="keywordflow">return</span> STATUS_SUCCESS;
00251     }
00252 
00253     pla-&gt;<a class="code" href="../../d2/d4/struct__LOOKASIDE.html#o0">LookasideBase</a> = (PVOID)p;
00254     pla-&gt;<a class="code" href="../../d2/d4/struct__LOOKASIDE.html#o1">LookasideBounds</a> = (PVOID)(p + InitialSegmentSize);
00255     pla-&gt;<a class="code" href="../../d2/d4/struct__LOOKASIDE.html#o3">EntrySize</a> = cbEntry;
00256 
00257     <span class="comment">//</span>
00258     <span class="comment">// Using the ExZone-like code, slice up the page into QMSG's</span>
00259     <span class="comment">//</span>
00260 
00261     Zone = &amp;pla-&gt;<a class="code" href="../../d2/d4/struct__LOOKASIDE.html#o2">LookasideZone</a>;
00262     <a class="code" href="../../d3/d8/udfprocs_8h.html#a54">BlockSize</a> = cbEntry;
00263     InitialSegment = pla-&gt;<a class="code" href="../../d2/d4/struct__LOOKASIDE.html#o0">LookasideBase</a>;
00264 
00265     Zone-&gt;<a class="code" href="../../d0/d0/struct__ZONE__HEADER.html#o2">BlockSize</a> = <a class="code" href="../../d3/d8/udfprocs_8h.html#a54">BlockSize</a>;
00266 
00267     Zone-&gt;<a class="code" href="../../d0/d0/struct__ZONE__HEADER.html#o1">SegmentList</a>.Next = &amp;((<a class="code" href="../../d1/d0/struct__ZONE__SEGMENT__HEADER.html">PZONE_SEGMENT_HEADER</a>) InitialSegment)-&gt;SegmentList;
00268     ((<a class="code" href="../../d1/d0/struct__ZONE__SEGMENT__HEADER.html">PZONE_SEGMENT_HEADER</a>) InitialSegment)-&gt;SegmentList.Next = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00269     ((<a class="code" href="../../d1/d0/struct__ZONE__SEGMENT__HEADER.html">PZONE_SEGMENT_HEADER</a>) InitialSegment)-&gt;Reserved = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00270 
00271     Zone-&gt;<a class="code" href="../../d0/d0/struct__ZONE__HEADER.html#o0">FreeList</a>.Next = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00272 
00273     p = (PCH)InitialSegment + <span class="keyword">sizeof</span>(<a class="code" href="../../d1/d0/struct__ZONE__SEGMENT__HEADER.html">ZONE_SEGMENT_HEADER</a>);
00274 
00275     <span class="keywordflow">for</span> (i = <span class="keyword">sizeof</span>(<a class="code" href="../../d1/d0/struct__ZONE__SEGMENT__HEADER.html">ZONE_SEGMENT_HEADER</a>);
00276          i &lt;= InitialSegmentSize - <a class="code" href="../../d3/d8/udfprocs_8h.html#a54">BlockSize</a>;
00277          i += <a class="code" href="../../d3/d8/udfprocs_8h.html#a54">BlockSize</a>
00278         ) {
00279         ((PSINGLE_LIST_ENTRY)p)-&gt;Next = Zone-&gt;<a class="code" href="../../d0/d0/struct__ZONE__HEADER.html#o0">FreeList</a>.Next;
00280         Zone-&gt;<a class="code" href="../../d0/d0/struct__ZONE__HEADER.html#o0">FreeList</a>.Next = (PSINGLE_LIST_ENTRY)p;
00281         p += <a class="code" href="../../d3/d8/udfprocs_8h.html#a54">BlockSize</a>;
00282     }
00283     Zone-&gt;<a class="code" href="../../d0/d0/struct__ZONE__HEADER.html#o3">TotalSegmentSize</a> = i;
00284 
00285     RtlLeaveCriticalSection(&amp;gcsLookaside);
00286 
00287     <span class="keywordflow">return</span> STATUS_SUCCESS;
00288 
00289 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a649" doxytag="usercli.h::InternalCopyImage" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HANDLE InternalCopyImage           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hImage</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>IMAGE_flag</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>cxNew</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>cyNew</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>LR_flags</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d8/clres_8c-source.html#l04719">4719</a> of file <a class="el" href="../../d5/d8/clres_8c-source.html">clres.c</a>.
<p>
References <a class="el" href="../../d5/d8/clres_8c-source.html#l04377">CopyBmp()</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l04493">CopyIcoCur()</a>, and <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>.
<p>
Referenced by <a class="el" href="../../d5/d8/clres_8c-source.html#l04697">CopyImage()</a>.
<p>
<pre class="fragment"><div>04725 {
04726     <span class="keywordflow">switch</span> (IMAGE_flag) {
04727 
04728     <span class="keywordflow">case</span> IMAGE_BITMAP:
04729         <span class="keywordflow">if</span> (GetObjectType(hImage) != OBJ_BITMAP) {
04730             RIPMSG0(RIP_ERROR, <span class="stringliteral">"CopyImage: invalid bitmap"</span>);
04731             <span class="keywordflow">return</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
04732         }
04733 
04734         <span class="keywordflow">return</span> (HICON)<a class="code" href="../../d4/d9/clres_8c.html#a28">CopyBmp</a>(hImage, cxNew, cyNew, LR_flags);
04735 
04736     <span class="keywordflow">case</span> IMAGE_CURSOR:
04737     <span class="keywordflow">case</span> IMAGE_ICON:
04738 
04739         <span class="keywordflow">return</span> <a class="code" href="../../d4/d9/clres_8c.html#a106">CopyIcoCur</a>(hImage,
04740                           (IMAGE_flag == IMAGE_ICON),
04741                           cxNew,
04742                           cyNew,
04743                           LR_flags);
04744     }
04745 
04746     RIPERR0(ERROR_INVALID_PARAMETER, RIP_WARNING, <span class="stringliteral">"CopyImage: bad IMAGE_flag."</span>);
04747 
04748     <span class="keywordflow">return</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
04749 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a750" doxytag="usercli.h::InternalCreateDialog" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HWND InternalCreateDialog           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hmod</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPDLGTEMPLATE&nbsp;</td>
          <td class="mdname" nowrap> <em>lpDlgTemplate</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cb</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwndOwner</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>DLGPROC&nbsp;</td>
          <td class="mdname" nowrap> <em>pfnWndProc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>dwInitParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>fFlags</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d8/dlgbegin_8c-source.html#l00553">553</a> of file <a class="el" href="../../d1/d8/dlgbegin_8c-source.html">dlgbegin.c</a>.
<p>
References <a class="el" href="../../d4/d7/winmgrc_8c-source.html#l00604">_AdjustWindowRectEx()</a>, <a class="el" href="../../d7/d8/dlgmgrc_8c-source.html#l00348">_GetNextDlgTabItem()</a>, <a class="el" href="../../d0/d1/mmrtl_8c-source.html#l00056">_MonitorFromPoint()</a>, <a class="el" href="../../d0/d1/mmrtl_8c-source.html#l00221">_MonitorFromRect()</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01297">tagSERVERINFO::atomSysClass</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l00465">_LARGE_UNICODE_STRING::bAnsi</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00435">_LARGE_UNICODE_STRING::Buffer</a>, <a class="el" href="../../d1/d8/dlgbegin_8c-source.html#l00470">CD_GLOBALEDIT</a>, <a class="el" href="../../d1/d8/dlgbegin_8c-source.html#l00472">CD_SETFOREGROUND</a>, <a class="el" href="../../d1/d8/dlgbegin_8c-source.html#l00474">CD_USEDEFAULTCX</a>, <a class="el" href="../../d1/d8/dlgbegin_8c-source.html#l00473">CD_USEDEFAULTX</a>, <a class="el" href="../../d1/d8/dlgbegin_8c-source.html#l00471">CD_USERFONT</a>, <a class="el" href="../../d1/d8/dlgbegin_8c-source.html#l00469">CD_VISIBLE</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00593">ClientToScreen()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00323">CODEBIT</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l03173">ConnectIfNecessary</a>, <a class="el" href="../../d2/d8/nt6_2dlgbegin_8c-source.html#l00141">CreateDlgFont()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02743">CW2_USEDEFAULT</a>, <a class="el" href="../../d1/d8/dlgbegin_8c-source.html#l00040">DefShortToInt()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02484">DF3DLOOK</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02488">DFCONTROL</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02485">DFNOFAILCREATE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00290">DIALOGCLASS</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02824">DLGF_ANSI</a>, <a class="el" href="../../d1/d8/dlgbegin_8c-source.html#l00175">DLGRSC_VER_NT5COMPAT_RESERVE</a>, <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l00152">DlgSetFocus()</a>, <a class="el" href="../../d8/d3/conexts_8c-source.html#l00650">dt()</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01123">GETAPPVER</a>, <a class="el" href="../../d1/d8/dlgbegin_8c-source.html#l00490">GetDialogMonitor()</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l02766">GetEditDS()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00916">GETEXPWINVER</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02604">GetPrimaryMonitor()</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00103">ghFontSys</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00051">gpsi</a>, <a class="el" href="../../d6/d8/ntrtlp_8h-source.html#l00184">HIBYTE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01514">HW</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00344">ICLS_COMBOBOX</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00340">ICLS_EDIT</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00480">Is400Compat</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00410">IS_PTR</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00277">IsWindow()</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l00463">_LARGE_UNICODE_STRING::Length</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">LPVOID</a>, <a class="el" href="../../d6/d7/resizedlg_8cpp-source.html#l00032">MakeAResizeDlg()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02558">MaskWF</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l00464">_LARGE_UNICODE_STRING::MaximumLength</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00887">NextDWordBoundary</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00886">NextWordBoundary</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04563">NtUserCallHwndLock()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l08087">NtUserCreateWindowEx()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04100">NtUserDestroyMenu()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04115">NtUserDestroyWindow()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05226">NtUserGetSystemMenu()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01573">NtUserSetForegroundWindow</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01565">NtUserSetWindowContextHelpId</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06274">NtUserShowWindow()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d4/d5/rect_8c-source.html#l00139">OffsetRect()</a>, <a class="el" href="../../d0/d7/halvprnt_8c-source.html#l00031">PBYTE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02819">PDLG</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00411">PTR_TO_ID</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02157">tagMONITOR::rcMonitor</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02158">tagMONITOR::rcWork</a>, <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l01363">RepositionRect()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00194">RevalidateHwnd</a>, <a class="el" href="../../d6/d5/chartran_8c-source.html#l00636">RtlInitLargeUnicodeString()</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00652">SendMessage()</a>, <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00270">SendMessageWorker()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00062">SHORT</a>, <a class="el" href="../../d3/d0/userexts_8c-source.html#l13551">SkipSz()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00202">SYSMET</a>, <a class="el" href="../../d1/d8/dlgbegin_8c-source.html#l00018">szEDITCLASS</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l02801">TellWOWThehDlg()</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01174">TEST_KbdCuesPUSIF</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02561">TestwndChild</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l03608">UpdateWindow()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00041">UTCHAR</a>, <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l00192">ValidateDialogPwnd()</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00120">ValidateHwnd</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00475">VER40</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02421">WFCHILD</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02400">WFMAXBOX</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02402">WFMINBOX</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02404">WFSIZEBOX</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02405">WFSYSMENU</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02423">WFTYPEMASK</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02419">WFVISIBLE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02319">WFWIN40COMPAT</a>, <a class="el" href="../../d3/d0/userexts_8c-source.html#l13587">WordSkipSz()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00728">WS_EX_ANSICREATOR</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00727">WS_EX_MDICHILD</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02988">XPixFromXDU</a>, <a class="el" href="../../d6/d8/dlgmgr2_8c-source.html#l00084">xxxCheckDefPushButton()</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02989">YPixFromYDU</a>.
<p>
Referenced by <a class="el" href="../../d5/d8/clres_8c-source.html#l00826">CreateDialogIndirectParamAorW()</a>, and <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l01246">InternalDialogBox()</a>.
<p>
<pre class="fragment"><div>00561 {
00562     HWND                hwnd;
00563     HWND                hwnd2;
00564     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a>                pwnd;
00565     HWND                hwndNewFocus;
00566     HWND                hwndEditFirst = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00567     RECT                rc;
00568     WORD                w;
00569     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a1">UTCHAR</a>              *lpszMenu,
00570                         *lpszClass,
00571                         *lpszText,
00572                         *lpCreateParams,
00573                         *lpStr;
00574     <span class="keywordtype">int</span>                 cxChar,
00575                         cyChar;
00576     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>                f40Compat;
00577     HFONT               hNewFont = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00578     HFONT               hOldFont;
00579     LPDLGITEMTEMPLATE   lpdit;
00580     HMENU               hMenu;
00581     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>                fSuccess;
00582     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>                fWowWindow;
00583     HANDLE              hmodCreate;
00584     LPBYTE              lpCreateParamsData;
00585     DLGTEMPLATE2        <a class="code" href="../../d7/d4/conexts_8c.html#a26">dt</a>;
00586     DLGITEMTEMPLATE2    dit;
00587     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>               dwExpWinVer;
00588     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>               dsStyleOld;
00589     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>               bFlags = 0;
00590     HDC                 hdcDlg;
00591     <a class="code" href="../../d1/d9/struct__LARGE__STRING.html">LARGE_STRING</a>        strClassName;
00592     <a class="code" href="../../d1/d9/struct__LARGE__STRING.html">PLARGE_STRING</a>       pstrClassName;
00593     <a class="code" href="../../d1/d9/struct__LARGE__STRING.html">LARGE_STRING</a>        strWindowName;
00594     <a class="code" href="../../d0/d2/structtagMONITOR.html">PMONITOR</a>            pMonitor;
00595 
00596     UNREFERENCED_PARAMETER(cb);
00597 
00598     <a class="code" href="../../d1/d0/inc_2user_8h.html#a848">ConnectIfNecessary</a>();
00599 
00600     UserAssert(!(fSCDLGFlags &amp; ~(SCDLG_CLIENT|SCDLG_ANSI|SCDLG_NOREVALIDATE|SCDLG_16BIT)));    <span class="comment">// These are the only valid flags</span>
00601 
00602     <span class="comment">/*</span>
00603 <span class="comment">     * Is this a Win4 extended dialog?</span>
00604 <span class="comment">     */</span>
00605     <span class="keywordflow">if</span> (((LPDLGTEMPLATE2)lpdt)-&gt;wSignature == 0xffff) {
00606 
00607         UserAssert(((LPDLGTEMPLATE2)lpdt)-&gt;wDlgVer &lt;= DLGRSC_VER_NT5COMPAT_RESERVE);
00608         RtlCopyMemory(&amp;dt, lpdt, <span class="keyword">sizeof</span> dt);
00609     } <span class="keywordflow">else</span> {
00610         <a class="code" href="../../d7/d4/conexts_8c.html#a26">dt</a>.wDlgVer = 0;
00611         <a class="code" href="../../d7/d4/conexts_8c.html#a26">dt</a>.wSignature = 0;
00612         <a class="code" href="../../d7/d4/conexts_8c.html#a26">dt</a>.dwHelpID = 0;
00613         <a class="code" href="../../d7/d4/conexts_8c.html#a26">dt</a>.dwExStyle = lpdt-&gt;dwExtendedStyle;
00614         <a class="code" href="../../d7/d4/conexts_8c.html#a26">dt</a>.style = lpdt-&gt;style;
00615         <a class="code" href="../../d7/d4/conexts_8c.html#a26">dt</a>.cDlgItems = lpdt-&gt;cdit;
00616         <a class="code" href="../../d7/d4/conexts_8c.html#a26">dt</a>.x = lpdt-&gt;x;
00617         <a class="code" href="../../d7/d4/conexts_8c.html#a26">dt</a>.y = lpdt-&gt;y;
00618         <a class="code" href="../../d7/d4/conexts_8c.html#a26">dt</a>.cx = lpdt-&gt;cx;
00619         <a class="code" href="../../d7/d4/conexts_8c.html#a26">dt</a>.cy = lpdt-&gt;cy;
00620     }
00621 
00622     <span class="comment">/*</span>
00623 <span class="comment">     * If this is called from wow code, then the loword of hmod != 0.</span>
00624 <span class="comment">     * In this case, allow any DS_ style bits that were passed in win3.1</span>
00625 <span class="comment">     * to be legal in win32. Case in point: 16 bit quark xpress passes the</span>
00626 <span class="comment">     * same bit as the win32 style DS_SETFOREGROUND. Also, VC++ sample</span>
00627 <span class="comment">     * "scribble" does the same thing.</span>
00628 <span class="comment">     *</span>
00629 <span class="comment">     * For win32 apps test the DS_SETFOREGROUND bit; wow apps are not set</span>
00630 <span class="comment">     * foreground (this is the new NT semantics)</span>
00631 <span class="comment">     * We have to let no "valid" bits through because apps depend on them</span>
00632 <span class="comment">     * bug 5232.</span>
00633 <span class="comment">     */</span>
00634     dsStyleOld = LOWORD(<a class="code" href="../../d7/d4/conexts_8c.html#a26">dt</a>.style);
00635 
00636     <span class="comment">/*</span>
00637 <span class="comment">     * If the app is Win4 or greater, require correct dialog style bits.</span>
00638 <span class="comment">     * Prevents conflicts with new bits introduced in Chicago</span>
00639 <span class="comment">     */</span>
00640     dwExpWinVer = <a class="code" href="../../d6/d0/usercli_8h.html#a134">GETEXPWINVER</a>(hmod);
00641 
00642     <span class="keywordflow">if</span> ( f40Compat = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a105">Is400Compat</a>(dwExpWinVer) ) {
00643         <a class="code" href="../../d7/d4/conexts_8c.html#a26">dt</a>.style &amp;= (DS_VALID40 | 0xffff0000);
00644 
00645         <span class="comment">//</span>
00646         <span class="comment">// For old applications:</span>
00647         <span class="comment">//      If DS_COMMONDIALOG isn't set, don't touch DS_3DLOOK style</span>
00648         <span class="comment">// bit.  If it's there, it stays there.  If not, not.  That way old</span>
00649         <span class="comment">// apps which pass in their own templates, not commdlg's, don't get</span>
00650         <span class="comment">// forced 3D.</span>
00651         <span class="comment">//      If DS_COMMONDIALOG is there, remove DS_3DLOOK.</span>
00652         <span class="comment">//</span>
00653         <span class="comment">// For new applications:</span>
00654         <span class="comment">//      Force 3D always.</span>
00655         <span class="comment">//</span>
00656         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a150">GETAPPVER</a>() &lt; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a101">VER40</a>) {
00657             <span class="keywordflow">if</span> (<a class="code" href="../../d7/d4/conexts_8c.html#a26">dt</a>.style &amp; DS_COMMONDIALOG) {
00658                 <a class="code" href="../../d7/d4/conexts_8c.html#a26">dt</a>.style &amp;= ~DS_3DLOOK;
00659                 dsStyleOld &amp;= ~DS_3DLOOK;
00660             }
00661         } <span class="keywordflow">else</span> {
00662             <a class="code" href="../../d7/d4/conexts_8c.html#a26">dt</a>.style |= DS_3DLOOK;
00663             dsStyleOld |= DS_3DLOOK;
00664         }
00665     } <span class="keywordflow">else</span> {
00666 <span class="preprocessor">#if DBG</span>
00667 <span class="preprocessor"></span>        <span class="keywordflow">if</span> (<a class="code" href="../../d7/d4/conexts_8c.html#a26">dt</a>.style != (<a class="code" href="../../d7/d4/conexts_8c.html#a26">dt</a>.style &amp; (DS_VALID31 | DS_3DLOOK | 0xffff0000))) {
00668             RIPMSG1(RIP_WARNING, <span class="stringliteral">"CreateDialog: stripping invalid bits %lX"</span>, <a class="code" href="../../d7/d4/conexts_8c.html#a26">dt</a>.style);
00669         }
00670 <span class="preprocessor">#endif // DBG</span>
00671 <span class="preprocessor"></span>
00672 
00673         <span class="comment">/*</span>
00674 <span class="comment">         * Don't strip off bits for old apps, they depend on this.  Especially 16 bit MFC apps!</span>
00675 <span class="comment">         *</span>
00676 <span class="comment">         * dt.dwStyle &amp;= (DS_VALID31 | 0xffff0000);</span>
00677 <span class="comment">         */</span>
00678     }
00679 
00680     <span class="keywordflow">if</span> (LOWORD((ULONG_PTR)hmod) == 0) {
00681         <span class="keywordflow">if</span> (<a class="code" href="../../d7/d4/conexts_8c.html#a26">dt</a>.style &amp; DS_SETFOREGROUND)
00682             bFlags |= <a class="code" href="../../d0/d9/dlgbegin_8c.html#a5">CD_SETFOREGROUND</a>;
00683     }
00684 
00685     <span class="keywordflow">if</span> (dsStyleOld != LOWORD(<a class="code" href="../../d7/d4/conexts_8c.html#a26">dt</a>.style))
00686     {
00687 
00688         RIPMSG1(f40Compat ? RIP_ERROR : RIP_WARNING,
00689                 <span class="stringliteral">"Bad dialog style bits (%x) - please remove."</span>,
00690                 LOWORD(<a class="code" href="../../d7/d4/conexts_8c.html#a26">dt</a>.style));
00691         <span class="comment">// Fail new apps that pass in bogus bits!</span>
00692 
00693         <span class="keywordflow">if</span> (f40Compat) {
00694             <span class="keywordflow">return</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00695         }
00696     }
00697 
00698     <span class="keywordflow">if</span> ( <a class="code" href="../../d7/d4/conexts_8c.html#a26">dt</a>.style &amp; DS_MODALFRAME) {
00699         <a class="code" href="../../d7/d4/conexts_8c.html#a26">dt</a>.dwExStyle |= WS_EX_DLGMODALFRAME | WS_EX_WINDOWEDGE;
00700     }
00701 
00702     <span class="keywordflow">if</span> (( <a class="code" href="../../d7/d4/conexts_8c.html#a26">dt</a>.style &amp; DS_CONTEXTHELP) &amp;&amp; f40Compat) {
00703         <a class="code" href="../../d7/d4/conexts_8c.html#a26">dt</a>.dwExStyle |= WS_EX_CONTEXTHELP;
00704     }
00705 
00706     <span class="keywordflow">if</span> (<a class="code" href="../../d7/d4/conexts_8c.html#a26">dt</a>.style &amp; DS_CONTROL) {
00707         <span class="comment">// Captions and system menus aren't allowed on "control" dialogs.</span>
00708         <span class="comment">// And strip DS_SYSMODAL.</span>
00709         <a class="code" href="../../d7/d4/conexts_8c.html#a26">dt</a>.style &amp;= ~(WS_CAPTION | WS_SYSMENU | DS_SYSMODAL);
00710     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d7/d4/conexts_8c.html#a26">dt</a>.style &amp; WS_DLGFRAME) {
00711         <span class="comment">// Add on window edge same way that CreateWindowEx() will</span>
00712         <a class="code" href="../../d7/d4/conexts_8c.html#a26">dt</a>.dwExStyle |= WS_EX_WINDOWEDGE;
00713     }
00714 
00715     <span class="keywordflow">if</span> (<a class="code" href="../../d7/d4/conexts_8c.html#a26">dt</a>.style &amp; DS_SYSMODAL) {
00716         <a class="code" href="../../d7/d4/conexts_8c.html#a26">dt</a>.dwExStyle |= WS_EX_TOPMOST;
00717     }
00718 
00719     <span class="keywordflow">if</span> (!(<a class="code" href="../../d7/d4/conexts_8c.html#a26">dt</a>.style &amp; WS_CHILD) || (<a class="code" href="../../d7/d4/conexts_8c.html#a26">dt</a>.style &amp; DS_CONTROL)) {
00720         <span class="comment">// only a control parent if it's not a child dialog or if it's</span>
00721         <span class="comment">// explicitly marked as a recursive dialog</span>
00722         <a class="code" href="../../d7/d4/conexts_8c.html#a26">dt</a>.dwExStyle |= WS_EX_CONTROLPARENT;
00723     }
00724 
00725     <span class="keywordflow">if</span> (<a class="code" href="../../d7/d4/conexts_8c.html#a26">dt</a>.x == (<span class="keywordtype">short</span>)<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a770">CW2_USEDEFAULT</a>) {
00726         bFlags |= <a class="code" href="../../d0/d9/dlgbegin_8c.html#a6">CD_USEDEFAULTX</a>;
00727         <a class="code" href="../../d7/d4/conexts_8c.html#a26">dt</a>.x = 0;
00728     }
00729 
00730     <span class="keywordflow">if</span> (<a class="code" href="../../d7/d4/conexts_8c.html#a26">dt</a>.cx == (<span class="keywordtype">short</span>)<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a770">CW2_USEDEFAULT</a>) {
00731         bFlags |= <a class="code" href="../../d0/d9/dlgbegin_8c.html#a7">CD_USEDEFAULTCX</a>;
00732         <a class="code" href="../../d7/d4/conexts_8c.html#a26">dt</a>.cx = 0;
00733     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d7/d4/conexts_8c.html#a26">dt</a>.cx &lt; 0) {
00734         <a class="code" href="../../d7/d4/conexts_8c.html#a26">dt</a>.cx = 0;
00735     }
00736 
00737     <span class="keywordflow">if</span> (<a class="code" href="../../d7/d4/conexts_8c.html#a26">dt</a>.cy &lt; 0) {
00738         <a class="code" href="../../d7/d4/conexts_8c.html#a26">dt</a>.cy = 0;
00739     }
00740 
00741 
00742     <span class="comment">// If there's a menu name string, load it.</span>
00743     lpszMenu = (LPWSTR)(((<a class="code" href="../../d9/d7/halvprnt_8c.html#a1">PBYTE</a>)(lpdt)) + (<a class="code" href="../../d7/d4/conexts_8c.html#a26">dt</a>.wDlgVer ? <span class="keyword">sizeof</span>(DLGTEMPLATE2):<span class="keyword">sizeof</span>(DLGTEMPLATE)));
00744 
00745     <span class="comment">/*</span>
00746 <span class="comment">     * If the menu id is expressed as an ordinal and not a string,</span>
00747 <span class="comment">     * skip all 4 bytes to get to the class string.</span>
00748 <span class="comment">     */</span>
00749     w = *(LPWORD)lpszMenu;
00750 
00751     <span class="comment">/*</span>
00752 <span class="comment">     * If there's a menu name string, load it.</span>
00753 <span class="comment">     */</span>
00754     <span class="keywordflow">if</span> (w != 0) {
00755         <span class="keywordflow">if</span> ((hMenu = LoadMenu(hmod, (w == 0xFFFF) ?
00756                 MAKEINTRESOURCE(*(WORD *)((PBYTE)lpszMenu + 2)) : lpszMenu)) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00757             RIPMSG0(RIP_WARNING, <span class="stringliteral">"ServerCreateDialog() failed: couldn't load menu"</span>);
00758             <span class="keywordflow">goto</span> DeleteFontAndMenuAndFail;
00759         }
00760     } <span class="keywordflow">else</span> {
00761         hMenu = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00762     }
00763 
00764     <span class="keywordflow">if</span> (w == 0xFFFF) {
00765         lpszClass = (LPWSTR)((LPBYTE)lpszMenu + 4);
00766     } <span class="keywordflow">else</span> {
00767         lpszClass = (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a1">UTCHAR</a> *)<a class="code" href="../../d2/d1/userexts_8c.html#a252">WordSkipSz</a>(lpszMenu);
00768     }
00769 
00770     lpszText = (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a1">UTCHAR</a> *)<a class="code" href="../../d2/d1/userexts_8c.html#a252">WordSkipSz</a>(lpszClass);
00771 
00772     lpStr = (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a1">UTCHAR</a> *)<a class="code" href="../../d2/d1/userexts_8c.html#a252">WordSkipSz</a>(lpszText);
00773 
00774     hdcDlg = CreateCompatibleDC(NULL);
00775     <span class="keywordflow">if</span> (hdcDlg == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00776         <span class="keywordflow">goto</span> DeleteFontAndMenuAndFail;
00777 
00778     <span class="keywordflow">if</span> (<a class="code" href="../../d7/d4/conexts_8c.html#a26">dt</a>.style &amp; DS_SETFONT) {
00779         hNewFont = <a class="code" href="../../d1/d9/nt6_2dlgbegin_8c.html#a16">CreateDlgFont</a>(hdcDlg, &amp;lpStr, &amp;dt, dwExpWinVer, fSCDLGFlags);
00780         bFlags |= <a class="code" href="../../d0/d9/dlgbegin_8c.html#a4">CD_USERFONT</a>;
00781         lpdit = (LPDLGITEMTEMPLATE) <a class="code" href="../../d6/d0/usercli_8h.html#a124">NextDWordBoundary</a>(lpStr);
00782     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a105">Is400Compat</a>(dwExpWinVer) &amp;&amp; (<a class="code" href="../../d7/d4/conexts_8c.html#a26">dt</a>.style &amp; DS_FIXEDSYS)) {
00783 
00784         <span class="comment">//</span>
00785         <span class="comment">// B#2078 -- WISH for fixed width system font in dialog.  We need</span>
00786         <span class="comment">// to tell the dialog that it's using a font different from the</span>
00787         <span class="comment">// standard system font, so set CD_USERFONT bit.</span>
00788         <span class="comment">//</span>
00789         <span class="comment">// We need the 400 compat. check for CorelDraw, since they use</span>
00790         <span class="comment">// this style bit for their own purposes.</span>
00791         <span class="comment">//</span>
00792         hNewFont = GetStockObject(SYSTEM_FIXED_FONT);
00793         bFlags |= <a class="code" href="../../d0/d9/dlgbegin_8c.html#a4">CD_USERFONT</a>;
00794         lpdit = (LPDLGITEMTEMPLATE)<a class="code" href="../../d6/d0/usercli_8h.html#a124">NextDWordBoundary</a>(lpStr);
00795     } <span class="keywordflow">else</span> {
00796         lpdit = (LPDLGITEMTEMPLATE)<a class="code" href="../../d6/d0/usercli_8h.html#a124">NextDWordBoundary</a>(lpStr);
00797     }
00798 
00799     <span class="comment">/*</span>
00800 <span class="comment">     * If the application requested a particular font and for some</span>
00801 <span class="comment">     * reason we couldn't find it, we just use the system font.  BUT we</span>
00802 <span class="comment">     * need to make sure we tell him he gets the system font.  Dialogs</span>
00803 <span class="comment">     * which never request a particular font get the system font and we</span>
00804 <span class="comment">     * don't bother telling them this (via the WM_SETFONT message).</span>
00805 <span class="comment">     */</span>
00806 
00807     <span class="comment">// Is it anything other than the default system font?  If we can't get</span>
00808     <span class="comment">// enough memory to select in the new font specified, just use the system</span>
00809     <span class="comment">// font.</span>
00810     <span class="keywordflow">if</span> (hNewFont &amp;&amp; (hOldFont = SelectFont(hdcDlg, hNewFont))) {
00811         <span class="comment">// Get the ave character width and height to be used</span>
00812         cxChar = GdiGetCharDimensions(hdcDlg, NULL, &amp;cyChar);
00813 
00814         SelectFont(hdcDlg, hOldFont);
00815         <span class="keywordflow">if</span> (cxChar == 0) {
00816             RIPMSG0(RIP_WARNING, <span class="stringliteral">"InternalCreateDialog: GdiGetCharDimensions failed"</span>);
00817             <span class="keywordflow">goto</span> UseSysFontMetrics;
00818         }
00819     }
00820     <span class="keywordflow">else</span>
00821     {
00822         <span class="keywordflow">if</span> (hNewFont || (bFlags &amp; <a class="code" href="../../d0/d9/dlgbegin_8c.html#a4">CD_USERFONT</a>))
00823             hNewFont = <a class="code" href="../../d1/d8/clglobal_8c.html#a28">ghFontSys</a>;
00824 
00825 UseSysFontMetrics:
00826         cxChar = <a class="code" href="../../d1/d8/clglobal_8c.html#a4">gpsi</a>-&gt;cxSysFontChar;
00827         cyChar = <a class="code" href="../../d1/d8/clglobal_8c.html#a4">gpsi</a>-&gt;cySysFontChar;
00828     }
00829     DeleteDC(hdcDlg);
00830 
00831     <span class="keywordflow">if</span> (<a class="code" href="../../d7/d4/conexts_8c.html#a26">dt</a>.style &amp; WS_VISIBLE) {
00832         bFlags |= <a class="code" href="../../d0/d9/dlgbegin_8c.html#a2">CD_VISIBLE</a>;
00833         <a class="code" href="../../d7/d4/conexts_8c.html#a26">dt</a>.style &amp;= ~WS_VISIBLE;
00834     }
00835 
00836     <span class="keywordflow">if</span> (!(<a class="code" href="../../d7/d4/conexts_8c.html#a26">dt</a>.style &amp; DS_LOCALEDIT)) {
00837         bFlags |= <a class="code" href="../../d0/d9/dlgbegin_8c.html#a3">CD_GLOBALEDIT</a>;
00838     }
00839 
00840     <span class="comment">/* Figure out dimensions of real window</span>
00841 <span class="comment">     */</span>
00842     rc.left = rc.top = 0;
00843     rc.right = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a852">XPixFromXDU</a>(<a class="code" href="../../d7/d4/conexts_8c.html#a26">dt</a>.cx, cxChar);
00844     rc.bottom = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a853">YPixFromYDU</a>(<a class="code" href="../../d7/d4/conexts_8c.html#a26">dt</a>.cy, cyChar);
00845 
00846     <a class="code" href="../../d1/d0/inc_2user_8h.html#a1195">_AdjustWindowRectEx</a>(&amp;rc, <a class="code" href="../../d7/d4/conexts_8c.html#a26">dt</a>.style, w, <a class="code" href="../../d7/d4/conexts_8c.html#a26">dt</a>.dwExStyle);
00847 
00848     <a class="code" href="../../d7/d4/conexts_8c.html#a26">dt</a>.cx = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a13">SHORT</a>)(rc.right - rc.left);
00849     <a class="code" href="../../d7/d4/conexts_8c.html#a26">dt</a>.cy = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a13">SHORT</a>)(rc.bottom - rc.top);
00850 
00851     <span class="keywordflow">if</span> ((<a class="code" href="../../d7/d4/conexts_8c.html#a26">dt</a>.style &amp; DS_CENTERMOUSE) &amp;&amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(MOUSEPRESENT) &amp;&amp; f40Compat) {
00852         pMonitor = <a class="code" href="../../d9/d1/mmrtl_8c.html#a6">_MonitorFromPoint</a>(<a class="code" href="../../d1/d8/clglobal_8c.html#a4">gpsi</a>-&gt;ptCursor, MONITOR_DEFAULTTONULL);
00853         UserAssert(pMonitor);
00854         *((LPPOINT)&amp;rc.left) = <a class="code" href="../../d1/d8/clglobal_8c.html#a4">gpsi</a>-&gt;ptCursor;
00855         rc.left -= (<a class="code" href="../../d7/d4/conexts_8c.html#a26">dt</a>.cx / 2);
00856         rc.top  -= (<a class="code" href="../../d7/d4/conexts_8c.html#a26">dt</a>.cy / 2);
00857     } <span class="keywordflow">else</span> {
00858         <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fNoDialogMonitor;
00859 
00860         pMonitor = <a class="code" href="../../d6/d0/usercli_8h.html#a762">GetDialogMonitor</a>(hwndOwner, MONITOR_DEFAULTTONULL);
00861         fNoDialogMonitor = pMonitor ? <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a> : <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00862         <span class="keywordflow">if</span> (!pMonitor) {
00863             pMonitor = <a class="code" href="../../d6/d0/usercli_8h.html#a793">GetPrimaryMonitor</a>();
00864         }
00865 
00866         <span class="keywordflow">if</span> ((<a class="code" href="../../d7/d4/conexts_8c.html#a26">dt</a>.style &amp; (DS_CENTER | DS_CENTERMOUSE)) &amp;&amp; f40Compat) {
00867             <span class="comment">/*</span>
00868 <span class="comment">             * Center to the work area of the owner monitor.</span>
00869 <span class="comment">             */</span>
00870             rc.left = (pMonitor-&gt;<a class="code" href="../../d0/d2/structtagMONITOR.html#o4">rcWork</a>.left + pMonitor-&gt;<a class="code" href="../../d0/d2/structtagMONITOR.html#o4">rcWork</a>.right - <a class="code" href="../../d7/d4/conexts_8c.html#a26">dt</a>.cx) / 2;
00871             rc.top  = (pMonitor-&gt;<a class="code" href="../../d0/d2/structtagMONITOR.html#o4">rcWork</a>.top + pMonitor-&gt;<a class="code" href="../../d0/d2/structtagMONITOR.html#o4">rcWork</a>.bottom - <a class="code" href="../../d7/d4/conexts_8c.html#a26">dt</a>.cy) / 2;
00872         } <span class="keywordflow">else</span> {
00873             rc.left = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a852">XPixFromXDU</a>(<a class="code" href="../../d7/d4/conexts_8c.html#a26">dt</a>.x, cxChar);
00874             rc.top = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a853">YPixFromYDU</a>(<a class="code" href="../../d7/d4/conexts_8c.html#a26">dt</a>.y, cyChar);
00875 
00876             <span class="keywordflow">if</span> (!(<a class="code" href="../../d7/d4/conexts_8c.html#a26">dt</a>.style &amp; DS_ABSALIGN) &amp;&amp; hwndOwner) {
00877                 <span class="comment">/*</span>
00878 <span class="comment">                 * Offset relative coordinates to the owner window. If it is</span>
00879 <span class="comment">                 * a child window, there is nothing to do.</span>
00880 <span class="comment">                 */</span>
00881                 <span class="keywordflow">if</span> ((HIWORD(<a class="code" href="../../d7/d4/conexts_8c.html#a26">dt</a>.style) &amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a734">MaskWF</a>(WFTYPEMASK)) != <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a734">MaskWF</a>(WFCHILD)) {
00882                     <span class="comment">//This is will considre rc.left form the right hand side of the owner window if it a mirrored one.</span>
00883                     <a class="code" href="../../d3/d9/client_2wow_8c.html#a23">ClientToScreen</a>(hwndOwner, (LPPOINT)&amp;rc.left);
00884 
00885 <span class="preprocessor">#ifdef USE_MIRRORING</span>
00886 <span class="preprocessor"></span>                    <span class="comment">//It is not chiled then do Visual ClientToScreen</span>
00887                     <span class="comment">//i.e. rc.left it is form the left hand side of the owner window</span>
00888                     <span class="keywordflow">if</span> (MIRRORED_HWND(hwndOwner)) {
00889                         rc.left -= <a class="code" href="../../d7/d4/conexts_8c.html#a26">dt</a>.cx;
00890                     }
00891 <span class="preprocessor">#endif</span>
00892 <span class="preprocessor"></span>
00893                 }
00894             } <span class="keywordflow">else</span> {
00895                 <span class="comment">/*</span>
00896 <span class="comment">                 * Position the dialog in screen coordinates. If the dialog's</span>
00897 <span class="comment">                 * owner is on a different monitor than specified in the</span>
00898 <span class="comment">                 * template, move the dialog to the owner window. If the owner</span>
00899 <span class="comment">                 * doesn't exist, then use the monitor from the dialog's</span>
00900 <span class="comment">                 * template.</span>
00901 <span class="comment">                 */</span>
00902 
00903                 <a class="code" href="../../d0/d2/structtagMONITOR.html">PMONITOR</a>    pMonitorTemplate;
00904                 RECT        rcTemplate;
00905 
00906                 rcTemplate.left  = rc.left;
00907                 rcTemplate.top   = rc.top;
00908                 rcTemplate.right  = rc.left + <a class="code" href="../../d7/d4/conexts_8c.html#a26">dt</a>.cx;
00909                 rcTemplate.bottom = rc.top + <a class="code" href="../../d7/d4/conexts_8c.html#a26">dt</a>.cy;
00910 
00911                 pMonitorTemplate = <a class="code" href="../../d9/d1/mmrtl_8c.html#a7">_MonitorFromRect</a>(&amp;rcTemplate, MONITOR_DEFAULTTOPRIMARY);
00912                 <span class="keywordflow">if</span> (fNoDialogMonitor) {
00913                     pMonitor = pMonitorTemplate;
00914                 } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pMonitorTemplate != pMonitor) {
00915                     rc.left += pMonitor-&gt;<a class="code" href="../../d0/d2/structtagMONITOR.html#o3">rcMonitor</a>.left - pMonitorTemplate-&gt;<a class="code" href="../../d0/d2/structtagMONITOR.html#o3">rcMonitor</a>.left;
00916                     rc.top  += pMonitor-&gt;<a class="code" href="../../d0/d2/structtagMONITOR.html#o3">rcMonitor</a>.top  - pMonitorTemplate-&gt;<a class="code" href="../../d0/d2/structtagMONITOR.html#o3">rcMonitor</a>.top;
00917                 }
00918             }
00919         }
00920     }
00921 
00922     rc.right  = rc.left + <a class="code" href="../../d7/d4/conexts_8c.html#a26">dt</a>.cx;
00923     rc.bottom = rc.top  + <a class="code" href="../../d7/d4/conexts_8c.html#a26">dt</a>.cy;
00924 
00925     <span class="comment">// If the right or bottom coordinate has overflowed, then pin it back to</span>
00926     <span class="comment">// a valid rectangle.  Likely to happen if a minimized window is the owner of</span>
00927     <span class="comment">// the dialog.</span>
00928     <span class="keywordflow">if</span> (rc.left &gt; rc.right || rc.top &gt; rc.bottom) {
00929         <a class="code" href="../../d3/d6/rect_8c.html#a6">OffsetRect</a>(&amp;rc, -<a class="code" href="../../d7/d4/conexts_8c.html#a26">dt</a>.cx, -<a class="code" href="../../d7/d4/conexts_8c.html#a26">dt</a>.cy);
00930     }
00931 
00932    <span class="comment">//</span>
00933     <span class="comment">// Need to do this for ALL dialogs, not just top-level, since we used</span>
00934     <span class="comment">// to in 3.1.</span>
00935     <span class="comment">//</span>
00936 
00937     <span class="comment">// Clip top level dialogs within working area</span>
00938     <span class="comment">// Start child dialogs at least at (0, 0)</span>
00939     <a class="code" href="../../d6/d0/usercli_8h.html#a760">RepositionRect</a>(pMonitor, &amp;rc, <a class="code" href="../../d7/d4/conexts_8c.html#a26">dt</a>.style, <a class="code" href="../../d7/d4/conexts_8c.html#a26">dt</a>.dwExStyle);
00940 
00941     <a class="code" href="../../d7/d4/conexts_8c.html#a26">dt</a>.x  = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a13">SHORT</a>)((bFlags &amp; <a class="code" href="../../d0/d9/dlgbegin_8c.html#a6">CD_USEDEFAULTX</a>) ? <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a770">CW2_USEDEFAULT</a> : rc.left);
00942     <a class="code" href="../../d7/d4/conexts_8c.html#a26">dt</a>.y  = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a13">SHORT</a>)(rc.top);
00943     <a class="code" href="../../d7/d4/conexts_8c.html#a26">dt</a>.cx = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a13">SHORT</a>)((bFlags &amp; <a class="code" href="../../d0/d9/dlgbegin_8c.html#a7">CD_USEDEFAULTCX</a>) ? <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a770">CW2_USEDEFAULT</a> : rc.right - rc.left);
00944     <a class="code" href="../../d7/d4/conexts_8c.html#a26">dt</a>.cy = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a13">SHORT</a>)(rc.bottom - rc.top);
00945 
00946     <span class="keywordflow">if</span> (*lpszClass != 0) {
00947         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a98">IS_PTR</a>(lpszClass)) {
00948             <a class="code" href="../../d5/d6/chartran_8c.html#a7">RtlInitLargeUnicodeString</a>((<a class="code" href="../../d2/d9/struct__LARGE__UNICODE__STRING.html">PLARGE_UNICODE_STRING</a>)&amp;strClassName,
00949                     lpszClass, (UINT)-1);
00950             pstrClassName = &amp;strClassName;
00951         } <span class="keywordflow">else</span> {
00952             pstrClassName = (<a class="code" href="../../d1/d9/struct__LARGE__STRING.html">PLARGE_STRING</a>)lpszClass;
00953         }
00954     } <span class="keywordflow">else</span> {
00955         pstrClassName = (<a class="code" href="../../d1/d9/struct__LARGE__STRING.html">PLARGE_STRING</a>)<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a40">DIALOGCLASS</a>;
00956     }
00957 
00958     <a class="code" href="../../d5/d6/chartran_8c.html#a7">RtlInitLargeUnicodeString</a>((<a class="code" href="../../d2/d9/struct__LARGE__UNICODE__STRING.html">PLARGE_UNICODE_STRING</a>)&amp;strWindowName,
00959             lpszText, (UINT)-1);
00960 
00961     UserAssert((<a class="code" href="../../d7/d4/conexts_8c.html#a26">dt</a>.dwExStyle &amp; WS_EX_MDICHILD) == 0);
00962     hwnd = <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a290">NtUserCreateWindowEx</a>(
00963             <a class="code" href="../../d7/d4/conexts_8c.html#a26">dt</a>.dwExStyle | ((fSCDLGFlags &amp; SCDLG_ANSI) ? WS_EX_ANSICREATOR : 0),
00964             pstrClassName,
00965             &amp;strWindowName,
00966             <a class="code" href="../../d7/d4/conexts_8c.html#a26">dt</a>.style,
00967             <a class="code" href="../../d0/d9/dlgbegin_8c.html#a12">DefShortToInt</a>(<a class="code" href="../../d7/d4/conexts_8c.html#a26">dt</a>.x),
00968             <a class="code" href="../../d7/d4/conexts_8c.html#a26">dt</a>.y,
00969             <a class="code" href="../../d0/d9/dlgbegin_8c.html#a12">DefShortToInt</a>(<a class="code" href="../../d7/d4/conexts_8c.html#a26">dt</a>.cx),
00970             <a class="code" href="../../d7/d4/conexts_8c.html#a26">dt</a>.cy,
00971             hwndOwner,
00972             hMenu,
00973             hmod,
00974             (LPVOID)NULL,
00975             dwExpWinVer);
00976 
00977     <span class="keywordflow">if</span> (hwnd == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00978         RIPMSG0(RIP_WARNING, <span class="stringliteral">"CreateDialog() failed: couldn't create window"</span>);
00979 DeleteFontAndMenuAndFail:
00980         <span class="keywordflow">if</span> (hMenu != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00981             <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a158">NtUserDestroyMenu</a>(hMenu);
00982         <span class="comment">/*</span>
00983 <span class="comment">         * Only delete the font if we didn't grab it</span>
00984 <span class="comment">         * from the dialog font cache.</span>
00985 <span class="comment">         */</span>
00986         <span class="keywordflow">if</span> ((hNewFont != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)) {
00987             DeleteObject(hNewFont);
00988         }
00989         <span class="keywordflow">return</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00990     }
00991 
00992     pwnd = <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(hwnd);
00993 
00994     <span class="comment">// tell WOW the hDlg of the Window just created BEFORE they get any messages</span>
00995     <span class="comment">// at WOW32!w32win16wndprocex</span>
00996     <span class="keywordflow">if</span>(fSCDLGFlags &amp; SCDLG_16BIT) {
00997         <a class="code" href="../../d6/d0/usercli_8h.html#a765">TellWOWThehDlg</a>(hwnd);
00998     }
00999 
01000     <span class="comment">/*</span>
01001 <span class="comment">     * Before anything happens with this window, we need to mark it as a</span>
01002 <span class="comment">     * dialog window!!!! So do that.</span>
01003 <span class="comment">     */</span>
01004     <span class="keywordflow">if</span> (pwnd == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> || !<a class="code" href="../../d6/d0/usercli_8h.html#a761">ValidateDialogPwnd</a>(pwnd))
01005         <span class="keywordflow">goto</span> DeleteFontAndMenuAndFail;
01006 
01007     <span class="keywordflow">if</span> (<a class="code" href="../../d7/d4/conexts_8c.html#a26">dt</a>.dwHelpID) {
01008         <a class="code" href="../../d6/d0/usercli_8h.html#a220">NtUserSetWindowContextHelpId</a>(hwnd, <a class="code" href="../../d7/d4/conexts_8c.html#a26">dt</a>.dwHelpID);
01009     }
01010 
01011     <span class="comment">/*</span>
01012 <span class="comment">     * Set up the system menu on this dialog box if it has one.</span>
01013 <span class="comment">     */</span>
01014     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFSYSMENU)) {
01015 
01016         <span class="comment">/*</span>
01017 <span class="comment">         * For a modal dialog box with a frame and caption, we want to</span>
01018 <span class="comment">         * delete the unselectable items from the system menu.</span>
01019 <span class="comment">         */</span>
01020         UserAssert(<a class="code" href="../../d5/d9/ntrtlp_8h.html#a5">HIBYTE</a>(WFSIZEBOX) == <a class="code" href="../../d5/d9/ntrtlp_8h.html#a5">HIBYTE</a>(WFMINBOX));
01021         UserAssert(<a class="code" href="../../d5/d9/ntrtlp_8h.html#a5">HIBYTE</a>(WFMINBOX) == <a class="code" href="../../d5/d9/ntrtlp_8h.html#a5">HIBYTE</a>(WFMAXBOX));
01022         <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFSIZEBOX | WFMINBOX | WFMAXBOX)) {
01023 
01024             <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a176">NtUserCallHwndLock</a>(hwnd, SFI_XXXSETDIALOGSYSTEMMENU);
01025         } <span class="keywordflow">else</span> {
01026 
01027             <span class="comment">/*</span>
01028 <span class="comment">             * We have to give this dialog its own copy of the system menu</span>
01029 <span class="comment">             * in case it modifies the menu.</span>
01030 <span class="comment">             */</span>
01031             <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a202">NtUserGetSystemMenu</a>(hwnd, FALSE);
01032         }
01033     }
01034 
01035     <span class="comment">/*</span>
01036 <span class="comment">     * Set fDisabled to FALSE so EndDialog will Enable if dialog is ended</span>
01037 <span class="comment">     * before returning to DialogBox (or if modeless).</span>
01038 <span class="comment">     */</span>
01039     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a793">PDLG</a>(pwnd)-&gt;fDisabled = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01040 
01041     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a793">PDLG</a>(pwnd)-&gt;cxChar = cxChar;
01042     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a793">PDLG</a>(pwnd)-&gt;cyChar = cyChar;
01043     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a793">PDLG</a>(pwnd)-&gt;lpfnDlg = lpfnDialog;
01044     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a793">PDLG</a>(pwnd)-&gt;fEnd = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01045     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a793">PDLG</a>(pwnd)-&gt;result = IDOK;
01046 
01047     <span class="comment">/*</span>
01048 <span class="comment">     * Need to remember Unicode status.</span>
01049 <span class="comment">     */</span>
01050     <span class="keywordflow">if</span> (fSCDLGFlags &amp; SCDLG_ANSI) {
01051         <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a793">PDLG</a>(pwnd)-&gt;flags |= <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a794">DLGF_ANSI</a>;
01052     }
01053 
01054     <span class="comment">/*</span>
01055 <span class="comment">     * Have to do a callback here for WOW apps.  WOW needs what's in lParam</span>
01056 <span class="comment">     * before the dialog gets any messages.</span>
01057 <span class="comment">     */</span>
01058 
01059     <span class="comment">/*</span>
01060 <span class="comment">     * If the app is a Wow app then the Lo Word of the hInstance is the</span>
01061 <span class="comment">     * 16-bit hInstance.  Set the lParam, which no-one should look at</span>
01062 <span class="comment">     * but the app, to the 16 bit value</span>
01063 <span class="comment">     */</span>
01064     <span class="keywordflow">if</span> (LOWORD((ULONG_PTR)hmod) != 0) {
01065         fWowWindow = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01066     } <span class="keywordflow">else</span> {
01067         fWowWindow = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01068     }
01069 
01070     <span class="comment">/*</span>
01071 <span class="comment">     * If a user defined font is used, save the handle so that we can delete</span>
01072 <span class="comment">     * it when the dialog is destroyed.</span>
01073 <span class="comment">     */</span>
01074     <span class="keywordflow">if</span> (bFlags &amp; <a class="code" href="../../d0/d9/dlgbegin_8c.html#a4">CD_USERFONT</a>) {
01075 
01076         <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a793">PDLG</a>(pwnd)-&gt;hUserFont = hNewFont;
01077 
01078         <span class="keywordflow">if</span> (lpfnDialog != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01079             <span class="comment">/*</span>
01080 <span class="comment">             * Tell the dialog that it will be using this font...</span>
01081 <span class="comment">             */</span>
01082             <a class="code" href="../../d6/d0/usercli_8h.html#a600">SendMessageWorker</a>(pwnd, WM_SETFONT, (WPARAM)hNewFont, 0L, FALSE);
01083         }
01084     }
01085 
01086     <span class="keywordflow">if</span> (!<a class="code" href="../../d7/d4/conexts_8c.html#a26">dt</a>.wDlgVer) {
01087         dit.dwHelpID = 0;
01088     }
01089 
01090     <span class="comment">/*</span>
01091 <span class="comment">     * Loop through the dialog controls, doing a CreateWindowEx() for each of</span>
01092 <span class="comment">     * them.</span>
01093 <span class="comment">     */</span>
01094     <span class="keywordflow">while</span> (<a class="code" href="../../d7/d4/conexts_8c.html#a26">dt</a>.cDlgItems-- != 0) {
01095         <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwExpWinVer2;
01096 
01097         <span class="keywordflow">if</span> (<a class="code" href="../../d7/d4/conexts_8c.html#a26">dt</a>.wDlgVer) {
01098             RtlCopyMemory(&amp;dit, lpdit, <span class="keyword">sizeof</span> dit);
01099         } <span class="keywordflow">else</span> {
01100             dit.dwHelpID = 0;
01101             dit.dwExStyle = lpdit-&gt;dwExtendedStyle;
01102             dit.style = lpdit-&gt;style;
01103             dit.x = lpdit-&gt;x;
01104             dit.y = lpdit-&gt;y;
01105             dit.cx = lpdit-&gt;cx;
01106             dit.cy = lpdit-&gt;cy;
01107             dit.dwID = lpdit-&gt;id;
01108         }
01109 
01110         dit.x = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a852">XPixFromXDU</a>(dit.x, cxChar);
01111         dit.y = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a853">YPixFromYDU</a>(dit.y, cyChar);
01112         dit.cx = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a852">XPixFromXDU</a>(dit.cx, cxChar);
01113         dit.cy = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a853">YPixFromYDU</a>(dit.cy, cyChar);
01114 
01115         lpszClass = (LPWSTR)(((<a class="code" href="../../d9/d7/halvprnt_8c.html#a1">PBYTE</a>)(lpdit)) + (<a class="code" href="../../d7/d4/conexts_8c.html#a26">dt</a>.wDlgVer ? <span class="keyword">sizeof</span>(DLGITEMTEMPLATE2):<span class="keyword">sizeof</span>(DLGITEMTEMPLATE)));
01116 
01117         <span class="comment">/*</span>
01118 <span class="comment">         * If the first WORD is 0xFFFF the second word is the encoded class name index.</span>
01119 <span class="comment">         * Use it to look up the class name string.</span>
01120 <span class="comment">         */</span>
01121         <span class="keywordflow">if</span> (*(LPWORD)lpszClass == 0xFFFF) {
01122             lpszText = lpszClass + 2;
01123             lpszClass = (LPWSTR)(<a class="code" href="../../d1/d8/clglobal_8c.html#a4">gpsi</a>-&gt;<a class="code" href="../../d2/d6/structtagSERVERINFO.html#o12">atomSysClass</a>[*(((LPWORD)lpszClass)+1) &amp; ~<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a59">CODEBIT</a>]);
01124         } <span class="keywordflow">else</span> {
01125             lpszText = (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a1">UTCHAR</a> *)<a class="code" href="../../d2/d1/userexts_8c.html#a251">SkipSz</a>(lpszClass);
01126         }
01127         lpszText = (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a1">UTCHAR</a> *)<a class="code" href="../../d6/d0/usercli_8h.html#a123">NextWordBoundary</a>(lpszText); <span class="comment">// UINT align lpszText</span>
01128 
01129         dit.dwExStyle |= WS_EX_NOPARENTNOTIFY;
01130 
01131         <span class="comment">//</span>
01132         <span class="comment">// Replace flat borders with 3D ones for DS_3DLOOK dialogs</span>
01133         <span class="comment">// We test the WINDOW style, not the template style now.  This is so</span>
01134         <span class="comment">// that 4.0 apps--who get 3D stuff automatically--can turn it off on</span>
01135         <span class="comment">// create if they want.</span>
01136         <span class="comment">//</span>
01137 
01138         <span class="comment">//</span>
01139         <span class="comment">// HACK!</span>
01140         <span class="comment">// Treat DS_3DLOOK combos like they have a WS_EX_CLIENTEDGE.  Why</span>
01141         <span class="comment">// should we have to draw the borders of a combobox ourselves?</span>
01142         <span class="comment">// We can't do the same thing for WS_BORDER though becaues of</span>
01143         <span class="comment">// PC Fools--they use the presence of WS_BORDER to distinguish</span>
01144         <span class="comment">// between lists and combos.</span>
01145         <span class="comment">//</span>
01146 
01147         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, DF3DLOOK)) {
01148             <span class="keywordflow">if</span> (    (dit.style &amp; WS_BORDER) ||
01149                     (lpszClass == MAKEINTRESOURCE(<a class="code" href="../../d1/d8/clglobal_8c.html#a4">gpsi</a>-&gt;<a class="code" href="../../d2/d6/structtagSERVERINFO.html#o12">atomSysClass</a>[ICLS_COMBOBOX]))) {
01150 
01151                 dit.style &amp;= ~WS_BORDER;
01152                 dit.dwExStyle |= WS_EX_CLIENTEDGE;
01153             }
01154         }
01155 
01156         <span class="comment">/*</span>
01157 <span class="comment">         * Get pointer to additional data.  lpszText can point to an encoded</span>
01158 <span class="comment">         * ordinal number for some controls (e.g.  static icon control) so</span>
01159 <span class="comment">         * we check for that here.</span>
01160 <span class="comment">         */</span>
01161         <span class="keywordflow">if</span> (*(LPWORD)lpszText == 0xFFFF) {
01162             lpCreateParams = (LPWSTR)((<a class="code" href="../../d9/d7/halvprnt_8c.html#a1">PBYTE</a>)lpszText + 4);
01163             strWindowName.<a class="code" href="../../d2/d9/struct__LARGE__UNICODE__STRING.html#o3">Buffer</a> = lpszText;
01164             strWindowName.<a class="code" href="../../d2/d9/struct__LARGE__UNICODE__STRING.html#o0">Length</a> = 4;
01165             strWindowName.<a class="code" href="../../d2/d9/struct__LARGE__UNICODE__STRING.html#o1">MaximumLength</a> = 4;
01166             strWindowName.<a class="code" href="../../d2/d9/struct__LARGE__UNICODE__STRING.html#o2">bAnsi</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01167         } <span class="keywordflow">else</span> {
01168             lpCreateParams = (LPWSTR)((<a class="code" href="../../d9/d7/halvprnt_8c.html#a1">PBYTE</a>)<a class="code" href="../../d2/d1/userexts_8c.html#a252">WordSkipSz</a>(lpszText));
01169             <a class="code" href="../../d5/d6/chartran_8c.html#a7">RtlInitLargeUnicodeString</a>((<a class="code" href="../../d2/d9/struct__LARGE__UNICODE__STRING.html">PLARGE_UNICODE_STRING</a>)&amp;strWindowName,
01170                     lpszText, (UINT)-1);
01171         }
01172 
01173         <span class="comment">/*</span>
01174 <span class="comment">         * If control is edit control and caller wants global storage</span>
01175 <span class="comment">         * of edit text, allocate object in WOW and pass instance</span>
01176 <span class="comment">         * handle to CreateWindowEx().</span>
01177 <span class="comment">         */</span>
01178         <span class="keywordflow">if</span> (fWowWindow &amp;&amp; (bFlags &amp; <a class="code" href="../../d0/d9/dlgbegin_8c.html#a3">CD_GLOBALEDIT</a>) &amp;&amp;
01179                ((!<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a98">IS_PTR</a>(lpszClass) &amp;&amp;
01180                     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a99">PTR_TO_ID</a>(lpszClass) == (ATOM)(<a class="code" href="../../d1/d8/clglobal_8c.html#a4">gpsi</a>-&gt;<a class="code" href="../../d2/d6/structtagSERVERINFO.html#o12">atomSysClass</a>[<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a69">ICLS_EDIT</a>])) ||
01181                (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a98">IS_PTR</a>(lpszClass) &amp;&amp;
01182                     (wcscmp(lpszClass, szEDITCLASS) == 0)))) {
01183 
01184             <span class="comment">/*</span>
01185 <span class="comment">             * Allocate only one global object (first time we see editctl.)</span>
01186 <span class="comment">             */</span>
01187             <span class="keywordflow">if</span> (!(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a793">PDLG</a>(pwnd)-&gt;hData)) {
01188                 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a793">PDLG</a>(pwnd)-&gt;hData = <a class="code" href="../../d3/d8/client_8c.html#a84">GetEditDS</a>();
01189                 <span class="keywordflow">if</span> (!(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a793">PDLG</a>(pwnd)-&gt;hData))
01190                     <span class="keywordflow">goto</span> NoCreate;
01191             }
01192 
01193             hmodCreate = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a793">PDLG</a>(pwnd)-&gt;hData;
01194             dwExpWinVer2 = <a class="code" href="../../d6/d0/usercli_8h.html#a134">GETEXPWINVER</a>(hmodCreate);
01195         } <span class="keywordflow">else</span> {
01196             hmodCreate = hmod;
01197             dwExpWinVer2 = dwExpWinVer;
01198         }
01199 
01200 <span class="preprocessor">#if DBG</span>
01201 <span class="preprocessor"></span>        <span class="keywordflow">if</span> ((dit.dwExStyle &amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a188">WS_EX_ANSICREATOR</a>) != 0) {
01202             RIPMSG1(RIP_WARNING, <span class="stringliteral">"Bad WS_EX_ style 0x%x for a control in the dialog"</span>,
01203                     dit.dwExStyle);
01204         }
01205 <span class="preprocessor">#endif // DBG</span>
01206 <span class="preprocessor"></span>
01207         <span class="comment">/*</span>
01208 <span class="comment">         * Get pointer to additional data.</span>
01209 <span class="comment">         *</span>
01210 <span class="comment">         * For WOW, instead of pointing lpCreateParams at the CreateParams</span>
01211 <span class="comment">         * data, set lpCreateParams to whatever DWORD is stored in the 32-bit</span>
01212 <span class="comment">         * DLGTEMPLATE's CreateParams.  WOW has already made sure that that</span>
01213 <span class="comment">         * 32-bit value is indeed a 16:16 pointer to the CreateParams in the</span>
01214 <span class="comment">         * 16-bit DLGTEMPLATE.</span>
01215 <span class="comment">         */</span>
01216 
01217         <span class="keywordflow">if</span> (*lpCreateParams) {
01218             lpCreateParamsData = (LPBYTE)lpCreateParams;
01219             <span class="keywordflow">if</span> (fWowWindow || fSCDLGFlags &amp; SCDLG_16BIT) {
01220                 lpCreateParamsData = 
01221                     (LPBYTE)ULongToPtr( *(UNALIGNED DWORD *) <span class="comment">/* Sundown WOW: zero-extension */</span>
01222                     (lpCreateParamsData + <span class="keyword">sizeof</span>(WORD)) );
01223             }
01224         } <span class="keywordflow">else</span> {
01225             lpCreateParamsData = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
01226         }
01227 
01228         <span class="comment">/*</span>
01229 <span class="comment">         * If the dialog template specifies a menu ID then TestwndChild(pwnd)</span>
01230 <span class="comment">         * must be TRUE or CreateWindowEx will think the ID is an hMenu rather</span>
01231 <span class="comment">         * than an ID (in a dialog template you'll never have an hMenu).</span>
01232 <span class="comment">         * However for compatibility reasons we let it go if the ID = 0.</span>
01233 <span class="comment">         */</span>
01234         <span class="keywordflow">if</span> (dit.dwID) {
01235             <span class="comment">/*</span>
01236 <span class="comment">             * This makes TestwndChild(pwnd) on this window return TRUE.</span>
01237 <span class="comment">             */</span>
01238             dit.style |= WS_CHILD;
01239             dit.style &amp;= ~WS_POPUP;
01240         }
01241 
01242         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a98">IS_PTR</a>(lpszClass)) {
01243             <a class="code" href="../../d5/d6/chartran_8c.html#a7">RtlInitLargeUnicodeString</a>((<a class="code" href="../../d2/d9/struct__LARGE__UNICODE__STRING.html">PLARGE_UNICODE_STRING</a>)&amp;strClassName,
01244                     lpszClass, (UINT)-1);
01245             pstrClassName = &amp;strClassName;
01246         } <span class="keywordflow">else</span> {
01247             pstrClassName = (<a class="code" href="../../d1/d9/struct__LARGE__STRING.html">PLARGE_STRING</a>)lpszClass;
01248         }
01249         UserAssert((dit.dwExStyle &amp; WS_EX_MDICHILD) == 0);
01250 
01251         hwnd2 = <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a290">NtUserCreateWindowEx</a>(
01252                 dit.dwExStyle | ((fSCDLGFlags &amp; SCDLG_ANSI) ? WS_EX_ANSICREATOR : 0),
01253                 pstrClassName,
01254                 &amp;strWindowName,
01255                 dit.style,
01256                 <a class="code" href="../../d0/d9/dlgbegin_8c.html#a12">DefShortToInt</a>(dit.x),
01257                 dit.y,
01258                 <a class="code" href="../../d0/d9/dlgbegin_8c.html#a12">DefShortToInt</a>(dit.cx),
01259                 dit.cy,
01260                 hwnd,
01261                 (HMENU)LongToHandle( dit.dwID ),
01262                 hmodCreate,
01263                 lpCreateParamsData,
01264                 dwExpWinVer2);
01265 
01266         <span class="keywordflow">if</span> (hwnd2 == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01267 NoCreate:
01268             <span class="comment">/*</span>
01269 <span class="comment">             * Couldn't create the window -- return NULL.</span>
01270 <span class="comment">             */</span>
01271             <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, DFNOFAILCREATE)) {
01272                 RIPMSG0(RIP_WARNING, <span class="stringliteral">"CreateDialog() failed: couldn't create control"</span>);
01273                 <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a159">NtUserDestroyWindow</a>(hwnd);
01274                 <span class="keywordflow">return</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
01275             }
01276         } <span class="keywordflow">else</span> {
01277 
01278             <span class="keywordflow">if</span> (dit.dwHelpID) {
01279                 <a class="code" href="../../d6/d0/usercli_8h.html#a220">NtUserSetWindowContextHelpId</a>(hwnd2, dit.dwHelpID);
01280             }
01281 
01282         <span class="comment">/*</span>
01283 <span class="comment">         * If it is a not a default system font, set the font for all the</span>
01284 <span class="comment">         * child windows of the dialogbox.</span>
01285 <span class="comment">         */</span>
01286             <span class="keywordflow">if</span> (hNewFont != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01287                 <a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(hwnd2, WM_SETFONT, (WPARAM)hNewFont, 0L);
01288             }
01289 
01290         <span class="comment">/*</span>
01291 <span class="comment">         * Result gets ID of last (hopefully only) defpushbutton.</span>
01292 <span class="comment">         */</span>
01293             <span class="keywordflow">if</span> (<a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(hwnd2, WM_GETDLGCODE, 0, 0L) &amp; DLGC_DEFPUSHBUTTON) {
01294                 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a793">PDLG</a>(pwnd)-&gt;result = dit.dwID;
01295             }
01296 
01297         }
01298         <span class="comment">/*</span>
01299 <span class="comment">         * Point at next item template</span>
01300 <span class="comment">         */</span>
01301         lpdit = (LPDLGITEMTEMPLATE)<a class="code" href="../../d6/d0/usercli_8h.html#a124">NextDWordBoundary</a>(
01302                 (LPBYTE)(lpCreateParams + 1) + *lpCreateParams);
01303     }
01304 
01305     <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, DFCONTROL)) {
01306         <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwndT = <a class="code" href="../../d6/d0/usercli_8h.html#a642">_GetNextDlgTabItem</a>(pwnd, NULL, FALSE);
01307         hwndEditFirst = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a450">HW</a>(pwndT);
01308     }
01309 
01310     <span class="keywordflow">if</span> (lpfnDialog != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01311         fSuccess = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>)<a class="code" href="../../d6/d0/usercli_8h.html#a600">SendMessageWorker</a>(pwnd, WM_INITDIALOG,
01312                                (WPARAM)hwndEditFirst, lParam, FALSE);
01313 
01314         <span class="comment">//</span>
01315         <span class="comment">// Make sure the window didn't get nuked during WM_INITDIALOG</span>
01316         <span class="comment">//</span>
01317         <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d0/usercli_8h.html#a21">RevalidateHwnd</a>(hwnd)) {
01318             <span class="keywordflow">goto</span> CreateDialogReturn;
01319         }
01320         <span class="keywordflow">if</span> (fSuccess &amp;&amp; !<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a793">PDLG</a>(pwnd)-&gt;fEnd) {
01321 
01322             <span class="comment">//</span>
01323             <span class="comment">// To remove the two-default-push-buttons problem, we must make</span>
01324             <span class="comment">// sure CheckDefPushButton() will remove default from other push</span>
01325             <span class="comment">// buttons.  This happens only if hwndEditFirst != hwndNewFocus;</span>
01326             <span class="comment">// So, we make it NULL here. This breaks Designer's install</span>
01327             <span class="comment">// program(which can't take a DM_GETDEFID.  So, we do a version</span>
01328             <span class="comment">// check here.</span>
01329             <span class="comment">//</span>
01330             <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, DFCONTROL)) {
01331                 <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwndT;
01332                 <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d9/client_2wow_8c.html#a11">IsWindow</a>(hwndEditFirst) || <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFWIN40COMPAT))
01333                     hwndEditFirst = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
01334 
01335                 <span class="comment">//</span>
01336                 <span class="comment">// They could have disabled hwndEditFirst during WM_INITDIALOG.</span>
01337                 <span class="comment">// So, let use obtain the First Tab again.</span>
01338                 <span class="comment">//</span>
01339                 pwndT = <a class="code" href="../../d6/d0/usercli_8h.html#a642">_GetNextDlgTabItem</a>(pwnd, NULL, FALSE);
01340                 <span class="keywordflow">if</span> (hwndNewFocus = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a450">HW</a>(pwndT)) {
01341                     <a class="code" href="../../d6/d0/usercli_8h.html#a759">DlgSetFocus</a>(hwndNewFocus);
01342                 }
01343 
01344                 <a class="code" href="../../d6/d0/usercli_8h.html#a757">xxxCheckDefPushButton</a>(pwnd, hwndEditFirst, hwndNewFocus);
01345             }
01346         }
01347     }
01348 
01349     <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d9/client_2wow_8c.html#a11">IsWindow</a>(hwnd))
01350     {
01351         <span class="comment">// Omnis7 relies on a nonzero return even though they nuked this</span>
01352         <span class="comment">// dialog during processing of the WM_INITDIALOG message</span>
01353         <span class="comment">// -- jeffbog -- 2/24/95 -- Win95B B#12368</span>
01354         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a150">GETAPPVER</a>() &lt; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a101">VER40</a>) {
01355             <span class="keywordflow">return</span>(hwnd);
01356         }
01357 
01358         <span class="keywordflow">return</span>(<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>);
01359     }
01360 
01361     <span class="comment">/*</span>
01362 <span class="comment">     * UISTATE: if keyboard indicators are on and this is a topmost dialog</span>
01363 <span class="comment">     * set the internal bit.</span>
01364 <span class="comment">     */</span>
01365     <span class="keywordflow">if</span> (<a class="code" href="../../d1/d0/inc_2user_8h.html#a384">TEST_KbdCuesPUSIF</a>) {
01366         <span class="comment">/*</span>
01367 <span class="comment">         * If property page, UISTATE bits were copied from parent when I was created</span>
01368 <span class="comment">         * Top level dialogs act as containers and initialize their state based on</span>
01369 <span class="comment">         * the type of the last input event, after sending UIS_INITIALIZE</span>
01370 <span class="comment">         */</span>
01371         <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a735">TestwndChild</a>(pwnd)) {
01372             <a class="code" href="../../d6/d0/usercli_8h.html#a600">SendMessageWorker</a>(pwnd, WM_CHANGEUISTATE, MAKEWPARAM(UIS_INITIALIZE, 0), 0, FALSE);
01373         }
01374     }
01375 
01376     <span class="comment">/*</span>
01377 <span class="comment">     * Bring this dialog into the foreground</span>
01378 <span class="comment">     * if DS_SETFOREGROUND is set.</span>
01379 <span class="comment">     */</span>
01380     <span class="keywordflow">if</span> (bFlags &amp; <a class="code" href="../../d0/d9/dlgbegin_8c.html#a5">CD_SETFOREGROUND</a>) {
01381         <a class="code" href="../../d6/d0/usercli_8h.html#a228">NtUserSetForegroundWindow</a>(hwnd);
01382         <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d9/client_2wow_8c.html#a11">IsWindow</a>(hwnd)) {
01383             hwnd = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
01384             <span class="keywordflow">goto</span> CreateDialogReturn;
01385         }
01386     }
01387 
01388     <span class="keywordflow">if</span> ((bFlags &amp; <a class="code" href="../../d0/d9/dlgbegin_8c.html#a2">CD_VISIBLE</a>) &amp;&amp; !<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a793">PDLG</a>(pwnd)-&gt;fEnd &amp;&amp; (!<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFVISIBLE))) {
01389         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a237">NtUserShowWindow</a>(hwnd, SHOW_OPENWINDOW);
01390         <a class="code" href="../../d3/d8/client_8c.html#a140">UpdateWindow</a>(hwnd);
01391     }
01392 
01393 CreateDialogReturn:
01394 
01395     <span class="comment">/*</span>
01396 <span class="comment">     * 17609 Gupta's SQLWin deletes the window before CreateDialog returns</span>
01397 <span class="comment">     * but still expects non-zero return value from CreateDialog so we will</span>
01398 <span class="comment">     * do like win 3.1 and not revalidate for 16 bit apps</span>
01399 <span class="comment">     */</span>
01400     <span class="keywordflow">if</span> (!(fSCDLGFlags &amp; SCDLG_NOREVALIDATE) &amp;&amp; !<a class="code" href="../../d6/d0/usercli_8h.html#a21">RevalidateHwnd</a>(hwnd)) {
01401         hwnd = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
01402     }
01403 
01404     <span class="keywordflow">return</span> hwnd;
01405 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a751" doxytag="usercli.h::InternalDialogBox" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> INT_PTR InternalDialogBox           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hmod</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPDLGTEMPLATE&nbsp;</td>
          <td class="mdname" nowrap> <em>lpDlgTemplate</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwndOwner</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>DLGPROC&nbsp;</td>
          <td class="mdname" nowrap> <em>pfnWndProc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>dwInitParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>fFlags</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l01246">1246</a> of file <a class="el" href="../../d4/d8/dlgmgr_8c-source.html">dlgmgr.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d5/d8/nt6_2dlgmgr_8c-source.html#l01043">DialogBox2()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d4/d7/winmgrc_8c-source.html#l00449">GetActiveWindow()</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00120">GetDesktopWindow()</a>, <a class="el" href="../../d3/d7/rtl_2winmgr_8c-source.html#l00817">GetTopLevelWindow()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01515">HWq</a>, <a class="el" href="../../d1/d8/dlgbegin_8c-source.html#l00553">InternalCreateDialog()</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01561">NtUserEnableWindow</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05886">NtUserSetCursor()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01513">PtoHq</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00160">SAMEWOWHANDLE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00202">SYSMET</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02561">TestwndChild</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00362">ThreadLock</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00366">ThreadUnlock</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00120">ValidateHwnd</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02418">WFDISABLED</a>.
<p>
Referenced by <a class="el" href="../../d5/d8/clres_8c-source.html#l00758">DialogBoxIndirectParamAorW()</a>, and <a class="el" href="../../d7/d3/msgbox_8c-source.html#l00730">SoftModalMessageBox()</a>.
<p>
<pre class="fragment"><div>01253 {
01254     INT_PTR i;
01255     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fDisabled;
01256     HWND hwnd;
01257     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwndOwner;
01258     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fOwnerIsActiveWindow = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01259     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpwndOwner;
01260     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fUnlockOwner;
01261 
01262     UserAssert(!(fSCDLGFlags &amp; ~(SCDLG_CLIENT|SCDLG_ANSI|SCDLG_16BIT)));    <span class="comment">// These are the only valid flags</span>
01263 
01264     <span class="comment">/*</span>
01265 <span class="comment">     * If hwndOwner == HWNDESKTOP, change it to NULL.  This way the desktop</span>
01266 <span class="comment">     * (and all its children) won't be disabled if the dialog is modal.</span>
01267 <span class="comment">     */</span>
01268     <span class="keywordflow">if</span> (hwndOwner &amp;&amp; <a class="code" href="../../d6/d0/usercli_8h.html#a15">SAMEWOWHANDLE</a>(hwndOwner, <a class="code" href="../../d3/d9/client_2wow_8c.html#a4">GetDesktopWindow</a>()))
01269         hwndOwner = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
01270 
01271     <span class="comment">/*</span>
01272 <span class="comment">     * We return 0 if the ValidateHwnd fails in order to match Win 3.1</span>
01273 <span class="comment">     * validation layer which always returns 0 for invalid hwnds even</span>
01274 <span class="comment">     * if the function is spec'ed to return -1.  Autocad setup bug #3615</span>
01275 <span class="comment">     */</span>
01276     <span class="keywordflow">if</span> (hwndOwner) {
01277         <span class="keywordflow">if</span> ((pwndOwner = <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(hwndOwner)) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01278             <span class="keywordflow">return</span> (0<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>);
01279         }
01280     } <span class="keywordflow">else</span> {
01281         pwndOwner = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
01282     }
01283 
01284     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pwndOwner);
01285 
01286     fUnlockOwner = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01287     <span class="keywordflow">if</span> (pwndOwner != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01288 
01289         <span class="comment">/* The following fixes an AV in Corel Photo-Paint 6.0.  It passes a</span>
01290 <span class="comment">         * 16-bit HWND in, and croaks at some point when it gets 16-bit hwnds</span>
01291 <span class="comment">         * back in send messages. FritzS -- fixing bug 12531</span>
01292 <span class="comment">         */</span>
01293         hwndOwner = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a449">PtoHq</a>(pwndOwner);
01294 
01295         <span class="comment">/*</span>
01296 <span class="comment">         * Make sure the owner is a top level window.</span>
01297 <span class="comment">         */</span>
01298         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a735">TestwndChild</a>(pwndOwner)) {
01299             pwndOwner = <a class="code" href="../../d2/d8/rtl_2winmgr_8c.html#a11">GetTopLevelWindow</a>(pwndOwner);
01300             hwndOwner = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(pwndOwner);
01301             <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(pwndOwner, &amp;tlpwndOwner);
01302             fUnlockOwner = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01303         }
01304 
01305         <span class="comment">/*</span>
01306 <span class="comment">         * Remember if window was originally disabled (so we can set</span>
01307 <span class="comment">         * the correct state when the dialog goes away.</span>
01308 <span class="comment">         */</span>
01309         fDisabled = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwndOwner, WFDISABLED);
01310         fOwnerIsActiveWindow = (<a class="code" href="../../d6/d0/usercli_8h.html#a15">SAMEWOWHANDLE</a>(hwndOwner, <a class="code" href="../../d3/d8/winmgrc_8c.html#a22">GetActiveWindow</a>()));
01311 
01312         <span class="comment">/*</span>
01313 <span class="comment">         * Disable the window.</span>
01314 <span class="comment">         */</span>
01315         <a class="code" href="../../d6/d0/usercli_8h.html#a216">NtUserEnableWindow</a>(hwndOwner, FALSE);
01316     }
01317 
01318     <span class="comment">/*</span>
01319 <span class="comment">     * Don't show cursors on a mouseless system. Put up an hour glass while</span>
01320 <span class="comment">     * the dialog comes up.</span>
01321 <span class="comment">     */</span>
01322     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(MOUSEPRESENT)) {
01323         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a224">NtUserSetCursor</a>(LoadCursor(NULL, IDC_WAIT));
01324     }
01325 
01326     <span class="comment">/*</span>
01327 <span class="comment">     * Creates the dialog.  Frees the menu if this routine fails.</span>
01328 <span class="comment">     */</span>
01329     hwnd = <a class="code" href="../../d6/d0/usercli_8h.html#a750">InternalCreateDialog</a>(hModule, lpdt, 0, hwndOwner,
01330             pfnDialog, lParam, fSCDLGFlags);
01331 
01332     <span class="keywordflow">if</span> (hwnd == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01333 
01334         <span class="comment">/*</span>
01335 <span class="comment">         * The dialog creation failed.  Re-enable the window, destroy the</span>
01336 <span class="comment">         * menu, ie., fail gracefully.</span>
01337 <span class="comment">         */</span>
01338         <span class="keywordflow">if</span> (!fDisabled &amp;&amp; hwndOwner != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
01339             <a class="code" href="../../d6/d0/usercli_8h.html#a216">NtUserEnableWindow</a>(hwndOwner, TRUE);
01340 
01341         <span class="keywordflow">if</span> (fUnlockOwner)
01342             <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndOwner);
01343         <span class="keywordflow">return</span> -1;
01344     }
01345 
01346     i = <a class="code" href="../../d4/d9/nt6_2dlgmgr_8c.html#a22">DialogBox2</a>(hwnd, hwndOwner, fDisabled, fOwnerIsActiveWindow);
01347 
01348     <span class="keywordflow">if</span> (fUnlockOwner)
01349         <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndOwner);
01350     <span class="keywordflow">return</span> i;
01351 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a556" doxytag="usercli.h::InternalFindWindowExA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HWND InternalFindWindowExA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwndParent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwndChild</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPCSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>pClassName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPCSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>pWindowName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwFlag</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00041">WOWFindWindow()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a557" doxytag="usercli.h::InternalFindWindowExW" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HWND InternalFindWindowExW           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwndParent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwndChild</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPCTSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>pClassName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPCTSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>pWindowName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwFlag</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d2/d9/client_2help_8c-source.html#l00375">FindWinHelpWindow()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a768" doxytag="usercli.h::InternalInsertMenuItem" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL InternalInsertMenuItem           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HMENU&nbsp;</td>
          <td class="mdname" nowrap> <em>hMenu</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>uID</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fByPosition</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPCMENUITEMINFO&nbsp;</td>
          <td class="mdname" nowrap> <em>lpmii</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d8/clmenu_8c-source.html#l00439">439</a> of file <a class="el" href="../../d0/d8/clmenu_8c-source.html">clmenu.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00377">ThunkedMenuItemInfo()</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00362">AppendToWindowsMenu()</a>, <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00165">MDIAddSysMenu()</a>, and <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00417">SwitchWindowsMenus()</a>.
<p>
<pre class="fragment"><div>00440 {
00441  <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a771">ThunkedMenuItemInfo</a>(hMenu, uID, fByPosition, TRUE, (LPMENUITEMINFOW)lpmii, FALSE);
00442 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a546" doxytag="usercli.h::InternalScrollWindowEx" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int InternalScrollWindowEx           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>dx</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>dy</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>CONST RECT *&nbsp;</td>
          <td class="mdname" nowrap> <em>prcScroll</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>CONST RECT *&nbsp;</td>
          <td class="mdname" nowrap> <em>prcClip</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HRGN&nbsp;</td>
          <td class="mdname" nowrap> <em>hrgnUpdate</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPRECT&nbsp;</td>
          <td class="mdname" nowrap> <em>prcUpdate</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>dwFlags</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwTime</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a686" doxytag="usercli.h::ISelFromPt" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL ISelFromPt           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>POINT&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPDWORD&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00920">920</a> of file <a class="el" href="../../d0/d1/lboxctl2_8c-source.html">lboxctl2.c</a>.
<p>
References <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00924">_GetClientRect()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01948">tagLBIV::cMac</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01958">tagLBIV::cxColumn</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01957">tagLBIV::cyChar</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01995">tagLBIV::fMultiColumn</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02023">tagLBIV::fRightAlign</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00025">INT</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01959">tagLBIV::itemsPerColumn</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01941">tagLBIV::iTop</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00179">LBGetItemRect()</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01964">tagLBIV::OwnerDraw</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00437">OWNERDRAWVAR</a>, <a class="el" href="../../d4/d5/rect_8c-source.html#l00118">PtInRect()</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01940">tagLBIV::spwnd</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>.
<p>
Referenced by <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00732">LBDropObjectHandler()</a>, <a class="el" href="../../d7/d0/lb1_8c-source.html#l00032">ListBoxWndProcWorker()</a>, and <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01290">xxxTrackMouse()</a>.
<p>
<pre class="fragment"><div>00924 {
00925     RECT rect;
00926     <span class="keywordtype">int</span> y;
00927     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> mouseHighWord = 0;
00928     <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a> sItem;
00929     <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a> sTmp;
00930 
00931     <a class="code" href="../../d6/d9/rtl_2wow_8c.html#a19">_GetClientRect</a>(plb-&gt;spwnd, &amp;rect);
00932 
00933     <span class="keywordflow">if</span> (pt.y &lt; 0) {
00934 
00935         <span class="comment">/*</span>
00936 <span class="comment">         * Mouse is out of bounds above listbox</span>
00937 <span class="comment">         */</span>
00938         *piItem = plb-&gt;iTop;
00939         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00940     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((y = pt.y) &gt; rect.bottom) {
00941         y = rect.bottom;
00942         mouseHighWord = 1;
00943     }
00944 
00945     <span class="keywordflow">if</span> (pt.x &lt; 0 || pt.x &gt; rect.right)
00946         mouseHighWord = 1;
00947 
00948     <span class="comment">/*</span>
00949 <span class="comment">     * Now just need to check if y mouse coordinate intersects item's rectangle</span>
00950 <span class="comment">     */</span>
00951     <span class="keywordflow">if</span> (plb-&gt;OwnerDraw != <a class="code" href="../../d6/d0/usercli_8h.html#a63">OWNERDRAWVAR</a>) {
00952         <span class="keywordflow">if</span> (plb-&gt;fMultiColumn) {
00953             <span class="keywordflow">if</span> (y &lt; plb-&gt;itemsPerColumn * plb-&gt;cyChar) {
00954                 <span class="keywordflow">if</span> (plb-&gt;fRightAlign)
00955                     sItem = plb-&gt;iTop + (<a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a>)((y / plb-&gt;cyChar) +
00956                             ((rect.right - pt.x) / plb-&gt;cxColumn) * plb-&gt;itemsPerColumn);
00957                 <span class="keywordflow">else</span>
00958                     sItem = plb-&gt;iTop + (<a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a>)((y / plb-&gt;cyChar) +
00959                             (pt.x / plb-&gt;cxColumn) * plb-&gt;itemsPerColumn);
00960 
00961             } <span class="keywordflow">else</span> {
00962 
00963                 <span class="comment">/*</span>
00964 <span class="comment">                 * User clicked in blank space at the bottom of a column.</span>
00965 <span class="comment">                 * Just select the last item in the column.</span>
00966 <span class="comment">                 */</span>
00967                 mouseHighWord = 1;
00968                 sItem = plb-&gt;iTop + (plb-&gt;itemsPerColumn - 1) +
00969                         (<a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a>)((pt.x / plb-&gt;cxColumn) * plb-&gt;itemsPerColumn);
00970             }
00971         } <span class="keywordflow">else</span> {
00972             sItem = plb-&gt;iTop + (<a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a>)(y / plb-&gt;cyChar);
00973         }
00974     } <span class="keywordflow">else</span> {
00975 
00976         <span class="comment">/*</span>
00977 <span class="comment">         * VarHeightOwnerdraw so we gotta do this the hardway...   Set the x</span>
00978 <span class="comment">         * coordinate of the mouse down point to be inside the listbox client</span>
00979 <span class="comment">         * rectangle since we no longer care about it.  This lets us use the</span>
00980 <span class="comment">         * point in rect calls.</span>
00981 <span class="comment">         */</span>
00982         pt.x = 8;
00983         pt.y = y;
00984         <span class="keywordflow">for</span> (sTmp = plb-&gt;iTop; sTmp &lt; plb-&gt;cMac; sTmp++) {
00985             (<span class="keywordtype">void</span>)<a class="code" href="../../d6/d0/usercli_8h.html#a744">LBGetItemRect</a>(plb, sTmp, &amp;rect);
00986             <span class="keywordflow">if</span> (<a class="code" href="../../d3/d6/rect_8c.html#a5">PtInRect</a>(&amp;rect, pt)) {
00987                 *piItem = sTmp;
00988                 <span class="keywordflow">return</span> mouseHighWord;
00989             }
00990         }
00991 
00992         <span class="comment">/*</span>
00993 <span class="comment">         * Point was at the empty area at the bottom of a not full listbox</span>
00994 <span class="comment">         */</span>
00995         *piItem = plb-&gt;cMac - 1;
00996         <span class="keywordflow">return</span> mouseHighWord;
00997     }
00998 
00999     <span class="comment">/*</span>
01000 <span class="comment">     * Check if user clicked on the blank area at the bottom of a not full list.</span>
01001 <span class="comment">     * Assumes &gt; 0 items in the listbox.</span>
01002 <span class="comment">     */</span>
01003     <span class="keywordflow">if</span> (sItem &gt; plb-&gt;cMac - 1) {
01004         mouseHighWord = 1;
01005         sItem = plb-&gt;cMac - 1;
01006     }
01007 
01008     *piItem = sItem;
01009     <span class="keywordflow">return</span> mouseHighWord;
01010 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a547" doxytag="usercli.h::IsMetaFile" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL IsMetaFile           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HDC&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hdc</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d1/client_2drawtext_8c-source.html#l00027">27</a> of file <a class="el" href="../../d4/d1/client_2drawtext_8c-source.html">client/drawtext.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, and <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>.
<p>
Referenced by <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00446">DrawCaption()</a>, <a class="el" href="../../d1/d7/ntcftxt_8h-source.html#l01532">DrawCaptionTemp()</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l01210">DrawIconEx()</a>, and <a class="el" href="../../d8/d6/menuc_8c-source.html#l00313">DrawMenuBarTemp()</a>.
<p>
<pre class="fragment"><div>00029 {
00030     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwType = GetObjectType(hdc);
00031     <span class="keywordflow">return</span> (dwType == OBJ_METAFILE ||
00032             dwType == OBJ_METADC ||
00033             dwType == OBJ_ENHMETAFILE ||
00034             dwType == OBJ_ENHMETADC);
00035 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a687" doxytag="usercli.h::IsSelected" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL IsSelected           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00480">480</a> of file <a class="el" href="../../d0/d1/lboxctl2_8c-source.html">lboxctl2.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01948">tagLBIV::cMac</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01984">tagLBIV::fHasData</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01980">tagLBIV::fHasStrings</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01744">HILITEONLY</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01942">tagLBIV::iSel</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01951">tagLBIV::rgpch</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00793">SINGLESEL</a>, and <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01967">tagLBIV::wMultiple</a>.
<p>
Referenced by <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l03131">LBoxGetSelItems()</a>, <a class="el" href="../../d7/d0/lb1_8c-source.html#l00032">ListBoxWndProcWorker()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l03754">xxxAlterHilite()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02183">xxxLBoxCtlKeyInput()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00798">xxxLBPaint()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l03206">xxxLBSelRange()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00430">xxxLBSetCaret()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l03455">xxxLBSetSel()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01181">xxxResetWorld()</a>, and <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01290">xxxTrackMouse()</a>.
<p>
<pre class="fragment"><div>00484 {
00485     LPBYTE lp;
00486 
00487     <span class="keywordflow">if</span> ((sItem &gt;= plb-&gt;cMac) || (sItem &lt; 0)) {
00488         RIPERR0(ERROR_INVALID_INDEX, RIP_VERBOSE, <span class="stringliteral">""</span>);
00489 <span class="comment">//        return LB_ERR;</span>
00490         <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00491     }
00492 
00493     <span class="keywordflow">if</span> (plb-&gt;wMultiple == <a class="code" href="../../d6/d0/usercli_8h.html#a114">SINGLESEL</a>) {
00494         <span class="keywordflow">return</span> (sItem == plb-&gt;iSel);
00495     }
00496 
00497     lp = plb-&gt;rgpch + sItem +
00498              (plb-&gt;cMac * (plb-&gt;fHasStrings
00499                                 ? <span class="keyword">sizeof</span>(<a class="code" href="../../d6/d9/structtagLBItem.html">LBItem</a>)
00500                                 : (plb-&gt;fHasData
00501                                     ? <span class="keyword">sizeof</span>(<a class="code" href="../../d8/d9/structtagLBODItem.html">LBODItem</a>)
00502                                     : 0)));
00503     sItem = *lp;
00504 
00505     <span class="keywordflow">if</span> (wOpFlags == <a class="code" href="../../d6/d0/usercli_8h.html#a248">HILITEONLY</a>) {
00506         sItem &gt;&gt;= 4;
00507     } <span class="keywordflow">else</span> {
00508         sItem &amp;= 0x0F;  <span class="comment">/* SELONLY */</span>
00509     }
00510 
00511     <span class="keywordflow">return</span> sItem;
00512 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a727" doxytag="usercli.h::LastFullVisible" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a> LastFullVisible           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01090">1090</a> of file <a class="el" href="../../d0/d1/lboxctl2_8c-source.html">lboxctl2.c</a>.
<p>
References <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01944">tagLBIV::cItemFullMax</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00526">CItemInWindow()</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01948">tagLBIV::cMac</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01995">tagLBIV::fMultiColumn</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00025">INT</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01941">tagLBIV::iTop</a>, <a class="el" href="../../d9/d5/sertl_8c-source.html#l00332">max</a>, <a class="el" href="../../d6/d3/acpitabl_8h-source.html#l00366">min</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01964">tagLBIV::OwnerDraw</a>, and <a class="el" href="../../d7/d9/usercli_8h-source.html#l00437">OWNERDRAWVAR</a>.
<p>
Referenced by <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02092">xxxInsureVisible()</a>.
<p>
<pre class="fragment"><div>01092 {
01093     <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a> iLastItem;
01094 
01095     <span class="keywordflow">if</span> (plb-&gt;OwnerDraw == <a class="code" href="../../d6/d0/usercli_8h.html#a63">OWNERDRAWVAR</a> || plb-&gt;fMultiColumn) {
01096         iLastItem = plb-&gt;iTop + <a class="code" href="../../d6/d0/usercli_8h.html#a713">CItemInWindow</a>(plb, FALSE) - 1;
01097         iLastItem = <a class="code" href="../../d8/d6/sertl_8c.html#a1">max</a>(iLastItem, plb-&gt;iTop);
01098     } <span class="keywordflow">else</span> {
01099         iLastItem = <a class="code" href="../../d5/d4/acpitabl_8h.html#a69">min</a>(plb-&gt;iTop + plb-&gt;cItemFullMax - 1, plb-&gt;cMac - 1);
01100     }
01101     <span class="keywordflow">return</span> iLastItem;
01102 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a748" doxytag="usercli.h::LBCalcAllocNeeded" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> UINT LBCalcAllocNeeded           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l01220">1220</a> of file <a class="el" href="../../d9/d0/lboxctl1_8c-source.html">lboxctl1.c</a>.
<p>
References <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01984">tagLBIV::fHasData</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01980">tagLBIV::fHasStrings</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01964">tagLBIV::OwnerDraw</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00437">OWNERDRAWVAR</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00793">SINGLESEL</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, and <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01967">tagLBIV::wMultiple</a>.
<p>
Referenced by <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l01107">xxxLBSetCount()</a>.
<p>
<pre class="fragment"><div>01223 {
01224     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> cb;
01225 
01226     <span class="comment">/*</span>
01227 <span class="comment">     * Allocate memory for pointers to the strings.</span>
01228 <span class="comment">     */</span>
01229     cb = cItems * (plb-&gt;fHasStrings ? <span class="keyword">sizeof</span>(<a class="code" href="../../d6/d9/structtagLBItem.html">LBItem</a>)
01230                                     : (plb-&gt;fHasData ? <span class="keyword">sizeof</span>(<a class="code" href="../../d8/d9/structtagLBODItem.html">LBODItem</a>)
01231                                                     : 0));
01232 
01233     <span class="comment">/*</span>
01234 <span class="comment">     * If multiple selection list box (MULTIPLESEL or EXTENDEDSEL), then</span>
01235 <span class="comment">     * allocate an extra byte per item to keep track of it's selection state.</span>
01236 <span class="comment">     */</span>
01237     <span class="keywordflow">if</span> (plb-&gt;wMultiple != <a class="code" href="../../d6/d0/usercli_8h.html#a114">SINGLESEL</a>) {
01238         cb += cItems;
01239     }
01240 
01241     <span class="comment">/*</span>
01242 <span class="comment">     * Extra bytes for each item so that we can store its height.</span>
01243 <span class="comment">     */</span>
01244     <span class="keywordflow">if</span> (plb-&gt;OwnerDraw == <a class="code" href="../../d6/d0/usercli_8h.html#a63">OWNERDRAWVAR</a>) {
01245         cb += cItems;
01246     }
01247 
01248     <span class="keywordflow">return</span> cb;
01249 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a743" doxytag="usercli.h::LBCalcItemRowsAndColumns" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID LBCalcItemRowsAndColumns           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d1/lboxmult_8c-source.html#l00025">25</a> of file <a class="el" href="../../d2/d1/lboxmult_8c-source.html">lboxmult.c</a>.
<p>
References <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00924">_GetClientRect()</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01944">tagLBIV::cItemFullMax</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01958">tagLBIV::cxColumn</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01957">tagLBIV::cyChar</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00025">INT</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01959">tagLBIV::itemsPerColumn</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01941">tagLBIV::iTop</a>, <a class="el" href="../../d9/d5/sertl_8c-source.html#l00332">max</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01960">tagLBIV::numberOfColumns</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01940">tagLBIV::spwnd</a>, and <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02000">xxxNewITop()</a>.
<p>
Referenced by <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00759">LBGetSetItemHeightHandler()</a>, <a class="el" href="../../d7/d0/lb1_8c-source.html#l00032">ListBoxWndProcWorker()</a>, <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00438">xxxLBSetFont()</a>, and <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00514">xxxLBSize()</a>.
<p>
<pre class="fragment"><div>00027 {
00028     RECT rc;
00029 
00030     <a class="code" href="../../d6/d9/rtl_2wow_8c.html#a19">_GetClientRect</a>(plb-&gt;spwnd, &amp;rc);
00031 
00032     <span class="comment">//</span>
00033     <span class="comment">// B#4155</span>
00034     <span class="comment">// We need to check if plb-&gt;cyChar has been initialized.  This is because</span>
00035     <span class="comment">// we remove WS_BORDER from old listboxes and add on WS_EX_CLIENTEDGE.</span>
00036     <span class="comment">// Since listboxes are always inflated by CXBORDER and CYBORDER, a</span>
00037     <span class="comment">// listbox that was created empty always ends up 2 x 2.  Since this isn't</span>
00038     <span class="comment">// big enough to fit the entire client border, we don't mark it as</span>
00039     <span class="comment">// present.  Thus the client isn't empty in VER40, although it was in</span>
00040     <span class="comment">// VER31 and before.  It is possible to get to this spot without</span>
00041     <span class="comment">// plb-&gt;cyChar having been initialized yet if the listbox  is</span>
00042     <span class="comment">// multicolumn &amp;&amp; ownerdraw variable.</span>
00043     <span class="comment">//</span>
00044 
00045     <span class="keywordflow">if</span> (rc.bottom &amp;&amp; rc.right &amp;&amp; plb-&gt;cyChar) {
00046 
00047         <span class="comment">/*</span>
00048 <span class="comment">         * Only make these calculations if the width &amp; height are positive</span>
00049 <span class="comment">         */</span>
00050         plb-&gt;itemsPerColumn = (<a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a>)<a class="code" href="../../d8/d6/sertl_8c.html#a1">max</a>(rc.bottom / plb-&gt;cyChar, 1);
00051         plb-&gt;numberOfColumns = (<a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a>)<a class="code" href="../../d8/d6/sertl_8c.html#a1">max</a>(rc.right / plb-&gt;cxColumn, 1);
00052 
00053         plb-&gt;cItemFullMax = plb-&gt;itemsPerColumn * plb-&gt;numberOfColumns;
00054 
00055         <span class="comment">/*</span>
00056 <span class="comment">         * Adjust iTop so it's at the top of a column</span>
00057 <span class="comment">         */</span>
00058         <a class="code" href="../../d6/d0/usercli_8h.html#a730">xxxNewITop</a>(plb, plb-&gt;iTop);
00059     }
00060 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a702" doxytag="usercli.h::LBCalcVarITopScrollAmt" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a> LBCalcVarITopScrollAmt           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d1/lboxvar_8c-source.html#l00198">198</a> of file <a class="el" href="../../d4/d1/lboxvar_8c-source.html">lboxvar.c</a>.
<p>
References <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00924">_GetClientRect()</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00025">INT</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00179">LBGetItemRect()</a>, and <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01940">tagLBIV::spwnd</a>.
<p>
Referenced by <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02012">xxxNewITopEx()</a>.
<p>
<pre class="fragment"><div>00202 {
00203     RECT rc;
00204     RECT rcClient;
00205 
00206     <a class="code" href="../../d6/d9/rtl_2wow_8c.html#a19">_GetClientRect</a>(plb-&gt;spwnd, (LPRECT)&amp;rcClient);
00207 
00208     <span class="comment">/*</span>
00209 <span class="comment">     * Just optimize redrawing when move +/- 1 item.  We will redraw all items</span>
00210 <span class="comment">     * if moving more than 1 item ahead or back.  This is good enough for now.</span>
00211 <span class="comment">     */</span>
00212     <span class="keywordflow">if</span> (iTopOld + 1 == iTopNew) {
00213 
00214         <span class="comment">/*</span>
00215 <span class="comment">         * We are scrolling the current iTop up off the top off the listbox so</span>
00216 <span class="comment">         * return a negative number.</span>
00217 <span class="comment">         */</span>
00218         <a class="code" href="../../d6/d0/usercli_8h.html#a744">LBGetItemRect</a>(plb, iTopOld, (LPRECT)&amp;rc);
00219         <span class="keywordflow">return</span> (rcClient.top - rc.bottom);
00220     }
00221 
00222     <span class="keywordflow">if</span> (iTopOld - 1 == iTopNew) {
00223 
00224         <span class="comment">/*</span>
00225 <span class="comment">         * We are scrolling the current iTop down and the previous item is</span>
00226 <span class="comment">         * becoming the new iTop so return a positive number.</span>
00227 <span class="comment">         */</span>
00228         <a class="code" href="../../d6/d0/usercli_8h.html#a744">LBGetItemRect</a>(plb, iTopNew, (LPRECT)&amp;rc);
00229         <span class="keywordflow">return</span> -rc.top;
00230     }
00231 
00232     <span class="keywordflow">return</span> rcClient.bottom - rcClient.top;
00233 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a720" doxytag="usercli.h::LBDropObjectHandler" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID LBDropObjectHandler           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PDROPSTRUCT&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00732">732</a> of file <a class="el" href="../../d3/d1/lboxrare_8c-source.html">lboxrare.c</a>.
<p>
References <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00920">ISelFromPt()</a>, and <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>.
<p>
Referenced by <a class="el" href="../../d7/d0/lb1_8c-source.html#l00032">ListBoxWndProcWorker()</a>.
<p>
<pre class="fragment"><div>00735 {
00736     LONG mouseSel;
00737 
00738     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a686">ISelFromPt</a>(plb, pds-&gt;ptDrop, &amp;mouseSel)) {
00739 
00740         <span class="comment">/*</span>
00741 <span class="comment">         * User dropped in empty space at bottom of listbox</span>
00742 <span class="comment">         */</span>
00743         pds-&gt;dwControlData = (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)-1<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>;
00744     } <span class="keywordflow">else</span> {
00745         pds-&gt;dwControlData = mouseSel;
00746     }
00747 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a409" doxytag="usercli.h::LBEvent" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void LBEvent           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00820">820</a> of file <a class="el" href="../../d3/d1/lboxrare_8c-source.html">lboxrare.c</a>.
<p>
References <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01265">FWINABLE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01514">HW</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00794">MULTIPLESEL</a>, <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00354">NotifyWinEvent()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00793">SINGLESEL</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01940">tagLBIV::spwnd</a>, and <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01967">tagLBIV::wMultiple</a>.
<p>
Referenced by <a class="el" href="../../d7/d0/lb1_8c-source.html#l00032">ListBoxWndProcWorker()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01875">xxxLBButtonUp()</a>, <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l00407">xxxLBInsertItem()</a>, <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l00842">xxxLBoxCtlDelete()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02183">xxxLBoxCtlKeyInput()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l03206">xxxLBSelRange()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l03259">xxxLBSetCurSel()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l03455">xxxLBSetSel()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01265">xxxSetISelBase()</a>, and <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01290">xxxTrackMouse()</a>.
<p>
<pre class="fragment"><div>00821 {
00822     UserAssert(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a405">FWINABLE</a>());
00823 
00824     <span class="keywordflow">switch</span> (uEvent) {
00825         <span class="keywordflow">case</span> EVENT_OBJECT_SELECTIONREMOVE:
00826             <span class="keywordflow">if</span> (plb-&gt;wMultiple != <a class="code" href="../../d6/d0/usercli_8h.html#a114">SINGLESEL</a>) {
00827                 <span class="keywordflow">break</span>;
00828             }
00829             iItem = -1;
00830             <span class="comment">//</span>
00831             <span class="comment">// FALL THRU</span>
00832             <span class="comment">//</span>
00833 
00834         <span class="keywordflow">case</span> EVENT_OBJECT_SELECTIONADD:
00835             <span class="keywordflow">if</span> (plb-&gt;wMultiple == <a class="code" href="../../d6/d0/usercli_8h.html#a115">MULTIPLESEL</a>) {
00836                 uEvent = EVENT_OBJECT_SELECTION;
00837             }
00838             <span class="keywordflow">break</span>;
00839 
00840         <span class="keywordflow">case</span> EVENT_OBJECT_SELECTIONWITHIN:
00841             iItem = -1;
00842             <span class="keywordflow">break</span>;
00843     }
00844 
00845     <a class="code" href="../../d8/d9/client_2ntstubs_8c.html#a12">NotifyWinEvent</a>(uEvent, <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a450">HW</a>(plb-&gt;spwnd), OBJID_CLIENT, iItem+1);
00846 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a721" doxytag="usercli.h::LBGetItemData" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LONG_PTR LBGetItemData           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l00176">176</a> of file <a class="el" href="../../d9/d0/lboxctl1_8c-source.html">lboxctl1.c</a>.
<p>
References <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01948">tagLBIV::cMac</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01984">tagLBIV::fHasData</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01980">tagLBIV::fHasStrings</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d6/d0/usercli_8h.html#a367">LBItem</a>, <a class="el" href="../../d6/d0/usercli_8h.html#a369">LBODItem</a>, <a class="el" href="../../d6/d0/usercli_8h.html#a370">lpLBODItem</a>, and <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01951">tagLBIV::rgpch</a>.
<p>
Referenced by <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l00214">LBGetText()</a>, <a class="el" href="../../d7/d0/lb1_8c-source.html#l00032">ListBoxWndProcWorker()</a>, <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l01053">xxxLBoxDeleteItem()</a>, and <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l03558">xxxLBoxDrawItem()</a>.
<p>
<pre class="fragment"><div>00179 {
00180     LONG_PTR buffer;
00181     LPBYTE lpItem;
00182 
00183     <span class="keywordflow">if</span> (sItem &lt; 0 || sItem &gt;= plb-&gt;cMac) {
00184         RIPERR0(ERROR_INVALID_INDEX, RIP_VERBOSE, <span class="stringliteral">""</span>);
00185         <span class="keywordflow">return</span> LB_ERR;
00186     }
00187 
00188     <span class="comment">// No-data listboxes always return 0L</span>
00189     <span class="comment">//</span>
00190     <span class="keywordflow">if</span> (!plb-&gt;fHasData) {
00191         <span class="keywordflow">return</span> 0<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>;
00192     }
00193 
00194     lpItem = (plb-&gt;rgpch +
00195             (sItem * (plb-&gt;fHasStrings ? <span class="keyword">sizeof</span>(<a class="code" href="../../d6/d9/structtagLBItem.html">LBItem</a>) : <span class="keyword">sizeof</span>(<a class="code" href="../../d8/d9/structtagLBODItem.html">LBODItem</a>))));
00196     buffer = (plb-&gt;fHasStrings ? ((<a class="code" href="../../d6/d9/structtagLBItem.html">lpLBItem</a>)lpItem)-&gt;itemData : ((<a class="code" href="../../d8/d9/structtagLBODItem.html">lpLBODItem</a>)lpItem)-&gt;itemData);
00197     <span class="keywordflow">return</span> buffer;
00198 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a744" doxytag="usercli.h::LBGetItemRect" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL LBGetItemRect           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPRECT&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00179">179</a> of file <a class="el" href="../../d0/d1/lboxctl2_8c-source.html">lboxctl2.c</a>.
<p>
References <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00924">_GetClientRect()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00526">CItemInWindow()</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01948">tagLBIV::cMac</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01958">tagLBIV::cxColumn</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01957">tagLBIV::cyChar</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02009">tagLBIV::fHorzBar</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01995">tagLBIV::fMultiColumn</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02023">tagLBIV::fRightAlign</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00025">INT</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01959">tagLBIV::itemsPerColumn</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01941">tagLBIV::iTop</a>, <a class="el" href="../../d4/d1/lboxvar_8c-source.html#l00025">LBGetVariableHeightItemHeight()</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01964">tagLBIV::OwnerDraw</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00437">OWNERDRAWVAR</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00245">SetRectEmpty</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01940">tagLBIV::spwnd</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02042">tagLBIV::xOrigin</a>, and <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02027">tagLBIV::xRightOrigin</a>.
<p>
Referenced by <a class="el" href="../../d4/d1/lboxvar_8c-source.html#l00101">CItemInWindowVarOwnerDraw()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00920">ISelFromPt()</a>, <a class="el" href="../../d4/d1/lboxvar_8c-source.html#l00198">LBCalcVarITopScrollAmt()</a>, <a class="el" href="../../d7/d0/lb1_8c-source.html#l00032">ListBoxWndProcWorker()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01111">xxxInvertLBItem()</a>, <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l00842">xxxLBoxCtlDelete()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00798">xxxLBPaint()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l03206">xxxLBSelRange()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00430">xxxLBSetCaret()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l03455">xxxLBSetSel()</a>, and <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00514">xxxLBSize()</a>.
<p>
<pre class="fragment"><div>00183 {
00184     <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a> sTmp;
00185     <span class="keywordtype">int</span> clientbottom;
00186 
00187     <span class="comment">/*</span>
00188 <span class="comment">     * Always allow an item number of 0 so that we can draw the caret which</span>
00189 <span class="comment">     * indicates the listbox has the focus even though it is empty.</span>
00190 <span class="comment"></span>
00191 <span class="comment">     * FreeHand 3.1 passes in -1 as the itemNumber and expects</span>
00192 <span class="comment">     * a non-null rectangle. So we check for -1 specifically.</span>
00193 <span class="comment">     * BUGTAG: Fix for Bug #540 --Win95B-- SANKAR -- 2/20/95 --</span>
00194 <span class="comment">     */</span>
00195 
00196     <span class="keywordflow">if</span> (sItem &amp;&amp; (sItem != -1) &amp;&amp; ((<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)sItem &gt;= (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)plb-&gt;cMac))
00197     {
00198         <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a35">SetRectEmpty</a>(lprc);
00199         RIPERR0(ERROR_INVALID_INDEX, RIP_VERBOSE, <span class="stringliteral">""</span>);
00200         <span class="keywordflow">return</span> (LB_ERR);
00201     }
00202 
00203     <a class="code" href="../../d6/d9/rtl_2wow_8c.html#a19">_GetClientRect</a>(plb-&gt;spwnd, lprc);
00204 
00205     <span class="keywordflow">if</span> (plb-&gt;fMultiColumn) {
00206 
00207         <span class="comment">/*</span>
00208 <span class="comment">         * itemHeight * sItem mod number ItemsPerColumn (itemsPerColumn)</span>
00209 <span class="comment">         */</span>
00210         lprc-&gt;top = plb-&gt;cyChar * (sItem % plb-&gt;itemsPerColumn);
00211         lprc-&gt;bottom = lprc-&gt;top + plb-&gt;cyChar  <span class="comment">/*+(plb-&gt;OwnerDraw ? 0 : 1)*/</span>;
00212 
00213         UserAssert(plb-&gt;itemsPerColumn);
00214 
00215         <span class="keywordflow">if</span> (plb-&gt;fRightAlign) {
00216             lprc-&gt;right = lprc-&gt;right - plb-&gt;cxColumn *
00217                  ((sItem / plb-&gt;itemsPerColumn) - (plb-&gt;iTop / plb-&gt;itemsPerColumn));
00218 
00219             lprc-&gt;left = lprc-&gt;right - plb-&gt;cxColumn;
00220         } <span class="keywordflow">else</span> {
00221             <span class="comment">/*</span>
00222 <span class="comment">             * Remember, this is integer division here...</span>
00223 <span class="comment">             */</span>
00224             lprc-&gt;left += plb-&gt;cxColumn *
00225                       ((sItem / plb-&gt;itemsPerColumn) - (plb-&gt;iTop / plb-&gt;itemsPerColumn));
00226 
00227             lprc-&gt;right = lprc-&gt;left + plb-&gt;cxColumn;
00228         }
00229     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (plb-&gt;OwnerDraw == <a class="code" href="../../d6/d0/usercli_8h.html#a63">OWNERDRAWVAR</a>) {
00230 
00231         <span class="comment">/*</span>
00232 <span class="comment">         * Var height owner draw</span>
00233 <span class="comment">         */</span>
00234         lprc-&gt;right += plb-&gt;xOrigin;
00235         clientbottom = lprc-&gt;bottom;
00236 
00237         <span class="keywordflow">if</span> (sItem &gt;= plb-&gt;iTop) {
00238             <span class="keywordflow">for</span> (sTmp = plb-&gt;iTop; sTmp &lt; sItem; sTmp++) {
00239                 lprc-&gt;top = lprc-&gt;top + <a class="code" href="../../d6/d0/usercli_8h.html#a746">LBGetVariableHeightItemHeight</a>(plb, sTmp);
00240             }
00241 
00242             <span class="comment">/*</span>
00243 <span class="comment">             * If item number is 0, it may be we are asking for the rect</span>
00244 <span class="comment">             * associated with a nonexistant item so that we can draw a caret</span>
00245 <span class="comment">             * indicating focus on an empty listbox.</span>
00246 <span class="comment">             */</span>
00247             lprc-&gt;bottom = lprc-&gt;top + (sItem &lt; plb-&gt;cMac ? <a class="code" href="../../d6/d0/usercli_8h.html#a746">LBGetVariableHeightItemHeight</a>(plb, sItem) : plb-&gt;cyChar);
00248             <span class="keywordflow">return</span> (lprc-&gt;top &lt; clientbottom);
00249         } <span class="keywordflow">else</span> {
00250 
00251             <span class="comment">/*</span>
00252 <span class="comment">             * Item we want the rect of is before plb-&gt;iTop.  Thus, negative</span>
00253 <span class="comment">             * offsets for the rect and it is never visible.</span>
00254 <span class="comment">             */</span>
00255             <span class="keywordflow">for</span> (sTmp = sItem; sTmp &lt; plb-&gt;iTop; sTmp++) {
00256                 lprc-&gt;top = lprc-&gt;top - <a class="code" href="../../d6/d0/usercli_8h.html#a746">LBGetVariableHeightItemHeight</a>(plb, sTmp);
00257             }
00258             lprc-&gt;bottom = lprc-&gt;top + <a class="code" href="../../d6/d0/usercli_8h.html#a746">LBGetVariableHeightItemHeight</a>(plb, sItem);
00259             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00260         }
00261     } <span class="keywordflow">else</span> {
00262 
00263         <span class="comment">/*</span>
00264 <span class="comment">         * For fixed height listboxes</span>
00265 <span class="comment">         */</span>
00266         <span class="keywordflow">if</span> (plb-&gt;fRightAlign &amp;&amp; !(plb-&gt;fMultiColumn || plb-&gt;OwnerDraw) &amp;&amp; plb-&gt;fHorzBar)
00267             lprc-&gt;right += plb-&gt;xOrigin + (plb-&gt;xRightOrigin - plb-&gt;xOrigin);
00268         <span class="keywordflow">else</span>
00269             lprc-&gt;right += plb-&gt;xOrigin;
00270         lprc-&gt;top = (sItem - plb-&gt;iTop) * plb-&gt;cyChar;
00271         lprc-&gt;bottom = lprc-&gt;top + plb-&gt;cyChar;
00272     }
00273 
00274     <span class="keywordflow">return</span> (sItem &gt;= plb-&gt;iTop) &amp;&amp;
00275             (sItem &lt; (plb-&gt;iTop + <a class="code" href="../../d6/d0/usercli_8h.html#a713">CItemInWindow</a>(plb, TRUE)));
00276 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a719" doxytag="usercli.h::LBGetSetItemHeightHandler" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int LBGetSetItemHeightHandler           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>plb</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>message</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>item</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>height</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00759">759</a> of file <a class="el" href="../../d3/d1/lboxrare_8c-source.html">lboxrare.c</a>.
<p>
References <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01948">tagLBIV::cMac</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01957">tagLBIV::cyChar</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01995">tagLBIV::fMultiColumn</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00025">INT</a>, <a class="el" href="../../d2/d1/lboxmult_8c-source.html#l00025">LBCalcItemRowsAndColumns()</a>, <a class="el" href="../../d4/d1/lboxvar_8c-source.html#l00025">LBGetVariableHeightItemHeight()</a>, <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00025">LBSetCItemFullMax()</a>, <a class="el" href="../../d4/d1/lboxvar_8c-source.html#l00067">LBSetVariableHeightItemHeight()</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01964">tagLBIV::OwnerDraw</a>, and <a class="el" href="../../d7/d9/usercli_8h-source.html#l00437">OWNERDRAWVAR</a>.
<p>
Referenced by <a class="el" href="../../d7/d0/lb1_8c-source.html#l00032">ListBoxWndProcWorker()</a>.
<p>
<pre class="fragment"><div>00764 {
00765     <span class="keywordflow">if</span> (message == LB_GETITEMHEIGHT) {
00766         <span class="comment">/*</span>
00767 <span class="comment">         * All items are same height for non ownerdraw and for fixed height</span>
00768 <span class="comment">         * ownerdraw.</span>
00769 <span class="comment">         */</span>
00770         <span class="keywordflow">if</span> (plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o18">OwnerDraw</a> != <a class="code" href="../../d6/d0/usercli_8h.html#a63">OWNERDRAWVAR</a>)
00771             <span class="keywordflow">return</span> plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o13">cyChar</a>;
00772 
00773         <span class="keywordflow">if</span> (plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o6">cMac</a> &amp;&amp; item &gt;= plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o6">cMac</a>) {
00774             RIPERR0(ERROR_INVALID_INDEX, RIP_VERBOSE, <span class="stringliteral">""</span>);
00775             <span class="keywordflow">return</span> LB_ERR;
00776         }
00777 
00778         <span class="keywordflow">return</span> (<span class="keywordtype">int</span>)<a class="code" href="../../d6/d0/usercli_8h.html#a746">LBGetVariableHeightItemHeight</a>(plb, (INT)item);
00779     }
00780 
00781     <span class="keywordflow">if</span> (!height || height &gt; 255) {
00782         RIPERR1(ERROR_INVALID_PARAMETER,
00783                 RIP_WARNING,
00784                 <span class="stringliteral">"Invalid parameter \"height\" (%ld) to LBGetSetItemHeightHandler"</span>,
00785                 height);
00786 
00787         <span class="keywordflow">return</span> LB_ERR;
00788     }
00789 
00790     <span class="keywordflow">if</span> (plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o18">OwnerDraw</a> != <a class="code" href="../../d6/d0/usercli_8h.html#a63">OWNERDRAWVAR</a>)
00791         plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o13">cyChar</a> = height;
00792     <span class="keywordflow">else</span> {
00793         <span class="keywordflow">if</span> (item &lt; 0 || item &gt;= plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o6">cMac</a>) {
00794             RIPERR1(ERROR_INVALID_PARAMETER,
00795                     RIP_WARNING,
00796                     <span class="stringliteral">"Invalid parameter \"item\" (%ld) to LBGetSetItemHeightHandler"</span>,
00797                     item);
00798 
00799             <span class="keywordflow">return</span> LB_ERR;
00800         }
00801 
00802         <a class="code" href="../../d6/d0/usercli_8h.html#a745">LBSetVariableHeightItemHeight</a>(plb, (INT)item, (INT)height);
00803     }
00804 
00805     <span class="keywordflow">if</span> (plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o34">fMultiColumn</a>)
00806         <a class="code" href="../../d6/d0/usercli_8h.html#a743">LBCalcItemRowsAndColumns</a>(plb);
00807 
00808     <a class="code" href="../../d6/d0/usercli_8h.html#a688">LBSetCItemFullMax</a>(plb);
00809 
00810     <span class="keywordflow">return</span>(0);
00811 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a722" doxytag="usercli.h::LBGetText" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a> LBGetText           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPWSTR&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l00214">214</a> of file <a class="el" href="../../d9/d0/lboxctl1_8c-source.html">lboxctl1.c</a>.
<p>
References <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01948">tagLBIV::cMac</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01980">tagLBIV::fHasStrings</a>, <a class="el" href="../../d7/d0/lb1_8c-source.html#l00842">GetLpszItem()</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00025">INT</a>, <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l00176">LBGetItemData()</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01964">tagLBIV::OwnerDraw</a>, and <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00839">RtlUnicodeToMultiByteSize()</a>.
<p>
Referenced by <a class="el" href="../../d7/d0/lb1_8c-source.html#l00032">ListBoxWndProcWorker()</a>.
<p>
<pre class="fragment"><div>00220 {
00221     LPWSTR lpItemText;
00222     <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a> cchText;
00223 
00224     <span class="keywordflow">if</span> (index &lt; 0 || index &gt;= plb-&gt;cMac) {
00225         RIPERR0(ERROR_INVALID_INDEX, RIP_VERBOSE, <span class="stringliteral">""</span>);
00226         <span class="keywordflow">return</span> LB_ERR;
00227     }
00228 
00229     <span class="keywordflow">if</span> (!plb-&gt;fHasStrings &amp;&amp; plb-&gt;OwnerDraw) {
00230 
00231         <span class="comment">/*</span>
00232 <span class="comment">         * Owner draw without strings so we must copy the app supplied DWORD</span>
00233 <span class="comment">         * value.</span>
00234 <span class="comment">         */</span>
00235         cchText = <span class="keyword">sizeof</span>(ULONG_PTR);
00236 
00237         <span class="keywordflow">if</span> (!fLengthOnly) {
00238             LONG_PTR UNALIGNED *p = (LONG_PTR UNALIGNED *)lpbuffer;
00239             *p = <a class="code" href="../../d6/d0/usercli_8h.html#a721">LBGetItemData</a>(plb, index);
00240         }
00241     } <span class="keywordflow">else</span> {
00242         lpItemText = <a class="code" href="../../d6/d0/usercli_8h.html#a715">GetLpszItem</a>(plb, index);
00243         <span class="keywordflow">if</span> (!lpItemText)
00244             <span class="keywordflow">return</span> LB_ERR;
00245 
00246         <span class="comment">/*</span>
00247 <span class="comment">         * These are strings so we are copying the text and we must include</span>
00248 <span class="comment">         * the terminating 0 when doing the RtlMoveMemory.</span>
00249 <span class="comment">         */</span>
00250         cchText = wcslen(lpItemText);
00251 
00252         <span class="keywordflow">if</span> (fLengthOnly) {
00253             <span class="keywordflow">if</span> (fAnsi)
00254                 <a class="code" href="../../d9/d6/nlsxlat_8c.html#a36">RtlUnicodeToMultiByteSize</a>(&amp;cchText, lpItemText, cchText*<span class="keyword">sizeof</span>(WCHAR));
00255         } <span class="keywordflow">else</span> {
00256             <span class="keywordflow">if</span> (fAnsi) {
00257 <span class="preprocessor">#ifdef FE_SB // LBGetText()</span>
00258 <span class="preprocessor"></span>                cchText = WCSToMB(lpItemText, cchText+1, &amp;((LPSTR)lpbuffer), (cchText+1)*<span class="keyword">sizeof</span>(WORD), FALSE);
00259                 <span class="comment">/*</span>
00260 <span class="comment">                 * Here.. cchText contains null-terminate char, subtract it... Because, we pass cchText+1 to</span>
00261 <span class="comment">                 * above Unicode-&gt;Ansi convertsion to make sure the string is terminated with null.</span>
00262 <span class="comment">                 */</span>
00263                 cchText--;
00264 <span class="preprocessor">#else</span>
00265 <span class="preprocessor"></span>                WCSToMB(lpItemText, cchText+1, &amp;((LPSTR)lpbuffer), cchText+1, FALSE);
00266 <span class="preprocessor">#endif // FE_SB</span>
00267 <span class="preprocessor"></span>            } <span class="keywordflow">else</span> {
00268                 RtlCopyMemory(lpbuffer, lpItemText, (cchText+1)*<span class="keyword">sizeof</span>(WCHAR));
00269             }
00270         }
00271 
00272     }
00273 
00274     <span class="keywordflow">return</span> cchText;
00275 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a746" doxytag="usercli.h::LBGetVariableHeightItemHeight" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a> LBGetVariableHeightItemHeight           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d1/lboxvar_8c-source.html#l00025">25</a> of file <a class="el" href="../../d4/d1/lboxvar_8c-source.html">lboxvar.c</a>.
<p>
References <a class="el" href="../../d0/d7/halvprnt_8c-source.html#l00031">BYTE</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01948">tagLBIV::cMac</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01980">tagLBIV::fHasStrings</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00051">gpsi</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00025">INT</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01951">tagLBIV::rgpch</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, and <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01967">tagLBIV::wMultiple</a>.
<p>
Referenced by <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00179">LBGetItemRect()</a>, <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00759">LBGetSetItemHeightHandler()</a>, <a class="el" href="../../d4/d1/lboxvar_8c-source.html#l00157">LBPage()</a>, and <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00025">LBSetCItemFullMax()</a>.
<p>
<pre class="fragment"><div>00028 {
00029     <a class="code" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a> itemHeight;
00030     <span class="keywordtype">int</span> offsetHeight;
00031 
00032     <span class="keywordflow">if</span> (plb-&gt;cMac) {
00033         <span class="keywordflow">if</span> (plb-&gt;fHasStrings)
00034             offsetHeight = plb-&gt;cMac * <span class="keyword">sizeof</span>(<a class="code" href="../../d6/d9/structtagLBItem.html">LBItem</a>);
00035         <span class="keywordflow">else</span>
00036             offsetHeight = plb-&gt;cMac * <span class="keyword">sizeof</span>(<a class="code" href="../../d8/d9/structtagLBODItem.html">LBODItem</a>);
00037 
00038         <span class="keywordflow">if</span> (plb-&gt;wMultiple)
00039             offsetHeight += plb-&gt;cMac;
00040 
00041         offsetHeight += itemNumber;
00042 
00043         itemHeight = *(plb-&gt;rgpch+(<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)offsetHeight);
00044 
00045         <span class="keywordflow">return</span> (<a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a>)itemHeight;
00046 
00047     }
00048 
00049     <span class="comment">/*</span>
00050 <span class="comment">     *Default, we return the height of the system font.  This is so we can draw</span>
00051 <span class="comment">     * the focus rect even though there are no items in the listbox.</span>
00052 <span class="comment">     */</span>
00053     <span class="keywordflow">return</span> <a class="code" href="../../d1/d8/clglobal_8c.html#a4">gpsi</a>-&gt;cySysFontChar;
00054 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a691" doxytag="usercli.h::LBoxGetSelItems" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a> LBoxGetSelItems           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPINT&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d7/d0/lb1_8c-source.html#l00032">ListBoxWndProcWorker()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a742" doxytag="usercli.h::LBPage" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a> LBPage           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d1/lboxvar_8c-source.html#l00157">157</a> of file <a class="el" href="../../d4/d1/lboxvar_8c-source.html">lboxvar.c</a>.
<p>
References <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00924">_GetClientRect()</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01948">tagLBIV::cMac</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00025">INT</a>, <a class="el" href="../../d4/d1/lboxvar_8c-source.html#l00025">LBGetVariableHeightItemHeight()</a>, <a class="el" href="../../d9/d5/sertl_8c-source.html#l00332">max</a>, <a class="el" href="../../d6/d3/acpitabl_8h-source.html#l00366">min</a>, and <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01940">tagLBIV::spwnd</a>.
<p>
Referenced by <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02092">xxxInsureVisible()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02183">xxxLBoxCtlKeyInput()</a>, and <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00561">xxxLBoxCtlScroll()</a>.
<p>
<pre class="fragment"><div>00161 {
00162     <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a>     i;
00163     <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a> height;
00164     RECT    rc;
00165 
00166     <span class="keywordflow">if</span> (plb-&gt;cMac == 1)
00167         <span class="keywordflow">return</span>(0);
00168 
00169     <a class="code" href="../../d6/d9/rtl_2wow_8c.html#a19">_GetClientRect</a>(plb-&gt;spwnd, &amp;rc);
00170     height = rc.bottom;
00171     i = startItem;
00172 
00173     <span class="keywordflow">if</span> (fPageForwardDirection) {
00174         <span class="keywordflow">while</span> ((height &gt;= 0) &amp;&amp; (i &lt; plb-&gt;cMac))
00175             height -= <a class="code" href="../../d6/d0/usercli_8h.html#a746">LBGetVariableHeightItemHeight</a>(plb, i++);
00176 
00177         <span class="keywordflow">return</span>((height &gt;= 0) ? plb-&gt;cMac - 1 : <a class="code" href="../../d8/d6/sertl_8c.html#a1">max</a>(i - 2, startItem + 1));
00178     } <span class="keywordflow">else</span> {
00179         <span class="keywordflow">while</span> ((height &gt;= 0) &amp;&amp; (i &gt;= 0))
00180             height -= <a class="code" href="../../d6/d0/usercli_8h.html#a746">LBGetVariableHeightItemHeight</a>(plb, i--);
00181 
00182         <span class="keywordflow">return</span>((height &gt;= 0) ? 0 : <a class="code" href="../../d5/d4/acpitabl_8h.html#a69">min</a>(i + 2, startItem - 1));
00183     }
00184 
00185 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a688" doxytag="usercli.h::LBSetCItemFullMax" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID LBSetCItemFullMax           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>plb</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00025">25</a> of file <a class="el" href="../../d3/d1/lboxrare_8c-source.html">lboxrare.c</a>.
<p>
References <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00924">_GetClientRect()</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01944">tagLBIV::cItemFullMax</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00526">CItemInWindow()</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01948">tagLBIV::cMac</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d4/d1/lboxvar_8c-source.html#l00025">LBGetVariableHeightItemHeight()</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01964">tagLBIV::OwnerDraw</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00437">OWNERDRAWVAR</a>, and <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01940">tagLBIV::spwnd</a>.
<p>
Referenced by <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00759">LBGetSetItemHeightHandler()</a>, <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00062">xxxLBCreate()</a>, <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l00407">xxxLBInsertItem()</a>, <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l00842">xxxLBoxCtlDelete()</a>, <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00438">xxxLBSetFont()</a>, and <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00514">xxxLBSize()</a>.
<p>
<pre class="fragment"><div>00027 {
00028     <span class="keywordflow">if</span> (plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o18">OwnerDraw</a> != <a class="code" href="../../d6/d0/usercli_8h.html#a63">OWNERDRAWVAR</a>) {
00029         plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o5">cItemFullMax</a> = <a class="code" href="../../d6/d0/usercli_8h.html#a713">CItemInWindow</a>(plb, FALSE);
00030     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o6">cMac</a> &lt; 2) {
00031         plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o5">cItemFullMax</a> = 1;
00032     } <span class="keywordflow">else</span> {
00033         <span class="keywordtype">int</span>     height;
00034         RECT    rect;
00035         <span class="keywordtype">int</span>     i;
00036         <span class="keywordtype">int</span>     j = 0;
00037 
00038         <a class="code" href="../../d6/d9/rtl_2wow_8c.html#a19">_GetClientRect</a>(plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o1">spwnd</a>, &amp;rect);
00039         height = rect.bottom;
00040 
00041         plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o5">cItemFullMax</a> = 0;
00042         <span class="keywordflow">for</span> (i = plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o6">cMac</a> - 1; i &gt;= 0; i--, j++) {
00043             height -= <a class="code" href="../../d6/d0/usercli_8h.html#a746">LBGetVariableHeightItemHeight</a>(plb, i);
00044 
00045             <span class="keywordflow">if</span> (height &lt; 0) {
00046                 plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o5">cItemFullMax</a> = j;
00047                 <span class="keywordflow">break</span>;
00048             }
00049         }
00050         <span class="keywordflow">if</span> (!plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o5">cItemFullMax</a>)
00051             plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o5">cItemFullMax</a> = j;
00052     }
00053 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a724" doxytag="usercli.h::LBSetItemData" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int LBSetItemData           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LONG_PTR&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d7/d0/lb1_8c-source.html#l00032">ListBoxWndProcWorker()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a725" doxytag="usercli.h::LBSetTabStops" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL LBSetTabStops           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPINT&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00652">652</a> of file <a class="el" href="../../d3/d1/lboxrare_8c-source.html">lboxrare.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01956">tagLBIV::cxChar</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01992">tagLBIV::fUseTabStops</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02040">tagLBIV::iTabPixelPositions</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00624">MultDiv</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00025">PINT</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00958">UserLocalAlloc</a>, and <a class="el" href="../../d7/d9/usercli_8h-source.html#l00960">UserLocalFree</a>.
<p>
Referenced by <a class="el" href="../../d7/d0/lb1_8c-source.html#l00032">ListBoxWndProcWorker()</a>, and <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00062">xxxLBCreate()</a>.
<p>
<pre class="fragment"><div>00656 {
00657     <a class="code" href="../../d9/d5/ndismain_8h.html#a264">PINT</a> ptabs;
00658 
00659     <span class="keywordflow">if</span> (!plb-&gt;fUseTabStops) {
00660         RIPERR0(ERROR_LB_WITHOUT_TABSTOPS, RIP_VERBOSE, <span class="stringliteral">""</span>);
00661         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00662     }
00663 
00664     <span class="keywordflow">if</span> (count) {
00665         <span class="comment">/*</span>
00666 <span class="comment">         * Allocate memory for the tab stops.  The first byte in the</span>
00667 <span class="comment">         * plb-&gt;iTabPixelPositions array will contain a count of the number</span>
00668 <span class="comment">         * of tab stop positions we have.</span>
00669 <span class="comment">         */</span>
00670         ptabs = (LPINT)<a class="code" href="../../d6/d0/usercli_8h.html#a136">UserLocalAlloc</a>(HEAP_ZERO_MEMORY, (count + 1) * <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));
00671         <span class="keywordflow">if</span> (ptabs == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00672             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00673 
00674         <span class="keywordflow">if</span> (plb-&gt;iTabPixelPositions != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00675             <a class="code" href="../../d6/d0/usercli_8h.html#a138">UserLocalFree</a>(plb-&gt;iTabPixelPositions);
00676         plb-&gt;iTabPixelPositions = ptabs;
00677 
00678         <span class="comment">/*</span>
00679 <span class="comment">         * Set the count of tab stops</span>
00680 <span class="comment">         */</span>
00681         *ptabs++ = count;
00682 
00683         <span class="keywordflow">for</span> (; count &gt; 0; count--) {
00684 
00685             <span class="comment">/*</span>
00686 <span class="comment">             * Convert the dialog unit tabstops into pixel position tab stops.</span>
00687 <span class="comment">             */</span>
00688             *ptabs++ = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a141">MultDiv</a>(*lptabstops, plb-&gt;cxChar, 4);
00689             lptabstops++;
00690         }
00691     } <span class="keywordflow">else</span> {
00692 
00693         <span class="comment">/*</span>
00694 <span class="comment">         * Set default 8 system font ave char width tabs.  So free the memory</span>
00695 <span class="comment">         * associated with the tab stop list.</span>
00696 <span class="comment">         */</span>
00697         <span class="keywordflow">if</span> (plb-&gt;iTabPixelPositions != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00698             <a class="code" href="../../d6/d0/usercli_8h.html#a138">UserLocalFree</a>((HANDLE)plb-&gt;iTabPixelPositions);
00699             plb-&gt;iTabPixelPositions = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00700         }
00701     }
00702 
00703     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00704 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a745" doxytag="usercli.h::LBSetVariableHeightItemHeight" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID LBSetVariableHeightItemHeight           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d1/lboxvar_8c-source.html#l00067">67</a> of file <a class="el" href="../../d4/d1/lboxvar_8c-source.html">lboxvar.c</a>.
<p>
References <a class="el" href="../../d0/d7/halvprnt_8c-source.html#l00031">BYTE</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01948">tagLBIV::cMac</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01980">tagLBIV::fHasStrings</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01951">tagLBIV::rgpch</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, and <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01967">tagLBIV::wMultiple</a>.
<p>
Referenced by <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00759">LBGetSetItemHeightHandler()</a>.
<p>
<pre class="fragment"><div>00071 {
00072     <span class="keywordtype">int</span> offsetHeight;
00073 
00074     <span class="keywordflow">if</span> (plb-&gt;fHasStrings)
00075         offsetHeight = plb-&gt;cMac * <span class="keyword">sizeof</span>(<a class="code" href="../../d6/d9/structtagLBItem.html">LBItem</a>);
00076     <span class="keywordflow">else</span>
00077         offsetHeight = plb-&gt;cMac * <span class="keyword">sizeof</span>(<a class="code" href="../../d8/d9/structtagLBODItem.html">LBODItem</a>);
00078 
00079     <span class="keywordflow">if</span> (plb-&gt;wMultiple)
00080         offsetHeight += plb-&gt;cMac;
00081 
00082     offsetHeight += itemNumber;
00083 
00084     *(plb-&gt;rgpch + (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)offsetHeight) = (<a class="code" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a>)itemHeight;
00085 
00086 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a582" doxytag="usercli.h::ListBoxWndProcA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LRESULT APIENTRY ListBoxWndProcA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>msg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d0/lb1_8c-source.html#l00744">744</a> of file <a class="el" href="../../d7/d0/lb1_8c-source.html">lb1.c</a>.
<p>
References <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00574">DefWindowProcWorker()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00798">FNID_LISTBOX</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00144">FWINDOWMSG</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d7/d0/lb1_8c-source.html#l00032">ListBoxWndProcWorker()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d5/d9/immcli_8h-source.html#l00120">ValidateHwnd</a>.
<p>
Referenced by <a class="el" href="../../d7/d7/clinit_8c-source.html#l01219">ClientThreadSetup()</a>.
<p>
<pre class="fragment"><div>00749 {
00750     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwnd;
00751 
00752     <span class="keywordflow">if</span> ((pwnd = <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(hwnd)) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00753         <span class="keywordflow">return</span> (0<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>);
00754     }
00755 
00756     <span class="comment">/*</span>
00757 <span class="comment">     * If the control is not interested in this message,</span>
00758 <span class="comment">     * pass it to DefWindowProc.</span>
00759 <span class="comment">     */</span>
00760     <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d0/usercli_8h.html#a10">FWINDOWMSG</a>(message, FNID_LISTBOX))
00761         <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a610">DefWindowProcWorker</a>(pwnd, message, wParam, lParam, TRUE);
00762 
00763     <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a612">ListBoxWndProcWorker</a>(pwnd, message, wParam, lParam, TRUE);
00764 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a583" doxytag="usercli.h::ListBoxWndProcW" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LRESULT APIENTRY ListBoxWndProcW           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>msg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d0/lb1_8c-source.html#l00766">766</a> of file <a class="el" href="../../d7/d0/lb1_8c-source.html">lb1.c</a>.
<p>
References <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00574">DefWindowProcWorker()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00798">FNID_LISTBOX</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00144">FWINDOWMSG</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d7/d0/lb1_8c-source.html#l00032">ListBoxWndProcWorker()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d5/d9/immcli_8h-source.html#l00120">ValidateHwnd</a>.
<p>
Referenced by <a class="el" href="../../d7/d7/clinit_8c-source.html#l01219">ClientThreadSetup()</a>, and <a class="el" href="../../d7/d7/clinit_8c-source.html#l00378">RW_RegisterControls()</a>.
<p>
<pre class="fragment"><div>00771 {
00772     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwnd;
00773 
00774     <span class="keywordflow">if</span> ((pwnd = <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(hwnd)) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00775         <span class="keywordflow">return</span> (0<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>);
00776     }
00777 
00778     <span class="comment">/*</span>
00779 <span class="comment">     * If the control is not interested in this message,</span>
00780 <span class="comment">     * pass it to DefWindowProc.</span>
00781 <span class="comment">     */</span>
00782     <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d0/usercli_8h.html#a10">FWINDOWMSG</a>(message, FNID_LISTBOX))
00783         <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a610">DefWindowProcWorker</a>(pwnd, message, wParam, lParam, FALSE);
00784 
00785     <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a612">ListBoxWndProcWorker</a>(pwnd, message, wParam, lParam, FALSE);
00786 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a612" doxytag="usercli.h::ListBoxWndProcWorker" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LRESULT ListBoxWndProcWorker           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>msg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>fAnsi</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d0/lb1_8c-source.html#l00032">32</a> of file <a class="el" href="../../d7/d0/lb1_8c-source.html">lb1.c</a>.
<p>
References <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00924">_GetClientRect()</a>, <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00860">_IsWindowVisible()</a>, <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00995">_ScreenToClient()</a>, <a class="el" href="../../d2/d0/bench_8c-source.html#l00048">APIENTRY</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00442">CaretCreate</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01944">tagLBIV::cItemFullMax</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01948">tagLBIV::cMac</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01956">tagLBIV::cxChar</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01958">tagLBIV::cxColumn</a>, <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00574">DefWindowProcWorker()</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02047">tagLBIV::dwLocaleId</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d9/d4/reader_8c-source.html#l00415">EnterReaderModeHelper()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00788">EQ</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01975">tagLBIV::fCaptured</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01980">tagLBIV::fHasStrings</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02009">tagLBIV::fHorzBar</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02019">tagLBIV::fIgnoreSizeMsg</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01580">FillWindow</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01995">tagLBIV::fMultiColumn</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00798">FNID_LISTBOX</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02023">tagLBIV::fRightAlign</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02024">tagLBIV::fRtoLReading</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01265">FWINABLE</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00046">gcWheelDelta</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00143">GET_X_LPARAM</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00147">GET_Y_LPARAM</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00051">gpsi</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02041">tagLBIV::hFont</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01514">HW</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01515">HWq</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00306">IDSYS_LBSEARCH</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02036">tagLBIV::iLastMouseMove</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02029">tagLBIV::iLastSelection</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02032">tagLBIV::iMouseDown</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00270">INITCONTROLLOOKASIDE</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00025">INT</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01942">tagLBIV::iSel</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01943">tagLBIV::iSelBase</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00920">ISelFromPt()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00779">IsLBoxVisible</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00480">IsSelected()</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01959">tagLBIV::itemsPerColumn</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01941">tagLBIV::iTop</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02048">tagLBIV::iTypeSearch</a>, <a class="el" href="../../d2/d1/lboxmult_8c-source.html#l00025">LBCalcItemRowsAndColumns()</a>, <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00732">LBDropObjectHandler()</a>, <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00820">LBEvent()</a>, <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l00176">LBGetItemData()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00179">LBGetItemRect()</a>, <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00759">LBGetSetItemHeightHandler()</a>, <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l00214">LBGetText()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00797">LBI_ADD</a>, <a class="el" href="../../d0/d0/client_2nt6_2user_8h.html#a1056">LBIV</a>, <a class="el" href="../../d6/d0/usercli_8h.html#a691">LBoxGetSelItems()</a>, <a class="el" href="../../d6/d0/usercli_8h.html#a724">LBSetItemData()</a>, <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00652">LBSetTabStops()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00813">LBUP_NOTIFY</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00811">LBUP_RELEASECAPTURE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00812">LBUP_RESETSELECTION</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00815">LBUP_SELCHANGE</a>, <a class="el" href="../../d7/d0/lb1_8c-source.html#l00016">ListboxLookaside</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00440">LOWERCASE</a>, <a class="el" href="../../d9/d5/sertl_8c-source.html#l00332">max</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02043">tagLBIV::maxWidth</a>, <a class="el" href="../../d6/d3/acpitabl_8h-source.html#l00366">min</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l07752">NtUserAlterWindowStyle()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06520">NtUserBeginPaint()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06575">NtUserEndPaint()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05330">NtUserInvalidateRect()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05388">NtUserKillTimer()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05822">NtUserSetCapture()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01960">tagLBIV::numberOfColumns</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01964">tagLBIV::OwnerDraw</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02045">tagLBIV::pcbox</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00789">PREFIX</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02049">tagLBIV::pszTypeSearch</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01961">tagLBIV::ptPrev</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01745">SELONLY</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00652">SendMessage()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00793">SINGLESEL</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01940">tagLBIV::spwnd</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01939">tagLBIV::spwndParent</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00362">ThreadLock</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00366">ThreadUnlock</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00439">UPPERCASE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00960">UserLocalFree</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00227">VALIDATECLASSANDSIZE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02372">WEFRIGHT</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02373">WEFRTLREADING</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02319">WFWIN40COMPAT</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01967">tagLBIV::wMultiple</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02042">tagLBIV::xOrigin</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l03411">xxxCaretDestroy()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l03387">xxxCheckRedraw()</a>, <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00375">xxxDestroyLBox()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02802">xxxFindString()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02092">xxxInsureVisible()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01111">xxxInvertLBItem()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01875">xxxLBButtonUp()</a>, <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00062">xxxLBCreate()</a>, <a class="el" href="../../d1/d1/lboxctl3_8c-source.html#l00839">xxxLbDir()</a>, <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l00342">xxxLBInitStorage()</a>, <a class="el" href="../../d1/d1/lboxctl3_8c-source.html#l01036">xxxLbInsertFile()</a>, <a class="el" href="../../d6/d0/usercli_8h.html#a685">xxxLBInsertItem()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00038">xxxLBInvalidateRect()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02948">xxxLBoxCtlCharInput()</a>, <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l00842">xxxLBoxCtlDelete()</a>, <a class="el" href="../../d6/d0/usercli_8h.html#a703">xxxLBoxCtlHScroll()</a>, <a class="el" href="../../d2/d1/lboxmult_8c-source.html#l00071">xxxLBoxCtlHScrollMultiColumn()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02183">xxxLBoxCtlKeyInput()</a>, <a class="el" href="../../d6/d0/usercli_8h.html#a705">xxxLBoxCtlScroll()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00798">xxxLBPaint()</a>, <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l00797">xxxLBResetContent()</a>, <a class="el" href="../../d6/d0/usercli_8h.html#a689">xxxLBSelRange()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00430">xxxLBSetCaret()</a>, <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l01107">xxxLBSetCount()</a>, <a class="el" href="../../d6/d0/usercli_8h.html#a690">xxxLBSetCurSel()</a>, <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00438">xxxLBSetFont()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l03172">xxxLBSetRedraw()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l03455">xxxLBSetSel()</a>, <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l00125">xxxLBShowHideScrollBars()</a>, <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00514">xxxLBSize()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02000">xxxNewITop()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01244">xxxNotifyOwner()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01265">xxxSetISelBase()</a>, and <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01290">xxxTrackMouse()</a>.
<p>
Referenced by <a class="el" href="../../d7/d7/clinit_8c-source.html#l01219">ClientThreadSetup()</a>, <a class="el" href="../../d7/d0/lb1_8c-source.html#l00788">ComboListBoxWndProcA()</a>, <a class="el" href="../../d7/d0/lb1_8c-source.html#l00810">ComboListBoxWndProcW()</a>, <a class="el" href="../../d7/d0/lb1_8c-source.html#l00744">ListBoxWndProcA()</a>, and <a class="el" href="../../d7/d0/lb1_8c-source.html#l00766">ListBoxWndProcW()</a>.
<p>
<pre class="fragment"><div>00038 {
00039     HWND hwnd = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(pwnd);
00040     PAINTSTRUCT ps;
00041     HDC         hdc;
00042     LPRECT      lprc;
00043     <a class="code" href="../../d7/d9/structtagLBIV.html">PLBIV</a> plb;    <span class="comment">/* List Box Instance Variable */</span>
00044     <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a> iSel;     <span class="comment">/* Index of selected item */</span>
00045     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dw;
00046     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpwndParent;
00047     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> wFlags;
00048     LPWSTR lpwsz = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00049     LRESULT lReturn = 0;
00050     <span class="keyword">static</span> <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fInit = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00051 
00052     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pwnd);
00053 
00054     <a class="code" href="../../d6/d0/usercli_8h.html#a28">VALIDATECLASSANDSIZE</a>(pwnd, FNID_LISTBOX);
00055     <a class="code" href="../../d6/d0/usercli_8h.html#a29">INITCONTROLLOOKASIDE</a>(&amp;ListboxLookaside, <a class="code" href="../../d7/d9/structtagLBIV.html">LBIV</a>, spwnd, 4);
00056 
00057     <span class="comment">/*</span>
00058 <span class="comment">     * Get the plb for the given window now since we will use it a lot in</span>
00059 <span class="comment">     * various handlers. This was stored using SetWindowLong(hwnd,0,plb)</span>
00060 <span class="comment">     * when the listbox was first created (by INITCONTROLLOOKASIDE above)</span>
00061 <span class="comment">     */</span>
00062     plb = ((<a class="code" href="../../d9/d9/structtagLBWND.html">PLBWND</a>)pwnd)-&gt;pLBIV;
00063 
00064     <span class="comment">/*</span>
00065 <span class="comment">     * Handle ANSI translations of input parameters</span>
00066 <span class="comment">     */</span>
00067     <span class="keywordflow">if</span> (fAnsi) {
00068         <span class="keywordflow">switch</span> (message) {
00069         <span class="keywordflow">case</span> LB_ADDSTRING:
00070         <span class="keywordflow">case</span> LB_ADDSTRINGUPPER:
00071         <span class="keywordflow">case</span> LB_ADDSTRINGLOWER:
00072         <span class="keywordflow">case</span> LB_FINDSTRING:
00073         <span class="keywordflow">case</span> LB_FINDSTRINGEXACT:
00074         <span class="keywordflow">case</span> LB_INSERTSTRING:
00075         <span class="keywordflow">case</span> LB_INSERTSTRINGUPPER:
00076         <span class="keywordflow">case</span> LB_INSERTSTRINGLOWER:
00077         <span class="keywordflow">case</span> LB_SELECTSTRING:
00078             <span class="keywordflow">if</span> (!plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o30">fHasStrings</a>) {
00079                 <span class="keywordflow">break</span>;
00080             }
00081             <span class="comment">// Fall through...</span>
00082         <span class="keywordflow">case</span> LB_ADDFILE:
00083         <span class="keywordflow">case</span> LB_DIR:
00084             <span class="keywordflow">if</span> (lParam) {
00085                 <span class="keywordflow">if</span> (!MBToWCS((LPSTR)lParam, -1, &amp;lpwsz, -1, TRUE))
00086                     <span class="keywordflow">return</span> LB_ERR;
00087             }
00088             <span class="keywordflow">break</span>;
00089         <span class="keywordflow">default</span>:
00090             <span class="keywordflow">break</span>;
00091         }
00092         <span class="keywordflow">if</span> (lpwsz) {
00093             lParam = (LPARAM)lpwsz;
00094         }
00095     }
00096 
00097     <span class="keywordflow">switch</span> (message) {
00098 
00099     <span class="keywordflow">case</span> LB_GETTOPINDEX:        <span class="comment">// Return index of top item displayed.</span>
00100         <span class="keywordflow">return</span> plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o2">iTop</a>;
00101 
00102     <span class="keywordflow">case</span> LB_SETTOPINDEX:
00103         <span class="keywordflow">if</span> (wParam &amp;&amp; ((<a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a>)wParam &lt; 0 || (INT)wParam &gt;= plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o6">cMac</a>)) {
00104             RIPERR0(ERROR_INVALID_INDEX, RIP_VERBOSE, <span class="stringliteral">""</span>);
00105             <span class="keywordflow">return</span> LB_ERR;
00106         }
00107         <span class="keywordflow">if</span> (plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o6">cMac</a>) {
00108             <a class="code" href="../../d6/d0/usercli_8h.html#a730">xxxNewITop</a>(plb, (INT)wParam);
00109         }
00110         <span class="keywordflow">break</span>;
00111 
00112     <span class="keywordflow">case</span> WM_STYLECHANGED:
00113         plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o48">fRtoLReading</a> = (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WEFRTLREADING) != 0);
00114         plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o47">fRightAlign</a>  = (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WEFRIGHT) != 0);
00115         <a class="code" href="../../d6/d0/usercli_8h.html#a714">xxxCheckRedraw</a>(plb, FALSE, 0);
00116         <span class="keywordflow">break</span>;
00117 
00118     <span class="keywordflow">case</span> WM_WINDOWPOSCHANGED:
00119 
00120         <span class="comment">/*</span>
00121 <span class="comment">         * If we are in the middle of creation, ignore this</span>
00122 <span class="comment">         * message because it will generate a WM_SIZE message.</span>
00123 <span class="comment">         * See xxxLBCreate().</span>
00124 <span class="comment">         */</span>
00125         <span class="keywordflow">if</span> (!plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o45">fIgnoreSizeMsg</a>)
00126             <span class="keywordflow">goto</span> CallDWP;
00127         <span class="keywordflow">break</span>;
00128 
00129     <span class="keywordflow">case</span> WM_SIZE:
00130 
00131         <span class="comment">/*</span>
00132 <span class="comment">         * If we are in the middle of creation, ignore size</span>
00133 <span class="comment">         * messages.  See xxxLBCreate().</span>
00134 <span class="comment">         */</span>
00135         <span class="keywordflow">if</span> (!plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o45">fIgnoreSizeMsg</a>)
00136             <a class="code" href="../../d6/d0/usercli_8h.html#a726">xxxLBSize</a>(plb, <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a7">GET_X_LPARAM</a>(lParam), <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a8">GET_Y_LPARAM</a>(lParam));
00137         <span class="keywordflow">break</span>;
00138 
00139     <span class="keywordflow">case</span> WM_ERASEBKGND:
00140         <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o0">spwndParent</a>, &amp;tlpwndParent);
00141         <a class="code" href="../../d6/d0/usercli_8h.html#a234">FillWindow</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a450">HW</a>(plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o0">spwndParent</a>), hwnd, (HDC)wParam,
00142                 (HBRUSH)CTLCOLOR_LISTBOX);
00143         <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndParent);
00144         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00145 
00146     <span class="keywordflow">case</span> LB_RESETCONTENT:
00147         <a class="code" href="../../d6/d0/usercli_8h.html#a737">xxxLBResetContent</a>(plb);
00148         <span class="keywordflow">break</span>;
00149 
00150     <span class="keywordflow">case</span> WM_TIMER:
00151         <span class="keywordflow">if</span> (wParam == <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a52">IDSYS_LBSEARCH</a>) {
00152             plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o61">iTypeSearch</a> = 0;
00153             <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a208">NtUserKillTimer</a>(hwnd, IDSYS_LBSEARCH);
00154             <a class="code" href="../../d6/d0/usercli_8h.html#a717">xxxInvertLBItem</a>(plb, plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o3">iSel</a>, TRUE);
00155             <span class="keywordflow">break</span>;
00156         }
00157 
00158         message = WM_MOUSEMOVE;
00159         <a class="code" href="../../d6/d0/usercli_8h.html#a734">xxxTrackMouse</a>(plb, message, plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o17">ptPrev</a>);
00160         <span class="keywordflow">break</span>;
00161 
00162         <span class="comment">/*</span>
00163 <span class="comment">         * Fall through</span>
00164 <span class="comment">         */</span>
00165     <span class="keywordflow">case</span> WM_MOUSEMOVE:
00166     <span class="keywordflow">case</span> WM_LBUTTONDOWN:
00167     <span class="keywordflow">case</span> WM_LBUTTONUP:
00168     <span class="keywordflow">case</span> WM_LBUTTONDBLCLK:
00169         {
00170             POINT pt;
00171 
00172             POINTSTOPOINT(pt, lParam);
00173             <a class="code" href="../../d6/d0/usercli_8h.html#a734">xxxTrackMouse</a>(plb, message, pt);
00174         }
00175         <span class="keywordflow">break</span>;
00176 
00177     <span class="keywordflow">case</span> WM_MBUTTONDOWN:
00178         <a class="code" href="../../d6/d0/usercli_8h.html#a782">EnterReaderModeHelper</a>(hwnd);
00179         <span class="keywordflow">break</span>;
00180 
00181     <span class="keywordflow">case</span> WM_CAPTURECHANGED:
00182             <span class="comment">//</span>
00183             <span class="comment">// Note that this message should be handled only on unexpected</span>
00184             <span class="comment">// capture changes currently.</span>
00185             <span class="comment">//</span>
00186         UserAssert(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFWIN40COMPAT));
00187         <span class="keywordflow">if</span> (plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o25">fCaptured</a>)
00188             <a class="code" href="../../d6/d0/usercli_8h.html#a740">xxxLBButtonUp</a>(plb, LBUP_NOTIFY);
00189         <span class="keywordflow">break</span>;
00190 
00191     <span class="keywordflow">case</span> LBCB_STARTTRACK:
00192         <span class="comment">//</span>
00193         <span class="comment">// Start tracking mouse moves in the listbox, setting capture</span>
00194         <span class="comment">//</span>
00195         <span class="keywordflow">if</span> (!plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o58">pcbox</a>)
00196             <span class="keywordflow">break</span>;
00197 
00198         plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o25">fCaptured</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00199         <span class="keywordflow">if</span> (wParam) {
00200             POINT pt;
00201 
00202             POINTSTOPOINT(pt, lParam);
00203 
00204             <a class="code" href="../../d6/d9/rtl_2wow_8c.html#a21">_ScreenToClient</a>(pwnd, &amp;pt);
00205             <a class="code" href="../../d6/d0/usercli_8h.html#a734">xxxTrackMouse</a>(plb, WM_LBUTTONDOWN, pt);
00206         } <span class="keywordflow">else</span> {
00207             <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a221">NtUserSetCapture</a>(hwnd);
00208             plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o25">fCaptured</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00209             plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o51">iLastSelection</a> = plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o3">iSel</a>;
00210         }
00211         <span class="keywordflow">break</span>;
00212 
00213     <span class="keywordflow">case</span> LBCB_ENDTRACK:
00214         <span class="comment">// Kill capture, tracking, etc.</span>
00215         <span class="keywordflow">if</span> (plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o25">fCaptured</a>)
00216             <a class="code" href="../../d6/d0/usercli_8h.html#a740">xxxLBButtonUp</a>(plb, LBUP_RELEASECAPTURE | (wParam ? LBUP_SELCHANGE :
00217                 LBUP_RESETSELECTION));
00218         <span class="keywordflow">break</span>;
00219 
00220     <span class="keywordflow">case</span> WM_PRINTCLIENT:
00221         <a class="code" href="../../d6/d0/usercli_8h.html#a710">xxxLBPaint</a>(plb, (HDC) wParam, NULL);
00222         <span class="keywordflow">break</span>;
00223 
00224     <span class="keywordflow">case</span> WM_PAINT:
00225         <span class="keywordflow">if</span> (wParam) {
00226             hdc = (HDC) wParam;
00227             lprc = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00228         } <span class="keywordflow">else</span> {
00229             hdc = <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a246">NtUserBeginPaint</a>(hwnd, &amp;ps);
00230             lprc = &amp;(ps.rcPaint);
00231         }
00232 
00233         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a108">IsLBoxVisible</a>(plb))
00234             <a class="code" href="../../d6/d0/usercli_8h.html#a710">xxxLBPaint</a>(plb, hdc, lprc);
00235 
00236         <span class="keywordflow">if</span> (!wParam)
00237             <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a248">NtUserEndPaint</a>(hwnd, &amp;ps);
00238         <span class="keywordflow">break</span>;
00239 
00240     <span class="keywordflow">case</span> WM_NCDESTROY:
00241     <span class="keywordflow">case</span> WM_FINALDESTROY:
00242         <a class="code" href="../../d6/d0/usercli_8h.html#a698">xxxDestroyLBox</a>(plb, pwnd);
00243         <span class="keywordflow">break</span>;
00244 
00245     <span class="keywordflow">case</span> WM_SETFOCUS:
00246 <span class="comment">// DISABLED in Win 3.1        xxxUpdateWindow(pwnd);</span>
00247         <a class="code" href="../../d6/d0/usercli_8h.html#a66">CaretCreate</a>(plb);
00248         <a class="code" href="../../d6/d0/usercli_8h.html#a695">xxxLBSetCaret</a>(plb, TRUE);
00249         <a class="code" href="../../d6/d0/usercli_8h.html#a732">xxxNotifyOwner</a>(plb, LBN_SETFOCUS);
00250         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a405">FWINABLE</a>()) {
00251             <span class="keywordflow">if</span> (<a class="code" href="../../d6/d9/rtl_2wow_8c.html#a17">_IsWindowVisible</a>(pwnd)) {
00252                 <a class="code" href="../../d6/d0/usercli_8h.html#a409">LBEvent</a>(plb, EVENT_OBJECT_FOCUS, plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o4">iSelBase</a>);
00253             }
00254         }
00255         <span class="keywordflow">break</span>;
00256 
00257     <span class="keywordflow">case</span> WM_KILLFOCUS:
00258         <span class="comment">/*</span>
00259 <span class="comment">         * Reset the wheel delta count.</span>
00260 <span class="comment">         */</span>
00261         <a class="code" href="../../d1/d8/clglobal_8c.html#a1">gcWheelDelta</a> = 0;
00262 
00263         <a class="code" href="../../d6/d0/usercli_8h.html#a695">xxxLBSetCaret</a>(plb, FALSE);
00264         <a class="code" href="../../d6/d0/usercli_8h.html#a696">xxxCaretDestroy</a>(plb);
00265         <a class="code" href="../../d6/d0/usercli_8h.html#a732">xxxNotifyOwner</a>(plb, LBN_KILLFOCUS);
00266         <span class="keywordflow">if</span> (plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o61">iTypeSearch</a>) {
00267             plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o61">iTypeSearch</a> = 0;
00268             <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a208">NtUserKillTimer</a>(hwnd, IDSYS_LBSEARCH);
00269         }
00270         <span class="keywordflow">if</span> (plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o62">pszTypeSearch</a>) {
00271             <a class="code" href="../../d6/d0/usercli_8h.html#a138">UserLocalFree</a>(plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o62">pszTypeSearch</a>);
00272             plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o62">pszTypeSearch</a> = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00273         }
00274         <span class="keywordflow">break</span>;
00275 
00276     <span class="keywordflow">case</span> WM_MOUSEWHEEL:
00277         {
00278             <span class="keywordtype">int</span>     cDetants;
00279             <span class="keywordtype">int</span>     cPage;
00280             <span class="keywordtype">int</span>     cLines;
00281             RECT    rc;
00282             <span class="keywordtype">int</span>     windowWidth;
00283             <span class="keywordtype">int</span>     cPos;
00284 
00285             <span class="comment">/*</span>
00286 <span class="comment">             * Don't handle zoom and datazoom.</span>
00287 <span class="comment">             */</span>
00288             <span class="keywordflow">if</span> (wParam &amp; (MK_SHIFT | MK_CONTROL)) {
00289                 <span class="keywordflow">goto</span> CallDWP;
00290             }
00291 
00292             lReturn = 1;
00293             <a class="code" href="../../d1/d8/clglobal_8c.html#a1">gcWheelDelta</a> -= (<span class="keywordtype">short</span>) HIWORD(wParam);
00294             cDetants = <a class="code" href="../../d1/d8/clglobal_8c.html#a1">gcWheelDelta</a> / WHEEL_DELTA;
00295             <span class="keywordflow">if</span> (    cDetants != 0 &amp;&amp;
00296                     <a class="code" href="../../d1/d8/clglobal_8c.html#a4">gpsi</a>-&gt;ucWheelScrollLines &gt; 0 &amp;&amp;
00297                     (pwnd-&gt;style &amp; (WS_VSCROLL | WS_HSCROLL))) {
00298 
00299                 <a class="code" href="../../d1/d8/clglobal_8c.html#a1">gcWheelDelta</a> = <a class="code" href="../../d1/d8/clglobal_8c.html#a1">gcWheelDelta</a> % WHEEL_DELTA;
00300 
00301                 <span class="keywordflow">if</span> (pwnd-&gt;style &amp; WS_VSCROLL) {
00302                     cPage = <a class="code" href="../../d8/d6/sertl_8c.html#a1">max</a>(1, (plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o5">cItemFullMax</a> - 1));
00303                     cLines = cDetants *
00304                             (<span class="keywordtype">int</span>) <a class="code" href="../../d5/d4/acpitabl_8h.html#a69">min</a>((UINT) cPage, <a class="code" href="../../d1/d8/clglobal_8c.html#a4">gpsi</a>-&gt;ucWheelScrollLines);
00305 
00306                     cPos = <a class="code" href="../../d8/d6/sertl_8c.html#a1">max</a>(0, <a class="code" href="../../d5/d4/acpitabl_8h.html#a69">min</a>(plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o2">iTop</a> + cLines, plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o6">cMac</a> - 1));
00307                     <span class="keywordflow">if</span> (cPos != plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o2">iTop</a>) {
00308                         <a class="code" href="../../d6/d0/usercli_8h.html#a705">xxxLBoxCtlScroll</a>(plb, SB_THUMBPOSITION, cPos);
00309                         <a class="code" href="../../d6/d0/usercli_8h.html#a705">xxxLBoxCtlScroll</a>(plb, SB_ENDSCROLL, 0);
00310                     }
00311                 } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o34">fMultiColumn</a>) {
00312                     cPage = <a class="code" href="../../d8/d6/sertl_8c.html#a1">max</a>(1, plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o16">numberOfColumns</a>);
00313                     cLines = cDetants * (<span class="keywordtype">int</span>) <a class="code" href="../../d5/d4/acpitabl_8h.html#a69">min</a>((UINT) cPage, <a class="code" href="../../d1/d8/clglobal_8c.html#a4">gpsi</a>-&gt;ucWheelScrollLines);
00314                     cPos = <a class="code" href="../../d8/d6/sertl_8c.html#a1">max</a>(
00315                             0,
00316                             <a class="code" href="../../d5/d4/acpitabl_8h.html#a69">min</a>((plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o2">iTop</a> / plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o15">itemsPerColumn</a>) + cLines,
00317                                 plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o6">cMac</a> - 1 - ((plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o6">cMac</a> - 1) % plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o15">itemsPerColumn</a>)));
00318 
00319                     <span class="keywordflow">if</span> (cPos != plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o2">iTop</a>) {
00320                         <a class="code" href="../../d6/d0/usercli_8h.html#a704">xxxLBoxCtlHScrollMultiColumn</a>(plb, SB_THUMBPOSITION, cPos);
00321                         <a class="code" href="../../d6/d0/usercli_8h.html#a704">xxxLBoxCtlHScrollMultiColumn</a>(plb, SB_ENDSCROLL, 0);
00322                     }
00323                 } <span class="keywordflow">else</span> {
00324                     <a class="code" href="../../d6/d9/rtl_2wow_8c.html#a19">_GetClientRect</a>(plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o1">spwnd</a>, &amp;rc);
00325                     windowWidth = rc.right;
00326                     cPage = <a class="code" href="../../d8/d6/sertl_8c.html#a1">max</a>(plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o12">cxChar</a>, (windowWidth / 3) * 2) /
00327                             plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o12">cxChar</a>;
00328 
00329                     cLines = cDetants *
00330                             (<span class="keywordtype">int</span>) <a class="code" href="../../d5/d4/acpitabl_8h.html#a69">min</a>((UINT) cPage, <a class="code" href="../../d1/d8/clglobal_8c.html#a4">gpsi</a>-&gt;ucWheelScrollLines);
00331 
00332                     cPos = <a class="code" href="../../d8/d6/sertl_8c.html#a1">max</a>(
00333                             0,
00334                             <a class="code" href="../../d5/d4/acpitabl_8h.html#a69">min</a>(plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o56">xOrigin</a> + (cLines * plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o12">cxChar</a>),
00335                                 plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o57">maxWidth</a>));
00336 
00337                     <span class="keywordflow">if</span> (cPos != plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o56">xOrigin</a>) {
00338                         <a class="code" href="../../d6/d0/usercli_8h.html#a703">xxxLBoxCtlHScroll</a>(plb, SB_THUMBPOSITION, cPos);
00339                         <a class="code" href="../../d6/d0/usercli_8h.html#a703">xxxLBoxCtlHScroll</a>(plb, SB_ENDSCROLL, 0);
00340                     }
00341                 }
00342             }
00343         }
00344         <span class="keywordflow">break</span>;
00345 
00346     <span class="keywordflow">case</span> WM_VSCROLL:
00347         <a class="code" href="../../d6/d0/usercli_8h.html#a705">xxxLBoxCtlScroll</a>(plb, LOWORD(wParam), HIWORD(wParam));
00348         <span class="keywordflow">break</span>;
00349 
00350     <span class="keywordflow">case</span> WM_HSCROLL:
00351         <a class="code" href="../../d6/d0/usercli_8h.html#a703">xxxLBoxCtlHScroll</a>(plb, LOWORD(wParam), HIWORD(wParam));
00352         <span class="keywordflow">break</span>;
00353 
00354     <span class="keywordflow">case</span> WM_GETDLGCODE:
00355         <span class="keywordflow">return</span> DLGC_WANTARROWS | DLGC_WANTCHARS;
00356 
00357     <span class="keywordflow">case</span> WM_CREATE:
00358         <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a697">xxxLBCreate</a>(plb, pwnd, (LPCREATESTRUCT) lParam);
00359 
00360     <span class="keywordflow">case</span> WM_SETREDRAW:
00361 
00362         <span class="comment">/*</span>
00363 <span class="comment">         * If wParam is nonzero, the redraw flag is set</span>
00364 <span class="comment">         * If wParam is zero, the flag is cleared</span>
00365 <span class="comment">         */</span>
00366         <a class="code" href="../../d6/d0/usercli_8h.html#a738">xxxLBSetRedraw</a>(plb, (wParam != 0));
00367         <span class="keywordflow">break</span>;
00368 
00369     <span class="keywordflow">case</span> WM_ENABLE:
00370         <a class="code" href="../../d6/d0/usercli_8h.html#a711">xxxLBInvalidateRect</a>(plb, NULL, !plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o18">OwnerDraw</a>);
00371         <span class="keywordflow">break</span>;
00372 
00373     <span class="keywordflow">case</span> WM_SETFONT:
00374         <a class="code" href="../../d6/d0/usercli_8h.html#a723">xxxLBSetFont</a>(plb, (HANDLE)wParam, LOWORD(lParam));
00375         <span class="keywordflow">break</span>;
00376 
00377     <span class="keywordflow">case</span> WM_GETFONT:
00378         <span class="keywordflow">return</span> (LRESULT)plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o55">hFont</a>;
00379 
00380     <span class="keywordflow">case</span> WM_DRAGSELECT:
00381     <span class="keywordflow">case</span> WM_DRAGLOOP:
00382     <span class="keywordflow">case</span> WM_DRAGMOVE:
00383     <span class="keywordflow">case</span> WM_DROPFILES:
00384         <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o0">spwndParent</a>, &amp;tlpwndParent);
00385         lReturn = <a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a450">HW</a>(plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o0">spwndParent</a>), message, wParam, lParam);
00386         <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndParent);
00387         <span class="keywordflow">return</span> lReturn;
00388 
00389 
00390     <span class="keywordflow">case</span> WM_QUERYDROPOBJECT:
00391     <span class="keywordflow">case</span> WM_DROPOBJECT:
00392 
00393         <span class="comment">/*</span>
00394 <span class="comment">         * fix up control data, then pass message to parent</span>
00395 <span class="comment">         */</span>
00396         <a class="code" href="../../d6/d0/usercli_8h.html#a720">LBDropObjectHandler</a>(plb, (PDROPSTRUCT)lParam);
00397         <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o0">spwndParent</a>, &amp;tlpwndParent);
00398         lReturn = <a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a450">HW</a>(plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o0">spwndParent</a>), message, wParam, lParam);
00399         <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndParent);
00400         <span class="keywordflow">return</span> lReturn;
00401 
00402     <span class="keywordflow">case</span> LB_GETITEMRECT:
00403         <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a744">LBGetItemRect</a>(plb, (INT)wParam, (LPRECT)lParam);
00404 
00405     <span class="keywordflow">case</span> LB_GETITEMDATA:
00406         <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a721">LBGetItemData</a>(plb, (INT)wParam);  <span class="comment">// wParam = item index</span>
00407 
00408     <span class="keywordflow">case</span> LB_SETITEMDATA:
00409 
00410         <span class="comment">/*</span>
00411 <span class="comment">         * wParam is item index</span>
00412 <span class="comment">         */</span>
00413         <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a724">LBSetItemData</a>(plb, (INT)wParam, lParam);
00414 
00415     <span class="keywordflow">case</span> LB_ADDSTRINGUPPER:
00416         wFlags = <a class="code" href="../../d6/d0/usercli_8h.html#a64">UPPERCASE</a> | <a class="code" href="../../d6/d0/usercli_8h.html#a117">LBI_ADD</a>;
00417         <span class="keywordflow">goto</span> CallInsertItem;
00418 
00419     <span class="keywordflow">case</span> LB_ADDSTRINGLOWER:
00420         wFlags = <a class="code" href="../../d6/d0/usercli_8h.html#a65">LOWERCASE</a> | <a class="code" href="../../d6/d0/usercli_8h.html#a117">LBI_ADD</a>;
00421         <span class="keywordflow">goto</span> CallInsertItem;
00422 
00423     <span class="keywordflow">case</span> LB_ADDSTRING:
00424         wFlags = <a class="code" href="../../d6/d0/usercli_8h.html#a117">LBI_ADD</a>;
00425         <span class="keywordflow">goto</span> CallInsertItem;
00426 
00427     <span class="keywordflow">case</span> LB_INSERTSTRINGUPPER:
00428         wFlags = <a class="code" href="../../d6/d0/usercli_8h.html#a64">UPPERCASE</a>;
00429         <span class="keywordflow">goto</span> CallInsertItem;
00430 
00431     <span class="keywordflow">case</span> LB_INSERTSTRINGLOWER:
00432         wFlags = <a class="code" href="../../d6/d0/usercli_8h.html#a65">LOWERCASE</a>;
00433         <span class="keywordflow">goto</span> CallInsertItem;
00434 
00435     <span class="keywordflow">case</span> LB_INSERTSTRING:
00436         wFlags = 0;
00437 CallInsertItem:
00438         lReturn = ((LRESULT) <a class="code" href="../../d6/d0/usercli_8h.html#a685">xxxLBInsertItem</a>(plb, (LPWSTR) lParam, (<span class="keywordtype">int</span>) wParam, wFlags));
00439         <span class="keywordflow">break</span>;
00440 
00441     <span class="keywordflow">case</span> LB_INITSTORAGE:
00442         <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a749">xxxLBInitStorage</a>(plb, fAnsi, (INT)wParam, (INT)lParam);
00443 
00444     <span class="keywordflow">case</span> LB_DELETESTRING:
00445         <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a707">xxxLBoxCtlDelete</a>(plb, (INT)wParam);
00446 
00447     <span class="keywordflow">case</span> LB_DIR:
00448         <span class="comment">/*</span>
00449 <span class="comment">         * wParam - Dos attribute value.</span>
00450 <span class="comment">         * lParam - Points to a file specification string</span>
00451 <span class="comment">         */</span>
00452         lReturn = <a class="code" href="../../d6/d0/usercli_8h.html#a728">xxxLbDir</a>(plb, (INT)wParam, (LPWSTR)lParam);
00453         <span class="keywordflow">break</span>;
00454 
00455     <span class="keywordflow">case</span> LB_ADDFILE:
00456         lReturn = <a class="code" href="../../d6/d0/usercli_8h.html#a729">xxxLbInsertFile</a>(plb, (LPWSTR)lParam);
00457         <span class="keywordflow">break</span>;
00458 
00459     <span class="keywordflow">case</span> LB_SETSEL:
00460         <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a692">xxxLBSetSel</a>(plb, (wParam != 0), (INT)lParam);
00461 
00462     <span class="keywordflow">case</span> LB_SETCURSEL:
00463         <span class="comment">/*</span>
00464 <span class="comment">         * If window obscured, update so invert will work correctly</span>
00465 <span class="comment">         */</span>
00466 <span class="comment">// DISABLED in Win 3.1        xxxUpdateWindow(pwnd);</span>
00467         <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a690">xxxLBSetCurSel</a>(plb, (INT)wParam);
00468 
00469     <span class="keywordflow">case</span> LB_GETSEL:
00470         <span class="keywordflow">if</span> (wParam &gt;= (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>) plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o6">cMac</a>)
00471                 <span class="keywordflow">return</span>((LRESULT) LB_ERR);
00472 
00473         <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a687">IsSelected</a>(plb, (INT)wParam, SELONLY);
00474 
00475     <span class="keywordflow">case</span> LB_GETCURSEL:
00476         <span class="keywordflow">if</span> (plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o21">wMultiple</a> == <a class="code" href="../../d6/d0/usercli_8h.html#a114">SINGLESEL</a>) {
00477             <span class="keywordflow">return</span> plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o3">iSel</a>;
00478         }
00479         <span class="keywordflow">return</span> plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o4">iSelBase</a>;
00480 
00481     <span class="keywordflow">case</span> LB_SELITEMRANGE:
00482         <span class="keywordflow">if</span> (plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o21">wMultiple</a> == <a class="code" href="../../d6/d0/usercli_8h.html#a114">SINGLESEL</a>) {
00483             <span class="comment">/*</span>
00484 <span class="comment">             * Can't select a range if only single selections are enabled</span>
00485 <span class="comment">             */</span>
00486             RIPERR0(ERROR_INVALID_INDEX, RIP_VERBOSE,<span class="stringliteral">"Invalid index passed to LB_SELITEMRANGE"</span>);
00487             <span class="keywordflow">return</span> LB_ERR;
00488         }
00489 
00490         <a class="code" href="../../d6/d0/usercli_8h.html#a689">xxxLBSelRange</a>(plb, LOWORD(lParam), HIWORD(lParam), (wParam != 0));
00491         <span class="keywordflow">break</span>;
00492 
00493     <span class="keywordflow">case</span> LB_SELITEMRANGEEX:
00494         <span class="keywordflow">if</span> (plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o21">wMultiple</a> == <a class="code" href="../../d6/d0/usercli_8h.html#a114">SINGLESEL</a>) {
00495             <span class="comment">/*</span>
00496 <span class="comment">             * Can't select a range if only single selections are enabled</span>
00497 <span class="comment">             */</span>
00498             RIPERR0(ERROR_INVALID_LB_MESSAGE, RIP_VERBOSE,<span class="stringliteral">"LB_SELITEMRANGEEX:Can't select a range if only single selections are enabled"</span>);
00499             <span class="keywordflow">return</span> LB_ERR;
00500         } <span class="keywordflow">else</span> {
00501             <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fHighlight = ((<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)lParam &gt; (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)wParam);
00502             <span class="keywordflow">if</span> (fHighlight == <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>) {
00503                 ULONG_PTR temp = lParam;
00504                 lParam = wParam;
00505                 wParam = temp;
00506             }
00507             <a class="code" href="../../d6/d0/usercli_8h.html#a689">xxxLBSelRange</a>(plb, (INT)wParam, (INT)lParam, fHighlight);
00508         }
00509         <span class="keywordflow">break</span>;
00510 
00511     <span class="keywordflow">case</span> LB_GETTEXTLEN:
00512         <span class="keywordflow">if</span> (lParam != 0) {
00513             RIPMSG1(RIP_WARNING, <span class="stringliteral">"LB_GETTEXTLEN with lParam = %lx\n"</span>, lParam);
00514         }
00515         lReturn = <a class="code" href="../../d6/d0/usercli_8h.html#a722">LBGetText</a>(plb, TRUE, fAnsi, (INT)wParam, NULL);
00516         <span class="keywordflow">break</span>;
00517 
00518     <span class="keywordflow">case</span> LB_GETTEXT:
00519         lReturn = <a class="code" href="../../d6/d0/usercli_8h.html#a722">LBGetText</a>(plb, FALSE, fAnsi, (INT)wParam, (LPWSTR)lParam);
00520         <span class="keywordflow">break</span>;
00521 
00522     <span class="keywordflow">case</span> LB_GETCOUNT:
00523         <span class="comment">// Lotus Approach calls CallWndProc(ListWndProc, LB_GETCOUNT,...)</span>
00524         <span class="comment">// on a window that doesn't have a plb yet. So, we need to make</span>
00525         <span class="comment">// this check. Bug #6675 - 11/7/94 --</span>
00526         <span class="keywordflow">if</span>(plb)
00527             <span class="keywordflow">return</span>((LRESULT) plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o6">cMac</a>);
00528         <span class="keywordflow">else</span>
00529             <span class="keywordflow">return</span>(0);
00530 
00531     <span class="keywordflow">case</span> LB_SETCOUNT:
00532         <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a747">xxxLBSetCount</a>(plb, (INT)wParam);
00533 
00534     <span class="keywordflow">case</span> LB_SELECTSTRING:
00535     <span class="keywordflow">case</span> LB_FINDSTRING:
00536         iSel = <a class="code" href="../../d6/d0/usercli_8h.html#a683">xxxFindString</a>(plb, (LPWSTR)lParam, (INT)wParam, PREFIX, TRUE);
00537         <span class="keywordflow">if</span> (message == LB_FINDSTRING || iSel == LB_ERR) {
00538             lReturn = iSel;
00539         } <span class="keywordflow">else</span> {
00540             lReturn = <a class="code" href="../../d6/d0/usercli_8h.html#a690">xxxLBSetCurSel</a>(plb, iSel);
00541         }
00542         <span class="keywordflow">break</span>;
00543 
00544     <span class="keywordflow">case</span> LB_GETLOCALE:
00545         <span class="keywordflow">return</span> plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o60">dwLocaleId</a>;
00546 
00547     <span class="keywordflow">case</span> LB_SETLOCALE:
00548 
00549         <span class="comment">/*</span>
00550 <span class="comment">         * Validate locale</span>
00551 <span class="comment">         */</span>
00552         wParam = ConvertDefaultLocale((LCID)wParam);
00553         <span class="keywordflow">if</span> (!IsValidLocale((LCID)wParam, LCID_INSTALLED))
00554             <span class="keywordflow">return</span> LB_ERR;
00555 
00556         dw = plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o60">dwLocaleId</a>;
00557         plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o60">dwLocaleId</a> = (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)wParam;
00558         <span class="keywordflow">return</span> dw;
00559 
00560     <span class="keywordflow">case</span> WM_KEYDOWN:
00561 
00562         <span class="comment">/*</span>
00563 <span class="comment">         * IanJa: Use LOWORD() to get low 16-bits of wParam - this should</span>
00564 <span class="comment">         * work for Win16 &amp; Win32.  The value obtained is the virtual key</span>
00565 <span class="comment">         */</span>
00566         <a class="code" href="../../d6/d0/usercli_8h.html#a709">xxxLBoxCtlKeyInput</a>(plb, message, LOWORD(wParam));
00567         <span class="keywordflow">break</span>;
00568 
00569     <span class="keywordflow">case</span> WM_CHAR:
00570         <a class="code" href="../../d6/d0/usercli_8h.html#a708">xxxLBoxCtlCharInput</a>(plb, LOWORD(wParam), fAnsi);
00571         <span class="keywordflow">break</span>;
00572 
00573     <span class="keywordflow">case</span> LB_GETSELITEMS:
00574     <span class="keywordflow">case</span> LB_GETSELCOUNT:
00575 
00576         <span class="comment">/*</span>
00577 <span class="comment">         * IanJa/Win32 should this be LPWORD now?</span>
00578 <span class="comment">         */</span>
00579         <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a691">LBoxGetSelItems</a>(plb, (message == LB_GETSELCOUNT), (INT)wParam,
00580                 (LPINT)lParam);
00581 
00582     <span class="keywordflow">case</span> LB_SETTABSTOPS:
00583 
00584         <span class="comment">/*</span>
00585 <span class="comment">         * IanJa/Win32: Tabs given by array of INT for backwards compatability</span>
00586 <span class="comment">         */</span>
00587         <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a725">LBSetTabStops</a>(plb, (INT)wParam, (LPINT)lParam);
00588 
00589     <span class="keywordflow">case</span> LB_GETHORIZONTALEXTENT:
00590 
00591         <span class="comment">/*</span>
00592 <span class="comment">         * Return the max width of the listbox used for horizontal scrolling</span>
00593 <span class="comment">         */</span>
00594         <span class="keywordflow">return</span> plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o57">maxWidth</a>;
00595 
00596     <span class="keywordflow">case</span> LB_SETHORIZONTALEXTENT:
00597 
00598         <span class="comment">/*</span>
00599 <span class="comment">         * Set the max width of the listbox used for horizontal scrolling</span>
00600 <span class="comment">         */</span>
00601         <span class="keywordflow">if</span> (plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o57">maxWidth</a> != (<a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a>)wParam) {
00602             plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o57">maxWidth</a> = (<a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a>)wParam;
00603 
00604             <span class="comment">/*</span>
00605 <span class="comment">             * When horizontal extent is set, Show/hide the scroll bars.</span>
00606 <span class="comment">             * NOTE: LBShowHideScrollBars() takes care if Redraw is OFF.</span>
00607 <span class="comment">             * Fix for Bug #2477 -- 01/14/91 -- SANKAR --</span>
00608 <span class="comment">             */</span>
00609             <a class="code" href="../../d6/d0/usercli_8h.html#a706">xxxLBShowHideScrollBars</a>(plb); <span class="comment">//Try to show or hide scroll bars</span>
00610             <span class="keywordflow">if</span> (plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o38">fHorzBar</a> &amp;&amp; plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o47">fRightAlign</a> &amp;&amp; !(plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o34">fMultiColumn</a> || plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o18">OwnerDraw</a>)) {
00611                 <span class="comment">/*</span>
00612 <span class="comment">                 * origin to right</span>
00613 <span class="comment">                 */</span>
00614                 <a class="code" href="../../d6/d0/usercli_8h.html#a703">xxxLBoxCtlHScroll</a>(plb, SB_BOTTOM, 0);
00615             }
00616         }
00617         <span class="keywordflow">break</span>;    <span class="comment">/* originally returned register ax (message) ! */</span>
00618 
00619     <span class="keywordflow">case</span> LB_SETCOLUMNWIDTH:
00620 
00621         <span class="comment">/*</span>
00622 <span class="comment">         * Set the width of a column in a multicolumn listbox</span>
00623 <span class="comment">         */</span>
00624         plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o14">cxColumn</a> = (<a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a>)wParam;
00625         <a class="code" href="../../d6/d0/usercli_8h.html#a743">LBCalcItemRowsAndColumns</a>(plb);
00626         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a108">IsLBoxVisible</a>(plb))
00627             <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a206">NtUserInvalidateRect</a>(hwnd, NULL, TRUE);
00628         <a class="code" href="../../d6/d0/usercli_8h.html#a706">xxxLBShowHideScrollBars</a>(plb);
00629         <span class="keywordflow">break</span>;
00630 
00631     <span class="keywordflow">case</span> LB_SETANCHORINDEX:
00632         <span class="keywordflow">if</span> ((<a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a>)wParam &gt;= plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o6">cMac</a>) {
00633             RIPERR0(ERROR_INVALID_INDEX, RIP_VERBOSE,<span class="stringliteral">"Invalid index passed to LB_SETANCHORINDEX"</span>);
00634             <span class="keywordflow">return</span> LB_ERR;
00635         }
00636         plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o52">iMouseDown</a> = (<a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a>)wParam;
00637         plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o53">iLastMouseMove</a> = (<a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a>)wParam;
00638         <a class="code" href="../../d6/d0/usercli_8h.html#a716">xxxInsureVisible</a>(plb, (<span class="keywordtype">int</span>) wParam, (BOOL)(lParam != 0));
00639         <span class="keywordflow">break</span>;
00640 
00641     <span class="keywordflow">case</span> LB_GETANCHORINDEX:
00642         <span class="keywordflow">return</span> plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o52">iMouseDown</a>;
00643 
00644     <span class="keywordflow">case</span> LB_SETCARETINDEX:
00645         <span class="keywordflow">if</span> ( (plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o3">iSel</a> == -1) || ((plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o21">wMultiple</a> != <a class="code" href="../../d6/d0/usercli_8h.html#a114">SINGLESEL</a>) &amp;&amp;
00646                     (plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o6">cMac</a> &gt; (<a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a>)wParam))) {
00647 
00648             <span class="comment">/*</span>
00649 <span class="comment">             * Set's the iSelBase to the wParam</span>
00650 <span class="comment">             * if lParam, then don't scroll if partially visible</span>
00651 <span class="comment">             * else scroll into view if not fully visible</span>
00652 <span class="comment">             */</span>
00653             <a class="code" href="../../d6/d0/usercli_8h.html#a716">xxxInsureVisible</a>(plb, (INT)wParam, (BOOL)LOWORD(lParam));
00654             <a class="code" href="../../d6/d0/usercli_8h.html#a693">xxxSetISelBase</a>(plb, (INT)wParam);
00655             <span class="keywordflow">break</span>;
00656         } <span class="keywordflow">else</span> {
00657             <span class="keywordflow">if</span> ((<a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a>)wParam &gt;= plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o6">cMac</a>) {
00658                 RIPERR0(ERROR_INVALID_INDEX, RIP_VERBOSE,<span class="stringliteral">"Invalid index passed to LB_SETCARETINDEX"</span>);
00659             }
00660             <span class="keywordflow">return</span> LB_ERR;
00661         }
00662         <span class="keywordflow">break</span>;
00663 
00664     <span class="keywordflow">case</span> LB_GETCARETINDEX:
00665         <span class="keywordflow">return</span> plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o4">iSelBase</a>;
00666 
00667     <span class="keywordflow">case</span> LB_SETITEMHEIGHT:
00668     <span class="keywordflow">case</span> LB_GETITEMHEIGHT:
00669         <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a719">LBGetSetItemHeightHandler</a>(plb, message, (INT)wParam, LOWORD(lParam));
00670         <span class="keywordflow">break</span>;
00671 
00672     <span class="keywordflow">case</span> LB_FINDSTRINGEXACT:
00673         lReturn = <a class="code" href="../../d6/d0/usercli_8h.html#a683">xxxFindString</a>(plb, (LPWSTR)lParam, (INT)wParam, EQ, TRUE);
00674         <span class="keywordflow">break</span>;
00675 
00676     <span class="keywordflow">case</span> LB_ITEMFROMPOINT: {
00677         POINT pt;
00678         <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> bOutside;
00679         <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwItem;
00680 
00681         POINTSTOPOINT(pt, lParam);
00682         bOutside = <a class="code" href="../../d6/d0/usercli_8h.html#a686">ISelFromPt</a>(plb, pt, &amp;dwItem);
00683         UserAssert(bOutside == 1 || bOutside == 0);
00684         <span class="keywordflow">return</span> (LRESULT)MAKELONG(dwItem, bOutside);
00685     }
00686 
00687     <span class="keywordflow">case</span> LBCB_CARETON:
00688 
00689         <span class="comment">/*</span>
00690 <span class="comment">         * Internal message for combo box support</span>
00691 <span class="comment">         */</span>
00692         <a class="code" href="../../d6/d0/usercli_8h.html#a66">CaretCreate</a>(plb);
00693         <span class="comment">// Set up the caret in the proper location for drop downs.</span>
00694         plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o4">iSelBase</a> = plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o3">iSel</a>;
00695         <a class="code" href="../../d6/d0/usercli_8h.html#a695">xxxLBSetCaret</a>(plb, TRUE);
00696         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a405">FWINABLE</a>()) {
00697             <span class="keywordflow">if</span> (<a class="code" href="../../d6/d9/rtl_2wow_8c.html#a17">_IsWindowVisible</a>(pwnd)) {
00698                 <a class="code" href="../../d6/d0/usercli_8h.html#a409">LBEvent</a>(plb, EVENT_OBJECT_FOCUS, plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o4">iSelBase</a>);
00699             }
00700         }
00701         <span class="keywordflow">return</span>(plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o3">iSel</a>);
00702 
00703     <span class="keywordflow">case</span> LBCB_CARETOFF:
00704 
00705         <span class="comment">/*</span>
00706 <span class="comment">         * Internal message for combo box support</span>
00707 <span class="comment">         */</span>
00708         <a class="code" href="../../d6/d0/usercli_8h.html#a695">xxxLBSetCaret</a>(plb, FALSE);
00709         <a class="code" href="../../d6/d0/usercli_8h.html#a696">xxxCaretDestroy</a>(plb);
00710         <span class="keywordflow">break</span>;
00711 
00712     <span class="keywordflow">case</span> WM_NCCREATE:
00713         <span class="keywordflow">if</span> ((pwnd-&gt;style &amp; LBS_MULTICOLUMN) &amp;&amp; (pwnd-&gt;style &amp; WS_VSCROLL))
00714         {
00715             <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> mask = WS_VSCROLL;
00716             <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> flags = 0;
00717             <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFWIN40COMPAT)) {
00718                 mask |= WS_HSCROLL;
00719                 flags = WS_HSCROLL;
00720             }
00721             <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a285">NtUserAlterWindowStyle</a>(hwnd, mask, flags);
00722         }
00723         <span class="keywordflow">goto</span> CallDWP;
00724 
00725      <span class="keywordflow">default</span>:
00726 CallDWP:
00727         <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a610">DefWindowProcWorker</a>(pwnd, message, wParam, lParam, fAnsi);
00728     }
00729 
00730     <span class="comment">/*</span>
00731 <span class="comment">     * Handle translation of ANSI output data and free buffer</span>
00732 <span class="comment">     */</span>
00733     <span class="keywordflow">if</span> (lpwsz) {
00734         <a class="code" href="../../d6/d0/usercli_8h.html#a138">UserLocalFree</a>(lpwsz);
00735     }
00736 
00737     <span class="keywordflow">return</span> lReturn;
00738 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a651" doxytag="usercli.h::LoadCursorIconFromFileMap" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HANDLE LoadCursorIconFromFileMap           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN <a class="el" href="../../d1/d2/struct__FILEINFO.html">PFILEINFO</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pfi</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN OUT LPWSTR *&nbsp;</td>
          <td class="mdname" nowrap> <em>prt</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cxDesired</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cyDesired</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>LR_flags</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT LPBOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>pfAni</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d3/client_2acons_8c-source.html#l00279">279</a> of file <a class="el" href="../../d4/d3/client_2acons_8c-source.html">client/acons.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l03344">ConvertDIBIcon()</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d4/d3/client_2acons_8c-source.html#l00777">LoadAniIcon()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d4/d3/client_2acons_8c-source.html#l00222">ReadChunk()</a>, <a class="el" href="../../d4/d3/client_2acons_8c-source.html#l00145">ReadFilePtr()</a>, <a class="el" href="../../d4/d3/client_2acons_8c-source.html#l00454">ReadIconGuts()</a>, <a class="el" href="../../d4/d3/client_2acons_8c-source.html#l00211">ReadTag()</a>, <a class="el" href="../../d4/d3/client_2acons_8c-source.html#l00245">SkipChunk()</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d5/d8/clres_8c-source.html#l01573">LoadCursorIconFromResource()</a>, and <a class="el" href="../../d4/d1/rtlres_8c-source.html#l00142">RtlLoadObjectFromDIBFile()</a>.
<p>
<pre class="fragment"><div>00286 {
00287     LPNEWHEADER pnh;
00288     <span class="keywordtype">int</span> offResBase;
00289 
00290     *pfAni = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00291     offResBase = 0;
00292 
00293     <span class="comment">/*</span>
00294 <span class="comment">     * Determine if this is an .ICO/.CUR file or an .ANI file.</span>
00295 <span class="comment">     */</span>
00296     pnh = (LPNEWHEADER)pfi-&gt;pFileMap;
00297     <span class="keywordflow">if</span> (*(LPDWORD)pnh == FOURCC_RIFF) {
00298 
00299         RTAG tag;
00300 
00301         <span class="comment">/*</span>
00302 <span class="comment">         * It's an ANICURSOR!</span>
00303 <span class="comment">         * Seek back to beginning + 1 tag.</span>
00304 <span class="comment">         */</span>
00305         pfi-&gt;pFilePtr = pfi-&gt;pFileMap + <span class="keyword">sizeof</span>(tag);
00306 
00307         <span class="comment">/* check RIFF type for ACON */</span>
00308         <span class="keywordflow">if</span> (*(LPDWORD)pfi-&gt;pFilePtr != FOURCC_ACON) {
00309             <span class="keywordflow">return</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00310         }
00311         pfi-&gt;pFilePtr += <span class="keyword">sizeof</span>(<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>);
00312         <span class="keywordflow">if</span> (pfi-&gt;pFilePtr &gt; pfi-&gt;pFileEnd) {
00313             <span class="keywordflow">return</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00314         }
00315 
00316         <span class="comment">/*</span>
00317 <span class="comment">         * Ok, we have a ACON chunk.  Find the first ICON chunk and set</span>
00318 <span class="comment">         * things up so it looks we've just loaded the header of a normal</span>
00319 <span class="comment">         * .CUR file, then fall into the .CUR bits handling code below.</span>
00320 <span class="comment">         */</span>
00321         <span class="keywordflow">while</span> (<a class="code" href="../../d3/d4/client_2acons_8c.html#a3">ReadTag</a>(pfi, &amp;tag)) {
00322             <span class="comment">/*</span>
00323 <span class="comment">             * Handle each chunk type.</span>
00324 <span class="comment">             */</span>
00325             <span class="keywordflow">if</span> (tag.ckID == FOURCC_anih) {
00326 
00327                 ANIHEADER anih;
00328 
00329                 <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d4/client_2acons_8c.html#a4">ReadChunk</a>(pfi, &amp;tag, &amp;anih)) {
00330                     <span class="keywordflow">return</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00331                 }
00332 
00333                 <span class="keywordflow">if</span> (!(anih.fl &amp; AF_ICON) || (anih.cFrames == 0)) {
00334                     <span class="keywordflow">return</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00335                 }
00336 
00337                 <span class="comment">// If this ACON has more than one frame then go ahead</span>
00338                 <span class="comment">// and create an ACON, otherwise just use the first</span>
00339                 <span class="comment">// frame to create a normal ICON/CURSOR.</span>
00340 
00341                 <span class="keywordflow">if</span> (anih.cFrames &gt; 1) {
00342 
00343                     *pfAni = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00344                     *prt = RT_CURSOR;
00345                     <span class="keywordflow">return</span>(<a class="code" href="../../d3/d4/client_2acons_8c.html#a8">LoadAniIcon</a>(pfi,
00346                                        RT_CURSOR,
00347                                        cxDesired,
00348                                        cyDesired,
00349                                        LR_flags));
00350                 }
00351 
00352             } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tag.ckID == FOURCC_LIST) {
00353                 LPDWORD pdwType = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00354                 <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fOK = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00355                 <span class="comment">/*</span>
00356 <span class="comment">                 * If this is the fram list, then get the first icon out of it</span>
00357 <span class="comment">                 */</span>
00358 
00359                 <span class="comment">/* check LIST type for fram */</span>
00360 
00361                 <span class="keywordflow">if</span>( tag.ckSize &gt;= <span class="keyword">sizeof</span>(<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>) &amp;&amp;
00362                         (fOK = <a class="code" href="../../d3/d4/client_2acons_8c.html#a11">ReadFilePtr</a>( pfi,
00363                                             &amp;pdwType,
00364                                             <span class="keyword">sizeof</span>(DWORD))) &amp;&amp;
00365                         *pdwType == FOURCC_fram) {
00366 
00367                     <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d4/client_2acons_8c.html#a3">ReadTag</a>(pfi, &amp;tag)) {
00368                         <span class="keywordflow">return</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00369                     }
00370 
00371                     <span class="keywordflow">if</span> (tag.ckID == FOURCC_icon) {
00372                         <span class="comment">/*</span>
00373 <span class="comment">                         * We've found what we're looking for.  Get current position</span>
00374 <span class="comment">                         * in file to be used as the base from which the icon data</span>
00375 <span class="comment">                         * offsets are offset from.</span>
00376 <span class="comment">                         */</span>
00377                         offResBase = (<span class="keywordtype">int</span>)(pfi-&gt;pFilePtr - pfi-&gt;pFileMap);
00378 
00379                         <span class="comment">/*</span>
00380 <span class="comment">                         * Grab the header first, since the following code assumes</span>
00381 <span class="comment">                         * it was read above.</span>
00382 <span class="comment">                         */</span>
00383                         <a class="code" href="../../d3/d4/client_2acons_8c.html#a11">ReadFilePtr</a>(pfi, &amp;pnh, <span class="keyword">sizeof</span>(NEWHEADER));
00384 
00385                         <span class="comment">/*</span>
00386 <span class="comment">                         * Break out and let the icon loading/cursor creating code</span>
00387 <span class="comment">                         * take it from here.</span>
00388 <span class="comment">                         */</span>
00389                         <span class="keywordflow">break</span>;
00390                     } <span class="keywordflow">else</span> {
00391                         <a class="code" href="../../d3/d4/client_2acons_8c.html#a5">SkipChunk</a>(pfi, &amp;tag);
00392                     }
00393                 } <span class="keywordflow">else</span> {
00394                     <span class="comment">/*</span>
00395 <span class="comment">                     * Something bad happened in the type read, if it was</span>
00396 <span class="comment">                     * a file error then close and exit, otherwise just</span>
00397 <span class="comment">                     * skip the rest of the chunk</span>
00398 <span class="comment">                     */</span>
00399                     <span class="keywordflow">if</span>(!fOK) {
00400                         <span class="keywordflow">return</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00401                     }
00402                     <span class="comment">/*</span>
00403 <span class="comment">                     * take the type we just read out of the tag size and</span>
00404 <span class="comment">                     * skip the rest</span>
00405 <span class="comment">                     */</span>
00406                     tag.ckSize -= <span class="keyword">sizeof</span>(<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>);
00407                     <a class="code" href="../../d3/d4/client_2acons_8c.html#a5">SkipChunk</a>(pfi, &amp;tag);
00408                 }
00409             } <span class="keywordflow">else</span> {
00410                 <span class="comment">/*</span>
00411 <span class="comment">                 * We're not interested in this chunk, skip it.</span>
00412 <span class="comment">                 */</span>
00413                 <a class="code" href="../../d3/d4/client_2acons_8c.html#a5">SkipChunk</a>(pfi, &amp;tag);
00414             }
00415         }
00416     } <span class="keywordflow">else</span> { <span class="comment">// not a RIFF file.</span>
00417         <span class="keywordflow">if</span> ((pnh-&gt;ResType != FT_ICON) &amp;&amp; (pnh-&gt;ResType != FT_CURSOR)) {
00418             <span class="keywordflow">return</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00419         }
00420     }
00421     {
00422         <a class="code" href="../../d0/d2/structtagCURSORRESOURCE.html">PCURSORRESOURCE</a> pcres;
00423 
00424         pcres = <a class="code" href="../../d3/d4/client_2acons_8c.html#a15">ReadIconGuts</a>(pfi,
00425                              pnh,
00426                              offResBase,
00427                              prt,
00428                              cxDesired,
00429                              cyDesired,
00430                              LR_flags);
00431 
00432         <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a660">ConvertDIBIcon</a>((LPBITMAPINFOHEADER)pcres,
00433                               NULL,
00434                               pfi-&gt;pszName,
00435                               *prt == RT_ICON,
00436                               cxDesired,
00437                               cyDesired,
00438                               LR_flags);
00439     }
00440 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a658" doxytag="usercli.h::LoadCursorOrIconFromFile" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HCURSOR LoadCursorOrIconFromFile           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">LPCWSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>pszFilename</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fIcon</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a655" doxytag="usercli.h::LoadIcoCur" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HICON LoadIcoCur           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HINSTANCE&nbsp;</td>
          <td class="mdname" nowrap> <em>hmod</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPCWSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>lpName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPWSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>type</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cxDesired</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cyDesired</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>LR_flags</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d8/clres_8c-source.html#l02657">2657</a> of file <a class="el" href="../../d5/d8/clres_8c-source.html">clres.c</a>.
<p>
References <a class="el" href="../../d5/d8/clres_8c-source.html#l00070">tagMAPRES::bFlags</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02338">tagCURSORFIND::bpp</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l03173">ConnectIfNecessary</a>, <a class="el" href="../../d0/d0/client_2nt6_2user_8h.html#a1072">CURSORFIND</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02336">tagCURSORFIND::cx</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02337">tagCURSORFIND::cy</a>, <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l01102">FindExistingCursorIcon()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01123">GETAPPVER</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l04096">GetIcoCurBpp()</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l04074">GetIcoCurHeight()</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l04052">GetIcoCurWidth()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02209">tagCURSORFIND::hcur</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00053">hmodUser</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l00068">tagMAPRES::idDisp</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l00069">tagMAPRES::idUser</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00410">IS_PTR</a>, <a class="el" href="../../d4/d9/clres_8c.html#a26">LPMAPRES</a>, <a class="el" href="../../d4/d8/arcinst_8c-source.html#l00065">MAX_PATH</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l00063">MR_FAILFOR40</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l02847">ObjectFromDIBResource()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00411">PTR_TO_ID</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02335">tagCURSORFIND::rt</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00063">szUSER32</a>, <a class="el" href="../../d4/d4/i386_2trapc_8c-source.html#l00076">type</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00475">VER40</a>, and <a class="el" href="../../d5/d8/clres_8c-source.html#l00128">WowGetModuleFileName()</a>.
<p>
Referenced by <a class="el" href="../../d5/d8/clres_8c-source.html#l04436">CopyImageFromRes()</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l01465">GetCursorFrameInfo()</a>, <a class="el" href="../../d7/d7/clinit_8c-source.html#l00307">LoadCursorsAndIcons()</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l02349">LoadCursorW()</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l02393">LoadIconW()</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l02443">LoadImageW()</a>, <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l01078">SetSystemCursor()</a>, and <a class="el" href="../../d5/d8/clres_8c-source.html#l04200">WowServerLoadCreateCursorIcon()</a>.
<p>
<pre class="fragment"><div>02664 {
02665     HICON     hico;
02666     LPWSTR    pszModName;
02667     WCHAR     achModName[<a class="code" href="../../d3/d9/arcinst_8c.html#a6">MAX_PATH</a>];
02668 
02669     <a class="code" href="../../d1/d0/inc_2user_8h.html#a848">ConnectIfNecessary</a>();
02670 
02671     <span class="comment">/*</span>
02672 <span class="comment">     * Setup module name and handles for lookup.</span>
02673 <span class="comment">     */</span>
02674     <span class="keywordflow">if</span> (hmod == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)  {
02675 
02676         hmod = <a class="code" href="../../d1/d8/clglobal_8c.html#a6">hmodUser</a>;
02677         pszModName = <a class="code" href="../../d1/d8/clglobal_8c.html#a12">szUSER32</a>;
02678 
02679     } <span class="keywordflow">else</span> {
02680 
02681         <a class="code" href="../../d6/d0/usercli_8h.html#a647">WowGetModuleFileName</a>(hmod,
02682                              achModName,
02683                              <span class="keyword">sizeof</span>(achModName) / <span class="keyword">sizeof</span>(WCHAR));
02684 
02685         pszModName = achModName;
02686     }
02687 
02688     <span class="keywordflow">if</span> (LR_flags &amp; LR_CREATEDIBSECTION)
02689         LR_flags = (LR_flags &amp; ~LR_CREATEDIBSECTION) | LR_CREATEREALDIB;
02690 
02691     <span class="comment">/*</span>
02692 <span class="comment">     * Setup defaults.</span>
02693 <span class="comment">     */</span>
02694     <span class="keywordflow">if</span> ((hmod == <a class="code" href="../../d1/d8/clglobal_8c.html#a6">hmodUser</a>) &amp;&amp; !<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a98">IS_PTR</a>(pszResName)) {
02695 
02696         <span class="keywordtype">int</span>      imapMax;
02697         <a class="code" href="../../d6/d0/structtagMAPRES.html">LPMAPRES</a> lpMapRes;
02698 
02699         <span class="comment">/*</span>
02700 <span class="comment">         * Map some old OEM IDs for people.</span>
02701 <span class="comment">         */</span>
02702         <span class="keywordflow">if</span> (<a class="code" href="../../d3/d5/i386_2trapc_8c.html#a9">type</a> == RT_ICON) {
02703 
02704             <span class="keyword">static</span> <a class="code" href="../../d6/d0/structtagMAPRES.html">MAPRES</a> MapOemOic[] = {
02705                 {OCR_ICOCUR, OIC_WINLOGO, <a class="code" href="../../d4/d9/clres_8c.html#a11">MR_FAILFOR40</a>}
02706             };
02707 
02708             lpMapRes = MapOemOic;
02709             imapMax  = 1;
02710 
02711         } <span class="keywordflow">else</span> {
02712 
02713             <span class="keyword">static</span> <a class="code" href="../../d6/d0/structtagMAPRES.html">MAPRES</a> MapOemOcr[] = {
02714                 {OCR_ICON, OCR_ICON, <a class="code" href="../../d4/d9/clres_8c.html#a11">MR_FAILFOR40</a>},
02715                 {OCR_SIZE, OCR_SIZE, <a class="code" href="../../d4/d9/clres_8c.html#a11">MR_FAILFOR40</a>}
02716             };
02717 
02718             lpMapRes = MapOemOcr;
02719             imapMax  = 2;
02720         }
02721 
02722         <span class="keywordflow">while</span> (--imapMax &gt;= 0) {
02723 
02724             <span class="keywordflow">if</span> (lpMapRes-&gt;<a class="code" href="../../d6/d0/structtagMAPRES.html#o0">idDisp</a> == <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a99">PTR_TO_ID</a>(pszResName)) {
02725 
02726                 <span class="keywordflow">if</span> ((lpMapRes-&gt;<a class="code" href="../../d6/d0/structtagMAPRES.html#o2">bFlags</a> &amp; <a class="code" href="../../d4/d9/clres_8c.html#a11">MR_FAILFOR40</a>) &amp;&amp;
02727                     <a class="code" href="../../d6/d0/usercli_8h.html#a150">GETAPPVER</a>() &gt;= <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a101">VER40</a>) {
02728 
02729                     RIPMSG1(RIP_WARNING,
02730                           <span class="stringliteral">"LoadIcoCur: Old ID 0x%x not allowed for 4.0 apps"</span>,
02731                           <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a99">PTR_TO_ID</a>(pszResName));
02732 
02733                     <span class="keywordflow">return</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
02734                 }
02735 
02736                 pszResName = MAKEINTRESOURCE(lpMapRes-&gt;<a class="code" href="../../d6/d0/structtagMAPRES.html#o1">idUser</a>);
02737                 <span class="keywordflow">break</span>;
02738             }
02739 
02740             ++lpMapRes;
02741         }
02742     }
02743 
02744     <span class="comment">/*</span>
02745 <span class="comment">     * Determine size of requested object.</span>
02746 <span class="comment">     */</span>
02747     cxDesired = <a class="code" href="../../d6/d0/usercli_8h.html#a652">GetIcoCurWidth</a>(cxDesired , (type == RT_ICON), LR_flags, 0);
02748     cyDesired = <a class="code" href="../../d6/d0/usercli_8h.html#a653">GetIcoCurHeight</a>(cyDesired, (type == RT_ICON), LR_flags, 0);
02749 
02750     <span class="comment">/*</span>
02751 <span class="comment">     * See if this is a cached icon/cursor, and grab it if we have one</span>
02752 <span class="comment">     * already.</span>
02753 <span class="comment">     */</span>
02754     <span class="keywordflow">if</span> (LR_flags &amp; LR_SHARED) {
02755 
02756         <a class="code" href="../../d9/d1/structtagCURSORFIND.html">CURSORFIND</a> cfSearch;
02757 
02758         <span class="comment">/*</span>
02759 <span class="comment">         * Note that win95 fails to load any USER resources unless</span>
02760 <span class="comment">         * LR_SHARED is specified - so we do too.  Also, win95 will</span>
02761 <span class="comment">         * ignore your cx, cy and LR_flag parameters and just give</span>
02762 <span class="comment">         * you whats in the cache so we do too.</span>
02763 <span class="comment">         * A shame but thats life...</span>
02764 <span class="comment">         *</span>
02765 <span class="comment">         * Setup search criteria.  Since this is a load, we will have</span>
02766 <span class="comment">         * no source-cursor to lookup.  Find something respectable.</span>
02767 <span class="comment">         */</span>
02768         cfSearch.<a class="code" href="../../d9/d1/structtagCURSORFIND.html#o0">hcur</a> = (HCURSOR)<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
02769         cfSearch.<a class="code" href="../../d9/d1/structtagCURSORFIND.html#o1">rt</a>   = PtrToUlong(type);
02770 
02771         <span class="keywordflow">if</span> (hmod == <a class="code" href="../../d1/d8/clglobal_8c.html#a6">hmodUser</a>) {
02772 
02773             cfSearch.<a class="code" href="../../d9/d1/structtagCURSORFIND.html#o2">cx</a>  = 0;
02774             cfSearch.<a class="code" href="../../d9/d1/structtagCURSORFIND.html#o3">cy</a>  = 0;
02775             cfSearch.<a class="code" href="../../d9/d1/structtagCURSORFIND.html#o4">bpp</a> = 0;
02776 
02777         } <span class="keywordflow">else</span> {
02778 
02779             cfSearch.<a class="code" href="../../d9/d1/structtagCURSORFIND.html#o2">cx</a>  = cxDesired;
02780             cfSearch.<a class="code" href="../../d9/d1/structtagCURSORFIND.html#o3">cy</a>  = cyDesired;
02781 
02782 <span class="comment">/*</span>
02783 <span class="comment"> * On NT we have a more strict cache-lookup.  By passing in (zero), we</span>
02784 <span class="comment"> * will tell the cache-lookup to ignore the bpp.  This fixes a problem</span>
02785 <span class="comment"> * in Crayola Art Studio where the coloring-book cursor was being created</span>
02786 <span class="comment"> * as an invisible cursor.  This lookup is compatible with Win95.</span>
02787 <span class="comment"> */</span>
02788 <span class="preprocessor">#if 0</span>
02789 <span class="preprocessor"></span>            cfSearch.<a class="code" href="../../d9/d1/structtagCURSORFIND.html#o4">bpp</a> = <a class="code" href="../../d6/d0/usercli_8h.html#a654">GetIcoCurBpp</a>(LR_flags);
02790 <span class="preprocessor">#else</span>
02791 <span class="preprocessor"></span>            cfSearch.<a class="code" href="../../d9/d1/structtagCURSORFIND.html#o4">bpp</a> = 0;
02792 <span class="preprocessor">#endif</span>
02793 <span class="preprocessor"></span>        }
02794 
02795         hico = <a class="code" href="../../d6/d0/usercli_8h.html#a627">FindExistingCursorIcon</a>(pszModName, pszResName, &amp;cfSearch);
02796 
02797         <span class="keywordflow">if</span> (hico != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
02798             <span class="keywordflow">goto</span> IcoCurFound;
02799     }
02800 
02801 <span class="preprocessor">#ifdef LATER // SanfordS</span>
02802 <span class="preprocessor"></span>    <span class="comment">/*</span>
02803 <span class="comment">     * We need to handle the case where a configurable icon has been</span>
02804 <span class="comment">     * loaded from some arbitrary module or file and someone now wants</span>
02805 <span class="comment">     * to load the same thing in a different size or color content.</span>
02806 <span class="comment">     *</span>
02807 <span class="comment">     * A cheezier alternative is to just call CopyImage on what we</span>
02808 <span class="comment">     * found.</span>
02809 <span class="comment">     */</span>
02810     <span class="keywordflow">if</span> (hmod == <a class="code" href="../../d1/d8/clglobal_8c.html#a6">hmodUser</a>) {
02811         hico = <a class="code" href="../../d6/d0/usercli_8h.html#a627">FindExistingCursorIcon</a>(NULL,
02812                                       szUSER,
02813                                       type,
02814                                       pszResName,
02815                                       0,
02816                                       0,
02817                                       0);
02818         <span class="keywordflow">if</span> (hico != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
02819             <span class="comment">/*</span>
02820 <span class="comment">             * Find out where the original came from and load it.</span>
02821 <span class="comment">             * This may require some redesign to remember the</span>
02822 <span class="comment">             * filename that LR_LOADFROMFILE images came from.</span>
02823 <span class="comment">             */</span>
02824             _GetIconInfo(....);
02825             <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a655">LoadIcoCur</a>(....);
02826         }
02827     }
02828 <span class="preprocessor">#endif</span>
02829 <span class="preprocessor"></span>
02830     hico = (HICON)<a class="code" href="../../d6/d0/usercli_8h.html#a656">ObjectFromDIBResource</a>(hmod,
02831                                         pszResName,
02832                                         type,
02833                                         cxDesired,
02834                                         cyDesired,
02835                                         LR_flags);
02836 
02837 IcoCurFound:
02838 
02839     <span class="keywordflow">return</span> hico;
02840 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a608" doxytag="usercli.h::LoadKeyboardLayoutWorker" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HKL LoadKeyboardLayoutWorker           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HKL&nbsp;</td>
          <td class="mdname" nowrap> <em>hkl</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPCWSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>lpszKLName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>uFlags</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fFailSafe</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l04385">4385</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d6/d0/usercli_8h.html#a625">_LoadKeyboardLayoutEx()</a>, <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00129">CliImmInitializeHotKeys()</a>, <a class="el" href="../../d9/d9/immstruc_8h-source.html#l00077">ISHK_ADD</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d6/d9/obclose_8c-source.html#l00037">NtClose()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l04019">OpenKeyboardLayoutFile()</a>, and <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/client_8c-source.html#l04439">LoadKeyboardLayoutEx()</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l04463">LoadKeyboardLayoutW()</a>, and <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00049">UpdatePerUserSystemParameters()</a>.
<p>
<pre class="fragment"><div>04390 {
04391     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> offTable;
04392     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> KbdInputLocale;
04393     HANDLE hFile;
04394     HKL hKbdLayout;
04395     WCHAR awchKL[KL_NAMELENGTH];
04396 
04397     TAGMSG1(DBGTAG_IMM, <span class="stringliteral">"LoadKeyboardLayoutWorker called with KLNAME=%S"</span>, lpszKLName);
04398 
04399     <span class="comment">/*</span>
04400 <span class="comment">     * If there is a substitute keyboard layout OpenKeyboardLayoutFile returns</span>
04401 <span class="comment">     * the substitute keyboard layout name to load.</span>
04402 <span class="comment">     */</span>
04403     wcsncpy(awchKL, lpszKLName, KL_NAMELENGTH - 1);
04404     awchKL[KL_NAMELENGTH - 1] = <a class="code" href="../../d2/d0/aw_8h.html#a3">L</a><span class="charliteral">'\0'</span>;
04405 
04406     <span class="comment">/*</span>
04407 <span class="comment">     * Open the layout file</span>
04408 <span class="comment">     */</span>
04409     hFile = <a class="code" href="../../d6/d0/usercli_8h.html#a604">OpenKeyboardLayoutFile</a>(awchKL, &amp;uFlags, &amp;offTable, &amp;KbdInputLocale);
04410     <span class="keywordflow">if</span> (hFile == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
04411         <span class="keywordflow">if</span> (!fFailSafe &amp;&amp; (uFlags &amp; KLF_FAILSAFE) == 0) {
04412             <span class="comment">// If not fail safe mode, just bail to fail.</span>
04413             <span class="keywordflow">return</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
04414         }
04415         uFlags &amp;= ~KLF_SUBSTITUTE_OK;
04416         <span class="keywordflow">if</span> (wcscmp(awchKL, L<span class="stringliteral">"00000409"</span>)) {
04417             wcscpy(awchKL, L<span class="stringliteral">"00000409"</span>);
04418             hFile = <a class="code" href="../../d6/d0/usercli_8h.html#a604">OpenKeyboardLayoutFile</a>(awchKL, &amp;uFlags, &amp;offTable, &amp;KbdInputLocale);
04419         }
04420         <span class="keywordflow">if</span> (hFile == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
04421             <span class="comment">// It's OK to pass NULL hFile. This lets the win32k prepare and</span>
04422             <span class="comment">// allocate the fallback keyboard layout.</span>
04423             <span class="comment">// kbdnul, which is a fallback keyboard layout stored in in win32k, will be used:</span>
04424         }
04425     }
04426 
04427     <span class="comment">/*</span>
04428 <span class="comment">     * Call the server to read the keyboard tables.  Note that</span>
04429 <span class="comment">     * the server will close the file handle when it is done.</span>
04430 <span class="comment">     */</span>
04431     hKbdLayout = <a class="code" href="../../d6/d0/usercli_8h.html#a625">_LoadKeyboardLayoutEx</a>(hFile, offTable, hkl, awchKL, KbdInputLocale, uFlags);
04432     <a class="code" href="../../d5/d0/obclose_8c.html#a1">NtClose</a>(hFile);
04433 
04434     <a class="code" href="../../d6/d0/usercli_8h.html#a788">CliImmInitializeHotKeys</a>(ISHK_ADD, (HKL)IntToPtr( KbdInputLocale ));
04435 
04436     <span class="keywordflow">return</span> hKbdLayout;
04437 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a605" doxytag="usercli.h::LoadPreloadKeyboardLayouts" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID LoadPreloadKeyboardLayouts           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l03976">3976</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l00293">ISREMOTESESSION</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l04463">LoadKeyboardLayoutW()</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l03974">NSIZEPRELOAD</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, and <a class="el" href="../../d2/d7/hal_8h.html#a212">VOID()</a>.
<p>
Referenced by <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00049">UpdatePerUserSystemParameters()</a>.
<p>
<pre class="fragment"><div>03977 {
03978     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>  i;
03979     WCHAR szPreLoadee[<a class="code" href="../../d3/d8/client_8c.html#a6">NSIZEPRELOAD</a>];
03980     WCHAR lpszName[KL_NAMELENGTH];
03981 
03982     <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d0/usercli_8h.html#a30">ISREMOTESESSION</a>()) {
03983         <span class="comment">/*</span>
03984 <span class="comment">         * Console doesn't have a client layout, so start from 2.</span>
03985 <span class="comment">         */</span>
03986         i = 2;
03987     } <span class="keywordflow">else</span> {
03988         <span class="comment">/*</span>
03989 <span class="comment">         * Client might have specified a keyboard layout, if this</span>
03990 <span class="comment">         * is so, then Preload\1 was not loaded, so start from 1.</span>
03991 <span class="comment">         */</span>
03992         i = 1;
03993     }
03994 
03995     <span class="keywordflow">for</span> (; i &lt; 1000; i++) {
03996         wsprintf(szPreLoadee, L<span class="stringliteral">"%d"</span>, i );
03997         <span class="keywordflow">if</span> ((GetPrivateProfileStringW(
03998                  L<span class="stringliteral">"Preload"</span>,
03999                  szPreLoadee,
04000                  L<span class="stringliteral">""</span>,                            <span class="comment">// default = NULL</span>
04001                  lpszName,                       <span class="comment">// output buffer</span>
04002                  KL_NAMELENGTH,
04003                  L<span class="stringliteral">"keyboardlayout.ini"</span>) == -1 ) || (*lpszName == <a class="code" href="../../d2/d0/aw_8h.html#a3">L</a><span class="charliteral">'\0'</span>)) {
04004             <span class="keywordflow">break</span>;
04005         }
04006         <a class="code" href="../../d3/d8/client_8c.html#a151">LoadKeyboardLayoutW</a>(lpszName, KLF_REPLACELANG |KLF_SUBSTITUTE_OK |KLF_NOTELLSHELL);
04007     }
04008 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a427" doxytag="usercli.h::LoadStringOrError" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int LoadStringOrError           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HANDLE&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPTSTR&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WORD&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d5/d8/clres_8c-source.html#l00531">LoadStringA()</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l00569">LoadStringW()</a>, and <a class="el" href="../../d7/d3/msgbox_8c-source.html#l00489">MessageBoxWorker()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a415" doxytag="usercli.h::LocalReallocSafe" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HANDLE LocalReallocSafe           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hMem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwBytes</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwFlags</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d3/d4/structtagED.html">PPED</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pped</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a776" doxytag="usercli.h::MakeMenuItem" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int MakeMenuItem           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">LPWSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>lpOut</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00047">47</a> of file <a class="el" href="../../d6/d4/mdimenu_8c-source.html">mdimenu.c</a>.
<p>
References <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02071">FIRST</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l00463">_LARGE_UNICODE_STRING::Length</a>, <a class="el" href="../../d1/d0/inc_2user_8h.html#a1060">PMDI</a>, <a class="el" href="../../d1/d0/inc_2user_8h.html#a1062">PMDIWND</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00210">REBASEALWAYS</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00215">REBASEPWND</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01764">tagWND::spmenu</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01855">tagWND::strName</a>, and <a class="el" href="../../d7/d9/wsprintf_8c-source.html#l00995">wsprintfW()</a>.
<p>
Referenced by <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00362">AppendToWindowsMenu()</a>, and <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00104">ModifyMenuItem()</a>.
<p>
<pre class="fragment"><div>00050 {
00051     <a class="code" href="../../d8/d0/structtagMDI.html">PMDI</a> pmdi;
00052     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> rgParm;
00053     <span class="keywordtype">int</span> cch = 0;
00054     WCHAR string[160];
00055     LPWSTR lpstr;
00056     <span class="keywordtype">int</span> i = 0;
00057 
00058     <span class="comment">/*</span>
00059 <span class="comment">     * Get a pointer to the MDI structure</span>
00060 <span class="comment">     */</span>
00061     pmdi = ((<a class="code" href="../../d0/d1/structtagMDIWND.html">PMDIWND</a>)(<a class="code" href="../../d6/d0/usercli_8h.html#a27">REBASEPWND</a>(pwnd, spwndParent)))-&gt;pmdi;
00062 
00063     *lpOut = 0;
00064 
00065     rgParm = PtrToUlong(pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o16">spmenu</a>) - (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)<a class="code" href="../../d6/d0/usercli_8h.html#a274">FIRST</a>(pmdi) + 1;
00066 
00067     <span class="keywordflow">if</span> (pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o17">strName</a>.<a class="code" href="../../d2/d9/struct__LARGE__UNICODE__STRING.html#o0">Length</a>) {
00068         lpstr = <a class="code" href="../../d6/d0/usercli_8h.html#a24">REBASEALWAYS</a>(pwnd, strName.Buffer);
00069 
00070         <span class="comment">/*</span>
00071 <span class="comment">         * Search for an &amp; in the title string and duplicate it so that we don't</span>
00072 <span class="comment">         * get bogus accelerators.</span>
00073 <span class="comment">         */</span>
00074         <span class="keywordflow">while</span> (*lpstr &amp;&amp; i &lt; ((<span class="keyword">sizeof</span>(string) / <span class="keyword">sizeof</span>(WCHAR)) - 1)) {
00075             string[i] = *lpstr;
00076             i++;
00077             <span class="keywordflow">if</span> (*lpstr == TEXT(<span class="charliteral">'&amp;'</span>))
00078                 string[i++] = TEXT(<span class="charliteral">'&amp;'</span>);
00079 
00080             lpstr++;
00081         }
00082 
00083         string[i] = 0;
00084         cch = <a class="code" href="../../d6/d0/wsprintf_8c.html#a10">wsprintfW</a>(lpOut, L<span class="stringliteral">"&amp;%d %ws"</span>, rgParm, string);
00085 
00086     } <span class="keywordflow">else</span> {
00087 
00088         <span class="comment">/*</span>
00089 <span class="comment">         * Handle the case of MDI children without any window title text.</span>
00090 <span class="comment">         */</span>
00091         cch = <a class="code" href="../../d6/d0/wsprintf_8c.html#a10">wsprintfW</a>(lpOut, L<span class="stringliteral">"&amp;%d "</span>, rgParm);
00092     }
00093 
00094     <span class="keywordflow">return</span> cch;
00095 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a592" doxytag="usercli.h::MB_DlgProcA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> INT_PTR APIENTRY MB_DlgProcA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>msg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d3/msgbox_8c-source.html#l01866">1866</a> of file <a class="el" href="../../d7/d3/msgbox_8c-source.html">msgbox.c</a>.
<p>
References <a class="el" href="../../d7/d3/msgbox_8c-source.html#l01648">MB_DlgProcWorker()</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d7/d7/clinit_8c-source.html#l01219">ClientThreadSetup()</a>, and <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l00460">DefDlgProcWorker()</a>.
<p>
<pre class="fragment"><div>01871 {
01872     <span class="keywordflow">return</span> <a class="code" href="../../d6/d4/msgbox_8c.html#a31">MB_DlgProcWorker</a>(hwnd, message, wParam, lParam, TRUE);
01873 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a593" doxytag="usercli.h::MB_DlgProcW" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> INT_PTR APIENTRY MB_DlgProcW           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>msg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d3/msgbox_8c-source.html#l01875">1875</a> of file <a class="el" href="../../d7/d3/msgbox_8c-source.html">msgbox.c</a>.
<p>
References <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, and <a class="el" href="../../d7/d3/msgbox_8c-source.html#l01648">MB_DlgProcWorker()</a>.
<p>
Referenced by <a class="el" href="../../d7/d7/clinit_8c-source.html#l01219">ClientThreadSetup()</a>, <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l00460">DefDlgProcWorker()</a>, and <a class="el" href="../../d7/d3/msgbox_8c-source.html#l00730">SoftModalMessageBox()</a>.
<p>
<pre class="fragment"><div>01880 {
01881     <span class="keywordflow">return</span> <a class="code" href="../../d6/d4/msgbox_8c.html#a31">MB_DlgProcWorker</a>(hwnd, message, wParam, lParam, FALSE);
01882 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a594" doxytag="usercli.h::MDIActivateDlgProcA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> INT_PTR APIENTRY MDIActivateDlgProcA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>msg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00917">917</a> of file <a class="el" href="../../d6/d4/mdimenu_8c-source.html">mdimenu.c</a>.
<p>
References <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00849">MDIActivateDlgProcWorker()</a>.
<p>
Referenced by <a class="el" href="../../d7/d7/clinit_8c-source.html#l01219">ClientThreadSetup()</a>, and <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02101">DefFrameProcWorker()</a>.
<p>
<pre class="fragment"><div>00922 {
00923     <span class="keywordflow">return</span> <a class="code" href="../../d5/d5/mdimenu_8c.html#a12">MDIActivateDlgProcWorker</a>(hwnd, message, wParam, lParam);
00924 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a595" doxytag="usercli.h::MDIActivateDlgProcW" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> INT_PTR APIENTRY MDIActivateDlgProcW           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>msg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00926">926</a> of file <a class="el" href="../../d6/d4/mdimenu_8c-source.html">mdimenu.c</a>.
<p>
References <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00849">MDIActivateDlgProcWorker()</a>.
<p>
Referenced by <a class="el" href="../../d7/d7/clinit_8c-source.html#l01219">ClientThreadSetup()</a>, and <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02101">DefFrameProcWorker()</a>.
<p>
<pre class="fragment"><div>00931 {
00932     <span class="keywordflow">return</span> <a class="code" href="../../d5/d5/mdimenu_8c.html#a12">MDIActivateDlgProcWorker</a>(hwnd, message, wParam, lParam);
00933 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a778" doxytag="usercli.h::MDIAddSysMenu" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL MDIAddSysMenu           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HMENU&nbsp;</td>
          <td class="mdname" nowrap> <em>hmenuFrame</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwndChild</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00165">165</a> of file <a class="el" href="../../d6/d4/mdimenu_8c-source.html">mdimenu.c</a>.
<p>
References <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00796">_GetSubMenu()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d9/d3/w32_2ntuser_2kernel_2random_8c-source.html#l00102">ClearWindowState()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d0/d8/clmenu_8c-source.html#l00439">InternalInsertMenuItem()</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00277">IsWindow()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02763">MFMWFP_NOITEM</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01567">NtUserRedrawFrame</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05715">NtUserRemoveMenu()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01574">NtUserSetSysMenu</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01512">PtoH</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00210">REBASEALWAYS</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01763">tagWND::spmenuSys</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00120">ValidateHwnd</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02402">WFMINBOX</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02308">WFOLDUI</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02405">WFSYSMENU</a>, and <a class="el" href="../../d6/d6/ntuser_2rtl_2menu_8c-source.html#l00078">xxxMNCanClose()</a>.
<p>
Referenced by <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02735">MDICompleteChildCreation()</a>, <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00499">MDISetMenu()</a>, and <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02425">xxxChildResize()</a>.
<p>
<pre class="fragment"><div>00168 {
00169     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwndChild;
00170     MENUITEMINFO    mii;
00171     <a class="code" href="../../d1/d1/structtagMENU.html">PMENU</a> pMenuChild;
00172 
00173 
00174 <span class="comment">// LATER -- look at passing pwndChild in -- FritzS</span>
00175 
00176     UserAssert(<a class="code" href="../../d3/d9/client_2wow_8c.html#a11">IsWindow</a>(hwndChild));
00177     pwndChild = <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(hwndChild);
00178     <span class="keywordflow">if</span> (!hMenuFrame || !pwndChild || !pwndChild-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o15">spmenuSys</a>) {
00179         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00180     }
00181 
00182     <span class="comment">/*</span>
00183 <span class="comment">     * We don't need the pMenuChild pointer but the handle. However, if you</span>
00184 <span class="comment">     * do PtoH(_GetSubMenu()), you end up calling the function twice</span>
00185 <span class="comment">     */</span>
00186     pMenuChild = <a class="code" href="../../d6/d9/rtl_2wow_8c.html#a15">_GetSubMenu</a> (<a class="code" href="../../d6/d0/usercli_8h.html#a24">REBASEALWAYS</a>(pwndChild, spmenuSys), 0);
00187     <span class="keywordflow">if</span> (!pMenuChild) {
00188         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00189     }
00190 
00191 <span class="comment">// Add MDI system button as first menu item</span>
00192     mii.cbSize = <span class="keyword">sizeof</span>(MENUITEMINFO);
00193     mii.fMask = MIIM_SUBMENU | MIIM_DATA | MIIM_BITMAP;  <span class="comment">// Add MIIM_DATA because of hack described below</span>
00194     mii.hSubMenu = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a448">PtoH</a>(pMenuChild);
00195 <span class="comment">// Fritzs -- this won't work.</span>
00196 <span class="comment">//    mii.dwTypeData = (LPSTR) MAKELONG(MENUHBM_SYSTEM, GetWindowSmIcon(hwndChild));</span>
00197     mii.hbmpItem = HBMMENU_SYSTEM;
00198 <span class="comment">// FritzS -- so, we sneak the icon into ItemData</span>
00199     mii.dwItemData = (ULONG_PTR)hwndChild;
00200 
00201     <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d0/usercli_8h.html#a768">InternalInsertMenuItem</a>(hMenuFrame, 0, TRUE, &amp;mii))
00202         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00203 
00204     <span class="comment">// TimeLine 6.1 gets confused by the extra Min/Close buttons,</span>
00205     <span class="comment">// don't add them if WFOLDUI</span>
00206 
00207     mii.fMask = MIIM_ID | MIIM_FTYPE | MIIM_BITMAP;
00208     mii.fType = MFT_RIGHTJUSTIFY;
00209 
00210     pwndChild = <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(hwndChild);
00211     <span class="keywordflow">if</span> (!pwndChild) {
00212         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a218">NtUserRemoveMenu</a>(hMenuFrame, 0, MF_BYPOSITION);
00213         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00214     }
00215 
00216 
00217     <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwndChild, WFOLDUI))
00218     {
00219         <span class="comment">// Add Minimize button as last menu item</span>
00220         mii.hbmpItem = (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwndChild, WFMINBOX) ? HBMMENU_MBAR_MINIMIZE : HBMMENU_MBAR_MINIMIZE_D);
00221         mii.wID = SC_MINIMIZE;
00222 
00223         <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d0/usercli_8h.html#a768">InternalInsertMenuItem</a>(hMenuFrame, MFMWFP_NOITEM, TRUE, &amp;mii))
00224         {
00225             <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a218">NtUserRemoveMenu</a>(hMenuFrame, 0, MF_BYPOSITION);
00226             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00227         }
00228         mii.fType &amp;= ~MFT_RIGHTJUSTIFY;
00229     }
00230 
00231     <span class="comment">// Add Restore button as last menu item</span>
00232     mii.hbmpItem = HBMMENU_MBAR_RESTORE;
00233     mii.wID = SC_RESTORE;
00234 
00235     <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d0/usercli_8h.html#a768">InternalInsertMenuItem</a>(hMenuFrame, MFMWFP_NOITEM, TRUE, &amp;mii)) {
00236         <span class="comment">// BOGUS -- we gotta remove the MINIMIZE button too</span>
00237         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a218">NtUserRemoveMenu</a>(hMenuFrame, 0, MF_BYPOSITION);
00238         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00239     }
00240 
00241     pwndChild = <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(hwndChild);
00242     <span class="keywordflow">if</span> (!pwndChild) {
00243         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a218">NtUserRemoveMenu</a>(hMenuFrame, 0, MF_BYPOSITION);
00244         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00245     }
00246 
00247     <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwndChild, WFOLDUI))
00248     {
00249         <span class="comment">// Add Close button as last menu item</span>
00250         mii.hbmpItem = (<a class="code" href="../../d5/d7/ntuser_2rtl_2menu_8c.html#a1">xxxMNCanClose</a>(pwndChild) ? HBMMENU_MBAR_CLOSE : HBMMENU_MBAR_CLOSE_D);
00251         mii.wID = SC_CLOSE;
00252 
00253         <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d0/usercli_8h.html#a768">InternalInsertMenuItem</a>(hMenuFrame, MFMWFP_NOITEM, TRUE, &amp;mii))
00254         {
00255             <span class="comment">// BOGUS -- we gotta remove the MINIMIZE and RESTORE buttons too</span>
00256             <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a218">NtUserRemoveMenu</a>(hMenuFrame, 0, MF_BYPOSITION);
00257             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00258         }
00259     }
00260 
00261     <span class="comment">/*</span>
00262 <span class="comment">     * Set the menu items to proper state since we just maximized it.  Note</span>
00263 <span class="comment">     * setsysmenu doesn't work if we've cleared the sysmenu bit so do it now...</span>
00264 <span class="comment">     */</span>
00265     <a class="code" href="../../d6/d0/usercli_8h.html#a229">NtUserSetSysMenu</a>(hwndChild);
00266 
00267     <span class="comment">/*</span>
00268 <span class="comment">     * This is so that if the user brings up the child sysmenu, it's sure</span>
00269 <span class="comment">     * to be that in the frame menu bar...</span>
00270 <span class="comment">     */</span>
00271     <a class="code" href="../../d4/d1/userk_8h.html#a1629">ClearWindowState</a>(pwndChild, WFSYSMENU);
00272 
00273     <span class="comment">/*</span>
00274 <span class="comment">     * Make sure that the child's frame is redrawn to reflect the removed</span>
00275 <span class="comment">     * system menu.</span>
00276 <span class="comment">     */</span>
00277     <a class="code" href="../../d6/d0/usercli_8h.html#a222">NtUserRedrawFrame</a>(hwndChild);
00278 
00279     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00280 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a590" doxytag="usercli.h::MDIClientWndProcA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LRESULT APIENTRY MDIClientWndProcA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>msg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02063">2063</a> of file <a class="el" href="../../d7/d4/mdiwin_8c-source.html">mdiwin.c</a>.
<p>
References <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01657">MDIClientWndProcWorker()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d5/d9/immcli_8h-source.html#l00120">ValidateHwnd</a>.
<p>
Referenced by <a class="el" href="../../d7/d7/clinit_8c-source.html#l01219">ClientThreadSetup()</a>.
<p>
<pre class="fragment"><div>02068 {
02069     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwnd;
02070 
02071     <span class="keywordflow">if</span> ((pwnd = <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(hwnd)) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
02072         <span class="keywordflow">return</span> 0;
02073     }
02074 
02075     <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a616">MDIClientWndProcWorker</a>(pwnd, message, wParam, lParam, TRUE);
02076 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a591" doxytag="usercli.h::MDIClientWndProcW" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LRESULT APIENTRY MDIClientWndProcW           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>msg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02078">2078</a> of file <a class="el" href="../../d7/d4/mdiwin_8c-source.html">mdiwin.c</a>.
<p>
References <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01657">MDIClientWndProcWorker()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d5/d9/immcli_8h-source.html#l00120">ValidateHwnd</a>.
<p>
Referenced by <a class="el" href="../../d7/d7/clinit_8c-source.html#l01219">ClientThreadSetup()</a>, and <a class="el" href="../../d7/d7/clinit_8c-source.html#l00378">RW_RegisterControls()</a>.
<p>
<pre class="fragment"><div>02083 {
02084     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwnd;
02085 
02086     <span class="keywordflow">if</span> ((pwnd = <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(hwnd)) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
02087         <span class="keywordflow">return</span> 0;
02088     }
02089 
02090     <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a616">MDIClientWndProcWorker</a>(pwnd, message, wParam, lParam, FALSE);
02091 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a616" doxytag="usercli.h::MDIClientWndProcWorker" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LRESULT MDIClientWndProcWorker           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>msg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>fAnsi</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01657">1657</a> of file <a class="el" href="../../d7/d4/mdiwin_8c-source.html">mdiwin.c</a>.
<p>
References <a class="el" href="../../d4/d7/winmgrc_8c-source.html#l00604">_AdjustWindowRectEx()</a>, <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l01171">_DefSetText()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02069">ACTIVE</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00200">CalcClientScrolling()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02062">CALCSCROLL</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01061">CascadeWindows()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02067">CKIDS</a>, <a class="el" href="../../d9/d3/w32_2ntuser_2kernel_2random_8c-source.html#l00102">ClearWindowState()</a>, <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00574">DefWindowProcWorker()</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02071">FIRST</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00836">FNID_CLEANEDUP_BIT</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00799">FNID_MDICLIENT</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00213">GetMenuItemCount()</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02996">GWLP_MDIDATA</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02060">HAS_SBHORZ</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02059">HAS_SBVERT</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02074">HTITLE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01514">HW</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01515">HWq</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00525">IsIconic()</a>, <a class="el" href="../../d4/d7/winmgrc_8c-source.html#l00475">IsMenu()</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02068">MAXED</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02028">MAXITEMS</a>, <a class="el" href="../../d1/d0/inc_2user_8h.html#a1059">MDI</a>, <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00289">MDIRemoveSysMenu()</a>, <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00499">MDISetMenu()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01557">NtUserArrangeIconicWindows</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l03915">NtUserChildWindowFromPointEx()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l03988">NtUserDeleteMenu()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05226">NtUserGetSystemMenu()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l01917">NtUserMoveWindow()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05902">NtUserSetFocus()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l07715">NtUserSetWindowFNID()</a>, <a class="el" href="../../d1/d9/ntuser_8h-source.html#l00964">NtUserSetWindowLongPtr</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l02180">NtUserSetWindowPos()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06235">NtUserShowScrollBar()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06274">NtUserShowWindow()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01577">NtUserUpdateClientRect</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01512">PtoH</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01839">tagWND::rcClient</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00213">REBASE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00215">REBASEPWND</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00483">RecalculateScrollRanges()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00160">SAMEWOWHANDLE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02072">SCROLL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02065">SCROLLCOUNT</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00383">ScrollMDIChildren()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02064">SCROLLSUPPRESS</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00652">SendMessage()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d8/d3/w32_2ntuser_2client_2random_8c-source.html#l00164">TextAlloc()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00362">ThreadLock</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00363">ThreadLockAlways</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00366">ThreadUnlock</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01217">TileWindows()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00368">Unlock</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00958">UserLocalAlloc</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00960">UserLocalFree</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00227">VALIDATECLASSANDSIZE</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00120">ValidateHwnd</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02406">WFHSCROLL</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02400">WFMAXBOX</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02415">WFMAXIMIZED</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02407">WFVSCROLL</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02319">WFWIN40COMPAT</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02070">WINDOW</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00727">WS_EX_MDICHILD</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02985">tagMDI::wScroll</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01540">xxxMDIDestroy()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01420">xxxMDINext()</a>, and <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00032">xxxSetFrameTitle()</a>.
<p>
Referenced by <a class="el" href="../../d7/d7/clinit_8c-source.html#l01219">ClientThreadSetup()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02063">MDIClientWndProcA()</a>, and <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02078">MDIClientWndProcW()</a>.
<p>
<pre class="fragment"><div>01663 {
01664     HWND hwnd = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(pwnd);
01665     HWND hwndT;
01666     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwndT;
01667     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpwndT;
01668     <a class="code" href="../../d8/d0/structtagMDI.html">PMDI</a> pmdi;
01669     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwndParent;
01670 
01671     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pwnd);
01672 
01673     <a class="code" href="../../d6/d0/usercli_8h.html#a28">VALIDATECLASSANDSIZE</a>(pwnd, FNID_MDICLIENT);
01674 
01675     <span class="comment">/*</span>
01676 <span class="comment">     * Get the pmdi for the given window now since we will use it a lot in</span>
01677 <span class="comment">     * various handlers. This was stored using SetWindowLong(hwnd,4,pmdi) when</span>
01678 <span class="comment">     * we initially created the MDI client window.</span>
01679 <span class="comment">     */</span>
01680     pmdi = ((<a class="code" href="../../d0/d1/structtagMDIWND.html">PMDIWND</a>)pwnd)-&gt;pmdi;
01681 
01682     <span class="keywordflow">if</span> (pmdi == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01683         <span class="keywordflow">switch</span> (message) {
01684         <span class="keywordflow">case</span> WM_MDICREATE:
01685         <span class="keywordflow">case</span> WM_MDIMAXIMIZE:
01686         <span class="keywordflow">case</span> WM_PARENTNOTIFY:
01687         <span class="keywordflow">case</span> WM_CREATE:
01688             <span class="comment">/*</span>
01689 <span class="comment">             * These messages are safe to call, even when pmdi has not already</span>
01690 <span class="comment">             * been initialized.</span>
01691 <span class="comment">             */</span>
01692             <span class="keywordflow">break</span>;
01693         
01694         <span class="keywordflow">default</span>:
01695             <span class="comment">/*</span>
01696 <span class="comment">             * Any message that is not listed above is not safe to call when</span>
01697 <span class="comment">             * pmdi has not been initialized.  Instead, just directly call DWP.</span>
01698 <span class="comment">             */</span>
01699             <span class="keywordflow">goto</span> CallDWP;
01700         }
01701     }
01702 
01703     <span class="keywordflow">switch</span> (message) {
01704     <span class="keywordflow">case</span> WM_NCACTIVATE:
01705 
01706         <span class="comment">/*</span>
01707 <span class="comment">         * We are changing app activation.  Fix the active child's caption.</span>
01708 <span class="comment">         */</span>
01709         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a272">ACTIVE</a>(pmdi) != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01710             <a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(<a class="code" href="../../d6/d0/usercli_8h.html#a272">ACTIVE</a>(pmdi), WM_NCACTIVATE, wParam, lParam);
01711         }
01712         <span class="keywordflow">goto</span> CallDWP;
01713 
01714     <span class="keywordflow">case</span> WM_MDIGETACTIVE:
01715         <span class="keywordflow">if</span> (lParam != 0) {
01716             *((LPBOOL)lParam) = (<a class="code" href="../../d6/d0/usercli_8h.html#a271">MAXED</a>(pmdi) != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>);
01717         }
01718 
01719         <span class="keywordflow">return</span> (LRESULT)<a class="code" href="../../d6/d0/usercli_8h.html#a272">ACTIVE</a>(pmdi);
01720 
01721     <span class="keywordflow">case</span> WM_MDIACTIVATE:
01722         hwndT = (HWND)wParam;
01723         <span class="keywordflow">if</span> ((pwndT = <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(hwndT)) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
01724             <span class="keywordflow">return</span> 0;
01725 
01726         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a15">SAMEWOWHANDLE</a>(hwndT, <a class="code" href="../../d6/d0/usercli_8h.html#a272">ACTIVE</a>(pmdi)))
01727               <span class="keywordflow">break</span>;
01728 
01729         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a115">NtUserSetWindowPos</a>(hwndT, HWND_TOP, 0, 0, 0, 0, SWP_NOMOVE | SWP_NOSIZE);
01730         <span class="keywordflow">break</span>;
01731 
01732     <span class="keywordflow">case</span> WM_MDICASCADE:
01733         pmdi-&gt;<a class="code" href="../../d8/d0/structtagMDI.html#o5">wScroll</a> |= <a class="code" href="../../d6/d0/usercli_8h.html#a268">SCROLLSUPPRESS</a>;
01734         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a235">NtUserShowScrollBar</a>(hwnd, SB_BOTH, FALSE);
01735 
01736         <span class="comment">/*</span>
01737 <span class="comment">         * Unmaximize any maximized window.</span>
01738 <span class="comment">         */</span>
01739 <span class="preprocessor">#ifdef NEVER  // Not in Chicago -- FritzS</span>
01740 <span class="preprocessor"></span>        <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a271">MAXED</a>(pmdi) != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01741             <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a237">NtUserShowWindow</a>(<a class="code" href="../../d6/d0/usercli_8h.html#a271">MAXED</a>(pmdi), SW_SHOWNORMAL);
01742         }
01743 <span class="preprocessor">#endif</span>
01744 <span class="preprocessor"></span>        <span class="comment">/*</span>
01745 <span class="comment">         * Save success/failure code to return to app</span>
01746 <span class="comment">         */</span>
01747         message = (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)<a class="code" href="../../d6/d5/mdiwin_8c.html#a21">CascadeWindows</a>(hwnd, (UINT)wParam, NULL, 0, NULL);
01748         pmdi-&gt;<a class="code" href="../../d8/d0/structtagMDI.html#o5">wScroll</a> &amp;= ~<a class="code" href="../../d6/d0/usercli_8h.html#a269">SCROLLCOUNT</a>;
01749         <span class="keywordflow">return</span> (LONG)message;
01750         <span class="keywordflow">break</span>;
01751 
01752     <span class="keywordflow">case</span> WM_VSCROLL:
01753     <span class="keywordflow">case</span> WM_HSCROLL:
01754         pmdi-&gt;<a class="code" href="../../d8/d0/structtagMDI.html#o5">wScroll</a> |= <a class="code" href="../../d6/d0/usercli_8h.html#a268">SCROLLSUPPRESS</a>;
01755         <a class="code" href="../../d6/d5/mdiwin_8c.html#a11">ScrollMDIChildren</a>(hwnd, (message == WM_VSCROLL) ? SB_VERT : SB_HORZ,
01756               LOWORD(wParam), (<span class="keywordtype">short</span>)(HIWORD(wParam)));
01757         pmdi-&gt;<a class="code" href="../../d8/d0/structtagMDI.html#o5">wScroll</a> &amp;= ~<a class="code" href="../../d6/d0/usercli_8h.html#a269">SCROLLCOUNT</a>;
01758         <span class="keywordflow">break</span>;
01759 
01760     <span class="keywordflow">case</span> WM_MDICREATE:
01761         {
01762         LPMDICREATESTRUCTA lpMCSA = (LPMDICREATESTRUCTA)lParam;
01763         LPMDICREATESTRUCTW lpMCSW = (LPMDICREATESTRUCTW)lParam;
01764         <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> exStyle = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a187">WS_EX_MDICHILD</a>;
01765 
01766         <span class="comment">/*</span>
01767 <span class="comment">         * inherit the right.to.leftness of the parent.</span>
01768 <span class="comment">         */</span>
01769         exStyle |= (pwnd-&gt;ExStyle &amp; (WS_EX_RIGHT | WS_EX_RTLREADING | WS_EX_LEFTSCROLLBAR));
01770 
01771         <span class="keywordflow">if</span> (fAnsi) {
01772             hwndT = CreateWindowExA(exStyle, lpMCSA-&gt;szClass, lpMCSA-&gt;szTitle,
01773                 lpMCSA-&gt;style, lpMCSA-&gt;x, lpMCSA-&gt;y, lpMCSA-&gt;cx, lpMCSA-&gt;cy,
01774                 hwnd, NULL, lpMCSA-&gt;hOwner, (LPSTR)lpMCSA-&gt;lParam);
01775         } <span class="keywordflow">else</span> {
01776             hwndT = CreateWindowExW(exStyle, lpMCSW-&gt;szClass, lpMCSW-&gt;szTitle,
01777                 lpMCSW-&gt;style, lpMCSW-&gt;x, lpMCSW-&gt;y, lpMCSW-&gt;cx, lpMCSW-&gt;cy,
01778                 hwnd, NULL, lpMCSW-&gt;hOwner, (LPWSTR)lpMCSW-&gt;lParam);
01779         }
01780 
01781         <span class="keywordflow">return</span>((LRESULT)hwndT);
01782 
01783         }
01784 
01785     <span class="keywordflow">case</span> WM_MDIDESTROY:
01786         <a class="code" href="../../d6/d5/mdiwin_8c.html#a28">xxxMDIDestroy</a>(pwnd, (HWND)wParam);
01787         <span class="keywordflow">break</span>;
01788 
01789     <span class="keywordflow">case</span> WM_MDIMAXIMIZE:
01790         hwndT = (HWND)wParam;
01791         <span class="keywordflow">if</span> ((pwndT = <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(hwndT)) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
01792             <span class="keywordflow">return</span> 0;
01793 
01794         <span class="comment">// Only maximize children with a MAXBOX.  However, this introduces</span>
01795         <span class="comment">// backwards-compatibility issues with VB apps (see#12211)</span>
01796         <span class="comment">// So, we do this only for WIN40COMPAT apps and beyond.</span>
01797         <span class="comment">//</span>
01798         <span class="keywordflow">if</span> ((<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwndT, WFMAXBOX)) || !(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwndT, WFWIN40COMPAT))) {
01799             <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a237">NtUserShowWindow</a>(hwndT, SW_SHOWMAXIMIZED);
01800         }
01801         <span class="keywordflow">break</span>;
01802 
01803     <span class="keywordflow">case</span> WM_MDIRESTORE:
01804         hwndT = (HWND)wParam;
01805         <span class="keywordflow">if</span> ((pwndT = <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(hwndT)) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
01806             <span class="keywordflow">return</span> 0;
01807 
01808         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a237">NtUserShowWindow</a>(hwndT, SW_SHOWNORMAL);
01809         <span class="keywordflow">break</span>;
01810 
01811     <span class="keywordflow">case</span> WM_MDITILE:
01812         pmdi-&gt;<a class="code" href="../../d8/d0/structtagMDI.html#o5">wScroll</a> |= <a class="code" href="../../d6/d0/usercli_8h.html#a268">SCROLLSUPPRESS</a>;
01813         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a235">NtUserShowScrollBar</a>(hwnd, SB_BOTH, FALSE);
01814 
01815         <span class="comment">/*</span>
01816 <span class="comment">         * Unmaximize any maximized window.</span>
01817 <span class="comment">         */</span>
01818 <span class="preprocessor">#ifdef NEVER  //Not in Chicago</span>
01819 <span class="preprocessor"></span>        <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a271">MAXED</a>(pmdi) != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01820             <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a237">NtUserShowWindow</a>(<a class="code" href="../../d6/d0/usercli_8h.html#a271">MAXED</a>(pmdi), SW_SHOWNORMAL);
01821         }
01822 <span class="preprocessor">#endif</span>
01823 <span class="preprocessor"></span>        <span class="comment">/*</span>
01824 <span class="comment">         * Save success/failure code to return to app</span>
01825 <span class="comment">         */</span>
01826         message = (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)<a class="code" href="../../d6/d5/mdiwin_8c.html#a23">TileWindows</a>(hwnd, (UINT)wParam, NULL, 0, NULL);
01827         pmdi-&gt;<a class="code" href="../../d8/d0/structtagMDI.html#o5">wScroll</a> &amp;= ~<a class="code" href="../../d6/d0/usercli_8h.html#a269">SCROLLCOUNT</a>;
01828         <span class="keywordflow">return</span> (LONG)message;
01829         <span class="keywordflow">break</span>;
01830 
01831     <span class="keywordflow">case</span> WM_MDIICONARRANGE:
01832         pmdi-&gt;<a class="code" href="../../d8/d0/structtagMDI.html#o5">wScroll</a> |= <a class="code" href="../../d6/d0/usercli_8h.html#a268">SCROLLSUPPRESS</a>;
01833         <a class="code" href="../../d6/d0/usercli_8h.html#a212">NtUserArrangeIconicWindows</a>(hwnd);
01834         pmdi-&gt;<a class="code" href="../../d8/d0/structtagMDI.html#o5">wScroll</a> &amp;= ~<a class="code" href="../../d6/d0/usercli_8h.html#a269">SCROLLCOUNT</a>;
01835         <a class="code" href="../../d6/d5/mdiwin_8c.html#a13">RecalculateScrollRanges</a>(pwnd, TRUE);
01836         <span class="keywordflow">break</span>;
01837 
01838     <span class="keywordflow">case</span> WM_MDINEXT:
01839         <span class="keywordflow">if</span> (wParam) {
01840             hwndT = (HWND)wParam;
01841         } <span class="keywordflow">else</span> {
01842             hwndT = <a class="code" href="../../d6/d0/usercli_8h.html#a272">ACTIVE</a>(pmdi);
01843         }
01844 
01845         <span class="keywordflow">if</span> ((pwndT = <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(hwndT)) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01846             <span class="keywordflow">return</span> 0;
01847         }
01848 
01849         <span class="comment">/*</span>
01850 <span class="comment">         * If lParam is 1, do a prev window instead of a next window</span>
01851 <span class="comment">         */</span>
01852         <a class="code" href="../../d6/d0/usercli_8h.html#a37">ThreadLockAlways</a>(pwndT, &amp;tlpwndT);
01853         <a class="code" href="../../d6/d5/mdiwin_8c.html#a25">xxxMDINext</a>(pwnd, pwndT, (lParam == 0 ? 0 : 1));
01854         <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndT);
01855         <span class="keywordflow">break</span>;
01856 
01857     <span class="keywordflow">case</span> WM_MDIREFRESHMENU:
01858             <span class="keywordflow">return</span> (LRESULT)<a class="code" href="../../d6/d0/usercli_8h.html#a781">MDISetMenu</a>(pwnd, TRUE, NULL, NULL);
01859 
01860     <span class="keywordflow">case</span> WM_MDISETMENU:
01861             <span class="keywordflow">return</span> (LRESULT)<a class="code" href="../../d6/d0/usercli_8h.html#a781">MDISetMenu</a>(pwnd, FALSE, (HMENU)wParam, (HMENU)lParam);
01862 
01863     <span class="keywordflow">case</span> WM_PARENTNOTIFY:
01864         <span class="keywordflow">if</span> (wParam == WM_LBUTTONDOWN) {
01865             HWND hwndChild;
01866             POINT pt;
01867 
01868 <span class="preprocessor">#ifdef USE_MIRRORING</span>
01869 <span class="preprocessor"></span>            <span class="keywordflow">if</span> ((pwndT = <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(hwnd)) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
01870                 <span class="keywordflow">return</span> 0;
01871 <span class="preprocessor">#endif</span>
01872 <span class="preprocessor"></span>
01873             <span class="comment">/*</span>
01874 <span class="comment">             * Activate this child and bring it to the top.</span>
01875 <span class="comment">             */</span>
01876             pt.x = (<span class="keywordtype">int</span>)MAKEPOINTS(lParam).x;
01877             pt.y = (<span class="keywordtype">int</span>)MAKEPOINTS(lParam).y;
01878 
01879 <span class="preprocessor">#ifdef USE_MIRRORING</span>
01880 <span class="preprocessor"></span>            <span class="comment">/*</span>
01881 <span class="comment">             * Since pt is relative to the client MDI window,</span>
01882 <span class="comment">             * then the points should be mirrored if the MDI</span>
01883 <span class="comment">             * client window is mirrored so that Scrren Coord</span>
01884 <span class="comment">             * calculations are done properly in NtUserChildWindowFromPointEx.</span>
01885 <span class="comment">             * [samera]</span>
01886 <span class="comment">             */</span>
01887             <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwndT,WEFLAYOUTRTL)) {
01888                 pt.x = (pwndT-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o7">rcClient</a>.right-pwndT-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o7">rcClient</a>.left)-pt.x;
01889             }
01890 <span class="preprocessor">#endif</span>
01891 <span class="preprocessor"></span>
01892             hwndChild = <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a151">NtUserChildWindowFromPointEx</a>(hwnd, pt,
01893                 CWP_SKIPDISABLED | CWP_SKIPINVISIBLE);
01894 
01895             <span class="keywordflow">if</span> ((hwndChild) &amp;&amp; (hwndChild != hwnd)) {
01896 
01897                 <span class="keywordflow">if</span> (hwndChild != <a class="code" href="../../d6/d0/usercli_8h.html#a272">ACTIVE</a>(pmdi)) {
01898                     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a115">NtUserSetWindowPos</a>(hwndChild, HWND_TOP, 0, 0, 0, 0,
01899                                  SWP_NOMOVE | SWP_NOSIZE);
01900                 }
01901             }
01902         }
01903         <span class="keywordflow">break</span>;
01904 
01905     <span class="keywordflow">case</span> WM_SETFOCUS:
01906         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a272">ACTIVE</a>(pmdi) != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> &amp;&amp; !<a class="code" href="../../d3/d9/client_2wow_8c.html#a19">IsIconic</a>(<a class="code" href="../../d6/d0/usercli_8h.html#a272">ACTIVE</a>(pmdi))) {
01907             <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a225">NtUserSetFocus</a>(<a class="code" href="../../d6/d0/usercli_8h.html#a272">ACTIVE</a>(pmdi));
01908         }
01909         <span class="keywordflow">break</span>;
01910 
01911     <span class="keywordflow">case</span> WM_SIZE:
01912         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a272">ACTIVE</a>(pmdi) &amp;&amp; (pwndT = <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(<a class="code" href="../../d6/d0/usercli_8h.html#a272">ACTIVE</a>(pmdi))) &amp;&amp;
01913             <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwndT, WFMAXIMIZED)) {
01914 
01915             RECT rc;
01916 
01917             rc.top = rc.left = 0;
01918             rc.right = (<span class="keywordtype">int</span>)MAKEPOINTS(lParam).x;
01919             rc.bottom = (<span class="keywordtype">int</span>)MAKEPOINTS(lParam).y;
01920             <a class="code" href="../../d1/d0/inc_2user_8h.html#a1195">_AdjustWindowRectEx</a>(&amp;rc, pwndT-&gt;style, FALSE,
01921                     pwndT-&gt;ExStyle);
01922             <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a111">NtUserMoveWindow</a>(<a class="code" href="../../d6/d0/usercli_8h.html#a272">ACTIVE</a>(pmdi), rc.left, rc.top,
01923                     rc.right - rc.left, rc.bottom - rc.top, TRUE);
01924         } <span class="keywordflow">else</span> {
01925             <a class="code" href="../../d6/d5/mdiwin_8c.html#a13">RecalculateScrollRanges</a>(pwnd, FALSE);
01926         }
01927         <span class="keywordflow">goto</span> CallDWP;
01928 
01929     <span class="keywordflow">case</span> MM_CALCSCROLL: {
01930 
01931         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a275">SCROLL</a>(pmdi) &amp; <a class="code" href="../../d6/d0/usercli_8h.html#a269">SCROLLCOUNT</a>)
01932             <span class="keywordflow">break</span>;
01933 
01934         {
01935             WORD sbj = pmdi-&gt;<a class="code" href="../../d8/d0/structtagMDI.html#o5">wScroll</a> &amp; (<a class="code" href="../../d6/d0/usercli_8h.html#a264">HAS_SBVERT</a> | <a class="code" href="../../d6/d0/usercli_8h.html#a265">HAS_SBHORZ</a>);
01936 
01937             <span class="keywordflow">if</span> (sbj)
01938             {
01939                 <a class="code" href="../../d6/d5/mdiwin_8c.html#a10">CalcClientScrolling</a>(hwnd, sbj, (BOOL) wParam);
01940 
01941                 <a class="code" href="../../d6/d0/usercli_8h.html#a275">SCROLL</a>(pmdi) &amp;= ~<a class="code" href="../../d6/d0/usercli_8h.html#a267">CALCSCROLL</a>;
01942             }
01943         }
01944         <span class="keywordflow">break</span>;
01945     }
01946 
01947     <span class="keywordflow">case</span> WM_CREATE: {
01948         LPCLIENTCREATESTRUCT pccs = ((LPCREATESTRUCT)lParam)-&gt;lpCreateParams;
01949 
01950         <span class="comment">/*</span>
01951 <span class="comment">         * Try to allocate space for the pmdi</span>
01952 <span class="comment">         */</span>
01953         <span class="keywordflow">if</span> ((pmdi = (<a class="code" href="../../d8/d0/structtagMDI.html">PMDI</a>)<a class="code" href="../../d6/d0/usercli_8h.html#a136">UserLocalAlloc</a>(HEAP_ZERO_MEMORY, <span class="keyword">sizeof</span>(<a class="code" href="../../d8/d0/structtagMDI.html">MDI</a>)))) {
01954             <a class="code" href="../../d0/d0/ntuser_8h.html#a3">NtUserSetWindowLongPtr</a>(hwnd, GWLP_MDIDATA, (LONG_PTR)pmdi, FALSE);
01955         } <span class="keywordflow">else</span> {
01956             <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a284">NtUserSetWindowFNID</a>(hwnd, FNID_CLEANEDUP_BIT);
01957             <span class="keywordflow">break</span>;
01958         }
01959 
01960         pwndParent = <a class="code" href="../../d6/d0/usercli_8h.html#a27">REBASEPWND</a>(pwnd, spwndParent);
01961         <a class="code" href="../../d6/d0/usercli_8h.html#a272">ACTIVE</a>(pmdi) = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
01962         <a class="code" href="../../d6/d0/usercli_8h.html#a271">MAXED</a>(pmdi)  = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
01963         <a class="code" href="../../d6/d0/usercli_8h.html#a270">CKIDS</a>(pmdi)  = 0;
01964         <a class="code" href="../../d6/d0/usercli_8h.html#a273">WINDOW</a>(pmdi) = pccs-&gt;hWindowMenu;
01965 
01966         <a class="code" href="../../d6/d0/usercli_8h.html#a274">FIRST</a>(pmdi)  = pccs-&gt;idFirstChild;
01967         <a class="code" href="../../d6/d0/usercli_8h.html#a275">SCROLL</a>(pmdi) = 0;
01968         <a class="code" href="../../d6/d0/usercli_8h.html#a277">HTITLE</a>(pmdi) = <a class="code" href="../../d1/d0/inc_2user_8h.html#a1222">TextAlloc</a>(<a class="code" href="../../d6/d0/usercli_8h.html#a26">REBASE</a>(pwndParent, strName.Buffer));
01969 
01970         <a class="code" href="../../d6/d0/usercli_8h.html#a622">_DefSetText</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a450">HW</a>(pwndParent), NULL, FALSE);
01971 
01972         <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(pwndParent, &amp;tlpwndT);
01973         <a class="code" href="../../d6/d5/mdiwin_8c.html#a7">xxxSetFrameTitle</a>(pwndParent, pwnd, (LPWSTR)2L);
01974         <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndT);
01975 
01976         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFVSCROLL))
01977             <a class="code" href="../../d6/d0/usercli_8h.html#a275">SCROLL</a>(pmdi) |= <a class="code" href="../../d6/d0/usercli_8h.html#a264">HAS_SBVERT</a>;
01978         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFHSCROLL))
01979             <a class="code" href="../../d6/d0/usercli_8h.html#a275">SCROLL</a>(pmdi) |= <a class="code" href="../../d6/d0/usercli_8h.html#a265">HAS_SBHORZ</a>;
01980         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a275">SCROLL</a>(pmdi)) {
01981             <a class="code" href="../../d4/d1/userk_8h.html#a1629">ClearWindowState</a>(pwnd, WFVSCROLL | WFHSCROLL);
01982         }
01983 
01984         <span class="comment">/*</span>
01985 <span class="comment">         * Set this dude's system menu.</span>
01986 <span class="comment">         */</span>
01987         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a202">NtUserGetSystemMenu</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a450">HW</a>(pwndParent), FALSE);
01988 
01989         <span class="comment">/*</span>
01990 <span class="comment">         * make sure we have the correct window client area if scrolls are</span>
01991 <span class="comment">         * removed...  hack to take care of small progman bug</span>
01992 <span class="comment">         */</span>
01993         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a275">SCROLL</a>(pmdi)) {
01994             <a class="code" href="../../d6/d0/usercli_8h.html#a232">NtUserUpdateClientRect</a>(hwnd);
01995         }
01996         <span class="keywordflow">break</span>;
01997     }
01998 
01999     <span class="keywordflow">case</span> WM_DESTROY:
02000     <span class="keywordflow">case</span> WM_FINALDESTROY:
02001         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a271">MAXED</a>(pmdi)) {
02002             <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwndParent;
02003             <a class="code" href="../../d1/d1/structtagMENU.html">PMENU</a> pmenu;
02004 
02005             pwndParent = <a class="code" href="../../d6/d0/usercli_8h.html#a27">REBASEPWND</a>(pwnd, spwndParent);
02006             pmenu = <a class="code" href="../../d6/d0/usercli_8h.html#a26">REBASE</a>(pwndParent, spmenu);
02007             <a class="code" href="../../d6/d0/usercli_8h.html#a779">MDIRemoveSysMenu</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a448">PtoH</a>(pmenu), <a class="code" href="../../d6/d0/usercli_8h.html#a271">MAXED</a>(pmdi));
02008         }
02009 
02010         <span class="comment">/*</span>
02011 <span class="comment">         * delete the title</span>
02012 <span class="comment">         */</span>
02013         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a277">HTITLE</a>(pmdi)) {
02014             <a class="code" href="../../d6/d0/usercli_8h.html#a138">UserLocalFree</a>(<a class="code" href="../../d6/d0/usercli_8h.html#a277">HTITLE</a>(pmdi));
02015             <a class="code" href="../../d6/d0/usercli_8h.html#a277">HTITLE</a>(pmdi) = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
02016         }
02017 
02018         <span class="comment">/*</span>
02019 <span class="comment">         * Delete the menu items of the child windows in the frame.</span>
02020 <span class="comment">         * Chances are, this is called by destroying the frame, but</span>
02021 <span class="comment">         * one never knows, does one?</span>
02022 <span class="comment">         *</span>
02023 <span class="comment">         * Increase CKIDS by 1 after checking to delete the separator</span>
02024 <span class="comment">         */</span>
02025         <span class="keywordflow">if</span> (<a class="code" href="../../d3/d8/winmgrc_8c.html#a24">IsMenu</a>(<a class="code" href="../../d6/d0/usercli_8h.html#a273">WINDOW</a>(pmdi)) &amp;&amp; <a class="code" href="../../d6/d0/usercli_8h.html#a270">CKIDS</a>(pmdi)++) {
02026             <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> iPosition;
02027 
02028             <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a270">CKIDS</a>(pmdi) &gt; <a class="code" href="../../d6/d0/usercli_8h.html#a260">MAXITEMS</a> + 1)
02029                 <a class="code" href="../../d6/d0/usercli_8h.html#a270">CKIDS</a>(pmdi) = <a class="code" href="../../d6/d0/usercli_8h.html#a260">MAXITEMS</a> + 1;
02030 
02031             iPosition = <a class="code" href="../../d3/d9/client_2wow_8c.html#a8">GetMenuItemCount</a>(<a class="code" href="../../d6/d0/usercli_8h.html#a273">WINDOW</a>(pmdi));
02032             <span class="keywordflow">while</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a270">CKIDS</a>(pmdi)--) {
02033                 <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a154">NtUserDeleteMenu</a>(<a class="code" href="../../d6/d0/usercli_8h.html#a273">WINDOW</a>(pmdi), --iPosition, MF_BYPOSITION);
02034             }
02035         }
02036 
02037         <span class="comment">/*</span>
02038 <span class="comment">         * Unlock those objects that are used by the MDI structure.</span>
02039 <span class="comment">         */</span>
02040         <a class="code" href="../../d6/d0/usercli_8h.html#a42">Unlock</a>(&amp;<a class="code" href="../../d6/d0/usercli_8h.html#a271">MAXED</a>(pmdi));
02041         <a class="code" href="../../d6/d0/usercli_8h.html#a42">Unlock</a>(&amp;<a class="code" href="../../d6/d0/usercli_8h.html#a272">ACTIVE</a>(pmdi));
02042         <a class="code" href="../../d6/d0/usercli_8h.html#a42">Unlock</a>(&amp;<a class="code" href="../../d6/d0/usercli_8h.html#a273">WINDOW</a>(pmdi));
02043 
02044         <span class="comment">/*</span>
02045 <span class="comment">         * Free the MDI structure</span>
02046 <span class="comment">         */</span>
02047         <a class="code" href="../../d6/d0/usercli_8h.html#a138">UserLocalFree</a>(pmdi);
02048         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a284">NtUserSetWindowFNID</a>(hwnd, FNID_CLEANEDUP_BIT);
02049 
02050         <span class="keywordflow">break</span>;
02051 
02052     <span class="keywordflow">default</span>:
02053 CallDWP:
02054         <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a610">DefWindowProcWorker</a>(pwnd, message, wParam, lParam, fAnsi);
02055     }
02056     <span class="keywordflow">return</span> 0<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>;
02057 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a774" doxytag="usercli.h::MDICompleteChildCreation" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL MDICompleteChildCreation           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwndChild</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HMENU&nbsp;</td>
          <td class="mdname" nowrap> <em>hSysMenu</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fVisible</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fDisabled</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02735">2735</a> of file <a class="el" href="../../d7/d4/mdiwin_8c-source.html">mdiwin.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l02069">ACTIVE</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02067">CKIDS</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01514">HW</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01515">HWq</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02073">ITILELEVEL</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02028">MAXITEMS</a>, <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00165">MDIAddSysMenu()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04100">NtUserDestroyMenu()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01567">NtUserRedrawFrame</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l08507">NtUserSetSystemMenu()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l02180">NtUserSetWindowPos()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06274">NtUserShowWindow()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01512">PtoH</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00213">REBASE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00215">REBASEPWND</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00652">SendMessage()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01763">tagWND::spmenuSys</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00120">ValidateHwnd</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02415">WFMAXIMIZED</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02420">WFMINIMIZED</a>.
<p>
Referenced by <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l01197">_CreateWindowEx()</a>.
<p>
<pre class="fragment"><div>02735                                                                                              {
02736     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwndChild;
02737     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a>  pwndClient;
02738     HWND  hwndClient;
02739     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>  fHasOwnSysMenu;
02740     <a class="code" href="../../d8/d0/structtagMDI.html">PMDI</a> pmdi;
02741 
02742     pwndChild = <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(hwndChild);
02743     pwndClient = <a class="code" href="../../d6/d0/usercli_8h.html#a27">REBASEPWND</a>(pwndChild,spwndParent);
02744     hwndClient = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(pwndClient);
02745 
02746     fHasOwnSysMenu = (pwndChild-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o15">spmenuSys</a>) ? <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a> : <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
02747 
02748     pmdi = ((<a class="code" href="../../d0/d1/structtagMDIWND.html">PMDIWND</a>)(pwndClient))-&gt;pmdi;
02749 
02750     <a class="code" href="../../d6/d0/usercli_8h.html#a270">CKIDS</a>(pmdi)++;
02751     <a class="code" href="../../d6/d0/usercli_8h.html#a276">ITILELEVEL</a>(pmdi)++;
02752     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a276">ITILELEVEL</a>(pmdi) &gt; 0x7ffe)
02753         <a class="code" href="../../d6/d0/usercli_8h.html#a276">ITILELEVEL</a>(pmdi) = 0;
02754 
02755     <span class="comment">// Update "Window" menu if this new window should be on it</span>
02756     <span class="keywordflow">if</span> (fVisible &amp;&amp; !fDisabled &amp;&amp; (<a class="code" href="../../d6/d0/usercli_8h.html#a270">CKIDS</a>(pmdi) &lt;= <a class="code" href="../../d6/d0/usercli_8h.html#a260">MAXITEMS</a>))
02757         <a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(hwndClient, WM_MDIREFRESHMENU, 0, 0L);
02758 
02759     <span class="comment">//</span>
02760     <span class="comment">// Add the MDI System Menu.  Catch the case of not being able to add a</span>
02761     <span class="comment">// system menu (EG, guy doesn't have WS_SYSMENU style), and delete the</span>
02762     <span class="comment">// menu to avoid buildup in USER's heap.</span>
02763     <span class="comment">//</span>
02764     <span class="keywordflow">if</span> (hSysMenu &amp;&amp; (fHasOwnSysMenu || !<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a297">NtUserSetSystemMenu</a>(hwndChild, hSysMenu)))
02765         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a158">NtUserDestroyMenu</a>(hSysMenu);
02766 
02767     <span class="keywordflow">if</span> (fVisible)
02768     {
02769         <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwndChild, WFMINIMIZED) || !<a class="code" href="../../d6/d0/usercli_8h.html#a272">ACTIVE</a>(pmdi))
02770         {
02771             <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a115">NtUserSetWindowPos</a>(hwndChild, HWND_TOP, 0, 0, 0, 0,
02772                     SWP_NOMOVE | SWP_NOSIZE | SWP_SHOWWINDOW);
02773 
02774             <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwndChild, WFMAXIMIZED) &amp;&amp; !fHasOwnSysMenu)
02775             {
02776                 <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwndParent = <a class="code" href="../../d6/d0/usercli_8h.html#a27">REBASEPWND</a>(pwndClient, spwndParent);
02777                 <a class="code" href="../../d1/d1/structtagMENU.html">PMENU</a> pmenu = <a class="code" href="../../d6/d0/usercli_8h.html#a26">REBASE</a>(pwndParent, spmenu);
02778                 <a class="code" href="../../d6/d0/usercli_8h.html#a778">MDIAddSysMenu</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a448">PtoH</a>(pmenu), hwndChild);
02779                 <a class="code" href="../../d6/d0/usercli_8h.html#a222">NtUserRedrawFrame</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a450">HW</a>(pwndParent));
02780             }
02781         }
02782         <span class="keywordflow">else</span>
02783         {
02784             <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a237">NtUserShowWindow</a>(hwndChild, SW_SHOWMINNOACTIVE);
02785         }
02786     }
02787 
02788 
02789     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
02790 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a779" doxytag="usercli.h::MDIRemoveSysMenu" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL MDIRemoveSysMenu           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HMENU&nbsp;</td>
          <td class="mdname" nowrap> <em>hMenuFrame</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwndChild</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00289">289</a> of file <a class="el" href="../../d6/d4/mdimenu_8c-source.html">mdimenu.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00213">GetMenuItemCount()</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00234">GetMenuItemID()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l03988">NtUserDeleteMenu()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01567">NtUserRedrawFrame</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05715">NtUserRemoveMenu()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d9/d3/w32_2ntuser_2kernel_2random_8c-source.html#l00083">SetWindowState()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00120">ValidateHwnd</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02308">WFOLDUI</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02405">WFSYSMENU</a>.
<p>
Referenced by <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01657">MDIClientWndProcWorker()</a>, <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00499">MDISetMenu()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02425">xxxChildResize()</a>, and <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01540">xxxMDIDestroy()</a>.
<p>
<pre class="fragment"><div>00292 {
00293     <span class="keywordtype">int</span> iLastItem;
00294     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>    iLastCmd;
00295     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwndChild;
00296 
00297 <span class="comment">// LATER -- look at passing pwndChild in -- FritzS</span>
00298 
00299     <span class="keywordflow">if</span> (hMenuFrame == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00300         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00301 
00302     pwndChild = <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(hwndChild);
00303 
00304     <span class="keywordflow">if</span> (pwndChild == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00305         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00306 
00307     iLastItem = <a class="code" href="../../d3/d9/client_2wow_8c.html#a8">GetMenuItemCount</a>(hMenuFrame) - 1;
00308     iLastCmd = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwndChild, WFOLDUI) ? SC_RESTORE : SC_CLOSE;
00309 
00310     <span class="keywordflow">if</span> ((<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>) <a class="code" href="../../d3/d9/client_2wow_8c.html#a9">GetMenuItemID</a>(hMenuFrame, iLastItem) != iLastCmd)
00311         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00312 
00313     <span class="comment">/*</span>
00314 <span class="comment">     * Enable the sysmenu in the child window.</span>
00315 <span class="comment">     */</span>
00316     <a class="code" href="../../d4/d1/userk_8h.html#a1628">SetWindowState</a>(pwndChild, WFSYSMENU);
00317 
00318     <span class="comment">/*</span>
00319 <span class="comment">     * Take the child sysmenu popup out of the frame menu.</span>
00320 <span class="comment">     */</span>
00321     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a218">NtUserRemoveMenu</a>(hMenuFrame, 0, MF_BYPOSITION);
00322 
00323     <span class="comment">/*</span>
00324 <span class="comment">     * Delete the restore button from the menu bar.</span>
00325 <span class="comment">     */</span>
00326     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a154">NtUserDeleteMenu</a>(hMenuFrame, iLastItem - 1, MF_BYPOSITION);
00327 
00328     pwndChild = <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(hwndChild);
00329     <span class="keywordflow">if</span> (pwndChild == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00330         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00331 
00332     <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwndChild, WFOLDUI)) {
00333         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a154">NtUserDeleteMenu</a>(hMenuFrame, iLastItem - 2, MF_BYPOSITION);
00334         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a154">NtUserDeleteMenu</a>(hMenuFrame, iLastItem - 3, MF_BYPOSITION);
00335     }
00336 
00337     <span class="comment">/*</span>
00338 <span class="comment">     * Make sure that the child's frame is redrawn to reflect the added</span>
00339 <span class="comment">     * system menu.</span>
00340 <span class="comment">     */</span>
00341     <a class="code" href="../../d6/d0/usercli_8h.html#a222">NtUserRedrawFrame</a>(hwndChild);
00342 
00343     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00344 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a781" doxytag="usercli.h::MDISetMenu" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HMENU MDISetMenu           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HMENU&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HMENU&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00499">499</a> of file <a class="el" href="../../d6/d4/mdimenu_8c-source.html">mdimenu.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l02069">ACTIVE</a>, <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00362">AppendToWindowsMenu()</a>, <a class="el" href="../../d8/d6/menuc_8c-source.html#l00015">CheckMenuItem()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02067">CKIDS</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00024">FindPwndChild()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02071">FIRST</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00180">GetMenu()</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00213">GetMenuItemCount()</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00234">GetMenuItemID()</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00260">GetMenuState()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01514">HW</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00367">Lock</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02068">MAXED</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02028">MAXITEMS</a>, <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00165">MDIAddSysMenu()</a>, <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00289">MDIRemoveSysMenu()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l03988">NtUserDeleteMenu()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05923">NtUserSetMenu()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00215">REBASEPWND</a>, <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00467">ShiftMenuIDs()</a>, <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00417">SwitchWindowsMenus()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02418">WFDISABLED</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02419">WFVISIBLE</a>, and <a class="el" href="../../d7/d9/usercli_8h-source.html#l02070">WINDOW</a>.
<p>
Referenced by <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01657">MDIClientWndProcWorker()</a>.
<p>
<pre class="fragment"><div>00504 {
00505     <span class="keywordtype">int</span> i;
00506     <span class="keywordtype">int</span> iFirst;
00507     <span class="keywordtype">int</span> item;
00508     <a class="code" href="../../d8/d0/structtagMDI.html">PMDI</a> pmdi;
00509     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwndParent;
00510     HMENU hOldSys;
00511     HMENU hOldWindow;
00512     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwndChild;
00513 
00514     <span class="comment">/*</span>
00515 <span class="comment">     * Get a pointer to the MDI structure</span>
00516 <span class="comment">     */</span>
00517     pmdi = ((<a class="code" href="../../d0/d1/structtagMDIWND.html">PMDIWND</a>)pwndMDI)-&gt;pmdi;
00518 
00519     <span class="comment">/*</span>
00520 <span class="comment">     * Save the old values</span>
00521 <span class="comment">     */</span>
00522     pwndParent = <a class="code" href="../../d6/d0/usercli_8h.html#a27">REBASEPWND</a>(pwndMDI, spwndParent);
00523     hOldSys = <a class="code" href="../../d3/d9/client_2wow_8c.html#a7">GetMenu</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a450">HW</a>(pwndParent));
00524     hOldWindow = <a class="code" href="../../d6/d0/usercli_8h.html#a273">WINDOW</a>(pmdi);
00525 
00526     <span class="keywordflow">if</span> (fRefresh) {
00527         hNewSys = hOldSys;
00528         hNewWindow = hOldWindow;
00529     }
00530 
00531     <span class="comment">/*</span>
00532 <span class="comment">     * Change the Frame Menu.</span>
00533 <span class="comment">     */</span>
00534     <span class="keywordflow">if</span> (hNewSys &amp;&amp; (hNewSys != hOldSys)) {
00535         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a271">MAXED</a>(pmdi))
00536             <a class="code" href="../../d6/d0/usercli_8h.html#a779">MDIRemoveSysMenu</a>(hOldSys, <a class="code" href="../../d6/d0/usercli_8h.html#a271">MAXED</a>(pmdi));
00537 
00538         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a226">NtUserSetMenu</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a450">HW</a>(pwndParent), hNewSys, FALSE);
00539 
00540         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a271">MAXED</a>(pmdi))
00541             <a class="code" href="../../d6/d0/usercli_8h.html#a778">MDIAddSysMenu</a>(hNewSys, <a class="code" href="../../d6/d0/usercli_8h.html#a271">MAXED</a>(pmdi));
00542     } <span class="keywordflow">else</span>
00543         hNewSys = hOldSys;
00544 
00545     <span class="comment">/*</span>
00546 <span class="comment">     * Now update the Window menu.</span>
00547 <span class="comment">     */</span>
00548     <span class="keywordflow">if</span> (fRefresh || (hOldWindow != hNewWindow)) {
00549         iFirst = <a class="code" href="../../d6/d0/usercli_8h.html#a274">FIRST</a>(pmdi);
00550 
00551         <span class="keywordflow">if</span> (hOldWindow) {
00552             <span class="keywordtype">int</span> cItems = <a class="code" href="../../d3/d9/client_2wow_8c.html#a8">GetMenuItemCount</a>(hOldWindow);
00553 
00554             <span class="keywordflow">for</span> (i = cItems - 1; i &gt;= 0; i--) {
00555                 <span class="keywordflow">if</span> (<a class="code" href="../../d3/d9/client_2wow_8c.html#a10">GetMenuState</a>(hOldWindow, i, MF_BYPOSITION) &amp; MF_SEPARATOR)
00556                    <span class="keywordflow">break</span>;
00557             }
00558             <span class="keywordflow">if</span> ((i &gt;= 0) &amp;&amp; (<a class="code" href="../../d3/d9/client_2wow_8c.html#a9">GetMenuItemID</a>(hOldWindow, i + 1) == (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)iFirst)) {
00559                 <span class="keywordtype">int</span> idTrim = i;
00560 
00561                 <span class="keywordflow">for</span> (i = idTrim; i &lt; cItems; i++)
00562                     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a154">NtUserDeleteMenu</a>(hOldWindow, idTrim, MF_BYPOSITION);
00563             }
00564         }
00565 
00566         <a class="code" href="../../d6/d0/usercli_8h.html#a41">Lock</a>(&amp;<a class="code" href="../../d6/d0/usercli_8h.html#a273">WINDOW</a>(pmdi), hNewWindow);
00567 
00568         <span class="keywordflow">if</span> (hNewWindow != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00569 
00570            <span class="comment">/*</span>
00571 <span class="comment">            * Add the list of child windows to the new window</span>
00572 <span class="comment">            */</span>
00573            <span class="keywordflow">for</span> (i = 0, item = 0; ((<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)i &lt; <a class="code" href="../../d6/d0/usercli_8h.html#a270">CKIDS</a>(pmdi)) &amp;&amp; (item &lt; <a class="code" href="../../d6/d0/usercli_8h.html#a260">MAXITEMS</a>);
00574                     i++) {
00575                pwndChild = <a class="code" href="../../d6/d0/usercli_8h.html#a775">FindPwndChild</a>(pwndMDI, iFirst + item);
00576                <span class="keywordflow">if</span> (pwndChild != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00577                    <span class="keywordflow">if</span> ((!<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwndChild, WFVISIBLE) &amp;&amp;
00578                           (LOWORD(pwndMDI-&gt;style) &amp; 0x0001)) ||
00579                           <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwndChild, WFDISABLED)) {
00580                        <a class="code" href="../../d6/d0/usercli_8h.html#a780">ShiftMenuIDs</a>(pwndMDI, pwndChild);
00581                    } <span class="keywordflow">else</span> {
00582                        <a class="code" href="../../d5/d5/mdimenu_8c.html#a5">AppendToWindowsMenu</a>(pwndMDI, pwndChild);
00583                        item++;
00584                    }
00585                }
00586            }
00587 
00588            <span class="comment">/*</span>
00589 <span class="comment">            * Add checkmark by the active child's menu item</span>
00590 <span class="comment">            */</span>
00591            <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a272">ACTIVE</a>(pmdi))
00592                <a class="code" href="../../d7/d7/menuc_8c.html#a0">CheckMenuItem</a>(hNewWindow, (WORD)GetWindowID(<a class="code" href="../../d6/d0/usercli_8h.html#a272">ACTIVE</a>(pmdi)),
00593                        MF_BYCOMMAND | MF_CHECKED);
00594         }
00595 
00596         <span class="comment">/*</span>
00597 <span class="comment">         * Out with the old, in with the new</span>
00598 <span class="comment">         */</span>
00599         <a class="code" href="../../d5/d5/mdimenu_8c.html#a6">SwitchWindowsMenus</a>(hNewSys, hOldWindow, hNewWindow);
00600     }
00601     <span class="keywordflow">return</span> hOldSys;
00602 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a576" doxytag="usercli.h::MenuWndProcA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LRESULT APIENTRY MenuWndProcA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>msg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00165">165</a> of file <a class="el" href="../../d1/d8/clmsg_8c-source.html">clmsg.c</a>.
<p>
References <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00127">MenuWndProcWorker()</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d7/d7/clinit_8c-source.html#l01219">ClientThreadSetup()</a>.
<p>
<pre class="fragment"><div>00170 {
00171     <span class="keywordflow">return</span> <a class="code" href="../../d0/d9/clmsg_8c.html#a13">MenuWndProcWorker</a>(hwnd, message, wParam, lParam, TRUE);
00172 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a577" doxytag="usercli.h::MenuWndProcW" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LRESULT APIENTRY MenuWndProcW           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>msg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00174">174</a> of file <a class="el" href="../../d1/d8/clmsg_8c-source.html">clmsg.c</a>.
<p>
References <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, and <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00127">MenuWndProcWorker()</a>.
<p>
Referenced by <a class="el" href="../../d7/d7/clinit_8c-source.html#l01219">ClientThreadSetup()</a>.
<p>
<pre class="fragment"><div>00179 {
00180     <span class="keywordflow">return</span> <a class="code" href="../../d0/d9/clmsg_8c.html#a13">MenuWndProcWorker</a>(hwnd, message, wParam, lParam, FALSE);
00181 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a567" doxytag="usercli.h::MESSAGEPROTO" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> MESSAGEPROTO           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">CBGETEDITSEL&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a566" doxytag="usercli.h::MESSAGEPROTO" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> MESSAGEPROTO           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">EMSETSEL&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a565" doxytag="usercli.h::MESSAGEPROTO" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> MESSAGEPROTO           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">EMGETSEL&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a564" doxytag="usercli.h::MESSAGEPROTO" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> MESSAGEPROTO           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">INWPARAMDBCSCHAR&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a563" doxytag="usercli.h::MESSAGEPROTO" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> MESSAGEPROTO           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IMEREQUEST&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a562" doxytag="usercli.h::MESSAGEPROTO" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> MESSAGEPROTO           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IMECONTROL&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a561" doxytag="usercli.h::MESSAGEPROTO" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> MESSAGEPROTO           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">INSIZECLIPBRD&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a560" doxytag="usercli.h::MESSAGEPROTO" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> MESSAGEPROTO           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">INPAINTCLIPBRD&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a559" doxytag="usercli.h::MESSAGEPROTO" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> MESSAGEPROTO           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">INDEVICECHANGE&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a558" doxytag="usercli.h::MESSAGEPROTO" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> MESSAGEPROTO           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">COPYGLOBALDATA&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a490" doxytag="usercli.h::MLBuildchLines" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void MLBuildchLines           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PLONG&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PLONG&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d4/editml_8c-source.html#l01562">1562</a> of file <a class="el" href="../../d2/d4/editml_8c-source.html">editml.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l01132">AWCOMPARECHAR</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00516">CALLWORDBREAKPROC</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00661">tagED::cbChar</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00557">tagED::cch</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00662">tagED::chLines</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00559">tagED::cLines</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l04133">ECAdjustIch()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l03938">ECAnsiPrev()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l01281">ECCchInWidth()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02492">ECGetEditDC()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l04083">ECIsDBCSLeadByte()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00052">ECLock()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l03969">ECNextIch()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02524">ECReleaseEditDC()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00086">ECUnlock()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l01552">ECWord()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l03292">tagLPKEDITCALLOUT::EditCchInWidth</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l03293">tagLPKEDITCALLOUT::EditGetLineWidth</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00640">tagED::fAnsi</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00616">tagED::fCalcLines</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00611">tagED::fDBCS</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00615">tagED::fWrap</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00626">ICH</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00570">tagED::ichScreenStart</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01129">ISDELIMETERA</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01130">ISDELIMETERW</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00667">tagED::lpfnNextWord</a>, <a class="el" href="../../d9/d5/sertl_8c-source.html#l00332">max</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00496">MAXLINELENGTH</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00670">tagED::maxPixelWidth</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l00022">ML_REFRESH</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l00040">MLGetLineWidth()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l01487">MLInsertchLine()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l00024">MLSanityCheck()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l02966">MLScroll()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l01538">MLShiftchLines()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00702">tagED::pLpkEditCallout</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00586">tagED::rcFmt</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, <a class="el" href="../../d6/d1/rtl_2drawtext_8c-source.html#l00535">UserIsFullWidth()</a>, and <a class="el" href="../../d7/d9/usercli_8h-source.html#l00575">tagED::xOffset</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/editec_8c-source.html#l02547">ECResetTextInfo()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l00708">ECSetFont()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l04185">ECUpdateFormat()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l01367">MLDeleteText()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l03457">MLEditWndProc()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l01040">MLInsertText()</a>, <a class="el" href="../../d6/d4/edmlrare_8c-source.html#l00458">MLSetTabStops()</a>, and <a class="el" href="../../d2/d4/editml_8c-source.html#l00056">MLSize()</a>.
<p>
<pre class="fragment"><div>01569 {
01570     PSTR ptext; <span class="comment">/* Starting address of the text */</span>
01571 
01572     <span class="comment">/*</span>
01573 <span class="comment">     * We keep these ICH's so that we can Unlock ped-&gt;hText when we have to grow</span>
01574 <span class="comment">     * the chlines array. With large text handles, it becomes a problem if we</span>
01575 <span class="comment">     * have a locked block in the way.</span>
01576 <span class="comment">     */</span>
01577     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a> ichLineStart;
01578     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a> ichLineEnd;
01579     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a> ichLineEndBeforeCRLF;
01580     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a> ichCRLF;
01581 
01582     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a> cch;
01583     HDC hdc;
01584 
01585     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fLineBroken = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>; <span class="comment">/* Initially, no new line breaks are made */</span>
01586     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a> minCchBreak;
01587     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a> maxCchBreak;
01588     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fOnDelimiter;
01589 
01590     <span class="keywordflow">if</span> (!ped-&gt;cch) {
01591         ped-&gt;maxPixelWidth = 0;
01592         ped-&gt;xOffset = 0;
01593         ped-&gt;ichScreenStart = 0;
01594         ped-&gt;cLines = 1;
01595 
01596         <span class="keywordflow">if</span> (pll)
01597             *pll = 0;
01598         <span class="keywordflow">if</span> (phl)
01599             *phl = 0;
01600 
01601         <span class="keywordflow">goto</span> UpdateScroll;
01602     }
01603 
01604     <span class="keywordflow">if</span> (fUserTyping &amp;&amp; cchDelta)
01605         <a class="code" href="../../d6/d0/usercli_8h.html#a491">MLShiftchLines</a>(ped, iLine + 1, cchDelta);
01606 
01607     hdc = <a class="code" href="../../d6/d0/usercli_8h.html#a451">ECGetEditDC</a>(ped, TRUE);
01608 
01609     <span class="keywordflow">if</span> (!iLine &amp;&amp; !cchDelta &amp;&amp; !fUserTyping) {
01610 
01611         <span class="comment">/*</span>
01612 <span class="comment">         * Reset maxpixelwidth only if we will be running through the whole</span>
01613 <span class="comment">         * text. Better too long than too short.</span>
01614 <span class="comment">         */</span>
01615         ped-&gt;maxPixelWidth = 0;
01616 
01617         <span class="comment">/*</span>
01618 <span class="comment">         * Reset number of lines in text since we will be running through all</span>
01619 <span class="comment">         * the text anyway...</span>
01620 <span class="comment">         */</span>
01621         ped-&gt;cLines = 1;
01622     }
01623 
01624     <span class="comment">/*</span>
01625 <span class="comment">     * Set min and max line built to be the starting line</span>
01626 <span class="comment">     */</span>
01627     minCchBreak = maxCchBreak = (cchDelta ? ped-&gt;chLines[iLine] : 0);
01628 
01629     ptext = <a class="code" href="../../d6/d0/usercli_8h.html#a433">ECLock</a>(ped);
01630 
01631     ichCRLF = ichLineStart = ped-&gt;chLines[iLine];
01632 
01633     <span class="keywordflow">while</span> (ichLineStart &lt; ped-&gt;cch) {
01634         <span class="keywordflow">if</span> (ichLineStart &gt;= ichCRLF) {
01635             ichCRLF = ichLineStart;
01636 
01637             <span class="comment">/*</span>
01638 <span class="comment">             * Move ichCRLF ahead to either the first CR or to the end of text.</span>
01639 <span class="comment">             */</span>
01640             <span class="keywordflow">if</span> (ped-&gt;fAnsi) {
01641                 <span class="keywordflow">while</span> (ichCRLF &lt; ped-&gt;cch) {
01642                     <span class="keywordflow">if</span> (*(ptext + ichCRLF) == 0x0D) {
01643                         <span class="keywordflow">if</span> (*(ptext + ichCRLF + 1) == 0x0A ||
01644                                 *(WORD UNALIGNED *)(ptext + ichCRLF + 1) == 0x0A0D)
01645                             <span class="keywordflow">break</span>;
01646                     }
01647                     ichCRLF++;
01648                 }
01649             } <span class="keywordflow">else</span> {
01650                 LPWSTR pwtext = (LPWSTR)ptext;
01651 
01652                 <span class="keywordflow">while</span> (ichCRLF &lt; ped-&gt;cch) {
01653                     <span class="keywordflow">if</span> (*(pwtext + ichCRLF) == 0x0D) {
01654                         <span class="keywordflow">if</span> (*(pwtext + ichCRLF + 1) == 0x0A ||
01655                                 *(<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> UNALIGNED *)(pwtext + ichCRLF + 1) == 0x000A000D)
01656                             <span class="keywordflow">break</span>;
01657                     }
01658                     ichCRLF++;
01659                 }
01660             }
01661         }
01662 
01663 
01664         <span class="keywordflow">if</span> (!ped-&gt;fWrap) {
01665 
01666             <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>  LineWidth;
01667             <span class="comment">/*</span>
01668 <span class="comment">             * If we are not word wrapping, line breaks are signified by CRLF.</span>
01669 <span class="comment">             */</span>
01670 
01671             <span class="comment">//</span>
01672             <span class="comment">// If we cut off the line at MAXLINELENGTH, we should</span>
01673             <span class="comment">// adjust ichLineEnd.</span>
01674             <span class="comment">//</span>
01675             <span class="keywordflow">if</span> ((ichCRLF - ichLineStart) &lt;= <a class="code" href="../../d6/d0/usercli_8h.html#a74">MAXLINELENGTH</a>) {
01676                 ichLineEnd = ichCRLF;
01677             } <span class="keywordflow">else</span> {
01678                 ichLineEnd = ichLineStart + <a class="code" href="../../d6/d0/usercli_8h.html#a74">MAXLINELENGTH</a>;
01679                 <span class="keywordflow">if</span> (ped-&gt;fAnsi &amp;&amp; ped-&gt;fDBCS) {
01680                     ichLineEnd = <a class="code" href="../../d6/d0/usercli_8h.html#a461">ECAdjustIch</a>( ped, (PSTR)ptext, ichLineEnd);
01681                 }
01682             }
01683 
01684             <span class="comment">/*</span>
01685 <span class="comment">             * We will keep track of what the longest line is for the horizontal</span>
01686 <span class="comment">             * scroll bar thumb positioning.</span>
01687 <span class="comment">             */</span>
01688             <span class="keywordflow">if</span> (ped-&gt;pLpkEditCallout) {
01689                 LineWidth = ped-&gt;pLpkEditCallout-&gt;EditGetLineWidth(
01690                     ped, hdc, ptext + ichLineStart*ped-&gt;cbChar,
01691                     ichLineEnd - ichLineStart);
01692             } <span class="keywordflow">else</span> {
01693                 LineWidth = <a class="code" href="../../d1/d5/editml_8c.html#a3">MLGetLineWidth</a>(hdc, ptext + ichLineStart * ped-&gt;cbChar,
01694                                             ichLineEnd - ichLineStart,
01695                                             ped);
01696             }
01697             ped-&gt;maxPixelWidth = <a class="code" href="../../d8/d6/sertl_8c.html#a1">max</a>(ped-&gt;maxPixelWidth,(<span class="keywordtype">int</span>)LineWidth);
01698 
01699         } <span class="keywordflow">else</span> {
01700 
01701             <span class="comment">/*</span>
01702 <span class="comment">             * Check if the width of the edit control is non-zero;</span>
01703 <span class="comment">             * a part of the fix for Bug #7402 -- SANKAR -- 01/21/91 --</span>
01704 <span class="comment">             */</span>
01705             <span class="keywordflow">if</span>(ped-&gt;rcFmt.right &gt; ped-&gt;rcFmt.left) {
01706 
01707                 <span class="comment">/*</span>
01708 <span class="comment">                 * Find the end of the line based solely on text extents</span>
01709 <span class="comment">                 */</span>
01710                 <span class="keywordflow">if</span> (ped-&gt;pLpkEditCallout) {
01711                     ichLineEnd = ichLineStart +
01712                         ped-&gt;pLpkEditCallout-&gt;EditCchInWidth(
01713                             ped, hdc, ptext + ped-&gt;cbChar*ichLineStart,
01714                             ichCRLF - ichLineStart,
01715                             ped-&gt;rcFmt.right - ped-&gt;rcFmt.left);
01716                 } <span class="keywordflow">else</span> {
01717                     <span class="keywordflow">if</span> (ped-&gt;fAnsi) {
01718                         ichLineEnd = ichLineStart +
01719                                  <a class="code" href="../../d6/d0/usercli_8h.html#a443">ECCchInWidth</a>(ped, hdc,
01720                                               ptext + ichLineStart,
01721                                               ichCRLF - ichLineStart,
01722                                               ped-&gt;rcFmt.right - ped-&gt;rcFmt.left,
01723                                               TRUE);
01724                     } <span class="keywordflow">else</span> {
01725                         ichLineEnd = ichLineStart +
01726                                  <a class="code" href="../../d6/d0/usercli_8h.html#a443">ECCchInWidth</a>(ped, hdc,
01727                                               (LPSTR)((LPWSTR)ptext + ichLineStart),
01728                                               ichCRLF - ichLineStart,
01729                                               ped-&gt;rcFmt.right - ped-&gt;rcFmt.left,
01730                                               TRUE);
01731                     }
01732                 }
01733             } <span class="keywordflow">else</span> {
01734                 ichLineEnd = ichLineStart;
01735             }
01736 
01737             <span class="keywordflow">if</span> (ichLineEnd == ichLineStart &amp;&amp; ichCRLF - ichLineStart) {
01738 
01739                 <span class="comment">/*</span>
01740 <span class="comment">                 * Maintain a minimum of one char per line</span>
01741 <span class="comment">                 */</span>
01742                 <span class="comment">//</span>
01743                 <span class="comment">// Since it might be a double byte char, so calling ECNextIch.</span>
01744                 <span class="comment">//</span>
01745                 ichLineEnd = <a class="code" href="../../d6/d0/usercli_8h.html#a468">ECNextIch</a>(ped, NULL, ichLineEnd);
01746             }
01747 
01748             <span class="comment">/*</span>
01749 <span class="comment">             * Now starting from ichLineEnd, if we are not at a hard line break,</span>
01750 <span class="comment">             * then if we are not at a space AND the char before us is</span>
01751 <span class="comment">             * not a space,(OR if we are at a CR) we will look word left for the</span>
01752 <span class="comment">             * start of the word to break at.</span>
01753 <span class="comment">             * This change was done for TWO reasons:</span>
01754 <span class="comment">             * 1. If we are on a delimiter, no need to look word left to break at.</span>
01755 <span class="comment">             * 2. If the previous char is a delimter, we can break at current char.</span>
01756 <span class="comment">             * Change done by -- SANKAR --01/31/91--</span>
01757 <span class="comment">             */</span>
01758             <span class="keywordflow">if</span> (ichLineEnd != ichCRLF) {
01759                 <span class="keywordflow">if</span>(ped-&gt;lpfnNextWord) {
01760                      fOnDelimiter = (<a class="code" href="../../d6/d0/usercli_8h.html#a81">CALLWORDBREAKPROC</a>(*ped-&gt;lpfnNextWord, ptext,
01761                             ichLineEnd, ped-&gt;cch, WB_ISDELIMITER) ||
01762                             <a class="code" href="../../d6/d0/usercli_8h.html#a81">CALLWORDBREAKPROC</a>(*ped-&gt;lpfnNextWord, ptext, ichLineEnd - 1,
01763                             ped-&gt;cch, WB_ISDELIMITER));
01764                 <span class="comment">//</span>
01765                 <span class="comment">// This change was done for FOUR reasons:</span>
01766                 <span class="comment">//</span>
01767                 <span class="comment">// 1. If we are on a delimiter, no need to look word left to break at.</span>
01768                 <span class="comment">// 2. If we are on a double byte character, we can break at current char.</span>
01769                 <span class="comment">// 3. If the previous char is a delimter, we can break at current char.</span>
01770                 <span class="comment">// 4. If the previous char is a double byte character, we can break at current char.</span>
01771                 <span class="comment">//</span>
01772                 } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ped-&gt;fAnsi) {
01773                     fOnDelimiter = (<a class="code" href="../../d6/d0/usercli_8h.html#a152">ISDELIMETERA</a>(*(ptext + ichLineEnd)) ||
01774                                     <a class="code" href="../../d6/d0/usercli_8h.html#a464">ECIsDBCSLeadByte</a>(ped, *(ptext + ichLineEnd)));
01775                     <span class="keywordflow">if</span> (!fOnDelimiter) {
01776                         PSTR pPrev = <a class="code" href="../../d6/d0/usercli_8h.html#a466">ECAnsiPrev</a>(ped,ptext,ptext+ichLineEnd);
01777 
01778                         fOnDelimiter = <a class="code" href="../../d6/d0/usercli_8h.html#a152">ISDELIMETERA</a>(*pPrev) ||
01779                                        <a class="code" href="../../d6/d0/usercli_8h.html#a464">ECIsDBCSLeadByte</a>(ped,*pPrev);
01780                     }
01781                 } <span class="keywordflow">else</span> { <span class="comment">// Unicode</span>
01782                     fOnDelimiter = (<a class="code" href="../../d6/d0/usercli_8h.html#a153">ISDELIMETERW</a>(*((LPWSTR)ptext + ichLineEnd))     ||
01783                                     <a class="code" href="../../d5/d2/rtl_2drawtext_8c.html#a35">UserIsFullWidth</a>(CP_ACP,*((LPWSTR)ptext + ichLineEnd))      ||
01784                                     <a class="code" href="../../d6/d0/usercli_8h.html#a153">ISDELIMETERW</a>(*((LPWSTR)ptext + ichLineEnd - 1)) ||
01785                                     <a class="code" href="../../d5/d2/rtl_2drawtext_8c.html#a35">UserIsFullWidth</a>(CP_ACP,*((LPWSTR)ptext + ichLineEnd - 1)));
01786                 }
01787                 <span class="keywordflow">if</span> (!fOnDelimiter ||
01788                     (ped-&gt;fAnsi &amp;&amp; *(ptext + ichLineEnd) == 0x0D) ||
01789                     (!ped-&gt;fAnsi &amp;&amp; *((LPWSTR)ptext + ichLineEnd) == 0x0D)) {
01790 
01791                     <span class="keywordflow">if</span> (ped-&gt;lpfnNextWord != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01792                         cch = <a class="code" href="../../d6/d0/usercli_8h.html#a81">CALLWORDBREAKPROC</a>(*ped-&gt;lpfnNextWord, (LPSTR)ptext, ichLineEnd,
01793                                 ped-&gt;cch, WB_LEFT);
01794                     } <span class="keywordflow">else</span> {
01795                         ped-&gt;fCalcLines = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01796                         <a class="code" href="../../d6/d0/usercli_8h.html#a438">ECWord</a>(ped, ichLineEnd, TRUE, &amp;cch, NULL);
01797                         ped-&gt;fCalcLines = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01798                     }
01799                     <span class="keywordflow">if</span> (cch &gt; ichLineStart) {
01800                         ichLineEnd = cch;
01801                     }
01802 
01803                     <span class="comment">/*</span>
01804 <span class="comment">                     * Now, if the above test fails, it means the word left goes</span>
01805 <span class="comment">                     * back before the start of the line ie. a word is longer</span>
01806 <span class="comment">                     * than a line on the screen. So, we just fit as much of</span>
01807 <span class="comment">                     * the word on the line as possible. Thus, we use the</span>
01808 <span class="comment">                     * pLineEnd we calculated solely on width at the beginning</span>
01809 <span class="comment">                     * of this else block...</span>
01810 <span class="comment">                     */</span>
01811                 }
01812             }
01813         }
01814 <span class="preprocessor">#if 0</span>
01815 <span class="preprocessor"></span>        <span class="keywordflow">if</span> (!ISDELIMETERAW((*(ptext + (ichLineEnd - 1)*ped-&gt;cbChar))) &amp;&amp; ISDELIMETERAW((*(ptext + ichLineEnd*ped-&gt;cbChar)))) #ERROR
01816 
01817             <span class="keywordflow">if</span> ((*(ptext + ichLineEnd - 1) != <span class="charliteral">' '</span> &amp;&amp;
01818                         *(ptext + ichLineEnd - 1) != VK_TAB) &amp;&amp;
01819                         (*(ptext + ichLineEnd) == <span class="charliteral">' '</span> ||
01820                         *(ptext + ichLineEnd) == VK_TAB))
01821 <span class="preprocessor">#endif</span>
01822 <span class="preprocessor"></span>        <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a154">AWCOMPARECHAR</a>(ped,ptext + ichLineEnd * ped-&gt;cbChar, <span class="charliteral">' '</span>) ||
01823                 <a class="code" href="../../d6/d0/usercli_8h.html#a154">AWCOMPARECHAR</a>(ped,ptext + ichLineEnd * ped-&gt;cbChar, VK_TAB)) {
01824             <span class="comment">/*</span>
01825 <span class="comment">             * Swallow the space at the end of a line.</span>
01826 <span class="comment">             */</span>
01827             <span class="keywordflow">if</span> (ichLineEnd &lt; ped-&gt;cch) {
01828                 ichLineEnd++;
01829             }
01830         }
01831 
01832         <span class="comment">/*</span>
01833 <span class="comment">         * Skip over crlf or crcrlf if it exists. Thus, ichLineEnd is the first</span>
01834 <span class="comment">         * character in the next line.</span>
01835 <span class="comment">         */</span>
01836         ichLineEndBeforeCRLF = ichLineEnd;
01837 
01838         <span class="keywordflow">if</span> (ped-&gt;fAnsi) {
01839             <span class="keywordflow">if</span> (ichLineEnd &lt; ped-&gt;cch &amp;&amp; *(ptext + ichLineEnd) == 0x0D)
01840                 ichLineEnd += 2;
01841 
01842             <span class="comment">/*</span>
01843 <span class="comment">             * Skip over CRCRLF</span>
01844 <span class="comment">             */</span>
01845             <span class="keywordflow">if</span> (ichLineEnd &lt; ped-&gt;cch &amp;&amp; *(ptext + ichLineEnd) == 0x0A)
01846                 ichLineEnd++;
01847             UserAssert(ichLineEnd &lt;= ped-&gt;cch);
01848         } <span class="keywordflow">else</span> {
01849             <span class="keywordflow">if</span> (ichLineEnd &lt; ped-&gt;cch &amp;&amp; *(((LPWSTR)ptext) + ichLineEnd) == 0x0D)
01850                 ichLineEnd += 2;
01851 
01852             <span class="comment">/*</span>
01853 <span class="comment">             * Skip over CRCRLF</span>
01854 <span class="comment">             */</span>
01855             <span class="keywordflow">if</span> (ichLineEnd &lt; ped-&gt;cch &amp;&amp; *(((LPWSTR)ptext) + ichLineEnd) == 0x0A) {
01856                 ichLineEnd++;
01857                 RIPMSG0(RIP_VERBOSE, <span class="stringliteral">"Skip over CRCRLF\n"</span>);
01858             }
01859             UserAssert(ichLineEnd &lt;= ped-&gt;cch);
01860         }
01861 
01862         <span class="comment">/*</span>
01863 <span class="comment">         * Now, increment iLine, allocate space for the next line, and set its</span>
01864 <span class="comment">         * starting point</span>
01865 <span class="comment">         */</span>
01866         iLine++;
01867 
01868         <span class="keywordflow">if</span> (!fUserTyping || (iLine &gt; ped-&gt;cLines - 1) || (ped-&gt;chLines[iLine] != ichLineEnd)) {
01869 
01870             <span class="comment">/*</span>
01871 <span class="comment">             * The line break occured in a different place than before.</span>
01872 <span class="comment">             */</span>
01873             <span class="keywordflow">if</span> (!fLineBroken) {
01874 
01875                 <span class="comment">/*</span>
01876 <span class="comment">                 * Since we haven't broken a line before, just set the min</span>
01877 <span class="comment">                 * break line.</span>
01878 <span class="comment">                 */</span>
01879                 fLineBroken = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01880                 <span class="keywordflow">if</span> (ichLineEndBeforeCRLF == ichLineEnd)
01881                     minCchBreak = maxCchBreak = (ichLineEnd ? ichLineEnd - 1 : 0);
01882                 <span class="keywordflow">else</span>
01883                     minCchBreak = maxCchBreak = ichLineEndBeforeCRLF;
01884             }
01885             maxCchBreak = <a class="code" href="../../d8/d6/sertl_8c.html#a1">max</a>(maxCchBreak, ichLineEnd);
01886 
01887             <a class="code" href="../../d6/d0/usercli_8h.html#a434">ECUnlock</a>(ped);
01888 
01889             <span class="comment">/*</span>
01890 <span class="comment">             * Now insert the new line into the array</span>
01891 <span class="comment">             */</span>
01892             <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d0/usercli_8h.html#a492">MLInsertchLine</a>(ped, iLine, ichLineEnd, (BOOL)(cchDelta != 0)))
01893                 <span class="keywordflow">goto</span> EndUp;
01894 
01895             ptext = <a class="code" href="../../d6/d0/usercli_8h.html#a433">ECLock</a>(ped);
01896         } <span class="keywordflow">else</span> {
01897             maxCchBreak = ped-&gt;chLines[iLine];
01898 
01899             <span class="comment">/*</span>
01900 <span class="comment">             * Quick escape</span>
01901 <span class="comment">             */</span>
01902             <span class="keywordflow">goto</span> UnlockAndEndUp;
01903         }
01904 
01905         ichLineStart = ichLineEnd;
01906     } <span class="comment">/* end while (ichLineStart &lt; ped-&gt;cch) */</span>
01907 
01908 
01909     <span class="keywordflow">if</span> (iLine != ped-&gt;cLines) {
01910         RIPMSG1(RIP_VERBOSE, <span class="stringliteral">"chLines[%d] is being cleared.\n"</span>, iLine);
01911         ped-&gt;cLines = iLine;
01912         ped-&gt;chLines[ped-&gt;cLines] = 0;
01913     }
01914 
01915     <span class="comment">/*</span>
01916 <span class="comment">     * Note that we incremented iLine towards the end of the while loop so, the</span>
01917 <span class="comment">     * index, iLine, is actually equal to the line count</span>
01918 <span class="comment">     */</span>
01919     <span class="keywordflow">if</span> (ped-&gt;cch &amp;&amp; <a class="code" href="../../d6/d0/usercli_8h.html#a154">AWCOMPARECHAR</a>(ped, ptext + (ped-&gt;cch - 1)*ped-&gt;cbChar, 0x0A) &amp;&amp;
01920             ped-&gt;chLines[ped-&gt;cLines - 1] &lt; ped-&gt;cch) {
01921 
01922         <span class="comment">/*</span>
01923 <span class="comment">         * Make sure last line has no crlf in it</span>
01924 <span class="comment">         */</span>
01925         <span class="keywordflow">if</span> (!fLineBroken) {
01926 
01927             <span class="comment">/*</span>
01928 <span class="comment">             * Since we haven't broken a line before, just set the min break</span>
01929 <span class="comment">             * line.</span>
01930 <span class="comment">             */</span>
01931             fLineBroken = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01932             minCchBreak = ped-&gt;cch - 1;
01933         }
01934         maxCchBreak = <a class="code" href="../../d8/d6/sertl_8c.html#a1">max</a>(maxCchBreak, ichLineEnd);
01935         <a class="code" href="../../d6/d0/usercli_8h.html#a434">ECUnlock</a>(ped);
01936         <a class="code" href="../../d6/d0/usercli_8h.html#a492">MLInsertchLine</a>(ped, iLine, ped-&gt;cch, FALSE);
01937         <a class="code" href="../../d1/d5/editml_8c.html#a2">MLSanityCheck</a>(ped);
01938     } <span class="keywordflow">else</span>
01939 UnlockAndEndUp:
01940         <a class="code" href="../../d6/d0/usercli_8h.html#a434">ECUnlock</a>(ped);
01941 
01942 EndUp:
01943     <a class="code" href="../../d6/d0/usercli_8h.html#a452">ECReleaseEditDC</a>(ped, hdc, TRUE);
01944     <span class="keywordflow">if</span> (pll)
01945         *pll = minCchBreak;
01946     <span class="keywordflow">if</span> (phl)
01947         *phl = maxCchBreak;
01948 
01949 UpdateScroll:
01950     <a class="code" href="../../d6/d0/usercli_8h.html#a517">MLScroll</a>(ped, FALSE, ML_REFRESH, 0, TRUE);
01951     <a class="code" href="../../d6/d0/usercli_8h.html#a517">MLScroll</a>(ped, TRUE,  ML_REFRESH, 0, TRUE);
01952 
01953     <a class="code" href="../../d1/d5/editml_8c.html#a2">MLSanityCheck</a>(ped);
01954 
01955     <span class="keywordflow">return</span>;
01956 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a500" doxytag="usercli.h::MLCalcXOffset" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int MLCalcXOffset           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HDC&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d4/editml_8c-source.html#l00085">85</a> of file <a class="el" href="../../d2/d4/editml_8c-source.html">editml.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l00661">tagED::cbChar</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00662">tagED::chLines</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02492">ECGetEditDC()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00052">ECLock()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02524">ECReleaseEditDC()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00086">ECUnlock()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00664">tagED::format</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00626">ICH</a>, <a class="el" href="../../d9/d5/sertl_8c-source.html#l00332">max</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l00040">MLGetLineWidth()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l00374">MLLine()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00586">tagED::rcFmt</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d2/d4/editml_8c-source.html#l03991">MLDrawText()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l00553">MLIchToXYPos()</a>, and <a class="el" href="../../d2/d4/editml_8c-source.html#l00689">MLMouseToIch()</a>.
<p>
<pre class="fragment"><div>00089 {
00090     PSTR pText;
00091     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a> lineLength;
00092     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a> lineWidth;
00093 
00094     <span class="keywordflow">if</span> (ped-&gt;format == ES_LEFT)
00095         <span class="keywordflow">return</span> (0);
00096 
00097     lineLength = <a class="code" href="../../d6/d0/usercli_8h.html#a498">MLLine</a>(ped, lineNumber);
00098 
00099     <span class="keywordflow">if</span> (lineLength) {
00100 
00101         pText = <a class="code" href="../../d6/d0/usercli_8h.html#a433">ECLock</a>(ped) + ped-&gt;chLines[lineNumber] * ped-&gt;cbChar;
00102         hdc = <a class="code" href="../../d6/d0/usercli_8h.html#a451">ECGetEditDC</a>(ped, TRUE);
00103         lineWidth = <a class="code" href="../../d1/d5/editml_8c.html#a3">MLGetLineWidth</a>(hdc, pText, lineLength, ped);
00104         <a class="code" href="../../d6/d0/usercli_8h.html#a452">ECReleaseEditDC</a>(ped, hdc, TRUE);
00105         <a class="code" href="../../d6/d0/usercli_8h.html#a434">ECUnlock</a>(ped);
00106     } <span class="keywordflow">else</span> {
00107         lineWidth = 0;
00108     }
00109 
00110     <span class="comment">/*</span>
00111 <span class="comment">     * If a SPACE or a TAB was eaten at the end of a line by MLBuildchLines</span>
00112 <span class="comment">     * to prevent a delimiter appearing at the begining of a line, the</span>
00113 <span class="comment">     * the following calculation will become negative causing this bug.</span>
00114 <span class="comment">     * So, now, we take zero in such cases.</span>
00115 <span class="comment">     * Fix for Bug #3566 --01/31/91-- SANKAR --</span>
00116 <span class="comment">     */</span>
00117     lineWidth = <a class="code" href="../../d8/d6/sertl_8c.html#a1">max</a>(0, (<span class="keywordtype">int</span>)(ped-&gt;rcFmt.right-ped-&gt;rcFmt.left-lineWidth));
00118 
00119     <span class="keywordflow">if</span> (ped-&gt;format == ES_CENTER)
00120         <span class="keywordflow">return</span> (lineWidth / 2);
00121 
00122     <span class="keywordflow">if</span> (ped-&gt;format == ES_RIGHT) {
00123 
00124         <span class="comment">/*</span>
00125 <span class="comment">         * Subtract 1 so that the 1 pixel wide cursor will be in the visible</span>
00126 <span class="comment">         * region on the very right side of the screen.</span>
00127 <span class="comment">         */</span>
00128         <span class="keywordflow">return</span> <a class="code" href="../../d8/d6/sertl_8c.html#a1">max</a>(0, (<span class="keywordtype">int</span>)(lineWidth-1));
00129     }
00130 
00131     <span class="keywordflow">return</span> 0;
00132 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a513" doxytag="usercli.h::MLChangeSelection" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void MLChangeSelection           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HDC&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d4/editml_8c-source.html#l00919">919</a> of file <a class="el" href="../../d2/d4/editml_8c-source.html">editml.c</a>.
<p>
References <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00860">_IsWindowVisible()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00557">tagED::cch</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l03692">ECCalcChangeSelection()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00758">tagBLOCK::EndPos</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00602">tagED::fFocus</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00610">tagED::fNoHideSel</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00584">tagED::hwnd</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00626">ICH</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00563">tagED::ichMaxSel</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00561">tagED::ichMinSel</a>, <a class="el" href="../../d6/d3/acpitabl_8h-source.html#l00366">min</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l03991">MLDrawText()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l00292">MLSetCaretPosition()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05279">NtUserHideCaret()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06219">NtUserShowCaret()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00585">tagED::pwnd</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00757">tagBLOCK::StPos</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d2/d4/editml_8c-source.html#l02028">MLKeyDown()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l02792">MLMouseMotion()</a>, and <a class="el" href="../../d6/d4/edmlrare_8c-source.html#l00368">MLSetSelection()</a>.
<p>
<pre class="fragment"><div>00924 {
00925 
00926     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a> temp;
00927     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a> ichOldMinSel, ichOldMaxSel;
00928 
00929     <span class="keywordflow">if</span> (ichNewMinSel &gt; ichNewMaxSel) {
00930         temp = ichNewMinSel;
00931         ichNewMinSel = ichNewMaxSel;
00932         ichNewMaxSel = temp;
00933     }
00934     ichNewMinSel = <a class="code" href="../../d5/d4/acpitabl_8h.html#a69">min</a>(ichNewMinSel, ped-&gt;cch);
00935     ichNewMaxSel = <a class="code" href="../../d5/d4/acpitabl_8h.html#a69">min</a>(ichNewMaxSel, ped-&gt;cch);
00936 
00937     <span class="comment">/*</span>
00938 <span class="comment">     * Save the current selection</span>
00939 <span class="comment">     */</span>
00940     ichOldMinSel = ped-&gt;ichMinSel;
00941     ichOldMaxSel = ped-&gt;ichMaxSel;
00942 
00943     <span class="comment">/*</span>
00944 <span class="comment">     * Set new selection</span>
00945 <span class="comment">     */</span>
00946     ped-&gt;ichMinSel = ichNewMinSel;
00947     ped-&gt;ichMaxSel = ichNewMaxSel;
00948 
00949     <span class="comment">/*</span>
00950 <span class="comment">     * This finds the XOR of the old and new selection regions and redraws it.</span>
00951 <span class="comment">     * There is nothing to repaint if we aren't visible or our selection</span>
00952 <span class="comment">     * is hidden.</span>
00953 <span class="comment">     */</span>
00954     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d9/rtl_2wow_8c.html#a17">_IsWindowVisible</a>(ped-&gt;pwnd) &amp;&amp; (ped-&gt;fFocus || ped-&gt;fNoHideSel)) {
00955 
00956         <a class="code" href="../../d7/d8/structtagBLOCK.html">BLOCK</a> Blk[2];
00957         <span class="keywordtype">int</span> i;
00958 
00959         <span class="keywordflow">if</span> (ped-&gt;fFocus) {
00960             <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a204">NtUserHideCaret</a>(ped-&gt;hwnd);
00961         }
00962 
00963         Blk[0].<a class="code" href="../../d7/d8/structtagBLOCK.html#o0">StPos</a> = ichOldMinSel;
00964         Blk[0].<a class="code" href="../../d7/d8/structtagBLOCK.html#o1">EndPos</a> = ichOldMaxSel;
00965         Blk[1].<a class="code" href="../../d7/d8/structtagBLOCK.html#o0">StPos</a> = ped-&gt;ichMinSel;
00966         Blk[1].<a class="code" href="../../d7/d8/structtagBLOCK.html#o1">EndPos</a> = ped-&gt;ichMaxSel;
00967 
00968         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a457">ECCalcChangeSelection</a>(ped, ichOldMinSel, ichOldMaxSel, (<a class="code" href="../../d7/d8/structtagBLOCK.html">LPBLOCK</a>)&amp;Blk[0], (<a class="code" href="../../d7/d8/structtagBLOCK.html">LPBLOCK</a>)&amp;Blk[1])) {
00969 
00970             <span class="comment">/*</span>
00971 <span class="comment">             * Paint both Blk[0] and Blk[1], if they exist</span>
00972 <span class="comment">             */</span>
00973             <span class="keywordflow">for</span> (i = 0; i &lt; 2; i++) {
00974                 <span class="keywordflow">if</span> (Blk[i].<a class="code" href="../../d7/d8/structtagBLOCK.html#o0">StPos</a> != 0xFFFFFFFF)
00975                     <a class="code" href="../../d6/d0/usercli_8h.html#a486">MLDrawText</a>(ped, hdc, Blk[i].StPos, Blk[i].EndPos, TRUE);
00976             }
00977         }
00978 
00979         <span class="comment">/*</span>
00980 <span class="comment">         * Update caret.</span>
00981 <span class="comment">         */</span>
00982         <a class="code" href="../../d6/d0/usercli_8h.html#a493">MLSetCaretPosition</a>(ped, hdc);
00983 
00984         <span class="keywordflow">if</span> (ped-&gt;fFocus) {
00985             <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a234">NtUserShowCaret</a>(ped-&gt;hwnd);
00986         }
00987 
00988     }
00989 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a503" doxytag="usercli.h::MLChar" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void MLChar           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d4/editml_8c-source.html#l02531">2531</a> of file <a class="el" href="../../d2/d4/editml_8c-source.html">editml.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d0/d7/halvprnt_8c-source.html#l00031">BYTE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00510">CTRLDOWN</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l04109">DbcsCombine()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00733">ECGetModKeys()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00402">ECInOutReconversionMode()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01010">ECIsCharNumeric()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l04083">ECIsDBCSLeadByte()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02502">EFNUMBER</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02501">EFWANTRETURN</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00642">tagED::f40Compat</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00640">tagED::fAnsi</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00628">tagED::fInDialogBox</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00601">tagED::fMouseDown</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00632">tagED::fReadOnly</a>, <a class="el" href="../../d6/d8/ntrtlp_8h-source.html#l00184">HIBYTE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00584">tagED::hwnd</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00564">tagED::ichCaret</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00563">tagED::ichMaxSel</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00561">tagED::ichMinSel</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d6/d8/ntrtlp_8h-source.html#l00183">LOBYTE</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l01367">MLDeleteText()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l01040">MLInsertText()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l00144">MLMoveSelection()</a>, <a class="el" href="../../d3/d0/userexts_8c-source.html#l01830">msg</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04510">NtUserCallNoParam()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01564">NtUserMessageBeep</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00585">tagED::pwnd</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00652">SendMessage()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>.
<p>
Referenced by <a class="el" href="../../d2/d4/editml_8c-source.html#l03457">MLEditWndProc()</a>, and <a class="el" href="../../d2/d4/editml_8c-source.html#l02028">MLKeyDown()</a>.
<p>
<pre class="fragment"><div>02535 {
02536     WCHAR keyPress;
02537     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> updateText = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
02538 
02539     <span class="comment">/*</span>
02540 <span class="comment">     * keyValue is either:</span>
02541 <span class="comment">     *    a Virtual Key (eg: VK_TAB, VK_ESCAPE, VK_BACK)</span>
02542 <span class="comment">     *    a character (Unicode or "ANSI")</span>
02543 <span class="comment">     */</span>
02544     <span class="keywordflow">if</span> (ped-&gt;fAnsi)
02545         keyPress = <a class="code" href="../../d5/d9/ntrtlp_8h.html#a4">LOBYTE</a>(keyValue);
02546     <span class="keywordflow">else</span>
02547         keyPress = LOWORD(keyValue);
02548 
02549     <span class="keywordflow">if</span> (ped-&gt;fMouseDown || keyPress == VK_ESCAPE) {
02550 
02551         <span class="comment">/*</span>
02552 <span class="comment">         * If we are in the middle of a mousedown command, don't do anything.</span>
02553 <span class="comment">         * Also, just ignore it if we get a translated escape key which happens</span>
02554 <span class="comment">         * with multiline edit controls in a dialog box.</span>
02555 <span class="comment">         */</span>
02556         <span class="keywordflow">return</span> ;
02557     }
02558 
02559     <a class="code" href="../../d6/d0/usercli_8h.html#a477">ECInOutReconversionMode</a>(ped, FALSE);
02560 
02561     {
02562         <span class="keywordtype">int</span> scState;
02563         scState = <a class="code" href="../../d6/d0/usercli_8h.html#a481">ECGetModKeys</a>(keyMods);
02564 
02565         <span class="keywordflow">if</span> (ped-&gt;fInDialogBox &amp;&amp; scState != <a class="code" href="../../d6/d0/usercli_8h.html#a77">CTRLDOWN</a>) {
02566 
02567             <span class="comment">/*</span>
02568 <span class="comment">             * If this multiline edit control is in a dialog box, then we want the</span>
02569 <span class="comment">             * TAB key to take you to the next control, shift TAB to take you to the</span>
02570 <span class="comment">             * previous control, and CTRL-TAB to insert a tab into the edit control.</span>
02571 <span class="comment">             * We moved the focus when we received the keydown message so we will</span>
02572 <span class="comment">             * ignore the TAB key now unless the ctrl key is down. Also, we want</span>
02573 <span class="comment">             * CTRL-RETURN to insert a return into the text and RETURN to be sent to</span>
02574 <span class="comment">             * the default button.</span>
02575 <span class="comment">             */</span>
02576             <span class="keywordflow">if</span> (keyPress == VK_TAB ||
02577                     (keyPress == VK_RETURN &amp;&amp; !<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(ped-&gt;pwnd, EFWANTRETURN)))
02578                 <span class="keywordflow">return</span> ;
02579         }
02580 
02581         <span class="comment">/*</span>
02582 <span class="comment">         * Allow CTRL+C to copy from a read only edit control</span>
02583 <span class="comment">         * Ignore all other keys in read only controls</span>
02584 <span class="comment">         */</span>
02585         <span class="keywordflow">if</span> ((ped-&gt;fReadOnly) &amp;&amp; !((keyPress == 3) &amp;&amp; (scState == <a class="code" href="../../d6/d0/usercli_8h.html#a77">CTRLDOWN</a>))) {
02586             <span class="keywordflow">return</span> ;
02587         }
02588     }
02589 
02590     <span class="keywordflow">switch</span> (keyPress) {
02591     <span class="keywordflow">case</span> 0x0A: <span class="comment">// linefeed</span>
02592         keyPress = VK_RETURN;
02593         <span class="comment">/*</span>
02594 <span class="comment">         * FALL THRU</span>
02595 <span class="comment">         */</span>
02596 
02597     <span class="keywordflow">case</span> VK_RETURN:
02598     <span class="keywordflow">case</span> VK_TAB:
02599     <span class="keywordflow">case</span> VK_BACK:
02600 DeleteSelection:
02601         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a484">MLDeleteText</a>(ped))
02602             updateText = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
02603         <span class="keywordflow">break</span>;
02604 
02605     <span class="keywordflow">default</span>:
02606         <span class="keywordflow">if</span> (keyPress &gt;= TEXT(<span class="charliteral">' '</span>)) {
02607             <span class="comment">/*</span>
02608 <span class="comment">             * If this is in [a-z],[A-Z] and we are an ES_NUMBER</span>
02609 <span class="comment">             * edit field, bail.</span>
02610 <span class="comment">             */</span>
02611             <span class="keywordflow">if</span> (ped-&gt;f40Compat &amp;&amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(ped-&gt;pwnd, EFNUMBER)) {
02612                 <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d0/usercli_8h.html#a459">ECIsCharNumeric</a>(ped, keyPress)) {
02613                     <span class="keywordflow">goto</span> IllegalChar;
02614                 }
02615             }
02616 
02617             <span class="keywordflow">goto</span> DeleteSelection;
02618         }
02619         <span class="keywordflow">break</span>;
02620     }
02621 
02622     <span class="comment">/*</span>
02623 <span class="comment">     * Handle key codes</span>
02624 <span class="comment">     */</span>
02625     <span class="keywordflow">switch</span>(keyPress) {
02626     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> <a class="code" href="../../d2/d1/userexts_8c.html#a129">msg</a>;
02627 
02628     <span class="comment">// Ctrl+Z == Undo</span>
02629     <span class="keywordflow">case</span> 26:
02630         <a class="code" href="../../d2/d1/userexts_8c.html#a129">msg</a> = WM_UNDO;
02631         <span class="keywordflow">goto</span> SendEditingMessage;
02632         <span class="keywordflow">break</span>;
02633 
02634     <span class="comment">// Ctrl+X == Cut</span>
02635     <span class="keywordflow">case</span> 24:
02636         <span class="keywordflow">if</span> (ped-&gt;ichMinSel == ped-&gt;ichMaxSel)
02637             <span class="keywordflow">goto</span> IllegalChar;
02638         <span class="keywordflow">else</span>
02639         {
02640             <a class="code" href="../../d2/d1/userexts_8c.html#a129">msg</a> = WM_CUT;
02641             <span class="keywordflow">goto</span> SendEditingMessage;
02642         }
02643         <span class="keywordflow">break</span>;
02644 
02645     <span class="comment">// Ctrl+C == Copy</span>
02646     <span class="keywordflow">case</span> 3:
02647         <a class="code" href="../../d2/d1/userexts_8c.html#a129">msg</a> = WM_COPY;
02648         <span class="keywordflow">goto</span> SendEditingMessage;
02649         <span class="keywordflow">break</span>;
02650 
02651     <span class="comment">// Ctrl+V == Paste</span>
02652     <span class="keywordflow">case</span> 22:
02653         <a class="code" href="../../d2/d1/userexts_8c.html#a129">msg</a> = WM_PASTE;
02654 SendEditingMessage:
02655         <a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(ped-&gt;hwnd, msg, 0, 0L);
02656         <span class="keywordflow">break</span>;
02657 
02658     <span class="keywordflow">case</span> VK_BACK:
02659         <span class="comment">//</span>
02660         <span class="comment">// Delete any selected text or delete character left if no sel</span>
02661         <span class="comment">//</span>
02662         <span class="keywordflow">if</span> (!updateText &amp;&amp; ped-&gt;ichMinSel)
02663         {
02664             <span class="comment">//</span>
02665             <span class="comment">// There was no selection to delete so we just delete</span>
02666             <span class="comment">// character left if available</span>
02667             <span class="comment">//</span>
02668             ped-&gt;ichMinSel = <a class="code" href="../../d1/d5/editml_8c.html#a6">MLMoveSelection</a>(ped, ped-&gt;ichCaret, TRUE);
02669             <a class="code" href="../../d6/d0/usercli_8h.html#a484">MLDeleteText</a>(ped);
02670         }
02671         <span class="keywordflow">break</span>;
02672 
02673     <span class="keywordflow">default</span>:
02674         <span class="keywordflow">if</span> (keyPress == VK_RETURN)
02675             <span class="keywordflow">if</span> (ped-&gt;fAnsi)
02676                 keyValue = 0x0A0D;
02677             <span class="keywordflow">else</span>
02678                 keyValue = 0x000A000D;
02679 
02680         <span class="keywordflow">if</span> (   keyPress &gt;= TEXT(<span class="charliteral">' '</span>)
02681             || keyPress == VK_RETURN
02682             || keyPress == VK_TAB
02683             || keyPress == 0x1E     <span class="comment">// RS - Unicode block separator</span>
02684             || keyPress == 0x1F     <span class="comment">// US - Unicode segment separator</span>
02685             ) {
02686 
02687             <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a173">NtUserCallNoParam</a>(SFI_ZZZHIDECURSORNOCAPTURE);
02688             <span class="keywordflow">if</span> (ped-&gt;fAnsi) {
02689                 <span class="comment">//</span>
02690                 <span class="comment">// check if it's a leading byte of double byte character</span>
02691                 <span class="comment">//</span>
02692                 <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a464">ECIsDBCSLeadByte</a>(ped,(BYTE)keyPress)) {
02693                     <span class="keywordtype">int</span> DBCSkey;
02694 
02695                     <span class="keywordflow">if</span> ((DBCSkey = <a class="code" href="../../d6/d0/usercli_8h.html#a460">DbcsCombine</a>(ped-&gt;hwnd, keyPress)) != 0)
02696                         keyValue = DBCSkey;
02697                 }
02698                 <a class="code" href="../../d6/d0/usercli_8h.html#a483">MLInsertText</a>(ped, (LPSTR)&amp;keyValue, <a class="code" href="../../d5/d9/ntrtlp_8h.html#a5">HIBYTE</a>(keyValue) ? 2 : 1, TRUE);
02699             } <span class="keywordflow">else</span>
02700                 <a class="code" href="../../d6/d0/usercli_8h.html#a483">MLInsertText</a>(ped, (LPSTR)&amp;keyValue, HIWORD(keyValue) ? 2 : 1, TRUE);
02701         } <span class="keywordflow">else</span> {
02702 IllegalChar:
02703             <a class="code" href="../../d6/d0/usercli_8h.html#a219">NtUserMessageBeep</a>(0);
02704         }
02705         <span class="keywordflow">break</span>;
02706     }
02707 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a507" doxytag="usercli.h::MLCreate" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LONG MLCreate           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPCREATESTRUCT&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/edmlonce_8c-source.html#l00023">23</a> of file <a class="el" href="../../d5/d4/edmlonce_8c-source.html">edmlonce.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l00555">tagED::cchTextMax</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00662">tagED::chLines</a>, <a class="el" href="../../d9/d3/w32_2ntuser_2kernel_2random_8c-source.html#l00102">ClearWindowState()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00559">tagED::cLines</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l00387">ECCreate()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l00708">ECSetFont()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02612">ECSetText()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00609">tagED::fAutoHScroll</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00608">tagED::fAutoVScroll</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00664">tagED::format</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00615">tagED::fWrap</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00054">gHighestUserAddress</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00627">LPICH</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00503">MAXTEXT</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00585">tagED::pwnd</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00211">REBASEPTR</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02406">WFHSCROLL</a>.
<p>
Referenced by <a class="el" href="../../d2/d4/editml_8c-source.html#l03457">MLEditWndProc()</a>.
<p>
<pre class="fragment"><div>00026 {
00027     LONG windowStyle;
00028     LPWSTR lpszName;
00029 
00030     <span class="comment">/*</span>
00031 <span class="comment">     * Get values from the window instance data structure and put them in the</span>
00032 <span class="comment">     * ped so that we can access them easier</span>
00033 <span class="comment">     */</span>
00034     windowStyle = ped-&gt;pwnd-&gt;style;
00035 
00036     <span class="comment">/*</span>
00037 <span class="comment">     * Do the standard creation stuff</span>
00038 <span class="comment">     */</span>
00039     <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d0/usercli_8h.html#a437">ECCreate</a>(ped, windowStyle)) {
00040         <span class="keywordflow">return</span> (-1);
00041     }
00042 
00043     <span class="comment">/*</span>
00044 <span class="comment">     * Allocate line start array in local heap and lock it down</span>
00045 <span class="comment">     */</span>
00046     ped-&gt;chLines = (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a981">LPICH</a>)LocalAlloc(LPTR, 2 * <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));
00047     <span class="keywordflow">if</span> (ped-&gt;chLines == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00048         <span class="keywordflow">return</span> (-1);
00049     }
00050 
00051     <span class="comment">/*</span>
00052 <span class="comment">     * Call it one line of text...</span>
00053 <span class="comment">     */</span>
00054     ped-&gt;cLines = 1;
00055 
00056     <span class="comment">/*</span>
00057 <span class="comment">     * If app wants WS_VSCROLL or WS_HSCROLL, it automatically gets AutoVScroll</span>
00058 <span class="comment">     * or AutoHScroll.</span>
00059 <span class="comment">     */</span>
00060     <span class="keywordflow">if</span> ((windowStyle &amp; ES_AUTOVSCROLL) || (windowStyle &amp; WS_VSCROLL)) {
00061         ped-&gt;fAutoVScroll = 1;
00062     }
00063 
00064     <span class="keywordflow">if</span> (ped-&gt;format != ES_LEFT)
00065     {
00066         <span class="comment">/*</span>
00067 <span class="comment">         * If user wants right or center justified text, then we turn off</span>
00068 <span class="comment">         * AUTOHSCROLL and WS_HSCROLL since non-left styles don't make sense</span>
00069 <span class="comment">         * otherwise.</span>
00070 <span class="comment">         */</span>
00071         windowStyle &amp;= ~WS_HSCROLL;
00072         <a class="code" href="../../d4/d1/userk_8h.html#a1629">ClearWindowState</a>(ped-&gt;pwnd, WFHSCROLL);
00073         ped-&gt;fAutoHScroll = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00074     }
00075     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (windowStyle &amp; WS_HSCROLL) {
00076         ped-&gt;fAutoHScroll = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00077     }
00078 
00079     ped-&gt;fWrap = (!ped-&gt;fAutoHScroll &amp;&amp; !(windowStyle &amp; WS_HSCROLL));
00080 
00081     <span class="comment">/*</span>
00082 <span class="comment">     * Max # chars we will allow user to enter</span>
00083 <span class="comment">     */</span>
00084     ped-&gt;cchTextMax = <a class="code" href="../../d6/d0/usercli_8h.html#a75">MAXTEXT</a>;
00085 
00086     <span class="comment">/*</span>
00087 <span class="comment">     * Set the default font to be the system font.</span>
00088 <span class="comment">     */</span>
00089     <a class="code" href="../../d6/d0/usercli_8h.html#a454">ECSetFont</a>(ped, NULL, FALSE) ;
00090 
00091     <span class="comment">/*</span>
00092 <span class="comment">     * Set the window text if needed and notify parent if not enough memory to</span>
00093 <span class="comment">     * set the initial text.</span>
00094 <span class="comment">     */</span>
00095     <span class="keywordflow">if</span> ((ULONG_PTR)lpCreateStruct-&gt;lpszName &gt; <a class="code" href="../../d1/d8/clglobal_8c.html#a7">gHighestUserAddress</a>)
00096         lpszName = <a class="code" href="../../d6/d0/usercli_8h.html#a25">REBASEPTR</a>(ped-&gt;pwnd, (PVOID)lpCreateStruct-&gt;lpszName);
00097     <span class="keywordflow">else</span>
00098         lpszName = (LPWSTR)lpCreateStruct-&gt;lpszName;
00099     <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d0/usercli_8h.html#a441">ECSetText</a>(ped, (LPSTR)lpszName))
00100         <span class="keywordflow">return</span> (-1);
00101 
00102     <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
00103 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a484" doxytag="usercli.h::MLDeleteText" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a> MLDeleteText           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d4/editml_8c-source.html#l01367">1367</a> of file <a class="el" href="../../d2/d4/editml_8c-source.html">editml.c</a>.
<p>
References <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00860">_IsWindowVisible()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00557">tagED::cch</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00662">tagED::chLines</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00243">CopyRect</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02293">ECDeleteText()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02492">ECGetEditDC()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l03969">ECNextIch()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02429">ECNotifyParent()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02524">ECReleaseEditDC()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00640">tagED::fAnsi</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00608">tagED::fAutoVScroll</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00611">tagED::fDBCS</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00603">tagED::fDirty</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01265">FWINABLE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00584">tagED::hwnd</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00626">ICH</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00563">tagED::ichMaxSel</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00561">tagED::ichMinSel</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00025">INT</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00678">tagED::lineHeight</a>, <a class="el" href="../../d9/d5/sertl_8c-source.html#l00332">max</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l01562">MLBuildchLines()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l03991">MLDrawText()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l03379">MLEnsureCaretVisible()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l00443">MLIchToLine()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l00553">MLIchToXYPos()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l00502">MLIchToYPos()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l01538">MLShiftchLines()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l01003">MLUpdateiCaretLine()</a>, <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00354">NotifyWinEvent()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05330">NtUserInvalidateRect()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00702">tagED::pLpkEditCallout</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00585">tagED::pwnd</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00586">tagED::rcFmt</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00696">tagED::wLeftMargin</a>, and <a class="el" href="../../d7/d9/usercli_8h-source.html#l00697">tagED::wRightMargin</a>.
<p>
Referenced by <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01337">ECImeComposition()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02904">EditWndProc()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l02531">MLChar()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l02720">MLPasteText()</a>, and <a class="el" href="../../d2/d4/editml_8c-source.html#l01309">MLReplaceSel()</a>.
<p>
<pre class="fragment"><div>01369 {
01370     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a> minSel = ped-&gt;ichMinSel;
01371     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a> maxSel = ped-&gt;ichMaxSel;
01372     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a> cchDelete;
01373     HDC hdc;
01374     <span class="keywordtype">int</span> minSelLine;
01375     <span class="keywordtype">int</span> maxSelLine;
01376     POINT xyPos;
01377     RECT rc;
01378     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fFastDelete = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01379     LONG hl;
01380     <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a>  cchcount = 0;
01381 
01382     <span class="comment">/*</span>
01383 <span class="comment">     * Get what line the min selection is on so that we can start rebuilding the</span>
01384 <span class="comment">     * text from there if we delete anything.</span>
01385 <span class="comment">     */</span>
01386     minSelLine = <a class="code" href="../../d6/d0/usercli_8h.html#a495">MLIchToLine</a>(ped, minSel);
01387     maxSelLine = <a class="code" href="../../d6/d0/usercli_8h.html#a495">MLIchToLine</a>(ped, maxSel);
01388     <span class="comment">//</span>
01389     <span class="comment">// Calculate fFastDelete and cchcount</span>
01390     <span class="comment">//</span>
01391     <span class="keywordflow">if</span> (ped-&gt;fAnsi &amp;&amp; ped-&gt;fDBCS) {
01392         <span class="keywordflow">if</span> ((ped-&gt;fAutoVScroll) &amp;&amp;
01393             (minSelLine == maxSelLine) &amp;&amp;
01394             (ped-&gt;chLines[minSelLine] != minSel)  &amp;&amp;
01395             (<a class="code" href="../../d6/d0/usercli_8h.html#a468">ECNextIch</a>(ped,NULL,minSel) == maxSel)) {
01396 
01397                 fFastDelete = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01398                 cchcount = ((maxSel - minSel) == 1) ? 0 : -1;
01399         }
01400     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (((maxSel - minSel) == 1) &amp;&amp; (minSelLine == maxSelLine) &amp;&amp; (ped-&gt;chLines[minSelLine] != minSel)) {
01401             <span class="keywordflow">if</span> (!ped-&gt;fAutoVScroll)
01402                 fFastDelete = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01403             <span class="keywordflow">else</span>
01404                 fFastDelete = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01405     }
01406     <span class="keywordflow">if</span> (!(cchDelete = <a class="code" href="../../d6/d0/usercli_8h.html#a447">ECDeleteText</a>(ped)))
01407         <span class="keywordflow">return</span> (0);
01408 
01409     <span class="comment">/*</span>
01410 <span class="comment">     * Start building lines at minsel line since caretline may be at the max sel</span>
01411 <span class="comment">     * point.</span>
01412 <span class="comment">     */</span>
01413     <span class="keywordflow">if</span> (fFastDelete) {
01414         <span class="comment">//</span>
01415         <span class="comment">// cchcount is (-1) if it's a double byte character</span>
01416         <span class="comment">//</span>
01417         <a class="code" href="../../d6/d0/usercli_8h.html#a491">MLShiftchLines</a>(ped, minSelLine + 1, -2 + cchcount);
01418         <a class="code" href="../../d6/d0/usercli_8h.html#a490">MLBuildchLines</a>(ped, minSelLine, 1, TRUE, NULL, &amp;hl);
01419     } <span class="keywordflow">else</span> {
01420         <a class="code" href="../../d6/d0/usercli_8h.html#a490">MLBuildchLines</a>(ped, <a class="code" href="../../d8/d6/sertl_8c.html#a1">max</a>(minSelLine-1,0), -(<span class="keywordtype">int</span>)cchDelete, FALSE, NULL, NULL);
01421     }
01422 
01423     <a class="code" href="../../d6/d0/usercli_8h.html#a519">MLUpdateiCaretLine</a>(ped);
01424 
01425     <a class="code" href="../../d6/d0/usercli_8h.html#a449">ECNotifyParent</a>(ped, EN_UPDATE);
01426 
01427     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d9/rtl_2wow_8c.html#a17">_IsWindowVisible</a>(ped-&gt;pwnd)) {
01428 
01429         <span class="comment">/*</span>
01430 <span class="comment">         * Now update the screen to reflect the deletion</span>
01431 <span class="comment">         */</span>
01432         hdc = <a class="code" href="../../d6/d0/usercli_8h.html#a451">ECGetEditDC</a>(ped, FALSE);
01433 
01434         <span class="comment">/*</span>
01435 <span class="comment">         * Otherwise just redraw starting at the line we just entered</span>
01436 <span class="comment">         */</span>
01437         minSelLine = <a class="code" href="../../d8/d6/sertl_8c.html#a1">max</a>(minSelLine-1,0);
01438         <a class="code" href="../../d6/d0/usercli_8h.html#a486">MLDrawText</a>(ped, hdc, ped-&gt;chLines[minSelLine],
01439                    fFastDelete ? hl : ped-&gt;cch, FALSE);
01440 
01441         <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a33">CopyRect</a>(&amp;rc, &amp;ped-&gt;rcFmt);
01442         rc.left  -= ped-&gt;wLeftMargin;
01443         rc.right += ped-&gt;wRightMargin;
01444 
01445         <span class="keywordflow">if</span> (ped-&gt;cch) {
01446 
01447             <span class="comment">/*</span>
01448 <span class="comment">             * Clear from end of text to end of window.</span>
01449 <span class="comment">             *</span>
01450 <span class="comment">             * We only need the y position. Since with an LPK loaded</span>
01451 <span class="comment">             * calculating the x position is an intensive job, just</span>
01452 <span class="comment">             * call MLIchToYPos.</span>
01453 <span class="comment">             */</span>
01454             <span class="keywordflow">if</span> (ped-&gt;pLpkEditCallout)
01455                 xyPos.y = <a class="code" href="../../d1/d5/editml_8c.html#a11">MLIchToYPos</a>(ped, ped-&gt;cch, FALSE);
01456             <span class="keywordflow">else</span>
01457                 <a class="code" href="../../d6/d0/usercli_8h.html#a494">MLIchToXYPos</a>(ped, hdc, ped-&gt;cch, FALSE, &amp;xyPos);
01458             rc.top = xyPos.y + ped-&gt;lineHeight;
01459         }
01460 
01461         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a206">NtUserInvalidateRect</a>(ped-&gt;hwnd, &amp;rc, TRUE);
01462         <a class="code" href="../../d6/d0/usercli_8h.html#a452">ECReleaseEditDC</a>(ped, hdc, FALSE);
01463 
01464         <a class="code" href="../../d6/d0/usercli_8h.html#a485">MLEnsureCaretVisible</a>(ped);
01465     }
01466 
01467     ped-&gt;fDirty = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01468 
01469     <a class="code" href="../../d6/d0/usercli_8h.html#a449">ECNotifyParent</a>(ped, EN_CHANGE);
01470 
01471     <span class="keywordflow">if</span> (cchDelete &amp;&amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a405">FWINABLE</a>())
01472         <a class="code" href="../../d8/d9/client_2ntstubs_8c.html#a12">NotifyWinEvent</a>(EVENT_OBJECT_VALUECHANGE, ped-&gt;hwnd, OBJID_CLIENT, INDEXID_CONTAINER);
01473 
01474     <span class="keywordflow">return</span> cchDelete;
01475 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a487" doxytag="usercli.h::MLDrawLine" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void MLDrawLine           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HDC&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a486" doxytag="usercli.h::MLDrawText" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void MLDrawText           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HDC&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d4/editml_8c-source.html#l03991">3991</a> of file <a class="el" href="../../d2/d4/editml_8c-source.html">editml.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00661">tagED::cbChar</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00557">tagED::cch</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00662">tagED::chLines</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00559">tagED::cLines</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00243">CopyRect</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l04133">ECAdjustIch()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l04162">ECAdjustIchNext()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l01412">ECGetBrush()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00052">ECLock()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01048">ECT_NORMAL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01049">ECT_SELECTED</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00770">ECTabTheTextOut()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00086">ECUnlock()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l03294">tagLPKEDITCALLOUT::EditDrawText</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00640">tagED::fAnsi</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00611">tagED::fDBCS</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00604">tagED::fDisabled</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00602">tagED::fFocus</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00610">tagED::fNoHideSel</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00664">tagED::format</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00366">GetSysColor()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00584">tagED::hwnd</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00626">ICH</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00574">tagED::ichLinesOnScreen</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00563">tagED::ichMaxSel</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00561">tagED::ichMinSel</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00570">tagED::ichScreenStart</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00025">INT</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00678">tagED::lineHeight</a>, <a class="el" href="../../d9/d5/sertl_8c-source.html#l00332">max</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00490">MAXCLIPENDPOS</a>, <a class="el" href="../../d6/d3/acpitabl_8h-source.html#l00366">min</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l00085">MLCalcXOffset()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l00443">MLIchToLine()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l00553">MLIchToXYPos()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l00502">MLIchToYPos()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l00374">MLLine()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l00292">MLSetCaretPosition()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00767">STRIPINFO::nCount</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05279">NtUserHideCaret()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05330">NtUserInvalidateRect()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06219">NtUserShowCaret()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00702">tagED::pLpkEditCallout</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00586">tagED::rcFmt</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00696">tagED::wLeftMargin</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00693">tagED::wMaxNegAcharPos</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00694">tagED::wMaxNegC</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00695">tagED::wMaxNegCcharPos</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00697">tagED::wRightMargin</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00575">tagED::xOffset</a>, and <a class="el" href="../../d7/d9/usercli_8h-source.html#l00768">STRIPINFO::XStartPos</a>.
<p>
Referenced by <a class="el" href="../../d2/d4/editml_8c-source.html#l00919">MLChangeSelection()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l01367">MLDeleteText()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l01040">MLInsertText()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l03329">MLKillFocus()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l01965">MLPaint()</a>, and <a class="el" href="../../d2/d4/editml_8c-source.html#l03274">MLSetFocus()</a>.
<p>
<pre class="fragment"><div>03997 {
03998     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>   textColorSave;
03999     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>   bkColorSave;
04000     PSTR    pText;
04001     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>    wCurLine;
04002     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>    wEndLine;
04003     <span class="keywordtype">int</span>     xOffset;
04004     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a>     LengthToDraw;
04005     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a>     CurStripLength;
04006     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a>     ichAttrib, ichNewStart;
04007     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a>     ExtraLengthForNegA;
04008     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a>     ichT;
04009     <span class="keywordtype">int</span>     iRemainingLengthInLine;
04010     <span class="keywordtype">int</span>     xStPos, xClipStPos, xClipEndPos, yPos;
04011     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>    fFirstLineOfBlock   = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
04012     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>    fDrawEndOfLineStrip = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
04013     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>    fDrawOnSameLine     = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
04014     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>    fSelected                = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
04015     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>    fLineBegins      = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
04016     <a class="code" href="../../d6/d7/structSTRIPINFO.html">STRIPINFO</a>   NegCInfo;
04017     POINT   pt;
04018 
04019     <span class="comment">//</span>
04020     <span class="comment">// Just return if nothing to draw</span>
04021     <span class="keywordflow">if</span> (!ped-&gt;ichLinesOnScreen)
04022         <span class="keywordflow">return</span>;
04023 
04024     <a class="code" href="../../d6/d0/usercli_8h.html#a480">ECGetBrush</a>(ped, hdc);
04025 
04026     <span class="comment">//</span>
04027     <span class="comment">// Adjust the value of ichStart such that we need to draw only those lines</span>
04028     <span class="comment">// visible on the screen.</span>
04029     <span class="comment">//</span>
04030     <span class="keywordflow">if</span> ((<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)ichStart &lt; (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)ped-&gt;chLines[ped-&gt;ichScreenStart]) {
04031         ichStart = ped-&gt;chLines[ped-&gt;ichScreenStart];
04032         <span class="keywordflow">if</span> (ichStart &gt; ichEnd)
04033             <span class="keywordflow">return</span>;
04034     }
04035 
04036     <span class="comment">// Adjust the value of ichEnd such that we need to draw only those lines</span>
04037     <span class="comment">// visible on the screen.</span>
04038     wCurLine = <a class="code" href="../../d5/d4/acpitabl_8h.html#a69">min</a>(ped-&gt;ichScreenStart+ped-&gt;ichLinesOnScreen,ped-&gt;cLines-1);
04039     ichT = ped-&gt;chLines[wCurLine] + <a class="code" href="../../d6/d0/usercli_8h.html#a498">MLLine</a>(ped, wCurLine);
04040     ichEnd = <a class="code" href="../../d5/d4/acpitabl_8h.html#a69">min</a>(ichEnd, ichT);
04041 
04042     wCurLine = <a class="code" href="../../d6/d0/usercli_8h.html#a495">MLIchToLine</a>(ped, ichStart);    <span class="comment">// Starting line.</span>
04043     wEndLine = <a class="code" href="../../d6/d0/usercli_8h.html#a495">MLIchToLine</a>(ped, ichEnd);           <span class="comment">// Ending line.</span>
04044 
04045     UserAssert(ped-&gt;chLines[wCurLine] &lt;= ped-&gt;cch + 1);
04046     UserAssert(ped-&gt;chLines[wEndLine] &lt;= ped-&gt;cch + 1);
04047 
04048     <span class="keywordflow">if</span> (fSelChange &amp;&amp; (GetBkMode(hdc) != OPAQUE))
04049     {
04050         <span class="comment">/*</span>
04051 <span class="comment">         * if changing selection on a transparent edit control, just</span>
04052 <span class="comment">         * draw those lines from scratch</span>
04053 <span class="comment">         */</span>
04054         RECT rcStrip;
04055         <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a33">CopyRect</a>(&amp;rcStrip, &amp;ped-&gt;rcFmt);
04056         rcStrip.left -= ped-&gt;wLeftMargin;
04057         <span class="keywordflow">if</span> (ped-&gt;pLpkEditCallout) {
04058             rcStrip.right += ped-&gt;wRightMargin;
04059         }
04060         rcStrip.top += (wCurLine - ped-&gt;ichScreenStart) * ped-&gt;lineHeight;
04061         rcStrip.bottom = rcStrip.top + ((wEndLine - wCurLine) + 1) * ped-&gt;lineHeight;
04062         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a206">NtUserInvalidateRect</a>(ped-&gt;hwnd, &amp;rcStrip, TRUE);
04063         <span class="keywordflow">return</span>;
04064     }
04065 
04066     <span class="comment">// If it is either centered or right-justified, then draw the whole lines.</span>
04067     <span class="comment">// Also draw whole lines if the language pack is handling line layout.</span>
04068     <span class="keywordflow">if</span> ((ped-&gt;format != ES_LEFT) || (ped-&gt;pLpkEditCallout)) {
04069         ichStart = ped-&gt;chLines[wCurLine];
04070         ichEnd = ped-&gt;chLines[wEndLine] + <a class="code" href="../../d6/d0/usercli_8h.html#a498">MLLine</a>(ped, wEndLine);
04071     }
04072 
04073     pText = <a class="code" href="../../d6/d0/usercli_8h.html#a433">ECLock</a>(ped);
04074 
04075     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a204">NtUserHideCaret</a>(ped-&gt;hwnd);
04076 
04077     <span class="comment">//</span>
04078     <span class="comment">// If ichStart stays on Second byte of DBCS, we have to</span>
04079     <span class="comment">// adjust it. LiZ -- 5/5/93</span>
04080     <span class="comment">//</span>
04081     <span class="keywordflow">if</span> (ped-&gt;fAnsi &amp;&amp; ped-&gt;fDBCS) {
04082         ichStart = <a class="code" href="../../d6/d0/usercli_8h.html#a461">ECAdjustIch</a>( ped, pText, ichStart );
04083     }
04084     UserAssert(ichStart &lt;= ped-&gt;cch);
04085     UserAssert(ichEnd &lt;= ped-&gt;cch);
04086 
04087     <span class="keywordflow">while</span> (ichStart &lt;= ichEnd) {
04088         <span class="comment">// Pass whole lines to the language pack to display with selection</span>
04089         <span class="comment">// marking and tab expansion.</span>
04090         <span class="keywordflow">if</span> (ped-&gt;pLpkEditCallout) {
04091             ped-&gt;pLpkEditCallout-&gt;EditDrawText(
04092                 ped, hdc, pText + ped-&gt;cbChar*ichStart,
04093                 <a class="code" href="../../d1/d5/editml_8c.html#a9">MLLine</a>(ped, wCurLine),
04094                 (INT)ped-&gt;ichMinSel - (INT)ichStart, (INT)ped-&gt;ichMaxSel - (INT)ichStart,
04095                 <a class="code" href="../../d1/d5/editml_8c.html#a11">MLIchToYPos</a>(ped, ichStart, FALSE));
04096         } <span class="keywordflow">else</span> {
04097         <span class="comment">// xStPos:      The starting Position where the string must be drawn.</span>
04098         <span class="comment">// xClipStPos:  The starting position for the clipping rect for the block.</span>
04099         <span class="comment">// xClipEndPos: The ending position for the clipping rect for the block.</span>
04100 
04101         <span class="comment">// Calculate the xyPos of starting point of the block.</span>
04102         <a class="code" href="../../d6/d0/usercli_8h.html#a494">MLIchToXYPos</a>(ped, hdc, ichStart, FALSE, &amp;pt);
04103         xClipStPos = xStPos = pt.x;
04104         yPos = pt.y;
04105 
04106         <span class="comment">// The attributes of the block is the same as that of ichStart.</span>
04107         ichAttrib = ichStart;
04108 
04109         <span class="comment">// If the current font has some negative C widths and if this is the</span>
04110         <span class="comment">// begining of a block, we must start drawing some characters before the</span>
04111         <span class="comment">// block to account for the negative C widths of the strip before the</span>
04112         <span class="comment">// current strip; In this case, reset ichStart and xStPos.</span>
04113 
04114         <span class="keywordflow">if</span> (fFirstLineOfBlock &amp;&amp; ped-&gt;wMaxNegC) {
04115             fFirstLineOfBlock = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
04116             ichNewStart = <a class="code" href="../../d8/d6/sertl_8c.html#a1">max</a>(((<span class="keywordtype">int</span>)(ichStart - ped-&gt;wMaxNegCcharPos)), ((<span class="keywordtype">int</span>)ped-&gt;chLines[wCurLine]));
04117 
04118             <span class="comment">// If ichStart needs to be changed, then change xStPos also accordingly.</span>
04119             <span class="keywordflow">if</span> (ichNewStart != ichStart) {
04120                 <span class="keywordflow">if</span> (ped-&gt;fAnsi &amp;&amp; ped-&gt;fDBCS) {
04121                     <span class="comment">//</span>
04122                     <span class="comment">// Adjust DBCS alignment...</span>
04123                     <span class="comment">//</span>
04124                     ichNewStart = <a class="code" href="../../d6/d0/usercli_8h.html#a462">ECAdjustIchNext</a>( ped, pText, ichNewStart );
04125                 }
04126                 <a class="code" href="../../d6/d0/usercli_8h.html#a494">MLIchToXYPos</a>(ped, hdc, ichStart = ichNewStart, FALSE, &amp;pt);
04127                 xStPos = pt.x;
04128             }
04129         }
04130 
04131         <span class="comment">// Calc the number of characters remaining to be drawn in the current line.</span>
04132         iRemainingLengthInLine = <a class="code" href="../../d6/d0/usercli_8h.html#a498">MLLine</a>(ped, wCurLine) -
04133                                 (ichStart - ped-&gt;chLines[wCurLine]);
04134 
04135         <span class="comment">// If this is the last line of a block, we may not have to draw all the</span>
04136         <span class="comment">// remaining lines; We must draw only upto ichEnd.</span>
04137         <span class="keywordflow">if</span> (wCurLine == wEndLine)
04138             LengthToDraw = ichEnd - ichStart;
04139         <span class="keywordflow">else</span>
04140             LengthToDraw = iRemainingLengthInLine;
04141 
04142         <span class="comment">// Find out how many pixels we indent the line for non-left-justified</span>
04143         <span class="comment">// formats</span>
04144         <span class="keywordflow">if</span> (ped-&gt;format != ES_LEFT)
04145             xOffset = <a class="code" href="../../d6/d0/usercli_8h.html#a500">MLCalcXOffset</a>(ped, hdc, wCurLine);
04146         <span class="keywordflow">else</span>
04147             xOffset = -((<span class="keywordtype">int</span>)(ped-&gt;xOffset));
04148 
04149         <span class="comment">// Check if this is the begining of a line.</span>
04150         <span class="keywordflow">if</span> (ichAttrib == ped-&gt;chLines[wCurLine]) {
04151             fLineBegins = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
04152             xClipStPos = ped-&gt;rcFmt.left - ped-&gt;wLeftMargin;
04153         }
04154 
04155         <span class="comment">//</span>
04156         <span class="comment">// The following loop divides this 'wCurLine' into strips based on the</span>
04157         <span class="comment">// selection attributes and draw them strip by strip.</span>
04158         <span class="keywordflow">do</span>  {
04159             <span class="comment">//</span>
04160             <span class="comment">// If ichStart is pointing at CRLF or CRCRLF, then iRemainingLength</span>
04161             <span class="comment">// could have become negative because MLLine does not include</span>
04162             <span class="comment">// CR and LF at the end of a line.</span>
04163             <span class="comment">//</span>
04164             <span class="keywordflow">if</span> (iRemainingLengthInLine &lt; 0)  <span class="comment">// If Current line is completed,</span>
04165                 <span class="keywordflow">break</span>;                   <span class="comment">// go on to the next line.</span>
04166 
04167             <span class="comment">//</span>
04168             <span class="comment">// Check if a part of the block is selected and if we need to</span>
04169             <span class="comment">// show it with a different attribute.</span>
04170             <span class="comment">//</span>
04171             <span class="keywordflow">if</span> (!(ped-&gt;ichMinSel == ped-&gt;ichMaxSel ||
04172                         ichAttrib &gt;= ped-&gt;ichMaxSel ||
04173                         ichEnd   &lt;  ped-&gt;ichMinSel ||
04174                         (!ped-&gt;fNoHideSel &amp;&amp; !ped-&gt;fFocus))) {
04175                 <span class="comment">//</span>
04176                 <span class="comment">// OK! There is a selection somewhere in this block!</span>
04177                 <span class="comment">// Check if this strip has selection attribute.</span>
04178                 <span class="comment">//</span>
04179                 <span class="keywordflow">if</span> (ichAttrib &lt; ped-&gt;ichMinSel) {
04180                     fSelected = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;  <span class="comment">// This strip is not selected</span>
04181 
04182                     <span class="comment">// Calculate the length of this strip with normal attribute.</span>
04183                     CurStripLength = <a class="code" href="../../d5/d4/acpitabl_8h.html#a69">min</a>(ichStart+LengthToDraw, ped-&gt;ichMinSel)-ichStart;
04184                     fLineBegins = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
04185                 } <span class="keywordflow">else</span> {
04186                     <span class="comment">// The current strip has the selection attribute.</span>
04187                     <span class="keywordflow">if</span> (fLineBegins) {  <span class="comment">// Is it the first part of a line?</span>
04188                         <span class="comment">// Then, draw the left margin area with normal attribute.</span>
04189                         fSelected = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
04190                         CurStripLength = 0;
04191                         xClipStPos = ped-&gt;rcFmt.left - ped-&gt;wLeftMargin;
04192                         fLineBegins = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
04193                     } <span class="keywordflow">else</span> {
04194                         <span class="comment">// Else, draw the strip with selection attribute.</span>
04195                         fSelected = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
04196                         CurStripLength = <a class="code" href="../../d5/d4/acpitabl_8h.html#a69">min</a>(ichStart+LengthToDraw, ped-&gt;ichMaxSel)-ichStart;
04197 
04198                         <span class="comment">// Select in the highlight colors.</span>
04199                         bkColorSave = SetBkColor(hdc, <a class="code" href="../../d3/d9/client_2wow_8c.html#a15">GetSysColor</a>(COLOR_HIGHLIGHT));
04200                         <span class="keywordflow">if</span> (!ped-&gt;fDisabled)
04201                             textColorSave = SetTextColor(hdc, <a class="code" href="../../d3/d9/client_2wow_8c.html#a15">GetSysColor</a>(COLOR_HIGHLIGHTTEXT));
04202                     }
04203                 }
04204             } <span class="keywordflow">else</span> {
04205                 <span class="comment">// The whole strip has no selection attributes.</span>
04206                 CurStripLength = LengthToDraw;
04207             }
04208 
04209             <span class="comment">//</span>
04210             <span class="comment">// Other than the current strip, do we still have anything</span>
04211             <span class="comment">// left to be drawn in the current line?</span>
04212             <span class="comment">//</span>
04213             fDrawOnSameLine = (LengthToDraw != CurStripLength);
04214 
04215             <span class="comment">//</span>
04216             <span class="comment">// When we draw this strip, we need to draw some more characters</span>
04217             <span class="comment">// beyond the end of this strip to account for the negative A</span>
04218             <span class="comment">// widths of the characters that follow this strip.</span>
04219             <span class="comment">//</span>
04220             ExtraLengthForNegA = <a class="code" href="../../d5/d4/acpitabl_8h.html#a69">min</a>(iRemainingLengthInLine-CurStripLength, ped-&gt;wMaxNegAcharPos);
04221 
04222             <span class="comment">//</span>
04223             <span class="comment">// The blank strip at the end of the line needs to be drawn with</span>
04224             <span class="comment">// normal attribute irrespective of whether the line has selection</span>
04225             <span class="comment">// attribute or not. Hence, if the last strip of the line has selection</span>
04226             <span class="comment">// attribute, then this blank strip needs to be drawn separately.</span>
04227             <span class="comment">// Else, we can draw the blank strip along with the last strip.</span>
04228             <span class="comment">//</span>
04229 
04230             <span class="comment">// Is this the last strip of the current line?</span>
04231             <span class="keywordflow">if</span> (iRemainingLengthInLine == (<span class="keywordtype">int</span>)CurStripLength) {
04232                 <span class="keywordflow">if</span> (fSelected) { <span class="comment">// Does this strip have selection attribute?</span>
04233                     <span class="comment">// Then we need to draw the end of line strip separately.</span>
04234                     fDrawEndOfLineStrip = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;  <span class="comment">// Draw the end of line strip.</span>
04235                     <a class="code" href="../../d6/d0/usercli_8h.html#a494">MLIchToXYPos</a>(ped, hdc, ichStart+CurStripLength, TRUE, &amp;pt);
04236                     xClipEndPos = pt.x;
04237                 } <span class="keywordflow">else</span> {
04238                     <span class="comment">//</span>
04239                     <span class="comment">// Set the xClipEndPos to a big value sothat the blank</span>
04240                     <span class="comment">// strip will be drawn automatically when the last strip</span>
04241                     <span class="comment">// is drawn.</span>
04242                     <span class="comment">//</span>
04243                     xClipEndPos = <a class="code" href="../../d6/d0/usercli_8h.html#a73">MAXCLIPENDPOS</a>;
04244                 }
04245             } <span class="keywordflow">else</span> {
04246                 <span class="comment">//</span>
04247                 <span class="comment">// This is not the last strip of this line; So, set the ending</span>
04248                 <span class="comment">// clip position accurately.</span>
04249                 <span class="comment">//</span>
04250                 <a class="code" href="../../d6/d0/usercli_8h.html#a494">MLIchToXYPos</a>(ped, hdc, ichStart+CurStripLength, FALSE, &amp;pt);
04251                 xClipEndPos = pt.x;
04252             }
04253 
04254             <span class="comment">//</span>
04255             <span class="comment">// Draw the current strip starting from xStPos, clipped to the area</span>
04256             <span class="comment">// between xClipStPos and xClipEndPos. Obtain "NegCInfo" and use it</span>
04257             <span class="comment">// in drawing the next strip.</span>
04258             <span class="comment">//</span>
04259             <a class="code" href="../../d6/d0/usercli_8h.html#a478">ECTabTheTextOut</a>(hdc, xClipStPos, xClipEndPos,
04260                     xStPos, yPos, (LPSTR)(pText+ichStart*ped-&gt;cbChar),
04261                 CurStripLength+ExtraLengthForNegA, ichStart, ped,
04262                 ped-&gt;rcFmt.left+xOffset, fSelected ? ECT_SELECTED : ECT_NORMAL, &amp;NegCInfo);
04263 
04264             <span class="keywordflow">if</span> (fSelected) {
04265                 <span class="comment">//</span>
04266                 <span class="comment">// If this strip was selected, then the next strip won't have</span>
04267                 <span class="comment">// selection attribute</span>
04268                 <span class="comment">//</span>
04269                 fSelected = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
04270                 SetBkColor(hdc, bkColorSave);
04271                 <span class="keywordflow">if</span> (!ped-&gt;fDisabled)
04272                     SetTextColor(hdc, textColorSave);
04273             }
04274 
04275             <span class="comment">// Do we have one more strip to draw on the current line?</span>
04276             <span class="keywordflow">if</span> (fDrawOnSameLine || fDrawEndOfLineStrip) {
04277                 <span class="keywordtype">int</span>  iLastDrawnLength;
04278 
04279                 <span class="comment">//</span>
04280                 <span class="comment">// Next strip's attribute is decided based on the char at ichAttrib</span>
04281                 <span class="comment">//</span>
04282                 ichAttrib = ichStart + CurStripLength;
04283 
04284                 <span class="comment">//</span>
04285                 <span class="comment">// When drawing the next strip, start at a few chars before</span>
04286                 <span class="comment">// the actual start to account for the Neg 'C' of the strip</span>
04287                 <span class="comment">// just drawn.</span>
04288                 <span class="comment">//</span>
04289                 iLastDrawnLength = CurStripLength +ExtraLengthForNegA - NegCInfo.<a class="code" href="../../d6/d7/structSTRIPINFO.html#o2">nCount</a>;
04290                 <span class="comment">//</span>
04291                 <span class="comment">// Adjust DBCS alignment...</span>
04292                 <span class="comment">//</span>
04293                 <span class="keywordflow">if</span> (ped-&gt;fAnsi &amp;&amp; ped-&gt;fDBCS) {
04294                     ichNewStart = <a class="code" href="../../d6/d0/usercli_8h.html#a461">ECAdjustIch</a>(ped,pText,ichStart+iLastDrawnLength);
04295                     iLastDrawnLength = ichNewStart - ichStart;
04296                     ichStart = ichNewStart;
04297                 } <span class="keywordflow">else</span> {
04298                     ichStart += iLastDrawnLength;
04299                 }
04300                 LengthToDraw -= iLastDrawnLength;
04301                 iRemainingLengthInLine -= iLastDrawnLength;
04302 
04303                 <span class="comment">//</span>
04304                 <span class="comment">// The start of clip rect for the next strip.</span>
04305                 <span class="comment">//</span>
04306                 xStPos = NegCInfo.<a class="code" href="../../d6/d7/structSTRIPINFO.html#o3">XStartPos</a>;
04307                 xClipStPos = xClipEndPos;
04308             }
04309 
04310             <span class="comment">// Draw the blank strip at the end of line seperately, if required.</span>
04311             <span class="keywordflow">if</span> (fDrawEndOfLineStrip) {
04312                 <a class="code" href="../../d6/d0/usercli_8h.html#a478">ECTabTheTextOut</a>(hdc, xClipStPos, MAXCLIPENDPOS, xStPos, yPos,
04313                     (LPSTR)(pText+ichStart*ped-&gt;cbChar), LengthToDraw, ichStart,
04314                     ped, ped-&gt;rcFmt.left+xOffset, ECT_NORMAL, &amp;NegCInfo);
04315 
04316                 fDrawEndOfLineStrip = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
04317             }
04318         }
04319         <span class="keywordflow">while</span>(fDrawOnSameLine);   <span class="comment">// do while loop ends here.</span>
04320         }
04321 
04322         <span class="comment">// Let us move on to the next line of this block to be drawn.</span>
04323         wCurLine++;
04324         <span class="keywordflow">if</span> (ped-&gt;cLines &gt; wCurLine)
04325             ichStart = ped-&gt;chLines[wCurLine];
04326         <span class="keywordflow">else</span>
04327             ichStart = ichEnd+1;   <span class="comment">// We have reached the end of the text.</span>
04328     }  <span class="comment">// while loop ends here</span>
04329 
04330     <a class="code" href="../../d6/d0/usercli_8h.html#a434">ECUnlock</a>(ped);
04331 
04332     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a234">NtUserShowCaret</a>(ped-&gt;hwnd);
04333     <a class="code" href="../../d6/d0/usercli_8h.html#a493">MLSetCaretPosition</a>(ped, hdc);
04334 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a502" doxytag="usercli.h::MLEditWndProc" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LRESULT MLEditWndProc           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WPARAM&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d4/editml_8c-source.html#l03457">3457</a> of file <a class="el" href="../../d2/d4/editml_8c-source.html">editml.c</a>.
<p>
References <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00860">_IsWindowVisible()</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l02354">abs</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00677">tagED::aveCharWidth</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00557">tagED::cch</a>, <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00574">DefWindowProcWorker()</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l01977">ECEmptyUndo()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01051">ECGetCaretWidth</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02492">ECGetEditDC()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00402">ECInOutReconversionMode()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00052">ECLock()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02524">ECReleaseEditDC()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l00597">ECSize()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00086">ECUnlock()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l04185">ECUpdateFormat()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l03301">tagLPKEDITCALLOUT::EditCreateCaret</a>, <a class="el" href="../../d9/d4/reader_8c-source.html#l00415">EnterReaderModeHelper()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00642">tagED::f40Compat</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00640">tagED::fAnsi</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00604">tagED::fDisabled</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00602">tagED::fFocus</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01580">FillWindow</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00628">tagED::fInDialogBox</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00601">tagED::fMouseDown</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00632">tagED::fReadOnly</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00046">gcWheelDelta</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00051">gpsi</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00552">tagED::hText</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00584">tagED::hwnd</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00587">tagED::hwndParent</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00626">ICH</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00574">tagED::ichLinesOnScreen</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00570">tagED::ichScreenStart</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00310">IDSYS_SCROLL</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00025">INT</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00678">tagED::lineHeight</a>, <a class="el" href="../../d9/d5/sertl_8c-source.html#l00332">max</a>, <a class="el" href="../../d6/d3/acpitabl_8h-source.html#l00366">min</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l01562">MLBuildchLines()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l02531">MLChar()</a>, <a class="el" href="../../d5/d4/edmlonce_8c-source.html#l00023">MLCreate()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l03379">MLEnsureCaretVisible()</a>, <a class="el" href="../../d6/d4/edmlrare_8c-source.html#l00266">MLGetLine()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l00443">MLIchToLine()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l00553">MLIchToXYPos()</a>, <a class="el" href="../../d6/d4/edmlrare_8c-source.html#l00027">MLInsertCrCrLf()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l02028">MLKeyDown()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l03329">MLKillFocus()</a>, <a class="el" href="../../d6/d4/edmlrare_8c-source.html#l00306">MLLineIndex()</a>, <a class="el" href="../../d6/d4/edmlrare_8c-source.html#l00334">MLLineLength()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l02792">MLMouseMotion()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l00689">MLMouseToIch()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l01965">MLPaint()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l02720">MLPasteText()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l01309">MLReplaceSel()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l02966">MLScroll()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l00292">MLSetCaretPosition()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l03274">MLSetFocus()</a>, <a class="el" href="../../d6/d4/edmlrare_8c-source.html#l00222">MLSetHandle()</a>, <a class="el" href="../../d6/d4/edmlrare_8c-source.html#l00368">MLSetSelection()</a>, <a class="el" href="../../d6/d4/edmlrare_8c-source.html#l00458">MLSetTabStops()</a>, <a class="el" href="../../d6/d4/edmlrare_8c-source.html#l00159">MLStripCrCrLf()</a>, <a class="el" href="../../d6/d4/edmlrare_8c-source.html#l00556">MLUndo()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06520">NtUserBeginPaint()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01560">NtUserDestroyCaret</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06575">NtUserEndPaint()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05279">NtUserHideCaret()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01563">NtUserKillSystemTimer</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06219">NtUserShowCaret()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00702">tagED::pLpkEditCallout</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00596">tagED::prevKeys</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00593">tagED::ptPrevMouse</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00540">Pundo</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00585">tagED::pwnd</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00586">tagED::rcFmt</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01585">RedrawWindow</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00652">SendMessage()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l00021">SYS_ALTERNATE</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, and <a class="el" href="../../d2/d0/bench_8c-source.html#l01433">WM_SYSTIMER</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/editec_8c-source.html#l00692">ECClearText()</a>, and <a class="el" href="../../d9/d3/editec_8c-source.html#l02904">EditWndProc()</a>.
<p>
<pre class="fragment"><div>03463 {
03464     HDC         hdc;
03465     PAINTSTRUCT ps;
03466     LPRECT      lprc;
03467     POINT       pt;
03468     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>       windowstyle;
03469 
03470     <span class="keywordflow">switch</span> (message) {
03471 
03472     <span class="keywordflow">case</span> WM_INPUTLANGCHANGE:
03473         <span class="keywordflow">if</span> (ped &amp;&amp; ped-&gt;fFocus &amp;&amp; ped-&gt;pLpkEditCallout) {
03474             <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a204">NtUserHideCaret</a>(hwnd);
03475             hdc = <a class="code" href="../../d6/d0/usercli_8h.html#a451">ECGetEditDC</a>(ped, TRUE);
03476             <a class="code" href="../../d6/d0/usercli_8h.html#a215">NtUserDestroyCaret</a>();
03477             ped-&gt;pLpkEditCallout-&gt;EditCreateCaret (ped, hdc, <a class="code" href="../../d6/d0/usercli_8h.html#a149">ECGetCaretWidth</a>(), ped-&gt;lineHeight, (UINT)lParam);
03478             <a class="code" href="../../d6/d0/usercli_8h.html#a493">MLSetCaretPosition</a>(ped, hdc);
03479             <a class="code" href="../../d6/d0/usercli_8h.html#a452">ECReleaseEditDC</a>(ped, hdc, TRUE);
03480             <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a234">NtUserShowCaret</a>(hwnd);
03481         }
03482         <span class="keywordflow">goto</span> PassToDefaultWindowProc;
03483 
03484 
03485     <span class="keywordflow">case</span> WM_STYLECHANGED:
03486         <span class="keywordflow">if</span> (ped &amp;&amp; ped-&gt;pLpkEditCallout) {
03487             <span class="keywordflow">switch</span> (wParam) {
03488 
03489                 <span class="keywordflow">case</span> GWL_STYLE:
03490                     <a class="code" href="../../d6/d0/usercli_8h.html#a426">ECUpdateFormat</a>(ped,
03491                         ((LPSTYLESTRUCT)lParam)-&gt;styleNew,
03492                         GetWindowLong(ped-&gt;hwnd, GWL_EXSTYLE));
03493                     <span class="keywordflow">return</span> 1<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>;
03494 
03495                 <span class="keywordflow">case</span> GWL_EXSTYLE:
03496                     <a class="code" href="../../d6/d0/usercli_8h.html#a426">ECUpdateFormat</a>(ped,
03497                         GetWindowLong(ped-&gt;hwnd, GWL_STYLE),
03498                         ((LPSTYLESTRUCT)lParam)-&gt;styleNew);
03499                     <span class="keywordflow">return</span> 1<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>;
03500             }
03501         }
03502 
03503         <span class="keywordflow">goto</span> PassToDefaultWindowProc;
03504 
03505     <span class="keywordflow">case</span> WM_CHAR:
03506 
03507         <span class="comment">/*</span>
03508 <span class="comment">         * wParam - the value of the key</span>
03509 <span class="comment">         * lParam - modifiers, repeat count etc (not used)</span>
03510 <span class="comment">         */</span>
03511         <a class="code" href="../../d6/d0/usercli_8h.html#a503">MLChar</a>(ped, (UINT)wParam, 0);
03512         <span class="keywordflow">break</span>;
03513 
03514     <span class="keywordflow">case</span> WM_ERASEBKGND:  {
03515             HBRUSH  hbr;
03516 
03517             <span class="comment">// USE SAME RULES AS IN ECGetBrush()</span>
03518             <span class="keywordflow">if</span> (ped-&gt;f40Compat &amp;&amp;
03519                 (ped-&gt;fReadOnly || ped-&gt;fDisabled))
03520                 hbr = (HBRUSH) CTLCOLOR_STATIC;
03521             <span class="keywordflow">else</span>
03522                 hbr = (HBRUSH) CTLCOLOR_EDIT;
03523 
03524             <a class="code" href="../../d6/d0/usercli_8h.html#a234">FillWindow</a>(ped-&gt;hwndParent, hwnd, (HDC)wParam, hbr);
03525         }
03526         <span class="keywordflow">return</span> ((LONG)<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
03527 
03528     <span class="keywordflow">case</span> WM_GETDLGCODE: {
03529             LONG code = DLGC_WANTCHARS | DLGC_HASSETSEL | DLGC_WANTARROWS | DLGC_WANTALLKEYS;
03530 
03531             <span class="comment">/*</span>
03532 <span class="comment">             ** !!! JEFFBOG HACK !!!</span>
03533 <span class="comment">             ** Only set Dialog Box Flag if GETDLGCODE message is generated by</span>
03534 <span class="comment">             ** IsDialogMessage -- if so, the lParam will be a pointer to the</span>
03535 <span class="comment">             ** message structure passed to IsDialogMessage; otherwise, lParam</span>
03536 <span class="comment">             ** will be NULL. Reason for the HACK alert: the wParam &amp; lParam</span>
03537 <span class="comment">             ** for GETDLGCODE is still not clearly defined and may end up</span>
03538 <span class="comment">             ** changing in a way that would throw this off</span>
03539 <span class="comment">             **</span>
03540 <span class="comment">             */</span>
03541             <span class="keywordflow">if</span> (lParam)
03542                ped-&gt;fInDialogBox = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>; <span class="comment">// Mark ML edit ctrl as in a dialog box</span>
03543 
03544             <span class="comment">/*</span>
03545 <span class="comment">             ** If this is a WM_SYSCHAR message generated by the UNDO keystroke</span>
03546 <span class="comment">             ** we want this message so we can EAT IT in "case WM_SYSCHAR:"</span>
03547 <span class="comment">             */</span>
03548             <span class="keywordflow">if</span> (lParam &amp;&amp; (((LPMSG)lParam)-&gt;message == WM_SYSCHAR) &amp;&amp;
03549                     ((<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)((LPMSG)lParam)-&gt;lParam &amp; <a class="code" href="../../d3/d5/editsl_8c.html#a0">SYS_ALTERNATE</a>) &amp;&amp;
03550                     ((WORD)wParam == VK_BACK))
03551                  code |= DLGC_WANTMESSAGE;
03552             <span class="keywordflow">return</span> code;
03553         }
03554 
03555     <span class="keywordflow">case</span> EM_SCROLL:
03556         message = WM_VSCROLL;
03557 
03558         <span class="comment">/*</span>
03559 <span class="comment">         * FALL THROUGH</span>
03560 <span class="comment">         */</span>
03561     <span class="keywordflow">case</span> WM_HSCROLL:
03562     <span class="keywordflow">case</span> WM_VSCROLL:
03563         <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a517">MLScroll</a>(ped, (message==WM_VSCROLL), LOWORD(wParam), HIWORD(wParam), TRUE);
03564 
03565     <span class="keywordflow">case</span> WM_MOUSEWHEEL:
03566         <span class="comment">/*</span>
03567 <span class="comment">         * Don't handle zoom and datazoom.</span>
03568 <span class="comment">         */</span>
03569         <span class="keywordflow">if</span> (wParam &amp; (MK_SHIFT | MK_CONTROL)) {
03570             <span class="keywordflow">goto</span> PassToDefaultWindowProc;
03571         }
03572 
03573         <a class="code" href="../../d1/d8/clglobal_8c.html#a1">gcWheelDelta</a> -= (<span class="keywordtype">short</span>) HIWORD(wParam);
03574         windowstyle = ped-&gt;pwnd-&gt;style;
03575         <span class="keywordflow">if</span> (    <a class="code" href="../../d4/d1/userk_8h.html#a259">abs</a>(gcWheelDelta) &gt;= WHEEL_DELTA &amp;&amp;
03576                 <a class="code" href="../../d1/d8/clglobal_8c.html#a4">gpsi</a>-&gt;ucWheelScrollLines &gt; 0 &amp;&amp;
03577                 (windowstyle &amp; (WS_VSCROLL | WS_HSCROLL))) {
03578 
03579             <span class="keywordtype">int</span>     cLineScroll;
03580             <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>    fVert;
03581             <span class="keywordtype">int</span>     cPage;
03582 
03583             <span class="keywordflow">if</span> (windowstyle &amp; WS_VSCROLL) {
03584                 fVert = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
03585                 cPage = ped-&gt;ichLinesOnScreen;
03586             } <span class="keywordflow">else</span> {
03587                 fVert = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
03588                 cPage = (ped-&gt;rcFmt.right - ped-&gt;rcFmt.left) / ped-&gt;aveCharWidth;
03589             }
03590 
03591             <span class="comment">/*</span>
03592 <span class="comment">             * Limit a roll of one (1) WHEEL_DELTA to scroll one (1) page.</span>
03593 <span class="comment">             */</span>
03594             cLineScroll = (<span class="keywordtype">int</span>) <a class="code" href="../../d5/d4/acpitabl_8h.html#a69">min</a>(
03595                     (UINT) (<a class="code" href="../../d8/d6/sertl_8c.html#a1">max</a>(1, (cPage - 1))),
03596                     <a class="code" href="../../d1/d8/clglobal_8c.html#a4">gpsi</a>-&gt;ucWheelScrollLines);
03597 
03598             cLineScroll *= (<a class="code" href="../../d1/d8/clglobal_8c.html#a1">gcWheelDelta</a> / WHEEL_DELTA);
03599             UserAssert(cLineScroll != 0);
03600             <a class="code" href="../../d1/d8/clglobal_8c.html#a1">gcWheelDelta</a> = <a class="code" href="../../d1/d8/clglobal_8c.html#a1">gcWheelDelta</a> % WHEEL_DELTA;
03601             <a class="code" href="../../d6/d0/usercli_8h.html#a517">MLScroll</a>(ped, fVert, EM_LINESCROLL, cLineScroll, TRUE);
03602         }
03603 
03604         <span class="keywordflow">break</span>;
03605 
03606     <span class="keywordflow">case</span> WM_KEYDOWN:
03607 
03608         <span class="comment">/*</span>
03609 <span class="comment">         * wParam - virt keycode of the given key</span>
03610 <span class="comment">         * lParam - modifiers such as repeat count etc. (not used)</span>
03611 <span class="comment">         */</span>
03612         <a class="code" href="../../d6/d0/usercli_8h.html#a504">MLKeyDown</a>(ped, (UINT)wParam, 0);
03613         <span class="keywordflow">break</span>;
03614 
03615     <span class="keywordflow">case</span> WM_KILLFOCUS:
03616 
03617         <span class="comment">/*</span>
03618 <span class="comment">         * wParam - handle of the window that receives the input focus</span>
03619 <span class="comment">         * lParam - not used</span>
03620 <span class="comment">         */</span>
03621         <a class="code" href="../../d1/d5/editml_8c.html#a29">MLKillFocus</a>(ped);
03622         <span class="keywordflow">break</span>;
03623 
03624     <span class="keywordflow">case</span> WM_CAPTURECHANGED:
03625         <span class="comment">//</span>
03626         <span class="comment">// wParam -- unused</span>
03627         <span class="comment">// lParam -- hwnd of window gaining capture.</span>
03628         <span class="comment">//</span>
03629         <span class="keywordflow">if</span> (ped-&gt;fMouseDown) {
03630             <span class="comment">//</span>
03631             <span class="comment">// We don't change the caret pos here.  If this is happening</span>
03632             <span class="comment">// due to button up, then we'll change the pos in the</span>
03633             <span class="comment">// handler after ReleaseCapture().  Otherwise, just end</span>
03634             <span class="comment">// gracefully because someone else has stolen capture out</span>
03635             <span class="comment">// from under us.</span>
03636             <span class="comment">//</span>
03637 
03638             ped-&gt;fMouseDown = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
03639             <a class="code" href="../../d6/d0/usercli_8h.html#a218">NtUserKillSystemTimer</a>(ped-&gt;hwnd, IDSYS_SCROLL);
03640         }
03641         <span class="keywordflow">break</span>;
03642 
03643     <span class="keywordflow">case</span> <a class="code" href="../../d1/d1/bench_8c.html#a4">WM_SYSTIMER</a>:
03644 
03645         <span class="comment">/*</span>
03646 <span class="comment">         * This allows us to automatically scroll if the user holds the mouse</span>
03647 <span class="comment">         * outside the edit control window. We simulate mouse moves at timer</span>
03648 <span class="comment">         * intervals set in MouseMotionHandler.</span>
03649 <span class="comment">         */</span>
03650         <span class="keywordflow">if</span> (ped-&gt;fMouseDown)
03651             <a class="code" href="../../d6/d0/usercli_8h.html#a497">MLMouseMotion</a>(ped, WM_MOUSEMOVE, ped-&gt;prevKeys, &amp;ped-&gt;ptPrevMouse);
03652         <span class="keywordflow">break</span>;
03653 
03654     <span class="keywordflow">case</span> WM_MBUTTONDOWN:
03655         <a class="code" href="../../d6/d0/usercli_8h.html#a782">EnterReaderModeHelper</a>(ped-&gt;hwnd);
03656         <span class="keywordflow">break</span>;
03657 
03658     <span class="keywordflow">case</span> WM_MOUSEMOVE:
03659         UserAssert(ped-&gt;fMouseDown);
03660 
03661         <span class="comment">/*</span>
03662 <span class="comment">         * FALL THROUGH</span>
03663 <span class="comment">         */</span>
03664     <span class="keywordflow">case</span> WM_LBUTTONDBLCLK:
03665     <span class="keywordflow">case</span> WM_LBUTTONDOWN:
03666     <span class="keywordflow">case</span> WM_LBUTTONUP:
03667         <span class="comment">/*</span>
03668 <span class="comment">         * wParam - contains a value that indicates which virtual keys are down</span>
03669 <span class="comment">           lParam - contains x and y coords of the mouse cursor</span>
03670 <span class="comment">         */</span>
03671         POINTSTOPOINT(pt, lParam);
03672         <a class="code" href="../../d6/d0/usercli_8h.html#a497">MLMouseMotion</a>(ped, message, (UINT)wParam, &amp;pt);
03673         <span class="keywordflow">break</span>;
03674 
03675     <span class="keywordflow">case</span> WM_CREATE:
03676 
03677         <span class="comment">/*</span>
03678 <span class="comment">         * wParam - handle to window being created</span>
03679 <span class="comment">         * lParam - points to a CREATESTRUCT that contains copies of parameters</span>
03680 <span class="comment">         * passed to the CreateWindow function.</span>
03681 <span class="comment">         */</span>
03682         <span class="keywordflow">return</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a507">MLCreate</a>(ped, (LPCREATESTRUCT)lParam));
03683 
03684     <span class="keywordflow">case</span> WM_PRINTCLIENT:
03685         <a class="code" href="../../d1/d5/editml_8c.html#a22">MLPaint</a>(ped, (HDC) wParam, NULL);
03686         <span class="keywordflow">break</span>;
03687 
03688     <span class="keywordflow">case</span> WM_PAINT:
03689         <span class="comment">/*</span>
03690 <span class="comment">         * wParam - can be hdc from subclassed paint</span>
03691 <span class="comment">           lParam - not used</span>
03692 <span class="comment">         */</span>
03693         <span class="keywordflow">if</span> (wParam) {
03694             hdc = (HDC) wParam;
03695             lprc = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
03696         } <span class="keywordflow">else</span> {
03697             hdc = <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a246">NtUserBeginPaint</a>(ped-&gt;hwnd, &amp;ps);
03698             lprc = &amp;ps.rcPaint;
03699         }
03700 
03701         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d9/rtl_2wow_8c.html#a17">_IsWindowVisible</a>(ped-&gt;pwnd))
03702             <a class="code" href="../../d1/d5/editml_8c.html#a22">MLPaint</a>(ped, hdc, lprc);
03703 
03704         <span class="keywordflow">if</span> (!wParam)
03705             <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a248">NtUserEndPaint</a>(ped-&gt;hwnd, &amp;ps);
03706         <span class="keywordflow">break</span>;
03707 
03708     <span class="keywordflow">case</span> WM_PASTE:
03709 
03710         <span class="comment">/*</span>
03711 <span class="comment">         * wParam - not used</span>
03712 <span class="comment">           lParam - not used</span>
03713 <span class="comment">         */</span>
03714         <span class="keywordflow">if</span> (!ped-&gt;fReadOnly)
03715             <a class="code" href="../../d6/d0/usercli_8h.html#a505">MLPasteText</a>(ped);
03716         <span class="keywordflow">break</span>;
03717 
03718     <span class="keywordflow">case</span> WM_SETFOCUS:
03719 
03720         <span class="comment">/*</span>
03721 <span class="comment">         * wParam - handle of window that loses the input focus (may be NULL)</span>
03722 <span class="comment">           lParam - not used</span>
03723 <span class="comment">         */</span>
03724         <a class="code" href="../../d1/d5/editml_8c.html#a28">MLSetFocus</a>(ped);
03725         <span class="keywordflow">break</span>;
03726 
03727     <span class="keywordflow">case</span> WM_SIZE:
03728 
03729         <span class="comment">/*</span>
03730 <span class="comment">         * wParam - defines the type of resizing fullscreen, sizeiconic,</span>
03731 <span class="comment">                    sizenormal etc.</span>
03732 <span class="comment">           lParam - new width in LOWORD, new height in HIGHWORD of client area</span>
03733 <span class="comment">         */</span>
03734         <a class="code" href="../../d6/d0/usercli_8h.html#a482">ECSize</a>(ped, NULL, TRUE);
03735         <span class="keywordflow">break</span>;
03736 
03737     <span class="keywordflow">case</span> EM_FMTLINES:
03738 
03739         <span class="comment">/*</span>
03740 <span class="comment">         * wParam - indicates disposition of end-of-line chars. If non</span>
03741 <span class="comment">         * zero, the chars CR CR LF are placed at the end of a word</span>
03742 <span class="comment">         * wrapped line. If wParam is zero, the end of line chars are</span>
03743 <span class="comment">         * removed. This is only done when the user gets a handle (via</span>
03744 <span class="comment">         * EM_GETHANDLE) to the text. lParam - not used.</span>
03745 <span class="comment">         */</span>
03746         <span class="keywordflow">if</span> (wParam)
03747             <a class="code" href="../../d6/d0/usercli_8h.html#a508">MLInsertCrCrLf</a>(ped);
03748         <span class="keywordflow">else</span>
03749             <a class="code" href="../../d6/d0/usercli_8h.html#a499">MLStripCrCrLf</a>(ped);
03750         <a class="code" href="../../d6/d0/usercli_8h.html#a490">MLBuildchLines</a>(ped, 0, 0, FALSE, NULL, NULL);
03751         <span class="keywordflow">return</span> (LONG)(wParam != 0);
03752 
03753     <span class="keywordflow">case</span> EM_GETHANDLE:
03754 
03755         <span class="comment">/*</span>
03756 <span class="comment">         * wParam - not used</span>
03757 <span class="comment">            lParam - not used</span>
03758 <span class="comment">         */</span>
03759 
03760         <span class="comment">/*</span>
03761 <span class="comment">         * Returns a handle to the edit control's text.</span>
03762 <span class="comment">         */</span>
03763 
03764         <span class="comment">/*</span>
03765 <span class="comment">         * Null terminate the string. Note that we are guaranteed to have the</span>
03766 <span class="comment">         * memory for the NULL since ECInsertText allocates an extra</span>
03767 <span class="comment">         * WCHAR for the NULL terminator.</span>
03768 <span class="comment">         */</span>
03769 
03770         <span class="keywordflow">if</span> (ped-&gt;fAnsi)
03771             *(<a class="code" href="../../d6/d0/usercli_8h.html#a433">ECLock</a>(ped) + ped-&gt;cch) = 0;
03772         <span class="keywordflow">else</span>
03773             *((LPWSTR)<a class="code" href="../../d6/d0/usercli_8h.html#a433">ECLock</a>(ped) + ped-&gt;cch) = 0;
03774         <a class="code" href="../../d6/d0/usercli_8h.html#a434">ECUnlock</a>(ped);
03775         <span class="keywordflow">return</span> ((LRESULT)ped-&gt;hText);
03776 
03777     <span class="keywordflow">case</span> EM_GETLINE:
03778 
03779         <span class="comment">/*</span>
03780 <span class="comment">         * wParam - line number to copy (0 is first line)</span>
03781 <span class="comment">         * lParam - buffer to copy text to. First WORD is max # of bytes to</span>
03782 <span class="comment">         * copy</span>
03783 <span class="comment">         */</span>
03784         <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a510">MLGetLine</a>(ped, (ICH)wParam, (ICH)*(WORD UNALIGNED *)lParam, (LPSTR)lParam);
03785 
03786     <span class="keywordflow">case</span> EM_LINEFROMCHAR:
03787 
03788         <span class="comment">/*</span>
03789 <span class="comment">         * wParam - Contains the index value for the desired char in the text</span>
03790 <span class="comment">         * of the edit control. These are 0 based.</span>
03791 <span class="comment">         * lParam - not used</span>
03792 <span class="comment">         */</span>
03793         <span class="keywordflow">return</span> (LRESULT)<a class="code" href="../../d6/d0/usercli_8h.html#a495">MLIchToLine</a>(ped, (ICH)wParam);
03794 
03795     <span class="keywordflow">case</span> EM_LINEINDEX:
03796 
03797         <span class="comment">/*</span>
03798 <span class="comment">         * wParam - specifies the desired line number where the number of the</span>
03799 <span class="comment">         * first line is 0. If linenumber = 0, the line with the caret is used.</span>
03800 <span class="comment">         * lParam - not used.</span>
03801 <span class="comment">         * This function return s the number of character positions that occur</span>
03802 <span class="comment">         * preceeding the first char in a given line.</span>
03803 <span class="comment">         */</span>
03804         <span class="keywordflow">return</span> (LRESULT)<a class="code" href="../../d6/d0/usercli_8h.html#a511">MLLineIndex</a>(ped, (ICH)wParam);
03805 
03806     <span class="keywordflow">case</span> EM_LINELENGTH:
03807 
03808         <span class="comment">/*</span>
03809 <span class="comment">         * wParam - specifies the character index of a character in the</span>
03810 <span class="comment">           specified line, where the first line is 0. If -1, the length</span>
03811 <span class="comment">           of the current line (with the caret) is return ed not including the</span>
03812 <span class="comment">           length of any selected text.</span>
03813 <span class="comment">           lParam - not used</span>
03814 <span class="comment">         */</span>
03815         <span class="keywordflow">return</span> (LRESULT)<a class="code" href="../../d6/d0/usercli_8h.html#a520">MLLineLength</a>(ped, (ICH)wParam);
03816 
03817     <span class="keywordflow">case</span> EM_LINESCROLL:
03818 
03819         <span class="comment">/*</span>
03820 <span class="comment">         * wParam - not used</span>
03821 <span class="comment">           lParam - Contains the number of lines and char positions to scroll</span>
03822 <span class="comment">         */</span>
03823         <a class="code" href="../../d6/d0/usercli_8h.html#a517">MLScroll</a>(ped, TRUE,  EM_LINESCROLL, (INT)lParam, TRUE);
03824         <a class="code" href="../../d6/d0/usercli_8h.html#a517">MLScroll</a>(ped, FALSE, EM_LINESCROLL, (INT)wParam, TRUE);
03825         <span class="keywordflow">break</span>;
03826 
03827     <span class="keywordflow">case</span> EM_REPLACESEL:
03828 
03829         <span class="comment">/*</span>
03830 <span class="comment">         * wParam - flag for 4.0+ apps saying whether to clear undo</span>
03831 <span class="comment">           lParam - Points to a null terminated replacement text.</span>
03832 <span class="comment">         */</span>
03833         <a class="code" href="../../d6/d0/usercli_8h.html#a521">MLReplaceSel</a>(ped, (LPSTR)lParam);
03834         <span class="keywordflow">if</span> (!ped-&gt;f40Compat || !wParam)
03835             <a class="code" href="../../d6/d0/usercli_8h.html#a444">ECEmptyUndo</a>(<a class="code" href="../../d6/d0/usercli_8h.html#a85">Pundo</a>(ped));
03836         <span class="keywordflow">break</span>;
03837 
03838     <span class="keywordflow">case</span> EM_SETHANDLE:
03839 
03840         <span class="comment">/*</span>
03841 <span class="comment">         * wParam - contains a handle to the text buffer</span>
03842 <span class="comment">           lParam - not used</span>
03843 <span class="comment">         */</span>
03844         <a class="code" href="../../d6/d0/usercli_8h.html#a509">MLSetHandle</a>(ped, (HANDLE)wParam);
03845         <span class="keywordflow">break</span>;
03846 
03847     <span class="keywordflow">case</span> EM_SETRECT:
03848     <span class="keywordflow">case</span> EM_SETRECTNP:
03849 
03850         <span class="comment">//</span>
03851         <span class="comment">// wParamLo --    not used</span>
03852         <span class="comment">// lParam --    LPRECT with new formatting area</span>
03853         <span class="comment">//</span>
03854         <a class="code" href="../../d6/d0/usercli_8h.html#a482">ECSize</a>(ped, (LPRECT) lParam, (message != EM_SETRECTNP));
03855         <span class="keywordflow">break</span>;
03856 
03857     <span class="keywordflow">case</span> EM_SETSEL:
03858 
03859         <span class="comment">/*</span>
03860 <span class="comment">         * wParam - Under 3.1, specifies if we should scroll caret into</span>
03861 <span class="comment">         * view or not. 0 == scroll into view. 1 == don't scroll</span>
03862 <span class="comment">         * lParam - starting pos in lowword ending pos in high word</span>
03863 <span class="comment">         *</span>
03864 <span class="comment">         * Under Win32, wParam is the starting pos, lParam is the</span>
03865 <span class="comment">         * ending pos, and the caret is not scrolled into view.</span>
03866 <span class="comment">         * The message EM_SCROLLCARET forces the caret to be scrolled</span>
03867 <span class="comment">         * into view.</span>
03868 <span class="comment">         */</span>
03869         <a class="code" href="../../d6/d0/usercli_8h.html#a506">MLSetSelection</a>(ped, TRUE, (ICH)wParam, (ICH)lParam);
03870         <span class="keywordflow">break</span>;
03871 
03872     <span class="keywordflow">case</span> EM_SCROLLCARET:
03873 
03874         <span class="comment">/*</span>
03875 <span class="comment">         * Scroll caret into view</span>
03876 <span class="comment">         */</span>
03877         <a class="code" href="../../d6/d0/usercli_8h.html#a485">MLEnsureCaretVisible</a>(ped);
03878         <span class="keywordflow">break</span>;
03879 
03880     <span class="keywordflow">case</span> EM_GETFIRSTVISIBLELINE:
03881 
03882         <span class="comment">/*</span>
03883 <span class="comment">         * Returns the first visible line for multiline edit controls.</span>
03884 <span class="comment">         */</span>
03885         <span class="keywordflow">return</span> (LONG)ped-&gt;ichScreenStart;
03886 
03887     <span class="keywordflow">case</span> WM_SYSKEYDOWN:
03888         <span class="keywordflow">if</span> (((WORD)wParam == VK_BACK) &amp;&amp; ((<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)lParam &amp; <a class="code" href="../../d3/d5/editsl_8c.html#a0">SYS_ALTERNATE</a>)) {
03889             <a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(ped-&gt;hwnd, EM_UNDO, 0, 0L);
03890             <span class="keywordflow">break</span>;
03891         }
03892         <span class="keywordflow">goto</span> PassToDefaultWindowProc;
03893 
03894     <span class="keywordflow">case</span> WM_UNDO:
03895     <span class="keywordflow">case</span> EM_UNDO:
03896         <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a501">MLUndo</a>(ped);
03897 
03898     <span class="keywordflow">case</span> EM_SETTABSTOPS:
03899 
03900         <span class="comment">/*</span>
03901 <span class="comment">         * This sets the tab stop positions for multiline edit controls.</span>
03902 <span class="comment">         * wParam - Number of tab stops</span>
03903 <span class="comment">         * lParam - Far ptr to a UINT array containing the Tab stop positions</span>
03904 <span class="comment">         */</span>
03905         <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a516">MLSetTabStops</a>(ped, (<span class="keywordtype">int</span>)wParam, (LPINT)lParam);
03906 
03907     <span class="keywordflow">case</span> EM_POSFROMCHAR:
03908         <span class="comment">//</span>
03909         <span class="comment">// wParam --    char index in text</span>
03910         <span class="comment">// lParam --    not used</span>
03911         <span class="comment">// This function returns the (x,y) position of the character</span>
03912         <span class="comment">//</span>
03913     <span class="keywordflow">case</span> EM_CHARFROMPOS:
03914         <span class="comment">//</span>
03915         <span class="comment">// wParam --    unused</span>
03916         <span class="comment">// lParam --    pt in client coordinates</span>
03917         <span class="comment">// This function returns</span>
03918         <span class="comment">//      LOWORD: the position of the closest character</span>
03919         <span class="comment">//              to the passed in point.  Beware of</span>
03920         <span class="comment">//              points not actually in the edit client...</span>
03921         <span class="comment">//      HIWORD: the index of the line the char is on</span>
03922         <span class="comment">//</span>
03923         {
03924             LONG  xyPos;
03925             LONG  line;
03926 
03927             hdc = <a class="code" href="../../d6/d0/usercli_8h.html#a451">ECGetEditDC</a>(ped, TRUE);
03928 
03929             <span class="keywordflow">if</span> (message == EM_POSFROMCHAR) {
03930                 <a class="code" href="../../d6/d0/usercli_8h.html#a494">MLIchToXYPos</a>(ped, hdc, (ICH)wParam, FALSE, &amp;pt);
03931                 xyPos = MAKELONG(pt.x, pt.y);
03932             } <span class="keywordflow">else</span> {
03933                 POINTSTOPOINT(pt, lParam);
03934                 xyPos = <a class="code" href="../../d1/d5/editml_8c.html#a13">MLMouseToIch</a>(ped, hdc, &amp;pt, &amp;line);
03935                 xyPos = MAKELONG(xyPos, line);
03936             }
03937 
03938             <a class="code" href="../../d6/d0/usercli_8h.html#a452">ECReleaseEditDC</a>(ped, hdc, TRUE);
03939             <span class="keywordflow">return</span>((LRESULT)xyPos);
03940             <span class="keywordflow">break</span>;
03941         }
03942 
03943     <span class="keywordflow">case</span> WM_SETREDRAW:
03944         <a class="code" href="../../d6/d0/usercli_8h.html#a610">DefWindowProcWorker</a>(ped-&gt;pwnd, message, wParam, lParam, FALSE);
03945         <span class="keywordflow">if</span> (wParam) {
03946 
03947             <span class="comment">/*</span>
03948 <span class="comment">             * Backwards compatability hack needed so that winraid's edit</span>
03949 <span class="comment">             * controls work fine.</span>
03950 <span class="comment">             */</span>
03951             <a class="code" href="../../d6/d0/usercli_8h.html#a239">RedrawWindow</a>(hwnd, NULL, NULL, RDW_INVALIDATE | RDW_ERASE | RDW_FRAME);
03952         }
03953       <span class="keywordflow">break</span>;
03954 
03955 <span class="preprocessor">#if LATER</span>
03956 <span class="preprocessor"></span>    <span class="keywordflow">case</span> WM_IME_ENDCOMPOSITION:
03957         <a class="code" href="../../d6/d0/usercli_8h.html#a477">ECInOutReconversionMode</a>(ped, FALSE);
03958         <span class="keywordflow">break</span>;
03959 <span class="preprocessor">#endif</span>
03960 <span class="preprocessor"></span>
03961     <span class="keywordflow">default</span>:
03962 PassToDefaultWindowProc:
03963         <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a610">DefWindowProcWorker</a>(ped-&gt;pwnd, message, wParam, lParam, ped-&gt;fAnsi);
03964     }
03965 
03966     <span class="keywordflow">return</span> 1<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>;
03967 } <span class="comment">/* MLEditWndProc */</span>
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a485" doxytag="usercli.h::MLEnsureCaretVisible" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL MLEnsureCaretVisible           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d4/editml_8c-source.html#l03379">3379</a> of file <a class="el" href="../../d2/d4/editml_8c-source.html">editml.c</a>.
<p>
References <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00860">_IsWindowVisible()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00677">tagED::aveCharWidth</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00662">tagED::chLines</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00559">tagED::cLines</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02492">ECGetEditDC()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02524">ECReleaseEditDC()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00609">tagED::fAutoHScroll</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00608">tagED::fAutoVScroll</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00566">tagED::iCaretLine</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00564">tagED::ichCaret</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00574">tagED::ichLinesOnScreen</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00570">tagED::ichScreenStart</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00670">tagED::maxPixelWidth</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l00553">MLIchToXYPos()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l02966">MLScroll()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00585">tagED::pwnd</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00586">tagED::rcFmt</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>.
<p>
Referenced by <a class="el" href="../../d2/d4/editml_8c-source.html#l01367">MLDeleteText()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l03457">MLEditWndProc()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l01040">MLInsertText()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l02028">MLKeyDown()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l02792">MLMouseMotion()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l03274">MLSetFocus()</a>, <a class="el" href="../../d6/d4/edmlrare_8c-source.html#l00368">MLSetSelection()</a>, and <a class="el" href="../../d6/d4/edmlrare_8c-source.html#l00458">MLSetTabStops()</a>.
<p>
<pre class="fragment"><div>03381 {
03382     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>   iLineMax;
03383     <span class="keywordtype">int</span>    xposition;
03384     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>   fPrevLine;
03385     HDC    hdc;
03386     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>   fVScroll = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
03387     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>   fHScroll = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
03388 
03389     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d9/rtl_2wow_8c.html#a17">_IsWindowVisible</a>(ped-&gt;pwnd)) {
03390         <span class="keywordtype">int</span> iAmt;
03391         <span class="keywordtype">int</span> iFmtWidth = ped-&gt;rcFmt.right - ped-&gt;rcFmt.left;
03392 
03393         <span class="keywordflow">if</span> (ped-&gt;fAutoVScroll) {
03394             iLineMax = ped-&gt;ichScreenStart + ped-&gt;ichLinesOnScreen - 1;
03395 
03396             <span class="keywordflow">if</span> (fVScroll = (ped-&gt;iCaretLine &gt; iLineMax))
03397                 iAmt = iLineMax;
03398             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (fVScroll = (ped-&gt;iCaretLine &lt; ped-&gt;ichScreenStart))
03399                 iAmt = ped-&gt;ichScreenStart;
03400 
03401             <span class="keywordflow">if</span> (fVScroll)
03402                 <a class="code" href="../../d6/d0/usercli_8h.html#a517">MLScroll</a>(ped, TRUE, EM_LINESCROLL, ped-&gt;iCaretLine - iAmt, TRUE);
03403         }
03404 
03405         <span class="keywordflow">if</span> (ped-&gt;fAutoHScroll &amp;&amp; ((<span class="keywordtype">int</span>) ped-&gt;maxPixelWidth &gt; iFmtWidth)) {
03406             POINT pt;
03407             <span class="comment">/* Get the current position of the caret in pixels */</span>
03408             <span class="keywordflow">if</span> ((<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>) (ped-&gt;cLines - 1) != ped-&gt;iCaretLine &amp;&amp;
03409                 ped-&gt;ichCaret == ped-&gt;chLines[ped-&gt;iCaretLine + 1])
03410                 fPrevLine = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
03411             <span class="keywordflow">else</span>
03412                 fPrevLine = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
03413 
03414             hdc = <a class="code" href="../../d6/d0/usercli_8h.html#a451">ECGetEditDC</a>(ped,TRUE);
03415             <a class="code" href="../../d6/d0/usercli_8h.html#a494">MLIchToXYPos</a>(ped, hdc, ped-&gt;ichCaret, fPrevLine, &amp;pt);
03416             <a class="code" href="../../d6/d0/usercli_8h.html#a452">ECReleaseEditDC</a>(ped, hdc, TRUE);
03417             xposition = pt.x;
03418 
03419             <span class="comment">// Remember, MLIchToXYPos returns coordinates with respect to the</span>
03420             <span class="comment">// top left pixel displayed on the screen.  Thus, if xPosition &lt; 0,</span>
03421             <span class="comment">// it means xPosition is less than current ped-&gt;xOffset.</span>
03422 
03423             iFmtWidth /= 3;
03424             <span class="keywordflow">if</span> (fHScroll = (xposition &lt; ped-&gt;rcFmt.left))
03425                 <span class="comment">// scroll to the left</span>
03426                 iAmt = ped-&gt;rcFmt.left + iFmtWidth;
03427             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (fHScroll = (xposition &gt; ped-&gt;rcFmt.right))
03428                 <span class="comment">// scroll to the right</span>
03429                 iAmt = ped-&gt;rcFmt.right - iFmtWidth;
03430 
03431             <span class="keywordflow">if</span> (fHScroll)
03432                 <a class="code" href="../../d6/d0/usercli_8h.html#a517">MLScroll</a>(ped, FALSE, EM_LINESCROLL, (xposition - iAmt) / ped-&gt;aveCharWidth, TRUE);
03433         }
03434     }
03435     <span class="keywordflow">return</span>(fVScroll);
03436 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a515" doxytag="usercli.h::MLExpandTabs" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL MLExpandTabs           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a510" doxytag="usercli.h::MLGetLine" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LONG MLGetLine           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPSTR&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d4/edmlrare_8c-source.html#l00266">266</a> of file <a class="el" href="../../d6/d4/edmlrare_8c-source.html">edmlrare.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l00661">tagED::cbChar</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00662">tagED::chLines</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00559">tagED::cLines</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00052">ECLock()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00086">ECUnlock()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00626">ICH</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d6/d3/acpitabl_8h-source.html#l00366">min</a>, and <a class="el" href="../../d2/d4/editml_8c-source.html#l00374">MLLine()</a>.
<p>
Referenced by <a class="el" href="../../d2/d4/editml_8c-source.html#l03457">MLEditWndProc()</a>.
<p>
<pre class="fragment"><div>00271 {
00272     PSTR pText;
00273     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a> cchLen;
00274 
00275     <span class="keywordflow">if</span> (lineNumber &gt; ped-&gt;cLines - 1) {
00276         RIPERR1(ERROR_INVALID_PARAMETER,
00277                 RIP_WARNING,
00278                 <span class="stringliteral">"Invalid parameter \"lineNumber\" (%ld) to MLGetLine"</span>,
00279                 lineNumber);
00280 
00281         <span class="keywordflow">return</span> 0<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>;
00282     }
00283 
00284     cchLen = <a class="code" href="../../d6/d0/usercli_8h.html#a498">MLLine</a>(ped, lineNumber);
00285     maxCchToCopy = <a class="code" href="../../d5/d4/acpitabl_8h.html#a69">min</a>(cchLen, maxCchToCopy);
00286 
00287     <span class="keywordflow">if</span> (maxCchToCopy) {
00288         pText = <a class="code" href="../../d6/d0/usercli_8h.html#a433">ECLock</a>(ped) +
00289                 ped-&gt;chLines[lineNumber] * ped-&gt;cbChar;
00290         memmove(lpBuffer, pText, maxCchToCopy*ped-&gt;cbChar);
00291         <a class="code" href="../../d6/d0/usercli_8h.html#a434">ECUnlock</a>(ped);
00292     }
00293 
00294     <span class="keywordflow">return</span> maxCchToCopy;
00295 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a495" doxytag="usercli.h::MLIchToLine" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int MLIchToLine           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d4/editml_8c-source.html#l00443">443</a> of file <a class="el" href="../../d2/d4/editml_8c-source.html">editml.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l00662">tagED::chLines</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00559">tagED::cLines</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00626">ICH</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00561">tagED::ichMinSel</a>, and <a class="el" href="../../d9/d5/sertl_8c-source.html#l00332">max</a>.
<p>
Referenced by <a class="el" href="../../d2/d4/editml_8c-source.html#l01367">MLDeleteText()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l03991">MLDrawText()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l03457">MLEditWndProc()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l00553">MLIchToXYPos()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l00502">MLIchToYPos()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l01040">MLInsertText()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l02028">MLKeyDown()</a>, <a class="el" href="../../d6/d4/edmlrare_8c-source.html#l00334">MLLineLength()</a>, <a class="el" href="../../d6/d4/edmlrare_8c-source.html#l00368">MLSetSelection()</a>, and <a class="el" href="../../d2/d4/editml_8c-source.html#l01003">MLUpdateiCaretLine()</a>.
<p>
<pre class="fragment"><div>00446 {
00447     <span class="keywordtype">int</span> iLo, iHi, iLine;
00448 
00449     iLo = 0;
00450     iHi = ped-&gt;cLines;
00451 
00452     <span class="keywordflow">if</span> (ich == (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a>)-1)
00453         ich = ped-&gt;ichMinSel;
00454 
00455     <span class="keywordflow">while</span> (iLo &lt; iHi - 1) {
00456         iLine = <a class="code" href="../../d8/d6/sertl_8c.html#a1">max</a>((iHi - iLo)/2, 1) + iLo;
00457 
00458         <span class="keywordflow">if</span> (ped-&gt;chLines[iLine] &gt; ich) {
00459             iHi = iLine;
00460         } <span class="keywordflow">else</span> {
00461             iLo = iLine;
00462         }
00463     }
00464 
00465     <span class="keywordflow">return</span> iLo;
00466 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a494" doxytag="usercli.h::MLIchToXYPos" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void MLIchToXYPos           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HDC&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPPOINT&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d4/editml_8c-source.html#l00553">553</a> of file <a class="el" href="../../d2/d4/editml_8c-source.html">editml.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l01132">AWCOMPARECHAR</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00661">tagED::cbChar</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00557">tagED::cch</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00662">tagED::chLines</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00052">ECLock()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00086">ECUnlock()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l03290">tagLPKEDITCALLOUT::EditIchToXY</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00640">tagED::fAnsi</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00664">tagED::format</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00626">ICH</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00570">tagED::ichScreenStart</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00678">tagED::lineHeight</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l00085">MLCalcXOffset()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l00040">MLGetLineWidth()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l00443">MLIchToLine()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l00374">MLLine()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00702">tagED::pLpkEditCallout</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00586">tagED::rcFmt</a>, and <a class="el" href="../../d7/d9/usercli_8h-source.html#l00575">tagED::xOffset</a>.
<p>
Referenced by <a class="el" href="../../d2/d4/editml_8c-source.html#l01367">MLDeleteText()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l03991">MLDrawText()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l03457">MLEditWndProc()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l03379">MLEnsureCaretVisible()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l01040">MLInsertText()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l02028">MLKeyDown()</a>, and <a class="el" href="../../d2/d4/editml_8c-source.html#l00292">MLSetCaretPosition()</a>.
<p>
<pre class="fragment"><div>00559 {
00560     <span class="keywordtype">int</span> iline;
00561     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a> cch;
00562     <span class="keywordtype">int</span> xPosition, yPosition;
00563     <span class="keywordtype">int</span> xOffset;
00564 
00565     <span class="comment">/*</span>
00566 <span class="comment">     * For horizontal scroll displacement on left justified text and</span>
00567 <span class="comment">     * for indent on centered or right justified text</span>
00568 <span class="comment">     */</span>
00569     PSTR pText, pTextStart, pLineStart;
00570 
00571     <span class="comment">/*</span>
00572 <span class="comment">     * Determine what line the character is on</span>
00573 <span class="comment">     */</span>
00574     iline = <a class="code" href="../../d6/d0/usercli_8h.html#a495">MLIchToLine</a>(ped, ich);
00575 
00576     <span class="comment">/*</span>
00577 <span class="comment">     * Calc. the yPosition now. Note that this may change by the height of one</span>
00578 <span class="comment">     * char if the prevLine flag is set and the ICH is at the beginning of a</span>
00579 <span class="comment">     * line.</span>
00580 <span class="comment">     */</span>
00581     yPosition = (iline - ped-&gt;ichScreenStart) * ped-&gt;lineHeight + ped-&gt;rcFmt.top;
00582 
00583     <span class="comment">/*</span>
00584 <span class="comment">     * Now determine the xPosition of the character</span>
00585 <span class="comment">     */</span>
00586     pTextStart = <a class="code" href="../../d6/d0/usercli_8h.html#a433">ECLock</a>(ped);
00587 
00588     <span class="keywordflow">if</span> (prevLine &amp;&amp; iline &amp;&amp; (ich == ped-&gt;chLines[iline]) &amp;&amp;
00589             (!<a class="code" href="../../d6/d0/usercli_8h.html#a154">AWCOMPARECHAR</a>(ped, pTextStart + (ich - 2) * ped-&gt;cbChar, 0x0D) ||
00590             !<a class="code" href="../../d6/d0/usercli_8h.html#a154">AWCOMPARECHAR</a>(ped, pTextStart + (ich - 1) * ped-&gt;cbChar, 0x0A))) {
00591 
00592         <span class="comment">/*</span>
00593 <span class="comment">         * First char in the line. We want text extent upto end of the previous</span>
00594 <span class="comment">         * line if we aren't at the 0th line.</span>
00595 <span class="comment">         */</span>
00596         iline--;
00597 
00598         yPosition = yPosition - ped-&gt;lineHeight;
00599         pLineStart = pTextStart + ped-&gt;chLines[iline] * ped-&gt;cbChar;
00600 
00601         <span class="comment">/*</span>
00602 <span class="comment">         * Note that we are taking the position in front of any CRLFs in the</span>
00603 <span class="comment">         * text.</span>
00604 <span class="comment">         */</span>
00605         cch = <a class="code" href="../../d6/d0/usercli_8h.html#a498">MLLine</a>(ped, iline);
00606 
00607     } <span class="keywordflow">else</span> {
00608 
00609         pLineStart = pTextStart + ped-&gt;chLines[iline] * ped-&gt;cbChar;
00610         pText = pTextStart + ich * ped-&gt;cbChar;
00611 
00612         <span class="comment">/*</span>
00613 <span class="comment">         * Strip off CRLF or CRCRLF. Note that we may be pointing to a CR but in</span>
00614 <span class="comment">         * which case we just want to strip off a single CR or 2 CRs.</span>
00615 <span class="comment">         */</span>
00616 
00617         <span class="comment">/*</span>
00618 <span class="comment">         * We want pText to point to the first CR at the end of the line if</span>
00619 <span class="comment">         * there is one. Thus, we will get an xPosition to the right of the last</span>
00620 <span class="comment">         * visible char on the line otherwise we will be to the left of</span>
00621 <span class="comment">         * character ich.</span>
00622 <span class="comment">         */</span>
00623 
00624         <span class="comment">/*</span>
00625 <span class="comment">         * Check if we at the end of text</span>
00626 <span class="comment">         */</span>
00627         <span class="keywordflow">if</span> (ich &lt; ped-&gt;cch) {
00628             <span class="keywordflow">if</span> (ped-&gt;fAnsi) {
00629                 <span class="keywordflow">if</span> (ich &amp;&amp; *(WORD UNALIGNED *)(pText - 1) == 0x0A0D) {
00630                     pText--;
00631                     <span class="keywordflow">if</span> (ich &gt; 2 &amp;&amp; *(pText - 1) == 0x0D)
00632                         pText--;
00633                 }
00634             } <span class="keywordflow">else</span> {
00635                 LPWSTR pwText = (LPWSTR)pText;
00636 
00637                 <span class="keywordflow">if</span> (ich &amp;&amp; *(<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> UNALIGNED *)(pwText - 1) == 0x000A000D) {
00638                     pwText--;
00639                     <span class="keywordflow">if</span> (ich &gt; 2 &amp;&amp; *(pwText - 1) == 0x0D)
00640                         pwText--;
00641                 }
00642                 pText = (LPSTR)pwText;
00643             }
00644         }
00645 
00646         <span class="keywordflow">if</span> (pText &lt; pLineStart)
00647             pText = pLineStart;
00648 
00649         cch = (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a>)(pText - pLineStart)/ped-&gt;cbChar;
00650     }
00651 
00652     <span class="comment">/*</span>
00653 <span class="comment">     * Find out how many pixels we indent the line for funny formats</span>
00654 <span class="comment">     */</span>
00655     <span class="keywordflow">if</span> (ped-&gt;pLpkEditCallout) {
00656         <span class="comment">/*</span>
00657 <span class="comment">         * Must find position at start of character offset cch from start of line.</span>
00658 <span class="comment">         * This depends on the layout and the reading order</span>
00659 <span class="comment">         */</span>
00660         xPosition = ped-&gt;pLpkEditCallout-&gt;EditIchToXY(
00661                           ped, hdc, pLineStart, <a class="code" href="../../d6/d0/usercli_8h.html#a498">MLLine</a>(ped, iline), cch);
00662     } <span class="keywordflow">else</span> {
00663         <span class="keywordflow">if</span> (ped-&gt;format != ES_LEFT) {
00664             xOffset = <a class="code" href="../../d6/d0/usercli_8h.html#a500">MLCalcXOffset</a>(ped, hdc, iline);
00665         } <span class="keywordflow">else</span> {
00666             xOffset = -(<span class="keywordtype">int</span>)ped-&gt;xOffset;
00667         }
00668 
00669         xPosition = ped-&gt;rcFmt.left + xOffset +
00670                 <a class="code" href="../../d1/d5/editml_8c.html#a3">MLGetLineWidth</a>(hdc, pLineStart, cch, ped);
00671     }
00672 
00673     <a class="code" href="../../d6/d0/usercli_8h.html#a434">ECUnlock</a>(ped);
00674     ppt-&gt;x = xPosition;
00675     ppt-&gt;y = yPosition;
00676     <span class="keywordflow">return</span> ;
00677 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a492" doxytag="usercli.h::MLInsertchLine" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL MLInsertchLine           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d4/editml_8c-source.html#l01487">1487</a> of file <a class="el" href="../../d2/d4/editml_8c-source.html">editml.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00662">tagED::chLines</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00559">tagED::cLines</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02429">ECNotifyParent()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l00017">LINEBUMP</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00627">LPICH</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00959">UserLocalReAlloc</a>, and <a class="el" href="../../d7/d9/usercli_8h-source.html#l00961">UserLocalSize</a>.
<p>
Referenced by <a class="el" href="../../d2/d4/editml_8c-source.html#l01562">MLBuildchLines()</a>.
<p>
<pre class="fragment"><div>01492 {
01493     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwSize;
01494 
01495     <span class="keywordflow">if</span> (fUserTyping &amp;&amp; iLine &lt; ped-&gt;cLines) {
01496         ped-&gt;chLines[iLine] = ich;
01497         <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
01498     }
01499 
01500     dwSize = (ped-&gt;cLines + 2) * <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>);
01501 
01502     <span class="keywordflow">if</span> (dwSize &gt; <a class="code" href="../../d6/d0/usercli_8h.html#a139">UserLocalSize</a>(ped-&gt;chLines)) {
01503         <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a981">LPICH</a> hResult;
01504         <span class="comment">/*</span>
01505 <span class="comment">         * Grow the line index buffer</span>
01506 <span class="comment">         */</span>
01507         dwSize += <a class="code" href="../../d1/d5/editml_8c.html#a0">LINEBUMP</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>);
01508         hResult = (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a981">LPICH</a>)<a class="code" href="../../d6/d0/usercli_8h.html#a137">UserLocalReAlloc</a>(ped-&gt;chLines, dwSize, 0);
01509 
01510         <span class="keywordflow">if</span> (!hResult) {
01511             <a class="code" href="../../d6/d0/usercli_8h.html#a449">ECNotifyParent</a>(ped, EN_ERRSPACE);
01512             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01513         }
01514         ped-&gt;chLines = hResult;
01515     }
01516 
01517     <span class="comment">/*</span>
01518 <span class="comment">     * Move indices starting at iLine up</span>
01519 <span class="comment">     */</span>
01520     <span class="keywordflow">if</span> (ped-&gt;cLines != iLine)
01521         RtlMoveMemory(&amp;ped-&gt;chLines[iLine + 1], &amp;ped-&gt;chLines[iLine],
01522                 (ped-&gt;cLines - iLine) * <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));
01523     ped-&gt;cLines++;
01524 
01525     ped-&gt;chLines[iLine] = ich;
01526     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01527 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a508" doxytag="usercli.h::MLInsertCrCrLf" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL MLInsertCrCrLf           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>ped</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
fAnsi 
<p>
Definition at line <a class="el" href="../../d6/d4/edmlrare_8c-source.html#l00027">27</a> of file <a class="el" href="../../d6/d4/edmlrare_8c-source.html">edmlrare.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00661">tagED::cbChar</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00557">tagED::cch</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00553">tagED::cchAlloc</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00662">tagED::chLines</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00559">tagED::cLines</a>, <a class="el" href="../../d8/d3/conexts_8c-source.html#l01441">dch()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00052">ECLock()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02429">ECNotifyParent()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00086">ECUnlock()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00640">tagED::fAnsi</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00624">tagED::fStripCRCRLF</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00615">tagED::fWrap</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00706">tagED::hInstance</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00552">tagED::hText</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00626">ICH</a>, <a class="el" href="../../d9/d5/ntuser_2client_2globals_8h-source.html#l00109">LOCALREALLOC</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d2/d4/editml_8c-source.html#l03457">MLEditWndProc()</a>.
<p>
<pre class="fragment"><div>00029 {
00030     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a> <a class="code" href="../../d7/d4/conexts_8c.html#a24">dch</a>;
00031     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a> li;
00032     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a> lineSize;
00033     <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *pchText;
00034     <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *pchTextNew;
00035 
00036     <span class="keywordflow">if</span> (!ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o34">fWrap</a> || !ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o3">cch</a>) {
00037 
00038         <span class="comment">/*</span>
00039 <span class="comment">         * There are no soft line breaks if word-wrapping is off or if no chars</span>
00040 <span class="comment">         */</span>
00041         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00042     }
00043 
00044     <span class="comment">/*</span>
00045 <span class="comment">     * Calc an upper bound on the number of additional characters we will be</span>
00046 <span class="comment">     * adding to the text when we insert CR CR LFs.</span>
00047 <span class="comment">     */</span>
00048     <a class="code" href="../../d7/d4/conexts_8c.html#a24">dch</a> = 3 * ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o4">cLines</a>;
00049 
00050     <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d6/ntuser_2client_2globals_8h.html#a3">LOCALREALLOC</a>(ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o0">hText</a>, (ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o3">cch</a> + dch) * ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o60">cbChar</a>, 0, ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o87">hInstance</a>, NULL)) {
00051         <a class="code" href="../../d6/d0/usercli_8h.html#a449">ECNotifyParent</a>(ped, EN_ERRSPACE);
00052         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00053     }
00054 
00055     ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o1">cchAlloc</a> = ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o3">cch</a> + <a class="code" href="../../d7/d4/conexts_8c.html#a24">dch</a>;
00056 
00057     <span class="comment">/*</span>
00058 <span class="comment">     * Move the text up dch bytes and then copy it back down, inserting the CR</span>
00059 <span class="comment">     * CR LF's as necessary.</span>
00060 <span class="comment">     */</span>
00061     pchTextNew = pchText = <a class="code" href="../../d6/d0/usercli_8h.html#a433">ECLock</a>(ped);
00062     pchText += <a class="code" href="../../d7/d4/conexts_8c.html#a24">dch</a> * ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o60">cbChar</a>;
00063 
00064     <span class="comment">/*</span>
00065 <span class="comment">     * We will use dch to keep track of how many chars we add to the text</span>
00066 <span class="comment">     */</span>
00067     <a class="code" href="../../d7/d4/conexts_8c.html#a24">dch</a> = 0;
00068 
00069     <span class="comment">/*</span>
00070 <span class="comment">     * Copy the text up dch bytes to pchText. This will shift all indices in</span>
00071 <span class="comment">     * ped-&gt;chLines up by dch bytes.</span>
00072 <span class="comment">     */</span>
00073     memmove(pchText, pchTextNew, ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o3">cch</a> * ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o60">cbChar</a>);
00074 
00075     <span class="comment">/*</span>
00076 <span class="comment">     * Now copy chars from pchText down to pchTextNew and insert CRCRLF at soft</span>
00077 <span class="comment">     * line breaks.</span>
00078 <span class="comment">     */</span>
00079     <span class="keywordflow">if</span> (ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o42">fAnsi</a>) {
00080         <span class="keywordflow">for</span> (li = 0; li &lt; ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o4">cLines</a> - 1; li++) {
00081             lineSize = ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o61">chLines</a>[li + 1] - ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o61">chLines</a>[li];
00082             memmove(pchTextNew, pchText, lineSize);
00083             pchTextNew += lineSize;
00084             pchText += lineSize;
00085 
00086             <span class="comment">/*</span>
00087 <span class="comment">             * If last character in newly copied line is not a line feed, then we</span>
00088 <span class="comment">             * need to add the CR CR LF triple to the end</span>
00089 <span class="comment">             */</span>
00090             <span class="keywordflow">if</span> (*(pchTextNew - 1) != 0x0A) {
00091                 *pchTextNew++ = 0x0D;
00092                 *pchTextNew++ = 0x0D;
00093                 *pchTextNew++ = 0x0A;
00094                 <a class="code" href="../../d7/d4/conexts_8c.html#a24">dch</a> += 3;
00095             }
00096         }
00097 
00098         <span class="comment">/*</span>
00099 <span class="comment">         * Now move the last line up. It won't have any line breaks in it...</span>
00100 <span class="comment">         */</span>
00101         memmove(pchTextNew, pchText, ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o3">cch</a> - ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o61">chLines</a>[ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o4">cLines</a> - 1]);
00102     } <span class="keywordflow">else</span> { 
00103         LPWSTR pwchTextNew = (LPWSTR)pchTextNew;
00104 
00105         <span class="keywordflow">for</span> (li = 0; li &lt; ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o4">cLines</a> - 1; li++) {
00106             lineSize = ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o61">chLines</a>[li + 1] - ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o61">chLines</a>[li];
00107             memmove(pwchTextNew, pchText, lineSize * <span class="keyword">sizeof</span>(WCHAR));
00108             pwchTextNew += lineSize;
00109             pchText += lineSize * <span class="keyword">sizeof</span>(WCHAR);
00110 
00111             <span class="comment">/*</span>
00112 <span class="comment">             * If last character in newly copied line is not a line feed, then we</span>
00113 <span class="comment">             * need to add the CR CR LF triple to the end</span>
00114 <span class="comment">             */</span>
00115             <span class="keywordflow">if</span> (*(pwchTextNew - 1) != 0x0A) {
00116                 *pwchTextNew++ = 0x0D;
00117                 *pwchTextNew++ = 0x0D;
00118                 *pwchTextNew++ = 0x0A;
00119                 <a class="code" href="../../d7/d4/conexts_8c.html#a24">dch</a> += 3;
00120             }
00121         }
00122 
00123         <span class="comment">/*</span>
00124 <span class="comment">         * Now move the last line up. It won't have any line breaks in it...</span>
00125 <span class="comment">         */</span>
00126         memmove(pwchTextNew, pchText,
00127             (ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o3">cch</a> - ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o61">chLines</a>[ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o4">cLines</a> - 1]) * <span class="keyword">sizeof</span>(WCHAR));
00128     }
00129 
00130     <a class="code" href="../../d6/d0/usercli_8h.html#a434">ECUnlock</a>(ped);
00131 
00132     <span class="keywordflow">if</span> (<a class="code" href="../../d7/d4/conexts_8c.html#a24">dch</a>) {
00133         <span class="comment">/*</span>
00134 <span class="comment">         * Update number of characters in text handle</span>
00135 <span class="comment">         */</span>
00136         ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o3">cch</a> += <a class="code" href="../../d7/d4/conexts_8c.html#a24">dch</a>;
00137 
00138         <span class="comment">/*</span>
00139 <span class="comment">         * So that the next time we do anything with the text, we can strip the</span>
00140 <span class="comment">         * CRCRLFs</span>
00141 <span class="comment">         */</span>
00142         ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o37">fStripCRCRLF</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00143         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00144     }
00145 
00146     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00147 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a483" doxytag="usercli.h::MLInsertText" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a> MLInsertText           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPSTR&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d4/editml_8c-source.html#l01040">1040</a> of file <a class="el" href="../../d2/d4/editml_8c-source.html">editml.c</a>.
<p>
References <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00860">_IsWindowVisible()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00661">tagED::cbChar</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00557">tagED::cch</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00555">tagED::cchTextMax</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00662">tagED::chLines</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00559">tagED::cLines</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00243">CopyRect</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l04133">ECAdjustIch()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l01977">ECEmptyUndo()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02492">ECGetEditDC()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02059">ECInsertText()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00052">ECLock()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02429">ECNotifyParent()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02524">ECReleaseEditDC()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l01955">ECSaveUndo()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00640">tagED::fAnsi</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00608">tagED::fAutoVScroll</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00611">tagED::fDBCS</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00603">tagED::fDirty</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00664">tagED::format</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00649">tagED::fRtoLReading</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01265">FWINABLE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00615">tagED::fWrap</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00584">tagED::hwnd</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00566">tagED::iCaretLine</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00626">ICH</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00564">tagED::ichCaret</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00574">tagED::ichLinesOnScreen</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00570">tagED::ichScreenStart</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00277">IsWindow()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00678">tagED::lineHeight</a>, <a class="el" href="../../d9/d5/sertl_8c-source.html#l00332">max</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00670">tagED::maxPixelWidth</a>, <a class="el" href="../../d6/d3/acpitabl_8h-source.html#l00366">min</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l01562">MLBuildchLines()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l03991">MLDrawText()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l03379">MLEnsureCaretVisible()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l00443">MLIchToLine()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l00553">MLIchToXYPos()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l00502">MLIchToYPos()</a>, <a class="el" href="../../d6/d4/edmlrare_8c-source.html#l00556">MLUndo()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l01003">MLUpdateiCaretLine()</a>, <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00354">NotifyWinEvent()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05330">NtUserInvalidateRect()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01564">NtUserMessageBeep</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00702">tagED::pLpkEditCallout</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00540">Pundo</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00585">tagED::pwnd</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00586">tagED::rcFmt</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00696">tagED::wLeftMargin</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00693">tagED::wMaxNegAcharPos</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00697">tagED::wRightMargin</a>, and <a class="el" href="../../d7/d9/usercli_8h-source.html#l00575">tagED::xOffset</a>.
<p>
Referenced by <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01337">ECImeComposition()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l02531">MLChar()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l02720">MLPasteText()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l01309">MLReplaceSel()</a>, and <a class="el" href="../../d6/d4/edmlrare_8c-source.html#l00556">MLUndo()</a>.
<p>
<pre class="fragment"><div>01045 {
01046     HDC hdc;
01047     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a> validCch = cchInsert;
01048     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a> oldCaret = ped-&gt;ichCaret;
01049     <span class="keywordtype">int</span> oldCaretLine = ped-&gt;iCaretLine;
01050     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fCRLF = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01051     LONG ll, hl;
01052     POINT xyPosInitial;
01053     POINT xyPosFinal;
01054     HWND hwndSave = ped-&gt;hwnd;
01055     <a class="code" href="../../d9/d8/structtagUNDO.html">UNDO</a> undo;
01056     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a> validCchTemp;
01057 
01058     xyPosInitial.x=0;
01059     xyPosInitial.y=0;
01060     xyPosFinal.x=0;
01061     xyPosFinal.y=0;
01062 
01063     <span class="keywordflow">if</span> (validCch == 0)
01064         <span class="keywordflow">return</span> 0;
01065 
01066     <span class="keywordflow">if</span> (ped-&gt;cchTextMax &lt;= ped-&gt;cch) {
01067 
01068         <span class="comment">/*</span>
01069 <span class="comment">         * When the max chars is reached already, notify parent</span>
01070 <span class="comment">         * Fix for Bug #4183 -- 02/06/91 -- SANKAR --</span>
01071 <span class="comment">         */</span>
01072         <a class="code" href="../../d6/d0/usercli_8h.html#a449">ECNotifyParent</a>(ped,EN_MAXTEXT);
01073         <span class="keywordflow">return</span> 0;
01074     }
01075 
01076     <span class="comment">/*</span>
01077 <span class="comment">     * Limit the amount of text we add</span>
01078 <span class="comment">     */</span>
01079     validCch = <a class="code" href="../../d5/d4/acpitabl_8h.html#a69">min</a>(validCch, ped-&gt;cchTextMax - ped-&gt;cch);
01080 
01081     <span class="comment">/*</span>
01082 <span class="comment">     * Make sure we don't split a CRLF in half</span>
01083 <span class="comment">     */</span>
01084     <span class="keywordflow">if</span> (validCch) {
01085         <span class="keywordflow">if</span> (ped-&gt;fAnsi) {
01086             <span class="keywordflow">if</span> (*(WORD UNALIGNED *)(lpText + validCch - 1) == 0x0A0D)
01087                 validCch--;
01088         } <span class="keywordflow">else</span> {
01089             <span class="keywordflow">if</span> (*(<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> UNALIGNED *)(lpText + (validCch - 1) * ped-&gt;cbChar) == 0x000A000D)
01090                 validCch--;
01091         }
01092     }
01093     <span class="keywordflow">if</span> (!validCch) {
01094         <span class="comment">/*</span>
01095 <span class="comment">         * When the max chars is reached already, notify parent</span>
01096 <span class="comment">         * Fix for Bug #4183 -- 02/06/91 -- SANKAR --</span>
01097 <span class="comment">         */</span>
01098         <a class="code" href="../../d6/d0/usercli_8h.html#a449">ECNotifyParent</a>(ped,EN_MAXTEXT);
01099         <span class="keywordflow">return</span> 0;
01100     }
01101 
01102     <span class="keywordflow">if</span> (validCch == 2) {
01103         <span class="keywordflow">if</span> (ped-&gt;fAnsi) {
01104             <span class="keywordflow">if</span> (*(WORD UNALIGNED *)lpText == 0x0A0D)
01105                 fCRLF = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01106         } <span class="keywordflow">else</span> {
01107             <span class="keywordflow">if</span> (*(<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> UNALIGNED *)lpText == 0x000A000D)
01108                 fCRLF = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01109         }
01110     }
01111 
01112     <span class="comment">//</span>
01113     <span class="comment">// Save current undo state always, but clear it out only if !AutoVScroll</span>
01114     <span class="comment">//</span>
01115     <a class="code" href="../../d6/d0/usercli_8h.html#a445">ECSaveUndo</a>(<a class="code" href="../../d6/d0/usercli_8h.html#a85">Pundo</a>(ped), (<a class="code" href="../../d9/d8/structtagUNDO.html">PUNDO</a>)&amp;undo, !ped-&gt;fAutoVScroll);
01116 
01117     hdc = <a class="code" href="../../d6/d0/usercli_8h.html#a451">ECGetEditDC</a>(ped, FALSE);
01118     <span class="comment">/*</span>
01119 <span class="comment">     * We only need the y position. Since with an LPK loaded</span>
01120 <span class="comment">     * calculating the x position is an intensive job, just</span>
01121 <span class="comment">     * call MLIchToYPos.</span>
01122 <span class="comment">     */</span>
01123     <span class="keywordflow">if</span> (ped-&gt;cch)
01124         <span class="keywordflow">if</span> (ped-&gt;pLpkEditCallout)
01125             xyPosInitial.y = <a class="code" href="../../d1/d5/editml_8c.html#a11">MLIchToYPos</a>(ped, ped-&gt;cch-1, FALSE);
01126         <span class="keywordflow">else</span>
01127             <a class="code" href="../../d6/d0/usercli_8h.html#a494">MLIchToXYPos</a>(ped, hdc, ped-&gt;cch - 1, FALSE, &amp;xyPosInitial);
01128 
01129     <span class="comment">/*</span>
01130 <span class="comment">     * Insert the text</span>
01131 <span class="comment">     */</span>
01132     validCchTemp = validCch;    <span class="comment">// may not be needed, but just for precautions..</span>
01133     <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d0/usercli_8h.html#a446">ECInsertText</a>(ped, lpText, &amp;validCchTemp)) {
01134 
01135         <span class="comment">// Restore previous undo buffer if it was cleared</span>
01136         <span class="keywordflow">if</span> (!ped-&gt;fAutoVScroll)
01137             <a class="code" href="../../d6/d0/usercli_8h.html#a445">ECSaveUndo</a>((<a class="code" href="../../d9/d8/structtagUNDO.html">PUNDO</a>)&amp;undo, <a class="code" href="../../d6/d0/usercli_8h.html#a85">Pundo</a>(ped), FALSE);
01138 
01139         <a class="code" href="../../d6/d0/usercli_8h.html#a452">ECReleaseEditDC</a>(ped, hdc, FALSE);
01140         <a class="code" href="../../d6/d0/usercli_8h.html#a449">ECNotifyParent</a>(ped, EN_ERRSPACE);
01141         <span class="keywordflow">return</span> (0);
01142     }
01143 
01144 <span class="preprocessor">#if DBG</span>
01145 <span class="preprocessor"></span>    <span class="keywordflow">if</span> (validCch != validCchTemp) {
01146         <span class="comment">/*</span>
01147 <span class="comment">         * All characters in lpText has not been inserted to ped.</span>
01148 <span class="comment">         * This could happen when cch is close to cchMax.</span>
01149 <span class="comment">         * Better revisit this after NT5 ships.</span>
01150 <span class="comment">         */</span>
01151         RIPMSG2(RIP_WARNING, <span class="stringliteral">"MLInsertText: validCch is changed (%x -&gt; %x) in ECInsertText."</span>,
01152             validCch, validCchTemp);
01153     }
01154 <span class="preprocessor">#endif</span>
01155 <span class="preprocessor"></span>
01156     <span class="comment">/*</span>
01157 <span class="comment">     * Note that ped-&gt;ichCaret is updated by ECInsertText</span>
01158 <span class="comment">     */</span>
01159     <a class="code" href="../../d6/d0/usercli_8h.html#a490">MLBuildchLines</a>(ped, (ICH)oldCaretLine, (<span class="keywordtype">int</span>)validCch, fCRLF?(BOOL)FALSE:fUserTyping, &amp;ll, &amp;hl);
01160 
01161     <span class="keywordflow">if</span> (ped-&gt;cch)
01162        <span class="comment">/*</span>
01163 <span class="comment">        * We only need the y position. Since with an LPK loaded</span>
01164 <span class="comment">        * calculating the x position is an intensive job, just</span>
01165 <span class="comment">        * call MLIchToYPos.</span>
01166 <span class="comment">        */</span>
01167        <span class="keywordflow">if</span> (ped-&gt;pLpkEditCallout)
01168            xyPosFinal.y = <a class="code" href="../../d1/d5/editml_8c.html#a11">MLIchToYPos</a>(ped, ped-&gt;cch-1, FALSE);
01169        <span class="keywordflow">else</span>
01170            <a class="code" href="../../d6/d0/usercli_8h.html#a494">MLIchToXYPos</a>(ped, hdc, ped-&gt;cch - 1, FALSE,&amp;xyPosFinal);
01171 
01172     <span class="keywordflow">if</span> (xyPosFinal.y &lt; xyPosInitial.y &amp;&amp; ((<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a>)ped-&gt;ichScreenStart) + ped-&gt;ichLinesOnScreen &gt;= ped-&gt;cLines - 1) {
01173         RECT rc;
01174 
01175         <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a33">CopyRect</a>((LPRECT)&amp;rc, (LPRECT)&amp;ped-&gt;rcFmt);
01176         rc.top = xyPosFinal.y + ped-&gt;lineHeight;
01177         <span class="keywordflow">if</span> (ped-&gt;pLpkEditCallout) {
01178             <span class="keywordtype">int</span> xFarOffset = ped-&gt;xOffset + ped-&gt;rcFmt.right - ped-&gt;rcFmt.left;
01179             <span class="comment">// Include left or right margins in display unless clipped</span>
01180             <span class="comment">// by horizontal scrolling.</span>
01181             <span class="keywordflow">if</span> (ped-&gt;wLeftMargin) {
01182                 <span class="keywordflow">if</span> (!(   ped-&gt;format == ES_LEFT     <span class="comment">// Only ES_LEFT (Nearside alignment) can get clipped</span>
01183                       &amp;&amp; (   (!ped-&gt;fRtoLReading &amp;&amp; ped-&gt;xOffset &gt; 0)  <span class="comment">// LTR and first char not fully in view</span>
01184                           || ( ped-&gt;fRtoLReading &amp;&amp; xFarOffset &lt; ped-&gt;maxPixelWidth)))) { <span class="comment">//RTL and last char not fully in view</span>
01185                     rc.left  -= ped-&gt;wLeftMargin;
01186                 }
01187             }
01188 
01189             <span class="comment">// Process right margin</span>
01190             <span class="keywordflow">if</span> (ped-&gt;wRightMargin) {
01191                 <span class="keywordflow">if</span> (!(   ped-&gt;format == ES_LEFT     <span class="comment">// Only ES_LEFT (Nearside alignment) can get clipped</span>
01192                       &amp;&amp; (   ( ped-&gt;fRtoLReading &amp;&amp; ped-&gt;xOffset &gt; 0)  <span class="comment">// RTL and first char not fully in view</span>
01193                           || (!ped-&gt;fRtoLReading &amp;&amp; xFarOffset &lt; ped-&gt;maxPixelWidth)))) { <span class="comment">// LTR and last char not fully in view</span>
01194                     rc.right += ped-&gt;wRightMargin;
01195                 }
01196             }
01197         }
01198         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a206">NtUserInvalidateRect</a>(ped-&gt;hwnd, (LPRECT)&amp;rc, TRUE);
01199     }
01200 
01201     <span class="keywordflow">if</span> (!ped-&gt;fAutoVScroll) {
01202         <span class="keywordflow">if</span> (ped-&gt;ichLinesOnScreen &lt; ped-&gt;cLines) {
01203             <a class="code" href="../../d6/d0/usercli_8h.html#a501">MLUndo</a>(ped);
01204             <a class="code" href="../../d6/d0/usercli_8h.html#a444">ECEmptyUndo</a>(<a class="code" href="../../d6/d0/usercli_8h.html#a85">Pundo</a>(ped));
01205 
01206             <a class="code" href="../../d6/d0/usercli_8h.html#a445">ECSaveUndo</a>(&amp;undo, <a class="code" href="../../d6/d0/usercli_8h.html#a85">Pundo</a>(ped), FALSE);
01207 
01208             <a class="code" href="../../d6/d0/usercli_8h.html#a219">NtUserMessageBeep</a>(0);
01209             <a class="code" href="../../d6/d0/usercli_8h.html#a452">ECReleaseEditDC</a>(ped, hdc, FALSE);
01210 
01211             <span class="comment">/*</span>
01212 <span class="comment">             * When the max lines is reached already, notify parent</span>
01213 <span class="comment">             * Fix for Bug #7586 -- 10/14/91 -- SANKAR --</span>
01214 <span class="comment">             */</span>
01215             <a class="code" href="../../d6/d0/usercli_8h.html#a449">ECNotifyParent</a>(ped,EN_MAXTEXT);
01216             <span class="keywordflow">return</span> (0);
01217         } <span class="keywordflow">else</span> {
01218             <a class="code" href="../../d6/d0/usercli_8h.html#a444">ECEmptyUndo</a>(&amp;undo);
01219         }
01220     }
01221 
01222     <span class="keywordflow">if</span> (fUserTyping &amp;&amp; ped-&gt;fWrap) {
01223         <span class="comment">//</span>
01224         <span class="comment">// To avoid oldCaret points intermediate of DBCS character,</span>
01225         <span class="comment">// adjust oldCaret position if necessary.</span>
01226         <span class="comment">//</span>
01227         <span class="comment">// !!!CR If MLBuildchLines() returns reasonable value ( and I think</span>
01228         <span class="comment">//       it does), we don't probably need this. Check this out later.</span>
01229         <span class="comment">//</span>
01230         <span class="keywordflow">if</span> (ped-&gt;fDBCS &amp;&amp; ped-&gt;fAnsi) {
01231             oldCaret = <a class="code" href="../../d6/d0/usercli_8h.html#a461">ECAdjustIch</a>(ped,
01232                                    <a class="code" href="../../d6/d0/usercli_8h.html#a433">ECLock</a>(ped),
01233                                    <a class="code" href="../../d5/d4/acpitabl_8h.html#a69">min</a>((ICH)LOWORD(ll),oldCaret));
01234             <span class="comment">/* ECUnlock(ped); */</span>
01235         } <span class="keywordflow">else</span> { <span class="comment">// same as original code</span>
01236             oldCaret = <a class="code" href="../../d5/d4/acpitabl_8h.html#a69">min</a>((ICH)LOWORD(ll), oldCaret);
01237         }
01238     }
01239 
01240     <span class="comment">// Update ped-&gt;iCaretLine properly.</span>
01241     <a class="code" href="../../d6/d0/usercli_8h.html#a519">MLUpdateiCaretLine</a>(ped);
01242 
01243     <a class="code" href="../../d6/d0/usercli_8h.html#a449">ECNotifyParent</a>(ped, EN_UPDATE);
01244 
01245     <span class="comment">/*</span>
01246 <span class="comment">     * Make sure window still exists.</span>
01247 <span class="comment">     */</span>
01248     <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d9/client_2wow_8c.html#a11">IsWindow</a>(hwndSave))
01249         <span class="keywordflow">return</span> 0;
01250 
01251     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d9/rtl_2wow_8c.html#a17">_IsWindowVisible</a>(ped-&gt;pwnd)) {
01252 
01253         <span class="comment">//</span>
01254         <span class="comment">// If the current font has negative A widths, we may have to start</span>
01255         <span class="comment">// drawing a few characters before the oldCaret position.</span>
01256         <span class="comment">//</span>
01257         <span class="keywordflow">if</span> (ped-&gt;wMaxNegAcharPos) {
01258             <span class="keywordtype">int</span> iLine = <a class="code" href="../../d6/d0/usercli_8h.html#a495">MLIchToLine</a>(ped, oldCaret);
01259             oldCaret = <a class="code" href="../../d8/d6/sertl_8c.html#a1">max</a>( ((<span class="keywordtype">int</span>)(oldCaret - ped-&gt;wMaxNegAcharPos)),
01260                           ((<span class="keywordtype">int</span>)(ped-&gt;chLines[iLine])));
01261         }
01262 
01263         <span class="comment">// Redraw to end of screen/text if CRLF or large insert</span>
01264         <span class="keywordflow">if</span> (fCRLF || !fUserTyping) {
01265 
01266             <span class="comment">/*</span>
01267 <span class="comment">             * Redraw to end of screen/text if crlf or large insert.</span>
01268 <span class="comment">             */</span>
01269             <a class="code" href="../../d6/d0/usercli_8h.html#a486">MLDrawText</a>(ped, hdc, (fUserTyping ? oldCaret : 0), ped-&gt;cch, FALSE);
01270         } <span class="keywordflow">else</span>
01271             <a class="code" href="../../d6/d0/usercli_8h.html#a486">MLDrawText</a>(ped, hdc, oldCaret, <a class="code" href="../../d8/d6/sertl_8c.html#a1">max</a>(ped-&gt;ichCaret, (ICH)hl), FALSE);
01272     }
01273 
01274     <a class="code" href="../../d6/d0/usercli_8h.html#a452">ECReleaseEditDC</a>(ped, hdc, FALSE);
01275 
01276     <span class="comment">/*</span>
01277 <span class="comment">     * Make sure we can see the cursor</span>
01278 <span class="comment">     */</span>
01279     <a class="code" href="../../d6/d0/usercli_8h.html#a485">MLEnsureCaretVisible</a>(ped);
01280 
01281     ped-&gt;fDirty = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01282 
01283     <a class="code" href="../../d6/d0/usercli_8h.html#a449">ECNotifyParent</a>(ped, EN_CHANGE);
01284 
01285     <span class="keywordflow">if</span> (validCch &lt; cchInsert)
01286         <a class="code" href="../../d6/d0/usercli_8h.html#a449">ECNotifyParent</a>(ped, EN_MAXTEXT);
01287 
01288     <span class="keywordflow">if</span> (validCch &amp;&amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a405">FWINABLE</a>()) {
01289         <a class="code" href="../../d8/d9/client_2ntstubs_8c.html#a12">NotifyWinEvent</a>(EVENT_OBJECT_VALUECHANGE, ped-&gt;hwnd, OBJID_CLIENT, INDEXID_CONTAINER);
01290     }
01291 
01292     <span class="comment">/*</span>
01293 <span class="comment">     * Make sure the window still exists.</span>
01294 <span class="comment">     */</span>
01295     <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d9/client_2wow_8c.html#a11">IsWindow</a>(hwndSave))
01296         <span class="keywordflow">return</span> 0;
01297     <span class="keywordflow">else</span>
01298         <span class="keywordflow">return</span> validCch;
01299 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a504" doxytag="usercli.h::MLKeyDown" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void MLKeyDown           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d4/editml_8c-source.html#l02028">2028</a> of file <a class="el" href="../../d2/d4/editml_8c-source.html">editml.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l00677">tagED::aveCharWidth</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00661">tagED::cbChar</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00557">tagED::cch</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00662">tagED::chLines</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00559">tagED::cLines</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00510">CTRLDOWN</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02492">ECGetEditDC()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00733">ECGetModKeys()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00052">ECLock()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02524">ECReleaseEditDC()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00086">ECUnlock()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l01552">ECWord()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02501">EFWANTRETURN</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00640">tagED::fAnsi</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00602">tagED::fFocus</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00628">tagED::fInDialogBox</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00601">tagED::fMouseDown</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00632">tagED::fReadOnly</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00615">tagED::fWrap</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01123">GETAPPVER</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00158">GetDlgItem()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01683">HanjaKeyHandler()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00584">tagED::hwnd</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00587">tagED::hwndParent</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00566">tagED::iCaretLine</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00626">ICH</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00564">tagED::ichCaret</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00563">tagED::ichMaxSel</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00561">tagED::ichMinSel</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00678">tagED::lineHeight</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l00919">MLChangeSelection()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l02531">MLChar()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l03379">MLEnsureCaretVisible()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l00443">MLIchToLine()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l00553">MLIchToXYPos()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l00374">MLLine()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l02792">MLMouseMotion()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l00144">MLMoveSelection()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l00264">MLMoveSelectionRestricted()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l00292">MLSetCaretPosition()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00509">NONEDOWN</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00702">tagED::pLpkEditCallout</a>, <a class="el" href="../../d1/d7/ntcftxt_8h-source.html#l00427">PostMessage()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00585">tagED::pwnd</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00586">tagED::rcFmt</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00652">SendMessage()</a>, <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00270">SendMessageWorker()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00511">SHFTDOWN</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00475">VER40</a>.
<p>
Referenced by <a class="el" href="../../d2/d4/editml_8c-source.html#l03457">MLEditWndProc()</a>.
<p>
<pre class="fragment"><div>02032 {
02033     HDC hdc;
02034     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> prevLine;
02035     POINT mousePt;
02036     <span class="keywordtype">int</span> defaultDlgId;
02037     <span class="keywordtype">int</span> iScrollAmt;
02038 
02039     <span class="comment">/*</span>
02040 <span class="comment">     * Variables we will use for redrawing the updated text</span>
02041 <span class="comment">     */</span>
02042 
02043     <span class="comment">/*</span>
02044 <span class="comment">     * new selection is specified by newMinSel, newMaxSel</span>
02045 <span class="comment">     */</span>
02046     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a> newMaxSel = ped-&gt;ichMaxSel;
02047     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a> newMinSel = ped-&gt;ichMinSel;
02048 
02049     <span class="comment">/*</span>
02050 <span class="comment">     * Flags for drawing the updated text</span>
02051 <span class="comment">     */</span>
02052     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> changeSelection = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
02053 
02054     <span class="comment">/*</span>
02055 <span class="comment">     * Comparisons we do often</span>
02056 <span class="comment">     */</span>
02057     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> MinEqMax = (newMaxSel == newMinSel);
02058     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> MinEqCar = (ped-&gt;ichCaret == newMinSel);
02059     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> MaxEqCar = (ped-&gt;ichCaret == newMaxSel);
02060 
02061     <span class="comment">/*</span>
02062 <span class="comment">     * State of shift and control keys.</span>
02063 <span class="comment">     */</span>
02064     <span class="keywordtype">int</span> scState;
02065 
02066     <span class="keywordflow">if</span> (ped-&gt;fMouseDown) {
02067 
02068         <span class="comment">/*</span>
02069 <span class="comment">         * If we are in the middle of a mousedown command, don't do anything.</span>
02070 <span class="comment">         */</span>
02071         <span class="keywordflow">return</span> ;
02072     }
02073 
02074     scState = <a class="code" href="../../d6/d0/usercli_8h.html#a481">ECGetModKeys</a>(keyMods);
02075 
02076     <span class="keywordflow">switch</span> (virtKeyCode) {
02077     <span class="keywordflow">case</span> VK_ESCAPE:
02078         <span class="keywordflow">if</span> (ped-&gt;fInDialogBox) {
02079 
02080             <span class="comment">/*</span>
02081 <span class="comment">             * This condition is removed because, if the dialogbox does not</span>
02082 <span class="comment">             * have a CANCEL button and if ESC is hit when focus is on a</span>
02083 <span class="comment">             * ML edit control the dialogbox must close whether it has cancel</span>
02084 <span class="comment">             * button or not to be consistent with SL edit control;</span>
02085 <span class="comment">             * DefDlgProc takes care of the disabled CANCEL button case.</span>
02086 <span class="comment">             * Fix for Bug #4123 -- 02/07/91 -- SANKAR --</span>
02087 <span class="comment">             */</span>
02088 <span class="preprocessor">#if 0</span>
02089 <span class="preprocessor"></span>            <span class="keywordflow">if</span> (<a class="code" href="../../d3/d9/client_2wow_8c.html#a6">GetDlgItem</a>(ped-&gt;hwndParent, IDCANCEL))
02090 <span class="preprocessor">#endif</span>
02091 <span class="preprocessor"></span>
02092                 <span class="comment">/*</span>
02093 <span class="comment">                 * User hit ESC...Send a close message (which in turn sends a</span>
02094 <span class="comment">                 * cancelID to the app in DefDialogProc...</span>
02095 <span class="comment">                 */</span>
02096                 <a class="code" href="../../d0/d8/ntcftxt_8h.html#a20">PostMessage</a>(ped-&gt;hwndParent, WM_CLOSE, 0, 0L);
02097         }
02098         <span class="keywordflow">return</span> ;
02099 
02100     <span class="keywordflow">case</span> VK_RETURN:
02101         <span class="keywordflow">if</span> (ped-&gt;fInDialogBox) {
02102 
02103             <span class="comment">/*</span>
02104 <span class="comment">             * If this multiline edit control is in a dialog box, then we want</span>
02105 <span class="comment">             * the RETURN key to be sent to the default dialog button (if there</span>
02106 <span class="comment">             * is one). CTRL-RETURN will insert a RETURN into the text. Note</span>
02107 <span class="comment">             * that CTRL-RETURN automatically translates into a linefeed (0x0A)</span>
02108 <span class="comment">             * and in the MLCharHandler, we handle this as if a return was</span>
02109 <span class="comment">             * entered.</span>
02110 <span class="comment">             */</span>
02111             <span class="keywordflow">if</span> (scState != <a class="code" href="../../d6/d0/usercli_8h.html#a77">CTRLDOWN</a>) {
02112 
02113                 <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(ped-&gt;pwnd, EFWANTRETURN)) {
02114 
02115                     <span class="comment">/*</span>
02116 <span class="comment">                     * This edit control wants cr to be inserted so break out of</span>
02117 <span class="comment">                     * case.</span>
02118 <span class="comment">                     */</span>
02119                     <span class="keywordflow">return</span> ;
02120                 }
02121 
02122                 defaultDlgId = (<span class="keywordtype">int</span>)(<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)LOWORD(<a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(ped-&gt;hwndParent,
02123                         DM_GETDEFID, 0, 0L));
02124                 <span class="keywordflow">if</span> (defaultDlgId) {
02125                     HWND hwnd = <a class="code" href="../../d3/d9/client_2wow_8c.html#a6">GetDlgItem</a>(ped-&gt;hwndParent, defaultDlgId);
02126                     <span class="keywordflow">if</span> (hwnd) {
02127                         <a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(ped-&gt;hwndParent, WM_NEXTDLGCTL, (WPARAM)hwnd, 1L);
02128                         <span class="keywordflow">if</span> (!ped-&gt;fFocus)
02129                             <a class="code" href="../../d0/d8/ntcftxt_8h.html#a20">PostMessage</a>(hwnd, WM_KEYDOWN, VK_RETURN, 0L);
02130                     }
02131                 }
02132             }
02133 
02134             <span class="keywordflow">return</span> ;
02135         }
02136         <span class="keywordflow">break</span>;
02137 
02138     <span class="keywordflow">case</span> VK_TAB:
02139 
02140         <span class="comment">/*</span>
02141 <span class="comment">         * If this multiline edit control is in a dialog box, then we want the</span>
02142 <span class="comment">         * TAB key to take you to the next control, shift TAB to take you to the</span>
02143 <span class="comment">         * previous control. We always want CTRL-TAB to insert a tab into the</span>
02144 <span class="comment">         * edit control regardless of weather or not we're in a dialog box.</span>
02145 <span class="comment">         */</span>
02146         <span class="keywordflow">if</span> (scState == <a class="code" href="../../d6/d0/usercli_8h.html#a77">CTRLDOWN</a>)
02147             <a class="code" href="../../d6/d0/usercli_8h.html#a503">MLChar</a>(ped, virtKeyCode, keyMods);
02148         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ped-&gt;fInDialogBox)
02149             <a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(ped-&gt;hwndParent, WM_NEXTDLGCTL, scState == SHFTDOWN, 0L);
02150 
02151         <span class="keywordflow">return</span> ;
02152 
02153     <span class="keywordflow">case</span> VK_LEFT:
02154         <span class="comment">//</span>
02155         <span class="comment">// If the caret isn't at the beginning, we can move left</span>
02156         <span class="comment">//</span>
02157         <span class="keywordflow">if</span> (ped-&gt;ichCaret) {
02158             <span class="comment">// Get new caret pos.</span>
02159             <span class="keywordflow">if</span> (scState &amp; <a class="code" href="../../d6/d0/usercli_8h.html#a77">CTRLDOWN</a>) {
02160                 <span class="comment">// Move caret word left</span>
02161                 <a class="code" href="../../d6/d0/usercli_8h.html#a438">ECWord</a>(ped, ped-&gt;ichCaret, TRUE, &amp;ped-&gt;ichCaret, NULL);
02162             } <span class="keywordflow">else</span> {
02163                 <span class="keywordflow">if</span> (ped-&gt;pLpkEditCallout) {
02164                     ped-&gt;ichCaret = <a class="code" href="../../d1/d5/editml_8c.html#a7">MLMoveSelectionRestricted</a>(ped, ped-&gt;ichCaret, TRUE);
02165                 } <span class="keywordflow">else</span> {
02166                     <span class="comment">// Move caret char left</span>
02167                     ped-&gt;ichCaret = <a class="code" href="../../d1/d5/editml_8c.html#a6">MLMoveSelection</a>(ped, ped-&gt;ichCaret, TRUE);
02168                 }
02169             }
02170 
02171             <span class="comment">// Get new selection</span>
02172             <span class="keywordflow">if</span> (scState &amp; <a class="code" href="../../d6/d0/usercli_8h.html#a78">SHFTDOWN</a>) {
02173                 <span class="keywordflow">if</span> (MaxEqCar &amp;&amp; !MinEqMax) {
02174                     <span class="comment">// Reduce selection</span>
02175                     newMaxSel = ped-&gt;ichCaret;
02176 
02177                     UserAssert(newMinSel == ped-&gt;ichMinSel);
02178                 } <span class="keywordflow">else</span> {
02179                     <span class="comment">// Extend selection</span>
02180                     newMinSel = ped-&gt;ichCaret;
02181                 }
02182             } <span class="keywordflow">else</span> {
02183                 <span class="comment">// Clear selection</span>
02184                 newMaxSel = newMinSel = ped-&gt;ichCaret;
02185             }
02186 
02187             changeSelection = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
02188         } <span class="keywordflow">else</span> {
02189             <span class="comment">//</span>
02190             <span class="comment">// If the user tries to move left and we are at the 0th</span>
02191             <span class="comment">// character and there is a selection, then cancel the</span>
02192             <span class="comment">// selection.</span>
02193             <span class="comment">//</span>
02194             <span class="keywordflow">if</span> ( (ped-&gt;ichMaxSel != ped-&gt;ichMinSel) &amp;&amp;
02195                 !(scState &amp; <a class="code" href="../../d6/d0/usercli_8h.html#a78">SHFTDOWN</a>) ) {
02196                 changeSelection = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
02197                 newMaxSel = newMinSel = ped-&gt;ichCaret;
02198             }
02199         }
02200         <span class="keywordflow">break</span>;
02201 
02202     <span class="keywordflow">case</span> VK_RIGHT:
02203         <span class="comment">//</span>
02204         <span class="comment">// If the caret isn't at the end, we can move right.</span>
02205         <span class="comment">//</span>
02206         <span class="keywordflow">if</span> (ped-&gt;ichCaret &lt; ped-&gt;cch) {
02207             <span class="comment">//</span>
02208             <span class="comment">// Get new caret pos.</span>
02209             <span class="comment">//</span>
02210             <span class="keywordflow">if</span> (scState &amp; <a class="code" href="../../d6/d0/usercli_8h.html#a77">CTRLDOWN</a>) {
02211                 <span class="comment">// Move caret word right</span>
02212                 <a class="code" href="../../d6/d0/usercli_8h.html#a438">ECWord</a>(ped, ped-&gt;ichCaret, FALSE, NULL, &amp;ped-&gt;ichCaret);
02213             } <span class="keywordflow">else</span> {
02214                 <span class="comment">// Move caret char right</span>
02215                 <span class="keywordflow">if</span> (ped-&gt;pLpkEditCallout) {
02216                     ped-&gt;ichCaret = <a class="code" href="../../d1/d5/editml_8c.html#a7">MLMoveSelectionRestricted</a>(ped, ped-&gt;ichCaret, FALSE);
02217                 } <span class="keywordflow">else</span> {
02218                     ped-&gt;ichCaret = <a class="code" href="../../d1/d5/editml_8c.html#a6">MLMoveSelection</a>(ped, ped-&gt;ichCaret, FALSE);
02219                 }
02220             }
02221 
02222             <span class="comment">//</span>
02223             <span class="comment">// Get new selection.</span>
02224             <span class="comment">//</span>
02225             <span class="keywordflow">if</span> (scState &amp; <a class="code" href="../../d6/d0/usercli_8h.html#a78">SHFTDOWN</a>) {
02226                 <span class="keywordflow">if</span> (MinEqCar &amp;&amp; !MinEqMax) {
02227                     <span class="comment">// Reduce selection</span>
02228                     newMinSel = ped-&gt;ichCaret;
02229 
02230                     UserAssert(newMaxSel == ped-&gt;ichMaxSel);
02231                 } <span class="keywordflow">else</span> {
02232                     <span class="comment">// Extend selection</span>
02233                     newMaxSel = ped-&gt;ichCaret;
02234                 }
02235             } <span class="keywordflow">else</span> {
02236                 <span class="comment">// Clear selection</span>
02237                 newMaxSel = newMinSel = ped-&gt;ichCaret;
02238             }
02239 
02240             changeSelection = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
02241         } <span class="keywordflow">else</span> {
02242             <span class="comment">//</span>
02243             <span class="comment">// If the user tries to move right and we are at the last</span>
02244             <span class="comment">// character and there is a selection, then cancel the</span>
02245             <span class="comment">// selection.</span>
02246             <span class="comment">//</span>
02247             <span class="keywordflow">if</span> ( (ped-&gt;ichMaxSel != ped-&gt;ichMinSel) &amp;&amp;
02248                 !(scState &amp; <a class="code" href="../../d6/d0/usercli_8h.html#a78">SHFTDOWN</a>) ) {
02249                 newMaxSel = newMinSel = ped-&gt;ichCaret;
02250                 changeSelection = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
02251             }
02252         }
02253         <span class="keywordflow">break</span>;
02254 
02255     <span class="keywordflow">case</span> VK_UP:
02256     <span class="keywordflow">case</span> VK_DOWN:
02257         <span class="keywordflow">if</span> (ped-&gt;cLines - 1 != ped-&gt;iCaretLine &amp;&amp;
02258                 ped-&gt;ichCaret == ped-&gt;chLines[ped-&gt;iCaretLine + 1])
02259             prevLine = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
02260         <span class="keywordflow">else</span>
02261             prevLine = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
02262 
02263         hdc = <a class="code" href="../../d6/d0/usercli_8h.html#a451">ECGetEditDC</a>(ped, TRUE);
02264         <a class="code" href="../../d6/d0/usercli_8h.html#a494">MLIchToXYPos</a>(ped, hdc, ped-&gt;ichCaret, prevLine, &amp;mousePt);
02265         <a class="code" href="../../d6/d0/usercli_8h.html#a452">ECReleaseEditDC</a>(ped, hdc, TRUE);
02266         mousePt.y += 1 + (virtKeyCode == VK_UP ? -ped-&gt;lineHeight : ped-&gt;lineHeight);
02267 
02268         <span class="keywordflow">if</span> (!(scState &amp; <a class="code" href="../../d6/d0/usercli_8h.html#a77">CTRLDOWN</a>)) {
02269             <span class="comment">//</span>
02270             <span class="comment">// Send fake mouse messages to handle this</span>
02271             <span class="comment">// If VK_SHIFT is down, extend selection &amp; move caret up/down</span>
02272             <span class="comment">// 1 line.  Otherwise, clear selection &amp; move caret.</span>
02273             <span class="comment">//</span>
02274             <a class="code" href="../../d6/d0/usercli_8h.html#a497">MLMouseMotion</a>(ped, WM_LBUTTONDOWN,
02275                             !(scState &amp; SHFTDOWN) ? 0 : MK_SHIFT, &amp;mousePt);
02276             <a class="code" href="../../d6/d0/usercli_8h.html#a497">MLMouseMotion</a>(ped, WM_LBUTTONUP,
02277                             !(scState &amp; SHFTDOWN) ? 0 : MK_SHIFT, &amp;mousePt);
02278         }
02279         <span class="keywordflow">break</span>;
02280 
02281     <span class="keywordflow">case</span> VK_HOME:
02282         <span class="comment">//</span>
02283         <span class="comment">// Update caret.</span>
02284         <span class="comment">//</span>
02285         <span class="keywordflow">if</span> (scState &amp; <a class="code" href="../../d6/d0/usercli_8h.html#a77">CTRLDOWN</a>) {
02286             <span class="comment">// Move caret to beginning of text.</span>
02287             ped-&gt;ichCaret = 0;
02288         } <span class="keywordflow">else</span> {
02289             <span class="comment">// Move caret to beginning of line.</span>
02290             ped-&gt;ichCaret = ped-&gt;chLines[ped-&gt;iCaretLine];
02291         }
02292 
02293         <span class="comment">//</span>
02294         <span class="comment">// Update selection.</span>
02295         <span class="comment">//</span>
02296         newMinSel = ped-&gt;ichCaret;
02297 
02298         <span class="keywordflow">if</span> (scState &amp; <a class="code" href="../../d6/d0/usercli_8h.html#a78">SHFTDOWN</a>) {
02299             <span class="keywordflow">if</span> (MaxEqCar &amp;&amp; !MinEqMax) {
02300                 <span class="keywordflow">if</span> (scState &amp; <a class="code" href="../../d6/d0/usercli_8h.html#a77">CTRLDOWN</a>)
02301                     newMaxSel = ped-&gt;ichMinSel;
02302                 <span class="keywordflow">else</span> {
02303                     newMinSel = ped-&gt;ichMinSel;
02304                     newMaxSel = ped-&gt;ichCaret;
02305                 }
02306             }
02307         } <span class="keywordflow">else</span> {
02308             <span class="comment">// Clear selection</span>
02309             newMaxSel = ped-&gt;ichCaret;
02310         }
02311 
02312         changeSelection = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
02313         <span class="keywordflow">break</span>;
02314 
02315     <span class="keywordflow">case</span> VK_END:
02316         <span class="comment">//</span>
02317         <span class="comment">// Update caret.</span>
02318         <span class="comment">//</span>
02319         <span class="keywordflow">if</span> (scState &amp; <a class="code" href="../../d6/d0/usercli_8h.html#a77">CTRLDOWN</a>) {
02320             <span class="comment">// Move caret to end of text.</span>
02321             ped-&gt;ichCaret = ped-&gt;cch;
02322         } <span class="keywordflow">else</span> {
02323             <span class="comment">// Move caret to end of line.</span>
02324             ped-&gt;ichCaret = ped-&gt;chLines[ped-&gt;iCaretLine] +
02325                 <a class="code" href="../../d6/d0/usercli_8h.html#a498">MLLine</a>(ped, ped-&gt;iCaretLine);
02326         }
02327 
02328         <span class="comment">// Update selection.</span>
02329         newMaxSel = ped-&gt;ichCaret;
02330 
02331         <span class="keywordflow">if</span> (scState &amp; <a class="code" href="../../d6/d0/usercli_8h.html#a78">SHFTDOWN</a>) {
02332             <span class="keywordflow">if</span> (MinEqCar &amp;&amp; !MinEqMax) {
02333                 <span class="comment">// Reduce selection</span>
02334                 <span class="keywordflow">if</span> (scState &amp; <a class="code" href="../../d6/d0/usercli_8h.html#a77">CTRLDOWN</a>) {
02335                     newMinSel = ped-&gt;ichMaxSel;
02336                 } <span class="keywordflow">else</span> {
02337                     newMinSel = ped-&gt;ichCaret;
02338                     newMaxSel = ped-&gt;ichMaxSel;
02339                 }
02340             }
02341         } <span class="keywordflow">else</span> {
02342             <span class="comment">// Clear selection</span>
02343             newMinSel = ped-&gt;ichCaret;
02344         }
02345 
02346         changeSelection = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
02347         <span class="keywordflow">break</span>;
02348 
02349     <span class="comment">// FE_IME // EC_INSERT_COMPOSITION_CHAR : MLKeyDown() : VK_HANJA support</span>
02350     <span class="keywordflow">case</span> VK_HANJA:
02351         <span class="keywordflow">if</span> ( <a class="code" href="../../d6/d0/usercli_8h.html#a476">HanjaKeyHandler</a>( ped ) ) {
02352             changeSelection = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
02353             newMinSel = ped-&gt;ichCaret;
02354             newMaxSel = ped-&gt;ichCaret + (ped-&gt;fAnsi ? 2 : 1);
02355         }
02356         <span class="keywordflow">break</span>;
02357 
02358     <span class="keywordflow">case</span> VK_PRIOR:
02359     <span class="keywordflow">case</span> VK_NEXT:
02360         <span class="keywordflow">if</span> (!(scState &amp; <a class="code" href="../../d6/d0/usercli_8h.html#a77">CTRLDOWN</a>)) {
02361             <span class="comment">/*</span>
02362 <span class="comment">             * Vertical scroll by one visual screen</span>
02363 <span class="comment">             */</span>
02364             hdc = <a class="code" href="../../d6/d0/usercli_8h.html#a451">ECGetEditDC</a>(ped, TRUE);
02365             <a class="code" href="../../d6/d0/usercli_8h.html#a494">MLIchToXYPos</a>(ped, hdc, ped-&gt;ichCaret, FALSE, &amp;mousePt);
02366             <a class="code" href="../../d6/d0/usercli_8h.html#a452">ECReleaseEditDC</a>(ped, hdc, TRUE);
02367             mousePt.y += 1;
02368 
02369             <a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(ped-&gt;hwnd, WM_VSCROLL, virtKeyCode == VK_PRIOR ? SB_PAGEUP : SB_PAGEDOWN, 0L);
02370 
02371             <span class="comment">/*</span>
02372 <span class="comment">             * Move the cursor there</span>
02373 <span class="comment">             */</span>
02374             <a class="code" href="../../d6/d0/usercli_8h.html#a497">MLMouseMotion</a>(ped, WM_LBUTTONDOWN, !(scState &amp; SHFTDOWN) ? 0 : MK_SHIFT, &amp;mousePt);
02375             <a class="code" href="../../d6/d0/usercli_8h.html#a497">MLMouseMotion</a>(ped, WM_LBUTTONUP,   !(scState &amp; SHFTDOWN) ? 0 : MK_SHIFT, &amp;mousePt);
02376 
02377         } <span class="keywordflow">else</span> {
02378             <span class="comment">/*</span>
02379 <span class="comment">             * Horizontal scroll by one screenful minus one char</span>
02380 <span class="comment">             */</span>
02381             iScrollAmt = ((ped-&gt;rcFmt.right - ped-&gt;rcFmt.left) / ped-&gt;aveCharWidth) - 1;
02382             <span class="keywordflow">if</span> (virtKeyCode == VK_PRIOR)
02383                 iScrollAmt *= -1; <span class="comment">/* For previous page */</span>
02384 
02385             <a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(ped-&gt;hwnd, WM_HSCROLL, MAKELONG(EM_LINESCROLL, iScrollAmt), 0);
02386             <span class="keywordflow">break</span>;
02387         }
02388         <span class="keywordflow">break</span>;
02389 
02390     <span class="keywordflow">case</span> VK_DELETE:
02391         <span class="keywordflow">if</span> (ped-&gt;fReadOnly)
02392             <span class="keywordflow">break</span>;
02393 
02394         <span class="keywordflow">switch</span> (scState) {
02395         <span class="keywordflow">case</span> <a class="code" href="../../d6/d0/usercli_8h.html#a76">NONEDOWN</a>:
02396 
02397             <span class="comment">/*</span>
02398 <span class="comment">             * Clear selection. If no selection, delete (clear) character</span>
02399 <span class="comment">             * right</span>
02400 <span class="comment">             */</span>
02401             <span class="keywordflow">if</span> ((ped-&gt;ichMaxSel &lt; ped-&gt;cch) &amp;&amp; (ped-&gt;ichMinSel == ped-&gt;ichMaxSel)) {
02402 
02403                 <span class="comment">/*</span>
02404 <span class="comment">                 * Move cursor forwards and send a backspace message...</span>
02405 <span class="comment">                 */</span>
02406                 <span class="keywordflow">if</span> (ped-&gt;pLpkEditCallout) {
02407                     ped-&gt;ichMinSel = ped-&gt;ichCaret;
02408                     ped-&gt;ichMaxSel = <a class="code" href="../../d1/d5/editml_8c.html#a7">MLMoveSelectionRestricted</a>(ped, ped-&gt;ichCaret, FALSE);
02409                 } <span class="keywordflow">else</span> {
02410                     ped-&gt;ichCaret = <a class="code" href="../../d1/d5/editml_8c.html#a6">MLMoveSelection</a>(ped, ped-&gt;ichCaret, FALSE);
02411                     ped-&gt;ichMaxSel = ped-&gt;ichMinSel = ped-&gt;ichCaret;
02412                 }
02413 
02414                 <span class="keywordflow">goto</span> DeleteAnotherChar;
02415             }
02416             <span class="keywordflow">break</span>;
02417 
02418         <span class="keywordflow">case</span> <a class="code" href="../../d6/d0/usercli_8h.html#a78">SHFTDOWN</a>:
02419 
02420             <span class="comment">/*</span>
02421 <span class="comment">             * CUT selection ie. remove and copy to clipboard, or if no</span>
02422 <span class="comment">             * selection, delete (clear) character left.</span>
02423 <span class="comment">             */</span>
02424             <span class="keywordflow">if</span> (ped-&gt;ichMinSel == ped-&gt;ichMaxSel) {
02425                 <span class="keywordflow">goto</span> DeleteAnotherChar;
02426             } <span class="keywordflow">else</span> {
02427                 <a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(ped-&gt;hwnd, WM_CUT, (UINT)0, 0L);
02428             }
02429 
02430             <span class="keywordflow">break</span>;
02431 
02432         <span class="keywordflow">case</span> <a class="code" href="../../d6/d0/usercli_8h.html#a77">CTRLDOWN</a>:
02433 
02434             <span class="comment">/*</span>
02435 <span class="comment">             * Clear selection, or delete to end of line if no selection</span>
02436 <span class="comment">             */</span>
02437             <span class="keywordflow">if</span> ((ped-&gt;ichMaxSel &lt; ped-&gt;cch) &amp;&amp; (ped-&gt;ichMinSel == ped-&gt;ichMaxSel)) {
02438                 ped-&gt;ichMaxSel = ped-&gt;ichCaret = ped-&gt;chLines[ped-&gt;iCaretLine] +
02439                                                  <a class="code" href="../../d6/d0/usercli_8h.html#a498">MLLine</a>(ped, ped-&gt;iCaretLine);
02440             }
02441             <span class="keywordflow">break</span>;
02442         }
02443 
02444         <span class="keywordflow">if</span> (!(scState &amp; <a class="code" href="../../d6/d0/usercli_8h.html#a78">SHFTDOWN</a>) &amp;&amp; (ped-&gt;ichMinSel != ped-&gt;ichMaxSel)) {
02445 
02446 DeleteAnotherChar:
02447             <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a150">GETAPPVER</a>() &gt;= <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a101">VER40</a>) {
02448                 <a class="code" href="../../d6/d0/usercli_8h.html#a503">MLChar</a>(ped, VK_BACK, 0);
02449             } <span class="keywordflow">else</span> {
02450                 <a class="code" href="../../d6/d0/usercli_8h.html#a600">SendMessageWorker</a>(ped-&gt;pwnd, WM_CHAR, VK_BACK, 0, ped-&gt;fAnsi);
02451             }
02452         }
02453 
02454         <span class="comment">/*</span>
02455 <span class="comment">         * No need to update text or selection since BACKSPACE message does it</span>
02456 <span class="comment">         * for us.</span>
02457 <span class="comment">         */</span>
02458         <span class="keywordflow">break</span>;
02459 
02460     <span class="keywordflow">case</span> VK_INSERT:
02461         <span class="keywordflow">if</span> (scState == <a class="code" href="../../d6/d0/usercli_8h.html#a77">CTRLDOWN</a> || scState == <a class="code" href="../../d6/d0/usercli_8h.html#a78">SHFTDOWN</a>) {
02462 
02463             <span class="comment">/*</span>
02464 <span class="comment">             * if CTRLDOWN Copy current selection to clipboard</span>
02465 <span class="comment">             */</span>
02466 
02467             <span class="comment">/*</span>
02468 <span class="comment">             * if SHFTDOWN Paste clipboard</span>
02469 <span class="comment">             */</span>
02470             <a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(ped-&gt;hwnd, (UINT)(scState == CTRLDOWN ? WM_COPY : WM_PASTE), 0, 0);
02471         }
02472         <span class="keywordflow">break</span>;
02473     }
02474 
02475     <span class="keywordflow">if</span> (changeSelection) {
02476         hdc = <a class="code" href="../../d6/d0/usercli_8h.html#a451">ECGetEditDC</a>(ped, FALSE);
02477         <a class="code" href="../../d6/d0/usercli_8h.html#a513">MLChangeSelection</a>(ped, hdc, newMinSel, newMaxSel);
02478 
02479         <span class="comment">/*</span>
02480 <span class="comment">         * Set the caret's line</span>
02481 <span class="comment">         */</span>
02482         ped-&gt;iCaretLine = <a class="code" href="../../d6/d0/usercli_8h.html#a495">MLIchToLine</a>(ped, ped-&gt;ichCaret);
02483 
02484         <span class="keywordflow">if</span> (virtKeyCode == VK_END &amp;&amp;
02485                 <span class="comment">// Next line: Win95 Bug#11822, EditControl repaint (Sankar)</span>
02486                 (ped-&gt;ichCaret == ped-&gt;chLines[ped-&gt;iCaretLine]) &amp;&amp;
02487                 ped-&gt;ichCaret &lt; ped-&gt;cch &amp;&amp;
02488                 ped-&gt;fWrap &amp;&amp; ped-&gt;iCaretLine &gt; 0) {
02489             LPSTR pText = <a class="code" href="../../d6/d0/usercli_8h.html#a433">ECLock</a>(ped);
02490 
02491             <span class="comment">/*</span>
02492 <span class="comment">             * Handle moving to the end of a word wrapped line. This keeps the</span>
02493 <span class="comment">             * cursor from falling to the start of the next line if we have word</span>
02494 <span class="comment">             * wrapped and there is no CRLF.</span>
02495 <span class="comment">             */</span>
02496             <span class="keywordflow">if</span> ( ped-&gt;fAnsi ) {
02497                 <span class="keywordflow">if</span> (*(WORD UNALIGNED *)(pText +
02498                         ped-&gt;chLines[ped-&gt;iCaretLine] - 2) != 0x0A0D) {
02499                     ped-&gt;iCaretLine--;
02500                 }
02501             } <span class="keywordflow">else</span> {
02502                 <span class="keywordflow">if</span> (*(<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> UNALIGNED *)(pText +
02503                      (ped-&gt;chLines[ped-&gt;iCaretLine] - 2)*ped-&gt;cbChar) != 0x000A000D) {
02504                     ped-&gt;iCaretLine--;
02505                 }
02506             }
02507             <a class="code" href="../../d6/d0/usercli_8h.html#a434">ECUnlock</a>(ped);
02508         }
02509 
02510         <span class="comment">/*</span>
02511 <span class="comment">         * Since drawtext sets the caret position</span>
02512 <span class="comment">         */</span>
02513         <a class="code" href="../../d6/d0/usercli_8h.html#a493">MLSetCaretPosition</a>(ped, hdc);
02514         <a class="code" href="../../d6/d0/usercli_8h.html#a452">ECReleaseEditDC</a>(ped, hdc, FALSE);
02515 
02516         <span class="comment">/*</span>
02517 <span class="comment">         * Make sure we can see the cursor</span>
02518 <span class="comment">         */</span>
02519         <a class="code" href="../../d6/d0/usercli_8h.html#a485">MLEnsureCaretVisible</a>(ped);
02520     }
02521 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a498" doxytag="usercli.h::MLLine" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a> MLLine           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d4/editml_8c-source.html#l00374">374</a> of file <a class="el" href="../../d2/d4/editml_8c-source.html">editml.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l00557">tagED::cch</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00662">tagED::chLines</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00559">tagED::cLines</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00052">ECLock()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00086">ECUnlock()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00640">tagED::fAnsi</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00626">ICH</a>.
<p>
Referenced by <a class="el" href="../../d2/d4/editml_8c-source.html#l00085">MLCalcXOffset()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l03991">MLDrawText()</a>, <a class="el" href="../../d6/d4/edmlrare_8c-source.html#l00266">MLGetLine()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l00553">MLIchToXYPos()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l02028">MLKeyDown()</a>, <a class="el" href="../../d6/d4/edmlrare_8c-source.html#l00334">MLLineLength()</a>, and <a class="el" href="../../d2/d4/editml_8c-source.html#l00689">MLMouseToIch()</a>.
<p>
<pre class="fragment"><div>00377 {
00378     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a> result;
00379 
00380     UserAssert(lineNumber &lt; ped-&gt;cLines);
00381 
00382     <span class="keywordflow">if</span> (lineNumber &gt;= ped-&gt;cLines)
00383         <span class="keywordflow">return</span> (0);
00384 
00385     <span class="keywordflow">if</span> (lineNumber == ped-&gt;cLines - 1) {
00386 
00387         <span class="comment">/*</span>
00388 <span class="comment">         * Since we can't have a CRLF on the last line</span>
00389 <span class="comment">         */</span>
00390         <span class="keywordflow">return</span> (ped-&gt;cch - ped-&gt;chLines[ped-&gt;cLines - 1]);
00391     } <span class="keywordflow">else</span> {
00392         result = ped-&gt;chLines[lineNumber + 1] - ped-&gt;chLines[lineNumber];
00393         RIPMSG1(RIP_VERBOSE, <span class="stringliteral">"MLLine result=%d\n"</span>, result);
00394 
00395         <span class="comment">/*</span>
00396 <span class="comment">         * Now check for CRLF or CRCRLF at end of line</span>
00397 <span class="comment">         */</span>
00398         <span class="keywordflow">if</span> (result &gt; 1) {
00399             <span class="keywordflow">if</span> (ped-&gt;fAnsi) {
00400                 LPSTR pText;
00401 
00402                 pText = <a class="code" href="../../d6/d0/usercli_8h.html#a433">ECLock</a>(ped) + ped-&gt;chLines[lineNumber + 1] - 2;
00403                 <span class="keywordflow">if</span> (*(WORD UNALIGNED *)pText == 0x0A0D) {
00404                     result -= 2;
00405                     <span class="keywordflow">if</span> (result &amp;&amp; *(--pText) == 0x0D)
00406                         <span class="comment">/*</span>
00407 <span class="comment">                         * In case there was a CRCRLF</span>
00408 <span class="comment">                         */</span>
00409                         result--;
00410                 }
00411             } <span class="keywordflow">else</span> { <span class="comment">// !fAnsi</span>
00412                 LPWSTR pwText;
00413 
00414                 pwText = (LPWSTR)<a class="code" href="../../d6/d0/usercli_8h.html#a433">ECLock</a>(ped) +
00415                         (ped-&gt;chLines[lineNumber + 1] - 2);
00416                 <span class="keywordflow">if</span> (*(<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> UNALIGNED *)pwText == 0x000A000D) {
00417                     result = result - 2;
00418                     <span class="keywordflow">if</span> (result &amp;&amp; *(--pwText) == 0x0D)
00419                         <span class="comment">/*</span>
00420 <span class="comment">                         * In case there was a CRCRLF</span>
00421 <span class="comment">                         */</span>
00422                         result--;
00423                 }
00424 
00425             }
00426             <a class="code" href="../../d6/d0/usercli_8h.html#a434">ECUnlock</a>(ped);
00427         }
00428     }
00429     <span class="keywordflow">return</span> (result);
00430 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a511" doxytag="usercli.h::MLLineIndex" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a> MLLineIndex           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d4/edmlrare_8c-source.html#l00306">306</a> of file <a class="el" href="../../d6/d4/edmlrare_8c-source.html">edmlrare.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l00662">tagED::chLines</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00559">tagED::cLines</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00566">tagED::iCaretLine</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00626">ICH</a>.
<p>
Referenced by <a class="el" href="../../d2/d4/editml_8c-source.html#l03457">MLEditWndProc()</a>.
<p>
<pre class="fragment"><div>00309 {
00310     <span class="keywordflow">if</span> (iLine == -1)
00311         iLine = ped-&gt;iCaretLine;
00312     <span class="keywordflow">if</span> (iLine &lt; ped-&gt;cLines) {
00313         <span class="keywordflow">return</span> ped-&gt;chLines[iLine];
00314     } <span class="keywordflow">else</span> {
00315         RIPERR1(ERROR_INVALID_PARAMETER,
00316                 RIP_WARNING,
00317                 <span class="stringliteral">"Invalid parameter \"iLine\" (%ld) to MLLineIndex"</span>,
00318                 iLine);
00319 
00320         <span class="keywordflow">return</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a>)-1;
00321     }
00322 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a520" doxytag="usercli.h::MLLineLength" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a> MLLineLength           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d4/edmlrare_8c-source.html#l00334">334</a> of file <a class="el" href="../../d6/d4/edmlrare_8c-source.html">edmlrare.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l00662">tagED::chLines</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00626">ICH</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00563">tagED::ichMaxSel</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00561">tagED::ichMinSel</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l00443">MLIchToLine()</a>, and <a class="el" href="../../d2/d4/editml_8c-source.html#l00374">MLLine()</a>.
<p>
Referenced by <a class="el" href="../../d2/d4/editml_8c-source.html#l03457">MLEditWndProc()</a>.
<p>
<pre class="fragment"><div>00337 {
00338     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a> il1, il2;
00339     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a> temp;
00340 
00341     <span class="keywordflow">if</span> (ich != 0xFFFFFFFF)
00342         <span class="keywordflow">return</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a498">MLLine</a>(ped, <a class="code" href="../../d6/d0/usercli_8h.html#a495">MLIchToLine</a>(ped, ich)));
00343 
00344     <span class="comment">/*</span>
00345 <span class="comment">     * Find length of lines corresponding to current selection</span>
00346 <span class="comment">     */</span>
00347     il1 = <a class="code" href="../../d6/d0/usercli_8h.html#a495">MLIchToLine</a>(ped, ped-&gt;ichMinSel);
00348     il2 = <a class="code" href="../../d6/d0/usercli_8h.html#a495">MLIchToLine</a>(ped, ped-&gt;ichMaxSel);
00349     <span class="keywordflow">if</span> (il1 == il2)
00350         <span class="keywordflow">return</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a498">MLLine</a>(ped, il1) - (ped-&gt;ichMaxSel - ped-&gt;ichMinSel));
00351 
00352     temp = ped-&gt;ichMinSel - ped-&gt;chLines[il1];
00353     temp += <a class="code" href="../../d6/d0/usercli_8h.html#a498">MLLine</a>(ped, il2);
00354     temp -= (ped-&gt;ichMaxSel - ped-&gt;chLines[il2]);
00355 
00356     <span class="keywordflow">return</span> temp;
00357 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a497" doxytag="usercli.h::MLMouseMotion" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void MLMouseMotion           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPPOINT&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d4/editml_8c-source.html#l02792">2792</a> of file <a class="el" href="../../d2/d4/editml_8c-source.html">editml.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00662">tagED::chLines</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02492">ECGetEditDC()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l04083">ECIsDBCSLeadByte()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00052">ECLock()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02524">ECReleaseEditDC()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00086">ECUnlock()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l01552">ECWord()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00640">tagED::fAnsi</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00611">tagED::fDBCS</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00602">tagED::fFocus</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00601">tagED::fMouseDown</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00051">gpsi</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00584">tagED::hwnd</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00566">tagED::iCaretLine</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00626">ICH</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00564">tagED::ichCaret</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00563">tagED::ichMaxSel</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00561">tagED::ichMinSel</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00700">tagED::ichStartMaxSel</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00699">tagED::ichStartMinSel</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00310">IDSYS_SCROLL</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l00919">MLChangeSelection()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l03379">MLEnsureCaretVisible()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l00689">MLMouseToIch()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l00292">MLSetCaretPosition()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01563">NtUserKillSystemTimer</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01570">NtUserReleaseCapture</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05822">NtUserSetCapture()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05902">NtUserSetFocus()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l08554">NtUserSetSystemTimer()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00596">tagED::prevKeys</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00593">tagED::ptPrevMouse</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00586">tagED::rcFmt</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>.
<p>
Referenced by <a class="el" href="../../d2/d4/editml_8c-source.html#l03457">MLEditWndProc()</a>, and <a class="el" href="../../d2/d4/editml_8c-source.html#l02028">MLKeyDown()</a>.
<p>
<pre class="fragment"><div>02797 {
02798     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fChangedSel = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
02799 
02800     HDC hdc = <a class="code" href="../../d6/d0/usercli_8h.html#a451">ECGetEditDC</a>(ped, TRUE);
02801 
02802     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a> ichMaxSel = ped-&gt;ichMaxSel;
02803     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a> ichMinSel = ped-&gt;ichMinSel;
02804 
02805     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a> mouseCch;
02806     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a> mouseLine;
02807     <span class="keywordtype">int</span> i, j;
02808     LONG  ll, lh;
02809 
02810     mouseCch = <a class="code" href="../../d1/d5/editml_8c.html#a13">MLMouseToIch</a>(ped, hdc, mousePt, &amp;mouseLine);
02811 
02812     <span class="comment">/*</span>
02813 <span class="comment">     * Save for timer</span>
02814 <span class="comment">     */</span>
02815     ped-&gt;ptPrevMouse = *mousePt;
02816     ped-&gt;prevKeys = virtKeyDown;
02817 
02818     <span class="keywordflow">switch</span> (message) {
02819     <span class="keywordflow">case</span> WM_LBUTTONDBLCLK:
02820         <span class="comment">/*</span>
02821 <span class="comment">         * if shift key is down, extend selection to word we double clicked on</span>
02822 <span class="comment">         * else clear current selection and select word.</span>
02823 <span class="comment">         */</span>
02824         <span class="comment">// LiZ -- 5/5/93</span>
02825         <span class="keywordflow">if</span> (ped-&gt;fAnsi &amp;&amp; ped-&gt;fDBCS) {
02826             LPSTR pText = <a class="code" href="../../d6/d0/usercli_8h.html#a433">ECLock</a>(ped);
02827             <a class="code" href="../../d6/d0/usercli_8h.html#a438">ECWord</a>(ped,ped-&gt;ichCaret,
02828                    <a class="code" href="../../d8/d4/editec_8c.html#a55">ECIsDBCSLeadByte</a>(ped, *(pText+(ped-&gt;ichCaret)))
02829                         ? FALSE :
02830                           (ped-&gt;ichCaret == ped-&gt;chLines[ped-&gt;iCaretLine]
02831                               ? FALSE : TRUE), &amp;ll, &amp;lh);
02832             <a class="code" href="../../d6/d0/usercli_8h.html#a434">ECUnlock</a>(ped);
02833         } <span class="keywordflow">else</span> {
02834             <a class="code" href="../../d6/d0/usercli_8h.html#a438">ECWord</a>(ped, mouseCch, !(mouseCch == ped-&gt;chLines[mouseLine]), &amp;ll, &amp;lh);
02835         }
02836         <span class="keywordflow">if</span> (!(virtKeyDown &amp; MK_SHIFT)) {
02837             <span class="comment">// If shift key isn't down, move caret to mouse point and clear</span>
02838             <span class="comment">// old selection</span>
02839             ichMinSel = ll;
02840             ichMaxSel = ped-&gt;ichCaret = lh;
02841         } <span class="keywordflow">else</span> {
02842             <span class="comment">// Shiftkey is down so we want to maintain the current selection</span>
02843             <span class="comment">// (if any) and just extend or reduce it</span>
02844             <span class="keywordflow">if</span> (ped-&gt;ichMinSel == ped-&gt;ichCaret) {
02845                 ichMinSel = ped-&gt;ichCaret = ll;
02846                 <a class="code" href="../../d6/d0/usercli_8h.html#a438">ECWord</a>(ped, ichMaxSel, TRUE, &amp;ll, &amp;lh);
02847             } <span class="keywordflow">else</span> {
02848                 ichMaxSel = ped-&gt;ichCaret = lh;
02849                 <a class="code" href="../../d6/d0/usercli_8h.html#a438">ECWord</a>(ped, ichMinSel, FALSE, &amp;ll, &amp;lh);
02850             }
02851         }
02852 
02853         ped-&gt;ichStartMinSel = ll;
02854         ped-&gt;ichStartMaxSel = lh;
02855 
02856         <span class="keywordflow">goto</span> InitDragSelect;
02857 
02858     <span class="keywordflow">case</span> WM_MOUSEMOVE:
02859         <span class="keywordflow">if</span> (ped-&gt;fMouseDown) {
02860 
02861             <span class="comment">/*</span>
02862 <span class="comment">             * Set the system timer to automatically scroll when mouse is</span>
02863 <span class="comment">             * outside of the client rectangle. Speed of scroll depends on</span>
02864 <span class="comment">             * distance from window.</span>
02865 <span class="comment">             */</span>
02866             i = mousePt-&gt;y &lt; 0 ? -mousePt-&gt;y : mousePt-&gt;y - ped-&gt;rcFmt.bottom;
02867             j = <a class="code" href="../../d1/d8/clglobal_8c.html#a4">gpsi</a>-&gt;dtScroll - ((<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)i &lt;&lt; 4);
02868             <span class="keywordflow">if</span> (j &lt; 1)
02869                 j = 1;
02870             <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a299">NtUserSetSystemTimer</a>(ped-&gt;hwnd, IDSYS_SCROLL, (UINT)j, NULL);
02871 
02872             fChangedSel = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
02873 
02874             <span class="comment">// Extend selection, move caret right</span>
02875             <span class="keywordflow">if</span> (ped-&gt;ichStartMinSel || ped-&gt;ichStartMaxSel) {
02876                 <span class="comment">// We're in WORD SELECT mode</span>
02877                 <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fReverse = (mouseCch &lt;= ped-&gt;ichStartMinSel);
02878                 <a class="code" href="../../d6/d0/usercli_8h.html#a438">ECWord</a>(ped, mouseCch, !fReverse, &amp;ll, &amp;lh);
02879                 <span class="keywordflow">if</span> (fReverse) {
02880                     ichMinSel = ped-&gt;ichCaret = ll;
02881                     ichMaxSel = ped-&gt;ichStartMaxSel;
02882                 } <span class="keywordflow">else</span> {
02883                     ichMinSel = ped-&gt;ichStartMinSel;
02884                     ichMaxSel = ped-&gt;ichCaret = lh;
02885                 }
02886             } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((ped-&gt;ichMinSel == ped-&gt;ichCaret) &amp;&amp;
02887                     (ped-&gt;ichMinSel != ped-&gt;ichMaxSel))
02888                 <span class="comment">// Reduce selection extent</span>
02889                 ichMinSel = ped-&gt;ichCaret = mouseCch;
02890             <span class="keywordflow">else</span>
02891                 <span class="comment">// Extend selection extent</span>
02892                 ichMaxSel = ped-&gt;ichCaret = mouseCch;
02893 
02894             ped-&gt;iCaretLine = mouseLine;
02895         }
02896         <span class="keywordflow">break</span>;
02897 
02898     <span class="keywordflow">case</span> WM_LBUTTONDOWN:
02899         ll = lh = mouseCch;
02900 
02901         <span class="keywordflow">if</span> (!(virtKeyDown &amp; MK_SHIFT)) {
02902             <span class="comment">// If shift key isn't down, move caret to mouse point and clear</span>
02903             <span class="comment">// old selection</span>
02904             ichMinSel = ichMaxSel = ped-&gt;ichCaret = mouseCch;
02905         } <span class="keywordflow">else</span> {
02906             <span class="comment">// Shiftkey is down so we want to maintain the current selection</span>
02907             <span class="comment">// (if any) and just extend or reduce it</span>
02908             <span class="keywordflow">if</span> (ped-&gt;ichMinSel == ped-&gt;ichCaret)
02909                 ichMinSel = ped-&gt;ichCaret = mouseCch;
02910             <span class="keywordflow">else</span>
02911                 ichMaxSel = ped-&gt;ichCaret = mouseCch;
02912         }
02913 
02914         ped-&gt;ichStartMinSel = ped-&gt;ichStartMaxSel = 0;
02915 
02916 InitDragSelect:
02917         ped-&gt;iCaretLine = mouseLine;
02918 
02919         ped-&gt;fMouseDown = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
02920         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a221">NtUserSetCapture</a>(ped-&gt;hwnd);
02921         ped-&gt;fMouseDown = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
02922         fChangedSel = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
02923 
02924         <span class="comment">// Set the timer so that we can scroll automatically when the mouse</span>
02925         <span class="comment">// is moved outside the window rectangle.</span>
02926         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a299">NtUserSetSystemTimer</a>(ped-&gt;hwnd, IDSYS_SCROLL, <a class="code" href="../../d1/d8/clglobal_8c.html#a4">gpsi</a>-&gt;dtScroll, NULL);
02927         <span class="keywordflow">break</span>;
02928 
02929     <span class="keywordflow">case</span> WM_LBUTTONUP:
02930         <span class="keywordflow">if</span> (ped-&gt;fMouseDown) {
02931 
02932             <span class="comment">/*</span>
02933 <span class="comment">             * Kill the timer so that we don't do auto mouse moves anymore</span>
02934 <span class="comment">             */</span>
02935             <a class="code" href="../../d6/d0/usercli_8h.html#a218">NtUserKillSystemTimer</a>(ped-&gt;hwnd, IDSYS_SCROLL);
02936             <a class="code" href="../../d6/d0/usercli_8h.html#a225">NtUserReleaseCapture</a>();
02937             <a class="code" href="../../d6/d0/usercli_8h.html#a493">MLSetCaretPosition</a>(ped, hdc);
02938             ped-&gt;fMouseDown = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
02939         }
02940         <span class="keywordflow">break</span>;
02941     }
02942 
02943 
02944     <span class="keywordflow">if</span> (fChangedSel) {
02945         <a class="code" href="../../d6/d0/usercli_8h.html#a513">MLChangeSelection</a>(ped, hdc, ichMinSel, ichMaxSel);
02946         <a class="code" href="../../d6/d0/usercli_8h.html#a485">MLEnsureCaretVisible</a>(ped);
02947     }
02948 
02949     <a class="code" href="../../d6/d0/usercli_8h.html#a452">ECReleaseEditDC</a>(ped, hdc, TRUE);
02950 
02951     <span class="keywordflow">if</span> (!ped-&gt;fFocus &amp;&amp; (message == WM_LBUTTONDOWN)) {
02952 
02953         <span class="comment">/*</span>
02954 <span class="comment">         * If we don't have the focus yet, get it</span>
02955 <span class="comment">         */</span>
02956         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a225">NtUserSetFocus</a>(ped-&gt;hwnd);
02957     }
02958 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a488" doxytag="usercli.h::MLPaintABlock" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void MLPaintABlock           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HDC&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a505" doxytag="usercli.h::MLPasteText" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a> MLPasteText           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d4/editml_8c-source.html#l02720">2720</a> of file <a class="el" href="../../d2/d4/editml_8c-source.html">editml.c</a>.
<p>
References <a class="el" href="../../d9/d3/editec_8c-source.html#l01977">ECEmptyUndo()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00640">tagED::fAnsi</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00608">tagED::fAutoVScroll</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l00390">GetClipboardData()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00584">tagED::hwnd</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00626">ICH</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l01367">MLDeleteText()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l01040">MLInsertText()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l03252">NtUserCloseClipboard()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05886">NtUserSetCursor()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00540">OpenClipboard()</a>, <a class="el" href="../../d2/d7/regtest_8c.html#a2">strlen()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00128">USERGLOBALLOCK</a>, and <a class="el" href="../../d7/d9/usercli_8h-source.html#l00123">USERGLOBALUNLOCK</a>.
<p>
Referenced by <a class="el" href="../../d2/d4/editml_8c-source.html#l03457">MLEditWndProc()</a>.
<p>
<pre class="fragment"><div>02722 {
02723     HANDLE hData;
02724     LPSTR lpchClip;
02725     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a> cchAdded = 0;
02726     HCURSOR hCursorOld;
02727 
02728 <span class="preprocessor">#ifdef UNDO_CLEANUP           // #ifdef Added in Chicago  - johnl</span>
02729 <span class="preprocessor"></span>    <span class="keywordflow">if</span> (!ped-&gt;fAutoVScroll) {
02730 
02731         <span class="comment">/*</span>
02732 <span class="comment">         * Empty the undo buffer if this edit control limits the amount of text</span>
02733 <span class="comment">         * the user can add to the window rect. This is so that we can undo this</span>
02734 <span class="comment">         * operation if doing in causes us to exceed the window boundaries.</span>
02735 <span class="comment">         */</span>
02736         <a class="code" href="../../d6/d0/usercli_8h.html#a444">ECEmptyUndo</a>(ped);
02737     }
02738 <span class="preprocessor">#endif</span>
02739 <span class="preprocessor"></span>
02740     hCursorOld = <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a224">NtUserSetCursor</a>(LoadCursor(NULL, IDC_WAIT));
02741 
02742     <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d9/client_2ntstubs_8c.html#a17">OpenClipboard</a>(ped-&gt;hwnd))
02743         <span class="keywordflow">goto</span> PasteExitNoCloseClip;
02744 
02745     <span class="keywordflow">if</span> (!(hData = <a class="code" href="../../d3/d8/client_8c.html#a42">GetClipboardData</a>(ped-&gt;fAnsi ? CF_TEXT : CF_UNICODETEXT)) ||
02746             (GlobalFlags(hData) == GMEM_INVALID_HANDLE)) {
02747         RIPMSG1(RIP_WARNING, <span class="stringliteral">"MLPasteText(): couldn't get a valid handle(%x)"</span>, hData);
02748         <span class="keywordflow">goto</span> PasteExit;
02749     }
02750 
02751     <span class="comment">/*</span>
02752 <span class="comment">     * See if any text should be deleted</span>
02753 <span class="comment">     */</span>
02754     <a class="code" href="../../d6/d0/usercli_8h.html#a484">MLDeleteText</a>(ped);
02755 
02756     <a class="code" href="../../d6/d0/usercli_8h.html#a4">USERGLOBALLOCK</a>(hData, lpchClip);
02757     <span class="keywordflow">if</span> (lpchClip == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
02758         RIPMSG1(RIP_WARNING, <span class="stringliteral">"MLPasteText: USERGLOBALLOCK(%x) failed."</span>, hData);
02759         <span class="keywordflow">goto</span> PasteExit;
02760     }
02761 
02762     <span class="comment">/*</span>
02763 <span class="comment">     * Get the length of the addition.</span>
02764 <span class="comment">     */</span>
02765     <span class="keywordflow">if</span> (ped-&gt;fAnsi)
02766         cchAdded = <a class="code" href="../../d2/d7/regtest_8c.html#a2">strlen</a>(lpchClip);
02767     <span class="keywordflow">else</span>
02768         cchAdded = wcslen((LPWSTR)lpchClip);
02769 
02770     <span class="comment">/*</span>
02771 <span class="comment">     * Insert the text (MLInsertText checks line length)</span>
02772 <span class="comment">     */</span>
02773     cchAdded = <a class="code" href="../../d6/d0/usercli_8h.html#a483">MLInsertText</a>(ped, lpchClip, cchAdded, FALSE);
02774 
02775     <a class="code" href="../../d6/d0/usercli_8h.html#a1">USERGLOBALUNLOCK</a>(hData);
02776 
02777 PasteExit:
02778     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a129">NtUserCloseClipboard</a>();
02779 
02780 PasteExitNoCloseClip:
02781     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a224">NtUserSetCursor</a>(hCursorOld);
02782 
02783     <span class="keywordflow">return</span> (cchAdded);
02784 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a496" doxytag="usercli.h::MLRepaintChangedSelection" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void MLRepaintChangedSelection           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HDC&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a521" doxytag="usercli.h::MLReplaceSel" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void MLReplaceSel           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPSTR&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d4/editml_8c-source.html#l01309">1309</a> of file <a class="el" href="../../d2/d4/editml_8c-source.html">editml.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l01977">ECEmptyUndo()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l01955">ECSaveUndo()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00640">tagED::fAnsi</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00584">tagED::hwnd</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00626">ICH</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00277">IsWindow()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l01367">MLDeleteText()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l01040">MLInsertText()</a>, <a class="el" href="../../d6/d4/edmlrare_8c-source.html#l00556">MLUndo()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00540">Pundo</a>, and <a class="el" href="../../d2/d7/regtest_8c.html#a2">strlen()</a>.
<p>
Referenced by <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01287">ECResultStrHandler()</a>, and <a class="el" href="../../d2/d4/editml_8c-source.html#l03457">MLEditWndProc()</a>.
<p>
<pre class="fragment"><div>01310 {
01311     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a>  cchText;
01312 
01313     <span class="comment">//</span>
01314     <span class="comment">// Delete text, which will put it into the clean undo buffer.</span>
01315     <span class="comment">//</span>
01316     <a class="code" href="../../d6/d0/usercli_8h.html#a444">ECEmptyUndo</a>(<a class="code" href="../../d6/d0/usercli_8h.html#a85">Pundo</a>(ped));
01317     <a class="code" href="../../d6/d0/usercli_8h.html#a484">MLDeleteText</a>(ped);
01318 
01319     <span class="comment">//</span>
01320     <span class="comment">// B#3356</span>
01321     <span class="comment">// Some apps do "clear" by selecting all of the text, then replacing</span>
01322     <span class="comment">// it with "", in which case MLInsertText() will return 0.  But that</span>
01323     <span class="comment">// doesn't mean failure...</span>
01324     <span class="comment">//</span>
01325     <span class="keywordflow">if</span> ( ped-&gt;fAnsi )
01326         cchText = <a class="code" href="../../d2/d7/regtest_8c.html#a2">strlen</a>(lpText);
01327     <span class="keywordflow">else</span>
01328         cchText = wcslen((LPWSTR)lpText);
01329 
01330     <span class="keywordflow">if</span> (cchText ) {
01331         <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fFailed;
01332         <a class="code" href="../../d9/d8/structtagUNDO.html">UNDO</a> undo;
01333         HWND hwndSave;
01334 
01335         <span class="comment">//</span>
01336         <span class="comment">// B#1385,1427</span>
01337         <span class="comment">// Save undo buffer, but DO NOT CLEAR IT.  We want to restore it</span>
01338         <span class="comment">// if insertion fails due to OOM.</span>
01339         <span class="comment">//</span>
01340         <a class="code" href="../../d6/d0/usercli_8h.html#a445">ECSaveUndo</a>(<a class="code" href="../../d6/d0/usercli_8h.html#a85">Pundo</a>(ped), (<a class="code" href="../../d9/d8/structtagUNDO.html">PUNDO</a>)&amp;undo, FALSE);
01341 
01342         hwndSave = ped-&gt;hwnd;
01343         fFailed = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>) !<a class="code" href="../../d6/d0/usercli_8h.html#a483">MLInsertText</a>(ped, lpText, cchText, FALSE);
01344         <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d9/client_2wow_8c.html#a11">IsWindow</a>(hwndSave))
01345             <span class="keywordflow">return</span>;
01346 
01347         <span class="keywordflow">if</span> (fFailed) {
01348             <span class="comment">//</span>
01349             <span class="comment">// UNDO the previous edit</span>
01350             <span class="comment">//</span>
01351             <a class="code" href="../../d6/d0/usercli_8h.html#a445">ECSaveUndo</a>((<a class="code" href="../../d9/d8/structtagUNDO.html">PUNDO</a>)&amp;undo, <a class="code" href="../../d6/d0/usercli_8h.html#a85">Pundo</a>(ped), FALSE);
01352             <a class="code" href="../../d6/d0/usercli_8h.html#a501">MLUndo</a>(ped);
01353         }
01354     }
01355 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a517" doxytag="usercli.h::MLScroll" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LONG MLScroll           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d4/editml_8c-source.html#l02966">2966</a> of file <a class="el" href="../../d2/d4/editml_8c-source.html">editml.c</a>.
<p>
References <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00924">_GetClientRect()</a>, <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00860">_IsWindowVisible()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00677">tagED::aveCharWidth</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00559">tagED::cLines</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00243">CopyRect</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l01412">ECGetBrush()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02492">ECGetEditDC()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02429">ECNotifyParent()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02524">ECReleaseEditDC()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02452">ECSetEditClip()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00664">tagED::format</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00649">tagED::fRtoLReading</a>, <a class="el" href="../../d4/d7/winmgrc_8c-source.html#l00383">GetScrollInfo()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00674">tagED::hFont</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00584">tagED::hwnd</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00587">tagED::hwndParent</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00574">tagED::ichLinesOnScreen</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00570">tagED::ichScreenStart</a>, <a class="el" href="../../d4/d5/rect_8c-source.html#l00191">IntersectRect()</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00678">tagED::lineHeight</a>, <a class="el" href="../../d9/d5/sertl_8c-source.html#l00332">max</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00670">tagED::maxPixelWidth</a>, <a class="el" href="../../d6/d3/acpitabl_8h-source.html#l00366">min</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l00022">ML_REFRESH</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l00292">MLSetCaretPosition()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05330">NtUserInvalidateRect()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06824">NtUserScrollDC()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05986">NtUserSetScrollInfo()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00702">tagED::pLpkEditCallout</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00585">tagED::pwnd</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00586">tagED::rcFmt</a>, <a class="el" href="../../d4/d7/winmgrc_8c-source.html#l01473">ScrollWindowEx()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, <a class="el" href="../../d4/d5/rect_8c-source.html#l00241">UnionRect()</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l03608">UpdateWindow()</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00120">ValidateHwnd</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02406">WFHSCROLL</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02407">WFVSCROLL</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02319">WFWIN40COMPAT</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00696">tagED::wLeftMargin</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00697">tagED::wRightMargin</a>, and <a class="el" href="../../d7/d9/usercli_8h-source.html#l00575">tagED::xOffset</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/editec_8c-source.html#l04185">ECUpdateFormat()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l01562">MLBuildchLines()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l03457">MLEditWndProc()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l03379">MLEnsureCaretVisible()</a>, and <a class="el" href="../../d2/d4/editml_8c-source.html#l00056">MLSize()</a>.
<p>
<pre class="fragment"><div>02972 {
02973     SCROLLINFO  si;
02974     <span class="keywordtype">int</span>         dx = 0;
02975     <span class="keywordtype">int</span>         dy = 0;
02976     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>        fIncludeLeftMargin;
02977     <span class="keywordtype">int</span>         newPos;
02978     <span class="keywordtype">int</span>         oldPos;
02979     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>        fUp = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
02980     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>        wFlag;
02981     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>       dwTime = 0;
02982 
02983     <span class="keywordflow">if</span> (fRedraw &amp;&amp; (cmd != <a class="code" href="../../d1/d5/editml_8c.html#a1">ML_REFRESH</a>)) {
02984         <a class="code" href="../../d3/d8/client_8c.html#a140">UpdateWindow</a>(ped-&gt;hwnd);
02985     }
02986 
02987     <span class="keywordflow">if</span> (ped-&gt;pLpkEditCallout &amp;&amp; ped-&gt;fRtoLReading &amp;&amp; !fVertical
02988         &amp;&amp; ped-&gt;maxPixelWidth &gt; ped-&gt;rcFmt.right - ped-&gt;rcFmt.left) {
02989         <span class="comment">/*</span>
02990 <span class="comment">         * Horizontal scoll of a right oriented window with a scrollbar.</span>
02991 <span class="comment">         * Map the logical xOffset to visual coordinates.</span>
02992 <span class="comment">         */</span>
02993         oldPos = ped-&gt;maxPixelWidth
02994                  - ((<span class="keywordtype">int</span>)ped-&gt;xOffset + ped-&gt;rcFmt.right - ped-&gt;rcFmt.left);
02995     } <span class="keywordflow">else</span>
02996         oldPos = (<span class="keywordtype">int</span>) (fVertical ? ped-&gt;ichScreenStart : ped-&gt;xOffset);
02997 
02998     fIncludeLeftMargin = (ped-&gt;xOffset == 0);
02999 
03000     <span class="keywordflow">switch</span> (cmd) {
03001         <span class="keywordflow">case</span> <a class="code" href="../../d1/d5/editml_8c.html#a1">ML_REFRESH</a>:
03002             newPos = oldPos;
03003             <span class="keywordflow">break</span>;
03004 
03005         <span class="keywordflow">case</span> EM_GETTHUMB:
03006             <span class="keywordflow">return</span>(oldPos);
03007 
03008         <span class="keywordflow">case</span> SB_THUMBTRACK:
03009         <span class="keywordflow">case</span> SB_THUMBPOSITION:
03010 
03011             <span class="comment">/*</span>
03012 <span class="comment">             * If the edit contains more than 0xFFFF lines</span>
03013 <span class="comment">             * it means that the scrolbar can return a position</span>
03014 <span class="comment">             * that cannot fit in a WORD (16 bits), so use</span>
03015 <span class="comment">             * GetScrollInfo (which is slower) in this case.</span>
03016 <span class="comment">             */</span>
03017             <span class="keywordflow">if</span> (ped-&gt;cLines &lt; 0xFFFF) {
03018                 newPos = iAmt;
03019             } <span class="keywordflow">else</span> {
03020                 SCROLLINFO si;
03021 
03022                 si.cbSize   = <span class="keyword">sizeof</span>(SCROLLINFO);
03023                 si.fMask    = SIF_TRACKPOS;
03024 
03025                 <a class="code" href="../../d3/d8/winmgrc_8c.html#a21">GetScrollInfo</a>( ped-&gt;hwnd, SB_VERT, &amp;si);
03026 
03027                 newPos = si.nTrackPos;
03028             }
03029             <span class="keywordflow">break</span>;
03030 
03031         <span class="keywordflow">case</span> SB_TOP:      <span class="comment">// == SB_LEFT</span>
03032             newPos = 0;
03033             <span class="keywordflow">break</span>;
03034 
03035         <span class="keywordflow">case</span> SB_BOTTOM:   <span class="comment">// == SB_RIGHT</span>
03036             <span class="keywordflow">if</span> (fVertical)
03037                 newPos = ped-&gt;cLines;
03038             <span class="keywordflow">else</span>
03039                 newPos = ped-&gt;maxPixelWidth;
03040             <span class="keywordflow">break</span>;
03041 
03042         <span class="keywordflow">case</span> SB_PAGEUP:   <span class="comment">// == SB_PAGELEFT</span>
03043             fUp = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
03044         <span class="keywordflow">case</span> SB_PAGEDOWN: <span class="comment">// == SB_PAGERIGHT</span>
03045 
03046             <span class="keywordflow">if</span> (fVertical)
03047                 iAmt = ped-&gt;ichLinesOnScreen - 1;
03048             <span class="keywordflow">else</span>
03049                 iAmt = (ped-&gt;rcFmt.right - ped-&gt;rcFmt.left) - 1;
03050 
03051             <span class="keywordflow">if</span> (iAmt == 0)
03052                 iAmt++;
03053 
03054             <span class="keywordflow">if</span> (fUp)
03055                 iAmt = -iAmt;
03056             <span class="keywordflow">goto</span> AddDelta;
03057 
03058         <span class="keywordflow">case</span> SB_LINEUP:   <span class="comment">// == SB_LINELEFT</span>
03059             fUp = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
03060         <span class="keywordflow">case</span> SB_LINEDOWN: <span class="comment">// == SB_LINERIGHT</span>
03061 
03062             dwTime = iAmt;
03063 
03064             iAmt = 1;
03065 
03066             <span class="keywordflow">if</span> (fUp)
03067                 iAmt = -iAmt;
03068 
03069             <span class="comment">//   |             |</span>
03070             <span class="comment">//   |  FALL THRU  |</span>
03071             <span class="comment">//   V             V</span>
03072 
03073         <span class="keywordflow">case</span> EM_LINESCROLL:
03074             <span class="keywordflow">if</span> (!fVertical)
03075                 iAmt *= ped-&gt;aveCharWidth;
03076 
03077 AddDelta:
03078             newPos = oldPos + iAmt;
03079             <span class="keywordflow">break</span>;
03080 
03081         <span class="keywordflow">default</span>:
03082             <span class="keywordflow">return</span>(0<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>);
03083     }
03084 
03085     <span class="keywordflow">if</span> (fVertical) {
03086         <span class="keywordflow">if</span> (si.nMax = ped-&gt;cLines)
03087             si.nMax--;
03088 
03089         <span class="keywordflow">if</span> (!ped-&gt;hwndParent ||
03090             <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(<a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(ped-&gt;hwndParent), WFWIN40COMPAT))
03091             si.nPage = ped-&gt;ichLinesOnScreen;
03092         <span class="keywordflow">else</span>
03093             si.nPage = 0;
03094 
03095         wFlag = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a641">WFVSCROLL</a>;
03096     } <span class="keywordflow">else</span>         {
03097         si.nMax  = ped-&gt;maxPixelWidth;
03098         si.nPage = ped-&gt;rcFmt.right - ped-&gt;rcFmt.left;
03099         wFlag = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a640">WFHSCROLL</a>;
03100     }
03101 
03102     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(<a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(ped-&gt;hwnd), wFlag)) {
03103         si.cbSize = <span class="keyword">sizeof</span>(SCROLLINFO);
03104         si.fMask = SIF_ALL | SIF_DISABLENOSCROLL;
03105         si.nMin  = 0;
03106         si.nPos = newPos;
03107         newPos = <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a228">NtUserSetScrollInfo</a>(ped-&gt;hwnd, fVertical ? SB_VERT : SB_HORZ,
03108                                      &amp;si, fRedraw);
03109     } <span class="keywordflow">else</span> {
03110         <span class="comment">// BOGUS -- this is duped code from ScrollBar code</span>
03111         <span class="comment">// but it's for the case when we want to limit the position without</span>
03112         <span class="comment">// actually having the scroll bar</span>
03113         <span class="keywordtype">int</span> iMaxPos;
03114 
03115         <span class="comment">// Clip page to 0, range + 1</span>
03116         si.nPage = <a class="code" href="../../d8/d6/sertl_8c.html#a1">max</a>(<a class="code" href="../../d5/d4/acpitabl_8h.html#a69">min</a>((<span class="keywordtype">int</span>)si.nPage, si.nMax + 1), 0);
03117 
03118 
03119         iMaxPos = si.nMax - (si.nPage ? si.nPage - 1 : 0);
03120         newPos = <a class="code" href="../../d5/d4/acpitabl_8h.html#a69">min</a>(<a class="code" href="../../d8/d6/sertl_8c.html#a1">max</a>(newPos, 0), iMaxPos);
03121     }
03122 
03123     oldPos -= newPos;
03124 
03125     <span class="keywordflow">if</span> (!oldPos)
03126         <span class="keywordflow">return</span>(0<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>);
03127 
03128     <span class="keywordflow">if</span> (ped-&gt;pLpkEditCallout &amp;&amp; ped-&gt;fRtoLReading &amp;&amp; !fVertical
03129         &amp;&amp; ped-&gt;maxPixelWidth &gt; ped-&gt;rcFmt.right - ped-&gt;rcFmt.left) {
03130         <span class="comment">// Map visual oldPos and newPos back to logical coordinates</span>
03131         newPos = ped-&gt;maxPixelWidth
03132                  - (newPos + ped-&gt;rcFmt.right - ped-&gt;rcFmt.left);
03133         oldPos = -oldPos;
03134         <span class="keywordflow">if</span> (newPos&lt;0) {
03135             <span class="comment">// Compensate for scroll bar returning pos &gt; max-page</span>
03136             oldPos += newPos;
03137             newPos=0;
03138         }
03139     }
03140 
03141     <span class="keywordflow">if</span> (fVertical) {
03142         ped-&gt;ichScreenStart = newPos;
03143         dy = oldPos * ped-&gt;lineHeight;
03144     } <span class="keywordflow">else</span> {
03145         ped-&gt;xOffset = newPos;
03146         dx = oldPos;
03147     }
03148 
03149     <span class="keywordflow">if</span> (cmd != SB_THUMBTRACK)
03150         <span class="comment">// We don't want to notify the parent of thumbtracking since they might</span>
03151         <span class="comment">// try to set the thumb position to something bogus.</span>
03152         <span class="comment">// NOTEPAD used to be guilty of this -- but I rewrote it so it's not.</span>
03153         <span class="comment">// The question is WHO ELSE does this? (jeffbog)</span>
03154         <a class="code" href="../../d6/d0/usercli_8h.html#a449">ECNotifyParent</a>(ped, fVertical ? EN_VSCROLL : EN_HSCROLL);
03155 
03156     <span class="keywordflow">if</span> (fRedraw &amp;&amp; <a class="code" href="../../d6/d9/rtl_2wow_8c.html#a17">_IsWindowVisible</a>(ped-&gt;pwnd)) {
03157         RECT    rc;
03158         RECT    rcUpdate;
03159         RECT    rcClipRect;
03160         HDC     hdc;
03161 
03162         <a class="code" href="../../d6/d9/rtl_2wow_8c.html#a19">_GetClientRect</a>(ped-&gt;pwnd, &amp;rc);
03163         <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a33">CopyRect</a>(&amp;rcClipRect, &amp;ped-&gt;rcFmt);
03164 
03165         <span class="keywordflow">if</span> (fVertical) { <span class="comment">// Is this a vertical scroll?</span>
03166             rcClipRect.left -= ped-&gt;wLeftMargin;
03167             rcClipRect.right += ped-&gt;wRightMargin;
03168         }
03169 
03170         <a class="code" href="../../d3/d6/rect_8c.html#a8">IntersectRect</a>(&amp;rc, &amp;rc, &amp;rcClipRect);
03171         rc.bottom++;
03172 
03173         <span class="comment">/*</span>
03174 <span class="comment">         * Chicago has this HideCaret but there doesn't appear to be a</span>
03175 <span class="comment">         * corresponding ShowCaret, so we lose the Caret under NT when the</span>
03176 <span class="comment">         * EC scrolls - Johnl</span>
03177 <span class="comment">         *</span>
03178 <span class="comment">         * HideCaret(ped-&gt;hwnd);</span>
03179 <span class="comment">         */</span>
03180 
03181         hdc = <a class="code" href="../../d6/d0/usercli_8h.html#a451">ECGetEditDC</a>(ped, FALSE);
03182         <a class="code" href="../../d6/d0/usercli_8h.html#a450">ECSetEditClip</a>(ped, hdc, fIncludeLeftMargin);
03183         <span class="keywordflow">if</span> (ped-&gt;hFont)
03184             SelectObject(hdc, ped-&gt;hFont);
03185         <a class="code" href="../../d6/d0/usercli_8h.html#a480">ECGetBrush</a>(ped, hdc);
03186 
03187         <span class="keywordflow">if</span> (ped-&gt;pLpkEditCallout &amp;&amp; !fVertical) {
03188             <span class="comment">// Horizontal scroll with complex script support</span>
03189             <span class="keywordtype">int</span> xFarOffset = ped-&gt;xOffset + ped-&gt;rcFmt.right - ped-&gt;rcFmt.left;
03190 
03191             rc = ped-&gt;rcFmt;
03192             <span class="keywordflow">if</span> (dwTime != 0)
03193                 <a class="code" href="../../d3/d8/winmgrc_8c.html#a38">ScrollWindowEx</a>(ped-&gt;hwnd, ped-&gt;fRtoLReading ? -dx : dx, dy, NULL, NULL, NULL,
03194                         &amp;rcUpdate, MAKELONG(SW_SMOOTHSCROLL | SW_SCROLLCHILDREN, dwTime));
03195             <span class="keywordflow">else</span>
03196                 <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a257">NtUserScrollDC</a>(hdc, ped-&gt;fRtoLReading ? -dx : dx, dy,
03197                                &amp;rc, &amp;rc, NULL, &amp;rcUpdate);
03198 
03199             <span class="comment">// Handle margins: Blank if clipped by horizontal scrolling,</span>
03200             <span class="comment">// display otherwise.</span>
03201             <span class="keywordflow">if</span> (ped-&gt;wLeftMargin) {
03202                 rc.left  = ped-&gt;rcFmt.left - ped-&gt;wLeftMargin;
03203                 rc.right = ped-&gt;rcFmt.left;
03204                 <span class="keywordflow">if</span> (   (ped-&gt;format != ES_LEFT)   <span class="comment">// Always display margin for centred or far-aligned text</span>
03205                     ||  <span class="comment">// Display LTR left margin if first character fully visible</span>
03206                         (!ped-&gt;fRtoLReading &amp;&amp; ped-&gt;xOffset == 0)
03207                     ||  <span class="comment">// Display RTL left margin if last character fully visible</span>
03208                         (ped-&gt;fRtoLReading &amp;&amp; xFarOffset &gt;= ped-&gt;maxPixelWidth)) {
03209                     <a class="code" href="../../d3/d6/rect_8c.html#a9">UnionRect</a>(&amp;rcUpdate, &amp;rcUpdate, &amp;rc);
03210                 } <span class="keywordflow">else</span> {
03211                     ExtTextOutW(hdc, rc.left, rc.top,
03212                         ETO_CLIPPED | ETO_OPAQUE | ETO_GLYPH_INDEX,
03213                         &amp;rc, L<span class="stringliteral">""</span>, 0, 0L);
03214                 }
03215             }
03216             <span class="keywordflow">if</span> (ped-&gt;wRightMargin) {
03217                 rc.left  = ped-&gt;rcFmt.right;
03218                 rc.right = ped-&gt;rcFmt.right + ped-&gt;wRightMargin;
03219                 <span class="keywordflow">if</span> (   (ped-&gt;format != ES_LEFT)   <span class="comment">// Always display margin for centred or far-aligned text</span>
03220                     ||  <span class="comment">// Display RTL right margin if first character fully visible</span>
03221                         (ped-&gt;fRtoLReading &amp;&amp; ped-&gt;xOffset == 0)
03222                     ||  <span class="comment">// Display LTR right margin if last character fully visible</span>
03223                         (!ped-&gt;fRtoLReading &amp;&amp; xFarOffset &gt;= ped-&gt;maxPixelWidth)) {
03224                     <a class="code" href="../../d3/d6/rect_8c.html#a9">UnionRect</a>(&amp;rcUpdate, &amp;rcUpdate, &amp;rc);
03225                 } <span class="keywordflow">else</span> {
03226                     ExtTextOutW(hdc, rc.left, rc.top,
03227                         ETO_CLIPPED | ETO_OPAQUE | ETO_GLYPH_INDEX,
03228                         &amp;rc, L<span class="stringliteral">""</span>, 0, 0L);
03229                 }
03230             }
03231         } <span class="keywordflow">else</span> {
03232             <span class="keywordflow">if</span> (dwTime != 0)
03233                 <a class="code" href="../../d3/d8/winmgrc_8c.html#a38">ScrollWindowEx</a>(ped-&gt;hwnd, dx, dy, NULL, NULL, NULL,
03234                         &amp;rcUpdate, MAKELONG(SW_SMOOTHSCROLL | SW_SCROLLCHILDREN, dwTime));
03235             <span class="keywordflow">else</span>
03236                 <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a257">NtUserScrollDC</a>(hdc, dx, dy, &amp;rc, &amp;rc, NULL, &amp;rcUpdate);
03237 
03238             <span class="comment">// If we need to wipe out the left margin area</span>
03239             <span class="keywordflow">if</span> (ped-&gt;wLeftMargin &amp;&amp; !fVertical) {
03240                 <span class="comment">// Calculate the rectangle to be wiped out</span>
03241                 rc.right = rc.left;
03242                 rc.left = <a class="code" href="../../d8/d6/sertl_8c.html#a1">max</a>(0, ped-&gt;rcFmt.left - ped-&gt;wLeftMargin);
03243                 <span class="keywordflow">if</span> (rc.left &lt; rc.right) {
03244                     <span class="keywordflow">if</span> (fIncludeLeftMargin &amp;&amp; (ped-&gt;xOffset != 0)) {
03245 
03246                         ExtTextOutW(hdc, rc.left, rc.top, ETO_CLIPPED | ETO_OPAQUE,
03247                             &amp;rc, L<span class="stringliteral">""</span>, 0, 0L);
03248                     } <span class="keywordflow">else</span>
03249                         <span class="keywordflow">if</span>((!fIncludeLeftMargin) &amp;&amp; (ped-&gt;xOffset == 0))
03250                             <a class="code" href="../../d3/d6/rect_8c.html#a9">UnionRect</a>(&amp;rcUpdate, &amp;rcUpdate, &amp;rc);
03251                 }
03252             }
03253         }
03254         <a class="code" href="../../d6/d0/usercli_8h.html#a493">MLSetCaretPosition</a>(ped,hdc);
03255 
03256         <a class="code" href="../../d6/d0/usercli_8h.html#a452">ECReleaseEditDC</a>(ped, hdc, FALSE);
03257         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a206">NtUserInvalidateRect</a>(ped-&gt;hwnd, &amp;rcUpdate,
03258                 ((ped-&gt;ichLinesOnScreen + ped-&gt;ichScreenStart) &gt;= ped-&gt;cLines));
03259         <a class="code" href="../../d3/d8/client_8c.html#a140">UpdateWindow</a>(ped-&gt;hwnd);
03260     }
03261 
03262     <span class="keywordflow">return</span>(MAKELONG(-oldPos, 1));
03263 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a493" doxytag="usercli.h::MLSetCaretPosition" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void MLSetCaretPosition           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HDC&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d4/editml_8c-source.html#l00292">292</a> of file <a class="el" href="../../d2/d4/editml_8c-source.html">editml.c</a>.
<p>
References <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00860">_IsWindowVisible()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00662">tagED::chLines</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00559">tagED::cLines</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00243">CopyRect</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01051">ECGetCaretWidth</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01085">ECImmSetCompositionWindow()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00642">tagED::f40Compat</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00635">tagED::fCaretHidden</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00602">tagED::fFocus</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02537">fpImmIsIME</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00615">tagED::fWrap</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00608">GetClientRect()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00584">tagED::hwnd</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00566">tagED::iCaretLine</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00704">tagED::iCaretOffset</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00626">ICH</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00564">tagED::ichCaret</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00574">tagED::ichLinesOnScreen</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00570">tagED::ichScreenStart</a>, <a class="el" href="../../d4/d5/rect_8c-source.html#l00191">IntersectRect()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00678">tagED::lineHeight</a>, <a class="el" href="../../d9/d5/sertl_8c-source.html#l00332">max</a>, <a class="el" href="../../d6/d3/acpitabl_8h-source.html#l00366">min</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l00553">MLIchToXYPos()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01571">NtUserSetCaretPos</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00702">tagED::pLpkEditCallout</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00585">tagED::pwnd</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00586">tagED::rcFmt</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01124">THREAD_HKL</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01225">ECSetCaretHandler()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l00919">MLChangeSelection()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l03991">MLDrawText()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l03457">MLEditWndProc()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l02028">MLKeyDown()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l02792">MLMouseMotion()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l02966">MLScroll()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l03274">MLSetFocus()</a>, and <a class="el" href="../../d6/d4/edmlrare_8c-source.html#l00368">MLSetSelection()</a>.
<p>
<pre class="fragment"><div>00295 {
00296     POINT position;
00297     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> prevLine;
00298     <span class="keywordtype">int</span>  x = -20000;
00299     <span class="keywordtype">int</span>  y = -20000;
00300 
00301     <span class="comment">/*</span>
00302 <span class="comment">     * We will only position the caret if we have the focus since we don't want</span>
00303 <span class="comment">     * to move the caret while another window could own it.</span>
00304 <span class="comment">     */</span>
00305     <span class="keywordflow">if</span> (!ped-&gt;fFocus || !<a class="code" href="../../d6/d9/rtl_2wow_8c.html#a17">_IsWindowVisible</a>(ped-&gt;pwnd))
00306          <span class="keywordflow">return</span>;
00307 
00308     <span class="comment">/*</span>
00309 <span class="comment">     * Find the position of the caret</span>
00310 <span class="comment">     */</span>
00311     <span class="keywordflow">if</span> (!ped-&gt;fCaretHidden &amp;&amp;
00312         ((<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a>) ped-&gt;iCaretLine &gt;= ped-&gt;ichScreenStart) &amp;&amp;
00313         ((<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a>) ped-&gt;iCaretLine &lt;  (ped-&gt;ichScreenStart + ped-&gt;ichLinesOnScreen))) {
00314 
00315         RECT    rcRealFmt;
00316 
00317         <span class="keywordflow">if</span> (ped-&gt;f40Compat)
00318         {
00319             <a class="code" href="../../d3/d9/client_2wow_8c.html#a24">GetClientRect</a>(ped-&gt;hwnd, &amp;rcRealFmt);
00320             <a class="code" href="../../d3/d6/rect_8c.html#a8">IntersectRect</a>(&amp;rcRealFmt, &amp;rcRealFmt, &amp;ped-&gt;rcFmt);
00321         } <span class="keywordflow">else</span> {
00322             <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a33">CopyRect</a>(&amp;rcRealFmt, &amp;ped-&gt;rcFmt);
00323         }
00324 
00325         <span class="keywordflow">if</span> (ped-&gt;cLines - 1 != ped-&gt;iCaretLine &amp;&amp; ped-&gt;ichCaret == ped-&gt;chLines[ped-&gt;iCaretLine + 1]) {
00326             prevLine = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00327         } <span class="keywordflow">else</span> {
00328             prevLine = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00329         }
00330 
00331         <a class="code" href="../../d6/d0/usercli_8h.html#a494">MLIchToXYPos</a>(ped, hdc, ped-&gt;ichCaret, prevLine, &amp;position);
00332 
00333         <span class="keywordflow">if</span> ( (position.y &gt;= rcRealFmt.top) &amp;&amp;
00334              (position.y &lt;= rcRealFmt.bottom - ped-&gt;lineHeight)) {
00335             <span class="keywordtype">int</span> xPos = position.x;
00336             <span class="keywordtype">int</span> cxCaret = <a class="code" href="../../d6/d0/usercli_8h.html#a149">ECGetCaretWidth</a>();
00337 
00338             <span class="keywordflow">if</span> (ped-&gt;fWrap ||
00339                 ((xPos &gt; (rcRealFmt.left - cxCaret)) &amp;&amp;
00340                  (xPos &lt;= rcRealFmt.right))) {
00341                 <span class="comment">// Make sure the caret is in the visible region if word</span>
00342                 <span class="comment">// wrapping. This is so that the caret will be visible if the</span>
00343                 <span class="comment">// line ends with a space.</span>
00344                 x = <a class="code" href="../../d8/d6/sertl_8c.html#a1">max</a>(xPos, rcRealFmt.left);
00345                 x = <a class="code" href="../../d5/d4/acpitabl_8h.html#a69">min</a>(x, rcRealFmt.right - cxCaret);
00346                 y = position.y;
00347             }
00348         }
00349     }
00350 
00351     <span class="keywordflow">if</span> (ped-&gt;pLpkEditCallout) {
00352         <a class="code" href="../../d6/d0/usercli_8h.html#a226">NtUserSetCaretPos</a>(x + ped-&gt;iCaretOffset, y);
00353     } <span class="keywordflow">else</span> {
00354         <a class="code" href="../../d6/d0/usercli_8h.html#a226">NtUserSetCaretPos</a>(x, y);
00355     }
00356 
00357     <span class="comment">// FE_IME : MLSetCaretPosition -- ImmSetCompositionWindow(CFS_RECT)</span>
00358     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a312">fpImmIsIME</a>(<a class="code" href="../../d6/d0/usercli_8h.html#a151">THREAD_HKL</a>())) {
00359         <span class="keywordflow">if</span> (x != -20000 &amp;&amp; y != -20000) {
00360             <a class="code" href="../../d6/d0/usercli_8h.html#a471">ECImmSetCompositionWindow</a>(ped, x, y);
00361         }
00362     }
00363 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a509" doxytag="usercli.h::MLSetHandle" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void MLSetHandle           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HANDLE&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d4/edmlrare_8c-source.html#l00222">222</a> of file <a class="el" href="../../d6/d4/edmlrare_8c-source.html">edmlrare.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l00661">tagED::cbChar</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00557">tagED::cch</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00553">tagED::cchAlloc</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00484">CCHALLOCEXTRA</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00052">ECLock()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02547">ECResetTextInfo()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00086">ECUnlock()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00640">tagED::fAnsi</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00708">tagED::fEncoded</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00706">tagED::hInstance</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00552">tagED::hText</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00626">ICH</a>, <a class="el" href="../../d9/d5/ntuser_2client_2globals_8h-source.html#l00109">LOCALREALLOC</a>, <a class="el" href="../../d9/d5/ntuser_2client_2globals_8h-source.html#l00115">LOCALSIZE</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d2/d7/regtest_8c.html#a2">strlen()</a>.
<p>
Referenced by <a class="el" href="../../d2/d4/editml_8c-source.html#l03457">MLEditWndProc()</a>.
<p>
<pre class="fragment"><div>00225 {
00226     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a> newCch;
00227 
00228     ped-&gt;cch = ped-&gt;cchAlloc =
00229             <a class="code" href="../../d8/d6/ntuser_2client_2globals_8h.html#a6">LOCALSIZE</a>(ped-&gt;hText = hNewText, ped-&gt;hInstance) / ped-&gt;cbChar;
00230     ped-&gt;fEncoded = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00231 
00232     <span class="keywordflow">if</span> (ped-&gt;cch) {
00233 
00234         <span class="comment">/*</span>
00235 <span class="comment">         * We have to do it this way in case the app gives us a zero size handle</span>
00236 <span class="comment">         */</span>
00237         <span class="keywordflow">if</span> (ped-&gt;fAnsi)
00238             ped-&gt;cch = <a class="code" href="../../d2/d7/regtest_8c.html#a2">strlen</a>(<a class="code" href="../../d6/d0/usercli_8h.html#a433">ECLock</a>(ped));
00239         <span class="keywordflow">else</span>
00240             ped-&gt;cch = wcslen((LPWSTR)<a class="code" href="../../d6/d0/usercli_8h.html#a433">ECLock</a>(ped));
00241         <a class="code" href="../../d6/d0/usercli_8h.html#a434">ECUnlock</a>(ped);
00242     }
00243 
00244     newCch = (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a>)(ped-&gt;cch + <a class="code" href="../../d6/d0/usercli_8h.html#a71">CCHALLOCEXTRA</a>);
00245 
00246     <span class="comment">/*</span>
00247 <span class="comment">     * We do this LocalReAlloc in case the app changed the size of the handle</span>
00248 <span class="comment">     */</span>
00249     <span class="keywordflow">if</span> (<a class="code" href="../../d8/d6/ntuser_2client_2globals_8h.html#a3">LOCALREALLOC</a>(ped-&gt;hText, newCch*ped-&gt;cbChar, 0, ped-&gt;hInstance, NULL))
00250         ped-&gt;cchAlloc = newCch;
00251 
00252     <a class="code" href="../../d6/d0/usercli_8h.html#a448">ECResetTextInfo</a>(ped);
00253 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a514" doxytag="usercli.h::MLSetRectHandler" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void MLSetRectHandler           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPRECT&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a506" doxytag="usercli.h::MLSetSelection" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void MLSetSelection           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d4/edmlrare_8c-source.html#l00368">368</a> of file <a class="el" href="../../d6/d4/edmlrare_8c-source.html">edmlrare.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l00557">tagED::cch</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l04133">ECAdjustIch()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02492">ECGetEditDC()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00052">ECLock()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02524">ECReleaseEditDC()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00086">ECUnlock()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00640">tagED::fAnsi</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00611">tagED::fDBCS</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00566">tagED::iCaretLine</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00564">tagED::ichCaret</a>, <a class="el" href="../../d6/d3/acpitabl_8h-source.html#l00366">min</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l00919">MLChangeSelection()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l03379">MLEnsureCaretVisible()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l00443">MLIchToLine()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l00292">MLSetCaretPosition()</a>, and <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>.
<p>
Referenced by <a class="el" href="../../d2/d4/editml_8c-source.html#l03457">MLEditWndProc()</a>, and <a class="el" href="../../d6/d4/edmlrare_8c-source.html#l00556">MLUndo()</a>.
<p>
<pre class="fragment"><div>00373 {
00374     HDC hdc;
00375 
00376     <span class="keywordflow">if</span> (ichMinSel == 0xFFFFFFFF) {
00377 
00378         <span class="comment">/*</span>
00379 <span class="comment">         * Set no selection if we specify -1</span>
00380 <span class="comment">         */</span>
00381         ichMinSel = ichMaxSel = ped-&gt;ichCaret;
00382     }
00383 
00384     <span class="comment">/*</span>
00385 <span class="comment">     * Since these are unsigned, we don't check if they are greater than 0.</span>
00386 <span class="comment">     */</span>
00387     ichMinSel = <a class="code" href="../../d5/d4/acpitabl_8h.html#a69">min</a>(ped-&gt;cch, ichMinSel);
00388     ichMaxSel = <a class="code" href="../../d5/d4/acpitabl_8h.html#a69">min</a>(ped-&gt;cch, ichMaxSel);
00389 
00390 <span class="preprocessor">#ifdef FE_SB // MLSetSelectionHander()</span>
00391 <span class="preprocessor"></span>    <span class="comment">//</span>
00392     <span class="comment">// To avoid position to half of DBCS, check and ajust position if necessary</span>
00393     <span class="comment">//</span>
00394     <span class="comment">// We check ped-&gt;fDBCS and ped-&gt;fAnsi though ECAdjustIch checks these bits</span>
00395     <span class="comment">// at first. We're worrying about the overhead of ECLock and ECUnlock.</span>
00396     <span class="comment">//</span>
00397     <span class="keywordflow">if</span> ( ped-&gt;fDBCS &amp;&amp; ped-&gt;fAnsi ) {
00398 
00399         PSTR pText;
00400 
00401         pText = <a class="code" href="../../d6/d0/usercli_8h.html#a433">ECLock</a>(ped);
00402         ichMinSel = <a class="code" href="../../d6/d0/usercli_8h.html#a461">ECAdjustIch</a>( ped, pText, ichMinSel );
00403         ichMaxSel = <a class="code" href="../../d6/d0/usercli_8h.html#a461">ECAdjustIch</a>( ped, pText, ichMaxSel );
00404         <a class="code" href="../../d6/d0/usercli_8h.html#a434">ECUnlock</a>(ped);
00405     }
00406 <span class="preprocessor">#endif // FE_SB</span>
00407 <span class="preprocessor"></span>
00408     <span class="comment">/*</span>
00409 <span class="comment">     * Set the caret's position to be at ichMaxSel.</span>
00410 <span class="comment">     */</span>
00411     ped-&gt;ichCaret = ichMaxSel;
00412     ped-&gt;iCaretLine = <a class="code" href="../../d6/d0/usercli_8h.html#a495">MLIchToLine</a>(ped, ped-&gt;ichCaret);
00413 
00414     hdc = <a class="code" href="../../d6/d0/usercli_8h.html#a451">ECGetEditDC</a>(ped, FALSE);
00415     <a class="code" href="../../d6/d0/usercli_8h.html#a513">MLChangeSelection</a>(ped, hdc, ichMinSel, ichMaxSel);
00416 
00417     <a class="code" href="../../d6/d0/usercli_8h.html#a493">MLSetCaretPosition</a>(ped, hdc);
00418     <a class="code" href="../../d6/d0/usercli_8h.html#a452">ECReleaseEditDC</a>(ped, hdc, FALSE);
00419 
00420 <span class="preprocessor">#ifdef FE_SB // MLSetSelectionHander()</span>
00421 <span class="preprocessor"></span>    <span class="keywordflow">if</span> (!fDoNotScrollCaret)
00422         <a class="code" href="../../d6/d0/usercli_8h.html#a485">MLEnsureCaretVisible</a>(ped);
00423     <span class="comment">/*</span>
00424 <span class="comment">     * #ifdef KOREA is history, with FE_SB (FarEast Single Binary).</span>
00425 <span class="comment">     */</span>
00426 <span class="preprocessor">#else</span>
00427 <span class="preprocessor"></span><span class="preprocessor">#ifdef KOREA</span>
00428 <span class="preprocessor"></span>    <span class="comment">/*</span>
00429 <span class="comment">     * Extra parameter specified interim character mode</span>
00430 <span class="comment">     */</span>
00431     <a class="code" href="../../d6/d0/usercli_8h.html#a485">MLEnsureCaretVisible</a>(ped,NULL);
00432 <span class="preprocessor">#else</span>
00433 <span class="preprocessor"></span>    <span class="keywordflow">if</span> (!fDoNotScrollCaret)
00434         <a class="code" href="../../d6/d0/usercli_8h.html#a485">MLEnsureCaretVisible</a>(ped);
00435 <span class="preprocessor">#endif</span>
00436 <span class="preprocessor"></span><span class="preprocessor">#endif // FE_SB</span>
00437 <span class="preprocessor"></span>}
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a516" doxytag="usercli.h::MLSetTabStops" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL MLSetTabStops           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPINT&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d4/edmlrare_8c-source.html#l00458">458</a> of file <a class="el" href="../../d6/d4/edmlrare_8c-source.html">edmlrare.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l00677">tagED::aveCharWidth</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00584">tagED::hwnd</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l01562">MLBuildchLines()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l03379">MLEnsureCaretVisible()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l01003">MLUpdateiCaretLine()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00624">MultDiv</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05330">NtUserInvalidateRect()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00684">tagED::pTabStops</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00958">UserLocalAlloc</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00960">UserLocalFree</a>, and <a class="el" href="../../d7/d9/usercli_8h-source.html#l00959">UserLocalReAlloc</a>.
<p>
Referenced by <a class="el" href="../../d2/d4/editml_8c-source.html#l03457">MLEditWndProc()</a>.
<p>
<pre class="fragment"><div>00462 {
00463     <span class="keywordtype">int</span> *pTabStops;
00464 
00465     <span class="comment">/*</span>
00466 <span class="comment">     * Check if tab positions already exist</span>
00467 <span class="comment">     */</span>
00468     <span class="keywordflow">if</span> (!ped-&gt;pTabStops) {
00469 
00470         <span class="comment">/*</span>
00471 <span class="comment">         * Check if the caller wants the new tab positions</span>
00472 <span class="comment">         */</span>
00473         <span class="keywordflow">if</span> (nTabPos) {
00474 
00475             <span class="comment">/*</span>
00476 <span class="comment">             * Allocate the array of tab stops</span>
00477 <span class="comment">             */</span>
00478             <span class="keywordflow">if</span> (!(pTabStops = (LPINT)<a class="code" href="../../d6/d0/usercli_8h.html#a136">UserLocalAlloc</a>(HEAP_ZERO_MEMORY, (nTabPos + 1) * <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>)))) {
00479                 <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00480             }
00481         } <span class="keywordflow">else</span> {
00482             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>; <span class="comment">/* No stops then and no stops now! */</span>
00483         }
00484     } <span class="keywordflow">else</span> {
00485 
00486         <span class="comment">/*</span>
00487 <span class="comment">         * Check if the caller wants the new tab positions</span>
00488 <span class="comment">         */</span>
00489         <span class="keywordflow">if</span> (nTabPos) {
00490 
00491             <span class="comment">/*</span>
00492 <span class="comment">             * Check if the number of tab positions is different</span>
00493 <span class="comment">             */</span>
00494             <span class="keywordflow">if</span> (ped-&gt;pTabStops[0] != nTabPos) {
00495 
00496                 <span class="comment">/*</span>
00497 <span class="comment">                 * Yes! So ReAlloc to new size</span>
00498 <span class="comment">                 */</span>
00499                 <span class="keywordflow">if</span> (!(pTabStops = (LPINT)<a class="code" href="../../d6/d0/usercli_8h.html#a137">UserLocalReAlloc</a>(ped-&gt;pTabStops,
00500                         (nTabPos + 1) * <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>), 0)))
00501                     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00502             } <span class="keywordflow">else</span> {
00503                 pTabStops = ped-&gt;pTabStops;
00504             }
00505         } <span class="keywordflow">else</span> {
00506 
00507             <span class="comment">/*</span>
00508 <span class="comment">             * Caller wants to remove all the tab stops; So, release</span>
00509 <span class="comment">             */</span>
00510             <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d0/usercli_8h.html#a138">UserLocalFree</a>(ped-&gt;pTabStops))
00511                 <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;  <span class="comment">/* Failure */</span>
00512             ped-&gt;pTabStops = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00513             <span class="keywordflow">goto</span> RedrawAndReturn;
00514         }
00515     }
00516 
00517     <span class="comment">/*</span>
00518 <span class="comment">     * Copy the new tab stops onto the tab stop array after converting the</span>
00519 <span class="comment">     * dialog co-ordinates into the pixel co-ordinates</span>
00520 <span class="comment">     */</span>
00521     ped-&gt;pTabStops = pTabStops;
00522     *pTabStops++ = nTabPos; <span class="comment">/* First element contains the count */</span>
00523     <span class="keywordflow">while</span> (nTabPos--) {
00524 
00525         <span class="comment">/*</span>
00526 <span class="comment">         * aveCharWidth must be used instead of cxSysCharWidth.</span>
00527 <span class="comment">         * Fix for Bug #3871 --SANKAR-- 03/14/91</span>
00528 <span class="comment">         */</span>
00529         *pTabStops++ = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a141">MultDiv</a>(*lpTabStops++, ped-&gt;aveCharWidth, 4);
00530     }
00531 
00532 RedrawAndReturn:
00533     <span class="comment">// Because the tabstops have changed, we need to recompute the</span>
00534     <span class="comment">// maxPixelWidth. Otherwise, horizontal scrolls will have problems.</span>
00535     <span class="comment">// Fix for Bug #6042 - 3/15/94</span>
00536     <a class="code" href="../../d6/d0/usercli_8h.html#a490">MLBuildchLines</a>(ped, 0, 0, FALSE, NULL, NULL);
00537 
00538     <span class="comment">// Caret may have changed line by the line recalc above.</span>
00539     <a class="code" href="../../d6/d0/usercli_8h.html#a519">MLUpdateiCaretLine</a>(ped);
00540 
00541     <a class="code" href="../../d6/d0/usercli_8h.html#a485">MLEnsureCaretVisible</a>(ped);
00542 
00543     <span class="comment">// Also, we need to redraw the whole window.</span>
00544     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a206">NtUserInvalidateRect</a>(ped-&gt;hwnd, NULL, TRUE);
00545     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00546 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a491" doxytag="usercli.h::MLShiftchLines" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void MLShiftchLines           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d4/editml_8c-source.html#l01538">1538</a> of file <a class="el" href="../../d2/d4/editml_8c-source.html">editml.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l00662">tagED::chLines</a>, and <a class="el" href="../../d7/d9/usercli_8h-source.html#l00559">tagED::cLines</a>.
<p>
Referenced by <a class="el" href="../../d2/d4/editml_8c-source.html#l01562">MLBuildchLines()</a>, and <a class="el" href="../../d2/d4/editml_8c-source.html#l01367">MLDeleteText()</a>.
<p>
<pre class="fragment"><div>01542 {
01543     <span class="keywordflow">if</span> (iLine &gt;= ped-&gt;cLines)
01544         <span class="keywordflow">return</span>;
01545 
01546     <span class="comment">/*</span>
01547 <span class="comment">     * Just add delta to the starting point of each line after iLine</span>
01548 <span class="comment">     */</span>
01549     <span class="keywordflow">for</span> (; iLine &lt; ped-&gt;cLines; iLine++)
01550         ped-&gt;chLines[iLine] += delta;
01551 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a512" doxytag="usercli.h::MLSize" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void MLSize           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d4/editml_8c-source.html#l00056">56</a> of file <a class="el" href="../../d2/d4/editml_8c-source.html">editml.c</a>.
<p>
References <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00615">tagED::fWrap</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00574">tagED::ichLinesOnScreen</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00678">tagED::lineHeight</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l00022">ML_REFRESH</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l01562">MLBuildchLines()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l02966">MLScroll()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l01003">MLUpdateiCaretLine()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00586">tagED::rcFmt</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d6/d3/edecrare_8c-source.html#l00597">ECSize()</a>.
<p>
<pre class="fragment"><div>00057 {
00058     <span class="comment">// Calculate the # of lines we can fit in our rectangle.</span>
00059     ped-&gt;ichLinesOnScreen = (ped-&gt;rcFmt.bottom - ped-&gt;rcFmt.top) / ped-&gt;lineHeight;
00060 
00061     <span class="comment">// Make the format rectangle height an integral number of lines</span>
00062     ped-&gt;rcFmt.bottom = ped-&gt;rcFmt.top + ped-&gt;ichLinesOnScreen * ped-&gt;lineHeight;
00063 
00064     <span class="comment">// Rebuild the line array</span>
00065     <span class="keywordflow">if</span> (ped-&gt;fWrap) {
00066         <a class="code" href="../../d6/d0/usercli_8h.html#a490">MLBuildchLines</a>(ped, 0, 0, FALSE, NULL, NULL);
00067         <a class="code" href="../../d6/d0/usercli_8h.html#a519">MLUpdateiCaretLine</a>(ped);
00068     } <span class="keywordflow">else</span> {
00069         <a class="code" href="../../d6/d0/usercli_8h.html#a517">MLScroll</a>(ped, TRUE,  ML_REFRESH, 0, fRedraw);
00070         <a class="code" href="../../d6/d0/usercli_8h.html#a517">MLScroll</a>(ped, FALSE, ML_REFRESH, 0, fRedraw);
00071     }
00072 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a499" doxytag="usercli.h::MLStripCrCrLf" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void MLStripCrCrLf           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d4/edmlrare_8c-source.html#l00159">159</a> of file <a class="el" href="../../d6/d4/edmlrare_8c-source.html">edmlrare.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l00557">tagED::cch</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00052">ECLock()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00086">ECUnlock()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00640">tagED::fAnsi</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00564">tagED::ichCaret</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00563">tagED::ichMaxSel</a>, and <a class="el" href="../../d7/d9/usercli_8h-source.html#l00561">tagED::ichMinSel</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/editec_8c-source.html#l02547">ECResetTextInfo()</a>, and <a class="el" href="../../d2/d4/editml_8c-source.html#l03457">MLEditWndProc()</a>.
<p>
<pre class="fragment"><div>00161 {
00162     <span class="keywordflow">if</span> (ped-&gt;cch) {
00163         <span class="keywordflow">if</span> (ped-&gt;fAnsi) {
00164             <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *pchSrc;
00165             <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *pchDst;
00166             <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *pchLast;
00167 
00168             pchSrc = pchDst = <a class="code" href="../../d6/d0/usercli_8h.html#a433">ECLock</a>(ped);
00169             pchLast = pchSrc + ped-&gt;cch;
00170             <span class="keywordflow">while</span> (pchSrc &lt; pchLast) {
00171                 <span class="keywordflow">if</span> (   (pchSrc[0] == 0x0D)
00172                     &amp;&amp; (pchSrc[1] == 0x0D)
00173                     &amp;&amp; (pchSrc[2] == 0x0A)
00174                 ) {
00175                     pchSrc += 3;
00176                     ped-&gt;cch -= 3;
00177                 } <span class="keywordflow">else</span> {
00178                     *pchDst++ = *pchSrc++;
00179                 }
00180             }
00181         } <span class="keywordflow">else</span> { <span class="comment">// !fAnsi</span>
00182             LPWSTR pwchSrc;
00183             LPWSTR pwchDst;
00184             LPWSTR pwchLast;
00185 
00186             pwchSrc = pwchDst = (LPWSTR)<a class="code" href="../../d6/d0/usercli_8h.html#a433">ECLock</a>(ped);
00187             pwchLast = pwchSrc + ped-&gt;cch;
00188             <span class="keywordflow">while</span> (pwchSrc &lt; pwchLast) {
00189                 <span class="keywordflow">if</span> (   (pwchSrc[0] == 0x0D)
00190                     &amp;&amp; (pwchSrc[1] == 0x0D)
00191                     &amp;&amp; (pwchSrc[2] == 0x0A)
00192                 ) {
00193                     pwchSrc += 3;
00194                     ped-&gt;cch -= 3;
00195                 } <span class="keywordflow">else</span> {
00196                     *pwchDst++ = *pwchSrc++;
00197                 }
00198             }
00199         }
00200         <a class="code" href="../../d6/d0/usercli_8h.html#a434">ECUnlock</a>(ped);
00201 
00202         <span class="comment">/*</span>
00203 <span class="comment">         * Make sure we don't have any values past the last character</span>
00204 <span class="comment">         */</span>
00205         <span class="keywordflow">if</span> (ped-&gt;ichCaret &gt; ped-&gt;cch)
00206             ped-&gt;ichCaret  = ped-&gt;cch;
00207         <span class="keywordflow">if</span> (ped-&gt;ichMinSel &gt; ped-&gt;cch)
00208             ped-&gt;ichMinSel = ped-&gt;cch;
00209         <span class="keywordflow">if</span> (ped-&gt;ichMaxSel &gt; ped-&gt;cch)
00210             ped-&gt;ichMaxSel = ped-&gt;cch;
00211     }
00212 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a518" doxytag="usercli.h::MLThumbPosFromPed" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int MLThumbPosFromPed           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a501" doxytag="usercli.h::MLUndo" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL MLUndo           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d4/edmlrare_8c-source.html#l00556">556</a> of file <a class="el" href="../../d6/d4/edmlrare_8c-source.html">edmlrare.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00584">tagED::hwnd</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00626">ICH</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l01040">MLInsertText()</a>, <a class="el" href="../../d6/d4/edmlrare_8c-source.html#l00368">MLSetSelection()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00652">SendMessage()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00526">UNDO_DELETE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00525">UNDO_INSERT</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00524">UNDO_NONE</a>, and <a class="el" href="../../d7/d9/usercli_8h-source.html#l00124">UserGlobalFree</a>.
<p>
Referenced by <a class="el" href="../../d2/d4/editml_8c-source.html#l03457">MLEditWndProc()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l01040">MLInsertText()</a>, and <a class="el" href="../../d2/d4/editml_8c-source.html#l01309">MLReplaceSel()</a>.
<p>
<pre class="fragment"><div>00558 {
00559     HANDLE hDeletedText = ped-&gt;hDeletedText;
00560     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fDelete = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>)(ped-&gt;undoType &amp; <a class="code" href="../../d6/d0/usercli_8h.html#a84">UNDO_DELETE</a>);
00561     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a> cchDeleted = ped-&gt;cchDeleted;
00562     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a> ichDeleted = ped-&gt;ichDeleted;
00563 
00564     <span class="keywordflow">if</span> (ped-&gt;undoType == <a class="code" href="../../d6/d0/usercli_8h.html#a82">UNDO_NONE</a>) {
00565 
00566         <span class="comment">/*</span>
00567 <span class="comment">         * No undo...</span>
00568 <span class="comment">         */</span>
00569         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00570     }
00571 
00572     ped-&gt;hDeletedText = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00573     ped-&gt;cchDeleted = 0;
00574     ped-&gt;ichDeleted = (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a>)-1;
00575     ped-&gt;undoType &amp;= ~<a class="code" href="../../d6/d0/usercli_8h.html#a84">UNDO_DELETE</a>;
00576 
00577     <span class="keywordflow">if</span> (ped-&gt;undoType == <a class="code" href="../../d6/d0/usercli_8h.html#a83">UNDO_INSERT</a>) {
00578         ped-&gt;undoType = <a class="code" href="../../d6/d0/usercli_8h.html#a82">UNDO_NONE</a>;
00579 
00580         <span class="comment">/*</span>
00581 <span class="comment">         * Set the selection to the inserted text</span>
00582 <span class="comment">         */</span>
00583         <a class="code" href="../../d6/d0/usercli_8h.html#a506">MLSetSelection</a>(ped, FALSE, ped-&gt;ichInsStart, ped-&gt;ichInsEnd);
00584         ped-&gt;ichInsStart = ped-&gt;ichInsEnd = (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a>)-1;
00585 
00586         <span class="comment">/*</span>
00587 <span class="comment">         * Now send a backspace to delete and save it in the undo buffer...</span>
00588 <span class="comment">         */</span>
00589         <a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(ped-&gt;hwnd, WM_CHAR, (WPARAM)VK_BACK, 0L);
00590     }
00591 
00592     <span class="keywordflow">if</span> (fDelete) {
00593 
00594         <span class="comment">/*</span>
00595 <span class="comment">         * Insert deleted chars</span>
00596 <span class="comment">         */</span>
00597 
00598         <span class="comment">/*</span>
00599 <span class="comment">         * Set the selection to the inserted text</span>
00600 <span class="comment">         */</span>
00601         <a class="code" href="../../d6/d0/usercli_8h.html#a506">MLSetSelection</a>(ped, FALSE, ichDeleted, ichDeleted);
00602         <a class="code" href="../../d6/d0/usercli_8h.html#a483">MLInsertText</a>(ped, hDeletedText, cchDeleted, FALSE);
00603 
00604         <a class="code" href="../../d6/d0/usercli_8h.html#a2">UserGlobalFree</a>(hDeletedText);
00605         <a class="code" href="../../d6/d0/usercli_8h.html#a506">MLSetSelection</a>(ped, FALSE, ichDeleted, ichDeleted + cchDeleted);
00606     }
00607 
00608     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00609 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a519" doxytag="usercli.h::MLUpdateiCaretLine" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void MLUpdateiCaretLine           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>ped</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d4/editml_8c-source.html#l01003">1003</a> of file <a class="el" href="../../d2/d4/editml_8c-source.html">editml.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l01132">AWCOMPARECHAR</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00661">tagED::cbChar</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00662">tagED::chLines</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00052">ECLock()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00086">ECUnlock()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00566">tagED::iCaretLine</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00564">tagED::ichCaret</a>, and <a class="el" href="../../d2/d4/editml_8c-source.html#l00443">MLIchToLine()</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/editec_8c-source.html#l04185">ECUpdateFormat()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l01367">MLDeleteText()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l01040">MLInsertText()</a>, <a class="el" href="../../d6/d4/edmlrare_8c-source.html#l00458">MLSetTabStops()</a>, and <a class="el" href="../../d2/d4/editml_8c-source.html#l00056">MLSize()</a>.
<p>
<pre class="fragment"><div>01004 {
01005     PSTR pText;
01006 
01007     ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o8">iCaretLine</a> = <a class="code" href="../../d6/d0/usercli_8h.html#a495">MLIchToLine</a>(ped, ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o7">ichCaret</a>);
01008 
01009     <span class="comment">/*</span>
01010 <span class="comment">     * If caret gets to beginning of next line, pop it up to end of current line</span>
01011 <span class="comment">     * when inserting text.</span>
01012 <span class="comment">     */</span>
01013     pText = <a class="code" href="../../d6/d0/usercli_8h.html#a433">ECLock</a>(ped) +
01014             (ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o7">ichCaret</a> - 1) * ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o60">cbChar</a>;
01015     <span class="keywordflow">if</span> (ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o8">iCaretLine</a> &amp;&amp; ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o61">chLines</a>[ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o8">iCaretLine</a>] == ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o7">ichCaret</a> &amp;&amp;
01016             (!<a class="code" href="../../d6/d0/usercli_8h.html#a154">AWCOMPARECHAR</a>(ped, pText - ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o60">cbChar</a>, 0x0D) ||
01017             !<a class="code" href="../../d6/d0/usercli_8h.html#a154">AWCOMPARECHAR</a>(ped, pText, 0x0A)))
01018         ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o8">iCaretLine</a>--;
01019     <a class="code" href="../../d6/d0/usercli_8h.html#a434">ECUnlock</a>(ped);
01020 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a777" doxytag="usercli.h::ModifyMenuItem" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID ModifyMenuItem           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pwnd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00104">104</a> of file <a class="el" href="../../d6/d4/mdimenu_8c-source.html">mdimenu.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l02069">ACTIVE</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02071">FIRST</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01515">HWq</a>, <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00047">MakeMenuItem()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01512">PtoH</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00210">REBASEALWAYS</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00215">REBASEPWND</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01764">tagWND::spmenu</a>, <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00377">ThunkedMenuItemInfo()</a>, and <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>.
<p>
Referenced by <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02531">DefMDIChildProcWorker()</a>, and <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01237">xxxMDIActivate()</a>.
<p>
<pre class="fragment"><div>00106 {
00107     <a class="code" href="../../d8/d0/structtagMDI.html">PMDI</a> pmdi;
00108     WCHAR sz[200];
00109     MENUITEMINFO    mii;
00110     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwndParent;
00111     <a class="code" href="../../d1/d1/structtagMENU.html">PMENU</a> pmenu;
00112 
00113     <span class="comment">/*</span>
00114 <span class="comment">     * Get a pointer to the MDI structure</span>
00115 <span class="comment">     */</span>
00116     pwndParent = <a class="code" href="../../d6/d0/usercli_8h.html#a27">REBASEPWND</a>(pwnd, spwndParent);
00117     pmdi = ((<a class="code" href="../../d0/d1/structtagMDIWND.html">PMDIWND</a>)pwndParent)-&gt;pmdi;
00118 
00119     <span class="keywordflow">if</span> (PtrToUlong(pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o16">spmenu</a>) &gt; <a class="code" href="../../d6/d0/usercli_8h.html#a274">FIRST</a>(pmdi) + (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)8)
00120         <span class="keywordflow">return</span>;
00121 
00122     mii.cbSize = <span class="keyword">sizeof</span>(MENUITEMINFO);
00123     mii.fMask = MIIM_STRING;
00124     mii.dwTypeData = sz;
00125 
00126     <span class="comment">/*</span>
00127 <span class="comment">     * Parent is MDI Client.</span>
00128 <span class="comment">     */</span>
00129     <a class="code" href="../../d6/d0/usercli_8h.html#a776">MakeMenuItem</a>(sz, pwnd);
00130 
00131     <span class="comment">/*</span>
00132 <span class="comment">     * Changing the active child?  Check it.</span>
00133 <span class="comment">     */</span>
00134     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(pwnd) == <a class="code" href="../../d6/d0/usercli_8h.html#a272">ACTIVE</a>(pmdi)) {
00135         mii.fMask |= MIIM_STATE;
00136         mii.fState = MFS_CHECKED;
00137     }
00138 
00139     pwndParent = <a class="code" href="../../d6/d0/usercli_8h.html#a27">REBASEPWND</a>(pwndParent, spwndParent);
00140 
00141     <span class="keywordflow">if</span> (pwndParent-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o16">spmenu</a>) {
00142 
00143         <span class="comment">/*</span>
00144 <span class="comment">         * Bug# 21566. If spmenu is NULL we used to fail</span>
00145 <span class="comment">         * because REBASEALWAYS is trying to get the kernel</span>
00146 <span class="comment">         * address of NULL based on pwndParent</span>
00147 <span class="comment">         */</span>
00148         pmenu = <a class="code" href="../../d6/d0/usercli_8h.html#a24">REBASEALWAYS</a>(pwndParent, spmenu);
00149         <span class="comment">/*</span>
00150 <span class="comment">         * Internal call to SetMenuItemInfo</span>
00151 <span class="comment">         */</span>
00152         <a class="code" href="../../d6/d0/usercli_8h.html#a771">ThunkedMenuItemInfo</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a448">PtoH</a>(pmenu), PtrToUlong(pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o16">spmenu</a>), FALSE, FALSE, &amp;mii, FALSE);
00153     }
00154 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a656" doxytag="usercli.h::ObjectFromDIBResource" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HANDLE ObjectFromDIBResource           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HINSTANCE&nbsp;</td>
          <td class="mdname" nowrap> <em>hmod</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPCWSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>lpName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPWSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>type</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cxDesired</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cyDesired</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>LR_flags</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d8/clres_8c-source.html#l02847">2847</a> of file <a class="el" href="../../d5/d8/clres_8c-source.html">clres.c</a>.
<p>
References <a class="el" href="../../d6/d0/usercli_8h.html#a659">ConvertDIBBitmap()</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l03344">ConvertDIBIcon()</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l00060">ISRIFFFORMAT</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l01573">LoadCursorIconFromResource()</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l02544">LoadDIB()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00912">LOCKRESOURCE</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d0/d7/halvprnt_8c-source.html#l00031">PBYTE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00411">PTR_TO_ID</a>, <a class="el" href="../../d4/d1/rtlres_8c-source.html#l00142">RtlLoadObjectFromDIBFile()</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l00105">SplFreeResource()</a>, <a class="el" href="../../d4/d4/i386_2trapc_8c-source.html#l00076">type</a>, and <a class="el" href="../../d7/d9/usercli_8h-source.html#l00913">UNLOCKRESOURCE</a>.
<p>
Referenced by <a class="el" href="../../d5/d8/clres_8c-source.html#l01899">LoadBmp()</a>, and <a class="el" href="../../d5/d8/clres_8c-source.html#l02657">LoadIcoCur()</a>.
<p>
<pre class="fragment"><div>02854 {
02855     HANDLE  hObj = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
02856 
02857     <span class="keywordflow">if</span> (LR_flags &amp; LR_LOADFROMFILE) {
02858 
02859         hObj = <a class="code" href="../../d6/d0/usercli_8h.html#a657">RtlLoadObjectFromDIBFile</a>(lpName,
02860                                         type,
02861                                         cxDesired,
02862                                         cyDesired,
02863                                         LR_flags);
02864     } <span class="keywordflow">else</span> {
02865 
02866         HANDLE hdib;
02867 
02868         hdib = <a class="code" href="../../d4/d9/clres_8c.html#a83">LoadDIB</a>(hmod, lpName, type, cxDesired, cyDesired, LR_flags);
02869 
02870         <span class="keywordflow">if</span> (hdib != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
02871 
02872             LPBITMAPINFOHEADER lpbih;
02873 
02874             <span class="comment">/*</span>
02875 <span class="comment">             * We cast the resource-bits to a BITMAPINFOHEADER.  If the</span>
02876 <span class="comment">             * resource is a CURSOR type, then there are actually two</span>
02877 <span class="comment">             * WORDs preceeding the BITMAPINFOHDEADER indicating the</span>
02878 <span class="comment">             * hot-spot.  Be careful in assuming you have a real</span>
02879 <span class="comment">             * dib in this case.</span>
02880 <span class="comment">             */</span>
02881             <span class="keywordflow">if</span>(lpbih = (LPBITMAPINFOHEADER)<a class="code" href="../../d6/d0/usercli_8h.html#a130">LOCKRESOURCE</a>(hdib, hmod)) {
02882 
02883                 <span class="keywordflow">switch</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a99">PTR_TO_ID</a>(type)) {
02884                 <span class="keywordflow">case</span> <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a99">PTR_TO_ID</a>(RT_BITMAP):
02885                     <span class="comment">/*</span>
02886 <span class="comment">                     * Create a physical bitmap from the DIB.</span>
02887 <span class="comment">                     */</span>
02888                     hObj = <a class="code" href="../../d4/d9/clres_8c.html#a92">ConvertDIBBitmap</a>(lpbih,
02889                                             cxDesired,
02890                                             cyDesired,
02891                                             LR_flags,
02892                                             <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>,
02893                                             <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>);
02894                     <span class="keywordflow">break</span>;
02895 
02896                 <span class="keywordflow">case</span> <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a99">PTR_TO_ID</a>(RT_ICON):
02897                 case <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a99">PTR_TO_ID</a>(RT_CURSOR):
02898                 case <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a99">PTR_TO_ID</a>(RT_ANICURSOR):
02899                 case <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a99">PTR_TO_ID</a>(RT_ANIICON):
02900                     <span class="comment">/*</span>
02901 <span class="comment">                     * Animated icon\cursors resources use the RIFF format</span>
02902 <span class="comment">                     */</span>
02903                     if (<a class="code" href="../../d4/d9/clres_8c.html#a10">ISRIFFFORMAT</a>(lpbih)) {
02904                         hObj = <a class="code" href="../../d4/d9/clres_8c.html#a68">LoadCursorIconFromResource</a> ((PBYTE)lpbih, lpName, cxDesired, cyDesired, LR_flags);
02905                     } <span class="keywordflow">else</span> {
02906                         <span class="comment">/*</span>
02907 <span class="comment">                         * Create the object from the DIB.</span>
02908 <span class="comment">                         */</span>
02909                         hObj = <a class="code" href="../../d6/d0/usercli_8h.html#a660">ConvertDIBIcon</a>(lpbih,
02910                                               hmod,
02911                                               lpName,
02912                                               (type == RT_ICON),
02913                                               cxDesired,
02914                                               cyDesired,
02915                                               LR_flags);
02916                     }
02917                     <span class="keywordflow">break</span>;
02918                 }
02919 
02920                 <a class="code" href="../../d6/d0/usercli_8h.html#a131">UNLOCKRESOURCE</a>(hdib, hmod);
02921             }
02922 
02923             <span class="comment">/*</span>
02924 <span class="comment">             * DO THIS TWICE!  The resource compiler always makes icon images</span>
02925 <span class="comment">             * (RT_ICON) in a group icon discardable, whether the group dude</span>
02926 <span class="comment">             * is or not!  So the first free won't really free the thing;</span>
02927 <span class="comment">             * it'll just set the ref count to 0 and let the discard logic</span>
02928 <span class="comment">             * go on its merry way.</span>
02929 <span class="comment">             *</span>
02930 <span class="comment">             * We take care of shared guys, so we don't need this dib no more.</span>
02931 <span class="comment">             * Don't need this DIB no more no more, no more no more no more</span>
02932 <span class="comment">             * don't need this DIB no more.</span>
02933 <span class="comment">             */</span>
02934             <a class="code" href="../../d4/d9/clres_8c.html#a30">SplFreeResource</a>(hdib, hmod, LR_flags);
02935         }
02936     }
02937 
02938     <span class="keywordflow">return</span> hObj;
02939 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a604" doxytag="usercli.h::OpenKeyboardLayoutFile" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HANDLE OpenKeyboardLayoutFile           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">LPWSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>lpszKLName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d9/d5/ndismain_8h.html#a266">PUINT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>puFlags</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d9/d5/ndismain_8h.html#a266">PUINT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>poffTable</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d9/d5/ndismain_8h.html#a266">PUINT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pKbdInputLocale</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l04019">4019</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d0/d5/perfuser_8c.html#a20">BOOL()</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l00077">CCH_KL_ID</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l00076">CCH_KL_LIBNAME</a>, <a class="el" href="../../d7/d5/memprint_8h-source.html#l00079">DbgPrint</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l03097">GetClientKeyboardType()</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00149">IS_IME_KBDLAYOUT</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00293">ISREMOTESESSION</a>, <a class="el" href="../../d3/d1/rtload_8c-source.html#l00051">KeyAttributes</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">LPVOID</a>, <a class="el" href="../../d4/d8/arcinst_8c-source.html#l00065">MAX_PATH</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l00066">NSZKLKEY</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d6/d9/obclose_8c-source.html#l00037">NtClose()</a>, <a class="el" href="../../d8/d6/ntapi_8c-source.html#l01870">NtOpenKey()</a>, <a class="el" href="../../d8/d6/ntapi_8c-source.html#l02187">NtQueryValueKey()</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d4/d8/ntfsexp_8h.html#a141a69">OPEN_EXISTING</a>, <a class="el" href="../../d0/d7/halvprnt_8c-source.html#l00031">PBYTE</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">PUINT</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l00069">pwszKLLibSafety</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l00071">pwszKLLibSafetyJPN</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l00073">pwszKLLibSafetyKOR</a>, <a class="el" href="../../d3/d6/string_8c-source.html#l00148">RtlInitUnicodeString()</a>, <a class="el" href="../../d0/d3/cnvint_8c-source.html#l00225">RtlUnicodeStringToInteger()</a>, <a class="el" href="../../d3/d0/cttoken_8c-source.html#l00135">Status</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l00064">szKLAttributes</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l00063">szKLFile</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l00065">szKLId</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l00062">szKLKey</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l00070">wKbdLocaleSafety</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l00072">wKbdLocaleSafetyJPN</a>, and <a class="el" href="../../d4/d7/client_8c-source.html#l00074">wKbdLocaleSafetyKOR</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/client_8c-source.html#l02154">CommonCreateWindowStation()</a>, and <a class="el" href="../../d4/d7/client_8c-source.html#l04385">LoadKeyboardLayoutWorker()</a>.
<p>
<pre class="fragment"><div>04024 {
04025     PKBDNLSTABLES (*pfnNls)();
04026     <a class="code" href="../../d0/d5/perfuser_8c.html#a20">BOOL</a> (*pfnDriverNT4)(LPWSTR);
04027     <a class="code" href="../../d0/d5/perfuser_8c.html#a20">BOOL</a> (*pfnDriver)(HKL, LPWSTR, PCLIENTKEYBOARDTYPE, <a class="code" href="../../d0/d5/perfuser_8c.html#a5">LPVOID</a>);
04028     WCHAR awchRealLayoutFile[<a class="code" href="../../d3/d9/arcinst_8c.html#a6">MAX_PATH</a>];
04029     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> bMightBeKbdNlsDriver = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
04030     WCHAR awchKL[KL_NAMELENGTH];
04031     WCHAR awchKLRegKey[<a class="code" href="../../d3/d8/client_8c.html#a0">NSZKLKEY</a>];
04032     LPWSTR lpszKLRegKey = &amp;awchKLRegKey[0];
04033     PKBDTABLES (*pfn)();
04034     LPWSTR pwszLib;
04035     LPWSTR pwszId;
04036     HANDLE hLibModule;
04037     WCHAR awchModName[<a class="code" href="../../d3/d9/arcinst_8c.html#a6">MAX_PATH</a>];
04038     UNICODE_STRING UnicodeString;
04039     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> wLayoutId;
04040     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> wLanguageId;
04041     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
04042     OBJECT_ATTRIBUTES OA;
04043     HANDLE hKey;
04044     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> cbSize;
04045     <span class="keyword">struct </span>{
04046         KEY_VALUE_PARTIAL_INFORMATION KeyInfo;
04047         WCHAR awchLibName[<a class="code" href="../../d3/d8/client_8c.html#a1">CCH_KL_LIBNAME</a>];
04048     } KeyFile;
04049     <span class="keyword">struct </span>{
04050         KEY_VALUE_PARTIAL_INFORMATION KeyInfo;
04051         WCHAR awchId[<a class="code" href="../../d3/d8/client_8c.html#a2">CCH_KL_ID</a>];
04052     } KeyId;
04053     <span class="keyword">struct </span>{
04054         KEY_VALUE_PARTIAL_INFORMATION KeyInfo;
04055         <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> Attributes;
04056     } <a class="code" href="../../d2/d2/rtload_8c.html#a6">KeyAttributes</a>;
04057 
04058     wLanguageId = (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)wcstoul(lpszKLName, NULL, 16);
04059     <span class="comment">/*</span>
04060 <span class="comment">     * Substitute Layout if required.</span>
04061 <span class="comment">     */</span>
04062     <span class="keywordflow">if</span> (*puFlags &amp; KLF_SUBSTITUTE_OK) {
04063         GetPrivateProfileStringW(
04064                 L<span class="stringliteral">"Substitutes"</span>,
04065                 lpszKLName,
04066                 lpszKLName,        <span class="comment">// default == no change (no substitute found)</span>
04067                 awchKL,
04068                 <span class="keyword">sizeof</span>(awchKL)/<span class="keyword">sizeof</span>(WCHAR),
04069                 L<span class="stringliteral">"keyboardlayout.ini"</span>);
04070 
04071         <span class="comment">/*</span>
04072 <span class="comment">         * #273562 : Flush the registry cache, because the cpanel applet</span>
04073 <span class="comment">         * destroys and recreates the Substitutes section a lot, which</span>
04074 <span class="comment">         * would otherwise leave us with STATUS_KEY_DELETED.</span>
04075 <span class="comment">         */</span>
04076         WritePrivateProfileStringW(NULL, NULL, NULL, NULL);
04077 
04078         awchKL[KL_NAMELENGTH - 1] = <a class="code" href="../../d2/d0/aw_8h.html#a3">L</a><span class="charliteral">'\0'</span>;
04079         wcscpy(lpszKLName, awchKL);
04080     }
04081 
04082     wLayoutId = (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)wcstoul(lpszKLName, NULL, 16);
04083 
04084     <span class="comment">/*</span>
04085 <span class="comment">     * Get DLL name from the registry, load it, and get the entry point.</span>
04086 <span class="comment">     */</span>
04087     pwszLib = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
04088     wcscpy(lpszKLRegKey, szKLKey);
04089     wcscat(lpszKLRegKey, lpszKLName);
04090     <a class="code" href="../../d2/d7/string_8c.html#a7">RtlInitUnicodeString</a>(&amp;UnicodeString, lpszKLRegKey);
04091     InitializeObjectAttributes(&amp;OA, &amp;UnicodeString, OBJ_CASE_INSENSITIVE, NULL, NULL);
04092 
04093     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(<a class="code" href="../../d7/d7/ntapi_8c.html#a23">NtOpenKey</a>(&amp;hKey, KEY_READ, &amp;OA))) {
04094         <span class="comment">/*</span>
04095 <span class="comment">         * Read the "Layout File" value.</span>
04096 <span class="comment">         */</span>
04097         <a class="code" href="../../d2/d7/string_8c.html#a7">RtlInitUnicodeString</a>(&amp;UnicodeString, szKLFile);
04098 
04099         <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d7/d7/ntapi_8c.html#a25">NtQueryValueKey</a>(hKey,
04100                 &amp;UnicodeString,
04101                 KeyValuePartialInformation,
04102                 &amp;KeyFile,
04103                 <span class="keyword">sizeof</span>(KeyFile),
04104                 &amp;cbSize);
04105 
04106         <span class="keywordflow">if</span> (<a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> == STATUS_BUFFER_OVERFLOW) {
04107             RIPMSG0(RIP_WARNING, <span class="stringliteral">"OpenKeyboardLayoutFile (Layout File) - Buffer overflow."</span>);
04108             <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = STATUS_SUCCESS;
04109         }
04110         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(Status)) {
04111             pwszLib = (LPWSTR)KeyFile.KeyInfo.Data;
04112             pwszLib[<a class="code" href="../../d3/d8/client_8c.html#a1">CCH_KL_LIBNAME</a> - 1] = <a class="code" href="../../d2/d0/aw_8h.html#a3">L</a><span class="charliteral">'\0'</span>;
04113 
04114         }
04115 
04116         <a class="code" href="../../d2/d7/string_8c.html#a7">RtlInitUnicodeString</a>(&amp;UnicodeString, szKLAttributes);
04117         <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d7/d7/ntapi_8c.html#a25">NtQueryValueKey</a>(hKey,
04118                 &amp;UnicodeString,
04119                 KeyValuePartialInformation,
04120                 &amp;KeyAttributes,
04121                 <span class="keyword">sizeof</span>(KeyAttributes),
04122                 &amp;cbSize);
04123 
04124         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(Status)) {
04125 <span class="preprocessor">#if DBG</span>
04126 <span class="preprocessor"></span>            <span class="keywordflow">if</span> ((*((PDWORD)<a class="code" href="../../d2/d2/rtload_8c.html#a6">KeyAttributes</a>.KeyInfo.Data) &amp; ~KLF_ATTRMASK) != 0) {
04127                 RIPMSG1(RIP_WARNING,
04128                         <span class="stringliteral">"OpenKeyboardLayoutFile - Unexpected attributes %lx"</span>,
04129                         *((PDWORD)<a class="code" href="../../d2/d2/rtload_8c.html#a6">KeyAttributes</a>.KeyInfo.Data));
04130             }
04131 <span class="preprocessor">#endif</span>
04132 <span class="preprocessor"></span>            *puFlags |= (*(PDWORD)<a class="code" href="../../d2/d2/rtload_8c.html#a6">KeyAttributes</a>.KeyInfo.Data &amp; KLF_ATTRMASK);
04133         }
04134 
04135         <span class="comment">/*</span>
04136 <span class="comment">         * If the high word of wLayoutId is 0xE??? then this is an IME based</span>
04137 <span class="comment">         * keyboard layout.</span>
04138 <span class="comment">         */</span>
04139         <span class="keywordflow">if</span> (<a class="code" href="../../d4/d5/conimep_8h.html#a49">IS_IME_KBDLAYOUT</a>(wLayoutId)) {
04140             wLayoutId = (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)HIWORD(wLayoutId);
04141         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (HIWORD(wLayoutId)) {
04142             <span class="comment">/*</span>
04143 <span class="comment">             * If the high word of wLayoutId is non-null then read the "Layout ID" value.</span>
04144 <span class="comment">             * Layout IDs start at 1, increase sequentially and are unique.</span>
04145 <span class="comment">             */</span>
04146             <a class="code" href="../../d2/d7/string_8c.html#a7">RtlInitUnicodeString</a>(&amp;UnicodeString, szKLId);
04147 
04148             <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d7/d7/ntapi_8c.html#a25">NtQueryValueKey</a>(hKey,
04149                     &amp;UnicodeString,
04150                     KeyValuePartialInformation,
04151                     &amp;KeyId,
04152                     <span class="keyword">sizeof</span>(KeyId),
04153                     &amp;cbSize);
04154 
04155             <span class="keywordflow">if</span> (<a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> == STATUS_BUFFER_OVERFLOW) {
04156                 RIPMSG0(RIP_WARNING, <span class="stringliteral">"OpenKeyboardLayoutFile - Buffer overflow."</span>);
04157                 <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = STATUS_SUCCESS;
04158             }
04159             <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(Status)) {
04160                 pwszId = (LPWSTR)KeyId.KeyInfo.Data;
04161                 pwszId[<a class="code" href="../../d3/d8/client_8c.html#a2">CCH_KL_ID</a> - 1] = <a class="code" href="../../d2/d0/aw_8h.html#a3">L</a><span class="charliteral">'\0'</span>;
04162                 wLayoutId = (wcstol(pwszId, NULL, 16) &amp; 0x0fff) | 0xf000;
04163             } <span class="keywordflow">else</span> {
04164                 wLayoutId = (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)0xfffe ;    <span class="comment">// error in layout ID, load separately</span>
04165             }
04166         }
04167         <a class="code" href="../../d5/d0/obclose_8c.html#a1">NtClose</a>(hKey);
04168     } <span class="keywordflow">else</span> {
04169         <span class="comment">/*</span>
04170 <span class="comment">         * This is a temporary case to allow booting the new multilingual user on top of a</span>
04171 <span class="comment">         * Daytona registry.</span>
04172 <span class="comment">         */</span>
04173         <span class="comment">/*</span>
04174 <span class="comment">         * Get DLL name from the registry, load it, and get the entry point.</span>
04175 <span class="comment">         */</span>
04176         pwszLib = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
04177         <a class="code" href="../../d2/d7/string_8c.html#a7">RtlInitUnicodeString</a>(&amp;UnicodeString,
04178                 L<span class="stringliteral">"\\Registry\\Machine\\System\\CurrentControlSet\\Control\\Keyboard Layout"</span>);
04179         InitializeObjectAttributes(&amp;OA, &amp;UnicodeString, OBJ_CASE_INSENSITIVE, NULL, NULL);
04180 
04181         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(<a class="code" href="../../d7/d7/ntapi_8c.html#a23">NtOpenKey</a>(&amp;hKey, KEY_READ, &amp;OA))) {
04182             <a class="code" href="../../d2/d7/string_8c.html#a7">RtlInitUnicodeString</a>(&amp;UnicodeString, lpszKLName);
04183 
04184             <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d7/d7/ntapi_8c.html#a25">NtQueryValueKey</a>(hKey,
04185                     &amp;UnicodeString,
04186                     KeyValuePartialInformation,
04187                     &amp;KeyFile,
04188                     <span class="keyword">sizeof</span>(KeyFile),
04189                     &amp;cbSize);
04190 
04191             <span class="keywordflow">if</span> (<a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> == STATUS_BUFFER_OVERFLOW) {
04192                 RIPMSG0(RIP_WARNING, <span class="stringliteral">"OpenKeyboardLayoutFile - Buffer overflow."</span>);
04193                 <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = STATUS_SUCCESS;
04194             }
04195             <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(Status)) {
04196                 pwszLib = (LPWSTR)KeyFile.KeyInfo.Data;
04197                 pwszLib[<a class="code" href="../../d3/d8/client_8c.html#a1">CCH_KL_LIBNAME</a> - 1] = <a class="code" href="../../d2/d0/aw_8h.html#a3">L</a><span class="charliteral">'\0'</span>;
04198             }
04199 
04200             <a class="code" href="../../d5/d0/obclose_8c.html#a1">NtClose</a>(hKey);
04201         }
04202     }
04203 
04204     *pKbdInputLocale = (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)MAKELONG(LOWORD(wLanguageId),LOWORD(wLayoutId));
04205 
04206     <span class="keywordflow">if</span> (pwszLib == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
04207         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a30">ISREMOTESESSION</a>() &amp;&amp; <a class="code" href="../../d4/d5/conimep_8h.html#a49">IS_IME_KBDLAYOUT</a>(wLayoutId)) {
04208             <span class="comment">/*</span>
04209 <span class="comment">             * -- port from HYDRA --</span>
04210 <span class="comment">             * Could not find the keyboard KL for FE, so give them some reasonable one.</span>
04211 <span class="comment">             * If the high word of wLayoutId is 0xE??? then this is an IME based</span>
04212 <span class="comment">             * keyboard layout.</span>
04213 <span class="comment">             * And, the safe KL name is KBDJPN.DLL for Japanese.</span>
04214 <span class="comment">             *                       or KBDKOR.DLL for Korean</span>
04215 <span class="comment">             *                       or KBDUS.DLL  for other Far East</span>
04216 <span class="comment">             */</span>
04217             <span class="keywordflow">if</span> (PRIMARYLANGID(wLanguageId) == LANG_JAPANESE) {
04218                 pwszLib = <a class="code" href="../../d3/d8/client_8c.html#a14">pwszKLLibSafetyJPN</a>;
04219                 *pKbdInputLocale = <a class="code" href="../../d3/d8/client_8c.html#a15">wKbdLocaleSafetyJPN</a>;
04220             }
04221             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (PRIMARYLANGID(wLanguageId) == LANG_KOREAN) {
04222                 pwszLib = <a class="code" href="../../d3/d8/client_8c.html#a16">pwszKLLibSafetyKOR</a>;
04223                 *pKbdInputLocale = <a class="code" href="../../d3/d8/client_8c.html#a17">wKbdLocaleSafetyKOR</a>;
04224             }
04225             <span class="keywordflow">else</span> {
04226                 pwszLib = <a class="code" href="../../d3/d8/client_8c.html#a12">pwszKLLibSafety</a>;
04227                 *pKbdInputLocale = MAKELONG(LOWORD(wLanguageId), LOWORD(wLanguageId));
04228             }
04229         }
04230         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (*puFlags &amp; KLF_INITTIME) {
04231             pwszLib = <a class="code" href="../../d3/d8/client_8c.html#a12">pwszKLLibSafety</a>;
04232             *pKbdInputLocale = <a class="code" href="../../d3/d8/client_8c.html#a13">wKbdLocaleSafety</a>;
04233         } <span class="keywordflow">else</span> {
04234             RIPMSG1(RIP_WARNING, <span class="stringliteral">"no DLL name for %ws"</span>, lpszKLName);
04235             <span class="comment">/*</span>
04236 <span class="comment">             * We're going to use the fallback layout...</span>
04237 <span class="comment">             * This could happen when IMM32 is trying to unload the IME,</span>
04238 <span class="comment">             * by making any non IME keyboard layout tentatively active.</span>
04239 <span class="comment">             */</span>
04240             pwszLib = <a class="code" href="../../d3/d8/client_8c.html#a12">pwszKLLibSafety</a>;
04241             *pKbdInputLocale = <a class="code" href="../../d3/d8/client_8c.html#a13">wKbdLocaleSafety</a>;
04242 <span class="comment">//            return NULL;</span>
04243         }
04244     }
04245 
04246 RetryLoad:
04247     hLibModule = LoadLibraryW(pwszLib);
04248 
04249     <span class="keywordflow">if</span> (hLibModule == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
04250         RIPMSG1(RIP_WARNING, <span class="stringliteral">"Keyboard Layout: cannot load %ws\n"</span>, pwszLib);
04251         <span class="comment">/*</span>
04252 <span class="comment">         * It is OK to fail to load DLL here:</span>
04253 <span class="comment">         * if this ever happens, the fallback keyboard layout built in</span>
04254 <span class="comment">         * win32k.sys shall be used.</span>
04255 <span class="comment">         */</span>
04256         <span class="keywordflow">return</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
04257     }
04258 
04259     <span class="comment">/*</span>
04260 <span class="comment">     * if the layout driver is not "REAL" layout driver, the driver has</span>
04261 <span class="comment">     * "3" or "5" entry point, then we call this to get real layout driver..</span>
04262 <span class="comment">     * This is neccesary for Japanese and Korean systems. because their</span>
04263 <span class="comment">     * keyboard layout driver is "KBDJPN.DLL" or "KBDKOR.DLL", but its</span>
04264 <span class="comment">     * "REAL" driver becomes different depending their keyboard hardware.</span>
04265 <span class="comment">     */</span>
04266 
04267     <span class="comment">/*</span>
04268 <span class="comment">     * Get the entrypoints.</span>
04269 <span class="comment">     */</span>
04270     pfnDriver = (<a class="code" href="../../d0/d5/perfuser_8c.html#a20">BOOL</a>(*)(HKL, LPWSTR, PCLIENTKEYBOARDTYPE, <a class="code" href="../../d0/d5/perfuser_8c.html#a5">LPVOID</a>))GetProcAddress(hLibModule, (LPCSTR)5);
04271     pfnDriverNT4 = (<a class="code" href="../../d0/d5/perfuser_8c.html#a20">BOOL</a>(*)(LPWSTR))GetProcAddress(hLibModule, (LPCSTR)3);
04272 
04273     <span class="keywordflow">if</span> (pfnDriver || pfnDriverNT4) {
04274         HKL hkl;
04275         CLIENTKEYBOARDTYPE clientKbdType;
04276         PCLIENTKEYBOARDTYPE pClientKbdType = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
04277 
04278         <a class="code" href="../../d2/d7/string_8c.html#a7">RtlInitUnicodeString</a>(&amp;UnicodeString, lpszKLName);
04279         <a class="code" href="../../d9/d3/cnvint_8c.html#a4">RtlUnicodeStringToInteger</a>(&amp;UnicodeString, 0x10, (PULONG)&amp;hkl);
04280         <span class="comment">/*</span>
04281 <span class="comment">         * When we reach here, the layout DLL may have KBDNLSTABLE</span>
04282 <span class="comment">         * even if we fail from now on. Our temporary layout</span>
04283 <span class="comment">         * dll should have the fallback tables for just in case.</span>
04284 <span class="comment">         */</span>
04285         bMightBeKbdNlsDriver = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
04286 
04287         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a30">ISREMOTESESSION</a>() &amp;&amp; <a class="code" href="../../d3/d8/client_8c.html#a103">GetClientKeyboardType</a>(&amp;clientKbdType)) {
04288             pClientKbdType = &amp;clientKbdType;
04289         }
04290 
04291         <span class="comment">/*</span>
04292 <span class="comment">         * Call the entry.</span>
04293 <span class="comment">         * a. NT5 / Hydra (oridinal=5)</span>
04294 <span class="comment">         * b. NT4 compatible (3)</span>
04295 <span class="comment">         */</span>
04296         <span class="keywordflow">if</span> ((pfnDriver &amp;&amp; pfnDriver(hkl, awchRealLayoutFile, pClientKbdType, NULL)) ||
04297                 (pfnDriverNT4 &amp;&amp; pfnDriverNT4(awchRealLayoutFile))) {
04298 
04299             HANDLE hLibModuleNew;
04300             <span class="comment">/*</span>
04301 <span class="comment">             * Try to load "REAL" keyboard layout file.</span>
04302 <span class="comment">             */</span>
04303             RIPMSG1(RIP_VERBOSE, <span class="stringliteral">"awchRealLayoutFile='%S'\n"</span>, awchRealLayoutFile);
04304             <span class="keywordflow">if</span> (hLibModuleNew = LoadLibraryW(awchRealLayoutFile)) {
04305                 <span class="comment">/*</span>
04306 <span class="comment">                 * Set "REAL" layout file name.</span>
04307 <span class="comment">                 */</span>
04308                 pwszLib = awchRealLayoutFile;
04309                 <span class="comment">/*</span>
04310 <span class="comment">                 * Unload temporary layout driver.</span>
04311 <span class="comment">                 */</span>
04312                 FreeLibrary(hLibModule);
04313                 <span class="comment">/*</span>
04314 <span class="comment">                 * Updates it.</span>
04315 <span class="comment">                 */</span>
04316                 hLibModule = hLibModuleNew;
04317             }
04318         }
04319     }
04320 
04321     <span class="comment">/*</span>
04322 <span class="comment">     * HACK Part 1!  Get the pointer to the layout table and</span>
04323 <span class="comment">     * change it to a virtual offset.  The server will then</span>
04324 <span class="comment">     * use this offset when poking through the file header to</span>
04325 <span class="comment">     * locate the table within the file.</span>
04326 <span class="comment">     */</span>
04327     pfn = (PKBDTABLES(*)())GetProcAddress(hLibModule, (LPCSTR)1);
04328     <span class="keywordflow">if</span> (pfn == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
04329         RIPMSG0(RIP_ERROR, <span class="stringliteral">"Keyboard Layout: cannot get proc addr"</span>);
04330         <span class="keywordflow">if</span> ((*puFlags &amp; KLF_INITTIME) &amp;&amp; (pwszLib != <a class="code" href="../../d3/d8/client_8c.html#a12">pwszKLLibSafety</a>)) {
04331             pwszLib = <a class="code" href="../../d3/d8/client_8c.html#a12">pwszKLLibSafety</a>;
04332             <span class="keywordflow">goto</span> RetryLoad;
04333         }
04334         <span class="keywordflow">return</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
04335     }
04336     *poffTable = (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)((<a class="code" href="../../d9/d7/halvprnt_8c.html#a1">PBYTE</a>)pfn() - (<a class="code" href="../../d9/d7/halvprnt_8c.html#a1">PBYTE</a>)hLibModule);
04337 
04338     <span class="keywordflow">if</span> (bMightBeKbdNlsDriver) {
04339         pfnNls = (PKBDNLSTABLES(*)())GetProcAddress(hLibModule, (LPCSTR)2);
04340         <span class="keywordflow">if</span> (pfnNls != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
04341             <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> offNlsTable;
04342 
04343             offNlsTable = (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)((<a class="code" href="../../d9/d7/halvprnt_8c.html#a1">PBYTE</a>)pfnNls() - (<a class="code" href="../../d9/d7/halvprnt_8c.html#a1">PBYTE</a>)hLibModule);
04344 
04345 <span class="preprocessor">#if DBG_FE</span>
04346 <span class="preprocessor"></span>            <a class="code" href="../../d6/d6/memprint_8h.html#a7">DbgPrint</a>(<span class="stringliteral">"USER32:Offset to KBDTABLES    = %d (%x)\n"</span>,*poffTable,*poffTable);
04347             <a class="code" href="../../d6/d6/memprint_8h.html#a7">DbgPrint</a>(<span class="stringliteral">"USER32:Offset to KBDNLSTABLES = %d (%x)\n"</span>,offNlsTable,offNlsTable);
04348 <span class="preprocessor">#endif // DBG_FE</span>
04349 <span class="preprocessor"></span>
04350             <span class="comment">/*</span>
04351 <span class="comment">             * Combine these offsets...</span>
04352 <span class="comment">             *</span>
04353 <span class="comment">             *  LOWORD(*poffTable) = Offset to KBDTABLES.</span>
04354 <span class="comment">             *  HIWORD(*poffTable) = Offset to KBDNLSTABLES.</span>
04355 <span class="comment">             */</span>
04356             *poffTable |= (offNlsTable &lt;&lt; 16);
04357         }
04358     }
04359 
04360     <span class="comment">/*</span>
04361 <span class="comment">     * Open the dll for read access.</span>
04362 <span class="comment">     */</span>
04363     GetModuleFileName(hLibModule, awchModName, <span class="keyword">sizeof</span>(awchModName));
04364     FreeLibrary(hLibModule);
04365     <span class="keywordflow">return</span> CreateFileW(
04366             awchModName,
04367             GENERIC_READ,
04368             FILE_SHARE_READ,
04369             NULL,
04370             OPEN_EXISTING,
04371             0,
04372             NULL);
04373 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a645" doxytag="usercli.h::PaintRect" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL PaintRect           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwndBrush</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwndPaint</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HDC&nbsp;</td>
          <td class="mdname" nowrap> <em>hdc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HBRUSH&nbsp;</td>
          <td class="mdname" nowrap> <em>hbr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPRECT&nbsp;</td>
          <td class="mdname" nowrap> <em>lprc</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d0/client_2draw_8c-source.html#l00025">25</a> of file <a class="el" href="../../d8/d0/client_2draw_8c-source.html">client/draw.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d0/d1/rtl_2draw_8c-source.html#l00061">FillRect()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01582">GetControlColor</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00120">GetDesktopWindow()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01839">tagWND::rcClient</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d5/d9/immcli_8h-source.html#l00120">ValidateHwnd</a>.
<p>
Referenced by <a class="el" href="../../d9/d0/btnctl_8c-source.html#l01338">ButtonWndProcWorker()</a>, <a class="el" href="../../d7/d1/output_8c-source.html#l04700">ConsoleWindowProc()</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l01206">xxxBNPaint()</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l00995">xxxButtonDrawCheck()</a>, and <a class="el" href="../../d6/d4/statctl_8c-source.html#l00419">xxxStaticPaint()</a>.
<p>
<pre class="fragment"><div>00031 {
00032     POINT ptOrg;
00033     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwndBrush;
00034     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwndPaint;
00035     HWND    hwndDesktop;
00036 
00037     hwndDesktop = <a class="code" href="../../d3/d9/client_2wow_8c.html#a4">GetDesktopWindow</a>();
00038     <span class="keywordflow">if</span> (hwndBrush == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00039         hwndBrush = hwndDesktop;
00040     }
00041 
00042     <span class="keywordflow">if</span> (hwndBrush != hwndPaint) {
00043         pwndBrush = <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(hwndBrush);
00044         <span class="keywordflow">if</span> (pwndBrush == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00045             RIPMSG1(RIP_WARNING, <span class="stringliteral">"PaintRect: invalid Brush window %lX"</span>, hwndBrush);
00046             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00047         }
00048 
00049         pwndPaint = <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(hwndPaint);
00050         <span class="keywordflow">if</span> (pwndPaint == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00051             RIPMSG1(RIP_WARNING, <span class="stringliteral">"PaintRect: invalid Paint window %lX"</span>, hwndBrush);
00052             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00053         }
00054 
00055 
00056         <span class="keywordflow">if</span> (hwndBrush != hwndDesktop) {
00057             SetBrushOrgEx(
00058                     hdc,
00059                     pwndBrush-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o7">rcClient</a>.left - pwndPaint-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o7">rcClient</a>.left,
00060                     pwndBrush-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o7">rcClient</a>.top - pwndPaint-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o7">rcClient</a>.top,
00061                     &amp;ptOrg);
00062         } <span class="keywordflow">else</span> {
00063             SetBrushOrgEx(hdc, 0, 0, &amp;ptOrg);
00064         }
00065     }
00066 
00067     <span class="comment">/*</span>
00068 <span class="comment">     * If hbr &lt; CTLCOLOR_MAX, it isn't really a brush but is one of our</span>
00069 <span class="comment">     * special color values.  Translate it to the appropriate WM_CTLCOLOR</span>
00070 <span class="comment">     * message and send it off to get back a real brush.  The translation</span>
00071 <span class="comment">     * process assumes the CTLCOLOR*** and WM_CTLCOLOR*** values map directly.</span>
00072 <span class="comment">     */</span>
00073     <span class="keywordflow">if</span> (hbr &lt; (HBRUSH)CTLCOLOR_MAX) {
00074         hbr = <a class="code" href="../../d6/d0/usercli_8h.html#a236">GetControlColor</a>(hwndBrush, hwndPaint, hdc,
00075                 HandleToUlong(hbr) + WM_CTLCOLORMSGBOX);
00076     }
00077 
00078     <a class="code" href="../../d9/d1/rtl_2draw_8c.html#a3">FillRect</a>(hdc, lprc, hbr);
00079 
00080     <span class="keywordflow">if</span> (hwndBrush != hwndPaint) {
00081         SetBrushOrgEx(hdc, ptOrg.x, ptOrg.y, NULL);
00082     }
00083 
00084     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00085 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a425" doxytag="usercli.h::PSMTextOut" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void PSMTextOut           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HDC&nbsp;</td>
          <td class="mdname" nowrap> <em>hdc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>xLeft</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>yTop</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPWSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>lpsz</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>cch</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwFlags</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d1/client_2drawtext_8c-source.html#l00555">555</a> of file <a class="el" href="../../d4/d1/client_2drawtext_8c-source.html">client/drawtext.c</a>.
<p>
References <a class="el" href="../../d4/d7/propapi_8h-source.html#l00043">dwFlags</a>.
<p>
Referenced by <a class="el" href="../../d0/d2/mngrayc_8c-source.html#l00075">DrawStateW()</a>, <a class="el" href="../../d6/d1/rtl_2drawtext_8c-source.html#l01090">DT_InitDrawTextInfo()</a>, and <a class="el" href="../../d6/d4/statctl_8c-source.html#l00419">xxxStaticPaint()</a>.
<p>
<pre class="fragment"><div>00562 {
00563     <span class="comment">/*</span>
00564 <span class="comment">     * By default this is just a call to UserLpkPSMTextOut.  If an</span>
00565 <span class="comment">     * LPK is installed, this calls out to the LPK.  The LPK calls</span>
00566 <span class="comment">     * UserLpkPSMTextOut, if necessary.</span>
00567 <span class="comment">     */</span>
00568     (*fpLpkPSMTextOut)(hdc, xLeft, yTop, lpsz, cch, <a class="code" href="../../d3/d8/propapi_8h.html#a34">dwFlags</a>);
00569     <span class="keywordflow">return</span>;
00570 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a791" doxytag="usercli.h::REBASESHAREDPTR" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> __inline PVOID REBASESHAREDPTR           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">KERNEL_PVOID&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>p</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02588">2588</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, and <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>.
<p>
<pre class="fragment"><div>02595                {
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a790" doxytag="usercli.h::REBASESHAREDPTRALWAYS" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> __inline PVOID REBASESHAREDPTRALWAYS           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">KERNEL_PVOID&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>p</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02582">2582</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
<pre class="fragment"><div>02595                {
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a635" doxytag="usercli.h::RegisterClassExWOWA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ATOM RegisterClassExWOWA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">PWNDCLASSEXA&nbsp;</td>
          <td class="mdname" nowrap> <em>lpWndClass</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>pdwWOWstuff</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WORD&nbsp;</td>
          <td class="mdname" nowrap> <em>fnid</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d4/d7/client_8c-source.html#l02615">RegisterClassWOWA()</a>, and <a class="el" href="../../d7/d7/clinit_8c-source.html#l00511">RW_RegisterDDEML()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a636" doxytag="usercli.h::RegisterClassExWOWW" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ATOM RegisterClassExWOWW           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">PWNDCLASSEXW&nbsp;</td>
          <td class="mdname" nowrap> <em>lpWndClass</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>pdwWOWstuff</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WORD&nbsp;</td>
          <td class="mdname" nowrap> <em>fnid</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d9/d4/reader_8c-source.html#l00355">EnterReaderMode()</a>, <a class="el" href="../../d7/d7/clinit_8c-source.html#l00378">RW_RegisterControls()</a>, and <a class="el" href="../../d7/d7/clinit_8c-source.html#l00511">RW_RegisterDDEML()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a764" doxytag="usercli.h::ReleaseEditDS" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID ReleaseEditDS           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HANDLE&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>h</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l02783">2783</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00133">pfn16GlobalFree</a>, and <a class="el" href="../../d2/d7/hal_8h.html#a212">VOID()</a>.
<p>
Referenced by <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l00460">DefDlgProcWorker()</a>.
<p>
<pre class="fragment"><div>02785 {
02786     UserAssert(pfn16GlobalFree != NULL);
02787 
02788     (*pfn16GlobalFree)(LOWORD(HandleToUlong(h)));
02789 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a760" doxytag="usercli.h::RepositionRect" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void RepositionRect           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d2/structtagMONITOR.html">PMONITOR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pMonitor</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPRECT&nbsp;</td>
          <td class="mdname" nowrap> <em>lprc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwStyle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwExStyle</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l01363">1363</a> of file <a class="el" href="../../d4/d8/dlgmgr_8c-source.html">dlgmgr.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l02604">GetPrimaryMonitor()</a>, <a class="el" href="../../d4/d5/rect_8c-source.html#l00139">OffsetRect()</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02157">tagMONITOR::rcMonitor</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02158">tagMONITOR::rcWork</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00202">SYSMET</a>.
<p>
Referenced by <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l00460">DefDlgProcWorker()</a>, and <a class="el" href="../../d1/d8/dlgbegin_8c-source.html#l00553">InternalCreateDialog()</a>.
<p>
<pre class="fragment"><div>01368 {
01369     LPRECT      lprcClip;
01370     <span class="keywordtype">int</span>         y;
01371 
01372     UserAssert(lprc);
01373     UserAssert(pMonitor);
01374 
01375     <span class="keywordflow">if</span> (dwStyle &amp; WS_CHILD) {
01376         <span class="keywordflow">if</span> (dwExStyle &amp; WS_EX_CONTROLPARENT)
01377             <span class="keywordflow">return</span>;
01378 
01379         <span class="comment">/*</span>
01380 <span class="comment">         * Old style 3.1 child dialogs--do this nonsense anyway.  Keeps</span>
01381 <span class="comment">         * FedEx happy.</span>
01382 <span class="comment">         */</span>
01383         pMonitor = <a class="code" href="../../d6/d0/usercli_8h.html#a793">GetPrimaryMonitor</a>();
01384         lprcClip = &amp;pMonitor-&gt;<a class="code" href="../../d0/d2/structtagMONITOR.html#o3">rcMonitor</a>;
01385     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dwExStyle &amp; WS_EX_TOOLWINDOW) {
01386         lprcClip = &amp;pMonitor-&gt;<a class="code" href="../../d0/d2/structtagMONITOR.html#o3">rcMonitor</a>;
01387     } <span class="keywordflow">else</span> {
01388         lprcClip = &amp;pMonitor-&gt;<a class="code" href="../../d0/d2/structtagMONITOR.html#o4">rcWork</a>;
01389     }
01390 
01391     UserAssert(lprc);
01392 
01393     y = lprcClip-&gt;bottom - (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CYEDGE) * 2 + <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CYKANJIWINDOW));
01394 
01395     <span class="keywordflow">if</span> (lprc-&gt;bottom &gt; y) {
01396         <a class="code" href="../../d3/d6/rect_8c.html#a6">OffsetRect</a>(lprc, 0, y - lprc-&gt;bottom);
01397     }
01398 
01399     <span class="keywordflow">if</span> (lprc-&gt;top &lt; lprcClip-&gt;top) {
01400         <a class="code" href="../../d3/d6/rect_8c.html#a6">OffsetRect</a>(lprc, 0, lprcClip-&gt;top - lprc-&gt;top);
01401     }
01402 
01403     <span class="keywordflow">if</span> (lprc-&gt;right &gt; lprcClip-&gt;right) {
01404         <a class="code" href="../../d3/d6/rect_8c.html#a6">OffsetRect</a>(lprc, lprcClip-&gt;right - lprc-&gt;right, 0);
01405     }
01406 
01407     <span class="keywordflow">if</span> (lprc-&gt;left &lt; lprcClip-&gt;left) {
01408         <a class="code" href="../../d3/d6/rect_8c.html#a6">OffsetRect</a>(lprc, lprcClip-&gt;left - lprc-&gt;left, 0);
01409     }
01410 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a429" doxytag="usercli.h::RtlCaptureAnsiString" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL RtlCaptureAnsiString           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d1/struct__IN__STRING.html">PIN_STRING</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPCSTR&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d1/rtlinit_8c-source.html#l00030">30</a> of file <a class="el" href="../../d2/d1/rtlinit_8c-source.html">rtlinit.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00316">_IN_STRING::fAllocated</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00315">_IN_STRING::pstr</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00061">pUserHeap</a>, <a class="el" href="../../d4/d6/config_2utils_2regutil_8c-source.html#l00022">RtlAllocateHeap</a>, <a class="el" href="../../d4/d6/config_2utils_2regutil_8c-source.html#l00023">RtlFreeHeap</a>, <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00369">RtlMultiByteToUnicodeN()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00314">_IN_STRING::strCapture</a>, <a class="el" href="../../d2/d7/regtest_8c.html#a2">strlen()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00064">USHORT</a>.
<p>
<pre class="fragment"><div>00034 {
00035     <span class="keywordtype">int</span> cbSrc;
00036     <span class="keywordtype">int</span> cbDst;
00037 
00038     pstr-&gt;fAllocated = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00039     <span class="keywordflow">if</span> (psz) {
00040         cbSrc = <a class="code" href="../../d2/d7/regtest_8c.html#a2">strlen</a>(psz) + 1;
00041         <span class="keywordflow">if</span> (cbSrc &gt; MAXUSHORT) {
00042             RIPMSG0(RIP_WARNING, <span class="stringliteral">"String too long for standard string"</span>);
00043             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00044         }
00045 
00046         <span class="comment">/*</span>
00047 <span class="comment">         * If the allocation is forced or if the string is</span>
00048 <span class="comment">         * too long to fit in the TEB, allocate a buffer.</span>
00049 <span class="comment">         * Otherwise, store the result in the TEB.</span>
00050 <span class="comment">         */</span>
00051         <span class="keywordflow">if</span> (fForceAlloc ||
00052                 cbSrc &gt; (STATIC_UNICODE_BUFFER_LENGTH / <span class="keyword">sizeof</span>(WCHAR))) {
00053             pstr-&gt;strCapture.Buffer = <a class="code" href="../../d3/d7/config_2utils_2regutil_8c.html#a0">RtlAllocateHeap</a>(pUserHeap,
00054                     0, cbSrc * <span class="keyword">sizeof</span>(WCHAR));
00055             <span class="keywordflow">if</span> (pstr-&gt;strCapture.Buffer == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00056                 <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00057             pstr-&gt;fAllocated = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00058             pstr-&gt;pstr = &amp;pstr-&gt;strCapture;
00059             pstr-&gt;strCapture.MaximumLength = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a>)(cbSrc * <span class="keyword">sizeof</span>(WCHAR));
00060         } <span class="keywordflow">else</span> {
00061             pstr-&gt;pstr = &amp;NtCurrentTeb()-&gt;StaticUnicodeString;
00062         }
00063 
00064         <span class="comment">/*</span>
00065 <span class="comment">         * Convert the string to Unicode</span>
00066 <span class="comment">         */</span>
00067         <span class="keywordflow">if</span> (<a class="code" href="../../d9/d6/nlsxlat_8c.html#a33">RtlMultiByteToUnicodeN</a>(pstr-&gt;pstr-&gt;Buffer,
00068                 (ULONG)pstr-&gt;pstr-&gt;MaximumLength, &amp;cbDst,
00069                 (LPSTR)psz, cbSrc)) {
00070             RIPMSG0(RIP_WARNING, <span class="stringliteral">"Unicode conversion failed"</span>);
00071             <span class="keywordflow">if</span> (pstr-&gt;fAllocated) {
00072                 <a class="code" href="../../d3/d7/config_2utils_2regutil_8c.html#a1">RtlFreeHeap</a>(pUserHeap, 0, pstr-&gt;strCapture.Buffer);
00073                 pstr-&gt;fAllocated = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00074             }
00075             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00076         }
00077         pstr-&gt;pstr-&gt;Length = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a>)cbDst - <span class="keyword">sizeof</span>(WCHAR);
00078     } <span class="keywordflow">else</span> {
00079         pstr-&gt;pstr = &amp;pstr-&gt;strCapture;
00080         pstr-&gt;strCapture.Length = pstr-&gt;strCapture.MaximumLength = 0;
00081         pstr-&gt;strCapture.Buffer = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00082     }
00083     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00084 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a430" doxytag="usercli.h::RtlCaptureLargeAnsiString" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL RtlCaptureLargeAnsiString           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d8/struct__LARGE__IN__STRING.html">PLARGE_IN_STRING</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPCSTR&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d1/rtlinit_8c-source.html#l00095">95</a> of file <a class="el" href="../../d2/d1/rtlinit_8c-source.html">rtlinit.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00435">_LARGE_UNICODE_STRING::Buffer</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00322">_LARGE_IN_STRING::fAllocated</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l00463">_LARGE_UNICODE_STRING::Length</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l00464">_LARGE_UNICODE_STRING::MaximumLength</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d6/d0/usercli_8h.html#a353">PLARGE_IN_STRING</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00321">_LARGE_IN_STRING::pstr</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00061">pUserHeap</a>, <a class="el" href="../../d4/d6/config_2utils_2regutil_8c-source.html#l00022">RtlAllocateHeap</a>, <a class="el" href="../../d4/d6/config_2utils_2regutil_8c-source.html#l00023">RtlFreeHeap</a>, <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00369">RtlMultiByteToUnicodeN()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00320">_LARGE_IN_STRING::strCapture</a>, <a class="el" href="../../d2/d7/regtest_8c.html#a2">strlen()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>.
<p>
Referenced by <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l01197">_CreateWindowEx()</a>.
<p>
<pre class="fragment"><div>00099 {
00100     <span class="keywordtype">int</span> cchSrc;
00101     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> uLength;
00102 
00103     plstr-&gt;fAllocated = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00104     plstr-&gt;pstr = &amp;plstr-&gt;strCapture;
00105 
00106     <span class="keywordflow">if</span> (psz) {
00107         cchSrc = <a class="code" href="../../d2/d7/regtest_8c.html#a2">strlen</a>(psz) + 1;
00108 
00109         <span class="comment">/*</span>
00110 <span class="comment">         * If the allocation is forced or if the string is</span>
00111 <span class="comment">         * too long to fit in the TEB, allocate a buffer.</span>
00112 <span class="comment">         * Otherwise, store the result in the TEB.</span>
00113 <span class="comment">         */</span>
00114         <span class="keywordflow">if</span> (fForceAlloc || cchSrc &gt; STATIC_UNICODE_BUFFER_LENGTH) {
00115             plstr-&gt;strCapture.Buffer = <a class="code" href="../../d3/d7/config_2utils_2regutil_8c.html#a0">RtlAllocateHeap</a>(pUserHeap,
00116                     0, cchSrc * <span class="keyword">sizeof</span>(WCHAR));
00117             <span class="keywordflow">if</span> (plstr-&gt;strCapture.Buffer == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00118                 <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00119             plstr-&gt;fAllocated = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00120             plstr-&gt;strCapture.MaximumLength = cchSrc * <span class="keyword">sizeof</span>(WCHAR);
00121         } <span class="keywordflow">else</span> {
00122             plstr-&gt;strCapture.Buffer = NtCurrentTeb()-&gt;StaticUnicodeBuffer;
00123             plstr-&gt;strCapture.MaximumLength =
00124                     (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)(STATIC_UNICODE_BUFFER_LENGTH * <span class="keyword">sizeof</span>(WCHAR));
00125         }
00126 
00127         <span class="comment">/*</span>
00128 <span class="comment">         * Convert the string to Unicode</span>
00129 <span class="comment">         */</span>
00130         <span class="keywordflow">if</span> (<a class="code" href="../../d9/d6/nlsxlat_8c.html#a33">RtlMultiByteToUnicodeN</a>(plstr-&gt;pstr-&gt;Buffer,
00131                 plstr-&gt;pstr-&gt;MaximumLength, &amp;uLength,
00132                 (LPSTR)psz, cchSrc)) {
00133             RIPMSG0(RIP_WARNING, <span class="stringliteral">"Unicode conversion failed"</span>);
00134             <span class="keywordflow">if</span> (plstr-&gt;fAllocated) {
00135                 <a class="code" href="../../d3/d7/config_2utils_2regutil_8c.html#a1">RtlFreeHeap</a>(pUserHeap, 0, plstr-&gt;strCapture.Buffer);
00136                 plstr-&gt;fAllocated = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00137             }
00138             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00139         }
00140         plstr-&gt;pstr-&gt;Length = uLength - <span class="keyword">sizeof</span>(WCHAR);
00141     } <span class="keywordflow">else</span> {
00142         plstr-&gt;strCapture.Length = plstr-&gt;strCapture.MaximumLength = 0;
00143         plstr-&gt;strCapture.Buffer = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00144     }
00145     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00146 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a428" doxytag="usercli.h::RtlGetIdFromDirectory" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int RtlGetIdFromDirectory           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d9/d7/halvprnt_8c.html#a1">PBYTE</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PDWORD&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d8/clres_8c-source.html#l04759">4759</a> of file <a class="el" href="../../d5/d8/clres_8c-source.html">clres.c</a>.
<p>
References <a class="el" href="../../d5/d8/clres_8c-source.html#l03980">GetBestImage()</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l04096">GetIcoCurBpp()</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l04074">GetIcoCurHeight()</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l04052">GetIcoCurWidth()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>.
<p>
Referenced by <a class="el" href="../../d5/d8/clres_8c-source.html#l01550">LookupIconIdFromDirectoryEx()</a>, and <a class="el" href="../../d4/d3/client_2acons_8c-source.html#l00454">ReadIconGuts()</a>.
<p>
<pre class="fragment"><div>04766 {
04767     LPNEWHEADER lpnh;
04768     LPRESDIR    lprsd;
04769     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>        iImage;
04770     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>        cImage;
04771     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>        bpp;
04772 
04773     <span class="comment">/*</span>
04774 <span class="comment">     * Make sure this is pointing to valid resource bits.</span>
04775 <span class="comment">     */</span>
04776     <span class="keywordflow">if</span> (presbits == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
04777         <span class="keywordflow">return</span> 0;
04778 
04779     lpnh = (LPNEWHEADER)presbits;
04780 
04781     <span class="comment">/*</span>
04782 <span class="comment">     * Fill in defaults.</span>
04783 <span class="comment">     */</span>
04784     cxDesired = <a class="code" href="../../d6/d0/usercli_8h.html#a652">GetIcoCurWidth</a>(cxDesired, fIcon, LR_flags, 0);
04785     cyDesired = <a class="code" href="../../d6/d0/usercli_8h.html#a653">GetIcoCurHeight</a>(cyDesired, fIcon, LR_flags, 0);
04786 
04787     bpp = <a class="code" href="../../d6/d0/usercli_8h.html#a654">GetIcoCurBpp</a>(LR_flags);
04788 
04789     <span class="comment">/*</span>
04790 <span class="comment">     * We'll use the first image in the directory if we can't find one</span>
04791 <span class="comment">     * that's appropriate.</span>
04792 <span class="comment">     */</span>
04793     cImage = lpnh-&gt;ResCount;
04794     lprsd  = (LPRESDIR)(lpnh + 1);
04795 
04796     iImage = <a class="code" href="../../d4/d9/clres_8c.html#a96">GetBestImage</a>(lprsd, cImage, cxDesired, cyDesired, bpp, fIcon);
04797 
04798     <span class="keywordflow">if</span> (iImage == cImage)
04799         iImage = 0;
04800 
04801     <span class="keywordflow">if</span> (pdwResSize != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
04802         *pdwResSize = (lprsd + iImage)-&gt;BytesInRes;
04803 
04804     <span class="keywordflow">return</span> ((LPRESDIR)(lprsd + iImage))-&gt;idIcon;
04805 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a657" doxytag="usercli.h::RtlLoadObjectFromDIBFile" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HANDLE RtlLoadObjectFromDIBFile           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">LPCWSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>lpszName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPWSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>type</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cxDesired</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cyDesired</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>LR_flags</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d1/rtlres_8c-source.html#l00142">142</a> of file <a class="el" href="../../d4/d1/rtlres_8c-source.html">rtlres.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l01629">BFT_BITMAP</a>, <a class="el" href="../../d4/d1/rtlres_8c-source.html#l00139">BITMAPFILEHEADER_SIZE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00302">BitmapSize</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d6/d0/usercli_8h.html#a659">ConvertDIBBitmap()</a>, <a class="el" href="../../d2/d0/inctlpan_8c-source.html#l00480">cy</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d6/d0/usercli_8h.html#a380">FILEINFO</a>, <a class="el" href="../../d4/d1/rtlres_8c-source.html#l00396">IconFromBestImage()</a>, <a class="el" href="../../d6/d3/rxact_8c-source.html#l00212">INVALID_HANDLE_VALUE</a>, <a class="el" href="../../d4/d3/client_2acons_8c-source.html#l00279">LoadCursorIconFromFileMap()</a>, <a class="el" href="../../d4/d8/arcinst_8c-source.html#l00065">MAX_PATH</a>, <a class="el" href="../../d4/d1/rtlres_8c-source.html#l00140">MINHEADERS_SIZE</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d4/d8/ntfsexp_8h.html#a141a69">OPEN_EXISTING</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01635">_FILEINFO::pFileEnd</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01633">_FILEINFO::pFileMap</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01634">_FILEINFO::pFilePtr</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01636">_FILEINFO::pszName</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00411">PTR_TO_ID</a>, <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00077">szFile</a>, <a class="el" href="../../d4/d4/i386_2trapc_8c-source.html#l00076">type</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00924">UPBITMAPCOREHEADER</a>, and <a class="el" href="../../d7/d9/usercli_8h-source.html#l00923">UPBITMAPINFOHEADER</a>.
<p>
Referenced by <a class="el" href="../../d5/d8/clres_8c-source.html#l02847">ObjectFromDIBResource()</a>.
<p>
<pre class="fragment"><div>00148 {
00149     <a class="code" href="../../d1/d2/struct__FILEINFO.html">FILEINFO</a> fi = { <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>, <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>, <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> };
00150     HANDLE   hFile;
00151     HANDLE   hFileMap = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00152     HANDLE   hObj     = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00153     TCHAR    <a class="code" href="../../d3/d8/aug98_2test_2main_8c.html#a3">szFile</a>[<a class="code" href="../../d3/d9/arcinst_8c.html#a6">MAX_PATH</a>];
00154     TCHAR    szFile2[<a class="code" href="../../d3/d9/arcinst_8c.html#a6">MAX_PATH</a>];
00155     LPWSTR   pszFileDummy;
00156 
00157     <span class="keywordflow">if</span> (LR_flags &amp; LR_ENVSUBST) {
00158 
00159         <span class="comment">/*</span>
00160 <span class="comment">         * Do any %% string substitutions.  We need this feature to handle</span>
00161 <span class="comment">         * loading custom cursors and icons from the registry which uses</span>
00162 <span class="comment">         * %SystemRoot% in the paths.  It also makes the shell's job</span>
00163 <span class="comment">         * easier.</span>
00164 <span class="comment">         */</span>
00165         ExpandEnvironmentStrings(lpszName, szFile2, MAX_PATH);
00166 
00167     } <span class="keywordflow">else</span> {
00168 
00169         lstrcpy(szFile2, lpszName);
00170     }
00171 
00172     <span class="keywordflow">if</span> (SearchPath(NULL,         <span class="comment">// use default search locations</span>
00173                    szFile2,      <span class="comment">// file name to search for</span>
00174                    NULL,         <span class="comment">// already have file name extension</span>
00175                    MAX_PATH,     <span class="comment">// how big is that buffer, anyway?</span>
00176                    szFile,       <span class="comment">// stick fully qualified path name here</span>
00177                    &amp;pszFileDummy) == 0) {
00178         RIPERR0(ERROR_FILE_NOT_FOUND, RIP_VERBOSE, <span class="stringliteral">""</span>);
00179         <span class="keywordflow">return</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00180     }
00181 
00182     <span class="comment">/*</span>
00183 <span class="comment">     * Open File for reading.</span>
00184 <span class="comment">     */</span>
00185     hFile = CreateFileW(szFile,
00186                         GENERIC_READ,
00187                         FILE_SHARE_READ,
00188                         NULL,
00189                         OPEN_EXISTING,
00190                         0,
00191                         NULL);
00192 
00193     <span class="keywordflow">if</span> (hFile == <a class="code" href="../../d5/d4/rxact_8c.html#a0">INVALID_HANDLE_VALUE</a>)
00194         <span class="keywordflow">goto</span> Done;
00195 
00196     <span class="comment">/*</span>
00197 <span class="comment">     * Create file-mapping for the file in question.</span>
00198 <span class="comment">     */</span>
00199     hFileMap = CreateFileMapping(hFile, NULL, PAGE_READONLY, 0, 0, NULL);
00200 
00201     <span class="keywordflow">if</span> (hFileMap == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00202         <span class="keywordflow">goto</span> CloseDone;
00203 
00204     <span class="comment">/*</span>
00205 <span class="comment">     * Map the file into view.</span>
00206 <span class="comment">     */</span>
00207     fi.<a class="code" href="../../d1/d2/struct__FILEINFO.html#o0">pFileMap</a> = MapViewOfFile(hFileMap, FILE_MAP_READ, 0, 0, 0);
00208 
00209     <span class="keywordflow">if</span> (fi.<a class="code" href="../../d1/d2/struct__FILEINFO.html#o0">pFileMap</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00210         <span class="keywordflow">goto</span> CloseDone;
00211 
00212     fi.<a class="code" href="../../d1/d2/struct__FILEINFO.html#o2">pFileEnd</a> = fi.<a class="code" href="../../d1/d2/struct__FILEINFO.html#o0">pFileMap</a> + GetFileSize(hFile, NULL);
00213     fi.<a class="code" href="../../d1/d2/struct__FILEINFO.html#o1">pFilePtr</a> = fi.<a class="code" href="../../d1/d2/struct__FILEINFO.html#o0">pFileMap</a>;
00214     fi.<a class="code" href="../../d1/d2/struct__FILEINFO.html#o3">pszName</a>  = <a class="code" href="../../d3/d8/aug98_2test_2main_8c.html#a3">szFile</a>;
00215 
00216     <span class="keywordflow">try</span> {
00217         <span class="keywordflow">switch</span>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a99">PTR_TO_ID</a>(type)) {
00218         <span class="keywordflow">case</span> <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a99">PTR_TO_ID</a>(RT_BITMAP): {
00219 
00220             LPBITMAPFILEHEADER pBFH;
00221             <a class="code" href="../../d6/d0/usercli_8h.html#a378">UPBITMAPINFOHEADER</a> upBIH;
00222             LPBYTE             lpBits;
00223             <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>              cx;
00224             <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>              <a class="code" href="../../d1/d1/inctlpan_8c.html#a3">cy</a>;
00225             WORD               planes;
00226             WORD               bpp;
00227             <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>              cbSizeImage = 0;
00228             <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>              cbSizeFile;
00229             <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>              cbSizeBits;
00230 
00231             <span class="comment">/*</span>
00232 <span class="comment">             * Set the BitmapFileHeader and BitmapInfoHeader pointers.</span>
00233 <span class="comment">             */</span>
00234             pBFH  = (LPBITMAPFILEHEADER)fi.<a class="code" href="../../d1/d2/struct__FILEINFO.html#o0">pFileMap</a>;
00235             upBIH = (<a class="code" href="../../d6/d0/usercli_8h.html#a378">UPBITMAPINFOHEADER</a>)(fi.<a class="code" href="../../d1/d2/struct__FILEINFO.html#o0">pFileMap</a> + <a class="code" href="../../d3/d2/rtlres_8c.html#a0">BITMAPFILEHEADER_SIZE</a>);
00236 
00237             <span class="comment">/*</span>
00238 <span class="comment">             * Are we dealing with a bitmap file.</span>
00239 <span class="comment">             */</span>
00240             <span class="keywordflow">if</span> (pBFH-&gt;bfType != <a class="code" href="../../d6/d0/usercli_8h.html#a241">BFT_BITMAP</a>)
00241                 <span class="keywordflow">break</span>;
00242 
00243             <span class="comment">/*</span>
00244 <span class="comment">             * We need to check the filesize against the potential size of</span>
00245 <span class="comment">             * the image.  Bad-Bitmaps would otherwise be able to slam us</span>
00246 <span class="comment">             * if they lied about the size (and/or) the file is truncated.</span>
00247 <span class="comment">             */</span>
00248             <span class="keywordflow">if</span> (upBIH-&gt;biSize == <span class="keyword">sizeof</span>(BITMAPCOREHEADER)) {
00249 
00250                 cx     = ((<a class="code" href="../../d6/d0/usercli_8h.html#a379">UPBITMAPCOREHEADER</a>)upBIH)-&gt;bcWidth;
00251                 <a class="code" href="../../d1/d1/inctlpan_8c.html#a3">cy</a>     = ((<a class="code" href="../../d6/d0/usercli_8h.html#a379">UPBITMAPCOREHEADER</a>)upBIH)-&gt;bcHeight;
00252                 bpp    = ((<a class="code" href="../../d6/d0/usercli_8h.html#a379">UPBITMAPCOREHEADER</a>)upBIH)-&gt;bcBitCount;
00253                 planes = ((<a class="code" href="../../d6/d0/usercli_8h.html#a379">UPBITMAPCOREHEADER</a>)upBIH)-&gt;bcPlanes;
00254 
00255             } <span class="keywordflow">else</span> {
00256 
00257                 cx     = upBIH-&gt;biWidth;
00258                 <a class="code" href="../../d1/d1/inctlpan_8c.html#a3">cy</a>     = upBIH-&gt;biHeight;
00259                 bpp    = upBIH-&gt;biBitCount;
00260                 planes = upBIH-&gt;biPlanes;
00261 
00262                 <span class="keywordflow">if</span>(upBIH-&gt;biSizeImage &gt;= <span class="keyword">sizeof</span>(BITMAPINFOHEADER))
00263                 cbSizeImage = upBIH-&gt;biSizeImage;
00264             }
00265 
00266             cbSizeFile = (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)(fi.<a class="code" href="../../d1/d2/struct__FILEINFO.html#o2">pFileEnd</a> - fi.<a class="code" href="../../d1/d2/struct__FILEINFO.html#o0">pFileMap</a>);
00267             cbSizeBits = <a class="code" href="../../d6/d0/usercli_8h.html#a32">BitmapSize</a>(cx, cy, planes, bpp);
00268 
00269             <span class="keywordflow">if</span> ((!cbSizeImage &amp;&amp; ((cbSizeFile - <a class="code" href="../../d3/d2/rtlres_8c.html#a1">MINHEADERS_SIZE</a>) &lt; cbSizeBits)) ||
00270             (cbSizeImage &amp;&amp; ((cbSizeFile - <a class="code" href="../../d3/d2/rtlres_8c.html#a1">MINHEADERS_SIZE</a>) &lt; cbSizeImage))) {
00271 
00272                 <span class="keywordflow">break</span>;
00273             }
00274 
00275             <span class="comment">/*</span>
00276 <span class="comment">             * Get the bits-offset in the file.</span>
00277 <span class="comment">             */</span>
00278             <span class="keywordflow">if</span> ((pBFH-&gt;bfOffBits &gt;= (<span class="keyword">sizeof</span>(BITMAPFILEHEADER) + <span class="keyword">sizeof</span>(BITMAPCOREHEADER))) &amp;&amp;
00279                 (pBFH-&gt;bfOffBits &lt;= (cbSizeFile - cbSizeImage))) {
00280 
00281                 lpBits = ((LPBYTE)upBIH) + pBFH-&gt;bfOffBits - <span class="keyword">sizeof</span>(BITMAPFILEHEADER);
00282 
00283             } <span class="keywordflow">else</span> {
00284 
00285                 lpBits = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00286             }
00287 
00288             <span class="comment">/*</span>
00289 <span class="comment">             * Convert the dib-on-file to a bitmap-handle.  This can</span>
00290 <span class="comment">             * convert both CORE and INFO formats.</span>
00291 <span class="comment">             */</span>
00292             hObj = <a class="code" href="../../d6/d0/usercli_8h.html#a659">ConvertDIBBitmap</a>(upBIH,
00293                                     cxDesired,
00294                                     cyDesired,
00295                                     LR_flags,
00296                                     NULL,
00297                                     &amp;lpBits);  <span class="comment">// use these bits!</span>
00298         }
00299         <span class="keywordflow">break</span>;
00300 
00301         <span class="keywordflow">case</span> <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a99">PTR_TO_ID</a>(RT_CURSOR):
00302         case <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a99">PTR_TO_ID</a>(RT_ICON):
00303         {
00304             RTAG           *prtag;
00305             ICONFILEHEADER *pifh;
00306 
00307             <span class="comment">/*</span>
00308 <span class="comment">             * Is this a RIFF file?</span>
00309 <span class="comment">             */</span>
00310             prtag = (RTAG *)fi.<a class="code" href="../../d1/d2/struct__FILEINFO.html#o0">pFileMap</a>;
00311 
00312             <span class="keywordflow">if</span> (prtag-&gt;ckID != FOURCC_RIFF) {
00313 
00314                 NEWHEADER nh;
00315 
00316                 pifh = (ICONFILEHEADER *)fi.<a class="code" href="../../d1/d2/struct__FILEINFO.html#o0">pFileMap</a>;
00317 
00318                 <span class="comment">/*</span>
00319 <span class="comment">                 * BUG?: looks like we can load icons as cursors and cursors</span>
00320 <span class="comment">                 * as icons.  Does this work?  Is this desired? (SAS)</span>
00321 <span class="comment">                 */</span>
00322                 <span class="keywordflow">if</span> ((pifh-&gt;iReserved != 0) ||
00323                     ((pifh-&gt;iResourceType != IMAGE_ICON) &amp;&amp;
00324                         (pifh-&gt;iResourceType != IMAGE_CURSOR)) ||
00325                     (pifh-&gt;cresIcons &lt; 1))
00326 
00327                     <span class="keywordflow">break</span>;
00328 
00329                 nh.ResType  = ((<a class="code" href="../../d3/d5/i386_2trapc_8c.html#a9">type</a> == RT_ICON) ? IMAGE_ICON : IMAGE_CURSOR);
00330                 nh.ResCount = pifh-&gt;cresIcons;
00331                 nh.Reserved = 0;
00332 
00333                 <span class="comment">/*</span>
00334 <span class="comment">                 * Get the size of the sucker and meanwhile seek the file pointer</span>
00335 <span class="comment">                 * to point at the DIB we want.  Files that have more than one</span>
00336 <span class="comment">                 * icon/cursor are treated like a group.  In other words,</span>
00337 <span class="comment">                 * each image is treated like an individual element in the res</span>
00338 <span class="comment">                 * dir.  So we need to pick the best fit one...</span>
00339 <span class="comment">                 */</span>
00340                 hObj = <a class="code" href="../../d3/d2/rtlres_8c.html#a2">IconFromBestImage</a>(pifh,
00341                                      &amp;nh,
00342                                      cxDesired,
00343                                      cyDesired,
00344                                      LR_flags);
00345             } <span class="keywordflow">else</span> {
00346 
00347                 <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fAni;
00348 
00349                 hObj = <a class="code" href="../../d6/d0/usercli_8h.html#a651">LoadCursorIconFromFileMap</a>(&amp;fi,
00350                                                  &amp;type,
00351                                                  cxDesired,
00352                                                  cyDesired,
00353                                                  LR_flags,
00354                                                  &amp;fAni);
00355                 }
00356             }
00357         <span class="keywordflow">break</span>;
00358 
00359         <span class="keywordflow">default</span>:
00360             UserAssert(FALSE);
00361             <span class="keywordflow">break</span>;
00362         } <span class="comment">// switch</span>
00363     } except (W32ExceptionHandler(FALSE, RIP_WARNING)) {
00364         hObj = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00365     }
00366 CloseDone:
00367 
00368     <span class="keywordflow">if</span> (fi.<a class="code" href="../../d1/d2/struct__FILEINFO.html#o0">pFileMap</a> != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00369         UnmapViewOfFile(fi.<a class="code" href="../../d1/d2/struct__FILEINFO.html#o0">pFileMap</a>);
00370 
00371     <span class="keywordflow">if</span> (hFileMap)
00372         CloseHandle(hFileMap);
00373 
00374     <span class="keywordflow">if</span> (hFile &amp;&amp; (hFile != <a class="code" href="../../d5/d4/rxact_8c.html#a0">INVALID_HANDLE_VALUE</a>))
00375         CloseHandle(hFile);
00376 
00377 Done:
00378 <span class="preprocessor">#if DBG</span>
00379 <span class="preprocessor"></span>    <span class="keywordflow">if</span> (hObj == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00380         RIPMSG1(RIP_WARNING,
00381                 <span class="stringliteral">"RtlLoadObjectFromDIBFile: Couldn't read resource from %ws"</span>,
00382                 lpszName);
00383     }
00384 <span class="preprocessor">#endif</span>
00385 <span class="preprocessor"></span>
00386     <span class="keywordflow">return</span> hObj;
00387 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a580" doxytag="usercli.h::ScrollBarWndProcA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LRESULT APIENTRY ScrollBarWndProcA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>msg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00242">242</a> of file <a class="el" href="../../d1/d8/clmsg_8c-source.html">clmsg.c</a>.
<p>
References <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00187">ScrollBarWndProcWorker()</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d7/d7/clinit_8c-source.html#l01219">ClientThreadSetup()</a>.
<p>
<pre class="fragment"><div>00247 {
00248     <span class="keywordflow">return</span> <a class="code" href="../../d0/d9/clmsg_8c.html#a16">ScrollBarWndProcWorker</a>(hwnd, message, wParam, lParam, TRUE);
00249 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a581" doxytag="usercli.h::ScrollBarWndProcW" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LRESULT APIENTRY ScrollBarWndProcW           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>msg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00251">251</a> of file <a class="el" href="../../d1/d8/clmsg_8c-source.html">clmsg.c</a>.
<p>
References <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, and <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00187">ScrollBarWndProcWorker()</a>.
<p>
Referenced by <a class="el" href="../../d7/d7/clinit_8c-source.html#l01219">ClientThreadSetup()</a>.
<p>
<pre class="fragment"><div>00256 {
00257     <span class="keywordflow">return</span> <a class="code" href="../../d0/d9/clmsg_8c.html#a16">ScrollBarWndProcWorker</a>(hwnd, message, wParam, lParam, FALSE);
00258 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a601" doxytag="usercli.h::SendMessageTimeoutWorker" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LRESULT SendMessageTimeoutWorker           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>message</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>fuFlags</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>uTimeout</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PULONG_PTR&nbsp;</td>
          <td class="mdname" nowrap> <em>lpdwResult</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fAnsi</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00498">498</a> of file <a class="el" href="../../d1/d8/clmsg_8c-source.html">clmsg.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l00148">CsSendMessage</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00814">FNID_SENDMESSAGEEX</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00813">FNID_SENDMESSAGEFF</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l03165">tagSNDMSGTIMEOUT::fuFlags</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00120">GetDesktopWindow()</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l03168">tagSNDMSGTIMEOUT::lSMTOResult</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l03167">tagSNDMSGTIMEOUT::lSMTOReturn</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00133">RESERVED_MSG_BITS</a>, <a class="el" href="../../d0/d0/client_2nt6_2user_8h.html#a1095">SNDMSGTIMEOUT</a>, and <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l03166">tagSNDMSGTIMEOUT::uTimeout</a>.
<p>
Referenced by <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00697">SendMessageTimeout()</a>.
<p>
<pre class="fragment"><div>00507 {
00508     <a class="code" href="../../d9/d6/structtagSNDMSGTIMEOUT.html">SNDMSGTIMEOUT</a> smto;
00509 
00510     <span class="comment">/*</span>
00511 <span class="comment">     * Prevent apps from setting hi 16 bits so we can use them internally.</span>
00512 <span class="comment">     */</span>
00513     <span class="keywordflow">if</span> (message &amp; <a class="code" href="../../d6/d0/usercli_8h.html#a8">RESERVED_MSG_BITS</a>) {
00514         RIPERR1(ERROR_INVALID_PARAMETER,
00515                 RIP_WARNING,
00516                 <span class="stringliteral">"Invalid parameter \"message\" (%ld) to SendMessageTimeoutWorker"</span>,
00517                 message);
00518 
00519         <span class="keywordflow">return</span>(0);
00520     }
00521 
00522     <span class="keywordflow">if</span> (fuFlags &amp; ~SMTO_VALID) {
00523         RIPERR1(ERROR_INVALID_PARAMETER, RIP_WARNING, <span class="stringliteral">"invalid dwFlags (%x) for SendMessageTimeout\n"</span>, fuFlags);
00524         <span class="keywordflow">return</span>(0);
00525     }
00526 
00527     <span class="keywordflow">if</span> (lpdwResult != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00528         *lpdwResult = 0<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>;
00529 
00530     <span class="comment">/*</span>
00531 <span class="comment">     * Always send broadcast requests straight to the server.</span>
00532 <span class="comment">     * Note: the xParam is used to id if it's from timeout or</span>
00533 <span class="comment">     * from an normal sendmessage.</span>
00534 <span class="comment">     */</span>
00535     smto.<a class="code" href="../../d9/d6/structtagSNDMSGTIMEOUT.html#o0">fuFlags</a> = fuFlags;
00536     smto.<a class="code" href="../../d9/d6/structtagSNDMSGTIMEOUT.html#o1">uTimeout</a> = uTimeout;
00537     smto.<a class="code" href="../../d9/d6/structtagSNDMSGTIMEOUT.html#o2">lSMTOReturn</a> = 0;
00538     smto.<a class="code" href="../../d9/d6/structtagSNDMSGTIMEOUT.html#o3">lSMTOResult</a> = 0;
00539 
00540     <span class="comment">/*</span>
00541 <span class="comment">     * Thunk through a special sendmessage for -1 hwnd's so that the general</span>
00542 <span class="comment">     * purpose thunks don't allow -1 hwnd's.</span>
00543 <span class="comment">     */</span>
00544     <span class="keywordflow">if</span> (hwnd == (HWND)-1 || hwnd == (HWND)0x0000FFFF) {
00545         <span class="comment">/*</span>
00546 <span class="comment">         * Get a real hwnd so the thunks will validation ok. Note that since</span>
00547 <span class="comment">         * -1 hwnd is really rare, calling GetDesktopWindow() here is not a</span>
00548 <span class="comment">         * big deal.</span>
00549 <span class="comment">         */</span>
00550         hwnd = <a class="code" href="../../d3/d9/client_2wow_8c.html#a4">GetDesktopWindow</a>();
00551 
00552         <a class="code" href="../../d6/d0/usercli_8h.html#a11">CsSendMessage</a>(hwnd, message, wParam, lParam,
00553                 (ULONG_PTR)&amp;smto, FNID_SENDMESSAGEFF, fAnsi);
00554     } <span class="keywordflow">else</span> {
00555         <a class="code" href="../../d6/d0/usercli_8h.html#a11">CsSendMessage</a>(hwnd, message, wParam, lParam,
00556                 (ULONG_PTR)&amp;smto, FNID_SENDMESSAGEEX, fAnsi);
00557     }
00558 
00559     <span class="keywordflow">if</span> (lpdwResult != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00560          *lpdwResult = smto.<a class="code" href="../../d9/d6/structtagSNDMSGTIMEOUT.html#o3">lSMTOResult</a>;
00561 
00562     <span class="keywordflow">return</span> smto.<a class="code" href="../../d9/d6/structtagSNDMSGTIMEOUT.html#o2">lSMTOReturn</a>;
00563 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a600" doxytag="usercli.h::SendMessageWorker" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LRESULT SendMessageWorker           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>message</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fAnsi</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00270">270</a> of file <a class="el" href="../../d1/d8/clmsg_8c-source.html">clmsg.c</a>.
<p>
References <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01273">_WNDMSG::abMsgs</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01355">tagSHAREDINFO::awmControl</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l03668">tagMSG_TABLE_ENTRY::bThunkMessage</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02366">BUILD_DBCS_MESSAGE_TO_CLIENTA_FROM_CLIENTW</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02282">BUILD_DBCS_MESSAGE_TO_CLIENTW_FROM_CLIENTA</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00187">CALLPROC_WOWCHECKPWW</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00148">CsSendMessage</a>, <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00574">DefWindowProcWorker()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02390">DISPATCH_DBCS_MESSAGE_IF_EXIST</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01739">tagCLS::fnid</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00803">FNID_CONTROLEND</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00791">FNID_CONTROLSTART</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00796">FNID_DIALOG</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00811">FNID_SENDMESSAGE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00781">FNID_START</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l00980">FNID_TO_CLIENT_PFNA_KERNEL</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l00981">FNID_TO_CLIENT_PFNW_KERNEL</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00897">FNID_TO_CLIENT_PFNWORKER</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00192">GetClientInfo</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01547">GETPTI</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00052">gSharedInfo</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01515">HWq</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00590">IS_DBCS_ENABLED</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01266">IsHooked</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01841">tagWND::lpfnWndProc</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l00976">MapKernelClientFnToClientFn</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01344">_WNDMSG::maxMsgs</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l03524">MessageTable</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02819">PDLG</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00058">PtiCurrent</a>, <a class="el" href="../../d0/d0/client_2nt6_2user_8h.html#a1002">PWNDMSG</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00210">REBASEALWAYS</a>, <a class="el" href="../../d6/d5/chartran_8c-source.html#l00490">RtlMBMessageWParamCharToWCS()</a>, <a class="el" href="../../d6/d5/chartran_8c-source.html#l00361">RtlWCSMessageWParamCharToMB()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02286">WFANSIPROC</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02285">WFSERVERSIDEPROC</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02035">WHF_CALLWNDPROC</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02036">WHF_CALLWNDPROCRET</a>.
<p>
Referenced by <a class="el" href="../../d9/d0/btnctl_8c-source.html#l01338">ButtonWndProcWorker()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l00104">ComboBoxDBCharHandler()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l00207">ComboBoxWndProcWorker()</a>, <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00574">DefWindowProcWorker()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l03776">ECGetControlBrush()</a>, <a class="el" href="../../d4/d7/winmgrc_8c-source.html#l00383">GetScrollInfo()</a>, <a class="el" href="../../d4/d7/winmgrc_8c-source.html#l00293">GetScrollPos()</a>, <a class="el" href="../../d4/d7/winmgrc_8c-source.html#l00335">GetScrollRange()</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00781">GetWindowText()</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00825">GetWindowTextLength()</a>, <a class="el" href="../../d1/d8/dlgbegin_8c-source.html#l00553">InternalCreateDialog()</a>, <a class="el" href="../../d6/d8/dlgmgr2_8c-source.html#l00317">IsDialogMessageW()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l02028">MLKeyDown()</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00652">SendMessage()</a>, <a class="el" href="../../d0/d9/imectl_8c-source.html#l01195">SendMessageToUI()</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00848">SetWindowText()</a>, <a class="el" href="../../d6/d4/statctl_8c-source.html#l00840">StaticWndProcWorker()</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l00654">xxxBNReleaseCapture()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l01624">xxxCBCompleteEditWindow()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l02343">xxxCBGetFocusHelper()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l02496">xxxCBGetTextHelper()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l02460">xxxCBGetTextLengthHelper()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l01719">xxxCBHideListBoxWindow()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l02028">xxxCBInternalUpdateEditWindow()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l02402">xxxCBKillFocusHelper()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l01589">xxxCBNotifyParent()</a>, <a class="el" href="../../d4/d3/comboini_8c-source.html#l00443">xxxCBSetFontHandler()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l01819">xxxCBShowListBoxWindow()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l02255">xxxCBUpdateListBoxWindow()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02948">xxxLBoxCtlCharInput()</a>, <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l00842">xxxLBoxCtlDelete()</a>, <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l01107">xxxLBSetCount()</a>, and <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01290">xxxTrackMouse()</a>.
<p>
<pre class="fragment"><div>00276 {
00277     HWND hwnd = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(pwnd);
00278     <a class="code" href="../../d2/d2/struct__CLIENTINFO.html">PCLIENTINFO</a> pci;
00279     <a class="code" href="../../d7/d0/structtagCLS.html">PCLS</a> pcls;
00280     BOOLEAN fAnsiRecv;
00281     BOOLEAN fNeedTranslation = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00282     BOOLEAN bDoDbcsMessaging = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00283     LRESULT lRet;
00284 
00285     UserAssert(pwnd);
00286 
00287     <span class="comment">/*</span>
00288 <span class="comment">     * Pass DDE messages to the server.</span>
00289 <span class="comment">     */</span>
00290     <span class="keywordflow">if</span> (message &gt;= WM_DDE_FIRST &amp;&amp; message &lt;= WM_DDE_LAST)
00291         <span class="keywordflow">goto</span> lbServerSendMessage;
00292 
00293     <span class="comment">/*</span>
00294 <span class="comment">     * Server must handle inter-thread SendMessages and SendMessages</span>
00295 <span class="comment">     * to server-side procs.</span>
00296 <span class="comment">     */</span>
00297     <span class="keywordflow">if</span> ((<a class="code" href="../../d4/d1/userk_8h.html#a9">PtiCurrent</a>() != <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a455">GETPTI</a>(pwnd)) || <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFSERVERSIDEPROC))
00298         <span class="keywordflow">goto</span> lbServerSendMessage;
00299 
00300     <span class="comment">/*</span>
00301 <span class="comment">     * Server must handle hooks (at least for now).</span>
00302 <span class="comment">     */</span>
00303     pci = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a16">GetClientInfo</a>();
00304     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a208">IsHooked</a>(pci, (WHF_CALLWNDPROC | WHF_CALLWNDPROCRET))) {
00305 lbServerSendMessage:
00306         <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a11">CsSendMessage</a>(hwnd, message, wParam, lParam, 0L,
00307                 FNID_SENDMESSAGE, fAnsi);
00308     }
00309 
00310     <span class="comment">/*</span>
00311 <span class="comment">     * If the sender and the receiver are both ANSI or both UNICODE</span>
00312 <span class="comment">     * then no message translation is necessary.</span>
00313 <span class="comment">     *</span>
00314 <span class="comment">     * EditWndProc may need to go to the server for translation if we</span>
00315 <span class="comment">     * are calling vanilla EditWndProc from SendMessageA and the edit</span>
00316 <span class="comment">     * control is currently subclassed Ansi but the edit control is</span>
00317 <span class="comment">     * stored Unicode.</span>
00318 <span class="comment">     */</span>
00319     fAnsiRecv = !!(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFANSIPROC));
00320     <span class="keywordflow">if</span> (!fAnsi != !fAnsiRecv) {
00321 
00322         <span class="comment">/*</span>
00323 <span class="comment">         * Translation might be necessary between sender and receiver,</span>
00324 <span class="comment">         * check to see if this is one of the messages we translate.</span>
00325 <span class="comment">         */</span>
00326         <span class="keywordflow">switch</span> (message) {
00327         <span class="keywordflow">case</span> WM_CHARTOITEM:
00328         <span class="keywordflow">case</span> EM_SETPASSWORDCHAR:
00329         <span class="keywordflow">case</span> WM_CHAR:
00330         <span class="keywordflow">case</span> WM_DEADCHAR:
00331         <span class="keywordflow">case</span> WM_SYSCHAR:
00332         <span class="keywordflow">case</span> WM_SYSDEADCHAR:
00333         <span class="keywordflow">case</span> WM_MENUCHAR:
00334         <span class="keywordflow">case</span> WM_IME_CHAR:
00335         <span class="keywordflow">case</span> WM_IME_COMPOSITION:
00336             <span class="keywordflow">if</span> (fAnsi) {
00337                 <span class="comment">/*</span>
00338 <span class="comment">                 * Setup DBCS Messaging for WM_CHAR...</span>
00339 <span class="comment">                 */</span>
00340                 <a class="code" href="../../d6/d0/usercli_8h.html#a295">BUILD_DBCS_MESSAGE_TO_CLIENTW_FROM_CLIENTA</a>(message,wParam,TRUE);
00341 
00342                 <span class="comment">/*</span>
00343 <span class="comment">                 * Convert wParam to Unicode...</span>
00344 <span class="comment">                 */</span>
00345                 <a class="code" href="../../d5/d6/chartran_8c.html#a5">RtlMBMessageWParamCharToWCS</a>(message, &amp;wParam);
00346 
00347                 <span class="comment">/*</span>
00348 <span class="comment">                 * The message has been converted to Unicode.</span>
00349 <span class="comment">                 */</span>
00350                 fAnsi = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00351             } <span class="keywordflow">else</span> {
00352                 POINT ptZero = {0,0};
00353                 <span class="comment">/*</span>
00354 <span class="comment">                 * Convert wParam to ANSI...</span>
00355 <span class="comment">                 */</span>
00356                 <a class="code" href="../../d5/d6/chartran_8c.html#a4">RtlWCSMessageWParamCharToMB</a>(message, &amp;wParam);
00357 
00358                 <span class="comment">/*</span>
00359 <span class="comment">                 * Let's DBCS messaging for WM_CHAR....</span>
00360 <span class="comment">                 */</span>
00361                 <a class="code" href="../../d6/d0/usercli_8h.html#a298">BUILD_DBCS_MESSAGE_TO_CLIENTA_FROM_CLIENTW</a>(
00362                     hwnd,message,wParam,lParam,0,ptZero,bDoDbcsMessaging);
00363 
00364                 <span class="comment">/*</span>
00365 <span class="comment">                 * The message has been converted to ANSI.</span>
00366 <span class="comment">                 */</span>
00367                 fAnsi = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00368             }
00369             <span class="keywordflow">break</span>;
00370 
00371         <span class="keywordflow">case</span> EM_SETSEL:
00372         <span class="keywordflow">case</span> EM_GETSEL:
00373         <span class="keywordflow">case</span> CB_GETEDITSEL:
00374             <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a125">IS_DBCS_ENABLED</a>()) {
00375                 RIPERR1(ERROR_INVALID_PARAMETER,
00376                         RIP_WARNING,
00377                         <span class="stringliteral">"Invalid DBCS message (%x) to SendMessageWorker"</span>,message);
00378             }
00379             <span class="comment">//</span>
00380             <span class="comment">// Fall down...</span>
00381 
00382         <span class="keywordflow">default</span>:
00383             <span class="keywordflow">if</span> ((message &lt; WM_USER) &amp;&amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a1144">MessageTable</a>[message].<a class="code" href="../../d6/d2/structtagMSG__TABLE__ENTRY.html#o1">bThunkMessage</a>) {
00384                 fNeedTranslation = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00385             }
00386         }
00387     }
00388 
00389 <span class="preprocessor">#ifndef LATER</span>
00390 <span class="preprocessor"></span>    <span class="comment">/*</span>
00391 <span class="comment">     * If the window has a client side worker proc and has</span>
00392 <span class="comment">     * not been subclassed, dispatch the message directly</span>
00393 <span class="comment">     * to the worker proc.  Otherwise, dispatch it normally.</span>
00394 <span class="comment">     */</span>
00395     pcls = <a class="code" href="../../d6/d0/usercli_8h.html#a24">REBASEALWAYS</a>(pwnd, pcls);
00396 
00397     <span class="keywordflow">if</span> ((pcls-&gt;<a class="code" href="../../d7/d0/structtagCLS.html#o2">fnid</a> &gt;= <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a199">FNID_CONTROLSTART</a> &amp;&amp; pcls-&gt;<a class="code" href="../../d7/d0/structtagCLS.html#o2">fnid</a> &lt;= <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a209">FNID_CONTROLEND</a>) &amp;&amp;
00398         ((KERNEL_ULONG_PTR)pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o8">lpfnWndProc</a> == <a class="code" href="../../d1/d0/inc_2user_8h.html#a239">FNID_TO_CLIENT_PFNW_KERNEL</a>(pcls-&gt;<a class="code" href="../../d7/d0/structtagCLS.html#o2">fnid</a>) ||
00399          (KERNEL_ULONG_PTR)pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o8">lpfnWndProc</a> == <a class="code" href="../../d1/d0/inc_2user_8h.html#a238">FNID_TO_CLIENT_PFNA_KERNEL</a>(pcls-&gt;<a class="code" href="../../d7/d0/structtagCLS.html#o2">fnid</a>))) {
00400         <a class="code" href="../../d1/d9/struct__WNDMSG.html">PWNDMSG</a> pwm = &amp;<a class="code" href="../../d1/d8/clglobal_8c.html#a5">gSharedInfo</a>.<a class="code" href="../../d4/d6/structtagSHAREDINFO.html#o5">awmControl</a>[pcls-&gt;<a class="code" href="../../d7/d0/structtagCLS.html#o2">fnid</a> - <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a191">FNID_START</a>];
00401 
00402         <span class="comment">/*</span>
00403 <span class="comment">         * If this message is not processed by the control, call</span>
00404 <span class="comment">         * xxxDefWindowProc</span>
00405 <span class="comment">         */</span>
00406         <span class="keywordflow">if</span> (pwm-&gt;<a class="code" href="../../d1/d9/struct__WNDMSG.html#o1">abMsgs</a> &amp;&amp; ((message &gt; pwm-&gt;<a class="code" href="../../d1/d9/struct__WNDMSG.html#o0">maxMsgs</a>) ||
00407                 !((pwm-&gt;<a class="code" href="../../d1/d9/struct__WNDMSG.html#o1">abMsgs</a>)[message / 8] &amp; (1 &lt;&lt; (message &amp; 7))))) {
00408 
00409             <span class="comment">/*</span>
00410 <span class="comment">             * Special case dialogs so that we can ignore unimportant</span>
00411 <span class="comment">             * messages during dialog creation.</span>
00412 <span class="comment">             */</span>
00413             <span class="keywordflow">if</span> (pcls-&gt;<a class="code" href="../../d7/d0/structtagCLS.html#o2">fnid</a> == <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a203">FNID_DIALOG</a> &amp;&amp;
00414                     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a793">PDLG</a>(pwnd) &amp;&amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a793">PDLG</a>(pwnd)-&gt;lpfnDlg != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00415                 <span class="comment">/*</span>
00416 <span class="comment">                 * If A/W translation are needed for Dialog,</span>
00417 <span class="comment">                 * it should go to kernel side to perform proper message.</span>
00418 <span class="comment">                 * DefDlgProcWorker will call aplication's DlgProc directly</span>
00419 <span class="comment">                 * without A/W conversion.</span>
00420 <span class="comment">                 */</span>
00421                 <span class="keywordflow">if</span> (fNeedTranslation) {
00422                     <span class="keywordflow">goto</span> lbServerSendMessage;
00423                 }
00424                 <span class="comment">/*</span>
00425 <span class="comment">                 * Call woker procudure.</span>
00426 <span class="comment">                 */</span>
00427             SendMessageToWorker1Again:
00428                 lRet = ((PROC)(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a235">FNID_TO_CLIENT_PFNWORKER</a>(pcls-&gt;<a class="code" href="../../d7/d0/structtagCLS.html#o2">fnid</a>)))(pwnd, message, wParam, lParam, fAnsi);
00429                 <span class="comment">/*</span>
00430 <span class="comment">                 * if we have DBCS TrailingByte that should be sent, send it here..</span>
00431 <span class="comment">                 */</span>
00432                 <a class="code" href="../../d6/d0/usercli_8h.html#a299">DISPATCH_DBCS_MESSAGE_IF_EXIST</a>(message,wParam,bDoDbcsMessaging,SendMessageToWorker1);
00433 
00434                 <span class="keywordflow">return</span> lRet;
00435             } <span class="keywordflow">else</span> {
00436                 <span class="comment">/*</span>
00437 <span class="comment">                 * Call worker procedure.</span>
00438 <span class="comment">                 */</span>
00439             SendMessageToDefWindowAgain:
00440                 lRet = <a class="code" href="../../d6/d0/usercli_8h.html#a610">DefWindowProcWorker</a>(pwnd, message, wParam, lParam, fAnsi);
00441                 <span class="comment">/*</span>
00442 <span class="comment">                 * if we have DBCS TrailingByte that should be sent, send it here..</span>
00443 <span class="comment">                 */</span>
00444                  <a class="code" href="../../d6/d0/usercli_8h.html#a299">DISPATCH_DBCS_MESSAGE_IF_EXIST</a>(message,wParam,bDoDbcsMessaging,SendMessageToDefWindow);
00445 
00446                 <span class="keywordflow">return</span> lRet;
00447             }
00448         } <span class="keywordflow">else</span> {
00449             <span class="comment">/*</span>
00450 <span class="comment">             * Call woker procudure.</span>
00451 <span class="comment">             */</span>
00452         SendMessageToWorker2Again:
00453             lRet = ((PROC)(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a235">FNID_TO_CLIENT_PFNWORKER</a>(pcls-&gt;<a class="code" href="../../d7/d0/structtagCLS.html#o2">fnid</a>)))(pwnd, message, wParam, lParam, fAnsi);
00454 
00455             <span class="comment">/*</span>
00456 <span class="comment">             * if we have DBCS TrailingByte that should be sent, send it here..</span>
00457 <span class="comment">             */</span>
00458             <a class="code" href="../../d6/d0/usercli_8h.html#a299">DISPATCH_DBCS_MESSAGE_IF_EXIST</a>(message,wParam,bDoDbcsMessaging,SendMessageToWorker2);
00459 
00460             <span class="keywordflow">return</span> lRet;
00461         }
00462     }
00463 <span class="preprocessor">#endif</span>
00464 <span class="preprocessor"></span>
00465     <span class="comment">/*</span>
00466 <span class="comment">     * If this message needs to be translated, go through the kernel.</span>
00467 <span class="comment">     */</span>
00468     <span class="keywordflow">if</span> (fNeedTranslation) {
00469         <span class="keywordflow">goto</span> lbServerSendMessage;
00470     }
00471 
00472     <span class="comment">/*</span>
00473 <span class="comment">     * Call Client Windows procudure.</span>
00474 <span class="comment">     */</span>
00475 SendMessageToWndProcAgain:
00476 
00477     lRet = <a class="code" href="../../d6/d0/usercli_8h.html#a19">CALLPROC_WOWCHECKPWW</a>(<a class="code" href="../../d1/d0/inc_2user_8h.html#a237">MapKernelClientFnToClientFn</a>(pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o8">lpfnWndProc</a>), hwnd, message, wParam, lParam, &amp;(pwnd-&gt;state));
00478 
00479     <span class="comment">/*</span>
00480 <span class="comment">     * if we have DBCS TrailingByte that should be sent, send it here..</span>
00481 <span class="comment">     */</span>
00482     <a class="code" href="../../d6/d0/usercli_8h.html#a299">DISPATCH_DBCS_MESSAGE_IF_EXIST</a>(message,wParam,bDoDbcsMessaging,SendMessageToWndProc);
00483 
00484     <span class="keywordflow">return</span> lRet;
00485 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a772" doxytag="usercli.h::SetMenuItemInfoStruct" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void SetMenuItemInfoStruct           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HMENU&nbsp;</td>
          <td class="mdname" nowrap> <em>hMenu</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>wFlags</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT_PTR&nbsp;</td>
          <td class="mdname" nowrap> <em>wIDNew</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPWSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>pwszNew</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPMENUITEMINFOW&nbsp;</td>
          <td class="mdname" nowrap> <em>pmii</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d6/d8/cltxt_8h-source.html#l01734">AppendMenu()</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l01720">InsertMenu()</a>, and <a class="el" href="../../d6/d8/cltxt_8h-source.html#l01747">ModifyMenu()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a694" doxytag="usercli.h::SetSelected" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID SetSelected           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01028">1028</a> of file <a class="el" href="../../d0/d1/lboxctl2_8c-source.html">lboxctl2.c</a>.
<p>
References <a class="el" href="../../d0/d7/halvprnt_8c-source.html#l00031">BYTE</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01948">tagLBIV::cMac</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01984">tagLBIV::fHasData</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01980">tagLBIV::fHasStrings</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01746">HILITEANDSEL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01744">HILITEONLY</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01942">tagLBIV::iSel</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01951">tagLBIV::rgpch</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01745">SELONLY</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00793">SINGLESEL</a>, and <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01967">tagLBIV::wMultiple</a>.
<p>
Referenced by <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l03754">xxxAlterHilite()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02183">xxxLBoxCtlKeyInput()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l03206">xxxLBSelRange()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l03455">xxxLBSetSel()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01181">xxxResetWorld()</a>, and <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01290">xxxTrackMouse()</a>.
<p>
<pre class="fragment"><div>01033 {
01034     LPSTR lp;
01035     <a class="code" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a> cMask;
01036     <a class="code" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a> cSelStatus;
01037 
01038     <span class="keywordflow">if</span> (iSel &lt; 0 || iSel &gt;= plb-&gt;cMac)
01039         <span class="keywordflow">return</span>;
01040 
01041     <span class="keywordflow">if</span> (plb-&gt;wMultiple == <a class="code" href="../../d6/d0/usercli_8h.html#a114">SINGLESEL</a>) {
01042         <span class="keywordflow">if</span> (fSelected)
01043             plb-&gt;iSel = iSel;
01044     } <span class="keywordflow">else</span> {
01045         cSelStatus = (<a class="code" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a>)fSelected;
01046         <span class="keywordflow">switch</span> (wOpFlags) {
01047         <span class="keywordflow">case</span> <a class="code" href="../../d6/d0/usercli_8h.html#a248">HILITEONLY</a>:
01048 
01049             <span class="comment">/*</span>
01050 <span class="comment">             * Mask out lo-nibble</span>
01051 <span class="comment">             */</span>
01052             cSelStatus = (<a class="code" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a>)(cSelStatus &lt;&lt; 4);
01053             cMask = 0x0F;
01054             <span class="keywordflow">break</span>;
01055         <span class="keywordflow">case</span> <a class="code" href="../../d6/d0/usercli_8h.html#a249">SELONLY</a>:
01056 
01057             <span class="comment">/*</span>
01058 <span class="comment">             * Mask out hi-nibble</span>
01059 <span class="comment">             */</span>
01060             cMask = 0xF0;
01061             <span class="keywordflow">break</span>;
01062         <span class="keywordflow">case</span> <a class="code" href="../../d6/d0/usercli_8h.html#a250">HILITEANDSEL</a>:
01063 
01064             <span class="comment">/*</span>
01065 <span class="comment">             * Mask the byte fully</span>
01066 <span class="comment">             */</span>
01067             cSelStatus |= (cSelStatus &lt;&lt; 4);
01068             cMask = 0;
01069             <span class="keywordflow">break</span>;
01070         }
01071         lp = (LPSTR)(plb-&gt;rgpch) + iSel +
01072                 (plb-&gt;cMac * (plb-&gt;fHasStrings
01073                                 ? <span class="keyword">sizeof</span>(<a class="code" href="../../d6/d9/structtagLBItem.html">LBItem</a>)
01074                                 : (plb-&gt;fHasData ? <span class="keyword">sizeof</span>(<a class="code" href="../../d8/d9/structtagLBODItem.html">LBODItem</a>) : 0)));
01075 
01076         *lp = (*lp &amp; cMask) | cSelStatus;
01077     }
01078 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a553" doxytag="usercli.h::SetVideoTimeout" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL SetVideoTimeout           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>dwVideoTimeout</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00918">918</a> of file <a class="el" href="../../d6/d8/cltxt_8h-source.html">cltxt.h</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00914">PFNGETACTIVEPWRSCHEME</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00916">PFNREADPWRSCHEME</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00915">PFNSETACTIVEPWRSCHEME</a>, and <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>.
<p>
Referenced by <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00959">SystemParametersInfo()</a>.
<p>
<pre class="fragment"><div>00920 {
00921     POWER_POLICY pp;
00922     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> uiID;
00923     HINSTANCE hInstDLL;
00924     <a class="code" href="../../d5/d9/cltxt_8h.html#a4">PFNGETACTIVEPWRSCHEME</a> pfnGetActivePwrScheme;
00925     <a class="code" href="../../d5/d9/cltxt_8h.html#a5">PFNSETACTIVEPWRSCHEME</a> pfnSetActivePwrScheme;
00926     <a class="code" href="../../d5/d9/cltxt_8h.html#a6">PFNREADPWRSCHEME</a> pfnReadPwrScheme;
00927     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fRet = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00928 
00929     <span class="keywordflow">if</span> ((hInstDLL = LoadLibrary(TEXT(<span class="stringliteral">"powrprof.dll"</span>))) ==  <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00930         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00931     }
00932 
00933     pfnGetActivePwrScheme = (<a class="code" href="../../d5/d9/cltxt_8h.html#a4">PFNGETACTIVEPWRSCHEME</a>)GetProcAddress(hInstDLL, <span class="stringliteral">"GetActivePwrScheme"</span>);
00934     pfnSetActivePwrScheme = (<a class="code" href="../../d5/d9/cltxt_8h.html#a5">PFNSETACTIVEPWRSCHEME</a>)GetProcAddress(hInstDLL, <span class="stringliteral">"SetActivePwrScheme"</span>);
00935     pfnReadPwrScheme = (<a class="code" href="../../d5/d9/cltxt_8h.html#a6">PFNREADPWRSCHEME</a>)GetProcAddress(hInstDLL, <span class="stringliteral">"ReadPwrScheme"</span>);
00936 
00937     <span class="keywordflow">if</span> (pfnGetActivePwrScheme(&amp;uiID)) {
00938 
00939         <span class="keywordflow">if</span> (pfnReadPwrScheme(uiID, &amp;pp)) {
00940 
00941             pp.user.VideoTimeoutDc = dwVideoTimeout;
00942             pp.user.VideoTimeoutAc = dwVideoTimeout;
00943 
00944             fRet = pfnSetActivePwrScheme(uiID, NULL, &amp;pp);
00945         }
00946     }
00947     FreeLibrary (hInstDLL);
00948 
00949     <span class="keywordflow">return</span> fRet;
00950 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a606" doxytag="usercli.h::SetWindowState" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void SetWindowState           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>flags</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l03365">3365</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01515">HWq</a>, <a class="el" href="../../d6/d8/ntrtlp_8h-source.html#l00183">LOBYTE</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04602">NtUserCallHwndParam()</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>.
<p>
<pre class="fragment"><div>03368 {
03369     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, flags) != <a class="code" href="../../d5/d9/ntrtlp_8h.html#a4">LOBYTE</a>(flags))
03370         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a178">NtUserCallHwndParam</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(pwnd), flags, SFI_SETWINDOWSTATE);
03371 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a780" doxytag="usercli.h::ShiftMenuIDs" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID ShiftMenuIDs           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwndVictim</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00467">467</a> of file <a class="el" href="../../d6/d4/mdimenu_8c-source.html">mdimenu.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l02067">CKIDS</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02071">FIRST</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01515">HWq</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00215">REBASEPWND</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00408">SetWindowLongPtr()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01764">tagWND::spmenu</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01747">tagWND::spwndOwner</a>.
<p>
Referenced by <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00499">MDISetMenu()</a>, and <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01540">xxxMDIDestroy()</a>.
<p>
<pre class="fragment"><div>00470 {
00471     <a class="code" href="../../d8/d0/structtagMDI.html">PMDI</a> pmdi;
00472     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwndChild;
00473     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwndParent;
00474     <span class="comment">/*</span>
00475 <span class="comment">     * Get a pointer to the MDI structure</span>
00476 <span class="comment">     */</span>
00477     pmdi = ((<a class="code" href="../../d0/d1/structtagMDIWND.html">PMDIWND</a>)pwnd)-&gt;pmdi;
00478 
00479     pwndParent = <a class="code" href="../../d6/d0/usercli_8h.html#a27">REBASEPWND</a>(pwndVictim, spwndParent);
00480     pwndChild = <a class="code" href="../../d6/d0/usercli_8h.html#a27">REBASEPWND</a>(pwndParent, spwndChild);
00481 
00482     <span class="keywordflow">while</span> (pwndChild) {
00483         <span class="keywordflow">if</span> (!pwndChild-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o5">spwndOwner</a> &amp;&amp; (pwndChild-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o16">spmenu</a> &gt; pwndVictim-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o16">spmenu</a>)) {
00484             <a class="code" href="../../d5/d9/cltxt_8h.html#a12">SetWindowLongPtr</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(pwndChild), GWLP_ID, PtrToUlong(pwndChild-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o16">spmenu</a>) - 1);
00485         }
00486         pwndChild = <a class="code" href="../../d6/d0/usercli_8h.html#a27">REBASEPWND</a>(pwndChild, spwndNext);
00487     }
00488 
00489     <a class="code" href="../../d5/d9/cltxt_8h.html#a12">SetWindowLongPtr</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(pwndVictim), GWLP_ID, <a class="code" href="../../d6/d0/usercli_8h.html#a274">FIRST</a>(pmdi) + <a class="code" href="../../d6/d0/usercli_8h.html#a270">CKIDS</a>(pmdi) - 1);
00490 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a526" doxytag="usercli.h::SLChangeSelection" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void SLChangeSelection           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HDC&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d4/editsl_8c-source.html#l00395">395</a> of file <a class="el" href="../../d4/d4/editsl_8c-source.html">editsl.c</a>.
<p>
References <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00860">_IsWindowVisible()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00557">tagED::cch</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l04133">ECAdjustIch()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l03692">ECCalcChangeSelection()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l01412">ECGetBrush()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00052">ECLock()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00086">ECUnlock()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l03294">tagLPKEDITCALLOUT::EditDrawText</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00758">tagBLOCK::EndPos</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00640">tagED::fAnsi</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00611">tagED::fDBCS</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00602">tagED::fFocus</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00610">tagED::fNoHideSel</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00584">tagED::hwnd</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00626">ICH</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00563">tagED::ichMaxSel</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00561">tagED::ichMinSel</a>, <a class="el" href="../../d6/d3/acpitabl_8h-source.html#l00366">min</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05279">NtUserHideCaret()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06219">NtUserShowCaret()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00702">tagED::pLpkEditCallout</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00585">tagED::pwnd</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00586">tagED::rcFmt</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l00507">SLDrawLine()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l00323">SLGetClipRect()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l00126">SLSetCaretPosition()</a>, and <a class="el" href="../../d7/d9/usercli_8h-source.html#l00757">tagBLOCK::StPos</a>.
<p>
Referenced by <a class="el" href="../../d4/d4/editsl_8c-source.html#l01529">SLKeyDown()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l02098">SLMouseMotion()</a>, and <a class="el" href="../../d4/d4/editsl_8c-source.html#l00283">SLSetSelection()</a>.
<p>
<pre class="fragment"><div>00400 {
00401     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a> temp;
00402     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a> ichOldMinSel;
00403     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a> ichOldMaxSel;
00404 
00405     <span class="keywordflow">if</span> (ichNewMinSel &gt; ichNewMaxSel) {
00406         temp = ichNewMinSel;
00407         ichNewMinSel = ichNewMaxSel;
00408         ichNewMaxSel = temp;
00409     }
00410     ichNewMinSel = <a class="code" href="../../d5/d4/acpitabl_8h.html#a69">min</a>(ichNewMinSel, ped-&gt;cch);
00411     ichNewMaxSel = <a class="code" href="../../d5/d4/acpitabl_8h.html#a69">min</a>(ichNewMaxSel, ped-&gt;cch);
00412 
00413     <span class="comment">//</span>
00414     <span class="comment">// To avoid position to half of DBCS, check and ajust position if necessary</span>
00415     <span class="comment">//</span>
00416     <span class="comment">// We check ped-&gt;fDBCS and ped-&gt;fAnsi though ECAdjustIch checks these bits.</span>
00417     <span class="comment">// We're worrying about the overhead of EcLock and EcUnlock.</span>
00418     <span class="comment">//</span>
00419     <span class="keywordflow">if</span> (ped-&gt;fDBCS &amp;&amp; ped-&gt;fAnsi) {
00420         PSTR pText;
00421 
00422         pText = <a class="code" href="../../d6/d0/usercli_8h.html#a433">ECLock</a>(ped);
00423         ichNewMinSel = <a class="code" href="../../d6/d0/usercli_8h.html#a461">ECAdjustIch</a>( ped, pText, ichNewMinSel );
00424         ichNewMaxSel = <a class="code" href="../../d6/d0/usercli_8h.html#a461">ECAdjustIch</a>( ped, pText, ichNewMaxSel );
00425         <a class="code" href="../../d6/d0/usercli_8h.html#a434">ECUnlock</a>(ped);
00426     }
00427 
00428     <span class="comment">/*</span>
00429 <span class="comment">     * Preserve the Old selection</span>
00430 <span class="comment">     */</span>
00431     ichOldMinSel = ped-&gt;ichMinSel;
00432     ichOldMaxSel = ped-&gt;ichMaxSel;
00433 
00434     <span class="comment">/*</span>
00435 <span class="comment">     * Set new selection</span>
00436 <span class="comment">     */</span>
00437     ped-&gt;ichMinSel = ichNewMinSel;
00438     ped-&gt;ichMaxSel = ichNewMaxSel;
00439 
00440     <span class="comment">/*</span>
00441 <span class="comment">     * We will find the intersection of current selection rectangle with the new</span>
00442 <span class="comment">     * selection rectangle. We will then invert the parts of the two rectangles</span>
00443 <span class="comment">     * not in the intersection.</span>
00444 <span class="comment">     */</span>
00445     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d9/rtl_2wow_8c.html#a17">_IsWindowVisible</a>(ped-&gt;pwnd) &amp;&amp; (ped-&gt;fFocus || ped-&gt;fNoHideSel)) {
00446         <a class="code" href="../../d7/d8/structtagBLOCK.html">BLOCK</a> Blk[2];
00447         <span class="keywordtype">int</span>   i;
00448         RECT  rc;
00449 
00450         <span class="keywordflow">if</span> (ped-&gt;fFocus)
00451             <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a204">NtUserHideCaret</a>(ped-&gt;hwnd);
00452 
00453         <span class="keywordflow">if</span> (ped-&gt;pLpkEditCallout) {
00454             <span class="comment">/*</span>
00455 <span class="comment">             * The language pack handles display while complex script support present</span>
00456 <span class="comment">             */</span>
00457             PSTR pText;
00458 
00459             <a class="code" href="../../d6/d0/usercli_8h.html#a480">ECGetBrush</a>(ped, hdc);   <span class="comment">// Give user a chance to manipulate the DC</span>
00460             pText = <a class="code" href="../../d6/d0/usercli_8h.html#a433">ECLock</a>(ped);
00461             ped-&gt;pLpkEditCallout-&gt;EditDrawText(ped, hdc, pText, ped-&gt;cch, ped-&gt;ichMinSel, ped-&gt;ichMaxSel, ped-&gt;rcFmt.top);
00462             <a class="code" href="../../d6/d0/usercli_8h.html#a434">ECUnlock</a>(ped);
00463         } <span class="keywordflow">else</span> {
00464             Blk[0].<a class="code" href="../../d7/d8/structtagBLOCK.html#o0">StPos</a> = ichOldMinSel;
00465             Blk[0].<a class="code" href="../../d7/d8/structtagBLOCK.html#o1">EndPos</a> = ichOldMaxSel;
00466             Blk[1].<a class="code" href="../../d7/d8/structtagBLOCK.html#o0">StPos</a> = ped-&gt;ichMinSel;
00467             Blk[1].<a class="code" href="../../d7/d8/structtagBLOCK.html#o1">EndPos</a> = ped-&gt;ichMaxSel;
00468 
00469             <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a457">ECCalcChangeSelection</a>(ped, ichOldMinSel, ichOldMaxSel,
00470                 (<a class="code" href="../../d7/d8/structtagBLOCK.html">LPBLOCK</a>)&amp;Blk[0], (<a class="code" href="../../d7/d8/structtagBLOCK.html">LPBLOCK</a>)&amp;Blk[1])) {
00471 
00472                 <span class="comment">//</span>
00473                 <span class="comment">// Paint the rectangles where selection has changed.</span>
00474                 <span class="comment">// Paint both Blk[0] and Blk[1], if they exist.</span>
00475                 <span class="comment">//</span>
00476                 <span class="keywordflow">for</span> (i = 0; i &lt; 2; i++) {
00477                     <span class="keywordflow">if</span> (Blk[i].<a class="code" href="../../d7/d8/structtagBLOCK.html#o0">StPos</a> != 0xFFFFFFFF) {
00478                                <a class="code" href="../../d3/d5/editsl_8c.html#a8">SLGetClipRect</a>(ped, hdc, Blk[i].StPos,
00479                                                        Blk[i].EndPos - Blk[i].StPos, (LPRECT)&amp;rc);
00480                                <a class="code" href="../../d6/d0/usercli_8h.html#a528">SLDrawLine</a>(ped, hdc, rc.left, rc.right, Blk[i].StPos,
00481                                                     Blk[i].EndPos - Blk[i].StPos,
00482                                           ((Blk[i].StPos &gt;= ped-&gt;ichMinSel) &amp;&amp;
00483                                        (Blk[i].StPos &lt; ped-&gt;ichMaxSel)));
00484                     }
00485                 }
00486             }
00487         }
00488 
00489         <span class="comment">//</span>
00490         <span class="comment">// Update caret.</span>
00491         <span class="comment">//</span>
00492         <a class="code" href="../../d6/d0/usercli_8h.html#a524">SLSetCaretPosition</a>(ped, hdc);
00493 
00494         <span class="keywordflow">if</span> (ped-&gt;fFocus)
00495             <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a234">NtUserShowCaret</a>(ped-&gt;hwnd);
00496     }
00497 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a534" doxytag="usercli.h::SLChar" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void SLChar           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d4/editsl_8c-source.html#l01304">1304</a> of file <a class="el" href="../../d4/d4/editsl_8c-source.html">editsl.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d0/d7/halvprnt_8c-source.html#l00031">BYTE</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l04109">DbcsCombine()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02293">ECDeleteText()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02492">ECGetEditDC()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00402">ECInOutReconversionMode()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01010">ECIsCharNumeric()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l04083">ECIsDBCSLeadByte()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02429">ECNotifyParent()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l04001">ECPrevIch()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02524">ECReleaseEditDC()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02502">EFNUMBER</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00642">tagED::f40Compat</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00640">tagED::fAnsi</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00601">tagED::fMouseDown</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00664">tagED::format</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00632">tagED::fReadOnly</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01265">FWINABLE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00584">tagED::hwnd</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00587">tagED::hwndParent</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00564">tagED::ichCaret</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00563">tagED::ichMaxSel</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00561">tagED::ichMinSel</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00590">IS_DBCS_ENABLED</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00591">IS_IME_ENABLED</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00277">IsWindow()</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00682">tagED::listboxHwnd</a>, <a class="el" href="../../d6/d8/ntrtlp_8h-source.html#l00183">LOBYTE</a>, <a class="el" href="../../d9/d5/sertl_8c-source.html#l00332">max</a>, <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00354">NotifyWinEvent()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04510">NtUserCallNoParam()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01564">NtUserMessageBeep</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00585">tagED::pwnd</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00652">SendMessage()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l00737">SLDrawText()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l01074">SLInsertText()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l00932">SLScrollText()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d7/d9/usercli_8h-source.html#l00695">tagED::wMaxNegCcharPos</a>.
<p>
Referenced by <a class="el" href="../../d4/d4/editsl_8c-source.html#l02520">SLEditWndProc()</a>, and <a class="el" href="../../d4/d4/editsl_8c-source.html#l01529">SLKeyDown()</a>.
<p>
<pre class="fragment"><div>01307 {
01308     HDC hdc;
01309     WCHAR keyPress;
01310     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> updateText = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01311     HWND hwndSave = ped-&gt;hwnd;
01312     <span class="keywordtype">int</span> InsertTextLen = 1;
01313     <span class="keywordtype">int</span> DBCSkey;
01314 
01315     <span class="keywordflow">if</span> (ped-&gt;fAnsi)
01316         keyPress = <a class="code" href="../../d5/d9/ntrtlp_8h.html#a4">LOBYTE</a>(keyValue);
01317     <span class="keywordflow">else</span>
01318         keyPress = LOWORD(keyValue);
01319 
01320     <span class="keywordflow">if</span> (ped-&gt;fMouseDown || (ped-&gt;fReadOnly &amp;&amp; keyPress != 3)) {
01321 
01322         <span class="comment">/*</span>
01323 <span class="comment">         * Don't do anything if we are in the middle of a mousedown deal or if</span>
01324 <span class="comment">         * this is a read only edit control, with exception of allowing</span>
01325 <span class="comment">         * ctrl-C in order to copy to the clipboard.</span>
01326 <span class="comment">         */</span>
01327         <span class="keywordflow">return</span> ;
01328     }
01329 
01330     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a126">IS_IME_ENABLED</a>()) {
01331         <a class="code" href="../../d6/d0/usercli_8h.html#a477">ECInOutReconversionMode</a>(ped, FALSE);
01332     }
01333 
01334     <span class="keywordflow">switch</span> (keyPress) {
01335     <span class="keywordflow">case</span> VK_BACK:
01336 DeleteSelection:
01337         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a447">ECDeleteText</a>(ped))
01338             updateText = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01339         <span class="keywordflow">break</span>;
01340 
01341     <span class="keywordflow">default</span>:
01342         <span class="keywordflow">if</span> (keyPress &gt;= TEXT(<span class="charliteral">' '</span>))
01343         {
01344             <span class="comment">/*</span>
01345 <span class="comment">             * If this is in [a-z],[A-Z] and we are an ES_NUMBER</span>
01346 <span class="comment">             * edit field, bail.</span>
01347 <span class="comment">             */</span>
01348             <span class="keywordflow">if</span> (ped-&gt;f40Compat &amp;&amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(ped-&gt;pwnd, EFNUMBER)) {
01349                 <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d0/usercli_8h.html#a459">ECIsCharNumeric</a>(ped, keyPress)) {
01350                     <span class="keywordflow">goto</span> IllegalChar;
01351                 }
01352             }
01353             <span class="keywordflow">goto</span> DeleteSelection;
01354         }
01355         <span class="keywordflow">break</span>;
01356     }
01357 
01358     <span class="keywordflow">switch</span> (keyPress) {
01359     <span class="keywordflow">case</span> 3:
01360 
01361         <span class="comment">/*</span>
01362 <span class="comment">         * CTRL-C Copy</span>
01363 <span class="comment">         */</span>
01364         <a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(ped-&gt;hwnd, WM_COPY, 0, 0L);
01365         <span class="keywordflow">return</span>;
01366 
01367     <span class="keywordflow">case</span> VK_BACK:
01368 
01369         <span class="comment">/*</span>
01370 <span class="comment">         * Delete any selected text or delete character left if no sel</span>
01371 <span class="comment">         */</span>
01372         <span class="keywordflow">if</span> (!updateText &amp;&amp; ped-&gt;ichMinSel) {
01373 
01374             <span class="comment">/*</span>
01375 <span class="comment">             * There was no selection to delete so we just delete character</span>
01376 <span class="comment">               left if available</span>
01377 <span class="comment">             */</span>
01378             <span class="comment">//</span>
01379             <span class="comment">// Calling PrevIch rather than just doing a decrement for VK_BACK</span>
01380             <span class="comment">//</span>
01381             ped-&gt;ichMinSel = <a class="code" href="../../d6/d0/usercli_8h.html#a467">ECPrevIch</a>( ped, NULL, ped-&gt;ichMinSel);
01382             <a class="code" href="../../d6/d0/usercli_8h.html#a447">ECDeleteText</a>(ped);
01383             updateText = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01384         }
01385         <span class="keywordflow">break</span>;
01386 
01387     <span class="keywordflow">case</span> 22: <span class="comment">/* CTRL-V Paste */</span>
01388         <a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(ped-&gt;hwnd, WM_PASTE, 0, 0L);
01389         <span class="keywordflow">return</span>;
01390 
01391     <span class="keywordflow">case</span> 24: <span class="comment">/* CTRL-X Cut */</span>
01392         <span class="keywordflow">if</span> (ped-&gt;ichMinSel == ped-&gt;ichMaxSel)
01393             <span class="keywordflow">goto</span> IllegalChar;
01394 
01395         <a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(ped-&gt;hwnd, WM_CUT, 0, 0L);
01396         <span class="keywordflow">return</span>;
01397 
01398     <span class="keywordflow">case</span> 26: <span class="comment">/* CTRL-Z Undo */</span>
01399         <a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(ped-&gt;hwnd, EM_UNDO, 0, 0L);
01400         <span class="keywordflow">return</span>;
01401 
01402     <span class="keywordflow">case</span> VK_RETURN:
01403     <span class="keywordflow">case</span> VK_ESCAPE:
01404         <span class="comment">//</span>
01405         <span class="comment">// If this is an edit control for a combobox and the dropdown list</span>
01406         <span class="comment">// is visible, forward it up to the combo.</span>
01407         <span class="comment">//</span>
01408         <span class="keywordflow">if</span> (ped-&gt;listboxHwnd &amp;&amp; <a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(ped-&gt;hwndParent, CB_GETDROPPEDSTATE, 0, 0L)) {
01409             <a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(ped-&gt;hwndParent, WM_KEYDOWN, (WPARAM)keyPress, 0L);
01410         } <span class="keywordflow">else</span>
01411             <span class="keywordflow">goto</span> IllegalChar;
01412         <span class="keywordflow">return</span>;
01413 
01414     <span class="keywordflow">default</span>:
01415         <span class="keywordflow">if</span> (keyPress &gt;= 0x1E) {  <span class="comment">// 1E,1F are unicode block and segment separators</span>
01416             <span class="comment">/*</span>
01417 <span class="comment">             * Hide the cursor if typing, if the mouse is captured, do not mess with this</span>
01418 <span class="comment">             * as it is going to desapear forever (no WM_SETCURSOR is sent to restore it</span>
01419 <span class="comment">             * at the first mouse-move)</span>
01420 <span class="comment">             * MCostea #166951</span>
01421 <span class="comment">             */</span>
01422             <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a173">NtUserCallNoParam</a>(SFI_ZZZHIDECURSORNOCAPTURE);
01423 
01424             <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a125">IS_DBCS_ENABLED</a>() &amp;&amp; ped-&gt;fAnsi &amp;&amp; (<a class="code" href="../../d6/d0/usercli_8h.html#a464">ECIsDBCSLeadByte</a>(ped,(BYTE)keyPress))) {
01425                 <span class="keywordflow">if</span> ((DBCSkey = <a class="code" href="../../d6/d0/usercli_8h.html#a460">DbcsCombine</a>(ped-&gt;hwnd, keyPress)) != 0 &amp;&amp;
01426                      <a class="code" href="../../d6/d0/usercli_8h.html#a532">SLInsertText</a>(ped,(LPSTR)&amp;DBCSkey, 2) == 2) {
01427                     InsertTextLen = 2;
01428                     updateText = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01429                 } <span class="keywordflow">else</span> {
01430                     <a class="code" href="../../d6/d0/usercli_8h.html#a219">NtUserMessageBeep</a>(0);
01431                 }
01432             } <span class="keywordflow">else</span> {  <span class="comment">// Here the original code begins</span>
01433                 InsertTextLen = 1;
01434                 <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a532">SLInsertText</a>(ped, (LPSTR)&amp;keyPress, 1))
01435                     updateText = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01436                 <span class="keywordflow">else</span>
01437 
01438                     <span class="comment">/*</span>
01439 <span class="comment">                     * Beep. Since we couldn't add the text</span>
01440 <span class="comment">                     */</span>
01441                     <a class="code" href="../../d6/d0/usercli_8h.html#a219">NtUserMessageBeep</a>(0);
01442             } <span class="comment">// Here the original code ends</span>
01443         } <span class="keywordflow">else</span> {
01444 
01445             <span class="comment">/*</span>
01446 <span class="comment">             * User hit an illegal control key</span>
01447 <span class="comment">             */</span>
01448 IllegalChar:
01449             <a class="code" href="../../d6/d0/usercli_8h.html#a219">NtUserMessageBeep</a>(0);
01450         }
01451 
01452         <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d9/client_2wow_8c.html#a11">IsWindow</a>(hwndSave))
01453             <span class="keywordflow">return</span>;
01454         <span class="keywordflow">break</span>;
01455     }
01456 
01457     <span class="keywordflow">if</span> (updateText) {
01458 
01459         <span class="comment">/*</span>
01460 <span class="comment">         * Dirty flag (ped-&gt;fDirty) was set when we inserted text</span>
01461 <span class="comment">         */</span>
01462         <a class="code" href="../../d6/d0/usercli_8h.html#a449">ECNotifyParent</a>(ped, EN_UPDATE);
01463         hdc = <a class="code" href="../../d6/d0/usercli_8h.html#a451">ECGetEditDC</a>(ped, FALSE);
01464         <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d0/usercli_8h.html#a530">SLScrollText</a>(ped, hdc)) {
01465             <span class="keywordflow">if</span> (ped-&gt;format == ES_LEFT) {
01466             <span class="comment">//</span>
01467             <span class="comment">// Call SLDrawText with correct ichStart</span>
01468             <span class="comment">//</span>
01469                 <a class="code" href="../../d6/d0/usercli_8h.html#a527">SLDrawText</a>(ped, hdc, <a class="code" href="../../d8/d6/sertl_8c.html#a1">max</a>(0, (<span class="keywordtype">int</span>)(ped-&gt;ichCaret - InsertTextLen - ped-&gt;wMaxNegCcharPos)));
01470             } <span class="keywordflow">else</span> {
01471                 <span class="comment">/*</span>
01472 <span class="comment">                 * We can't just draw from ichStart because string may have</span>
01473 <span class="comment">                 * shifted because of alignment.</span>
01474 <span class="comment">                 */</span>
01475                 <a class="code" href="../../d6/d0/usercli_8h.html#a527">SLDrawText</a>(ped, hdc, 0);
01476             }
01477         }
01478         <a class="code" href="../../d6/d0/usercli_8h.html#a452">ECReleaseEditDC</a>(ped, hdc, FALSE);
01479         <a class="code" href="../../d6/d0/usercli_8h.html#a449">ECNotifyParent</a>(ped, EN_CHANGE);
01480 
01481         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a405">FWINABLE</a>()) {
01482             <a class="code" href="../../d8/d9/client_2ntstubs_8c.html#a12">NotifyWinEvent</a>(EVENT_OBJECT_VALUECHANGE, ped-&gt;hwnd, OBJID_CLIENT, INDEXID_CONTAINER);
01483         }
01484     }
01485 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a538" doxytag="usercli.h::SLCreate" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LONG SLCreate           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPCREATESTRUCT&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
!! CREATESTRUCT AorW and in other routines 
<p>

<p>
Definition at line <a class="el" href="../../d7/d4/edslrare_8c-source.html#l00027">27</a> of file <a class="el" href="../../d7/d4/edslrare_8c-source.html">edslrare.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l00416">CBLISTBOXID</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00559">tagED::cLines</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l00387">ECCreate()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l00708">ECSetFont()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l00516">ECSetPasswordChar()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02612">ECSetText()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00640">tagED::fAnsi</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00158">GetDlgItem()</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00054">gHighestUserAddress</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l00472">IsEmptyString()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00682">tagED::listboxHwnd</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00585">tagED::pwnd</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00211">REBASEPTR</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, and <a class="el" href="../../d7/d9/usercli_8h-source.html#l00524">UNDO_NONE</a>.
<p>
Referenced by <a class="el" href="../../d4/d4/editsl_8c-source.html#l02520">SLEditWndProc()</a>.
<p>
<pre class="fragment"><div>00030 {
00031     LPSTR lpWindowText;
00032     LONG windowStyle = ped-&gt;pwnd-&gt;style;
00033 
00034     <span class="comment">/*</span>
00035 <span class="comment">     * Do the standard creation stuff</span>
00036 <span class="comment">     */</span>
00037     <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d0/usercli_8h.html#a437">ECCreate</a>(ped, windowStyle))
00038         <span class="keywordflow">return</span> (-1);
00039 
00040     <span class="comment">/*</span>
00041 <span class="comment">     * Single lines always have no undo and 1 line</span>
00042 <span class="comment">     */</span>
00043     ped-&gt;cLines = 1;
00044     ped-&gt;undoType = <a class="code" href="../../d6/d0/usercli_8h.html#a82">UNDO_NONE</a>;
00045 
00046     <span class="comment">/*</span>
00047 <span class="comment">     * Check if this edit control is part of a combobox and get a pointer to the</span>
00048 <span class="comment">     * combobox structure.</span>
00049 <span class="comment">     */</span>
00050     <span class="keywordflow">if</span> (windowStyle &amp; ES_COMBOBOX)
00051         ped-&gt;listboxHwnd = <a class="code" href="../../d3/d9/client_2wow_8c.html#a6">GetDlgItem</a>(lpCreateStruct-&gt;hwndParent, CBLISTBOXID);
00052 
00053     <span class="comment">/*</span>
00054 <span class="comment">     * Set the default font to be the system font.</span>
00055 <span class="comment">     */</span>
00056     <a class="code" href="../../d6/d0/usercli_8h.html#a454">ECSetFont</a>(ped, NULL, FALSE);
00057 
00058     <span class="comment">/*</span>
00059 <span class="comment">     * Set the window text if needed. Return false if we can't set the text</span>
00060 <span class="comment">     * SLSetText notifies the parent in case there is a no memory error.</span>
00061 <span class="comment">     */</span>
00062     <span class="keywordflow">if</span> ((ULONG_PTR)lpCreateStruct-&gt;lpszName &gt; <a class="code" href="../../d1/d8/clglobal_8c.html#a7">gHighestUserAddress</a>)
00063         lpWindowText = <a class="code" href="../../d6/d0/usercli_8h.html#a25">REBASEPTR</a>(ped-&gt;pwnd, (PVOID)lpCreateStruct-&gt;lpszName);
00064     <span class="keywordflow">else</span>
00065         lpWindowText = (LPSTR)lpCreateStruct-&gt;lpszName;
00066 
00067     <span class="keywordflow">if</span> ((lpWindowText != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00068             &amp;&amp; !<a class="code" href="../../d1/d0/inc_2user_8h.html#a1132">IsEmptyString</a>(lpWindowText, ped-&gt;fAnsi)
00069             &amp;&amp; !<a class="code" href="../../d6/d0/usercli_8h.html#a441">ECSetText</a>(ped, lpWindowText)) {
00070         <span class="keywordflow">return</span> (-1);
00071     }
00072 
00073     <span class="keywordflow">if</span> (windowStyle &amp; ES_PASSWORD)
00074         <a class="code" href="../../d6/d0/usercli_8h.html#a442">ECSetPasswordChar</a>(ped, (UINT)<span class="charliteral">'*'</span>);
00075 
00076     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00077 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a528" doxytag="usercli.h::SLDrawLine" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void SLDrawLine           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HDC&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d4/editsl_8c-source.html#l00507">507</a> of file <a class="el" href="../../d4/d4/editsl_8c-source.html">editsl.c</a>.
<p>
References <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00860">_IsWindowVisible()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00557">tagED::cch</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00578">tagED::charPasswordChar</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00243">CopyRect</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00582">tagED::cPasswordCharWidth</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l03926">ECAnsiNext()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l03938">ECAnsiPrev()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l01412">ECGetBrush()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00052">ECLock()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02452">ECSetEditClip()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00086">ECUnlock()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00640">tagED::fAnsi</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00611">tagED::fDBCS</a>, <a class="el" href="../../d0/d1/rtl_2draw_8c-source.html#l00061">FillRect()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00664">tagED::format</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00366">GetSysColor()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00626">ICH</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00570">tagED::ichScreenStart</a>, <a class="el" href="../../d4/d5/rect_8c-source.html#l00165">InflateRect()</a>, <a class="el" href="../../d9/d5/sertl_8c-source.html#l00332">max</a>, <a class="el" href="../../d6/d3/acpitabl_8h-source.html#l00366">min</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00702">tagED::pLpkEditCallout</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00585">tagED::pwnd</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00586">tagED::rcFmt</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l00062">SLCalcXOffsetLeft()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l00080">SLCalcXOffsetSpecial()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00212">SYSHBR</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00693">tagED::wMaxNegAcharPos</a>, and <a class="el" href="../../d7/d9/usercli_8h-source.html#l00695">tagED::wMaxNegCcharPos</a>.
<p>
Referenced by <a class="el" href="../../d4/d4/editsl_8c-source.html#l00395">SLChangeSelection()</a>, and <a class="el" href="../../d4/d4/editsl_8c-source.html#l00737">SLDrawText()</a>.
<p>
<pre class="fragment"><div>00515 {
00516     RECT    rc;
00517     RECT    rcClip;
00518     PSTR    pText;
00519     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>   rgbSaveBk;
00520     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>   rgbSaveText;
00521     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>   wSaveBkMode;
00522     <span class="keywordtype">int</span>     iStCount;
00523     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a>     ichNewStart;
00524     HBRUSH  hbrBack;
00525 
00526     <span class="keywordflow">if</span> (ped-&gt;pLpkEditCallout) {
00527         RIPMSG0(RIP_WARNING, <span class="stringliteral">"SLDrawLine - Error - Invalid call with language pack loaded"</span>);
00528         <span class="keywordflow">return</span>;
00529     }
00530 
00531     <span class="comment">//</span>
00532     <span class="comment">// Anything to draw?</span>
00533     <span class="comment">//</span>
00534     <span class="keywordflow">if</span> (xClipStPos &gt;= xClipEndPos || !<a class="code" href="../../d6/d9/rtl_2wow_8c.html#a17">_IsWindowVisible</a>(ped-&gt;pwnd) )
00535         <span class="keywordflow">return</span>;
00536 
00537     <span class="keywordflow">if</span> (ped-&gt;fAnsi &amp;&amp; ped-&gt;fDBCS) {
00538         PSTR pT,pTOrg;
00539         <span class="keywordtype">int</span> iTCount;
00540 
00541         pText = <a class="code" href="../../d6/d0/usercli_8h.html#a433">ECLock</a>(ped);
00542         ichNewStart = 0;
00543         <span class="keywordflow">if</span> (ichStart &gt; 0) {
00544             pT = pText + ichStart;
00545             ichNewStart = ichStart;
00546 
00547             <span class="keywordflow">while</span> (ichNewStart &amp;&amp;
00548                   (ichStart - ichNewStart &lt; ped-&gt;wMaxNegCcharPos)) {
00549                 pT = <a class="code" href="../../d6/d0/usercli_8h.html#a466">ECAnsiPrev</a>(ped, pText, pT);
00550                 ichNewStart = (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a>)(pT - pText);
00551                 <span class="keywordflow">if</span> (!ichNewStart)
00552                     <span class="keywordflow">break</span>;
00553             }
00554 
00555             <span class="comment">// B#16152 - win95.</span>
00556             <span class="comment">// In case of T2, SLE always set an additional margin</span>
00557             <span class="comment">// to erase a character (iCount == 0 case), using aveCharWidth.</span>
00558             <span class="comment">// It erases unexpected an extra char if we don't use ichNewStart</span>
00559             <span class="comment">// and it happens when wMaxNegCcharPos == 0.</span>
00560             <span class="comment">//</span>
00561             <span class="keywordflow">if</span> (ped-&gt;wMaxNegCcharPos == 0 &amp;&amp; iCount == 0) {
00562                 pT = <a class="code" href="../../d6/d0/usercli_8h.html#a466">ECAnsiPrev</a>(ped, pText, pT);
00563                 ichNewStart = (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a>)(pT - pText);
00564             }
00565         }
00566 
00567         iTCount = 0;
00568         <span class="keywordflow">if</span> (ichStart + iCount &lt; ped-&gt;cch) {
00569             pTOrg = pT = pText + ichStart + iCount;
00570             <span class="keywordflow">while</span> ((iTCount &lt; (<span class="keywordtype">int</span>)ped-&gt;wMaxNegAcharPos) &amp;&amp;
00571                    (ichStart + iCount + iTCount &lt; ped-&gt;cch)) {
00572                 pT = <a class="code" href="../../d6/d0/usercli_8h.html#a465">ECAnsiNext</a>(ped, pT);
00573                 iTCount = (<span class="keywordtype">int</span>)(pT - pTOrg);
00574             }
00575         }
00576 
00577         <a class="code" href="../../d6/d0/usercli_8h.html#a434">ECUnlock</a>(ped);
00578         iCount = (<span class="keywordtype">int</span>)(<a class="code" href="../../d5/d4/acpitabl_8h.html#a69">min</a>(ichStart+iCount+iTCount, ped-&gt;cch) - ichNewStart);
00579     } <span class="keywordflow">else</span> {
00580         <span class="comment">// Reset ichStart to take care of the negative C widths</span>
00581         ichNewStart = <a class="code" href="../../d8/d6/sertl_8c.html#a1">max</a>((<span class="keywordtype">int</span>)(ichStart - ped-&gt;wMaxNegCcharPos), 0);
00582 
00583         <span class="comment">// Reset ichCount to take care of the negative C and A widths</span>
00584         iCount = (<span class="keywordtype">int</span>)(<a class="code" href="../../d5/d4/acpitabl_8h.html#a69">min</a>(ichStart+iCount+ped-&gt;wMaxNegAcharPos, ped-&gt;cch)
00585                     - ichNewStart);
00586     }
00587     ichStart = ichNewStart;
00588 
00589     <span class="comment">//</span>
00590     <span class="comment">// Reset ichStart and iCount to the first one visible on the screen</span>
00591     <span class="comment">//</span>
00592     <span class="keywordflow">if</span> (ichStart &lt; ped-&gt;ichScreenStart) {
00593         <span class="keywordflow">if</span> (ichStart+iCount &lt; ped-&gt;ichScreenStart)
00594             <span class="keywordflow">return</span>;
00595 
00596         iCount -= (ped-&gt;ichScreenStart-ichStart);
00597         ichStart = ped-&gt;ichScreenStart;
00598     }
00599 
00600     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a33">CopyRect</a>(&amp;rc, &amp;ped-&gt;rcFmt);
00601 
00602     <span class="comment">//</span>
00603     <span class="comment">// Set the drawing rectangle</span>
00604     <span class="comment">//</span>
00605     rcClip.left   = xClipStPos;
00606     rcClip.right  = xClipEndPos;
00607     rcClip.top    = rc.top;
00608     rcClip.bottom = rc.bottom;
00609 
00610     <span class="comment">//</span>
00611     <span class="comment">// Set the proper clipping rectangle</span>
00612     <span class="comment">//</span>
00613     <a class="code" href="../../d6/d0/usercli_8h.html#a450">ECSetEditClip</a>(ped, hdc, TRUE);
00614 
00615     pText = <a class="code" href="../../d6/d0/usercli_8h.html#a433">ECLock</a>(ped);
00616 
00617     <span class="comment">//</span>
00618     <span class="comment">// Calculate the starting pos for this piece of text</span>
00619     <span class="comment">//</span>
00620     <span class="keywordflow">if</span> (ped-&gt;format == ES_LEFT) {
00621         <span class="keywordflow">if</span> (iStCount = (<span class="keywordtype">int</span>)(ichStart - ped-&gt;ichScreenStart)) {
00622             rc.left += <a class="code" href="../../d3/d5/editsl_8c.html#a3">SLCalcXOffsetLeft</a>(ped, hdc, ichStart);
00623         }
00624     } <span class="keywordflow">else</span> {
00625         rc.left += <a class="code" href="../../d3/d5/editsl_8c.html#a4">SLCalcXOffsetSpecial</a>(ped, hdc, ichStart);
00626     }
00627 
00628     <span class="comment">//</span>
00629     <span class="comment">// Set the background mode before calling NtUserGetControlBrush so that the app</span>
00630     <span class="comment">// can change it to TRANSPARENT if it wants to.</span>
00631     <span class="comment">//</span>
00632     SetBkMode(hdc, OPAQUE);
00633 
00634     <span class="keywordflow">if</span> (fSelStatus) {
00635         hbrBack = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a22">SYSHBR</a>(HIGHLIGHT);
00636         <span class="keywordflow">if</span> (hbrBack == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00637             <span class="keywordflow">goto</span> sldl_errorexit;
00638         }
00639         rgbSaveBk = SetBkColor(hdc, <a class="code" href="../../d3/d9/client_2wow_8c.html#a15">GetSysColor</a>(COLOR_HIGHLIGHT));
00640         rgbSaveText = SetTextColor(hdc, <a class="code" href="../../d3/d9/client_2wow_8c.html#a15">GetSysColor</a>(COLOR_HIGHLIGHTTEXT));
00641 
00642     } <span class="keywordflow">else</span> {
00643         <span class="comment">//</span>
00644         <span class="comment">// We always want to send this so that the app has a chance to muck</span>
00645         <span class="comment">// with the DC.</span>
00646         <span class="comment">//</span>
00647         <span class="comment">// Note that ReadOnly and Disabled edit fields are drawn as "static"</span>
00648         <span class="comment">// instead of as "active."</span>
00649         <span class="comment">//</span>
00650         hbrBack = <a class="code" href="../../d6/d0/usercli_8h.html#a480">ECGetBrush</a>(ped, hdc);
00651         rgbSaveText = GetTextColor(hdc);
00652     }
00653 
00654     <span class="comment">//</span>
00655     <span class="comment">// Erase the rectangular area before text is drawn. Note that we inflate</span>
00656     <span class="comment">// the rect by 1 so that the selection color has a one pixel border around</span>
00657     <span class="comment">// the text.</span>
00658     <span class="comment">//</span>
00659     <a class="code" href="../../d3/d6/rect_8c.html#a7">InflateRect</a>(&amp;rcClip, 0, 1);
00660     <a class="code" href="../../d9/d1/rtl_2draw_8c.html#a3">FillRect</a>(hdc, &amp;rcClip, hbrBack);
00661     <a class="code" href="../../d3/d6/rect_8c.html#a7">InflateRect</a>(&amp;rcClip, 0, -1);
00662 
00663     <span class="keywordflow">if</span> (ped-&gt;charPasswordChar) {
00664         wSaveBkMode = SetBkMode(hdc, TRANSPARENT);
00665 
00666         <span class="keywordflow">for</span> (iStCount = 0; iStCount &lt; iCount; iStCount++) {
00667             <span class="keywordflow">if</span> ( ped-&gt;fAnsi )
00668                 ExtTextOutA(hdc, rc.left, rc.top, ETO_CLIPPED, &amp;rcClip,
00669                             (LPSTR)&amp;ped-&gt;charPasswordChar, 1, NULL);
00670             <span class="keywordflow">else</span>
00671                 ExtTextOutW(hdc, rc.left, rc.top, ETO_CLIPPED, &amp;rcClip,
00672                             (LPWSTR)&amp;ped-&gt;charPasswordChar, 1, NULL);
00673 
00674             rc.left += ped-&gt;cPasswordCharWidth;
00675         }
00676 
00677         SetBkMode(hdc, wSaveBkMode);
00678     } <span class="keywordflow">else</span> {
00679         <span class="keywordflow">if</span> ( ped-&gt;fAnsi )
00680             ExtTextOutA(hdc, rc.left, rc.top, ETO_CLIPPED, &amp;rcClip,
00681                     pText+ichStart,iCount, NULL);
00682         <span class="keywordflow">else</span>
00683             ExtTextOutW(hdc, rc.left, rc.top, ETO_CLIPPED, &amp;rcClip,
00684                     ((LPWSTR)pText)+ichStart,iCount, NULL);
00685     }
00686 
00687     SetTextColor(hdc, rgbSaveText);
00688     <span class="keywordflow">if</span> (fSelStatus) {
00689         SetBkColor(hdc, rgbSaveBk);
00690     }
00691 
00692 sldl_errorexit:
00693     <a class="code" href="../../d6/d0/usercli_8h.html#a434">ECUnlock</a>(ped);
00694 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a527" doxytag="usercli.h::SLDrawText" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void SLDrawText           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HDC&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d4/editsl_8c-source.html#l00737">737</a> of file <a class="el" href="../../d4/d4/editsl_8c-source.html">editsl.c</a>.
<p>
References <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00860">_IsWindowVisible()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00661">tagED::cbChar</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00557">tagED::cch</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00679">tagED::charOverhang</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00578">tagED::charPasswordChar</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00243">CopyRect</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00582">tagED::cPasswordCharWidth</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l04133">ECAdjustIch()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l01281">ECCchInWidth()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l01412">ECGetBrush()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00052">ECLock()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00086">ECUnlock()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l03294">tagLPKEDITCALLOUT::EditDrawText</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00640">tagED::fAnsi</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00611">tagED::fDBCS</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00602">tagED::fFocus</a>, <a class="el" href="../../d0/d1/rtl_2draw_8c-source.html#l00061">FillRect()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00610">tagED::fNoHideSel</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00664">tagED::format</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00639">tagED::fTrueType</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00626">ICH</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00563">tagED::ichMaxSel</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00561">tagED::ichMinSel</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00570">tagED::ichScreenStart</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00702">tagED::pLpkEditCallout</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00585">tagED::pwnd</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00586">tagED::rcFmt</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l00062">SLCalcXOffsetLeft()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l00080">SLCalcXOffsetSpecial()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l00507">SLDrawLine()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l00706">SLGetBlkEnd()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l00126">SLSetCaretPosition()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00696">tagED::wLeftMargin</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00692">tagED::wMaxNegA</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00694">tagED::wMaxNegC</a>, and <a class="el" href="../../d7/d9/usercli_8h-source.html#l00697">tagED::wRightMargin</a>.
<p>
Referenced by <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01337">ECImeComposition()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02904">EditWndProc()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l01304">SLChar()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l01529">SLKeyDown()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l02280">SLPaint()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l02467">SLPaste()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l01225">SLReplaceSel()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l00932">SLScrollText()</a>, and <a class="el" href="../../d4/d4/editsl_8c-source.html#l02341">SLSetFocus()</a>.
<p>
<pre class="fragment"><div>00741 {
00742     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a>    cchToDraw;
00743     RECT   rc;
00744     PSTR   pText;
00745     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>   fSelStatus;
00746     <span class="keywordtype">int</span>    iCount, iStCount;
00747     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a>    ichEnd;
00748     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>   fNoSelection;
00749     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>   fCalcRect;
00750     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>   fDrawLeftMargin = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00751     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>   fDrawEndOfLineStrip = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00752     SIZE   size;
00753 
00754     <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d9/rtl_2wow_8c.html#a17">_IsWindowVisible</a>(ped-&gt;pwnd))
00755         <span class="keywordflow">return</span>;
00756 
00757     <span class="keywordflow">if</span> (ped-&gt;pLpkEditCallout) {
00758         <span class="comment">// The language pack handles display while complex script support present</span>
00759         <a class="code" href="../../d6/d0/usercli_8h.html#a480">ECGetBrush</a>(ped, hdc);   <span class="comment">// Give user a chance to manipulate the DC</span>
00760         pText = <a class="code" href="../../d6/d0/usercli_8h.html#a433">ECLock</a>(ped);
00761         ped-&gt;pLpkEditCallout-&gt;EditDrawText(ped, hdc, pText, ped-&gt;cch, ped-&gt;ichMinSel, ped-&gt;ichMaxSel, ped-&gt;rcFmt.top);
00762         <a class="code" href="../../d6/d0/usercli_8h.html#a434">ECUnlock</a>(ped);
00763         <a class="code" href="../../d6/d0/usercli_8h.html#a524">SLSetCaretPosition</a>(ped, hdc);
00764         <span class="keywordflow">return</span>;
00765     }
00766 
00767     <span class="comment">/*</span>
00768 <span class="comment">     * When drawing the entire visible content of special-aligned sle</span>
00769 <span class="comment">     * erase the view.</span>
00770 <span class="comment">     */</span>
00771     <span class="keywordflow">if</span> (ped-&gt;format != ES_LEFT &amp;&amp; ichStart == 0)
00772         <a class="code" href="../../d9/d1/rtl_2draw_8c.html#a3">FillRect</a>(hdc, &amp;ped-&gt;rcFmt, <a class="code" href="../../d8/d4/editec_8c.html#a25">ECGetBrush</a>(ped, hdc));
00773 
00774     pText = <a class="code" href="../../d6/d0/usercli_8h.html#a433">ECLock</a>(ped);
00775 
00776     <span class="keywordflow">if</span> (ichStart &lt; ped-&gt;ichScreenStart) {
00777 <span class="preprocessor">#if DBG</span>
00778 <span class="preprocessor"></span>        <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a> ichCompare = <a class="code" href="../../d6/d0/usercli_8h.html#a461">ECAdjustIch</a>(ped, pText, ped-&gt;ichScreenStart);
00779         UserAssert(ichCompare == ped-&gt;ichScreenStart);
00780 <span class="preprocessor">#endif</span>
00781 <span class="preprocessor"></span>        ichStart = ped-&gt;ichScreenStart;
00782     }
00783     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ped-&gt;fDBCS &amp;&amp; ped-&gt;fAnsi) {
00784         <span class="comment">/*</span>
00785 <span class="comment">         * If ichStart stays on trailing byte of DBCS, we have to</span>
00786 <span class="comment">         * adjust it.</span>
00787 <span class="comment">         */</span>
00788         ichStart = <a class="code" href="../../d6/d0/usercli_8h.html#a461">ECAdjustIch</a>(ped, pText, ichStart);
00789     }
00790 
00791     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a33">CopyRect</a>((LPRECT)&amp;rc, (LPRECT)&amp;ped-&gt;rcFmt);
00792 
00793     <span class="comment">/*</span>
00794 <span class="comment">     * Find out how many characters will fit on the screen so that we don't do</span>
00795 <span class="comment">     * any needless drawing.</span>
00796 <span class="comment">     */</span>
00797     cchToDraw = <a class="code" href="../../d6/d0/usercli_8h.html#a443">ECCchInWidth</a>(ped, hdc,
00798             (LPSTR)(pText + ped-&gt;ichScreenStart * ped-&gt;cbChar),
00799             ped-&gt;cch - ped-&gt;ichScreenStart, rc.right - rc.left, TRUE);
00800     ichEnd = ped-&gt;ichScreenStart + cchToDraw;
00801 
00802     <span class="comment">/*</span>
00803 <span class="comment">     * There is no selection if,</span>
00804 <span class="comment">     * 1. MinSel and MaxSel are equal OR</span>
00805 <span class="comment">     * 2. (This has lost the focus AND Selection is to be hidden)</span>
00806 <span class="comment">     */</span>
00807     fNoSelection = ((ped-&gt;ichMinSel == ped-&gt;ichMaxSel) || (!ped-&gt;fFocus &amp;&amp; !ped-&gt;fNoHideSel));
00808 
00809     <span class="keywordflow">if</span> (ped-&gt;format == ES_LEFT) {
00810         <span class="keywordflow">if</span> (iStCount = (<span class="keywordtype">int</span>)(ichStart - ped-&gt;ichScreenStart)) {
00811             rc.left += <a class="code" href="../../d3/d5/editsl_8c.html#a3">SLCalcXOffsetLeft</a>(ped, hdc, ichStart);
00812         }
00813     } <span class="keywordflow">else</span> {
00814         rc.left += <a class="code" href="../../d3/d5/editsl_8c.html#a4">SLCalcXOffsetSpecial</a>(ped, hdc, ichStart);
00815     }
00816 
00817     <span class="comment">//</span>
00818     <span class="comment">// If this is the begining of the whole line, we may have to draw a blank</span>
00819     <span class="comment">// strip at the begining.</span>
00820     <span class="comment">//</span>
00821     <span class="keywordflow">if</span> ((ichStart == 0) &amp;&amp; ped-&gt;wLeftMargin)
00822         fDrawLeftMargin = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00823 
00824     <span class="comment">//</span>
00825     <span class="comment">// If there is nothing to draw, that means we need to draw the end of</span>
00826     <span class="comment">// line strip, which erases the last character.</span>
00827     <span class="comment">//</span>
00828     <span class="keywordflow">if</span> (ichStart == ichEnd) {
00829         fDrawEndOfLineStrip = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00830         rc.left -= ped-&gt;wLeftMargin;
00831     }
00832 
00833     <span class="keywordflow">while</span> (ichStart &lt; ichEnd) {
00834         fCalcRect = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00835 
00836         <span class="keywordflow">if</span> (fNoSelection) {
00837             fSelStatus = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00838             iCount = ichEnd - ichStart;
00839         } <span class="keywordflow">else</span> {
00840             <span class="keywordflow">if</span> (fDrawLeftMargin) {
00841                 iCount = 0;
00842                 fSelStatus = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00843                 fCalcRect = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00844                 rc.right = rc.left;
00845             } <span class="keywordflow">else</span>
00846                 iCount = <a class="code" href="../../d6/d0/usercli_8h.html#a529">SLGetBlkEnd</a>(ped, ichStart, ichEnd,
00847                     (BOOL  *)&amp;fSelStatus);
00848         }
00849 
00850 
00851         <span class="keywordflow">if</span> (ichStart+iCount == ichEnd) {
00852             <span class="keywordflow">if</span> (fSelStatus)
00853                 fDrawEndOfLineStrip = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00854             <span class="keywordflow">else</span> {
00855                 rc.right = ped-&gt;rcFmt.right + ped-&gt;wRightMargin;
00856                 fCalcRect = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00857             }
00858         }
00859 
00860         <span class="keywordflow">if</span> (fCalcRect) {
00861             <span class="keywordflow">if</span> (ped-&gt;charPasswordChar)
00862                 rc.right = rc.left + ped-&gt;cPasswordCharWidth * iCount;
00863             <span class="keywordflow">else</span> {
00864                 <span class="keywordflow">if</span> ( ped-&gt;fAnsi )
00865                     GetTextExtentPointA(hdc, pText + ichStart,
00866                                         iCount, &amp;size);
00867                 <span class="keywordflow">else</span>
00868                     GetTextExtentPointW(hdc, ((LPWSTR)pText) + ichStart,
00869                                         iCount, &amp;size);
00870                 rc.right = rc.left + size.cx;
00871                 <span class="comment">/*</span>
00872 <span class="comment">                 * The extent is equal to the advance width. So for TrueType fonts</span>
00873 <span class="comment">                 *  we need to take care of Neg A and C. For non TrueType, the extent</span>
00874 <span class="comment">                 *  includes the overhang.</span>
00875 <span class="comment">                 * If drawing the selection, draw only the advance width</span>
00876 <span class="comment">                 */</span>
00877                 <span class="keywordflow">if</span> (fSelStatus) {
00878                     rc.right -= ped-&gt;charOverhang;
00879                 } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ped-&gt;fTrueType) {
00880                    rc.right += ped-&gt;wMaxNegC;
00881                    <span class="keywordflow">if</span> (iStCount &gt; 0) {
00882                       rc.right += ped-&gt;wMaxNegA;
00883                       iStCount = 0;
00884                    }
00885                 }
00886 
00887             } <span class="comment">/* if (ped-&gt;charPasswordChar) */</span>
00888 
00889         }
00890 
00891         <span class="keywordflow">if</span> (fDrawLeftMargin) {
00892             fDrawLeftMargin = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00893             rc.left -= ped-&gt;wLeftMargin;
00894             <span class="keywordflow">if</span> (rc.right &lt; rc.left) {
00895                 rc.right = rc.left;
00896             }
00897         }
00898 
00899         <a class="code" href="../../d6/d0/usercli_8h.html#a528">SLDrawLine</a>(ped, hdc, rc.left, rc.right, ichStart, iCount, fSelStatus);
00900         ichStart += iCount;
00901         rc.left = rc.right;
00902         <span class="comment">/*</span>
00903 <span class="comment">         * If we're going to draw the selection, adjust rc.left</span>
00904 <span class="comment">         * to include advance width of the selected text</span>
00905 <span class="comment">         * For non TT fonts, ped-&gt;wMaxNegC equals ped-&gt;charOverhang</span>
00906 <span class="comment">         */</span>
00907         <span class="keywordflow">if</span> (!fSelStatus &amp;&amp; (iCount != 0) &amp;&amp; (ichStart &lt; ichEnd)) {
00908             rc.left -= ped-&gt;wMaxNegC;
00909         }
00910     }
00911 
00912     <a class="code" href="../../d6/d0/usercli_8h.html#a434">ECUnlock</a>(ped);
00913 
00914     <span class="comment">// Check if anything to be erased on the right hand side</span>
00915     <span class="keywordflow">if</span> (fDrawEndOfLineStrip &amp;&amp;
00916             (rc.left &lt; (rc.right = (ped-&gt;rcFmt.right+ped-&gt;wRightMargin))))
00917         <a class="code" href="../../d6/d0/usercli_8h.html#a528">SLDrawLine</a>(ped, hdc, rc.left, rc.right, ichStart, 0, FALSE);
00918 
00919     <a class="code" href="../../d6/d0/usercli_8h.html#a524">SLSetCaretPosition</a>(ped, hdc);
00920 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a542" doxytag="usercli.h::SLEditWndProc" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LRESULT SLEditWndProc           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WPARAM&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d4/editsl_8c-source.html#l02520">2520</a> of file <a class="el" href="../../d4/d4/editsl_8c-source.html">editsl.c</a>.
<p>
References <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00860">_IsWindowVisible()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02460">CBFDROPDOWN</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00557">tagED::cch</a>, <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00574">DefWindowProcWorker()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l01977">ECEmptyUndo()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01051">ECGetCaretWidth</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02492">ECGetEditDC()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l00246">ECGetText()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02524">ECReleaseEditDC()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l00597">ECSize()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l04185">ECUpdateFormat()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l03301">tagLPKEDITCALLOUT::EditCreateCaret</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00642">tagED::f40Compat</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00640">tagED::fAnsi</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00607">tagED::fBorder</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00619">tagED::fEatNextChar</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00602">tagED::fFocus</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00601">tagED::fMouseDown</a>, <a class="el" href="../../d9/d6/udbgk_8c-source.html#l00038">foo()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00632">tagED::fReadOnly</a>, <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00506">GetKeyState()</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l01170">HtoP</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00584">tagED::hwnd</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00587">tagED::hwndParent</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00626">ICH</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00570">tagED::ichScreenStart</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00678">tagED::lineHeight</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00682">tagED::listboxHwnd</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06520">NtUserBeginPaint()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01560">NtUserDestroyCaret</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06575">NtUserEndPaint()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05279">NtUserHideCaret()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06219">NtUserShowCaret()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00702">tagED::pLpkEditCallout</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00540">Pundo</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00585">tagED::pwnd</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00652">SendMessage()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l01304">SLChar()</a>, <a class="el" href="../../d7/d4/edslrare_8c-source.html#l00027">SLCreate()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l00182">SLIchToLeftXPos()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l01529">SLKeyDown()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l02394">SLKillFocus()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l02098">SLMouseMotion()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l01934">SLMouseToIch()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l02280">SLPaint()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l02467">SLPaste()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l01225">SLReplaceSel()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l00126">SLSetCaretPosition()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l02341">SLSetFocus()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l00283">SLSetSelection()</a>, <a class="el" href="../../d7/d4/edslrare_8c-source.html#l00087">SLUndo()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l00021">SYS_ALTERNATE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00120">ValidateHwnd</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02357">WEFDLGMODALFRAME</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02261">WFHPRESENT</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02259">WFMPRESENT</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02404">WFSIZEBOX</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02260">WFVPRESENT</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/editec_8c-source.html#l00692">ECClearText()</a>, and <a class="el" href="../../d9/d3/editec_8c-source.html#l02904">EditWndProc()</a>.
<p>
<pre class="fragment"><div>02526 {
02527     HDC         hdc;
02528     PAINTSTRUCT ps;
02529     POINT       pt;
02530 
02531     <span class="comment">/*</span>
02532 <span class="comment">     * Dispatch the various messages we can receive</span>
02533 <span class="comment">     */</span>
02534     <span class="keywordflow">switch</span> (message) {
02535 
02536     <span class="keywordflow">case</span> WM_INPUTLANGCHANGE:
02537         <span class="keywordflow">if</span> (ped &amp;&amp; ped-&gt;fFocus &amp;&amp; ped-&gt;pLpkEditCallout) {
02538             <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a204">NtUserHideCaret</a>(hwnd);
02539             hdc = <a class="code" href="../../d6/d0/usercli_8h.html#a451">ECGetEditDC</a>(ped, TRUE);
02540             <a class="code" href="../../d6/d0/usercli_8h.html#a215">NtUserDestroyCaret</a>();
02541             ped-&gt;pLpkEditCallout-&gt;EditCreateCaret (ped, hdc, <a class="code" href="../../d6/d0/usercli_8h.html#a149">ECGetCaretWidth</a>(), ped-&gt;lineHeight, (UINT)lParam);
02542             <a class="code" href="../../d6/d0/usercli_8h.html#a524">SLSetCaretPosition</a>(ped, hdc);
02543             <a class="code" href="../../d6/d0/usercli_8h.html#a452">ECReleaseEditDC</a>(ped, hdc, TRUE);
02544             <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a234">NtUserShowCaret</a>(hwnd);
02545         }
02546         <span class="keywordflow">goto</span> PassToDefaultWindowProc;
02547 
02548     <span class="keywordflow">case</span> WM_STYLECHANGED:
02549         <span class="keywordflow">if</span> (ped &amp;&amp; ped-&gt;pLpkEditCallout) {
02550             <span class="keywordflow">switch</span> (wParam) {
02551 
02552                 <span class="keywordflow">case</span> GWL_STYLE:
02553                     <a class="code" href="../../d6/d0/usercli_8h.html#a426">ECUpdateFormat</a>(ped,
02554                         ((LPSTYLESTRUCT)lParam)-&gt;styleNew,
02555                         GetWindowLong(ped-&gt;hwnd, GWL_EXSTYLE));
02556                     <span class="keywordflow">return</span> 1<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>;
02557 
02558                 <span class="keywordflow">case</span> GWL_EXSTYLE:
02559                     <a class="code" href="../../d6/d0/usercli_8h.html#a426">ECUpdateFormat</a>(ped,
02560                         GetWindowLong(ped-&gt;hwnd, GWL_STYLE),
02561                         ((LPSTYLESTRUCT)lParam)-&gt;styleNew);
02562                     <span class="keywordflow">return</span> 1<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>;
02563             }
02564         }
02565 
02566         <span class="keywordflow">goto</span> PassToDefaultWindowProc;
02567 
02568     <span class="keywordflow">case</span> WM_CHAR:
02569 
02570         <span class="comment">/*</span>
02571 <span class="comment">         * wParam - the value of the key</span>
02572 <span class="comment">           lParam - modifiers, repeat count etc (not used)</span>
02573 <span class="comment">         */</span>
02574         <span class="keywordflow">if</span> (!ped-&gt;fEatNextChar)
02575             <a class="code" href="../../d6/d0/usercli_8h.html#a534">SLChar</a>(ped, (UINT)wParam);
02576         <span class="keywordflow">else</span>
02577             ped-&gt;fEatNextChar = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
02578         <span class="keywordflow">break</span>;
02579 
02580     <span class="keywordflow">case</span> WM_ERASEBKGND:
02581 
02582        <span class="comment">/*</span>
02583 <span class="comment">        * wParam - device context handle</span>
02584 <span class="comment">        * lParam - not used</span>
02585 <span class="comment">        * We do nothing on this message and we don't want DefWndProc to do</span>
02586 <span class="comment">        * anything, so return 1</span>
02587 <span class="comment">        */</span>
02588         <span class="keywordflow">return</span> (1<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>);
02589         <span class="keywordflow">break</span>;
02590 
02591     <span class="keywordflow">case</span> WM_GETDLGCODE: {
02592            LONG code = DLGC_WANTCHARS | DLGC_HASSETSEL | DLGC_WANTARROWS;
02593 
02594            <span class="comment">/*</span>
02595 <span class="comment">            * If this is a WM_SYSCHAR message generated by the UNDO keystroke</span>
02596 <span class="comment">            * we want this message so we can EAT IT in "case WM_SYSCHAR:"</span>
02597 <span class="comment">            */</span>
02598             <span class="keywordflow">if</span> (lParam) {
02599                 <span class="keywordflow">switch</span> (((LPMSG)lParam)-&gt;message) {
02600                     <span class="keywordflow">case</span> WM_SYSCHAR:
02601                         <span class="keywordflow">if</span> ((HIWORD(((LPMSG)lParam)-&gt;lParam) &amp; <a class="code" href="../../d3/d5/editsl_8c.html#a0">SYS_ALTERNATE</a>) &amp;&amp;
02602                             ((WORD)wParam == VK_BACK)) {
02603                             code |= DLGC_WANTMESSAGE;
02604                         }
02605                         <span class="keywordflow">break</span>;
02606 
02607                     <span class="keywordflow">case</span> WM_KEYDOWN:
02608                         <span class="keywordflow">if</span> (( (((WORD)wParam == VK_RETURN) ||
02609                                ((WORD)wParam == VK_ESCAPE)) &amp;&amp;
02610                             (ped-&gt;listboxHwnd)      &amp;&amp;
02611                             <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(<a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(ped-&gt;hwndParent), CBFDROPDOWN) &amp;&amp;
02612                             <a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(ped-&gt;hwndParent, CB_GETDROPPEDSTATE, 0, 0L))) {
02613                             code |= DLGC_WANTMESSAGE;
02614                         }
02615                         <span class="keywordflow">break</span>;
02616                 }
02617             }
02618             <span class="keywordflow">return</span> code;
02619         }
02620 
02621         <span class="keywordflow">break</span>;
02622 
02623     <span class="keywordflow">case</span> WM_KEYDOWN:
02624 
02625         <span class="comment">/*</span>
02626 <span class="comment">         * wParam - virt keycode of the given key</span>
02627 <span class="comment">         * lParam - modifiers such as repeat count etc. (not used)</span>
02628 <span class="comment">         */</span>
02629         <a class="code" href="../../d6/d0/usercli_8h.html#a535">SLKeyDown</a>(ped, (UINT)wParam, 0);
02630         <span class="keywordflow">break</span>;
02631 
02632     <span class="keywordflow">case</span> WM_KILLFOCUS:
02633 
02634         <span class="comment">/*</span>
02635 <span class="comment">         * wParam - handle of the window that receives the input focus</span>
02636 <span class="comment">           lParam - not used</span>
02637 <span class="comment">         */</span>
02638 
02639         <a class="code" href="../../d6/d0/usercli_8h.html#a541">SLKillFocus</a>(ped, (HWND)wParam);
02640         <span class="keywordflow">break</span>;
02641 
02642     <span class="keywordflow">case</span> WM_CAPTURECHANGED:
02643         <span class="keywordflow">if</span> (ped-&gt;fMouseDown)
02644             ped-&gt;fMouseDown = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
02645         <span class="keywordflow">break</span>;
02646 
02647     <span class="keywordflow">case</span> WM_MOUSEMOVE:
02648         UserAssert(ped-&gt;fMouseDown);
02649         <span class="comment">/*</span>
02650 <span class="comment">         * FALL THRU</span>
02651 <span class="comment">         */</span>
02652 
02653     <span class="keywordflow">case</span> WM_LBUTTONDBLCLK:
02654     <span class="keywordflow">case</span> WM_LBUTTONDOWN:
02655     <span class="keywordflow">case</span> WM_LBUTTONUP:
02656         <span class="comment">/*</span>
02657 <span class="comment">         * wParam - contains a value that indicates which virtual keys are down</span>
02658 <span class="comment">         * lParam - contains x and y coords of the mouse cursor</span>
02659 <span class="comment">         */</span>
02660         POINTSTOPOINT(pt, lParam);
02661         <a class="code" href="../../d6/d0/usercli_8h.html#a537">SLMouseMotion</a>(ped, message, (UINT)wParam, &amp;pt);
02662         <span class="keywordflow">break</span>;
02663 
02664     <span class="keywordflow">case</span> WM_CREATE:
02665 
02666         <span class="comment">/*</span>
02667 <span class="comment">         * wParam - handle to window being created</span>
02668 <span class="comment">           lParam - points to a CREATESTRUCT that contains copies of parameters</span>
02669 <span class="comment">                    passed to the CreateWindow function.</span>
02670 <span class="comment">         */</span>
02671         <span class="keywordflow">return</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a538">SLCreate</a>(ped, (LPCREATESTRUCT)lParam));
02672         <span class="keywordflow">break</span>;
02673 
02674     <span class="keywordflow">case</span> WM_PRINTCLIENT:
02675         <span class="comment">// wParam --    can be hdc from subclassed paint</span>
02676         <span class="comment">// lParam --    unused</span>
02677         <a class="code" href="../../d6/d0/usercli_8h.html#a539">SLPaint</a>(ped, (HDC) wParam);
02678         <span class="keywordflow">break</span>;
02679 
02680     <span class="keywordflow">case</span> WM_PAINT:
02681 
02682         <span class="comment">/*</span>
02683 <span class="comment">         * wParam --    can be hdc from subclassed paint</span>
02684 <span class="comment">         * lParam --    unused</span>
02685 <span class="comment">         */</span>
02686         <span class="keywordflow">if</span> (wParam)
02687             hdc = (HDC) wParam;
02688         <span class="keywordflow">else</span> {
02689             <span class="comment">// this hide/show caret is outside Begin/EndPaint to handle the</span>
02690             <span class="comment">// case when the caret is half in/half out of the update region</span>
02691             <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a204">NtUserHideCaret</a>(hwnd);
02692             hdc = <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a246">NtUserBeginPaint</a>(hwnd, &amp;ps);
02693         }
02694 
02695         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d9/rtl_2wow_8c.html#a17">_IsWindowVisible</a>(ped-&gt;pwnd))
02696             <a class="code" href="../../d6/d0/usercli_8h.html#a539">SLPaint</a>(ped, hdc);
02697 
02698         <span class="keywordflow">if</span> (!wParam) {
02699             <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a248">NtUserEndPaint</a>(hwnd, &amp;ps);
02700             <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a234">NtUserShowCaret</a>(hwnd);
02701         }
02702         <span class="keywordflow">break</span>;
02703 
02704     <span class="keywordflow">case</span> WM_PASTE:
02705 
02706         <span class="comment">/*</span>
02707 <span class="comment">         * wParam - not used</span>
02708 <span class="comment">         * lParam - not used</span>
02709 <span class="comment">         */</span>
02710         <span class="keywordflow">if</span> (!ped-&gt;fReadOnly)
02711             <a class="code" href="../../d3/d5/editsl_8c.html#a25">SLPaste</a>(ped);
02712         <span class="keywordflow">break</span>;
02713 
02714     <span class="keywordflow">case</span> WM_SETFOCUS:
02715 
02716         <span class="comment">/*</span>
02717 <span class="comment">         * wParam - handle of window that loses the input focus (may be NULL)</span>
02718 <span class="comment">           lParam - not used</span>
02719 <span class="comment">         */</span>
02720         <a class="code" href="../../d6/d0/usercli_8h.html#a540">SLSetFocus</a>(ped);
02721         <span class="keywordflow">break</span>;
02722 
02723     <span class="keywordflow">case</span> WM_SIZE:
02724 
02725         <span class="comment">/*</span>
02726 <span class="comment">         * wParam - defines the type of resizing fullscreen, sizeiconic,</span>
02727 <span class="comment">                    sizenormal etc.</span>
02728 <span class="comment">           lParam - new width in LOWORD, new height in HIGHWORD of client area</span>
02729 <span class="comment">         */</span>
02730         <a class="code" href="../../d6/d0/usercli_8h.html#a482">ECSize</a>(ped, NULL, TRUE);
02731         <span class="keywordflow">return</span> 0<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>;
02732 
02733     <span class="keywordflow">case</span> WM_SYSKEYDOWN:
02734         <span class="comment">/*</span>
02735 <span class="comment">         * wParam --    virtual key code</span>
02736 <span class="comment">         * lParam --    modifiers</span>
02737 <span class="comment">         */</span>
02738 
02739         <span class="comment">/*</span>
02740 <span class="comment">         * Are we in a combobox with the Alt key down?</span>
02741 <span class="comment">         */</span>
02742         <span class="keywordflow">if</span> (ped-&gt;listboxHwnd &amp;&amp; (lParam &amp; 0x20000000<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>)) {
02743             <span class="comment">/*</span>
02744 <span class="comment">             * Handle Combobox support. We want alt up or down arrow to behave</span>
02745 <span class="comment">             * like F4 key which completes the combo box selection</span>
02746 <span class="comment">             */</span>
02747             <span class="keywordflow">if</span> (lParam &amp; 0x1000000) {
02748 
02749                 <span class="comment">/*</span>
02750 <span class="comment">                 * This is an extended key such as the arrow keys not on the</span>
02751 <span class="comment">                 * numeric keypad so just drop the combobox.</span>
02752 <span class="comment">                 */</span>
02753                 <span class="keywordflow">if</span> (wParam == VK_DOWN || wParam == VK_UP)
02754                     <span class="keywordflow">goto</span> DropCombo;
02755                 <span class="keywordflow">else</span>
02756                     <span class="keywordflow">goto</span> <a class="code" href="../../d8/d7/udbgk_8c.html#a2">foo</a>;
02757             }
02758 
02759             <span class="keywordflow">if</span> (!(<a class="code" href="../../d8/d9/client_2ntstubs_8c.html#a16">GetKeyState</a>(VK_NUMLOCK) &amp; 1) &amp;&amp;
02760                     (wParam == VK_DOWN || wParam == VK_UP)) {
02761 
02762                 <span class="comment">/*</span>
02763 <span class="comment">                 * NUMLOCK is up and the keypad up or down arrow hit:</span>
02764 <span class="comment">                 * eat character generated by keyboard driver.</span>
02765 <span class="comment">                 */</span>
02766                 ped-&gt;fEatNextChar = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
02767             } <span class="keywordflow">else</span> {
02768                 <span class="keywordflow">goto</span> <a class="code" href="../../d8/d7/udbgk_8c.html#a2">foo</a>;
02769             }
02770 
02771 DropCombo:
02772             <span class="keywordflow">if</span> (<a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(ped-&gt;hwndParent,
02773                     CB_GETEXTENDEDUI, 0, 0) &amp; 0x00000001) {
02774 
02775                 <span class="comment">/*</span>
02776 <span class="comment">                 * Extended ui doesn't honor VK_F4.</span>
02777 <span class="comment">                 */</span>
02778                 <span class="keywordflow">if</span> (<a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(ped-&gt;hwndParent, CB_GETDROPPEDSTATE, 0, 0))
02779                     <span class="keywordflow">return</span>(<a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(ped-&gt;hwndParent, CB_SHOWDROPDOWN, 0, 0));
02780                 <span class="keywordflow">else</span>
02781                     <span class="keywordflow">return</span> (<a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(ped-&gt;hwndParent, CB_SHOWDROPDOWN, 1, 0));
02782             } <span class="keywordflow">else</span>
02783                 <span class="keywordflow">return</span> (<a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(ped-&gt;listboxHwnd, WM_KEYDOWN, VK_F4, 0));
02784         }
02785 <a class="code" href="../../d8/d7/udbgk_8c.html#a2">foo</a>:
02786         <span class="keywordflow">if</span> (wParam == VK_BACK) {
02787             <a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(ped-&gt;hwnd, WM_UNDO, 0, 0L);
02788             <span class="keywordflow">break</span>;
02789         }
02790         <span class="keywordflow">else</span>
02791             <span class="keywordflow">goto</span> PassToDefaultWindowProc;
02792         <span class="keywordflow">break</span>;
02793 
02794     <span class="keywordflow">case</span> EM_GETLINE:
02795 
02796         <span class="comment">/*</span>
02797 <span class="comment">         * wParam - line number to copy (always the first line for SL)</span>
02798 <span class="comment">         * lParam - buffer to copy text to. FIrst word is max # of bytes to copy</span>
02799 <span class="comment">         */</span>
02800         <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a453">ECGetText</a>(ped, (*(LPWORD)lParam), (LPSTR)lParam, FALSE);
02801 
02802     <span class="keywordflow">case</span> EM_LINELENGTH:
02803 
02804         <span class="comment">/*</span>
02805 <span class="comment">         * wParam - ignored</span>
02806 <span class="comment">         * lParam - ignored</span>
02807 <span class="comment">         */</span>
02808         <span class="keywordflow">return</span> (LONG)ped-&gt;cch;
02809         <span class="keywordflow">break</span>;
02810 
02811     <span class="keywordflow">case</span> EM_SETSEL:
02812         <span class="comment">/*</span>
02813 <span class="comment">         * wParam -- start pos</span>
02814 <span class="comment">         * lParam -- end pos</span>
02815 <span class="comment">         */</span>
02816         <a class="code" href="../../d6/d0/usercli_8h.html#a531">SLSetSelection</a>(ped, (ICH)wParam, (ICH)lParam);
02817         <span class="keywordflow">break</span>;
02818 
02819     <span class="keywordflow">case</span> EM_REPLACESEL:
02820 
02821         <span class="comment">/*</span>
02822 <span class="comment">         * wParam - flag for 4.0+ apps saying whether to clear undo</span>
02823 <span class="comment">         * lParam - points to a null terminated string of replacement text</span>
02824 <span class="comment">         */</span>
02825         <a class="code" href="../../d6/d0/usercli_8h.html#a522">SLReplaceSel</a>(ped, (LPSTR)lParam);
02826         <span class="keywordflow">if</span> (!ped-&gt;f40Compat || !wParam)
02827             <a class="code" href="../../d6/d0/usercli_8h.html#a444">ECEmptyUndo</a>(<a class="code" href="../../d6/d0/usercli_8h.html#a85">Pundo</a>(ped));
02828         <span class="keywordflow">break</span>;
02829 
02830     <span class="keywordflow">case</span> EM_GETFIRSTVISIBLELINE:
02831 
02832         <span class="comment">/*</span>
02833 <span class="comment">         * wParam - not used</span>
02834 <span class="comment">         * lParam - not used</span>
02835 <span class="comment">         *</span>
02836 <span class="comment">         * effects: Returns the first visible line for single line edit controls.</span>
02837 <span class="comment">         */</span>
02838         <span class="keywordflow">return</span> ped-&gt;ichScreenStart;
02839         <span class="keywordflow">break</span>;
02840 
02841     <span class="keywordflow">case</span> EM_POSFROMCHAR:
02842         <span class="comment">//</span>
02843         <span class="comment">// wParam --    char index in text</span>
02844         <span class="comment">// lParam --    not used</span>
02845         <span class="comment">// This function returns the (x,y) position of the character.</span>
02846         <span class="comment">//      y is always 0 for single.</span>
02847         <span class="comment">//</span>
02848     <span class="keywordflow">case</span> EM_CHARFROMPOS:
02849         <span class="comment">//</span>
02850         <span class="comment">// wParam --    unused</span>
02851         <span class="comment">// lParam --    pt in edit client coords</span>
02852         <span class="comment">// This function returns</span>
02853         <span class="comment">//          LOWORD: the position of the _closest_ char</span>
02854         <span class="comment">//                  to the passed in point.</span>
02855         <span class="comment">//          HIWORD: the index of the line (always 0 for single)</span>
02856 
02857         {
02858             LONG xyPos;
02859 
02860             hdc = <a class="code" href="../../d6/d0/usercli_8h.html#a451">ECGetEditDC</a>(ped, TRUE);
02861 
02862             <span class="keywordflow">if</span> (message == EM_POSFROMCHAR)
02863                 xyPos = MAKELONG(<a class="code" href="../../d6/d0/usercli_8h.html#a525">SLIchToLeftXPos</a>(ped, hdc, (ICH)wParam), 0);
02864             <span class="keywordflow">else</span> {
02865                 POINTSTOPOINT(pt, lParam);
02866                 xyPos = <a class="code" href="../../d6/d0/usercli_8h.html#a536">SLMouseToIch</a>(ped, hdc, &amp;pt);
02867             }
02868 
02869             <a class="code" href="../../d6/d0/usercli_8h.html#a452">ECReleaseEditDC</a>(ped, hdc, TRUE);
02870             <span class="keywordflow">return</span>((LRESULT)xyPos);
02871             <span class="keywordflow">break</span>;
02872         }
02873 
02874     <span class="keywordflow">case</span> WM_UNDO:
02875     <span class="keywordflow">case</span> EM_UNDO:
02876         <a class="code" href="../../d6/d0/usercli_8h.html#a523">SLUndo</a>(ped);
02877         <span class="keywordflow">break</span>;
02878 
02879 <span class="preprocessor">#if 0</span>
02880 <span class="preprocessor"></span>    <span class="keywordflow">case</span> WM_NCPAINT: <span class="comment">// not in server.c gawEditWndProc[] anyway.</span>
02881 
02882         <span class="comment">/*</span>
02883 <span class="comment">         * LATER - This is an NT optimization.  It needs to be revisited</span>
02884 <span class="comment">         * for validity once all of the Chicago changes are done - Johnl</span>
02885 <span class="comment">         */</span>
02886 
02887         pwnd = (<a class="code" href="../../d6/d9/structtagWND.html">PWND</a>)<a class="code" href="../../d4/d1/userk_8h.html#a102">HtoP</a>(hwnd);
02888 
02889         <span class="comment">/*</span>
02890 <span class="comment">         * Check to see if this window has any non-client areas that</span>
02891 <span class="comment">         * would be painted.  If not, don't bother calling DefWindowProc()</span>
02892 <span class="comment">         * since it'll be a wasted c/s transition.</span>
02893 <span class="comment">         */</span>
02894         <span class="keywordflow">if</span> (!ped-&gt;fBorder &amp;&amp;
02895             <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WEFDLGMODALFRAME) == 0 &amp;&amp;
02896             !<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, (WFMPRESENT | WFVPRESENT | WFHPRESENT)) &amp;&amp;
02897             <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFSIZEBOX) == 0) {
02898             <span class="keywordflow">break</span>;
02899         } <span class="keywordflow">else</span> {
02900             <span class="keywordflow">goto</span> PassToDefaultWindowProc;
02901         }
02902         <span class="keywordflow">break</span>;
02903 <span class="preprocessor">#endif</span>
02904 <span class="preprocessor"></span>
02905     <span class="keywordflow">default</span>:
02906 PassToDefaultWindowProc:
02907         <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a610">DefWindowProcWorker</a>(ped-&gt;pwnd, message, wParam, lParam, ped-&gt;fAnsi);
02908         <span class="keywordflow">break</span>;
02909     } <span class="comment">/* switch (message) */</span>
02910 
02911     <span class="keywordflow">return</span> 1<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>;
02912 } <span class="comment">/* SLEditWndProc */</span>
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a529" doxytag="usercli.h::SLGetBlkEnd" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int SLGetBlkEnd           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL FAR *&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d4/editsl_8c-source.html#l00706">706</a> of file <a class="el" href="../../d4/d4/editsl_8c-source.html">editsl.c</a>.
<p>
References <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00563">tagED::ichMaxSel</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00561">tagED::ichMinSel</a>, <a class="el" href="../../d6/d3/acpitabl_8h-source.html#l00366">min</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d4/d4/editsl_8c-source.html#l00737">SLDrawText()</a>.
<p>
<pre class="fragment"><div>00711 {
00712     *lpfStatus = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00713     <span class="keywordflow">if</span> (ichStart &gt;= ped-&gt;ichMinSel) {
00714         <span class="keywordflow">if</span> (ichStart &gt;= ped-&gt;ichMaxSel)
00715             <span class="keywordflow">return</span> (ichEnd - ichStart);
00716         *lpfStatus = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00717         <span class="keywordflow">return</span> (<a class="code" href="../../d5/d4/acpitabl_8h.html#a69">min</a>(ichEnd, ped-&gt;ichMaxSel) - ichStart);
00718     }
00719     <span class="keywordflow">return</span> (<a class="code" href="../../d5/d4/acpitabl_8h.html#a69">min</a>(ichEnd, ped-&gt;ichMinSel) - ichStart);
00720 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a525" doxytag="usercli.h::SLIchToLeftXPos" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int SLIchToLeftXPos           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ped</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HDC&nbsp;</td>
          <td class="mdname" nowrap> <em>hdc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ich</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
fAnsi 
<p>
Definition at line <a class="el" href="../../d4/d4/editsl_8c-source.html#l00182">182</a> of file <a class="el" href="../../d4/d4/editsl_8c-source.html">editsl.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l00677">tagED::aveCharWidth</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00557">tagED::cch</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00679">tagED::charOverhang</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00578">tagED::charPasswordChar</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00582">tagED::cPasswordCharWidth</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00052">ECLock()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00086">ECUnlock()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l03290">tagLPKEDITCALLOUT::EditIchToXY</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00640">tagED::fAnsi</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00611">tagED::fDBCS</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00605">tagED::fNonPropFont</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00664">tagED::format</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00570">tagED::ichScreenStart</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00702">tagED::pLpkEditCallout</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00586">tagED::rcFmt</a>, and <a class="el" href="../../d4/d4/editsl_8c-source.html#l00080">SLCalcXOffsetSpecial()</a>.
<p>
Referenced by <a class="el" href="../../d4/d4/editsl_8c-source.html#l02520">SLEditWndProc()</a>, and <a class="el" href="../../d4/d4/editsl_8c-source.html#l00126">SLSetCaretPosition()</a>.
<p>
<pre class="fragment"><div>00186 {
00187     <span class="keywordtype">int</span> textExtent;
00188     PSTR pText;
00189     SIZE size;
00190     <span class="keywordtype">int</span>  cchDiff;
00191 
00192     <span class="keywordflow">if</span> (ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o84">pLpkEditCallout</a>) {
00193 
00194        pText = <a class="code" href="../../d6/d0/usercli_8h.html#a433">ECLock</a>(ped);
00195        textExtent = ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o84">pLpkEditCallout</a>-&gt;<a class="code" href="../../d2/d0/structtagLPKEDITCALLOUT.html#o1">EditIchToXY</a>(ped, hdc, pText, ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o3">cch</a>, ich);
00196        <a class="code" href="../../d6/d0/usercli_8h.html#a434">ECUnlock</a>(ped);
00197 
00198        <span class="keywordflow">return</span> textExtent;
00199 
00200     }
00201 
00202     <span class="comment">/*</span>
00203 <span class="comment">     * Check if we are adding lots and lots of chars. A paste for example could</span>
00204 <span class="comment">     * cause this and GetTextExtents could overflow on this.</span>
00205 <span class="comment">     */</span>
00206     cchDiff = (<span class="keywordtype">int</span>)ich - (<span class="keywordtype">int</span>)ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o9">ichScreenStart</a>;
00207     <span class="keywordflow">if</span> (cchDiff &gt; 1000)
00208         <span class="keywordflow">return</span> (30000);
00209     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cchDiff &lt; -1000)
00210         <span class="keywordflow">return</span> (-30000);
00211 
00212     <span class="keywordflow">if</span> (ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o62">format</a> != ES_LEFT)
00213         <span class="keywordflow">return</span> (ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o16">rcFmt</a>.left + <a class="code" href="../../d3/d5/editsl_8c.html#a4">SLCalcXOffsetSpecial</a>(ped, hdc, ich));
00214 
00215     <span class="comment">/*</span>
00216 <span class="comment">     * Caret position /w DBCS text, we can not optimize...</span>
00217 <span class="comment">     */</span>
00218     <span class="keywordflow">if</span> (ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o26">fNonPropFont</a> &amp;&amp; !ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o32">fDBCS</a>)
00219         <span class="keywordflow">return</span> (ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o16">rcFmt</a>.left + cchDiff*ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o67">aveCharWidth</a>);
00220 
00221     <span class="comment">/*</span>
00222 <span class="comment">     * Check if password hidden chars are being used.</span>
00223 <span class="comment">     */</span>
00224     <span class="keywordflow">if</span> (ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o12">charPasswordChar</a>)
00225         <span class="keywordflow">return</span> ( ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o16">rcFmt</a>.left + cchDiff*ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o13">cPasswordCharWidth</a>);
00226 
00227     pText = <a class="code" href="../../d6/d0/usercli_8h.html#a433">ECLock</a>(ped);
00228 
00229     <span class="keywordflow">if</span> (ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o42">fAnsi</a>) {
00230         <span class="keywordflow">if</span> (cchDiff &gt;= 0) {
00231 
00232             GetTextExtentPointA(hdc, (LPSTR)(pText + ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o9">ichScreenStart</a>),
00233                     cchDiff, &amp;size);
00234             textExtent =  size.cx;
00235 
00236             <span class="comment">/*</span>
00237 <span class="comment">             * In case of signed/unsigned overflow since the text extent may be</span>
00238 <span class="comment">             * greater than maxint. This happens with long single line edit</span>
00239 <span class="comment">             * controls. The rect we edit text in will never be greater than 30000</span>
00240 <span class="comment">             * pixels so we are ok if we just ignore them.</span>
00241 <span class="comment">             */</span>
00242             <span class="keywordflow">if</span> (textExtent &lt; 0 || textExtent &gt; 31000)
00243                 textExtent = 30000;
00244         } <span class="keywordflow">else</span> {
00245             GetTextExtentPointA(hdc,(LPSTR)(pText + ich), -cchDiff, &amp;size);
00246             textExtent = (-1) * size.cx;
00247         }
00248     } <span class="keywordflow">else</span> {  
00249         <span class="keywordflow">if</span> (cchDiff &gt;= 0) {
00250 
00251             GetTextExtentPointW(hdc, (LPWSTR)(pText + ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o9">ichScreenStart</a>*<span class="keyword">sizeof</span>(WCHAR)),
00252                     cchDiff, &amp;size);
00253             textExtent =  size.cx;
00254 
00255             <span class="comment">/*</span>
00256 <span class="comment">             * In case of signed/unsigned overflow since the text extent may be</span>
00257 <span class="comment">             * greater than maxint. This happens with long single line edit</span>
00258 <span class="comment">             * controls. The rect we edit text in will never be greater than 30000</span>
00259 <span class="comment">             * pixels so we are ok if we just ignore them.</span>
00260 <span class="comment">             */</span>
00261             <span class="keywordflow">if</span> (textExtent &lt; 0 || textExtent &gt; 31000)
00262                 textExtent = 30000;
00263         } <span class="keywordflow">else</span> {
00264             GetTextExtentPointW(hdc,(LPWSTR)(pText + ich*<span class="keyword">sizeof</span>(WCHAR)), -cchDiff, &amp;size);
00265             textExtent = (-1) * size.cx;
00266         }
00267     }
00268 
00269     <a class="code" href="../../d6/d0/usercli_8h.html#a434">ECUnlock</a>(ped);
00270 
00271     <span class="keywordflow">return</span> (ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o16">rcFmt</a>.left + textExtent -
00272             (textExtent ? ped-&gt;<a class="code" href="../../d3/d4/structtagED.html#o69">charOverhang</a> : 0));
00273 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a532" doxytag="usercli.h::SLInsertText" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a> SLInsertText           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPSTR&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d4/editsl_8c-source.html#l01074">1074</a> of file <a class="el" href="../../d4/d4/editsl_8c-source.html">editsl.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l00557">tagED::cch</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00555">tagED::cchTextMax</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00578">tagED::charPasswordChar</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00582">tagED::cPasswordCharWidth</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l01281">ECCchInWidth()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02492">ECGetEditDC()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02059">ECInsertText()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00052">ECLock()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02429">ECNotifyParent()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02524">ECReleaseEditDC()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00086">ECUnlock()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00640">tagED::fAnsi</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00609">tagED::fAutoHScroll</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00603">tagED::fDirty</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00626">ICH</a>, <a class="el" href="../../d6/d3/acpitabl_8h-source.html#l00366">min</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00586">tagED::rcFmt</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01337">ECImeComposition()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l01304">SLChar()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l01157">SLPasteText()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l01225">SLReplaceSel()</a>, and <a class="el" href="../../d7/d4/edslrare_8c-source.html#l00087">SLUndo()</a>.
<p>
<pre class="fragment"><div>01078 {
01079     HDC hdc;
01080     PSTR pText;
01081     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a> cchInsertCopy = cchInsert;
01082     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a> cchT;
01083     <span class="keywordtype">int</span> textWidth;
01084     SIZE size;
01085 
01086     <span class="comment">/*</span>
01087 <span class="comment">     * First determine exactly how many characters from lpText we can insert</span>
01088 <span class="comment">     * into the ped.</span>
01089 <span class="comment">     */</span>
01090     <span class="keywordflow">if</span>( ped-&gt;cchTextMax &lt;= ped-&gt;cch)
01091        cchInsert = 0;
01092     <span class="keywordflow">else</span> {
01093         <span class="keywordflow">if</span> (!ped-&gt;fAutoHScroll) {
01094             pText = <a class="code" href="../../d6/d0/usercli_8h.html#a433">ECLock</a>(ped);
01095             hdc = <a class="code" href="../../d6/d0/usercli_8h.html#a451">ECGetEditDC</a>(ped, TRUE);
01096 
01097             cchInsert = <a class="code" href="../../d5/d4/acpitabl_8h.html#a69">min</a>(cchInsert, (<span class="keywordtype">unsigned</span>)(ped-&gt;cchTextMax - ped-&gt;cch));
01098             <span class="keywordflow">if</span> (ped-&gt;charPasswordChar)
01099                 textWidth = ped-&gt;cch * ped-&gt;cPasswordCharWidth;
01100             <span class="keywordflow">else</span> {
01101                 <span class="keywordflow">if</span> (ped-&gt;fAnsi)
01102                     GetTextExtentPointA(hdc, (LPSTR)pText,  ped-&gt;cch, &amp;size);
01103                 <span class="keywordflow">else</span>
01104                     GetTextExtentPointW(hdc, (LPWSTR)pText, ped-&gt;cch, &amp;size);
01105                 textWidth = size.cx;
01106             }
01107             cchT = <a class="code" href="../../d6/d0/usercli_8h.html#a443">ECCchInWidth</a>(ped, hdc, lpText, cchInsert,
01108                                 ped-&gt;rcFmt.right - ped-&gt;rcFmt.left -
01109                                 textWidth, TRUE);
01110             cchInsert = <a class="code" href="../../d5/d4/acpitabl_8h.html#a69">min</a>(cchInsert, cchT);
01111 
01112             <a class="code" href="../../d6/d0/usercli_8h.html#a434">ECUnlock</a>(ped);
01113             <a class="code" href="../../d6/d0/usercli_8h.html#a452">ECReleaseEditDC</a>(ped, hdc, TRUE);
01114         } <span class="keywordflow">else</span> {
01115             cchInsert = <a class="code" href="../../d5/d4/acpitabl_8h.html#a69">min</a>((<span class="keywordtype">unsigned</span>)(ped-&gt;cchTextMax - ped-&gt;cch), cchInsert);
01116         }
01117     }
01118 
01119 
01120     <span class="comment">/*</span>
01121 <span class="comment">     * Now try actually adding the text to the ped</span>
01122 <span class="comment">     */</span>
01123     <span class="keywordflow">if</span> (cchInsert &amp;&amp; !<a class="code" href="../../d6/d0/usercli_8h.html#a446">ECInsertText</a>(ped, lpText, &amp;cchInsert)) {
01124         <a class="code" href="../../d6/d0/usercli_8h.html#a449">ECNotifyParent</a>(ped, EN_ERRSPACE);
01125         <span class="keywordflow">return</span> (0);
01126     }
01127     <span class="keywordflow">if</span> (cchInsert)
01128         ped-&gt;fDirty = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>; <span class="comment">/* Set modify flag */</span>
01129 
01130     <span class="keywordflow">if</span> (cchInsert &lt; cchInsertCopy) {
01131 
01132         <span class="comment">/*</span>
01133 <span class="comment">         * Notify parent that we couldn't insert all the text requested</span>
01134 <span class="comment">         */</span>
01135         <a class="code" href="../../d6/d0/usercli_8h.html#a449">ECNotifyParent</a>(ped, EN_MAXTEXT);
01136     }
01137 
01138     <span class="comment">/*</span>
01139 <span class="comment">     * Update selection extents and the caret position. Note that ECInsertText</span>
01140 <span class="comment">     * updates ped-&gt;ichCaret, ped-&gt;ichMinSel, and ped-&gt;ichMaxSel to all be after</span>
01141 <span class="comment">     * the inserted text.</span>
01142 <span class="comment">     */</span>
01143     <span class="keywordflow">return</span> (cchInsert);
01144 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a535" doxytag="usercli.h::SLKeyDown" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void SLKeyDown           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d4/editsl_8c-source.html#l01529">1529</a> of file <a class="el" href="../../d4/d4/editsl_8c-source.html">editsl.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00557">tagED::cch</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00510">CTRLDOWN</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02492">ECGetEditDC()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00733">ECGetModKeys()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l03969">ECNextIch()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02429">ECNotifyParent()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l04001">ECPrevIch()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02524">ECReleaseEditDC()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l01552">ECWord()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00640">tagED::fAnsi</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00619">tagED::fEatNextChar</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00601">tagED::fMouseDown</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00632">tagED::fReadOnly</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01265">FWINABLE</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01683">HanjaKeyHandler()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00584">tagED::hwnd</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00587">tagED::hwndParent</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00626">ICH</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00564">tagED::ichCaret</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00563">tagED::ichMaxSel</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00561">tagED::ichMinSel</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00682">tagED::listboxHwnd</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00509">NONEDOWN</a>, <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00354">NotifyWinEvent()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00702">tagED::pLpkEditCallout</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00652">SendMessage()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00511">SHFTDOWN</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l00395">SLChangeSelection()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l01304">SLChar()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l00737">SLDrawText()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l01498">SLMoveSelectionRestricted()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l00932">SLScrollText()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>.
<p>
Referenced by <a class="el" href="../../d4/d4/editsl_8c-source.html#l02520">SLEditWndProc()</a>.
<p>
<pre class="fragment"><div>01533 {
01534     HDC hdc;
01535 
01536     <span class="comment">/*</span>
01537 <span class="comment">     * Variables we will use for redrawing the updated text</span>
01538 <span class="comment">     */</span>
01539     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a> newMaxSel = ped-&gt;ichMaxSel;
01540     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a> newMinSel = ped-&gt;ichMinSel;
01541 
01542     <span class="comment">/*</span>
01543 <span class="comment">     * Flags for drawing the updated text</span>
01544 <span class="comment">     */</span>
01545     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> updateText = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01546     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> changeSelection = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>; <span class="comment">/* new selection is specified by</span>
01547 <span class="comment">                                      newMinSel, newMaxSel */</span>
01548 
01549     <span class="comment">/*</span>
01550 <span class="comment">     * Comparisons we do often</span>
01551 <span class="comment">     */</span>
01552     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> MinEqMax = (newMaxSel == newMinSel);
01553     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> MinEqCar = (ped-&gt;ichCaret == newMinSel);
01554     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> MaxEqCar = (ped-&gt;ichCaret == newMaxSel);
01555 
01556     <span class="comment">/*</span>
01557 <span class="comment">     * State of shift and control keys.</span>
01558 <span class="comment">     */</span>
01559     <span class="keywordtype">int</span> scState;
01560 
01561     <span class="comment">/*</span>
01562 <span class="comment">     * Combo box support</span>
01563 <span class="comment">     */</span>
01564     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fIsListVisible;
01565     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fIsExtendedUI;
01566 
01567     <span class="keywordflow">if</span> (ped-&gt;fMouseDown) {
01568 
01569         <span class="comment">/*</span>
01570 <span class="comment">         * If we are in the middle of a mouse down handler, then don't do</span>
01571 <span class="comment">         * anything. ie. ignore keyboard input.</span>
01572 <span class="comment">         */</span>
01573         <span class="keywordflow">return</span>;
01574     }
01575 
01576     scState = <a class="code" href="../../d6/d0/usercli_8h.html#a481">ECGetModKeys</a>(keyMods);
01577 
01578     <span class="keywordflow">switch</span> (virtKeyCode) {
01579     <span class="keywordflow">case</span> VK_UP:
01580         <span class="keywordflow">if</span> ( ped-&gt;listboxHwnd ) {
01581 
01582             <span class="comment">/*</span>
01583 <span class="comment">             * Handle Combobox support</span>
01584 <span class="comment">             */</span>
01585             fIsExtendedUI = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>)<a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(ped-&gt;hwndParent, CB_GETEXTENDEDUI, 0, 0);
01586             fIsListVisible = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>)<a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(ped-&gt;hwndParent, CB_GETDROPPEDSTATE, 0, 0);
01587 
01588             <span class="keywordflow">if</span> (!fIsListVisible &amp;&amp; fIsExtendedUI) {
01589 
01590                 <span class="comment">/*</span>
01591 <span class="comment">                 * For TandyT</span>
01592 <span class="comment">                 */</span>
01593 DropExtendedUIListBox:
01594 
01595                 <span class="comment">/*</span>
01596 <span class="comment">                 * Since an extendedui combo box doesn't do anything on f4, we</span>
01597 <span class="comment">                 * turn off the extended ui, send the f4 to drop, and turn it</span>
01598 <span class="comment">                 * back on again.</span>
01599 <span class="comment">                 */</span>
01600                 <a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(ped-&gt;hwndParent, CB_SETEXTENDEDUI, 0, 0);
01601                 <a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(ped-&gt;listboxHwnd, WM_KEYDOWN, VK_F4, 0);
01602                 <a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(ped-&gt;hwndParent, CB_SETEXTENDEDUI, 1, 0);
01603                 <span class="keywordflow">return</span>;
01604             } <span class="keywordflow">else</span>
01605                 <span class="keywordflow">goto</span> SendKeyToListBox;
01606         }
01607 
01608     <span class="comment">/*</span>
01609 <span class="comment">     * else fall through</span>
01610 <span class="comment">     */</span>
01611     <span class="keywordflow">case</span> VK_LEFT:
01612         <span class="comment">//</span>
01613         <span class="comment">// If the caret isn't at the beginning, we can move left</span>
01614         <span class="comment">//</span>
01615         <span class="keywordflow">if</span> (ped-&gt;ichCaret) {
01616             <span class="comment">//</span>
01617             <span class="comment">// Get new caret pos.</span>
01618             <span class="comment">//</span>
01619             <span class="keywordflow">if</span> (scState &amp; <a class="code" href="../../d6/d0/usercli_8h.html#a77">CTRLDOWN</a>) {
01620                 <span class="comment">// Move caret word left</span>
01621                 <a class="code" href="../../d6/d0/usercli_8h.html#a438">ECWord</a>(ped, ped-&gt;ichCaret, TRUE, &amp;ped-&gt;ichCaret, NULL);
01622             } <span class="keywordflow">else</span> {
01623                 <span class="comment">// Move caret char left</span>
01624                 <span class="keywordflow">if</span> (ped-&gt;pLpkEditCallout) {
01625                     ped-&gt;ichCaret = <a class="code" href="../../d3/d5/editsl_8c.html#a18">SLMoveSelectionRestricted</a>(ped, ped-&gt;ichCaret, TRUE);
01626                 } <span class="keywordflow">else</span>
01627                 ped-&gt;ichCaret = <a class="code" href="../../d6/d0/usercli_8h.html#a467">ECPrevIch</a>(ped,NULL,ped-&gt;ichCaret);
01628             }
01629 
01630             <span class="comment">//</span>
01631             <span class="comment">// Get new selection</span>
01632             <span class="comment">//</span>
01633             <span class="keywordflow">if</span> (scState &amp; <a class="code" href="../../d6/d0/usercli_8h.html#a78">SHFTDOWN</a>) {
01634                 <span class="keywordflow">if</span> (MaxEqCar &amp;&amp; !MinEqMax) {
01635                     <span class="comment">// Reduce selection</span>
01636                     newMaxSel = ped-&gt;ichCaret;
01637 
01638                     UserAssert(newMinSel == ped-&gt;ichMinSel);
01639                 } <span class="keywordflow">else</span> {
01640                     <span class="comment">// Extend selection</span>
01641                     newMinSel = ped-&gt;ichCaret;
01642                 }
01643             } <span class="keywordflow">else</span> {
01644                 <span class="comment">//</span>
01645                 <span class="comment">// Clear selection</span>
01646                 <span class="comment">//</span>
01647                 newMaxSel = newMinSel = ped-&gt;ichCaret;
01648             }
01649 
01650             changeSelection = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01651         } <span class="keywordflow">else</span> {
01652             <span class="comment">//</span>
01653             <span class="comment">// If the user tries to move left and we are at the 0th</span>
01654             <span class="comment">// character and there is a selection, then cancel the</span>
01655             <span class="comment">// selection.</span>
01656             <span class="comment">//</span>
01657             <span class="keywordflow">if</span> ( (ped-&gt;ichMaxSel != ped-&gt;ichMinSel) &amp;&amp;
01658                 !(scState &amp; <a class="code" href="../../d6/d0/usercli_8h.html#a78">SHFTDOWN</a>) ) {
01659                 changeSelection = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01660                 newMaxSel = newMinSel = ped-&gt;ichCaret;
01661             }
01662         }
01663         <span class="keywordflow">break</span>;
01664 
01665     <span class="keywordflow">case</span> VK_DOWN:
01666         <span class="keywordflow">if</span> (ped-&gt;listboxHwnd) {
01667 
01668             <span class="comment">/*</span>
01669 <span class="comment">             * Handle Combobox support</span>
01670 <span class="comment">             */</span>
01671             fIsExtendedUI = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>)<a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(ped-&gt;hwndParent, CB_GETEXTENDEDUI, 0, 0);
01672             fIsListVisible = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>)<a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(ped-&gt;hwndParent, CB_GETDROPPEDSTATE, 0, 0);
01673 
01674             <span class="keywordflow">if</span> (!fIsListVisible &amp;&amp; fIsExtendedUI) {
01675 
01676                 <span class="comment">/*</span>
01677 <span class="comment">                 * For TandyT</span>
01678 <span class="comment">                 */</span>
01679                 <span class="keywordflow">goto</span> DropExtendedUIListBox;
01680             } <span class="keywordflow">else</span>
01681                 <span class="keywordflow">goto</span> SendKeyToListBox;
01682         }
01683 
01684     <span class="comment">/*</span>
01685 <span class="comment">     * else fall through</span>
01686 <span class="comment">     */</span>
01687     <span class="keywordflow">case</span> VK_RIGHT:
01688         <span class="comment">//</span>
01689         <span class="comment">// If the caret isn't at the end, we can move right.</span>
01690         <span class="comment">//</span>
01691         <span class="keywordflow">if</span> (ped-&gt;ichCaret &lt; ped-&gt;cch) {
01692             <span class="comment">//</span>
01693             <span class="comment">// Get new caret pos.</span>
01694             <span class="comment">//</span>
01695             <span class="keywordflow">if</span> (scState &amp; <a class="code" href="../../d6/d0/usercli_8h.html#a77">CTRLDOWN</a>) {
01696                 <span class="comment">// Move caret word right</span>
01697                 <a class="code" href="../../d6/d0/usercli_8h.html#a438">ECWord</a>(ped, ped-&gt;ichCaret, FALSE, NULL, &amp;ped-&gt;ichCaret);
01698             } <span class="keywordflow">else</span> {
01699                 <span class="comment">// Move caret char right</span>
01700                 <span class="keywordflow">if</span> (ped-&gt;pLpkEditCallout) {
01701                     ped-&gt;ichCaret = <a class="code" href="../../d3/d5/editsl_8c.html#a18">SLMoveSelectionRestricted</a>(ped, ped-&gt;ichCaret, FALSE);
01702                 } <span class="keywordflow">else</span>
01703                 ped-&gt;ichCaret = <a class="code" href="../../d6/d0/usercli_8h.html#a468">ECNextIch</a>(ped,NULL,ped-&gt;ichCaret);
01704             }
01705 
01706             <span class="comment">//</span>
01707             <span class="comment">// Get new selection.</span>
01708             <span class="comment">//</span>
01709             <span class="keywordflow">if</span> (scState &amp; <a class="code" href="../../d6/d0/usercli_8h.html#a78">SHFTDOWN</a>) {
01710                 <span class="keywordflow">if</span> (MinEqCar &amp;&amp; !MinEqMax) {
01711                     <span class="comment">// Reduce selection</span>
01712                     newMinSel = ped-&gt;ichCaret;
01713 
01714                     UserAssert(newMaxSel == ped-&gt;ichMaxSel);
01715                 } <span class="keywordflow">else</span> {
01716                     <span class="comment">// Extend selection</span>
01717                     newMaxSel = ped-&gt;ichCaret;
01718                 }
01719             } <span class="keywordflow">else</span> {
01720                 <span class="comment">// Clear selection</span>
01721                 newMaxSel = newMinSel = ped-&gt;ichCaret;
01722             }
01723 
01724             changeSelection = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01725         } <span class="keywordflow">else</span> {
01726             <span class="comment">//</span>
01727             <span class="comment">// If the user tries to move right and we are at the last</span>
01728             <span class="comment">// character and there is a selection, then cancel the</span>
01729             <span class="comment">// selection.</span>
01730             <span class="comment">//</span>
01731             <span class="keywordflow">if</span> ( (ped-&gt;ichMaxSel != ped-&gt;ichMinSel) &amp;&amp;
01732                 !(scState &amp; <a class="code" href="../../d6/d0/usercli_8h.html#a78">SHFTDOWN</a>) ) {
01733                 newMaxSel = newMinSel = ped-&gt;ichCaret;
01734                 changeSelection = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01735             }
01736         }
01737         <span class="keywordflow">break</span>;
01738 
01739     <span class="keywordflow">case</span> VK_HOME:
01740         <span class="comment">//</span>
01741         <span class="comment">// Move caret to top.</span>
01742         <span class="comment">//</span>
01743         ped-&gt;ichCaret = 0;
01744 
01745         <span class="comment">//</span>
01746         <span class="comment">// Update selection.</span>
01747         <span class="comment">//</span>
01748         <span class="keywordflow">if</span> (scState &amp; <a class="code" href="../../d6/d0/usercli_8h.html#a78">SHFTDOWN</a>) {
01749             <span class="keywordflow">if</span> (MaxEqCar &amp;&amp; !MinEqMax) {
01750                 <span class="comment">// Reduce selection</span>
01751                 newMinSel = ped-&gt;ichCaret;
01752                 newMaxSel = ped-&gt;ichMinSel;
01753             } <span class="keywordflow">else</span> {
01754                 <span class="comment">// Extend selection</span>
01755                 newMinSel = ped-&gt;ichCaret;
01756             }
01757         } <span class="keywordflow">else</span> {
01758             <span class="comment">// Clear selection</span>
01759             newMaxSel = newMinSel = ped-&gt;ichCaret;
01760         }
01761 
01762         changeSelection = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01763         <span class="keywordflow">break</span>;
01764 
01765     <span class="keywordflow">case</span> VK_END:
01766         <span class="comment">//</span>
01767         <span class="comment">// Move caret to end.</span>
01768         <span class="comment">//</span>
01769         ped-&gt;ichCaret = ped-&gt;cch;
01770 
01771         <span class="comment">//</span>
01772         <span class="comment">// Update selection.</span>
01773         <span class="comment">//</span>
01774         newMaxSel = ped-&gt;ichCaret;
01775         <span class="keywordflow">if</span> (scState &amp; <a class="code" href="../../d6/d0/usercli_8h.html#a78">SHFTDOWN</a>) {
01776             <span class="keywordflow">if</span> (MinEqCar &amp;&amp; !MinEqMax) {
01777                 <span class="comment">// Reduce selection</span>
01778                 newMinSel = ped-&gt;ichMaxSel;
01779             }
01780         } <span class="keywordflow">else</span> {
01781             <span class="comment">// Clear selection</span>
01782             newMinSel = ped-&gt;ichCaret;
01783         }
01784 
01785         changeSelection = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01786         <span class="keywordflow">break</span>;
01787 
01788     <span class="keywordflow">case</span> VK_DELETE:
01789         <span class="keywordflow">if</span> (ped-&gt;fReadOnly)
01790             <span class="keywordflow">break</span>;
01791 
01792         <span class="keywordflow">switch</span> (scState) {
01793         <span class="keywordflow">case</span> <a class="code" href="../../d6/d0/usercli_8h.html#a76">NONEDOWN</a>:
01794 
01795             <span class="comment">/*</span>
01796 <span class="comment">             * Clear selection. If no selection, delete (clear) character</span>
01797 <span class="comment">             * right.</span>
01798 <span class="comment">             */</span>
01799             <span class="keywordflow">if</span> ((ped-&gt;ichMaxSel &lt; ped-&gt;cch) &amp;&amp; (ped-&gt;ichMinSel == ped-&gt;ichMaxSel)) {
01800 
01801                 <span class="comment">/*</span>
01802 <span class="comment">                 * Move cursor forwards and simulate a backspace.</span>
01803 <span class="comment">                 */</span>
01804                 <span class="keywordflow">if</span> (ped-&gt;pLpkEditCallout) {
01805                     ped-&gt;ichMinSel = ped-&gt;ichCaret;
01806                     ped-&gt;ichMaxSel = ped-&gt;ichCaret = <a class="code" href="../../d3/d5/editsl_8c.html#a18">SLMoveSelectionRestricted</a>(ped, ped-&gt;ichCaret, FALSE);
01807                 } <span class="keywordflow">else</span> {
01808                     ped-&gt;ichCaret = <a class="code" href="../../d6/d0/usercli_8h.html#a468">ECNextIch</a>(ped,NULL,ped-&gt;ichCaret);
01809                     ped-&gt;ichMaxSel = ped-&gt;ichMinSel = ped-&gt;ichCaret;
01810                 }
01811                 <a class="code" href="../../d6/d0/usercli_8h.html#a534">SLChar</a>(ped, (UINT)VK_BACK);
01812             }
01813             <span class="keywordflow">if</span> (ped-&gt;ichMinSel != ped-&gt;ichMaxSel)
01814                 <a class="code" href="../../d6/d0/usercli_8h.html#a534">SLChar</a>(ped, (UINT)VK_BACK);
01815             <span class="keywordflow">break</span>;
01816 
01817         <span class="keywordflow">case</span> <a class="code" href="../../d6/d0/usercli_8h.html#a78">SHFTDOWN</a>:
01818 
01819             <span class="comment">//</span>
01820             <span class="comment">// Send ourself a WM_CUT message if a selection exists.</span>
01821             <span class="comment">// Otherwise, delete the left character.</span>
01822             <span class="comment">//</span>
01823             <span class="keywordflow">if</span> (ped-&gt;ichMinSel == ped-&gt;ichMaxSel) {
01824                 UserAssert(!ped-&gt;fEatNextChar);
01825                 <a class="code" href="../../d6/d0/usercli_8h.html#a534">SLChar</a>(ped, VK_BACK);
01826             } <span class="keywordflow">else</span>
01827                 <a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(ped-&gt;hwnd, WM_CUT, 0, 0L);
01828 
01829             <span class="keywordflow">break</span>;
01830 
01831         <span class="keywordflow">case</span> <a class="code" href="../../d6/d0/usercli_8h.html#a77">CTRLDOWN</a>:
01832 
01833             <span class="comment">/*</span>
01834 <span class="comment">             * Delete to end of line if no selection else delete (clear)</span>
01835 <span class="comment">             * selection.</span>
01836 <span class="comment">             */</span>
01837             <span class="keywordflow">if</span> ((ped-&gt;ichMaxSel &lt; ped-&gt;cch) &amp;&amp; (ped-&gt;ichMinSel == ped-&gt;ichMaxSel)) {
01838 
01839                 <span class="comment">/*</span>
01840 <span class="comment">                 * Move cursor to end of line and simulate a backspace.</span>
01841 <span class="comment">                 */</span>
01842                 ped-&gt;ichMaxSel = ped-&gt;ichCaret = ped-&gt;cch;
01843             }
01844             <span class="keywordflow">if</span> (ped-&gt;ichMinSel != ped-&gt;ichMaxSel)
01845                 <a class="code" href="../../d6/d0/usercli_8h.html#a534">SLChar</a>(ped, (UINT)VK_BACK);
01846             <span class="keywordflow">break</span>;
01847 
01848         }
01849 
01850         <span class="comment">/*</span>
01851 <span class="comment">         * No need to update text or selection since BACKSPACE message does it</span>
01852 <span class="comment">         * for us.</span>
01853 <span class="comment">         */</span>
01854         <span class="keywordflow">break</span>;
01855 
01856     <span class="keywordflow">case</span> VK_INSERT:
01857         <span class="keywordflow">switch</span> (scState) {
01858         <span class="keywordflow">case</span> <a class="code" href="../../d6/d0/usercli_8h.html#a77">CTRLDOWN</a>:
01859 
01860             <span class="comment">/*</span>
01861 <span class="comment">             * Copy current selection to clipboard</span>
01862 <span class="comment">             */</span>
01863             <a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(ped-&gt;hwnd, WM_COPY, 0, 0);
01864             <span class="keywordflow">break</span>;
01865 
01866         <span class="keywordflow">case</span> <a class="code" href="../../d6/d0/usercli_8h.html#a78">SHFTDOWN</a>:
01867             <a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(ped-&gt;hwnd, WM_PASTE, 0, 0L);
01868             <span class="keywordflow">break</span>;
01869         }
01870         <span class="keywordflow">break</span>;
01871 
01872     <span class="comment">// VK_HANJA support</span>
01873     <span class="keywordflow">case</span> VK_HANJA:
01874         <span class="keywordflow">if</span> ( <a class="code" href="../../d6/d0/usercli_8h.html#a476">HanjaKeyHandler</a>( ped ) ) {
01875             changeSelection = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01876             newMinSel = ped-&gt;ichCaret;
01877             newMaxSel = ped-&gt;ichCaret + (ped-&gt;fAnsi ? 2 : 1);
01878         }
01879         <span class="keywordflow">break</span>;
01880 
01881     <span class="keywordflow">case</span> VK_F4:
01882     <span class="keywordflow">case</span> VK_PRIOR:
01883     <span class="keywordflow">case</span> VK_NEXT:
01884 
01885         <span class="comment">/*</span>
01886 <span class="comment">         * Send keys to the listbox if we are a part of a combo box. This</span>
01887 <span class="comment">         * assumes the listbox ignores keyup messages which is correct right</span>
01888 <span class="comment">         * now.</span>
01889 <span class="comment">         */</span>
01890 SendKeyToListBox:
01891         <span class="keywordflow">if</span> (ped-&gt;listboxHwnd) {
01892 
01893             <span class="comment">/*</span>
01894 <span class="comment">             * Handle Combobox support</span>
01895 <span class="comment">             */</span>
01896             <a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(ped-&gt;listboxHwnd, WM_KEYDOWN, virtKeyCode, 0L);
01897             <span class="keywordflow">return</span>;
01898         }
01899     }
01900 
01901     <span class="keywordflow">if</span> (changeSelection || updateText) {
01902         hdc = <a class="code" href="../../d6/d0/usercli_8h.html#a451">ECGetEditDC</a>(ped, FALSE);
01903 
01904         <span class="comment">/*</span>
01905 <span class="comment">         * Scroll if needed</span>
01906 <span class="comment">         */</span>
01907         <a class="code" href="../../d6/d0/usercli_8h.html#a530">SLScrollText</a>(ped, hdc);
01908 
01909         <span class="keywordflow">if</span> (changeSelection)
01910             <a class="code" href="../../d6/d0/usercli_8h.html#a526">SLChangeSelection</a>(ped, hdc, newMinSel, newMaxSel);
01911 
01912         <span class="keywordflow">if</span> (updateText)
01913             <a class="code" href="../../d6/d0/usercli_8h.html#a527">SLDrawText</a>(ped, hdc, 0);
01914 
01915         <a class="code" href="../../d6/d0/usercli_8h.html#a452">ECReleaseEditDC</a>(ped, hdc, FALSE);
01916         <span class="keywordflow">if</span> (updateText) {
01917             <a class="code" href="../../d6/d0/usercli_8h.html#a449">ECNotifyParent</a>(ped, EN_CHANGE);
01918 
01919             <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a405">FWINABLE</a>()) {
01920                 <a class="code" href="../../d8/d9/client_2ntstubs_8c.html#a12">NotifyWinEvent</a>(EVENT_OBJECT_VALUECHANGE, ped-&gt;hwnd, OBJID_CLIENT, INDEXID_CONTAINER);
01921             }
01922         }
01923     }
01924 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a541" doxytag="usercli.h::SLKillFocus" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void SLKillFocus           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HWND&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d4/editsl_8c-source.html#l02394">2394</a> of file <a class="el" href="../../d4/d4/editsl_8c-source.html">editsl.c</a>.
<p>
References <a class="el" href="../../d9/d3/editec_8c-source.html#l02429">ECNotifyParent()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00602">tagED::fFocus</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00610">tagED::fNoHideSel</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00584">tagED::hwnd</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00587">tagED::hwndParent</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00564">tagED::ichCaret</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00563">tagED::ichMaxSel</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00561">tagED::ichMinSel</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00508">IsChild()</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00682">tagED::listboxHwnd</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01560">NtUserDestroyCaret</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05330">NtUserInvalidateRect()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00652">SendMessage()</a>, and <a class="el" href="../../d4/d4/editsl_8c-source.html#l00283">SLSetSelection()</a>.
<p>
Referenced by <a class="el" href="../../d4/d4/editsl_8c-source.html#l02520">SLEditWndProc()</a>.
<p>
<pre class="fragment"><div>02397 {
02398     <span class="keywordflow">if</span> (ped-&gt;fFocus) {
02399 
02400         <span class="comment">/*</span>
02401 <span class="comment">         * Destroy the caret (Win31/Chicago hides it first)</span>
02402 <span class="comment">         */</span>
02403         <a class="code" href="../../d6/d0/usercli_8h.html#a215">NtUserDestroyCaret</a>();
02404 
02405         ped-&gt;fFocus = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>; <span class="comment">/* Clear focus */</span>
02406         <span class="comment">/*</span>
02407 <span class="comment">         * Do this only if we still have the focus. But we always notify the</span>
02408 <span class="comment">         * parent that we lost the focus whether or not we originally had the</span>
02409 <span class="comment">         * focus.</span>
02410 <span class="comment">         */</span>
02411 
02412         <span class="comment">/*</span>
02413 <span class="comment">         * Hide the current selection if needed</span>
02414 <span class="comment">         */</span>
02415         <span class="keywordflow">if</span> (!ped-&gt;fNoHideSel &amp;&amp; (ped-&gt;ichMinSel != ped-&gt;ichMaxSel)) {
02416             <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a206">NtUserInvalidateRect</a>(ped-&gt;hwnd, NULL, FALSE);
02417 <span class="preprocessor">#if 0</span>
02418 <span class="preprocessor"></span>            <a class="code" href="../../d6/d0/usercli_8h.html#a531">SLSetSelection</a>(ped, ped-&gt;ichCaret, ped-&gt;ichCaret);
02419 <span class="preprocessor">#endif</span>
02420 <span class="preprocessor"></span>        }
02421     }
02422 
02423     <span class="comment">/*</span>
02424 <span class="comment">     * If we aren't a combo box, notify parent that we lost the focus.</span>
02425 <span class="comment">     */</span>
02426     <span class="keywordflow">if</span> (!ped-&gt;listboxHwnd)
02427         <a class="code" href="../../d6/d0/usercli_8h.html#a449">ECNotifyParent</a>(ped, EN_KILLFOCUS);
02428     <span class="keywordflow">else</span> {
02429 
02430         <span class="comment">/*</span>
02431 <span class="comment">         * This editcontrol is part of a combo box and is losing the focus. If</span>
02432 <span class="comment">         * the focus is NOT being sent to another control in the combo box</span>
02433 <span class="comment">         * window, then it means the combo box is losing the focus. So we will</span>
02434 <span class="comment">         * notify the combo box of this fact.</span>
02435 <span class="comment">         */</span>
02436         <span class="keywordflow">if</span> ((newFocusHwnd == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) ||
02437                     (!<a class="code" href="../../d3/d9/client_2wow_8c.html#a18">IsChild</a>(ped-&gt;hwndParent, newFocusHwnd))) {
02438             <span class="comment">// Excel has a slaker in it's midst.  They're not using our combo</span>
02439             <span class="comment">// boxes, but they still expect to get all the internal messages</span>
02440             <span class="comment">// that we give to OUR comboboxes.  And they expect them to be at</span>
02441             <span class="comment">// the same offset from WM_USER as they were in 3.1.</span>
02442             <span class="comment">//                                           (JEFFBOG - 01/26/94)</span>
02443             <span class="comment">/*</span>
02444 <span class="comment">             * Windows NT won't fix the bug described above: it only applies</span>
02445 <span class="comment">             * to old 16-bit excel, and WOW converts msgs to Win3.1 values.</span>
02446 <span class="comment">             */</span>
02447 
02448             <span class="comment">/*</span>
02449 <span class="comment">             * Focus is being sent to a window which is not a child of the combo</span>
02450 <span class="comment">             * box window which implies that the combo box is losing the focus.</span>
02451 <span class="comment">             * Send a message to the combo box informing him of this fact so</span>
02452 <span class="comment">             * that he can clean up...</span>
02453 <span class="comment">             */</span>
02454             <a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(ped-&gt;hwndParent, CBEC_KILLCOMBOFOCUS, 0, 0L);
02455         }
02456     }
02457 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a537" doxytag="usercli.h::SLMouseMotion" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void SLMouseMotion           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPPOINT&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d4/editsl_8c-source.html#l02098">2098</a> of file <a class="el" href="../../d4/d4/editsl_8c-source.html">editsl.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00557">tagED::cch</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02492">ECGetEditDC()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l04083">ECIsDBCSLeadByte()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00052">ECLock()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02524">ECReleaseEditDC()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00086">ECUnlock()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l01552">ECWord()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00640">tagED::fAnsi</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00611">tagED::fDBCS</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00602">tagED::fFocus</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00601">tagED::fMouseDown</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00610">tagED::fNoHideSel</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00584">tagED::hwnd</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00626">ICH</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00564">tagED::ichCaret</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00563">tagED::ichMaxSel</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00561">tagED::ichMinSel</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00700">tagED::ichStartMaxSel</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00699">tagED::ichStartMinSel</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00682">tagED::listboxHwnd</a>, <a class="el" href="../../d6/d3/acpitabl_8h-source.html#l00366">min</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01570">NtUserReleaseCapture</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05822">NtUserSetCapture()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05902">NtUserSetFocus()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l00395">SLChangeSelection()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l01934">SLMouseToIch()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l00932">SLScrollText()</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d4/d4/editsl_8c-source.html#l02520">SLEditWndProc()</a>.
<p>
<pre class="fragment"><div>02103 {
02104     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>   selectionl;
02105     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>   selectionh;
02106     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>    changeSelection;
02107     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a>     newMaxSel;
02108     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a>     newMinSel;
02109     HDC     hdc;
02110     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a>     mouseIch;
02111     LPSTR   pText;
02112 
02113     changeSelection = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
02114 
02115     newMinSel = ped-&gt;ichMinSel;
02116     newMaxSel = ped-&gt;ichMaxSel;
02117 
02118     hdc = <a class="code" href="../../d6/d0/usercli_8h.html#a451">ECGetEditDC</a>(ped, FALSE);
02119     mouseIch = <a class="code" href="../../d6/d0/usercli_8h.html#a536">SLMouseToIch</a>(ped, hdc, mousePt);
02120 
02121     <span class="keywordflow">switch</span> (message) {
02122         <span class="keywordflow">case</span> WM_LBUTTONDBLCLK:
02123 
02124             <span class="comment">// if shift key is down, extend selection to word we double clicked on</span>
02125             <span class="comment">// else clear current selection and select word.</span>
02126 
02127             <span class="comment">// in DBCS, we have different word breaking. LiZ -- 5/5/93</span>
02128             <span class="comment">// In Hangeul Environment we use word selection feature because Hangeul</span>
02129             <span class="comment">// use SPACE as word break</span>
02130             <span class="keywordflow">if</span> (ped-&gt;fAnsi &amp;&amp; ped-&gt;fDBCS) {
02131                 pText = <a class="code" href="../../d6/d0/usercli_8h.html#a433">ECLock</a>(ped) + mouseIch;
02132                 <a class="code" href="../../d6/d0/usercli_8h.html#a438">ECWord</a>(ped, mouseIch,
02133                        (<a class="code" href="../../d6/d0/usercli_8h.html#a464">ECIsDBCSLeadByte</a>(ped,*pText) &amp;&amp; mouseIch &lt; ped-&gt;cch) ? FALSE : TRUE,
02134                        &amp;selectionl, &amp;selectionh);
02135                 <a class="code" href="../../d6/d0/usercli_8h.html#a434">ECUnlock</a>(ped);
02136             } <span class="keywordflow">else</span> {
02137                 <a class="code" href="../../d6/d0/usercli_8h.html#a438">ECWord</a>(ped, mouseIch, (mouseIch) ? TRUE : FALSE, &amp;selectionl, &amp;selectionh);
02138             }
02139 
02140             <span class="keywordflow">if</span> (!(virtKeyDown &amp; MK_SHIFT)) {
02141                 <span class="comment">// If shift key isn't down, move caret to mouse point and clear</span>
02142                 <span class="comment">// old selection</span>
02143                 newMinSel = selectionl;
02144                 newMaxSel = ped-&gt;ichCaret = selectionh;
02145             } <span class="keywordflow">else</span> {
02146                 <span class="comment">// Shiftkey is down so we want to maintain the current selection</span>
02147                 <span class="comment">// (if any) and just extend or reduce it</span>
02148                 <span class="keywordflow">if</span> (ped-&gt;ichMinSel == ped-&gt;ichCaret) {
02149                     newMinSel = ped-&gt;ichCaret = selectionl;
02150                     <a class="code" href="../../d6/d0/usercli_8h.html#a438">ECWord</a>(ped, newMaxSel, TRUE, &amp;selectionl, &amp;selectionh);
02151                 } <span class="keywordflow">else</span> {
02152                     newMaxSel = ped-&gt;ichCaret = selectionh;
02153                     <a class="code" href="../../d6/d0/usercli_8h.html#a438">ECWord</a>(ped, newMinSel, FALSE, &amp;selectionl, &amp;selectionh);
02154                 }
02155                 <span class="comment">/*</span>
02156 <span class="comment">                 * v-ronaar: fix bug 24627 - edit selection is weird.</span>
02157 <span class="comment">                 */</span>
02158                 ped-&gt;ichMaxSel = ped-&gt;ichCaret;
02159             }
02160 
02161             ped-&gt;ichStartMinSel = selectionl;
02162             ped-&gt;ichStartMaxSel = selectionh;
02163 
02164             <span class="keywordflow">goto</span> InitDragSelect;
02165 
02166         <span class="keywordflow">case</span> WM_MOUSEMOVE:
02167             <span class="comment">//</span>
02168             <span class="comment">// We know the mouse button's down -- otherwise the OPTIMIZE</span>
02169             <span class="comment">// test would've failed in SLEditWndProc and never called</span>
02170             <span class="comment">//</span>
02171             changeSelection = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
02172 
02173             <span class="comment">// Extend selection, move caret word right</span>
02174             <span class="keywordflow">if</span> (ped-&gt;ichStartMinSel || ped-&gt;ichStartMaxSel) {
02175                 <span class="comment">// We're in WORD SELECT mode</span>
02176                 <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fReverse = (mouseIch &lt;= ped-&gt;ichStartMinSel);
02177 
02178                 <a class="code" href="../../d6/d0/usercli_8h.html#a438">ECWord</a>(ped, mouseIch, !fReverse, &amp;selectionl, &amp;selectionh);
02179 
02180                 <span class="keywordflow">if</span> (fReverse) {
02181                     newMinSel = ped-&gt;ichCaret = selectionl;
02182                     newMaxSel = ped-&gt;ichStartMaxSel;
02183                 } <span class="keywordflow">else</span> {
02184                     newMinSel = ped-&gt;ichStartMinSel;
02185                     newMaxSel = ped-&gt;ichCaret = selectionh;
02186                 }
02187             } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((ped-&gt;ichMinSel == ped-&gt;ichCaret) &amp;&amp;
02188                 (ped-&gt;ichMinSel != ped-&gt;ichMaxSel))
02189                 <span class="comment">// Reduce selection extent</span>
02190                 newMinSel = ped-&gt;ichCaret = mouseIch;
02191             <span class="keywordflow">else</span>
02192                 <span class="comment">// Extend selection extent</span>
02193                 newMaxSel = ped-&gt;ichCaret=mouseIch;
02194             <span class="keywordflow">break</span>;
02195 
02196         <span class="keywordflow">case</span> WM_LBUTTONDOWN:
02197             <span class="comment">// If we currently don't have the focus yet, try to get it.</span>
02198             <span class="keywordflow">if</span> (!ped-&gt;fFocus) {
02199                 <span class="keywordflow">if</span> (!ped-&gt;fNoHideSel)
02200                     <span class="comment">// Clear the selection before setting the focus so that we</span>
02201                     <span class="comment">// don't get refresh problems and flicker. Doesn't matter</span>
02202                     <span class="comment">// since the mouse down will end up changing it anyway.</span>
02203                     ped-&gt;ichMinSel = ped-&gt;ichMaxSel = ped-&gt;ichCaret;
02204 
02205                 <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a225">NtUserSetFocus</a>(ped-&gt;hwnd);
02206 
02207                 <span class="comment">//</span>
02208                 <span class="comment">// BOGUS</span>
02209                 <span class="comment">// (1) We should see if SetFocus() succeeds.</span>
02210                 <span class="comment">// (2) We should ignore mouse messages if the first window</span>
02211                 <span class="comment">//      ancestor with a caption isn't "active."</span>
02212                 <span class="comment">//</span>
02213 
02214                 <span class="comment">// If we are part of a combo box, then this is the first time</span>
02215                 <span class="comment">// the edit control is getting the focus so we just want to</span>
02216                 <span class="comment">// highlight the selection and we don't really want to position</span>
02217                 <span class="comment">// the caret.</span>
02218                 <span class="keywordflow">if</span> (ped-&gt;listboxHwnd)
02219                     <span class="keywordflow">break</span>;
02220 
02221                 <span class="comment">// We yield at SetFocus -- text might have changed at that point</span>
02222                 <span class="comment">// update selection and caret info accordingly</span>
02223                 <span class="comment">// FIX for bug # 11743 -- JEFFBOG 8/23/91</span>
02224                 newMaxSel = ped-&gt;ichMaxSel;
02225                 newMinSel = ped-&gt;ichMinSel;
02226                 mouseIch  = <a class="code" href="../../d5/d4/acpitabl_8h.html#a69">min</a>(mouseIch, ped-&gt;cch);
02227             }
02228 
02229             <span class="keywordflow">if</span> (ped-&gt;fFocus) {
02230                 <span class="comment">// Only do this if we have the focus since a clever app may not</span>
02231                 <span class="comment">// want to give us the focus at the SetFocus call above.</span>
02232                 <span class="keywordflow">if</span> (!(virtKeyDown &amp; MK_SHIFT)) {
02233                     <span class="comment">// If shift key isn't down, move caret to mouse point and</span>
02234                     <span class="comment">// clear old selection</span>
02235                     newMinSel = newMaxSel = ped-&gt;ichCaret = mouseIch;
02236                 } <span class="keywordflow">else</span> {
02237                     <span class="comment">// Shiftkey is down so we want to maintain the current</span>
02238                     <span class="comment">// selection (if any) and just extend or reduce it</span>
02239                     <span class="keywordflow">if</span> (ped-&gt;ichMinSel == ped-&gt;ichCaret)
02240                         newMinSel = ped-&gt;ichCaret = mouseIch;
02241                     <span class="keywordflow">else</span>
02242                         newMaxSel = ped-&gt;ichCaret = mouseIch;
02243                 }
02244 
02245                 ped-&gt;ichStartMinSel = ped-&gt;ichStartMaxSel = 0;
02246 
02247 InitDragSelect:
02248                 ped-&gt;fMouseDown = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
02249                 <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a221">NtUserSetCapture</a>(ped-&gt;hwnd);
02250                 ped-&gt;fMouseDown = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
02251                 changeSelection = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
02252             }
02253             <span class="keywordflow">break</span>;
02254 
02255         <span class="keywordflow">case</span> WM_LBUTTONUP:
02256             <span class="keywordflow">if</span> (ped-&gt;fMouseDown) {
02257                 ped-&gt;fMouseDown = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
02258                 <a class="code" href="../../d6/d0/usercli_8h.html#a225">NtUserReleaseCapture</a>();
02259             }
02260             <span class="keywordflow">break</span>;
02261     }
02262 
02263     <span class="keywordflow">if</span> (changeSelection) {
02264         <a class="code" href="../../d6/d0/usercli_8h.html#a530">SLScrollText</a>(ped,hdc);
02265         <a class="code" href="../../d6/d0/usercli_8h.html#a526">SLChangeSelection</a>(ped, hdc, newMinSel, newMaxSel);
02266     }
02267 
02268     <a class="code" href="../../d6/d0/usercli_8h.html#a452">ECReleaseEditDC</a>(ped, hdc, FALSE);
02269 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a536" doxytag="usercli.h::SLMouseToIch" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a> SLMouseToIch           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HDC&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPPOINT&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d4/editsl_8c-source.html#l01934">1934</a> of file <a class="el" href="../../d4/d4/editsl_8c-source.html">editsl.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l00661">tagED::cbChar</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00557">tagED::cch</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00578">tagED::charPasswordChar</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00582">tagED::cPasswordCharWidth</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l04133">ECAdjustIch()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l01281">ECCchInWidth()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l04083">ECIsDBCSLeadByte()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00052">ECLock()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00086">ECUnlock()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l03291">tagLPKEDITCALLOUT::EditMouseToIch</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00640">tagED::fAnsi</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00611">tagED::fDBCS</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l00023">FnGetTextExtentPoint</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00664">tagED::format</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00626">ICH</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00570">tagED::ichScreenStart</a>, <a class="el" href="../../d6/d3/acpitabl_8h-source.html#l00366">min</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00702">tagED::pLpkEditCallout</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00586">tagED::rcFmt</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l00080">SLCalcXOffsetSpecial()</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d4/d4/editsl_8c-source.html#l02520">SLEditWndProc()</a>, and <a class="el" href="../../d4/d4/editsl_8c-source.html#l02098">SLMouseMotion()</a>.
<p>
<pre class="fragment"><div>01938 {
01939     PSTR pText;
01940     <span class="keywordtype">int</span> width = mousePt-&gt;x;
01941     <span class="keywordtype">int</span> lastHighWidth, lastLowWidth;
01942     SIZE size;
01943     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a> cch;
01944     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a> cchLo, cchHi;
01945     LPSTR lpText;
01946     <a class="code" href="../../d3/d5/editsl_8c.html#a1">FnGetTextExtentPoint</a> pGetTextExtentPoint;
01947 
01948     <span class="keywordflow">if</span> (ped-&gt;pLpkEditCallout) {
01949         pText = <a class="code" href="../../d6/d0/usercli_8h.html#a433">ECLock</a>(ped);
01950         cch = ped-&gt;pLpkEditCallout-&gt;EditMouseToIch(ped, hdc, pText, ped-&gt;cch, width);
01951         <a class="code" href="../../d6/d0/usercli_8h.html#a434">ECUnlock</a>(ped);
01952         <span class="keywordflow">return</span> cch;
01953     }
01954 
01955     <span class="keywordflow">if</span> (width &lt;= ped-&gt;rcFmt.left) {
01956 
01957         <span class="comment">/*</span>
01958 <span class="comment">         * Return either the first non visible character or return 0 if at</span>
01959 <span class="comment">         * beginning of text</span>
01960 <span class="comment">         */</span>
01961         <span class="keywordflow">if</span> (ped-&gt;ichScreenStart)
01962             <span class="keywordflow">return</span> (ped-&gt;ichScreenStart - 1);
01963         <span class="keywordflow">else</span>
01964             <span class="keywordflow">return</span> (0);
01965     }
01966 
01967     <span class="keywordflow">if</span> (width &gt; ped-&gt;rcFmt.right) {
01968         pText = <a class="code" href="../../d6/d0/usercli_8h.html#a433">ECLock</a>(ped);
01969 
01970         <span class="comment">/*</span>
01971 <span class="comment">         * Return last char in text or one plus the last char visible</span>
01972 <span class="comment">         */</span>
01973         cch = <a class="code" href="../../d6/d0/usercli_8h.html#a443">ECCchInWidth</a>(ped, hdc,
01974                 (LPSTR)(pText + ped-&gt;ichScreenStart * ped-&gt;cbChar),
01975                 ped-&gt;cch - ped-&gt;ichScreenStart, ped-&gt;rcFmt.right -
01976                 ped-&gt;rcFmt.left, TRUE) + ped-&gt;ichScreenStart;
01977 
01978         <span class="comment">//</span>
01979         <span class="comment">// This is marked as JAPAN in Win31J. But it should be a DBCS</span>
01980         <span class="comment">// issue. LiZ -- 5/5/93</span>
01981         <span class="comment">// We must check DBCS Lead byte. Because ECAdjustIch() pick up Prev Char.</span>
01982         <span class="comment">//  1993.3.9 by yutakas</span>
01983         <span class="comment">//</span>
01984         <span class="keywordflow">if</span> (ped-&gt;fAnsi &amp;&amp; ped-&gt;fDBCS) {
01985             <span class="keywordflow">if</span> (cch &gt;= ped-&gt;cch) {
01986                 cch = ped-&gt;cch;
01987             } <span class="keywordflow">else</span> {
01988                 <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a464">ECIsDBCSLeadByte</a>(ped,*(pText+cch))) {
01989                     cch += 2;
01990                 } <span class="keywordflow">else</span> {
01991                     cch ++;
01992                 }
01993             }
01994             <a class="code" href="../../d6/d0/usercli_8h.html#a434">ECUnlock</a>(ped);
01995             <span class="keywordflow">return</span> cch;
01996         } <span class="keywordflow">else</span> {
01997             <a class="code" href="../../d6/d0/usercli_8h.html#a434">ECUnlock</a>(ped);
01998             <span class="keywordflow">if</span> (cch &gt;= ped-&gt;cch)
01999                 <span class="keywordflow">return</span> (ped-&gt;cch);
02000             <span class="keywordflow">else</span>
02001                 <span class="keywordflow">return</span> (cch + 1);
02002         }
02003     }
02004 
02005     <span class="keywordflow">if</span> (ped-&gt;format != ES_LEFT) {
02006         width -= <a class="code" href="../../d3/d5/editsl_8c.html#a4">SLCalcXOffsetSpecial</a>(ped, hdc, ped-&gt;ichScreenStart);
02007     }
02008 
02009     <span class="comment">/*</span>
02010 <span class="comment">     * Check if password hidden chars are being used.</span>
02011 <span class="comment">     */</span>
02012     <span class="keywordflow">if</span> (ped-&gt;charPasswordChar)
02013         <span class="keywordflow">return</span> <a class="code" href="../../d5/d4/acpitabl_8h.html#a69">min</a>( (DWORD)( (width - ped-&gt;rcFmt.left) / ped-&gt;cPasswordCharWidth),
02014                     ped-&gt;cch);
02015 
02016     <span class="keywordflow">if</span> (!ped-&gt;cch)
02017         <span class="keywordflow">return</span> (0);
02018 
02019     pText = <a class="code" href="../../d6/d0/usercli_8h.html#a433">ECLock</a>(ped);
02020     lpText = pText + ped-&gt;ichScreenStart * ped-&gt;cbChar;
02021 
02022     pGetTextExtentPoint = ped-&gt;fAnsi ? (<a class="code" href="../../d3/d5/editsl_8c.html#a1">FnGetTextExtentPoint</a>)GetTextExtentPointA
02023                                      : (<a class="code" href="../../d3/d5/editsl_8c.html#a1">FnGetTextExtentPoint</a>)GetTextExtentPointW;
02024     width -= ped-&gt;rcFmt.left;
02025 
02026     <span class="comment">/*</span>
02027 <span class="comment">     * If the user clicked past the end of the text, return the last character</span>
02028 <span class="comment">     */</span>
02029     cchHi = ped-&gt;cch - ped-&gt;ichScreenStart;
02030     pGetTextExtentPoint(hdc, lpText, cchHi, &amp;size);
02031     <span class="keywordflow">if</span> (size.cx &lt;= width) {
02032         cch = cchHi;
02033         <span class="keywordflow">goto</span> edAdjust;
02034     }
02035     <span class="comment">/*</span>
02036 <span class="comment">     * Initialize Binary Search Bounds</span>
02037 <span class="comment">     */</span>
02038     cchLo = 0;
02039     cchHi ++;
02040     lastLowWidth = 0;
02041     lastHighWidth = size.cx;
02042 
02043     <span class="comment">/*</span>
02044 <span class="comment">     * Binary search for closest char</span>
02045 <span class="comment">     */</span>
02046     <span class="keywordflow">while</span> (cchLo &lt; cchHi - 1) {
02047 
02048         cch = (cchHi + cchLo) / 2;
02049         pGetTextExtentPoint(hdc, lpText, cch, &amp;size);
02050 
02051         <span class="keywordflow">if</span> (size.cx &lt;= width) {
02052             cchLo = cch;
02053             lastLowWidth = size.cx;
02054         } <span class="keywordflow">else</span> {
02055             cchHi = cch;
02056             lastHighWidth = size.cx;
02057         }
02058     }
02059 
02060     <span class="comment">/*</span>
02061 <span class="comment">     * When the while ends, you can't know the exact position.</span>
02062 <span class="comment">     * Try to see if the mouse pointer was on the farest half</span>
02063 <span class="comment">     * of the char we got and if so, adjust cch.</span>
02064 <span class="comment">     */</span>
02065     <span class="keywordflow">if</span> (cchLo == cch) {
02066         <span class="comment">/*</span>
02067 <span class="comment">         * Need to compare with lastHighWidth</span>
02068 <span class="comment">         */</span>
02069         <span class="keywordflow">if</span> ((lastHighWidth - width) &lt; (width - size.cx)) {
02070             cch++;
02071         }
02072     } <span class="keywordflow">else</span> {
02073         <span class="comment">/*</span>
02074 <span class="comment">         * Need to compare with lastLowWidth</span>
02075 <span class="comment">         */</span>
02076         <span class="keywordflow">if</span> ((width - lastLowWidth) &lt; (size.cx - width)) {
02077             cch--;
02078         }
02079     }
02080 
02081 edAdjust:
02082     <span class="comment">//</span>
02083     <span class="comment">// Avoid to point the intermediate of double byte character</span>
02084     <span class="comment">//</span>
02085     cch = <a class="code" href="../../d6/d0/usercli_8h.html#a461">ECAdjustIch</a>( ped, pText, cch + ped-&gt;ichScreenStart );
02086     <a class="code" href="../../d6/d0/usercli_8h.html#a434">ECUnlock</a>(ped);
02087     <span class="keywordflow">return</span> ( cch );
02088 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a539" doxytag="usercli.h::SLPaint" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void SLPaint           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HDC&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d4/editsl_8c-source.html#l02280">2280</a> of file <a class="el" href="../../d4/d4/editsl_8c-source.html">editsl.c</a>.
<p>
References <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00924">_GetClientRect()</a>, <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00860">_IsWindowVisible()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00711">DF_WINDOWFRAME</a>, <a class="el" href="../../d0/d1/rtl_2draw_8c-source.html#l01188">DrawFrame()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l01412">ECGetBrush()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00643">tagED::fFlatBorder</a>, <a class="el" href="../../d0/d1/rtl_2draw_8c-source.html#l00061">FillRect()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00674">tagED::hFont</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00584">tagED::hwnd</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05279">NtUserHideCaret()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06219">NtUserShowCaret()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00585">tagED::pwnd</a>, and <a class="el" href="../../d4/d4/editsl_8c-source.html#l00737">SLDrawText()</a>.
<p>
Referenced by <a class="el" href="../../d4/d4/editsl_8c-source.html#l02520">SLEditWndProc()</a>.
<p>
<pre class="fragment"><div>02283 {
02284     HWND   hwnd = ped-&gt;hwnd;
02285     HBRUSH hBrushRemote;
02286     RECT   rcEdit;
02287     HANDLE hOldFont;
02288 
02289     <span class="comment">/*</span>
02290 <span class="comment">     * Had to put in hide/show carets. The first one needs to be done before</span>
02291 <span class="comment">     * beginpaint to correctly paint the caret if part is in the update region</span>
02292 <span class="comment">     * and part is out. The second is for 1.03 compatibility. It breaks</span>
02293 <span class="comment">     * micrografix's worksheet edit control if not there.</span>
02294 <span class="comment">     */</span>
02295     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a204">NtUserHideCaret</a>(hwnd);
02296 
02297     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d9/rtl_2wow_8c.html#a17">_IsWindowVisible</a>(ped-&gt;pwnd)) {
02298         <span class="comment">/*</span>
02299 <span class="comment">         * Erase the background since we don't do it in the erasebkgnd message.</span>
02300 <span class="comment">         */</span>
02301         hBrushRemote = <a class="code" href="../../d6/d0/usercli_8h.html#a480">ECGetBrush</a>(ped, hdc);
02302         <a class="code" href="../../d6/d9/rtl_2wow_8c.html#a19">_GetClientRect</a>(ped-&gt;pwnd, (LPRECT)&amp;rcEdit);
02303         <a class="code" href="../../d9/d1/rtl_2draw_8c.html#a3">FillRect</a>(hdc, &amp;rcEdit, hBrushRemote);
02304 
02305         <span class="keywordflow">if</span> (ped-&gt;fFlatBorder)
02306         {
02307             RECT    rcT;
02308 
02309             <a class="code" href="../../d6/d9/rtl_2wow_8c.html#a19">_GetClientRect</a>(ped-&gt;pwnd, &amp;rcT);
02310             <a class="code" href="../../d9/d1/rtl_2draw_8c.html#a17">DrawFrame</a>(hdc, &amp;rcT, 1, DF_WINDOWFRAME);
02311         }
02312 
02313         <span class="keywordflow">if</span> (ped-&gt;hFont != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
02314             <span class="comment">/*</span>
02315 <span class="comment">             * We have to select in the font since this may be a subclassed dc</span>
02316 <span class="comment">             * or a begin paint dc which hasn't been initialized with out fonts</span>
02317 <span class="comment">             * like ECGetEditDC does.</span>
02318 <span class="comment">             */</span>
02319             hOldFont = SelectObject(hdc, ped-&gt;hFont);
02320         }
02321 
02322         <a class="code" href="../../d6/d0/usercli_8h.html#a527">SLDrawText</a>(ped, hdc, 0);
02323 
02324         <span class="keywordflow">if</span> (ped-&gt;hFont != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> &amp;&amp; hOldFont != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
02325             SelectObject(hdc, hOldFont);
02326         }
02327     }
02328 
02329     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a234">NtUserShowCaret</a>(hwnd);
02330 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a533" doxytag="usercli.h::SLPasteText" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a> SLPasteText           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d4/editsl_8c-source.html#l01157">1157</a> of file <a class="el" href="../../d4/d4/editsl_8c-source.html">editsl.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l00640">tagED::fAnsi</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l00390">GetClipboardData()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00584">tagED::hwnd</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00626">ICH</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l03252">NtUserCloseClipboard()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00540">OpenClipboard()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l01074">SLInsertText()</a>, <a class="el" href="../../d2/d7/regtest_8c.html#a2">strlen()</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00128">USERGLOBALLOCK</a>, and <a class="el" href="../../d7/d9/usercli_8h-source.html#l00123">USERGLOBALUNLOCK</a>.
<p>
Referenced by <a class="el" href="../../d4/d4/editsl_8c-source.html#l02467">SLPaste()</a>.
<p>
<pre class="fragment"><div>01159 {
01160     HANDLE hData;
01161     LPSTR lpchClip;
01162     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a> cchAdded = 0;
01163     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a> clipLength;
01164 
01165     <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d9/client_2ntstubs_8c.html#a17">OpenClipboard</a>(ped-&gt;hwnd))
01166         <span class="keywordflow">goto</span> PasteExitNoCloseClip;
01167 
01168     <span class="keywordflow">if</span> (!(hData = <a class="code" href="../../d3/d8/client_8c.html#a42">GetClipboardData</a>(ped-&gt;fAnsi ? CF_TEXT : CF_UNICODETEXT)) ||
01169             (GlobalFlags(hData) == GMEM_INVALID_HANDLE)) {
01170         RIPMSG1(RIP_WARNING, <span class="stringliteral">"SLPasteText(): couldn't get a valid handle(%x)"</span>, hData);
01171         <span class="keywordflow">goto</span> PasteExit;
01172     }
01173 
01174     <a class="code" href="../../d6/d0/usercli_8h.html#a4">USERGLOBALLOCK</a>(hData, lpchClip);
01175     <span class="keywordflow">if</span> (lpchClip == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01176         RIPMSG1(RIP_WARNING, <span class="stringliteral">"SLPasteText(): USERGLOBALLOCK(%x) failed."</span>, hData);
01177         <span class="keywordflow">goto</span> PasteExit;
01178     }
01179 
01180     <span class="keywordflow">if</span> (ped-&gt;fAnsi) {
01181         LPSTR lpchClip2 = lpchClip;
01182 
01183         <span class="comment">/*</span>
01184 <span class="comment">         * Find the first carrage return or line feed. Just add text to that point.</span>
01185 <span class="comment">         */</span>
01186         clipLength = (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)<a class="code" href="../../d2/d7/regtest_8c.html#a2">strlen</a>(lpchClip);
01187         <span class="keywordflow">for</span> (cchAdded = 0; cchAdded &lt; clipLength; cchAdded++)
01188             <span class="keywordflow">if</span> (*lpchClip2++ == 0x0D)
01189                 <span class="keywordflow">break</span>;
01190 
01191     } <span class="keywordflow">else</span> { <span class="comment">// !fAnsi</span>
01192         LPWSTR lpwstrClip2 = (LPWSTR)lpchClip;
01193 
01194         <span class="comment">/*</span>
01195 <span class="comment">         * Find the first carrage return or line feed. Just add text to that point.</span>
01196 <span class="comment">         */</span>
01197         clipLength = (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)wcslen((LPWSTR)lpchClip);
01198         <span class="keywordflow">for</span> (cchAdded = 0; cchAdded &lt; clipLength; cchAdded++)
01199             <span class="keywordflow">if</span> (*lpwstrClip2++ == 0x0D)
01200                 <span class="keywordflow">break</span>;
01201     }
01202 
01203     <span class="comment">/*</span>
01204 <span class="comment">     * Insert the text (SLInsertText checks line length)</span>
01205 <span class="comment">     */</span>
01206     cchAdded = <a class="code" href="../../d6/d0/usercli_8h.html#a532">SLInsertText</a>(ped, lpchClip, cchAdded);
01207 
01208     <a class="code" href="../../d6/d0/usercli_8h.html#a1">USERGLOBALUNLOCK</a>(hData);
01209 
01210 PasteExit:
01211     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a129">NtUserCloseClipboard</a>();
01212 
01213 PasteExitNoCloseClip:
01214     <span class="keywordflow">return</span> (cchAdded);
01215 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a522" doxytag="usercli.h::SLReplaceSel" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void SLReplaceSel           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPSTR&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d4/editsl_8c-source.html#l01225">1225</a> of file <a class="el" href="../../d4/d4/editsl_8c-source.html">editsl.c</a>.
<p>
References <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00860">_IsWindowVisible()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02293">ECDeleteText()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l01977">ECEmptyUndo()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02492">ECGetEditDC()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02429">ECNotifyParent()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02524">ECReleaseEditDC()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l01955">ECSaveUndo()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00640">tagED::fAnsi</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01265">FWINABLE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00584">tagED::hwnd</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00277">IsWindow()</a>, <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00354">NotifyWinEvent()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00540">Pundo</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00585">tagED::pwnd</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l00737">SLDrawText()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l01074">SLInsertText()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l00932">SLScrollText()</a>, <a class="el" href="../../d7/d4/edslrare_8c-source.html#l00087">SLUndo()</a>, <a class="el" href="../../d2/d7/regtest_8c.html#a2">strlen()</a>, and <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>.
<p>
Referenced by <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01287">ECResultStrHandler()</a>, and <a class="el" href="../../d4/d4/editsl_8c-source.html#l02520">SLEditWndProc()</a>.
<p>
<pre class="fragment"><div>01228 {
01229     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> cchText;
01230 
01231     <span class="comment">//</span>
01232     <span class="comment">// Delete text, putting it into the clean undo buffer.</span>
01233     <span class="comment">//</span>
01234     <a class="code" href="../../d6/d0/usercli_8h.html#a444">ECEmptyUndo</a>(<a class="code" href="../../d6/d0/usercli_8h.html#a85">Pundo</a>(ped));
01235     <a class="code" href="../../d6/d0/usercli_8h.html#a447">ECDeleteText</a>(ped);
01236 
01237     <span class="comment">//</span>
01238     <span class="comment">// B#3356</span>
01239     <span class="comment">// Some apps do "clear" by selecting all of the text, then replacing it</span>
01240     <span class="comment">// with "", in which case SLInsertText() will return 0.  But that</span>
01241     <span class="comment">// doesn't mean failure...</span>
01242     <span class="comment">//</span>
01243     <span class="keywordflow">if</span> ( ped-&gt;fAnsi )
01244         cchText = <a class="code" href="../../d2/d7/regtest_8c.html#a2">strlen</a>(lpText);
01245     <span class="keywordflow">else</span>
01246         cchText = wcslen((LPWSTR)lpText);
01247 
01248     <span class="keywordflow">if</span> (cchText) {
01249         <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fFailed;
01250         <a class="code" href="../../d9/d8/structtagUNDO.html">UNDO</a> undo;
01251         HWND hwndSave;
01252 
01253         <span class="comment">//</span>
01254         <span class="comment">// Save undo buffer, but DO NOT CLEAR IT!</span>
01255         <span class="comment">//</span>
01256         <a class="code" href="../../d6/d0/usercli_8h.html#a445">ECSaveUndo</a>(<a class="code" href="../../d6/d0/usercli_8h.html#a85">Pundo</a>(ped), &amp;undo, FALSE);
01257 
01258         hwndSave = ped-&gt;hwnd;
01259         fFailed = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>) !<a class="code" href="../../d6/d0/usercli_8h.html#a532">SLInsertText</a>(ped, lpText, cchText);
01260         <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d9/client_2wow_8c.html#a11">IsWindow</a>(hwndSave))
01261             <span class="keywordflow">return</span>;
01262 
01263         <span class="keywordflow">if</span> (fFailed) {
01264             <span class="comment">//</span>
01265             <span class="comment">// UNDO the previous edit.</span>
01266             <span class="comment">//</span>
01267             <a class="code" href="../../d6/d0/usercli_8h.html#a445">ECSaveUndo</a>(&amp;undo, <a class="code" href="../../d6/d0/usercli_8h.html#a85">Pundo</a>(ped), FALSE);
01268             <a class="code" href="../../d6/d0/usercli_8h.html#a523">SLUndo</a>(ped);
01269             <span class="keywordflow">return</span>;
01270         }
01271     }
01272 
01273     <span class="comment">//</span>
01274     <span class="comment">// Success.  So update the display</span>
01275     <span class="comment">//</span>
01276     <a class="code" href="../../d6/d0/usercli_8h.html#a449">ECNotifyParent</a>(ped, EN_UPDATE);
01277 
01278     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d9/rtl_2wow_8c.html#a17">_IsWindowVisible</a>(ped-&gt;pwnd)) {
01279         HDC hdc;
01280 
01281         hdc = <a class="code" href="../../d6/d0/usercli_8h.html#a451">ECGetEditDC</a>(ped, FALSE);
01282 
01283         <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d0/usercli_8h.html#a530">SLScrollText</a>(ped, hdc))
01284             <a class="code" href="../../d6/d0/usercli_8h.html#a527">SLDrawText</a>(ped, hdc, 0);
01285 
01286         <a class="code" href="../../d6/d0/usercli_8h.html#a452">ECReleaseEditDC</a>(ped, hdc, FALSE);
01287     }
01288 
01289     <a class="code" href="../../d6/d0/usercli_8h.html#a449">ECNotifyParent</a>(ped, EN_CHANGE);
01290 
01291     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a405">FWINABLE</a>()) {
01292         <a class="code" href="../../d8/d9/client_2ntstubs_8c.html#a12">NotifyWinEvent</a>(EVENT_OBJECT_VALUECHANGE, ped-&gt;hwnd, OBJID_CLIENT, INDEXID_CONTAINER);
01293     }
01294 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a530" doxytag="usercli.h::SLScrollText" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL SLScrollText           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HDC&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d4/editsl_8c-source.html#l00932">932</a> of file <a class="el" href="../../d4/d4/editsl_8c-source.html">editsl.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00661">tagED::cbChar</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00557">tagED::cch</a>, <a class="el" href="../../d4/d5/rect_8c-source.html#l00052">CopyInflateRect()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l04133">ECAdjustIch()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l04162">ECAdjustIchNext()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l01281">ECCchInWidth()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l01412">ECGetBrush()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00052">ECLock()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00086">ECUnlock()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l03295">tagLPKEDITCALLOUT::EditHScroll</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00640">tagED::fAnsi</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00609">tagED::fAutoHScroll</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00611">tagED::fDBCS</a>, <a class="el" href="../../d0/d1/rtl_2draw_8c-source.html#l00061">FillRect()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00664">tagED::format</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00626">ICH</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00564">tagED::ichCaret</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00570">tagED::ichScreenStart</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00702">tagED::pLpkEditCallout</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00586">tagED::rcFmt</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l00737">SLDrawText()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d7/d9/usercli_8h-source.html#l00696">tagED::wLeftMargin</a>.
<p>
Referenced by <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01337">ECImeComposition()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l01304">SLChar()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l01529">SLKeyDown()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l02098">SLMouseMotion()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l02467">SLPaste()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l01225">SLReplaceSel()</a>, and <a class="el" href="../../d4/d4/editsl_8c-source.html#l00283">SLSetSelection()</a>.
<p>
<pre class="fragment"><div>00935 {
00936     PSTR pTextScreenStart;
00937     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a> scrollAmount;
00938     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a> newScreenStartX = ped-&gt;ichScreenStart;
00939     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a> cch;
00940     BOOLEAN fAdjustNext = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00941 
00942     <span class="keywordflow">if</span> (!ped-&gt;fAutoHScroll)
00943         <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00944 
00945     <span class="keywordflow">if</span> (ped-&gt;pLpkEditCallout) {
00946         <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fChanged;
00947 
00948         <span class="comment">// With complex script glyph reordering, use lpk to do horz scroll</span>
00949         pTextScreenStart = <a class="code" href="../../d6/d0/usercli_8h.html#a433">ECLock</a>(ped);
00950         fChanged = ped-&gt;pLpkEditCallout-&gt;EditHScroll(ped, hdc, pTextScreenStart);
00951         <a class="code" href="../../d6/d0/usercli_8h.html#a434">ECUnlock</a>(ped);
00952 
00953         <span class="keywordflow">if</span> (fChanged) {
00954             <a class="code" href="../../d6/d0/usercli_8h.html#a527">SLDrawText</a>(ped, hdc, 0);
00955         }
00956 
00957         <span class="keywordflow">return</span> fChanged;
00958     }
00959 
00960     <span class="comment">/*</span>
00961 <span class="comment">     * Calculate the new starting screen position</span>
00962 <span class="comment">     */</span>
00963     <span class="keywordflow">if</span> (ped-&gt;ichCaret &lt;= ped-&gt;ichScreenStart) {
00964 
00965         <span class="comment">/*</span>
00966 <span class="comment">         * Caret is to the left of the starting text on the screen we must</span>
00967 <span class="comment">         * scroll the text backwards to bring it into view. Watch out when</span>
00968 <span class="comment">         * subtracting unsigned numbers when we have the possibility of going</span>
00969 <span class="comment">         * negative.</span>
00970 <span class="comment">         */</span>
00971         pTextScreenStart = <a class="code" href="../../d6/d0/usercli_8h.html#a433">ECLock</a>(ped);
00972 
00973         scrollAmount = <a class="code" href="../../d6/d0/usercli_8h.html#a443">ECCchInWidth</a>(ped, hdc, (LPSTR)pTextScreenStart,
00974                 ped-&gt;ichCaret, (ped-&gt;rcFmt.right - ped-&gt;rcFmt.left) / 4, FALSE);
00975 
00976         newScreenStartX = ped-&gt;ichCaret - scrollAmount;
00977         <a class="code" href="../../d6/d0/usercli_8h.html#a434">ECUnlock</a>(ped);
00978     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ped-&gt;ichCaret != ped-&gt;ichScreenStart) {
00979         pTextScreenStart = <a class="code" href="../../d6/d0/usercli_8h.html#a433">ECLock</a>(ped);
00980         pTextScreenStart += ped-&gt;ichScreenStart * ped-&gt;cbChar;
00981 
00982         cch = <a class="code" href="../../d6/d0/usercli_8h.html#a443">ECCchInWidth</a>(ped, hdc, (LPSTR)pTextScreenStart,
00983                 ped-&gt;ichCaret - ped-&gt;ichScreenStart,
00984                 ped-&gt;rcFmt.right - ped-&gt;rcFmt.left, FALSE);
00985 
00986         <span class="keywordflow">if</span> (cch &lt; ped-&gt;ichCaret - ped-&gt;ichScreenStart) {
00987             fAdjustNext = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00988 
00989             <span class="comment">/*</span>
00990 <span class="comment">             * Scroll Forward 1/4 -- if that leaves some empty space</span>
00991 <span class="comment">             * at the end, scroll back enough to fill the space</span>
00992 <span class="comment">             */</span>
00993             newScreenStartX = ped-&gt;ichCaret - (3 * cch / 4);
00994 
00995             cch = <a class="code" href="../../d6/d0/usercli_8h.html#a443">ECCchInWidth</a>(ped, hdc, (LPSTR)pTextScreenStart,
00996                     ped-&gt;cch - ped-&gt;ichScreenStart,
00997                     ped-&gt;rcFmt.right - ped-&gt;rcFmt.left, FALSE);
00998 
00999             <span class="keywordflow">if</span> (newScreenStartX &gt; (ped-&gt;cch - cch))
01000                 newScreenStartX = ped-&gt;cch - cch;
01001         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ped-&gt;format != ES_LEFT) {
01002 
01003             cch = <a class="code" href="../../d6/d0/usercli_8h.html#a443">ECCchInWidth</a>(ped, hdc, (LPSTR)pTextScreenStart,
01004                     ped-&gt;cch - ped-&gt;ichScreenStart,
01005                     ped-&gt;rcFmt.right - ped-&gt;rcFmt.left, FALSE);
01006 
01007            <span class="comment">/*</span>
01008 <span class="comment">            * Scroll the text hidden behind the left border back</span>
01009 <span class="comment">            * into view.</span>
01010 <span class="comment">            */</span>
01011            <span class="keywordflow">if</span> (ped-&gt;ichScreenStart == ped-&gt;cch - cch) {
01012 
01013                pTextScreenStart -= ped-&gt;ichScreenStart * ped-&gt;cbChar;
01014                cch = <a class="code" href="../../d6/d0/usercli_8h.html#a443">ECCchInWidth</a>(ped, hdc, (LPSTR)pTextScreenStart,
01015                        ped-&gt;cch, ped-&gt;rcFmt.right - ped-&gt;rcFmt.left, FALSE);
01016 
01017                newScreenStartX = ped-&gt;cch - cch;
01018            }
01019         }
01020 
01021         <a class="code" href="../../d6/d0/usercli_8h.html#a434">ECUnlock</a>(ped);
01022     }
01023 
01024     <span class="comment">//</span>
01025     <span class="comment">// Adjust newScreenStartX</span>
01026     <span class="comment">//</span>
01027     <span class="keywordflow">if</span> (ped-&gt;fAnsi &amp;&amp; ped-&gt;fDBCS) {
01028         newScreenStartX = (fAdjustNext ? <a class="code" href="../../d8/d4/editec_8c.html#a58">ECAdjustIchNext</a> : <a class="code" href="../../d8/d4/editec_8c.html#a57">ECAdjustIch</a>)(ped,
01029                                                                         <a class="code" href="../../d6/d0/usercli_8h.html#a433">ECLock</a>(ped),
01030                                                                         newScreenStartX);
01031         <a class="code" href="../../d6/d0/usercli_8h.html#a434">ECUnlock</a>(ped);
01032     }
01033 
01034     <span class="keywordflow">if</span> (ped-&gt;ichScreenStart != newScreenStartX) {
01035         <span class="comment">// Check if we have to wipe out the left margin</span>
01036         <span class="keywordflow">if</span> (ped-&gt;wLeftMargin &amp;&amp; (ped-&gt;ichScreenStart == 0)) {
01037             RECT   rc;
01038             HBRUSH hBrush;
01039 
01040             hBrush = <a class="code" href="../../d6/d0/usercli_8h.html#a480">ECGetBrush</a>(ped, hdc);
01041 
01042             <a class="code" href="../../d3/d6/rect_8c.html#a2">CopyInflateRect</a>(&amp;rc, &amp;ped-&gt;rcFmt, 0, 1);
01043             rc.right = rc.left;
01044             rc.left -= ped-&gt;wLeftMargin;
01045 
01046             <a class="code" href="../../d9/d1/rtl_2draw_8c.html#a3">FillRect</a>(hdc, &amp;rc, hBrush);
01047         }
01048 
01049         ped-&gt;ichScreenStart = newScreenStartX;
01050         <a class="code" href="../../d6/d0/usercli_8h.html#a527">SLDrawText</a>(ped, hdc, 0);
01051 
01052         <span class="comment">// Caret pos is set by SLDrawText().</span>
01053         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01054     }
01055 
01056     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01057 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a524" doxytag="usercli.h::SLSetCaretPosition" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void SLSetCaretPosition           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HDC&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d4/editsl_8c-source.html#l00126">126</a> of file <a class="el" href="../../d4/d4/editsl_8c-source.html">editsl.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l00677">tagED::aveCharWidth</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00680">tagED::cxSysCharWidth</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01085">ECImmSetCompositionWindow()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00635">tagED::fCaretHidden</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00602">tagED::fFocus</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02537">fpImmIsIME</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00704">tagED::iCaretOffset</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00564">tagED::ichCaret</a>, <a class="el" href="../../d9/d5/sertl_8c-source.html#l00332">max</a>, <a class="el" href="../../d6/d3/acpitabl_8h-source.html#l00366">min</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01571">NtUserSetCaretPos</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00702">tagED::pLpkEditCallout</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00586">tagED::rcFmt</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l00182">SLIchToLeftXPos()</a>, and <a class="el" href="../../d7/d9/usercli_8h-source.html#l01124">THREAD_HKL</a>.
<p>
Referenced by <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01225">ECSetCaretHandler()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l00395">SLChangeSelection()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l00737">SLDrawText()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l02520">SLEditWndProc()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l02341">SLSetFocus()</a>, and <a class="el" href="../../d4/d4/editsl_8c-source.html#l00283">SLSetSelection()</a>.
<p>
<pre class="fragment"><div>00129 {
00130     <span class="keywordtype">int</span> xPosition;
00131 
00132     <span class="comment">/*</span>
00133 <span class="comment">     * We will only position the caret if we have the focus since we don't want</span>
00134 <span class="comment">     * to move the caret while another window could own it.</span>
00135 <span class="comment">     */</span>
00136     <span class="keywordflow">if</span> (!ped-&gt;fFocus)
00137         <span class="keywordflow">return</span>;
00138 
00139     <span class="keywordflow">if</span> (ped-&gt;fCaretHidden) {
00140         <a class="code" href="../../d6/d0/usercli_8h.html#a226">NtUserSetCaretPos</a>(-20000, -20000);
00141         <span class="keywordflow">return</span>;
00142     }
00143 
00144     xPosition = <a class="code" href="../../d6/d0/usercli_8h.html#a525">SLIchToLeftXPos</a>(ped, hdc, ped-&gt;ichCaret);
00145 
00146     <span class="comment">/*</span>
00147 <span class="comment">     * Don't let caret go out of bounds of edit control if there is too much</span>
00148 <span class="comment">     * text.</span>
00149 <span class="comment">     */</span>
00150     <span class="keywordflow">if</span> (ped-&gt;pLpkEditCallout) {
00151         xPosition += ped-&gt;iCaretOffset;
00152         xPosition = <a class="code" href="../../d8/d6/sertl_8c.html#a1">max</a>(xPosition , 0);
00153         xPosition = <a class="code" href="../../d5/d4/acpitabl_8h.html#a69">min</a>(xPosition, ped-&gt;rcFmt.right - 1 -
00154             ((ped-&gt;cxSysCharWidth &gt; ped-&gt;aveCharWidth) ? 1 : 2));
00155     } <span class="keywordflow">else</span> {
00156         xPosition = <a class="code" href="../../d5/d4/acpitabl_8h.html#a69">min</a>(xPosition, ped-&gt;rcFmt.right -
00157             ((ped-&gt;cxSysCharWidth &gt; ped-&gt;aveCharWidth) ? 1 : 2));
00158     }
00159 
00160     <a class="code" href="../../d6/d0/usercli_8h.html#a226">NtUserSetCaretPos</a>(xPosition, ped-&gt;rcFmt.top);
00161 
00162     <span class="comment">// FE_IME SLSetCaretPosition - ECImmSetCompostionWindow( CFS_POINT )</span>
00163     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a312">fpImmIsIME</a>(<a class="code" href="../../d6/d0/usercli_8h.html#a151">THREAD_HKL</a>())) {
00164         <a class="code" href="../../d6/d0/usercli_8h.html#a471">ECImmSetCompositionWindow</a>(ped, xPosition, ped-&gt;rcFmt.top);
00165     }
00166 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a540" doxytag="usercli.h::SLSetFocus" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void SLSetFocus           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d4/editsl_8c-source.html#l02341">2341</a> of file <a class="el" href="../../d4/d4/editsl_8c-source.html">editsl.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l01051">ECGetCaretWidth</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02492">ECGetEditDC()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02429">ECNotifyParent()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02524">ECReleaseEditDC()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l03301">tagLPKEDITCALLOUT::EditCreateCaret</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00602">tagED::fFocus</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00610">tagED::fNoHideSel</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00584">tagED::hwnd</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00678">tagED::lineHeight</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06550">NtUserCreateCaret()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06219">NtUserShowCaret()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00702">tagED::pLpkEditCallout</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l00737">SLDrawText()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l00126">SLSetCaretPosition()</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d4/d4/editsl_8c-source.html#l02520">SLEditWndProc()</a>.
<p>
<pre class="fragment"><div>02343 {
02344     HDC hdc;
02345 
02346     <span class="keywordflow">if</span> (!ped-&gt;fFocus) {
02347 
02348         ped-&gt;fFocus = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>; <span class="comment">/* Set focus */</span>
02349 
02350         <span class="comment">/*</span>
02351 <span class="comment">         * We don't want to muck with the caret since it isn't created.</span>
02352 <span class="comment">         */</span>
02353         hdc = <a class="code" href="../../d6/d0/usercli_8h.html#a451">ECGetEditDC</a>(ped, TRUE);
02354 
02355         <span class="comment">/*</span>
02356 <span class="comment">         * Show the current selection if necessary.</span>
02357 <span class="comment">         */</span>
02358         <span class="keywordflow">if</span> (!ped-&gt;fNoHideSel)
02359             <a class="code" href="../../d6/d0/usercli_8h.html#a527">SLDrawText</a>(ped, hdc, 0);
02360 
02361         <span class="comment">/*</span>
02362 <span class="comment">         * Create the caret</span>
02363 <span class="comment">         */</span>
02364         <span class="keywordflow">if</span> (ped-&gt;pLpkEditCallout) {
02365             ped-&gt;pLpkEditCallout-&gt;EditCreateCaret (ped, hdc, <a class="code" href="../../d6/d0/usercli_8h.html#a149">ECGetCaretWidth</a>(),
02366                                                    ped-&gt;lineHeight, 0);
02367         }
02368         <span class="keywordflow">else</span> {
02369             <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a247">NtUserCreateCaret</a>(ped-&gt;hwnd, (HBITMAP)NULL,
02370                     <a class="code" href="../../d6/d0/usercli_8h.html#a149">ECGetCaretWidth</a>(),
02371                     ped-&gt;lineHeight );
02372         }
02373         <a class="code" href="../../d6/d0/usercli_8h.html#a524">SLSetCaretPosition</a>(ped, hdc);
02374         <a class="code" href="../../d6/d0/usercli_8h.html#a452">ECReleaseEditDC</a>(ped, hdc, TRUE);
02375         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a234">NtUserShowCaret</a>(ped-&gt;hwnd);
02376 
02377     }
02378 
02379     <span class="comment">/*</span>
02380 <span class="comment">     * Notify parent we have the focus</span>
02381 <span class="comment">     */</span>
02382     <a class="code" href="../../d6/d0/usercli_8h.html#a449">ECNotifyParent</a>(ped, EN_SETFOCUS);
02383 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a531" doxytag="usercli.h::SLSetSelection" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void SLSetSelection           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d1/d0/inc_2user_8h.html#a949">ICH</a>&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d4/editsl_8c-source.html#l00283">283</a> of file <a class="el" href="../../d4/d4/editsl_8c-source.html">editsl.c</a>.
<p>
References <a class="el" href="../../d9/d3/editec_8c-source.html#l02492">ECGetEditDC()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02524">ECReleaseEditDC()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00564">tagED::ichCaret</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00563">tagED::ichMaxSel</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l00395">SLChangeSelection()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l00932">SLScrollText()</a>, and <a class="el" href="../../d4/d4/editsl_8c-source.html#l00126">SLSetCaretPosition()</a>.
<p>
Referenced by <a class="el" href="../../d4/d4/editsl_8c-source.html#l02520">SLEditWndProc()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l02394">SLKillFocus()</a>, and <a class="el" href="../../d7/d4/edslrare_8c-source.html#l00087">SLUndo()</a>.
<p>
<pre class="fragment"><div>00287 {
00288     HDC hdc = <a class="code" href="../../d6/d0/usercli_8h.html#a451">ECGetEditDC</a>(ped, FALSE );
00289 
00290     <span class="keywordflow">if</span> (ichSelStart == 0xFFFFFFFF) {
00291 
00292         <span class="comment">/*</span>
00293 <span class="comment">         * Set no selection if we specify -1</span>
00294 <span class="comment">         */</span>
00295         ichSelStart = ichSelEnd = ped-&gt;ichCaret;
00296     }
00297 
00298     <span class="comment">/*</span>
00299 <span class="comment">     * Bounds ichSelStart, ichSelEnd are checked in SLChangeSelection...</span>
00300 <span class="comment">     */</span>
00301     <a class="code" href="../../d6/d0/usercli_8h.html#a526">SLChangeSelection</a>(ped, hdc, ichSelStart, ichSelEnd);
00302 
00303     <span class="comment">/*</span>
00304 <span class="comment">     * Put the caret at the end of the selected text</span>
00305 <span class="comment">     */</span>
00306     ped-&gt;ichCaret = ped-&gt;ichMaxSel;
00307 
00308     <a class="code" href="../../d6/d0/usercli_8h.html#a524">SLSetCaretPosition</a>(ped, hdc);
00309 
00310     <span class="comment">/*</span>
00311 <span class="comment">     * We may need to scroll the text to bring the caret into view...</span>
00312 <span class="comment">     */</span>
00313     <a class="code" href="../../d6/d0/usercli_8h.html#a530">SLScrollText</a>(ped, hdc);
00314 
00315     <a class="code" href="../../d6/d0/usercli_8h.html#a452">ECReleaseEditDC</a>(ped, hdc, FALSE);
00316 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a523" doxytag="usercli.h::SLUndo" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL SLUndo           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/structtagED.html">PED</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d4/edslrare_8c-source.html#l00087">87</a> of file <a class="el" href="../../d7/d4/edslrare_8c-source.html">edslrare.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02293">ECDeleteText()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02679">ECInvalidateClient()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02429">ECNotifyParent()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d4/d7/winmgrc_8c-source.html#l00052">FChildVisible()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01265">FWINABLE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00584">tagED::hwnd</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00626">ICH</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00277">IsWindow()</a>, <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00354">NotifyWinEvent()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d0/d7/halvprnt_8c-source.html#l00031">PBYTE</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l01074">SLInsertText()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l00283">SLSetSelection()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00526">UNDO_DELETE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00525">UNDO_INSERT</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00524">UNDO_NONE</a>, and <a class="el" href="../../d7/d9/usercli_8h-source.html#l00124">UserGlobalFree</a>.
<p>
Referenced by <a class="el" href="../../d4/d4/editsl_8c-source.html#l02520">SLEditWndProc()</a>, and <a class="el" href="../../d4/d4/editsl_8c-source.html#l01225">SLReplaceSel()</a>.
<p>
<pre class="fragment"><div>00089 {
00090     <a class="code" href="../../d9/d7/halvprnt_8c.html#a1">PBYTE</a> hDeletedText = ped-&gt;hDeletedText;
00091     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fDelete = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>)(ped-&gt;undoType &amp; <a class="code" href="../../d6/d0/usercli_8h.html#a84">UNDO_DELETE</a>);
00092     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a> cchDeleted = ped-&gt;cchDeleted;
00093     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a> ichDeleted = ped-&gt;ichDeleted;
00094     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fUpdate = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00095 
00096     <span class="keywordflow">if</span> (ped-&gt;undoType == <a class="code" href="../../d6/d0/usercli_8h.html#a82">UNDO_NONE</a>) {
00097 
00098         <span class="comment">/*</span>
00099 <span class="comment">         * No undo...</span>
00100 <span class="comment">         */</span>
00101         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00102     }
00103 
00104     ped-&gt;hDeletedText = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00105     ped-&gt;cchDeleted = 0;
00106     ped-&gt;ichDeleted = (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a>)-1;
00107     ped-&gt;undoType &amp;= ~<a class="code" href="../../d6/d0/usercli_8h.html#a84">UNDO_DELETE</a>;
00108 
00109     <span class="keywordflow">if</span> (ped-&gt;undoType == <a class="code" href="../../d6/d0/usercli_8h.html#a83">UNDO_INSERT</a>) {
00110         ped-&gt;undoType = <a class="code" href="../../d6/d0/usercli_8h.html#a82">UNDO_NONE</a>;
00111 
00112         <span class="comment">/*</span>
00113 <span class="comment">         * Set the selection to the inserted text</span>
00114 <span class="comment">         */</span>
00115         <a class="code" href="../../d6/d0/usercli_8h.html#a531">SLSetSelection</a>(ped, ped-&gt;ichInsStart, ped-&gt;ichInsEnd);
00116         ped-&gt;ichInsStart = ped-&gt;ichInsEnd = (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a980">ICH</a>)-1;
00117 
00118 <span class="preprocessor">#ifdef NEVER</span>
00119 <span class="preprocessor"></span>
00120         <span class="comment">/*</span>
00121 <span class="comment">         * Now send a backspace to deleted and save it in the undo buffer...</span>
00122 <span class="comment">         */</span>
00123         SLCharHandler(pped, VK_BACK);
00124         fUpdate = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00125 <span class="preprocessor">#else</span>
00126 <span class="preprocessor"></span>
00127         <span class="comment">/*</span>
00128 <span class="comment">         * Delete the selected text and save it in undo buff.</span>
00129 <span class="comment">         * Call ECDeleteText() instead of sending a VK_BACK message</span>
00130 <span class="comment">         * which results in an EN_UPDATE notification send even before</span>
00131 <span class="comment">         * we insert the deleted chars. This results in Bug #6610.</span>
00132 <span class="comment">         * Fix for Bug #6610 -- SANKAR -- 04/19/91 --</span>
00133 <span class="comment">         */</span>
00134         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a447">ECDeleteText</a>(ped)) {
00135 
00136             <span class="comment">/*</span>
00137 <span class="comment">             * Text was deleted -- flag for update and clear selection</span>
00138 <span class="comment">             */</span>
00139             fUpdate = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00140             <a class="code" href="../../d6/d0/usercli_8h.html#a531">SLSetSelection</a>(ped, ichDeleted, ichDeleted);
00141         }
00142 <span class="preprocessor">#endif</span>
00143 <span class="preprocessor"></span>    }
00144 
00145     <span class="keywordflow">if</span> (fDelete) {
00146         HWND hwndSave = ped-&gt;hwnd; <span class="comment">// Used for validation.</span>
00147 
00148         <span class="comment">/*</span>
00149 <span class="comment">         * Insert deleted chars. Set the selection to the inserted text.</span>
00150 <span class="comment">         */</span>
00151         <a class="code" href="../../d6/d0/usercli_8h.html#a531">SLSetSelection</a>(ped, ichDeleted, ichDeleted);
00152         <a class="code" href="../../d6/d0/usercli_8h.html#a532">SLInsertText</a>(ped, hDeletedText, cchDeleted);
00153         <a class="code" href="../../d6/d0/usercli_8h.html#a2">UserGlobalFree</a>(hDeletedText);
00154         <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d9/client_2wow_8c.html#a11">IsWindow</a>(hwndSave))
00155             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00156         <a class="code" href="../../d6/d0/usercli_8h.html#a531">SLSetSelection</a>(ped, ichDeleted, ichDeleted + cchDeleted);
00157         fUpdate = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00158     }
00159 
00160     <span class="keywordflow">if</span> (fUpdate) {
00161         <span class="comment">/*</span>
00162 <span class="comment">         * If we have something to update, send EN_UPDATE before and</span>
00163 <span class="comment">         * EN_CHANGE after the actual update.</span>
00164 <span class="comment">         * A part of the fix for Bug #6610 -- SANKAR -- 04/19/91 --</span>
00165 <span class="comment">         */</span>
00166         <a class="code" href="../../d6/d0/usercli_8h.html#a449">ECNotifyParent</a>(ped, EN_UPDATE);
00167 
00168         <span class="keywordflow">if</span> (<a class="code" href="../../d3/d8/winmgrc_8c.html#a8">FChildVisible</a>(ped-&gt;hwnd)) {
00169 <span class="comment">// JimA changed this to ECInvalidateClient(ped, FALSE) Nov 1994</span>
00170 <span class="comment">//            GetClientRect(ped-&gt;hwnd, &amp;rcEdit);</span>
00171 <span class="comment">//            if (ped-&gt;fBorder &amp;&amp; rcEdit.right - rcEdit.left &amp;&amp; rcEdit.bottom - rcEdit.top) {</span>
00172 <span class="comment">//</span>
00173 <span class="comment">//                /*</span>
00174 <span class="comment">//                 * Don't invalidate the border so that we avoid flicker</span>
00175 <span class="comment">//                 */</span>
00176 <span class="comment">//                InflateRect(&amp;rcEdit, -1, -1);</span>
00177 <span class="comment">//            }</span>
00178 <span class="comment">//            NtUserInvalidateRect(ped-&gt;hwnd, &amp;rcEdit, FALSE);</span>
00179             <a class="code" href="../../d6/d0/usercli_8h.html#a436">ECInvalidateClient</a>(ped, FALSE);
00180         }
00181 
00182         <a class="code" href="../../d6/d0/usercli_8h.html#a449">ECNotifyParent</a>(ped, EN_CHANGE);
00183 
00184         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a405">FWINABLE</a>()) {
00185             <a class="code" href="../../d8/d9/client_2ntstubs_8c.html#a12">NotifyWinEvent</a>(EVENT_OBJECT_VALUECHANGE, ped-&gt;hwnd, OBJID_CLIENT, INDEXID_CONTAINER);
00186         }
00187     }
00188 
00189     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00190 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a661" doxytag="usercli.h::SmartStretchDIBits" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int SmartStretchDIBits           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HDC&nbsp;</td>
          <td class="mdname" nowrap> <em>hdc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>xD</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>yD</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>dxD</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>dyD</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>xS</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>yS</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>dxS</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>dyS</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a5">LPVOID</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpBits</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPBITMAPINFO&nbsp;</td>
          <td class="mdname" nowrap> <em>lpbi</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>wUsage</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>rop</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d6/cldib_8c-source.html#l00084">84</a> of file <a class="el" href="../../d8/d6/cldib_8c-source.html">cldib.c</a>.
<p>
References <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">LPVOID</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d8/d6/cldib_8c-source.html#l00185">ScaleDIB()</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00958">UserLocalAlloc</a>, and <a class="el" href="../../d7/d9/usercli_8h-source.html#l00960">UserLocalFree</a>.
<p>
Referenced by <a class="el" href="../../d5/d8/clres_8c-source.html#l02950">BitmapFromDIB()</a>.
<p>
<pre class="fragment"><div>00098 {
00099     LPBYTE             lpBitsNew;
00100     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>               bpp;
00101     RGBQUAD            rgb;
00102     LPBITMAPINFOHEADER lpbiNew = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00103 
00104     <span class="keywordtype">int</span> i;
00105 
00106     <span class="comment">/*</span>
00107 <span class="comment">     * thunk to USER32</span>
00108 <span class="comment">     */</span>
00109     UserAssert(rop == SRCCOPY);
00110     UserAssert(wUsage == DIB_RGB_COLORS);
00111     UserAssert(xS == 0 &amp;&amp; yS == 0);
00112 
00113     <span class="keywordflow">if</span> ((GetDIBColorTable(hdc, 0, 1, &amp;rgb) != 1) &amp;&amp;
00114         (dxD != dxS || dyD != dyS) &amp;&amp;           <span class="comment">// 1:1 stretch just call GDI</span>
00115         (dxD &gt;= dxS/2) &amp;&amp; (dyD &gt;= dyS/2) &amp;&amp;     <span class="comment">// less than 1:2 shrink call GDI</span>
00116         (lpbi-&gt;bmiHeader.biCompression == 0) &amp;&amp; <span class="comment">// must be un-compressed</span>
00117         (lpbi-&gt;bmiHeader.biBitCount == 4 ||     <span class="comment">// input must be 4,8,24</span>
00118          lpbi-&gt;bmiHeader.biBitCount == 8 ||
00119          lpbi-&gt;bmiHeader.biBitCount == 24)) {
00120 
00121         bpp = GetDeviceCaps(hdc, BITSPIXEL) * GetDeviceCaps(hdc, PLANES);
00122 
00123         bpp = (bpp &gt; 8 ? 24 : 8);
00124 
00125         lpbiNew = (LPBITMAPINFOHEADER)<a class="code" href="../../d6/d0/usercli_8h.html#a136">UserLocalAlloc</a>(0,
00126                  <span class="keyword">sizeof</span>(BITMAPINFOHEADER) + (256 * <span class="keyword">sizeof</span>(RGBQUAD)) +
00127                  (UINT)((((dxD * bpp) / 8) + 3) &amp; ~3) * (UINT)dyD);
00128 
00129         <span class="keywordflow">if</span> (lpbiNew) {
00130 
00131             *lpbiNew            = lpbi-&gt;bmiHeader;
00132             lpbiNew-&gt;biWidth    = dxD;
00133             lpbiNew-&gt;biHeight   = dyD;
00134             lpbiNew-&gt;biBitCount = (WORD)bpp;
00135             lpBitsNew = (LPBYTE)lpbiNew          +
00136                         <span class="keyword">sizeof</span>(BITMAPINFOHEADER) +
00137                         (256 * <span class="keyword">sizeof</span>(RGBQUAD));
00138 
00139             <span class="keywordflow">if</span> (<a class="code" href="../../d7/d7/cldib_8c.html#a17">ScaleDIB</a>((LPBITMAPINFOHEADER)lpbi,
00140                          (LPVOID)lpBits,
00141                          lpbiNew,
00142                          lpBitsNew)) {
00143 
00144                 lpbi   = (LPBITMAPINFO)lpbiNew;
00145                 lpBits = lpBitsNew;
00146                 dxS    = dxD;
00147                 dyS    = dyD;
00148             }
00149         }
00150     }
00151 
00152     i = StretchDIBits(hdc,
00153                       xD,
00154                       yD,
00155                       dxD,
00156                       dyD,
00157                       xS,
00158                       yS,
00159                       dxS,
00160                       dyS,
00161                       lpBits,
00162                       lpbi,
00163                       wUsage,
00164                       rop);
00165 
00166     <span class="keywordflow">if</span> (lpbiNew)
00167         <a class="code" href="../../d6/d0/usercli_8h.html#a138">UserLocalFree</a>(lpbiNew);
00168 
00169     <span class="keywordflow">return</span> i;
00170 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a584" doxytag="usercli.h::StaticWndProcA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LRESULT APIENTRY StaticWndProcA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>msg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d4/statctl_8c-source.html#l01173">1173</a> of file <a class="el" href="../../d6/d4/statctl_8c-source.html">statctl.c</a>.
<p>
References <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d6/d4/statctl_8c-source.html#l00840">StaticWndProcWorker()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d5/d9/immcli_8h-source.html#l00120">ValidateHwnd</a>.
<p>
Referenced by <a class="el" href="../../d7/d7/clinit_8c-source.html#l01219">ClientThreadSetup()</a>.
<p>
<pre class="fragment"><div>01178 {
01179     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwnd;
01180 
01181     <span class="keywordflow">if</span> ((pwnd = <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(hwnd)) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01182         <span class="keywordflow">return</span> (0<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>);
01183     }
01184 
01185     <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a613">StaticWndProcWorker</a>(pwnd, message, wParam, lParam, TRUE);
01186 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a585" doxytag="usercli.h::StaticWndProcW" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LRESULT APIENTRY StaticWndProcW           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>msg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d4/statctl_8c-source.html#l01188">1188</a> of file <a class="el" href="../../d6/d4/statctl_8c-source.html">statctl.c</a>.
<p>
References <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d6/d4/statctl_8c-source.html#l00840">StaticWndProcWorker()</a>, and <a class="el" href="../../d5/d9/immcli_8h-source.html#l00120">ValidateHwnd</a>.
<p>
Referenced by <a class="el" href="../../d7/d7/clinit_8c-source.html#l01219">ClientThreadSetup()</a>, and <a class="el" href="../../d7/d7/clinit_8c-source.html#l00378">RW_RegisterControls()</a>.
<p>
<pre class="fragment"><div>01193 {
01194     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwnd;
01195 
01196     <span class="keywordflow">if</span> ((pwnd = <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(hwnd)) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01197         <span class="keywordflow">return</span> (0<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>);
01198     }
01199 
01200     <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a613">StaticWndProcWorker</a>(pwnd, message, wParam, lParam, FALSE);
01201 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a613" doxytag="usercli.h::StaticWndProcWorker" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LRESULT StaticWndProcWorker           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>msg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>fAnsi</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d4/statctl_8c-source.html#l00840">840</a> of file <a class="el" href="../../d6/d4/statctl_8c-source.html">statctl.c</a>.
<p>
References <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l01171">_DefSetText()</a>, <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00924">_GetClientRect()</a>, <a class="el" href="../../d2/d0/bench_8c-source.html#l00048">APIENTRY</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01738">tagCLS::atomClassName</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01297">tagSERVERINFO::atomSysClass</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d0/d7/halvprnt_8c-source.html#l00031">BYTE</a>, <a class="el" href="../../d2/d0/bench_8c-source.html#l00050">CHAR</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00868">tagSTAT::cicur</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02170">CURSOR_CALLFROMCLIENT</a>, <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00574">DefWindowProcWorker()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00865">tagSTAT::fDeleteIt</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00836">FNID_CLEANEDUP_BIT</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00800">FNID_STATIC</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00870">tagSTAT::fPaintKbdCuesOnly</a>, <a class="el" href="../../d2/d1/rtlinit_8c-source.html#l00344">FreeLookasideEntry()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00144">FWINDOWMSG</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00051">gpsi</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00864">tagSTAT::hFont</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00867">tagSTAT::hImage</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01515">HWq</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00349">ICLS_DIALOG</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00308">IDSYS_STANIMATE</a>, <a class="el" href="../../d6/d4/statctl_8c-source.html#l00031">IMAGE_STMMAX</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00270">INITCONTROLLOOKASIDE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00591">IS_IME_ENABLED</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00598">IS_MIDEAST_ENABLED</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l00047">IsValidImage</a>, <a class="el" href="../../d3/d7/rtl_2winmgr_8c-source.html#l00537">IsVisible()</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d6/d8/ntrtlp_8h-source.html#l00183">LOBYTE</a>, <a class="el" href="../../d6/d5/chartran_8c-source.html#l00191">MBToWCSEx()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l07752">NtUserAlterWindowStyle()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06520">NtUserBeginPaint()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04033">NtUserDestroyCursor()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06575">NtUserEndPaint()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05330">NtUserInvalidateRect()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05388">NtUserKillTimer()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l07715">NtUserSetWindowFNID()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l02180">NtUserSetWindowPos()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00210">REBASEALWAYS</a>, <a class="el" href="../../d6/d4/statctl_8c-source.html#l00054">rgstk</a>, <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00270">SendMessageWorker()</a>, <a class="el" href="../../d9/d3/w32_2ntuser_2kernel_2random_8c-source.html#l00083">SetWindowState()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02513">SFNOTIFY</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02517">SFSUNKEN</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02511">SFTYPEMASK</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00862">tagSTAT::spwnd</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01745">tagWND::spwndParent</a>, <a class="el" href="../../d6/d0/usercli_8h.html#a371">STAT</a>, <a class="el" href="../../d6/d4/statctl_8c-source.html#l00076">StaticLookaside</a>, <a class="el" href="../../d6/d4/statctl_8c-source.html#l00812">StaticNotifyParent()</a>, <a class="el" href="../../d6/d4/statctl_8c-source.html#l00784">StaticRepaint()</a>, <a class="el" href="../../d6/d4/statctl_8c-source.html#l00045">STK_IMAGE</a>, <a class="el" href="../../d6/d4/statctl_8c-source.html#l00048">STK_TYPE</a>, <a class="el" href="../../d6/d4/statctl_8c-source.html#l00051">STK_USEFONT</a>, <a class="el" href="../../d6/d4/statctl_8c-source.html#l00052">STK_USETEXT</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00202">SYSMET</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02561">TestwndChild</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00368">Unlock</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l03608">UpdateWindow()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00227">VALIDATECLASSANDSIZE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02372">WEFRIGHT</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02378">WEFSTATICEDGE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02419">WFVISIBLE</a>, <a class="el" href="../../d6/d4/statctl_8c-source.html#l01211">xxxNextAniIconStep()</a>, <a class="el" href="../../d6/d4/statctl_8c-source.html#l00094">xxxSetStaticImage()</a>, <a class="el" href="../../d6/d4/statctl_8c-source.html#l00246">xxxStaticLoadImage()</a>, and <a class="el" href="../../d6/d4/statctl_8c-source.html#l00419">xxxStaticPaint()</a>.
<p>
Referenced by <a class="el" href="../../d7/d7/clinit_8c-source.html#l01219">ClientThreadSetup()</a>, <a class="el" href="../../d6/d4/statctl_8c-source.html#l01173">StaticWndProcA()</a>, and <a class="el" href="../../d6/d4/statctl_8c-source.html#l01188">StaticWndProcW()</a>.
<p>
<pre class="fragment"><div>00846 {
00847     HWND        hwnd = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(pwnd);
00848     <a class="code" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a>        bType;
00849     <a class="code" href="../../d1/d7/structtagSTAT.html">PSTAT</a>       pstat;
00850     <span class="keyword">static</span> <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fInit = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00851 
00852     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pwnd);
00853 
00854     <a class="code" href="../../d6/d0/usercli_8h.html#a28">VALIDATECLASSANDSIZE</a>(pwnd, FNID_STATIC);
00855     <a class="code" href="../../d6/d0/usercli_8h.html#a29">INITCONTROLLOOKASIDE</a>(&amp;StaticLookaside, <a class="code" href="../../d1/d7/structtagSTAT.html">STAT</a>, spwnd, 8);
00856 
00857     <span class="comment">/*</span>
00858 <span class="comment">     * If the control is not interested in this message,</span>
00859 <span class="comment">     * pass it to DefWindowProc.</span>
00860 <span class="comment">     */</span>
00861     <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d0/usercli_8h.html#a10">FWINDOWMSG</a>(message, FNID_STATIC))
00862         <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a610">DefWindowProcWorker</a>(pwnd, message, wParam, lParam, fAnsi);
00863 
00864     <span class="comment">/*</span>
00865 <span class="comment">     * Get the pstat for the given window now since we will use it a lot in</span>
00866 <span class="comment">     * various handlers. This was stored using SetWindowLong(hwnd,0,pstat) when</span>
00867 <span class="comment">     * we initially created the static control.</span>
00868 <span class="comment">     */</span>
00869     pstat = ((<a class="code" href="../../d3/d7/structtagSTATWND.html">PSTATWND</a>)pwnd)-&gt;pstat;
00870 
00871     <span class="comment">/*</span>
00872 <span class="comment">     * Get the control's type</span>
00873 <span class="comment">     */</span>
00874     bType = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, SFTYPEMASK);
00875 
00876     <span class="keywordflow">switch</span> (message) {
00877     <span class="keywordflow">case</span> STM_GETICON:
00878         wParam = IMAGE_ICON;
00879 
00880     <span class="keywordflow">case</span> STM_GETIMAGE:
00881         <span class="keywordflow">if</span> (<a class="code" href="../../d8/d1/btnctl_8c.html#a7">IsValidImage</a>(wParam, bType, IMAGE_STMMAX)) {
00882             <span class="keywordflow">return</span> (LRESULT)pstat-&gt;<a class="code" href="../../d1/d7/structtagSTAT.html#o3">hImage</a>;
00883         }
00884         <span class="keywordflow">break</span>;
00885 
00886     <span class="keywordflow">case</span> STM_SETICON:
00887         lParam = (LPARAM)wParam;
00888         wParam = IMAGE_ICON;
00889 
00890     <span class="keywordflow">case</span> STM_SETIMAGE:
00891         <span class="keywordflow">if</span> (<a class="code" href="../../d8/d1/btnctl_8c.html#a7">IsValidImage</a>(wParam, bType, IMAGE_STMMAX)) {
00892             <span class="keywordflow">return</span> (LRESULT)<a class="code" href="../../d5/d5/statctl_8c.html#a14">xxxSetStaticImage</a>(pstat, (HANDLE)lParam, FALSE);
00893         }
00894         <span class="keywordflow">break</span>;
00895 
00896     <span class="keywordflow">case</span> WM_ERASEBKGND:
00897 
00898         <span class="comment">/*</span>
00899 <span class="comment">         * The control will be erased in xxxStaticPaint().</span>
00900 <span class="comment">         */</span>
00901         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00902 
00903     <span class="keywordflow">case</span> WM_PRINTCLIENT:
00904         <a class="code" href="../../d5/d5/statctl_8c.html#a17">xxxStaticPaint</a>(pstat, (HDC)wParam, FALSE);
00905         <span class="keywordflow">break</span>;
00906 
00907     <span class="keywordflow">case</span> WM_PAINT:
00908         {
00909             HDC         hdc;
00910             PAINTSTRUCT ps;
00911 
00912             <span class="keywordflow">if</span> ((hdc = (HDC)wParam) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00913                 hdc = <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a246">NtUserBeginPaint</a>(hwnd, &amp;ps);
00914             }
00915 
00916             <span class="keywordflow">if</span> (<a class="code" href="../../d2/d8/rtl_2winmgr_8c.html#a6">IsVisible</a>(pwnd)) {
00917                 <a class="code" href="../../d5/d5/statctl_8c.html#a17">xxxStaticPaint</a>(pstat, hdc, !wParam);
00918             }
00919 
00920             <span class="comment">/*</span>
00921 <span class="comment">             * If hwnd was destroyed, BeginPaint was automatically undone.</span>
00922 <span class="comment">             */</span>
00923             <span class="keywordflow">if</span> (!wParam) {
00924                 <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a248">NtUserEndPaint</a>(hwnd, &amp;ps);
00925             }
00926         }
00927         <span class="keywordflow">break</span>;
00928 
00929     <span class="keywordflow">case</span> WM_CREATE:
00930 
00931         <span class="keywordflow">if</span> ((<a class="code" href="../../d5/d5/statctl_8c.html#a11">rgstk</a>[bType] &amp; <a class="code" href="../../d5/d5/statctl_8c.html#a5">STK_TYPE</a>) == <a class="code" href="../../d5/d5/statctl_8c.html#a2">STK_IMAGE</a>) {
00932             <span class="comment">/*</span>
00933 <span class="comment">             *  Pull the name from LPCREATESTRUCT like Win95 does</span>
00934 <span class="comment">             */</span>
00935             LPWSTR  lpszName;
00936             LPSTR   lpszAnsiName;
00937             <span class="keyword">struct </span>{
00938                 WORD tag;
00939                 <a class="code" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a> ordLo;
00940                 <a class="code" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a> ordHi;
00941             } dwUnicodeOrdinal;
00942 
00943             <span class="keywordflow">if</span> (fAnsi) {
00944                 <span class="comment">/*</span>
00945 <span class="comment">                 *  Convert the ANSI string to unicode if it exists</span>
00946 <span class="comment">                 */</span>
00947                 lpszAnsiName = (LPSTR)((LPCREATESTRUCT)lParam)-&gt;lpszName;
00948                 <span class="keywordflow">if</span> (lpszAnsiName) {
00949                     <span class="keywordflow">if</span> (lpszAnsiName[0] == (<a class="code" href="../../d1/d1/bench_8c.html#a16">CHAR</a>)0xff) {
00950                         <span class="comment">/*</span>
00951 <span class="comment">                         * Convert ANSI ordinal to UNICODE ordinal</span>
00952 <span class="comment">                         */</span>
00953                         dwUnicodeOrdinal.tag = 0xFFFF;
00954                         dwUnicodeOrdinal.ordLo = lpszAnsiName[1];
00955                         dwUnicodeOrdinal.ordHi = lpszAnsiName[2];
00956                         lpszName = (LPWSTR)&amp;dwUnicodeOrdinal;
00957                     } <span class="keywordflow">else</span> {
00958                         <a class="code" href="../../d5/d6/chartran_8c.html#a3">MBToWCSEx</a>(0, lpszAnsiName, -1, &amp;lpszName, -1, TRUE);
00959                     }
00960                 } <span class="keywordflow">else</span> {
00961                     lpszName = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00962                 }
00963             } <span class="keywordflow">else</span> {
00964                 lpszName = (LPWSTR)(((LPCREATESTRUCT)lParam)-&gt;lpszName);
00965             }
00966 
00967             <span class="comment">/*</span>
00968 <span class="comment">             *  Load the image</span>
00969 <span class="comment">             */</span>
00970             <a class="code" href="../../d5/d5/statctl_8c.html#a15">xxxStaticLoadImage</a>(pstat, lpszName);
00971 
00972             <span class="keywordflow">if</span> (fAnsi &amp;&amp;
00973                     lpszName &amp;&amp;
00974                     lpszName != (LPWSTR)&amp;dwUnicodeOrdinal) {
00975                 <span class="comment">/*</span>
00976 <span class="comment">                 *  Free the converted ANSI string</span>
00977 <span class="comment">                 */</span>
00978                 LocalFree(lpszName);
00979             }
00980         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (bType == SS_ETCHEDHORZ || bType == SS_ETCHEDVERT) {
00981 
00982             <span class="comment">/*</span>
00983 <span class="comment">             * Resize static window to fit edge.  Horizontal dudes</span>
00984 <span class="comment">             * make bottom one edge from top, vertical dudes make</span>
00985 <span class="comment">             * right edge one edge from left.</span>
00986 <span class="comment">             */</span>
00987 
00988             RECT    rcClient;
00989 
00990             <a class="code" href="../../d6/d9/rtl_2wow_8c.html#a19">_GetClientRect</a>(pwnd, &amp;rcClient);
00991             <span class="keywordflow">if</span> (bType == SS_ETCHEDHORZ)
00992                 rcClient.bottom = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CYEDGE);
00993             <span class="keywordflow">else</span>
00994                 rcClient.right = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CXEDGE);
00995 
00996             <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a115">NtUserSetWindowPos</a>(hwnd, HWND_TOP, 0, 0, rcClient.right,
00997                 rcClient.bottom, SWP_NOMOVE | SWP_NOZORDER | SWP_NOACTIVATE);
00998         }
00999         <span class="keywordflow">break</span>;
01000 
01001     <span class="keywordflow">case</span> WM_DESTROY:
01002         <span class="keywordflow">if</span> (((<a class="code" href="../../d5/d5/statctl_8c.html#a11">rgstk</a>[bType] &amp; <a class="code" href="../../d5/d5/statctl_8c.html#a5">STK_TYPE</a>) == <a class="code" href="../../d5/d5/statctl_8c.html#a2">STK_IMAGE</a>) &amp;&amp;
01003             (pstat-&gt;<a class="code" href="../../d1/d7/structtagSTAT.html#o3">hImage</a> != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)                  &amp;&amp;
01004             (pstat-&gt;<a class="code" href="../../d1/d7/structtagSTAT.html#o2">fDeleteIt</a>)) {
01005 
01006             <span class="keywordflow">if</span> (bType == SS_BITMAP) {
01007                 DeleteObject(pstat-&gt;<a class="code" href="../../d1/d7/structtagSTAT.html#o3">hImage</a>);
01008             } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (bType == SS_ICON) {
01009                 <span class="keywordflow">if</span> (pstat-&gt;<a class="code" href="../../d1/d7/structtagSTAT.html#o4">cicur</a> &gt; 1) {
01010                     <span class="comment">/*</span>
01011 <span class="comment">                     *  Kill the animated cursor timer</span>
01012 <span class="comment">                     */</span>
01013                     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a208">NtUserKillTimer</a>(hwnd, IDSYS_STANIMATE);
01014                 }
01015                 <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a156">NtUserDestroyCursor</a>((HCURSOR)(pstat-&gt;<a class="code" href="../../d1/d7/structtagSTAT.html#o3">hImage</a>), CURSOR_CALLFROMCLIENT);
01016             }
01017         }
01018         <span class="keywordflow">break</span>;
01019 
01020     <span class="keywordflow">case</span> WM_NCCREATE:
01021         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd,WEFRIGHT)) {
01022             <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a285">NtUserAlterWindowStyle</a>(hwnd, SS_TYPEMASK, SS_RIGHT);
01023         }
01024 
01025         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, SFSUNKEN) ||
01026             ((bType == <a class="code" href="../../d5/d9/ntrtlp_8h.html#a4">LOBYTE</a>(SS_ETCHEDHORZ)) || (bType == <a class="code" href="../../d5/d9/ntrtlp_8h.html#a4">LOBYTE</a>(SS_ETCHEDVERT)))) {
01027             <a class="code" href="../../d4/d1/userk_8h.html#a1628">SetWindowState</a>(pwnd, WEFSTATICEDGE);
01028         }
01029         <span class="keywordflow">goto</span> CallDWP;
01030 
01031     <span class="keywordflow">case</span> WM_NCDESTROY:
01032     <span class="keywordflow">case</span> WM_FINALDESTROY:
01033         <span class="keywordflow">if</span> (pstat) {
01034             <a class="code" href="../../d6/d0/usercli_8h.html#a42">Unlock</a>(&amp;pstat-&gt;<a class="code" href="../../d1/d7/structtagSTAT.html#o0">spwnd</a>);
01035             <a class="code" href="../../d6/d0/usercli_8h.html#a408">FreeLookasideEntry</a>(&amp;StaticLookaside, pstat);
01036         }
01037         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a284">NtUserSetWindowFNID</a>(hwnd, FNID_CLEANEDUP_BIT);
01038         <span class="keywordflow">break</span>;
01039 
01040     <span class="keywordflow">case</span> WM_NCHITTEST:
01041         <span class="keywordflow">return</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, SFNOTIFY) ? HTCLIENT : HTTRANSPARENT);
01042 
01043     <span class="keywordflow">case</span> WM_LBUTTONDOWN:
01044     <span class="keywordflow">case</span> WM_NCLBUTTONDOWN:
01045         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, SFNOTIFY)) {
01046 
01047             <span class="comment">/*</span>
01048 <span class="comment">             * It is acceptable for an app to destroy a static label</span>
01049 <span class="comment">             * in response to a STN_CLICKED notification.</span>
01050 <span class="comment">             */</span>
01051             <a class="code" href="../../d5/d5/statctl_8c.html#a19">StaticNotifyParent</a>(pwnd, NULL, STN_CLICKED);
01052         }
01053         <span class="keywordflow">break</span>;
01054 
01055     <span class="keywordflow">case</span> WM_LBUTTONDBLCLK:
01056     <span class="keywordflow">case</span> WM_NCLBUTTONDBLCLK:
01057         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, SFNOTIFY)) {
01058 
01059             <span class="comment">/*</span>
01060 <span class="comment">             * It is acceptable for an app to destroy a static label in</span>
01061 <span class="comment">             * response to a STN_DBLCLK notification.</span>
01062 <span class="comment">             */</span>
01063             <a class="code" href="../../d5/d5/statctl_8c.html#a19">StaticNotifyParent</a>(pwnd, NULL, STN_DBLCLK);
01064         }
01065         <span class="keywordflow">break</span>;
01066 
01067     <span class="keywordflow">case</span> WM_SETTEXT:
01068         <span class="comment">/*</span>
01069 <span class="comment">         *  No more hack to set icon/bitmap via WM_SETTEXT!</span>
01070 <span class="comment">         */</span>
01071         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d5/statctl_8c.html#a11">rgstk</a>[bType] &amp; <a class="code" href="../../d5/d5/statctl_8c.html#a8">STK_USETEXT</a>) {
01072             <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a622">_DefSetText</a>(hwnd, (LPWSTR)lParam, fAnsi)) {
01073                 <a class="code" href="../../d5/d5/statctl_8c.html#a18">StaticRepaint</a>(pstat);
01074                 <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01075             }
01076         }
01077         <span class="keywordflow">break</span>;
01078 
01079     <span class="keywordflow">case</span> WM_ENABLE:
01080         <a class="code" href="../../d5/d5/statctl_8c.html#a18">StaticRepaint</a>(pstat);
01081         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, SFNOTIFY)) {
01082             <a class="code" href="../../d5/d5/statctl_8c.html#a19">StaticNotifyParent</a>(pwnd, NULL, (wParam ? STN_ENABLE : STN_DISABLE));
01083         }
01084         <span class="keywordflow">break</span>;
01085 
01086     <span class="keywordflow">case</span> WM_GETDLGCODE:
01087         <span class="keywordflow">return</span> (LONG)DLGC_STATIC;
01088 
01089     <span class="keywordflow">case</span> WM_SETFONT:
01090 
01091         <span class="comment">/*</span>
01092 <span class="comment">         * wParam - handle to the font</span>
01093 <span class="comment">         * lParam - if true, redraw else don't</span>
01094 <span class="comment">         */</span>
01095         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d5/statctl_8c.html#a11">rgstk</a>[bType] &amp; <a class="code" href="../../d5/d5/statctl_8c.html#a7">STK_USEFONT</a>) {
01096 
01097             pstat-&gt;<a class="code" href="../../d1/d7/structtagSTAT.html#o1">hFont</a> = (HANDLE)wParam;
01098 
01099             <span class="keywordflow">if</span> (lParam &amp;&amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFVISIBLE)) {
01100                 <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a206">NtUserInvalidateRect</a>(hwnd, NULL, TRUE);
01101                 <a class="code" href="../../d3/d8/client_8c.html#a140">UpdateWindow</a>(hwnd);
01102             }
01103         }
01104         <span class="keywordflow">break</span>;
01105 
01106     <span class="keywordflow">case</span> WM_GETFONT:
01107         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d5/statctl_8c.html#a11">rgstk</a>[bType] &amp; <a class="code" href="../../d5/d5/statctl_8c.html#a7">STK_USEFONT</a>) {
01108             <span class="keywordflow">return</span> (LRESULT)pstat-&gt;<a class="code" href="../../d1/d7/structtagSTAT.html#o1">hFont</a>;
01109         }
01110         <span class="keywordflow">break</span>;
01111 
01112     <span class="keywordflow">case</span> WM_TIMER:
01113         <span class="keywordflow">if</span> (wParam == <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a54">IDSYS_STANIMATE</a>) {
01114             <a class="code" href="../../d5/d5/statctl_8c.html#a13">xxxNextAniIconStep</a>(pstat);
01115         }
01116         <span class="keywordflow">break</span>;
01117 
01118     <span class="comment">/*</span>
01119 <span class="comment">     *  case WM_GETTEXT:</span>
01120 <span class="comment">     *  No more hack to get icon/bitmap via WM_GETTEXT!</span>
01121 <span class="comment">     */</span>
01122 
01123     <span class="keywordflow">case</span> WM_INPUTLANGCHANGEREQUEST:
01124         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a126">IS_IME_ENABLED</a>() || <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a128">IS_MIDEAST_ENABLED</a>()) {
01125             <span class="comment">/*</span>
01126 <span class="comment">             * #115190</span>
01127 <span class="comment">             * If the window is one of controls on top of dialogbox,</span>
01128 <span class="comment">             * let the parent dialog handle it.</span>
01129 <span class="comment">             */</span>
01130             <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a735">TestwndChild</a>(pwnd) &amp;&amp; pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o3">spwndParent</a>) {
01131                 <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwndParent = <a class="code" href="../../d6/d0/usercli_8h.html#a24">REBASEALWAYS</a>(pwnd, spwndParent);
01132                 <span class="keywordflow">if</span> (pwndParent) {
01133                     <a class="code" href="../../d7/d0/structtagCLS.html">PCLS</a> pclsParent = <a class="code" href="../../d6/d0/usercli_8h.html#a24">REBASEALWAYS</a>(pwndParent, pcls);
01134 
01135                     UserAssert(pclsParent != NULL);
01136                     <span class="keywordflow">if</span> (pclsParent-&gt;<a class="code" href="../../d7/d0/structtagCLS.html#o1">atomClassName</a> == <a class="code" href="../../d1/d8/clglobal_8c.html#a4">gpsi</a>-&gt;<a class="code" href="../../d2/d6/structtagSERVERINFO.html#o12">atomSysClass</a>[<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a76">ICLS_DIALOG</a>]) {
01137                         <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a600">SendMessageWorker</a>(pwndParent, message, wParam, lParam, FALSE);
01138                     }
01139                 }
01140             }
01141         }
01142         <span class="keywordflow">goto</span> CallDWP;
01143 
01144     <span class="keywordflow">case</span> WM_UPDATEUISTATE:
01145         {
01146             <span class="comment">/*</span>
01147 <span class="comment">             * DWP will change the UIState bits accordingly</span>
01148 <span class="comment">             */</span>
01149             <a class="code" href="../../d6/d0/usercli_8h.html#a610">DefWindowProcWorker</a>(pwnd, message, wParam, lParam, fAnsi);
01150 
01151             <span class="keywordflow">if</span> (HIWORD(wParam) &amp; UISF_HIDEACCEL) {
01152                 <span class="comment">/*</span>
01153 <span class="comment">                 * Change in AccelHidden state: need to repaint</span>
01154 <span class="comment">                 */</span>
01155                 <span class="keywordflow">if</span> (ISSSTEXTOROD(bType)) {
01156                     pstat-&gt;<a class="code" href="../../d1/d7/structtagSTAT.html#o6">fPaintKbdCuesOnly</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01157                     <a class="code" href="../../d5/d5/statctl_8c.html#a18">StaticRepaint</a>(pstat);
01158                     pstat-&gt;<a class="code" href="../../d1/d7/structtagSTAT.html#o6">fPaintKbdCuesOnly</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01159                 }
01160             }
01161         }
01162         <span class="keywordflow">break</span>;
01163 
01164     <span class="keywordflow">default</span>:
01165 CallDWP:
01166         <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a610">DefWindowProcWorker</a>(pwnd, message, wParam, lParam, fAnsi);
01167     }
01168 
01169     <span class="keywordflow">return</span> 0<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>;
01170 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a789" doxytag="usercli.h::SyncSoftKbdState" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL SyncSoftKbdState           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HIMC&nbsp;</td>
          <td class="mdname" nowrap> <em>hImc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/imectl_8c-source.html#l01448">1448</a> of file <a class="el" href="../../d0/d9/imectl_8c-source.html">imectl.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02555">fpImmGetConversionStatus</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02556">fpImmSetConversionStatus</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/editec_8c-source.html#l00423">ECDoIMEMenuCommand()</a>, and <a class="el" href="../../d0/d9/imectl_8c-source.html#l00417">ImeSystemHandler()</a>.
<p>
<pre class="fragment"><div>01451 {
01452     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> fdwConversion, fdwSentence, fdwNewConversion;
01453 
01454     <a class="code" href="../../d6/d0/usercli_8h.html#a330">fpImmGetConversionStatus</a>(hImc, &amp;fdwConversion, &amp;fdwSentence);
01455 
01456     <span class="keywordflow">if</span> (lParam) {
01457         fdwNewConversion = fdwConversion | IME_CMODE_SOFTKBD;
01458     } <span class="keywordflow">else</span> {
01459         fdwNewConversion = fdwConversion &amp; ~IME_CMODE_SOFTKBD;
01460     }
01461 
01462     <span class="keywordflow">if</span> (fdwNewConversion != fdwConversion) {
01463         <a class="code" href="../../d6/d0/usercli_8h.html#a331">fpImmSetConversionStatus</a>(hImc, fdwNewConversion, fdwSentence);
01464     }
01465 
01466     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01467 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a422" doxytag="usercli.h::TabTextOut" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LONG TabTextOut           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HDC&nbsp;</td>
          <td class="mdname" nowrap> <em>hdc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>x</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>y</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPCWSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>lpstring</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>nCount</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>nTabPositions</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>CONST <a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>lpTabPositions</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>iTabOrigin</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fDrawTheText</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>iCharset</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d1/client_2drawtext_8c-source.html#l00212">212</a> of file <a class="el" href="../../d4/d1/client_2drawtext_8c-source.html">client/drawtext.c</a>.
<p>
References <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00051">gpsi</a>, <a class="el" href="../../d6/d1/rtl_2drawtext_8c-source.html#l02027">IsSysFontAndDefaultMode()</a>, and <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>.
<p>
Referenced by <a class="el" href="../../d4/d1/client_2drawtext_8c-source.html#l00508">GetTabbedTextExtentA()</a>, <a class="el" href="../../d4/d1/client_2drawtext_8c-source.html#l00497">GetTabbedTextExtentW()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00286">LBPrintCallback()</a>, <a class="el" href="../../d4/d1/client_2drawtext_8c-source.html#l00459">TabbedTextOutA()</a>, and <a class="el" href="../../d4/d1/client_2drawtext_8c-source.html#l00438">TabbedTextOutW()</a>.
<p>
<pre class="fragment"><div>00223 {
00224     <span class="keywordtype">int</span>     cxCharWidth;
00225     <span class="keywordtype">int</span>     cyCharHeight = 0;
00226 
00227     <span class="keywordflow">if</span> (nCount == -1 &amp;&amp; lpstring) {
00228         nCount = wcslen(lpstring);
00229     }
00230     <span class="keywordflow">if</span> (!lpstring || nCount &lt; 0 || nTabPositions &lt; 0)
00231         <span class="keywordflow">return</span> 0;
00232 
00233 
00234     <span class="comment">// Check if it is SysFont AND the mapping mode is MM_TEXT;</span>
00235     <span class="comment">// Fix made in connection with Bug #8717 --02-01-90  --SANKAR--</span>
00236     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d2/rtl_2drawtext_8c.html#a53">IsSysFontAndDefaultMode</a>(hdc))
00237     {
00238         cxCharWidth  = <a class="code" href="../../d1/d8/clglobal_8c.html#a4">gpsi</a>-&gt;cxSysFontChar;
00239         cyCharHeight = <a class="code" href="../../d1/d8/clglobal_8c.html#a4">gpsi</a>-&gt;cySysFontChar;
00240     } <span class="keywordflow">else</span> {
00241         cxCharWidth  = GdiGetCharDimensions(hdc, NULL, &amp;cyCharHeight);
00242         <span class="keywordflow">if</span> (cxCharWidth == 0) {
00243             RIPMSG0(RIP_WARNING, <span class="stringliteral">"TabTextOut: GdiGetCharDimensions failed"</span>);
00244             <span class="keywordflow">return</span> 0;
00245         }
00246     }
00247 
00248     <span class="keywordflow">return</span> (*fpLpkTabbedTextOut)(hdc, x, y, lpstring, nCount, nTabPositions,
00249                                  lpTabPositions, iTabOrigin, fDrawTheText,
00250                                  cxCharWidth, cyCharHeight, iCharset);
00251 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a765" doxytag="usercli.h::TellWOWThehDlg" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID TellWOWThehDlg           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hDlg</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l02801">2801</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00140">pfnWOWTellWOWThehDlg</a>, and <a class="el" href="../../d2/d7/hal_8h.html#a212">VOID()</a>.
<p>
Referenced by <a class="el" href="../../d1/d8/dlgbegin_8c-source.html#l00553">InternalCreateDialog()</a>.
<p>
<pre class="fragment"><div>02803 {
02804     UserAssert(pfnWOWTellWOWThehDlg != NULL);
02805 
02806     (*pfnWOWTellWOWThehDlg)(hDlg);
02807 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a771" doxytag="usercli.h::ThunkedMenuItemInfo" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL ThunkedMenuItemInfo           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HMENU&nbsp;</td>
          <td class="mdname" nowrap> <em>hMenu</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>nPosition</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fByPosition</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fInsert</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPMENUITEMINFOW&nbsp;</td>
          <td class="mdname" nowrap> <em>lpmii</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fAnsi</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00377">377</a> of file <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html">client/ntstubs.c</a>.
<p>
References <a class="el" href="../../d8/d8/ntsend_8h-source.html#l00027">BEGINCALL</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d8/d8/ntsend_8h-source.html#l00176">CLEANUPLPSTRW</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d8/d8/ntsend_8h-source.html#l00047">ENDCALL</a>, <a class="el" href="../../d8/d8/ntsend_8h-source.html#l00035">ERRORTRAP</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00316">_IN_STRING::fAllocated</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d8/d8/ntsend_8h-source.html#l00149">FIRSTCOPYLPSTROPTW</a>, <a class="el" href="../../d8/d8/ntsend_8h-source.html#l00230">FIRSTCOPYLPWSTROPT</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00410">IS_PTR</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04663">NtUserThunkedMenuItemInfo()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d7/d9/usercli_8h-source.html#l00315">_IN_STRING::pstr</a>.
<p>
Referenced by <a class="el" href="../../d6/d8/cltxt_8h-source.html#l01734">AppendMenu()</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l01720">InsertMenu()</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l01702">InsertMenuItem()</a>, <a class="el" href="../../d0/d8/clmenu_8c-source.html#l00439">InternalInsertMenuItem()</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l01747">ModifyMenu()</a>, <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00104">ModifyMenuItem()</a>, and <a class="el" href="../../d6/d8/cltxt_8h-source.html#l01685">SetMenuItemInfo()</a>.
<p>
<pre class="fragment"><div>00384 {
00385     MENUITEMINFOW mii;
00386     <a class="code" href="../../d8/d1/struct__IN__STRING.html">IN_STRING</a> strItem;
00387 
00388     <span class="comment">/*</span>
00389 <span class="comment">     * Make sure cleanup will work successfully</span>
00390 <span class="comment">     */</span>
00391     strItem.<a class="code" href="../../d8/d1/struct__IN__STRING.html#o2">fAllocated</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00392 
00393     <a class="code" href="../../d7/d9/ntsend_8h.html#a1">BEGINCALL</a>()
00394 
00395         <span class="comment">/*</span>
00396 <span class="comment">         *  Make a local copy so we can make changes</span>
00397 <span class="comment">         */</span>
00398         mii = *(LPMENUITEMINFO)(lpmii);
00399 
00400         strItem.pstr = NULL;
00401         if (mii.fMask &amp; MIIM_BITMAP) {
00402             <span class="keywordflow">if</span> (((HBITMAP)LOWORD(HandleToUlong(mii.hbmpItem)) &lt; HBMMENU_MAX) &amp;&amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a98">IS_PTR</a>(mii.hbmpItem)) {
00403                 <span class="comment">/*</span>
00404 <span class="comment">                 *  Looks like the user was trying to insert one of the</span>
00405 <span class="comment">                 *  HBMMENU_* bitmaps, but stuffed some data in the HIWORD.</span>
00406 <span class="comment">                 *  We know the HIWORD data is invalid because the LOWORD</span>
00407 <span class="comment">                  *  handle is below the GDI minimum.</span>
00408 <span class="comment">                 */</span>
00409                 RIPMSG1(RIP_WARNING, <span class="stringliteral">"Invalid HIWORD data (0x%04X) for HBMMENU_* bitmap."</span>, HIWORD(HandleToUlong(mii.hbmpItem)));
00410                 mii.hbmpItem = (HBITMAP)LOWORD(HandleToUlong(mii.hbmpItem));
00411             } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a98">IS_PTR</a>(mii.hbmpItem) &amp;&amp; (mii.hbmpItem &gt;= HBMMENU_MAX)) {
00412             <span class="comment">/*</span>
00413 <span class="comment">             * The app is passing a 16-bit GDI handle.  GDI handles this on the</span>
00414 <span class="comment">             * client-side, but not on the kernel side.  So convert it to 32-bits.</span>
00415 <span class="comment">             * This fixes bug 201493 in Macromedia Director.</span>
00416 <span class="comment">             */</span>
00417                 HBITMAP hbmNew = GdiFixUpHandle(mii.hbmpItem);
00418                 <span class="keywordflow">if</span> (hbmNew) {
00419                     RIPMSG2(RIP_WARNING, <span class="stringliteral">"Menu bitmap change, fix 16-bit bitmap handle %lx to %lx\n"</span>, mii.hbmpItem, hbmNew);
00420                     mii.hbmpItem = hbmNew;
00421                 }
00422             }
00423         }
00424 
00425         <span class="keywordflow">if</span> (mii.fMask &amp; MIIM_STRING){
00426             <span class="keywordflow">if</span> (fAnsi) {
00427                 <a class="code" href="../../d7/d9/ntsend_8h.html#a25">FIRSTCOPYLPSTROPTW</a>(&amp;strItem, mii.dwTypeData);
00428             } <span class="keywordflow">else</span> {
00429                 <a class="code" href="../../d7/d9/ntsend_8h.html#a40">FIRSTCOPYLPWSTROPT</a>(&amp;strItem, mii.dwTypeData);
00430             }
00431         }
00432 
00433         retval = (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a181">NtUserThunkedMenuItemInfo</a>(
00434                 hMenu,
00435                 nPosition,
00436                 fByPosition,
00437                 fInsert,
00438                 &amp;mii,
00439                 strItem.<a class="code" href="../../d8/d1/struct__IN__STRING.html#o1">pstr</a>);
00440 
00441     <a class="code" href="../../d7/d9/ntsend_8h.html#a3">ERRORTRAP</a>(FALSE);
00442     <a class="code" href="../../d7/d9/ntsend_8h.html#a29">CLEANUPLPSTRW</a>(strItem);
00443     <a class="code" href="../../d7/d9/ntsend_8h.html#a5">ENDCALL</a>(BOOL);
00444 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a783" doxytag="usercli.h::UserGetCodePage" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> UserGetCodePage           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HDC&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hdc</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a785" doxytag="usercli.h::UserIsFELineBreak" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL UserIsFELineBreak           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwCodePage</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>wChar</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a784" doxytag="usercli.h::UserIsFullWidth" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL UserIsFullWidth           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwCodePage</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>wChar</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d1/rtl_2drawtext_8c-source.html#l00535">535</a> of file <a class="el" href="../../d6/d1/rtl_2drawtext_8c-source.html">rtl/drawtext.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d2/d0/bench_8c-source.html#l00050">CHAR</a>, <a class="el" href="../../d6/d1/rtl_2drawtext_8c-source.html#l00523">_FULLWIDTH_UNICODE::End</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d6/d1/rtl_2drawtext_8c-source.html#l00528">FullWidthUnicodes</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00025">INT</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d6/d1/rtl_2drawtext_8c-source.html#l00526">NUM_FULLWIDTH_UNICODES</a>, <a class="el" href="../../d6/d1/rtl_2drawtext_8c-source.html#l00522">_FULLWIDTH_UNICODE::Start</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/editec_8c-source.html#l01552">ECWord()</a>, <a class="el" href="../../d6/d1/rtl_2drawtext_8c-source.html#l00662">GetNextWordbreak()</a>, and <a class="el" href="../../d2/d4/editml_8c-source.html#l01562">MLBuildchLines()</a>.
<p>
<pre class="fragment"><div>00536 {
00537     <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a>  index;
00538     <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a>  cChars;
00539 <span class="preprocessor">#ifdef _USERK_</span>
00540 <span class="preprocessor"></span>    <a class="code" href="../../d1/d1/bench_8c.html#a16">CHAR</a> aChars[2];
00541 <span class="preprocessor">#endif // _USERK_</span>
00542 <span class="preprocessor"></span>
00543     <span class="comment">//</span>
00544     <span class="comment">// Early out for ASCII.</span>
00545     <span class="comment">//</span>
00546     <span class="keywordflow">if</span> (wChar &lt; 0x0080) {
00547         <span class="comment">//</span>
00548         <span class="comment">// if the character &lt; 0x0080, it should be a halfwidth character.</span>
00549         <span class="comment">//</span>
00550         <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00551     }
00552     <span class="comment">//</span>
00553     <span class="comment">// Scan FullWdith definition table... most of FullWidth character is</span>
00554     <span class="comment">// defined here... this is more faster than call NLS API.</span>
00555     <span class="comment">//</span>
00556     <span class="keywordflow">for</span> (index = 0; index &lt; <a class="code" href="../../d5/d2/rtl_2drawtext_8c.html#a23">NUM_FULLWIDTH_UNICODES</a>; index++) {
00557         <span class="keywordflow">if</span> ((wChar &gt;= <a class="code" href="../../d5/d2/rtl_2drawtext_8c.html#a33">FullWidthUnicodes</a>[index].<a class="code" href="../../d4/d1/struct__FULLWIDTH__UNICODE.html#o0">Start</a>) &amp;&amp;
00558             (wChar &lt;= <a class="code" href="../../d5/d2/rtl_2drawtext_8c.html#a33">FullWidthUnicodes</a>[index].<a class="code" href="../../d4/d1/struct__FULLWIDTH__UNICODE.html#o1">End</a>)      ) {
00559             <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
00560         }
00561     }
00562     <span class="comment">//</span>
00563     <span class="comment">// if this Unicode character is mapped to Double-Byte character,</span>
00564     <span class="comment">// this is also FullWidth character..</span>
00565     <span class="comment">//</span>
00566 <span class="preprocessor">#ifdef _USERK_</span>
00567 <span class="preprocessor"></span>    cChars = EngWideCharToMultiByte((UINT)dwCodePage,&amp;wChar,<span class="keyword">sizeof</span>(WCHAR),aChars,<span class="keyword">sizeof</span>(aChars));
00568 <span class="preprocessor">#else</span>
00569 <span class="preprocessor"></span>    cChars = WideCharToMultiByte((UINT)dwCodePage,0,&amp;wChar,1,NULL,0,NULL,NULL);
00570 <span class="preprocessor">#endif // _USERK_</span>
00571 <span class="preprocessor"></span>
00572     <span class="keywordflow">return</span>(cChars &gt; 1 ? <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a> : <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00573 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a424" doxytag="usercli.h::UserLpkPSMTextOut" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void UserLpkPSMTextOut           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HDC&nbsp;</td>
          <td class="mdname" nowrap> <em>hdc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>xLeft</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>yTop</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPWSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>lpsz</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>cch</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwFlags</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d1/client_2drawtext_8c-source.html#l00580">580</a> of file <a class="el" href="../../d4/d1/client_2drawtext_8c-source.html">client/drawtext.c</a>.
<p>
References <a class="el" href="../../d4/d7/propapi_8h-source.html#l00043">dwFlags</a>, <a class="el" href="../../d6/d1/rtl_2drawtext_8c-source.html#l00806">GetPrefixCount()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d4/d5/rect_8c-source.html#l00027">SetRect()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00958">UserLocalAlloc</a>, and <a class="el" href="../../d7/d9/usercli_8h-source.html#l00960">UserLocalFree</a>.
<p>
<pre class="fragment"><div>00587 {
00588    <span class="keywordtype">int</span> cx;
00589    LONG textsize, result;
00590    WCHAR achWorkBuffer[255];
00591    WCHAR *pchOut = achWorkBuffer;
00592    TEXTMETRICW textMetric;
00593    SIZE size;
00594    RECT rc;
00595    COLORREF color;
00596 
00597    <span class="keywordflow">if</span> (cch &gt; <span class="keyword">sizeof</span>(achWorkBuffer)/<span class="keyword">sizeof</span>(WCHAR)) {
00598        pchOut = (WCHAR*)<a class="code" href="../../d6/d0/usercli_8h.html#a136">UserLocalAlloc</a>(HEAP_ZERO_MEMORY, (cch+1) * <span class="keyword">sizeof</span>(WCHAR));
00599        <span class="keywordflow">if</span> (pchOut == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00600            <span class="keywordflow">return</span>;
00601    }
00602 
00603    result = <a class="code" href="../../d5/d2/rtl_2drawtext_8c.html#a39">GetPrefixCount</a>(lpsz, cch, pchOut, cch);
00604    <span class="comment">/*</span>
00605 <span class="comment">    * DT_PREFIXONLY is a new 5.0 option used when switching from keyboard cues off</span>
00606 <span class="comment">    *  to on.</span>
00607 <span class="comment">    */</span>
00608    <span class="keywordflow">if</span> (!(<a class="code" href="../../d3/d8/propapi_8h.html#a34">dwFlags</a> &amp; DT_PREFIXONLY)) {
00609        TextOutW(hdc, xLeft, yTop, pchOut, cch - HIWORD(result));
00610    }
00611 
00612    <span class="comment">/*</span>
00613 <span class="comment">    * Any true prefix characters to underline?</span>
00614 <span class="comment">    */</span>
00615    <span class="keywordflow">if</span> (LOWORD(result) == 0xFFFF || <a class="code" href="../../d3/d8/propapi_8h.html#a34">dwFlags</a> &amp; DT_HIDEPREFIX) {
00616        <span class="keywordflow">if</span> (pchOut != achWorkBuffer)
00617            <a class="code" href="../../d6/d0/usercli_8h.html#a138">UserLocalFree</a>(pchOut);
00618        <span class="keywordflow">return</span>;
00619    }
00620 
00621    <span class="keywordflow">if</span> (!GetTextMetricsW(hdc, &amp;textMetric)) {
00622        textMetric.tmOverhang = 0;
00623        textMetric.tmAscent = 0;
00624    }
00625 
00626    <span class="comment">/*</span>
00627 <span class="comment">    * For proportional fonts, find starting point of underline.</span>
00628 <span class="comment">    */</span>
00629    <span class="keywordflow">if</span> (LOWORD(result) != 0) {
00630 
00631        <span class="comment">/*</span>
00632 <span class="comment">        * How far in does underline start (if not at 0th byte.).</span>
00633 <span class="comment">        */</span>
00634        GetTextExtentPointW(hdc, pchOut, LOWORD(result), &amp;size);
00635        xLeft += size.cx;
00636 
00637        <span class="comment">/*</span>
00638 <span class="comment">        * Adjust starting point of underline if not at first char and there is</span>
00639 <span class="comment">        * an overhang.  (Italics or bold fonts.)</span>
00640 <span class="comment">        */</span>
00641        xLeft = xLeft - textMetric.tmOverhang;
00642    }
00643 
00644    <span class="comment">/*</span>
00645 <span class="comment">    * Adjust for proportional font when setting the length of the underline and</span>
00646 <span class="comment">    * height of text.</span>
00647 <span class="comment">    */</span>
00648    GetTextExtentPointW(hdc, pchOut + LOWORD(result), 1, &amp;size);
00649    textsize = size.cx;
00650 
00651    <span class="comment">/*</span>
00652 <span class="comment">    * Find the width of the underline character.  Just subtract out the overhang</span>
00653 <span class="comment">    * divided by two so that we look better with italic fonts.  This is not</span>
00654 <span class="comment">    * going to effect embolded fonts since their overhang is 1.</span>
00655 <span class="comment">    */</span>
00656    cx = LOWORD(textsize) - textMetric.tmOverhang / 2;
00657 
00658    <span class="comment">/*</span>
00659 <span class="comment">    * Get height of text so that underline is at bottom.</span>
00660 <span class="comment">    */</span>
00661    yTop += textMetric.tmAscent + 1;
00662 
00663    <span class="comment">/*</span>
00664 <span class="comment">    * Draw the underline using the foreground color.</span>
00665 <span class="comment">    */</span>
00666    <a class="code" href="../../d3/d6/rect_8c.html#a1">SetRect</a>(&amp;rc, xLeft, yTop, xLeft+cx, yTop+1);
00667    color = SetBkColor(hdc, GetTextColor(hdc));
00668    ExtTextOutW(hdc, xLeft, yTop, ETO_OPAQUE, &amp;rc, TEXT(<span class="stringliteral">""</span>), 0, NULL);
00669    SetBkColor(hdc, color);
00670 
00671    <span class="keywordflow">if</span> (pchOut != achWorkBuffer) {
00672        <a class="code" href="../../d6/d0/usercli_8h.html#a138">UserLocalFree</a>(pchOut);
00673    }
00674 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a423" doxytag="usercli.h::UserLpkTabbedTextOut" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LONG UserLpkTabbedTextOut           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HDC&nbsp;</td>
          <td class="mdname" nowrap> <em>hdc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>x</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>y</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPCWSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>lpstring</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>nCount</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>nTabPositions</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>CONST <a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>lpTabPositions</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>iTabOrigin</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fDrawTheText</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>cxCharWidth</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>cyCharHeight</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>iCharset</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d1/client_2drawtext_8c-source.html#l00253">253</a> of file <a class="el" href="../../d4/d1/client_2drawtext_8c-source.html">client/drawtext.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>.
<p>
<pre class="fragment"><div>00266 {
00267     SIZE textextent, viewextent, windowextent;
00268     <span class="keywordtype">int</span>     initialx = x;
00269     <span class="keywordtype">int</span>     cch;
00270     LPCWSTR  lp;
00271     <span class="keywordtype">int</span>     iOneTab = 0;
00272     RECT rc;
00273     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> uOpaque = (GetBkMode(hdc) == OPAQUE) ? ETO_OPAQUE : 0;
00274     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>    fStrStart = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00275     <span class="keywordtype">int</span>     ySign = 1; <span class="comment">//Assume y increases in down direction.</span>
00276 
00277     UNREFERENCED_PARAMETER(iCharset);   <span class="comment">//Needed by lpk, but not us</span>
00278     <span class="comment">/*</span>
00279 <span class="comment">     * If no tabstop positions are specified, then use a default of 8 system</span>
00280 <span class="comment">     * font ave char widths or use the single fixed tab stop.</span>
00281 <span class="comment">     */</span>
00282     <span class="keywordflow">if</span> (!lpTabPositions) {
00283        <span class="comment">// no tab stops specified -- default to a tab stop every 8 characters</span>
00284         iOneTab = 8 * cxCharWidth;
00285     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (nTabPositions == 1) {
00286         <span class="comment">// one tab stop specified -- treat value as the tab increment, one</span>
00287         <span class="comment">// tab stop every increment</span>
00288             iOneTab = lpTabPositions[0];
00289 
00290         <span class="keywordflow">if</span> (!iOneTab)
00291              iOneTab = 1;
00292     }
00293 
00294     <span class="comment">// Calculate if the y increases or decreases in the down direction using</span>
00295     <span class="comment">// the ViewPortExtent and WindowExtents.</span>
00296     <span class="comment">// If this call fails, hdc must be invalid</span>
00297     <span class="keywordflow">if</span> (!GetViewportExtEx(hdc, &amp;viewextent))
00298         <span class="keywordflow">return</span> 0;
00299     GetWindowExtEx(hdc, &amp;windowextent);
00300     <span class="keywordflow">if</span> ((viewextent.cy ^ windowextent.cy) &amp; 0x80000000)
00301          ySign = -1;
00302 
00303     rc.left = initialx;
00304     rc.top = y;
00305     rc.bottom = rc.top + (ySign * cyCharHeight);
00306 
00307     <span class="keywordflow">while</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>) {
00308         <span class="comment">// count the number of characters until the next tab character</span>
00309         <span class="comment">// this set of characters (substring) will be the working set for</span>
00310         <span class="comment">// each iteration of this loop</span>
00311         <span class="keywordflow">for</span> (cch = nCount, lp = lpstring; cch &amp;&amp; (*lp != TEXT(<span class="charliteral">'\t'</span>)); lp++, cch--)
00312         {
00313         }
00314 
00315         <span class="comment">// Compute the number of characters to be drawn with textout.</span>
00316         cch = nCount - cch;
00317 
00318         <span class="comment">// Compute the number of characters remaining.</span>
00319         nCount -= cch + 1;
00320 
00321         <span class="comment">// get height and width of substring</span>
00322         <span class="keywordflow">if</span> (cch == 0) {
00323             textextent.cx = 0;
00324             textextent.cy = cyCharHeight;
00325         } <span class="keywordflow">else</span>
00326             GetTextExtentPointW(hdc, lpstring, cch, &amp;textextent);
00327 
00328         <span class="keywordflow">if</span> (fStrStart)
00329             <span class="comment">// first iteration should just spit out the first substring</span>
00330             <span class="comment">// no tabbing occurs until the first tab character is encountered</span>
00331             fStrStart = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00332         <span class="keywordflow">else</span>
00333         {
00334            <span class="comment">// not the first iteration -- tab accordingly</span>
00335 
00336             <span class="keywordtype">int</span> xTab;
00337             <span class="keywordtype">int</span> i;
00338 
00339             <span class="keywordflow">if</span> (!iOneTab)
00340             {
00341                 <span class="comment">// look thru tab stop array for next tab stop after existing</span>
00342                 <span class="comment">// text to put this substring</span>
00343                 <span class="keywordflow">for</span> (i = 0; i &lt; nTabPositions; i++)
00344                 {
00345                     xTab = lpTabPositions[i];
00346 
00347                     <span class="keywordflow">if</span> (xTab &lt; 0)
00348                         <span class="comment">// calc length needed to use this right justified tab</span>
00349                         xTab = (iTabOrigin - xTab) - textextent.cx;
00350                     <span class="keywordflow">else</span>
00351                         <span class="comment">// calc length needed to use this left  justified tab</span>
00352                         xTab = iTabOrigin + xTab;
00353 
00354                     <span class="keywordflow">if</span> (x &lt; xTab)
00355                     {
00356                         <span class="comment">// we found a tab with enough room -- let's use it</span>
00357                         x = xTab;
00358                         <span class="keywordflow">break</span>;
00359                     }
00360                 }
00361 
00362                 <span class="keywordflow">if</span> (i == nTabPositions)
00363                     <span class="comment">// we've exhausted all of the given tab positions</span>
00364                     <span class="comment">// go back to default of a tab stop every 8 characters</span>
00365                     iOneTab = 8 * cxCharWidth;
00366             }
00367 
00368             <span class="comment">// we have to recheck iOneTab here (instead of just saying "else")</span>
00369             <span class="comment">// because iOneTab will be set if we've run out of tab stops</span>
00370             <span class="keywordflow">if</span> (iOneTab)
00371             {
00372                 <span class="keywordflow">if</span> (iOneTab &lt; 0)
00373                 {
00374                     <span class="comment">// calc next available right justified tab stop</span>
00375                     xTab = x + textextent.cx - iTabOrigin;
00376                     xTab = ((xTab / iOneTab) * iOneTab) - iOneTab - textextent.cx + iTabOrigin;
00377                 }
00378                 <span class="keywordflow">else</span>
00379                 {
00380                     <span class="comment">// calc next available left justified tab stop</span>
00381                     xTab = x - iTabOrigin;
00382                     xTab = ((xTab / iOneTab) * iOneTab) + iOneTab + iTabOrigin;
00383                 }
00384                 x = xTab;
00385             }
00386         }
00387 
00388         <span class="keywordflow">if</span> (fDrawTheText) {
00389 
00390             <span class="comment">/*</span>
00391 <span class="comment">             * Output all text up to the tab (or end of string) and get its</span>
00392 <span class="comment">             * extent.</span>
00393 <span class="comment">             */</span>
00394             rc.right = x + textextent.cx;
00395             ExtTextOutW(
00396                     hdc, x, y, uOpaque, &amp;rc, (LPWSTR)lpstring,
00397                     cch, NULL);
00398             rc.left = rc.right;
00399         }
00400 
00401         <span class="comment">// Skip over the tab and the characters we just drew.</span>
00402         x += textextent.cx;
00403 
00404         <span class="comment">// Skip over the characters we just drew.</span>
00405         lpstring += cch;
00406 
00407         <span class="comment">// See if we have more to draw OR see if this string ends in</span>
00408         <span class="comment">// a tab character that needs to be drawn.</span>
00409         <span class="keywordflow">if</span>((nCount &gt; 0) || ((nCount == 0) &amp;&amp; (*lpstring == TEXT(<span class="charliteral">'\t'</span>))))
00410         {
00411 
00412             lpstring++;  <span class="comment">// Skip over the tab</span>
00413             <span class="keywordflow">continue</span>;
00414         }
00415         <span class="keywordflow">else</span>
00416             <span class="keywordflow">break</span>;        <span class="comment">// Break from the loop.</span>
00417     }
00418     <span class="keywordflow">return</span> MAKELONG((x - initialx), (<span class="keywordtype">short</span>)textextent.cy);
00419 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a761" doxytag="usercli.h::ValidateDialogPwnd" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL ValidateDialogPwnd           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pwnd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l00192">192</a> of file <a class="el" href="../../d4/d8/dlgmgr_8c-source.html">dlgmgr.c</a>.
<p>
References <a class="el" href="../../d2/d1/rtlinit_8c-source.html#l00299">AllocLookasideEntry()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01856">tagWND::cbwndExtra</a>, <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l00020">DialogLookaside</a>, <a class="el" href="../../d0/d0/client_2nt6_2user_8h.html#a1085">DLG</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00838">FNID_STATUS_BITS</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01515">HWq</a>, <a class="el" href="../../d2/d1/rtlinit_8c-source.html#l00221">InitLookaside()</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04602">NtUserCallHwndParam()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d0/d0/client_2nt6_2user_8h.html#a1086">PDLG</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02282">WFDIALOGWINDOW</a>.
<p>
Referenced by <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l00460">DefDlgProcWorker()</a>, <a class="el" href="../../d3/d8/dlgend_8c-source.html#l00024">EndDialog()</a>, <a class="el" href="../../d1/d8/dlgbegin_8c-source.html#l00553">InternalCreateDialog()</a>, <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l01418">MapDialogRect()</a>, and <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l00110">xxxRestoreDlgFocus()</a>.
<p>
<pre class="fragment"><div>00194 {
00195     <span class="keyword">static</span> <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> sfInit = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00196     <a class="code" href="../../d2/d6/struct__DLG.html">PDLG</a> pdlg;
00197 
00198     <span class="comment">/*</span>
00199 <span class="comment">     * This bit is set if we've already run through this initialization and</span>
00200 <span class="comment">     * have identified this window as a dialog window (able to withstand</span>
00201 <span class="comment">     * peeks into window words at random moments in time).</span>
00202 <span class="comment">     */</span>
00203     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFDIALOGWINDOW))
00204         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00205 
00206     <span class="keywordflow">if</span> (pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o10">cbwndExtra</a> &lt; DLGWINDOWEXTRA) {
00207         RIPERR0(ERROR_WINDOW_NOT_DIALOG, RIP_VERBOSE, <span class="stringliteral">""</span>);
00208         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00209     }
00210 
00211     <span class="comment">/*</span>
00212 <span class="comment">     * See if the pdlg was destroyed and this is a rogue message to be ignored</span>
00213 <span class="comment">     */</span>
00214     <span class="keywordflow">if</span> (pwnd-&gt;fnid &amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a228">FNID_STATUS_BITS</a>) {
00215         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00216     }
00217 
00218     <span class="comment">/*</span>
00219 <span class="comment">     * If the lookaside buffer has not been initialized, do it now.</span>
00220 <span class="comment">     */</span>
00221     <span class="keywordflow">if</span> (sfInit) {
00222         <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(<a class="code" href="../../d6/d0/usercli_8h.html#a406">InitLookaside</a>(&amp;DialogLookaside, <span class="keyword">sizeof</span>(<a class="code" href="../../d2/d6/struct__DLG.html">DLG</a>), 2))) {
00223             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00224         }
00225         sfInit = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00226     }
00227 
00228     <span class="keywordflow">if</span> ((pdlg = (<a class="code" href="../../d2/d6/struct__DLG.html">PDLG</a>)<a class="code" href="../../d6/d0/usercli_8h.html#a407">AllocLookasideEntry</a>(&amp;DialogLookaside)) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00229         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00230     }
00231 
00232     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a178">NtUserCallHwndParam</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(pwnd), (ULONG_PTR)pdlg, SFI_SETDIALOGPOINTER);
00233 
00234     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00235 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a431" doxytag="usercli.h::ValidateHwnd" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d6/d9/structtagWND.html">PWND</a> FASTCALL ValidateHwnd           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hwnd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00028">28</a> of file <a class="el" href="../../d4/d8/client_2wow_8c-source.html">client/wow.c</a>.
<p>
<pre class="fragment"><div>00030 {
00031     <a class="code" href="../../d2/d2/struct__CLIENTINFO.html">PCLIENTINFO</a> pci = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a16">GetClientInfo</a>();
00032 
00033     <span class="comment">/*</span>
00034 <span class="comment">     * Attempt fast window validation</span>
00035 <span class="comment">     */</span>
00036     <span class="keywordflow">if</span> (hwnd != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> &amp;&amp; hwnd == pci-&gt;<a class="code" href="../../d2/d2/struct__CLIENTINFO.html#o9">CallbackWnd</a>.<a class="code" href="../../d2/d7/struct__CALLBACKWND.html#o0">hwnd</a>) {
00037         <span class="keywordflow">return</span> pci-&gt;<a class="code" href="../../d2/d2/struct__CLIENTINFO.html#o9">CallbackWnd</a>.<a class="code" href="../../d2/d7/struct__CALLBACKWND.html#o1">pwnd</a>;
00038     }
00039 
00040     <span class="comment">/*</span>
00041 <span class="comment">     * Validate the handle is of the proper type.</span>
00042 <span class="comment">     */</span>
00043     <span class="keywordflow">return</span> <a class="code" href="../../d6/d9/rtl_2wow_8c.html#a6">HMValidateHandle</a>(hwnd, TYPE_WINDOW);
00044 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a432" doxytag="usercli.h::ValidateHwndNoRip" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d6/d9/structtagWND.html">PWND</a> FASTCALL ValidateHwndNoRip           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hwnd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00047">47</a> of file <a class="el" href="../../d4/d8/client_2wow_8c-source.html">client/wow.c</a>.
<p>
References <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l00534">_CLIENTINFO::CallbackWnd</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00034">FASTCALL</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00192">GetClientInfo</a>, <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00353">HMValidateHandleNoRip()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00488">_CALLBACKWND::hwnd</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l00507">_CALLBACKWND::pwnd</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00906">TYPE_WINDOW</a>.
<p>
Referenced by <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l00460">DefDlgProcWorker()</a>, <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00574">DefWindowProcWorker()</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l02822">DispatchClientMessage()</a>, <a class="el" href="../../d0/d9/imectl_8c-source.html#l01379">ImeIsUsableContext()</a>, <a class="el" href="../../d0/d9/imectl_8c-source.html#l01339">ImeMarkUsedContext()</a>, <a class="el" href="../../d0/d9/imectl_8c-source.html#l00798">ImeSetContextHandler()</a>, <a class="el" href="../../d0/d9/imectl_8c-source.html#l00272">ImeWndCreateHandler()</a>, <a class="el" href="../../d6/d8/dlgmgr2_8c-source.html#l00230">IsDialogMessageA()</a>, <a class="el" href="../../d6/d8/dlgmgr2_8c-source.html#l00317">IsDialogMessageW()</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00277">IsWindow()</a>, <a class="el" href="../../d0/d9/imectl_8c-source.html#l01195">SendMessageToUI()</a>, <a class="el" href="../../d0/d6/register_8c-source.html#l00030">SendRegisterMessageToClass()</a>, and <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00096">TranslateMDISysAccel()</a>.
<p>
<pre class="fragment"><div>00049 {
00050     <a class="code" href="../../d2/d2/struct__CLIENTINFO.html">PCLIENTINFO</a> pci = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a16">GetClientInfo</a>();
00051 
00052     <span class="comment">/*</span>
00053 <span class="comment">     * Attempt fast window validation</span>
00054 <span class="comment">     */</span>
00055     <span class="keywordflow">if</span> (hwnd != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> &amp;&amp; hwnd == pci-&gt;<a class="code" href="../../d2/d2/struct__CLIENTINFO.html#o9">CallbackWnd</a>.<a class="code" href="../../d2/d7/struct__CALLBACKWND.html#o0">hwnd</a>) {
00056         <span class="keywordflow">return</span> pci-&gt;<a class="code" href="../../d2/d2/struct__CLIENTINFO.html#o9">CallbackWnd</a>.<a class="code" href="../../d2/d7/struct__CALLBACKWND.html#o1">pwnd</a>;
00057     }
00058 
00059     <span class="comment">/*</span>
00060 <span class="comment">     * Validate the handle is of the proper type.</span>
00061 <span class="comment">     */</span>
00062     <span class="keywordflow">return</span> <a class="code" href="../../d6/d9/rtl_2wow_8c.html#a8">HMValidateHandleNoRip</a>(hwnd, TYPE_WINDOW);
00063 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a770" doxytag="usercli.h::ValidateMENUINFO" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL ValidateMENUINFO           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">LPCMENUINFO&nbsp;</td>
          <td class="mdname" nowrap> <em>lpmi</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwAPICode</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d8/clmenu_8c-source.html#l00607">607</a> of file <a class="el" href="../../d0/d8/clmenu_8c-source.html">clmenu.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01991">MENUAPI_GET</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d0/d8/clmenu_8c-source.html#l00607">ValidateMENUINFO()</a>.
<p>
Referenced by <a class="el" href="../../d0/d8/clmenu_8c-source.html#l00652">GetMenuInfo()</a>, <a class="el" href="../../d8/d6/menuc_8c-source.html#l00115">SetMenuInfo()</a>, and <a class="el" href="../../d0/d8/clmenu_8c-source.html#l00607">ValidateMENUINFO()</a>.
<p>
<pre class="fragment"><div>00608 {
00609     VALIDATIONFNNAME(ValidateMENUINFO)
00610 
00611     if (lpmi == NULL) {
00612         VALIDATIONFAIL(lpmi);
00613     }
00614 
00615     <span class="keywordflow">if</span> (lpmi-&gt;cbSize != <span class="keyword">sizeof</span>(MENUINFO)) {
00616         VALIDATIONFAIL(lpmi-&gt;cbSize);
00617     }
00618 
00619     <span class="keywordflow">if</span> (lpmi-&gt;fMask &amp; ~MIM_MASK) {
00620         VALIDATIONFAIL(lpmi-&gt;fMask);
00621     }
00622 
00623     <span class="comment">/*</span>
00624 <span class="comment">     * No more validation needed for Get calls</span>
00625 <span class="comment">     */</span>
00626     <span class="keywordflow">if</span> (dwAPICode == <a class="code" href="../../d6/d0/usercli_8h.html#a255">MENUAPI_GET</a>){
00627         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00628     }
00629 
00630     <span class="keywordflow">if</span> ((lpmi-&gt;fMask &amp; MIM_STYLE) &amp;&amp; (lpmi-&gt;dwStyle &amp; ~MNS_VALID)) {
00631         VALIDATIONFAIL(lpmi-&gt;dwStyle);
00632     }
00633 
00634     <span class="keywordflow">if</span> (lpmi-&gt;fMask &amp; MIM_BACKGROUND) {
00635         <span class="keywordflow">if</span> ((lpmi-&gt;hbrBack != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00636                 &amp;&amp; !GdiValidateHandle((HBRUSH)lpmi-&gt;hbrBack)) {
00637 
00638             VALIDATIONFAIL(lpmi-&gt;hbrBack);
00639         }
00640     }
00641 
00642     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00643 
00644     VALIDATIONERROR(FALSE);
00645 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a769" doxytag="usercli.h::ValidateMENUITEMINFO" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL ValidateMENUITEMINFO           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">LPMENUITEMINFOW&nbsp;</td>
          <td class="mdname" nowrap> <em>lpmiiIn</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPMENUITEMINFOW&nbsp;</td>
          <td class="mdname" nowrap> <em>lpmii</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwAPICode</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d6/d8/cltxt_8h-source.html#l01643">GetMenuItemInfo()</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l01702">InsertMenuItem()</a>, and <a class="el" href="../../d6/d8/cltxt_8h-source.html#l01685">SetMenuItemInfo()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a647" doxytag="usercli.h::WowGetModuleFileName" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL WowGetModuleFileName           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HMODULE&nbsp;</td>
          <td class="mdname" nowrap> <em>hModule</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPWSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>pwsz</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cchMax</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d8/clres_8c-source.html#l00128">128</a> of file <a class="el" href="../../d5/d8/clres_8c-source.html">clres.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d5/d8/clres_8c-source.html#l03344">ConvertDIBIcon()</a>, and <a class="el" href="../../d5/d8/clres_8c-source.html#l02657">LoadIcoCur()</a>.
<p>
<pre class="fragment"><div>00132 {
00133     <span class="keywordflow">if</span> (!GetModuleFileName(hModule, pwsz, cchMax)) {
00134 
00135         <span class="keywordflow">if</span> (cchMax &lt; 10) {
00136             RIPMSG0(RIP_WARNING, <span class="stringliteral">"WowGetModuleFileName: exceeded Char-Max"</span>);
00137             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00138         }
00139 
00140         wsprintf(pwsz, TEXT(<span class="stringliteral">"\001%08lx"</span>), hModule);
00141     }
00142 
00143     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00144 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a648" doxytag="usercli.h::WowServerLoadCreateCursorIcon" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HICON WowServerLoadCreateCursorIcon           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hmod</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPTSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>lpModName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwExpWinVer</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPCTSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>lpName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cb</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PVOID&nbsp;</td>
          <td class="mdname" nowrap> <em>pcr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPTSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>lpType</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fClient</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a712" doxytag="usercli.h::xxxAlterHilite" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID xxxAlterHilite           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l03754">3754</a> of file <a class="el" href="../../d0/d1/lboxctl2_8c-source.html">lboxctl2.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00526">CItemInWindow()</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01948">tagLBIV::cMac</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01978">tagLBIV::fCaretOn</a>, <a class="el" href="../../d2/d3/fetypes_8h.html#a457a417">high</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01744">HILITEONLY</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00025">INT</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00480">IsSelected()</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01941">tagLBIV::iTop</a>, <a class="el" href="../../d2/d3/fetypes_8h.html#a457a418">low</a>, <a class="el" href="../../d9/d5/sertl_8c-source.html#l00332">max</a>, <a class="el" href="../../d6/d3/acpitabl_8h-source.html#l00366">min</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01745">SELONLY</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01028">SetSelected()</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01940">tagLBIV::spwnd</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01111">xxxInvertLBItem()</a>, and <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00430">xxxLBSetCaret()</a>.
<p>
Referenced by <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l03651">xxxLBBlockHilite()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01875">xxxLBButtonUp()</a>, and <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01290">xxxTrackMouse()</a>.
<p>
<pre class="fragment"><div>03761 {
03762     <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a> <a class="code" href="../../d2/d3/fetypes_8h.html#a457a418">low</a>;
03763     <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a> <a class="code" href="../../d2/d3/fetypes_8h.html#a457a417">high</a>;
03764     <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a> sLastInWindow;
03765     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fCaretOn;
03766     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fSelected;
03767 
03768     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(plb-&gt;spwnd);
03769 
03770     sLastInWindow = plb-&gt;iTop + <a class="code" href="../../d6/d0/usercli_8h.html#a713">CItemInWindow</a>(plb, TRUE);
03771     sLastInWindow = <a class="code" href="../../d5/d4/acpitabl_8h.html#a69">min</a>(sLastInWindow, plb-&gt;cMac - 1);
03772     <a class="code" href="../../d2/d3/fetypes_8h.html#a457a417">high</a> = <a class="code" href="../../d8/d6/sertl_8c.html#a1">max</a>(i, j) + 1;
03773 
03774     <span class="keywordflow">if</span> (fCaretOn = plb-&gt;fCaretOn) {
03775         <a class="code" href="../../d6/d0/usercli_8h.html#a695">xxxLBSetCaret</a>(plb, FALSE);
03776     }
03777 
03778     <span class="keywordflow">for</span> (<a class="code" href="../../d2/d3/fetypes_8h.html#a457a418">low</a> = <a class="code" href="../../d5/d4/acpitabl_8h.html#a69">min</a>(i, j); <a class="code" href="../../d2/d3/fetypes_8h.html#a457a418">low</a> &lt; <a class="code" href="../../d2/d3/fetypes_8h.html#a457a417">high</a>; <a class="code" href="../../d2/d3/fetypes_8h.html#a457a418">low</a>++) {
03779         <span class="keywordflow">if</span> (<a class="code" href="../../d2/d3/fetypes_8h.html#a457a418">low</a> != i) {
03780             <span class="keywordflow">if</span> (OpFlags &amp; <a class="code" href="../../d6/d0/usercli_8h.html#a248">HILITEONLY</a>) {
03781                 <span class="keywordflow">if</span> (fSelStatus) {
03782                     fSelected = <a class="code" href="../../d6/d0/usercli_8h.html#a687">IsSelected</a>(plb, low, SELONLY);
03783                 } <span class="keywordflow">else</span> {
03784                     fSelected = fHilite;
03785                 }
03786                 <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a687">IsSelected</a>(plb, low, HILITEONLY) != fSelected) {
03787                     <span class="keywordflow">if</span> (plb-&gt;iTop &lt;= <a class="code" href="../../d2/d3/fetypes_8h.html#a457a418">low</a> &amp;&amp; <a class="code" href="../../d2/d3/fetypes_8h.html#a457a418">low</a> &lt;= sLastInWindow) {
03788 
03789                         <span class="comment">/*</span>
03790 <span class="comment">                         * Invert the item only if it is visible</span>
03791 <span class="comment">                         */</span>
03792                         <a class="code" href="../../d6/d0/usercli_8h.html#a717">xxxInvertLBItem</a>(plb, low, fSelected);
03793                     }
03794                     <a class="code" href="../../d6/d0/usercli_8h.html#a694">SetSelected</a>(plb, low, fSelected, HILITEONLY);
03795                 }
03796             }
03797 
03798             <span class="keywordflow">if</span> (OpFlags &amp; <a class="code" href="../../d6/d0/usercli_8h.html#a249">SELONLY</a>) {
03799                 <a class="code" href="../../d6/d0/usercli_8h.html#a694">SetSelected</a>(plb, low, fHilite, SELONLY);
03800             }
03801         }
03802     }
03803 
03804     <span class="keywordflow">if</span> (fCaretOn) {
03805         <a class="code" href="../../d6/d0/usercli_8h.html#a695">xxxLBSetCaret</a>(plb, TRUE);
03806     }
03807 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a696" doxytag="usercli.h::xxxCaretDestroy" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID xxxCaretDestroy           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l03411">3411</a> of file <a class="el" href="../../d0/d1/lboxctl2_8c-source.html">lboxctl2.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01979">tagLBIV::fAddSelMode</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01975">tagLBIV::fCaptured</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01976">tagLBIV::fCaret</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01974">tagLBIV::fMouseDown</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01515">HWq</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00312">IDSYS_CARET</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00813">LBUP_NOTIFY</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00811">LBUP_RELEASECAPTURE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00814">LBUP_SUCCESS</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05388">NtUserKillTimer()</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01940">tagLBIV::spwnd</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01875">xxxLBButtonUp()</a>, and <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00430">xxxLBSetCaret()</a>.
<p>
Referenced by <a class="el" href="../../d7/d0/lb1_8c-source.html#l00032">ListBoxWndProcWorker()</a>.
<p>
<pre class="fragment"><div>03413 {
03414     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(plb-&gt;spwnd);
03415 
03416     <span class="comment">/*</span>
03417 <span class="comment">     * We're losing the focus.  Act like up clicks are happening so we release</span>
03418 <span class="comment">     * capture, set the current selection, notify the parent, etc.</span>
03419 <span class="comment">     */</span>
03420     <span class="keywordflow">if</span> (plb-&gt;fCaptured)
03421 
03422         <span class="comment">/*</span>
03423 <span class="comment">         * If we have the capture and we lost the focus, that means we already</span>
03424 <span class="comment">         * changed the selection and we have to notify also the parent about</span>
03425 <span class="comment">         * this. So we need to add also the LBUP_SUCCESS flag in this case.</span>
03426 <span class="comment">         */</span>
03427 
03428         <a class="code" href="../../d6/d0/usercli_8h.html#a740">xxxLBButtonUp</a>(plb, LBUP_RELEASECAPTURE | LBUP_NOTIFY |
03429             (plb-&gt;fMouseDown ? LBUP_SUCCESS : 0));
03430 
03431     <span class="keywordflow">if</span> (plb-&gt;fAddSelMode) {
03432 
03433         <span class="comment">/*</span>
03434 <span class="comment">         * Switch off the Caret blinking</span>
03435 <span class="comment">         */</span>
03436         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a208">NtUserKillTimer</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(plb-&gt;spwnd), IDSYS_CARET);
03437 
03438         <span class="comment">/*</span>
03439 <span class="comment">         * Make sure the caret goes away</span>
03440 <span class="comment">         */</span>
03441         <a class="code" href="../../d6/d0/usercli_8h.html#a695">xxxLBSetCaret</a>(plb, FALSE);
03442         plb-&gt;fAddSelMode = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
03443     }
03444 
03445     plb-&gt;fCaret = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
03446 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a672" doxytag="usercli.h::xxxCBCalcControlRects" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void xxxCBCalcControlRects           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d9/structtagCBox.html">PCBOX</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pcbox</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPRECT&nbsp;</td>
          <td class="mdname" nowrap> <em>lprcList</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d3/comboini_8c-source.html#l00253">253</a> of file <a class="el" href="../../d4/d3/comboini_8c-source.html">comboini.c</a>.
<p>
References <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01872">tagCBox::buttonrc</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01882">tagCBox::CBoxStyle</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01874">tagCBox::cxCombo</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01876">tagCBox::cxDrop</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01875">tagCBox::cyCombo</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01877">tagCBox::cyDrop</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01870">tagCBox::editrc</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01912">tagCBox::fRightAlign</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01914">tagCBox::hFont</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01514">HW</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01515">HWq</a>, <a class="el" href="../../d9/d5/sertl_8c-source.html#l00332">max</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06624">NtUserGetDC()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01556">NtUserReleaseDC</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01890">tagCBox::OwnerDraw</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01838">tagWND::rcWindow</a>, <a class="el" href="../../d4/d3/comboini_8c-source.html#l00019">RECALC_CYDROP</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00424">SDROPPABLE</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00652">SendMessage()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00245">SetRectEmpty</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01764">tagWND::spmenu</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01780">tagCBox::spwnd</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01781">tagCBox::spwndParent</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00202">SYSMET</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00065">szOneChar</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00362">ThreadLock</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00366">ThreadUnlock</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02319">WFWIN40COMPAT</a>.
<p>
Referenced by <a class="el" href="../../d4/d3/comboini_8c-source.html#l00070">xxxCBCreateHandler()</a>, and <a class="el" href="../../d4/d3/comboini_8c-source.html#l00589">xxxCBPosition()</a>.
<p>
<pre class="fragment"><div>00254 {
00255     HDC hdc;
00256     HANDLE hOldFont = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00257     <span class="keywordtype">int</span>             dyEdit, dxEdit;
00258     MEASUREITEMSTRUCT mis;
00259     SIZE size;
00260     HWND hwnd = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o0">spwnd</a>);
00261     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpwndParent;
00262 
00263     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o0">spwnd</a>);
00264 
00265     <span class="comment">/*</span>
00266 <span class="comment">     * Determine height of the edit control.  We can use this info to center</span>
00267 <span class="comment">     * the button with recpect to the edit/static text window.  For example</span>
00268 <span class="comment">     * this will be useful if owner draw and this window is tall.</span>
00269 <span class="comment">     */</span>
00270     hdc = <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a250">NtUserGetDC</a>(hwnd);
00271     <span class="keywordflow">if</span> (pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o24">hFont</a>) {
00272         hOldFont = SelectObject(hdc, pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o24">hFont</a>);
00273     }
00274 
00275     <span class="comment">// Add on CYEDGE just for some extra space in the edit field/static item.</span>
00276     <span class="comment">// It's really only for static text items, but we want static &amp; editable</span>
00277     <span class="comment">// controls to be the same height.</span>
00278     GetTextExtentPoint(hdc, szOneChar, 1, &amp;size);
00279     dyEdit = size.cy + <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CYEDGE);
00280 
00281     <span class="keywordflow">if</span> (hOldFont) {
00282         SelectObject(hdc, hOldFont);
00283     }
00284 
00285     <span class="comment">/*</span>
00286 <span class="comment">     * IanJa: was ReleaseDC(pcbox-&gt;hwnd, hdc);</span>
00287 <span class="comment">     */</span>
00288     <a class="code" href="../../d6/d0/usercli_8h.html#a211">NtUserReleaseDC</a>(hwnd, hdc);
00289 
00290     <span class="keywordflow">if</span> (pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o16">OwnerDraw</a>) {
00291         <span class="comment">// This is an ownerdraw combo.  Have the owner tell us how tall this</span>
00292         <span class="comment">// item is.</span>
00293         <span class="keywordtype">int</span> iOwnerDrawHeight;
00294 
00295         <span class="keywordflow">if</span> (iOwnerDrawHeight = pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o2">editrc</a>.bottom - pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o2">editrc</a>.top) {
00296             dyEdit = iOwnerDrawHeight;
00297         } <span class="keywordflow">else</span> {
00298             <span class="comment">/*</span>
00299 <span class="comment">             * No height has been defined yet for the static text window.  Send</span>
00300 <span class="comment">             * a measure item message to the parent</span>
00301 <span class="comment">             */</span>
00302             mis.CtlType = ODT_COMBOBOX;
00303             mis.CtlID = PtrToUlong(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o0">spwnd</a>-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o16">spmenu</a>);
00304             mis.itemID = (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)-1;
00305             mis.itemHeight = dyEdit;
00306             mis.itemData = 0;
00307 
00308             <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o1">spwndParent</a>, &amp;tlpwndParent);
00309             <a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a450">HW</a>(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o1">spwndParent</a>), WM_MEASUREITEM, mis.CtlID, (LPARAM)&amp;mis);
00310             <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndParent);
00311 
00312             dyEdit = mis.itemHeight;
00313         }
00314     }
00315     <span class="comment">/*</span>
00316 <span class="comment">     * Set the initial width to be the combo box rect.  Later we will shorten it</span>
00317 <span class="comment">     * if there is a dropdown button.</span>
00318 <span class="comment">     */</span>
00319     pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o5">cyCombo</a> = 2*<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CYFIXEDFRAME) + dyEdit;
00320     dxEdit = pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o4">cxCombo</a> - (2 * <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CXFIXEDFRAME));
00321 
00322     <span class="keywordflow">if</span> (pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o7">cyDrop</a> == <a class="code" href="../../d3/d4/comboini_8c.html#a0">RECALC_CYDROP</a>)
00323     {
00324         <span class="comment">// recompute the max height of the dropdown listbox -- full window</span>
00325         <span class="comment">// size MINUS edit/static height</span>
00326         pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o7">cyDrop</a> = <a class="code" href="../../d8/d6/sertl_8c.html#a1">max</a>((pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o0">spwnd</a>-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o6">rcWindow</a>.bottom - pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o0">spwnd</a>-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o6">rcWindow</a>.top) - pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o5">cyCombo</a>, 0);
00327 
00328         <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o0">spwnd</a>, WFWIN40COMPAT) &amp;&amp; (pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o7">cyDrop</a> == 23))
00329             <span class="comment">// This is VC++ 2.1's debug/release dropdown that they made super</span>
00330             <span class="comment">// small -- let's make 'em a wee bit bigger so the world can</span>
00331             <span class="comment">// continue to spin -- jeffbog -- 4/19/95 -- B#10029</span>
00332             pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o7">cyDrop</a> = 28;
00333     }
00334 
00335     <span class="comment">/*</span>
00336 <span class="comment">     * Determine the rectangles for each of the windows...  1.  Pop down button 2.</span>
00337 <span class="comment">     * Edit control or generic window for static text or ownerdraw...  3.  List</span>
00338 <span class="comment">     * box</span>
00339 <span class="comment">     */</span>
00340 
00341     <span class="comment">// Is there a button?</span>
00342     <span class="keywordflow">if</span> (pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o10">CBoxStyle</a> &amp; <a class="code" href="../../d6/d0/usercli_8h.html#a57">SDROPPABLE</a>) {
00343         <span class="comment">// Determine button's rectangle.</span>
00344         pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o3">buttonrc</a>.top = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CYEDGE);
00345         pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o3">buttonrc</a>.bottom = pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o5">cyCombo</a> - <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CYEDGE);
00346         <span class="keywordflow">if</span> (pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o22">fRightAlign</a>) {
00347             pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o3">buttonrc</a>.left  = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CXFIXEDFRAME);
00348             pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o3">buttonrc</a>.right = pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o3">buttonrc</a>.left + <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CXVSCROLL);
00349         } <span class="keywordflow">else</span> {
00350             pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o3">buttonrc</a>.right = pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o4">cxCombo</a> - <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CXEDGE);
00351             pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o3">buttonrc</a>.left  = pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o3">buttonrc</a>.right - <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CXVSCROLL);
00352         }
00353 
00354         <span class="comment">// Reduce the width of the edittext window to make room for the button.</span>
00355         dxEdit = <a class="code" href="../../d8/d6/sertl_8c.html#a1">max</a>(dxEdit - <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CXVSCROLL), 0);
00356 
00357     } <span class="keywordflow">else</span> {
00358 
00359         <span class="comment">/*</span>
00360 <span class="comment">         * No button so make the rectangle 0 so that a point in rect will always</span>
00361 <span class="comment">         * return false.</span>
00362 <span class="comment">         */</span>
00363         <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a35">SetRectEmpty</a>(&amp;pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o3">buttonrc</a>);
00364     }
00365 
00366     <span class="comment">/*</span>
00367 <span class="comment">     * So now, the edit rect is really the item area.</span>
00368 <span class="comment">     */</span>
00369     pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o2">editrc</a>.left      = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CXFIXEDFRAME);
00370     pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o2">editrc</a>.right     = pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o2">editrc</a>.left + dxEdit;
00371     pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o2">editrc</a>.top       = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CYFIXEDFRAME);
00372     pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o2">editrc</a>.bottom    = pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o2">editrc</a>.top + dyEdit;
00373 
00374     <span class="comment">// Is there a right-aligned button?</span>
00375     <span class="keywordflow">if</span> ((pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o10">CBoxStyle</a> &amp; <a class="code" href="../../d6/d0/usercli_8h.html#a57">SDROPPABLE</a>) &amp;&amp; (pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o22">fRightAlign</a>)) {
00376         pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o2">editrc</a>.right   = pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o4">cxCombo</a> - <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CXEDGE);
00377         pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o2">editrc</a>.left    = pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o2">editrc</a>.right - dxEdit;
00378     }
00379 
00380     lprcList-&gt;left          = 0;
00381     lprcList-&gt;top           = pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o5">cyCombo</a>;
00382     lprcList-&gt;right         = <a class="code" href="../../d8/d6/sertl_8c.html#a1">max</a>(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o6">cxDrop</a>, pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o4">cxCombo</a>);
00383     lprcList-&gt;bottom        = pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o5">cyCombo</a> + pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o7">cyDrop</a>;
00384 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a662" doxytag="usercli.h::xxxCBCommandHandler" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LONG xxxCBCommandHandler           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d9/structtagCBox.html">PCBOX</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HWND&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d3/combo_8c-source.html#l01494">1494</a> of file <a class="el" href="../../d2/d3/combo_8c-source.html">combo.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01883">tagCBox::fFocus</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01893">tagCBox::fKeyboardSelInListBox</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01906">tagCBox::fNoEdit</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01515">HWq</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00160">SAMEWOWHANDLE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01780">tagCBox::spwnd</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01791">tagCBox::spwndEdit</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01792">tagCBox::spwndList</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l02343">xxxCBGetFocusHelper()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l01719">xxxCBHideListBoxWindow()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l02028">xxxCBInternalUpdateEditWindow()</a>, <a class="el" href="../../d6/d0/usercli_8h.html#a674">xxxCBNotifyParent()</a>, and <a class="el" href="../../d2/d3/combo_8c-source.html#l02255">xxxCBUpdateListBoxWindow()</a>.
<p>
Referenced by <a class="el" href="../../d2/d3/combo_8c-source.html#l00207">ComboBoxWndProcWorker()</a>.
<p>
<pre class="fragment"><div>01498 {
01499 
01500     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pcbox-&gt;spwnd);
01501 
01502     <span class="comment">/*</span>
01503 <span class="comment">     * Check the edit control notification codes.  Note that currently, edit</span>
01504 <span class="comment">     * controls don't send EN_KILLFOCUS messages to the parent.</span>
01505 <span class="comment">     */</span>
01506     <span class="keywordflow">if</span> (!pcbox-&gt;fNoEdit &amp;&amp;
01507             <a class="code" href="../../d6/d0/usercli_8h.html#a15">SAMEWOWHANDLE</a>(hwndControl, <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(pcbox-&gt;spwndEdit))) {
01508 
01509         <span class="comment">/*</span>
01510 <span class="comment">         * Edit control notification codes</span>
01511 <span class="comment">         */</span>
01512         <span class="keywordflow">switch</span> (HIWORD(wParam)) {
01513         <span class="keywordflow">case</span> EN_SETFOCUS:
01514             <span class="keywordflow">if</span> (!pcbox-&gt;fFocus) {
01515 
01516                 <span class="comment">/*</span>
01517 <span class="comment">                 * The edit control has the focus for the first time which means</span>
01518 <span class="comment">                 * this is the first time the combo box has received the focus</span>
01519 <span class="comment">                 * and the parent must be notified that we have the focus.</span>
01520 <span class="comment">                 */</span>
01521                 <a class="code" href="../../d6/d0/usercli_8h.html#a677">xxxCBGetFocusHelper</a>(pcbox);
01522             }
01523             <span class="keywordflow">break</span>;
01524 
01525         <span class="keywordflow">case</span> EN_CHANGE:
01526             <a class="code" href="../../d6/d0/usercli_8h.html#a674">xxxCBNotifyParent</a>(pcbox, CBN_EDITCHANGE);
01527             <a class="code" href="../../d6/d0/usercli_8h.html#a675">xxxCBUpdateListBoxWindow</a>(pcbox, FALSE);
01528             <span class="keywordflow">break</span>;
01529 
01530         <span class="keywordflow">case</span> EN_UPDATE:
01531             <a class="code" href="../../d6/d0/usercli_8h.html#a674">xxxCBNotifyParent</a>(pcbox, CBN_EDITUPDATE);
01532             <span class="keywordflow">break</span>;
01533 
01534         <span class="keywordflow">case</span> EN_ERRSPACE:
01535             <a class="code" href="../../d6/d0/usercli_8h.html#a674">xxxCBNotifyParent</a>(pcbox, CBN_ERRSPACE);
01536             <span class="keywordflow">break</span>;
01537         }
01538     }
01539 
01540     <span class="comment">/*</span>
01541 <span class="comment">     * Check listbox control notification codes</span>
01542 <span class="comment">     */</span>
01543     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a15">SAMEWOWHANDLE</a>(hwndControl, <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(pcbox-&gt;spwndList))) {
01544 
01545         <span class="comment">/*</span>
01546 <span class="comment">         * Listbox control notification codes</span>
01547 <span class="comment">         */</span>
01548         <span class="keywordflow">switch</span> ((<span class="keywordtype">int</span>)HIWORD(wParam)) {
01549         <span class="keywordflow">case</span> LBN_DBLCLK:
01550             <a class="code" href="../../d6/d0/usercli_8h.html#a674">xxxCBNotifyParent</a>(pcbox, CBN_DBLCLK);
01551             <span class="keywordflow">break</span>;
01552 
01553         <span class="keywordflow">case</span> LBN_ERRSPACE:
01554             <a class="code" href="../../d6/d0/usercli_8h.html#a674">xxxCBNotifyParent</a>(pcbox, CBN_ERRSPACE);
01555             <span class="keywordflow">break</span>;
01556 
01557         <span class="keywordflow">case</span> LBN_SELCHANGE:
01558         <span class="keywordflow">case</span> LBN_SELCANCEL:
01559             <span class="keywordflow">if</span> (!pcbox-&gt;fKeyboardSelInListBox) {
01560 
01561                 <span class="comment">/*</span>
01562 <span class="comment">                 * If the selchange is caused by the user keyboarding through,</span>
01563 <span class="comment">                 * we don't want to hide the listbox.</span>
01564 <span class="comment">                 */</span>
01565                 <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d0/usercli_8h.html#a667">xxxCBHideListBoxWindow</a>(pcbox, TRUE, TRUE))
01566                     <span class="keywordflow">return</span>(0<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>);
01567             } <span class="keywordflow">else</span> {
01568                 pcbox-&gt;fKeyboardSelInListBox = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01569             }
01570 
01571             <a class="code" href="../../d6/d0/usercli_8h.html#a674">xxxCBNotifyParent</a>(pcbox, CBN_SELCHANGE);
01572             <a class="code" href="../../d6/d0/usercli_8h.html#a676">xxxCBInternalUpdateEditWindow</a>(pcbox, NULL);
01573             <span class="keywordflow">break</span>;
01574         }
01575     }
01576 
01577     <span class="keywordflow">return</span> 0<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>;
01578 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a666" doxytag="usercli.h::xxxCBCompleteEditWindow" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID xxxCBCompleteEditWindow           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d9/structtagCBox.html">PCBOX</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pcbox</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d3/combo_8c-source.html#l01624">1624</a> of file <a class="el" href="../../d2/d3/combo_8c-source.html">combo.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00270">SendMessageWorker()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01780">tagCBox::spwnd</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01791">tagCBox::spwndEdit</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01792">tagCBox::spwndList</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00362">ThreadLock</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00366">ThreadUnlock</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00368">Unlock</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00958">UserLocalAlloc</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00960">UserLocalFree</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02286">WFANSIPROC</a>.
<p>
Referenced by <a class="el" href="../../d2/d3/combo_8c-source.html#l00207">ComboBoxWndProcWorker()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l01719">xxxCBHideListBoxWindow()</a>, and <a class="el" href="../../d2/d3/combo_8c-source.html#l01819">xxxCBShowListBoxWindow()</a>.
<p>
<pre class="fragment"><div>01626 {
01627     <span class="keywordtype">int</span> cchText;
01628     <span class="keywordtype">int</span> cchItemText;
01629     <span class="keywordtype">int</span> itemNumber;
01630     LPWSTR pText;
01631     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpwndEdit;
01632     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpwndList;
01633 
01634     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o0">spwnd</a>);
01635 
01636     <span class="comment">/*</span>
01637 <span class="comment">     * Firstly check the edit control.</span>
01638 <span class="comment">     */</span>
01639     <span class="keywordflow">if</span> (pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o8">spwndEdit</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01640         <span class="keywordflow">return</span>;
01641     }
01642 
01643     <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o8">spwndEdit</a>, &amp;tlpwndEdit);
01644     <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o9">spwndList</a>, &amp;tlpwndList);
01645 
01646     <span class="comment">/*</span>
01647 <span class="comment">     * +1 for null terminator</span>
01648 <span class="comment">     */</span>
01649     cchText = (<span class="keywordtype">int</span>)<a class="code" href="../../d6/d0/usercli_8h.html#a600">SendMessageWorker</a>(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o8">spwndEdit</a>, WM_GETTEXTLENGTH, 0, 0, FALSE);
01650 
01651     <span class="keywordflow">if</span> (cchText) {
01652         cchText++;
01653         <span class="keywordflow">if</span> (!(pText = (LPWSTR)<a class="code" href="../../d6/d0/usercli_8h.html#a136">UserLocalAlloc</a>(HEAP_ZERO_MEMORY, cchText*<span class="keyword">sizeof</span>(WCHAR))))
01654             <span class="keywordflow">goto</span> <a class="code" href="../../d6/d0/usercli_8h.html#a42">Unlock</a>;
01655 
01656         <span class="comment">/*</span>
01657 <span class="comment">         * We want to be sure to free the above allocated memory even if</span>
01658 <span class="comment">         * the client dies during callback (xxx) or some of the following</span>
01659 <span class="comment">         * window revalidation fails.</span>
01660 <span class="comment">         */</span>
01661         <span class="keywordflow">try</span> {
01662             <a class="code" href="../../d6/d0/usercli_8h.html#a600">SendMessageWorker</a>(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o8">spwndEdit</a>, WM_GETTEXT, cchText, (LPARAM)pText, FALSE);
01663             itemNumber = (<span class="keywordtype">int</span>)<a class="code" href="../../d6/d0/usercli_8h.html#a600">SendMessageWorker</a>(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o9">spwndList</a>,
01664                     LB_FINDSTRINGEXACT, (WPARAM)-1, (LPARAM)pText, FALSE);
01665             <span class="keywordflow">if</span> (itemNumber == -1)
01666                 itemNumber = (<span class="keywordtype">int</span>)<a class="code" href="../../d6/d0/usercli_8h.html#a600">SendMessageWorker</a>(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o9">spwndList</a>,
01667                         LB_FINDSTRING, (WPARAM)-1, (LPARAM)pText, FALSE);
01668         } finally {
01669             <a class="code" href="../../d6/d0/usercli_8h.html#a138">UserLocalFree</a>((HANDLE)pText);
01670         }
01671 
01672         <span class="keywordflow">if</span> (itemNumber == -1) {
01673 
01674             <span class="comment">/*</span>
01675 <span class="comment">             * No close match.  Blow off.</span>
01676 <span class="comment">             */</span>
01677             <span class="keywordflow">goto</span> <a class="code" href="../../d6/d0/usercli_8h.html#a42">Unlock</a>;
01678         }
01679 
01680         cchItemText = (<span class="keywordtype">int</span>)<a class="code" href="../../d6/d0/usercli_8h.html#a600">SendMessageWorker</a>(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o9">spwndList</a>, LB_GETTEXTLEN,
01681                 itemNumber, 0, FALSE);
01682         <span class="keywordflow">if</span> (cchItemText) {
01683             cchItemText++;
01684             <span class="keywordflow">if</span> (!(pText = (LPWSTR)<a class="code" href="../../d6/d0/usercli_8h.html#a136">UserLocalAlloc</a>(HEAP_ZERO_MEMORY, cchItemText*<span class="keyword">sizeof</span>(WCHAR))))
01685                 <span class="keywordflow">goto</span> <a class="code" href="../../d6/d0/usercli_8h.html#a42">Unlock</a>;
01686 
01687             <span class="comment">/*</span>
01688 <span class="comment">             * We want to be sure to free the above allocated memory even if</span>
01689 <span class="comment">             * the client dies during callback (xxx) or some of the following</span>
01690 <span class="comment">             * window revalidation fails.</span>
01691 <span class="comment">             */</span>
01692             <span class="keywordflow">try</span> {
01693                 <a class="code" href="../../d6/d0/usercli_8h.html#a600">SendMessageWorker</a>(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o9">spwndList</a>, LB_GETTEXT,
01694                         itemNumber, (LPARAM)pText, FALSE);
01695                 <a class="code" href="../../d6/d0/usercli_8h.html#a600">SendMessageWorker</a>(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o8">spwndEdit</a>, WM_SETTEXT,
01696                         0, (LPARAM)pText, FALSE);
01697             } finally {
01698                 <a class="code" href="../../d6/d0/usercli_8h.html#a138">UserLocalFree</a>((HANDLE)pText);
01699             }
01700 
01701             <a class="code" href="../../d6/d0/usercli_8h.html#a600">SendMessageWorker</a>(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o8">spwndEdit</a>, EM_SETSEL, 0, MAXLONG, !!<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o0">spwnd</a>, WFANSIPROC));
01702         }
01703     }
01704 
01705 <a class="code" href="../../d6/d0/usercli_8h.html#a42">Unlock</a>:
01706     <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndList);
01707     <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndEdit);
01708 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a671" doxytag="usercli.h::xxxCBCreateHandler" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LRESULT xxxCBCreateHandler           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d9/structtagCBox.html">PCBOX</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d3/comboini_8c-source.html#l00070">70</a> of file <a class="el" href="../../d4/d3/comboini_8c-source.html">comboini.c</a>.
<p>
References <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l01197">_CreateWindowEx()</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01297">tagSERVERINFO::atomSysClass</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00417">CBEDITID</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02471">CBFAUTOHSCROLL</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02476">CBFDISABLENOSCROLL</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02460">CBFDROPDOWN</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02461">CBFDROPDOWNLIST</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02474">CBFHASSTRINGS</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02480">CBFLOWERCASE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02475">CBFNOINTEGRALHEIGHT</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02472">CBFOEMCONVERT</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02467">CBFOWNERDRAWFIXED</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02468">CBFOWNERDRAWVAR</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02473">CBFSORT</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02479">CBFUPPERCASE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00416">CBLISTBOXID</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01882">tagCBox::CBoxStyle</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01874">tagCBox::cxCombo</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01876">tagCBox::cxDrop</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01877">tagCBox::cyDrop</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01870">tagCBox::editrc</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01903">tagCBox::fCase</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01906">tagCBox::fNoEdit</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01912">tagCBox::fRightAlign</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01913">tagCBox::fRtoLReading</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00051">gpsi</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01514">HW</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00354">ICLS_COMBOLISTBOX</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00340">ICLS_EDIT</a>, <a class="el" href="../../d4/d5/rect_8c-source.html#l00165">InflateRect()</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00448">LBS_COMBOBOX</a>, <a class="el" href="../../d6/d8/ntrtlp_8h-source.html#l00183">LOBYTE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00367">Lock</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00440">LOWERCASE</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05955">NtUserSetParent()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06274">NtUserShowWindow()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01890">tagCBox::OwnerDraw</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00436">OWNERDRAWFIXED</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00437">OWNERDRAWVAR</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01838">tagWND::rcWindow</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00215">REBASEPWND</a>, <a class="el" href="../../d4/d3/comboini_8c-source.html#l00019">RECALC_CYDROP</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00430">SDROPDOWN</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00429">SDROPDOWNLIST</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00424">SDROPPABLE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01780">tagCBox::spwnd</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01791">tagCBox::spwndEdit</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01792">tagCBox::spwndList</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01781">tagCBox::spwndParent</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00428">SSIMPLE</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01915">tagCBox::styleSave</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00202">SYSMET</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00439">UPPERCASE</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00120">ValidateHwnd</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02372">WEFRIGHT</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02373">WEFRTLREADING</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02302">WFANSICREATOR</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02418">WFDISABLED</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02319">WFWIN40COMPAT</a>, <a class="el" href="../../d4/d3/comboini_8c-source.html#l00253">xxxCBCalcControlRects()</a>, and <a class="el" href="../../d4/d3/comboini_8c-source.html#l00617">xxxCBSetDroppedSize()</a>.
<p>
Referenced by <a class="el" href="../../d2/d3/combo_8c-source.html#l00207">ComboBoxWndProcWorker()</a>.
<p>
<pre class="fragment"><div>00073 {
00074     LONG lStyleT;
00075     RECT rcList;
00076     HWND hwndList;
00077     HWND hwndEdit;
00078     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> lExStyle;
00079 
00080     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pwnd);
00081 
00082     <span class="comment">/*</span>
00083 <span class="comment">     * Don't lock the combobox window: this would prevent WM_FINALDESTROY</span>
00084 <span class="comment">     * being sent to it, so pwnd and pcbox wouldn't get freed (zombies)</span>
00085 <span class="comment">     * until thread cleanup. (IanJa)  LATER: change name from spwnd to pwnd.</span>
00086 <span class="comment">     * Lock(&amp;pcbox-&gt;spwnd, pwnd); - caused a 'catch-22'</span>
00087 <span class="comment">     */</span>
00088     <a class="code" href="../../d6/d0/usercli_8h.html#a41">Lock</a>(&amp;(pcbox-&gt;spwndParent), <a class="code" href="../../d6/d0/usercli_8h.html#a27">REBASEPWND</a>(pwnd, spwndParent));
00089 
00090     <span class="comment">/*</span>
00091 <span class="comment">     * Break out the style bits so that we will be able to create the listbox</span>
00092 <span class="comment">     * and editcontrol windows.</span>
00093 <span class="comment">     */</span>
00094 
00095     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, CBFDROPDOWNLIST) == <a class="code" href="../../d5/d9/ntrtlp_8h.html#a4">LOBYTE</a>(CBFDROPDOWNLIST)) {
00096         pcbox-&gt;CBoxStyle = <a class="code" href="../../d6/d0/usercli_8h.html#a60">SDROPDOWNLIST</a>;
00097         pcbox-&gt;fNoEdit = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00098     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, CBFDROPDOWN))
00099         pcbox-&gt;CBoxStyle = <a class="code" href="../../d6/d0/usercli_8h.html#a61">SDROPDOWN</a>;
00100     <span class="keywordflow">else</span>
00101         pcbox-&gt;CBoxStyle = <a class="code" href="../../d6/d0/usercli_8h.html#a59">SSIMPLE</a>;
00102 
00103     pcbox-&gt;fRtoLReading = (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WEFRTLREADING) != 0);
00104     pcbox-&gt;fRightAlign  = (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WEFRIGHT) != 0);
00105 
00106     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, CBFUPPERCASE))
00107         pcbox-&gt;fCase = <a class="code" href="../../d6/d0/usercli_8h.html#a64">UPPERCASE</a>;
00108     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, CBFLOWERCASE))
00109         pcbox-&gt;fCase = <a class="code" href="../../d6/d0/usercli_8h.html#a65">LOWERCASE</a>;
00110     <span class="keywordflow">else</span>
00111         pcbox-&gt;fCase = 0;
00112 
00113     <span class="comment">// Listbox item flags.</span>
00114     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, CBFOWNERDRAWVAR))
00115         pcbox-&gt;OwnerDraw = <a class="code" href="../../d6/d0/usercli_8h.html#a63">OWNERDRAWVAR</a>;
00116     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, CBFOWNERDRAWFIXED)) {
00117         pcbox-&gt;OwnerDraw = <a class="code" href="../../d6/d0/usercli_8h.html#a62">OWNERDRAWFIXED</a>;
00118     }
00119 
00120     <span class="comment">/*</span>
00121 <span class="comment">     * Get the size of the combo box rectangle.</span>
00122 <span class="comment">     */</span>
00123     <span class="comment">// Get control sizes.</span>
00124     pcbox-&gt;cxCombo = pwnd-&gt;rcWindow.right - pwnd-&gt;rcWindow.left;
00125     pcbox-&gt;cyDrop  = <a class="code" href="../../d3/d4/comboini_8c.html#a0">RECALC_CYDROP</a>;
00126     pcbox-&gt;cxDrop  = 0;
00127     <a class="code" href="../../d6/d0/usercli_8h.html#a672">xxxCBCalcControlRects</a>(pcbox, &amp;rcList);
00128 
00129     <span class="comment">//</span>
00130     <span class="comment">// We need to do this because listboxes, as of VER40, have stopped</span>
00131     <span class="comment">// reinflating themselves by CXBORDER and CYBORDER.</span>
00132     <span class="comment">//</span>
00133     <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFWIN40COMPAT))
00134         <a class="code" href="../../d3/d6/rect_8c.html#a7">InflateRect</a>(&amp;rcList, -<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CXBORDER), -<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CYBORDER));
00135 
00136     <span class="comment">/*</span>
00137 <span class="comment">     * Note that we have to create the listbox before the editcontrol since the</span>
00138 <span class="comment">     * editcontrol code looks for and saves away the listbox pwnd and the</span>
00139 <span class="comment">     * listbox pwnd will be NULL if we don't create it first.  Also, hack in</span>
00140 <span class="comment">     * some special +/- values for the listbox size due to the way we create</span>
00141 <span class="comment">     * listboxes with borders.</span>
00142 <span class="comment">     */</span>
00143     lStyleT = pcbox-&gt;styleSave;
00144 
00145     lStyleT |= WS_CHILD | WS_VISIBLE | LBS_NOTIFY | <a class="code" href="../../d6/d0/usercli_8h.html#a67">LBS_COMBOBOX</a> | WS_CLIPSIBLINGS;
00146 
00147     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFDISABLED))
00148         lStyleT |= WS_DISABLED;
00149     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, CBFNOINTEGRALHEIGHT))
00150         lStyleT |= LBS_NOINTEGRALHEIGHT;
00151     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, CBFSORT))
00152         lStyleT |= LBS_SORT;
00153     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, CBFHASSTRINGS))
00154         lStyleT |= LBS_HASSTRINGS;
00155     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, CBFDISABLENOSCROLL))
00156         lStyleT |= LBS_DISABLENOSCROLL;
00157 
00158     <span class="keywordflow">if</span> (pcbox-&gt;OwnerDraw == <a class="code" href="../../d6/d0/usercli_8h.html#a63">OWNERDRAWVAR</a>)
00159         lStyleT |= LBS_OWNERDRAWVARIABLE;
00160     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pcbox-&gt;OwnerDraw == <a class="code" href="../../d6/d0/usercli_8h.html#a62">OWNERDRAWFIXED</a>)
00161         lStyleT |= LBS_OWNERDRAWFIXED;
00162 
00163     <span class="keywordflow">if</span> (pcbox-&gt;CBoxStyle &amp; <a class="code" href="../../d6/d0/usercli_8h.html#a57">SDROPPABLE</a>)
00164         lStyleT |= WS_BORDER;
00165 
00166     lExStyle = pwnd-&gt;ExStyle &amp; (WS_EX_RIGHT | WS_EX_RTLREADING | WS_EX_LEFTSCROLLBAR);
00167     hwndList = <a class="code" href="../../d6/d0/usercli_8h.html#a624">_CreateWindowEx</a>(lExStyle |
00168             ((pcbox-&gt;CBoxStyle &amp; SDROPPABLE) ? WS_EX_TOOLWINDOW : WS_EX_CLIENTEDGE),
00169             MAKEINTRESOURCE(<a class="code" href="../../d1/d8/clglobal_8c.html#a4">gpsi</a>-&gt;<a class="code" href="../../d2/d6/structtagSERVERINFO.html#o12">atomSysClass</a>[ICLS_COMBOLISTBOX]), NULL, lStyleT,
00170             rcList.left, rcList.top, rcList.right - rcList.left,
00171             rcList.bottom - rcList.top,
00172             <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a450">HW</a>(pwnd), (HMENU)CBLISTBOXID, pcbox-&gt;spwnd-&gt;hModule, NULL,
00173             0);
00174     <a class="code" href="../../d6/d0/usercli_8h.html#a41">Lock</a>(&amp;(pcbox-&gt;spwndList), <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(hwndList));
00175 
00176     <span class="keywordflow">if</span> (!pcbox-&gt;spwndList) {
00177         <span class="keywordflow">return</span> -1;
00178     }
00179 
00180     <span class="comment">/*</span>
00181 <span class="comment">     * Create either the edit control or the static text rectangle.</span>
00182 <span class="comment">     */</span>
00183     <span class="keywordflow">if</span> (pcbox-&gt;fNoEdit) {
00184 
00185         <span class="comment">/*</span>
00186 <span class="comment">         * No editcontrol so we will draw text directly into the combo box</span>
00187 <span class="comment">         * window.</span>
00188 <span class="comment">         */</span>
00189         <span class="comment">/*</span>
00190 <span class="comment">         * Don't lock the combobox window: this would prevent WM_FINALDESTROY</span>
00191 <span class="comment">         * being sent to it, so pwnd and pcbox wouldn't get freed (zombies)</span>
00192 <span class="comment">         * until thread cleanup. (IanJa)  LATER: change name from spwnd to pwnd.</span>
00193 <span class="comment">         * Lock(&amp;(pcbox-&gt;spwndEdit), pcbox-&gt;spwnd); - caused a 'catch-22'</span>
00194 <span class="comment">         */</span>
00195         pcbox-&gt;spwndEdit = pcbox-&gt;spwnd;
00196     } <span class="keywordflow">else</span> {
00197         <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwCsFlags;
00198 
00199         lStyleT = WS_CHILD | WS_VISIBLE | ES_COMBOBOX | ES_NOHIDESEL;
00200         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFDISABLED))
00201             lStyleT |= WS_DISABLED;
00202         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, CBFAUTOHSCROLL))
00203             lStyleT |= ES_AUTOHSCROLL;
00204         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, CBFOEMCONVERT))
00205             lStyleT |= ES_OEMCONVERT;
00206         <span class="keywordflow">if</span> (pcbox-&gt;fCase)
00207             lStyleT |= (pcbox-&gt;fCase &amp; <a class="code" href="../../d6/d0/usercli_8h.html#a64">UPPERCASE</a>) ? ES_UPPERCASE : ES_LOWERCASE;
00208 
00209         <span class="comment">/*</span>
00210 <span class="comment">         * Edit control need to know whether original CreateWindow*() call</span>
00211 <span class="comment">         * was ANSI or Unicode.</span>
00212 <span class="comment">         */</span>
00213         dwCsFlags = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pcbox-&gt;spwnd, WFANSICREATOR) ? CW_FLAGS_ANSI : 0<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>;
00214         <span class="keywordflow">if</span> (lExStyle &amp; WS_EX_RIGHT)
00215             lStyleT |= ES_RIGHT;
00216 
00217         hwndEdit = <a class="code" href="../../d6/d0/usercli_8h.html#a624">_CreateWindowEx</a>(lExStyle,
00218             MAKEINTRESOURCE(<a class="code" href="../../d1/d8/clglobal_8c.html#a4">gpsi</a>-&gt;<a class="code" href="../../d2/d6/structtagSERVERINFO.html#o12">atomSysClass</a>[ICLS_EDIT]), NULL, lStyleT,
00219             pcbox-&gt;editrc.left, pcbox-&gt;editrc.top,
00220             pcbox-&gt;editrc.right - pcbox-&gt;editrc.left, pcbox-&gt;editrc.bottom -
00221             pcbox-&gt;editrc.top, <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a450">HW</a>(pwnd), (HMENU)CBEDITID,
00222             pcbox-&gt;spwnd-&gt;hModule, NULL,
00223             dwCsFlags);
00224         <a class="code" href="../../d6/d0/usercli_8h.html#a41">Lock</a>(&amp;(pcbox-&gt;spwndEdit), <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(hwndEdit));
00225     }
00226     <span class="keywordflow">if</span> (!pcbox-&gt;spwndEdit)
00227         <span class="keywordflow">return</span> -1<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>;
00228 
00229     <span class="keywordflow">if</span> (pcbox-&gt;CBoxStyle &amp; <a class="code" href="../../d6/d0/usercli_8h.html#a57">SDROPPABLE</a>) {
00230 
00231         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a237">NtUserShowWindow</a>(hwndList, SW_HIDE);
00232         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a227">NtUserSetParent</a>(hwndList, NULL);
00233 
00234         <span class="comment">// We need to do this so dropped size works right</span>
00235         <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFWIN40COMPAT))
00236             <a class="code" href="../../d3/d6/rect_8c.html#a7">InflateRect</a>(&amp;rcList, <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CXBORDER), <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CYBORDER));
00237 
00238         <a class="code" href="../../d3/d4/comboini_8c.html#a2">xxxCBSetDroppedSize</a>(pcbox, &amp;rcList);
00239     }
00240 
00241     <span class="comment">/*</span>
00242 <span class="comment">     * return anything as long as it's not -1L (-1L == error)</span>
00243 <span class="comment">     */</span>
00244     <span class="keywordflow">return</span> (LRESULT)pwnd;
00245 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a664" doxytag="usercli.h::xxxCBDir" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int xxxCBDir           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d9/structtagCBox.html">PCBOX</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPWSTR&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d3/d3/combodir_8c-source.html#l00028">28</a> of file <a class="el" href="../../d3/d3/combodir_8c-source.html">combodir.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01940">tagLBIV::spwnd</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01780">tagCBox::spwnd</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01792">tagCBox::spwndList</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00362">ThreadLock</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00366">ThreadUnlock</a>, and <a class="el" href="../../d1/d1/lboxctl3_8c-source.html#l00839">xxxLbDir()</a>.
<p>
Referenced by <a class="el" href="../../d2/d3/combo_8c-source.html#l00207">ComboBoxWndProcWorker()</a>.
<p>
<pre class="fragment"><div>00032 {
00033     <a class="code" href="../../d7/d9/structtagLBIV.html">PLBIV</a> plb;
00034     <span class="keywordtype">int</span> errorValue;
00035     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpwnd;
00036 
00037     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pcbox-&gt;spwnd);
00038     UserAssert(pcbox-&gt;spwndList);
00039 
00040     plb = ((<a class="code" href="../../d9/d9/structtagLBWND.html">PLBWND</a>)pcbox-&gt;spwndList)-&gt;pLBIV;
00041 
00042     <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o1">spwnd</a>, &amp;tlpwnd);
00043     errorValue = <a class="code" href="../../d6/d0/usercli_8h.html#a728">xxxLbDir</a>(plb, attrib, pFileName);
00044     <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwnd);
00045 
00046     <span class="keywordflow">switch</span> (errorValue) {
00047     <span class="keywordflow">case</span> LB_ERR:
00048         <span class="keywordflow">return</span> CB_ERR;
00049         <span class="keywordflow">break</span>;
00050     <span class="keywordflow">case</span> LB_ERRSPACE:
00051         <span class="keywordflow">return</span> CB_ERRSPACE;
00052         <span class="keywordflow">break</span>;
00053     <span class="keywordflow">default</span>:
00054         <span class="keywordflow">return</span> errorValue;
00055         <span class="keywordflow">break</span>;
00056     }
00057 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a677" doxytag="usercli.h::xxxCBGetFocusHelper" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID xxxCBGetFocusHelper           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d9/structtagCBox.html">PCBOX</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d3/combo_8c-source.html#l02343">2343</a> of file <a class="el" href="../../d2/d3/combo_8c-source.html">combo.c</a>.
<p>
References <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01882">tagCBox::CBoxStyle</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01883">tagCBox::fFocus</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01906">tagCBox::fNoEdit</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00429">SDROPDOWNLIST</a>, <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00270">SendMessageWorker()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01780">tagCBox::spwnd</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01791">tagCBox::spwndEdit</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01792">tagCBox::spwndList</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00362">ThreadLock</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00366">ThreadUnlock</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02286">WFANSIPROC</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l02230">xxxCBInvertStaticWindow()</a>, and <a class="el" href="../../d6/d0/usercli_8h.html#a674">xxxCBNotifyParent()</a>.
<p>
Referenced by <a class="el" href="../../d2/d3/combo_8c-source.html#l00207">ComboBoxWndProcWorker()</a>, and <a class="el" href="../../d2/d3/combo_8c-source.html#l01494">xxxCBCommandHandler()</a>.
<p>
<pre class="fragment"><div>02345 {
02346     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpwndList;
02347     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpwndEdit;
02348 
02349     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pcbox-&gt;spwnd);
02350 
02351     <span class="keywordflow">if</span> (pcbox-&gt;fFocus)
02352         <span class="keywordflow">return</span>;
02353 
02354     <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(pcbox-&gt;spwndList, &amp;tlpwndList);
02355     <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(pcbox-&gt;spwndEdit, &amp;tlpwndEdit);
02356 
02357     <span class="comment">/*</span>
02358 <span class="comment">     * The combo box has gotten the focus for the first time.</span>
02359 <span class="comment">     */</span>
02360 
02361     <span class="comment">/*</span>
02362 <span class="comment">     * First turn on the listbox caret</span>
02363 <span class="comment">     */</span>
02364 
02365     <span class="keywordflow">if</span> (pcbox-&gt;CBoxStyle == <a class="code" href="../../d6/d0/usercli_8h.html#a60">SDROPDOWNLIST</a>)
02366        <a class="code" href="../../d6/d0/usercli_8h.html#a600">SendMessageWorker</a>(pcbox-&gt;spwndList, LBCB_CARETON, 0, 0, FALSE);
02367 
02368     <span class="comment">/*</span>
02369 <span class="comment">     * and select all the text in the editcontrol or static text rectangle.</span>
02370 <span class="comment">     */</span>
02371 
02372     <span class="keywordflow">if</span> (pcbox-&gt;fNoEdit) {
02373 
02374         <span class="comment">/*</span>
02375 <span class="comment">         * Invert the static text rectangle</span>
02376 <span class="comment">         */</span>
02377         <a class="code" href="../../d6/d0/usercli_8h.html#a679">xxxCBInvertStaticWindow</a>(pcbox, TRUE, (HDC)NULL);
02378     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pcbox-&gt;spwndEdit) {
02379         UserAssert(pcbox-&gt;spwnd);
02380         <a class="code" href="../../d6/d0/usercli_8h.html#a600">SendMessageWorker</a>(pcbox-&gt;spwndEdit, EM_SETSEL, 0, MAXLONG, !!<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pcbox-&gt;spwnd, WFANSIPROC));
02381     }
02382 
02383     pcbox-&gt;fFocus = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
02384 
02385     <span class="comment">/*</span>
02386 <span class="comment">     * Notify the parent we have the focus</span>
02387 <span class="comment">     */</span>
02388     <a class="code" href="../../d6/d0/usercli_8h.html#a674">xxxCBNotifyParent</a>(pcbox, CBN_SETFOCUS);
02389 
02390     <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndEdit);
02391     <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndList);
02392 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a667" doxytag="usercli.h::xxxCBHideListBoxWindow" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL xxxCBHideListBoxWindow           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d9/structtagCBox.html">PCBOX</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pcbox</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fNotifyParent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fSelEndOK</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d3/combo_8c-source.html#l01719">1719</a> of file <a class="el" href="../../d2/d3/combo_8c-source.html">combo.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01882">tagCBox::CBoxStyle</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01874">tagCBox::cxCombo</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01875">tagCBox::cyCombo</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01870">tagCBox::editrc</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01889">tagCBox::fLBoxVisible</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01515">HWq</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00277">IsWindow()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05330">NtUserInvalidateRect()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l02180">NtUserSetWindowPos()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06274">NtUserShowWindow()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00424">SDROPPABLE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00425">SEDITABLE</a>, <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00270">SendMessageWorker()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01780">tagCBox::spwnd</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01792">tagCBox::spwndList</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00362">ThreadLock</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00366">ThreadUnlock</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l03608">UpdateWindow()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02318">WFWIN31COMPAT</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l01624">xxxCBCompleteEditWindow()</a>, and <a class="el" href="../../d6/d0/usercli_8h.html#a674">xxxCBNotifyParent()</a>.
<p>
Referenced by <a class="el" href="../../d2/d3/combo_8c-source.html#l00207">ComboBoxWndProcWorker()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l01494">xxxCBCommandHandler()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l02402">xxxCBKillFocusHelper()</a>, <a class="el" href="../../d4/d3/comboini_8c-source.html#l00617">xxxCBSetDroppedSize()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02183">xxxLBoxCtlKeyInput()</a>, and <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01290">xxxTrackMouse()</a>.
<p>
<pre class="fragment"><div>01723 {
01724     HWND hwnd = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o0">spwnd</a>);
01725     HWND hwndList = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o9">spwndList</a>);
01726     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpwndList;
01727 
01728 
01729     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o0">spwnd</a>);
01730 
01731     <span class="comment">// For 3.1+ apps, send CBN_SELENDOK to all types of comboboxes but only</span>
01732     <span class="comment">// allow CBN_SELENDCANCEL to be sent for droppable comboboxes</span>
01733     <span class="keywordflow">if</span> (fNotifyParent &amp;&amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o0">spwnd</a>, WFWIN31COMPAT) &amp;&amp;
01734         ((pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o10">CBoxStyle</a> &amp; <a class="code" href="../../d6/d0/usercli_8h.html#a57">SDROPPABLE</a>) || fSelEndOK)) {
01735         <span class="keywordflow">if</span> (fSelEndOK)
01736         {
01737             <a class="code" href="../../d6/d0/usercli_8h.html#a674">xxxCBNotifyParent</a>(pcbox, CBN_SELENDOK);
01738         }
01739         <span class="keywordflow">else</span>
01740         {
01741             <a class="code" href="../../d6/d0/usercli_8h.html#a674">xxxCBNotifyParent</a>(pcbox, CBN_SELENDCANCEL);
01742         }
01743         <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d9/client_2wow_8c.html#a11">IsWindow</a>(hwnd))
01744             <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
01745     }
01746 
01747     <span class="comment">/*</span>
01748 <span class="comment">     * return, we don't hide simple combo boxes.</span>
01749 <span class="comment">     */</span>
01750     <span class="keywordflow">if</span> (!(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o10">CBoxStyle</a> &amp; <a class="code" href="../../d6/d0/usercli_8h.html#a57">SDROPPABLE</a>)) {
01751         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01752     }
01753 
01754     <span class="comment">/*</span>
01755 <span class="comment">     * Send a faked buttonup message to the listbox so that it can release</span>
01756 <span class="comment">     * the capture and all.</span>
01757 <span class="comment">     */</span>
01758     <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o9">spwndList</a>, &amp;tlpwndList);
01759 
01760     <a class="code" href="../../d6/d0/usercli_8h.html#a600">SendMessageWorker</a>(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o9">spwndList</a>, LBCB_ENDTRACK, fSelEndOK, 0, FALSE);
01761 
01762     <span class="keywordflow">if</span> (pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o15">fLBoxVisible</a>) {
01763         WORD swpFlags = SWP_NOMOVE | SWP_NOZORDER | SWP_NOACTIVATE;
01764 
01765         <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o0">spwnd</a>, WFWIN31COMPAT))
01766             swpFlags |= SWP_FRAMECHANGED;
01767 
01768         pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o15">fLBoxVisible</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01769 
01770         <span class="comment">/*</span>
01771 <span class="comment">         * Hide the listbox window</span>
01772 <span class="comment">         */</span>
01773         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a237">NtUserShowWindow</a>(hwndList, SW_HIDE);
01774 
01775         <span class="comment">//</span>
01776         <span class="comment">// Invalidate the item area now since SWP() might update stuff.</span>
01777         <span class="comment">// Since the combo is CS_VREDRAW/CS_HREDRAW, a size change will</span>
01778         <span class="comment">// redraw the whole thing, including the item rect.  But if it</span>
01779         <span class="comment">// isn't changing size, we still want to redraw the item anyway</span>
01780         <span class="comment">// to show focus/selection.</span>
01781         <span class="comment">//</span>
01782         <span class="keywordflow">if</span> (!(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o10">CBoxStyle</a> &amp; <a class="code" href="../../d6/d0/usercli_8h.html#a58">SEDITABLE</a>))
01783             <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a206">NtUserInvalidateRect</a>(hwnd, &amp;pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o2">editrc</a>, TRUE);
01784 
01785         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a115">NtUserSetWindowPos</a>(hwnd, HWND_TOP, 0, 0,
01786                 pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o4">cxCombo</a>, pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o5">cyCombo</a>, swpFlags);
01787 
01788         <span class="comment">// In case size didn't change</span>
01789         <a class="code" href="../../d3/d8/client_8c.html#a140">UpdateWindow</a>(hwnd);
01790 
01791         <span class="keywordflow">if</span> (pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o10">CBoxStyle</a> &amp; <a class="code" href="../../d6/d0/usercli_8h.html#a58">SEDITABLE</a>) {
01792             <a class="code" href="../../d6/d0/usercli_8h.html#a666">xxxCBCompleteEditWindow</a>(pcbox);
01793         }
01794 
01795         <span class="keywordflow">if</span> (fNotifyParent) {
01796 
01797             <span class="comment">/*</span>
01798 <span class="comment">             * Notify parent we will be popping up the combo box.</span>
01799 <span class="comment">             */</span>
01800             <a class="code" href="../../d6/d0/usercli_8h.html#a674">xxxCBNotifyParent</a>(pcbox, CBN_CLOSEUP);
01801             <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d9/client_2wow_8c.html#a11">IsWindow</a>(hwnd))
01802                 <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
01803         }
01804     }
01805 
01806     <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndList);
01807 
01808     <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
01809 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a676" doxytag="usercli.h::xxxCBInternalUpdateEditWindow" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID xxxCBInternalUpdateEditWindow           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d9/structtagCBox.html">PCBOX</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HDC&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d3/combo_8c-source.html#l02028">2028</a> of file <a class="el" href="../../d2/d3/combo_8c-source.html">combo.c</a>.
<p>
References <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02474">CBFHASSTRINGS</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d4/d5/rect_8c-source.html#l00052">CopyInflateRect()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00243">CopyRect</a>, <a class="el" href="../../d4/d8/clrect_8c-source.html#l00026">DrawFocusRect()</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01870">tagCBox::editrc</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01883">tagCBox::fFocus</a>, <a class="el" href="../../d0/d1/rtl_2draw_8c-source.html#l00061">FillRect()</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01889">tagCBox::fLBoxVisible</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01906">tagCBox::fNoEdit</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01912">tagCBox::fRightAlign</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01913">tagCBox::fRtoLReading</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01581">GetControlBrush</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01914">tagCBox::hFont</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01514">HW</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01515">HWq</a>, <a class="el" href="../../d4/d5/rect_8c-source.html#l00165">InflateRect()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00460">IsComboVisible</a>, <a class="el" href="../../d3/d0/userexts_8c-source.html#l01830">msg</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06624">NtUserGetDC()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01556">NtUserReleaseDC</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01890">tagCBox::OwnerDraw</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00652">SendMessage()</a>, <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00270">SendMessageWorker()</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00848">SetWindowText()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01764">tagWND::spmenu</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01780">tagCBox::spwnd</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01791">tagCBox::spwndEdit</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01792">tagCBox::spwndList</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01781">tagCBox::spwndParent</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00212">SYSHBR</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00202">SYSMET</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00204">SYSRGB</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00362">ThreadLock</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00366">ThreadUnlock</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00958">UserLocalAlloc</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00960">UserLocalFree</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02524">WEFPUIACCELHIDDEN</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02523">WEFPUIFOCUSHIDDEN</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02286">WFANSIPROC</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02418">WFDISABLED</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02319">WFWIN40COMPAT</a>.
<p>
Referenced by <a class="el" href="../../d2/d3/combo_8c-source.html#l00207">ComboBoxWndProcWorker()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l01494">xxxCBCommandHandler()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l02230">xxxCBInvertStaticWindow()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l01431">xxxCBPaint()</a>, and <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l00842">xxxLBoxCtlDelete()</a>.
<p>
<pre class="fragment"><div>02031 {
02032     <span class="keywordtype">int</span> cchText = 0;
02033     LPWSTR pText = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
02034     <span class="keywordtype">int</span> sItem;
02035     HDC hdc;
02036     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> <a class="code" href="../../d2/d1/userexts_8c.html#a129">msg</a>;
02037     HBRUSH hbrSave;
02038     HBRUSH hbrControl;
02039     HANDLE hOldFont;
02040     DRAWITEMSTRUCT dis;
02041     RECT rc;
02042     HWND hwnd = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(pcbox-&gt;spwnd);
02043     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpwndList;
02044     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpwndEdit;
02045     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpwndParent;
02046 
02047     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pcbox-&gt;spwnd);
02048 
02049     <span class="comment">/* This check is also commented out in Win3.1 and Win95 */</span>
02050     <span class="comment">// if (!TestWF(pcbox-&gt;spwnd, WFVISIBLE)) {</span>
02051     <span class="comment">//    return;</span>
02052     <span class="comment">// }</span>
02053 
02054     <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(pcbox-&gt;spwndParent, &amp;tlpwndParent);
02055     <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(pcbox-&gt;spwndList, &amp;tlpwndList);
02056     <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(pcbox-&gt;spwndEdit, &amp;tlpwndEdit);
02057 
02058     sItem = (<span class="keywordtype">int</span>)<a class="code" href="../../d6/d0/usercli_8h.html#a600">SendMessageWorker</a>(pcbox-&gt;spwndList, LB_GETCURSEL, 0, 0, FALSE);
02059 
02060     <span class="comment">/*</span>
02061 <span class="comment">     * This 'try-finally' block ensures that the allocated 'pText' will</span>
02062 <span class="comment">     * be freed no matter how this routine is exited.</span>
02063 <span class="comment">     */</span>
02064     <span class="keywordflow">try</span> {
02065         <span class="keywordflow">if</span> (sItem != -1) {
02066             cchText = (<span class="keywordtype">int</span>)<a class="code" href="../../d6/d0/usercli_8h.html#a600">SendMessageWorker</a>(pcbox-&gt;spwndList, LB_GETTEXTLEN,
02067                     (DWORD)sItem, 0, FALSE);
02068             <span class="keywordflow">if</span> ((pText = (LPWSTR)<a class="code" href="../../d6/d0/usercli_8h.html#a136">UserLocalAlloc</a>(HEAP_ZERO_MEMORY, (cchText+1) * <span class="keyword">sizeof</span>(WCHAR)))) {
02069                 cchText = (<span class="keywordtype">int</span>)<a class="code" href="../../d6/d0/usercli_8h.html#a600">SendMessageWorker</a>(pcbox-&gt;spwndList, LB_GETTEXT,
02070                         (DWORD)sItem, (LPARAM)pText, FALSE);
02071             }
02072         }
02073 
02074         <span class="keywordflow">if</span> (!pcbox-&gt;fNoEdit) {
02075 
02076             <span class="keywordflow">if</span> (pcbox-&gt;spwndEdit) {
02077                 <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pcbox-&gt;spwnd, CBFHASSTRINGS))
02078                     <a class="code" href="../../d5/d9/cltxt_8h.html#a23">SetWindowText</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(pcbox-&gt;spwndEdit), pText ? pText : TEXT(<span class="stringliteral">""</span>));
02079 
02080                 <span class="keywordflow">if</span> (pcbox-&gt;fFocus) {
02081                     <span class="comment">/*</span>
02082 <span class="comment">                     * Only hilite the text if we have the focus.</span>
02083 <span class="comment">                     */</span>
02084                     <a class="code" href="../../d6/d0/usercli_8h.html#a600">SendMessageWorker</a>(pcbox-&gt;spwndEdit, EM_SETSEL, 0, MAXLONG, !!<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pcbox-&gt;spwnd, WFANSIPROC));
02085                 }
02086             }
02087         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a69">IsComboVisible</a>(pcbox)) {
02088             <span class="keywordflow">if</span> (hdcPaint) {
02089                 hdc = hdcPaint;
02090             } <span class="keywordflow">else</span> {
02091                 hdc = <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a250">NtUserGetDC</a>(hwnd);
02092             }
02093 
02094             SetBkMode(hdc, OPAQUE);
02095             <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pcbox-&gt;spwnd, WFWIN40COMPAT)) {
02096                 <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pcbox-&gt;spwnd, WFDISABLED))
02097                     <a class="code" href="../../d2/d1/userexts_8c.html#a129">msg</a> = WM_CTLCOLORSTATIC;
02098                 <span class="keywordflow">else</span>
02099                     <a class="code" href="../../d2/d1/userexts_8c.html#a129">msg</a> = WM_CTLCOLOREDIT;
02100             } <span class="keywordflow">else</span>
02101                 <a class="code" href="../../d2/d1/userexts_8c.html#a129">msg</a> = WM_CTLCOLORLISTBOX;
02102 
02103             hbrControl = <a class="code" href="../../d6/d0/usercli_8h.html#a235">GetControlBrush</a>(hwnd, hdc, msg);
02104             hbrSave = SelectObject(hdc, hbrControl);
02105 
02106             <a class="code" href="../../d3/d6/rect_8c.html#a2">CopyInflateRect</a>(&amp;rc, &amp;pcbox-&gt;editrc, <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CXBORDER), <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CYBORDER));
02107             PatBlt(hdc, rc.left, rc.top, rc.right - rc.left,
02108                 rc.bottom - rc.top, PATCOPY);
02109             <a class="code" href="../../d3/d6/rect_8c.html#a7">InflateRect</a>(&amp;rc, -<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CXBORDER), -<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CYBORDER));
02110 
02111             <span class="keywordflow">if</span> (pcbox-&gt;fFocus &amp;&amp; !pcbox-&gt;fLBoxVisible) {
02112                 <span class="comment">//</span>
02113                 <span class="comment">// Fill in the selected area</span>
02114                 <span class="comment">//</span>
02115 
02116 
02117                 <span class="comment">// only do the FillRect if we know its not</span>
02118                 <span class="comment">// ownerdraw item, otherwise we mess up people up</span>
02119                 <span class="comment">// BUT: for Compat's sake we still do this for Win 3.1 guys</span>
02120 
02121                 <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>( pcbox-&gt;spwnd, WFWIN40COMPAT) || !pcbox-&gt;OwnerDraw)
02122                     <a class="code" href="../../d9/d1/rtl_2draw_8c.html#a3">FillRect</a>(hdc, &amp;rc, <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a22">SYSHBR</a>(HIGHLIGHT));
02123 
02124                 SetBkColor(hdc, <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a20">SYSRGB</a>(HIGHLIGHT));
02125                 SetTextColor(hdc, <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a20">SYSRGB</a>(HIGHLIGHTTEXT));
02126             } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pcbox-&gt;spwnd, WFDISABLED) &amp;&amp; !pcbox-&gt;OwnerDraw) {
02127                 <span class="keywordflow">if</span> ((COLORREF)<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a20">SYSRGB</a>(GRAYTEXT) != GetBkColor(hdc))
02128                     SetTextColor(hdc, <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a20">SYSRGB</a>(GRAYTEXT));
02129             }
02130 
02131             <span class="keywordflow">if</span> (pcbox-&gt;hFont != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
02132                 hOldFont = SelectObject(hdc, pcbox-&gt;hFont);
02133 
02134             <span class="keywordflow">if</span> (pcbox-&gt;OwnerDraw) {
02135 
02136                 <span class="comment">/*</span>
02137 <span class="comment">                 * Let the app draw the stuff in the static text box.</span>
02138 <span class="comment">                 */</span>
02139                 dis.CtlType = ODT_COMBOBOX;
02140                 dis.CtlID = PtrToUlong(pcbox-&gt;spwnd-&gt;spmenu);
02141                 dis.itemID = sItem;
02142                 dis.itemAction = ODA_DRAWENTIRE;
02143                 dis.itemState = (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)
02144                     ((pcbox-&gt;fFocus &amp;&amp; !pcbox-&gt;fLBoxVisible ? ODS_SELECTED : 0) |
02145                     (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pcbox-&gt;spwnd, WFDISABLED) ? ODS_DISABLED : 0) |
02146                     (pcbox-&gt;fFocus &amp;&amp; !pcbox-&gt;fLBoxVisible ? ODS_FOCUS : 0) |
02147                     (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pcbox-&gt;spwnd, WFWIN40COMPAT) ? ODS_COMBOBOXEDIT : 0) |
02148                     (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pcbox-&gt;spwnd, WEFPUIFOCUSHIDDEN) ? ODS_NOFOCUSRECT : 0) |
02149                     (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pcbox-&gt;spwnd, WEFPUIACCELHIDDEN) ? ODS_NOACCEL : 0));
02150 
02151                 dis.hwndItem = hwnd;
02152                 dis.hDC = hdc;
02153                 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a33">CopyRect</a>(&amp;dis.rcItem, &amp;rc);
02154 
02155                 <span class="comment">// Don't let ownerdraw dudes draw outside of the combo client</span>
02156                 <span class="comment">// bounds.</span>
02157                 IntersectClipRect(hdc, rc.left, rc.top, rc.right, rc.bottom);
02158 
02159                 dis.itemData = (ULONG_PTR)<a class="code" href="../../d6/d0/usercli_8h.html#a600">SendMessageWorker</a>(pcbox-&gt;spwndList,
02160                         LB_GETITEMDATA, (UINT)sItem, 0, FALSE);
02161 
02162                 <a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a450">HW</a>(pcbox-&gt;spwndParent), WM_DRAWITEM, dis.CtlID,
02163                         (LPARAM)&amp;dis);
02164             } <span class="keywordflow">else</span> {
02165 
02166                 <span class="comment">/*</span>
02167 <span class="comment">                 * Start the text one pixel within the rect so that we leave a</span>
02168 <span class="comment">                 * nice hilite border around the text.</span>
02169 <span class="comment">                 */</span>
02170 
02171                 <span class="keywordtype">int</span> x ;
02172                 <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> align ;
02173 
02174                 <span class="keywordflow">if</span> (pcbox-&gt;fRightAlign ) {
02175                     align = TA_RIGHT;
02176                     x = rc.right - <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CXBORDER);
02177                 } <span class="keywordflow">else</span> {
02178                     x = rc.left + <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CXBORDER);
02179                     align = 0;
02180                 }
02181 
02182                 <span class="keywordflow">if</span> (pcbox-&gt;fRtoLReading )
02183                     align |= TA_RTLREADING;
02184 
02185                 <span class="keywordflow">if</span> (align)
02186                     SetTextAlign(hdc, GetTextAlign(hdc) | align);
02187 
02188                 <span class="comment">// Draw the text, leaving a gap on the left &amp; top for selection.</span>
02189                 ExtTextOut(hdc, x, rc.top + <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CYBORDER), ETO_CLIPPED | ETO_OPAQUE,
02190                        &amp;rc, pText ? pText : TEXT(<span class="stringliteral">""</span>), cchText, NULL);
02191                 <span class="keywordflow">if</span> (pcbox-&gt;fFocus &amp;&amp; !pcbox-&gt;fLBoxVisible) {
02192                     <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pcbox-&gt;spwnd, WEFPUIFOCUSHIDDEN)) {
02193                         <a class="code" href="../../d3/d9/clrect_8c.html#a0">DrawFocusRect</a>(hdc, &amp;rc);
02194                     }
02195                 }
02196             }
02197 
02198             <span class="keywordflow">if</span> (pcbox-&gt;hFont &amp;&amp; hOldFont) {
02199                 SelectObject(hdc, hOldFont);
02200             }
02201 
02202             <span class="keywordflow">if</span> (hbrSave) {
02203                 SelectObject(hdc, hbrSave);
02204             }
02205 
02206             <span class="keywordflow">if</span> (!hdcPaint) {
02207                 <a class="code" href="../../d6/d0/usercli_8h.html#a211">NtUserReleaseDC</a>(hwnd, hdc);
02208             }
02209         }
02210 
02211     } finally {
02212         <span class="keywordflow">if</span> (pText != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
02213             <a class="code" href="../../d6/d0/usercli_8h.html#a138">UserLocalFree</a>((HANDLE)pText);
02214     }
02215 
02216     <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndEdit);
02217     <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndList);
02218     <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndParent);
02219 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a679" doxytag="usercli.h::xxxCBInvertStaticWindow" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID xxxCBInvertStaticWindow           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d9/structtagCBox.html">PCBOX</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HDC&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d3/combo_8c-source.html#l02230">2230</a> of file <a class="el" href="../../d2/d3/combo_8c-source.html">combo.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01883">tagCBox::fFocus</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01780">tagCBox::spwnd</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, and <a class="el" href="../../d2/d3/combo_8c-source.html#l02028">xxxCBInternalUpdateEditWindow()</a>.
<p>
Referenced by <a class="el" href="../../d2/d3/combo_8c-source.html#l02343">xxxCBGetFocusHelper()</a>, and <a class="el" href="../../d2/d3/combo_8c-source.html#l02402">xxxCBKillFocusHelper()</a>.
<p>
<pre class="fragment"><div>02234 {
02235     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> focusSave = pcbox-&gt;fFocus;
02236 
02237     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pcbox-&gt;spwnd);
02238 
02239     pcbox-&gt;fFocus = (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)fNewSelectionState;
02240     <a class="code" href="../../d6/d0/usercli_8h.html#a676">xxxCBInternalUpdateEditWindow</a>(pcbox, hdc);
02241 
02242     pcbox-&gt;fFocus = (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)focusSave;
02243 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a678" doxytag="usercli.h::xxxCBKillFocusHelper" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID xxxCBKillFocusHelper           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d9/structtagCBox.html">PCBOX</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d3/combo_8c-source.html#l02402">2402</a> of file <a class="el" href="../../d2/d3/combo_8c-source.html">combo.c</a>.
<p>
References <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01882">tagCBox::CBoxStyle</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01883">tagCBox::fFocus</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01906">tagCBox::fNoEdit</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00429">SDROPDOWNLIST</a>, <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00270">SendMessageWorker()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01780">tagCBox::spwnd</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01791">tagCBox::spwndEdit</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01792">tagCBox::spwndList</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00362">ThreadLock</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00366">ThreadUnlock</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02286">WFANSIPROC</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l01719">xxxCBHideListBoxWindow()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l02230">xxxCBInvertStaticWindow()</a>, and <a class="el" href="../../d6/d0/usercli_8h.html#a674">xxxCBNotifyParent()</a>.
<p>
Referenced by <a class="el" href="../../d2/d3/combo_8c-source.html#l00207">ComboBoxWndProcWorker()</a>.
<p>
<pre class="fragment"><div>02404 {
02405     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpwndList;
02406     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpwndEdit;
02407 
02408     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pcbox-&gt;spwnd);
02409 
02410     <span class="keywordflow">if</span> (!pcbox-&gt;fFocus || pcbox-&gt;spwndList == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
02411         <span class="keywordflow">return</span>;
02412 
02413     <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(pcbox-&gt;spwndList, &amp;tlpwndList);
02414     <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(pcbox-&gt;spwndEdit, &amp;tlpwndEdit);
02415 
02416     <span class="comment">/*</span>
02417 <span class="comment">     * The combo box is losing the focus.  Send buttonup clicks so that</span>
02418 <span class="comment">     * things release the mouse capture if they have it...  If the</span>
02419 <span class="comment">     * pwndListBox is null, don't do anything.  This occurs if the combo box</span>
02420 <span class="comment">     * is destroyed while it has the focus.</span>
02421 <span class="comment">     */</span>
02422     <a class="code" href="../../d6/d0/usercli_8h.html#a600">SendMessageWorker</a>(pcbox-&gt;spwnd, WM_LBUTTONUP, 0L, 0xFFFFFFFFL, FALSE);
02423      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d0/usercli_8h.html#a667">xxxCBHideListBoxWindow</a>(pcbox, TRUE, FALSE))
02424          <span class="keywordflow">return</span>;
02425 
02426     <span class="comment">/*</span>
02427 <span class="comment">     * Turn off the listbox caret</span>
02428 <span class="comment">     */</span>
02429 
02430     <span class="keywordflow">if</span> (pcbox-&gt;CBoxStyle == <a class="code" href="../../d6/d0/usercli_8h.html#a60">SDROPDOWNLIST</a>)
02431        <a class="code" href="../../d6/d0/usercli_8h.html#a600">SendMessageWorker</a>(pcbox-&gt;spwndList, LBCB_CARETOFF, 0, 0, FALSE);
02432 
02433     <span class="keywordflow">if</span> (pcbox-&gt;fNoEdit) {
02434 
02435         <span class="comment">/*</span>
02436 <span class="comment">         * Invert the static text rectangle</span>
02437 <span class="comment">         */</span>
02438         <a class="code" href="../../d6/d0/usercli_8h.html#a679">xxxCBInvertStaticWindow</a>(pcbox, FALSE, (HDC)NULL);
02439     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pcbox-&gt;spwndEdit) {
02440         <a class="code" href="../../d6/d0/usercli_8h.html#a600">SendMessageWorker</a>(pcbox-&gt;spwndEdit, EM_SETSEL, 0, 0, !!<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pcbox-&gt;spwnd, WFANSIPROC));
02441     }
02442 
02443     pcbox-&gt;fFocus = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
02444     <a class="code" href="../../d6/d0/usercli_8h.html#a674">xxxCBNotifyParent</a>(pcbox, CBN_KILLFOCUS);
02445 
02446     <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndEdit);
02447     <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndList);
02448 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a663" doxytag="usercli.h::xxxCBMessageItemHandler" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LRESULT xxxCBMessageItemHandler           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d9/structtagCBox.html">PCBOX</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a5">LPVOID</a>&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d3/combo_8c-source.html#l01393">1393</a> of file <a class="el" href="../../d2/d3/combo_8c-source.html">combo.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01514">HW</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01515">HWq</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00652">SendMessage()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01764">tagWND::spmenu</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01780">tagCBox::spwnd</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01781">tagCBox::spwndParent</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00362">ThreadLock</a>, and <a class="el" href="../../d7/d9/usercli_8h-source.html#l00366">ThreadUnlock</a>.
<p>
Referenced by <a class="el" href="../../d2/d3/combo_8c-source.html#l00207">ComboBoxWndProcWorker()</a>.
<p>
<pre class="fragment"><div>01397 {
01398     LRESULT lRet;
01399     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpwndParent;
01400 
01401     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pcbox-&gt;spwnd);
01402 
01403     <span class="comment">/*</span>
01404 <span class="comment">     * Send the &lt;foo&gt;item message back to the application after changing some</span>
01405 <span class="comment">     * parameters to their combo box specific versions.</span>
01406 <span class="comment">     */</span>
01407     ((LPMEASUREITEMSTRUCT)lpfoo)-&gt;CtlType = ODT_COMBOBOX;
01408     ((LPMEASUREITEMSTRUCT)lpfoo)-&gt;CtlID = PtrToUlong(pcbox-&gt;spwnd-&gt;spmenu);
01409     <span class="keywordflow">if</span> (message == WM_DRAWITEM)
01410         ((LPDRAWITEMSTRUCT)lpfoo)-&gt;hwndItem = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(pcbox-&gt;spwnd);
01411     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (message == WM_DELETEITEM)
01412         ((LPDELETEITEMSTRUCT)lpfoo)-&gt;hwndItem = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(pcbox-&gt;spwnd);
01413     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (message == WM_COMPAREITEM)
01414         ((LPCOMPAREITEMSTRUCT)lpfoo)-&gt;hwndItem = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(pcbox-&gt;spwnd);
01415 
01416     <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(pcbox-&gt;spwndParent, &amp;tlpwndParent);
01417     lRet = <a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a450">HW</a>(pcbox-&gt;spwndParent), message,
01418             (WPARAM)pcbox-&gt;spwnd-&gt;spmenu, (LPARAM)lpfoo);
01419     <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndParent);
01420 
01421     <span class="keywordflow">return</span> lRet;
01422 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a673" doxytag="usercli.h::xxxCBNcDestroyHandler" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID xxxCBNcDestroyHandler           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d7/d9/structtagCBox.html">PCBOX</a>&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d3/comboini_8c-source.html#l00394">394</a> of file <a class="el" href="../../d4/d3/comboini_8c-source.html">comboini.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l00016">ComboboxLookaside</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00836">FNID_CLEANEDUP_BIT</a>, <a class="el" href="../../d2/d1/rtlinit_8c-source.html#l00344">FreeLookasideEntry()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01515">HWq</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04115">NtUserDestroyWindow()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l07715">NtUserSetWindowFNID()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01780">tagCBox::spwnd</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01791">tagCBox::spwndEdit</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01792">tagCBox::spwndList</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01781">tagCBox::spwndParent</a>, and <a class="el" href="../../d7/d9/usercli_8h-source.html#l00368">Unlock</a>.
<p>
Referenced by <a class="el" href="../../d2/d3/combo_8c-source.html#l00207">ComboBoxWndProcWorker()</a>.
<p>
<pre class="fragment"><div>00397 {
00398     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pwnd);
00399 
00400     <span class="comment">/*</span>
00401 <span class="comment">     * If there is no pcbox, there is nothing to clean up.</span>
00402 <span class="comment">     */</span>
00403     <span class="keywordflow">if</span> (pcbox != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00404 
00405         <span class="comment">/*</span>
00406 <span class="comment">         * Destroy the list box here so that it'll send WM_DELETEITEM messages</span>
00407 <span class="comment">         * before the combo box turns into a zombie.</span>
00408 <span class="comment">         */</span>
00409         <span class="keywordflow">if</span> (pcbox-&gt;spwndList != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00410             <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a159">NtUserDestroyWindow</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(pcbox-&gt;spwndList));
00411             <a class="code" href="../../d6/d0/usercli_8h.html#a42">Unlock</a>(&amp;pcbox-&gt;spwndList);
00412         }
00413 
00414         pcbox-&gt;spwnd = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00415         <a class="code" href="../../d6/d0/usercli_8h.html#a42">Unlock</a>(&amp;pcbox-&gt;spwndParent);
00416 
00417         <span class="comment">/*</span>
00418 <span class="comment">         * If there is no editcontrol, spwndEdit is the combobox window which</span>
00419 <span class="comment">         * isn't locked (that would have caused a 'catch-22').</span>
00420 <span class="comment">         */</span>
00421         <span class="keywordflow">if</span> (pwnd != pcbox-&gt;spwndEdit) {
00422             <a class="code" href="../../d6/d0/usercli_8h.html#a42">Unlock</a>(&amp;pcbox-&gt;spwndEdit);
00423         }
00424 
00425         <span class="comment">/*</span>
00426 <span class="comment">         * Since a pointer and a handle to a fixed local object are the same.</span>
00427 <span class="comment">         */</span>
00428         <a class="code" href="../../d6/d0/usercli_8h.html#a408">FreeLookasideEntry</a>(&amp;ComboboxLookaside, pcbox);
00429     }
00430 
00431     <span class="comment">/*</span>
00432 <span class="comment">     * Set the window's fnid status so that we can ignore rogue messages</span>
00433 <span class="comment">     */</span>
00434     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a284">NtUserSetWindowFNID</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(pwnd), FNID_CLEANEDUP_BIT);
00435 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a674" doxytag="usercli.h::xxxCBNotifyParent" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID xxxCBNotifyParent           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d9/structtagCBox.html">PCBOX</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a13">SHORT</a>&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d2/d3/combo_8c-source.html#l01494">xxxCBCommandHandler()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l02343">xxxCBGetFocusHelper()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l01719">xxxCBHideListBoxWindow()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l02402">xxxCBKillFocusHelper()</a>, and <a class="el" href="../../d2/d3/combo_8c-source.html#l01819">xxxCBShowListBoxWindow()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a665" doxytag="usercli.h::xxxCBPaint" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID xxxCBPaint           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d9/structtagCBox.html">PCBOX</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HDC&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d3/combo_8c-source.html#l01431">1431</a> of file <a class="el" href="../../d2/d3/combo_8c-source.html">combo.c</a>.
<p>
References <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01872">tagCBox::buttonrc</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01874">tagCBox::cxCombo</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01875">tagCBox::cyCombo</a>, <a class="el" href="../../d0/d1/rtl_2draw_8c-source.html#l00896">DrawEdge()</a>, <a class="el" href="../../d0/d1/rtl_2draw_8c-source.html#l00729">DrawFrameControl()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02500">EFREADONLY</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01905">tagCBox::f3DCombo</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01887">tagCBox::fButtonPressed</a>, <a class="el" href="../../d0/d1/rtl_2draw_8c-source.html#l00061">FillRect()</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01906">tagCBox::fNoEdit</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01912">tagCBox::fRightAlign</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01581">GetControlBrush</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01515">HWq</a>, <a class="el" href="../../d3/d0/userexts_8c-source.html#l01830">msg</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01780">tagCBox::spwnd</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01791">tagCBox::spwndEdit</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02418">WFDISABLED</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02319">WFWIN40COMPAT</a>, and <a class="el" href="../../d2/d3/combo_8c-source.html#l02028">xxxCBInternalUpdateEditWindow()</a>.
<p>
Referenced by <a class="el" href="../../d2/d3/combo_8c-source.html#l00207">ComboBoxWndProcWorker()</a>.
<p>
<pre class="fragment"><div>01434 {
01435     RECT rc;
01436     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> <a class="code" href="../../d2/d1/userexts_8c.html#a129">msg</a>;
01437     HBRUSH hbr;
01438 
01439     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pcbox-&gt;spwnd);
01440 
01441     rc.left = rc.top = 0;
01442     rc.right = pcbox-&gt;cxCombo;
01443     rc.bottom = pcbox-&gt;cyCombo;
01444     <span class="keywordflow">if</span> (pcbox-&gt;f3DCombo)
01445         <a class="code" href="../../d9/d1/rtl_2draw_8c.html#a15">DrawEdge</a>(hdc, &amp;rc, EDGE_SUNKEN, BF_RECT | BF_ADJUST);
01446     <span class="keywordflow">else</span>
01447         <a class="code" href="../../d9/d1/rtl_2draw_8c.html#a15">DrawEdge</a>(hdc, &amp;rc, EDGE_SUNKEN, BF_RECT | BF_ADJUST | BF_FLAT | BF_MONO);
01448 
01449     <span class="keywordflow">if</span> (pcbox-&gt;buttonrc.left != 0) {
01450     <span class="comment">// Draw in the dropdown arrow button</span>
01451         <a class="code" href="../../d9/d1/rtl_2draw_8c.html#a14">DrawFrameControl</a>(hdc, &amp;pcbox-&gt;buttonrc, DFC_SCROLL,
01452             DFCS_SCROLLCOMBOBOX |
01453             (pcbox-&gt;fButtonPressed ? DFCS_PUSHED | DFCS_FLAT : 0) |
01454             (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pcbox-&gt;spwnd, WFDISABLED) ? DFCS_INACTIVE : 0));
01455 <span class="preprocessor">#ifdef COLOR_HOTTRACKING</span>
01456 <span class="preprocessor"></span>            (pcbox-&gt;fButtonHotTracked ? DFCS_HOT: 0)));
01457 <span class="preprocessor">#endif // COLOR_HOTTRACKING</span>
01458 <span class="preprocessor"></span>        <span class="keywordflow">if</span> (pcbox-&gt;fRightAlign )
01459             rc.left = pcbox-&gt;buttonrc.right;
01460         <span class="keywordflow">else</span>
01461             rc.right = pcbox-&gt;buttonrc.left;
01462     }
01463 
01464     <span class="comment">// Erase the background behind the edit/static item.  Since a combo</span>
01465     <span class="comment">// is an edit field/list box hybrid, we use the same coloring</span>
01466     <span class="comment">// conventions.</span>
01467     <a class="code" href="../../d2/d1/userexts_8c.html#a129">msg</a> = WM_CTLCOLOREDIT;
01468     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pcbox-&gt;spwnd, WFWIN40COMPAT)) {
01469         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pcbox-&gt;spwnd, WFDISABLED) ||
01470             (!pcbox-&gt;fNoEdit &amp;&amp; pcbox-&gt;spwndEdit &amp;&amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pcbox-&gt;spwndEdit, EFREADONLY)))
01471             <a class="code" href="../../d2/d1/userexts_8c.html#a129">msg</a> = WM_CTLCOLORSTATIC;
01472     } <span class="keywordflow">else</span>
01473         <a class="code" href="../../d2/d1/userexts_8c.html#a129">msg</a> = WM_CTLCOLORLISTBOX;
01474 
01475     hbr = <a class="code" href="../../d6/d0/usercli_8h.html#a235">GetControlBrush</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(pcbox-&gt;spwnd), hdc, msg);
01476 
01477     <span class="keywordflow">if</span> (pcbox-&gt;fNoEdit)
01478         <a class="code" href="../../d6/d0/usercli_8h.html#a676">xxxCBInternalUpdateEditWindow</a>(pcbox, hdc);
01479     <span class="keywordflow">else</span>
01480         <a class="code" href="../../d9/d1/rtl_2draw_8c.html#a3">FillRect</a>(hdc, &amp;rc, hbr);
01481 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a669" doxytag="usercli.h::xxxCBPosition" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void xxxCBPosition           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d9/structtagCBox.html">PCBOX</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pcbox</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d3/comboini_8c-source.html#l00589">589</a> of file <a class="el" href="../../d4/d3/comboini_8c-source.html">comboini.c</a>.
<p>
References <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01870">tagCBox::editrc</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01906">tagCBox::fNoEdit</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01515">HWq</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l01917">NtUserMoveWindow()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01791">tagCBox::spwndEdit</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00362">ThreadLock</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00366">ThreadUnlock</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d4/d3/comboini_8c-source.html#l00253">xxxCBCalcControlRects()</a>, and <a class="el" href="../../d4/d3/comboini_8c-source.html#l00617">xxxCBSetDroppedSize()</a>.
<p>
Referenced by <a class="el" href="../../d2/d3/combo_8c-source.html#l00207">ComboBoxWndProcWorker()</a>, <a class="el" href="../../d4/d3/comboini_8c-source.html#l00443">xxxCBSetFontHandler()</a>, and <a class="el" href="../../d4/d3/comboini_8c-source.html#l00563">xxxCBSizeHandler()</a>.
<p>
<pre class="fragment"><div>00590 {
00591     RECT rcList;
00592 
00593     <span class="comment">// Calculate placement of components--button, item, list</span>
00594     <a class="code" href="../../d6/d0/usercli_8h.html#a672">xxxCBCalcControlRects</a>(pcbox, &amp;rcList);
00595 
00596     <span class="keywordflow">if</span> (!pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o21">fNoEdit</a> &amp;&amp; pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o8">spwndEdit</a>) {
00597         <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpwndEdit;
00598 
00599         <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o8">spwndEdit</a>, &amp;tlpwndEdit);
00600         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a111">NtUserMoveWindow</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o8">spwndEdit</a>), pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o2">editrc</a>.left, pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o2">editrc</a>.top,
00601             pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o2">editrc</a>.right - pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o2">editrc</a>.left,
00602             pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o2">editrc</a>.bottom - pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o2">editrc</a>.top, TRUE);
00603         <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndEdit);
00604     }
00605 
00606     <span class="comment">// Recalculate drop height &amp; width</span>
00607     <a class="code" href="../../d3/d4/comboini_8c.html#a2">xxxCBSetDroppedSize</a>(pcbox, &amp;rcList);
00608 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a682" doxytag="usercli.h::xxxCBSetEditItemHeight" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LONG xxxCBSetEditItemHeight           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d9/structtagCBox.html">PCBOX</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pcbox</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>editHeight</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d3/comboini_8c-source.html#l00485">485</a> of file <a class="el" href="../../d4/d3/comboini_8c-source.html">comboini.c</a>.
<p>
References <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01872">tagCBox::buttonrc</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01882">tagCBox::CBoxStyle</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01874">tagCBox::cxCombo</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01876">tagCBox::cxDrop</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01875">tagCBox::cyCombo</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01877">tagCBox::cyDrop</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01870">tagCBox::editrc</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01906">tagCBox::fNoEdit</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01515">HWq</a>, <a class="el" href="../../d9/d5/sertl_8c-source.html#l00332">max</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l01917">NtUserMoveWindow()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l02180">NtUserSetWindowPos()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01838">tagWND::rcWindow</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00424">SDROPPABLE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01780">tagCBox::spwnd</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01791">tagCBox::spwndEdit</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01792">tagCBox::spwndList</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00428">SSIMPLE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00202">SYSMET</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00362">ThreadLock</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00366">ThreadUnlock</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d2/d3/combo_8c-source.html#l00207">ComboBoxWndProcWorker()</a>.
<p>
<pre class="fragment"><div>00488 {
00489     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpwndEdit;
00490     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpwndList;
00491 
00492     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o0">spwnd</a>);
00493 
00494     <span class="keywordflow">if</span> (dyEdit &gt; 255) {
00495         RIPERR0(ERROR_INVALID_EDIT_HEIGHT, RIP_VERBOSE, <span class="stringliteral">""</span>);
00496         <span class="keywordflow">return</span> CB_ERR;
00497     }
00498 
00499     pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o2">editrc</a>.bottom = pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o2">editrc</a>.top + dyEdit;
00500     pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o5">cyCombo</a> = pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o2">editrc</a>.bottom + <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CYFIXEDFRAME);
00501 
00502     <span class="keywordflow">if</span> (pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o10">CBoxStyle</a> &amp; <a class="code" href="../../d6/d0/usercli_8h.html#a57">SDROPPABLE</a>) {
00503         pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o3">buttonrc</a>.bottom = pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o5">cyCombo</a> - <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CYEDGE);
00504     }
00505 
00506     <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o8">spwndEdit</a>, &amp;tlpwndEdit);
00507     <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o9">spwndList</a>, &amp;tlpwndList);
00508 
00509 
00510     <span class="comment">/*</span>
00511 <span class="comment">     * Reposition the editfield.</span>
00512 <span class="comment">     * Don't let spwndEdit or List of NULL go through; if someone adjusts</span>
00513 <span class="comment">     * the height on a NCCREATE; same as not having</span>
00514 <span class="comment">     * HW instead of HWq but we don't go to the kernel.</span>
00515 <span class="comment">     */</span>
00516     <span class="keywordflow">if</span> (!pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o21">fNoEdit</a> &amp;&amp; pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o8">spwndEdit</a>) {
00517         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a111">NtUserMoveWindow</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o8">spwndEdit</a>), pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o2">editrc</a>.left, pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o2">editrc</a>.top,
00518             pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o2">editrc</a>.right-pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o2">editrc</a>.left, dyEdit, TRUE);
00519     }
00520 
00521     <span class="comment">/*</span>
00522 <span class="comment">     * Reposition the list and combobox windows.</span>
00523 <span class="comment">     */</span>
00524     <span class="keywordflow">if</span> (pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o10">CBoxStyle</a> == <a class="code" href="../../d6/d0/usercli_8h.html#a59">SSIMPLE</a>) {
00525         <span class="keywordflow">if</span> (pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o9">spwndList</a> != 0) {
00526             <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a111">NtUserMoveWindow</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o9">spwndList</a>), 0, pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o5">cyCombo</a>, pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o4">cxCombo</a>,
00527                 pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o7">cyDrop</a>, FALSE);
00528 
00529             <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a115">NtUserSetWindowPos</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o0">spwnd</a>), HWND_TOP, 0, 0,
00530                 pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o4">cxCombo</a>, pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o5">cyCombo</a> +
00531                 pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o9">spwndList</a>-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o6">rcWindow</a>.bottom - pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o9">spwndList</a>-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o6">rcWindow</a>.top,
00532                 SWP_NOMOVE | SWP_NOZORDER | SWP_NOACTIVATE);
00533         }
00534     } <span class="keywordflow">else</span> {
00535         <span class="keywordflow">if</span> (pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o9">spwndList</a> != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00536             <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a111">NtUserMoveWindow</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o9">spwndList</a>), pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o0">spwnd</a>-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o6">rcWindow</a>.left,
00537                 pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o0">spwnd</a>-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o6">rcWindow</a>.top + pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o5">cyCombo</a>,
00538                 <a class="code" href="../../d8/d6/sertl_8c.html#a1">max</a>(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o6">cxDrop</a>, pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o4">cxCombo</a>), pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o7">cyDrop</a>, FALSE);
00539         }
00540 
00541         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a115">NtUserSetWindowPos</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o0">spwnd</a>), HWND_TOP, 0, 0,
00542             pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o4">cxCombo</a>, pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o5">cyCombo</a>,
00543             SWP_NOMOVE | SWP_NOZORDER | SWP_NOACTIVATE);
00544     }
00545 
00546     <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndList);
00547     <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndEdit);
00548 
00549     <span class="keywordflow">return</span> CB_OKAY;
00550 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a680" doxytag="usercli.h::xxxCBSetFontHandler" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID xxxCBSetFontHandler           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d9/structtagCBox.html">PCBOX</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HANDLE&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d3/comboini_8c-source.html#l00443">443</a> of file <a class="el" href="../../d4/d3/comboini_8c-source.html">comboini.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01906">tagCBox::fNoEdit</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01914">tagCBox::hFont</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01515">HWq</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05330">NtUserInvalidateRect()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00270">SendMessageWorker()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01780">tagCBox::spwnd</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01791">tagCBox::spwndEdit</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01792">tagCBox::spwndList</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00362">ThreadLock</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00366">ThreadUnlock</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d4/d3/comboini_8c-source.html#l00589">xxxCBPosition()</a>.
<p>
Referenced by <a class="el" href="../../d2/d3/combo_8c-source.html#l00207">ComboBoxWndProcWorker()</a>.
<p>
<pre class="fragment"><div>00447 {
00448     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpwndEdit;
00449     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpwndList;
00450 
00451     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pcbox-&gt;spwnd);
00452 
00453     <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(pcbox-&gt;spwndEdit, &amp;tlpwndEdit);
00454     <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(pcbox-&gt;spwndList, &amp;tlpwndList);
00455 
00456     pcbox-&gt;hFont = hFont;
00457 
00458     <span class="keywordflow">if</span> (!pcbox-&gt;fNoEdit &amp;&amp; pcbox-&gt;spwndEdit) {
00459         <a class="code" href="../../d6/d0/usercli_8h.html#a600">SendMessageWorker</a>(pcbox-&gt;spwndEdit, WM_SETFONT, (WPARAM)hFont, FALSE, FALSE);
00460     }
00461 
00462     <a class="code" href="../../d6/d0/usercli_8h.html#a600">SendMessageWorker</a>(pcbox-&gt;spwndList, WM_SETFONT, (WPARAM)hFont, FALSE, FALSE);
00463 
00464     <span class="comment">// Recalculate the layout of controls.  This will hide the listbox also.</span>
00465     <a class="code" href="../../d6/d0/usercli_8h.html#a669">xxxCBPosition</a>(pcbox);
00466 
00467     <span class="keywordflow">if</span> (fRedraw) {
00468         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a206">NtUserInvalidateRect</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(pcbox-&gt;spwnd), NULL, TRUE);
00469 <span class="comment">// LATER UpdateWindow(HW(pcbox-&gt;spwnd));</span>
00470     }
00471 
00472     <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndList);
00473     <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndEdit);
00474 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a668" doxytag="usercli.h::xxxCBShowListBoxWindow" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID xxxCBShowListBoxWindow           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d9/structtagCBox.html">PCBOX</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pcbox</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fTrack</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d3/combo_8c-source.html#l01819">1819</a> of file <a class="el" href="../../d2/d3/combo_8c-source.html">combo.c</a>.
<p>
References <a class="el" href="../../d0/d1/mmrtl_8c-source.html#l00426">_MonitorFromWindow()</a>, <a class="el" href="../../d4/d7/winmgrc_8c-source.html#l00810">AnimateWindow()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01872">tagCBox::buttonrc</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02475">CBFNOINTEGRALHEIGHT</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01882">tagCBox::CBoxStyle</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l03510">CMS_QANIMATION</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01874">tagCBox::cxCombo</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01876">tagCBox::cxDrop</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01875">tagCBox::cyCombo</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01877">tagCBox::cyDrop</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01870">tagCBox::editrc</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01905">tagCBox::f3DCombo</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01889">tagCBox::fLBoxVisible</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01885">tagCBox::fMouseDown</a>, <a class="el" href="../../d7/d2/queue_8c-source.html#l01033">GetAppCompatFlags2()</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00051">gpsi</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01515">HWq</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02048">tagLBIV::iTypeSearch</a>, <a class="el" href="../../d9/d5/sertl_8c-source.html#l00332">max</a>, <a class="el" href="../../d6/d3/acpitabl_8h-source.html#l00366">min</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05330">NtUserInvalidateRect()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l02180">NtUserSetWindowPos()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06274">NtUserShowWindow()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01073">PUSIF_COMBOBOXANIMATION</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02157">tagMONITOR::rcMonitor</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01838">tagWND::rcWindow</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00430">SDROPDOWN</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00424">SDROPPABLE</a>, <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00270">SendMessageWorker()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01780">tagCBox::spwnd</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01792">tagCBox::spwndList</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00202">SYSMET</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01166">TEST_EffectPUSIF</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00362">ThreadLock</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00366">ThreadUnlock</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l03608">UpdateWindow()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00475">VER40</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02319">WFWIN40COMPAT</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l01624">xxxCBCompleteEditWindow()</a>, <a class="el" href="../../d6/d0/usercli_8h.html#a674">xxxCBNotifyParent()</a>, and <a class="el" href="../../d2/d3/combo_8c-source.html#l02255">xxxCBUpdateListBoxWindow()</a>.
<p>
Referenced by <a class="el" href="../../d2/d3/combo_8c-source.html#l00207">ComboBoxWndProcWorker()</a>, and <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02183">xxxLBoxCtlKeyInput()</a>.
<p>
<pre class="fragment"><div>01821 {
01822     RECT        editrc;
01823     <span class="keywordtype">int</span>         itemNumber;
01824     <span class="keywordtype">int</span>         iHeight;
01825     <span class="keywordtype">int</span>         yTop;
01826     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>       dwMult;
01827     <span class="keywordtype">int</span>         cyItem;
01828     HWND        hwnd = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o0">spwnd</a>);
01829     HWND        hwndList = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o9">spwndList</a>);
01830     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>        fAnimPos;
01831     <a class="code" href="../../d5/d1/struct__TL.html">TL</a>          tlpwndList;
01832     <a class="code" href="../../d0/d2/structtagMONITOR.html">PMONITOR</a>    pMonitor;
01833 
01834     <span class="comment">//</span>
01835     <span class="comment">// THIS FUNCTION IS ONLY CALLED FOR DROPPABLE LIST COMBOBOXES</span>
01836     <span class="comment">//</span>
01837     UserAssert(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o10">CBoxStyle</a> &amp; SDROPPABLE);
01838 
01839     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o0">spwnd</a>);
01840 
01841     <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o9">spwndList</a>, &amp;tlpwndList);
01842 
01843     <span class="comment">/*</span>
01844 <span class="comment">     * Notify parent we will be dropping down the combo box.</span>
01845 <span class="comment">     */</span>
01846 
01847     <a class="code" href="../../d6/d0/usercli_8h.html#a674">xxxCBNotifyParent</a>(pcbox, CBN_DROPDOWN);
01848     <span class="comment">/*</span>
01849 <span class="comment">     * Invalidate the button rect so that the depressed arrow is drawn.</span>
01850 <span class="comment">     */</span>
01851     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a206">NtUserInvalidateRect</a>(hwnd, &amp;pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o3">buttonrc</a>, TRUE);
01852 
01853     pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o15">fLBoxVisible</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01854 
01855     <span class="keywordflow">if</span> (pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o10">CBoxStyle</a> == <a class="code" href="../../d6/d0/usercli_8h.html#a61">SDROPDOWN</a>) {
01856 
01857         <span class="comment">/*</span>
01858 <span class="comment">         * If an item in the listbox matches the text in the edit control,</span>
01859 <span class="comment">         * scroll it to the top of the listbox.  Select the item only if the</span>
01860 <span class="comment">         * mouse button isn't down otherwise we will select the item when the</span>
01861 <span class="comment">         * mouse button goes up.</span>
01862 <span class="comment">         */</span>
01863         <a class="code" href="../../d6/d0/usercli_8h.html#a675">xxxCBUpdateListBoxWindow</a>(pcbox, !pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o13">fMouseDown</a>);
01864         <span class="keywordflow">if</span> (!pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o13">fMouseDown</a>)
01865             <a class="code" href="../../d6/d0/usercli_8h.html#a666">xxxCBCompleteEditWindow</a>(pcbox);
01866     } <span class="keywordflow">else</span> {
01867 
01868         <span class="comment">/*</span>
01869 <span class="comment">         * Scroll the currently selected item to the top of the listbox.</span>
01870 <span class="comment">         */</span>
01871         itemNumber = (<span class="keywordtype">int</span>)<a class="code" href="../../d6/d0/usercli_8h.html#a600">SendMessageWorker</a>(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o9">spwndList</a>, LB_GETCURSEL,
01872                 0, 0, FALSE);
01873         <span class="keywordflow">if</span> (itemNumber == -1) {
01874             itemNumber = 0;
01875         }
01876         <a class="code" href="../../d6/d0/usercli_8h.html#a600">SendMessageWorker</a>(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o9">spwndList</a>, LB_SETTOPINDEX, itemNumber, 0, FALSE);
01877         <a class="code" href="../../d6/d0/usercli_8h.html#a600">SendMessageWorker</a>(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o9">spwndList</a>, LBCB_CARETON, 0, 0, FALSE);
01878 
01879         <span class="comment">/*</span>
01880 <span class="comment">         * We need to invalidate the edit rect so that the focus frame/invert</span>
01881 <span class="comment">         * will be turned off when the listbox is visible.  Tandy wants this for</span>
01882 <span class="comment">         * his typical reasons...</span>
01883 <span class="comment">         */</span>
01884         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a206">NtUserInvalidateRect</a>(hwnd, &amp;pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o2">editrc</a>, TRUE);
01885     }
01886 
01887     <span class="comment">//</span>
01888     <span class="comment">// Figure out where to position the dropdown listbox.  We want it just</span>
01889     <span class="comment">// touching the edge around the edit rectangle.  Note that since the</span>
01890     <span class="comment">// listbox is a popup, we need the position in screen coordinates.</span>
01891     <span class="comment">//</span>
01892 
01893     <span class="comment">// We want the dropdown to pop below or above the combo</span>
01894 
01895     <span class="comment">// Get screen coords</span>
01896     editrc.left   = pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o0">spwnd</a>-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o6">rcWindow</a>.left;
01897     editrc.top    = pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o0">spwnd</a>-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o6">rcWindow</a>.top;
01898     editrc.right  = pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o0">spwnd</a>-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o6">rcWindow</a>.left + pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o4">cxCombo</a>;
01899     editrc.bottom = pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o0">spwnd</a>-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o6">rcWindow</a>.top  + pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o5">cyCombo</a>;
01900 
01901     <span class="comment">// List area</span>
01902     cyItem = (<span class="keywordtype">int</span>)<a class="code" href="../../d6/d0/usercli_8h.html#a600">SendMessageWorker</a>(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o9">spwndList</a>, LB_GETITEMHEIGHT, 0, 0, FALSE);
01903 
01904     <span class="keywordflow">if</span> (cyItem == 0) {
01905         <span class="comment">// Make sure that it's not 0</span>
01906         RIPMSG0( RIP_WARNING, <span class="stringliteral">"LB_GETITEMHEIGHT is returning 0\n"</span> );
01907 
01908         cyItem = <a class="code" href="../../d1/d8/clglobal_8c.html#a4">gpsi</a>-&gt;cySysFontChar;
01909     }
01910 
01911     <span class="comment">//  we shoulda' just been able to use cyDrop here, but thanks to VB's need</span>
01912     <span class="comment">//  to do things their OWN SPECIAL WAY, we have to keep monitoring the size</span>
01913     <span class="comment">//  of the listbox 'cause VB changes it directly (jeffbog 03/21/94)</span>
01914     iHeight = <a class="code" href="../../d8/d6/sertl_8c.html#a1">max</a>(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o7">cyDrop</a>, pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o9">spwndList</a>-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o6">rcWindow</a>.bottom -
01915                                  pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o9">spwndList</a>-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o6">rcWindow</a>.top);
01916 
01917     <span class="keywordflow">if</span> (dwMult = (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)<a class="code" href="../../d6/d0/usercli_8h.html#a600">SendMessageWorker</a>(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o9">spwndList</a>, LB_GETCOUNT, 0, 0, FALSE)) {
01918         dwMult = (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)(LOWORD(dwMult) * cyItem);
01919         dwMult += <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CYEDGE);
01920 
01921         <span class="keywordflow">if</span> (dwMult &lt; 0x7FFF)
01922             iHeight = <a class="code" href="../../d5/d4/acpitabl_8h.html#a69">min</a>(LOWORD(dwMult), iHeight);
01923     }
01924 
01925     <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o0">spwnd</a>, CBFNOINTEGRALHEIGHT)) {
01926         UserAssert(cyItem);
01927         iHeight = ((iHeight - <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CYEDGE)) / cyItem) * cyItem + <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CYEDGE);
01928     }
01929 
01930     <span class="comment">//</span>
01931     <span class="comment">// Other 1/2 of old app combo fix.  Make dropdown overlap combo window</span>
01932     <span class="comment">// a little.  That way we can have a chance of invalidating the overlap</span>
01933     <span class="comment">// and causing a repaint to help out Publisher 2.0's toolbar combos.</span>
01934     <span class="comment">// See comments for PressButton() above.</span>
01935     <span class="comment">//</span>
01936     pMonitor = <a class="code" href="../../d9/d1/mmrtl_8c.html#a8">_MonitorFromWindow</a>(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o0">spwnd</a>, MONITOR_DEFAULTTOPRIMARY);
01937     <span class="keywordflow">if</span> (editrc.bottom + iHeight &lt;= pMonitor-&gt;<a class="code" href="../../d0/d2/structtagMONITOR.html#o3">rcMonitor</a>.bottom) {
01938         yTop = editrc.bottom;
01939         <span class="keywordflow">if</span> (!pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o20">f3DCombo</a>)
01940             yTop -= <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CYBORDER);
01941 
01942         fAnimPos = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01943     } <span class="keywordflow">else</span> {
01944         yTop = <a class="code" href="../../d8/d6/sertl_8c.html#a1">max</a>(editrc.top - iHeight, pMonitor-&gt;<a class="code" href="../../d0/d2/structtagMONITOR.html#o3">rcMonitor</a>.top);
01945         <span class="keywordflow">if</span> (!pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o20">f3DCombo</a>)
01946             yTop += <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CYBORDER);
01947 
01948         fAnimPos = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01949     }
01950 
01951     <span class="keywordflow">if</span> ( ! <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>( pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o0">spwnd</a>, WFWIN40COMPAT) )
01952     {
01953       <span class="comment">// fix for Winword B#7504, Combo-ListBox text gets</span>
01954       <span class="comment">// truncated by a small width, this is do to us</span>
01955       <span class="comment">// now setting size here in SetWindowPos, rather than</span>
01956       <span class="comment">// earlier where we did this in Win3.1</span>
01957 
01958       <span class="keywordflow">if</span> ( (pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o9">spwndList</a>-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o6">rcWindow</a>.right - pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o9">spwndList</a>-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o6">rcWindow</a>.left ) &gt;
01959             pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o6">cxDrop</a> )
01960 
01961             pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o6">cxDrop</a> = pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o9">spwndList</a>-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o6">rcWindow</a>.right - pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o9">spwndList</a>-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o6">rcWindow</a>.left;
01962     }
01963 
01964     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a115">NtUserSetWindowPos</a>(hwndList, HWND_TOPMOST, editrc.left,
01965         yTop, <a class="code" href="../../d8/d6/sertl_8c.html#a1">max</a>(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o6">cxDrop</a>, pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o4">cxCombo</a>), iHeight, SWP_NOACTIVATE);
01966 
01967     <span class="comment">/*</span>
01968 <span class="comment">     * Get any drawing in the combo box window out of the way so it doesn't</span>
01969 <span class="comment">     * invalidate any of the SPB underneath the list window.</span>
01970 <span class="comment">     */</span>
01971     <a class="code" href="../../d3/d8/client_8c.html#a140">UpdateWindow</a>(hwnd);
01972 
01973     <span class="keywordflow">if</span> (!(<a class="code" href="../../d1/d0/inc_2user_8h.html#a382">TEST_EffectPUSIF</a>(PUSIF_COMBOBOXANIMATION))
01974         || (<a class="code" href="../../d6/d3/queue_8c.html#a35">GetAppCompatFlags2</a>(VER40) &amp; GACF2_ANIMATIONOFF)) {
01975         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a237">NtUserShowWindow</a>(hwndList, SW_SHOWNA);
01976     } <span class="keywordflow">else</span> {
01977         <a class="code" href="../../d3/d8/winmgrc_8c.html#a36">AnimateWindow</a>(hwndList, CMS_QANIMATION, (fAnimPos ? AW_VER_POSITIVE :
01978                 AW_VER_NEGATIVE) | AW_SLIDE);
01979     }
01980 
01981 <span class="preprocessor">#ifdef LATER</span>
01982 <span class="preprocessor"></span><span class="comment">//</span>
01983 <span class="comment">// we don't have sys modal windows.</span>
01984 <span class="comment">//</span>
01985     <span class="keywordflow">if</span> (pwndSysModal) {
01986 
01987         <span class="comment">/*</span>
01988 <span class="comment">         * If this combo is in a system modal dialog box, we need to explicitly</span>
01989 <span class="comment">         * call update window otherwise we won't automatically send paint</span>
01990 <span class="comment">         * messages to the toplevel listbox window.  This is especially</span>
01991 <span class="comment">         * noticeable in the File Open/Save sys modal dlgs which are put up at</span>
01992 <span class="comment">         * ExitWindows time.</span>
01993 <span class="comment">         */</span>
01994         <a class="code" href="../../d3/d8/client_8c.html#a140">UpdateWindow</a>(hwndList);
01995     }
01996 <span class="preprocessor">#endif</span>
01997 <span class="preprocessor"></span>
01998     <span class="comment">/*</span>
01999 <span class="comment">     * Restart search buffer from first char</span>
02000 <span class="comment">     */</span>
02001     {
02002     <a class="code" href="../../d7/d9/structtagLBIV.html">PLBIV</a> plb = ((<a class="code" href="../../d9/d9/structtagLBWND.html">PLBWND</a>)pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o9">spwndList</a>)-&gt;pLBIV;
02003 
02004         <span class="keywordflow">if</span> ((plb != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) &amp;&amp; (plb != (<a class="code" href="../../d7/d9/structtagLBIV.html">PLBIV</a>)-1)) {
02005             plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o61">iTypeSearch</a> = 0;
02006         }
02007     }
02008 
02009     <span class="keywordflow">if</span> (fTrack &amp;&amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o0">spwnd</a>, WFWIN40COMPAT))
02010         <a class="code" href="../../d6/d0/usercli_8h.html#a600">SendMessageWorker</a>(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o9">spwndList</a>, LBCB_STARTTRACK, FALSE, 0, FALSE);
02011 
02012     <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndList);
02013 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a681" doxytag="usercli.h::xxxCBSizeHandler" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID xxxCBSizeHandler           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d9/structtagCBox.html">PCBOX</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d3/comboini_8c-source.html#l00563">563</a> of file <a class="el" href="../../d4/d3/comboini_8c-source.html">comboini.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01874">tagCBox::cxCombo</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01875">tagCBox::cyCombo</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01877">tagCBox::cyDrop</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01838">tagWND::rcWindow</a>, <a class="el" href="../../d4/d3/comboini_8c-source.html#l00019">RECALC_CYDROP</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01780">tagCBox::spwnd</a>, and <a class="el" href="../../d4/d3/comboini_8c-source.html#l00589">xxxCBPosition()</a>.
<p>
Referenced by <a class="el" href="../../d2/d3/combo_8c-source.html#l00207">ComboBoxWndProcWorker()</a>.
<p>
<pre class="fragment"><div>00565 {
00566     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pcbox-&gt;spwnd);
00567 
00568     <span class="comment">/*</span>
00569 <span class="comment">     * Assume listbox is visible since the app should size it to its maximum</span>
00570 <span class="comment">     * visible size.</span>
00571 <span class="comment">     */</span>
00572     pcbox-&gt;cxCombo = pcbox-&gt;spwnd-&gt;rcWindow.right - pcbox-&gt;spwnd-&gt;rcWindow.left;
00573     <span class="comment">// only recalc cyDrop if the drop down is not TOTALLY nuked by the sizing</span>
00574     <span class="comment">// -- Visio 1.0 -- B#13112</span>
00575     <span class="keywordflow">if</span> (((pcbox-&gt;spwnd-&gt;rcWindow.bottom - pcbox-&gt;spwnd-&gt;rcWindow.top) - pcbox-&gt;cyCombo) &gt; 0)
00576         pcbox-&gt;cyDrop = <a class="code" href="../../d3/d4/comboini_8c.html#a0">RECALC_CYDROP</a>;
00577 
00578     <span class="comment">// Reposition everything.</span>
00579     <a class="code" href="../../d6/d0/usercli_8h.html#a669">xxxCBPosition</a>(pcbox);
00580 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a675" doxytag="usercli.h::xxxCBUpdateListBoxWindow" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID xxxCBUpdateListBoxWindow           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d9/structtagCBox.html">PCBOX</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d3/combo_8c-source.html#l02255">2255</a> of file <a class="el" href="../../d2/d3/combo_8c-source.html">combo.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00270">SendMessageWorker()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01780">tagCBox::spwnd</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01791">tagCBox::spwndEdit</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01792">tagCBox::spwndList</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00362">ThreadLock</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00366">ThreadUnlock</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00958">UserLocalAlloc</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00960">UserLocalFree</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02319">WFWIN40COMPAT</a>.
<p>
Referenced by <a class="el" href="../../d2/d3/combo_8c-source.html#l00207">ComboBoxWndProcWorker()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l01494">xxxCBCommandHandler()</a>, and <a class="el" href="../../d2/d3/combo_8c-source.html#l01819">xxxCBShowListBoxWindow()</a>.
<p>
<pre class="fragment"><div>02258 {
02259     <span class="keywordtype">int</span> cchText;
02260     <span class="keywordtype">int</span> sItem, sSel;
02261     LPWSTR pText = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
02262     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpwndEdit;
02263     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpwndList;
02264 
02265     <span class="keywordflow">if</span> (pcbox-&gt;spwndEdit == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
02266         <span class="keywordflow">return</span>;
02267     }
02268 
02269     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pcbox-&gt;spwnd);
02270 
02271     <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(pcbox-&gt;spwndList, &amp;tlpwndList);
02272     <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(pcbox-&gt;spwndEdit, &amp;tlpwndEdit);
02273 
02274     <span class="comment">/*</span>
02275 <span class="comment">     * +1 for null terminator</span>
02276 <span class="comment">     */</span>
02277 
02278     cchText = (<span class="keywordtype">int</span>)<a class="code" href="../../d6/d0/usercli_8h.html#a600">SendMessageWorker</a>(pcbox-&gt;spwndEdit, WM_GETTEXTLENGTH, 0, 0, FALSE);
02279 
02280     <span class="keywordflow">if</span> (cchText) {
02281         cchText++;
02282         pText = (LPWSTR)<a class="code" href="../../d6/d0/usercli_8h.html#a136">UserLocalAlloc</a>(HEAP_ZERO_MEMORY, cchText*<span class="keyword">sizeof</span>(WCHAR));
02283         <span class="keywordflow">if</span> (pText != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
02284             <span class="keywordflow">try</span> {
02285                 <a class="code" href="../../d6/d0/usercli_8h.html#a600">SendMessageWorker</a>(pcbox-&gt;spwndEdit, WM_GETTEXT, cchText, (LPARAM)pText, FALSE);
02286                 sItem = (<span class="keywordtype">int</span>)<a class="code" href="../../d6/d0/usercli_8h.html#a600">SendMessageWorker</a>(pcbox-&gt;spwndList, LB_FINDSTRING,
02287                         (WPARAM)-1L, (LPARAM)pText, FALSE);
02288             } finally {
02289                 <a class="code" href="../../d6/d0/usercli_8h.html#a138">UserLocalFree</a>((HANDLE)pText);
02290             }
02291         }
02292     }
02293     <span class="keywordflow">else</span>
02294         sItem = -1;
02295 
02296     <span class="keywordflow">if</span> (fSelectionAlso) {
02297         sSel = sItem;
02298     } <span class="keywordflow">else</span> {
02299         sSel = -1;
02300     }
02301 
02302     <span class="keywordflow">if</span> (sItem == -1)
02303     {
02304         sItem = 0;
02305 
02306         <span class="comment">//</span>
02307         <span class="comment">// Old apps:  w/ editable combos, selected 1st item in list even if</span>
02308         <span class="comment">// it didn't match text in edit field.  This is not desirable</span>
02309         <span class="comment">// behavior for 4.0 dudes esp. with cancel allowed.  Reason:</span>
02310         <span class="comment">//      (1) User types in text that doesn't match list choices</span>
02311         <span class="comment">//      (2) User drops combo</span>
02312         <span class="comment">//      (3) User pops combo back up</span>
02313         <span class="comment">//      (4) User presses OK in dialog that does stuff w/ combo</span>
02314         <span class="comment">//          contents.</span>
02315         <span class="comment">// In 3.1, when the combo dropped, we'd select the 1st item anyway.</span>
02316         <span class="comment">// So the last CBN_SELCHANGE the owner got would be 0--which is</span>
02317         <span class="comment">// bogus because it really should be -1.  In fact if you type anything</span>
02318         <span class="comment">// into the combo afterwards it will reset itself to -1.</span>
02319         <span class="comment">//</span>
02320         <span class="comment">// 4.0 dudes won't get this bogus 0 selection.</span>
02321         <span class="comment">//</span>
02322         <span class="keywordflow">if</span> (fSelectionAlso &amp;&amp; !<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pcbox-&gt;spwnd, WFWIN40COMPAT))
02323             sSel = 0;
02324     }
02325 
02326 
02327     <a class="code" href="../../d6/d0/usercli_8h.html#a600">SendMessageWorker</a>(pcbox-&gt;spwndList, LB_SETCURSEL, (DWORD)sSel, 0, FALSE);
02328     <a class="code" href="../../d6/d0/usercli_8h.html#a600">SendMessageWorker</a>(pcbox-&gt;spwndList, LB_SETCARETINDEX, (DWORD)sItem, 0, FALSE);
02329     <a class="code" href="../../d6/d0/usercli_8h.html#a600">SendMessageWorker</a>(pcbox-&gt;spwndList, LB_SETTOPINDEX, (DWORD)sItem, 0, FALSE);
02330 
02331     <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndEdit);
02332     <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndList);
02333 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a757" doxytag="usercli.h::xxxCheckDefPushButton" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID xxxCheckDefPushButton           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwndDlg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwndOldFocus</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwndNewFocus</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d8/dlgmgr2_8c-source.html#l00084">84</a> of file <a class="el" href="../../d6/d8/dlgmgr2_8c-source.html">dlgmgr2.c</a>.
<p>
References <a class="el" href="../../d6/d8/dlgmgr2_8c-source.html#l00749">_FindDlgItem()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01514">HW</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01515">HWq</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00160">SAMEWOWHANDLE</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00652">SendMessage()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01764">tagWND::spmenu</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00363">ThreadLockAlways</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00366">ThreadUnlock</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00120">ValidateHwnd</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02377">WEFCONTROLPARENT</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02418">WFDISABLED</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02319">WFWIN40COMPAT</a>, and <a class="el" href="../../d6/d8/dlgmgr2_8c-source.html#l00031">xxxRemoveDefaultButton()</a>.
<p>
Referenced by <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l00460">DefDlgProcWorker()</a>, <a class="el" href="../../d1/d8/dlgbegin_8c-source.html#l00553">InternalCreateDialog()</a>, <a class="el" href="../../d6/d8/dlgmgr2_8c-source.html#l00317">IsDialogMessageW()</a>, and <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l00110">xxxRestoreDlgFocus()</a>.
<p>
<pre class="fragment"><div>00088 {
00089     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwndNewFocus;
00090     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwndOldFocus;
00091     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpwndT;
00092     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwndT;
00093     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> codeNewFocus = 0;
00094     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> styleT;
00095     LONG lT;
00096     <span class="keywordtype">int</span> <span class="keywordtype">id</span>;
00097 
00098     <span class="keywordflow">if</span> (hwndNewFocus)
00099         pwndNewFocus = <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(hwndNewFocus);
00100     <span class="keywordflow">else</span>
00101         pwndNewFocus = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00102 
00103      <span class="keywordflow">if</span> (hwndOldFocus)
00104          pwndOldFocus = <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(hwndOldFocus);
00105      <span class="keywordflow">else</span>
00106          pwndOldFocus = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00107 
00108     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pwndDlg);
00109     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pwndNewFocus);
00110     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pwndOldFocus);
00111 
00112     <span class="keywordflow">if</span> (pwndNewFocus)
00113     {
00114         <span class="comment">// Do nothing if clicking on dialog background or recursive dialog</span>
00115         <span class="comment">// background.</span>
00116         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwndNewFocus, WEFCONTROLPARENT))
00117             <span class="keywordflow">return</span>;
00118 
00119         codeNewFocus = (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)<a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(hwndNewFocus, WM_GETDLGCODE, 0, 0L);
00120     }
00121 
00122     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a15">SAMEWOWHANDLE</a>(hwndOldFocus, hwndNewFocus)) {
00123         <span class="comment">//</span>
00124         <span class="comment">// NEW FOR 4.0:</span>
00125         <span class="comment">//</span>
00126         <span class="comment">// There is a very common frustrating scenario for ISVs who try to</span>
00127         <span class="comment">// set the default ID.  Our dialog manager assumes that if a push</span>
00128         <span class="comment">// button has the focus, it is the default button also.  As such</span>
00129         <span class="comment">// it passes in the focus window to this routine.  If someone tries</span>
00130         <span class="comment">// to change the focus or set the def ID such that they reside with</span>
00131         <span class="comment">// two different push buttons, the double-default-push button case</span>
00132         <span class="comment">// will result shortly.</span>
00133         <span class="comment">//</span>
00134         <span class="comment">// As such, for 4.0 dialogs, we will go check the def ID and see if</span>
00135         <span class="comment">// is the same as hwndOldFocus' ID.  If not, then we will find IT</span>
00136         <span class="comment">// and use that dude as hwndOldFocus</span>
00137         <span class="comment">//</span>
00138         <span class="keywordflow">if</span> (codeNewFocus &amp; DLGC_UNDEFPUSHBUTTON)
00139         {
00140            <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwndDlg, WFWIN40COMPAT) &amp;&amp; hwndOldFocus)
00141            {
00142                lT = (LONG)<a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(pwndDlg), DM_GETDEFID, 0, 0L);
00143                <span class="keywordtype">id</span> = (HIWORD(lT) == DC_HASDEFID ? LOWORD(lT) : IDOK);
00144                lT = MAKELONG(<span class="keywordtype">id</span>, 0);
00145 
00146                <span class="keywordflow">if</span> (lT != PtrToLong(pwndNewFocus-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o16">spmenu</a>))
00147                {
00148                    <span class="keywordflow">if</span> (pwndOldFocus = <a class="code" href="../../d6/d0/usercli_8h.html#a752">_FindDlgItem</a>(pwndDlg, lT))
00149                    {
00150                        hwndOldFocus = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a450">HW</a>(pwndOldFocus);
00151                        <span class="keywordflow">if</span> (<a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(hwndOldFocus, WM_GETDLGCODE, 0, 0L) &amp; DLGC_DEFPUSHBUTTON)
00152                        {
00153                            <a class="code" href="../../d6/d0/usercli_8h.html#a756">xxxRemoveDefaultButton</a>(pwndDlg, pwndOldFocus);
00154                            <span class="keywordflow">goto</span> SetNewDefault;
00155                        }
00156                    }
00157                }
00158            }
00159 
00160            <a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(hwndNewFocus, BM_SETSTYLE, BS_DEFPUSHBUTTON, (LONG)TRUE);
00161         }
00162         <span class="keywordflow">return</span>;
00163     }
00164 
00165     <span class="comment">/*</span>
00166 <span class="comment">     * If the focus is changing to or from a pushbutton, then remove the</span>
00167 <span class="comment">     * default style from the current default button</span>
00168 <span class="comment">     */</span>
00169     <span class="keywordflow">if</span> ((hwndOldFocus != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> &amp;&amp; (<a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(hwndOldFocus, WM_GETDLGCODE,
00170                 0, 0) &amp; (DLGC_DEFPUSHBUTTON | DLGC_UNDEFPUSHBUTTON))) ||
00171             (hwndNewFocus != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> &amp;&amp;
00172                 (codeNewFocus &amp; (DLGC_DEFPUSHBUTTON | DLGC_UNDEFPUSHBUTTON)))) {
00173         <a class="code" href="../../d6/d0/usercli_8h.html#a756">xxxRemoveDefaultButton</a>(pwndDlg, pwndNewFocus);
00174     }
00175 
00176 SetNewDefault:
00177     <span class="comment">/*</span>
00178 <span class="comment">     * If moving to a button, make that button the default.</span>
00179 <span class="comment">     */</span>
00180     <span class="keywordflow">if</span> (codeNewFocus &amp; DLGC_UNDEFPUSHBUTTON) {
00181         <a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(hwndNewFocus, BM_SETSTYLE, BS_DEFPUSHBUTTON, (LONG)TRUE);
00182     } <span class="keywordflow">else</span> {
00183 
00184         <span class="comment">/*</span>
00185 <span class="comment">         * Otherwise, make sure the original default button is default</span>
00186 <span class="comment">         * and no others.</span>
00187 <span class="comment">         */</span>
00188 
00189         <span class="comment">/*</span>
00190 <span class="comment">         * Get the original default button handle</span>
00191 <span class="comment">         */</span>
00192         lT = (LONG)<a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(pwndDlg), DM_GETDEFID, 0, 0L);
00193         <span class="keywordtype">id</span> = (HIWORD(lT) == DC_HASDEFID ? LOWORD(lT) : IDOK);
00194         pwndT = <a class="code" href="../../d6/d0/usercli_8h.html#a752">_FindDlgItem</a>(pwndDlg, <span class="keywordtype">id</span>);
00195 
00196         <span class="keywordflow">if</span> (pwndT == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00197             <span class="keywordflow">return</span>;
00198         <a class="code" href="../../d6/d0/usercli_8h.html#a37">ThreadLockAlways</a>(pwndT, &amp;tlpwndT);
00199 
00200         <span class="comment">/*</span>
00201 <span class="comment">         * If it already has the default button style, do nothing.</span>
00202 <span class="comment">         */</span>
00203         <span class="keywordflow">if</span> ((styleT = (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)<a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(pwndT), WM_GETDLGCODE, 0, 0L)) &amp; DLGC_DEFPUSHBUTTON) {
00204             <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndT);
00205             <span class="keywordflow">return</span>;
00206         }
00207 
00208         <span class="comment">/*</span>
00209 <span class="comment">         * Also check to make sure it is really a button.</span>
00210 <span class="comment">         */</span>
00211         <span class="keywordflow">if</span> (!(styleT &amp; DLGC_UNDEFPUSHBUTTON)) {
00212             <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndT);
00213             <span class="keywordflow">return</span>;
00214         }
00215 
00216         <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwndT, WFDISABLED)) {
00217             <a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(pwndT), BM_SETSTYLE, BS_DEFPUSHBUTTON, (LONG)TRUE);
00218         }
00219         <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndT);
00220     }
00221 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a714" doxytag="usercli.h::xxxCheckRedraw" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID xxxCheckRedraw           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l03387">3387</a> of file <a class="el" href="../../d0/d1/lboxctl2_8c-source.html">lboxctl2.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00526">CItemInWindow()</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01948">tagLBIV::cMac</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01941">tagLBIV::iTop</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01940">tagLBIV::spwnd</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00038">xxxLBInvalidateRect()</a>.
<p>
Referenced by <a class="el" href="../../d7/d0/lb1_8c-source.html#l00032">ListBoxWndProcWorker()</a>, <a class="el" href="../../d1/d1/lboxctl3_8c-source.html#l00839">xxxLbDir()</a>, <a class="el" href="../../d1/d1/lboxctl3_8c-source.html#l01036">xxxLbInsertFile()</a>, <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l00407">xxxLBInsertItem()</a>, <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l00842">xxxLBoxCtlDelete()</a>, <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l00797">xxxLBResetContent()</a>, and <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00438">xxxLBSetFont()</a>.
<p>
<pre class="fragment"><div>03391 {
03392     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(plb-&gt;spwnd);
03393 
03394     <span class="keywordflow">if</span> (fConditional &amp;&amp; plb-&gt;cMac &amp;&amp;
03395             (sItem &gt; (plb-&gt;iTop + <a class="code" href="../../d6/d0/usercli_8h.html#a713">CItemInWindow</a>(plb, TRUE))))
03396         <span class="keywordflow">return</span>;
03397 
03398     <span class="comment">/*</span>
03399 <span class="comment">     * Don't do anything if the parent is not visible.</span>
03400 <span class="comment">     */</span>
03401     <a class="code" href="../../d6/d0/usercli_8h.html#a711">xxxLBInvalidateRect</a>(plb, (LPRECT)NULL, TRUE);
03402 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a698" doxytag="usercli.h::xxxDestroyLBox" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID xxxDestroyLBox           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00375">375</a> of file <a class="el" href="../../d3/d1/lboxrare_8c-source.html">lboxrare.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l00207">ComboBoxWndProcWorker()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00836">FNID_CLEANEDUP_BIT</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00794">FNID_COMBOBOX</a>, <a class="el" href="../../d2/d1/rtlinit_8c-source.html#l00344">FreeLookasideEntry()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00843">GETFNID</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01952">tagLBIV::hStrings</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01515">HWq</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02040">tagLBIV::iTabPixelPositions</a>, <a class="el" href="../../d7/d0/lb1_8c-source.html#l00016">ListboxLookaside</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l07715">NtUserSetWindowFNID()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02049">tagLBIV::pszTypeSearch</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00411">PTR_TO_ID</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00215">REBASEPWND</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01951">tagLBIV::rgpch</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01764">tagWND::spmenu</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01940">tagLBIV::spwnd</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01939">tagLBIV::spwndParent</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00368">Unlock</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00960">UserLocalFree</a>, and <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00350">xxxLBoxDoDeleteItems()</a>.
<p>
Referenced by <a class="el" href="../../d7/d0/lb1_8c-source.html#l00032">ListBoxWndProcWorker()</a>.
<p>
<pre class="fragment"><div>00378 {
00379     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwndParent;
00380 
00381     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pwnd);
00382 
00383     <span class="keywordflow">if</span> (pLBIV != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00384         <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pLBIV-&gt;spwnd);
00385 
00386         <span class="comment">/*</span>
00387 <span class="comment">         * If ownerdraw, send deleteitem messages to parent</span>
00388 <span class="comment">         */</span>
00389         <a class="code" href="../../d6/d0/usercli_8h.html#a700">xxxLBoxDoDeleteItems</a>(pLBIV);
00390 
00391         <span class="keywordflow">if</span> (pLBIV-&gt;rgpch != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00392             <a class="code" href="../../d6/d0/usercli_8h.html#a138">UserLocalFree</a>(pLBIV-&gt;rgpch);
00393             pLBIV-&gt;rgpch = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00394         }
00395 
00396         <span class="keywordflow">if</span> (pLBIV-&gt;hStrings != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00397             <a class="code" href="../../d6/d0/usercli_8h.html#a138">UserLocalFree</a>(pLBIV-&gt;hStrings);
00398             pLBIV-&gt;hStrings = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00399         }
00400 
00401         <span class="keywordflow">if</span> (pLBIV-&gt;iTabPixelPositions != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00402             <a class="code" href="../../d6/d0/usercli_8h.html#a138">UserLocalFree</a>((HANDLE)pLBIV-&gt;iTabPixelPositions);
00403             pLBIV-&gt;iTabPixelPositions = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00404         }
00405 
00406         <a class="code" href="../../d6/d0/usercli_8h.html#a42">Unlock</a>(&amp;pLBIV-&gt;spwnd);
00407         <a class="code" href="../../d6/d0/usercli_8h.html#a42">Unlock</a>(&amp;pLBIV-&gt;spwndParent);
00408 
00409         <span class="keywordflow">if</span> (pLBIV-&gt;pszTypeSearch) {
00410             <a class="code" href="../../d6/d0/usercli_8h.html#a138">UserLocalFree</a>(pLBIV-&gt;pszTypeSearch);
00411         }
00412 
00413         <a class="code" href="../../d6/d0/usercli_8h.html#a408">FreeLookasideEntry</a>(&amp;ListboxLookaside, pLBIV);
00414     }
00415 
00416     <span class="comment">/*</span>
00417 <span class="comment">     * Set the window's fnid status so that we can ignore rogue messages</span>
00418 <span class="comment">     */</span>
00419     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a284">NtUserSetWindowFNID</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(pwnd), FNID_CLEANEDUP_BIT);
00420 
00421     <span class="comment">/*</span>
00422 <span class="comment">     * If we're part of a combo box, let it know we're gone</span>
00423 <span class="comment">     */</span>
00424     pwndParent = <a class="code" href="../../d6/d0/usercli_8h.html#a27">REBASEPWND</a>(pwnd, spwndParent);
00425     <span class="keywordflow">if</span> (pwndParent &amp;&amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a232">GETFNID</a>(pwndParent) == <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a201">FNID_COMBOBOX</a>) {
00426         <a class="code" href="../../d6/d0/usercli_8h.html#a614">ComboBoxWndProcWorker</a>(pwndParent, WM_PARENTNOTIFY,
00427                 MAKELONG(WM_DESTROY, <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a99">PTR_TO_ID</a>(pwnd-&gt;spmenu)), (LPARAM)<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(pwnd), FALSE);
00428     }
00429 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a735" doxytag="usercli.h::xxxDlgDirListHelper" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL xxxDlgDirListHelper           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPWSTR&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPBYTE&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d1/lboxctl3_8c-source.html#l00190">190</a> of file <a class="el" href="../../d1/d1/lboxctl3_8c-source.html">lboxctl3.c</a>.
<p>
References <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00141">_GetDlgItem()</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00049">achSlashStar</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00048">awchSlashStar</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d1/d1/lboxctl3_8c-source.html#l00059">CCH_CHOPTEXT_EXTRA</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00926">CCHFILEMAX</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d1/d1/lboxctl3_8c-source.html#l00061">ChopText()</a>, <a class="el" href="../../d1/d1/lboxctl3_8c-source.html#l00027">DDL_PRIVILEGES</a>, <a class="el" href="../../d1/d1/lboxctl3_8c-source.html#l00028">DDL_TYPE</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d2/d4/w32_2ntuser_2rtl_2random_8c-source.html#l00080">FindCharPosition()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00794">FNID_COMBOBOX</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00795">FNID_COMBOLISTBOX</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00798">FNID_LISTBOX</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00843">GETFNID</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01515">HWq</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00025">INT</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00779">IsLBoxVisible</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d4/d8/arcinst_8c-source.html#l00065">MAX_PATH</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05330">NtUserInvalidateRect()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d7/ntcftxt_8h-source.html#l00427">PostMessage()</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00652">SendMessage()</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00768">SetDlgItemText()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01792">tagCBox::spwndList</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00066">szSLASHSTARDOTSTAR</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00363">ThreadLockAlways</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00366">ThreadUnlock</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02319">WFWIN40COMPAT</a>.
<p>
Referenced by <a class="el" href="../../d1/d1/lboxctl3_8c-source.html#l00600">DlgDirListA()</a>, <a class="el" href="../../d3/d3/combodir_8c-source.html#l00130">DlgDirListComboBoxA()</a>, <a class="el" href="../../d3/d3/combodir_8c-source.html#l00172">DlgDirListComboBoxW()</a>, and <a class="el" href="../../d1/d1/lboxctl3_8c-source.html#l00645">DlgDirListW()</a>.
<p>
<pre class="fragment"><div>00198 {
00199     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwndLB;
00200     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpwndLB;
00201     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fDir = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00202     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fRoot, bRet;
00203     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fPostIt;
00204     <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a>   cch;
00205     WCHAR ch;
00206     WCHAR szStaticPath[<a class="code" href="../../d0/d2/lboxctl3_8c.html#a8">CCH_CHOPTEXT_EXTRA</a> + <a class="code" href="../../d3/d9/arcinst_8c.html#a6">MAX_PATH</a>];
00207     PWCHAR pszCurrentDir;
00208     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> wDirMsg;
00209     LPWSTR lpchFile;
00210     LPWSTR lpchDirectory;
00211     <a class="code" href="../../d7/d9/structtagLBIV.html">PLBIV</a> plb;
00212     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fWasVisible = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00213     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>        fWin40Compat;
00214     <a class="code" href="../../d7/d9/structtagCBox.html">PCBOX</a> pcbox;
00215 
00216     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pwndDlg);
00217 
00218     <span class="comment">/*</span>
00219 <span class="comment">     * Strip the private bit DDL_NOFILES out - KidPix passes it in my mistake!</span>
00220 <span class="comment">     */</span>
00221     <span class="keywordflow">if</span> (attrib &amp; ~DDL_VALID) {
00222         RIPERR2(ERROR_INVALID_FLAGS, RIP_WARNING, <span class="stringliteral">"Invalid flags, %x &amp; ~%x != 0"</span>,
00223               attrib, DDL_VALID);
00224         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00225     }
00226 
00227     <span class="keywordflow">if</span> (attrib &amp; DDL_NOFILES) {
00228         RIPMSG0(RIP_WARNING, <span class="stringliteral">"DlgDirListHelper: stripping DDL_NOFILES"</span>);
00229         attrib &amp;= ~DDL_NOFILES;
00230     }
00231 
00232     <span class="comment">/*</span>
00233 <span class="comment">     * Case:Works is an app that calls DlgDirList with a NULL has hwndDlg;</span>
00234 <span class="comment">     * This is allowed because he uses NULL for idStaticPath and idListBox.</span>
00235 <span class="comment">     * So, the validation layer has been modified to allow a NULL for hwndDlg.</span>
00236 <span class="comment">     * But, we catch the bad apps with the following check.</span>
00237 <span class="comment">     * Fix for Bug #11864 --SANKAR-- 08/22/91 --</span>
00238 <span class="comment">     */</span>
00239     <span class="keywordflow">if</span> (!pwndDlg &amp;&amp; (idStaticPath || idListBox)) {
00240         RIPERR0(ERROR_INVALID_PARAMETER, RIP_VERBOSE, <span class="stringliteral">""</span>);
00241         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00242     }
00243 
00244     plb = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00245 
00246     <span class="comment">/*</span>
00247 <span class="comment">     * Do we need to add date, time, size or attribute info?</span>
00248 <span class="comment">     * Windows checks the Atom but misses if the class has been sub-classed</span>
00249 <span class="comment">     * as in VB.</span>
00250 <span class="comment">     */</span>
00251     <span class="keywordflow">if</span> (pwndLB = (<a class="code" href="../../d6/d9/structtagWND.html">PWND</a>)<a class="code" href="../../d3/d9/client_2wow_8c.html#a5">_GetDlgItem</a>(pwndDlg, idListBox)) {
00252         WORD fnid = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a232">GETFNID</a>(pwndLB);
00253 
00254         <span class="keywordflow">if</span> ((fnid == <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a205">FNID_LISTBOX</a> &amp;&amp; fListBox) ||
00255                 (fnid == <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a201">FNID_COMBOBOX</a> &amp;&amp; !fListBox) ||
00256                 (fnid == <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a202">FNID_COMBOLISTBOX</a> &amp;&amp; fListBox)) {
00257             <span class="keywordflow">if</span> (fListBox) {
00258                 plb = ((<a class="code" href="../../d9/d9/structtagLBWND.html">PLBWND</a>)pwndLB)-&gt;pLBIV;
00259             } <span class="keywordflow">else</span> {
00260 
00261                 pcbox = ((<a class="code" href="../../d0/d1/structtagCOMBOWND.html">PCOMBOWND</a>)pwndLB)-&gt;pcbox;
00262                 plb = ((<a class="code" href="../../d9/d9/structtagLBWND.html">PLBWND</a>)(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o9">spwndList</a>))-&gt;pLBIV;
00263             }
00264         } <span class="keywordflow">else</span> {
00265             RIPERR0(ERROR_LISTBOX_ID_NOT_FOUND, RIP_VERBOSE, <span class="stringliteral">""</span>);
00266         }
00267     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (idListBox != 0) {
00268 
00269         <span class="comment">/*</span>
00270 <span class="comment">         * Yell if the app passed an invalid list box id and keep from using a</span>
00271 <span class="comment">         * bogus plb.  PLB is NULLed above.</span>
00272 <span class="comment">         */</span>
00273         RIPERR0(ERROR_LISTBOX_ID_NOT_FOUND, RIP_VERBOSE, <span class="stringliteral">""</span>);
00274     }
00275 
00276     <span class="keywordflow">if</span> (idStaticPath &lt; 0 &amp;&amp; plb != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00277 
00278         <span class="comment">/*</span>
00279 <span class="comment">         * Clear idStaticPath because its purpose is over.</span>
00280 <span class="comment">         */</span>
00281         idStaticPath = 0;
00282 
00283     }
00284 
00285     fPostIt = (attrib &amp; DDL_POSTMSGS);
00286 
00287     <span class="keywordflow">if</span> (lpszPathSpec) {
00288         cch = lstrlenW(lpszPathSpec);
00289         <span class="keywordflow">if</span> (!cch) {
00290             <span class="keywordflow">if</span> (lpszPathSpecClient != (LPBYTE)lpszPathSpec) {
00291                 lpszPathSpecClient = <a class="code" href="../../d1/d8/clglobal_8c.html#a3">achSlashStar</a>;
00292             }
00293             lpszPathSpec = <a class="code" href="../../d1/d8/clglobal_8c.html#a2">awchSlashStar</a>;
00294         } <span class="keywordflow">else</span> {
00295             <span class="comment">/*</span>
00296 <span class="comment">             * Make sure we won't overflow our buffers...</span>
00297 <span class="comment">             */</span>
00298             <span class="keywordflow">if</span> (cch &gt; <a class="code" href="../../d6/d0/usercli_8h.html#a135">CCHFILEMAX</a>)
00299                 <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00300 
00301             <span class="comment">/*</span>
00302 <span class="comment">             * Convert lpszPathSpec into an upper case, OEM string.</span>
00303 <span class="comment">             */</span>
00304             CharUpper(lpszPathSpec);
00305             lpchDirectory = lpszPathSpec;
00306 
00307             lpchFile = <a class="code" href="../../d1/d8/clglobal_8c.html#a15">szSLASHSTARDOTSTAR</a> + 1;
00308 
00309             <span class="keywordflow">if</span> (*lpchDirectory) {
00310 
00311                 cch = wcslen(lpchDirectory);
00312 
00313                 <span class="comment">/*</span>
00314 <span class="comment">                 * If the directory name has a * or ? in it, don't bother trying</span>
00315 <span class="comment">                 * the (slow) SetCurrentDirectory.</span>
00316 <span class="comment">                 */</span>
00317                 <span class="keywordflow">if</span> (((<a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a>)<a class="code" href="../../d1/d5/w32_2ntuser_2rtl_2random_8c.html#a1">FindCharPosition</a>(lpchDirectory, TEXT(<span class="charliteral">'*'</span>)) != cch) ||
00318                     ((<a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a>)<a class="code" href="../../d1/d5/w32_2ntuser_2rtl_2random_8c.html#a1">FindCharPosition</a>(lpchDirectory, TEXT(<span class="charliteral">'?'</span>)) != cch) ||
00319                     !SetCurrentDirectory(lpchDirectory)) {
00320 
00321                     <span class="comment">/*</span>
00322 <span class="comment">                     * Set 'fDir' and 'fRoot' accordingly.</span>
00323 <span class="comment">                     */</span>
00324                     lpchFile = lpchDirectory + cch;
00325                     fDir = *(lpchFile - 1) == TEXT(<span class="charliteral">'\\'</span>);
00326                     fRoot = 0;
00327                     <span class="keywordflow">while</span> (cch--) {
00328                         ch = *(lpchFile - 1);
00329                         <span class="keywordflow">if</span> (ch == TEXT(<span class="charliteral">'*'</span>) || ch == TEXT(<span class="charliteral">'?'</span>))
00330                             fDir = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00331 
00332                         <span class="keywordflow">if</span> (ch == TEXT(<span class="charliteral">'\\'</span>) || ch == TEXT(<span class="charliteral">'/'</span>) || ch == TEXT(<span class="charliteral">':'</span>)) {
00333                             fRoot = (cch == 0 || *(lpchFile - 2) == TEXT(<span class="charliteral">':'</span>) ||
00334                                     (ch == TEXT(<span class="charliteral">':'</span>)));
00335                             <span class="keywordflow">break</span>;
00336                         }
00337                         lpchFile--;
00338                     }
00339 
00340                     <span class="comment">/*</span>
00341 <span class="comment">                     * To remove Bug #16, the following error return is to be removed.</span>
00342 <span class="comment">                     * In order to prevent the existing apps from breaking up, it is</span>
00343 <span class="comment">                     * decided that the bug will not be fixed and will be mentioned</span>
00344 <span class="comment">                     * in the documentation.</span>
00345 <span class="comment">                     * --SANKAR-- Sep 21</span>
00346 <span class="comment">                     */</span>
00347 
00348                     <span class="comment">/*</span>
00349 <span class="comment">                     * If no wildcard characters, return error.</span>
00350 <span class="comment">                     */</span>
00351                     <span class="keywordflow">if</span> (!fDir) {
00352                         RIPERR0(ERROR_NO_WILDCARD_CHARACTERS, RIP_VERBOSE, <span class="stringliteral">""</span>);
00353                         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00354                     }
00355 
00356                     <span class="comment">/*</span>
00357 <span class="comment">                     * Special case for lpchDirectory == "\"</span>
00358 <span class="comment">                     */</span>
00359                     <span class="keywordflow">if</span> (fRoot)
00360                         lpchFile++;
00361 
00362                     <span class="comment">/*</span>
00363 <span class="comment">                     * Do we need to change directories?</span>
00364 <span class="comment">                     */</span>
00365                     <span class="keywordflow">if</span> (fRoot || cch &gt;= 0) {
00366 
00367                         <span class="comment">/*</span>
00368 <span class="comment">                         * Replace the Filename's first char with a nul.</span>
00369 <span class="comment">                         */</span>
00370                         ch = *--lpchFile;
00371                         *lpchFile = TEXT(<span class="charliteral">'\0'</span>);
00372 
00373                         <span class="comment">/*</span>
00374 <span class="comment">                         * Change the current directory.</span>
00375 <span class="comment">                         */</span>
00376                         <span class="keywordflow">if</span> (*lpchDirectory) {
00377                             bRet = SetCurrentDirectory(lpchDirectory);
00378                             <span class="keywordflow">if</span> (!bRet) {
00379 
00380                                 <span class="comment">/*</span>
00381 <span class="comment">                                 * Restore the filename before we return...</span>
00382 <span class="comment">                                 */</span>
00383                                 *((LPWSTR)lpchFile)++ = ch;
00384                                 <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00385                             }
00386                         }
00387 
00388                         <span class="comment">/*</span>
00389 <span class="comment">                         * Restore the filename's first character.</span>
00390 <span class="comment">                         */</span>
00391                         *lpchFile++ = ch;
00392                     }
00393 
00394                     <span class="comment">/*</span>
00395 <span class="comment">                     * Undo damage caused by special case above.</span>
00396 <span class="comment">                     */</span>
00397                     <span class="keywordflow">if</span> (fRoot) {
00398                         lpchFile--;
00399                     }
00400                 }
00401             }
00402 
00403             <span class="comment">/*</span>
00404 <span class="comment">             * This is copying on top of the data the client passed us! Since</span>
00405 <span class="comment">             * the LB_DIR or CB_DIR could be posted, and since we need to</span>
00406 <span class="comment">             * pass a client side string pointer when we do that, we need</span>
00407 <span class="comment">             * to copy this new data back to the client!</span>
00408 <span class="comment">             */</span>
00409             <span class="keywordflow">if</span> (fPostIt &amp;&amp; lpszPathSpecClient != (LPBYTE)lpszPathSpec) {
00410                 WCSToMB(lpchFile, -1, &amp;lpszPathSpecClient, MAXLONG, FALSE);
00411             }
00412             wcscpy(lpszPathSpec, lpchFile);
00413         }
00414     }
00415     <span class="comment">/*</span>
00416 <span class="comment">     * In some cases, the ChopText requires extra space ahead of the path:</span>
00417 <span class="comment">     * Give it CCH_CHOPTEXT_EXTRA extra spaces. (See ChopText() above).</span>
00418 <span class="comment">     */</span>
00419     pszCurrentDir = szStaticPath + <a class="code" href="../../d0/d2/lboxctl3_8c.html#a8">CCH_CHOPTEXT_EXTRA</a>;
00420     GetCurrentDirectory(
00421             <span class="keyword">sizeof</span>(szStaticPath)/<span class="keyword">sizeof</span>(WCHAR) - CCH_CHOPTEXT_EXTRA,
00422             pszCurrentDir);
00423 
00424     <span class="comment">/*</span>
00425 <span class="comment">     * If we have a listbox, lock it down</span>
00426 <span class="comment">     */</span>
00427     <span class="keywordflow">if</span> (pwndLB != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00428         <a class="code" href="../../d6/d0/usercli_8h.html#a37">ThreadLockAlways</a>(pwndLB, &amp;tlpwndLB);
00429     }
00430 
00431     <span class="comment">/*</span>
00432 <span class="comment">     * Fill in the static path item.</span>
00433 <span class="comment">     */</span>
00434     <span class="keywordflow">if</span> (idStaticPath) {
00435 
00436         <span class="comment">/*</span>
00437 <span class="comment">         * To fix a bug OemToAnsi() call is inserted; SANKAR--Sep 16th</span>
00438 <span class="comment">         */</span>
00439 <span class="comment">// OemToChar(szCurrentDir, szCurrentDir);</span>
00440         CharLower(pszCurrentDir);
00441         <a class="code" href="../../d5/d9/cltxt_8h.html#a20">SetDlgItemText</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(pwndDlg), idStaticPath, <a class="code" href="../../d0/d2/lboxctl3_8c.html#a13">ChopText</a>(pwndDlg, idStaticPath, szStaticPath));
00442     }
00443 
00444     <span class="comment">/*</span>
00445 <span class="comment">     * Fill in the directory List/ComboBox if it exists.</span>
00446 <span class="comment">     */</span>
00447     <span class="keywordflow">if</span> (idListBox &amp;&amp; pwndLB != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00448 
00449         HWND hwndLB = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(pwndLB);
00450 
00451         wDirMsg = (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)(fListBox ? LB_RESETCONTENT : CB_RESETCONTENT);
00452 
00453         <span class="keywordflow">if</span> (fPostIt) {
00454             <a class="code" href="../../d0/d8/ntcftxt_8h.html#a20">PostMessage</a>(hwndLB, wDirMsg, 0, 0L);
00455         } <span class="keywordflow">else</span> {
00456             <span class="keywordflow">if</span> (plb != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> &amp;&amp; (fWasVisible = <a class="code" href="../../d6/d0/usercli_8h.html#a108">IsLBoxVisible</a>(plb))) {
00457                 <a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(hwndLB, WM_SETREDRAW, FALSE, 0L);
00458             }
00459             <a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(hwndLB, wDirMsg, 0, 0L);
00460         }
00461 
00462         wDirMsg = (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)(fListBox ? LB_DIR : CB_DIR);
00463 
00464         <span class="keywordflow">if</span> (attrib == DDL_DRIVES)
00465             attrib |= DDL_EXCLUSIVE;
00466 
00467         <span class="comment">//</span>
00468         <span class="comment">// Hack for DDL_EXCLUSIVE to REALLY work.</span>
00469         <span class="comment">//</span>
00470         fWin40Compat = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwndLB, WFWIN40COMPAT);
00471 
00472         <span class="comment">//</span>
00473         <span class="comment">// BACKWARDS COMPATIBILITY HACK</span>
00474         <span class="comment">//</span>
00475         <span class="comment">// We want DDL_EXCLUSIVE to _really_ work for new apps.  I.E., we</span>
00476         <span class="comment">// want apps to be able to specify DDL_DRIVES/DDL_VOLUMES with</span>
00477         <span class="comment">// DDL_EXCLUSIVE and privilege bits -- and have only those items</span>
00478         <span class="comment">// matching show up, w/out files.</span>
00479         <span class="comment">//</span>
00480         <span class="keywordflow">if</span> (attrib &amp; DDL_EXCLUSIVE)
00481         {
00482             <span class="keywordflow">if</span> (fWin40Compat)
00483             {
00484                 <span class="keywordflow">if</span> (attrib &amp; (DDL_DRIVES | DDL_DIRECTORY))
00485                     attrib |= DDL_NOFILES;
00486             }
00487             <span class="keywordflow">else</span>
00488             {
00489                 <span class="keywordflow">if</span> (attrib == (DDL_DRIVES | DDL_EXCLUSIVE))
00490                     attrib |= DDL_NOFILES;
00491             }
00492         }
00493 
00494         <span class="keywordflow">if</span> (!(attrib &amp; DDL_NOFILES)) {
00495 
00496             <span class="comment">/*</span>
00497 <span class="comment">             * Add everything except the subdirectories and disk drives.</span>
00498 <span class="comment">             */</span>
00499             <span class="keywordflow">if</span> (fPostIt) {
00500                 <span class="comment">/*</span>
00501 <span class="comment">                 * Post lpszPathSpecClient, the client side pointer.</span>
00502 <span class="comment">                 */</span>
00503 <span class="preprocessor">#ifdef WASWIN31</span>
00504 <span class="preprocessor"></span>                <a class="code" href="../../d0/d8/ntcftxt_8h.html#a20">PostMessage</a>(hwndLB, wDirMsg, attrib &amp;
00505                         ~(DDL_DIRECTORY | DDL_DRIVES | DDL_POSTMSGS),
00506                         (LPARAM)lpszPathSpecClient);
00507 <span class="preprocessor">#else</span>
00508 <span class="preprocessor"></span>                <span class="comment">/*</span>
00509 <span class="comment">                 * On NT, keep DDL_POSTMSGS in wParam because we need to know</span>
00510 <span class="comment">                 * in the wndproc whether the pointer is clientside or server</span>
00511 <span class="comment">                 * side.</span>
00512 <span class="comment">                 */</span>
00513                 <a class="code" href="../../d0/d8/ntcftxt_8h.html#a20">PostMessage</a>(hwndLB, wDirMsg,
00514                         attrib &amp; ~(DDL_DIRECTORY | DDL_DRIVES),
00515                         (LPARAM)lpszPathSpecClient);
00516 <span class="preprocessor">#endif</span>
00517 <span class="preprocessor"></span>
00518             } <span class="keywordflow">else</span> {
00519 
00520                 <span class="comment">/*</span>
00521 <span class="comment">                 * IanJa: #ifndef WIN16 (32-bit Windows), attrib gets extended</span>
00522 <span class="comment">                 * to LONG wParam automatically by the compiler</span>
00523 <span class="comment">                 */</span>
00524                 <a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(hwndLB, wDirMsg,
00525                         attrib &amp; ~(DDL_DIRECTORY | DDL_DRIVES),
00526                         (LPARAM)lpszPathSpec);
00527             }
00528 
00529 <span class="preprocessor">#ifdef WASWIN31</span>
00530 <span class="preprocessor"></span>            <span class="comment">/*</span>
00531 <span class="comment">             * Strip out just the subdirectory and drive bits.</span>
00532 <span class="comment">             */</span>
00533             attrib &amp;= (DDL_DIRECTORY | DDL_DRIVES);
00534 <span class="preprocessor">#else</span>
00535 <span class="preprocessor"></span>            <span class="comment">//</span>
00536             <span class="comment">// B#1433</span>
00537             <span class="comment">// The old code stripped out read-only, hidden, system, and archive</span>
00538             <span class="comment">// information for subdirectories, making it impossible to have</span>
00539             <span class="comment">// a listbox w/ hidden directories!</span>
00540             <span class="comment">//</span>
00541 
00542             <span class="comment">/*</span>
00543 <span class="comment">             * Strip out just the subdirectory and drive bits. ON NT, keep</span>
00544 <span class="comment">             * the DDL_POSTMSG bit so we know how to thunk this message.</span>
00545 <span class="comment">             */</span>
00546             <span class="keywordflow">if</span> (!fWin40Compat)
00547                 attrib &amp;= <a class="code" href="../../d0/d2/lboxctl3_8c.html#a7">DDL_TYPE</a>;
00548             <span class="keywordflow">else</span>
00549             {
00550                 attrib &amp;= (<a class="code" href="../../d0/d2/lboxctl3_8c.html#a7">DDL_TYPE</a> | (attrib &amp; <a class="code" href="../../d0/d2/lboxctl3_8c.html#a6">DDL_PRIVILEGES</a>));
00551                 attrib |= DDL_NOFILES;
00552             }
00553 <span class="comment">//            attrib &amp;= (DDL_DIRECTORY | DDL_DRIVES | DDL_POSTMSGS);</span>
00554 <span class="preprocessor">#endif</span>
00555 <span class="preprocessor"></span>        }
00556 
00557         <span class="comment">//</span>
00558         <span class="comment">// Add directories and volumes to the listbox.</span>
00559         <span class="comment">//</span>
00560         <span class="keywordflow">if</span> (attrib &amp; <a class="code" href="../../d0/d2/lboxctl3_8c.html#a7">DDL_TYPE</a>) {
00561 
00562             <span class="comment">/*</span>
00563 <span class="comment">             * Add the subdirectories and disk drives.</span>
00564 <span class="comment">             */</span>
00565             lpszPathSpec = <a class="code" href="../../d1/d8/clglobal_8c.html#a15">szSLASHSTARDOTSTAR</a> + 1;
00566 
00567             attrib |= DDL_EXCLUSIVE;
00568 
00569             <span class="keywordflow">if</span> (fPostIt) {
00570                 <span class="comment">/*</span>
00571 <span class="comment">                 * Post lpszPathSpecClient, the client side pointer (see text</span>
00572 <span class="comment">                 * above).</span>
00573 <span class="comment">                 */</span>
00574                 <a class="code" href="../../d0/d8/ntcftxt_8h.html#a20">PostMessage</a>(hwndLB, wDirMsg, attrib, (LPARAM)lpszPathSpecClient);
00575             } <span class="keywordflow">else</span> {
00576                 <a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(hwndLB, wDirMsg, attrib, (LPARAM)lpszPathSpec);
00577             }
00578         }
00579 
00580         <span class="keywordflow">if</span> (!fPostIt &amp;&amp; fWasVisible) {
00581             <a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(hwndLB, WM_SETREDRAW, TRUE, 0L);
00582             <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a206">NtUserInvalidateRect</a>(hwndLB, NULL, TRUE);
00583         }
00584     }
00585 
00586     <span class="keywordflow">if</span> (pwndLB != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00587         <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndLB);
00588     }
00589 
00590     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00591 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a683" doxytag="usercli.h::xxxFindString" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a> xxxFindString           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPWSTR&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02802">2802</a> of file <a class="el" href="../../d0/d1/lboxctl2_8c-source.html">lboxctl2.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01948">tagLBIV::cMac</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02757">Compare()</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02047">tagLBIV::dwLocaleId</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00788">EQ</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01984">tagLBIV::fHasData</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01980">tagLBIV::fHasStrings</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01972">tagLBIV::fSort</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00791">GT</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01952">tagLBIV::hStrings</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01514">HW</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01515">HWq</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00025">INT</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00790">LT</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00845">tagLBItem::offsz</a>, <a class="el" href="../../d9/d1/lboxctl2_8c.html#a6">pODRg</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00789">PREFIX</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01951">tagLBIV::rgpch</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00652">SendMessage()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01764">tagWND::spmenu</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01940">tagLBIV::spwnd</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01939">tagLBIV::spwndParent</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00362">ThreadLock</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00366">ThreadUnlock</a>, and <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>.
<p>
Referenced by <a class="el" href="../../d7/d0/lb1_8c-source.html#l00032">ListBoxWndProcWorker()</a>, and <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02948">xxxLBoxCtlCharInput()</a>.
<p>
<pre class="fragment"><div>02808 {
02809     <span class="comment">/*</span>
02810 <span class="comment">     * Search for a prefix match (case-insensitive equal/prefix)</span>
02811 <span class="comment">     * sStart == -1 means start from beginning, else start looking at sStart+1</span>
02812 <span class="comment">     * assumes cMac &gt; 0.</span>
02813 <span class="comment">     */</span>
02814     <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a> sInd;  <span class="comment">/* index of string */</span>
02815     <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a> sStop;          <span class="comment">/* index to stop searching at */</span>
02816     <a class="code" href="../../d6/d9/structtagLBItem.html">lpLBItem</a> pRg;
02817     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpwndParent;
02818     <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a> sortResult;
02819 
02820 <span class="comment">/*</span>
02821 <span class="comment"> * Owner-Draw version of pRg</span>
02822 <span class="comment"> */</span>
02823 <span class="preprocessor">#define pODRg ((lpLBODItem)pRg)</span>
02824 <span class="preprocessor"></span>    COMPAREITEMSTRUCT cis;
02825     LPWSTR listboxString;
02826 
02827     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(plb-&gt;spwnd);
02828 
02829     <span class="keywordflow">if</span> (plb-&gt;fHasStrings &amp;&amp; (!lpstr || !*lpstr))
02830         <span class="keywordflow">return</span> LB_ERR;
02831 
02832     <span class="keywordflow">if</span> (!plb-&gt;fHasData) {
02833         RIPERR0(ERROR_INVALID_PARAMETER, RIP_WARNING, <span class="stringliteral">"FindString called on NODATA lb"</span>);
02834         <span class="keywordflow">return</span> LB_ERR;
02835     }
02836 
02837     <span class="keywordflow">if</span> ((sInd = sStart + 1) &gt;= plb-&gt;cMac)
02838         sInd = (fWrap ? 0 : plb-&gt;cMac - 1);
02839 
02840     sStop = (fWrap ? sInd : 0);
02841 
02842     <span class="comment">/*</span>
02843 <span class="comment">     * If at end and no wrap, stop right away</span>
02844 <span class="comment">     */</span>
02845     <span class="keywordflow">if</span> (((sStart &gt;= plb-&gt;cMac - 1) &amp;&amp; !fWrap) || (plb-&gt;cMac &lt; 1)) {
02846         <span class="keywordflow">return</span> LB_ERR;
02847     }
02848 
02849     <span class="comment">/*</span>
02850 <span class="comment">     * Apps could pass in an invalid sStart like -2 and we would blow up.</span>
02851 <span class="comment">     * Win 3.1 would not so we need to fixup sInd to be zero</span>
02852 <span class="comment">     */</span>
02853     <span class="keywordflow">if</span> (sInd &lt; 0)
02854         sInd = 0;
02855 
02856     pRg = (<a class="code" href="../../d6/d9/structtagLBItem.html">lpLBItem</a>)(plb-&gt;rgpch);
02857 
02858     <span class="keywordflow">do</span> {
02859         <span class="keywordflow">if</span> (plb-&gt;fHasStrings) {
02860 
02861             <span class="comment">/*</span>
02862 <span class="comment">             * Searching for string matches.</span>
02863 <span class="comment">             */</span>
02864             listboxString = (LPWSTR)((LPBYTE)plb-&gt;hStrings + pRg[sInd].<a class="code" href="../../d6/d9/structtagLBItem.html#o0">offsz</a>);
02865 
02866             <span class="keywordflow">if</span> (code == <a class="code" href="../../d6/d0/usercli_8h.html#a111">PREFIX</a> &amp;&amp;
02867                 listboxString &amp;&amp;
02868                 *lpstr != TEXT(<span class="charliteral">'['</span>) &amp;&amp;
02869                 *listboxString == TEXT(<span class="charliteral">'['</span>)) {
02870 
02871                 <span class="comment">/*</span>
02872 <span class="comment">                 * If we are looking for a prefix string and the first items</span>
02873 <span class="comment">                 * in this string are [- then we ignore them.  This is so</span>
02874 <span class="comment">                 * that in a directory listbox, the user can goto drives</span>
02875 <span class="comment">                 * by selecting the drive letter.</span>
02876 <span class="comment">                 */</span>
02877                 listboxString++;
02878                 <span class="keywordflow">if</span> (*listboxString == TEXT(<span class="charliteral">'-'</span>))
02879                     listboxString++;
02880             }
02881 
02882             <span class="keywordflow">if</span> (<a class="code" href="../../d9/d1/lboxctl2_8c.html#a38">Compare</a>(lpstr, listboxString, plb-&gt;dwLocaleId) &lt;= code) {
02883                <span class="keywordflow">goto</span> FoundIt;
02884             }
02885 
02886         } <span class="keywordflow">else</span> {
02887             <span class="keywordflow">if</span> (plb-&gt;fSort) {
02888 
02889                 <span class="comment">/*</span>
02890 <span class="comment">                 * Send compare item messages to the parent for sorting</span>
02891 <span class="comment">                 */</span>
02892                 cis.CtlType = ODT_LISTBOX;
02893                 cis.CtlID = PtrToUlong(plb-&gt;spwnd-&gt;spmenu);
02894                 cis.hwndItem = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(plb-&gt;spwnd);
02895                 cis.itemID1 = (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)-1;
02896                 cis.itemData1 = (ULONG_PTR)lpstr;
02897                 cis.itemID2 = (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)sInd;
02898                 cis.itemData2 = <a class="code" href="../../d9/d1/lboxctl2_8c.html#a6">pODRg</a>[sInd].itemData;
02899                 cis.dwLocaleId = plb-&gt;dwLocaleId;
02900 
02901                 <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(plb-&gt;spwndParent, &amp;tlpwndParent);
02902                 sortResult = (<a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a>)<a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a450">HW</a>(plb-&gt;spwndParent), WM_COMPAREITEM,
02903                         cis.CtlID, (LPARAM)&amp;cis);
02904                 <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndParent);
02905 
02906 
02907                 <span class="keywordflow">if</span> (sortResult == -1) {
02908                    sortResult = <a class="code" href="../../d6/d0/usercli_8h.html#a112">LT</a>;
02909                 } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (sortResult == 1) {
02910                    sortResult = <a class="code" href="../../d6/d0/usercli_8h.html#a113">GT</a>;
02911                 } <span class="keywordflow">else</span> {
02912                    sortResult = <a class="code" href="../../d6/d0/usercli_8h.html#a110">EQ</a>;
02913                 }
02914 
02915                 <span class="keywordflow">if</span> (sortResult &lt;= code) {
02916                     <span class="keywordflow">goto</span> FoundIt;
02917                 }
02918             } <span class="keywordflow">else</span> {
02919 
02920                 <span class="comment">/*</span>
02921 <span class="comment">                 * Searching for app supplied long data matches.</span>
02922 <span class="comment">                 */</span>
02923                 <span class="keywordflow">if</span> ((ULONG_PTR)lpstr == <a class="code" href="../../d9/d1/lboxctl2_8c.html#a6">pODRg</a>[sInd].itemData)
02924                     <span class="keywordflow">goto</span> FoundIt;
02925             }
02926         }
02927 
02928         <span class="comment">/*</span>
02929 <span class="comment">         * Wrap round to beginning of list</span>
02930 <span class="comment">         */</span>
02931         <span class="keywordflow">if</span> (++sInd == plb-&gt;cMac)
02932             sInd = 0;
02933     } <span class="keywordflow">while</span> (sInd != sStop);
02934 
02935     sInd = -1;
02936 
02937 FoundIt:
02938     <span class="keywordflow">return</span> sInd;
02939 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a758" doxytag="usercli.h::xxxGotoNextMnem" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d6/d9/structtagWND.html">PWND</a> xxxGotoNextMnem           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwndDlg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwndStart</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>ch</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d9/dmmnem_8c-source.html#l00219">219</a> of file <a class="el" href="../../d6/d9/dmmnem_8c-source.html">dmmnem.c</a>.
<p>
References <a class="el" href="../../d7/d8/dlgmgrc_8c-source.html#l00348">_GetNextDlgTabItem()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00394">BST_DONTCLICK</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00388">BUTTONSTATE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l00152">DlgSetFocus()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00793">FNID_BUTTON</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01514">HW</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01515">HWq</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00411">PTR_TO_ID</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00215">REBASEPWND</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00652">SendMessage()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01764">tagWND::spmenu</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00362">ThreadLock</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00366">ThreadUnlock</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02418">WFDISABLED</a>, and <a class="el" href="../../d6/d9/dmmnem_8c-source.html#l00115">xxxGNM_FindNextMnem()</a>.
<p>
Referenced by <a class="el" href="../../d6/d8/dlgmgr2_8c-source.html#l00317">IsDialogMessageW()</a>.
<p>
<pre class="fragment"><div>00223 {
00224     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> code;
00225     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwndFirstFound = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00226     <span class="keywordtype">int</span> count = 0;
00227     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpwnd;
00228     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwndT;
00229     HWND hwnd;
00230 
00231     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pwndDlg);
00232     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pwnd);
00233 
00234     <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(pwnd, &amp;tlpwnd);
00235 
00236     <span class="comment">/*</span>
00237 <span class="comment">     * Loop for a long time but not long enough so we hang...</span>
00238 <span class="comment">     */</span>
00239     <span class="keywordflow">while</span> (count &lt; 256 * 2) {
00240 
00241         <span class="comment">/*</span>
00242 <span class="comment">         * If the dialog box doesn't has the mnemonic specified, return NULL.</span>
00243 <span class="comment">         */</span>
00244         <span class="keywordflow">if</span> ((pwnd = <a class="code" href="../../d5/d0/dmmnem_8c.html#a1">xxxGNM_FindNextMnem</a>(pwndDlg, pwnd, ch)) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00245             <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwnd);
00246             <span class="keywordflow">return</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00247         }
00248         hwnd = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(pwnd);
00249 
00250         <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwnd);
00251         <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(pwnd, &amp;tlpwnd);
00252 
00253         code = (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)<a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(hwnd, WM_GETDLGCODE, 0, 0L);
00254 
00255         <span class="comment">/*</span>
00256 <span class="comment">         * If a non-disabled static item, then jump ahead to nearest tabstop.</span>
00257 <span class="comment">         */</span>
00258         <span class="keywordflow">if</span> (code &amp; DLGC_STATIC &amp;&amp; !<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFDISABLED)) {
00259             pwndT = <a class="code" href="../../d6/d0/usercli_8h.html#a642">_GetNextDlgTabItem</a>(pwndDlg, pwnd, FALSE);
00260 
00261             <span class="comment">/*</span>
00262 <span class="comment">             * If there is no other tab item, keep looking</span>
00263 <span class="comment">             */</span>
00264             <span class="keywordflow">if</span> (pwndT == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00265                 <span class="keywordflow">continue</span>;
00266             pwnd = pwndT;
00267             hwnd = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(pwnd);
00268 
00269             <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwnd);
00270             <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(pwnd, &amp;tlpwnd);
00271 
00272             <span class="comment">/*</span>
00273 <span class="comment">             * I suppose we should do a getdlgcode here, but who is going to</span>
00274 <span class="comment">             * label a button with a static control?  The setup guys, that's</span>
00275 <span class="comment">             * who...  Also, generally useful for ownerdraw buttons which are</span>
00276 <span class="comment">             * labeled with a static text item.</span>
00277 <span class="comment">             */</span>
00278             code = (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)<a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(hwnd, WM_GETDLGCODE, 0, 0L);
00279         }
00280 
00281         <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFDISABLED)) {
00282 
00283             <span class="comment">/*</span>
00284 <span class="comment">             * Is it a Pushbutton?</span>
00285 <span class="comment">             */</span>
00286             <span class="keywordflow">if</span> (!(code &amp; DLGC_BUTTON)) {
00287 
00288                 <span class="comment">/*</span>
00289 <span class="comment">                 * No, simply give it the focus.</span>
00290 <span class="comment">                 */</span>
00291                 <a class="code" href="../../d6/d0/usercli_8h.html#a759">DlgSetFocus</a>(hwnd);
00292             } <span class="keywordflow">else</span> {
00293 
00294                 <span class="comment">/*</span>
00295 <span class="comment">                 * Yes, click it, but don't give it the focus.</span>
00296 <span class="comment">                 */</span>
00297                 <span class="keywordflow">if</span> ((code &amp; DLGC_DEFPUSHBUTTON) || (code &amp; DLGC_UNDEFPUSHBUTTON)) {
00298 
00299                     <span class="comment">/*</span>
00300 <span class="comment">                     * Flash the button.</span>
00301 <span class="comment">                     */</span>
00302                     <a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(hwnd, BM_SETSTATE, TRUE, 0L);
00303 
00304                     <span class="comment">/*</span>
00305 <span class="comment">                     * Delay</span>
00306 <span class="comment">                     */</span>
00307 <span class="preprocessor">#ifdef LATER</span>
00308 <span class="preprocessor"></span><span class="comment">// JimA - 2/19/92</span>
00309 <span class="comment">// There oughta be a better way of doing this...</span>
00310                     <span class="keywordflow">for</span> (i = 0; i &lt; 10000; i++)
00311                         ;
00312 <span class="preprocessor">#else</span>
00313 <span class="preprocessor"></span>                    Sleep(1);
00314 <span class="preprocessor">#endif</span>
00315 <span class="preprocessor"></span>
00316                     <span class="comment">/*</span>
00317 <span class="comment">                     * Un-Flash it.</span>
00318 <span class="comment">                     */</span>
00319                     <a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(hwnd, BM_SETSTATE, FALSE, 0L);
00320 
00321                     <span class="comment">/*</span>
00322 <span class="comment">                     * Send the WM_COMMAND message.</span>
00323 <span class="comment">                     */</span>
00324                     pwndT = <a class="code" href="../../d6/d0/usercli_8h.html#a27">REBASEPWND</a>(pwnd, spwndParent);
00325                     <a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a450">HW</a>(pwndT), WM_COMMAND,
00326                             MAKELONG(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a99">PTR_TO_ID</a>(pwnd-&gt;spmenu), BN_CLICKED), (LPARAM)hwnd);
00327                     <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwnd);
00328                     <span class="keywordflow">return</span> (<a class="code" href="../../d6/d9/structtagWND.html">PWND</a>)1;
00329                 } <span class="keywordflow">else</span> {
00330 
00331                     <span class="comment">/*</span>
00332 <span class="comment">                     * Because BM_CLICK processing will result in BN_CLICK msg,</span>
00333 <span class="comment">                     * xxxSetFocus must be prevented from sending the same msg;</span>
00334 <span class="comment">                     * Otherwise, it will notify parent twice!</span>
00335 <span class="comment">                     * Fix for Bug #3024 -- SANKAR -- 09-22-89 --</span>
00336 <span class="comment">                     */</span>
00337                     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fIsNTButton;
00338                     <a class="code" href="../../d2/d9/structtagBUTN.html">PBUTN</a> pbutn;
00339 
00340                     fIsNTButton = (pwnd-&gt;fnid == <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a200">FNID_BUTTON</a>);
00341                     <span class="keywordflow">if</span> (fIsNTButton) {
00342                       pbutn = ((<a class="code" href="../../d3/d9/structtagBUTNWND.html">PBUTNWND</a>)pwnd)-&gt;pbutn;
00343                       <a class="code" href="../../d6/d0/usercli_8h.html#a43">BUTTONSTATE</a>(pbutn) |= <a class="code" href="../../d6/d0/usercli_8h.html#a48">BST_DONTCLICK</a>;
00344                     } <span class="keywordflow">else</span> {
00345                      RIPMSG0(RIP_WARNING, <span class="stringliteral">"xxxGotoNextMnem: fnid != FNID_BUTTON"</span>);
00346                     }
00347 
00348                     <a class="code" href="../../d6/d0/usercli_8h.html#a759">DlgSetFocus</a>(hwnd);
00349 
00350                     <span class="keywordflow">if</span> (fIsNTButton) {
00351                       <a class="code" href="../../d6/d0/usercli_8h.html#a43">BUTTONSTATE</a>(pbutn) &amp;= ~<a class="code" href="../../d6/d0/usercli_8h.html#a48">BST_DONTCLICK</a>;
00352                     }
00353 
00354                     <span class="comment">/*</span>
00355 <span class="comment">                     * Send click message if button has a UNIQUE mnemonic</span>
00356 <span class="comment">                     */</span>
00357                     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d0/dmmnem_8c.html#a1">xxxGNM_FindNextMnem</a>(pwndDlg, pwnd, ch) == pwnd) {
00358                         <a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(hwnd, BM_CLICK, TRUE, 0L);
00359                     }
00360                 }
00361             }
00362 
00363             <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwnd);
00364             <span class="keywordflow">return</span> pwnd;
00365         } <span class="keywordflow">else</span> {
00366 
00367             <span class="comment">/*</span>
00368 <span class="comment">             * Stop if we've looped back to the first item we checked</span>
00369 <span class="comment">             */</span>
00370             <span class="keywordflow">if</span> (pwnd == pwndFirstFound) {
00371                 <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwnd);
00372                 <span class="keywordflow">return</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00373             }
00374 
00375             <span class="keywordflow">if</span> (pwndFirstFound == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00376                 pwndFirstFound = pwnd;
00377         }
00378 
00379         count++;
00380 
00381     }  <span class="comment">/* Loop for a long time */</span>
00382 
00383     <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwnd);
00384     <span class="keywordflow">return</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00385 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a716" doxytag="usercli.h::xxxInsureVisible" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID xxxInsureVisible           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02092">2092</a> of file <a class="el" href="../../d0/d1/lboxctl2_8c-source.html">lboxctl2.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00526">CItemInWindow()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01995">tagLBIV::fMultiColumn</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00025">INT</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01959">tagLBIV::itemsPerColumn</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01941">tagLBIV::iTop</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01090">LastFullVisible()</a>, <a class="el" href="../../d4/d1/lboxvar_8c-source.html#l00157">LBPage()</a>, <a class="el" href="../../d9/d5/sertl_8c-source.html#l00332">max</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01960">tagLBIV::numberOfColumns</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01964">tagLBIV::OwnerDraw</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00437">OWNERDRAWVAR</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01940">tagLBIV::spwnd</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02000">xxxNewITop()</a>.
<p>
Referenced by <a class="el" href="../../d7/d0/lb1_8c-source.html#l00032">ListBoxWndProcWorker()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01875">xxxLBButtonUp()</a>, <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l00842">xxxLBoxCtlDelete()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02183">xxxLBoxCtlKeyInput()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l03259">xxxLBSetCurSel()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l03455">xxxLBSetSel()</a>, and <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01265">xxxSetISelBase()</a>.
<p>
<pre class="fragment"><div>02096 {
02097     <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a> sLastVisibleItem;
02098 
02099     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(plb-&gt;spwnd);
02100 
02101     <span class="keywordflow">if</span> (iSel &lt; plb-&gt;iTop) {
02102         <a class="code" href="../../d6/d0/usercli_8h.html#a730">xxxNewITop</a>(plb, iSel);
02103     } <span class="keywordflow">else</span> {
02104         <span class="keywordflow">if</span> (fPartial) {
02105 
02106             <span class="comment">/*</span>
02107 <span class="comment">             * 1 must be subtracted to get the last visible item</span>
02108 <span class="comment">             * A part of the fix for Bug #3727 -- 01/14/91 -- SANKAR</span>
02109 <span class="comment">             */</span>
02110             sLastVisibleItem = plb-&gt;iTop + <a class="code" href="../../d6/d0/usercli_8h.html#a713">CItemInWindow</a>(plb, TRUE) - (<a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a>)1;
02111         } <span class="keywordflow">else</span> {
02112             sLastVisibleItem = <a class="code" href="../../d6/d0/usercli_8h.html#a727">LastFullVisible</a>(plb);
02113         }
02114 
02115         <span class="keywordflow">if</span> (plb-&gt;OwnerDraw != <a class="code" href="../../d6/d0/usercli_8h.html#a63">OWNERDRAWVAR</a>) {
02116             <span class="keywordflow">if</span> (iSel &gt; sLastVisibleItem) {
02117                 <span class="keywordflow">if</span> (plb-&gt;fMultiColumn) {
02118                     <a class="code" href="../../d6/d0/usercli_8h.html#a730">xxxNewITop</a>(plb,
02119                         ((iSel / plb-&gt;itemsPerColumn) -
02120                         <a class="code" href="../../d8/d6/sertl_8c.html#a1">max</a>(plb-&gt;numberOfColumns-1,0)) * plb-&gt;itemsPerColumn);
02121                 } <span class="keywordflow">else</span> {
02122                     <a class="code" href="../../d6/d0/usercli_8h.html#a730">xxxNewITop</a>(plb, (INT)<a class="code" href="../../d8/d6/sertl_8c.html#a1">max</a>(0, iSel - sLastVisibleItem + plb-&gt;iTop));
02123                 }
02124             }
02125         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (iSel &gt; sLastVisibleItem)
02126             <a class="code" href="../../d6/d0/usercli_8h.html#a730">xxxNewITop</a>(plb, <a class="code" href="../../d6/d0/usercli_8h.html#a742">LBPage</a>(plb, iSel, FALSE));
02127     }
02128 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a717" doxytag="usercli.h::xxxInvertLBItem" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID xxxInvertLBItem           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01111">1111</a> of file <a class="el" href="../../d0/d1/lboxctl2_8c-source.html">lboxctl2.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00526">CItemInWindow()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01978">tagLBIV::fCaretOn</a>, <a class="el" href="../../d0/d1/rtl_2draw_8c-source.html#l00061">FillRect()</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02013">tagLBIV::fNoSel</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02046">tagLBIV::hdc</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00779">IsLBoxVisible</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01941">tagLBIV::iTop</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00126">LBGetDC()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00179">LBGetItemRect()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00160">LBReleaseDC()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01964">tagLBIV::OwnerDraw</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01940">tagLBIV::spwnd</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00354">xxxLBDrawLBItem()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00060">xxxLBGetBrush()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l03558">xxxLBoxDrawItem()</a>, and <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00430">xxxLBSetCaret()</a>.
<p>
Referenced by <a class="el" href="../../d7/d0/lb1_8c-source.html#l00032">ListBoxWndProcWorker()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l03754">xxxAlterHilite()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01875">xxxLBButtonUp()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02183">xxxLBoxCtlKeyInput()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l03259">xxxLBSetCurSel()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01181">xxxResetWorld()</a>, and <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01290">xxxTrackMouse()</a>.
<p>
<pre class="fragment"><div>01115 {
01116     RECT rect;
01117     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fCaretOn;
01118     HBRUSH hbrControl;
01119     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>    fNewDC;
01120 
01121     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(plb-&gt;spwnd);
01122 
01123     <span class="comment">// Skip if item isn't showing.</span>
01124     <span class="keywordflow">if</span> (plb-&gt;fNoSel || (i &lt; plb-&gt;iTop) || (i &gt;= (plb-&gt;iTop + <a class="code" href="../../d6/d0/usercli_8h.html#a713">CItemInWindow</a>(plb, TRUE))))
01125         <span class="keywordflow">return</span>;
01126 
01127     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a108">IsLBoxVisible</a>(plb)) {
01128         <a class="code" href="../../d6/d0/usercli_8h.html#a744">LBGetItemRect</a>(plb, i, &amp;rect);
01129 
01130         <span class="comment">/*</span>
01131 <span class="comment">         * Only turn off the caret if it is on.  This avoids annoying caret</span>
01132 <span class="comment">         * flicker when nesting xxxCaretOns and xxxCaretOffs.</span>
01133 <span class="comment">         */</span>
01134         <span class="keywordflow">if</span> (fCaretOn = plb-&gt;fCaretOn) {
01135             <a class="code" href="../../d6/d0/usercli_8h.html#a695">xxxLBSetCaret</a>(plb, FALSE);
01136         }
01137 
01138         fNewDC = <a class="code" href="../../d9/d1/lboxctl2_8c.html#a7">LBGetDC</a>(plb);
01139 
01140         hbrControl = <a class="code" href="../../d9/d1/lboxctl2_8c.html#a10">xxxLBGetBrush</a>(plb, NULL);
01141 
01142         <span class="keywordflow">if</span> (!plb-&gt;OwnerDraw) {
01143             <span class="keywordflow">if</span> (!fHilite) {
01144                 <a class="code" href="../../d9/d1/rtl_2draw_8c.html#a3">FillRect</a>(plb-&gt;hdc, &amp;rect, hbrControl);
01145                 hbrControl = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
01146             }
01147 
01148             <a class="code" href="../../d9/d1/lboxctl2_8c.html#a15">xxxLBDrawLBItem</a>(plb, i, &amp;rect, fHilite, hbrControl);
01149         } <span class="keywordflow">else</span> {
01150 
01151             <span class="comment">/*</span>
01152 <span class="comment">             * We are ownerdraw so fill in the drawitem struct and send off</span>
01153 <span class="comment">             * to the owner.</span>
01154 <span class="comment">             */</span>
01155             <a class="code" href="../../d6/d0/usercli_8h.html#a701">xxxLBoxDrawItem</a>(plb, i, ODA_SELECT,
01156                     (UINT)(fHilite ? ODS_SELECTED : 0), &amp;rect);
01157         }
01158 
01159         <span class="keywordflow">if</span> (fNewDC)
01160             <a class="code" href="../../d9/d1/lboxctl2_8c.html#a8">LBReleaseDC</a>(plb);
01161 
01162         <span class="comment">/*</span>
01163 <span class="comment">         * Turn the caret back on only if it was originally on.</span>
01164 <span class="comment">         */</span>
01165         <span class="keywordflow">if</span> (fCaretOn) {
01166             <a class="code" href="../../d6/d0/usercli_8h.html#a695">xxxLBSetCaret</a>(plb, TRUE);
01167         }
01168     }
01169 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a718" doxytag="usercli.h::xxxLBBlockHilite" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID xxxLBBlockHilite           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l03651">3651</a> of file <a class="el" href="../../d0/d1/lboxctl2_8c-source.html">lboxctl2.c</a>.
<p>
References <a class="el" href="../../d5/d0/userk_8h-source.html#l02354">abs</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01990">tagLBIV::fNewItemState</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01746">HILITEANDSEL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01744">HILITEONLY</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02036">tagLBIV::iLastMouseMove</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02032">tagLBIV::iMouseDown</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00025">INT</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01940">tagLBIV::spwnd</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l03754">xxxAlterHilite()</a>.
<p>
Referenced by <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02183">xxxLBoxCtlKeyInput()</a>, and <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01290">xxxTrackMouse()</a>.
<p>
<pre class="fragment"><div>03655 {
03656     <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a> sCurPosOffset;
03657     <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a> sLastPosOffset;
03658     <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a> sHiliteOrSel;
03659     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fUseSelStatus;
03660     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> DeHiliteStatus;
03661 
03662     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(plb-&gt;spwnd);
03663 
03664     <span class="keywordflow">if</span> (fKeyBoard) {
03665 
03666         <span class="comment">/*</span>
03667 <span class="comment">         * Set both Hilite and Selection states</span>
03668 <span class="comment">         */</span>
03669         sHiliteOrSel = <a class="code" href="../../d6/d0/usercli_8h.html#a250">HILITEANDSEL</a>;
03670 
03671         <span class="comment">/*</span>
03672 <span class="comment">         * Do not use the Selection state while de-hiliting</span>
03673 <span class="comment">         */</span>
03674         fUseSelStatus = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
03675         DeHiliteStatus = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
03676     } <span class="keywordflow">else</span> {
03677 
03678         <span class="comment">/*</span>
03679 <span class="comment">         * Set/Reset only the Hilite state</span>
03680 <span class="comment">         */</span>
03681         sHiliteOrSel = <a class="code" href="../../d6/d0/usercli_8h.html#a248">HILITEONLY</a>;
03682 
03683         <span class="comment">/*</span>
03684 <span class="comment">         * Use the selection state for de-hilighting</span>
03685 <span class="comment">         */</span>
03686         fUseSelStatus = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
03687         DeHiliteStatus = plb-&gt;fNewItemState;
03688     }
03689 
03690 
03691 
03692     <span class="comment">/*</span>
03693 <span class="comment">     * The idea of the routine is to :</span>
03694 <span class="comment">     *          1.  De-hilite the old range (iMouseDown to iLastMouseDown)  and</span>
03695 <span class="comment">     *          2.  Hilite the new range (iMouseDwon to iSelFromPt)</span>
03696 <span class="comment">     */</span>
03697 
03698     <span class="comment">/*</span>
03699 <span class="comment">     * Offset of current mouse position from the anchor point</span>
03700 <span class="comment">     */</span>
03701     sCurPosOffset = plb-&gt;iMouseDown - iSelFromPt;
03702 
03703     <span class="comment">/*</span>
03704 <span class="comment">     * Offset of last mouse position from the anchor point</span>
03705 <span class="comment">     */</span>
03706     sLastPosOffset = plb-&gt;iMouseDown - plb-&gt;iLastMouseMove;
03707 
03708     <span class="comment">/*</span>
03709 <span class="comment">     * Check if both current position and last position lie on the same</span>
03710 <span class="comment">     * side of the anchor point.</span>
03711 <span class="comment">     */</span>
03712     <span class="keywordflow">if</span> ((sCurPosOffset * sLastPosOffset) &gt;= 0) {
03713 
03714         <span class="comment">/*</span>
03715 <span class="comment">         * Yes they are on the same side; So, highlight/dehighlight only</span>
03716 <span class="comment">         * the difference.</span>
03717 <span class="comment">         */</span>
03718         <span class="keywordflow">if</span> (<a class="code" href="../../d4/d1/userk_8h.html#a259">abs</a>(sCurPosOffset) &gt; <a class="code" href="../../d4/d1/userk_8h.html#a259">abs</a>(sLastPosOffset)) {
03719             <a class="code" href="../../d6/d0/usercli_8h.html#a712">xxxAlterHilite</a>(plb, plb-&gt;iLastMouseMove, iSelFromPt,
03720                     plb-&gt;fNewItemState, sHiliteOrSel, FALSE);
03721         } <span class="keywordflow">else</span> {
03722             <a class="code" href="../../d6/d0/usercli_8h.html#a712">xxxAlterHilite</a>(plb, iSelFromPt, plb-&gt;iLastMouseMove, DeHiliteStatus,
03723                     sHiliteOrSel, fUseSelStatus);
03724         }
03725     } <span class="keywordflow">else</span> {
03726         <a class="code" href="../../d6/d0/usercli_8h.html#a712">xxxAlterHilite</a>(plb, plb-&gt;iMouseDown, plb-&gt;iLastMouseMove,
03727                 DeHiliteStatus, sHiliteOrSel, fUseSelStatus);
03728         <a class="code" href="../../d6/d0/usercli_8h.html#a712">xxxAlterHilite</a>(plb, plb-&gt;iMouseDown, iSelFromPt,
03729                 plb-&gt;fNewItemState, sHiliteOrSel, FALSE);
03730     }
03731 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a740" doxytag="usercli.h::xxxLBButtonUp" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void xxxLBButtonUp           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>plb</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>uFlags</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01875">1875</a> of file <a class="el" href="../../d0/d1/lboxctl2_8c-source.html">lboxctl2.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00526">CItemInWindow()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00795">EXTENDEDSEL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01975">tagLBIV::fCaptured</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01977">tagLBIV::fDoubleClick</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01974">tagLBIV::fMouseDown</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01990">tagLBIV::fNewItemState</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01973">tagLBIV::fNotify</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01265">FWINABLE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01515">HWq</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00310">IDSYS_SCROLL</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02036">tagLBIV::iLastMouseMove</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02029">tagLBIV::iLastSelection</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02032">tagLBIV::iMouseDown</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01942">tagLBIV::iSel</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01943">tagLBIV::iSelBase</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01941">tagLBIV::iTop</a>, <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00820">LBEvent()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00813">LBUP_NOTIFY</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00811">LBUP_RELEASECAPTURE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00812">LBUP_RESETSELECTION</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00815">LBUP_SELCHANGE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00814">LBUP_SUCCESS</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05388">NtUserKillTimer()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01570">NtUserReleaseCapture</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02045">tagLBIV::pcbox</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01745">SELONLY</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01940">tagLBIV::spwnd</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02318">WFWIN31COMPAT</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02319">WFWIN40COMPAT</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01967">tagLBIV::wMultiple</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l03754">xxxAlterHilite()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02092">xxxInsureVisible()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01111">xxxInvertLBItem()</a>, and <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01244">xxxNotifyOwner()</a>.
<p>
Referenced by <a class="el" href="../../d7/d0/lb1_8c-source.html#l00032">ListBoxWndProcWorker()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l03411">xxxCaretDestroy()</a>, and <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01290">xxxTrackMouse()</a>.
<p>
<pre class="fragment"><div>01876 {
01877 
01878     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o1">spwnd</a>);
01879 
01880     <span class="comment">/*</span>
01881 <span class="comment">     * If the list box is an Extended listbox, then change the select status</span>
01882 <span class="comment">     * of all items between the anchor and the last mouse position to the</span>
01883 <span class="comment">     * newItemState</span>
01884 <span class="comment">     */</span>
01885     <span class="keywordflow">if</span> (plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o21">wMultiple</a> == <a class="code" href="../../d6/d0/usercli_8h.html#a116">EXTENDEDSEL</a>)
01886         <a class="code" href="../../d6/d0/usercli_8h.html#a712">xxxAlterHilite</a>(plb, plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o52">iMouseDown</a>, plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o53">iLastMouseMove</a>,
01887             plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o32">fNewItemState</a>, SELONLY, FALSE);
01888 
01889     <span class="comment">/*</span>
01890 <span class="comment">     * This is a combo box and user upclicked outside the listbox</span>
01891 <span class="comment">     * so we want to restore the original selection.</span>
01892 <span class="comment">     */</span>
01893     <span class="keywordflow">if</span> (plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o58">pcbox</a> &amp;&amp; (uFlags &amp; <a class="code" href="../../d6/d0/usercli_8h.html#a119">LBUP_RESETSELECTION</a>)) {
01894         <span class="keywordtype">int</span> iSelOld;
01895 
01896         iSelOld = plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o3">iSel</a>;
01897 
01898         <span class="keywordflow">if</span> (iSelOld &gt;= 0)
01899             <a class="code" href="../../d6/d0/usercli_8h.html#a717">xxxInvertLBItem</a>(plb, plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o3">iSel</a>, FALSE);
01900 
01901         plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o3">iSel</a> = plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o51">iLastSelection</a>;
01902         <a class="code" href="../../d6/d0/usercli_8h.html#a717">xxxInvertLBItem</a>(plb, plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o3">iSel</a>, TRUE);
01903 
01904         <span class="comment">/*</span>
01905 <span class="comment">         * Note that we always send selection events before we tell the</span>
01906 <span class="comment">         * app.  This is on purpose--the app may turn around and select</span>
01907 <span class="comment">         * something else when notified.  In which case our event would</span>
01908 <span class="comment">         * be out of order.</span>
01909 <span class="comment">         */</span>
01910         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a405">FWINABLE</a>())
01911             <a class="code" href="../../d6/d0/usercli_8h.html#a409">LBEvent</a>(plb, EVENT_OBJECT_SELECTION, plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o3">iSel</a>);
01912 
01913         <span class="comment">/*</span>
01914 <span class="comment">         * On win-95 and NT4 the check used to be !(uFlags &amp; LBUP_NOTIFY) which</span>
01915 <span class="comment">         * is a bug because we would notify even when the lb is not LBUP_NOTIFY</span>
01916 <span class="comment">         */</span>
01917         <span class="keywordflow">if</span> ((uFlags &amp; <a class="code" href="../../d6/d0/usercli_8h.html#a120">LBUP_NOTIFY</a>) &amp;&amp; plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o23">fNotify</a> &amp;&amp; (iSelOld != plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o3">iSel</a>))
01918             <a class="code" href="../../d6/d0/usercli_8h.html#a732">xxxNotifyOwner</a>(plb, LBN_SELCHANGE);
01919     }
01920 
01921     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a208">NtUserKillTimer</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o1">spwnd</a>), IDSYS_SCROLL);
01922     plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o24">fMouseDown</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01923     <span class="keywordflow">if</span> (plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o25">fCaptured</a>) {
01924         plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o25">fCaptured</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01925         <span class="keywordflow">if</span> (uFlags &amp; <a class="code" href="../../d6/d0/usercli_8h.html#a118">LBUP_RELEASECAPTURE</a>)
01926             <a class="code" href="../../d6/d0/usercli_8h.html#a225">NtUserReleaseCapture</a>();
01927     }
01928     <span class="comment">/*</span>
01929 <span class="comment">     * Don't scroll item as long as any part of it is visible</span>
01930 <span class="comment">     */</span>
01931     <span class="keywordflow">if</span> (plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o4">iSelBase</a> &lt; plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o2">iTop</a> ||
01932         plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o4">iSelBase</a> &gt; plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o2">iTop</a> + <a class="code" href="../../d6/d0/usercli_8h.html#a713">CItemInWindow</a>(plb, TRUE))
01933         <a class="code" href="../../d6/d0/usercli_8h.html#a716">xxxInsureVisible</a>(plb, plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o4">iSelBase</a>, FALSE);
01934 
01935     <span class="keywordflow">if</span> (plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o23">fNotify</a>) {
01936         <span class="keywordflow">if</span> (uFlags &amp; <a class="code" href="../../d6/d0/usercli_8h.html#a120">LBUP_NOTIFY</a>)  {
01937             <span class="keywordflow">if</span> (uFlags &amp; <a class="code" href="../../d6/d0/usercli_8h.html#a121">LBUP_SUCCESS</a>) {
01938                 <span class="comment">/*</span>
01939 <span class="comment">                 * ArtMaster needs this SELCHANGE notification now!</span>
01940 <span class="comment">                 */</span>
01941                 <span class="keywordflow">if</span> ((plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o27">fDoubleClick</a>) &amp;&amp; !<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o1">spwnd</a>, WFWIN31COMPAT))
01942                     <a class="code" href="../../d6/d0/usercli_8h.html#a732">xxxNotifyOwner</a>(plb, LBN_SELCHANGE);
01943 
01944                 <span class="comment">/*</span>
01945 <span class="comment">                 * Notify owner of click or double click on selection</span>
01946 <span class="comment">                 */</span>
01947                 <a class="code" href="../../d6/d0/usercli_8h.html#a732">xxxNotifyOwner</a>(plb, (plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o27">fDoubleClick</a>) ? LBN_DBLCLK : LBN_SELCHANGE);
01948             } <span class="keywordflow">else</span> {
01949                 <span class="comment">/*</span>
01950 <span class="comment">                 * Notify owner that the attempted selection was cancelled.</span>
01951 <span class="comment">                 */</span>
01952                 <a class="code" href="../../d6/d0/usercli_8h.html#a732">xxxNotifyOwner</a>(plb, LBN_SELCANCEL);
01953             }
01954         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (uFlags &amp; <a class="code" href="../../d6/d0/usercli_8h.html#a122">LBUP_SELCHANGE</a>) {
01955             <span class="comment">/*</span>
01956 <span class="comment">             * Did we do some semi-selecting with mouse moves, then hit Enter?</span>
01957 <span class="comment">             * If so, we need to make sure the app knows that something was</span>
01958 <span class="comment">             * really truly selected.</span>
01959 <span class="comment">             */</span>
01960             UserAssert(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o1">spwnd</a>, WFWIN40COMPAT));
01961             <span class="keywordflow">if</span> (plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o51">iLastSelection</a> != plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o3">iSel</a>)
01962                 <a class="code" href="../../d6/d0/usercli_8h.html#a732">xxxNotifyOwner</a>(plb, LBN_SELCHANGE);
01963 
01964         }
01965     }
01966 
01967 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a697" doxytag="usercli.h::xxxLBCreate" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LONG xxxLBCreate           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPCREATESTRUCT&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00062">62</a> of file <a class="el" href="../../d3/d1/lboxrare_8c-source.html">lboxrare.c</a>.
<p>
References <a class="el" href="../../d0/d0/client_2nt6_2user_8h.html#a1137">_GetDesktopWindow</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01856">tagWND::cbwndExtra</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01956">tagLBIV::cxChar</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01958">tagLBIV::cxColumn</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01957">tagLBIV::cyChar</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02047">tagLBIV::dwLocaleId</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00795">EXTENDEDSEL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01966">tagLBIV::fDeferUpdate</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02003">tagLBIV::fDisableNoScroll</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01984">tagLBIV::fHasData</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01980">tagLBIV::fHasStrings</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02009">tagLBIV::fHorzBar</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02019">tagLBIV::fIgnoreSizeMsg</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02021">tagLBIV::fInitialized</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01995">tagLBIV::fMultiColumn</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01990">tagLBIV::fNewItemState</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01996">tagLBIV::fNoIntegralHeight</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02013">tagLBIV::fNoSel</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01973">tagLBIV::fNotify</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01965">tagLBIV::fRedraw</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02023">tagLBIV::fRightAlign</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02024">tagLBIV::fRtoLReading</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02025">tagLBIV::fSmoothScroll</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01972">tagLBIV::fSort</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01992">tagLBIV::fUseTabStops</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02011">tagLBIV::fVertBar</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01999">tagLBIV::fWantKeyboardInput</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00051">gpsi</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02046">tagLBIV::hdc</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01952">tagLBIV::hStrings</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01514">HW</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01515">HWq</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02036">tagLBIV::iLastMouseMove</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02029">tagLBIV::iLastSelection</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02032">tagLBIV::iMouseDown</a>, <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00713">InitHStrings()</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01942">tagLBIV::iSel</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01959">tagLBIV::itemsPerColumn</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00448">LBS_COMBOBOX</a>, <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00025">LBSetCItemFullMax()</a>, <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00652">LBSetTabStops()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00367">Lock</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00794">MULTIPLESEL</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06624">NtUserGetDC()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l01917">NtUserMoveWindow()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01556">NtUserReleaseDC</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01960">tagLBIV::numberOfColumns</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01964">tagLBIV::OwnerDraw</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00436">OWNERDRAWFIXED</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00437">OWNERDRAWVAR</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02045">tagLBIV::pcbox</a>, <a class="el" href="../../d1/d7/ntcftxt_8h-source.html#l00427">PostMessage()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00215">REBASEPWND</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00652">SendMessage()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00793">SINGLESEL</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01764">tagWND::spmenu</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01939">tagLBIV::spwndParent</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01745">tagWND::spwndParent</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00202">SYSMET</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00362">ThreadLock</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00366">ThreadUnlock</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02372">WEFRIGHT</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02373">WEFRTLREADING</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02319">WFWIN40COMPAT</a>, and <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01967">tagLBIV::wMultiple</a>.
<p>
Referenced by <a class="el" href="../../d7/d0/lb1_8c-source.html#l00032">ListBoxWndProcWorker()</a>.
<p>
<pre class="fragment"><div>00064 {
00065     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> style;
00066     MEASUREITEMSTRUCT measureItemStruct;
00067     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpwndParent;
00068     HDC hdc;
00069 
00070     <span class="comment">/*</span>
00071 <span class="comment">     * Once we make it here, nobody can change the ownerdraw style bits</span>
00072 <span class="comment">     * by calling SetWindowLong. The window style must match the flags in plb</span>
00073 <span class="comment">     *</span>
00074 <span class="comment">     */</span>
00075     plb-&gt;fInitialized = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00076 
00077     style = pwnd-&gt;style;
00078 
00079     <span class="comment">/*</span>
00080 <span class="comment">     * Compatibility hack.</span>
00081 <span class="comment">     */</span>
00082     <span class="keywordflow">if</span> (pwnd-&gt;spwndParent == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00083         <a class="code" href="../../d6/d0/usercli_8h.html#a41">Lock</a>(&amp;(plb-&gt;spwndParent), <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a1137">_GetDesktopWindow</a>());
00084     <span class="keywordflow">else</span>
00085         <a class="code" href="../../d6/d0/usercli_8h.html#a41">Lock</a>(&amp;(plb-&gt;spwndParent), <a class="code" href="../../d6/d0/usercli_8h.html#a27">REBASEPWND</a>(pwnd, spwndParent));
00086 
00087     <span class="comment">/*</span>
00088 <span class="comment">     * Break out the style bits</span>
00089 <span class="comment">     */</span>
00090     plb-&gt;fRedraw = ((style &amp; LBS_NOREDRAW) == 0);
00091     plb-&gt;fDeferUpdate = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00092     plb-&gt;fNotify = (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)((style &amp; LBS_NOTIFY) != 0);
00093     plb-&gt;fVertBar = ((style &amp; WS_VSCROLL) != 0);
00094     plb-&gt;fHorzBar = ((style &amp; WS_HSCROLL) != 0);
00095 
00096     <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFWIN40COMPAT)) {
00097         <span class="comment">// for 3.x apps, if either scroll bar was specified, the app got BOTH</span>
00098         <span class="keywordflow">if</span> (plb-&gt;fVertBar || plb-&gt;fHorzBar)
00099             plb-&gt;fVertBar = plb-&gt;fHorzBar = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00100     }
00101 
00102     plb-&gt;fRtoLReading = (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WEFRTLREADING) != 0);
00103     plb-&gt;fRightAlign  = (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WEFRIGHT) != 0);
00104     plb-&gt;fDisableNoScroll = ((style &amp; LBS_DISABLENOSCROLL) != 0);
00105 
00106     plb-&gt;fSmoothScroll = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00107 
00108     <span class="comment">/*</span>
00109 <span class="comment">     * LBS_NOSEL gets priority over any other selection style.  Next highest</span>
00110 <span class="comment">     * priority goes to LBS_EXTENDEDSEL. Then LBS_MULTIPLESEL.</span>
00111 <span class="comment">     */</span>
00112     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFWIN40COMPAT) &amp;&amp; (style &amp; LBS_NOSEL)) {
00113         plb-&gt;wMultiple = <a class="code" href="../../d6/d0/usercli_8h.html#a114">SINGLESEL</a>;
00114         plb-&gt;fNoSel = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00115     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (style &amp; LBS_EXTENDEDSEL) {
00116         plb-&gt;wMultiple = <a class="code" href="../../d6/d0/usercli_8h.html#a116">EXTENDEDSEL</a>;
00117     } <span class="keywordflow">else</span> {
00118         plb-&gt;wMultiple = (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)((style &amp; LBS_MULTIPLESEL) ? <a class="code" href="../../d6/d0/usercli_8h.html#a115">MULTIPLESEL</a> : <a class="code" href="../../d6/d0/usercli_8h.html#a114">SINGLESEL</a>);
00119     }
00120 
00121     plb-&gt;fNoIntegralHeight = ((style &amp; LBS_NOINTEGRALHEIGHT) != 0);
00122     plb-&gt;fWantKeyboardInput = ((style &amp; LBS_WANTKEYBOARDINPUT) != 0);
00123     plb-&gt;fUseTabStops = ((style &amp; LBS_USETABSTOPS) != 0);
00124     <span class="keywordflow">if</span> (plb-&gt;fUseTabStops) {
00125 
00126         <span class="comment">/*</span>
00127 <span class="comment">         * Set tab stops every &lt;default&gt; dialog units.</span>
00128 <span class="comment">         */</span>
00129         <a class="code" href="../../d6/d0/usercli_8h.html#a725">LBSetTabStops</a>(plb, 0, NULL);
00130     }
00131     plb-&gt;fMultiColumn = ((style &amp; LBS_MULTICOLUMN) != 0);
00132     plb-&gt;fHasStrings = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00133     plb-&gt;iLastSelection = -1;
00134     plb-&gt;iMouseDown = -1;  <span class="comment">/* Anchor point for multi selection */</span>
00135     plb-&gt;iLastMouseMove = -1;
00136 
00137     <span class="comment">/*</span>
00138 <span class="comment">     * Get ownerdraw style bits</span>
00139 <span class="comment">     */</span>
00140     <span class="keywordflow">if</span> ((style &amp; LBS_OWNERDRAWFIXED)) {
00141         plb-&gt;OwnerDraw = <a class="code" href="../../d6/d0/usercli_8h.html#a62">OWNERDRAWFIXED</a>;
00142     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((style &amp; LBS_OWNERDRAWVARIABLE) &amp;&amp; !plb-&gt;fMultiColumn) {
00143         plb-&gt;OwnerDraw = <a class="code" href="../../d6/d0/usercli_8h.html#a63">OWNERDRAWVAR</a>;
00144 
00145         <span class="comment">/*</span>
00146 <span class="comment">         * Integral height makes no sense with var height owner draw</span>
00147 <span class="comment">         */</span>
00148         plb-&gt;fNoIntegralHeight = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00149     }
00150 
00151     <span class="keywordflow">if</span> (plb-&gt;OwnerDraw &amp;&amp; !(style &amp; LBS_HASSTRINGS)) {
00152 
00153         <span class="comment">/*</span>
00154 <span class="comment">         * If owner draw, do they want the listbox to maintain strings?</span>
00155 <span class="comment">         */</span>
00156         plb-&gt;fHasStrings = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00157     }
00158 
00159     <span class="comment">/*</span>
00160 <span class="comment">     * If user specifies sort and not hasstrings, then we will send</span>
00161 <span class="comment">     * WM_COMPAREITEM messages to the parent.</span>
00162 <span class="comment">     */</span>
00163     plb-&gt;fSort = ((style &amp; LBS_SORT) != 0);
00164 
00165     <span class="comment">/*</span>
00166 <span class="comment">     * "No data" lazy-eval listbox mandates certain other style settings</span>
00167 <span class="comment">     */</span>
00168     plb-&gt;fHasData = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00169 
00170     <span class="keywordflow">if</span> (style &amp; LBS_NODATA) {
00171         <span class="keywordflow">if</span> (plb-&gt;OwnerDraw != <a class="code" href="../../d6/d0/usercli_8h.html#a62">OWNERDRAWFIXED</a> || plb-&gt;fSort || plb-&gt;fHasStrings) {
00172             RIPERR0(ERROR_INVALID_FLAGS, RIP_WARNING,
00173                  <span class="stringliteral">"NODATA listbox must be OWNERDRAWFIXED, w/o SORT or HASSTRINGS"</span>);
00174         } <span class="keywordflow">else</span> {
00175             plb-&gt;fHasData = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00176         }
00177     }
00178 
00179     plb-&gt;dwLocaleId = GetThreadLocale();
00180 
00181     <span class="comment">/*</span>
00182 <span class="comment">     * Check if this is part of a combo box</span>
00183 <span class="comment">     */</span>
00184     <span class="keywordflow">if</span> ((style &amp; <a class="code" href="../../d6/d0/usercli_8h.html#a67">LBS_COMBOBOX</a>) != 0) {
00185 
00186         <span class="comment">/*</span>
00187 <span class="comment">         * Get the pcbox structure contained in the parent window's extra data</span>
00188 <span class="comment">         * pointer.  Check cbwndExtra to ensure compatibility with SQL windows.</span>
00189 <span class="comment">         */</span>
00190         <span class="keywordflow">if</span> (plb-&gt;spwndParent-&gt;cbwndExtra != 0)
00191             plb-&gt;pcbox = ((<a class="code" href="../../d0/d1/structtagCOMBOWND.html">PCOMBOWND</a>)(plb-&gt;spwndParent))-&gt;pcbox;
00192     }
00193 
00194     <span class="comment">/*</span>
00195 <span class="comment">     * No need to set these to 0 since that was done for us when we Alloced</span>
00196 <span class="comment">     * the PLBIV.</span>
00197 <span class="comment">     */</span>
00198 
00199     <span class="comment">/*</span>
00200 <span class="comment">     * plb-&gt;rgpch       = (PBYTE)0;</span>
00201 <span class="comment">     */</span>
00202 
00203     <span class="comment">/*</span>
00204 <span class="comment">     * plb-&gt;iSelBase    = plb-&gt;iTop = 0;</span>
00205 <span class="comment">     */</span>
00206 
00207     <span class="comment">/*</span>
00208 <span class="comment">     * plb-&gt;fMouseDown  = FALSE;</span>
00209 <span class="comment">     */</span>
00210 
00211     <span class="comment">/*</span>
00212 <span class="comment">     * plb-&gt;fCaret      = FALSE;</span>
00213 <span class="comment">     */</span>
00214 
00215     <span class="comment">/*</span>
00216 <span class="comment">     * plb-&gt;fCaretOn    = FALSE;</span>
00217 <span class="comment">     */</span>
00218 
00219     <span class="comment">/*</span>
00220 <span class="comment">     * plb-&gt;maxWidth    = 0;</span>
00221 <span class="comment">     */</span>
00222 
00223     plb-&gt;iSel = -1;
00224 
00225     plb-&gt;hdc        = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00226 
00227     <span class="comment">/*</span>
00228 <span class="comment">     * Set the keyboard state so that when the user keyboard clicks he selects</span>
00229 <span class="comment">     * an item.</span>
00230 <span class="comment">     */</span>
00231     plb-&gt;fNewItemState = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00232 
00233     <a class="code" href="../../d6/d0/usercli_8h.html#a684">InitHStrings</a>(plb);
00234 
00235     <span class="keywordflow">if</span> (plb-&gt;fHasStrings &amp;&amp; plb-&gt;hStrings == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00236         <span class="keywordflow">return</span> -1<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>;
00237     }
00238 
00239     hdc = <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a250">NtUserGetDC</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(pwnd));
00240     plb-&gt;cxChar = GdiGetCharDimensions(hdc, NULL, &amp;plb-&gt;cyChar);
00241     <a class="code" href="../../d6/d0/usercli_8h.html#a211">NtUserReleaseDC</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(pwnd), hdc);
00242 
00243     <span class="keywordflow">if</span> (plb-&gt;cxChar == 0) {
00244         RIPMSG0(RIP_WARNING, <span class="stringliteral">"xxxLBCreate: GdiGetCharDimensions failed"</span>);
00245         plb-&gt;cxChar = <a class="code" href="../../d1/d8/clglobal_8c.html#a4">gpsi</a>-&gt;cxSysFontChar;
00246         plb-&gt;cyChar = <a class="code" href="../../d1/d8/clglobal_8c.html#a4">gpsi</a>-&gt;cySysFontChar;
00247     }
00248 
00249     <span class="keywordflow">if</span> (plb-&gt;OwnerDraw == <a class="code" href="../../d6/d0/usercli_8h.html#a62">OWNERDRAWFIXED</a>) {
00250 
00251         <span class="comment">/*</span>
00252 <span class="comment">         * Query for item height only if we are fixed height owner draw.  Note</span>
00253 <span class="comment">         * that we don't care about an item's width for listboxes.</span>
00254 <span class="comment">         */</span>
00255         measureItemStruct.CtlType = ODT_LISTBOX;
00256         measureItemStruct.CtlID = PtrToUlong(pwnd-&gt;spmenu);
00257 
00258         <span class="comment">/*</span>
00259 <span class="comment">         * System font height is default height</span>
00260 <span class="comment">         */</span>
00261         measureItemStruct.itemHeight = plb-&gt;cyChar;
00262         measureItemStruct.itemWidth = 0;
00263         measureItemStruct.itemData = 0;
00264 
00265         <span class="comment">/*</span>
00266 <span class="comment">         * IanJa: #ifndef WIN16 (32-bit Windows), plb-&gt;id gets extended</span>
00267 <span class="comment">         * to LONG wParam automatically by the compiler</span>
00268 <span class="comment">         */</span>
00269         <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(plb-&gt;spwndParent, &amp;tlpwndParent);
00270         <a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a450">HW</a>(plb-&gt;spwndParent), WM_MEASUREITEM,
00271                 measureItemStruct.CtlID,
00272                 (LPARAM)&amp;measureItemStruct);
00273         <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndParent);
00274 
00275         <span class="comment">/*</span>
00276 <span class="comment">         * Use default height if given 0.  This prevents any possible future</span>
00277 <span class="comment">         * div-by-zero errors.</span>
00278 <span class="comment">         */</span>
00279         <span class="keywordflow">if</span> (measureItemStruct.itemHeight)
00280             plb-&gt;cyChar = measureItemStruct.itemHeight;
00281 
00282 
00283         <span class="keywordflow">if</span> (plb-&gt;fMultiColumn) {
00284 
00285             <span class="comment">/*</span>
00286 <span class="comment">             * Get default column width from measure items struct if we are a</span>
00287 <span class="comment">             * multicolumn listbox.</span>
00288 <span class="comment">             */</span>
00289             plb-&gt;cxColumn = measureItemStruct.itemWidth;
00290         }
00291     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (plb-&gt;OwnerDraw == <a class="code" href="../../d6/d0/usercli_8h.html#a63">OWNERDRAWVAR</a>)
00292         plb-&gt;cyChar = 0;
00293 
00294 
00295     <span class="keywordflow">if</span> (plb-&gt;fMultiColumn) {
00296 
00297         <span class="comment">/*</span>
00298 <span class="comment">         * Set these default values till we get the WM_SIZE message and we</span>
00299 <span class="comment">         * calculate them properly.  This is because some people create a</span>
00300 <span class="comment">         * 0 width/height listbox and size it later.  We don't want to have</span>
00301 <span class="comment">         * problems with invalid values in these fields</span>
00302 <span class="comment">         */</span>
00303         <span class="keywordflow">if</span> (plb-&gt;cxColumn &lt;= 0)
00304             plb-&gt;cxColumn = 15 * plb-&gt;cxChar;
00305         plb-&gt;numberOfColumns = plb-&gt;itemsPerColumn = 1;
00306     }
00307 
00308     <a class="code" href="../../d6/d0/usercli_8h.html#a688">LBSetCItemFullMax</a>(plb);
00309 
00310     <span class="comment">// Don't do this for 4.0 apps.  It'll make everyone's lives easier and</span>
00311     <span class="comment">// fix the anomaly that a combo &amp; list created the same width end up</span>
00312     <span class="comment">// different when all is done.</span>
00313     <span class="comment">// B#1520</span>
00314 
00315     <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFWIN40COMPAT)) {
00316         plb-&gt;fIgnoreSizeMsg = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00317         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a111">NtUserMoveWindow</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(pwnd),
00318              lpcs-&gt;x - <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CXBORDER),
00319              lpcs-&gt;y - <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CYBORDER),
00320              lpcs-&gt;cx + <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CXEDGE),
00321              lpcs-&gt;cy + <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CYEDGE),
00322              FALSE);
00323         plb-&gt;fIgnoreSizeMsg = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00324     }
00325 
00326     <span class="keywordflow">if</span> (!plb-&gt;fNoIntegralHeight) {
00327 
00328         <span class="comment">/*</span>
00329 <span class="comment">         * Send a message to ourselves to resize the listbox to an integral</span>
00330 <span class="comment">         * height.  We need to do it this way because at create time we are all</span>
00331 <span class="comment">         * mucked up with window rects etc...</span>
00332 <span class="comment">         * IanJa: #ifndef WIN16 (32-bit Windows), wParam 0 gets extended</span>
00333 <span class="comment">         * to wParam 0L automatically by the compiler.</span>
00334 <span class="comment">         */</span>
00335         <a class="code" href="../../d0/d8/ntcftxt_8h.html#a20">PostMessage</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(pwnd), WM_SIZE, 0, 0L);
00336     }
00337 
00338     <span class="keywordflow">return</span> 1<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>;
00339 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a728" doxytag="usercli.h::xxxLbDir" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a> xxxLbDir           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPWSTR&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d1/lboxctl3_8c-source.html#l00839">839</a> of file <a class="el" href="../../d1/d1/lboxctl3_8c-source.html">lboxctl3.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d1/rtqkey_8c-source.html#l00042">Buffer</a>, <a class="el" href="../../d0/d0/tfilmem_8c-source.html#l00038">Buffer2</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00926">CCHFILEMAX</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01948">tagLBIV::cMac</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d1/d1/lboxctl3_8c-source.html#l00834">EXCLUDE_ATTR</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d1/d1/lboxctl3_8c-source.html#l00827">FIND_ATTR</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01515">HWq</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00025">INT</a>, <a class="el" href="../../d6/d3/rxact_8c-source.html#l00212">INVALID_HANDLE_VALUE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00779">IsLBoxVisible</a>, <a class="el" href="../../d1/d1/lboxctl3_8c-source.html#l01071">LB_CreateLBLine()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00797">LBI_ADD</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02221">MSGFLAG_SPECIAL_THUNK</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00652">SendMessage()</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01940">tagLBIV::spwnd</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l03387">xxxCheckRedraw()</a>, <a class="el" href="../../d6/d0/usercli_8h.html#a685">xxxLBInsertItem()</a>, <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l00125">xxxLBShowHideScrollBars()</a>, and <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01244">xxxNotifyOwner()</a>.
<p>
Referenced by <a class="el" href="../../d7/d0/lb1_8c-source.html#l00032">ListBoxWndProcWorker()</a>, and <a class="el" href="../../d3/d3/combodir_8c-source.html#l00028">xxxCBDir()</a>.
<p>
<pre class="fragment"><div>00843 {
00844     <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a> result;
00845     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fWasVisible, bRet;
00846     WCHAR <a class="code" href="../../d6/d2/rtqkey_8c.html#a3">Buffer</a>[<a class="code" href="../../d6/d0/usercli_8h.html#a135">CCHFILEMAX</a> + 1];
00847     WCHAR <a class="code" href="../../d9/d0/tfilmem_8c.html#a2">Buffer2</a>[<a class="code" href="../../d6/d0/usercli_8h.html#a135">CCHFILEMAX</a> + 1];
00848     HANDLE hFind;
00849     WIN32_FIND_DATA ffd;
00850     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> attribFile;
00851     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> mDrives;
00852     <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a> cDrive;
00853     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> attribInclMask, attribExclMask;
00854 
00855     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(plb-&gt;spwnd);
00856 
00857     <span class="comment">/*</span>
00858 <span class="comment">     * Make sure the buffer is valid and copy it onto the stack. Why? Because</span>
00859 <span class="comment">     * there is a chance that lhszFileSpec is pointing to an invalid string</span>
00860 <span class="comment">     * because some app posted a CB_DIR or LB_DIR without the DDL_POSTMSGS</span>
00861 <span class="comment">     * bit set.</span>
00862 <span class="comment">     */</span>
00863     <span class="keywordflow">try</span> {
00864         wcscpy(Buffer2, lhszFileSpec);
00865         lhszFileSpec = <a class="code" href="../../d9/d0/tfilmem_8c.html#a2">Buffer2</a>;
00866     } except (W32ExceptionHandler(FALSE, RIP_WARNING)) {
00867         <span class="keywordflow">return</span> -1;
00868     }
00869 
00870     result = -1;
00871 
00872 <span class="preprocessor">#ifndef UNICODE</span>
00873 <span class="preprocessor"></span>    CharToOem(lhszFileSpec, lhszFileSpec);
00874 <span class="preprocessor">#endif</span>
00875 <span class="preprocessor"></span>
00876     <span class="keywordflow">if</span> (fWasVisible = <a class="code" href="../../d6/d0/usercli_8h.html#a108">IsLBoxVisible</a>(plb)) {
00877         <a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(plb-&gt;spwnd), WM_SETREDRAW, FALSE, 0);
00878     }
00879 
00880     <span class="comment">/*</span>
00881 <span class="comment">     * First we add the files then the directories and drives.</span>
00882 <span class="comment">     * If they only wanted drives then skip the file query</span>
00883 <span class="comment">     * Also under Windows specifing only 0x8000 (DDL_EXCLUSIVE) adds no files).</span>
00884 <span class="comment">     */</span>
00885 
00886 
00887 <span class="comment">//    if ((attrib != (DDL_EXCLUSIVE | DDL_DRIVES)) &amp;&amp; (attrib != DDL_EXCLUSIVE) &amp;&amp;</span>
00888     <span class="keywordflow">if</span> (attrib != (DDL_EXCLUSIVE | DDL_DRIVES | DDL_NOFILES)) {
00889         hFind = FindFirstFile(lhszFileSpec, &amp;ffd);
00890 
00891         <span class="keywordflow">if</span> (hFind != <a class="code" href="../../d5/d4/rxact_8c.html#a0">INVALID_HANDLE_VALUE</a>) {
00892 
00893             <span class="comment">/*</span>
00894 <span class="comment">             * If this is not an exclusive search, include normal files.</span>
00895 <span class="comment">             */</span>
00896             attribInclMask = attrib &amp; <a class="code" href="../../d0/d2/lboxctl3_8c.html#a10">FIND_ATTR</a>;
00897             <span class="keywordflow">if</span> (!(attrib &amp; DDL_EXCLUSIVE))
00898                 attribInclMask |= FILE_ATTRIBUTE_NORMAL | FILE_ATTRIBUTE_READONLY |
00899                         FILE_ATTRIBUTE_ARCHIVE;
00900 
00901             <span class="comment">/*</span>
00902 <span class="comment">             * Make a mask of the attributes to be excluded from</span>
00903 <span class="comment">             * the search.</span>
00904 <span class="comment">             */</span>
00905             attribExclMask = ~attrib &amp; <a class="code" href="../../d0/d2/lboxctl3_8c.html#a11">EXCLUDE_ATTR</a>;
00906 
00907 <span class="comment">// LATER BUG - scottlu</span>
00908 <span class="comment">// Win3 assumes doing a LoadCursor here will return the same wait cursor that</span>
00909 <span class="comment">// has already been created, whereas calling ServerLoadCursor creates a new</span>
00910 <span class="comment">// one every time!</span>
00911 <span class="comment">// hCursorT = NtUserSetCursor(ServerLoadCursor(NULL, IDC_WAIT));</span>
00912 
00913 
00914 <span class="comment">// FindFirst/Next works different in NT then DOS.  Under DOS you passed in</span>
00915 <span class="comment">// a set of attributes under NT you get back a set of attributes and have</span>
00916 <span class="comment">// to test for those attributes (Dos input attributes were Hidden, System</span>
00917 <span class="comment">// and Directoy) the dos find first always returned ReadOnly and archive files</span>
00918 
00919 <span class="comment">// we are going to select a file in one of two cases.</span>
00920 <span class="comment">// 1) if any of the attrib bits are set on the file.</span>
00921 <span class="comment">// 2) if we want normal files and the file is a notmal file (the file attrib</span>
00922 <span class="comment">//    bits don't contain any NOEXCLBITS</span>
00923 
00924             <span class="keywordflow">do</span> {
00925                 attribFile = (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)ffd.dwFileAttributes;
00926                 <span class="keywordflow">if</span> (attribFile == FILE_ATTRIBUTE_COMPRESSED) {
00927                     attribFile = FILE_ATTRIBUTE_NORMAL;
00928                 }
00929                 attribFile &amp;= ~FILE_ATTRIBUTE_COMPRESSED;
00930 
00931                 <span class="comment">/*</span>
00932 <span class="comment">                 * Accept those files that have only the</span>
00933 <span class="comment">                 * attributes that we are looking for.</span>
00934 <span class="comment">                 */</span>
00935                 <span class="keywordflow">if</span> ((attribFile &amp; attribInclMask) != 0 &amp;&amp;
00936                         (attribFile &amp; attribExclMask) == 0) {
00937                     <span class="keywordflow">if</span> (attribFile &amp; DDL_DIRECTORY) {
00938 
00939                         <span class="comment">/*</span>
00940 <span class="comment">                         * Don't include '.' (current directory) in list.</span>
00941 <span class="comment">                         */</span>
00942                         <span class="keywordflow">if</span> (*((LPDWORD)&amp;ffd.cFileName[0]) == 0x0000002E)
00943                             <span class="keywordflow">goto</span> cfnf;
00944 
00945                         <span class="comment">/*</span>
00946 <span class="comment">                         * If we're not looking for dirs, ignore it</span>
00947 <span class="comment">                         */</span>
00948                         <span class="keywordflow">if</span> (!(attrib &amp; DDL_DIRECTORY))
00949                             <span class="keywordflow">goto</span> cfnf;
00950 
00951                     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (attrib &amp; DDL_NOFILES) {
00952                         <span class="comment">/*</span>
00953 <span class="comment">                         * Don't include files if DDL_NOFILES is set.</span>
00954 <span class="comment">                         */</span>
00955                         <span class="keywordflow">goto</span> cfnf;
00956                     }
00957 
00958                     <a class="code" href="../../d0/d2/lboxctl3_8c.html#a22">LB_CreateLBLine</a>(&amp;ffd,
00959                             Buffer);
00960                     result = <a class="code" href="../../d6/d0/usercli_8h.html#a685">xxxLBInsertItem</a>(plb, Buffer, 0, MSGFLAG_SPECIAL_THUNK | LBI_ADD);
00961                 }
00962 cfnf:
00963                 bRet = FindNextFile(hFind, &amp;ffd);
00964 
00965             } <span class="keywordflow">while</span> (result &gt;= -1 &amp;&amp; bRet);
00966             FindClose(hFind);
00967 
00968 <span class="comment">// LATER see above comment</span>
00969 <span class="comment">// NtUserSetCursor(hCursorT);</span>
00970         }
00971     }
00972 
00973     <span class="comment">/*</span>
00974 <span class="comment">     * If drive bit set, include drives in the list.</span>
00975 <span class="comment">     */</span>
00976     <span class="keywordflow">if</span> (result != LB_ERRSPACE &amp;&amp; (attrib &amp; DDL_DRIVES)) {
00977         ffd.cFileName[0] = TEXT(<span class="charliteral">'['</span>);
00978         ffd.cFileName[1] = ffd.cFileName[3] = TEXT(<span class="charliteral">'-'</span>);
00979         ffd.cFileName[4] = TEXT(<span class="charliteral">']'</span>);
00980         ffd.cFileName[5] = 0;
00981         mDrives = GetLogicalDrives();
00982         <span class="keywordflow">for</span> (cDrive = 0; mDrives; mDrives &gt;&gt;= 1, cDrive++) {
00983             <span class="keywordflow">if</span> (mDrives &amp; 1) {
00984                 ffd.cFileName[2] = (WCHAR)(TEXT(<span class="charliteral">'A'</span>) + cDrive);
00985 
00986                 <span class="comment">/*</span>
00987 <span class="comment">                 * We have to set the SPECIAL_THUNK bit because we are</span>
00988 <span class="comment">                 * adding a server side string to a list box that may not</span>
00989 <span class="comment">                 * be HASSTRINGS so we have to force the server-client</span>
00990 <span class="comment">                 * string thunk.</span>
00991 <span class="comment">                 */</span>
00992                 <span class="keywordflow">if</span> ((result = <a class="code" href="../../d6/d0/usercli_8h.html#a685">xxxLBInsertItem</a>(plb, CharLower(ffd.cFileName), -1,
00993                         MSGFLAG_SPECIAL_THUNK)) &lt; 0) {
00994                     <span class="keywordflow">break</span>;
00995                 }
00996             }
00997         }
00998     }
00999 
01000     <span class="keywordflow">if</span> (result == LB_ERRSPACE) {
01001         <a class="code" href="../../d6/d0/usercli_8h.html#a732">xxxNotifyOwner</a>(plb, LB_ERRSPACE);
01002     }
01003 
01004     <span class="keywordflow">if</span> (fWasVisible) {
01005         <a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(plb-&gt;spwnd), WM_SETREDRAW, TRUE, 0);
01006     }
01007 
01008     <a class="code" href="../../d6/d0/usercli_8h.html#a706">xxxLBShowHideScrollBars</a>(plb);
01009 
01010     <a class="code" href="../../d6/d0/usercli_8h.html#a714">xxxCheckRedraw</a>(plb, FALSE, 0);
01011 
01012     <span class="keywordflow">if</span> (result != LB_ERRSPACE) {
01013 
01014         <span class="comment">/*</span>
01015 <span class="comment">         * Return index of last item in the listbox.  We can't just return</span>
01016 <span class="comment">         * result because that is the index of the last item added which may</span>
01017 <span class="comment">         * be in the middle somewhere if the LBS_SORT style is on.</span>
01018 <span class="comment">         */</span>
01019         <span class="keywordflow">return</span> plb-&gt;cMac - 1;
01020     } <span class="keywordflow">else</span> {
01021         <span class="keywordflow">return</span> result;
01022     }
01023 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a749" doxytag="usercli.h::xxxLBInitStorage" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LONG xxxLBInitStorage           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>plb</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fAnsi</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cItems</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cb</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l00342">342</a> of file <a class="el" href="../../d9/d0/lboxctl1_8c-source.html">lboxctl1.c</a>.
<p>
References <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01953">tagLBIV::cchStrings</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01948">tagLBIV::cMac</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01949">tagLBIV::cMax</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01980">tagLBIV::fHasStrings</a>, <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l00285">GrowMem()</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01952">tagLBIV::hStrings</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01954">tagLBIV::ichAlloc</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00025">INT</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00959">UserLocalReAlloc</a>, and <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01244">xxxNotifyOwner()</a>.
<p>
Referenced by <a class="el" href="../../d7/d0/lb1_8c-source.html#l00032">ListBoxWndProcWorker()</a>.
<p>
<pre class="fragment"><div>00343 {
00344     HANDLE hMem;
00345     <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a>    cbChunk;
00346 
00347     <span class="comment">/*</span>
00348 <span class="comment">     * if the app is talking ANSI, then adjust for the worst case in unicode</span>
00349 <span class="comment">     * where each single ansi byte translates to one 16 bit unicode value</span>
00350 <span class="comment">     */</span>
00351     <span class="keywordflow">if</span> (fAnsi) {
00352         cb *= <span class="keyword">sizeof</span>(WCHAR) ;
00353     } <span class="comment">/* if */</span>
00354 
00355     <span class="comment">/*</span>
00356 <span class="comment">     * Fail if either of the parameters look bad.</span>
00357 <span class="comment">     */</span>
00358     <span class="keywordflow">if</span> ((cItems &lt; 0) || (cb &lt; 0)) {
00359         <a class="code" href="../../d6/d0/usercli_8h.html#a732">xxxNotifyOwner</a>(plb, LBN_ERRSPACE);
00360         <span class="keywordflow">return</span> LB_ERRSPACE;
00361     } <span class="comment">/* if */</span>
00362 
00363     <span class="comment">/*</span>
00364 <span class="comment">     * try to grow the pointer array (if necessary) accounting for the free space</span>
00365 <span class="comment">     * already available.</span>
00366 <span class="comment">     */</span>
00367     cItems -= plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o7">cMax</a> - plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o6">cMac</a> ;
00368     <span class="keywordflow">if</span> ((cItems &gt; 0) &amp;&amp; !<a class="code" href="../../d8/d1/lboxctl1_8c.html#a5">GrowMem</a>(plb, cItems)) {
00369         <a class="code" href="../../d6/d0/usercli_8h.html#a732">xxxNotifyOwner</a>(plb, LBN_ERRSPACE);
00370         <span class="keywordflow">return</span> LB_ERRSPACE;
00371     } <span class="comment">/* if */</span>
00372 
00373     <span class="comment">/*</span>
00374 <span class="comment">     * now grow the string space if necessary</span>
00375 <span class="comment">     */</span>
00376     <span class="keywordflow">if</span> (plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o30">fHasStrings</a>) {
00377         <span class="keywordflow">if</span> ((cbChunk = (plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o11">ichAlloc</a> + cb)) &gt; plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o10">cchStrings</a>) {
00378 
00379             <span class="comment">/*</span>
00380 <span class="comment">             * Round up to the nearest 256 byte chunk.</span>
00381 <span class="comment">             */</span>
00382             cbChunk = (cbChunk &amp; ~0xff) + 0x100;
00383             <span class="keywordflow">if</span> (!(hMem = <a class="code" href="../../d6/d0/usercli_8h.html#a137">UserLocalReAlloc</a>(plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o9">hStrings</a>, (LONG)cbChunk, 0))) {
00384                 <a class="code" href="../../d6/d0/usercli_8h.html#a732">xxxNotifyOwner</a>(plb, LBN_ERRSPACE);
00385                 <span class="keywordflow">return</span> LB_ERRSPACE;
00386             }
00387             plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o9">hStrings</a> = hMem;
00388             plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o10">cchStrings</a> = cbChunk;
00389         } <span class="comment">/* if */</span>
00390     } <span class="comment">/* if */</span>
00391 
00392     <span class="comment">/*</span>
00393 <span class="comment">     * return the number of items that can be stored</span>
00394 <span class="comment">     */</span>
00395     <span class="keywordflow">return</span> plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o7">cMax</a> ;
00396 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a729" doxytag="usercli.h::xxxLbInsertFile" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a> xxxLbInsertFile           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPWSTR&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d1/lboxctl3_8c-source.html#l01036">1036</a> of file <a class="el" href="../../d1/d1/lboxctl3_8c-source.html">lboxctl3.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l00926">CCHFILEMAX</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00025">INT</a>, <a class="el" href="../../d6/d3/rxact_8c-source.html#l00212">INVALID_HANDLE_VALUE</a>, <a class="el" href="../../d1/d1/lboxctl3_8c-source.html#l01071">LB_CreateLBLine()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00797">LBI_ADD</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02221">MSGFLAG_SPECIAL_THUNK</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01940">tagLBIV::spwnd</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l03387">xxxCheckRedraw()</a>, <a class="el" href="../../d6/d0/usercli_8h.html#a685">xxxLBInsertItem()</a>, and <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01244">xxxNotifyOwner()</a>.
<p>
Referenced by <a class="el" href="../../d7/d0/lb1_8c-source.html#l00032">ListBoxWndProcWorker()</a>.
<p>
<pre class="fragment"><div>01039 {
01040     WCHAR chBuffer[<a class="code" href="../../d6/d0/usercli_8h.html#a135">CCHFILEMAX</a> + 1];
01041     <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a> result = -1;
01042     HANDLE hFind;
01043     WIN32_FIND_DATA ffd;
01044 
01045     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(plb-&gt;spwnd);
01046 
01047     hFind = FindFirstFile(lpFile, &amp;ffd);
01048     <span class="keywordflow">if</span> (hFind != <a class="code" href="../../d5/d4/rxact_8c.html#a0">INVALID_HANDLE_VALUE</a>) {
01049         FindClose(hFind);
01050         <a class="code" href="../../d0/d2/lboxctl3_8c.html#a22">LB_CreateLBLine</a>(&amp;ffd, chBuffer);
01051         result = <a class="code" href="../../d6/d0/usercli_8h.html#a685">xxxLBInsertItem</a>(plb, chBuffer, 0, MSGFLAG_SPECIAL_THUNK | LBI_ADD);
01052     }
01053 
01054     <span class="keywordflow">if</span> (result == LB_ERRSPACE) {
01055         <a class="code" href="../../d6/d0/usercli_8h.html#a732">xxxNotifyOwner</a>(plb, result);
01056     }
01057 
01058     <a class="code" href="../../d6/d0/usercli_8h.html#a714">xxxCheckRedraw</a>(plb, FALSE, 0);
01059     <span class="keywordflow">return</span> result;
01060 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a685" doxytag="usercli.h::xxxLBInsertItem" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int xxxLBInsertItem           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPWSTR&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d7/d0/lb1_8c-source.html#l00032">ListBoxWndProcWorker()</a>, <a class="el" href="../../d1/d1/lboxctl3_8c-source.html#l00839">xxxLbDir()</a>, and <a class="el" href="../../d1/d1/lboxctl3_8c-source.html#l01036">xxxLbInsertFile()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a711" doxytag="usercli.h::xxxLBInvalidateRect" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL xxxLBInvalidateRect           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>plb</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPRECT&nbsp;</td>
          <td class="mdname" nowrap> <em>lprc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fErase</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00038">38</a> of file <a class="el" href="../../d0/d1/lboxctl2_8c-source.html">lboxctl2.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01966">tagLBIV::fDeferUpdate</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01965">tagLBIV::fRedraw</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01515">HWq</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00779">IsLBoxVisible</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05330">NtUserInvalidateRect()</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01940">tagLBIV::spwnd</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d7/d0/lb1_8c-source.html#l00032">ListBoxWndProcWorker()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l03387">xxxCheckRedraw()</a>, <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l00842">xxxLBoxCtlDelete()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l03206">xxxLBSelRange()</a>, <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l01107">xxxLBSetCount()</a>, and <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l03455">xxxLBSetSel()</a>.
<p>
<pre class="fragment"><div>00039 {
00040     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o1">spwnd</a>);
00041 
00042     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a108">IsLBoxVisible</a>(plb)) {
00043         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a206">NtUserInvalidateRect</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o1">spwnd</a>), lprc, fErase);
00044         <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
00045     }
00046 
00047     <span class="keywordflow">if</span> (!plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o19">fRedraw</a>)
00048         plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o20">fDeferUpdate</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00049 
00050     <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00051 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a708" doxytag="usercli.h::xxxLBoxCtlCharInput" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID xxxLBoxCtlCharInput           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02948">2948</a> of file <a class="el" href="../../d0/d1/lboxctl2_8c-source.html">lboxctl2.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d0/d7/halvprnt_8c-source.html#l00031">BYTE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01948">tagLBIV::cMac</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l04109">DbcsCombine()</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01979">tagLBIV::fAddSelMode</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01980">tagLBIV::fHasStrings</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01974">tagLBIV::fMouseDown</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01972">tagLBIV::fSort</a>, <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00506">GetKeyState()</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00051">gpsi</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01515">HWq</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00306">IDSYS_LBSEARCH</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00025">INT</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00590">IS_DBCS_ENABLED</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01943">tagLBIV::iSelBase</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02048">tagLBIV::iTypeSearch</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00016">LB_KEYDOWN</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00025">MAX_TYPESEARCH</a>, <a class="el" href="../../d6/d5/chartran_8c-source.html#l00191">MBToWCSEx()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00794">MULTIPLESEL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01564">NtUserMessageBeep</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06092">NtUserSetTimer()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00789">PREFIX</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02049">tagLBIV::pszTypeSearch</a>, <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00270">SendMessageWorker()</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01940">tagLBIV::spwnd</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01939">tagLBIV::spwndParent</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00558">THREAD_CODEPAGE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00362">ThreadLock</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00366">ThreadUnlock</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00958">UserLocalAlloc</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01967">tagLBIV::wMultiple</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02802">xxxFindString()</a>, and <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02183">xxxLBoxCtlKeyInput()</a>.
<p>
Referenced by <a class="el" href="../../d7/d0/lb1_8c-source.html#l00032">ListBoxWndProcWorker()</a>.
<p>
<pre class="fragment"><div>02952 {
02953     <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a> iSel;
02954     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fControl;
02955     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpwndParent;
02956 
02957     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(plb-&gt;spwnd);
02958 
02959     <span class="keywordflow">if</span> (plb-&gt;cMac == 0 || plb-&gt;fMouseDown) {
02960 
02961         <span class="comment">/*</span>
02962 <span class="comment">         * Get out if we are in the middle of mouse routines or if we have no</span>
02963 <span class="comment">         * items in the listbox, we just return without doing anything.</span>
02964 <span class="comment">         */</span>
02965         <span class="keywordflow">return</span>;
02966     }
02967 
02968     fControl = (<a class="code" href="../../d8/d9/client_2ntstubs_8c.html#a16">GetKeyState</a>(VK_CONTROL) &lt; 0);
02969 
02970     <span class="keywordflow">switch</span> (inputChar) {
02971     <span class="keywordflow">case</span> VK_ESCAPE:
02972         plb-&gt;iTypeSearch = 0;
02973         <span class="keywordflow">if</span> (plb-&gt;pszTypeSearch)
02974             plb-&gt;pszTypeSearch[0] = 0;
02975         <span class="keywordflow">break</span>;
02976 
02977     <span class="keywordflow">case</span> VK_BACK:
02978         <span class="keywordflow">if</span> (plb-&gt;iTypeSearch) {
02979             plb-&gt;pszTypeSearch[plb-&gt;iTypeSearch--] = 0;
02980             <span class="keywordflow">if</span> (plb-&gt;fSort) {
02981                 iSel = -1;
02982                 <span class="keywordflow">goto</span> TypeSearch;
02983             }
02984         }
02985         <span class="keywordflow">break</span>;
02986 
02987     <span class="keywordflow">case</span> VK_SPACE:
02988         <span class="keywordflow">if</span> (plb-&gt;fAddSelMode || plb-&gt;wMultiple == <a class="code" href="../../d6/d0/usercli_8h.html#a115">MULTIPLESEL</a>)
02989             <span class="keywordflow">break</span>;
02990         <span class="comment">/* Otherwise, for single/extended selection listboxes not in add</span>
02991 <span class="comment">         * selection mode, let the  space go thru as a type search character</span>
02992 <span class="comment">         * FALL THRU</span>
02993 <span class="comment">         */</span>
02994 
02995     <span class="keywordflow">default</span>:
02996 
02997         <span class="comment">/*</span>
02998 <span class="comment">         * Move selection to first item beginning with the character the</span>
02999 <span class="comment">         * user typed.  We don't want do this if we are using owner draw.</span>
03000 <span class="comment">         */</span>
03001 
03002         <span class="keywordflow">if</span> (fAnsi &amp;&amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a125">IS_DBCS_ENABLED</a>() &amp;&amp; IsDBCSLeadByteEx(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a118">THREAD_CODEPAGE</a>(), (BYTE)inputChar)) {
03003             WCHAR wch;
03004             LPWSTR lpwstr = &amp;wch;
03005 
03006             inputChar = <a class="code" href="../../d6/d0/usercli_8h.html#a460">DbcsCombine</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(plb-&gt;spwnd), (BYTE)inputChar);
03007             RIPMSG1(RIP_VERBOSE, <span class="stringliteral">"xxxLBoxCtlCharInput: combined DBCS. 0x%04x"</span>, inputChar);
03008 
03009             <span class="keywordflow">if</span> (inputChar == 0) {
03010                 RIPMSG1(RIP_WARNING, <span class="stringliteral">"xxxLBoxCtlCharInput: cannot combine two DBCS. LB=0x%02x"</span>,
03011                         inputChar);
03012                 <span class="keywordflow">break</span>;
03013             }
03014             <span class="comment">// If it is DBCS, let's ignore the ctrl status.</span>
03015             fControl = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
03016 
03017             <span class="comment">// Convert DBCS to UNICODE.</span>
03018             <span class="comment">// Note: Leading byte is in the low byte, trailing byte is in high byte.</span>
03019             <span class="comment">// Let's assume Little Endian CPUs only, so inputChar can directly be</span>
03020             <span class="comment">// input for MBSToWCSEx as an ANSI string.</span>
03021             <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/chartran_8c.html#a3">MBToWCSEx</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a118">THREAD_CODEPAGE</a>(), (LPCSTR)&amp;inputChar, 2, &amp;lpwstr, 1, FALSE) == 0) {
03022                 RIPMSG1(RIP_WARNING, <span class="stringliteral">"xxxLBoxCtlCharInput: cannot convert 0x%04x to UNICODE."</span>,
03023                         inputChar);
03024                 <span class="keywordflow">break</span>;
03025             }
03026             inputChar = wch;
03027         }
03028 
03029         <span class="keywordflow">if</span> (plb-&gt;fHasStrings) {
03030             <span class="comment">// Incremental Type Search processing</span>
03031             <span class="comment">//</span>
03032             <span class="comment">// update szTypeSearch string and then move to the first item from</span>
03033             <span class="comment">// the current selection whose prefix matches szTypeSearch</span>
03034             <span class="comment">//</span>
03035             <span class="comment">// the szTypeSearch will continue to grow until a "long enough"</span>
03036             <span class="comment">// gap between key entries is encountered -- at which point any</span>
03037             <span class="comment">// more searching will start over</span>
03038 
03039             <span class="comment">/*</span>
03040 <span class="comment">             * Undo CONTROL-char to char</span>
03041 <span class="comment">             */</span>
03042             <span class="keywordflow">if</span> (fControl &amp;&amp; inputChar &lt; 0x20)
03043                 inputChar += 0x40;
03044 
03045             <span class="keywordflow">if</span> (plb-&gt;iTypeSearch == <a class="code" href="../../d9/d1/lboxctl2_8c.html#a5">MAX_TYPESEARCH</a>) {
03046                 <a class="code" href="../../d6/d0/usercli_8h.html#a219">NtUserMessageBeep</a>(0);
03047                 <span class="keywordflow">break</span>;
03048             }
03049             iSel = -1;
03050 
03051             <span class="keywordflow">if</span> (plb-&gt;pszTypeSearch == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
03052                 plb-&gt;pszTypeSearch = (LPWSTR)<a class="code" href="../../d6/d0/usercli_8h.html#a136">UserLocalAlloc</a>(HEAP_ZERO_MEMORY, <span class="keyword">sizeof</span>(WCHAR) * (MAX_TYPESEARCH + 1));
03053 
03054             <span class="keywordflow">if</span> (plb-&gt;pszTypeSearch == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
03055                 <a class="code" href="../../d6/d0/usercli_8h.html#a219">NtUserMessageBeep</a>(0);
03056                 <span class="keywordflow">break</span>;
03057             }
03058 
03059             plb-&gt;pszTypeSearch[plb-&gt;iTypeSearch++] = (WCHAR) inputChar;
03060             plb-&gt;pszTypeSearch[plb-&gt;iTypeSearch]   = 0;
03061 
03062 TypeSearch:
03063             <span class="keywordflow">if</span> (plb-&gt;fSort) {
03064                 <span class="comment">// Set timer to determine when to kill incremental searching</span>
03065                 <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a230">NtUserSetTimer</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(plb-&gt;spwnd), IDSYS_LBSEARCH,
03066                                <a class="code" href="../../d1/d8/clglobal_8c.html#a4">gpsi</a>-&gt;dtLBSearch, NULL);
03067             } <span class="keywordflow">else</span> {
03068                 <span class="comment">// If this is not a sorted listbox, no incremental search.</span>
03069                 plb-&gt;iTypeSearch = 0;
03070                 iSel = plb-&gt;iSelBase;
03071             }
03072 
03073 
03074             <span class="comment">/*</span>
03075 <span class="comment">             * Search for the item beginning with the given character starting</span>
03076 <span class="comment">             * at iSel+1.  We will wrap the search to the beginning of the</span>
03077 <span class="comment">             * listbox if we don't find the item.   If SHIFT is down and we are</span>
03078 <span class="comment">             * a multiselection lb, then the item's state will be set to</span>
03079 <span class="comment">             * plb-&gt;fNewItemState according to the current mode.</span>
03080 <span class="comment">             */</span>
03081             iSel = <a class="code" href="../../d6/d0/usercli_8h.html#a683">xxxFindString</a>(plb, plb-&gt;pszTypeSearch, iSel, PREFIX, TRUE);
03082             <span class="keywordflow">if</span> (iSel == -1) {
03083                 <span class="comment">// no match found -- check for prefix match</span>
03084                 <span class="comment">// (i.e. "p" find FIRST item that starts with 'p',</span>
03085                 <span class="comment">//       "pp" find NEXT item that starts with 'p')</span>
03086                 <span class="keywordflow">if</span>(plb-&gt;iTypeSearch)
03087                 {
03088                     plb-&gt;iTypeSearch--;
03089                     <span class="keywordflow">if</span> ((plb-&gt;iTypeSearch == 1) &amp;&amp; (plb-&gt;pszTypeSearch[0] == plb-&gt;pszTypeSearch[1]))
03090                     {
03091                         plb-&gt;pszTypeSearch[1] = 0;
03092                         iSel = <a class="code" href="../../d6/d0/usercli_8h.html#a683">xxxFindString</a>(plb, plb-&gt;pszTypeSearch, plb-&gt;iSelBase, PREFIX, TRUE);
03093                     }
03094                 }
03095             }
03096             <span class="comment">// if match is found -- select it</span>
03097             <span class="keywordflow">if</span> (iSel != -1)
03098             {
03099 CtlKeyInput:
03100                 <a class="code" href="../../d6/d0/usercli_8h.html#a709">xxxLBoxCtlKeyInput</a>(plb, LB_KEYDOWN, iSel);
03101 
03102             }
03103         } <span class="keywordflow">else</span> {
03104             <span class="keywordflow">if</span> (plb-&gt;spwndParent != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
03105                 <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(plb-&gt;spwndParent, &amp;tlpwndParent);
03106                 iSel = (<a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a>)<a class="code" href="../../d6/d0/usercli_8h.html#a600">SendMessageWorker</a>(plb-&gt;spwndParent, WM_CHARTOITEM,
03107                         MAKELONG(inputChar, plb-&gt;iSelBase), (LPARAM)<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(plb-&gt;spwnd), fAnsi);
03108                 <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndParent);
03109             } <span class="keywordflow">else</span>
03110                 iSel = -1;
03111 
03112             <span class="keywordflow">if</span> (iSel != -1 &amp;&amp; iSel != -2)
03113                 <span class="keywordflow">goto</span> CtlKeyInput;
03114 
03115         }
03116         <span class="keywordflow">break</span>;
03117     }
03118 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a707" doxytag="usercli.h::xxxLBoxCtlDelete" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a> xxxLBoxCtlDelete           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l00842">842</a> of file <a class="el" href="../../d9/d0/lboxctl1_8c-source.html">lboxctl1.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01948">tagLBIV::cMac</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00795">EXTENDEDSEL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02012">tagLBIV::fFromInsert</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01984">tagLBIV::fHasData</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01980">tagLBIV::fHasStrings</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01265">FWINABLE</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01952">tagLBIV::hStrings</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01954">tagLBIV::ichAlloc</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02032">tagLBIV::iMouseDown</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00025">INT</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01942">tagLBIV::iSel</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01943">tagLBIV::iSelBase</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01941">tagLBIV::iTop</a>, <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00820">LBEvent()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00179">LBGetItemRect()</a>, <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00025">LBSetCItemFullMax()</a>, <a class="el" href="../../d6/d3/acpitabl_8h-source.html#l00366">min</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00845">tagLBItem::offsz</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01964">tagLBIV::OwnerDraw</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00437">OWNERDRAWVAR</a>, <a class="el" href="../../d0/d7/halvprnt_8c-source.html#l00031">PBYTE</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02045">tagLBIV::pcbox</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01951">tagLBIV::rgpch</a>, <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00270">SendMessageWorker()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00793">SINGLESEL</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01780">tagCBox::spwnd</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01940">tagLBIV::spwnd</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00362">ThreadLock</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00366">ThreadUnlock</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02319">WFWIN40COMPAT</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01967">tagLBIV::wMultiple</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l02028">xxxCBInternalUpdateEditWindow()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l03387">xxxCheckRedraw()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02092">xxxInsureVisible()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00038">xxxLBInvalidateRect()</a>, <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l01053">xxxLBoxDeleteItem()</a>, and <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l00125">xxxLBShowHideScrollBars()</a>.
<p>
Referenced by <a class="el" href="../../d7/d0/lb1_8c-source.html#l00032">ListBoxWndProcWorker()</a>.
<p>
<pre class="fragment"><div>00845 {
00846     LONG cb;
00847     LPBYTE lp;
00848     LPBYTE lpT;
00849     RECT rc;
00850     <span class="keywordtype">int</span> cbItem;    <span class="comment">/* size of Item in rgpch */</span>
00851     LPWSTR lpString;
00852     <a class="code" href="../../d9/d7/halvprnt_8c.html#a1">PBYTE</a> pbStrings;
00853     <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a> cbStringLen;
00854     LPBYTE itemNumbers;
00855     <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a> sTmp;
00856     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpwnd;
00857 
00858     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(plb-&gt;spwnd);
00859 
00860     <span class="keywordflow">if</span> (sItem &lt; 0 || sItem &gt;= plb-&gt;cMac) {
00861         RIPERR0(ERROR_INVALID_INDEX, RIP_VERBOSE, <span class="stringliteral">""</span>);
00862         <span class="keywordflow">return</span> LB_ERR;
00863     }
00864 
00865     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a405">FWINABLE</a>()) {
00866         <a class="code" href="../../d6/d0/usercli_8h.html#a409">LBEvent</a>(plb, EVENT_OBJECT_DESTROY, sItem);
00867     }
00868 
00869     <span class="keywordflow">if</span> (plb-&gt;cMac == 1) {
00870 
00871         <span class="comment">/*</span>
00872 <span class="comment">         * When the item count is 0, we send a resetcontent message so that we</span>
00873 <span class="comment">         * can reclaim our string space this way.</span>
00874 <span class="comment">         */</span>
00875         <a class="code" href="../../d6/d0/usercli_8h.html#a600">SendMessageWorker</a>(plb-&gt;spwnd, LB_RESETCONTENT, 0, 0, FALSE);
00876         <span class="keywordflow">goto</span> FinishUpDelete;
00877     }
00878 
00879     <span class="comment">/*</span>
00880 <span class="comment">     * Get the rectangle associated with the last item in the listbox.  If it is</span>
00881 <span class="comment">     * visible, we need to invalidate it.  When we delete an item, everything</span>
00882 <span class="comment">     * scrolls up to replace the item deleted so we must make sure we erase the</span>
00883 <span class="comment">     * old image of the last item in the listbox.</span>
00884 <span class="comment">     */</span>
00885     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a744">LBGetItemRect</a>(plb, (INT)(plb-&gt;cMac - 1), &amp;rc)) {
00886         <a class="code" href="../../d6/d0/usercli_8h.html#a711">xxxLBInvalidateRect</a>(plb, &amp;rc, TRUE);
00887     }
00888 
00889     <span class="comment">// 3.1 and earlier used to only send WM_DELETEITEMs if it was an ownerdraw</span>
00890     <span class="comment">// listbox.  4.0 and above will send WM_DELETEITEMs for every item that has</span>
00891     <span class="comment">// nonzero item data.</span>
00892     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(plb-&gt;spwnd, WFWIN40COMPAT) || (plb-&gt;OwnerDraw &amp;&amp; plb-&gt;fHasData)) {
00893         <a class="code" href="../../d6/d0/usercli_8h.html#a699">xxxLBoxDeleteItem</a>(plb, sItem);
00894     }
00895 
00896     plb-&gt;cMac--;
00897 
00898     cbItem = (plb-&gt;fHasStrings ? <span class="keyword">sizeof</span>(<a class="code" href="../../d6/d9/structtagLBItem.html">LBItem</a>)
00899                                : (plb-&gt;fHasData ? <span class="keyword">sizeof</span>(<a class="code" href="../../d8/d9/structtagLBODItem.html">LBODItem</a>): 0));
00900     cb = ((plb-&gt;cMac - sItem) * cbItem);
00901 
00902     <span class="comment">/*</span>
00903 <span class="comment">     * Byte for the selection status of the item.</span>
00904 <span class="comment">     */</span>
00905     <span class="keywordflow">if</span> (plb-&gt;wMultiple != <a class="code" href="../../d6/d0/usercli_8h.html#a114">SINGLESEL</a>) {
00906         cb += (plb-&gt;cMac + 1);
00907     }
00908 
00909     <span class="keywordflow">if</span> (plb-&gt;OwnerDraw == <a class="code" href="../../d6/d0/usercli_8h.html#a63">OWNERDRAWVAR</a>) {
00910 
00911         <span class="comment">/*</span>
00912 <span class="comment">         * One byte for the height of the item.</span>
00913 <span class="comment">         */</span>
00914         cb += (plb-&gt;cMac + 1);
00915     }
00916 
00917     <span class="comment">/*</span>
00918 <span class="comment">     * Might be nodata and singlesel, for instance.</span>
00919 <span class="comment">     * but what out for the case where cItem == cMac (and cb == 0).</span>
00920 <span class="comment">     */</span>
00921     <span class="keywordflow">if</span> ((cb != 0) || plb-&gt;fHasStrings) {
00922         lp = plb-&gt;rgpch;
00923 
00924         lpT = (lp + (sItem * cbItem));
00925 
00926         <span class="keywordflow">if</span> (plb-&gt;fHasStrings) {
00927             <span class="comment">/*</span>
00928 <span class="comment">             * If we has strings with each item, then we want to compact the string</span>
00929 <span class="comment">             * heap so that we can recover the space occupied by the string of the</span>
00930 <span class="comment">             * deleted item.</span>
00931 <span class="comment">             */</span>
00932             <span class="comment">/*</span>
00933 <span class="comment">             * Get the string which we will be deleting</span>
00934 <span class="comment">             */</span>
00935             pbStrings = (<a class="code" href="../../d9/d7/halvprnt_8c.html#a1">PBYTE</a>)(plb-&gt;hStrings);
00936             lpString = (LPTSTR)(pbStrings + ((<a class="code" href="../../d6/d9/structtagLBItem.html">lpLBItem</a>)lpT)-&gt;offsz);
00937             cbStringLen = (wcslen(lpString) + 1) * <span class="keyword">sizeof</span>(WCHAR);  <span class="comment">/* include null terminator */</span>
00938 
00939             <span class="comment">/*</span>
00940 <span class="comment">             * Now compact the string array</span>
00941 <span class="comment">             */</span>
00942             plb-&gt;ichAlloc = plb-&gt;ichAlloc - cbStringLen;
00943 
00944             RtlMoveMemory(lpString, (PBYTE)lpString + cbStringLen,
00945                     plb-&gt;ichAlloc + (pbStrings - (LPBYTE)lpString));
00946 
00947             <span class="comment">/*</span>
00948 <span class="comment">             * We have to update the string pointers in plb-&gt;rgpch since all the</span>
00949 <span class="comment">             * string after the deleted string have been moved down stringLength</span>
00950 <span class="comment">             * bytes.  Note that we have to explicitly check all items in the list</span>
00951 <span class="comment">             * box if the string was allocated after the deleted item since the</span>
00952 <span class="comment">             * LB_SORT style allows a lower item number to have a string allocated</span>
00953 <span class="comment">             * at the end of the string heap for example.</span>
00954 <span class="comment">             */</span>
00955             itemNumbers = lp;
00956             <span class="keywordflow">for</span> (sTmp = 0; sTmp &lt;= plb-&gt;cMac; sTmp++) {
00957                 <a class="code" href="../../d6/d9/structtagLBItem.html">lpLBItem</a> p =(<a class="code" href="../../d6/d9/structtagLBItem.html">lpLBItem</a>)itemNumbers;
00958                 <span class="keywordflow">if</span> ( (LPTSTR)(p-&gt;<a class="code" href="../../d6/d9/structtagLBItem.html#o0">offsz</a> + pbStrings) &gt; lpString ) {
00959                     p-&gt;<a class="code" href="../../d6/d9/structtagLBItem.html#o0">offsz</a> -= cbStringLen;
00960                 }
00961                 p++;
00962                 itemNumbers=(LPBYTE)p;
00963             }
00964         }
00965 
00966         <span class="comment">/*</span>
00967 <span class="comment">         * Now compact the pointers to the strings (or the long app supplied values</span>
00968 <span class="comment">         * if ownerdraw without strings).</span>
00969 <span class="comment">         */</span>
00970         RtlMoveMemory(lpT, lpT + cbItem, cb);
00971 
00972         <span class="comment">/*</span>
00973 <span class="comment">         * Compress the multiselection bytes</span>
00974 <span class="comment">         */</span>
00975         <span class="keywordflow">if</span> (plb-&gt;wMultiple != <a class="code" href="../../d6/d0/usercli_8h.html#a114">SINGLESEL</a>) {
00976             lpT = (lp + (plb-&gt;cMac * cbItem) + sItem);
00977             RtlMoveMemory(lpT, lpT + 1, plb-&gt;cMac - sItem +
00978                     (plb-&gt;OwnerDraw == OWNERDRAWVAR ? plb-&gt;cMac + 1 : 0));
00979         }
00980 
00981         <span class="keywordflow">if</span> (plb-&gt;OwnerDraw == <a class="code" href="../../d6/d0/usercli_8h.html#a63">OWNERDRAWVAR</a>) {
00982             <span class="comment">/*</span>
00983 <span class="comment">             * Compress the height bytes</span>
00984 <span class="comment">             */</span>
00985             lpT = (lp + (plb-&gt;cMac * cbItem) + (plb-&gt;wMultiple ? plb-&gt;cMac : 0)
00986                     + sItem);
00987             RtlMoveMemory(lpT, lpT + 1, plb-&gt;cMac - sItem);
00988         }
00989 
00990     }
00991 
00992     <span class="keywordflow">if</span> (plb-&gt;wMultiple == <a class="code" href="../../d6/d0/usercli_8h.html#a114">SINGLESEL</a>) {
00993         <span class="keywordflow">if</span> (plb-&gt;iSel == sItem) {
00994             plb-&gt;iSel = -1;
00995 
00996             <span class="keywordflow">if</span> (plb-&gt;pcbox != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00997                 <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(plb-&gt;pcbox-&gt;spwnd, &amp;tlpwnd);
00998                 <a class="code" href="../../d6/d0/usercli_8h.html#a676">xxxCBInternalUpdateEditWindow</a>(plb-&gt;pcbox, NULL);
00999                 <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwnd);
01000             }
01001         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (plb-&gt;iSel &gt; sItem)
01002             plb-&gt;iSel--;
01003     }
01004 
01005     <span class="keywordflow">if</span> ((plb-&gt;iMouseDown != -1) &amp;&amp; (sItem &lt;= plb-&gt;iMouseDown))
01006         plb-&gt;iMouseDown = -1;
01007 
01008     <span class="keywordflow">if</span> (plb-&gt;iSelBase &amp;&amp; sItem == plb-&gt;iSelBase)
01009         plb-&gt;iSelBase--;
01010 
01011     <span class="keywordflow">if</span> (plb-&gt;cMac) {
01012         plb-&gt;iSelBase = <a class="code" href="../../d5/d4/acpitabl_8h.html#a69">min</a>(plb-&gt;iSelBase, plb-&gt;cMac - 1);
01013     } <span class="keywordflow">else</span> {
01014         plb-&gt;iSelBase = 0;
01015     }
01016 
01017     <span class="keywordflow">if</span> ((plb-&gt;wMultiple == <a class="code" href="../../d6/d0/usercli_8h.html#a116">EXTENDEDSEL</a>) &amp;&amp; (plb-&gt;iSel == -1))
01018         plb-&gt;iSel = plb-&gt;iSelBase;
01019 
01020     <span class="keywordflow">if</span> (plb-&gt;OwnerDraw == <a class="code" href="../../d6/d0/usercli_8h.html#a63">OWNERDRAWVAR</a>)
01021         <a class="code" href="../../d6/d0/usercli_8h.html#a688">LBSetCItemFullMax</a>(plb);
01022 
01023     <span class="comment">/*</span>
01024 <span class="comment">     * We always set a new iTop.  The iTop won't change if it doesn't need to</span>
01025 <span class="comment">     * but it will change if:  1.  The iTop was deleted or 2.  We need to change</span>
01026 <span class="comment">     * the iTop so that we fill the listbox.</span>
01027 <span class="comment">     */</span>
01028     <a class="code" href="../../d6/d0/usercli_8h.html#a716">xxxInsureVisible</a>(plb, plb-&gt;iTop, FALSE);
01029 
01030 FinishUpDelete:
01031 
01032     <span class="comment">/*</span>
01033 <span class="comment">     * Check if scroll bars need to be shown/hidden</span>
01034 <span class="comment">     */</span>
01035     plb-&gt;fFromInsert = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01036     <a class="code" href="../../d6/d0/usercli_8h.html#a706">xxxLBShowHideScrollBars</a>(plb);
01037     plb-&gt;fFromInsert = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01038 
01039     <a class="code" href="../../d6/d0/usercli_8h.html#a714">xxxCheckRedraw</a>(plb, TRUE, sItem);
01040     <a class="code" href="../../d6/d0/usercli_8h.html#a716">xxxInsureVisible</a>(plb, plb-&gt;iSelBase, FALSE);
01041 
01042     <span class="keywordflow">return</span> plb-&gt;cMac;
01043 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a703" doxytag="usercli.h::xxxLBoxCtlHScroll" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID xxxLBoxCtlHScroll           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d7/d0/lb1_8c-source.html#l00032">ListBoxWndProcWorker()</a>, <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l00407">xxxLBInsertItem()</a>, <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l00125">xxxLBShowHideScrollBars()</a>, and <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00514">xxxLBSize()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a704" doxytag="usercli.h::xxxLBoxCtlHScrollMultiColumn" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID xxxLBoxCtlHScrollMultiColumn           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d1/lboxmult_8c-source.html#l00071">71</a> of file <a class="el" href="../../d2/d1/lboxmult_8c-source.html">lboxmult.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01948">tagLBIV::cMac</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02023">tagLBIV::fRightAlign</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02025">tagLBIV::fSmoothScroll</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00025">INT</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01959">tagLBIV::itemsPerColumn</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01941">tagLBIV::iTop</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01960">tagLBIV::numberOfColumns</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01940">tagLBIV::spwnd</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l00125">xxxLBShowHideScrollBars()</a>, and <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02000">xxxNewITop()</a>.
<p>
Referenced by <a class="el" href="../../d7/d0/lb1_8c-source.html#l00032">ListBoxWndProcWorker()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00691">xxxLBoxCtlHScroll()</a>, and <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01290">xxxTrackMouse()</a>.
<p>
<pre class="fragment"><div>00075 {
00076     <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a> iTop = plb-&gt;iTop;
00077 
00078     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(plb-&gt;spwnd);
00079 
00080     <span class="keywordflow">if</span> (!plb-&gt;cMac)  <span class="keywordflow">return</span>;
00081 
00082     <span class="keywordflow">switch</span> (cmd) {
00083     <span class="keywordflow">case</span> SB_LINEUP:
00084         <span class="keywordflow">if</span> (plb-&gt;fRightAlign)
00085             <span class="keywordflow">goto</span> ReallyLineDown;
00086 ReallyLineUp:
00087         iTop -= plb-&gt;itemsPerColumn;
00088         <span class="keywordflow">break</span>;
00089     <span class="keywordflow">case</span> SB_LINEDOWN:
00090         <span class="keywordflow">if</span> (plb-&gt;fRightAlign)
00091             <span class="keywordflow">goto</span> ReallyLineUp;
00092 ReallyLineDown:
00093         iTop += plb-&gt;itemsPerColumn;
00094         <span class="keywordflow">break</span>;
00095     <span class="keywordflow">case</span> SB_PAGEUP:
00096         <span class="keywordflow">if</span> (plb-&gt;fRightAlign)
00097             <span class="keywordflow">goto</span> ReallyPageDown;
00098 ReallyPageUp:
00099         iTop -= plb-&gt;itemsPerColumn * plb-&gt;numberOfColumns;
00100         <span class="keywordflow">break</span>;
00101     <span class="keywordflow">case</span> SB_PAGEDOWN:
00102         <span class="keywordflow">if</span> (plb-&gt;fRightAlign)
00103             <span class="keywordflow">goto</span> ReallyPageUp;
00104 ReallyPageDown:
00105         iTop += plb-&gt;itemsPerColumn * plb-&gt;numberOfColumns;
00106         <span class="keywordflow">break</span>;
00107     <span class="keywordflow">case</span> SB_THUMBTRACK:
00108     <span class="keywordflow">case</span> SB_THUMBPOSITION:
00109         <span class="keywordflow">if</span> (plb-&gt;fRightAlign) {
00110             <span class="keywordtype">int</span>  iCols = plb-&gt;cMac ? ((plb-&gt;cMac-1) / plb-&gt;itemsPerColumn) + 1 : 0;
00111 
00112             xAmt = iCols - (xAmt + plb-&gt;numberOfColumns);
00113             <span class="keywordflow">if</span> (xAmt&lt;0)
00114                 xAmt=0;
00115         }
00116         iTop = xAmt * plb-&gt;itemsPerColumn;
00117         <span class="keywordflow">break</span>;
00118     <span class="keywordflow">case</span> SB_TOP:
00119         <span class="keywordflow">if</span> (plb-&gt;fRightAlign)
00120             <span class="keywordflow">goto</span> ReallyBottom;
00121 ReallyTop:
00122         iTop = 0;
00123         <span class="keywordflow">break</span>;
00124     <span class="keywordflow">case</span> SB_BOTTOM:
00125         <span class="keywordflow">if</span> (plb-&gt;fRightAlign)
00126             <span class="keywordflow">goto</span> ReallyTop;
00127 ReallyBottom:
00128         iTop = plb-&gt;cMac - 1 - ((plb-&gt;cMac - 1) % plb-&gt;itemsPerColumn);
00129         <span class="keywordflow">break</span>;
00130     <span class="keywordflow">case</span> SB_ENDSCROLL:
00131         plb-&gt;fSmoothScroll = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00132         <a class="code" href="../../d6/d0/usercli_8h.html#a706">xxxLBShowHideScrollBars</a>(plb);
00133         <span class="keywordflow">break</span>;
00134     }
00135 
00136     <a class="code" href="../../d6/d0/usercli_8h.html#a730">xxxNewITop</a>(plb, iTop);
00137 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a709" doxytag="usercli.h::xxxLBoxCtlKeyInput" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID xxxLBoxCtlKeyInput           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02183">2183</a> of file <a class="el" href="../../d0/d1/lboxctl2_8c-source.html">lboxctl2.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01882">tagCBox::CBoxStyle</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01944">tagLBIV::cItemFullMax</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01948">tagLBIV::cMac</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00019">CTLDOWN</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00795">EXTENDEDSEL</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01979">tagLBIV::fAddSelMode</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01900">tagCBox::fExtendedUI</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01893">tagCBox::fKeyboardSelInListBox</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01889">tagCBox::fLBoxVisible</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01974">tagLBIV::fMouseDown</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01995">tagLBIV::fMultiColumn</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01990">tagLBIV::fNewItemState</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01973">tagLBIV::fNotify</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02023">tagLBIV::fRightAlign</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01999">tagLBIV::fWantKeyboardInput</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01265">FWINABLE</a>, <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00506">GetKeyState()</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00051">gpsi</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01746">HILITEANDSEL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01744">HILITEONLY</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01514">HW</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01515">HWq</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00312">IDSYS_CARET</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02036">tagLBIV::iLastMouseMove</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02029">tagLBIV::iLastSelection</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02032">tagLBIV::iMouseDown</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01976">IncrementISel()</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00025">INT</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01942">tagLBIV::iSel</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01943">tagLBIV::iSelBase</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00480">IsSelected()</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01959">tagLBIV::itemsPerColumn</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02048">tagLBIV::iTypeSearch</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00016">LB_KEYDOWN</a>, <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00820">LBEvent()</a>, <a class="el" href="../../d4/d1/lboxvar_8c-source.html#l00157">LBPage()</a>, <a class="el" href="../../d3/d0/userexts_8c-source.html#l01830">msg</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00794">MULTIPLESEL</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05388">NtUserKillTimer()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06092">NtUserSetTimer()</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01964">tagLBIV::OwnerDraw</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00437">OWNERDRAWVAR</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02045">tagLBIV::pcbox</a>, <a class="el" href="../../d1/d7/ntcftxt_8h-source.html#l00427">PostMessage()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00424">SDROPPABLE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01745">SELONLY</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00652">SendMessage()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01028">SetSelected()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00018">SHIFTDOWN</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00793">SINGLESEL</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01780">tagCBox::spwnd</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01940">tagLBIV::spwnd</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01939">tagLBIV::spwndParent</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00362">ThreadLock</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00366">ThreadUnlock</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01753">VERKEY_BACKSLASH</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01752">VERKEY_SLASH</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02406">WFHSCROLL</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01967">tagLBIV::wMultiple</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l01719">xxxCBHideListBoxWindow()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l01819">xxxCBShowListBoxWindow()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02092">xxxInsureVisible()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01111">xxxInvertLBItem()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l03651">xxxLBBlockHilite()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02139">xxxLBoxCaretBlinker()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00430">xxxLBSetCaret()</a>, <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l00125">xxxLBShowHideScrollBars()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01244">xxxNotifyOwner()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01181">xxxResetWorld()</a>, and <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01265">xxxSetISelBase()</a>.
<p>
Referenced by <a class="el" href="../../d7/d0/lb1_8c-source.html#l00032">ListBoxWndProcWorker()</a>, and <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02948">xxxLBoxCtlCharInput()</a>.
<p>
<pre class="fragment"><div>02187 {
02188     <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a> i;
02189     <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a> iNewISel;
02190     <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a> cItemPageScroll;
02191     <a class="code" href="../../d7/d9/structtagCBox.html">PCBOX</a> pcbox;
02192     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fDropDownComboBox;
02193     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fExtendedUIComboBoxClosed;
02194     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> hScrollBar = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(plb-&gt;spwnd, WFHSCROLL);
02195     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> wModifiers = 0;
02196     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fSelectKey = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;  <span class="comment">/* assume it is a navigation key */</span>
02197     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> uEvent = 0;
02198     HWND hwnd = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(plb-&gt;spwnd);
02199     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpwndParent;
02200     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpwnd;
02201 
02202     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(plb-&gt;spwnd);
02203 
02204     pcbox = plb-&gt;pcbox;
02205 
02206     <span class="comment">/*</span>
02207 <span class="comment">     * Is this a dropdown style combo box/listbox ?</span>
02208 <span class="comment">     */</span>
02209     fDropDownComboBox = pcbox &amp;&amp; (pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o10">CBoxStyle</a> &amp; <a class="code" href="../../d6/d0/usercli_8h.html#a57">SDROPPABLE</a>);
02210 
02211     <span class="comment">/*</span>
02212 <span class="comment">     *Is this an extended ui combo box which is closed?</span>
02213 <span class="comment">     */</span>
02214     fExtendedUIComboBoxClosed = fDropDownComboBox &amp;&amp; pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o18">fExtendedUI</a> &amp;&amp;
02215                               !pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o15">fLBoxVisible</a>;
02216 
02217     <span class="keywordflow">if</span> (plb-&gt;fMouseDown || (!plb-&gt;cMac &amp;&amp; vKey != VK_F4)) {
02218 
02219         <span class="comment">/*</span>
02220 <span class="comment">         * Ignore keyboard input if we are in the middle of a mouse down deal or</span>
02221 <span class="comment">         * if there are no items in the listbox. Note that we let F4's go</span>
02222 <span class="comment">         * through for combo boxes so that the use can pop up and down empty</span>
02223 <span class="comment">         * combo boxes.</span>
02224 <span class="comment">         */</span>
02225         <span class="keywordflow">return</span>;
02226     }
02227 
02228     <span class="comment">/*</span>
02229 <span class="comment">     * Modifiers are considered only in EXTENDED sel list boxes.</span>
02230 <span class="comment">     */</span>
02231     <span class="keywordflow">if</span> (plb-&gt;wMultiple == <a class="code" href="../../d6/d0/usercli_8h.html#a116">EXTENDEDSEL</a>) {
02232 
02233         <span class="comment">/*</span>
02234 <span class="comment">         * If multiselection listbox, are any modifiers used ?</span>
02235 <span class="comment">         */</span>
02236         <span class="keywordflow">if</span> (<a class="code" href="../../d8/d9/client_2ntstubs_8c.html#a16">GetKeyState</a>(VK_SHIFT) &lt; 0)
02237             wModifiers = <a class="code" href="../../d9/d1/lboxctl2_8c.html#a2">SHIFTDOWN</a>;
02238         <span class="keywordflow">if</span> (<a class="code" href="../../d8/d9/client_2ntstubs_8c.html#a16">GetKeyState</a>(VK_CONTROL) &lt; 0)
02239             wModifiers += <a class="code" href="../../d9/d1/lboxctl2_8c.html#a3">CTLDOWN</a>;
02240 
02241         <span class="comment">/*</span>
02242 <span class="comment">         * Please Note that (SHIFTDOWN + CTLDOWN) == (SHCTLDOWN)</span>
02243 <span class="comment">         */</span>
02244     }
02245 
02246     <span class="keywordflow">if</span> (<a class="code" href="../../d2/d1/userexts_8c.html#a129">msg</a> == <a class="code" href="../../d9/d1/lboxctl2_8c.html#a0">LB_KEYDOWN</a>) {
02247 
02248         <span class="comment">/*</span>
02249 <span class="comment">         * This is a listbox "go to specified item" message which means we want</span>
02250 <span class="comment">         * to go to a particular item number (given by vKey) directly.  ie.  the</span>
02251 <span class="comment">         * user has typed a character and we want to go to the item which</span>
02252 <span class="comment">         * starts with that character.</span>
02253 <span class="comment">         */</span>
02254         iNewISel = (<a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a>)vKey;
02255         <span class="keywordflow">goto</span> TrackKeyDown;
02256     }
02257 
02258     cItemPageScroll = plb-&gt;cItemFullMax;
02259 
02260     <span class="keywordflow">if</span> (cItemPageScroll &gt; 1)
02261         cItemPageScroll--;
02262 
02263     <span class="keywordflow">if</span> (plb-&gt;fWantKeyboardInput) {
02264 
02265         <span class="comment">/*</span>
02266 <span class="comment">         * Note: msg must not be LB_KEYDOWN here or we'll be in trouble...</span>
02267 <span class="comment">         */</span>
02268         <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(plb-&gt;spwndParent, &amp;tlpwndParent);
02269         iNewISel = (<a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a>)<a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a450">HW</a>(plb-&gt;spwndParent), WM_VKEYTOITEM,
02270                 MAKELONG(vKey, plb-&gt;iSelBase), (LPARAM)hwnd);
02271         <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndParent);
02272 
02273         <span class="keywordflow">if</span> (iNewISel == -2) {
02274 
02275             <span class="comment">/*</span>
02276 <span class="comment">             * Don't move the selection...</span>
02277 <span class="comment">             */</span>
02278             <span class="keywordflow">return</span>;
02279         }
02280         <span class="keywordflow">if</span> (iNewISel != -1) {
02281 
02282             <span class="comment">/*</span>
02283 <span class="comment">             * Jump directly to the item provided by the app</span>
02284 <span class="comment">             */</span>
02285             <span class="keywordflow">goto</span> TrackKeyDown;
02286         }
02287 
02288         <span class="comment">/*</span>
02289 <span class="comment">         * else do default processing of the character.</span>
02290 <span class="comment">         */</span>
02291     }
02292 
02293     <span class="keywordflow">switch</span> (vKey) {
02294     <span class="comment">// LATER IanJa: not language independent!!!</span>
02295     <span class="comment">// We could use VkKeyScan() to find out which is the '\' key</span>
02296     <span class="comment">// This is VK_OEM_5 '\|' for US English only.</span>
02297     <span class="comment">// Germans, Italians etc. have to type CTRL+^ (etc) for this.</span>
02298     <span class="comment">// This is documented as File Manager behaviour for 3.0, but apparently</span>
02299     <span class="comment">// not for 3.1., although functionality remains. We should still fix it,</span>
02300     <span class="comment">// although German (etc?) '\' is generated with AltGr (Ctrl-Alt) (???)</span>
02301     <span class="keywordflow">case</span> <a class="code" href="../../d6/d0/usercli_8h.html#a253">VERKEY_BACKSLASH</a>:  <span class="comment">/* '\' character for US English */</span>
02302 
02303         <span class="comment">/*</span>
02304 <span class="comment">         * Check if this is CONTROL-\ ; If so Deselect all items</span>
02305 <span class="comment">         */</span>
02306         <span class="keywordflow">if</span> ((wModifiers &amp; <a class="code" href="../../d9/d1/lboxctl2_8c.html#a3">CTLDOWN</a>) &amp;&amp; (plb-&gt;wMultiple != <a class="code" href="../../d6/d0/usercli_8h.html#a114">SINGLESEL</a>)) {
02307             <a class="code" href="../../d6/d0/usercli_8h.html#a695">xxxLBSetCaret</a>(plb, FALSE);
02308             <a class="code" href="../../d6/d0/usercli_8h.html#a733">xxxResetWorld</a>(plb, plb-&gt;iSelBase, plb-&gt;iSelBase, FALSE);
02309 
02310             <span class="comment">/*</span>
02311 <span class="comment">             * And select the current item</span>
02312 <span class="comment">             */</span>
02313             <a class="code" href="../../d6/d0/usercli_8h.html#a694">SetSelected</a>(plb, plb-&gt;iSelBase, TRUE, HILITEANDSEL);
02314             <a class="code" href="../../d6/d0/usercli_8h.html#a717">xxxInvertLBItem</a>(plb, plb-&gt;iSelBase, TRUE);
02315             uEvent = EVENT_OBJECT_SELECTION;
02316             <span class="keywordflow">goto</span> CaretOnAndNotify;
02317         }
02318         <span class="keywordflow">return</span>;
02319         <span class="keywordflow">break</span>;
02320 
02321     <span class="keywordflow">case</span> VK_DIVIDE:     <span class="comment">/* NumPad '/' character on enhanced keyboard */</span>
02322     <span class="comment">// LATER IanJa: not language independent!!!</span>
02323     <span class="comment">// We could use VkKeyScan() to find out which is the '/' key</span>
02324     <span class="comment">// This is VK_OEM_2 '/?' for US English only.</span>
02325     <span class="comment">// Germans, Italians etc. have to type CTRL+# (etc) for this.</span>
02326     <span class="keywordflow">case</span> <a class="code" href="../../d6/d0/usercli_8h.html#a252">VERKEY_SLASH</a>:  <span class="comment">/* '/' character */</span>
02327 
02328         <span class="comment">/*</span>
02329 <span class="comment">         * Check if this is CONTROL-/ ; If so select all items</span>
02330 <span class="comment">         */</span>
02331         <span class="keywordflow">if</span> ((wModifiers &amp; <a class="code" href="../../d9/d1/lboxctl2_8c.html#a3">CTLDOWN</a>) &amp;&amp; (plb-&gt;wMultiple != <a class="code" href="../../d6/d0/usercli_8h.html#a114">SINGLESEL</a>)) {
02332             <a class="code" href="../../d6/d0/usercli_8h.html#a695">xxxLBSetCaret</a>(plb, FALSE);
02333             <a class="code" href="../../d6/d0/usercli_8h.html#a733">xxxResetWorld</a>(plb, -1, -1, TRUE);
02334 
02335             uEvent = EVENT_OBJECT_SELECTIONWITHIN;
02336 
02337 CaretOnAndNotify:
02338             <a class="code" href="../../d6/d0/usercli_8h.html#a695">xxxLBSetCaret</a>(plb, TRUE);
02339             <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a405">FWINABLE</a>()) {
02340                 <a class="code" href="../../d6/d0/usercli_8h.html#a409">LBEvent</a>(plb, uEvent, plb-&gt;iSelBase);
02341             }
02342             <a class="code" href="../../d6/d0/usercli_8h.html#a732">xxxNotifyOwner</a>(plb, LBN_SELCHANGE);
02343         }
02344         <span class="keywordflow">return</span>;
02345         <span class="keywordflow">break</span>;
02346 
02347     <span class="keywordflow">case</span> VK_F8:
02348 
02349         <span class="comment">/*</span>
02350 <span class="comment">         * The "Add" mode is possible only in Multiselection listboxes...  Get</span>
02351 <span class="comment">         * into it via SHIFT-F8...  (Yes, sometimes these UI people are sillier</span>
02352 <span class="comment">         * than your "typical dumb user"...)</span>
02353 <span class="comment">         */</span>
02354         <span class="keywordflow">if</span> (plb-&gt;wMultiple != <a class="code" href="../../d6/d0/usercli_8h.html#a114">SINGLESEL</a> &amp;&amp; wModifiers == <a class="code" href="../../d9/d1/lboxctl2_8c.html#a2">SHIFTDOWN</a>) {
02355 
02356             <span class="comment">/*</span>
02357 <span class="comment">             * We have to make the caret blink! Do something...</span>
02358 <span class="comment">             */</span>
02359             <span class="keywordflow">if</span> (plb-&gt;fAddSelMode) {
02360 
02361                 <span class="comment">/*</span>
02362 <span class="comment">                 * Switch off the Caret blinking</span>
02363 <span class="comment">                 */</span>
02364                 <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a208">NtUserKillTimer</a>(hwnd, IDSYS_CARET);
02365 
02366                 <span class="comment">/*</span>
02367 <span class="comment">                 * Make sure the caret does not vanish</span>
02368 <span class="comment">                 */</span>
02369                 <a class="code" href="../../d6/d0/usercli_8h.html#a695">xxxLBSetCaret</a>(plb, TRUE);
02370             } <span class="keywordflow">else</span> {
02371 
02372                 <span class="comment">/*</span>
02373 <span class="comment">                 * Create a timer to make the caret blink</span>
02374 <span class="comment">                 */</span>
02375                 <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a230">NtUserSetTimer</a>(hwnd, IDSYS_CARET, <a class="code" href="../../d1/d8/clglobal_8c.html#a4">gpsi</a>-&gt;dtCaretBlink,
02376                         xxxLBoxCaretBlinker);
02377             }
02378 
02379             <span class="comment">/*</span>
02380 <span class="comment">             * Toggle the Add mode flag</span>
02381 <span class="comment">             */</span>
02382             plb-&gt;fAddSelMode = (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)!plb-&gt;fAddSelMode;
02383         }
02384         <span class="keywordflow">return</span>;
02385     <span class="keywordflow">case</span> VK_SPACE:  <span class="comment">/* Selection key is space */</span>
02386         i = 0;
02387         fSelectKey = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
02388         <span class="keywordflow">break</span>;
02389 
02390     <span class="keywordflow">case</span> VK_PRIOR:
02391         <span class="keywordflow">if</span> (fExtendedUIComboBoxClosed) {
02392 
02393             <span class="comment">/*</span>
02394 <span class="comment">             * Disable movement keys for TandyT.</span>
02395 <span class="comment">             */</span>
02396             <span class="keywordflow">return</span>;
02397         }
02398 
02399         <span class="keywordflow">if</span> (plb-&gt;OwnerDraw == <a class="code" href="../../d6/d0/usercli_8h.html#a63">OWNERDRAWVAR</a>) {
02400             i = <a class="code" href="../../d6/d0/usercli_8h.html#a742">LBPage</a>(plb, plb-&gt;iSelBase, FALSE) - plb-&gt;iSelBase;
02401         } <span class="keywordflow">else</span> {
02402             i = -cItemPageScroll;
02403         }
02404         <span class="keywordflow">break</span>;
02405 
02406     <span class="keywordflow">case</span> VK_NEXT:
02407         <span class="keywordflow">if</span> (fExtendedUIComboBoxClosed) {
02408 
02409             <span class="comment">/*</span>
02410 <span class="comment">             * Disable movement keys for TandyT.</span>
02411 <span class="comment">             */</span>
02412             <span class="keywordflow">return</span>;
02413         }
02414 
02415         <span class="keywordflow">if</span> (plb-&gt;OwnerDraw == <a class="code" href="../../d6/d0/usercli_8h.html#a63">OWNERDRAWVAR</a>) {
02416             i = <a class="code" href="../../d6/d0/usercli_8h.html#a742">LBPage</a>(plb, plb-&gt;iSelBase, TRUE) - plb-&gt;iSelBase;
02417         } <span class="keywordflow">else</span> {
02418             i = cItemPageScroll;
02419         }
02420         <span class="keywordflow">break</span>;
02421 
02422     <span class="keywordflow">case</span> VK_HOME:
02423         <span class="keywordflow">if</span> (fExtendedUIComboBoxClosed) {
02424 
02425             <span class="comment">/*</span>
02426 <span class="comment">             * Disable movement keys for TandyT.</span>
02427 <span class="comment">             */</span>
02428             <span class="keywordflow">return</span>;
02429         }
02430 
02431         i = (INT_MIN/2)+1;  <span class="comment">/* A very big negative number */</span>
02432         <span class="keywordflow">break</span>;
02433 
02434     <span class="keywordflow">case</span> VK_END:
02435         <span class="keywordflow">if</span> (fExtendedUIComboBoxClosed) {
02436 
02437             <span class="comment">/*</span>
02438 <span class="comment">             * Disable movement keys for TandyT.</span>
02439 <span class="comment">             */</span>
02440             <span class="keywordflow">return</span>;
02441         }
02442 
02443         i = (INT_MAX/2)-1;  <span class="comment">/* A very big positive number */</span>
02444         <span class="keywordflow">break</span>;
02445 
02446     <span class="keywordflow">case</span> VK_LEFT:
02447         <span class="keywordflow">if</span> (plb-&gt;fMultiColumn) {
02448             <span class="keywordflow">if</span> (plb-&gt;fRightAlign
02449 <span class="preprocessor">#ifdef USE_MIRRORING</span>
02450 <span class="preprocessor"></span>                                 ^ (!!<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(plb-&gt;spwnd, WEFLAYOUTRTL))
02451 
02452 <span class="preprocessor">#endif</span>
02453 <span class="preprocessor"></span>               )
02454                 <span class="keywordflow">goto</span> ReallyRight;
02455 ReallyLeft:
02456             <span class="keywordflow">if</span> (plb-&gt;iSelBase / plb-&gt;itemsPerColumn == 0) {
02457                 i = 0;
02458             } <span class="keywordflow">else</span> {
02459                 i = -plb-&gt;itemsPerColumn;
02460             }
02461             <span class="keywordflow">break</span>;
02462         }
02463 
02464         <span class="keywordflow">if</span> (hScrollBar) {
02465             <span class="keywordflow">goto</span> HandleHScrolling;
02466         } <span class="keywordflow">else</span> {
02467 
02468             <span class="comment">/*</span>
02469 <span class="comment">             * Fall through and handle this as if the up arrow was pressed.</span>
02470 <span class="comment">             */</span>
02471 
02472             vKey = VK_UP;
02473         }
02474 
02475         <span class="comment">/*</span>
02476 <span class="comment">         * Fall through</span>
02477 <span class="comment">         */</span>
02478 
02479     <span class="keywordflow">case</span> VK_UP:
02480         <span class="keywordflow">if</span> (fExtendedUIComboBoxClosed)
02481             <span class="comment">// Disable movement keys for TandyT.</span>
02482             <span class="keywordflow">return</span>;
02483 
02484         i = -1;
02485         <span class="keywordflow">break</span>;
02486 
02487     <span class="keywordflow">case</span> VK_RIGHT:
02488         <span class="keywordflow">if</span> (plb-&gt;fMultiColumn) {
02489             <span class="keywordflow">if</span> (plb-&gt;fRightAlign
02490 <span class="preprocessor">#ifdef USE_MIRRORING</span>
02491 <span class="preprocessor"></span>                                 ^ (!!<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(plb-&gt;spwnd, WEFLAYOUTRTL))
02492 
02493 <span class="preprocessor">#endif</span>
02494 <span class="preprocessor"></span>               )
02495                 <span class="keywordflow">goto</span> ReallyLeft;
02496 ReallyRight:
02497             <span class="keywordflow">if</span> (plb-&gt;iSelBase / plb-&gt;itemsPerColumn == plb-&gt;cMac / plb-&gt;itemsPerColumn) {
02498                 i = 0;
02499             } <span class="keywordflow">else</span> {
02500                 i = plb-&gt;itemsPerColumn;
02501             }
02502             <span class="keywordflow">break</span>;
02503         }
02504         <span class="keywordflow">if</span> (hScrollBar) {
02505 HandleHScrolling:
02506             <a class="code" href="../../d0/d8/ntcftxt_8h.html#a20">PostMessage</a>(hwnd, WM_HSCROLL,
02507                     (vKey == VK_RIGHT ? SB_LINEDOWN : SB_LINEUP), 0L);
02508             <span class="keywordflow">return</span>;
02509         } <span class="keywordflow">else</span> {
02510 
02511             <span class="comment">/*</span>
02512 <span class="comment">             * Fall through and handle this as if the down arrow was</span>
02513 <span class="comment">             * pressed.</span>
02514 <span class="comment">             */</span>
02515             vKey = VK_DOWN;
02516         }
02517 
02518         <span class="comment">/*</span>
02519 <span class="comment">         * Fall through</span>
02520 <span class="comment">         */</span>
02521 
02522     <span class="keywordflow">case</span> VK_DOWN:
02523         <span class="keywordflow">if</span> (fExtendedUIComboBoxClosed) {
02524 
02525             <span class="comment">/*</span>
02526 <span class="comment">             * If the combo box is closed, down arrow should open it.</span>
02527 <span class="comment">             */</span>
02528             <span class="keywordflow">if</span> (!pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o15">fLBoxVisible</a>) {
02529 
02530                 <span class="comment">/*</span>
02531 <span class="comment">                 * If the listbox isn't visible, just show it</span>
02532 <span class="comment">                 */</span>
02533                 <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o0">spwnd</a>, &amp;tlpwnd);
02534                 <a class="code" href="../../d6/d0/usercli_8h.html#a668">xxxCBShowListBoxWindow</a>(pcbox, TRUE);
02535                 <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwnd);
02536             }
02537             <span class="keywordflow">return</span>;
02538         }
02539         i = 1;
02540         <span class="keywordflow">break</span>;
02541 
02542     <span class="keywordflow">case</span> VK_ESCAPE:
02543     <span class="keywordflow">case</span> VK_RETURN:
02544         <span class="keywordflow">if</span> (!fDropDownComboBox || !pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o15">fLBoxVisible</a>)
02545             <span class="keywordflow">return</span>;
02546 
02547         <span class="comment">// |  If this is a dropped listbox for a combobox and the ENTER  |</span>
02548         <span class="comment">// |  key is pressed, close up the listbox, so FALLTHRU          |</span>
02549         <span class="comment">// V                                                             V</span>
02550 
02551     <span class="keywordflow">case</span> VK_F4:
02552         <span class="keywordflow">if</span> (fDropDownComboBox &amp;&amp; !pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o18">fExtendedUI</a>) {
02553 
02554             <span class="comment">/*</span>
02555 <span class="comment">             * If we are a dropdown combo box/listbox we want to process</span>
02556 <span class="comment">             * this key.  BUT for TandtT, we don't do anything on VK_F4 if we</span>
02557 <span class="comment">             * are in extended ui mode.</span>
02558 <span class="comment">             */</span>
02559             <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o0">spwnd</a>, &amp;tlpwnd);
02560             <span class="keywordflow">if</span> (!pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o15">fLBoxVisible</a>) {
02561 
02562                 <span class="comment">/*</span>
02563 <span class="comment">                 * If the listbox isn't visible, just show it</span>
02564 <span class="comment">                 */</span>
02565                 <a class="code" href="../../d6/d0/usercli_8h.html#a668">xxxCBShowListBoxWindow</a>(pcbox, (vKey != VK_ESCAPE));
02566             } <span class="keywordflow">else</span> {
02567 
02568                 <span class="comment">/*</span>
02569 <span class="comment">                 * Ok, the listbox is visible.  So hide the listbox window.</span>
02570 <span class="comment">                 */</span>
02571                 <a class="code" href="../../d6/d0/usercli_8h.html#a667">xxxCBHideListBoxWindow</a>(pcbox, TRUE, (vKey != VK_ESCAPE));
02572             }
02573             <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwnd);
02574         }
02575 
02576         <span class="comment">/*</span>
02577 <span class="comment">         * Fall through to the return</span>
02578 <span class="comment">         */</span>
02579 
02580     <span class="keywordflow">default</span>:
02581         <span class="keywordflow">return</span>;
02582     }
02583 
02584     <span class="comment">/*</span>
02585 <span class="comment">     * Find out what the new selection should be</span>
02586 <span class="comment">     */</span>
02587     iNewISel = <a class="code" href="../../d9/d1/lboxctl2_8c.html#a32">IncrementISel</a>(plb, plb-&gt;iSelBase, i);
02588 
02589 
02590     <span class="keywordflow">if</span> (plb-&gt;wMultiple == <a class="code" href="../../d6/d0/usercli_8h.html#a114">SINGLESEL</a>) {
02591         <span class="keywordflow">if</span> (plb-&gt;iSel == iNewISel) {
02592 
02593             <span class="comment">/*</span>
02594 <span class="comment">             * If we are single selection and the keystroke is moving us to an</span>
02595 <span class="comment">             * item which is already selected, we don't have to do anything...</span>
02596 <span class="comment">             */</span>
02597             <span class="keywordflow">return</span>;
02598         }
02599 
02600         uEvent = EVENT_OBJECT_SELECTION;
02601 
02602         plb-&gt;iTypeSearch = 0;
02603         <span class="keywordflow">if</span> ((vKey == VK_UP || vKey == VK_DOWN) &amp;&amp;
02604                 !<a class="code" href="../../d6/d0/usercli_8h.html#a687">IsSelected</a>(plb, plb-&gt;iSelBase, HILITEONLY)) {
02605 
02606             <span class="comment">/*</span>
02607 <span class="comment">             * If the caret is on an unselected item and the user just hits the</span>
02608 <span class="comment">             * up or down arrow key (ie. with no shift or ctrl modifications),</span>
02609 <span class="comment">             * then we will just select the item the cursor is at. This is</span>
02610 <span class="comment">             * needed for proper behavior in combo boxes but do we always want</span>
02611 <span class="comment">             * to run this code??? Note that this is only used in single</span>
02612 <span class="comment">             * selection list boxes since it doesn't make sense in the</span>
02613 <span class="comment">             * multiselection case. Note that an LB_KEYDOWN message must not be</span>
02614 <span class="comment">             * checked here because the vKey will be an item number not a</span>
02615 <span class="comment">             * VK_and we will goof. Thus, trackkeydown label is below this to</span>
02616 <span class="comment">             * fix a bug caused by it being above this...</span>
02617 <span class="comment">             */</span>
02618             iNewISel = (plb-&gt;iSelBase == -1) ? 0 : plb-&gt;iSelBase;
02619         }
02620     }
02621 
02622 TrackKeyDown:
02623 
02624     <a class="code" href="../../d6/d0/usercli_8h.html#a693">xxxSetISelBase</a>(plb, iNewISel);
02625 
02626     <a class="code" href="../../d6/d0/usercli_8h.html#a695">xxxLBSetCaret</a>(plb, FALSE);
02627 
02628     <span class="keywordflow">if</span> (wModifiers &amp; <a class="code" href="../../d9/d1/lboxctl2_8c.html#a2">SHIFTDOWN</a>) {
02629         <span class="comment">// Check if iMouseDown is un-initialised</span>
02630         <span class="keywordflow">if</span> (plb-&gt;iMouseDown == -1)
02631             plb-&gt;iMouseDown = iNewISel;
02632         <span class="keywordflow">if</span> (plb-&gt;iLastMouseMove == -1)
02633             plb-&gt;iLastMouseMove = iNewISel;
02634 
02635         <span class="comment">// Check if we are in ADD mode</span>
02636         <span class="keywordflow">if</span> (plb-&gt;fAddSelMode) {
02637             <span class="comment">/* Preserve all the pre-existing selections except the</span>
02638 <span class="comment">             * ones connected with the last anchor point; If the last</span>
02639 <span class="comment">             * Preserve all the previous selections</span>
02640 <span class="comment">            */</span>
02641             <span class="comment">/* Deselect only the selection connected with the last</span>
02642 <span class="comment">             * anchor point; If the last anchor point is associated</span>
02643 <span class="comment">             * with de-selection, then do not do it</span>
02644 <span class="comment">            */</span>
02645 
02646             <span class="keywordflow">if</span> (!plb-&gt;fNewItemState)
02647                 plb-&gt;iLastMouseMove = plb-&gt;iMouseDown;
02648 
02649             <span class="comment">/* We haven't done anything here because, LBBlockHilite()</span>
02650 <span class="comment">             * will take care of wiping out the selection between</span>
02651 <span class="comment">             * Anchor point and iLastMouseMove and select the block</span>
02652 <span class="comment">             * between anchor point and current cursor location</span>
02653 <span class="comment">            */</span>
02654         } <span class="keywordflow">else</span> {
02655             <span class="comment">/* We are not in ADD mode */</span>
02656             <span class="comment">/* Remove all selections except between the anchor point</span>
02657 <span class="comment">             * and last mouse move because it will be taken care of in</span>
02658 <span class="comment">             * LBBlockHilite</span>
02659 <span class="comment">            */</span>
02660             <a class="code" href="../../d6/d0/usercli_8h.html#a733">xxxResetWorld</a>(plb, plb-&gt;iMouseDown, plb-&gt;iLastMouseMove, FALSE);
02661         }
02662 
02663         uEvent = EVENT_OBJECT_SELECTIONWITHIN;
02664 
02665         <span class="comment">/* LBBlockHilite takes care to deselect the block between</span>
02666 <span class="comment">         * the anchor point and iLastMouseMove and select the block</span>
02667 <span class="comment">         * between the anchor point and the current cursor location</span>
02668 <span class="comment">        */</span>
02669         <span class="comment">/* Toggle all items to the same selection state as the item</span>
02670 <span class="comment">         * item at the anchor point) from the anchor point to the</span>
02671 <span class="comment">         * current cursor location.</span>
02672 <span class="comment">        */</span>
02673         plb-&gt;fNewItemState = <a class="code" href="../../d6/d0/usercli_8h.html#a687">IsSelected</a>(plb, plb-&gt;iMouseDown, SELONLY);
02674         <a class="code" href="../../d6/d0/usercli_8h.html#a718">xxxLBBlockHilite</a>(plb, iNewISel, TRUE);
02675 
02676         plb-&gt;iLastMouseMove = iNewISel;
02677         <span class="comment">/* Preserve the existing anchor point */</span>
02678     } <span class="keywordflow">else</span> {
02679         <span class="comment">/* Check if this is in ADD mode */</span>
02680         <span class="keywordflow">if</span> ((plb-&gt;fAddSelMode) || (plb-&gt;wMultiple == <a class="code" href="../../d6/d0/usercli_8h.html#a115">MULTIPLESEL</a>)) {
02681             <span class="comment">/* Preserve all pre-exisiting selections */</span>
02682             <span class="keywordflow">if</span> (fSelectKey) {
02683                 <span class="comment">/* Toggle the selection state of the current item */</span>
02684                 plb-&gt;fNewItemState = !<a class="code" href="../../d6/d0/usercli_8h.html#a687">IsSelected</a>(plb, iNewISel, SELONLY);
02685                 <a class="code" href="../../d6/d0/usercli_8h.html#a694">SetSelected</a>(plb, iNewISel, plb-&gt;fNewItemState, HILITEANDSEL);
02686 
02687                 <a class="code" href="../../d6/d0/usercli_8h.html#a717">xxxInvertLBItem</a>(plb, iNewISel, plb-&gt;fNewItemState);
02688 
02689                 <span class="comment">/* Set the anchor point at the current location */</span>
02690                 plb-&gt;iLastMouseMove = plb-&gt;iMouseDown = iNewISel;
02691                 uEvent = (plb-&gt;fNewItemState ? EVENT_OBJECT_SELECTIONADD :
02692                         EVENT_OBJECT_SELECTIONREMOVE);
02693             }
02694         } <span class="keywordflow">else</span> {
02695             <span class="comment">/* We are NOT in ADD mode */</span>
02696             <span class="comment">/* Remove all existing selections except iNewISel, to</span>
02697 <span class="comment">             * avoid flickering.</span>
02698 <span class="comment">            */</span>
02699             <a class="code" href="../../d6/d0/usercli_8h.html#a733">xxxResetWorld</a>(plb, iNewISel, iNewISel, FALSE);
02700 
02701             <span class="comment">/* Select the current item */</span>
02702             <a class="code" href="../../d6/d0/usercli_8h.html#a694">SetSelected</a>(plb, iNewISel, TRUE, HILITEANDSEL);
02703             <a class="code" href="../../d6/d0/usercli_8h.html#a717">xxxInvertLBItem</a>(plb, iNewISel, TRUE);
02704 
02705             <span class="comment">/* Set the anchor point at the current location */</span>
02706             plb-&gt;iLastMouseMove = plb-&gt;iMouseDown = iNewISel;
02707             uEvent = EVENT_OBJECT_SELECTION;
02708         }
02709     }
02710 
02711     <span class="comment">/*</span>
02712 <span class="comment">     * Move the cursor to the new location</span>
02713 <span class="comment">     */</span>
02714     <a class="code" href="../../d6/d0/usercli_8h.html#a716">xxxInsureVisible</a>(plb, iNewISel, FALSE);
02715     <a class="code" href="../../d6/d0/usercli_8h.html#a706">xxxLBShowHideScrollBars</a>(plb);
02716 
02717     <a class="code" href="../../d6/d0/usercli_8h.html#a695">xxxLBSetCaret</a>(plb, TRUE);
02718 
02719     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a405">FWINABLE</a>() &amp;&amp; uEvent) {
02720         <a class="code" href="../../d6/d0/usercli_8h.html#a409">LBEvent</a>(plb, uEvent, iNewISel);
02721     }
02722 
02723     <span class="comment">/*</span>
02724 <span class="comment">     * Should we notify our parent?</span>
02725 <span class="comment">     */</span>
02726     <span class="keywordflow">if</span> (plb-&gt;fNotify) {
02727         <span class="keywordflow">if</span> (fDropDownComboBox &amp;&amp; pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o15">fLBoxVisible</a>) {
02728 
02729             <span class="comment">/*</span>
02730 <span class="comment">             * If we are in a drop down combo box/listbox and the listbox is</span>
02731 <span class="comment">             * visible, we need to set the fKeyboardSelInListBox bit so that the</span>
02732 <span class="comment">             * combo box code knows not to hide the listbox since the selchange</span>
02733 <span class="comment">             * message is caused by the user keyboarding through...</span>
02734 <span class="comment">             */</span>
02735             pcbox-&gt;<a class="code" href="../../d7/d9/structtagCBox.html#o17">fKeyboardSelInListBox</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
02736             plb-&gt;iLastSelection = iNewISel;
02737         }
02738         <a class="code" href="../../d6/d0/usercli_8h.html#a732">xxxNotifyOwner</a>(plb, LBN_SELCHANGE);
02739     }
02740 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a705" doxytag="usercli.h::xxxLBoxCtlScroll" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID xxxLBoxCtlScroll           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d7/d0/lb1_8c-source.html#l00032">ListBoxWndProcWorker()</a>, <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00514">xxxLBSize()</a>, and <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01290">xxxTrackMouse()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a699" doxytag="usercli.h::xxxLBoxDeleteItem" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID xxxLBoxDeleteItem           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l01053">1053</a> of file <a class="el" href="../../d9/d0/lboxctl1_8c-source.html">lboxctl1.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01984">tagLBIV::fHasData</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01515">HWq</a>, <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l00176">LBGetItemData()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00652">SendMessage()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01764">tagWND::spmenu</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01940">tagLBIV::spwnd</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01939">tagLBIV::spwndParent</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00362">ThreadLock</a>, and <a class="el" href="../../d7/d9/usercli_8h-source.html#l00366">ThreadUnlock</a>.
<p>
Referenced by <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l00842">xxxLBoxCtlDelete()</a>, and <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00350">xxxLBoxDoDeleteItems()</a>.
<p>
<pre class="fragment"><div>01056 {
01057     DELETEITEMSTRUCT dis;
01058     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpwndParent;
01059 
01060     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(plb-&gt;spwnd);
01061     <span class="keywordflow">if</span> (plb-&gt;spwnd == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
01062         <span class="keywordflow">return</span>;
01063 
01064     <span class="comment">/*</span>
01065 <span class="comment">     * Bug 262122 - joejo</span>
01066 <span class="comment">     * No need to send message if no data!</span>
01067 <span class="comment">     */</span>
01068     <span class="keywordflow">if</span> (!plb-&gt;fHasData) {
01069         <span class="keywordflow">return</span>;
01070     }
01071 
01072     <span class="comment">/*</span>
01073 <span class="comment">     * Fill the DELETEITEMSTRUCT</span>
01074 <span class="comment">     */</span>
01075     dis.CtlType = ODT_LISTBOX;
01076     dis.CtlID = PtrToUlong(plb-&gt;spwnd-&gt;spmenu);
01077     dis.itemID = sItem;
01078     dis.hwndItem = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(plb-&gt;spwnd);
01079 
01080     <span class="comment">/*</span>
01081 <span class="comment">     * Bug 262122 - joejo</span>
01082 <span class="comment">     * Fixed in 93 so that ItemData was passed. For some reason, not</span>
01083 <span class="comment">     * merged in.</span>
01084 <span class="comment">     */</span>
01085     dis.itemData = <a class="code" href="../../d6/d0/usercli_8h.html#a721">LBGetItemData</a>(plb, sItem);
01086 
01087     <span class="keywordflow">if</span> (plb-&gt;spwndParent != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01088         <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(plb-&gt;spwndParent, &amp;tlpwndParent);
01089         <a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(plb-&gt;spwndParent), WM_DELETEITEM, dis.CtlID,
01090                 (LPARAM)&amp;dis);
01091         <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndParent);
01092     }
01093 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a700" doxytag="usercli.h::xxxLBoxDoDeleteItems" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID xxxLBoxDoDeleteItems           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00350">350</a> of file <a class="el" href="../../d3/d1/lboxrare_8c-source.html">lboxrare.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01948">tagLBIV::cMac</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01984">tagLBIV::fHasData</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00025">INT</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01964">tagLBIV::OwnerDraw</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01940">tagLBIV::spwnd</a>, and <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l01053">xxxLBoxDeleteItem()</a>.
<p>
Referenced by <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00375">xxxDestroyLBox()</a>, and <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l00797">xxxLBResetContent()</a>.
<p>
<pre class="fragment"><div>00352 {
00353     <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a> sItem;
00354 
00355     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(plb-&gt;spwnd);
00356 
00357     <span class="comment">/*</span>
00358 <span class="comment">     * Send WM_DELETEITEM message for ownerdraw listboxes which are</span>
00359 <span class="comment">     * being deleted.  (NODATA listboxes don't send such, though.)</span>
00360 <span class="comment">     */</span>
00361     <span class="keywordflow">if</span> (plb-&gt;OwnerDraw &amp;&amp; plb-&gt;cMac &amp;&amp; plb-&gt;fHasData) {
00362         <span class="keywordflow">for</span> (sItem = plb-&gt;cMac - 1; sItem &gt;= 0; sItem--) {
00363             <a class="code" href="../../d6/d0/usercli_8h.html#a699">xxxLBoxDeleteItem</a>(plb, sItem);
00364         }
00365     }
00366 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a701" doxytag="usercli.h::xxxLBoxDrawItem" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID xxxLBoxDrawItem           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPRECT&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l03558">3558</a> of file <a class="el" href="../../d0/d1/lboxctl2_8c-source.html">lboxctl2.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01948">tagLBIV::cMac</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00243">CopyRect</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01984">tagLBIV::fHasData</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02046">tagLBIV::hdc</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01514">HW</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01515">HWq</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l00176">LBGetItemData()</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00652">SendMessage()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01764">tagWND::spmenu</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01940">tagLBIV::spwnd</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01939">tagLBIV::spwndParent</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00362">ThreadLock</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00366">ThreadUnlock</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02524">WEFPUIACCELHIDDEN</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02523">WEFPUIFOCUSHIDDEN</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02418">WFDISABLED</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02318">WFWIN31COMPAT</a>.
<p>
Referenced by <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01111">xxxInvertLBItem()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00798">xxxLBPaint()</a>, and <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00430">xxxLBSetCaret()</a>.
<p>
<pre class="fragment"><div>03564 {
03565     DRAWITEMSTRUCT dis;
03566     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpwndParent;
03567 
03568     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(plb-&gt;spwnd);
03569 
03570     <span class="comment">/*</span>
03571 <span class="comment">     * Fill the DRAWITEMSTRUCT with the unchanging constants</span>
03572 <span class="comment">     */</span>
03573 
03574     dis.CtlType = ODT_LISTBOX;
03575     dis.CtlID = PtrToUlong(plb-&gt;spwnd-&gt;spmenu);
03576 
03577     <span class="comment">/*</span>
03578 <span class="comment">     * Use -1 if an invalid item number is being used.  This is so that the app</span>
03579 <span class="comment">     * can detect if it should draw the caret (which indicates the lb has the</span>
03580 <span class="comment">     * focus) in an empty listbox</span>
03581 <span class="comment">     */</span>
03582     dis.itemID = (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)(item &lt; plb-&gt;cMac ? item : -1);
03583     dis.itemAction = itemAction;
03584     dis.hwndItem = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(plb-&gt;spwnd);
03585     dis.hDC = plb-&gt;hdc;
03586     dis.itemState = itemState |
03587             (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(plb-&gt;spwnd, WFDISABLED) ? ODS_DISABLED : 0);
03588 
03589     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(plb-&gt;spwnd, WEFPUIFOCUSHIDDEN)) {
03590         dis.itemState |= ODS_NOFOCUSRECT;
03591     }
03592     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(plb-&gt;spwnd, WEFPUIACCELHIDDEN)) {
03593         dis.itemState |= ODS_NOACCEL;
03594     }
03595 
03596     <span class="comment">/*</span>
03597 <span class="comment">     * Set the app supplied data</span>
03598 <span class="comment">     */</span>
03599     <span class="keywordflow">if</span> (!plb-&gt;cMac || !plb-&gt;fHasData) {
03600 
03601         <span class="comment">/*</span>
03602 <span class="comment">         * If no strings or no items, just use 0 for data.  This is so that we</span>
03603 <span class="comment">         * can display a caret when there are no items in the listbox.</span>
03604 <span class="comment">         *</span>
03605 <span class="comment">         * Lazy-eval listboxes of course have no data to pass - only itemID.</span>
03606 <span class="comment">         */</span>
03607         dis.itemData = 0<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>;
03608     } <span class="keywordflow">else</span> {
03609         dis.itemData = <a class="code" href="../../d6/d0/usercli_8h.html#a721">LBGetItemData</a>(plb, item);
03610     }
03611 
03612     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a33">CopyRect</a>(&amp;dis.rcItem, lprect);
03613 
03614     <span class="comment">/*</span>
03615 <span class="comment">     * Set the window origin to the horizontal scroll position.  This is so that</span>
03616 <span class="comment">     * text can always be drawn at 0,0 and the view region will only start at</span>
03617 <span class="comment">     * the horizontal scroll offset. We pass this as wParam</span>
03618 <span class="comment">     */</span>
03619     <span class="comment">/*</span>
03620 <span class="comment">     * Note:  Only pass the itemID in wParam for 3.1 or newer apps.  We break</span>
03621 <span class="comment">     * ccMail otherwise.</span>
03622 <span class="comment">     */</span>
03623 
03624     <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(plb-&gt;spwndParent, &amp;tlpwndParent);
03625     <a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a450">HW</a>(plb-&gt;spwndParent), WM_DRAWITEM,
03626             <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(plb-&gt;spwndParent, WFWIN31COMPAT) ? dis.CtlID : 0,
03627             (LPARAM)&amp;dis);
03628     <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndParent);
03629 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a710" doxytag="usercli.h::xxxLBPaint" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID xxxLBPaint           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HDC&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPRECT&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00798">798</a> of file <a class="el" href="../../d0/d1/lboxctl2_8c-source.html">lboxctl2.c</a>.
<p>
References <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00924">_GetClientRect()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00526">CItemInWindow()</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01948">tagLBIV::cMac</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01957">tagLBIV::cyChar</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01978">tagLBIV::fCaretOn</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02009">tagLBIV::fHorzBar</a>, <a class="el" href="../../d0/d1/rtl_2draw_8c-source.html#l00061">FillRect()</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01995">tagLBIV::fMultiColumn</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02013">tagLBIV::fNoSel</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02023">tagLBIV::fRightAlign</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02046">tagLBIV::hdc</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01744">HILITEONLY</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00025">INT</a>, <a class="el" href="../../d4/d5/rect_8c-source.html#l00191">IntersectRect()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00480">IsSelected()</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01941">tagLBIV::iTop</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00179">LBGetItemRect()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00102">LBInitDC()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00146">LBTermDC()</a>, <a class="el" href="../../d6/d3/acpitabl_8h-source.html#l00366">min</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01964">tagLBIV::OwnerDraw</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00437">OWNERDRAWVAR</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01940">tagLBIV::spwnd</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02042">tagLBIV::xOrigin</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02027">tagLBIV::xRightOrigin</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00354">xxxLBDrawLBItem()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00060">xxxLBGetBrush()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l03558">xxxLBoxDrawItem()</a>, and <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00430">xxxLBSetCaret()</a>.
<p>
Referenced by <a class="el" href="../../d7/d0/lb1_8c-source.html#l00032">ListBoxWndProcWorker()</a>.
<p>
<pre class="fragment"><div>00802 {
00803     <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a> i;
00804     RECT rect;
00805     RECT    scratchRect;
00806     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>    fHilite;
00807     <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a> iLastItem;
00808     HBRUSH hbrSave = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00809     HBRUSH hbrControl;
00810     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fCaretOn;
00811     RECT    rcBounds;
00812     HDC     hdcSave;
00813 
00814     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(plb-&gt;spwnd);
00815 
00816     <span class="keywordflow">if</span> (lprcBounds == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00817         lprcBounds = &amp;rcBounds;
00818         <a class="code" href="../../d6/d9/rtl_2wow_8c.html#a19">_GetClientRect</a>(plb-&gt;spwnd, lprcBounds);
00819     }
00820 
00821     hdcSave = plb-&gt;hdc;
00822     plb-&gt;hdc = hdc;
00823 
00824     <span class="comment">// Initialize dc.</span>
00825     <a class="code" href="../../d9/d1/lboxctl2_8c.html#a11">LBInitDC</a>(plb);
00826 
00827     <span class="comment">// Turn caret off</span>
00828     <span class="keywordflow">if</span> (fCaretOn = plb-&gt;fCaretOn)
00829         <a class="code" href="../../d6/d0/usercli_8h.html#a695">xxxLBSetCaret</a>(plb, FALSE);
00830 
00831     hbrSave = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00832     hbrControl = <a class="code" href="../../d9/d1/lboxctl2_8c.html#a10">xxxLBGetBrush</a>(plb, &amp;hbrSave);
00833 
00834     <span class="comment">// Get listbox's client</span>
00835     <a class="code" href="../../d6/d9/rtl_2wow_8c.html#a19">_GetClientRect</a>(plb-&gt;spwnd, &amp;rect);
00836 
00837     <span class="comment">// Adjust width of client rect for scrolled amount</span>
00838     <span class="comment">// fix for #140, t-arthb</span>
00839     <span class="keywordflow">if</span> (plb-&gt;fRightAlign &amp;&amp; !(plb-&gt;fMultiColumn || plb-&gt;OwnerDraw) &amp;&amp; plb-&gt;fHorzBar)
00840         rect.right += plb-&gt;xOrigin + (plb-&gt;xRightOrigin - plb-&gt;xOrigin);
00841     <span class="keywordflow">else</span>
00842         rect.right += plb-&gt;xOrigin;
00843 
00844     <span class="comment">// Get the index of the last item visible on the screen. This is also</span>
00845     <span class="comment">// valid for var height ownerdraw.</span>
00846     iLastItem = plb-&gt;iTop + <a class="code" href="../../d6/d0/usercli_8h.html#a713">CItemInWindow</a>(plb,TRUE);
00847     iLastItem = <a class="code" href="../../d5/d4/acpitabl_8h.html#a69">min</a>(iLastItem, plb-&gt;cMac - 1);
00848 
00849     <span class="comment">// Fill in the background of the listbox if it's an empty listbox</span>
00850     <span class="comment">// or if we're doing a control print</span>
00851     <span class="keywordflow">if</span> (iLastItem == -1)
00852         <a class="code" href="../../d9/d1/rtl_2draw_8c.html#a3">FillRect</a>(plb-&gt;hdc, &amp;rect, hbrControl);
00853 
00854 
00855     <span class="comment">// Allow AnimateWindow() catch the apps that do not use our DC when</span>
00856     <span class="comment">// drawing the list box</span>
00857     SetBoundsRect(plb-&gt;hdc, NULL, DCB_RESET | DCB_ENABLE);
00858 
00859     <span class="keywordflow">for</span> (i = plb-&gt;iTop; i &lt;= iLastItem; i++) {
00860 
00861         <span class="comment">/*</span>
00862 <span class="comment">         * Note that rect contains the clientrect from when we did the</span>
00863 <span class="comment">         * _GetClientRect so the width is correct.  We just need to adjust</span>
00864 <span class="comment">         * the top and bottom of the rectangle to the item of interest.</span>
00865 <span class="comment">         */</span>
00866         rect.bottom = rect.top + plb-&gt;cyChar;
00867 
00868         <span class="keywordflow">if</span> ((<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)i &lt; (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)plb-&gt;cMac) {
00869 
00870             <span class="comment">/*</span>
00871 <span class="comment">             * If var height, get the rectangle for the item.</span>
00872 <span class="comment">             */</span>
00873             <span class="keywordflow">if</span> (plb-&gt;OwnerDraw == <a class="code" href="../../d6/d0/usercli_8h.html#a63">OWNERDRAWVAR</a> || plb-&gt;fMultiColumn) {
00874                 <a class="code" href="../../d6/d0/usercli_8h.html#a744">LBGetItemRect</a>(plb, i, &amp;rect);
00875             }
00876 
00877             <span class="keywordflow">if</span> (<a class="code" href="../../d3/d6/rect_8c.html#a8">IntersectRect</a>(&amp;scratchRect, lprcBounds, &amp;rect)) {
00878                 fHilite = !plb-&gt;fNoSel &amp;&amp; <a class="code" href="../../d6/d0/usercli_8h.html#a687">IsSelected</a>(plb, i, HILITEONLY);
00879 
00880                 <span class="keywordflow">if</span> (plb-&gt;OwnerDraw) {
00881 
00882                     <span class="comment">/*</span>
00883 <span class="comment">                     * Fill in the drawitem struct</span>
00884 <span class="comment">                     */</span>
00885                     <a class="code" href="../../d6/d0/usercli_8h.html#a701">xxxLBoxDrawItem</a>(plb, i, ODA_DRAWENTIRE,
00886                             (UINT)(fHilite ? ODS_SELECTED : 0), &amp;rect);
00887                 } <span class="keywordflow">else</span> {
00888                     <a class="code" href="../../d9/d1/lboxctl2_8c.html#a15">xxxLBDrawLBItem</a>(plb, i, &amp;rect, fHilite, hbrControl);
00889                 }
00890             }
00891         }
00892         rect.top = rect.bottom;
00893     }
00894 
00895     <span class="keywordflow">if</span> (hbrSave != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00896         SelectObject(hdc, hbrSave);
00897 
00898     <span class="keywordflow">if</span> (fCaretOn)
00899         <a class="code" href="../../d6/d0/usercli_8h.html#a695">xxxLBSetCaret</a>(plb, TRUE);
00900 
00901     <a class="code" href="../../d9/d1/lboxctl2_8c.html#a12">LBTermDC</a>(plb);
00902 
00903     plb-&gt;hdc = hdcSave;
00904 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a737" doxytag="usercli.h::xxxLBResetContent" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL xxxLBResetContent           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>plb</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l00797">797</a> of file <a class="el" href="../../d9/d0/lboxctl1_8c-source.html">lboxctl1.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01948">tagLBIV::cMac</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01949">tagLBIV::cMax</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01952">tagLBIV::hStrings</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01515">HWq</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02029">tagLBIV::iLastSelection</a>, <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00713">InitHStrings()</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01942">tagLBIV::iSel</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01943">tagLBIV::iSelBase</a>, <a class="el" href="../../d3/d7/rtl_2winmgr_8c-source.html#l00537">IsVisible()</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01941">tagLBIV::iTop</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05330">NtUserInvalidateRect()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01951">tagLBIV::rgpch</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01940">tagLBIV::spwnd</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00960">UserLocalFree</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02318">WFWIN31COMPAT</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02042">tagLBIV::xOrigin</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l03387">xxxCheckRedraw()</a>, <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00350">xxxLBoxDoDeleteItems()</a>, and <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l00125">xxxLBShowHideScrollBars()</a>.
<p>
Referenced by <a class="el" href="../../d7/d0/lb1_8c-source.html#l00032">ListBoxWndProcWorker()</a>.
<p>
<pre class="fragment"><div>00799 {
00800     <span class="keywordflow">if</span> (!plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o6">cMac</a>)
00801         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00802 
00803     <a class="code" href="../../d6/d0/usercli_8h.html#a700">xxxLBoxDoDeleteItems</a>(plb);
00804 
00805     <span class="keywordflow">if</span> (plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o8">rgpch</a> != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00806         <a class="code" href="../../d6/d0/usercli_8h.html#a138">UserLocalFree</a>(plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o8">rgpch</a>);
00807         plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o8">rgpch</a> = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00808     }
00809 
00810     <span class="keywordflow">if</span> (plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o9">hStrings</a> != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00811         <a class="code" href="../../d6/d0/usercli_8h.html#a138">UserLocalFree</a>(plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o9">hStrings</a>);
00812         plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o9">hStrings</a> = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00813     }
00814 
00815     <a class="code" href="../../d6/d0/usercli_8h.html#a684">InitHStrings</a>(plb);
00816 
00817     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o1">spwnd</a>, WFWIN31COMPAT))
00818         <a class="code" href="../../d6/d0/usercli_8h.html#a714">xxxCheckRedraw</a>(plb, FALSE, 0);
00819     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d2/d8/rtl_2winmgr_8c.html#a6">IsVisible</a>(plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o1">spwnd</a>))
00820         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a206">NtUserInvalidateRect</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o1">spwnd</a>), NULL, TRUE);
00821 
00822     plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o4">iSelBase</a> =  0;
00823     plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o2">iTop</a> =  0;
00824     plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o6">cMac</a> =  0;
00825     plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o7">cMax</a> =  0;
00826     plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o56">xOrigin</a> =  0;
00827     plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o51">iLastSelection</a> =  0;
00828     plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o3">iSel</a> = -1;
00829 
00830     <a class="code" href="../../d6/d0/usercli_8h.html#a706">xxxLBShowHideScrollBars</a>(plb);
00831     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00832 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a689" doxytag="usercli.h::xxxLBSelRange" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID xxxLBSelRange           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d7/d0/lb1_8c-source.html#l00032">ListBoxWndProcWorker()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a695" doxytag="usercli.h::xxxLBSetCaret" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void xxxLBSetCaret           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>plb</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fSetCaret</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00430">430</a> of file <a class="el" href="../../d0/d1/lboxctl2_8c-source.html">lboxctl2.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d4/d8/clrect_8c-source.html#l00026">DrawFocusRect()</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01976">tagLBIV::fCaret</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01978">tagLBIV::fCaretOn</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02046">tagLBIV::hdc</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01744">HILITEONLY</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01943">tagLBIV::iSelBase</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00779">IsLBoxVisible</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00480">IsSelected()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00126">LBGetDC()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00179">LBGetItemRect()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00160">LBReleaseDC()</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01964">tagLBIV::OwnerDraw</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01940">tagLBIV::spwnd</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00204">SYSRGB</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02523">WEFPUIFOCUSHIDDEN</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02070">WINDOW</a>, and <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l03558">xxxLBoxDrawItem()</a>.
<p>
Referenced by <a class="el" href="../../d7/d0/lb1_8c-source.html#l00032">ListBoxWndProcWorker()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l03754">xxxAlterHilite()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l03411">xxxCaretDestroy()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01111">xxxInvertLBItem()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02139">xxxLBoxCaretBlinker()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00691">xxxLBoxCtlHScroll()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02183">xxxLBoxCtlKeyInput()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00561">xxxLBoxCtlScroll()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00798">xxxLBPaint()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l03259">xxxLBSetCurSel()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l03172">xxxLBSetRedraw()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l03455">xxxLBSetSel()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02012">xxxNewITopEx()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01181">xxxResetWorld()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01265">xxxSetISelBase()</a>, and <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01290">xxxTrackMouse()</a>.
<p>
<pre class="fragment"><div>00431 {
00432     RECT    rc;
00433     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>    fNewDC;
00434 
00435     <span class="keywordflow">if</span> (plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o26">fCaret</a> &amp;&amp; ((<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>) plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o28">fCaretOn</a> != !!fSetCaret)) {
00436         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a108">IsLBoxVisible</a>(plb)) {
00437             <span class="comment">/* Turn the caret (located at plb-&gt;iSelBase) on */</span>
00438             fNewDC = <a class="code" href="../../d9/d1/lboxctl2_8c.html#a7">LBGetDC</a>(plb);
00439 
00440             <a class="code" href="../../d6/d0/usercli_8h.html#a744">LBGetItemRect</a>(plb, plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o4">iSelBase</a>, &amp;rc);
00441 
00442             <span class="keywordflow">if</span> (fNewDC) {
00443                 SetBkColor(plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o59">hdc</a>, <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a20">SYSRGB</a>(WINDOW));
00444                 SetTextColor(plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o59">hdc</a>, <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a20">SYSRGB</a>(WINDOWTEXT));
00445             }
00446 
00447             <span class="keywordflow">if</span> (plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o18">OwnerDraw</a>) {
00448                 <span class="comment">/* Fill in the drawitem struct */</span>
00449                 <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> itemState = (fSetCaret) ? ODS_FOCUS : 0;
00450 
00451                 <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a687">IsSelected</a>(plb, plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o4">iSelBase</a>, HILITEONLY))
00452                     itemState |= ODS_SELECTED;
00453 
00454                 <a class="code" href="../../d6/d0/usercli_8h.html#a701">xxxLBoxDrawItem</a>(plb, plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o4">iSelBase</a>, ODA_FOCUS, itemState, &amp;rc);
00455             } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o1">spwnd</a>, WEFPUIFOCUSHIDDEN)) {
00456                 COLORREF crBk = SetBkColor(plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o59">hdc</a>, <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a20">SYSRGB</a>(WINDOW));
00457                 COLORREF crText = SetTextColor(plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o59">hdc</a>, <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a20">SYSRGB</a>(WINDOWTEXT));
00458 
00459                 <a class="code" href="../../d3/d9/clrect_8c.html#a0">DrawFocusRect</a>(plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o59">hdc</a>, &amp;rc);
00460 
00461                 SetBkColor(plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o59">hdc</a>, crBk);
00462                 SetTextColor(plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o59">hdc</a>, crText);
00463             }
00464 
00465             <span class="keywordflow">if</span> (fNewDC)
00466                 <a class="code" href="../../d9/d1/lboxctl2_8c.html#a8">LBReleaseDC</a>(plb);
00467         }
00468         plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o28">fCaretOn</a> = !!fSetCaret;
00469     }
00470 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a747" doxytag="usercli.h::xxxLBSetCount" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a> xxxLBSetCount           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l01107">1107</a> of file <a class="el" href="../../d9/d0/lboxctl1_8c-source.html">lboxctl1.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00785">CITEMSALLOC</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01948">tagLBIV::cMac</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01949">tagLBIV::cMax</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01984">tagLBIV::fHasData</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01980">tagLBIV::fHasStrings</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01965">tagLBIV::fRedraw</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02029">tagLBIV::iLastSelection</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00025">INT</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01942">tagLBIV::iSel</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01943">tagLBIV::iSelBase</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01941">tagLBIV::iTop</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l01220">LBCalcAllocNeeded()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01951">tagLBIV::rgpch</a>, <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00270">SendMessageWorker()</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01940">tagLBIV::spwnd</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00958">UserLocalAlloc</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00959">UserLocalReAlloc</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02042">tagLBIV::xOrigin</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00038">xxxLBInvalidateRect()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l03172">xxxLBSetRedraw()</a>, <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l00125">xxxLBShowHideScrollBars()</a>, and <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01244">xxxNotifyOwner()</a>.
<p>
Referenced by <a class="el" href="../../d7/d0/lb1_8c-source.html#l00032">ListBoxWndProcWorker()</a>.
<p>
<pre class="fragment"><div>01110 {
01111     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>  cbRequired;
01112     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>    fRedraw;
01113 
01114     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(plb-&gt;spwnd);
01115 
01116     <span class="comment">/*</span>
01117 <span class="comment">     * SetCount is only valid on lazy-eval ("nodata") listboxes.</span>
01118 <span class="comment">     * All other lboxen must add their items one at a time, although</span>
01119 <span class="comment">     * they may SetCount(0) via RESETCONTENT.</span>
01120 <span class="comment">     */</span>
01121     <span class="keywordflow">if</span> (plb-&gt;fHasStrings || plb-&gt;fHasData) {
01122         RIPERR0(ERROR_SETCOUNT_ON_BAD_LB, RIP_VERBOSE, <span class="stringliteral">""</span>);
01123         <span class="keywordflow">return</span> LB_ERR;
01124     }
01125 
01126     <span class="keywordflow">if</span> (cItems == 0) {
01127         <a class="code" href="../../d6/d0/usercli_8h.html#a600">SendMessageWorker</a>(plb-&gt;spwnd, LB_RESETCONTENT, 0, 0, FALSE);
01128         <span class="keywordflow">return</span> 0;
01129     }
01130 
01131     <span class="comment">// If redraw isn't turned off, turn it off now</span>
01132     <span class="keywordflow">if</span> (fRedraw = plb-&gt;fRedraw)
01133         <a class="code" href="../../d6/d0/usercli_8h.html#a738">xxxLBSetRedraw</a>(plb, FALSE);
01134 
01135     cbRequired = <a class="code" href="../../d6/d0/usercli_8h.html#a748">LBCalcAllocNeeded</a>(plb, cItems);
01136 
01137     <span class="comment">/*</span>
01138 <span class="comment">     * Reset selection and position</span>
01139 <span class="comment">     */</span>
01140     plb-&gt;iSelBase = 0;
01141     plb-&gt;iTop = 0;
01142     plb-&gt;cMax = 0;
01143     plb-&gt;xOrigin = 0;
01144     plb-&gt;iLastSelection = 0;
01145     plb-&gt;iSel = -1;
01146 
01147     <span class="keywordflow">if</span> (cbRequired != 0) { <span class="comment">// Only if record instance data required</span>
01148 
01149         <span class="comment">/*</span>
01150 <span class="comment">         * If listbox was previously empty, prepare for the</span>
01151 <span class="comment">         * realloc-based alloc strategy ahead.</span>
01152 <span class="comment">         */</span>
01153         <span class="keywordflow">if</span> (plb-&gt;rgpch == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01154             plb-&gt;rgpch = <a class="code" href="../../d6/d0/usercli_8h.html#a136">UserLocalAlloc</a>(HEAP_ZERO_MEMORY, 0L);
01155             plb-&gt;cMax = 0;
01156 
01157             <span class="keywordflow">if</span> (plb-&gt;rgpch == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01158                 <a class="code" href="../../d6/d0/usercli_8h.html#a732">xxxNotifyOwner</a>(plb, LBN_ERRSPACE);
01159                 <span class="keywordflow">return</span> LB_ERRSPACE;
01160             }
01161         }
01162 
01163         <span class="comment">/*</span>
01164 <span class="comment">         * rgpch might not have enough room for the new record instance</span>
01165 <span class="comment">         * data, so check and realloc as necessary.</span>
01166 <span class="comment">         */</span>
01167         <span class="keywordflow">if</span> (cItems &gt;= plb-&gt;cMax) {
01168             <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a>    cMaxNew;
01169             <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>   cbNew;
01170             HANDLE hmemNew;
01171 
01172             <span class="comment">/*</span>
01173 <span class="comment">             * Since GrowMem presumes a one-item-at-a-time add schema,</span>
01174 <span class="comment">             * SetCount can't use it.  Too bad.</span>
01175 <span class="comment">             */</span>
01176             cMaxNew = cItems+<a class="code" href="../../d6/d0/usercli_8h.html#a109">CITEMSALLOC</a>;
01177             cbNew = <a class="code" href="../../d6/d0/usercli_8h.html#a748">LBCalcAllocNeeded</a>(plb, cMaxNew);
01178             hmemNew = <a class="code" href="../../d6/d0/usercli_8h.html#a137">UserLocalReAlloc</a>(plb-&gt;rgpch, cbNew, HEAP_ZERO_MEMORY);
01179 
01180             <span class="keywordflow">if</span> (hmemNew == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01181                 <a class="code" href="../../d6/d0/usercli_8h.html#a732">xxxNotifyOwner</a>(plb, LBN_ERRSPACE);
01182                 <span class="keywordflow">return</span> LB_ERRSPACE;
01183             }
01184 
01185             plb-&gt;rgpch = hmemNew;
01186             plb-&gt;cMax = cMaxNew;
01187         }
01188 
01189         <span class="comment">/*</span>
01190 <span class="comment">         * Reset the item instance data (multisel annotations)</span>
01191 <span class="comment">         */</span>
01192         RtlZeroMemory(plb-&gt;rgpch, cbRequired);
01193     }
01194 
01195     plb-&gt;cMac = cItems;
01196 
01197     <span class="comment">// Turn redraw back on</span>
01198     <span class="keywordflow">if</span> (fRedraw)
01199         <a class="code" href="../../d6/d0/usercli_8h.html#a738">xxxLBSetRedraw</a>(plb, TRUE);
01200 
01201     <a class="code" href="../../d6/d0/usercli_8h.html#a711">xxxLBInvalidateRect</a>(plb, NULL, TRUE);
01202 <span class="comment">// Not In Chicago -- FritzS</span>
01203 <span class="comment">//    NtUserSetScrollPos(plb-&gt;spwnd, SB_HORZ, 0, plb-&gt;fRedraw);</span>
01204 <span class="comment">//    NtUserSetScrollPos(plb-&gt;spwnd, SB_VERT, 0, plb-&gt;fRedraw);</span>
01205     <a class="code" href="../../d6/d0/usercli_8h.html#a706">xxxLBShowHideScrollBars</a>(plb); <span class="comment">// takes care of fRedraw</span>
01206 
01207     <span class="keywordflow">return</span> 0;
01208 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a690" doxytag="usercli.h::xxxLBSetCurSel" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a> xxxLBSetCurSel           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d7/d0/lb1_8c-source.html#l00032">ListBoxWndProcWorker()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a723" doxytag="usercli.h::xxxLBSetFont" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID xxxLBSetFont           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HANDLE&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00438">438</a> of file <a class="el" href="../../d3/d1/lboxrare_8c-source.html">lboxrare.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01956">tagLBIV::cxChar</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01957">tagLBIV::cyChar</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01995">tagLBIV::fMultiColumn</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01996">tagLBIV::fNoIntegralHeight</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00051">gpsi</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02041">tagLBIV::hFont</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01515">HWq</a>, <a class="el" href="../../d2/d1/lboxmult_8c-source.html#l00025">LBCalcItemRowsAndColumns()</a>, <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00025">LBSetCItemFullMax()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06624">NtUserGetDC()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01556">NtUserReleaseDC</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01964">tagLBIV::OwnerDraw</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02045">tagLBIV::pcbox</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01839">tagWND::rcClient</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01940">tagLBIV::spwnd</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02319">WFWIN40COMPAT</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l03387">xxxCheckRedraw()</a>, and <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00514">xxxLBSize()</a>.
<p>
Referenced by <a class="el" href="../../d7/d0/lb1_8c-source.html#l00032">ListBoxWndProcWorker()</a>.
<p>
<pre class="fragment"><div>00442 {
00443     HDC     hdc;
00444     HANDLE  hOldFont = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00445     <span class="keywordtype">int</span>     iHeight;
00446 
00447     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(plb-&gt;spwnd);
00448 
00449     plb-&gt;hFont = hFont;
00450 
00451     hdc = <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a250">NtUserGetDC</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(plb-&gt;spwnd));
00452 
00453     <span class="keywordflow">if</span> (hFont) {
00454         hOldFont = SelectObject(hdc, hFont);
00455         <span class="keywordflow">if</span> (!hOldFont) {
00456             plb-&gt;hFont = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00457         }
00458     }
00459 
00460     plb-&gt;cxChar = GdiGetCharDimensions(hdc, NULL, &amp;iHeight);
00461     <span class="keywordflow">if</span> (plb-&gt;cxChar == 0) {
00462         RIPMSG0(RIP_WARNING, <span class="stringliteral">"xxxLBSetFont: GdiGetCharDimensions failed"</span>);
00463         plb-&gt;cxChar = <a class="code" href="../../d1/d8/clglobal_8c.html#a4">gpsi</a>-&gt;cxSysFontChar;
00464         iHeight = <a class="code" href="../../d1/d8/clglobal_8c.html#a4">gpsi</a>-&gt;cySysFontChar;
00465     }
00466 
00467 
00468     <span class="keywordflow">if</span> (!plb-&gt;OwnerDraw &amp;&amp; (plb-&gt;cyChar != iHeight)) {
00469 
00470         <span class="comment">/*</span>
00471 <span class="comment">         * We don't want to mess up the cyChar height for owner draw listboxes</span>
00472 <span class="comment">         * so don't do this.</span>
00473 <span class="comment">         */</span>
00474         plb-&gt;cyChar = iHeight;
00475 
00476         <span class="comment">/*</span>
00477 <span class="comment">         * Only resize the listbox for 4.0 dudes, or combo dropdowns.</span>
00478 <span class="comment">         * Macromedia Director 4.0 GP-faults otherwise.</span>
00479 <span class="comment">         */</span>
00480         <span class="keywordflow">if</span> (!plb-&gt;fNoIntegralHeight &amp;&amp;
00481                 (plb-&gt;pcbox || <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(plb-&gt;spwnd, WFWIN40COMPAT))) {
00482             <a class="code" href="../../d6/d0/usercli_8h.html#a726">xxxLBSize</a>(plb,
00483                 plb-&gt;spwnd-&gt;rcClient.right  - plb-&gt;spwnd-&gt;rcClient.left,
00484                 plb-&gt;spwnd-&gt;rcClient.bottom - plb-&gt;spwnd-&gt;rcClient.top);
00485         }
00486     }
00487 
00488     <span class="keywordflow">if</span> (hOldFont) {
00489         SelectObject(hdc, hOldFont);
00490     }
00491 
00492     <span class="comment">/*</span>
00493 <span class="comment">     * IanJa: was ReleaseDC(hwnd, hdc);</span>
00494 <span class="comment">     */</span>
00495     <a class="code" href="../../d6/d0/usercli_8h.html#a211">NtUserReleaseDC</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(plb-&gt;spwnd), hdc);
00496 
00497     <span class="keywordflow">if</span> (plb-&gt;fMultiColumn) {
00498         <a class="code" href="../../d6/d0/usercli_8h.html#a743">LBCalcItemRowsAndColumns</a>(plb);
00499     }
00500 
00501     <a class="code" href="../../d6/d0/usercli_8h.html#a688">LBSetCItemFullMax</a>(plb);
00502 
00503     <span class="keywordflow">if</span> (fRedraw)
00504         <a class="code" href="../../d6/d0/usercli_8h.html#a714">xxxCheckRedraw</a>(plb, FALSE, 0);
00505 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a738" doxytag="usercli.h::xxxLBSetRedraw" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID xxxLBSetRedraw           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>plb</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fRedraw</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l03172">3172</a> of file <a class="el" href="../../d0/d1/lboxctl2_8c-source.html">lboxctl2.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01966">tagLBIV::fDeferUpdate</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01965">tagLBIV::fRedraw</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01515">HWq</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01585">RedrawWindow</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01940">tagLBIV::spwnd</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00430">xxxLBSetCaret()</a>, and <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l00125">xxxLBShowHideScrollBars()</a>.
<p>
Referenced by <a class="el" href="../../d7/d0/lb1_8c-source.html#l00032">ListBoxWndProcWorker()</a>, and <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l01107">xxxLBSetCount()</a>.
<p>
<pre class="fragment"><div>03175 {
03176     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o1">spwnd</a>);
03177 
03178     <span class="keywordflow">if</span> (fRedraw)
03179         fRedraw = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
03180 
03181     <span class="keywordflow">if</span> (plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o19">fRedraw</a> != (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)fRedraw) {
03182         plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o19">fRedraw</a> = !!fRedraw;
03183 
03184         <span class="keywordflow">if</span> (fRedraw) {
03185             <a class="code" href="../../d6/d0/usercli_8h.html#a695">xxxLBSetCaret</a>(plb, TRUE);
03186             <a class="code" href="../../d6/d0/usercli_8h.html#a706">xxxLBShowHideScrollBars</a>(plb);
03187 
03188             <span class="keywordflow">if</span> (plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o20">fDeferUpdate</a>) {
03189                 plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o20">fDeferUpdate</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
03190                 <a class="code" href="../../d6/d0/usercli_8h.html#a239">RedrawWindow</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o1">spwnd</a>), NULL, NULL,
03191                         RDW_INVALIDATE | RDW_ERASE |
03192                         RDW_FRAME | RDW_ALLCHILDREN);
03193             }
03194         }
03195     }
03196 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a692" doxytag="usercli.h::xxxLBSetSel" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LONG xxxLBSetSel           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l03455">3455</a> of file <a class="el" href="../../d0/d1/lboxctl2_8c-source.html">lboxctl2.c</a>.
<p>
References <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00860">_IsWindowVisible()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01948">tagLBIV::cMac</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01976">tagLBIV::fCaret</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01978">tagLBIV::fCaretOn</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01265">FWINABLE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01746">HILITEANDSEL</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02036">tagLBIV::iLastMouseMove</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02032">tagLBIV::iMouseDown</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00025">INT</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01942">tagLBIV::iSel</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01943">tagLBIV::iSelBase</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00480">IsSelected()</a>, <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00820">LBEvent()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00179">LBGetItemRect()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01745">SELONLY</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01028">SetSelected()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00793">SINGLESEL</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01940">tagLBIV::spwnd</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01967">tagLBIV::wMultiple</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02092">xxxInsureVisible()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00038">xxxLBInvalidateRect()</a>, and <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00430">xxxLBSetCaret()</a>.
<p>
Referenced by <a class="el" href="../../d7/d0/lb1_8c-source.html#l00032">ListBoxWndProcWorker()</a>.
<p>
<pre class="fragment"><div>03459 {
03460     <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a> sItem;
03461     RECT rc;
03462     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> uEvent = 0;
03463 
03464     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(plb-&gt;spwnd);
03465 
03466     <span class="comment">/*</span>
03467 <span class="comment">    * Bug 17656. WinZip's accelerator key for 'DeSelect All' sends a LB_SETSEL</span>
03468 <span class="comment">    * message with lparam = 0x0000ffff instead of 0xffffffff(-1). If iSel</span>
03469 <span class="comment">    * is equal to  0x0000ffff and there are less than 0xffff elements in the</span>
03470 <span class="comment">    * list we set iSel equal to 0xffffffff.</span>
03471 <span class="comment">    */</span>
03472     <span class="keywordflow">if</span> ((iSel == (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)0xffff) &amp;&amp; (iSel &gt;= plb-&gt;cMac)) {
03473         iSel = -1;
03474         RIPMSG0(RIP_WARNING, <span class="stringliteral">"Sign extending iSel=0xffff to 0xffffffff"</span>);
03475     }
03476 
03477 
03478     <span class="keywordflow">if</span> ((plb-&gt;wMultiple == <a class="code" href="../../d6/d0/usercli_8h.html#a114">SINGLESEL</a>) || (iSel != -1 &amp;&amp; iSel &gt;= plb-&gt;cMac)) {
03479         RIPERR0(ERROR_INVALID_PARAMETER, RIP_WARNING,
03480                 <span class="stringliteral">"xxxLBSetSel:Invalid iSel or SINGLESEL listbox"</span>);
03481         <span class="keywordflow">return</span> LB_ERR;
03482     }
03483 
03484     <a class="code" href="../../d6/d0/usercli_8h.html#a695">xxxLBSetCaret</a>(plb, FALSE);
03485 
03486     <span class="keywordflow">if</span> (iSel == -1<span class="comment">/*(INT)0xffff*/</span>) {
03487 
03488         <span class="comment">/*</span>
03489 <span class="comment">         * Set/clear selection from all items if -1</span>
03490 <span class="comment">         */</span>
03491         <span class="keywordflow">for</span> (sItem = 0; sItem &lt; plb-&gt;cMac; sItem++) {
03492             <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a687">IsSelected</a>(plb, sItem, SELONLY) != fSelect) {
03493                 <a class="code" href="../../d6/d0/usercli_8h.html#a694">SetSelected</a>(plb, sItem, fSelect, HILITEANDSEL);
03494                 <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a744">LBGetItemRect</a>(plb, sItem, &amp;rc)) {
03495                     <a class="code" href="../../d6/d0/usercli_8h.html#a711">xxxLBInvalidateRect</a>(plb, &amp;rc, FALSE);
03496                 }
03497             }
03498         }
03499         <a class="code" href="../../d6/d0/usercli_8h.html#a695">xxxLBSetCaret</a>(plb, TRUE);
03500         uEvent = EVENT_OBJECT_SELECTIONWITHIN;
03501     } <span class="keywordflow">else</span> {
03502         <span class="keywordflow">if</span> (fSelect) {
03503 
03504             <span class="comment">/*</span>
03505 <span class="comment">             * Check if the item if fully hidden and scroll it into view if it</span>
03506 <span class="comment">             * is.  Note that we don't want to scroll partially visible items</span>
03507 <span class="comment">             * into full view because this breaks the shell...</span>
03508 <span class="comment">             */</span>
03509             <a class="code" href="../../d6/d0/usercli_8h.html#a716">xxxInsureVisible</a>(plb, iSel, TRUE);
03510             plb-&gt;iSelBase = plb-&gt;iSel = iSel;
03511 
03512             plb-&gt;iMouseDown = plb-&gt;iLastMouseMove = iSel;
03513             uEvent = EVENT_OBJECT_FOCUS;
03514         } <span class="keywordflow">else</span> {
03515             uEvent = EVENT_OBJECT_SELECTIONREMOVE;
03516         }
03517         <a class="code" href="../../d6/d0/usercli_8h.html#a694">SetSelected</a>(plb, iSel, fSelect, HILITEANDSEL);
03518 
03519         <span class="comment">/*</span>
03520 <span class="comment">         * Note that we set the caret on bit directly so that we avoid flicker</span>
03521 <span class="comment">         * when drawing this item.  ie.  We turn on the caret, redraw the item and</span>
03522 <span class="comment">         * turn it back on again.</span>
03523 <span class="comment">         */</span>
03524         <span class="keywordflow">if</span> (!fSelect &amp;&amp; plb-&gt;iSelBase != iSel) {
03525             <a class="code" href="../../d6/d0/usercli_8h.html#a695">xxxLBSetCaret</a>(plb, TRUE);
03526         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (plb-&gt;fCaret) {
03527             plb-&gt;fCaretOn = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
03528         }
03529 
03530         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a744">LBGetItemRect</a>(plb, iSel, &amp;rc)) {
03531             <a class="code" href="../../d6/d0/usercli_8h.html#a711">xxxLBInvalidateRect</a>(plb, &amp;rc, FALSE);
03532         }
03533     }
03534 
03535     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a405">FWINABLE</a>() &amp;&amp; <a class="code" href="../../d6/d9/rtl_2wow_8c.html#a17">_IsWindowVisible</a>(plb-&gt;spwnd)) {
03536         <span class="keywordflow">if</span> (uEvent == EVENT_OBJECT_FOCUS) {
03537             <a class="code" href="../../d6/d0/usercli_8h.html#a409">LBEvent</a>(plb, uEvent, plb-&gt;iSelBase);
03538             uEvent = EVENT_OBJECT_SELECTION;
03539         }
03540         <a class="code" href="../../d6/d0/usercli_8h.html#a409">LBEvent</a>(plb, uEvent, iSel);
03541     }
03542 
03543     <span class="keywordflow">return</span> 0;
03544 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a706" doxytag="usercli.h::xxxLBShowHideScrollBars" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID xxxLBShowHideScrollBars           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l00125">125</a> of file <a class="el" href="../../d9/d0/lboxctl1_8c-source.html">lboxctl1.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02012">tagLBIV::fFromInsert</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02009">tagLBIV::fHorzBar</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01995">tagLBIV::fMultiColumn</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01965">tagLBIV::fRedraw</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02011">tagLBIV::fVertBar</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01941">tagLBIV::iTop</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02042">tagLBIV::xOrigin</a>, <a class="el" href="../../d6/d0/usercli_8h.html#a703">xxxLBoxCtlHScroll()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02000">xxxNewITop()</a>, and <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l00026">xxxSetLBScrollParms()</a>.
<p>
Referenced by <a class="el" href="../../d7/d0/lb1_8c-source.html#l00032">ListBoxWndProcWorker()</a>, <a class="el" href="../../d1/d1/lboxctl3_8c-source.html#l00839">xxxLbDir()</a>, <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l00407">xxxLBInsertItem()</a>, <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l00842">xxxLBoxCtlDelete()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00691">xxxLBoxCtlHScroll()</a>, <a class="el" href="../../d2/d1/lboxmult_8c-source.html#l00071">xxxLBoxCtlHScrollMultiColumn()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02183">xxxLBoxCtlKeyInput()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00561">xxxLBoxCtlScroll()</a>, <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l00797">xxxLBResetContent()</a>, <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l01107">xxxLBSetCount()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l03172">xxxLBSetRedraw()</a>, and <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00514">xxxLBSize()</a>.
<p>
<pre class="fragment"><div>00127 {
00128     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fVertDone = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00129     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fHorzDone = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00130 
00131     <span class="comment">// Don't do anything if there are no scrollbars or if parents</span>
00132     <span class="comment">// are invisible.</span>
00133     <span class="keywordflow">if</span> ((!plb-&gt;fHorzBar &amp;&amp; !plb-&gt;fVertBar) || !plb-&gt;fRedraw)
00134         <span class="keywordflow">return</span>;
00135 
00136     <span class="comment">//</span>
00137     <span class="comment">// Adjust iTop if necessary but DO NOT REDRAW PERIOD.  We never did</span>
00138     <span class="comment">// in 3.1.  There's a potential bug:</span>
00139     <span class="comment">//      If someone doesn't have redraw off and inserts an item in the</span>
00140     <span class="comment">// same position as the caret, we'll tell them to draw before they may</span>
00141     <span class="comment">// have called LB_SETITEMDATA for their item.  This is because we turn</span>
00142     <span class="comment">// the caret off &amp; on inside of NewITop(), even if the item isn't</span>
00143     <span class="comment">// changing.</span>
00144     <span class="comment">//      So we just want to reflect the position/scroll changes.</span>
00145     <span class="comment">// CheckRedraw() will _really_ redraw the visual changes later if</span>
00146     <span class="comment">// redraw isn't off.</span>
00147     <span class="comment">//</span>
00148 
00149     <span class="keywordflow">if</span> (!plb-&gt;fFromInsert) {
00150         <a class="code" href="../../d6/d0/usercli_8h.html#a730">xxxNewITop</a>(plb, plb-&gt;iTop);
00151         fVertDone = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00152     }
00153 
00154     <span class="keywordflow">if</span> (!plb-&gt;fMultiColumn) {
00155         <span class="keywordflow">if</span> (!plb-&gt;fFromInsert) {
00156             fHorzDone = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00157             <a class="code" href="../../d6/d0/usercli_8h.html#a703">xxxLBoxCtlHScroll</a>(plb, SB_THUMBPOSITION, plb-&gt;xOrigin);
00158         }
00159 
00160         <span class="keywordflow">if</span> (!fVertDone)
00161             <a class="code" href="../../d6/d0/usercli_8h.html#a739">xxxSetLBScrollParms</a>(plb, SB_VERT);
00162     }
00163     <span class="keywordflow">if</span> (!fHorzDone)
00164         <a class="code" href="../../d6/d0/usercli_8h.html#a739">xxxSetLBScrollParms</a>(plb, SB_HORZ);
00165 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a726" doxytag="usercli.h::xxxLBSize" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID xxxLBSize           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00514">514</a> of file <a class="el" href="../../d3/d1/lboxrare_8c-source.html">lboxrare.c</a>.
<p>
References <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00924">_GetClientRect()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01948">tagLBIV::cMac</a>, <a class="el" href="../../d4/d5/rect_8c-source.html#l00052">CopyInflateRect()</a>, <a class="el" href="../../d2/d0/inctlpan_8c-source.html#l00480">cy</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01957">tagLBIV::cyChar</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01966">tagLBIV::fDeferUpdate</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01995">tagLBIV::fMultiColumn</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01996">tagLBIV::fNoIntegralHeight</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01965">tagLBIV::fRedraw</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02018">tagLBIV::fSized</a>, <a class="el" href="../../d3/d7/rtl_2winmgr_8c-source.html#l00582">GetWindowBorders()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01515">HWq</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01943">tagLBIV::iSelBase</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00779">IsLBoxVisible</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01941">tagLBIV::iTop</a>, <a class="el" href="../../d2/d1/lboxmult_8c-source.html#l00025">LBCalcItemRowsAndColumns()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00179">LBGetItemRect()</a>, <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00025">LBSetCItemFullMax()</a>, <a class="el" href="../../d9/d5/sertl_8c-source.html#l00332">max</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02043">tagLBIV::maxWidth</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05330">NtUserInvalidateRect()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l02180">NtUserSetWindowPos()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01838">tagWND::rcWindow</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01940">tagLBIV::spwnd</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00202">SYSMET</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02407">WFVSCROLL</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02319">WFWIN40COMPAT</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02042">tagLBIV::xOrigin</a>, <a class="el" href="../../d6/d0/usercli_8h.html#a703">xxxLBoxCtlHScroll()</a>, <a class="el" href="../../d6/d0/usercli_8h.html#a705">xxxLBoxCtlScroll()</a>, <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l00125">xxxLBShowHideScrollBars()</a>, and <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02000">xxxNewITop()</a>.
<p>
Referenced by <a class="el" href="../../d7/d0/lb1_8c-source.html#l00032">ListBoxWndProcWorker()</a>, and <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00438">xxxLBSetFont()</a>.
<p>
<pre class="fragment"><div>00518 {
00519     RECT rc;
00520     <span class="keywordtype">int</span> iTopOld;
00521     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fSizedSave;
00522 
00523     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(plb-&gt;spwnd);
00524 
00525     <span class="keywordflow">if</span> (!plb-&gt;fNoIntegralHeight) {
00526         <span class="keywordtype">int</span> cBdrs = <a class="code" href="../../d2/d8/rtl_2winmgr_8c.html#a7">GetWindowBorders</a>(plb-&gt;spwnd-&gt;style, plb-&gt;spwnd-&gt;ExStyle, TRUE, TRUE);
00527 
00528         <a class="code" href="../../d3/d6/rect_8c.html#a2">CopyInflateRect</a>(&amp;rc, &amp;plb-&gt;spwnd-&gt;rcWindow, 0, -cBdrs * <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CYBORDER));
00529 
00530         <span class="comment">// Size the listbox to fit an integral # of items in its client</span>
00531         <span class="keywordflow">if</span> ((rc.bottom - rc.top) % plb-&gt;cyChar) {
00532             <span class="keywordtype">int</span> iItems = (rc.bottom - rc.top);
00533 
00534             <span class="comment">// B#2285 - If its a 3.1 app its SetWindowPos needs</span>
00535             <span class="comment">// to be window based dimensions not Client !</span>
00536             <span class="comment">// this crunches Money into using a scroll bar</span>
00537 
00538             <span class="keywordflow">if</span> ( ! <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>( plb-&gt;spwnd, WFWIN40COMPAT ) )
00539                 iItems += (cBdrs * <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CYEDGE)); <span class="comment">// so add it back in</span>
00540 
00541             iItems /= plb-&gt;cyChar;
00542 
00543             <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a115">NtUserSetWindowPos</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(plb-&gt;spwnd), HWND_TOP, 0, 0, rc.right - rc.left,
00544                     iItems * plb-&gt;cyChar + (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CYEDGE) * cBdrs),
00545                     SWP_NOACTIVATE | SWP_NOMOVE | SWP_NOZORDER);
00546 
00547             <span class="comment">/*</span>
00548 <span class="comment">             * Changing the size causes us to recurse.  Upon return</span>
00549 <span class="comment">             * the state is where it should be and nothing further</span>
00550 <span class="comment">             * needs to be done.</span>
00551 <span class="comment">             */</span>
00552             <span class="keywordflow">return</span>;
00553         }
00554     }
00555 
00556     <span class="keywordflow">if</span> (plb-&gt;fMultiColumn) {
00557 
00558         <span class="comment">/*</span>
00559 <span class="comment">         * Compute the number of DISPLAYABLE rows and columns in the listbox</span>
00560 <span class="comment">         */</span>
00561         <a class="code" href="../../d6/d0/usercli_8h.html#a743">LBCalcItemRowsAndColumns</a>(plb);
00562     } <span class="keywordflow">else</span> {
00563 
00564         <span class="comment">/*</span>
00565 <span class="comment">         * Adjust the current horizontal position to eliminate as much</span>
00566 <span class="comment">         * empty space as possible from the right side of the items.</span>
00567 <span class="comment">         */</span>
00568         <a class="code" href="../../d6/d9/rtl_2wow_8c.html#a19">_GetClientRect</a>(plb-&gt;spwnd, &amp;rc);
00569         <span class="keywordflow">if</span> ((plb-&gt;maxWidth - plb-&gt;xOrigin) &lt; (rc.right - rc.left))
00570             plb-&gt;xOrigin = <a class="code" href="../../d8/d6/sertl_8c.html#a1">max</a>(0, plb-&gt;maxWidth - (rc.right - rc.left));
00571     }
00572 
00573     <a class="code" href="../../d6/d0/usercli_8h.html#a688">LBSetCItemFullMax</a>(plb);
00574 
00575     <span class="comment">/*</span>
00576 <span class="comment">     * Adjust the top item in the listbox to eliminate as much empty space</span>
00577 <span class="comment">     * after the last item as possible</span>
00578 <span class="comment">     * (fix for bugs #8490 &amp; #3836)</span>
00579 <span class="comment">     */</span>
00580     iTopOld = plb-&gt;iTop;
00581     fSizedSave = plb-&gt;fSized;
00582     plb-&gt;fSized = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00583     <a class="code" href="../../d6/d0/usercli_8h.html#a730">xxxNewITop</a>(plb, plb-&gt;iTop);
00584 
00585     <span class="comment">/*</span>
00586 <span class="comment">     * If changing the top item index caused a resize, there is no</span>
00587 <span class="comment">     * more work to be done here.</span>
00588 <span class="comment">     */</span>
00589     <span class="keywordflow">if</span> (plb-&gt;fSized)
00590         <span class="keywordflow">return</span>;
00591     plb-&gt;fSized = fSizedSave;
00592 
00593     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a108">IsLBoxVisible</a>(plb)) {
00594         <span class="comment">/*</span>
00595 <span class="comment">         * This code no longer blows because it's fixed right!!!  We could</span>
00596 <span class="comment">         * optimize the fMultiColumn case with some more code to figure out</span>
00597 <span class="comment">         * if we really need to invalidate the whole thing but note that some</span>
00598 <span class="comment">         * 3.0 apps depend on this extra invalidation (AMIPRO 2.0, bug 14620)</span>
00599 <span class="comment">         *</span>
00600 <span class="comment">         * For 3.1 apps, we blow off the invalidaterect in the case where</span>
00601 <span class="comment">         * cx and cy are 0 because this happens during the processing of</span>
00602 <span class="comment">         * the posted WM_SIZE message when we are created which would otherwise</span>
00603 <span class="comment">         * cause us to flash.</span>
00604 <span class="comment">         */</span>
00605         <span class="keywordflow">if</span> ((plb-&gt;fMultiColumn &amp;&amp; !(cx == 0 &amp;&amp; <a class="code" href="../../d1/d1/inctlpan_8c.html#a3">cy</a> == 0)) ||
00606                 plb-&gt;iTop != iTopOld)
00607             <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a206">NtUserInvalidateRect</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(plb-&gt;spwnd), NULL, TRUE);
00608         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (plb-&gt;iSelBase &gt;= 0) {
00609 
00610             <span class="comment">/*</span>
00611 <span class="comment">             * Invalidate the item with the caret so that if the listbox</span>
00612 <span class="comment">             * grows horizontally, we redraw it properly.</span>
00613 <span class="comment">             */</span>
00614             <a class="code" href="../../d6/d0/usercli_8h.html#a744">LBGetItemRect</a>(plb, plb-&gt;iSelBase, &amp;rc);
00615             <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a206">NtUserInvalidateRect</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(plb-&gt;spwnd), &amp;rc, FALSE);
00616         }
00617     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!plb-&gt;fRedraw)
00618         plb-&gt;fDeferUpdate = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00619 
00620     <span class="comment">/*</span>
00621 <span class="comment">     * Send "fake" scroll bar messages to update the scroll positions since we</span>
00622 <span class="comment">     * changed size.</span>
00623 <span class="comment">     */</span>
00624     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(plb-&gt;spwnd, WFVSCROLL)) {
00625         <a class="code" href="../../d6/d0/usercli_8h.html#a705">xxxLBoxCtlScroll</a>(plb, SB_ENDSCROLL, 0);
00626     }
00627 
00628     <span class="comment">/*</span>
00629 <span class="comment">     * We count on this to call LBShowHideScrollBars except when plb-&gt;cMac == 0!</span>
00630 <span class="comment">     */</span>
00631     <a class="code" href="../../d6/d0/usercli_8h.html#a703">xxxLBoxCtlHScroll</a>(plb, SB_ENDSCROLL, 0);
00632 
00633     <span class="comment">/*</span>
00634 <span class="comment">     * Show/hide scroll bars depending on how much stuff is visible...</span>
00635 <span class="comment">     *</span>
00636 <span class="comment">     * Note:  Now we only call this guy when cMac == 0, because it is</span>
00637 <span class="comment">     * called inside the LBoxCtlHScroll with SB_ENDSCROLL otherwise.</span>
00638 <span class="comment">     */</span>
00639     <span class="keywordflow">if</span> (plb-&gt;cMac == 0)
00640         <a class="code" href="../../d6/d0/usercli_8h.html#a706">xxxLBShowHideScrollBars</a>(plb);
00641 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a730" doxytag="usercli.h::xxxNewITop" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID xxxNewITop           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02000">2000</a> of file <a class="el" href="../../d0/d1/lboxctl2_8c-source.html">lboxctl2.c</a>.
<p>
References <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02012">xxxNewITopEx()</a>.
<p>
Referenced by <a class="el" href="../../d2/d1/lboxmult_8c-source.html#l00025">LBCalcItemRowsAndColumns()</a>, <a class="el" href="../../d7/d0/lb1_8c-source.html#l00032">ListBoxWndProcWorker()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02092">xxxInsureVisible()</a>, <a class="el" href="../../d2/d1/lboxmult_8c-source.html#l00071">xxxLBoxCtlHScrollMultiColumn()</a>, <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l00125">xxxLBShowHideScrollBars()</a>, and <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00514">xxxLBSize()</a>.
<p>
<pre class="fragment"><div>02001 {
02002     <a class="code" href="../../d6/d0/usercli_8h.html#a731">xxxNewITopEx</a>(plb, iTopNew, 0);
02003 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a731" doxytag="usercli.h::xxxNewITopEx" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID xxxNewITopEx           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02012">2012</a> of file <a class="el" href="../../d0/d1/lboxctl2_8c-source.html">lboxctl2.c</a>.
<p>
References <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00924">_GetClientRect()</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l02354">abs</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01944">tagLBIV::cItemFullMax</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01958">tagLBIV::cxColumn</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01957">tagLBIV::cyChar</a>, <a class="el" href="../../d4/d7/propapi_8h-source.html#l00043">dwFlags</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01978">tagLBIV::fCaretOn</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01995">tagLBIV::fMultiColumn</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02023">tagLBIV::fRightAlign</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01515">HWq</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00779">IsLBoxVisible</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01959">tagLBIV::itemsPerColumn</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01941">tagLBIV::iTop</a>, <a class="el" href="../../d4/d1/lboxvar_8c-source.html#l00198">LBCalcVarITopScrollAmt()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00663">LBGetScrollFlags()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01960">tagLBIV::numberOfColumns</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01964">tagLBIV::OwnerDraw</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00437">OWNERDRAWVAR</a>, <a class="el" href="../../d4/d7/winmgrc_8c-source.html#l01473">ScrollWindowEx()</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01940">tagLBIV::spwnd</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l03608">UpdateWindow()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00430">xxxLBSetCaret()</a>, and <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l00026">xxxSetLBScrollParms()</a>.
<p>
Referenced by <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00561">xxxLBoxCtlScroll()</a>, and <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02000">xxxNewITop()</a>.
<p>
<pre class="fragment"><div>02016 {
02017     <span class="keywordtype">int</span>     iTopOld;
02018     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fCaretOn;
02019     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fMulti = plb-&gt;fMultiColumn;
02020 
02021     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(plb-&gt;spwnd);
02022 
02023     <span class="comment">// Always try to turn off caret whether or not redraw is on</span>
02024     <span class="keywordflow">if</span> (fCaretOn = plb-&gt;fCaretOn)
02025         <a class="code" href="../../d6/d0/usercli_8h.html#a695">xxxLBSetCaret</a>(plb, FALSE);
02026 
02027     iTopOld = (fMulti) ? (plb-&gt;iTop / plb-&gt;itemsPerColumn) : plb-&gt;iTop;
02028     plb-&gt;iTop = iTopNew;
02029     iTopNew = <a class="code" href="../../d6/d0/usercli_8h.html#a739">xxxSetLBScrollParms</a>(plb, (fMulti) ? SB_HORZ : SB_VERT);
02030     plb-&gt;iTop = (fMulti) ? (iTopNew * plb-&gt;itemsPerColumn) : iTopNew;
02031 
02032     <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d0/usercli_8h.html#a108">IsLBoxVisible</a>(plb)) {
02033         <span class="keywordflow">return</span>;
02034     }
02035 
02036     <span class="keywordflow">if</span> (iTopNew != iTopOld) {
02037         <span class="keywordtype">int</span>     xAmt, yAmt;
02038         RECT    rc;
02039         <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>   <a class="code" href="../../d3/d8/propapi_8h.html#a34">dwFlags</a>;
02040 
02041         <a class="code" href="../../d6/d9/rtl_2wow_8c.html#a19">_GetClientRect</a>(plb-&gt;spwnd, &amp;rc);
02042 
02043         <span class="keywordflow">if</span> (fMulti) {
02044             yAmt = 0;
02045             <span class="keywordflow">if</span> (<a class="code" href="../../d4/d1/userk_8h.html#a259">abs</a>(iTopNew - iTopOld) &gt; plb-&gt;numberOfColumns)
02046                 <span class="comment">// Handle scrolling a large number of columns properly so that</span>
02047                 <span class="comment">// we don't overflow the size of a rect.</span>
02048                 xAmt = 32000;
02049             <span class="keywordflow">else</span> {
02050                 xAmt = (iTopOld - iTopNew) * plb-&gt;cxColumn;
02051                 <span class="keywordflow">if</span> (plb-&gt;fRightAlign)
02052                     xAmt = -xAmt;
02053             }
02054         } <span class="keywordflow">else</span> {
02055             xAmt = 0;
02056             <span class="keywordflow">if</span> (plb-&gt;OwnerDraw == <a class="code" href="../../d6/d0/usercli_8h.html#a63">OWNERDRAWVAR</a>) {
02057                 <span class="comment">//</span>
02058                 <span class="comment">// Have to fake iTopOld for OWNERDRAWVAR listboxes so that</span>
02059                 <span class="comment">// the scrolling amount calculations work properly.</span>
02060                 <span class="comment">//</span>
02061                 plb-&gt;iTop = iTopOld;
02062                 yAmt = <a class="code" href="../../d6/d0/usercli_8h.html#a702">LBCalcVarITopScrollAmt</a>(plb, iTopOld, iTopNew);
02063                 plb-&gt;iTop = iTopNew;
02064             } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d4/d1/userk_8h.html#a259">abs</a>(iTopNew - iTopOld) &gt; plb-&gt;cItemFullMax)
02065                 yAmt = 32000;
02066             <span class="keywordflow">else</span>
02067                 yAmt = (iTopOld - iTopNew) * plb-&gt;cyChar;
02068         }
02069 
02070         <a class="code" href="../../d3/d8/propapi_8h.html#a34">dwFlags</a> = <a class="code" href="../../d9/d1/lboxctl2_8c.html#a20">LBGetScrollFlags</a>(plb, dwTime);
02071         <a class="code" href="../../d3/d8/winmgrc_8c.html#a38">ScrollWindowEx</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(plb-&gt;spwnd), xAmt, yAmt, NULL, &amp;rc, NULL,
02072                 NULL, dwFlags);
02073         <a class="code" href="../../d3/d8/client_8c.html#a140">UpdateWindow</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(plb-&gt;spwnd));
02074     }
02075 
02076     <span class="comment">// Note that although we turn off the caret regardless of redraw, we</span>
02077     <span class="comment">// only turn it on if redraw is true. Slimy thing to fixup many</span>
02078     <span class="comment">// caret related bugs...</span>
02079     <span class="keywordflow">if</span> (fCaretOn)
02080         <span class="comment">// Turn the caret back on only if we turned it off. This avoids</span>
02081         <span class="comment">// annoying caret flicker.</span>
02082         <a class="code" href="../../d6/d0/usercli_8h.html#a695">xxxLBSetCaret</a>(plb, TRUE);
02083 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a732" doxytag="usercli.h::xxxNotifyOwner" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID xxxNotifyOwner           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01244">1244</a> of file <a class="el" href="../../d0/d1/lboxctl2_8c-source.html">lboxctl2.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01514">HW</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01515">HWq</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00411">PTR_TO_ID</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00652">SendMessage()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01764">tagWND::spmenu</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01940">tagLBIV::spwnd</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01939">tagLBIV::spwndParent</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00362">ThreadLock</a>, and <a class="el" href="../../d7/d9/usercli_8h-source.html#l00366">ThreadUnlock</a>.
<p>
Referenced by <a class="el" href="../../d7/d0/lb1_8c-source.html#l00032">ListBoxWndProcWorker()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01875">xxxLBButtonUp()</a>, <a class="el" href="../../d1/d1/lboxctl3_8c-source.html#l00839">xxxLbDir()</a>, <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l00342">xxxLBInitStorage()</a>, <a class="el" href="../../d1/d1/lboxctl3_8c-source.html#l01036">xxxLbInsertFile()</a>, <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l00407">xxxLBInsertItem()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02183">xxxLBoxCtlKeyInput()</a>, and <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l01107">xxxLBSetCount()</a>.
<p>
<pre class="fragment"><div>01247 {
01248     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpwndParent;
01249 
01250     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(plb-&gt;spwnd);
01251 
01252     <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(plb-&gt;spwndParent, &amp;tlpwndParent);
01253     <a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a450">HW</a>(plb-&gt;spwndParent), WM_COMMAND,
01254             MAKELONG(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a99">PTR_TO_ID</a>(plb-&gt;spwnd-&gt;spmenu), sEvt), (LPARAM)<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(plb-&gt;spwnd));
01255     <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndParent);
01256 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a756" doxytag="usercli.h::xxxRemoveDefaultButton" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID xxxRemoveDefaultButton           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwndDlg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwndStart</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d8/dlgmgr2_8c-source.html#l00031">31</a> of file <a class="el" href="../../d6/d8/dlgmgr2_8c-source.html">dlgmgr2.c</a>.
<p>
References <a class="el" href="../../d7/d8/dlgmgrc_8c-source.html#l00125">_GetChildControl()</a>, <a class="el" href="../../d7/d8/dlgmgrc_8c-source.html#l00207">_NextControl()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01515">HWq</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00652">SendMessage()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00362">ThreadLock</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00366">ThreadUnlock</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02377">WEFCONTROLPARENT</a>.
<p>
Referenced by <a class="el" href="../../d6/d8/dlgmgr2_8c-source.html#l00084">xxxCheckDefPushButton()</a>, and <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l00083">xxxSaveDlgFocus()</a>.
<p>
<pre class="fragment"><div>00034 {
00035     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> code;
00036     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwnd;
00037     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwndDup;
00038     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpwnd;
00039 
00040     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pwndRoot);
00041     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pwndStart);
00042 
00043     <span class="keywordflow">if</span> (!pwndStart || <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwndStart, WEFCONTROLPARENT))
00044         pwndStart = <a class="code" href="../../d6/d0/usercli_8h.html#a639">_NextControl</a>(pwndRoot, NULL, CWP_SKIPINVISIBLE | CWP_SKIPDISABLED);
00045     <span class="keywordflow">else</span>
00046         pwndStart = <a class="code" href="../../d6/d0/usercli_8h.html#a643">_GetChildControl</a>(pwndRoot, pwndStart);
00047 
00048     <span class="keywordflow">if</span> (!pwndStart)
00049         <span class="keywordflow">return</span>;
00050 
00051     pwnd = pwndStart;
00052     <span class="keywordflow">do</span> {
00053         pwndDup = pwnd;
00054         
00055         <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(pwnd, &amp;tlpwnd);
00056 
00057         code = (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)<a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(pwnd), WM_GETDLGCODE, 0, 0L);
00058 
00059         <span class="keywordflow">if</span> (code &amp; DLGC_DEFPUSHBUTTON) {
00060             <a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(pwnd), BM_SETSTYLE, BS_PUSHBUTTON, (LONG)TRUE);
00061         }
00062 
00063         pwnd = <a class="code" href="../../d6/d0/usercli_8h.html#a639">_NextControl</a>(pwndRoot, pwnd, 0);
00064 
00065         <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwnd);
00066 
00067     } <span class="keywordflow">while</span> (pwnd &amp;&amp; (pwnd != pwndStart) &amp;&amp; (pwnd != pwndDup));
00068     
00069 <span class="preprocessor">#if DBG</span>
00070 <span class="preprocessor"></span>    <span class="keywordflow">if</span> (pwnd &amp;&amp; (pwnd != pwndStart) &amp;&amp; (pwnd != pwndDup)) {
00071         RIPMSG0(RIP_WARNING, <span class="stringliteral">"xxxRemoveDefaultButton bailing potential infinite loop!"</span>);
00072     }
00073 <span class="preprocessor">#endif</span>
00074 <span class="preprocessor"></span>    
00075 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a733" doxytag="usercli.h::xxxResetWorld" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID xxxResetWorld           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01181">1181</a> of file <a class="el" href="../../d0/d1/lboxctl2_8c-source.html">lboxctl2.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00526">CItemInWindow()</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01948">tagLBIV::cMac</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01978">tagLBIV::fCaretOn</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01746">HILITEANDSEL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01744">HILITEONLY</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00025">INT</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01942">tagLBIV::iSel</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00480">IsSelected()</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01941">tagLBIV::iTop</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01028">SetSelected()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00793">SINGLESEL</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01940">tagLBIV::spwnd</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01967">tagLBIV::wMultiple</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01111">xxxInvertLBItem()</a>, and <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00430">xxxLBSetCaret()</a>.
<p>
Referenced by <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02183">xxxLBoxCtlKeyInput()</a>, and <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01290">xxxTrackMouse()</a>.
<p>
<pre class="fragment"><div>01186 {
01187     <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a> i;
01188     <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a> iLastInWindow;
01189     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fCaretOn;
01190 
01191     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(plb-&gt;spwnd);
01192 
01193     <span class="comment">/*</span>
01194 <span class="comment">     * If iStart and iEnd are not in correct order we swap them</span>
01195 <span class="comment">     */</span>
01196 
01197     <span class="keywordflow">if</span> (iStart &gt; iEnd) {
01198         i = iStart;
01199         iStart = iEnd;
01200         iEnd = i;
01201     }
01202 
01203     <span class="keywordflow">if</span> (plb-&gt;wMultiple == <a class="code" href="../../d6/d0/usercli_8h.html#a114">SINGLESEL</a>) {
01204         <span class="keywordflow">if</span> (plb-&gt;iSel != -1 &amp;&amp; ((plb-&gt;iSel &lt; iStart) || (plb-&gt;iSel &gt; iEnd))) {
01205             <a class="code" href="../../d6/d0/usercli_8h.html#a717">xxxInvertLBItem</a>(plb, plb-&gt;iSel, fSelect);
01206             plb-&gt;iSel = -1;
01207         }
01208         <span class="keywordflow">return</span>;
01209     }
01210 
01211     iLastInWindow = plb-&gt;iTop + <a class="code" href="../../d6/d0/usercli_8h.html#a713">CItemInWindow</a>(plb, TRUE);
01212 
01213     <span class="keywordflow">if</span> (fCaretOn = plb-&gt;fCaretOn)
01214         <a class="code" href="../../d6/d0/usercli_8h.html#a695">xxxLBSetCaret</a>(plb, FALSE);
01215 
01216     <span class="keywordflow">for</span> (i = 0; i &lt; plb-&gt;cMac; i++) {
01217         <span class="keywordflow">if</span> (i == iStart)
01218             <span class="comment">// skip range to be preserved</span>
01219             i = iEnd;
01220         <span class="keywordflow">else</span> {
01221             <span class="keywordflow">if</span> ((plb-&gt;iTop &lt;= i) &amp;&amp; (i &lt;= iLastInWindow) &amp;&amp;
01222                 (fSelect != <a class="code" href="../../d6/d0/usercli_8h.html#a687">IsSelected</a>(plb, i, HILITEONLY)))
01223                 <span class="comment">// Only invert the item if it is visible and present Selection</span>
01224                 <span class="comment">// state is different from what is required.</span>
01225                 <a class="code" href="../../d6/d0/usercli_8h.html#a717">xxxInvertLBItem</a>(plb, i, fSelect);
01226 
01227             <span class="comment">// Set all items outside of preserved range to unselected</span>
01228             <a class="code" href="../../d6/d0/usercli_8h.html#a694">SetSelected</a>(plb, i, fSelect, HILITEANDSEL);
01229         }
01230     }
01231 
01232     <span class="keywordflow">if</span> (fCaretOn)
01233         <a class="code" href="../../d6/d0/usercli_8h.html#a695">xxxLBSetCaret</a>(plb, TRUE);
01234 
01235 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a693" doxytag="usercli.h::xxxSetISelBase" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID xxxSetISelBase           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01265">1265</a> of file <a class="el" href="../../d0/d1/lboxctl2_8c-source.html">lboxctl2.c</a>.
<p>
References <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00860">_IsWindowVisible()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01265">FWINABLE</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01943">tagLBIV::iSelBase</a>, <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00820">LBEvent()</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01940">tagLBIV::spwnd</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02092">xxxInsureVisible()</a>, and <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00430">xxxLBSetCaret()</a>.
<p>
Referenced by <a class="el" href="../../d7/d0/lb1_8c-source.html#l00032">ListBoxWndProcWorker()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02183">xxxLBoxCtlKeyInput()</a>, and <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01290">xxxTrackMouse()</a>.
<p>
<pre class="fragment"><div>01268 {
01269     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(plb-&gt;spwnd);
01270 
01271     <a class="code" href="../../d6/d0/usercli_8h.html#a695">xxxLBSetCaret</a>(plb, FALSE);
01272     plb-&gt;iSelBase = sItem;
01273     <a class="code" href="../../d6/d0/usercli_8h.html#a695">xxxLBSetCaret</a>(plb, TRUE);
01274 
01275     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a405">FWINABLE</a>()) {
01276         <a class="code" href="../../d6/d0/usercli_8h.html#a716">xxxInsureVisible</a>(plb, plb-&gt;iSelBase, FALSE);
01277         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d9/rtl_2wow_8c.html#a17">_IsWindowVisible</a>(plb-&gt;spwnd)) {
01278             <a class="code" href="../../d6/d0/usercli_8h.html#a409">LBEvent</a>(plb, EVENT_OBJECT_FOCUS, sItem);
01279         }
01280     }
01281 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a739" doxytag="usercli.h::xxxSetLBScrollParms" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int xxxSetLBScrollParms           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>plb</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>nCtl</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l00026">26</a> of file <a class="el" href="../../d9/d0/lboxctl1_8c-source.html">lboxctl1.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01944">tagLBIV::cItemFullMax</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01931">_SCROLLPOS::cItems</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01948">tagLBIV::cMac</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02003">tagLBIV::fDisableNoScroll</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02009">tagLBIV::fHorzBar</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02015">tagLBIV::fHorzInitialized</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01934">_SCROLLPOS::fMask</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01995">tagLBIV::fMultiColumn</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01965">tagLBIV::fRedraw</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02023">tagLBIV::fRightAlign</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02011">tagLBIV::fVertBar</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02016">tagLBIV::fVertInitialized</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02050">tagLBIV::HPos</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01515">HWq</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01932">_SCROLLPOS::iPage</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01933">_SCROLLPOS::iPos</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01935">_SCROLLPOS::iReturn</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01959">tagLBIV::itemsPerColumn</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01941">tagLBIV::iTop</a>, <a class="el" href="../../d9/d5/sertl_8c-source.html#l00332">max</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02043">tagLBIV::maxWidth</a>, <a class="el" href="../../d6/d3/acpitabl_8h-source.html#l00366">min</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05986">NtUserSetScrollInfo()</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01960">tagLBIV::numberOfColumns</a>, <a class="el" href="../../d0/d0/client_2nt6_2user_8h.html#a1055">PSCROLLPOS</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01839">tagWND::rcClient</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01940">tagLBIV::spwnd</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02051">tagLBIV::VPos</a>, and <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02042">tagLBIV::xOrigin</a>.
<p>
Referenced by <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00691">xxxLBoxCtlHScroll()</a>, <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l00125">xxxLBShowHideScrollBars()</a>, and <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02012">xxxNewITopEx()</a>.
<p>
<pre class="fragment"><div>00027 {
00028     <span class="keywordtype">int</span>         iPos;
00029     <span class="keywordtype">int</span>         cItems;
00030     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>        iPage;
00031     SCROLLINFO  si;
00032     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>        fNoScroll = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00033     <a class="code" href="../../d0/d9/struct__SCROLLPOS.html">PSCROLLPOS</a>  psp;
00034     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>        fCacheInitialized;
00035     <span class="keywordtype">int</span>         iReturn;
00036 
00037     <span class="keywordflow">if</span> (nCtl == SB_VERT) {
00038         iPos = plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o2">iTop</a>;
00039         cItems = plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o6">cMac</a>;
00040         iPage = plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o5">cItemFullMax</a>;
00041         <span class="keywordflow">if</span> (!plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o39">fVertBar</a>)
00042             fNoScroll = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00043         psp = &amp;plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o64">VPos</a>;
00044         fCacheInitialized = plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o43">fVertInitialized</a>;
00045     } <span class="keywordflow">else</span> {
00046         <span class="keywordflow">if</span> (plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o34">fMultiColumn</a>) {
00047             iPos   = plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o2">iTop</a> / plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o15">itemsPerColumn</a>;
00048             cItems = plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o6">cMac</a> ? ((plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o6">cMac</a> - 1) / plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o15">itemsPerColumn</a>) + 1 : 0;
00049             iPage = plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o16">numberOfColumns</a>;
00050             <span class="keywordflow">if</span> (plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o47">fRightAlign</a> &amp;&amp; cItems)
00051                 iPos = cItems - iPos - 1;
00052         } <span class="keywordflow">else</span> {
00053             iPos = plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o56">xOrigin</a>;
00054             cItems = plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o57">maxWidth</a>;
00055             iPage = plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o1">spwnd</a>-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o7">rcClient</a>.right - plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o1">spwnd</a>-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o7">rcClient</a>.left;
00056         }
00057 
00058         <span class="keywordflow">if</span> (!plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o38">fHorzBar</a>)
00059             fNoScroll = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00060         psp = &amp;plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o63">HPos</a>;
00061         fCacheInitialized = plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o42">fHorzInitialized</a>;
00062     }
00063 
00064     <span class="keywordflow">if</span> (cItems)
00065         cItems--;
00066 
00067     <span class="keywordflow">if</span> (fNoScroll) {
00068         <span class="comment">// Limit page to 0, posMax + 1</span>
00069         iPage = <a class="code" href="../../d8/d6/sertl_8c.html#a1">max</a>(<a class="code" href="../../d5/d4/acpitabl_8h.html#a69">min</a>((<span class="keywordtype">int</span>)iPage, cItems + 1), 0);
00070 
00071         <span class="comment">// Limit pos to 0, posMax - (page - 1).</span>
00072         <span class="keywordflow">return</span>(<a class="code" href="../../d8/d6/sertl_8c.html#a1">max</a>(<a class="code" href="../../d5/d4/acpitabl_8h.html#a69">min</a>(iPos, cItems - ((iPage) ? (<span class="keywordtype">int</span>)(iPage - 1) : 0)), 0));
00073     } <span class="keywordflow">else</span> {
00074         si.fMask    = SIF_ALL;
00075         <span class="keywordflow">if</span> (plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o37">fDisableNoScroll</a>)
00076             si.fMask |= SIF_DISABLENOSCROLL;
00077 
00078         <span class="comment">/*</span>
00079 <span class="comment">         * If the scrollbar is already where we want it, do nothing.</span>
00080 <span class="comment">         */</span>
00081         <span class="keywordflow">if</span> (fCacheInitialized) {
00082             <span class="keywordflow">if</span> (psp-&gt;<a class="code" href="../../d0/d9/struct__SCROLLPOS.html#o3">fMask</a> == si.fMask &amp;&amp;
00083                     psp-&gt;<a class="code" href="../../d0/d9/struct__SCROLLPOS.html#o0">cItems</a> == cItems &amp;&amp; psp-&gt;<a class="code" href="../../d0/d9/struct__SCROLLPOS.html#o1">iPage</a> == iPage &amp;&amp;
00084                     psp-&gt;<a class="code" href="../../d0/d9/struct__SCROLLPOS.html#o2">iPos</a> == iPos)
00085                 <span class="keywordflow">return</span> psp-&gt;<a class="code" href="../../d0/d9/struct__SCROLLPOS.html#o4">iReturn</a>;
00086         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (nCtl == SB_VERT) {
00087             plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o43">fVertInitialized</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00088         } <span class="keywordflow">else</span> {
00089             plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o42">fHorzInitialized</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00090         }
00091 
00092         si.cbSize   = <span class="keyword">sizeof</span>(SCROLLINFO);
00093         si.nMin     = 0;
00094         si.nMax     = cItems;
00095         si.nPage    = iPage;
00096 
00097         <span class="keywordflow">if</span> (plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o34">fMultiColumn</a> &amp;&amp; plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o47">fRightAlign</a>)
00098             si.nPos =  (iPos+1) &gt; (<span class="keywordtype">int</span>)iPage ? iPos - iPage + 1 : 0;
00099         <span class="keywordflow">else</span>
00100             si.nPos = iPos;
00101 
00102         iReturn = <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a228">NtUserSetScrollInfo</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o1">spwnd</a>), nCtl, &amp;si, plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o19">fRedraw</a>);
00103         <span class="keywordflow">if</span> (plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o34">fMultiColumn</a> &amp;&amp; plb-&gt;<a class="code" href="../../d7/d9/structtagLBIV.html#o47">fRightAlign</a>)
00104             iReturn = cItems - (iReturn + iPage - 1);
00105 
00106         <span class="comment">/*</span>
00107 <span class="comment">         * Update the position cache</span>
00108 <span class="comment">         */</span>
00109         psp-&gt;<a class="code" href="../../d0/d9/struct__SCROLLPOS.html#o3">fMask</a> = si.fMask;
00110         psp-&gt;<a class="code" href="../../d0/d9/struct__SCROLLPOS.html#o0">cItems</a> = cItems;
00111         psp-&gt;<a class="code" href="../../d0/d9/struct__SCROLLPOS.html#o1">iPage</a> = iPage;
00112         psp-&gt;<a class="code" href="../../d0/d9/struct__SCROLLPOS.html#o2">iPos</a> = iPos;
00113         psp-&gt;<a class="code" href="../../d0/d9/struct__SCROLLPOS.html#o4">iReturn</a> = iReturn;
00114 
00115         <span class="keywordflow">return</span> iReturn;
00116     }
00117 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a734" doxytag="usercli.h::xxxTrackMouse" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID xxxTrackMouse           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d9/structtagLBIV.html">PLBIV</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>POINT&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01290">1290</a> of file <a class="el" href="../../d0/d1/lboxctl2_8c-source.html">lboxctl2.c</a>.
<p>
References <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00893">_ClientToScreen()</a>, <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00924">_GetClientRect()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01948">tagLBIV::cMac</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00019">CTLDOWN</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00795">EXTENDEDSEL</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01979">tagLBIV::fAddSelMode</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01975">tagLBIV::fCaptured</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01976">tagLBIV::fCaret</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01977">tagLBIV::fDoubleClick</a>, <a class="el" href="../../d3/d7/rtl_2winmgr_8c-source.html#l00019">FindNCHit()</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01974">tagLBIV::fMouseDown</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01995">tagLBIV::fMultiColumn</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01990">tagLBIV::fNewItemState</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02023">tagLBIV::fRightAlign</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01265">FWINABLE</a>, <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00506">GetKeyState()</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00051">gpsi</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01748">HILITE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01746">HILITEANDSEL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01744">HILITEONLY</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01514">HW</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01515">HWq</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00312">IDSYS_CARET</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00310">IDSYS_SCROLL</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02036">tagLBIV::iLastMouseMove</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02029">tagLBIV::iLastSelection</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02032">tagLBIV::iMouseDown</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00025">INT</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01942">tagLBIV::iSel</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01943">tagLBIV::iSelBase</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00920">ISelFromPt()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00480">IsSelected()</a>, <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00820">LBEvent()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00813">LBUP_NOTIFY</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00811">LBUP_RELEASECAPTURE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00812">LBUP_RESETSELECTION</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00814">LBUP_SUCCESS</a>, <a class="el" href="../../d9/d5/sertl_8c-source.html#l00332">max</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00794">MULTIPLESEL</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00017">NOMODIFIER</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04510">NtUserCallNoParam()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l08535">NtUserDragDetect()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05388">NtUserKillTimer()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01570">NtUserReleaseCapture</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05822">NtUserSetCapture()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05902">NtUserSetFocus()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06092">NtUserSetTimer()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02045">tagLBIV::pcbox</a>, <a class="el" href="../../d4/d5/rect_8c-source.html#l00118">PtInRect()</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01961">tagLBIV::ptPrev</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01839">tagWND::rcClient</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01838">tagWND::rcWindow</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00652">SendMessage()</a>, <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00270">SendMessageWorker()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01028">SetSelected()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00020">SHCTLDOWN</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00018">SHIFTDOWN</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00793">SINGLESEL</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01940">tagLBIV::spwnd</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01791">tagCBox::spwndEdit</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01939">tagLBIV::spwndParent</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00362">ThreadLock</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00366">ThreadUnlock</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02358">WEFDRAGOBJECT</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01967">tagLBIV::wMultiple</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02042">tagLBIV::xOrigin</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l03754">xxxAlterHilite()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l01719">xxxCBHideListBoxWindow()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01111">xxxInvertLBItem()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l03651">xxxLBBlockHilite()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01875">xxxLBButtonUp()</a>, <a class="el" href="../../d2/d1/lboxmult_8c-source.html#l00071">xxxLBoxCtlHScrollMultiColumn()</a>, <a class="el" href="../../d6/d0/usercli_8h.html#a705">xxxLBoxCtlScroll()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00430">xxxLBSetCaret()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01181">xxxResetWorld()</a>, and <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01265">xxxSetISelBase()</a>.
<p>
Referenced by <a class="el" href="../../d7/d0/lb1_8c-source.html#l00032">ListBoxWndProcWorker()</a>.
<p>
<pre class="fragment"><div>01294 {
01295     <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a> iSelFromPt;
01296     <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a> iSelTemp;
01297     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> mousetemp;
01298     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fMouseInRect;
01299     RECT rcClient;
01300     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> wModifiers = 0;
01301     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fSelected;
01302     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> uEvent = 0;
01303     <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a> trackPtRetn;
01304     HWND hwnd = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(plb-&gt;spwnd);
01305     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpwndEdit;
01306     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpwndParent;
01307 
01308     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(plb-&gt;spwnd);
01309 
01310     <span class="comment">/*</span>
01311 <span class="comment">     * Optimization:  do nothing if mouse not captured</span>
01312 <span class="comment">     */</span>
01313     <span class="keywordflow">if</span> ((wMsg != WM_LBUTTONDOWN) &amp;&amp; (wMsg != WM_LBUTTONDBLCLK)) {
01314         <span class="keywordflow">if</span> (!plb-&gt;fCaptured) {
01315             <span class="keywordflow">return</span>;
01316         }
01317         <span class="comment">/*</span>
01318 <span class="comment">         * If we are processing a WM_MOUSEMOVE but the mouse has not moved from</span>
01319 <span class="comment">         * the previous point, then we may be dealing with a mouse "jiggle" sent</span>
01320 <span class="comment">         * from the kernel (see zzzInvalidateDCCache).  If we process this, we will</span>
01321 <span class="comment">         * snap the listbox selection back to where the mouse cursor is pointing,</span>
01322 <span class="comment">         * even if the user has not touched the mouse.  FritzS: NT5 bug 220722.</span>
01323 <span class="comment">         *  Some apps (like MSMoney98) rely on this, so added the bLastRITWasKeyboard</span>
01324 <span class="comment">         * check.  MCostea #244450</span>
01325 <span class="comment">         */</span>
01326         <span class="keywordflow">if</span> ((wMsg == WM_MOUSEMOVE) &amp;&amp; RtlEqualMemory(&amp;pt, &amp;(plb-&gt;ptPrev), <span class="keyword">sizeof</span>(POINT))
01327             &amp;&amp; <a class="code" href="../../d1/d8/clglobal_8c.html#a4">gpsi</a>-&gt;bLastRITWasKeyboard) {
01328                 RIPMSG0(RIP_WARNING, <span class="stringliteral">"xxxTrackMouse ignoring WM_MOUSEMOVE with no mouse movement"</span>);
01329                 <span class="keywordflow">return</span>;
01330         }
01331     }
01332 
01333     mousetemp = <a class="code" href="../../d6/d0/usercli_8h.html#a686">ISelFromPt</a>(plb, pt, &amp;iSelFromPt);
01334 
01335     <span class="comment">/*</span>
01336 <span class="comment">     * If we allow the user to cancel his selection then fMouseInRect is true if</span>
01337 <span class="comment">     * the mouse is in the listbox client area otherwise it is false.  If we</span>
01338 <span class="comment">     * don't allow the user to cancel his selection, then fMouseInRect will</span>
01339 <span class="comment">     * always be true.  This allows us to implement cancelable selection</span>
01340 <span class="comment">     * listboxes ie.  The selection reverts to the origional one if the user</span>
01341 <span class="comment">     * releases the mouse outside of the listbox.</span>
01342 <span class="comment">     */</span>
01343     fMouseInRect = !mousetemp || !plb-&gt;pcbox;
01344 
01345     <a class="code" href="../../d6/d9/rtl_2wow_8c.html#a19">_GetClientRect</a>(plb-&gt;spwnd, &amp;rcClient);
01346 
01347     <span class="keywordflow">switch</span> (wMsg) {
01348     <span class="keywordflow">case</span> WM_LBUTTONDBLCLK:
01349     <span class="keywordflow">case</span> WM_LBUTTONDOWN:
01350         <span class="comment">/*</span>
01351 <span class="comment">         * We want to divert mouse clicks.  If the user clicks outside</span>
01352 <span class="comment">         * of a dropped down listbox, we want to popup it up, using</span>
01353 <span class="comment">         * the current selection.</span>
01354 <span class="comment">         */</span>
01355         <span class="keywordflow">if</span> (plb-&gt;fCaptured) {
01356             <span class="comment">/*</span>
01357 <span class="comment">             * If plb-&gt;pcbox is NULL, this is a listbox that</span>
01358 <span class="comment">             * received a WM_LBUTTONDOWN again w/o receiving</span>
01359 <span class="comment">             * a WM_LBUTTONUP for the previous WM_LBUTTONDOWN</span>
01360 <span class="comment">             * bug</span>
01361 <span class="comment">             */</span>
01362             <span class="keywordflow">if</span> (plb-&gt;pcbox &amp;&amp; mousetemp) {
01363                 <a class="code" href="../../d6/d9/rtl_2wow_8c.html#a18">_ClientToScreen</a>(plb-&gt;spwnd, &amp;pt);
01364 
01365                 <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d6/rect_8c.html#a5">PtInRect</a>(&amp;plb-&gt;spwnd-&gt;rcWindow, pt)) {
01366                     <span class="comment">/*</span>
01367 <span class="comment">                     * Cancel selection if clicked outside of combo;</span>
01368 <span class="comment">                     * Accept if clicked on combo button or item.</span>
01369 <span class="comment">                     */</span>
01370                     <a class="code" href="../../d6/d0/usercli_8h.html#a667">xxxCBHideListBoxWindow</a>(plb-&gt;pcbox, TRUE, FALSE);
01371                 } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d6/rect_8c.html#a5">PtInRect</a>(&amp;plb-&gt;spwnd-&gt;rcClient, pt)) {
01372                     <span class="comment">/*</span>
01373 <span class="comment">                     * Let it pass through.  Save, restore capture in</span>
01374 <span class="comment">                     * case user is clicking on scrollbar.</span>
01375 <span class="comment">                     */</span>
01376                     plb-&gt;fCaptured = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01377                     <a class="code" href="../../d6/d0/usercli_8h.html#a225">NtUserReleaseCapture</a>();
01378 
01379                     <a class="code" href="../../d6/d0/usercli_8h.html#a600">SendMessageWorker</a>(plb-&gt;spwnd, WM_NCLBUTTONDOWN,
01380                         <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a1225">FindNCHit</a>(plb-&gt;spwnd, POINTTOPOINTS(pt)),
01381                         MAKELONG(pt.x, pt.y), FALSE);
01382 
01383                     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a221">NtUserSetCapture</a>(hwnd);
01384                     plb-&gt;fCaptured = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01385                 }
01386 
01387                 <span class="keywordflow">break</span>;
01388             }
01389 
01390             plb-&gt;fCaptured = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01391             <a class="code" href="../../d6/d0/usercli_8h.html#a225">NtUserReleaseCapture</a>();
01392         }
01393 
01394         <span class="keywordflow">if</span> (plb-&gt;pcbox) {
01395 
01396             <span class="comment">/*</span>
01397 <span class="comment">             * If this listbox is in a combo box, set the focus to the combo</span>
01398 <span class="comment">             * box window so that the edit control/static text is also</span>
01399 <span class="comment">             * activated</span>
01400 <span class="comment">             */</span>
01401             <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(plb-&gt;pcbox-&gt;spwndEdit, &amp;tlpwndEdit);
01402             <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a225">NtUserSetFocus</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(plb-&gt;pcbox-&gt;spwndEdit));
01403             <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndEdit);
01404         } <span class="keywordflow">else</span> {
01405 
01406             <span class="comment">/*</span>
01407 <span class="comment">             * Get the focus if the listbox is clicked in and we don't</span>
01408 <span class="comment">             * already have the focus.  If we don't have the focus after</span>
01409 <span class="comment">             * this, run away...</span>
01410 <span class="comment">             */</span>
01411             <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a225">NtUserSetFocus</a>(hwnd);
01412             <span class="keywordflow">if</span> (!plb-&gt;fCaret)
01413                 <span class="keywordflow">return</span>;
01414         }
01415 
01416         <span class="keywordflow">if</span> (plb-&gt;fAddSelMode) {
01417 
01418             <span class="comment">/*</span>
01419 <span class="comment">             * If it is in "Add" mode, quit it using shift f8 key...</span>
01420 <span class="comment">             * However, since we can't send shift key state, we have to turn</span>
01421 <span class="comment">             * this off directly...</span>
01422 <span class="comment">             */</span>
01423 
01424             <span class="comment">/*</span>
01425 <span class="comment">             *SendMessage(HW(plb-&gt;spwnd),WM_KEYDOWN, (UINT)VK_F8, 0L);</span>
01426 <span class="comment">             */</span>
01427 
01428             <span class="comment">/*</span>
01429 <span class="comment">             * Switch off the Caret blinking</span>
01430 <span class="comment">             */</span>
01431             <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a208">NtUserKillTimer</a>(hwnd, IDSYS_CARET);
01432 
01433             <span class="comment">/*</span>
01434 <span class="comment">             * Make sure the caret does not vanish</span>
01435 <span class="comment">             */</span>
01436             <a class="code" href="../../d6/d0/usercli_8h.html#a695">xxxLBSetCaret</a>(plb, TRUE);
01437             plb-&gt;fAddSelMode = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01438         }
01439 
01440         <span class="keywordflow">if</span> (!plb-&gt;cMac) {
01441 
01442             <span class="comment">/*</span>
01443 <span class="comment">             * Don't even bother handling the mouse if no items in the</span>
01444 <span class="comment">             * listbox since the code below assumes &gt;0 items in the</span>
01445 <span class="comment">             * listbox.  We will just get the focus (the statement above) if</span>
01446 <span class="comment">             * we don't already have it.</span>
01447 <span class="comment">             */</span>
01448             <span class="keywordflow">break</span>;
01449         }
01450 
01451         <span class="keywordflow">if</span> (mousetemp) {
01452 
01453             <span class="comment">/*</span>
01454 <span class="comment">             * Mouse down occurred in a empty spot.  Just ignore it.</span>
01455 <span class="comment">             */</span>
01456             <span class="keywordflow">break</span>;
01457         }
01458 
01459         plb-&gt;fDoubleClick = (wMsg == WM_LBUTTONDBLCLK);
01460 
01461         <span class="keywordflow">if</span> (!plb-&gt;fDoubleClick) {
01462 
01463             <span class="comment">/*</span>
01464 <span class="comment">             * This hack put in for the shell.  Tell the shell where in the</span>
01465 <span class="comment">             * listbox the user clicked and at what item number.  The shell</span>
01466 <span class="comment">             * can return 0 to continue normal mouse tracking or TRUE to</span>
01467 <span class="comment">             * abort mouse tracking.</span>
01468 <span class="comment">             */</span>
01469             <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(plb-&gt;spwndParent, &amp;tlpwndParent);
01470             trackPtRetn = (<a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a>)<a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a450">HW</a>(plb-&gt;spwndParent), WM_LBTRACKPOINT,
01471                     (DWORD)iSelFromPt, MAKELONG(pt.x+plb-&gt;xOrigin, pt.y));
01472             <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndParent);
01473             <span class="keywordflow">if</span> (trackPtRetn) {
01474                 <span class="keywordflow">if</span> (trackPtRetn == 2) {
01475 
01476                     <span class="comment">/*</span>
01477 <span class="comment">                     * Ignore double clicks</span>
01478 <span class="comment">                     */</span>
01479                     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a173">NtUserCallNoParam</a>(SFI__RESETDBLCLK);
01480                 }
01481                 <span class="keywordflow">return</span>;
01482             }
01483         }
01484 
01485         <span class="keywordflow">if</span> (plb-&gt;pcbox) {
01486 
01487             <span class="comment">/*</span>
01488 <span class="comment">             * Save the last selection if this is a combo box.  So that it</span>
01489 <span class="comment">             * can be restored if user decides to cancel the selection by up</span>
01490 <span class="comment">             * clicking outside the listbox.</span>
01491 <span class="comment">             */</span>
01492             plb-&gt;iLastSelection = plb-&gt;iSel;
01493         }
01494 
01495         <span class="comment">/*</span>
01496 <span class="comment">         * Save for timer</span>
01497 <span class="comment">         */</span>
01498         plb-&gt;ptPrev = pt;
01499 
01500         plb-&gt;fMouseDown = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01501         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a221">NtUserSetCapture</a>(hwnd);
01502         plb-&gt;fCaptured = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01503 
01504         <span class="keywordflow">if</span> (plb-&gt;fDoubleClick) {
01505 
01506             <span class="comment">/*</span>
01507 <span class="comment">             * Double click.  Fake a button up and exit</span>
01508 <span class="comment">             */</span>
01509             <a class="code" href="../../d6/d0/usercli_8h.html#a734">xxxTrackMouse</a>(plb, WM_LBUTTONUP, pt);
01510             <span class="keywordflow">return</span>;
01511         }
01512 
01513         <span class="comment">/*</span>
01514 <span class="comment">         * Set the system timer so that we can autoscroll if the mouse is</span>
01515 <span class="comment">         * outside the bounds of the listbox rectangle</span>
01516 <span class="comment">         */</span>
01517         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a230">NtUserSetTimer</a>(hwnd, IDSYS_SCROLL, <a class="code" href="../../d1/d8/clglobal_8c.html#a4">gpsi</a>-&gt;dtScroll, NULL);
01518 
01519 
01520 
01521         <span class="comment">/*</span>
01522 <span class="comment">         * If extended multiselection listbox, are any modifier key pressed?</span>
01523 <span class="comment">         */</span>
01524         <span class="keywordflow">if</span> (plb-&gt;wMultiple == <a class="code" href="../../d6/d0/usercli_8h.html#a116">EXTENDEDSEL</a>) {
01525             <span class="keywordflow">if</span> (<a class="code" href="../../d8/d9/client_2ntstubs_8c.html#a16">GetKeyState</a>(VK_SHIFT) &lt; 0)
01526                 wModifiers = <a class="code" href="../../d9/d1/lboxctl2_8c.html#a2">SHIFTDOWN</a>;
01527             <span class="keywordflow">if</span> (<a class="code" href="../../d8/d9/client_2ntstubs_8c.html#a16">GetKeyState</a>(VK_CONTROL) &lt; 0)
01528                 wModifiers += <a class="code" href="../../d9/d1/lboxctl2_8c.html#a3">CTLDOWN</a>;
01529 
01530             <span class="comment">/*</span>
01531 <span class="comment">             * Please Note that (SHIFTDOWN + CTLDOWN) == (SHCTLDOWN)</span>
01532 <span class="comment">             */</span>
01533         }
01534 
01535 
01536         <span class="keywordflow">switch</span> (wModifiers) {
01537         <span class="keywordflow">case</span> <a class="code" href="../../d9/d1/lboxctl2_8c.html#a1">NOMODIFIER</a>:
01538 MouseMoveHandler:
01539             <span class="keywordflow">if</span> (plb-&gt;iSelBase != iSelFromPt) {
01540                 <a class="code" href="../../d6/d0/usercli_8h.html#a695">xxxLBSetCaret</a>(plb, FALSE);
01541             }
01542 
01543             <span class="comment">/*</span>
01544 <span class="comment">             * We only look at the mouse if the point it is pointing to is</span>
01545 <span class="comment">             * not selected.  Since we are not in ExtendedSelMode, anywhere</span>
01546 <span class="comment">             * the mouse points, we have to set the selection to that item.</span>
01547 <span class="comment">             * Hence, if the item isn't selected, it means the mouse never</span>
01548 <span class="comment">             * pointed to it before so we can select it.  We ignore already</span>
01549 <span class="comment">             * selected items so that we avoid flashing the inverted</span>
01550 <span class="comment">             * selection rectangle.  Also, we could get WM_SYSTIMER simulated</span>
01551 <span class="comment">             * mouse moves which would cause flashing otherwise...</span>
01552 <span class="comment">             */</span>
01553 
01554             iSelTemp = (fMouseInRect ? iSelFromPt : -1);
01555 
01556             <span class="comment">/*</span>
01557 <span class="comment">             * If the LB is either SingleSel or Extended multisel, clear all</span>
01558 <span class="comment">             * old selections except the new one being made.</span>
01559 <span class="comment">             */</span>
01560             <span class="keywordflow">if</span> (plb-&gt;wMultiple != <a class="code" href="../../d6/d0/usercli_8h.html#a115">MULTIPLESEL</a>) {
01561                 <a class="code" href="../../d6/d0/usercli_8h.html#a733">xxxResetWorld</a>(plb, iSelTemp, iSelTemp, FALSE);
01562                 <span class="comment">/*</span>
01563 <span class="comment">                 * This will be TRUE if iSelTemp isn't -1 (like below)</span>
01564 <span class="comment">                 * and also if it is but there is a current selection.</span>
01565 <span class="comment">                 */</span>
01566                 <span class="keywordflow">if</span> ((iSelTemp == -1) &amp;&amp; (plb-&gt;iSel != -1)) {
01567                     uEvent = EVENT_OBJECT_SELECTIONREMOVE;
01568                 }
01569             }
01570 
01571             fSelected = <a class="code" href="../../d6/d0/usercli_8h.html#a687">IsSelected</a>(plb, iSelTemp, HILITEONLY);
01572             <span class="keywordflow">if</span> (iSelTemp != -1) {
01573 
01574                 <span class="comment">/*</span>
01575 <span class="comment">                 * If it is MULTIPLESEL, then toggle; For others, only if</span>
01576 <span class="comment">                 * not selected already, select it.</span>
01577 <span class="comment">                 */</span>
01578                 <span class="keywordflow">if</span> (((plb-&gt;wMultiple == <a class="code" href="../../d6/d0/usercli_8h.html#a115">MULTIPLESEL</a>) &amp;&amp; (wMsg != WM_LBUTTONDBLCLK)) || !fSelected) {
01579                     <a class="code" href="../../d6/d0/usercli_8h.html#a694">SetSelected</a>(plb, iSelTemp, !fSelected, HILITEANDSEL);
01580 
01581                     <span class="comment">/*</span>
01582 <span class="comment">                     * And invert it</span>
01583 <span class="comment">                     */</span>
01584                     <a class="code" href="../../d6/d0/usercli_8h.html#a717">xxxInvertLBItem</a>(plb, iSelTemp, !fSelected);
01585                     fSelected = !fSelected;  <span class="comment">/* Set the new state */</span>
01586                     <span class="keywordflow">if</span> (plb-&gt;wMultiple == <a class="code" href="../../d6/d0/usercli_8h.html#a115">MULTIPLESEL</a>) {
01587                         uEvent = (fSelected ? EVENT_OBJECT_SELECTIONADD :
01588                                 EVENT_OBJECT_SELECTIONREMOVE);
01589                     } <span class="keywordflow">else</span> {
01590                         uEvent = EVENT_OBJECT_SELECTION;
01591                     }
01592                 }
01593             }
01594 
01595             <span class="comment">/*</span>
01596 <span class="comment">             * We have to set iSel in case this is a multisel lb.</span>
01597 <span class="comment">             */</span>
01598             plb-&gt;iSel = iSelTemp;
01599 
01600             <span class="comment">/*</span>
01601 <span class="comment">             * Set the new anchor point</span>
01602 <span class="comment">             */</span>
01603             plb-&gt;iMouseDown = iSelFromPt;
01604             plb-&gt;iLastMouseMove = iSelFromPt;
01605             plb-&gt;fNewItemState = fSelected;
01606 
01607             <span class="keywordflow">break</span>;
01608         <span class="keywordflow">case</span> <a class="code" href="../../d9/d1/lboxctl2_8c.html#a2">SHIFTDOWN</a>:
01609 
01610             <span class="comment">/*</span>
01611 <span class="comment">             * This is so that we can handle click and drag for multisel</span>
01612 <span class="comment">             * listboxes using Shift modifier key .</span>
01613 <span class="comment">             */</span>
01614             plb-&gt;iLastMouseMove = plb-&gt;iSel = iSelFromPt;
01615 
01616 
01617 
01618             <span class="comment">/*</span>
01619 <span class="comment">             * Check if an anchor point already exists</span>
01620 <span class="comment">             */</span>
01621             <span class="keywordflow">if</span> (plb-&gt;iMouseDown == -1) {
01622                 plb-&gt;iMouseDown = iSelFromPt;
01623 
01624                 <span class="comment">/*</span>
01625 <span class="comment">                 * Reset all the previous selections</span>
01626 <span class="comment">                 */</span>
01627                 <a class="code" href="../../d6/d0/usercli_8h.html#a733">xxxResetWorld</a>(plb, plb-&gt;iMouseDown, plb-&gt;iMouseDown, FALSE);
01628 
01629                 <span class="comment">/*</span>
01630 <span class="comment">                 * Select the current position</span>
01631 <span class="comment">                 */</span>
01632                 <a class="code" href="../../d6/d0/usercli_8h.html#a694">SetSelected</a>(plb, plb-&gt;iMouseDown, TRUE, HILITEANDSEL);
01633                 <a class="code" href="../../d6/d0/usercli_8h.html#a717">xxxInvertLBItem</a>(plb, plb-&gt;iMouseDown, TRUE);
01634                 <span class="comment">/*</span>
01635 <span class="comment">                 * We are changing the selction to this item only</span>
01636 <span class="comment">                 */</span>
01637                 uEvent = EVENT_OBJECT_SELECTION;
01638             } <span class="keywordflow">else</span> {
01639 
01640                 <span class="comment">/*</span>
01641 <span class="comment">                 * Reset all the previous selections</span>
01642 <span class="comment">                 */</span>
01643                 <a class="code" href="../../d6/d0/usercli_8h.html#a733">xxxResetWorld</a>(plb, plb-&gt;iMouseDown, plb-&gt;iMouseDown, FALSE);
01644 
01645                 <span class="comment">/*</span>
01646 <span class="comment">                 * Select all items from anchor point upto current click pt</span>
01647 <span class="comment">                 */</span>
01648                 <a class="code" href="../../d6/d0/usercli_8h.html#a712">xxxAlterHilite</a>(plb, plb-&gt;iMouseDown, iSelFromPt, HILITE, HILITEONLY, FALSE);
01649                 uEvent = EVENT_OBJECT_SELECTIONWITHIN;
01650             }
01651             plb-&gt;fNewItemState = (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01652             <span class="keywordflow">break</span>;
01653 
01654         <span class="keywordflow">case</span> <a class="code" href="../../d9/d1/lboxctl2_8c.html#a3">CTLDOWN</a>:
01655 
01656             <span class="comment">/*</span>
01657 <span class="comment">             * This is so that we can handle click and drag for multisel</span>
01658 <span class="comment">             * listboxes using Control modifier key.</span>
01659 <span class="comment">             */</span>
01660 
01661             <span class="comment">/*</span>
01662 <span class="comment">             * Reset the anchor point to the current point</span>
01663 <span class="comment">             */</span>
01664             plb-&gt;iMouseDown = plb-&gt;iLastMouseMove = plb-&gt;iSel = iSelFromPt;
01665 
01666             <span class="comment">/*</span>
01667 <span class="comment">             * The state we will be setting items to</span>
01668 <span class="comment">             */</span>
01669             plb-&gt;fNewItemState = (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)!<a class="code" href="../../d6/d0/usercli_8h.html#a687">IsSelected</a>(plb, iSelFromPt, (UINT)HILITEONLY);
01670 
01671             <span class="comment">/*</span>
01672 <span class="comment">             * Toggle the current point</span>
01673 <span class="comment">             */</span>
01674             <a class="code" href="../../d6/d0/usercli_8h.html#a694">SetSelected</a>(plb, iSelFromPt, plb-&gt;fNewItemState, HILITEANDSEL);
01675             <a class="code" href="../../d6/d0/usercli_8h.html#a717">xxxInvertLBItem</a>(plb, iSelFromPt, plb-&gt;fNewItemState);
01676             uEvent = (plb-&gt;fNewItemState ? EVENT_OBJECT_SELECTIONADD :
01677                     EVENT_OBJECT_SELECTIONREMOVE);
01678             <span class="keywordflow">break</span>;
01679 
01680         <span class="keywordflow">case</span> <a class="code" href="../../d9/d1/lboxctl2_8c.html#a4">SHCTLDOWN</a>:
01681 
01682             <span class="comment">/*</span>
01683 <span class="comment">             * This is so that we can handle click and drag for multisel</span>
01684 <span class="comment">             * listboxes using Shift and Control modifier keys.</span>
01685 <span class="comment">             */</span>
01686 
01687             <span class="comment">/*</span>
01688 <span class="comment">             * Preserve all the previous selections</span>
01689 <span class="comment">             */</span>
01690 
01691             <span class="comment">/*</span>
01692 <span class="comment">             * Deselect only the selection connected with the last</span>
01693 <span class="comment">             * anchor point; If the last anchor point is associated with a</span>
01694 <span class="comment">             * de-selection, then do not do it</span>
01695 <span class="comment">             */</span>
01696             <span class="keywordflow">if</span> (plb-&gt;fNewItemState) {
01697                 <a class="code" href="../../d6/d0/usercli_8h.html#a712">xxxAlterHilite</a>(plb, plb-&gt;iMouseDown, plb-&gt;iLastMouseMove, FALSE, HILITEANDSEL, FALSE);
01698             }
01699             plb-&gt;iLastMouseMove = plb-&gt;iSel = iSelFromPt;
01700 
01701             <span class="comment">/*</span>
01702 <span class="comment">             * Check if an anchor point already exists</span>
01703 <span class="comment">             */</span>
01704             <span class="keywordflow">if</span> (plb-&gt;iMouseDown == -1) {
01705 
01706                 <span class="comment">/*</span>
01707 <span class="comment">                 * No existing anchor point; Make the current pt as anchor</span>
01708 <span class="comment">                 */</span>
01709                 plb-&gt;iMouseDown = iSelFromPt;
01710             }
01711 
01712             <span class="comment">/*</span>
01713 <span class="comment">             * If one exists preserve the most recent anchor point</span>
01714 <span class="comment">             */</span>
01715 
01716             <span class="comment">/*</span>
01717 <span class="comment">             * The state we will be setting items to</span>
01718 <span class="comment">             */</span>
01719             plb-&gt;fNewItemState = (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)<a class="code" href="../../d6/d0/usercli_8h.html#a687">IsSelected</a>(plb, plb-&gt;iMouseDown, HILITEONLY);
01720 
01721             <span class="comment">/*</span>
01722 <span class="comment">             * Select all items from anchor point upto current click pt</span>
01723 <span class="comment">             */</span>
01724             <a class="code" href="../../d6/d0/usercli_8h.html#a712">xxxAlterHilite</a>(plb, plb-&gt;iMouseDown, iSelFromPt, plb-&gt;fNewItemState, HILITEONLY, FALSE);
01725             uEvent = EVENT_OBJECT_SELECTIONWITHIN;
01726             <span class="keywordflow">break</span>;
01727         }
01728 
01729         <span class="comment">/*</span>
01730 <span class="comment">         * Set the new base point (the outline frame caret).  We do the check</span>
01731 <span class="comment">         * first to avoid flashing the caret unnecessarly.</span>
01732 <span class="comment">         */</span>
01733         <span class="keywordflow">if</span> (plb-&gt;iSelBase != iSelFromPt) {
01734 
01735             <span class="comment">/*</span>
01736 <span class="comment">             * Since xxxSetISelBase always turns on the caret, we don't need to</span>
01737 <span class="comment">             * do it here...</span>
01738 <span class="comment">             */</span>
01739             <a class="code" href="../../d6/d0/usercli_8h.html#a693">xxxSetISelBase</a>(plb, iSelFromPt);
01740         }
01741 
01742         <span class="comment">/*</span>
01743 <span class="comment">         * SetISelBase will change the focus and send a focus event.</span>
01744 <span class="comment">         * Then we send the selection event.</span>
01745 <span class="comment">         */</span>
01746         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a405">FWINABLE</a>() &amp;&amp; uEvent) {
01747             <a class="code" href="../../d6/d0/usercli_8h.html#a409">LBEvent</a>(plb, uEvent, iSelFromPt);
01748         }
01749         <span class="keywordflow">if</span> (wMsg == WM_LBUTTONDOWN &amp;&amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(plb-&gt;spwnd, WEFDRAGOBJECT)) {
01750             <span class="keywordflow">if</span> (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a298">NtUserDragDetect</a>(hwnd, pt)) {
01751 
01752                 <span class="comment">/*</span>
01753 <span class="comment">                 * User is trying to drag object...</span>
01754 <span class="comment">                 */</span>
01755 
01756                 <span class="comment">/*</span>
01757 <span class="comment">                 *  Fake an up click so that the item is selected...</span>
01758 <span class="comment">                 */</span>
01759                 <a class="code" href="../../d6/d0/usercli_8h.html#a734">xxxTrackMouse</a>(plb, WM_LBUTTONUP, pt);
01760 
01761                 <span class="comment">/*</span>
01762 <span class="comment">                 * Notify parent</span>
01763 <span class="comment">                 * #ifndef WIN16 (32-bit Windows), plb-&gt;iSelBase gets</span>
01764 <span class="comment">                 * zero-extended to LONG wParam automatically by the compiler.</span>
01765 <span class="comment">                 */</span>
01766                 <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(plb-&gt;spwndParent, &amp;tlpwndParent);
01767                 <a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a450">HW</a>(plb-&gt;spwndParent), WM_BEGINDRAG, plb-&gt;iSelBase,
01768                         (LPARAM)hwnd);
01769                 <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndParent);
01770             } <span class="keywordflow">else</span> {
01771                 <a class="code" href="../../d6/d0/usercli_8h.html#a734">xxxTrackMouse</a>(plb, WM_LBUTTONUP, pt);
01772             }
01773             <span class="keywordflow">return</span>;
01774         }
01775         <span class="keywordflow">break</span>;
01776 
01777     <span class="keywordflow">case</span> WM_MOUSEMOVE: {
01778         <span class="keywordtype">int</span> dist;
01779         <span class="keywordtype">int</span> iTimer;
01780 
01781         <span class="comment">/*</span>
01782 <span class="comment">         * Save for timer.</span>
01783 <span class="comment">         */</span>
01784         plb-&gt;ptPrev = pt;
01785         <span class="comment">/*</span>
01786 <span class="comment">         * Autoscroll listbox if mouse button is held down and mouse is</span>
01787 <span class="comment">         * moved outside of the listbox</span>
01788 <span class="comment">         */</span>
01789         <span class="keywordflow">if</span> (plb-&gt;fMouseDown) {
01790             <span class="keywordflow">if</span> (plb-&gt;fMultiColumn) {
01791                 <span class="keywordflow">if</span> ((pt.x &lt; 0) || (pt.x &gt;= rcClient.right - 1)) {
01792                     <span class="comment">/*</span>
01793 <span class="comment">                     * Reset timer interval based on distance from listbox.</span>
01794 <span class="comment">                     * use a longer default interval because each multicolumn</span>
01795 <span class="comment">                     * scrolling increment is larger</span>
01796 <span class="comment">                     */</span>
01797                     dist = pt.x &lt; 0 ? -pt.x : (pt.x - rcClient.right + 1);
01798                     iTimer = ((<a class="code" href="../../d1/d8/clglobal_8c.html#a4">gpsi</a>-&gt;dtScroll * 3) / 2) - ((WORD) dist &lt;&lt; 4);
01799 
01800                     <span class="keywordflow">if</span> (plb-&gt;fRightAlign)
01801                         <a class="code" href="../../d6/d0/usercli_8h.html#a704">xxxLBoxCtlHScrollMultiColumn</a>(plb, (pt.x &lt; 0 ? SB_LINEDOWN : SB_LINEUP), 0);
01802                     <span class="keywordflow">else</span>
01803                         <a class="code" href="../../d6/d0/usercli_8h.html#a704">xxxLBoxCtlHScrollMultiColumn</a>(plb, (pt.x &lt; 0 ? SB_LINEUP : SB_LINEDOWN), 0);
01804 
01805                     <span class="keywordflow">goto</span> SetTimerAndSel;
01806                 }
01807             } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((pt.y &lt; 0) || (pt.y &gt;= rcClient.bottom - 1)) {
01808                 <span class="comment">/*</span>
01809 <span class="comment">                 * Reset timer interval based on distance from listbox.</span>
01810 <span class="comment">                 */</span>
01811                 dist = pt.y &lt; 0 ? -pt.y : (pt.y - rcClient.bottom + 1);
01812                 iTimer = <a class="code" href="../../d1/d8/clglobal_8c.html#a4">gpsi</a>-&gt;dtScroll - ((WORD) dist &lt;&lt; 4);
01813 
01814                 <a class="code" href="../../d6/d0/usercli_8h.html#a705">xxxLBoxCtlScroll</a>(plb, (pt.y &lt; 0 ? SB_LINEUP : SB_LINEDOWN), 0);
01815 SetTimerAndSel:
01816                 <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a230">NtUserSetTimer</a>(hwnd, IDSYS_SCROLL, <a class="code" href="../../d8/d6/sertl_8c.html#a1">max</a>(iTimer, 1), NULL);
01817                 <a class="code" href="../../d6/d0/usercli_8h.html#a686">ISelFromPt</a>(plb, pt, &amp;iSelFromPt);
01818             }
01819         } <span class="keywordflow">else</span> {
01820             <span class="comment">/*</span>
01821 <span class="comment">             * Ignore if not in client since we don't autoscroll</span>
01822 <span class="comment">             */</span>
01823             <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d6/rect_8c.html#a5">PtInRect</a>(&amp;rcClient, pt))
01824                 <span class="keywordflow">break</span>;
01825         }
01826 
01827         <span class="keywordflow">switch</span> (plb-&gt;wMultiple) {
01828         <span class="keywordflow">case</span> <a class="code" href="../../d6/d0/usercli_8h.html#a114">SINGLESEL</a>:
01829 
01830             <span class="comment">/*</span>
01831 <span class="comment">             * If it is a single selection or plain multisel list box</span>
01832 <span class="comment">             */</span>
01833             <span class="keywordflow">goto</span> MouseMoveHandler;
01834             <span class="keywordflow">break</span>;
01835 
01836         <span class="keywordflow">case</span> <a class="code" href="../../d6/d0/usercli_8h.html#a115">MULTIPLESEL</a>:
01837         <span class="keywordflow">case</span> <a class="code" href="../../d6/d0/usercli_8h.html#a116">EXTENDEDSEL</a>:
01838 
01839             <span class="comment">/*</span>
01840 <span class="comment">             * Handle mouse movement with extended selection of items</span>
01841 <span class="comment">             */</span>
01842             <span class="keywordflow">if</span> (plb-&gt;iSelBase != iSelFromPt) {
01843                 <a class="code" href="../../d6/d0/usercli_8h.html#a693">xxxSetISelBase</a>(plb, iSelFromPt);
01844 
01845                 <span class="comment">/*</span>
01846 <span class="comment">                 * If this is an extended Multi sel list box, then</span>
01847 <span class="comment">                 * adjust the display of the range due to the mouse move</span>
01848 <span class="comment">                 */</span>
01849                 <span class="keywordflow">if</span> (plb-&gt;wMultiple == <a class="code" href="../../d6/d0/usercli_8h.html#a116">EXTENDEDSEL</a>) {
01850                     <a class="code" href="../../d6/d0/usercli_8h.html#a718">xxxLBBlockHilite</a>(plb, iSelFromPt, FALSE);
01851                     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a405">FWINABLE</a>())
01852                         <a class="code" href="../../d6/d0/usercli_8h.html#a409">LBEvent</a>(plb, EVENT_OBJECT_SELECTIONWITHIN, iSelFromPt);
01853                 }
01854                 plb-&gt;iLastMouseMove = iSelFromPt;
01855             }
01856             <span class="keywordflow">break</span>;
01857         }
01858         <span class="keywordflow">break</span>;
01859     }
01860     <span class="keywordflow">case</span> WM_LBUTTONUP:
01861         <span class="keywordflow">if</span> (plb-&gt;fMouseDown)
01862             <a class="code" href="../../d6/d0/usercli_8h.html#a740">xxxLBButtonUp</a>(plb, LBUP_RELEASECAPTURE | LBUP_NOTIFY |
01863                 (mousetemp ? LBUP_RESETSELECTION : 0) |
01864                 (fMouseInRect ? LBUP_SUCCESS : 0));
01865     }
01866 }
</div></pre>    </td>
  </tr>
</table>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="a405" doxytag="usercli.h::ghImm32" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HMODULE <a class="el" href="../../d6/d0/usercli_8h.html#a405">ghImm32</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02524">2524</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d3/d0/fareast_8c-source.html#l00238">_InitializeImmEntryTable()</a>, <a class="el" href="../../d3/d0/fareast_8c-source.html#l00344">User32InitializeImmEntryTable()</a>, and <a class="el" href="../../d7/d7/clinit_8c-source.html#l00059">UserClientDllInitialize()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a404" doxytag="usercli.h::gImmApiEntries" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d2/d7/structImmApiEntries.html">ImmApiEntries</a> <a class="el" href="../../d6/d0/usercli_8h.html#a404">gImmApiEntries</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/usercli_8h-source.html#l02523">2523</a> of file <a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>.
<p>
Referenced by <a class="el" href="../../d3/d0/fareast_8c-source.html#l00238">_InitializeImmEntryTable()</a>, <a class="el" href="../../d3/d0/fareast_8c-source.html#l00408">IMPGetIMEA()</a>, <a class="el" href="../../d3/d0/fareast_8c-source.html#l00403">IMPGetIMEW()</a>, <a class="el" href="../../d3/d0/fareast_8c-source.html#l00418">IMPQueryIMEA()</a>, <a class="el" href="../../d3/d0/fareast_8c-source.html#l00413">IMPQueryIMEW()</a>, <a class="el" href="../../d3/d0/fareast_8c-source.html#l00428">IMPSetIMEA()</a>, <a class="el" href="../../d3/d0/fareast_8c-source.html#l00423">IMPSetIMEW()</a>, <a class="el" href="../../d3/d0/fareast_8c-source.html#l00398">SendIMEMessageExA()</a>, <a class="el" href="../../d3/d0/fareast_8c-source.html#l00393">SendIMEMessageExW()</a>, <a class="el" href="../../d3/d0/fareast_8c-source.html#l00344">User32InitializeImmEntryTable()</a>, <a class="el" href="../../d3/d0/fareast_8c-source.html#l00383">WINNLSEnableIME()</a>, and <a class="el" href="../../d3/d0/fareast_8c-source.html#l00388">WINNLSGetEnableStatus()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a349" doxytag="usercli.h::PtiCurrent" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d2/d8/structtagTHREADINFO.html">PTHREADINFO</a> PtiCurrent(VOID)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Sat May 15 19:45:57 2004 for test by
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>

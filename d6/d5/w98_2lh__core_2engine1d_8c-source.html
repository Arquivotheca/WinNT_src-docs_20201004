<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>test: engine1d.c Source File</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="../../main.html">Main&nbsp;Page</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Class&nbsp;List</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Class&nbsp;Members</a> | <a class="qindex" href="../../globals.html">File&nbsp;Members</a></div>
<h1>engine1d.c</h1><a href="../../d5/d6/w98_2lh__core_2engine1d_8c.html">Go to the documentation of this file.</a><pre class="fragment"><div>00001 <span class="comment">/*</span>
00002 <span class="comment">        File:           Engine1D.c</span>
00003 <span class="comment"></span>
00004 <span class="comment">        Contains:       </span>
00005 <span class="comment"></span>
00006 <span class="comment">        Written by:     U. J. Krabbenhoeft</span>
00007 <span class="comment"></span>
00008 <span class="comment">        Version:</span>
00009 <span class="comment"></span>
00010 <span class="comment">        Copyright:      © 1993-1997 by Heidelberger Druckmaschinen AG, all rights reserved.</span>
00011 <span class="comment"></span>
00012 <span class="comment">*/</span>
00013 
<a name="l00014"></a><a class="code" href="../../d5/d6/w98_2lh__core_2engine1d_8c.html#a0">00014</a> <span class="preprocessor">#define smallCode 1</span>
00015 <span class="preprocessor"></span>
00016 <span class="preprocessor">#undef LH_DATA_IN_TYPE</span>
00017 <span class="preprocessor"></span><span class="preprocessor">#undef LH_DATA_OUT_TYPE</span>
00018 <span class="preprocessor"></span><span class="preprocessor">#undef LH_LUT_DATA_TYPE</span>
00019 <span class="preprocessor"></span><span class="preprocessor">#undef LH_DATA_IN_COUNT</span>
00020 <span class="preprocessor"></span><span class="preprocessor">#undef LH_DATA_SHR</span>
00021 <span class="preprocessor"></span><span class="preprocessor">#undef LH_DATA_SHR_CORR</span>
00022 <span class="preprocessor"></span><span class="preprocessor">#undef LH_LUT_DATA_SHR</span>
00023 <span class="preprocessor"></span><span class="preprocessor">#undef LH_BIT_BREIT_INTERNAL</span>
00024 <span class="preprocessor"></span><span class="preprocessor">#if LH_DATA_IN_SIZE_16</span>
00025 <span class="preprocessor"></span><span class="preprocessor">#define LH_DATA_IN_TYPE LH_UINT16</span>
00026 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l00027"></a><a class="code" href="../../d5/d6/w98_2lh__core_2engine1d_8c.html#a1">00027</a> <span class="preprocessor"></span><span class="preprocessor">#define LH_DATA_IN_TYPE LH_UINT8</span>
00028 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00029 <span class="preprocessor"></span><span class="preprocessor">#if LH_DATA_OUT_SIZE_16</span>
00030 <span class="preprocessor"></span><span class="preprocessor">#define LH_DATA_OUT_TYPE LH_UINT16</span>
00031 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l00032"></a><a class="code" href="../../d5/d6/w98_2lh__core_2engine1d_8c.html#a2">00032</a> <span class="preprocessor"></span><span class="preprocessor">#define LH_DATA_OUT_TYPE LH_UINT8</span>
00033 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00034 <span class="preprocessor"></span><span class="preprocessor">#if LH_LUT_DATA_SIZE_16</span>
00035 <span class="preprocessor"></span><span class="preprocessor">#define LH_BIT_BREIT_INTERNAL   16</span>
00036 <span class="preprocessor"></span><span class="preprocessor">#define LH_LUT_DATA_TYPE LH_UINT16</span>
00037 <span class="preprocessor"></span><span class="preprocessor">#else</span>
00038 <span class="preprocessor"></span><span class="preprocessor">#if LH_DATA_IN_SIZE_16</span>
00039 <span class="preprocessor"></span><span class="preprocessor">#define LH_BIT_BREIT_INTERNAL   16</span>
00040 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l00041"></a><a class="code" href="../../d5/d6/w98_2lh__core_2engine1d_8c.html#a3">00041</a> <span class="preprocessor"></span><span class="preprocessor">#define LH_BIT_BREIT_INTERNAL   10</span>
00042 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00043"></a><a class="code" href="../../d5/d6/w98_2lh__core_2engine1d_8c.html#a4">00043</a> <span class="preprocessor"></span><span class="preprocessor">#define LH_LUT_DATA_TYPE LH_UINT8</span>
00044 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00045 <span class="preprocessor"></span>
00046 <span class="preprocessor">#if LH_DATA_IN_COUNT_4</span>
00047 <span class="preprocessor"></span><span class="preprocessor">#define LH_DATA_IN_COUNT                4</span>
00048 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l00049"></a><a class="code" href="../../d5/d6/w98_2lh__core_2engine1d_8c.html#a5">00049</a> <span class="preprocessor"></span><span class="preprocessor">#define LH_DATA_IN_COUNT                3</span>
00050 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00051 <span class="preprocessor"></span>
<a name="l00052"></a><a class="code" href="../../d5/d6/w98_2lh__core_2engine1d_8c.html#a6">00052</a> <span class="preprocessor">#define LH_BIT_MASKE_ADR (((1&lt;&lt;7)-1)&lt;&lt; (LH_BIT_BREIT_INTERNAL-7))</span>
<a name="l00053"></a><a class="code" href="../../d5/d6/w98_2lh__core_2engine1d_8c.html#a7">00053</a> <span class="preprocessor"></span><span class="preprocessor">#define LH_BIT_BREIT_SELEKTOR (LH_BIT_BREIT_INTERNAL-7)</span>
<a name="l00054"></a><a class="code" href="../../d5/d6/w98_2lh__core_2engine1d_8c.html#a8">00054</a> <span class="preprocessor"></span><span class="preprocessor">#define LH_BIT_MASKE_SELEKTOR ((1&lt;&lt;LH_BIT_BREIT_SELEKTOR)-1)</span>
00055 <span class="preprocessor"></span>
<a name="l00056"></a><a class="code" href="../../d5/d6/w98_2lh__core_2engine1d_8c.html#a9">00056</a> <span class="preprocessor">#define LH_ADR_BEREICH_SEL              (1&lt;&lt;LH_BIT_BREIT_SELEKTOR)</span>
00057 <span class="preprocessor"></span>
00058 <span class="preprocessor">#if LH_LUT_DATA_SIZE_16</span>
00059 <span class="preprocessor"></span><span class="preprocessor">#define LH_DATA_SHR               (16+LH_BIT_BREIT_SELEKTOR-LH_ADR_BREIT_AUS_LUT)  </span><span class="comment">/* z.B. 16+11-10=17 */</span>
00060 <span class="preprocessor">#define LH_DATA_SHR_CORR 8              </span><span class="comment">/* notwendig bei LH_DATA_SHR &gt; 16 */</span>
00061 <span class="preprocessor">#define LH_LUT_DATA_SHR  16             </span><span class="comment">/* Normierung bei Alutinterpolation */</span>
00062 <span class="preprocessor">#else</span>
<a name="l00063"></a><a class="code" href="../../d5/d6/w98_2lh__core_2engine1d_8c.html#a10">00063</a> <span class="preprocessor"></span><span class="preprocessor">#define LH_DATA_SHR               (8+LH_BIT_BREIT_SELEKTOR-LH_ADR_BREIT_AUS_LUT)   </span><span class="comment">/* z.B. 8+7-10=5 */</span>
<a name="l00064"></a><a class="code" href="../../d5/d6/w98_2lh__core_2engine1d_8c.html#a11">00064</a> <span class="preprocessor">#define LH_LUT_DATA_SHR  8              </span><span class="comment">/* Normierung bei Alutinterpolation */</span>
00065 <span class="preprocessor">#endif</span>
00066 <span class="preprocessor"></span>
00067 {
00068         <a class="code" href="../../d0/d3/lh__core_2calcenf_8h.html#a7">LH_UINT32</a> ein_regr;
00069         <a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a0">LH_DATA_IN_TYPE</a> ein_cache;
00070         <a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a3">LH_LUT_DATA_TYPE</a> * paNewVal0;
00071         <a class="code" href="../../d0/d3/lh__core_2calcenf_8h.html#a7">LH_UINT32</a> ako0;
00072 
00073         <a class="code" href="../../d0/d3/lh__core_2calcenf_8h.html#a5">LH_UINT8</a>        Mode;
00074         <a class="code" href="../../d0/d3/lh__core_2calcenf_8h.html#a5">LH_UINT8</a>        <a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a5">LH_DATA_OUT_COUNT</a> = (<a class="code" href="../../d0/d3/lh__core_2calcenf_8h.html#a5">LH_UINT8</a>)lutParam-&gt;colorLutOutDim;
00075         <a class="code" href="../../d0/d3/lh__core_2calcenf_8h.html#a7">LH_UINT32</a>       PixelCount, LineCount, i, j;
00076         <span class="keywordtype">long</span> inputOffset,outputOffset;
00077         <a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a0">LH_DATA_IN_TYPE</a> * input0 = (<a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a0">LH_DATA_IN_TYPE</a> *)calcParam-&gt;inputData[0];
00078         <a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a0">LH_DATA_IN_TYPE</a> * input1 = (<a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a0">LH_DATA_IN_TYPE</a> *)calcParam-&gt;inputData[1];
00079 
00080         <a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a1">LH_DATA_OUT_TYPE</a> * output0 = (<a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a1">LH_DATA_OUT_TYPE</a> *)calcParam-&gt;outputData[0];
00081         <a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a1">LH_DATA_OUT_TYPE</a> * output1 = (<a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a1">LH_DATA_OUT_TYPE</a> *)calcParam-&gt;outputData[1];
00082         <a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a1">LH_DATA_OUT_TYPE</a> * output2 = (<a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a1">LH_DATA_OUT_TYPE</a> *)calcParam-&gt;outputData[2];
00083         <a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a1">LH_DATA_OUT_TYPE</a> * output3 = (<a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a1">LH_DATA_OUT_TYPE</a> *)calcParam-&gt;outputData[3];
00084         <a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a1">LH_DATA_OUT_TYPE</a> * output4 = (<a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a1">LH_DATA_OUT_TYPE</a> *)calcParam-&gt;outputData[4];
00085 
00086         <a class="code" href="../../d0/d3/lh__core_2calcenf_8h.html#a6">LH_UINT16</a> * My_InputLut = (<a class="code" href="../../d0/d3/lh__core_2calcenf_8h.html#a6">LH_UINT16</a> *)lutParam-&gt;inputLut;
00087         <a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a3">LH_LUT_DATA_TYPE</a> * My_OutputLut = (<a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a3">LH_LUT_DATA_TYPE</a> *)lutParam-&gt;outputLut;
00088         <a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a3">LH_LUT_DATA_TYPE</a> * My_ColorLut = (<a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a3">LH_LUT_DATA_TYPE</a> *)lutParam-&gt;colorLut;
00089 
00090         <a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a1">LH_DATA_OUT_TYPE</a> Mask = (<a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a1">LH_DATA_OUT_TYPE</a>)-1;
00091 
00092 <span class="preprocessor">#ifdef DEBUG_OUTPUT</span>
00093 <span class="preprocessor"></span>        <a class="code" href="../../d2/d6/lh__open_2pi__app_8h.html#a11">CMError</a> err = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a58a55">noErr</a>;
00094 <span class="preprocessor">#endif</span>
00095 <span class="preprocessor"></span>        <a class="code" href="../../d6/d9/lh__open_2general_8h.html#a1">LH_START_PROC</a>(<a class="code" href="../../d1/d9/lh__core_2gen_8c.html#a7">LH_CALC_PROC_NAME</a>)
00096 
00097         #<span class="keywordflow">if</span> <a class="code" href="../../d1/d9/lh__core_2gen_8c.html#a3">LH_DATA_IN_SIZE_16</a>
00098         inputOffset = (<span class="keywordtype">long</span>)calcParam-&gt;cmInputPixelOffset / 2;
00099 <span class="preprocessor">        #else</span>
00100 <span class="preprocessor"></span>        inputOffset = (<span class="keywordtype">long</span>)calcParam-&gt;cmInputPixelOffset;
00101 <span class="preprocessor">        #endif</span>
00102 <span class="preprocessor"></span><span class="preprocessor">        #if LH_DATA_OUT_SIZE_16</span>
00103 <span class="preprocessor"></span>        outputOffset = (<span class="keywordtype">long</span>)calcParam-&gt;cmOutputPixelOffset / 2;
00104 <span class="preprocessor">        #else</span>
00105 <span class="preprocessor"></span>        outputOffset = (<span class="keywordtype">long</span>)calcParam-&gt;cmOutputPixelOffset;
00106 <span class="preprocessor">        #endif</span>
00107 <span class="preprocessor"></span>
00108         <span class="keywordflow">if</span> (calcParam-&gt;clearMask)
00109                 Mask = 0;
00110         Mode = <a class="code" href="../../d0/d3/lh__core_2calcenf_8h.html#a0">LH_CALC_ENGINE_UNDEF_MODE</a>;
00111 
00112 
00113         <span class="keywordflow">if</span> ((calcParam-&gt;cmInputPixelOffset * calcParam-&gt;cmPixelPerLine == calcParam-&gt;cmInputBytesPerLine) &amp;&amp; (calcParam-&gt;cmOutputPixelOffset * calcParam-&gt;cmPixelPerLine == calcParam-&gt;cmOutputBytesPerLine))
00114         {
00115                 PixelCount = calcParam-&gt;cmPixelPerLine * calcParam-&gt;cmLineCount;
00116                 LineCount = 1;
00117         }
00118         <span class="keywordflow">else</span>
00119         {
00120                 PixelCount = calcParam-&gt;cmPixelPerLine;
00121                 LineCount = calcParam-&gt;cmLineCount;
00122         }
00123         <span class="keywordflow">if</span> (calcParam-&gt;copyAlpha )
00124         {
00125                         Mode = <a class="code" href="../../d0/d3/lh__core_2calcenf_8h.html#a4">LH_CALC_ENGINE_U_TO_U</a>;
00126         }
00127         <span class="keywordflow">else</span>
00128         {
00129                 <span class="keywordflow">if</span> (calcParam-&gt;clearMask)
00130                         Mode = <a class="code" href="../../d0/d3/lh__core_2calcenf_8h.html#a2">LH_CALC_ENGINE_P_TO_U</a>;
00131                 <span class="keywordflow">else</span>
00132                         Mode = <a class="code" href="../../d0/d3/lh__core_2calcenf_8h.html#a1">LH_CALC_ENGINE_P_TO_P</a>;
00133         }
00134         j = 0;
00135         <span class="keywordflow">while</span> (LineCount)
00136         {
00137                 i = PixelCount;
00138                 <span class="keywordflow">while</span> (i)
00139                 {
00140 <span class="preprocessor">                        #if LH_LUT_DATA_SIZE_16</span>
00141 <span class="preprocessor"></span><span class="preprocessor">                        #if LH_DATA_IN_SIZE_16 || LH_DATA_OUT_SIZE_16</span>
00142 <span class="preprocessor"></span>                        <span class="keyword">register</span> <a class="code" href="../../d0/d3/lh__core_2calcenf_8h.html#a7">LH_UINT32</a> ko;
00143 <span class="preprocessor">                        #endif</span>
00144 <span class="preprocessor"></span><span class="preprocessor">                        #if LH_DATA_IN_SIZE_16</span>
00145 <span class="preprocessor"></span>                        <span class="keyword">register</span> <a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a0">LH_DATA_IN_TYPE</a> aValIn;
00146 <span class="preprocessor">                #endif</span>
00147 <span class="preprocessor"></span><span class="preprocessor">                        #if LH_DATA_OUT_SIZE_16</span>
00148 <span class="preprocessor"></span>                        <span class="keyword">register</span> <a class="code" href="../../d0/d3/lh__core_2calcenf_8h.html#a7">LH_UINT32</a> aVal;
00149 <span class="preprocessor">                #endif</span>
00150 <span class="preprocessor"></span><span class="preprocessor">                        #if LH_DATA_IN_SIZE_16</span>
00151 <span class="preprocessor"></span>                                aValIn = (ein_cache=*input0) - ( *input0 &gt;&gt; ( <a class="code" href="../../d1/d9/lh__core_2gen_8c.html#a0">LH_ADR_BREIT_EIN_LUT</a> ));
00152                                 ko = aValIn &amp; ( (1&lt;&lt;( 16-<a class="code" href="../../d1/d9/lh__core_2gen_8c.html#a0">LH_ADR_BREIT_EIN_LUT</a> ))-1 );
00153                                 aValIn = (aValIn &gt;&gt; ( 16-<a class="code" href="../../d1/d9/lh__core_2gen_8c.html#a0">LH_ADR_BREIT_EIN_LUT</a> )) + ( 0 &lt;&lt; <a class="code" href="../../d1/d9/lh__core_2gen_8c.html#a0">LH_ADR_BREIT_EIN_LUT</a> );
00154                         ein_regr = ( My_InputLut[aValIn] * ( (1&lt;&lt;( 16-<a class="code" href="../../d1/d9/lh__core_2gen_8c.html#a0">LH_ADR_BREIT_EIN_LUT</a> )) - ko ) + My_InputLut[aValIn +1] * ko ) &gt;&gt;( 16-<a class="code" href="../../d1/d9/lh__core_2gen_8c.html#a0">LH_ADR_BREIT_EIN_LUT</a> );
00155 <span class="preprocessor">                        #else</span>
00156 <span class="preprocessor"></span>                        ein_regr = My_InputLut[(ein_cache=*input0) + ( 0 &lt;&lt; <a class="code" href="../../d1/d9/lh__core_2gen_8c.html#a0">LH_ADR_BREIT_EIN_LUT</a> )];
00157 <span class="preprocessor">                        #endif</span>
00158 <span class="preprocessor"></span><span class="preprocessor">                        #else</span>
00159 <span class="preprocessor"></span><span class="preprocessor">                        #if LH_DATA_IN_SIZE_16</span>
00160 <span class="preprocessor"></span>                        <span class="keyword">register</span> <a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a0">LH_DATA_IN_TYPE</a> aValIn;
00161                         <span class="keyword">register</span> <a class="code" href="../../d0/d3/lh__core_2calcenf_8h.html#a7">LH_UINT32</a> ko;
00162                                 aValIn = (ein_cache=*input0) - ( *input0 &gt;&gt; ( <a class="code" href="../../d1/d9/lh__core_2gen_8c.html#a0">LH_ADR_BREIT_EIN_LUT</a> ));
00163                                 ko = aValIn &amp; ( (1&lt;&lt;( 16-<a class="code" href="../../d1/d9/lh__core_2gen_8c.html#a0">LH_ADR_BREIT_EIN_LUT</a> ))-1 );
00164                                 aValIn = (aValIn &gt;&gt; ( 16-<a class="code" href="../../d1/d9/lh__core_2gen_8c.html#a0">LH_ADR_BREIT_EIN_LUT</a> )) + ( 0 &lt;&lt; <a class="code" href="../../d1/d9/lh__core_2gen_8c.html#a0">LH_ADR_BREIT_EIN_LUT</a> );
00165                         ein_regr = ( My_InputLut[aValIn] * ( (1&lt;&lt;( 16-<a class="code" href="../../d1/d9/lh__core_2gen_8c.html#a0">LH_ADR_BREIT_EIN_LUT</a> )) - ko ) + My_InputLut[aValIn +1] * ko ) &gt;&gt;( 10-<a class="code" href="../../d1/d9/lh__core_2gen_8c.html#a0">LH_ADR_BREIT_EIN_LUT</a> );
00166 <span class="preprocessor">                        #else</span>
00167 <span class="preprocessor"></span>                        ein_regr = My_InputLut[(ein_cache=*input0) + ( 0 &lt;&lt; <a class="code" href="../../d1/d9/lh__core_2gen_8c.html#a0">LH_ADR_BREIT_EIN_LUT</a> )];
00168 <span class="preprocessor">                        #endif</span>
00169 <span class="preprocessor"></span><span class="preprocessor">                        #endif</span>
00170 <span class="preprocessor"></span>                        paNewVal0 = (<a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a3">LH_LUT_DATA_TYPE</a> *)My_ColorLut + 
00171                                                 ((ein_regr &gt;&gt; <a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a7">LH_BIT_BREIT_SELEKTOR</a>)*<a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a5">LH_DATA_OUT_COUNT</a>);
00172                         ein_regr &amp;= <a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a8">LH_BIT_MASKE_SELEKTOR</a>;
00173 
00174                         ako0 = (<a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a9">LH_ADR_BEREICH_SEL</a>) - ein_regr;
00175 <span class="preprocessor">                        #if LH_LUT_DATA_SIZE_16</span>
00176 <span class="preprocessor"></span><span class="preprocessor">                        #if LH_DATA_OUT_SIZE_16</span>
00177 <span class="preprocessor"></span>        
00178                         aVal =                                   (ako0          * paNewVal0[0] +
00179                                                                           ein_regr      * paNewVal0[<a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a5">LH_DATA_OUT_COUNT</a>]);
00180                         aVal = aVal + ( aVal &gt;&gt; ( <a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a11">LH_LUT_DATA_SHR</a> ));
00181                         aVal = aVal - ( aVal &gt;&gt; ( <a class="code" href="../../d1/d9/lh__core_2gen_8c.html#a1">LH_ADR_BREIT_AUS_LUT</a> ));
00182                         ko = (aVal&gt;&gt;LH_DATA_SHR_CORR) &amp; ( (1&lt;&lt;( <a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a10">LH_DATA_SHR</a> - LH_DATA_SHR_CORR))-1 );
00183                         aVal = (aVal &gt;&gt; ( <a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a10">LH_DATA_SHR</a> )) + ( 0 &lt;&lt; <a class="code" href="../../d1/d9/lh__core_2gen_8c.html#a1">LH_ADR_BREIT_AUS_LUT</a> );
00184                         *output0 = (<a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a1">LH_DATA_OUT_TYPE</a>)((My_OutputLut[aVal] * ( (1&lt;&lt;( <a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a10">LH_DATA_SHR</a> - LH_DATA_SHR_CORR )) - ko ) + My_OutputLut[aVal +1] * ko)&gt;&gt;(<a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a10">LH_DATA_SHR</a> - LH_DATA_SHR_CORR) );
00185 
00186                         <span class="keywordflow">if</span>( <a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a5">LH_DATA_OUT_COUNT</a> &gt; 1 ){
00187                         paNewVal0++;
00188                         aVal =                                   (ako0          * paNewVal0[0] +
00189                                                                           ein_regr      * paNewVal0[<a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a5">LH_DATA_OUT_COUNT</a>]);
00190                         aVal = aVal + ( aVal &gt;&gt; ( <a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a11">LH_LUT_DATA_SHR</a> ));
00191                         aVal = aVal - ( aVal &gt;&gt; ( <a class="code" href="../../d1/d9/lh__core_2gen_8c.html#a1">LH_ADR_BREIT_AUS_LUT</a> ));
00192                         ko = (aVal&gt;&gt;LH_DATA_SHR_CORR) &amp; ( (1&lt;&lt;( <a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a10">LH_DATA_SHR</a> - LH_DATA_SHR_CORR))-1 );
00193                         aVal = (aVal &gt;&gt; ( <a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a10">LH_DATA_SHR</a> )) + ( 1 &lt;&lt; <a class="code" href="../../d1/d9/lh__core_2gen_8c.html#a1">LH_ADR_BREIT_AUS_LUT</a> );
00194                         *output1 = (<a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a1">LH_DATA_OUT_TYPE</a>)((My_OutputLut[aVal] * ( (1&lt;&lt;( <a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a10">LH_DATA_SHR</a> - LH_DATA_SHR_CORR )) - ko ) + My_OutputLut[aVal +1] * ko)&gt;&gt;(<a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a10">LH_DATA_SHR</a> - LH_DATA_SHR_CORR) );
00195 
00196                         paNewVal0++;
00197                         aVal =                                   (ako0          * paNewVal0[0] +
00198                                                                           ein_regr      * paNewVal0[<a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a5">LH_DATA_OUT_COUNT</a>]);
00199                         aVal = aVal + ( aVal &gt;&gt; ( <a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a11">LH_LUT_DATA_SHR</a> ));
00200                         aVal = aVal - ( aVal &gt;&gt; ( <a class="code" href="../../d1/d9/lh__core_2gen_8c.html#a1">LH_ADR_BREIT_AUS_LUT</a> ));
00201                         ko = (aVal&gt;&gt;LH_DATA_SHR_CORR) &amp; ( (1&lt;&lt;( <a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a10">LH_DATA_SHR</a> - LH_DATA_SHR_CORR))-1 );
00202                         aVal = (aVal &gt;&gt; ( <a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a10">LH_DATA_SHR</a> )) + ( 2 &lt;&lt; <a class="code" href="../../d1/d9/lh__core_2gen_8c.html#a1">LH_ADR_BREIT_AUS_LUT</a> );
00203                         *output2 = (<a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a1">LH_DATA_OUT_TYPE</a>)((My_OutputLut[aVal] * ( (1&lt;&lt;( <a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a10">LH_DATA_SHR</a> - LH_DATA_SHR_CORR )) - ko ) + My_OutputLut[aVal +1] * ko)&gt;&gt;(<a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a10">LH_DATA_SHR</a> - LH_DATA_SHR_CORR) );
00204 
00205                         <span class="keywordflow">if</span>( <a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a5">LH_DATA_OUT_COUNT</a> &gt; 3 ){
00206                         paNewVal0++;
00207                         aVal =                                   (ako0          * paNewVal0[0] +
00208                                                                           ein_regr      * paNewVal0[<a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a5">LH_DATA_OUT_COUNT</a>]);
00209                         aVal = aVal + ( aVal &gt;&gt; ( <a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a11">LH_LUT_DATA_SHR</a> ));
00210                         aVal = aVal - ( aVal &gt;&gt; ( <a class="code" href="../../d1/d9/lh__core_2gen_8c.html#a1">LH_ADR_BREIT_AUS_LUT</a> ));
00211                         ko = (aVal&gt;&gt;LH_DATA_SHR_CORR) &amp; ( (1&lt;&lt;( <a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a10">LH_DATA_SHR</a> - LH_DATA_SHR_CORR))-1 );
00212                         aVal = (aVal &gt;&gt; ( <a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a10">LH_DATA_SHR</a> )) + ( 3 &lt;&lt; <a class="code" href="../../d1/d9/lh__core_2gen_8c.html#a1">LH_ADR_BREIT_AUS_LUT</a> );
00213                         *output3 = (<a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a1">LH_DATA_OUT_TYPE</a>)((My_OutputLut[aVal] * ( (1&lt;&lt;( <a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a10">LH_DATA_SHR</a> - LH_DATA_SHR_CORR )) - ko ) + My_OutputLut[aVal +1] * ko)&gt;&gt;(<a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a10">LH_DATA_SHR</a> - LH_DATA_SHR_CORR) );
00214                         }}
00215                         
00216 <span class="preprocessor">                        #else</span>
00217 <span class="preprocessor"></span>                        *output0 = My_OutputLut[((ako0          * paNewVal0[0] + 
00218                                                                           ein_regr      * paNewVal0[<a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a5">LH_DATA_OUT_COUNT</a>])&gt;&gt;<a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a10">LH_DATA_SHR</a>) + (0&lt;&lt;<a class="code" href="../../d1/d9/lh__core_2gen_8c.html#a1">LH_ADR_BREIT_AUS_LUT</a>)]&gt;&gt;8;
00219                         <span class="keywordflow">if</span>( <a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a5">LH_DATA_OUT_COUNT</a> &gt; 1 ){
00220                         paNewVal0++;
00221                         *output1 = My_OutputLut[((ako0          * paNewVal0[0] + 
00222                                                                           ein_regr      * paNewVal0[<a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a5">LH_DATA_OUT_COUNT</a>])&gt;&gt;<a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a10">LH_DATA_SHR</a>) + (1&lt;&lt;<a class="code" href="../../d1/d9/lh__core_2gen_8c.html#a1">LH_ADR_BREIT_AUS_LUT</a>)]&gt;&gt;8;
00223                         paNewVal0++;
00224                         *output2 = My_OutputLut[((ako0          * paNewVal0[0] + 
00225                                                                           ein_regr      * paNewVal0[<a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a5">LH_DATA_OUT_COUNT</a>])&gt;&gt;<a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a10">LH_DATA_SHR</a>) + (2&lt;&lt;<a class="code" href="../../d1/d9/lh__core_2gen_8c.html#a1">LH_ADR_BREIT_AUS_LUT</a>)]&gt;&gt;8;
00226                         <span class="keywordflow">if</span>( <a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a5">LH_DATA_OUT_COUNT</a> &gt; 3 ){
00227                         paNewVal0++;
00228                         *output3 = My_OutputLut[((ako0          * paNewVal0[0] + 
00229                                                                           ein_regr      * paNewVal0[<a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a5">LH_DATA_OUT_COUNT</a>])&gt;&gt;<a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a10">LH_DATA_SHR</a>) + (3&lt;&lt;<a class="code" href="../../d1/d9/lh__core_2gen_8c.html#a1">LH_ADR_BREIT_AUS_LUT</a>)]&gt;&gt;8;
00230                         }}
00231 <span class="preprocessor">                        #endif</span>
00232 <span class="preprocessor"></span>                        
00233 <span class="preprocessor">                        #else</span>
00234 <span class="preprocessor"></span>                        *output0 = My_OutputLut[((ako0          * paNewVal0[0] + 
00235                                                                           ein_regr      * paNewVal0[<a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a5">LH_DATA_OUT_COUNT</a>])&gt;&gt;<a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a10">LH_DATA_SHR</a>) + (0&lt;&lt;<a class="code" href="../../d1/d9/lh__core_2gen_8c.html#a1">LH_ADR_BREIT_AUS_LUT</a>)];
00236                         <span class="keywordflow">if</span>( <a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a5">LH_DATA_OUT_COUNT</a> &gt; 1 ){
00237                         paNewVal0++;
00238                         *output1 = My_OutputLut[((ako0          * paNewVal0[0] + 
00239                                                                           ein_regr      * paNewVal0[<a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a5">LH_DATA_OUT_COUNT</a>])&gt;&gt;<a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a10">LH_DATA_SHR</a>) + (1&lt;&lt;<a class="code" href="../../d1/d9/lh__core_2gen_8c.html#a1">LH_ADR_BREIT_AUS_LUT</a>)];
00240                         paNewVal0++;
00241                         *output2 = My_OutputLut[((ako0          * paNewVal0[0] + 
00242                                                                           ein_regr      * paNewVal0[<a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a5">LH_DATA_OUT_COUNT</a>])&gt;&gt;<a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a10">LH_DATA_SHR</a>) + (2&lt;&lt;<a class="code" href="../../d1/d9/lh__core_2gen_8c.html#a1">LH_ADR_BREIT_AUS_LUT</a>)];
00243                         <span class="keywordflow">if</span>( <a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a5">LH_DATA_OUT_COUNT</a> &gt; 3 ){
00244                         paNewVal0++;
00245                         *output3 = My_OutputLut[((ako0          * paNewVal0[0] + 
00246                                                                           ein_regr      * paNewVal0[<a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a5">LH_DATA_OUT_COUNT</a>])&gt;&gt;<a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a10">LH_DATA_SHR</a>) + (3&lt;&lt;<a class="code" href="../../d1/d9/lh__core_2gen_8c.html#a1">LH_ADR_BREIT_AUS_LUT</a>)];
00247                         }}
00248 <span class="preprocessor">                        #endif</span>
00249 <span class="preprocessor"></span>
00250 <span class="preprocessor">                        #if LH_DATA_OUT_SIZE_16 &amp;&amp; ! LH_LUT_DATA_SIZE_16</span>
00251 <span class="preprocessor"></span>                        *output0 |= (*output0 &lt;&lt; 8);
00252                         <span class="keywordflow">if</span>( <a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a5">LH_DATA_OUT_COUNT</a> &gt; 1 ){
00253                         *output1 |= (*output1 &lt;&lt; 8);
00254                         *output2 |= (*output2 &lt;&lt; 8);
00255                         <span class="keywordflow">if</span>( <a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a5">LH_DATA_OUT_COUNT</a> &gt; 3 ){
00256                         *output3 |= (*output3 &lt;&lt; 8);
00257                         }}
00258 <span class="preprocessor">                        #endif</span>
00259 <span class="preprocessor"></span>                        
00260                         <span class="keywordflow">if</span> (Mode == <a class="code" href="../../d0/d3/lh__core_2calcenf_8h.html#a1">LH_CALC_ENGINE_P_TO_P</a>)
00261                         {
00262                                 <span class="keywordflow">while</span> (--i)
00263                                 {
00264                                         input0 += inputOffset;
00265                                         output0 += outputOffset;
00266                                         output1 += outputOffset;
00267                                         output2 += outputOffset;
00268                                         output3 += outputOffset;
00269 
00270                                         <span class="keywordflow">if</span> ((*input0 ^ ein_cache)){
00271                                                 <span class="keywordflow">break</span>;
00272                                         }
00273                                         *output0 = output0[-outputOffset];
00274                                         <span class="keywordflow">if</span>( <a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a5">LH_DATA_OUT_COUNT</a> &gt; 1 ){
00275                                         *output1 = output1[-outputOffset];
00276                                         *output2 = output2[-outputOffset];
00277                                         <span class="keywordflow">if</span>( <a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a5">LH_DATA_OUT_COUNT</a> &gt; 3 ){
00278                                         *output3 = output3[-outputOffset];
00279                                         }}
00280                                 }
00281                         }
00282                         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Mode == <a class="code" href="../../d0/d3/lh__core_2calcenf_8h.html#a2">LH_CALC_ENGINE_P_TO_U</a>)
00283                         {
00284                                 <span class="keywordflow">if</span>( <a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a5">LH_DATA_OUT_COUNT</a> == 1 ){
00285                                         *output1 &amp;= Mask;
00286                                 }<span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a5">LH_DATA_OUT_COUNT</a> == 3 ){
00287                                         *output3 &amp;= Mask;
00288                                 }<span class="keywordflow">else</span>{
00289                                         *output4 &amp;= Mask;
00290                                 }
00291                                 <span class="keywordflow">while</span> (--i)
00292                                 {
00293                                         input0 += inputOffset;
00294                                         output0 += outputOffset;
00295                                         output1 += outputOffset;
00296                                         output2 += outputOffset;
00297                                         output3 += outputOffset;
00298                                         output4 += outputOffset;
00299                                         <span class="keywordflow">if</span> ((*input0 ^ ein_cache)){
00300                                                 <span class="keywordflow">break</span>;
00301                                         }
00302                                         *output0 = output0[-outputOffset];
00303                                         <span class="keywordflow">if</span>( <a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a5">LH_DATA_OUT_COUNT</a> &gt; 1 ){
00304                                                 *output1 = output1[-outputOffset];
00305                                                 *output2 = output2[-outputOffset];
00306                                                 <span class="keywordflow">if</span>( <a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a5">LH_DATA_OUT_COUNT</a> &gt; 3 ){
00307                                                         *output3 = output3[-outputOffset];
00308                                                         *output4 &amp;= Mask;
00309                                                 }
00310                                                 <span class="keywordflow">else</span>{
00311                                                         *output3 &amp;= Mask;
00312                                                 }
00313                                         }
00314                                         <span class="keywordflow">else</span>{
00315                                                 *output1 &amp;= Mask;
00316                                         }
00317                                 }
00318                         }
00319                         <span class="keywordflow">else</span>
00320                         {
00321                                 <span class="keywordflow">if</span>( <a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a5">LH_DATA_OUT_COUNT</a> == 1 ){
00322                                         *output1 = (<a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a1">LH_DATA_OUT_TYPE</a>)*input1;
00323                                 }<span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a5">LH_DATA_OUT_COUNT</a> == 3 ){
00324                                         *output3 = (<a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a1">LH_DATA_OUT_TYPE</a>)*input1;
00325                                 }<span class="keywordflow">else</span>{
00326                                         *output4 = (<a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a1">LH_DATA_OUT_TYPE</a>)*input1;
00327                                 }
00328                                 <span class="keywordflow">while</span> (--i)
00329                                 {                                                               <span class="comment">/*U_TO_U*/</span>
00330                                         input0 += inputOffset;
00331                                         input1 += inputOffset;
00332                                         output0 += outputOffset;
00333                                         output1 += outputOffset;
00334                                         output2 += outputOffset;
00335                                         output3 += outputOffset;
00336                                         output4 += outputOffset;
00337                                         <span class="keywordflow">if</span> ((*input0 ^ ein_cache))
00338                                         {
00339                                                 <span class="keywordflow">break</span>;
00340                                         }
00341                                         *output0 = output0[-outputOffset];
00342                                         <span class="keywordflow">if</span>( <a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a5">LH_DATA_OUT_COUNT</a> &gt; 1 ){
00343                                                 *output1 = output1[-outputOffset];
00344                                                 *output2 = output2[-outputOffset];
00345                                                 <span class="keywordflow">if</span>( <a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a5">LH_DATA_OUT_COUNT</a> &gt; 3 ){
00346                                                         *output3 = output3[-outputOffset];
00347                                                         *output4 = (<a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a1">LH_DATA_OUT_TYPE</a>)*input1;
00348                                                 }
00349                                                 <span class="keywordflow">else</span>{
00350                                                         *output3 = (<a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a1">LH_DATA_OUT_TYPE</a>)*input1;
00351                                                 }
00352                                         }
00353                                         <span class="keywordflow">else</span>{
00354                                                 *output1 = (<a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a1">LH_DATA_OUT_TYPE</a>)*input1;
00355                                         }
00356                                 }
00357                         }
00358                 }
00359                 <span class="keywordflow">if</span> (--LineCount)
00360                 {
00361                         j++;
00362                         input0 = (<a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a0">LH_DATA_IN_TYPE</a> *)((<a class="code" href="../../d0/d3/lh__core_2calcenf_8h.html#a5">LH_UINT8</a> *)calcParam-&gt;inputData[0] + j * calcParam-&gt;cmInputBytesPerLine);
00363                         input1 = (<a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a0">LH_DATA_IN_TYPE</a> *)((<a class="code" href="../../d0/d3/lh__core_2calcenf_8h.html#a5">LH_UINT8</a> *)calcParam-&gt;inputData[1] + j * calcParam-&gt;cmInputBytesPerLine);
00364 
00365                         output0 = (<a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a1">LH_DATA_OUT_TYPE</a> *)((<a class="code" href="../../d0/d3/lh__core_2calcenf_8h.html#a5">LH_UINT8</a> *)calcParam-&gt;outputData[0] + j * calcParam-&gt;cmOutputBytesPerLine);
00366                         output1 = (<a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a1">LH_DATA_OUT_TYPE</a> *)((<a class="code" href="../../d0/d3/lh__core_2calcenf_8h.html#a5">LH_UINT8</a> *)calcParam-&gt;outputData[1] + j * calcParam-&gt;cmOutputBytesPerLine);
00367                         output2 = (<a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a1">LH_DATA_OUT_TYPE</a> *)((<a class="code" href="../../d0/d3/lh__core_2calcenf_8h.html#a5">LH_UINT8</a> *)calcParam-&gt;outputData[2] + j * calcParam-&gt;cmOutputBytesPerLine);
00368                         output3 = (<a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a1">LH_DATA_OUT_TYPE</a> *)((<a class="code" href="../../d0/d3/lh__core_2calcenf_8h.html#a5">LH_UINT8</a> *)calcParam-&gt;outputData[3] + j * calcParam-&gt;cmOutputBytesPerLine);
00369                         output4 = (<a class="code" href="../../d2/d6/lh__core_2engine_8c.html#a1">LH_DATA_OUT_TYPE</a> *)((<a class="code" href="../../d0/d3/lh__core_2calcenf_8h.html#a5">LH_UINT8</a> *)calcParam-&gt;outputData[4] + j * calcParam-&gt;cmOutputBytesPerLine);
00370                 }
00371         }
00372         <a class="code" href="../../d6/d9/lh__open_2general_8h.html#a2">LH_END_PROC</a>(<a class="code" href="../../d1/d9/lh__core_2gen_8c.html#a7">LH_CALC_PROC_NAME</a>)
00373         <span class="keywordflow">return</span> 0;
00374 }
00375 <span class="preprocessor">#undef LH_CALC_PROC_NAME</span>
</div></pre><hr size="1"><address style="align: right;"><small>Generated on Sat May 15 19:39:51 2004 for test by
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>

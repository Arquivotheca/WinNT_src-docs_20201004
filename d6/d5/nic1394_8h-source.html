<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>test: nic1394.h Source File</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="../../main.html">Main&nbsp;Page</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Class&nbsp;List</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Class&nbsp;Members</a> | <a class="qindex" href="../../globals.html">File&nbsp;Members</a></div>
<h1>nic1394.h</h1><a href="../../d5/d6/nic1394_8h.html">Go to the documentation of this file.</a><pre class="fragment"><div>00001 <span class="comment">/*++</span>
00002 <span class="comment"></span>
00003 <span class="comment">Copyright (c) 1998  Microsoft Corporation</span>
00004 <span class="comment"></span>
00005 <span class="comment">Module Name:</span>
00006 <span class="comment"></span>
00007 <span class="comment">        nic1394.h</span>
00008 <span class="comment"></span>
00009 <span class="comment">Abstract:</span>
00010 <span class="comment"></span>
00011 <span class="comment">        This module defines the structures, macros, and manifests available</span>
00012 <span class="comment">        to IEE1394-aware network components.</span>
00013 <span class="comment"></span>
00014 <span class="comment">Revision History:</span>
00015 <span class="comment"></span>
00016 <span class="comment">        09/14/1998 JosephJ      Created.</span>
00017 <span class="comment"></span>
00018 <span class="comment">--*/</span>
00019 
00020 <span class="preprocessor">#ifndef _NIC1394_H_</span>
00021 <span class="preprocessor"></span><span class="preprocessor">#define _NIC1394_H_</span>
00022 <span class="preprocessor"></span>
00024 <span class="comment">//                                              ADDRESS FAMILY VERSION INFORMATION</span>
00026 <span class="comment"></span>
00027 <span class="comment">//</span>
00028 <span class="comment">// The current major and minor version, respectively, of the NIC1394 address family.</span>
00029 <span class="comment">//</span>
<a name="l00030"></a><a class="code" href="../../d5/d6/nic1394_8h.html#a0">00030</a> <span class="preprocessor">#define NIC1394_AF_CURRENT_MAJOR_VERSION        5</span>
<a name="l00031"></a><a class="code" href="../../d5/d6/nic1394_8h.html#a1">00031</a> <span class="preprocessor"></span><span class="preprocessor">#define NIC1394_AF_CURRENT_MINOR_VERSION        0</span>
00032 <span class="preprocessor"></span>
00034 <span class="comment">//                                              MEDIA PARAMETERS                                                                         // </span>
00036 <span class="comment"></span>
00037 <span class="comment">//</span>
00038 <span class="comment">// 1394 FIFO Address, consisting of the 64-bit UniqueID and the</span>
00039 <span class="comment">// 48-bit address offset.</span>
00040 <span class="comment">//</span>
<a name="l00041"></a><a class="code" href="../../d4/d2/struct__NIC1394__FIFO__ADDRESS.html">00041</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d4/d2/struct__NIC1394__FIFO__ADDRESS.html">_NIC1394_FIFO_ADDRESS</a>
00042 {
<a name="l00043"></a><a class="code" href="../../d4/d2/struct__NIC1394__FIFO__ADDRESS.html#o0">00043</a>         UINT64                          <a class="code" href="../../d4/d2/struct__NIC1394__FIFO__ADDRESS.html#o0">UniqueID</a>;
<a name="l00044"></a><a class="code" href="../../d4/d2/struct__NIC1394__FIFO__ADDRESS.html#o1">00044</a>         ULONG                   <a class="code" href="../../d4/d2/struct__NIC1394__FIFO__ADDRESS.html#o1">Off_Low</a>;
<a name="l00045"></a><a class="code" href="../../d4/d2/struct__NIC1394__FIFO__ADDRESS.html#o2">00045</a>         <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a>                  <a class="code" href="../../d4/d2/struct__NIC1394__FIFO__ADDRESS.html#o2">Off_High</a>;
00046 
00047 } <a class="code" href="../../d4/d2/struct__NIC1394__FIFO__ADDRESS.html">NIC1394_FIFO_ADDRESS</a>, *<a class="code" href="../../d4/d2/struct__NIC1394__FIFO__ADDRESS.html">PNIC1394_FIFO_ADDRESS</a>;
00048 
00049 
00050 <span class="comment">//      enum to identify which of the two modes of transmission on a 1394 is to be used</span>
00051 <span class="comment">//</span>
00052 <span class="comment">//</span>
00053 
<a name="l00054"></a><a class="code" href="../../d5/d6/nic1394_8h.html#a42">00054</a> <span class="keyword">typedef</span> <span class="keyword">enum</span> <a class="code" href="../../d5/d6/nic1394_8h.html#a42">_NIC1394_ADDRESS_TYPE</a>
00055 {
00056         <a class="code" href="../../d5/d6/nic1394_8h.html#a42a40">NIC1394AddressType_Channel</a>,              <span class="comment">// Indicates this is a channel address</span>
00057         <a class="code" href="../../d5/d6/nic1394_8h.html#a42a41">NIC1394AddressType_FIFO</a>,                 <span class="comment">// Indicates this is a FIFO address</span>
00058 
00059 } <a class="code" href="../../d5/d6/nic1394_8h.html#a21">NIC1394_ADDRESS_TYPE</a>, *<a class="code" href="../../d5/d6/nic1394_8h.html#a22">PNIC1394_ADDRESS_TYPE</a>;
00060 
00061 
00062 
00063 <span class="comment">//</span>
00064 <span class="comment">// General form of a 1394 destination, which can specify either a 1394 channel or</span>
00065 <span class="comment">// a FIFO address. This structure forms part of the 1394 media-specific</span>
00066 <span class="comment">// parameters.</span>
00067 <span class="comment">//</span>
<a name="l00068"></a><a class="code" href="../../d1/d2/struct__NIC1394__DESTINATION.html">00068</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d1/d2/struct__NIC1394__DESTINATION.html">_NIC1394_DESTINATION</a>
00069 {
00070         <span class="keyword">union</span>
00071 <span class="keyword">        </span>{
<a name="l00072"></a><a class="code" href="../../d1/d2/struct__NIC1394__DESTINATION.html#o0">00072</a>                 <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>                    <a class="code" href="../../d1/d2/struct__NIC1394__DESTINATION.html#o0">Channel</a>;     <span class="comment">// IEEE1394 channel number.</span>
<a name="l00073"></a><a class="code" href="../../d1/d2/struct__NIC1394__DESTINATION.html#o1">00073</a>                 <a class="code" href="../../d4/d2/struct__NIC1394__FIFO__ADDRESS.html">NIC1394_FIFO_ADDRESS</a>    <a class="code" href="../../d1/d2/struct__NIC1394__DESTINATION.html#o1">FifoAddress</a>; <span class="comment">// IEEE1394 NodeID and address offset.</span>
00074         };
00075 
00076 
<a name="l00077"></a><a class="code" href="../../d1/d2/struct__NIC1394__DESTINATION.html#o2">00077</a>         <a class="code" href="../../d5/d6/nic1394_8h.html#a21">NIC1394_ADDRESS_TYPE</a>        <a class="code" href="../../d1/d2/struct__NIC1394__DESTINATION.html#o2">AddressType</a>; <span class="comment">// Address- asynch or isoch  </span>
00078 
00079 } <a class="code" href="../../d1/d2/struct__NIC1394__DESTINATION.html">NIC1394_DESTINATION</a>, *<a class="code" href="../../d1/d2/struct__NIC1394__DESTINATION.html">PNIC1394_DESTINATION</a>;
00080 
00081 <span class="comment">//</span>
00082 <span class="comment">// Special channels  values</span>
00083 <span class="comment">//</span>
<a name="l00084"></a><a class="code" href="../../d5/d6/nic1394_8h.html#a2">00084</a> <span class="preprocessor">#define NIC1394_ANY_CHANNEL             ((UINT)-1) // miniport should pick channel.</span>
<a name="l00085"></a><a class="code" href="../../d5/d6/nic1394_8h.html#a3">00085</a> <span class="preprocessor"></span><span class="preprocessor">#define NIC1394_BROADCAST_CHANNEL       ((UINT)-2) // special broadcast channel.</span>
00086 <span class="preprocessor"></span>
00087 <span class="comment">//</span>
00088 <span class="comment">// This is the value of the ParamType field in the CO_SPECIFIC_PARAMETERS structure</span>
00089 <span class="comment">// when the Parameters[] field contains IEEE1394 media specific values in the</span>
00090 <span class="comment">// structure NIC1394_MEDIA_PARAMETERS.</span>
00091 <span class="comment">//</span>
<a name="l00092"></a><a class="code" href="../../d5/d6/nic1394_8h.html#a4">00092</a> <span class="preprocessor">#define NIC1394_MEDIA_SPECIFIC          0x13940000</span>
00093 <span class="preprocessor"></span>
00094 
00095 <span class="comment">//</span>
00096 <span class="comment">// NOTE:</span>
00097 <span class="comment">// The CO_MEDIA_PARAMETERS.Flags field for FIFO vcs must specify either TRANSMIT_VC</span>
00098 <span class="comment">// or RECEIVE_VC, not both. If RECEIVE_VC is specified for a FIFO vc, this vc is</span>
00099 <span class="comment">// used to receive on a local FIFO. In this case, the  Destination.RecvFIFO field</span>
00100 <span class="comment">// must be set to all-0s when creating the vc. On activation of the vc,</span>
00101 <span class="comment">// this field of the updated media parameters will contain the local nodes unique ID</span>
00102 <span class="comment">// and the allocated FIFO address.</span>
00103 <span class="comment">// </span>
00104 
00105 <span class="comment">// </span>
00106 <span class="comment">// 1394 Specific Media parameters - this is the Media specific structure for 1394</span>
00107 <span class="comment">// that goes into MediaParameters-&gt;MediaSpecific.Parameters.</span>
00108 <span class="comment">//</span>
<a name="l00109"></a><a class="code" href="../../d9/d2/struct__NIC1394__MEDIA__PARAMETERS.html">00109</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d9/d2/struct__NIC1394__MEDIA__PARAMETERS.html">_NIC1394_MEDIA_PARAMETERS</a>
00110 {
00111         <span class="comment">//</span>
00112         <span class="comment">// Identifies destination type (channel or FIFO) and type-specific address.</span>
00113         <span class="comment">//</span>
<a name="l00114"></a><a class="code" href="../../d9/d2/struct__NIC1394__MEDIA__PARAMETERS.html#o0">00114</a>         <a class="code" href="../../d1/d2/struct__NIC1394__DESTINATION.html">NIC1394_DESTINATION</a>     <a class="code" href="../../d9/d2/struct__NIC1394__MEDIA__PARAMETERS.html#o0">Destination</a>;
00115 
00116         <span class="comment">//</span>
00117         <span class="comment">// Bitmap encoding characteristics of the vc. One or  more NIC1394_VCFLAG_*</span>
00118         <span class="comment">// values.</span>
00119         <span class="comment">//</span>
<a name="l00120"></a><a class="code" href="../../d9/d2/struct__NIC1394__MEDIA__PARAMETERS.html#o1">00120</a>         ULONG                                   <a class="code" href="../../d9/d2/struct__NIC1394__MEDIA__PARAMETERS.html#o1">Flags</a>;                  
00121 
00122         <span class="comment">//</span>
00123         <span class="comment">// Maximum size, in bytes, of blocks to be sent on this vc. Must be set to 0</span>
00124         <span class="comment">// if this is a recv-only VCs. The miniport will choose a block size that is a</span>
00125         <span class="comment">// minimum of this value and the value dictated by the bus speed map.</span>
00126         <span class="comment">// Special value (ULONG -1) indicates "maximum possible block size."</span>
<a name="l00127"></a><a class="code" href="../../d9/d2/struct__NIC1394__MEDIA__PARAMETERS.html#o2">00127</a>         <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>                                    <a class="code" href="../../d9/d2/struct__NIC1394__MEDIA__PARAMETERS.html#o2">MaxSendBlockSize</a>;
00128 
00129         <span class="comment">//</span>
00130         <span class="comment">// One of the SCODE_* constants defined in 1394.h. Indicates</span>
00131         <span class="comment">// the maximum speed to be used for blocks sent on this vc. Must be set to 0</span>
00132         <span class="comment">// if this is a recv-only VC. The miniport will choose a speed that is a minimum</span>
00133         <span class="comment">// of this value and the value dicated by the bus speed map.</span>
00134         <span class="comment">// Special value (ULONG -1) indicates "maximum possible speed."</span>
00135         <span class="comment">//</span>
00136         <span class="comment">// TODO: change to ... MaxSendSpeedCode;</span>
00137         <span class="comment">//</span>
<a name="l00138"></a><a class="code" href="../../d9/d2/struct__NIC1394__MEDIA__PARAMETERS.html#o3">00138</a>         <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>                                    <a class="code" href="../../d9/d2/struct__NIC1394__MEDIA__PARAMETERS.html#o3">MaxSendSpeed</a>;
00139 
00140         <span class="comment">//</span>
00141         <span class="comment">// Size, in bytes, of the largest packet that will be sent or received on</span>
00142         <span class="comment">// this VC. The miniport may use this information to set up internal buffers</span>
00143         <span class="comment">// for link-layer fragmentation and reassembly. The miniport will</span>
00144         <span class="comment">// fail attempts to send packets and will discard received packets if the</span>
00145         <span class="comment">// size of these packets is larger than the MTU.</span>
00146         <span class="comment">//</span>
<a name="l00147"></a><a class="code" href="../../d9/d2/struct__NIC1394__MEDIA__PARAMETERS.html#o4">00147</a>         <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>                                    <a class="code" href="../../d9/d2/struct__NIC1394__MEDIA__PARAMETERS.html#o4">MTU</a>;
00148         <span class="comment">//</span>
00149         <span class="comment">// Amount of bandwidth to reserve, in units of bytes per isochronous frame.</span>
00150         <span class="comment">// Applies only for isochronous transmission, and must be set to 0 for</span>
00151         <span class="comment">// asynchronous transmission (i.e., if the NIC1394_VCFLAG_ISOCHRONOUS bit is 0).</span>
00152         <span class="comment">//</span>
<a name="l00153"></a><a class="code" href="../../d9/d2/struct__NIC1394__MEDIA__PARAMETERS.html#o5">00153</a>         <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>                                    <a class="code" href="../../d9/d2/struct__NIC1394__MEDIA__PARAMETERS.html#o5">Bandwidth</a>;      
00154 
00155         <span class="comment">//</span>
00156         <span class="comment">// One or more NIC1394_FRAMETYPE_* values. The miniport will attempt to send up</span>
00157         <span class="comment">// only pkts with these protocols. However it may send other pkts.</span>
00158         <span class="comment">// The client should be able to deal with this. Must be set to 0 if</span>
00159         <span class="comment">// no framing is used (i.e., if the NIC1394_VCFLAG_FRAMED bit is 0).</span>
00160         <span class="comment">//</span>
<a name="l00161"></a><a class="code" href="../../d9/d2/struct__NIC1394__MEDIA__PARAMETERS.html#o6">00161</a>         ULONG                                   <a class="code" href="../../d9/d2/struct__NIC1394__MEDIA__PARAMETERS.html#o6">RecvFrameTypes</a>;
00162 
00163 } <a class="code" href="../../d9/d2/struct__NIC1394__MEDIA__PARAMETERS.html">NIC1394_MEDIA_PARAMETERS</a>, *<a class="code" href="../../d9/d2/struct__NIC1394__MEDIA__PARAMETERS.html">PNIC1394_MEDIA_PARAMETERS</a>;
00164 
00165 
00166 <span class="comment">//</span>
00167 <span class="comment">// NIC1394_MEDIA_PARAMETERS.Flags bitfield values</span>
00168 <span class="comment">//</span>
00169 
00170 <span class="comment">//</span>
00171 <span class="comment">// Indicates VC will be used for isochronous transmission.</span>
00172 <span class="comment">//</span>
<a name="l00173"></a><a class="code" href="../../d5/d6/nic1394_8h.html#a5">00173</a> <span class="preprocessor">#define NIC1394_VCFLAG_ISOCHRONOUS              (0x1 &lt;&lt; 1)</span>
00174 <span class="preprocessor"></span>
00175 <span class="comment">//</span>
00176 <span class="comment">// Indicates that the vc is used for framed data. If set, the miniport will</span>
00177 <span class="comment">// implement link-level fragmentation and reassembly. If clear, the miniport</span>
00178 <span class="comment">// will treat data sent and received on this vc as raw data.</span>
00179 <span class="comment">//</span>
<a name="l00180"></a><a class="code" href="../../d5/d6/nic1394_8h.html#a6">00180</a> <span class="preprocessor">#define NIC1394_VCFLAG_FRAMED                   (0x1 &lt;&lt; 2)</span>
00181 <span class="preprocessor"></span>
00182 <span class="comment">//</span>
00183 <span class="comment">// Indicates the miniport should allocate the necessary bus resources.</span>
00184 <span class="comment">// Currently this only applies for non-broadcast channels, in which case</span>
00185 <span class="comment">// the bus resources consist of the network channel number and (for isochronous</span>
00186 <span class="comment">// vc's) the bandwidth specified in Bandwidth field.</span>
00187 <span class="comment">// This bit does not apply (and should be 0) when creating the broadcast channel</span>
00188 <span class="comment">// and either transmit or receive FIFO vcs.</span>
00189 <span class="comment">//</span>
<a name="l00190"></a><a class="code" href="../../d5/d6/nic1394_8h.html#a7">00190</a> <span class="preprocessor">#define NIC1394_VCFLAG_ALLOCATE                 (0x1 &lt;&lt; 3)</span>
00191 <span class="preprocessor"></span>
00192 <span class="comment">//</span>
00193 <span class="comment">// End of NIC1394_MEDIA_PARAMETERS.Flags bitfield values.</span>
00194 <span class="comment">//</span>
00195 
00196 <span class="comment">//</span>
00197 <span class="comment">// NIC1394_MEDIA_PARAMETERS.FrameType bitfield values</span>
00198 <span class="comment">//</span>
<a name="l00199"></a><a class="code" href="../../d5/d6/nic1394_8h.html#a8">00199</a> <span class="preprocessor">#define NIC1394_FRAMETYPE_ARP           (0x1&lt;&lt;0) // Ethertype 0x806</span>
<a name="l00200"></a><a class="code" href="../../d5/d6/nic1394_8h.html#a9">00200</a> <span class="preprocessor"></span><span class="preprocessor">#define NIC1394_FRAMETYPE_IPV4          (0x1&lt;&lt;1) // Ethertype 0x800</span>
<a name="l00201"></a><a class="code" href="../../d5/d6/nic1394_8h.html#a10">00201</a> <span class="preprocessor"></span><span class="preprocessor">#define NIC1394_FRAMETYPE_IPV4MCAP      (0x1&lt;&lt;2) // Ethertype 0x8861</span>
00202 <span class="preprocessor"></span>
00203 
00204 
00206 <span class="comment">//                          INFORMATIONAL OIDs                                   // </span>
00208 <span class="comment"></span>
00209 <span class="comment">//</span>
00210 <span class="comment">// the structure for returning basic information about the miniport</span>
00211 <span class="comment">// returned in response to OID_NIC1394_LOCAL_NODE_INFO. Associated with</span>
00212 <span class="comment">// the address family handle.</span>
00213 <span class="comment">//</span>
<a name="l00214"></a><a class="code" href="../../d8/d2/struct__NIC1394__LOCAL__NODE__INFO.html">00214</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d8/d2/struct__NIC1394__LOCAL__NODE__INFO.html">_NIC1394_LOCAL_NODE_INFO</a>
00215 {
<a name="l00216"></a><a class="code" href="../../d8/d2/struct__NIC1394__LOCAL__NODE__INFO.html#o0">00216</a>         UINT64                                  <a class="code" href="../../d8/d2/struct__NIC1394__LOCAL__NODE__INFO.html#o0">UniqueID</a>;                       <span class="comment">// This node's 64-bit Unique ID.</span>
<a name="l00217"></a><a class="code" href="../../d8/d2/struct__NIC1394__LOCAL__NODE__INFO.html#o1">00217</a>         ULONG                                   <a class="code" href="../../d8/d2/struct__NIC1394__LOCAL__NODE__INFO.html#o1">BusGeneration</a>;          <span class="comment">// 1394 Bus generation ID.</span>
<a name="l00218"></a><a class="code" href="../../d8/d2/struct__NIC1394__LOCAL__NODE__INFO.html#o2">00218</a>         NODE_ADDRESS                    <a class="code" href="../../d8/d2/struct__NIC1394__LOCAL__NODE__INFO.html#o2">NodeAddress</a>;            <span class="comment">// Local nodeID for the current bus</span>
00219                                                                                                 <span class="comment">// generation.</span>
<a name="l00220"></a><a class="code" href="../../d8/d2/struct__NIC1394__LOCAL__NODE__INFO.html#o3">00220</a>         <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a>                                  <a class="code" href="../../d8/d2/struct__NIC1394__LOCAL__NODE__INFO.html#o3">Reserved</a>;                       <span class="comment">// Padding.</span>
<a name="l00221"></a><a class="code" href="../../d8/d2/struct__NIC1394__LOCAL__NODE__INFO.html#o4">00221</a>         <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>                                    <a class="code" href="../../d8/d2/struct__NIC1394__LOCAL__NODE__INFO.html#o4">MaxRecvBlockSize</a>;       <span class="comment">// Maximum size, in bytes, of blocks</span>
00222                                                                                                 <span class="comment">// that can be read.</span>
<a name="l00223"></a><a class="code" href="../../d8/d2/struct__NIC1394__LOCAL__NODE__INFO.html#o5">00223</a>         <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>                                    <a class="code" href="../../d8/d2/struct__NIC1394__LOCAL__NODE__INFO.html#o5">MaxRecvSpeed</a>;           <span class="comment">// Max speed which can be accepted</span>
00224                                                                                                 <span class="comment">// -- minimum</span>
00225                                                                                                 <span class="comment">// of the max local link speed and</span>
00226                                                                                                 <span class="comment">// the max local PHY speed.</span>
00227 
00228 } <a class="code" href="../../d8/d2/struct__NIC1394__LOCAL__NODE__INFO.html">NIC1394_LOCAL_NODE_INFO</a>, *<a class="code" href="../../d8/d2/struct__NIC1394__LOCAL__NODE__INFO.html">PNIC1394_LOCAL_NODE_INFO</a>;
00229 
00230 
00231 <span class="comment">//</span>
00232 <span class="comment">// The structure for returning basic information about the specified vc</span>
00233 <span class="comment">// returned in response to OID_NIC1394_VC_INFO. Associated with</span>
00234 <span class="comment">// a vc handle</span>
00235 <span class="comment">//</span>
<a name="l00236"></a><a class="code" href="../../d0/d3/struct__NIC1394__VC__INFO.html">00236</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d0/d3/struct__NIC1394__VC__INFO.html">_NIC1394_VC_INFO</a>
00237 {
00238         <span class="comment">//</span>
00239         <span class="comment">// Channel or (unique-ID,offset). In the case of a recv (local) FIFO vc,</span>
00240         <span class="comment">// this will be set to the local node's unique ID and address offset.</span>
00241         <span class="comment">//</span>
<a name="l00242"></a><a class="code" href="../../d0/d3/struct__NIC1394__VC__INFO.html#o0">00242</a>         <a class="code" href="../../d1/d2/struct__NIC1394__DESTINATION.html">NIC1394_DESTINATION</a> <a class="code" href="../../d0/d3/struct__NIC1394__VC__INFO.html#o0">Destination</a>;
00243 
00244 } <a class="code" href="../../d0/d3/struct__NIC1394__VC__INFO.html">NIC1394_VC_INFO</a>, *<a class="code" href="../../d0/d3/struct__NIC1394__VC__INFO.html">PNIC1394_VC_INFO</a>;
00245 
00246 
00247 
00249 <span class="comment">//                          INDICATIONS                                          // </span>
00251 <span class="comment"></span><span class="comment">// Bus Reset</span>
00252 <span class="comment">// Params: NIC1394_LOCAL_NODE_INFO</span>
00253 
00255 <span class="comment">//                          PACKET FORMATS                                       // </span>
00257 <span class="comment"></span>
00258 
00259 <span class="comment">//</span>
00260 <span class="comment">// GASP Header, which prefixes all ip/1394 pkts sent over channels.</span>
00261 <span class="comment">// TODO: move this withing NIC1394, because it is not exposed to protocols.</span>
00262 <span class="comment">//</span>
<a name="l00263"></a><a class="code" href="../../d7/d2/struct__NIC1394__GASP__HEADER.html">00263</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d7/d2/struct__NIC1394__GASP__HEADER.html">_NIC1394_GASP_HEADER</a>
00264 {
<a name="l00265"></a><a class="code" href="../../d7/d2/struct__NIC1394__GASP__HEADER.html#o0">00265</a>         <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a>  <a class="code" href="../../d7/d2/struct__NIC1394__GASP__HEADER.html#o0">source_ID</a>;
<a name="l00266"></a><a class="code" href="../../d7/d2/struct__NIC1394__GASP__HEADER.html#o1">00266</a>         <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a>  <a class="code" href="../../d7/d2/struct__NIC1394__GASP__HEADER.html#o1">specifier_ID_hi</a>;
<a name="l00267"></a><a class="code" href="../../d7/d2/struct__NIC1394__GASP__HEADER.html#o2">00267</a>         UCHAR   <a class="code" href="../../d7/d2/struct__NIC1394__GASP__HEADER.html#o2">specifier_ID_lo</a>;
<a name="l00268"></a><a class="code" href="../../d7/d2/struct__NIC1394__GASP__HEADER.html#o3">00268</a>         UCHAR   <a class="code" href="../../d7/d2/struct__NIC1394__GASP__HEADER.html#o3">version</a>[3];
00269 
00270 }  <a class="code" href="../../d7/d2/struct__NIC1394__GASP__HEADER.html">NIC1394_GASP_HEADER</a>;
00271 
00272 <span class="comment">//</span>
00273 <span class="comment">// Unfragmented encapsulation header.</span>
00274 <span class="comment">//</span>
<a name="l00275"></a><a class="code" href="../../d3/d2/struct__NIC1394__ENCAPSULATION__HEADER.html">00275</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d3/d2/struct__NIC1394__ENCAPSULATION__HEADER.html">_NIC1394_ENCAPSULATION_HEADER</a>
00276 {
00277         <span class="comment">// The Reserved field must be set to 0.</span>
00278         <span class="comment">//</span>
<a name="l00279"></a><a class="code" href="../../d3/d2/struct__NIC1394__ENCAPSULATION__HEADER.html#o0">00279</a>         <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> <a class="code" href="../../d3/d2/struct__NIC1394__ENCAPSULATION__HEADER.html#o0">Reserved</a>;
00280 
00281         <span class="comment">// The EtherType field is set to the byte-swapped version of one of the</span>
00282         <span class="comment">// constants defined immediately below. </span>
00283         <span class="comment">//</span>
<a name="l00284"></a><a class="code" href="../../d3/d2/struct__NIC1394__ENCAPSULATION__HEADER.html#o1">00284</a>         <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> <a class="code" href="../../d3/d2/struct__NIC1394__ENCAPSULATION__HEADER.html#o1">EtherType</a>;
00285 
00286         <span class="comment">// Ethertypes in machine byte order. These values need to be byteswapped</span>
00287         <span class="comment">// before they are sent on the wire.</span>
00288         <span class="comment">//</span>
<a name="l00289"></a><a class="code" href="../../d5/d6/nic1394_8h.html#a11">00289</a> <span class="preprocessor">        #define NIC1394_ETHERTYPE_IP    0x800</span>
<a name="l00290"></a><a class="code" href="../../d5/d6/nic1394_8h.html#a12">00290</a> <span class="preprocessor"></span><span class="preprocessor">        #define NIC1394_ETHERTYPE_ARP   0x806</span>
<a name="l00291"></a><a class="code" href="../../d5/d6/nic1394_8h.html#a13">00291</a> <span class="preprocessor"></span><span class="preprocessor">        #define NIC1394_ETHERTYPE_MCAP  0x8861</span>
00292 <span class="preprocessor"></span>
00293 } <a class="code" href="../../d3/d2/struct__NIC1394__ENCAPSULATION__HEADER.html">NIC1394_ENCAPSULATION_HEADER</a>, *<a class="code" href="../../d3/d2/struct__NIC1394__ENCAPSULATION__HEADER.html">PNIC1394_ENCAPSULATION_HEADER</a>;
00294 
00295 <span class="comment">//</span>
00296 <span class="comment">// TODO: get rid of NIC1394_ENCAPSULATION_HEADER</span>
00297 <span class="comment">//</span>
00298 <span class="keyword">typedef</span>
00299 <a class="code" href="../../d3/d2/struct__NIC1394__ENCAPSULATION__HEADER.html">NIC1394_ENCAPSULATION_HEADER</a>
<a name="l00300"></a><a class="code" href="../../d5/d6/nic1394_8h.html#a35">00300</a> <a class="code" href="../../d3/d2/struct__NIC1394__ENCAPSULATION__HEADER.html">NIC1394_UNFRAGMENTED_HEADER</a>, *<a class="code" href="../../d3/d2/struct__NIC1394__ENCAPSULATION__HEADER.html">PNIC1394_UNFRAGMENTED_HEADER</a>;
00301 
00302 
00303 <span class="comment">//</span>
00304 <span class="comment">//                      FRAGMENTED PACKET FORMATS</span>
00305 <span class="comment">//</span>
00306 <span class="comment">//              TODO: move these to inside NIC1394, because they are only</span>
00307 <span class="comment">//              used within NIC1394.</span>
00308 <span class="comment">//</span>
00309 
00310 <span class="comment">//</span>
00311 <span class="comment">// Fragmented Encapsulation header: first fragment</span>
00312 <span class="comment">//</span>
<a name="l00313"></a><a class="code" href="../../d5/d2/struct__NIC1394__FIRST__FRAGMENT__HEADER.html">00313</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d5/d2/struct__NIC1394__FIRST__FRAGMENT__HEADER.html">_NIC1394_FIRST_FRAGMENT_HEADER</a>
00314 {
00315         <span class="comment">// Contains the 2-bit "lf" field and the 12-bit "buffer_size" field.</span>
00316         <span class="comment">// Use the macros immediately below to extract the above fields from</span>
00317         <span class="comment">// the lfbufsz. This field needs to be byteswapped before it is sent out</span>
00318         <span class="comment">// on the wire.</span>
00319         <span class="comment">//</span>
<a name="l00320"></a><a class="code" href="../../d5/d2/struct__NIC1394__FIRST__FRAGMENT__HEADER.html#o0">00320</a>         <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a>  <a class="code" href="../../d5/d2/struct__NIC1394__FIRST__FRAGMENT__HEADER.html#o0">lfbufsz</a>;
00321 
<a name="l00322"></a><a class="code" href="../../d5/d6/nic1394_8h.html#a14">00322</a> <span class="preprocessor">        #define NIC1394_LF_FROM_LFBUFSZ(_lfbufsz) \</span>
00323 <span class="preprocessor">                                                        ((_lfbufz) &gt;&gt; 14)</span>
00324 <span class="preprocessor"></span>
<a name="l00325"></a><a class="code" href="../../d5/d6/nic1394_8h.html#a15">00325</a> <span class="preprocessor">        #define NIC1394_BUFFER_SIZE_FROM_LFBUFSZ(_lfbufsz) \</span>
00326 <span class="preprocessor">                                                        ((_lfbufz) &amp; 0xfff)</span>
00327 <span class="preprocessor"></span>
<a name="l00328"></a><a class="code" href="../../d5/d6/nic1394_8h.html#a16">00328</a> <span class="preprocessor">        #define NIC1394_MAX_FRAGMENT_BUFFER_SIZE        0xfff</span>
00329 <span class="preprocessor"></span>
00330         <span class="comment">//</span>
00331         <span class="comment">// specifies what the packet is - an IPV4, ARP, or MCAP packet</span>
00332         <span class="comment">//</span>
<a name="l00333"></a><a class="code" href="../../d5/d2/struct__NIC1394__FIRST__FRAGMENT__HEADER.html#o1">00333</a>         <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> <a class="code" href="../../d5/d2/struct__NIC1394__FIRST__FRAGMENT__HEADER.html#o1">EtherType</a>;
00334 
00335 
00336         <span class="comment">// Opaque datagram label. There is no need to byteswap this field before it</span>
00337         <span class="comment">// is sent out on the wire.</span>
00338         <span class="comment">//</span>
<a name="l00339"></a><a class="code" href="../../d5/d2/struct__NIC1394__FIRST__FRAGMENT__HEADER.html#o2">00339</a>         <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> <a class="code" href="../../d5/d2/struct__NIC1394__FIRST__FRAGMENT__HEADER.html#o2">dgl</a>;
00340 
00341         <span class="comment">// Must be set to 0</span>
00342         <span class="comment">//</span>
<a name="l00343"></a><a class="code" href="../../d5/d2/struct__NIC1394__FIRST__FRAGMENT__HEADER.html#o3">00343</a>         <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> <a class="code" href="../../d5/d2/struct__NIC1394__FIRST__FRAGMENT__HEADER.html#o3">reserved</a>;
00344 
00345 }  <a class="code" href="../../d5/d2/struct__NIC1394__FIRST__FRAGMENT__HEADER.html">NIC1394_FIRST_FRAGMENT_HEADER</a>, *<a class="code" href="../../d5/d2/struct__NIC1394__FIRST__FRAGMENT__HEADER.html">PNIC1394_FIRST_FRAGMENT_HEADER</a>;
00346 
00347 <span class="comment">//</span>
00348 <span class="comment">// Fragmented Encapsulation header: second and subsequent fragments</span>
00349 <span class="comment">//</span>
<a name="l00350"></a><a class="code" href="../../d6/d2/struct__NIC1394__FRAGMENT__HEADER.html">00350</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d6/d2/struct__NIC1394__FRAGMENT__HEADER.html">_NIC1394_FRAGMENT_HEADER</a>
00351 {
00352 <span class="preprocessor">#if OBSOLETE</span>
00353 <span class="preprocessor"></span>        ULONG <a class="code" href="../../d3/d8/aug98_2test_2main_8c.html#a18">lf</a>:2;                         <span class="comment">// Bits 0-1</span>
00354         ULONG rsv0:2;                       <span class="comment">// Bits 2-3</span>
00355         ULONG buffer_size:12;               <span class="comment">// Bits 4-15</span>
00356 
00357         ULONG rsv1:4;                       <span class="comment">// Bits 16-19</span>
00358         ULONG <a class="code" href="../../d6/d2/struct__NIC1394__FRAGMENT__HEADER.html#o2">fragment_offset</a>:12;           <span class="comment">// Bits 20-31</span>
00359 
00360         ULONG <a class="code" href="../../d6/d2/struct__NIC1394__FRAGMENT__HEADER.html#o1">dgl</a>:16;                       <span class="comment">// Bits 0-15</span>
00361 
00362         ULONG reserved:16;                      <span class="comment">// Bits 16-32 </span>
00363 <span class="preprocessor">#endif // OBSOLETE</span>
00364 <span class="preprocessor"></span>
00365         <span class="comment">// Contains the 2-bit "lf" field and the 12-bit "buffer_size" field.</span>
00366         <span class="comment">// The format is the same as NIC1394_FIRST_FRAGMENT_HEADER.lfbufsz.</span>
00367         <span class="comment">//</span>
<a name="l00368"></a><a class="code" href="../../d6/d2/struct__NIC1394__FRAGMENT__HEADER.html#o0">00368</a>         <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a>  <a class="code" href="../../d6/d2/struct__NIC1394__FRAGMENT__HEADER.html#o0">lfbufsz</a>;
00369 
00370         <span class="comment">// Opaque datagram label. There is no need to byteswap this field before it</span>
00371         <span class="comment">// is setn out on the wire.</span>
00372         <span class="comment">//</span>
<a name="l00373"></a><a class="code" href="../../d6/d2/struct__NIC1394__FRAGMENT__HEADER.html#o1">00373</a>         <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> <a class="code" href="../../d6/d2/struct__NIC1394__FRAGMENT__HEADER.html#o1">dgl</a>;
00374 
00375         <span class="comment">// Fragment offset. Must be less than or equal to NIC1394_MAX_FRAGMENT_OFFSET.</span>
00376         <span class="comment">// This field needs to be byteswapped before it is sent out on the wire.</span>
00377         <span class="comment">//</span>
<a name="l00378"></a><a class="code" href="../../d6/d2/struct__NIC1394__FRAGMENT__HEADER.html#o2">00378</a>         <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> <a class="code" href="../../d6/d2/struct__NIC1394__FRAGMENT__HEADER.html#o2">fragment_offset</a>;
00379 
<a name="l00380"></a><a class="code" href="../../d5/d6/nic1394_8h.html#a17">00380</a> <span class="preprocessor">        #define NIC1394_MAX_FRAGMENT_OFFSET 0xfff</span>
00381 <span class="preprocessor"></span>
00382 }  <a class="code" href="../../d6/d2/struct__NIC1394__FRAGMENT__HEADER.html">NIC1394_FRAGMENT_HEADER</a>, *<a class="code" href="../../d6/d2/struct__NIC1394__FRAGMENT__HEADER.html">PNIC1394_FRAGMENT_HEADER</a>;
00383 
00384 
00385 
00386 
00387 
<a name="l00388"></a><a class="code" href="../../d5/d6/nic1394_8h.html#a18">00388</a> <span class="preprocessor">#define OID_1394_ISSUE_BUS_RESET                0x0C010201</span>
00389 <span class="preprocessor"></span>
00390 <span class="preprocessor">#endif  //       _NIC1394_H_</span>
00391 <span class="preprocessor"></span>
00392 
00393 
</div></pre><hr size="1"><address style="align: right;"><small>Generated on Sat May 15 19:40:57 2004 for test by
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>

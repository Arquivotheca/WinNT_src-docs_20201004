<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>test: mdiwin.c File Reference</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="../../main.html">Main&nbsp;Page</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Class&nbsp;List</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Class&nbsp;Members</a> | <a class="qindex" href="../../globals.html">File&nbsp;Members</a></div>
<h1>mdiwin.c File Reference</h1><code>#include "<a class="el" href="../../d8/d2/w32_2ntuser_2client_2precomp_8h-source.html">precomp.h</a>"</code><br>

<p>
<a href="../../d7/d4/mdiwin_8c-source.html">Go to the source code of this file.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d8/structtagARRANGEWINDOWSDATA.html">tagARRANGEWINDOWSDATA</a></td></tr>

<tr><td colspan=2><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d5/mdiwin_8c.html#a0">TITLE_EXTRA</a>&nbsp;&nbsp;&nbsp;5</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d5/mdiwin_8c.html#a1">MAX_TITLE_LEN</a>&nbsp;&nbsp;&nbsp;160</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d5/mdiwin_8c.html#a2">SBJ_HORZ</a>&nbsp;&nbsp;&nbsp;HAS_SBHORZ</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d5/mdiwin_8c.html#a3">SBJ_VERT</a>&nbsp;&nbsp;&nbsp;HAS_SBVERT</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d5/mdiwin_8c.html#a4">SBJ_BOTH</a>&nbsp;&nbsp;&nbsp;(SBJ_HORZ | SBJ_VERT)</td></tr>

<tr><td colspan=2><br><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d4/d8/structtagARRANGEWINDOWSDATA.html">tagARRANGEWINDOWSDATA</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d5/mdiwin_8c.html#a5">ARRANGEWINDOWSDATA</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d4/d8/structtagARRANGEWINDOWSDATA.html">tagARRANGEWINDOWSDATA</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d5/mdiwin_8c.html#a6">PARRANGEWINDOWSDATA</a></td></tr>

<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d5/mdiwin_8c.html#a7">xxxSetFrameTitle</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwndFrame, <a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwndMDI, LPWSTR lpch)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d5/mdiwin_8c.html#a8">TranslateMDISysAccel</a> (HWND hwnd, LPMSG lpMsg)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d5/mdiwin_8c.html#a9">ByteOutsetRect</a> (LPRECT lprc)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d5/mdiwin_8c.html#a10">CalcClientScrolling</a> (HWND hwnd, UINT sbj, BOOL fIgnoreMin)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d5/mdiwin_8c.html#a11">ScrollMDIChildren</a> (HWND hwnd, int nCtl, UINT wCmd, int iThumbPos)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d5/mdiwin_8c.html#a12">ScrollChildren</a> (HWND hwnd, UINT wMsg, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> wParam)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d5/mdiwin_8c.html#a13">RecalculateScrollRanges</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwndParent, BOOL fIgnoreMin)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d5/mdiwin_8c.html#a14">GetCascadeWindowPos</a> (LPCRECT prcClient, int iWindow, LPRECT lprc)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d5/mdiwin_8c.html#a15">MDICheckCascadeRect</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwndClient, LPRECT lprc)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d5/mdiwin_8c.html#a16">UnmaximizeChildWindows</a> (HWND hwndParent)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>WORD&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d5/mdiwin_8c.html#a17">ArrangeWindows</a> (HWND hwndParent, UINT flags, CONST RECT *lpRect, UINT chwnd, CONST HWND *ahwnd, MONITORENUMPROC lpfnEnum)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d5/mdiwin_8c.html#a18">GetParentArrangeRect</a> (<a class="el" href="../../d4/d8/structtagARRANGEWINDOWSDATA.html">PARRANGEWINDOWSDATA</a> pawd, <a class="el" href="../../d0/d2/structtagMONITOR.html">PMONITOR</a> pMonitor, LPRECT lprc)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d5/mdiwin_8c.html#a19">ValidatePositionableWindow</a> (HWND hwndChild, <a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwndParent, <a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwndDesktop, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwMDIFlags, <a class="el" href="../../d0/d2/structtagMONITOR.html">PMONITOR</a> pMonitor, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> *pdwSWPFlags)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL CALLBACK&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d5/mdiwin_8c.html#a20">CascadeWindowsEnum</a> (HMONITOR hmonitor, HDC hdc, LPRECT lprc, LPARAM lparam)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>WORD&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d5/mdiwin_8c.html#a21">CascadeWindows</a> (HWND hwndParent, UINT flags, CONST RECT *lpRect, UINT chwnd, CONST HWND *ahwnd)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL CALLBACK&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d5/mdiwin_8c.html#a22">TileWindowsEnum</a> (HMONITOR hmonitor, HDC hdc, LPRECT lprc, LPARAM lparam)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>WORD&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d5/mdiwin_8c.html#a23">TileWindows</a> (HWND hwndParent, UINT flags, CONST RECT *lpRect, UINT chwnd, CONST HWND *ahwnd)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d5/mdiwin_8c.html#a24">xxxMDIActivate</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, <a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwndActivate)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d5/mdiwin_8c.html#a25">xxxMDINext</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwndMDI, <a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, BOOL fPrevWindow)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>HWND&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d5/mdiwin_8c.html#a26">CreateMDIWindowA</a> (LPCSTR pClassName, LPCSTR pWindowName, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwStyle, int x, int y, int nWidth, int nHeight, HWND hwndParent, HINSTANCE hModule, LPARAM lParam)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>HWND&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d5/mdiwin_8c.html#a27">CreateMDIWindowW</a> (LPCWSTR pClassName, LPCWSTR pWindowName, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwStyle, int x, int y, int nWidth, int nHeight, HWND hwndParent, HINSTANCE hModule, LPARAM lParam)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d5/mdiwin_8c.html#a28">xxxMDIDestroy</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, HWND hwndVictim)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LRESULT&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d5/mdiwin_8c.html#a29">MDIClientWndProcWorker</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, UINT message, WPARAM wParam, LPARAM lParam, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> fAnsi)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LRESULT WINAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d5/mdiwin_8c.html#a30">MDIClientWndProcA</a> (HWND hwnd, UINT message, WPARAM wParam, LPARAM lParam)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LRESULT WINAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d5/mdiwin_8c.html#a31">MDIClientWndProcW</a> (HWND hwnd, UINT message, WPARAM wParam, LPARAM lParam)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LRESULT&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d5/mdiwin_8c.html#a32">DefFrameProcWorker</a> (HWND hwnd, HWND hwndMDI, UINT wMsg, WPARAM wParam, LPARAM lParam, BOOL fAnsi)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LRESULT WINAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d5/mdiwin_8c.html#a33">DefFrameProcW</a> (HWND hwnd, HWND hwndMDIClient, UINT message, WPARAM wParam, LPARAM lParam)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LRESULT WINAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d5/mdiwin_8c.html#a34">DefFrameProcA</a> (HWND hwnd, HWND hwndMDIClient, UINT message, WPARAM wParam, LPARAM lParam)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d5/mdiwin_8c.html#a35">ChildMinMaxInfo</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, PMINMAXINFO pmmi)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d5/mdiwin_8c.html#a36">xxxChildResize</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, UINT <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a19">wMode</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LRESULT&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d5/mdiwin_8c.html#a37">DefMDIChildProcWorker</a> (HWND hwnd, UINT wMsg, WPARAM wParam, LPARAM lParam, BOOL fAnsi)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LRESULT WINAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d5/mdiwin_8c.html#a38">DefMDIChildProcW</a> (HWND hwnd, UINT message, WPARAM wParam, LPARAM lParam)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LRESULT WINAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d5/mdiwin_8c.html#a39">DefMDIChildProcA</a> (HWND hwnd, UINT message, WPARAM wParam, LPARAM lParam)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d5/mdiwin_8c.html#a40">MDICompleteChildCreation</a> (HWND hwndChild, HMENU hSysMenu, BOOL fVisible, BOOL fDisabled)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d5/mdiwin_8c.html#a41">CreateMDIChild</a> (<a class="el" href="../../d5/d6/structtagSHORTCREATE.html">PSHORTCREATE</a> psc, LPMDICREATESTRUCT pmcs, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwExpWinVerAndFlags, HMENU *phSysMenu, <a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwndParent)</td></tr>

</table>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="a1" doxytag="mdiwin.c::MAX_TITLE_LEN" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define MAX_TITLE_LEN&nbsp;&nbsp;&nbsp;160          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00018">18</a> of file <a class="el" href="../../d7/d4/mdiwin_8c-source.html">mdiwin.c</a>.
<p>
Referenced by <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00032">xxxSetFrameTitle()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="mdiwin.c::SBJ_BOTH" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define SBJ_BOTH&nbsp;&nbsp;&nbsp;(SBJ_HORZ | SBJ_VERT)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00183">183</a> of file <a class="el" href="../../d7/d4/mdiwin_8c-source.html">mdiwin.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="mdiwin.c::SBJ_HORZ" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define SBJ_HORZ&nbsp;&nbsp;&nbsp;HAS_SBHORZ          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00181">181</a> of file <a class="el" href="../../d7/d4/mdiwin_8c-source.html">mdiwin.c</a>.
<p>
Referenced by <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00200">CalcClientScrolling()</a>, and <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00383">ScrollMDIChildren()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="mdiwin.c::SBJ_VERT" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define SBJ_VERT&nbsp;&nbsp;&nbsp;HAS_SBVERT          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00182">182</a> of file <a class="el" href="../../d7/d4/mdiwin_8c-source.html">mdiwin.c</a>.
<p>
Referenced by <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00200">CalcClientScrolling()</a>, and <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00383">ScrollMDIChildren()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a0" doxytag="mdiwin.c::TITLE_EXTRA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define TITLE_EXTRA&nbsp;&nbsp;&nbsp;5          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00017">17</a> of file <a class="el" href="../../d7/d4/mdiwin_8c-source.html">mdiwin.c</a>.
<p>
Referenced by <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00032">xxxSetFrameTitle()</a>.    </td>
  </tr>
</table>
<hr><h2>Typedef Documentation</h2>
<a class="anchor" name="a5" doxytag="mdiwin.c::ARRANGEWINDOWSDATA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d4/d8/structtagARRANGEWINDOWSDATA.html">tagARRANGEWINDOWSDATA</a>  <a class="el" href="../../d4/d8/structtagARRANGEWINDOWSDATA.html">ARRANGEWINDOWSDATA</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a6" doxytag="mdiwin.c::PARRANGEWINDOWSDATA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d4/d8/structtagARRANGEWINDOWSDATA.html">tagARRANGEWINDOWSDATA</a> * <a class="el" href="../../d4/d8/structtagARRANGEWINDOWSDATA.html">PARRANGEWINDOWSDATA</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00927">CascadeWindowsEnum()</a>, and <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01072">TileWindowsEnum()</a>.    </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="a17" doxytag="mdiwin.c::ArrangeWindows" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> WORD ArrangeWindows           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwndParent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>flags</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>CONST RECT *&nbsp;</td>
          <td class="mdname" nowrap> <em>lpRect</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>chwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>CONST HWND *&nbsp;</td>
          <td class="mdname" nowrap> <em>ahwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>MONITORENUMPROC&nbsp;</td>
          <td class="mdname" nowrap> <em>lpfnEnum</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00711">711</a> of file <a class="el" href="../../d7/d4/mdiwin_8c-source.html">mdiwin.c</a>.
<p>
References <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00107">_GetDesktopWindow()</a>, <a class="el" href="../../d5/d6/enumwin_8c-source.html#l00091">BuildHwndList()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00689">tagARRANGEWINDOWSDATA::chwnd</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00690">tagARRANGEWINDOWSDATA::chwndReal</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00687">tagARRANGEWINDOWSDATA::flags</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00695">tagARRANGEWINDOWSDATA::fVerifyParent</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l03044">GRC_MINWNDS</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l03043">GRC_SCROLLS</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00693">tagARRANGEWINDOWSDATA::hdwp</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01514">HW</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00688">tagARRANGEWINDOWSDATA::lprcParent</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01557">NtUserArrangeIconicWindows</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01558">NtUserBeginDeferWindowPos</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l01865">NtUserEndDeferWindowPosEx()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l13138">NtUserEnumDisplayMonitors()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00691">tagARRANGEWINDOWSDATA::phwnd</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00692">tagARRANGEWINDOWSDATA::pwndDesktop</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00686">tagARRANGEWINDOWSDATA::pwndParent</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01839">tagWND::rcClient</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00215">REBASEPWND</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00202">SYSMET</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00694">tagARRANGEWINDOWSDATA::uGRCFlags</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00603">UnmaximizeChildWindows()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00960">UserLocalFree</a>, and <a class="el" href="../../d5/d9/immcli_8h-source.html#l00120">ValidateHwnd</a>.
<p>
Referenced by <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01061">CascadeWindows()</a>, and <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01217">TileWindows()</a>.
<p>
<pre class="fragment"><div>00718 {
00719     <a class="code" href="../../d4/d8/structtagARRANGEWINDOWSDATA.html">ARRANGEWINDOWSDATA</a>  awd;
00720     HWND *              phwnd = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00721 
00722     <span class="comment">/*</span>
00723 <span class="comment">     * Get parent window</span>
00724 <span class="comment">     */</span>
00725     awd.<a class="code" href="../../d4/d8/structtagARRANGEWINDOWSDATA.html#o6">pwndDesktop</a> = <a class="code" href="../../d3/d9/client_2wow_8c.html#a3">_GetDesktopWindow</a>();
00726     <span class="keywordflow">if</span> (!hwndParent) {
00727         hwndParent = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a450">HW</a>(awd.<a class="code" href="../../d4/d8/structtagARRANGEWINDOWSDATA.html#o6">pwndDesktop</a>);
00728         awd.<a class="code" href="../../d4/d8/structtagARRANGEWINDOWSDATA.html#o0">pwndParent</a> = awd.<a class="code" href="../../d4/d8/structtagARRANGEWINDOWSDATA.html#o6">pwndDesktop</a>;
00729     } <span class="keywordflow">else</span> {
00730         awd.<a class="code" href="../../d4/d8/structtagARRANGEWINDOWSDATA.html#o0">pwndParent</a> = <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(hwndParent);
00731         <span class="keywordflow">if</span> (awd.<a class="code" href="../../d4/d8/structtagARRANGEWINDOWSDATA.html#o0">pwndParent</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00732             <span class="keywordflow">return</span> 0;
00733         }
00734     }
00735 
00736     <a class="code" href="../../d6/d5/mdiwin_8c.html#a16">UnmaximizeChildWindows</a>(hwndParent);
00737 
00738     <span class="comment">/*</span>
00739 <span class="comment">     * If the rect passed in contains the desktop window,</span>
00740 <span class="comment">     * arrange the windows on the desktop</span>
00741 <span class="comment">     */</span>
00742     <span class="keywordflow">if</span> ( lpRect &amp;&amp;
00743          awd.<a class="code" href="../../d4/d8/structtagARRANGEWINDOWSDATA.html#o0">pwndParent</a> == awd.<a class="code" href="../../d4/d8/structtagARRANGEWINDOWSDATA.html#o6">pwndDesktop</a>   &amp;&amp;
00744          lpRect-&gt;left   &lt;= awd.<a class="code" href="../../d4/d8/structtagARRANGEWINDOWSDATA.html#o6">pwndDesktop</a>-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o7">rcClient</a>.left   &amp;&amp;
00745          lpRect-&gt;top    &lt;= awd.<a class="code" href="../../d4/d8/structtagARRANGEWINDOWSDATA.html#o6">pwndDesktop</a>-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o7">rcClient</a>.top    &amp;&amp;
00746          lpRect-&gt;right  &gt;= awd.<a class="code" href="../../d4/d8/structtagARRANGEWINDOWSDATA.html#o6">pwndDesktop</a>-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o7">rcClient</a>.right  &amp;&amp;
00747          lpRect-&gt;bottom &gt;= awd.<a class="code" href="../../d4/d8/structtagARRANGEWINDOWSDATA.html#o6">pwndDesktop</a>-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o7">rcClient</a>.bottom ) {
00748 
00749         lpRect = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00750     }
00751 
00752     <span class="comment">/*</span>
00753 <span class="comment">     * Arrange iconic windows if appropriate, and determine flags</span>
00754 <span class="comment">     * for getting the client rectangle if no rect is given.</span>
00755 <span class="comment">     */</span>
00756     <span class="keywordflow">if</span> (lpRect == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00757         <span class="keywordflow">if</span> (    (   awd.<a class="code" href="../../d4/d8/structtagARRANGEWINDOWSDATA.html#o0">pwndParent</a> != awd.<a class="code" href="../../d4/d8/structtagARRANGEWINDOWSDATA.html#o6">pwndDesktop</a> ||
00758                     !(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(ARRANGE) &amp; ARW_HIDE)) &amp;&amp;
00759                 <a class="code" href="../../d6/d0/usercli_8h.html#a212">NtUserArrangeIconicWindows</a>(hwndParent) != 0) {
00760 
00761             awd.<a class="code" href="../../d4/d8/structtagARRANGEWINDOWSDATA.html#o8">uGRCFlags</a> = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a873">GRC_SCROLLS</a> | <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a874">GRC_MINWNDS</a>;
00762         } <span class="keywordflow">else</span> {
00763             awd.<a class="code" href="../../d4/d8/structtagARRANGEWINDOWSDATA.html#o8">uGRCFlags</a> = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a873">GRC_SCROLLS</a>;
00764         }
00765     }
00766 
00767     <span class="comment">/*</span>
00768 <span class="comment">     * Get window list</span>
00769 <span class="comment">     */</span>
00770     <span class="keywordflow">if</span> (ahwnd == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00771         HWND hwndChild;
00772         <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwndChild;
00773 
00774         pwndChild = <a class="code" href="../../d6/d0/usercli_8h.html#a27">REBASEPWND</a>(awd.<a class="code" href="../../d4/d8/structtagARRANGEWINDOWSDATA.html#o0">pwndParent</a>, spwndChild);
00775         hwndChild = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a450">HW</a>(pwndChild);
00776         <span class="keywordflow">if</span> (    hwndChild == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> ||
00777                 (chwnd = <a class="code" href="../../d4/d1/userk_8h.html#a1157">BuildHwndList</a>(NULL, hwndChild, FALSE, 0, &amp;phwnd)) == 0) {
00778             <span class="keywordflow">return</span> 0;
00779         }
00780     }
00781 
00782     <span class="comment">/*</span>
00783 <span class="comment">     * Arrange windows</span>
00784 <span class="comment">     */</span>
00785     awd.<a class="code" href="../../d4/d8/structtagARRANGEWINDOWSDATA.html#o7">hdwp</a> = <a class="code" href="../../d6/d0/usercli_8h.html#a213">NtUserBeginDeferWindowPos</a>(chwnd);
00786     <span class="keywordflow">if</span> (awd.<a class="code" href="../../d4/d8/structtagARRANGEWINDOWSDATA.html#o7">hdwp</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00787         <span class="keywordflow">goto</span> Done;
00788 
00789     awd.<a class="code" href="../../d4/d8/structtagARRANGEWINDOWSDATA.html#o1">flags</a> = flags;
00790     awd.<a class="code" href="../../d4/d8/structtagARRANGEWINDOWSDATA.html#o2">lprcParent</a> = (LPRECT) lpRect;
00791     awd.<a class="code" href="../../d4/d8/structtagARRANGEWINDOWSDATA.html#o3">chwnd</a> = chwnd;
00792     awd.<a class="code" href="../../d4/d8/structtagARRANGEWINDOWSDATA.html#o4">chwndReal</a> = 0;
00793     awd.<a class="code" href="../../d4/d8/structtagARRANGEWINDOWSDATA.html#o5">phwnd</a> = ahwnd ? (HWND *) ahwnd : phwnd;
00794     awd.<a class="code" href="../../d4/d8/structtagARRANGEWINDOWSDATA.html#o9">fVerifyParent</a> = (ahwnd != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>);
00795 
00796     <span class="comment">/*</span>
00797 <span class="comment">     * If the parent is the desktop and a rectangle is not provided,</span>
00798 <span class="comment">     * arrange the windows on each monitor. Otherwise, arrange the</span>
00799 <span class="comment">     * windows once by calling the enumeration function directly.</span>
00800 <span class="comment">     */</span>
00801     <span class="keywordflow">if</span> (awd.<a class="code" href="../../d4/d8/structtagARRANGEWINDOWSDATA.html#o0">pwndParent</a> == awd.<a class="code" href="../../d4/d8/structtagARRANGEWINDOWSDATA.html#o6">pwndDesktop</a> &amp;&amp; lpRect == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00802             <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a402">NtUserEnumDisplayMonitors</a>(NULL, NULL, lpfnEnum, (LPARAM) &amp;awd);
00803     } <span class="keywordflow">else</span> {
00804         (*lpfnEnum)(<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>, <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>, <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>, (LPARAM) &amp;awd);
00805     }
00806 
00807     <span class="comment">/* Make this arrangement asynchronous so we don't hang */</span>
00808     <span class="keywordflow">if</span> (awd.<a class="code" href="../../d4/d8/structtagARRANGEWINDOWSDATA.html#o7">hdwp</a> != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00809         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a109">NtUserEndDeferWindowPosEx</a>(awd.<a class="code" href="../../d4/d8/structtagARRANGEWINDOWSDATA.html#o7">hdwp</a>, TRUE);
00810     }
00811 
00812 Done:
00813     <span class="keywordflow">if</span> (phwnd) {
00814         <a class="code" href="../../d6/d0/usercli_8h.html#a138">UserLocalFree</a>(phwnd);
00815     }
00816 
00817     <span class="keywordflow">return</span> (awd.<a class="code" href="../../d4/d8/structtagARRANGEWINDOWSDATA.html#o7">hdwp</a> != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) ? awd.<a class="code" href="../../d4/d8/structtagARRANGEWINDOWSDATA.html#o4">chwndReal</a> : 0;
00818 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a9" doxytag="mdiwin.c::ByteOutsetRect" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void ByteOutsetRect           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">LPRECT&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>lprc</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00185">185</a> of file <a class="el" href="../../d7/d4/mdiwin_8c-source.html">mdiwin.c</a>.
<p>
References <a class="el" href="../../d7/d6/aug98_2dll32_2icmdll_8h-source.html#l00010">FAR</a>.
<p>
Referenced by <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00200">CalcClientScrolling()</a>.
<p>
<pre class="fragment"><div>00186 {
00187     <span class="keywordtype">int</span> <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a5">FAR</a> *pi;
00188     <span class="keywordtype">int</span> i;
00189 
00190     <span class="keywordflow">for</span> (i = 0, pi = (<span class="keywordtype">int</span> <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a5">FAR</a> *) lprc; i &lt; 4; i++, pi++) {
00191         <span class="keywordflow">if</span> (*pi &gt; 0)
00192             *pi += 7;
00193         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (*pi &lt; 0)
00194             *pi -= 7;
00195 
00196         *pi /= 8;
00197     }
00198 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a10" doxytag="mdiwin.c::CalcClientScrolling" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void CalcClientScrolling           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>sbj</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fIgnoreMin</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00200">200</a> of file <a class="el" href="../../d7/d4/mdiwin_8c-source.html">mdiwin.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d0/d7/halvprnt_8c-source.html#l00031">BYTE</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00185">ByteOutsetRect()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d9/d3/w32_2ntuser_2kernel_2random_8c-source.html#l00102">ClearWindowState()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00243">CopyRect</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00244">EqualRect</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00787">FNID_DESKTOP</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00843">GETFNID</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01567">NtUserRedrawFrame</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05986">NtUserSetScrollInfo()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d4/d5/rect_8c-source.html#l00139">OffsetRect()</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01839">tagWND::rcClient</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01838">tagWND::rcWindow</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00215">REBASEPWND</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00181">SBJ_HORZ</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00182">SBJ_VERT</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00245">SetRectEmpty</a>, <a class="el" href="../../d9/d3/w32_2ntuser_2kernel_2random_8c-source.html#l00083">SetWindowState()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00202">SYSMET</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d4/d5/rect_8c-source.html#l00241">UnionRect()</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00120">ValidateHwnd</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02406">WFHSCROLL</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02415">WFMAXIMIZED</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02420">WFMINIMIZED</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02419">WFVISIBLE</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02407">WFVSCROLL</a>.
<p>
Referenced by <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01657">MDIClientWndProcWorker()</a>, and <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00383">ScrollMDIChildren()</a>.
<p>
<pre class="fragment"><div>00201 {
00202     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwnd;
00203     RECT rcScroll;
00204     RECT rcClient;
00205     RECT rcRange;
00206     RECT rcT;
00207     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwndT;
00208     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fVert;
00209     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fHorz;
00210     <a class="code" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a> fHadVert, fHadHorz;
00211     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fCheckVert;
00212     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fCheckHorz;
00213     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fNeedScrolls;
00214     SCROLLINFO si;
00215 
00216     <span class="keywordflow">if</span> ((pwnd = <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(hwnd)) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00217         <span class="keywordflow">return</span>;
00218     }
00219     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pwnd);
00220 
00221     UserAssert(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a232">GETFNID</a>(pwnd) != FNID_DESKTOP);
00222 
00223     <span class="comment">// do nothing if the parent is iconic.  This way, we don't add invisible</span>
00224     <span class="comment">// scrollbars which will paint and unpaint when restoring...</span>
00225     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFMINIMIZED))
00226         <span class="keywordflow">return</span>;
00227 
00228     fVert = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00229     fHorz = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00230     fNeedScrolls=<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00231 
00232     fCheckHorz = (sbj &amp; <a class="code" href="../../d6/d5/mdiwin_8c.html#a2">SBJ_HORZ</a>);
00233     fCheckVert = (sbj &amp; <a class="code" href="../../d6/d5/mdiwin_8c.html#a3">SBJ_VERT</a>);
00234 
00235     <span class="comment">// find client area without scroll bars</span>
00236     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a33">CopyRect</a>(&amp;rcClient, &amp;pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o7">rcClient</a>);
00237 
00238     fHadVert = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFVSCROLL);
00239     <span class="keywordflow">if</span> (fCheckVert &amp;&amp; fHadVert)
00240         rcClient.right += <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CXVSCROLL);
00241 
00242     fHadHorz = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFHSCROLL);
00243     <span class="keywordflow">if</span> (fCheckHorz &amp;&amp; fHadHorz)
00244         rcClient.bottom += <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CYHSCROLL);
00245 
00246     <span class="comment">// find the rectangle that bounds all visible child windows</span>
00247     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a35">SetRectEmpty</a>(&amp;rcScroll);
00248 
00249     <span class="keywordflow">for</span> (pwndT = <a class="code" href="../../d6/d0/usercli_8h.html#a27">REBASEPWND</a>(pwnd, spwndChild); pwndT;
00250             pwndT = <a class="code" href="../../d6/d0/usercli_8h.html#a27">REBASEPWND</a>(pwndT, spwndNext)) {
00251         <span class="keywordflow">if</span> (fIgnoreMin &amp;&amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwndT, WFMINIMIZED))
00252             <span class="keywordflow">continue</span>;
00253 
00254         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwndT,WFVISIBLE)) {
00255             <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwndT, WFMAXIMIZED)) {
00256                 fNeedScrolls = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00257                 <span class="keywordflow">break</span>;
00258             }
00259 
00260             <span class="comment">/*</span>
00261 <span class="comment">             * add this window to the area that has to be visible</span>
00262 <span class="comment">             */</span>
00263             <a class="code" href="../../d3/d6/rect_8c.html#a9">UnionRect</a>(&amp;rcScroll, &amp;rcScroll, &amp;pwndT-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o6">rcWindow</a>);
00264 
00265             <span class="comment">/*</span>
00266 <span class="comment">             * add scroll bars if its not contained in the</span>
00267 <span class="comment">             * client area</span>
00268 <span class="comment">             */</span>
00269             <a class="code" href="../../d3/d6/rect_8c.html#a9">UnionRect</a>(&amp;rcT, &amp;rcClient, &amp;pwndT-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o6">rcWindow</a>);
00270             <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a34">EqualRect</a>(&amp;rcClient, &amp;rcT)) {
00271                 fNeedScrolls = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00272             }
00273         }
00274     }
00275 
00276     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a35">SetRectEmpty</a>(&amp;rcRange);
00277 
00278     <span class="comment">// offset rectangles such that rcClient's top &amp; left are both 0</span>
00279     <span class="comment">// making rcClient's right &amp; bottom be the page size</span>
00280     <a class="code" href="../../d3/d6/rect_8c.html#a6">OffsetRect</a>(&amp;rcScroll, -rcClient.left, -rcClient.top);
00281     <a class="code" href="../../d3/d6/rect_8c.html#a6">OffsetRect</a>(&amp;rcClient, -rcClient.left, -rcClient.top);
00282 
00283     <span class="keywordflow">if</span> (!fNeedScrolls)
00284         rcClient.bottom = rcClient.right = 0;
00285     <span class="keywordflow">else</span> <span class="keywordflow">do</span>
00286     {
00287             <span class="comment">/*</span>
00288 <span class="comment">             * the range is the union of the parent client with all of its</span>
00289 <span class="comment">             * children</span>
00290 <span class="comment">             */</span>
00291         <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a33">CopyRect</a>(&amp;rcT, &amp;rcRange);
00292         <a class="code" href="../../d3/d6/rect_8c.html#a9">UnionRect</a>(&amp;rcRange, &amp;rcScroll, &amp;rcClient);
00293 
00294         <span class="keywordflow">if</span> (fCheckVert) {
00295             <span class="comment">// subtract off space for the vertical scroll if we need it</span>
00296             <span class="keywordflow">if</span> (((rcRange.bottom - rcRange.top) &gt; rcClient.bottom) &amp;&amp; !fVert) {
00297                 fVert = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00298                 rcClient.right -= <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CXVSCROLL);
00299             }
00300         }
00301 
00302         <span class="keywordflow">if</span> (fCheckHorz) {
00303             <span class="comment">// subtract off space for the horizontal scroll if we need it</span>
00304             <span class="keywordflow">if</span> (((rcRange.right - rcRange.left) &gt; rcClient.right) &amp;&amp; !fHorz) {
00305                 fHorz = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00306                 rcClient.bottom -= <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CYHSCROLL);
00307             }
00308         }
00309     }
00310     <span class="keywordflow">while</span> (!<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a34">EqualRect</a>(&amp;rcRange, &amp;rcT));
00311 
00312     <span class="keywordflow">if</span> (fNeedScrolls) {
00313         <span class="comment">// HACK of death beginning</span>
00314         <span class="keywordflow">if</span> (rcRange.right == rcClient.right)
00315             rcRange.right -= 8;
00316 
00317         <span class="keywordflow">if</span> (rcRange.bottom == rcClient.bottom)
00318             rcRange.bottom -= 8;
00319         <span class="comment">// HACK of death ending</span>
00320     }
00321 
00322     <span class="keywordflow">if</span> (fCheckVert) {
00323 
00324         <span class="comment">/*</span>
00325 <span class="comment">         * check to see if we are changing the presence of the vertical</span>
00326 <span class="comment">         * scrollbar</span>
00327 <span class="comment">         */</span>
00328         <span class="keywordflow">if</span> ((rcRange.bottom - rcRange.top) &lt;= rcClient.bottom) {
00329             <a class="code" href="../../d4/d1/userk_8h.html#a1629">ClearWindowState</a>(pwnd, WFVSCROLL);
00330         } <span class="keywordflow">else</span> {
00331             <a class="code" href="../../d4/d1/userk_8h.html#a1628">SetWindowState</a>(pwnd, WFVSCROLL);
00332        }
00333     }
00334 
00335     <span class="keywordflow">if</span> (fCheckHorz) {
00336 
00337         <span class="comment">/*</span>
00338 <span class="comment">         * same for horizontal scroll</span>
00339 <span class="comment">         */</span>
00340         <span class="keywordflow">if</span> ((rcRange.right - rcRange.left) &lt;= rcClient.right) {
00341             <a class="code" href="../../d4/d1/userk_8h.html#a1629">ClearWindowState</a>(pwnd, WFHSCROLL);
00342         } <span class="keywordflow">else</span> {
00343             <a class="code" href="../../d4/d1/userk_8h.html#a1628">SetWindowState</a>(pwnd, WFHSCROLL);
00344         }
00345     }
00346 
00347     <span class="keywordflow">if</span> (fNeedScrolls) {
00348         <a class="code" href="../../d6/d5/mdiwin_8c.html#a9">ByteOutsetRect</a>(&amp;rcClient);
00349         <a class="code" href="../../d6/d5/mdiwin_8c.html#a9">ByteOutsetRect</a>(&amp;rcRange);
00350     }
00351 
00352     si.cbSize   = <span class="keyword">sizeof</span>(SCROLLINFO);
00353     si.fMask    = SIF_ALL;
00354     si.nPos     = 0;
00355 
00356     si.nMin     = rcRange.left;
00357     si.nMax     = rcRange.right;
00358     si.nPage    = rcClient.right;
00359 
00360     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a228">NtUserSetScrollInfo</a>(hwnd, SB_HORZ, &amp;si, FALSE);
00361 
00362     si.nMin     = rcRange.top;
00363     si.nMax     = rcRange.bottom;
00364     si.nPage    = rcClient.bottom;
00365 
00366     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a228">NtUserSetScrollInfo</a>(hwnd, SB_VERT, &amp;si, FALSE);
00367 
00368     <span class="keywordflow">if</span> ((fHadVert != <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFVSCROLL)) ||
00369         (fHadHorz != <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFHSCROLL)))
00370     <a class="code" href="../../d6/d0/usercli_8h.html#a222">NtUserRedrawFrame</a>(hwnd);
00371 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a21" doxytag="mdiwin.c::CascadeWindows" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> WORD CascadeWindows           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwndParent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>flags</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>CONST RECT *&nbsp;</td>
          <td class="mdname" nowrap> <em>lpRect</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>chwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>CONST HWND *&nbsp;</td>
          <td class="mdname" nowrap> <em>ahwnd</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01061">1061</a> of file <a class="el" href="../../d7/d4/mdiwin_8c-source.html">mdiwin.c</a>.
<p>
References <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00711">ArrangeWindows()</a>, and <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00927">CascadeWindowsEnum()</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/client_8c-source.html#l02913">CascadeChildWindows()</a>, and <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01657">MDIClientWndProcWorker()</a>.
<p>
<pre class="fragment"><div>01067 {
01068     <span class="keywordflow">return</span> <a class="code" href="../../d6/d5/mdiwin_8c.html#a17">ArrangeWindows</a>(hwndParent, flags, lpRect, chwnd, ahwnd, CascadeWindowsEnum);
01069 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a20" doxytag="mdiwin.c::CascadeWindowsEnum" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL CALLBACK CascadeWindowsEnum           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HMONITOR&nbsp;</td>
          <td class="mdname" nowrap> <em>hmonitor</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HDC&nbsp;</td>
          <td class="mdname" nowrap> <em>hdc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPRECT&nbsp;</td>
          <td class="mdname" nowrap> <em>lprc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lparam</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00927">927</a> of file <a class="el" href="../../d7/d4/mdiwin_8c-source.html">mdiwin.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d5/d6/enumwin_8c-source.html#l00091">BuildHwndList()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00689">tagARRANGEWINDOWSDATA::chwnd</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00690">tagARRANGEWINDOWSDATA::chwndReal</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00687">tagARRANGEWINDOWSDATA::flags</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00695">tagARRANGEWINDOWSDATA::fVerifyParent</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00505">GetCascadeWindowPos()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00833">GetParentArrangeRect()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00693">tagARRANGEWINDOWSDATA::hdwp</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01515">HWq</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l01761">NtUserDeferWindowPos()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d6/d5/mdiwin_8c.html#a6">PARRANGEWINDOWSDATA</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00691">tagARRANGEWINDOWSDATA::phwnd</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00692">tagARRANGEWINDOWSDATA::pwndDesktop</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00686">tagARRANGEWINDOWSDATA::pwndParent</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00215">REBASEPWND</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00958">UserLocalAlloc</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00960">UserLocalFree</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00197">VALIDATEHMONITOR</a>, and <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00869">ValidatePositionableWindow()</a>.
<p>
Referenced by <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01061">CascadeWindows()</a>.
<p>
<pre class="fragment"><div>00932 {
00933     <a class="code" href="../../d4/d8/structtagARRANGEWINDOWSDATA.html">PARRANGEWINDOWSDATA</a> pawd = (<a class="code" href="../../d4/d8/structtagARRANGEWINDOWSDATA.html">PARRANGEWINDOWSDATA</a>)lparam;
00934     <a class="code" href="../../d0/d2/structtagMONITOR.html">PMONITOR</a>    pMonitor = hmonitor ? <a class="code" href="../../d6/d0/usercli_8h.html#a23">VALIDATEHMONITOR</a>(hmonitor) : <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00935     RECT        rcParent;
00936     <span class="keywordtype">int</span>         i;
00937     <span class="keywordtype">int</span>         chwndReal = 0;
00938     RECT        rc;
00939     HWND        * phwnd, * phwndCopy;
00940     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>        fRet = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00941 
00942     UNREFERENCED_PARAMETER(hdc);
00943     UNREFERENCED_PARAMETER(lprc);
00944 
00945     <span class="comment">/*</span>
00946 <span class="comment">     * Get the parent rectangle if none is given.</span>
00947 <span class="comment">     */</span>
00948     <a class="code" href="../../d6/d5/mdiwin_8c.html#a18">GetParentArrangeRect</a>(pawd, pMonitor, &amp;rcParent);
00949 
00950     <span class="comment">/*</span>
00951 <span class="comment">     * New for NT5: MDITILE_ZORDER (for the SHELL guys)</span>
00952 <span class="comment">     * Sort pawd-&gt;phwnd by z-order</span>
00953 <span class="comment">     */</span>
00954     <span class="keywordflow">if</span> (pawd-&gt;<a class="code" href="../../d4/d8/structtagARRANGEWINDOWSDATA.html#o1">flags</a> &amp; MDITILE_ZORDER) {
00955         <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwndChild;
00956         HWND * phwndFullList, * phwndNext, * phwndSort, * phwndSearch;
00957         <span class="keywordtype">int</span> chwndFullList, chwndSort, chwndSearch;
00958         <span class="comment">/*</span>
00959 <span class="comment">         * Make a copy to leave their array alone (it's supposed to be const)</span>
00960 <span class="comment">         */</span>
00961         phwndCopy = <a class="code" href="../../d6/d0/usercli_8h.html#a136">UserLocalAlloc</a>(0, pawd-&gt;<a class="code" href="../../d4/d8/structtagARRANGEWINDOWSDATA.html#o3">chwnd</a> * <span class="keyword">sizeof</span>(HWND));
00962         <span class="keywordflow">if</span> (phwndCopy == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00963             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00964         }
00965         RtlCopyMemory(phwndCopy, pawd-&gt;<a class="code" href="../../d4/d8/structtagARRANGEWINDOWSDATA.html#o5">phwnd</a>, pawd-&gt;<a class="code" href="../../d4/d8/structtagARRANGEWINDOWSDATA.html#o3">chwnd</a> * <span class="keyword">sizeof</span>(HWND));
00966         <span class="comment">/*</span>
00967 <span class="comment">         * Get the sibblings Z-Ordered list.</span>
00968 <span class="comment">         */</span>
00969         pwndChild = <a class="code" href="../../d6/d0/usercli_8h.html#a27">REBASEPWND</a>(pawd-&gt;<a class="code" href="../../d4/d8/structtagARRANGEWINDOWSDATA.html#o0">pwndParent</a>, spwndChild);
00970         <span class="keywordflow">if</span> (pwndChild == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00971             fRet = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00972             <span class="keywordflow">goto</span> CleanUp;
00973         }
00974         chwndFullList = <a class="code" href="../../d4/d1/userk_8h.html#a1157">BuildHwndList</a>(NULL, <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(pwndChild), FALSE, 0, &amp;phwndFullList);
00975         <span class="keywordflow">if</span> (chwndFullList == 0) {
00976             fRet = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00977             <span class="keywordflow">goto</span> CleanUp;
00978         }
00979         <span class="comment">/*</span>
00980 <span class="comment">         * Loop through the Z-Ordered list looking for the windows in the array</span>
00981 <span class="comment">         */</span>
00982         <span class="keywordflow">for</span> (phwndNext = phwndFullList, chwndSort = pawd-&gt;<a class="code" href="../../d4/d8/structtagARRANGEWINDOWSDATA.html#o3">chwnd</a>, phwndSort = phwndCopy;
00983                 (chwndFullList &gt; 0) &amp;&amp; (chwndSort &gt; 1);
00984                 chwndFullList--, phwndNext++) {
00985 
00986             <span class="keywordflow">for</span> (chwndSearch = chwndSort, phwndSearch = phwndSort;
00987                     chwndSearch &gt; 0;
00988                     chwndSearch--, phwndSearch++) {
00989                 <span class="comment">/*</span>
00990 <span class="comment">                 * If it found a window, move it after the last sorted window.</span>
00991 <span class="comment">                 */</span>
00992                 <span class="keywordflow">if</span> (*phwndNext == *phwndSearch) {
00993                     HWND hwndFirst = *phwndSort;
00994                     *phwndSort = *phwndSearch;
00995                     *phwndSearch = hwndFirst;
00996                     phwndSort++;
00997                     chwndSort--;
00998                     <span class="keywordflow">break</span>;
00999                 }
01000             }
01001         }
01002         <a class="code" href="../../d6/d0/usercli_8h.html#a138">UserLocalFree</a>(phwndFullList);
01003     } <span class="keywordflow">else</span> { <span class="comment">/* if (pawd-&gt;flags &amp; MDITILE_ZORDER) */</span>
01004         phwndCopy = pawd-&gt;<a class="code" href="../../d4/d8/structtagARRANGEWINDOWSDATA.html#o5">phwnd</a>;
01005     }
01006 
01007     <span class="comment">/*</span>
01008 <span class="comment">     * Arrange the windows in the list, preserving z-order.</span>
01009 <span class="comment">     */</span>
01010     <span class="keywordflow">for</span> (i = pawd-&gt;<a class="code" href="../../d4/d8/structtagARRANGEWINDOWSDATA.html#o3">chwnd</a>, phwnd = phwndCopy + i - 1; --i &gt;= 0; phwnd--) {
01011         HWND    hwndChild;
01012         <a class="code" href="../../d6/d9/structtagWND.html">PWND</a>    pwndChild = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
01013         <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>   dwSWPFlags;
01014 
01015         hwndChild = *phwnd;
01016         pwndChild = <a class="code" href="../../d6/d5/mdiwin_8c.html#a19">ValidatePositionableWindow</a>(
01017                 hwndChild,
01018                 pawd-&gt;<a class="code" href="../../d4/d8/structtagARRANGEWINDOWSDATA.html#o9">fVerifyParent</a> ? pawd-&gt;<a class="code" href="../../d4/d8/structtagARRANGEWINDOWSDATA.html#o0">pwndParent</a> : NULL,
01019                 pawd-&gt;<a class="code" href="../../d4/d8/structtagARRANGEWINDOWSDATA.html#o6">pwndDesktop</a>,
01020                 pawd-&gt;<a class="code" href="../../d4/d8/structtagARRANGEWINDOWSDATA.html#o1">flags</a>,
01021                 pMonitor,
01022                 &amp;dwSWPFlags);
01023 
01024         <span class="keywordflow">if</span> (!pwndChild)
01025             <span class="keywordflow">continue</span>;
01026 
01027         <a class="code" href="../../d6/d5/mdiwin_8c.html#a14">GetCascadeWindowPos</a>(&amp;rcParent, chwndReal, &amp;rc);
01028 
01029         pawd-&gt;<a class="code" href="../../d4/d8/structtagARRANGEWINDOWSDATA.html#o7">hdwp</a> = <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a108">NtUserDeferWindowPos</a>(
01030                 pawd-&gt;<a class="code" href="../../d4/d8/structtagARRANGEWINDOWSDATA.html#o7">hdwp</a>,
01031                 hwndChild,
01032                 HWND_TOP,
01033                 rc.left,
01034                 rc.top,
01035                 rc.right,
01036                 rc.bottom,
01037                 dwSWPFlags);
01038 
01039         chwndReal++;
01040         pawd-&gt;<a class="code" href="../../d4/d8/structtagARRANGEWINDOWSDATA.html#o4">chwndReal</a>++;
01041     }
01042 
01043 CleanUp:
01044     <span class="keywordflow">if</span> (pawd-&gt;<a class="code" href="../../d4/d8/structtagARRANGEWINDOWSDATA.html#o1">flags</a> &amp; MDITILE_ZORDER) {
01045         <a class="code" href="../../d6/d0/usercli_8h.html#a138">UserLocalFree</a>(phwndCopy);
01046     }
01047 
01048     <span class="keywordflow">return</span> fRet &amp;&amp; (pawd-&gt;<a class="code" href="../../d4/d8/structtagARRANGEWINDOWSDATA.html#o7">hdwp</a> != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>);
01049 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a35" doxytag="mdiwin.c::ChildMinMaxInfo" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void ChildMinMaxInfo           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PMINMAXINFO&nbsp;</td>
          <td class="mdname" nowrap> <em>pmmi</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02380">2380</a> of file <a class="el" href="../../d7/d4/mdiwin_8c-source.html">mdiwin.c</a>.
<p>
References <a class="el" href="../../d4/d7/winmgrc_8c-source.html#l00604">_AdjustWindowRectEx()</a>, <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00995">_ScreenToClient()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00243">CopyRect</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00787">FNID_DESKTOP</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00843">GETFNID</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01839">tagWND::rcClient</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00215">REBASEPWND</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>.
<p>
Referenced by <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02531">DefMDIChildProcWorker()</a>.
<p>
<pre class="fragment"><div>02383 {
02384     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwndParent = <a class="code" href="../../d6/d0/usercli_8h.html#a27">REBASEPWND</a>(pwnd, spwndParent);
02385     RECT rc;
02386 <span class="preprocessor">#ifdef USE_MIRRORING</span>
02387 <span class="preprocessor"></span>    <span class="keywordtype">int</span> SaveLeft;
02388 <span class="preprocessor">#endif</span>
02389 <span class="preprocessor"></span>    UserAssert(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a232">GETFNID</a>(pwnd) != FNID_DESKTOP);
02390 
02391     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a33">CopyRect</a>(&amp;rc, &amp;pwndParent-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o7">rcClient</a>);
02392     <a class="code" href="../../d6/d9/rtl_2wow_8c.html#a21">_ScreenToClient</a>(pwndParent, (LPPOINT)&amp;rc.left);
02393     <a class="code" href="../../d6/d9/rtl_2wow_8c.html#a21">_ScreenToClient</a>(pwndParent, (LPPOINT)&amp;rc.right);
02394 
02395 <span class="preprocessor">#ifdef USE_MIRRORING</span>
02396 <span class="preprocessor"></span>    <span class="comment">/*</span>
02397 <span class="comment">     * Swap the left and right if pwnd is a mirrored window.</span>
02398 <span class="comment">     */</span>
02399     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd,WEFLAYOUTRTL)) {
02400        SaveLeft = rc.left;
02401        rc.left  = rc.right;
02402        rc.right = SaveLeft;
02403     }
02404 <span class="preprocessor">#endif</span>
02405 <span class="preprocessor"></span>
02406     <a class="code" href="../../d1/d0/inc_2user_8h.html#a1195">_AdjustWindowRectEx</a>(&amp;rc, pwnd-&gt;style, FALSE, pwnd-&gt;ExStyle);
02407 
02408     <span class="comment">/*</span>
02409 <span class="comment">     * Position...</span>
02410 <span class="comment">     */</span>
02411     pmmi-&gt;ptMaxPosition.x = rc.left;
02412     pmmi-&gt;ptMaxPosition.y = rc.top;
02413     pmmi-&gt;ptMaxSize.x = rc.right - rc.left;
02414     pmmi-&gt;ptMaxSize.y = rc.bottom - rc.top;
02415 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a41" doxytag="mdiwin.c::CreateMDIChild" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL CreateMDIChild           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d5/d6/structtagSHORTCREATE.html">PSHORTCREATE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>psc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPMDICREATESTRUCT&nbsp;</td>
          <td class="mdname" nowrap> <em>pmcs</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwExpWinVerAndFlags</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HMENU *&nbsp;</td>
          <td class="mdname" nowrap> <em>phSysMenu</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwndParent</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02794">2794</a> of file <a class="el" href="../../d7/d4/mdiwin_8c-source.html">mdiwin.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02594">CHILDSYSMENU</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02067">CKIDS</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02035">tagSHORTCREATE::cx</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02034">tagSHORTCREATE::cy</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02071">FIRST</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02039">tagSHORTCREATE::hMenu</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00277">IsWindow()</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02068">MAXED</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00557">MDICheckCascadeRect()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05406">NtUserMinMaximize()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d6/d0/usercli_8h.html#a383">PSHORTCREATE</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00652">SendMessage()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02038">tagSHORTCREATE::style</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00475">VER40</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02057">WS_MDIALLOWED</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02055">WS_MDISTYLE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02037">tagSHORTCREATE::x</a>, <a class="el" href="../../d6/d6/ntuser_2rtl_2menu_8c-source.html#l00117">xxxLoadSysMenu()</a>, and <a class="el" href="../../d7/d9/usercli_8h-source.html#l02036">tagSHORTCREATE::y</a>.
<p>
Referenced by <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l01197">_CreateWindowEx()</a>.
<p>
<pre class="fragment"><div>02800 {
02801     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fVisible;
02802     RECT rcT;
02803     HMENU hSysMenu = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
02804     HWND hwndPrevMaxed;
02805     <a class="code" href="../../d8/d0/structtagMDI.html">PMDI</a> pmdi;
02806 
02807     <span class="comment">/*</span>
02808 <span class="comment">     * Get a pointer to the MDI structure</span>
02809 <span class="comment">     */</span>
02810     pmdi = ((<a class="code" href="../../d0/d1/structtagMDIWND.html">PMDIWND</a>)(pwndParent))-&gt;pmdi;
02811 
02812     pmcs-&gt;style = psc-&gt;<a class="code" href="../../d5/d6/structtagSHORTCREATE.html#o4">style</a>;
02813 
02814     <span class="comment">// Mask off ignored style bits and add required ones.</span>
02815     psc-&gt;<a class="code" href="../../d5/d6/structtagSHORTCREATE.html#o4">style</a> |= (WS_CHILD | WS_CLIPSIBLINGS);
02816     <span class="keywordflow">if</span> (!(pwndParent-&gt;style &amp; MDIS_ALLCHILDSTYLES))
02817     {
02818         psc-&gt;<a class="code" href="../../d5/d6/structtagSHORTCREATE.html#o4">style</a> &amp;= <a class="code" href="../../d6/d0/usercli_8h.html#a263">WS_MDIALLOWED</a>;
02819         psc-&gt;<a class="code" href="../../d5/d6/structtagSHORTCREATE.html#o4">style</a> |= (<a class="code" href="../../d6/d0/usercli_8h.html#a261">WS_MDISTYLE</a> | WS_VISIBLE);
02820     }
02821     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (psc-&gt;<a class="code" href="../../d5/d6/structtagSHORTCREATE.html#o4">style</a> &amp; WS_POPUP)
02822     {
02823         RIPMSG0(RIP_ERROR, <span class="stringliteral">"CreateWindowEx: WS_POPUP not allowed on MDI children"</span>);
02824         <span class="keywordflow">if</span> (LOWORD(dwExpWinVerAndFlags) &gt;= <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a101">VER40</a>)
02825             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
02826     }
02827 
02828     fVisible = ((psc-&gt;<a class="code" href="../../d5/d6/structtagSHORTCREATE.html#o4">style</a> &amp; WS_VISIBLE) != 0<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>);
02829 
02830     <span class="comment">//</span>
02831     <span class="comment">// Save ORIGINAL parameters in MDICREATESTRUCT.  This is for</span>
02832     <span class="comment">// compatibility with old WM_MDICREATE.</span>
02833     <span class="comment">//</span>
02834     pmcs-&gt;x   = rcT.left   = psc-&gt;<a class="code" href="../../d5/d6/structtagSHORTCREATE.html#o3">x</a>;
02835     pmcs-&gt;y   = rcT.top    = psc-&gt;<a class="code" href="../../d5/d6/structtagSHORTCREATE.html#o2">y</a>;
02836     pmcs-&gt;cx  = rcT.right  = psc-&gt;<a class="code" href="../../d5/d6/structtagSHORTCREATE.html#o1">cx</a>;
02837     pmcs-&gt;cy  = rcT.bottom = psc-&gt;<a class="code" href="../../d5/d6/structtagSHORTCREATE.html#o0">cy</a>;
02838 
02839     <a class="code" href="../../d6/d5/mdiwin_8c.html#a15">MDICheckCascadeRect</a>(pwndParent, &amp;rcT);
02840 
02841     <span class="comment">//</span>
02842     <span class="comment">// Setup creation coords</span>
02843     <span class="comment">//</span>
02844     psc-&gt;<a class="code" href="../../d5/d6/structtagSHORTCREATE.html#o3">x</a>       = rcT.left;
02845     psc-&gt;<a class="code" href="../../d5/d6/structtagSHORTCREATE.html#o2">y</a>       = rcT.top;
02846     psc-&gt;<a class="code" href="../../d5/d6/structtagSHORTCREATE.html#o1">cx</a>      = rcT.right;
02847     psc-&gt;<a class="code" href="../../d5/d6/structtagSHORTCREATE.html#o0">cy</a>      = rcT.bottom;
02848 
02849     <span class="comment">// Load the system menu</span>
02850     <span class="keywordflow">if</span> (psc-&gt;<a class="code" href="../../d5/d6/structtagSHORTCREATE.html#o4">style</a> &amp; WS_SYSMENU) {
02851         hSysMenu = <a class="code" href="../../d5/d7/ntuser_2rtl_2menu_8c.html#a2">xxxLoadSysMenu</a>(CHILDSYSMENU);
02852         <span class="keywordflow">if</span> (hSysMenu == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
02853             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
02854         }
02855     }
02856 
02857 
02858     <span class="comment">// The window got created ok: now restore the current maximized window</span>
02859     <span class="comment">// so we can maximize ourself in its place.</span>
02860     hwndPrevMaxed = <a class="code" href="../../d6/d0/usercli_8h.html#a271">MAXED</a>(pmdi);
02861     <span class="keywordflow">if</span> (fVisible &amp;&amp; <a class="code" href="../../d3/d9/client_2wow_8c.html#a11">IsWindow</a>(hwndPrevMaxed))
02862     {
02863         <span class="keywordflow">if</span> (psc-&gt;<a class="code" href="../../d5/d6/structtagSHORTCREATE.html#o4">style</a> &amp; WS_MAXIMIZE)
02864             <a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(hwndPrevMaxed, WM_SETREDRAW, (WPARAM)FALSE, 0L);
02865 
02866         <span class="comment">// we could nuke the hwndPrevMaxed during the SendMessage32</span>
02867         <span class="comment">// so recheck just in case, B#11122, [t-arthb]</span>
02868 
02869         <span class="keywordflow">if</span> ( <a class="code" href="../../d3/d9/client_2wow_8c.html#a11">IsWindow</a>(hwndPrevMaxed) )
02870         {
02871             <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a209">NtUserMinMaximize</a>(hwndPrevMaxed, SW_SHOWNORMAL, TRUE);
02872 
02873             <span class="keywordflow">if</span> ( psc-&gt;<a class="code" href="../../d5/d6/structtagSHORTCREATE.html#o4">style</a> &amp; WS_MAXIMIZE )
02874                <a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(hwndPrevMaxed, WM_SETREDRAW, (WPARAM)TRUE, 0L);
02875         }
02876 
02877     }
02878 
02879     <span class="comment">// Set the proper Child Window ID for this MDI child.</span>
02880     psc-&gt;<a class="code" href="../../d5/d6/structtagSHORTCREATE.html#o5">hMenu</a> = (HMENU)UIntToPtr( (<a class="code" href="../../d6/d0/usercli_8h.html#a274">FIRST</a>(pmdi) + <a class="code" href="../../d6/d0/usercli_8h.html#a270">CKIDS</a>(pmdi)) );
02881 
02882     *phSysMenu = hSysMenu;
02883 
02884     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
02885 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a26" doxytag="mdiwin.c::CreateMDIWindowA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HWND CreateMDIWindowA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">LPCSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>pClassName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPCSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>pWindowName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwStyle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>x</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>y</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>nWidth</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>nHeight</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwndParent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HINSTANCE&nbsp;</td>
          <td class="mdname" nowrap> <em>hModule</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01495">1495</a> of file <a class="el" href="../../d7/d4/mdiwin_8c-source.html">mdiwin.c</a>.
<p>
References <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">LPVOID</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00727">WS_EX_MDICHILD</a>.
<p>
<pre class="fragment"><div>01506 {
01507     <span class="keywordflow">return</span> CreateWindowExA(WS_EX_MDICHILD, pClassName, pWindowName,
01508                                  dwStyle, x, y, nWidth, nHeight,
01509                                  hwndParent, NULL, hModule, (LPVOID)lParam);
01510 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a27" doxytag="mdiwin.c::CreateMDIWindowW" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HWND CreateMDIWindowW           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">LPCWSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>pClassName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPCWSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>pWindowName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwStyle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>x</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>y</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>nWidth</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>nHeight</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwndParent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HINSTANCE&nbsp;</td>
          <td class="mdname" nowrap> <em>hModule</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01514">1514</a> of file <a class="el" href="../../d7/d4/mdiwin_8c-source.html">mdiwin.c</a>.
<p>
References <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">LPVOID</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00727">WS_EX_MDICHILD</a>.
<p>
<pre class="fragment"><div>01525 {
01526     <span class="keywordflow">return</span> CreateWindowExW(WS_EX_MDICHILD, pClassName, pWindowName,
01527                                  dwStyle, x, y, nWidth, nHeight,
01528                                  hwndParent, NULL, hModule, (LPVOID)lParam);
01529 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a34" doxytag="mdiwin.c::DefFrameProcA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LRESULT WINAPI DefFrameProcA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwndMDIClient</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>message</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02361">2361</a> of file <a class="el" href="../../d7/d4/mdiwin_8c-source.html">mdiwin.c</a>.
<p>
References <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02101">DefFrameProcWorker()</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
<pre class="fragment"><div>02367 {
02368     <span class="keywordflow">return</span> <a class="code" href="../../d6/d5/mdiwin_8c.html#a32">DefFrameProcWorker</a>(hwnd, hwndMDIClient, message, wParam,
02369                               lParam, TRUE);
02370 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a33" doxytag="mdiwin.c::DefFrameProcW" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LRESULT WINAPI DefFrameProcW           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwndMDIClient</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>message</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02350">2350</a> of file <a class="el" href="../../d7/d4/mdiwin_8c-source.html">mdiwin.c</a>.
<p>
References <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02101">DefFrameProcWorker()</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>.
<p>
<pre class="fragment"><div>02356 {
02357     <span class="keywordflow">return</span> <a class="code" href="../../d6/d5/mdiwin_8c.html#a32">DefFrameProcWorker</a>(hwnd, hwndMDIClient, message, wParam, lParam,
02358                               FALSE);
02359 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a32" doxytag="mdiwin.c::DefFrameProcWorker" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LRESULT DefFrameProcWorker           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwndMDI</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>wMsg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fAnsi</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02101">2101</a> of file <a class="el" href="../../d7/d4/mdiwin_8c-source.html">mdiwin.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l02069">ACTIVE</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02067">CKIDS</a>, <a class="el" href="../../d9/d3/w32_2ntuser_2kernel_2random_8c-source.html#l00102">ClearWindowState()</a>, <a class="el" href="../../d4/d5/rect_8c-source.html#l00052">CopyInflateRect()</a>, <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00574">DefWindowProcWorker()</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l00868">DialogBoxParamA()</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l00902">DialogBoxParamW()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00024">FindPwndChild()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02071">FIRST</a>, <a class="el" href="../../d3/d7/rtl_2winmgr_8c-source.html#l00582">GetWindowBorders()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01584">GetWindowPlacement</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00053">hmodUser</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01514">HW</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01515">HWq</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01139">IDD_MDI_ACTIVATE</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d6/d8/ntrtlp_8h-source.html#l00183">LOBYTE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02068">MAXED</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02028">MAXITEMS</a>, <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00917">MDIActivateDlgProcA()</a>, <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00926">MDIActivateDlgProcW()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05226">NtUserGetSystemMenu()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l01917">NtUserMoveWindow()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05902">NtUserSetFocus()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01574">NtUserSetSysMenu</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d7/ntcftxt_8h-source.html#l00427">PostMessage()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00213">REBASE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01485">RevalidateHmenu</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00652">SendMessage()</a>, <a class="el" href="../../d9/d3/w32_2ntuser_2kernel_2random_8c-source.html#l00083">SetWindowState()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01763">tagWND::spmenuSys</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00202">SYSMET</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00362">ThreadLock</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00366">ThreadUnlock</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00960">UserLocalFree</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00120">ValidateHwnd</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02411">WFBORDERMASK</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02412">WFCAPTION</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02415">WFMAXIMIZED</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02402">WFMINBOX</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02420">WFMINIMIZED</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02405">WFSYSMENU</a>, <a class="el" href="../../d6/d6/ntuser_2rtl_2menu_8c-source.html#l00078">xxxMNCanClose()</a>, and <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00032">xxxSetFrameTitle()</a>.
<p>
Referenced by <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02361">DefFrameProcA()</a>, and <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02350">DefFrameProcW()</a>.
<p>
<pre class="fragment"><div>02108 {
02109     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwnd;
02110     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwndMDI;
02111     <a class="code" href="../../d8/d0/structtagMDI.html">PMDI</a> pmdi;
02112     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpwndT;
02113     HWND hwndT;
02114     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwndT;
02115     PMDINEXTMENU pmnm;
02116     WINDOWPLACEMENT wp;
02117 
02118     <span class="keywordflow">if</span> ((pwnd = <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(hwnd)) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
02119         <span class="keywordflow">return</span> (0<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>);
02120     }
02121     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pwnd);
02122 
02123     <span class="keywordflow">if</span> (hwndMDI == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
02124         <span class="keywordflow">goto</span> CallDWP;
02125     }
02126 
02127     <span class="keywordflow">if</span> ((pwndMDI = <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(hwndMDI)) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
02128         <span class="keywordflow">return</span> (0<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>);
02129     }
02130     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pwndMDI);
02131 
02132     <span class="comment">/*</span>
02133 <span class="comment">     * Get a pointer to the MDI structure</span>
02134 <span class="comment">     */</span>
02135     pmdi = ((<a class="code" href="../../d0/d1/structtagMDIWND.html">PMDIWND</a>)pwndMDI)-&gt;pmdi;
02136 
02137     <span class="keywordflow">switch</span> (wMsg) {
02138 
02139     <span class="comment">/*</span>
02140 <span class="comment">     * If there is a maximized child window, add it's window text...</span>
02141 <span class="comment">     */</span>
02142     <span class="keywordflow">case</span> WM_SETTEXT: {
02143         LPWSTR lpwsz = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
02144 
02145         <span class="keywordflow">if</span> (fAnsi &amp;&amp; lParam) {
02146             <span class="keywordflow">if</span> (!MBToWCS((LPSTR)lParam, -1, &amp;lpwsz, -1, TRUE))
02147                 <span class="keywordflow">return</span> 0;
02148             lParam = (LPARAM)lpwsz;
02149         }
02150         <a class="code" href="../../d6/d5/mdiwin_8c.html#a7">xxxSetFrameTitle</a>(pwnd, pwndMDI, (LPWSTR)lParam);
02151 
02152         <span class="keywordflow">if</span> (lpwsz)
02153             <a class="code" href="../../d6/d0/usercli_8h.html#a138">UserLocalFree</a>(lpwsz);
02154         <span class="keywordflow">break</span>;
02155     }
02156     <span class="keywordflow">case</span> WM_NCACTIVATE:
02157         <a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(hwndMDI, WM_NCACTIVATE, wParam, lParam);
02158         <span class="keywordflow">goto</span> CallDWP;
02159 
02160     <span class="keywordflow">case</span> WM_COMMAND:
02161         <span class="keywordflow">if</span> ((<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)LOWORD(wParam) == (<a class="code" href="../../d6/d0/usercli_8h.html#a274">FIRST</a>(pmdi) + <a class="code" href="../../d6/d0/usercli_8h.html#a260">MAXITEMS</a> -1)) {
02162 
02163             <span class="comment">/*</span>
02164 <span class="comment">             * selected the More...  item</span>
02165 <span class="comment">             */</span>
02166             <span class="keywordflow">if</span> (fAnsi) {
02167                 wParam = <a class="code" href="../../d4/d9/clres_8c.html#a51">DialogBoxParamA</a>(hmodUser,
02168                                          MAKEINTRESOURCEA(IDD_MDI_ACTIVATE),
02169                                          hwnd,
02170                                          MDIActivateDlgProcA,
02171                                          (LPARAM)pwndMDI);
02172             } <span class="keywordflow">else</span> {
02173                 wParam = <a class="code" href="../../d4/d9/clres_8c.html#a52">DialogBoxParamW</a>(hmodUser,
02174                                          MAKEINTRESOURCEW(IDD_MDI_ACTIVATE),
02175                                          hwnd,
02176                                          MDIActivateDlgProcW,
02177                                          (LPARAM)pwndMDI);
02178             }
02179             <span class="keywordflow">if</span> ((<span class="keywordtype">int</span>)wParam &gt;= 0) {
02180                 wParam += <a class="code" href="../../d6/d0/usercli_8h.html#a274">FIRST</a>(pmdi);
02181                 <span class="keywordflow">goto</span> ActivateTheChild;
02182             }
02183         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (((<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)LOWORD(wParam) &gt;= <a class="code" href="../../d6/d0/usercli_8h.html#a274">FIRST</a>(pmdi)) &amp;&amp;
02184                 ((<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)LOWORD(wParam) &lt; <a class="code" href="../../d6/d0/usercli_8h.html#a274">FIRST</a>(pmdi) + <a class="code" href="../../d6/d0/usercli_8h.html#a270">CKIDS</a>(pmdi))) {
02185 ActivateTheChild:
02186             pwndT = <a class="code" href="../../d6/d0/usercli_8h.html#a775">FindPwndChild</a>(pwndMDI, (UINT)LOWORD(wParam));
02187             <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(pwndT, &amp;tlpwndT);
02188 
02189             <a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(hwndMDI, WM_MDIACTIVATE, (WPARAM)<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a450">HW</a>(pwndT), 0L);
02190 
02191             <span class="comment">/*</span>
02192 <span class="comment">             * if minimized, restore it.</span>
02193 <span class="comment">             */</span>
02194             <span class="keywordflow">if</span> (pwndT != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> &amp;&amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwndT, WFMINIMIZED))
02195                     <span class="comment">//</span>
02196                     <span class="comment">// Fix for B#1510.  Don't restore directly.  Send child</span>
02197                     <span class="comment">// a restore message.</span>
02198                     <span class="comment">//</span>
02199                 <a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(pwndT), WM_SYSCOMMAND, (WPARAM)SC_RESTORE, 0L);
02200             <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndT);
02201             <span class="keywordflow">break</span>;
02202         }
02203 
02204         <span class="keywordflow">switch</span> (wParam &amp; 0xFFF0) {
02205 
02206         <span class="comment">/*</span>
02207 <span class="comment">         * System menu commands on a maxed mdi child</span>
02208 <span class="comment">         */</span>
02209         <span class="keywordflow">case</span> SC_SIZE:
02210         <span class="keywordflow">case</span> SC_MOVE:
02211         <span class="keywordflow">case</span> SC_RESTORE:
02212         <span class="keywordflow">case</span> SC_CLOSE:
02213         <span class="keywordflow">case</span> SC_NEXTWINDOW:
02214         <span class="keywordflow">case</span> SC_PREVWINDOW:
02215         <span class="keywordflow">case</span> SC_MINIMIZE:
02216         <span class="keywordflow">case</span> SC_MAXIMIZE:
02217             hwndT = <a class="code" href="../../d6/d0/usercli_8h.html#a271">MAXED</a>(pmdi);
02218             <span class="keywordflow">if</span> (hwndT != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
02219                 <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwndT = <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(hwndT);
02220                 <span class="keywordflow">if</span> (pwndT == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
02221                     <span class="keywordflow">break</span>;
02222                 <span class="keywordflow">if</span> ((wParam &amp; 0xFFF0) == SC_CLOSE) {
02223                     <span class="comment">/*</span>
02224 <span class="comment">                     * Since the window is maxed, we've cleared WFSYSMENU (see</span>
02225 <span class="comment">                     *  MDIAddSysMenu). We need to set it back here so GetSysMenuHandle</span>
02226 <span class="comment">                     *  will do the right thing for _MNCanClose.</span>
02227 <span class="comment">                     */</span>
02228                     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fCanClose;
02229                     UserAssert(!<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwndT, WFSYSMENU) &amp;&amp; (pwndT-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o15">spmenuSys</a> != NULL));
02230                     <a class="code" href="../../d4/d1/userk_8h.html#a1628">SetWindowState</a>(pwndT, WFSYSMENU);
02231                     fCanClose = <a class="code" href="../../d5/d7/ntuser_2rtl_2menu_8c.html#a1">xxxMNCanClose</a>(pwndT);
02232                     <a class="code" href="../../d4/d1/userk_8h.html#a1629">ClearWindowState</a>(pwndT, WFSYSMENU);
02233                     <span class="keywordflow">if</span> (!fCanClose) {
02234                         <span class="keywordflow">break</span>;
02235                     }
02236                 } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (((wParam &amp; 0xFFF0) == SC_MINIMIZE) &amp;&amp; !<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwndT, WFMINBOX)) {
02237                     <span class="keywordflow">break</span>;
02238                 }
02239 
02240                 <span class="keywordflow">return</span> <a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(hwndT, WM_SYSCOMMAND, wParam, lParam);
02241             }
02242         }
02243         <span class="keywordflow">goto</span> CallDWP;
02244 
02245     <span class="keywordflow">case</span> WM_SIZE:
02246         <span class="keywordflow">if</span> (wParam != SIZEICONIC) {
02247             <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a111">NtUserMoveWindow</a>(hwndMDI, 0, 0, LOWORD(lParam), HIWORD(lParam), TRUE);
02248         } <span class="keywordflow">else</span> {
02249             wp.length = <span class="keyword">sizeof</span>(WINDOWPLACEMENT);
02250             <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a238">GetWindowPlacement</a>(hwnd, &amp;wp)) {
02251                 RECT rcT;
02252                 <span class="keywordtype">int</span>  clB;
02253 
02254                <span class="comment">/*</span>
02255 <span class="comment">                * If frame is iconic, size mdi win to be size of restored</span>
02256 <span class="comment">                * frame's client area.  Thus mdi children etc created in here</span>
02257 <span class="comment">                * use the proper mdiclient size.</span>
02258 <span class="comment">                */</span>
02259                clB = <a class="code" href="../../d2/d8/rtl_2winmgr_8c.html#a7">GetWindowBorders</a>(pwnd-&gt;style, pwnd-&gt;ExStyle, TRUE, TRUE);
02260 
02261                <a class="code" href="../../d3/d6/rect_8c.html#a2">CopyInflateRect</a>(&amp;rcT, &amp;wp.rcNormalPosition,
02262                         -clB*<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CXBORDER), -clB*<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CYBORDER));
02263 
02264                <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFBORDERMASK) == <a class="code" href="../../d5/d9/ntrtlp_8h.html#a4">LOBYTE</a>(WFCAPTION))
02265                        rcT.top += <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CYCAPTION);
02266                rcT.top += <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CYMENU);
02267 
02268                <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a111">NtUserMoveWindow</a>(hwndMDI, 0, 0, rcT.right-rcT.left,
02269                        rcT.bottom-rcT.top, TRUE);
02270             }
02271         }
02272         <span class="keywordflow">goto</span> CallDWP;
02273 
02274     <span class="keywordflow">case</span> WM_SETFOCUS:
02275         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a225">NtUserSetFocus</a>(hwndMDI);
02276         <span class="keywordflow">break</span>;
02277 
02278     <span class="keywordflow">case</span> WM_NEXTMENU:
02279         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFSYSMENU) &amp;&amp; !<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFMINIMIZED) &amp;&amp;
02280             <a class="code" href="../../d6/d0/usercli_8h.html#a272">ACTIVE</a>(pmdi) &amp;&amp; !<a class="code" href="../../d6/d0/usercli_8h.html#a271">MAXED</a>(pmdi))
02281         {
02282             <a class="code" href="../../d1/d1/structtagMENU.html">PMENU</a> pmenuIn;
02283             <span class="comment">/*</span>
02284 <span class="comment">             * Go to child system menu by wrapping to the left from</span>
02285 <span class="comment">             * the first popup in the menu bar or to the right from</span>
02286 <span class="comment">             * the frame sysmenu.</span>
02287 <span class="comment">             */</span>
02288             pmnm = (PMDINEXTMENU)lParam;
02289             pmenuIn = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a441">RevalidateHmenu</a>(pmnm-&gt;hmenuIn);
02290 
02291             <span class="keywordflow">if</span> (pmenuIn &amp;&amp; ((wParam == VK_LEFT &amp;&amp; pmenuIn == <a class="code" href="../../d6/d0/usercli_8h.html#a26">REBASE</a>(pwnd, spmenu)) ||
02292                     (wParam == VK_RIGHT &amp;&amp; pmnm-&gt;hmenuIn ==
02293                     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a202">NtUserGetSystemMenu</a>(hwnd, FALSE)))) {
02294 
02295                 HMENU hmenu;
02296                 <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwndActive;
02297 
02298                 <span class="comment">//</span>
02299                 <span class="comment">// Make sure the window is still valid</span>
02300                 <span class="comment">//</span>
02301                 <span class="keywordflow">if</span> ((pwndActive = <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(<a class="code" href="../../d6/d0/usercli_8h.html#a272">ACTIVE</a>(pmdi))) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
02302                     <span class="keywordflow">return</span> 0;
02303                 }
02304 
02305                 <span class="comment">//</span>
02306                 <span class="comment">// Make sure the child's system menu items are updated</span>
02307                 <span class="comment">// (i.e. the ones are enabled/disabled)</span>
02308                 <span class="comment">//</span>
02309                 <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwndActive,WFMAXIMIZED)) {
02310                     <a class="code" href="../../d6/d0/usercli_8h.html#a229">NtUserSetSysMenu</a>(<a class="code" href="../../d6/d0/usercli_8h.html#a272">ACTIVE</a>(pmdi));
02311                 }
02312 
02313                 hmenu = <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a202">NtUserGetSystemMenu</a>(<a class="code" href="../../d6/d0/usercli_8h.html#a272">ACTIVE</a>(pmdi), FALSE);
02314                 pmnm-&gt;hmenuNext = hmenu;
02315                 pmnm-&gt;hwndNext = <a class="code" href="../../d6/d0/usercli_8h.html#a272">ACTIVE</a>(pmdi);
02316 
02317                 <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
02318             }
02319         }
02320 
02321         <span class="comment">/*</span>
02322 <span class="comment">         * default behaviour</span>
02323 <span class="comment">         */</span>
02324         <span class="keywordflow">return</span> 0<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>;
02325 
02326     <span class="keywordflow">case</span> WM_MENUCHAR:
02327         <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFMINIMIZED) &amp;&amp; LOWORD(wParam) == TEXT(<span class="charliteral">'-'</span>)) {
02328             <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a271">MAXED</a>(pmdi))
02329                 <span class="keywordflow">return</span> MAKELONG(0, 2);
02330             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a272">ACTIVE</a>(pmdi)) {
02331               <a class="code" href="../../d0/d8/ntcftxt_8h.html#a20">PostMessage</a>(<a class="code" href="../../d6/d0/usercli_8h.html#a272">ACTIVE</a>(pmdi), WM_SYSCOMMAND,
02332                     SC_KEYMENU, MAKELONG(TEXT(<span class="charliteral">'-'</span>), 0));
02333               <span class="keywordflow">return</span> MAKELONG(0, 1);
02334           }
02335         }
02336 
02337         <span class="comment">/*</span>
02338 <span class="comment">         ** FALL THRU **</span>
02339 <span class="comment">         */</span>
02340 
02341     <span class="keywordflow">default</span>:
02342 CallDWP:
02343         <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a610">DefWindowProcWorker</a>(pwnd, wMsg, wParam, lParam, fAnsi);
02344     }
02345 
02346     <span class="keywordflow">return</span> 0<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>;
02347 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a39" doxytag="mdiwin.c::DefMDIChildProcA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LRESULT WINAPI DefMDIChildProcA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>message</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02726">2726</a> of file <a class="el" href="../../d7/d4/mdiwin_8c-source.html">mdiwin.c</a>.
<p>
References <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02531">DefMDIChildProcWorker()</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
<pre class="fragment"><div>02731 {
02732     <span class="keywordflow">return</span> <a class="code" href="../../d6/d5/mdiwin_8c.html#a37">DefMDIChildProcWorker</a>(hwnd, message, wParam, lParam, TRUE);
02733 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a38" doxytag="mdiwin.c::DefMDIChildProcW" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LRESULT WINAPI DefMDIChildProcW           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>message</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02717">2717</a> of file <a class="el" href="../../d7/d4/mdiwin_8c-source.html">mdiwin.c</a>.
<p>
References <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02531">DefMDIChildProcWorker()</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>.
<p>
<pre class="fragment"><div>02722 {
02723     <span class="keywordflow">return</span> <a class="code" href="../../d6/d5/mdiwin_8c.html#a37">DefMDIChildProcWorker</a>(hwnd, message, wParam, lParam, FALSE);
02724 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a37" doxytag="mdiwin.c::DefMDIChildProcWorker" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LRESULT DefMDIChildProcWorker           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>wMsg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fAnsi</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02531">2531</a> of file <a class="el" href="../../d7/d4/mdiwin_8c-source.html">mdiwin.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l02069">ACTIVE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02380">ChildMinMaxInfo()</a>, <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00574">DefWindowProcWorker()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00161">DIFFWOWHANDLE</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00799">FNID_MDICLIENT</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00843">GETFNID</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00180">GetMenu()</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00319">GetParent()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01514">HW</a>, <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00110">hWnd</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02068">MAXED</a>, <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00104">ModifyMenuItem()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05226">NtUserGetSystemMenu()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d7/ntcftxt_8h-source.html#l00427">PostMessage()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00215">REBASEPWND</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00483">RecalculateScrollRanges()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00160">SAMEWOWHANDLE</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00652">SendMessage()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01764">tagWND::spmenu</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00362">ThreadLock</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00363">ThreadLockAlways</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00366">ThreadUnlock</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00120">ValidateHwnd</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02415">WFMAXIMIZED</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02070">WINDOW</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02425">xxxChildResize()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01237">xxxMDIActivate()</a>, and <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00032">xxxSetFrameTitle()</a>.
<p>
Referenced by <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02726">DefMDIChildProcA()</a>, and <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02717">DefMDIChildProcW()</a>.
<p>
<pre class="fragment"><div>02537 {
02538     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwnd;
02539     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwndParent;
02540     <a class="code" href="../../d8/d0/structtagMDI.html">PMDI</a> pmdi;
02541     PMDINEXTMENU pmnm;
02542     HWND hwndT;
02543     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwndT;
02544     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpwndT;
02545     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpwndParent;
02546     LRESULT lRet;
02547 
02548     <span class="keywordflow">if</span> ((pwnd = <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(hwnd)) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
02549         <span class="keywordflow">return</span> (0<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>);
02550     }
02551 
02552     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pwnd);
02553 
02554     <span class="comment">/*</span>
02555 <span class="comment">     * Check to see if this is a real mdi child window</span>
02556 <span class="comment">     */</span>
02557     pwndParent = <a class="code" href="../../d6/d0/usercli_8h.html#a27">REBASEPWND</a>(pwnd, spwndParent);
02558     <span class="keywordflow">if</span> (!pwndParent || <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a232">GETFNID</a>(pwndParent) != <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a206">FNID_MDICLIENT</a>) {
02559         RIPERR0(ERROR_NON_MDICHILD_WINDOW, RIP_VERBOSE, <span class="stringliteral">""</span>);
02560         <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a610">DefWindowProcWorker</a>(pwnd, wMsg, wParam, lParam, fAnsi);
02561     }
02562 
02563     <span class="comment">/*</span>
02564 <span class="comment">     * Get a pointer to the MDI structure, if it still exists</span>
02565 <span class="comment">     */</span>
02566     pmdi = ((<a class="code" href="../../d0/d1/structtagMDIWND.html">PMDIWND</a>)pwndParent)-&gt;pmdi;
02567     <span class="keywordflow">if</span> ((ULONG_PTR)pmdi == (ULONG_PTR)-1) {
02568         <span class="keywordflow">goto</span> CallDWP;
02569     }
02570 
02571     <span class="keywordflow">switch</span> (wMsg) {
02572     <span class="keywordflow">case</span> WM_SETFOCUS:
02573         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a16">DIFFWOWHANDLE</a>(hwnd, <a class="code" href="../../d6/d0/usercli_8h.html#a272">ACTIVE</a>(pmdi))) {
02574             <a class="code" href="../../d6/d0/usercli_8h.html#a37">ThreadLockAlways</a>(pwndParent, &amp;tlpwndParent);
02575             <a class="code" href="../../d6/d5/mdiwin_8c.html#a24">xxxMDIActivate</a>(pwndParent, pwnd);
02576             <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndParent);
02577         }
02578         <span class="keywordflow">goto</span> CallDWP;
02579 
02580     <span class="keywordflow">case</span> WM_NEXTMENU:
02581 
02582         <span class="comment">/*</span>
02583 <span class="comment">         * wrap to the frame menu bar, either left to the system menu,</span>
02584 <span class="comment">         * or right to the frame menu bar.</span>
02585 <span class="comment">         */</span>
02586         pmnm = (PMDINEXTMENU)lParam;
02587         pwndT = <a class="code" href="../../d6/d0/usercli_8h.html#a27">REBASEPWND</a>(pwndParent, spwndParent);
02588         pmnm-&gt;hwndNext = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a450">HW</a>(pwndT);
02589         pmnm-&gt;hmenuNext = (wParam == VK_LEFT) ?
02590                 <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a202">NtUserGetSystemMenu</a>(pmnm-&gt;hwndNext, FALSE) :
02591                 <a class="code" href="../../d3/d9/client_2wow_8c.html#a7">GetMenu</a>(pmnm-&gt;hwndNext);
02592         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
02593 <span class="preprocessor">#if 0</span>
02594 <span class="preprocessor"></span>             <a class="code" href="../../d3/d8/aug98_2test_2main_8c.html#a29">hWnd</a>-&gt;hwndParent-&gt;hwndParent
02595         <span class="keywordflow">return</span> (LONG)(((wParam == VK_LEFT) ?
02596                 <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a202">NtUserGetSystemMenu</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a450">HW</a>(pwndT), FALSE):
02597                 pwndT-&gt;spmenu)
02598           );
02599 <span class="comment">// return MAKELONG(NtUserGetSystemMenu(ACTIVE(pwndMDI), FALSE),</span>
02600 <span class="comment">// ACTIVE(pwndMDI));</span>
02601 <span class="preprocessor">#endif</span>
02602 <span class="preprocessor"></span>    <span class="keywordflow">case</span> WM_CLOSE:
02603         hwndT = <a class="code" href="../../d3/d9/client_2wow_8c.html#a13">GetParent</a>(hwnd);
02604         <span class="keywordflow">if</span> (hwndT != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
02605             <a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(hwndT, WM_MDIDESTROY, (WPARAM)hwnd, 0L);
02606         }
02607         <span class="keywordflow">break</span>;
02608 
02609     <span class="keywordflow">case</span> WM_MENUCHAR:
02610         <a class="code" href="../../d0/d8/ntcftxt_8h.html#a20">PostMessage</a>(<a class="code" href="../../d3/d9/client_2wow_8c.html#a13">GetParent</a>(<a class="code" href="../../d3/d9/client_2wow_8c.html#a13">GetParent</a>(hwnd)), WM_SYSCOMMAND,
02611                 (DWORD)SC_KEYMENU, (LONG)LOWORD(wParam));
02612         <span class="keywordflow">return</span> 0x10000;
02613 
02614     <span class="keywordflow">case</span> WM_SETTEXT:
02615         <a class="code" href="../../d6/d0/usercli_8h.html#a610">DefWindowProcWorker</a>(pwnd, wMsg, wParam, lParam, fAnsi);
02616         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a273">WINDOW</a>(pmdi))
02617             <a class="code" href="../../d6/d0/usercli_8h.html#a777">ModifyMenuItem</a>(pwnd);
02618 
02619         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFMAXIMIZED)) {
02620 
02621             <span class="comment">/*</span>
02622 <span class="comment">             * Add the child's window text to the frame since it is</span>
02623 <span class="comment">             * maximized.  But just redraw the caption so pass a 3L.</span>
02624 <span class="comment">             */</span>
02625             pwndT = <a class="code" href="../../d6/d0/usercli_8h.html#a27">REBASEPWND</a>(pwndParent, spwndParent);
02626             <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(pwndT, &amp;tlpwndT);
02627             <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(pwndParent, &amp;tlpwndParent);
02628             <a class="code" href="../../d6/d5/mdiwin_8c.html#a7">xxxSetFrameTitle</a>(pwndT, pwndParent, (LPWSTR)3L);
02629             <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndParent);
02630             <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndT);
02631         }
02632         <span class="keywordflow">break</span>;
02633 
02634     <span class="keywordflow">case</span> WM_GETMINMAXINFO:
02635         <a class="code" href="../../d6/d5/mdiwin_8c.html#a35">ChildMinMaxInfo</a>(pwnd, (PMINMAXINFO)lParam);
02636         <span class="keywordflow">break</span>;
02637 
02638     <span class="keywordflow">case</span> WM_SIZE:
02639         <a class="code" href="../../d6/d5/mdiwin_8c.html#a36">xxxChildResize</a>(pwnd, (UINT)wParam);
02640         <span class="keywordflow">goto</span> CallDWP;
02641 
02642     <span class="keywordflow">case</span> WM_MOVE:
02643         <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFMAXIMIZED))
02644             <a class="code" href="../../d6/d5/mdiwin_8c.html#a13">RecalculateScrollRanges</a>(pwndParent, FALSE);
02645         <span class="keywordflow">goto</span> CallDWP;
02646 
02647     <span class="keywordflow">case</span> WM_CHILDACTIVATE:
02648         <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(pwndParent, &amp;tlpwndParent);
02649         <a class="code" href="../../d6/d5/mdiwin_8c.html#a24">xxxMDIActivate</a>(pwndParent, pwnd);
02650         <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndParent);
02651         <span class="keywordflow">break</span>;
02652 
02653     <span class="keywordflow">case</span> WM_SYSCOMMAND:
02654         <span class="keywordflow">switch</span> (wParam &amp; 0xFFF0) {
02655         <span class="keywordflow">case</span> SC_NEXTWINDOW:
02656         <span class="keywordflow">case</span> SC_PREVWINDOW:
02657             hwndT = <a class="code" href="../../d3/d9/client_2wow_8c.html#a13">GetParent</a>(hwnd);
02658             <a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(hwndT, WM_MDINEXT, (WPARAM)hwnd,
02659                     (DWORD)((wParam &amp; 0xFFF0) == SC_PREVWINDOW));
02660             <span class="keywordflow">break</span>;
02661 
02662         <span class="keywordflow">case</span> SC_SIZE:
02663         <span class="keywordflow">case</span> SC_MOVE:
02664             <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a15">SAMEWOWHANDLE</a>(hwnd, <a class="code" href="../../d6/d0/usercli_8h.html#a271">MAXED</a>(pmdi))) {
02665 
02666                 <span class="comment">/*</span>
02667 <span class="comment">                 * If a maxed child gets a size or move message, blow it</span>
02668 <span class="comment">                 * off.</span>
02669 <span class="comment">                 */</span>
02670                 <span class="keywordflow">break</span>;
02671             } <span class="keywordflow">else</span>
02672                 <span class="keywordflow">goto</span> CallDWP;
02673 
02674         <span class="keywordflow">case</span> SC_MAXIMIZE:
02675             <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a15">SAMEWOWHANDLE</a>(hwnd, <a class="code" href="../../d6/d0/usercli_8h.html#a271">MAXED</a>(pmdi))) {
02676 
02677                 <span class="comment">/*</span>
02678 <span class="comment">                 * If a maxed child gets a maximize message, forward it</span>
02679 <span class="comment">                 * to the frame.  Useful if the maximized child has a</span>
02680 <span class="comment">                 * size box so that clicking on it then maximizes the</span>
02681 <span class="comment">                 * parent.</span>
02682 <span class="comment">                 */</span>
02683                 pwndT = <a class="code" href="../../d6/d0/usercli_8h.html#a27">REBASEPWND</a>(pwndParent, spwndParent);
02684                 <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(pwndT, &amp;tlpwndT);
02685                 lRet = <a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a450">HW</a>(pwndT),
02686                         WM_SYSCOMMAND, SC_MAXIMIZE, lParam);
02687                 <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndT);
02688                 <span class="keywordflow">return</span> lRet;
02689             }
02690 
02691             <span class="comment">/*</span>
02692 <span class="comment">             * else fall through</span>
02693 <span class="comment">             */</span>
02694 
02695         <span class="keywordflow">default</span>:
02696             <span class="keywordflow">goto</span> CallDWP;
02697         }
02698         <span class="keywordflow">break</span>;
02699 
02700     <span class="keywordflow">default</span>:
02701 CallDWP:
02702         <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a610">DefWindowProcWorker</a>(pwnd, wMsg, wParam, lParam, fAnsi);
02703     }
02704 
02705     <span class="keywordflow">return</span> 0<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>;
02706 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a14" doxytag="mdiwin.c::GetCascadeWindowPos" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void GetCascadeWindowPos           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">LPCRECT&nbsp;</td>
          <td class="mdname" nowrap> <em>prcClient</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>iWindow</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPRECT&nbsp;</td>
          <td class="mdname" nowrap> <em>lprc</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00505">505</a> of file <a class="el" href="../../d7/d4/mdiwin_8c-source.html">mdiwin.c</a>.
<p>
References <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00202">SYSMET</a>.
<p>
Referenced by <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00927">CascadeWindowsEnum()</a>, and <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00557">MDICheckCascadeRect()</a>.
<p>
<pre class="fragment"><div>00509 {
00510     <span class="keywordtype">int</span> cStack;
00511     <span class="keywordtype">int</span> xStep, yStep;
00512     <span class="keywordtype">int</span> dxClient, dyClient;
00513 
00514     <span class="comment">/*</span>
00515 <span class="comment">     * Compute the width and breadth of the situation.</span>
00516 <span class="comment">     */</span>
00517     dxClient = prcClient-&gt;right - prcClient-&gt;left;
00518     UserAssert(dxClient &gt;= 0);
00519     dyClient = prcClient-&gt;bottom - prcClient-&gt;top;
00520     UserAssert(dyClient &gt;= 0);
00521 
00522     <span class="comment">/*</span>
00523 <span class="comment">     * Compute the width and breadth of the window steps.</span>
00524 <span class="comment">     */</span>
00525     xStep = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CXSIZEFRAME) + <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CXSIZE);
00526     yStep = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CYSIZEFRAME) + <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CYSIZE);
00527 
00528     <span class="comment">/*</span>
00529 <span class="comment">     * How many windows per stack?</span>
00530 <span class="comment">     */</span>
00531     cStack = dyClient / (3 * yStep);
00532 
00533     lprc-&gt;right = dxClient - (cStack * xStep);
00534     lprc-&gt;bottom = dyClient - (cStack * yStep);
00535 
00536     <span class="comment">/*</span>
00537 <span class="comment">     * HACK!: Mod by cStack+1 and make sure no div-by-zero</span>
00538 <span class="comment">     * exception happens.</span>
00539 <span class="comment">     */</span>
00540     <span class="keywordflow">if</span> (++cStack &lt;= 0) {
00541         cStack = 1;
00542     }
00543 
00544     lprc-&gt;left = prcClient-&gt;left + (iWindow % cStack) * xStep;
00545     lprc-&gt;top = prcClient-&gt;top + (iWindow % cStack) * yStep;
00546 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a18" doxytag="mdiwin.c::GetParentArrangeRect" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void GetParentArrangeRect           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d4/d8/structtagARRANGEWINDOWSDATA.html">PARRANGEWINDOWSDATA</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pawd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d2/structtagMONITOR.html">PMONITOR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pMonitor</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPRECT&nbsp;</td>
          <td class="mdname" nowrap> <em>lprc</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00833">833</a> of file <a class="el" href="../../d7/d4/mdiwin_8c-source.html">mdiwin.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l02604">GetPrimaryMonitor()</a>, <a class="el" href="../../d3/d7/rtl_2winmgr_8c-source.html#l00417">GetRealClientRect()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l03044">GRC_MINWNDS</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00688">tagARRANGEWINDOWSDATA::lprcParent</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00686">tagARRANGEWINDOWSDATA::pwndParent</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00694">tagARRANGEWINDOWSDATA::uGRCFlags</a>, and <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>.
<p>
Referenced by <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00927">CascadeWindowsEnum()</a>, and <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01072">TileWindowsEnum()</a>.
<p>
<pre class="fragment"><div>00834 {
00835     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>    uGRCFlags;
00836 
00837     <span class="keywordflow">if</span> (pawd-&gt;<a class="code" href="../../d4/d8/structtagARRANGEWINDOWSDATA.html#o2">lprcParent</a>) {
00838         *lprc = *pawd-&gt;<a class="code" href="../../d4/d8/structtagARRANGEWINDOWSDATA.html#o2">lprcParent</a>;
00839     } <span class="keywordflow">else</span> {
00840         uGRCFlags = pawd-&gt;<a class="code" href="../../d4/d8/structtagARRANGEWINDOWSDATA.html#o8">uGRCFlags</a>;
00841 
00842         <span class="comment">/*</span>
00843 <span class="comment">         * If icons are shown on the desktop, then they are always</span>
00844 <span class="comment">         * shown on the primary monitor. So remove the GRC_MINWNDS</span>
00845 <span class="comment">         * flag for monitors other than the primary.</span>
00846 <span class="comment">         */</span>
00847         <span class="keywordflow">if</span> (pMonitor &amp;&amp; pMonitor != <a class="code" href="../../d6/d0/usercli_8h.html#a793">GetPrimaryMonitor</a>()) {
00848             uGRCFlags &amp;= ~<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a874">GRC_MINWNDS</a>;
00849         }
00850 
00851         <a class="code" href="../../d2/d8/rtl_2winmgr_8c.html#a3">GetRealClientRect</a>(
00852                 pawd-&gt;<a class="code" href="../../d4/d8/structtagARRANGEWINDOWSDATA.html#o0">pwndParent</a>, lprc, uGRCFlags, pMonitor);
00853     }
00854 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a15" doxytag="mdiwin.c::MDICheckCascadeRect" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void MDICheckCascadeRect           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwndClient</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPRECT&nbsp;</td>
          <td class="mdname" nowrap> <em>lprc</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00557">557</a> of file <a class="el" href="../../d7/d4/mdiwin_8c-source.html">mdiwin.c</a>.
<p>
References <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02743">CW2_USEDEFAULT</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00505">GetCascadeWindowPos()</a>, <a class="el" href="../../d3/d7/rtl_2winmgr_8c-source.html#l00856">GetRect()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l03420">GRECT_CLIENT</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l03424">GRECT_CLIENTCOORDS</a>, and <a class="el" href="../../d7/d9/usercli_8h-source.html#l02073">ITILELEVEL</a>.
<p>
Referenced by <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02794">CreateMDIChild()</a>.
<p>
<pre class="fragment"><div>00560 {
00561     <a class="code" href="../../d8/d0/structtagMDI.html">PMDI</a> pmdi;
00562     RECT rc, rcClient;
00563     <span class="keywordtype">int</span>         iWindow;
00564 
00565     <span class="comment">/*</span>
00566 <span class="comment">     * Get a pointer to the MDI structure</span>
00567 <span class="comment">     */</span>
00568     pmdi = ((<a class="code" href="../../d0/d1/structtagMDIWND.html">PMDIWND</a>)pwndClient)-&gt;pmdi;
00569 
00570     iWindow = <a class="code" href="../../d6/d0/usercli_8h.html#a276">ITILELEVEL</a>(pmdi);
00571 
00572     <a class="code" href="../../d2/d8/rtl_2winmgr_8c.html#a12">GetRect</a>(pwndClient, &amp;rcClient, GRECT_CLIENT | GRECT_CLIENTCOORDS);
00573     <a class="code" href="../../d6/d5/mdiwin_8c.html#a14">GetCascadeWindowPos</a>(&amp;rcClient, iWindow, &amp;rc);
00574 
00575     <span class="keywordflow">if</span> ((lprc-&gt;right == CW_USEDEFAULT || lprc-&gt;right == <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a770">CW2_USEDEFAULT</a>) ||
00576             !(lprc-&gt;right)) {
00577         lprc-&gt;right = rc.right;
00578     }
00579 
00580     <span class="keywordflow">if</span> ((lprc-&gt;bottom == CW_USEDEFAULT || lprc-&gt;bottom == <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a770">CW2_USEDEFAULT</a>) ||
00581             !(lprc-&gt;bottom)) {
00582         lprc-&gt;bottom = rc.bottom;
00583     }
00584 
00585     <span class="keywordflow">if</span> (lprc-&gt;left == CW_USEDEFAULT || lprc-&gt;left == <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a770">CW2_USEDEFAULT</a>) {
00586         lprc-&gt;left = rc.left;
00587         lprc-&gt;top = rc.top;
00588     }
00589 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a30" doxytag="mdiwin.c::MDIClientWndProcA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LRESULT WINAPI MDIClientWndProcA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>message</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02063">2063</a> of file <a class="el" href="../../d7/d4/mdiwin_8c-source.html">mdiwin.c</a>.
<p>
References <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01657">MDIClientWndProcWorker()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d5/d9/immcli_8h-source.html#l00120">ValidateHwnd</a>.
<p>
Referenced by <a class="el" href="../../d7/d7/clinit_8c-source.html#l01219">ClientThreadSetup()</a>.
<p>
<pre class="fragment"><div>02068 {
02069     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwnd;
02070 
02071     <span class="keywordflow">if</span> ((pwnd = <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(hwnd)) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
02072         <span class="keywordflow">return</span> 0;
02073     }
02074 
02075     <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a616">MDIClientWndProcWorker</a>(pwnd, message, wParam, lParam, TRUE);
02076 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a31" doxytag="mdiwin.c::MDIClientWndProcW" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LRESULT WINAPI MDIClientWndProcW           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>message</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02078">2078</a> of file <a class="el" href="../../d7/d4/mdiwin_8c-source.html">mdiwin.c</a>.
<p>
References <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01657">MDIClientWndProcWorker()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d5/d9/immcli_8h-source.html#l00120">ValidateHwnd</a>.
<p>
Referenced by <a class="el" href="../../d7/d7/clinit_8c-source.html#l01219">ClientThreadSetup()</a>, and <a class="el" href="../../d7/d7/clinit_8c-source.html#l00378">RW_RegisterControls()</a>.
<p>
<pre class="fragment"><div>02083 {
02084     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwnd;
02085 
02086     <span class="keywordflow">if</span> ((pwnd = <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(hwnd)) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
02087         <span class="keywordflow">return</span> 0;
02088     }
02089 
02090     <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a616">MDIClientWndProcWorker</a>(pwnd, message, wParam, lParam, FALSE);
02091 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a29" doxytag="mdiwin.c::MDIClientWndProcWorker" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LRESULT MDIClientWndProcWorker           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>message</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>fAnsi</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01657">1657</a> of file <a class="el" href="../../d7/d4/mdiwin_8c-source.html">mdiwin.c</a>.
<p>
References <a class="el" href="../../d4/d7/winmgrc_8c-source.html#l00604">_AdjustWindowRectEx()</a>, <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l01171">_DefSetText()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02069">ACTIVE</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00200">CalcClientScrolling()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02062">CALCSCROLL</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01061">CascadeWindows()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02067">CKIDS</a>, <a class="el" href="../../d9/d3/w32_2ntuser_2kernel_2random_8c-source.html#l00102">ClearWindowState()</a>, <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00574">DefWindowProcWorker()</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02071">FIRST</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00836">FNID_CLEANEDUP_BIT</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00799">FNID_MDICLIENT</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00213">GetMenuItemCount()</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02996">GWLP_MDIDATA</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02060">HAS_SBHORZ</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02059">HAS_SBVERT</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02074">HTITLE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01514">HW</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01515">HWq</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00525">IsIconic()</a>, <a class="el" href="../../d4/d7/winmgrc_8c-source.html#l00475">IsMenu()</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02068">MAXED</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02028">MAXITEMS</a>, <a class="el" href="../../d1/d0/inc_2user_8h.html#a1059">MDI</a>, <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00289">MDIRemoveSysMenu()</a>, <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00499">MDISetMenu()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01557">NtUserArrangeIconicWindows</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l03915">NtUserChildWindowFromPointEx()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l03988">NtUserDeleteMenu()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05226">NtUserGetSystemMenu()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l01917">NtUserMoveWindow()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05902">NtUserSetFocus()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l07715">NtUserSetWindowFNID()</a>, <a class="el" href="../../d1/d9/ntuser_8h-source.html#l00964">NtUserSetWindowLongPtr</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l02180">NtUserSetWindowPos()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06235">NtUserShowScrollBar()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06274">NtUserShowWindow()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01577">NtUserUpdateClientRect</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01512">PtoH</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01839">tagWND::rcClient</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00213">REBASE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00215">REBASEPWND</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00483">RecalculateScrollRanges()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00160">SAMEWOWHANDLE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02072">SCROLL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02065">SCROLLCOUNT</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00383">ScrollMDIChildren()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02064">SCROLLSUPPRESS</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00652">SendMessage()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d8/d3/w32_2ntuser_2client_2random_8c-source.html#l00164">TextAlloc()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00362">ThreadLock</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00363">ThreadLockAlways</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00366">ThreadUnlock</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01217">TileWindows()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00368">Unlock</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00958">UserLocalAlloc</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00960">UserLocalFree</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00227">VALIDATECLASSANDSIZE</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00120">ValidateHwnd</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02406">WFHSCROLL</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02400">WFMAXBOX</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02415">WFMAXIMIZED</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02407">WFVSCROLL</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02319">WFWIN40COMPAT</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02070">WINDOW</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00727">WS_EX_MDICHILD</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02985">tagMDI::wScroll</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01540">xxxMDIDestroy()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01420">xxxMDINext()</a>, and <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00032">xxxSetFrameTitle()</a>.
<p>
Referenced by <a class="el" href="../../d7/d7/clinit_8c-source.html#l01219">ClientThreadSetup()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02063">MDIClientWndProcA()</a>, and <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02078">MDIClientWndProcW()</a>.
<p>
<pre class="fragment"><div>01663 {
01664     HWND hwnd = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(pwnd);
01665     HWND hwndT;
01666     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwndT;
01667     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpwndT;
01668     <a class="code" href="../../d8/d0/structtagMDI.html">PMDI</a> pmdi;
01669     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwndParent;
01670 
01671     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pwnd);
01672 
01673     <a class="code" href="../../d6/d0/usercli_8h.html#a28">VALIDATECLASSANDSIZE</a>(pwnd, FNID_MDICLIENT);
01674 
01675     <span class="comment">/*</span>
01676 <span class="comment">     * Get the pmdi for the given window now since we will use it a lot in</span>
01677 <span class="comment">     * various handlers. This was stored using SetWindowLong(hwnd,4,pmdi) when</span>
01678 <span class="comment">     * we initially created the MDI client window.</span>
01679 <span class="comment">     */</span>
01680     pmdi = ((<a class="code" href="../../d0/d1/structtagMDIWND.html">PMDIWND</a>)pwnd)-&gt;pmdi;
01681 
01682     <span class="keywordflow">if</span> (pmdi == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01683         <span class="keywordflow">switch</span> (message) {
01684         <span class="keywordflow">case</span> WM_MDICREATE:
01685         <span class="keywordflow">case</span> WM_MDIMAXIMIZE:
01686         <span class="keywordflow">case</span> WM_PARENTNOTIFY:
01687         <span class="keywordflow">case</span> WM_CREATE:
01688             <span class="comment">/*</span>
01689 <span class="comment">             * These messages are safe to call, even when pmdi has not already</span>
01690 <span class="comment">             * been initialized.</span>
01691 <span class="comment">             */</span>
01692             <span class="keywordflow">break</span>;
01693         
01694         <span class="keywordflow">default</span>:
01695             <span class="comment">/*</span>
01696 <span class="comment">             * Any message that is not listed above is not safe to call when</span>
01697 <span class="comment">             * pmdi has not been initialized.  Instead, just directly call DWP.</span>
01698 <span class="comment">             */</span>
01699             <span class="keywordflow">goto</span> CallDWP;
01700         }
01701     }
01702 
01703     <span class="keywordflow">switch</span> (message) {
01704     <span class="keywordflow">case</span> WM_NCACTIVATE:
01705 
01706         <span class="comment">/*</span>
01707 <span class="comment">         * We are changing app activation.  Fix the active child's caption.</span>
01708 <span class="comment">         */</span>
01709         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a272">ACTIVE</a>(pmdi) != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01710             <a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(<a class="code" href="../../d6/d0/usercli_8h.html#a272">ACTIVE</a>(pmdi), WM_NCACTIVATE, wParam, lParam);
01711         }
01712         <span class="keywordflow">goto</span> CallDWP;
01713 
01714     <span class="keywordflow">case</span> WM_MDIGETACTIVE:
01715         <span class="keywordflow">if</span> (lParam != 0) {
01716             *((LPBOOL)lParam) = (<a class="code" href="../../d6/d0/usercli_8h.html#a271">MAXED</a>(pmdi) != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>);
01717         }
01718 
01719         <span class="keywordflow">return</span> (LRESULT)<a class="code" href="../../d6/d0/usercli_8h.html#a272">ACTIVE</a>(pmdi);
01720 
01721     <span class="keywordflow">case</span> WM_MDIACTIVATE:
01722         hwndT = (HWND)wParam;
01723         <span class="keywordflow">if</span> ((pwndT = <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(hwndT)) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
01724             <span class="keywordflow">return</span> 0;
01725 
01726         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a15">SAMEWOWHANDLE</a>(hwndT, <a class="code" href="../../d6/d0/usercli_8h.html#a272">ACTIVE</a>(pmdi)))
01727               <span class="keywordflow">break</span>;
01728 
01729         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a115">NtUserSetWindowPos</a>(hwndT, HWND_TOP, 0, 0, 0, 0, SWP_NOMOVE | SWP_NOSIZE);
01730         <span class="keywordflow">break</span>;
01731 
01732     <span class="keywordflow">case</span> WM_MDICASCADE:
01733         pmdi-&gt;<a class="code" href="../../d8/d0/structtagMDI.html#o5">wScroll</a> |= <a class="code" href="../../d6/d0/usercli_8h.html#a268">SCROLLSUPPRESS</a>;
01734         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a235">NtUserShowScrollBar</a>(hwnd, SB_BOTH, FALSE);
01735 
01736         <span class="comment">/*</span>
01737 <span class="comment">         * Unmaximize any maximized window.</span>
01738 <span class="comment">         */</span>
01739 <span class="preprocessor">#ifdef NEVER  // Not in Chicago -- FritzS</span>
01740 <span class="preprocessor"></span>        <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a271">MAXED</a>(pmdi) != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01741             <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a237">NtUserShowWindow</a>(<a class="code" href="../../d6/d0/usercli_8h.html#a271">MAXED</a>(pmdi), SW_SHOWNORMAL);
01742         }
01743 <span class="preprocessor">#endif</span>
01744 <span class="preprocessor"></span>        <span class="comment">/*</span>
01745 <span class="comment">         * Save success/failure code to return to app</span>
01746 <span class="comment">         */</span>
01747         message = (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)<a class="code" href="../../d6/d5/mdiwin_8c.html#a21">CascadeWindows</a>(hwnd, (UINT)wParam, NULL, 0, NULL);
01748         pmdi-&gt;<a class="code" href="../../d8/d0/structtagMDI.html#o5">wScroll</a> &amp;= ~<a class="code" href="../../d6/d0/usercli_8h.html#a269">SCROLLCOUNT</a>;
01749         <span class="keywordflow">return</span> (LONG)message;
01750         <span class="keywordflow">break</span>;
01751 
01752     <span class="keywordflow">case</span> WM_VSCROLL:
01753     <span class="keywordflow">case</span> WM_HSCROLL:
01754         pmdi-&gt;<a class="code" href="../../d8/d0/structtagMDI.html#o5">wScroll</a> |= <a class="code" href="../../d6/d0/usercli_8h.html#a268">SCROLLSUPPRESS</a>;
01755         <a class="code" href="../../d6/d5/mdiwin_8c.html#a11">ScrollMDIChildren</a>(hwnd, (message == WM_VSCROLL) ? SB_VERT : SB_HORZ,
01756               LOWORD(wParam), (<span class="keywordtype">short</span>)(HIWORD(wParam)));
01757         pmdi-&gt;<a class="code" href="../../d8/d0/structtagMDI.html#o5">wScroll</a> &amp;= ~<a class="code" href="../../d6/d0/usercli_8h.html#a269">SCROLLCOUNT</a>;
01758         <span class="keywordflow">break</span>;
01759 
01760     <span class="keywordflow">case</span> WM_MDICREATE:
01761         {
01762         LPMDICREATESTRUCTA lpMCSA = (LPMDICREATESTRUCTA)lParam;
01763         LPMDICREATESTRUCTW lpMCSW = (LPMDICREATESTRUCTW)lParam;
01764         <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> exStyle = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a187">WS_EX_MDICHILD</a>;
01765 
01766         <span class="comment">/*</span>
01767 <span class="comment">         * inherit the right.to.leftness of the parent.</span>
01768 <span class="comment">         */</span>
01769         exStyle |= (pwnd-&gt;ExStyle &amp; (WS_EX_RIGHT | WS_EX_RTLREADING | WS_EX_LEFTSCROLLBAR));
01770 
01771         <span class="keywordflow">if</span> (fAnsi) {
01772             hwndT = CreateWindowExA(exStyle, lpMCSA-&gt;szClass, lpMCSA-&gt;szTitle,
01773                 lpMCSA-&gt;style, lpMCSA-&gt;x, lpMCSA-&gt;y, lpMCSA-&gt;cx, lpMCSA-&gt;cy,
01774                 hwnd, NULL, lpMCSA-&gt;hOwner, (LPSTR)lpMCSA-&gt;lParam);
01775         } <span class="keywordflow">else</span> {
01776             hwndT = CreateWindowExW(exStyle, lpMCSW-&gt;szClass, lpMCSW-&gt;szTitle,
01777                 lpMCSW-&gt;style, lpMCSW-&gt;x, lpMCSW-&gt;y, lpMCSW-&gt;cx, lpMCSW-&gt;cy,
01778                 hwnd, NULL, lpMCSW-&gt;hOwner, (LPWSTR)lpMCSW-&gt;lParam);
01779         }
01780 
01781         <span class="keywordflow">return</span>((LRESULT)hwndT);
01782 
01783         }
01784 
01785     <span class="keywordflow">case</span> WM_MDIDESTROY:
01786         <a class="code" href="../../d6/d5/mdiwin_8c.html#a28">xxxMDIDestroy</a>(pwnd, (HWND)wParam);
01787         <span class="keywordflow">break</span>;
01788 
01789     <span class="keywordflow">case</span> WM_MDIMAXIMIZE:
01790         hwndT = (HWND)wParam;
01791         <span class="keywordflow">if</span> ((pwndT = <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(hwndT)) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
01792             <span class="keywordflow">return</span> 0;
01793 
01794         <span class="comment">// Only maximize children with a MAXBOX.  However, this introduces</span>
01795         <span class="comment">// backwards-compatibility issues with VB apps (see#12211)</span>
01796         <span class="comment">// So, we do this only for WIN40COMPAT apps and beyond.</span>
01797         <span class="comment">//</span>
01798         <span class="keywordflow">if</span> ((<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwndT, WFMAXBOX)) || !(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwndT, WFWIN40COMPAT))) {
01799             <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a237">NtUserShowWindow</a>(hwndT, SW_SHOWMAXIMIZED);
01800         }
01801         <span class="keywordflow">break</span>;
01802 
01803     <span class="keywordflow">case</span> WM_MDIRESTORE:
01804         hwndT = (HWND)wParam;
01805         <span class="keywordflow">if</span> ((pwndT = <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(hwndT)) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
01806             <span class="keywordflow">return</span> 0;
01807 
01808         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a237">NtUserShowWindow</a>(hwndT, SW_SHOWNORMAL);
01809         <span class="keywordflow">break</span>;
01810 
01811     <span class="keywordflow">case</span> WM_MDITILE:
01812         pmdi-&gt;<a class="code" href="../../d8/d0/structtagMDI.html#o5">wScroll</a> |= <a class="code" href="../../d6/d0/usercli_8h.html#a268">SCROLLSUPPRESS</a>;
01813         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a235">NtUserShowScrollBar</a>(hwnd, SB_BOTH, FALSE);
01814 
01815         <span class="comment">/*</span>
01816 <span class="comment">         * Unmaximize any maximized window.</span>
01817 <span class="comment">         */</span>
01818 <span class="preprocessor">#ifdef NEVER  //Not in Chicago</span>
01819 <span class="preprocessor"></span>        <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a271">MAXED</a>(pmdi) != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01820             <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a237">NtUserShowWindow</a>(<a class="code" href="../../d6/d0/usercli_8h.html#a271">MAXED</a>(pmdi), SW_SHOWNORMAL);
01821         }
01822 <span class="preprocessor">#endif</span>
01823 <span class="preprocessor"></span>        <span class="comment">/*</span>
01824 <span class="comment">         * Save success/failure code to return to app</span>
01825 <span class="comment">         */</span>
01826         message = (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)<a class="code" href="../../d6/d5/mdiwin_8c.html#a23">TileWindows</a>(hwnd, (UINT)wParam, NULL, 0, NULL);
01827         pmdi-&gt;<a class="code" href="../../d8/d0/structtagMDI.html#o5">wScroll</a> &amp;= ~<a class="code" href="../../d6/d0/usercli_8h.html#a269">SCROLLCOUNT</a>;
01828         <span class="keywordflow">return</span> (LONG)message;
01829         <span class="keywordflow">break</span>;
01830 
01831     <span class="keywordflow">case</span> WM_MDIICONARRANGE:
01832         pmdi-&gt;<a class="code" href="../../d8/d0/structtagMDI.html#o5">wScroll</a> |= <a class="code" href="../../d6/d0/usercli_8h.html#a268">SCROLLSUPPRESS</a>;
01833         <a class="code" href="../../d6/d0/usercli_8h.html#a212">NtUserArrangeIconicWindows</a>(hwnd);
01834         pmdi-&gt;<a class="code" href="../../d8/d0/structtagMDI.html#o5">wScroll</a> &amp;= ~<a class="code" href="../../d6/d0/usercli_8h.html#a269">SCROLLCOUNT</a>;
01835         <a class="code" href="../../d6/d5/mdiwin_8c.html#a13">RecalculateScrollRanges</a>(pwnd, TRUE);
01836         <span class="keywordflow">break</span>;
01837 
01838     <span class="keywordflow">case</span> WM_MDINEXT:
01839         <span class="keywordflow">if</span> (wParam) {
01840             hwndT = (HWND)wParam;
01841         } <span class="keywordflow">else</span> {
01842             hwndT = <a class="code" href="../../d6/d0/usercli_8h.html#a272">ACTIVE</a>(pmdi);
01843         }
01844 
01845         <span class="keywordflow">if</span> ((pwndT = <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(hwndT)) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01846             <span class="keywordflow">return</span> 0;
01847         }
01848 
01849         <span class="comment">/*</span>
01850 <span class="comment">         * If lParam is 1, do a prev window instead of a next window</span>
01851 <span class="comment">         */</span>
01852         <a class="code" href="../../d6/d0/usercli_8h.html#a37">ThreadLockAlways</a>(pwndT, &amp;tlpwndT);
01853         <a class="code" href="../../d6/d5/mdiwin_8c.html#a25">xxxMDINext</a>(pwnd, pwndT, (lParam == 0 ? 0 : 1));
01854         <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndT);
01855         <span class="keywordflow">break</span>;
01856 
01857     <span class="keywordflow">case</span> WM_MDIREFRESHMENU:
01858             <span class="keywordflow">return</span> (LRESULT)<a class="code" href="../../d6/d0/usercli_8h.html#a781">MDISetMenu</a>(pwnd, TRUE, NULL, NULL);
01859 
01860     <span class="keywordflow">case</span> WM_MDISETMENU:
01861             <span class="keywordflow">return</span> (LRESULT)<a class="code" href="../../d6/d0/usercli_8h.html#a781">MDISetMenu</a>(pwnd, FALSE, (HMENU)wParam, (HMENU)lParam);
01862 
01863     <span class="keywordflow">case</span> WM_PARENTNOTIFY:
01864         <span class="keywordflow">if</span> (wParam == WM_LBUTTONDOWN) {
01865             HWND hwndChild;
01866             POINT pt;
01867 
01868 <span class="preprocessor">#ifdef USE_MIRRORING</span>
01869 <span class="preprocessor"></span>            <span class="keywordflow">if</span> ((pwndT = <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(hwnd)) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
01870                 <span class="keywordflow">return</span> 0;
01871 <span class="preprocessor">#endif</span>
01872 <span class="preprocessor"></span>
01873             <span class="comment">/*</span>
01874 <span class="comment">             * Activate this child and bring it to the top.</span>
01875 <span class="comment">             */</span>
01876             pt.x = (<span class="keywordtype">int</span>)MAKEPOINTS(lParam).x;
01877             pt.y = (<span class="keywordtype">int</span>)MAKEPOINTS(lParam).y;
01878 
01879 <span class="preprocessor">#ifdef USE_MIRRORING</span>
01880 <span class="preprocessor"></span>            <span class="comment">/*</span>
01881 <span class="comment">             * Since pt is relative to the client MDI window,</span>
01882 <span class="comment">             * then the points should be mirrored if the MDI</span>
01883 <span class="comment">             * client window is mirrored so that Scrren Coord</span>
01884 <span class="comment">             * calculations are done properly in NtUserChildWindowFromPointEx.</span>
01885 <span class="comment">             * [samera]</span>
01886 <span class="comment">             */</span>
01887             <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwndT,WEFLAYOUTRTL)) {
01888                 pt.x = (pwndT-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o7">rcClient</a>.right-pwndT-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o7">rcClient</a>.left)-pt.x;
01889             }
01890 <span class="preprocessor">#endif</span>
01891 <span class="preprocessor"></span>
01892             hwndChild = <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a151">NtUserChildWindowFromPointEx</a>(hwnd, pt,
01893                 CWP_SKIPDISABLED | CWP_SKIPINVISIBLE);
01894 
01895             <span class="keywordflow">if</span> ((hwndChild) &amp;&amp; (hwndChild != hwnd)) {
01896 
01897                 <span class="keywordflow">if</span> (hwndChild != <a class="code" href="../../d6/d0/usercli_8h.html#a272">ACTIVE</a>(pmdi)) {
01898                     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a115">NtUserSetWindowPos</a>(hwndChild, HWND_TOP, 0, 0, 0, 0,
01899                                  SWP_NOMOVE | SWP_NOSIZE);
01900                 }
01901             }
01902         }
01903         <span class="keywordflow">break</span>;
01904 
01905     <span class="keywordflow">case</span> WM_SETFOCUS:
01906         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a272">ACTIVE</a>(pmdi) != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> &amp;&amp; !<a class="code" href="../../d3/d9/client_2wow_8c.html#a19">IsIconic</a>(<a class="code" href="../../d6/d0/usercli_8h.html#a272">ACTIVE</a>(pmdi))) {
01907             <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a225">NtUserSetFocus</a>(<a class="code" href="../../d6/d0/usercli_8h.html#a272">ACTIVE</a>(pmdi));
01908         }
01909         <span class="keywordflow">break</span>;
01910 
01911     <span class="keywordflow">case</span> WM_SIZE:
01912         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a272">ACTIVE</a>(pmdi) &amp;&amp; (pwndT = <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(<a class="code" href="../../d6/d0/usercli_8h.html#a272">ACTIVE</a>(pmdi))) &amp;&amp;
01913             <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwndT, WFMAXIMIZED)) {
01914 
01915             RECT rc;
01916 
01917             rc.top = rc.left = 0;
01918             rc.right = (<span class="keywordtype">int</span>)MAKEPOINTS(lParam).x;
01919             rc.bottom = (<span class="keywordtype">int</span>)MAKEPOINTS(lParam).y;
01920             <a class="code" href="../../d1/d0/inc_2user_8h.html#a1195">_AdjustWindowRectEx</a>(&amp;rc, pwndT-&gt;style, FALSE,
01921                     pwndT-&gt;ExStyle);
01922             <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a111">NtUserMoveWindow</a>(<a class="code" href="../../d6/d0/usercli_8h.html#a272">ACTIVE</a>(pmdi), rc.left, rc.top,
01923                     rc.right - rc.left, rc.bottom - rc.top, TRUE);
01924         } <span class="keywordflow">else</span> {
01925             <a class="code" href="../../d6/d5/mdiwin_8c.html#a13">RecalculateScrollRanges</a>(pwnd, FALSE);
01926         }
01927         <span class="keywordflow">goto</span> CallDWP;
01928 
01929     <span class="keywordflow">case</span> MM_CALCSCROLL: {
01930 
01931         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a275">SCROLL</a>(pmdi) &amp; <a class="code" href="../../d6/d0/usercli_8h.html#a269">SCROLLCOUNT</a>)
01932             <span class="keywordflow">break</span>;
01933 
01934         {
01935             WORD sbj = pmdi-&gt;<a class="code" href="../../d8/d0/structtagMDI.html#o5">wScroll</a> &amp; (<a class="code" href="../../d6/d0/usercli_8h.html#a264">HAS_SBVERT</a> | <a class="code" href="../../d6/d0/usercli_8h.html#a265">HAS_SBHORZ</a>);
01936 
01937             <span class="keywordflow">if</span> (sbj)
01938             {
01939                 <a class="code" href="../../d6/d5/mdiwin_8c.html#a10">CalcClientScrolling</a>(hwnd, sbj, (BOOL) wParam);
01940 
01941                 <a class="code" href="../../d6/d0/usercli_8h.html#a275">SCROLL</a>(pmdi) &amp;= ~<a class="code" href="../../d6/d0/usercli_8h.html#a267">CALCSCROLL</a>;
01942             }
01943         }
01944         <span class="keywordflow">break</span>;
01945     }
01946 
01947     <span class="keywordflow">case</span> WM_CREATE: {
01948         LPCLIENTCREATESTRUCT pccs = ((LPCREATESTRUCT)lParam)-&gt;lpCreateParams;
01949 
01950         <span class="comment">/*</span>
01951 <span class="comment">         * Try to allocate space for the pmdi</span>
01952 <span class="comment">         */</span>
01953         <span class="keywordflow">if</span> ((pmdi = (<a class="code" href="../../d8/d0/structtagMDI.html">PMDI</a>)<a class="code" href="../../d6/d0/usercli_8h.html#a136">UserLocalAlloc</a>(HEAP_ZERO_MEMORY, <span class="keyword">sizeof</span>(<a class="code" href="../../d8/d0/structtagMDI.html">MDI</a>)))) {
01954             <a class="code" href="../../d0/d0/ntuser_8h.html#a3">NtUserSetWindowLongPtr</a>(hwnd, GWLP_MDIDATA, (LONG_PTR)pmdi, FALSE);
01955         } <span class="keywordflow">else</span> {
01956             <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a284">NtUserSetWindowFNID</a>(hwnd, FNID_CLEANEDUP_BIT);
01957             <span class="keywordflow">break</span>;
01958         }
01959 
01960         pwndParent = <a class="code" href="../../d6/d0/usercli_8h.html#a27">REBASEPWND</a>(pwnd, spwndParent);
01961         <a class="code" href="../../d6/d0/usercli_8h.html#a272">ACTIVE</a>(pmdi) = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
01962         <a class="code" href="../../d6/d0/usercli_8h.html#a271">MAXED</a>(pmdi)  = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
01963         <a class="code" href="../../d6/d0/usercli_8h.html#a270">CKIDS</a>(pmdi)  = 0;
01964         <a class="code" href="../../d6/d0/usercli_8h.html#a273">WINDOW</a>(pmdi) = pccs-&gt;hWindowMenu;
01965 
01966         <a class="code" href="../../d6/d0/usercli_8h.html#a274">FIRST</a>(pmdi)  = pccs-&gt;idFirstChild;
01967         <a class="code" href="../../d6/d0/usercli_8h.html#a275">SCROLL</a>(pmdi) = 0;
01968         <a class="code" href="../../d6/d0/usercli_8h.html#a277">HTITLE</a>(pmdi) = <a class="code" href="../../d1/d0/inc_2user_8h.html#a1222">TextAlloc</a>(<a class="code" href="../../d6/d0/usercli_8h.html#a26">REBASE</a>(pwndParent, strName.Buffer));
01969 
01970         <a class="code" href="../../d6/d0/usercli_8h.html#a622">_DefSetText</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a450">HW</a>(pwndParent), NULL, FALSE);
01971 
01972         <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(pwndParent, &amp;tlpwndT);
01973         <a class="code" href="../../d6/d5/mdiwin_8c.html#a7">xxxSetFrameTitle</a>(pwndParent, pwnd, (LPWSTR)2L);
01974         <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndT);
01975 
01976         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFVSCROLL))
01977             <a class="code" href="../../d6/d0/usercli_8h.html#a275">SCROLL</a>(pmdi) |= <a class="code" href="../../d6/d0/usercli_8h.html#a264">HAS_SBVERT</a>;
01978         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFHSCROLL))
01979             <a class="code" href="../../d6/d0/usercli_8h.html#a275">SCROLL</a>(pmdi) |= <a class="code" href="../../d6/d0/usercli_8h.html#a265">HAS_SBHORZ</a>;
01980         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a275">SCROLL</a>(pmdi)) {
01981             <a class="code" href="../../d4/d1/userk_8h.html#a1629">ClearWindowState</a>(pwnd, WFVSCROLL | WFHSCROLL);
01982         }
01983 
01984         <span class="comment">/*</span>
01985 <span class="comment">         * Set this dude's system menu.</span>
01986 <span class="comment">         */</span>
01987         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a202">NtUserGetSystemMenu</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a450">HW</a>(pwndParent), FALSE);
01988 
01989         <span class="comment">/*</span>
01990 <span class="comment">         * make sure we have the correct window client area if scrolls are</span>
01991 <span class="comment">         * removed...  hack to take care of small progman bug</span>
01992 <span class="comment">         */</span>
01993         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a275">SCROLL</a>(pmdi)) {
01994             <a class="code" href="../../d6/d0/usercli_8h.html#a232">NtUserUpdateClientRect</a>(hwnd);
01995         }
01996         <span class="keywordflow">break</span>;
01997     }
01998 
01999     <span class="keywordflow">case</span> WM_DESTROY:
02000     <span class="keywordflow">case</span> WM_FINALDESTROY:
02001         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a271">MAXED</a>(pmdi)) {
02002             <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwndParent;
02003             <a class="code" href="../../d1/d1/structtagMENU.html">PMENU</a> pmenu;
02004 
02005             pwndParent = <a class="code" href="../../d6/d0/usercli_8h.html#a27">REBASEPWND</a>(pwnd, spwndParent);
02006             pmenu = <a class="code" href="../../d6/d0/usercli_8h.html#a26">REBASE</a>(pwndParent, spmenu);
02007             <a class="code" href="../../d6/d0/usercli_8h.html#a779">MDIRemoveSysMenu</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a448">PtoH</a>(pmenu), <a class="code" href="../../d6/d0/usercli_8h.html#a271">MAXED</a>(pmdi));
02008         }
02009 
02010         <span class="comment">/*</span>
02011 <span class="comment">         * delete the title</span>
02012 <span class="comment">         */</span>
02013         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a277">HTITLE</a>(pmdi)) {
02014             <a class="code" href="../../d6/d0/usercli_8h.html#a138">UserLocalFree</a>(<a class="code" href="../../d6/d0/usercli_8h.html#a277">HTITLE</a>(pmdi));
02015             <a class="code" href="../../d6/d0/usercli_8h.html#a277">HTITLE</a>(pmdi) = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
02016         }
02017 
02018         <span class="comment">/*</span>
02019 <span class="comment">         * Delete the menu items of the child windows in the frame.</span>
02020 <span class="comment">         * Chances are, this is called by destroying the frame, but</span>
02021 <span class="comment">         * one never knows, does one?</span>
02022 <span class="comment">         *</span>
02023 <span class="comment">         * Increase CKIDS by 1 after checking to delete the separator</span>
02024 <span class="comment">         */</span>
02025         <span class="keywordflow">if</span> (<a class="code" href="../../d3/d8/winmgrc_8c.html#a24">IsMenu</a>(<a class="code" href="../../d6/d0/usercli_8h.html#a273">WINDOW</a>(pmdi)) &amp;&amp; <a class="code" href="../../d6/d0/usercli_8h.html#a270">CKIDS</a>(pmdi)++) {
02026             <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> iPosition;
02027 
02028             <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a270">CKIDS</a>(pmdi) &gt; <a class="code" href="../../d6/d0/usercli_8h.html#a260">MAXITEMS</a> + 1)
02029                 <a class="code" href="../../d6/d0/usercli_8h.html#a270">CKIDS</a>(pmdi) = <a class="code" href="../../d6/d0/usercli_8h.html#a260">MAXITEMS</a> + 1;
02030 
02031             iPosition = <a class="code" href="../../d3/d9/client_2wow_8c.html#a8">GetMenuItemCount</a>(<a class="code" href="../../d6/d0/usercli_8h.html#a273">WINDOW</a>(pmdi));
02032             <span class="keywordflow">while</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a270">CKIDS</a>(pmdi)--) {
02033                 <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a154">NtUserDeleteMenu</a>(<a class="code" href="../../d6/d0/usercli_8h.html#a273">WINDOW</a>(pmdi), --iPosition, MF_BYPOSITION);
02034             }
02035         }
02036 
02037         <span class="comment">/*</span>
02038 <span class="comment">         * Unlock those objects that are used by the MDI structure.</span>
02039 <span class="comment">         */</span>
02040         <a class="code" href="../../d6/d0/usercli_8h.html#a42">Unlock</a>(&amp;<a class="code" href="../../d6/d0/usercli_8h.html#a271">MAXED</a>(pmdi));
02041         <a class="code" href="../../d6/d0/usercli_8h.html#a42">Unlock</a>(&amp;<a class="code" href="../../d6/d0/usercli_8h.html#a272">ACTIVE</a>(pmdi));
02042         <a class="code" href="../../d6/d0/usercli_8h.html#a42">Unlock</a>(&amp;<a class="code" href="../../d6/d0/usercli_8h.html#a273">WINDOW</a>(pmdi));
02043 
02044         <span class="comment">/*</span>
02045 <span class="comment">         * Free the MDI structure</span>
02046 <span class="comment">         */</span>
02047         <a class="code" href="../../d6/d0/usercli_8h.html#a138">UserLocalFree</a>(pmdi);
02048         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a284">NtUserSetWindowFNID</a>(hwnd, FNID_CLEANEDUP_BIT);
02049 
02050         <span class="keywordflow">break</span>;
02051 
02052     <span class="keywordflow">default</span>:
02053 CallDWP:
02054         <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a610">DefWindowProcWorker</a>(pwnd, message, wParam, lParam, fAnsi);
02055     }
02056     <span class="keywordflow">return</span> 0<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>;
02057 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a40" doxytag="mdiwin.c::MDICompleteChildCreation" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL MDICompleteChildCreation           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwndChild</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HMENU&nbsp;</td>
          <td class="mdname" nowrap> <em>hSysMenu</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fVisible</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fDisabled</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02735">2735</a> of file <a class="el" href="../../d7/d4/mdiwin_8c-source.html">mdiwin.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l02069">ACTIVE</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02067">CKIDS</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01514">HW</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01515">HWq</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02073">ITILELEVEL</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02028">MAXITEMS</a>, <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00165">MDIAddSysMenu()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04100">NtUserDestroyMenu()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01567">NtUserRedrawFrame</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l08507">NtUserSetSystemMenu()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l02180">NtUserSetWindowPos()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06274">NtUserShowWindow()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01512">PtoH</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00213">REBASE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00215">REBASEPWND</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00652">SendMessage()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01763">tagWND::spmenuSys</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00120">ValidateHwnd</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02415">WFMAXIMIZED</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02420">WFMINIMIZED</a>.
<p>
Referenced by <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l01197">_CreateWindowEx()</a>.
<p>
<pre class="fragment"><div>02735                                                                                              {
02736     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwndChild;
02737     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a>  pwndClient;
02738     HWND  hwndClient;
02739     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>  fHasOwnSysMenu;
02740     <a class="code" href="../../d8/d0/structtagMDI.html">PMDI</a> pmdi;
02741 
02742     pwndChild = <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(hwndChild);
02743     pwndClient = <a class="code" href="../../d6/d0/usercli_8h.html#a27">REBASEPWND</a>(pwndChild,spwndParent);
02744     hwndClient = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(pwndClient);
02745 
02746     fHasOwnSysMenu = (pwndChild-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o15">spmenuSys</a>) ? <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a> : <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
02747 
02748     pmdi = ((<a class="code" href="../../d0/d1/structtagMDIWND.html">PMDIWND</a>)(pwndClient))-&gt;pmdi;
02749 
02750     <a class="code" href="../../d6/d0/usercli_8h.html#a270">CKIDS</a>(pmdi)++;
02751     <a class="code" href="../../d6/d0/usercli_8h.html#a276">ITILELEVEL</a>(pmdi)++;
02752     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a276">ITILELEVEL</a>(pmdi) &gt; 0x7ffe)
02753         <a class="code" href="../../d6/d0/usercli_8h.html#a276">ITILELEVEL</a>(pmdi) = 0;
02754 
02755     <span class="comment">// Update "Window" menu if this new window should be on it</span>
02756     <span class="keywordflow">if</span> (fVisible &amp;&amp; !fDisabled &amp;&amp; (<a class="code" href="../../d6/d0/usercli_8h.html#a270">CKIDS</a>(pmdi) &lt;= <a class="code" href="../../d6/d0/usercli_8h.html#a260">MAXITEMS</a>))
02757         <a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(hwndClient, WM_MDIREFRESHMENU, 0, 0L);
02758 
02759     <span class="comment">//</span>
02760     <span class="comment">// Add the MDI System Menu.  Catch the case of not being able to add a</span>
02761     <span class="comment">// system menu (EG, guy doesn't have WS_SYSMENU style), and delete the</span>
02762     <span class="comment">// menu to avoid buildup in USER's heap.</span>
02763     <span class="comment">//</span>
02764     <span class="keywordflow">if</span> (hSysMenu &amp;&amp; (fHasOwnSysMenu || !<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a297">NtUserSetSystemMenu</a>(hwndChild, hSysMenu)))
02765         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a158">NtUserDestroyMenu</a>(hSysMenu);
02766 
02767     <span class="keywordflow">if</span> (fVisible)
02768     {
02769         <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwndChild, WFMINIMIZED) || !<a class="code" href="../../d6/d0/usercli_8h.html#a272">ACTIVE</a>(pmdi))
02770         {
02771             <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a115">NtUserSetWindowPos</a>(hwndChild, HWND_TOP, 0, 0, 0, 0,
02772                     SWP_NOMOVE | SWP_NOSIZE | SWP_SHOWWINDOW);
02773 
02774             <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwndChild, WFMAXIMIZED) &amp;&amp; !fHasOwnSysMenu)
02775             {
02776                 <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwndParent = <a class="code" href="../../d6/d0/usercli_8h.html#a27">REBASEPWND</a>(pwndClient, spwndParent);
02777                 <a class="code" href="../../d1/d1/structtagMENU.html">PMENU</a> pmenu = <a class="code" href="../../d6/d0/usercli_8h.html#a26">REBASE</a>(pwndParent, spmenu);
02778                 <a class="code" href="../../d6/d0/usercli_8h.html#a778">MDIAddSysMenu</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a448">PtoH</a>(pmenu), hwndChild);
02779                 <a class="code" href="../../d6/d0/usercli_8h.html#a222">NtUserRedrawFrame</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a450">HW</a>(pwndParent));
02780             }
02781         }
02782         <span class="keywordflow">else</span>
02783         {
02784             <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a237">NtUserShowWindow</a>(hwndChild, SW_SHOWMINNOACTIVE);
02785         }
02786     }
02787 
02788 
02789     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
02790 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a13" doxytag="mdiwin.c::RecalculateScrollRanges" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void RecalculateScrollRanges           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwndParent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fIgnoreMin</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00483">483</a> of file <a class="el" href="../../d7/d4/mdiwin_8c-source.html">mdiwin.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l02062">CALCSCROLL</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01515">HWq</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d1/d7/ntcftxt_8h-source.html#l00427">PostMessage()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02072">SCROLL</a>, and <a class="el" href="../../d7/d9/usercli_8h-source.html#l02065">SCROLLCOUNT</a>.
<p>
Referenced by <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02531">DefMDIChildProcWorker()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01657">MDIClientWndProcWorker()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02425">xxxChildResize()</a>, and <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01540">xxxMDIDestroy()</a>.
<p>
<pre class="fragment"><div>00486 {
00487     <a class="code" href="../../d8/d0/structtagMDI.html">PMDI</a> pmdi = ((<a class="code" href="../../d0/d1/structtagMDIWND.html">PMDIWND</a>)pwndParent)-&gt;pmdi;
00488 
00489     <span class="keywordflow">if</span> (!(<a class="code" href="../../d6/d0/usercli_8h.html#a275">SCROLL</a>(pmdi) &amp; (<a class="code" href="../../d6/d0/usercli_8h.html#a267">CALCSCROLL</a> | <a class="code" href="../../d6/d0/usercli_8h.html#a269">SCROLLCOUNT</a>))) {
00490         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d8/ntcftxt_8h.html#a20">PostMessage</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(pwndParent), MM_CALCSCROLL, fIgnoreMin, 0L)) {
00491             <a class="code" href="../../d6/d0/usercli_8h.html#a275">SCROLL</a>(pmdi) |= <a class="code" href="../../d6/d0/usercli_8h.html#a267">CALCSCROLL</a>;
00492         }
00493     }
00494 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a12" doxytag="mdiwin.c::ScrollChildren" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID ScrollChildren           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>wMsg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00463">463</a> of file <a class="el" href="../../d7/d4/mdiwin_8c-source.html">mdiwin.c</a>.
<p>
References <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00383">ScrollMDIChildren()</a>, and <a class="el" href="../../d2/d7/hal_8h.html#a212">VOID()</a>.
<p>
<pre class="fragment"><div>00467 {
00468     <a class="code" href="../../d6/d5/mdiwin_8c.html#a11">ScrollMDIChildren</a>(hwnd,
00469                       wMsg == WM_VSCROLL ? SB_VERT : SB_HORZ,
00470                       LOWORD(wParam),
00471                       (<span class="keywordtype">short</span>)(HIWORD(wParam)));
00472 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a11" doxytag="mdiwin.c::ScrollMDIChildren" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void ScrollMDIChildren           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>nCtl</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>wCmd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>iThumbPos</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00383">383</a> of file <a class="el" href="../../d7/d4/mdiwin_8c-source.html">mdiwin.c</a>.
<p>
References <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00200">CalcClientScrolling()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d4/d7/winmgrc_8c-source.html#l00383">GetScrollInfo()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05740">NtUserScrollWindowEx()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00181">SBJ_HORZ</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00182">SBJ_VERT</a>, <a class="el" href="../../d7/d3/client_2sbapi_8c-source.html#l00021">SetScrollPos()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00202">SYSMET</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01657">MDIClientWndProcWorker()</a>, and <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00463">ScrollChildren()</a>.
<p>
<pre class="fragment"><div>00388 {
00389     SCROLLINFO  si;
00390     <span class="keywordtype">int</span> wInc;
00391     <span class="keywordtype">int</span> wNewPos;
00392     <span class="comment">//SHORT sPos;</span>
00393     <span class="keywordtype">int</span>          x, y;
00394 
00395     wInc = (((nCtl == SB_VERT) ? <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CYSIZE) : <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CXSIZE)) + 7) / 8;
00396 
00397     si.cbSize   = <span class="keyword">sizeof</span>(SCROLLINFO);
00398     si.fMask    = SIF_ALL;
00399     <a class="code" href="../../d3/d8/winmgrc_8c.html#a21">GetScrollInfo</a>(hwnd, nCtl, &amp;si);
00400 
00401     si.nPage--;
00402     si.nMax -= si.nPage;
00403 
00404     <span class="keywordflow">switch</span> (wCmd) {
00405     <span class="keywordflow">case</span> SB_BOTTOM:
00406         wNewPos = si.nMax;
00407         <span class="keywordflow">break</span>;
00408     <span class="keywordflow">case</span> SB_TOP:
00409         wNewPos = si.nMin;
00410         <span class="keywordflow">break</span>;
00411     <span class="keywordflow">case</span> SB_LINEDOWN:
00412         wNewPos = si.nPos + wInc;
00413         <span class="keywordflow">break</span>;
00414     <span class="keywordflow">case</span> SB_LINEUP:
00415         wNewPos = si.nPos - wInc;
00416         <span class="keywordflow">break</span>;
00417     <span class="keywordflow">case</span> SB_PAGEDOWN:
00418         wNewPos = si.nPos + si.nPage;
00419         <span class="keywordflow">break</span>;
00420     <span class="keywordflow">case</span> SB_PAGEUP:
00421         wNewPos = si.nPos - si.nPage;
00422         <span class="keywordflow">break</span>;
00423     <span class="keywordflow">case</span> SB_THUMBPOSITION:
00424 
00425         wNewPos = iThumbPos;
00426         <span class="keywordflow">break</span>;
00427     <span class="keywordflow">case</span> SB_ENDSCROLL:
00428         <a class="code" href="../../d6/d5/mdiwin_8c.html#a10">CalcClientScrolling</a>(hwnd, (nCtl == SB_VERT) ? SBJ_VERT : SBJ_HORZ, FALSE);
00429 
00430     <span class="comment">/*</span>
00431 <span class="comment">     ** FALL THRU **</span>
00432 <span class="comment">     */</span>
00433     <span class="keywordflow">default</span>:
00434         <span class="keywordflow">return</span>;
00435     }
00436 
00437     <span class="keywordflow">if</span> (wNewPos &lt; si.nMin)
00438         wNewPos = si.nMin;
00439     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (wNewPos &gt; si.nMax)
00440         wNewPos = si.nMax;
00441 
00442     <a class="code" href="../../d6/d4/client_2sbapi_8c.html#a0">SetScrollPos</a>(hwnd, nCtl, wNewPos, TRUE);
00443 
00444     <span class="comment">// the "* 8" is because we need to scroll in bytes.  The scrollbar</span>
00445     <span class="comment">// increments for MDI are bytes (this is due to the fact that we need to</span>
00446     <span class="comment">// not upset the brush origin of the app workspace brush that is used to</span>
00447     <span class="comment">// fill the MDI background)</span>
00448 
00449     x = (si.nPos - wNewPos) * 8;
00450 
00451     <span class="keywordflow">if</span> (nCtl == SB_VERT) {
00452         y = x;
00453         x = 0;
00454     } <span class="keywordflow">else</span>
00455         <span class="comment">// x is already set properly for this case</span>
00456         y = 0;
00457 
00458     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a219">NtUserScrollWindowEx</a>(hwnd, x, y, NULL, NULL, NULL, NULL,
00459            SW_SCROLLWINDOW | SW_INVALIDATE | SW_ERASE | SW_SCROLLCHILDREN);
00460 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a23" doxytag="mdiwin.c::TileWindows" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> WORD TileWindows           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwndParent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>flags</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>CONST RECT *&nbsp;</td>
          <td class="mdname" nowrap> <em>lpRect</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>chwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>CONST HWND *&nbsp;</td>
          <td class="mdname" nowrap> <em>ahwnd</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01217">1217</a> of file <a class="el" href="../../d7/d4/mdiwin_8c-source.html">mdiwin.c</a>.
<p>
References <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00711">ArrangeWindows()</a>, and <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01072">TileWindowsEnum()</a>.
<p>
Referenced by <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01657">MDIClientWndProcWorker()</a>, and <a class="el" href="../../d4/d7/client_8c-source.html#l03581">TileChildWindows()</a>.
<p>
<pre class="fragment"><div>01223 {
01224     <span class="keywordflow">return</span> <a class="code" href="../../d6/d5/mdiwin_8c.html#a17">ArrangeWindows</a>(hwndParent, flags, lpRect, chwnd, ahwnd, TileWindowsEnum);
01225 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a22" doxytag="mdiwin.c::TileWindowsEnum" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL CALLBACK TileWindowsEnum           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HMONITOR&nbsp;</td>
          <td class="mdname" nowrap> <em>hmonitor</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HDC&nbsp;</td>
          <td class="mdname" nowrap> <em>hdc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPRECT&nbsp;</td>
          <td class="mdname" nowrap> <em>lprc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lparam</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01072">1072</a> of file <a class="el" href="../../d7/d4/mdiwin_8c-source.html">mdiwin.c</a>.
<p>
References <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00689">tagARRANGEWINDOWSDATA::chwnd</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00690">tagARRANGEWINDOWSDATA::chwndReal</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00687">tagARRANGEWINDOWSDATA::flags</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00695">tagARRANGEWINDOWSDATA::fVerifyParent</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00833">GetParentArrangeRect()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00693">tagARRANGEWINDOWSDATA::hdwp</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l01761">NtUserDeferWindowPos()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d6/d5/mdiwin_8c.html#a6">PARRANGEWINDOWSDATA</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00691">tagARRANGEWINDOWSDATA::phwnd</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00692">tagARRANGEWINDOWSDATA::pwndDesktop</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00686">tagARRANGEWINDOWSDATA::pwndParent</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00197">VALIDATEHMONITOR</a>, and <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00869">ValidatePositionableWindow()</a>.
<p>
Referenced by <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01217">TileWindows()</a>.
<p>
<pre class="fragment"><div>01077 {
01078     <a class="code" href="../../d4/d8/structtagARRANGEWINDOWSDATA.html">PARRANGEWINDOWSDATA</a> pawd = (<a class="code" href="../../d4/d8/structtagARRANGEWINDOWSDATA.html">PARRANGEWINDOWSDATA</a>)lparam;
01079     <a class="code" href="../../d0/d2/structtagMONITOR.html">PMONITOR</a>    pMonitor = hmonitor ? <a class="code" href="../../d6/d0/usercli_8h.html#a23">VALIDATEHMONITOR</a>(hmonitor) : <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
01080     RECT        rcParent;
01081     <span class="keywordtype">int</span>         ihwnd;
01082     <span class="keywordtype">int</span>         chwndReal;
01083     <span class="keywordtype">int</span>         square;
01084     <span class="keywordtype">int</span>         iCol, iRow;
01085     <span class="keywordtype">int</span>         cCol, cRow;
01086     <span class="keywordtype">int</span>         cRem;
01087     <span class="keywordtype">int</span>         dx, dy;
01088     <span class="keywordtype">int</span>         xRes, yRes;
01089 
01090     UNREFERENCED_PARAMETER(hdc);
01091     UNREFERENCED_PARAMETER(lprc);
01092 
01093     <span class="comment">/*</span>
01094 <span class="comment">     * Get the parent rectangle if none is given.</span>
01095 <span class="comment">     */</span>
01096     <a class="code" href="../../d6/d5/mdiwin_8c.html#a18">GetParentArrangeRect</a>(pawd, pMonitor, &amp;rcParent);
01097 
01098     <span class="comment">/*</span>
01099 <span class="comment">     * Now, figure out how many REAL windows we have.</span>
01100 <span class="comment">     */</span>
01101     chwndReal = 0;
01102     <span class="keywordflow">for</span> (ihwnd = pawd-&gt;<a class="code" href="../../d4/d8/structtagARRANGEWINDOWSDATA.html#o3">chwnd</a>; --ihwnd &gt;= 0;) {
01103         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d5/mdiwin_8c.html#a19">ValidatePositionableWindow</a>(
01104                 pawd-&gt;<a class="code" href="../../d4/d8/structtagARRANGEWINDOWSDATA.html#o5">phwnd</a>[ihwnd],
01105                 pawd-&gt;<a class="code" href="../../d4/d8/structtagARRANGEWINDOWSDATA.html#o9">fVerifyParent</a> ? pawd-&gt;<a class="code" href="../../d4/d8/structtagARRANGEWINDOWSDATA.html#o0">pwndParent</a> : NULL,
01106                 pawd-&gt;<a class="code" href="../../d4/d8/structtagARRANGEWINDOWSDATA.html#o6">pwndDesktop</a>,
01107                 pawd-&gt;<a class="code" href="../../d4/d8/structtagARRANGEWINDOWSDATA.html#o1">flags</a>,
01108                 pMonitor,
01109                 NULL)) {
01110 
01111             chwndReal++;
01112         }
01113     }
01114 
01115     <span class="keywordflow">if</span> (chwndReal == 0)
01116         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01117 
01118     xRes = rcParent.right - rcParent.left;
01119     yRes = rcParent.bottom - rcParent.top;
01120     <span class="keywordflow">if</span> (xRes &lt;= 0 || yRes &lt;= 0)
01121         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01122 
01123     <span class="comment">/*</span>
01124 <span class="comment">     * Compute nearest least square</span>
01125 <span class="comment">     */</span>
01126     <span class="keywordflow">for</span> (square = 2; square * square &lt;= chwndReal; square++) {
01127         ;
01128     }
01129 
01130     <span class="keywordflow">if</span> (pawd-&gt;<a class="code" href="../../d4/d8/structtagARRANGEWINDOWSDATA.html#o1">flags</a> &amp; MDITILE_HORIZONTAL) {
01131         cCol = square - 1;
01132         cRow = chwndReal / cCol;
01133         cRem = chwndReal % cCol;
01134     } <span class="keywordflow">else</span> {
01135         cRow = square - 1;
01136         cCol = chwndReal / cRow;
01137         cRem = chwndReal % cRow;
01138     }
01139 
01140     chwndReal = 0;
01141     ihwnd = -1;
01142     <span class="keywordflow">for</span> (iCol = 0; iCol &lt; cCol; iCol++) {
01143         <span class="comment">/*</span>
01144 <span class="comment">         * Add one extra row to handle the remainders.</span>
01145 <span class="comment">         */</span>
01146         <span class="keywordflow">if</span> (cCol - iCol &lt;= cRem) {
01147             cRow++;
01148         }
01149 
01150         <span class="keywordflow">for</span> (iRow = 0; iRow &lt; cRow; iRow++) {
01151             HWND    hwndChild;
01152             <a class="code" href="../../d6/d9/structtagWND.html">PWND</a>    pwndChild;
01153             <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>   dwSWPFlags;
01154 
01155             dx = xRes / cCol;
01156             dy = yRes / cRow;
01157 
01158 NextWindow:
01159             <span class="comment">/*</span>
01160 <span class="comment">             * Skip bogus and nonpositionable windows</span>
01161 <span class="comment">             */</span>
01162             ihwnd++;
01163             <span class="keywordflow">if</span> (ihwnd &gt;= pawd-&gt;<a class="code" href="../../d4/d8/structtagARRANGEWINDOWSDATA.html#o3">chwnd</a>)
01164                 <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01165 
01166             hwndChild = pawd-&gt;<a class="code" href="../../d4/d8/structtagARRANGEWINDOWSDATA.html#o5">phwnd</a>[ihwnd];
01167             pwndChild = <a class="code" href="../../d6/d5/mdiwin_8c.html#a19">ValidatePositionableWindow</a>(
01168                     hwndChild,
01169                     pawd-&gt;<a class="code" href="../../d4/d8/structtagARRANGEWINDOWSDATA.html#o9">fVerifyParent</a> ? pawd-&gt;<a class="code" href="../../d4/d8/structtagARRANGEWINDOWSDATA.html#o0">pwndParent</a> : NULL,
01170                     pawd-&gt;<a class="code" href="../../d4/d8/structtagARRANGEWINDOWSDATA.html#o6">pwndDesktop</a>,
01171                     pawd-&gt;<a class="code" href="../../d4/d8/structtagARRANGEWINDOWSDATA.html#o1">flags</a>,
01172                     pMonitor,
01173                     &amp;dwSWPFlags);
01174 
01175             <span class="keywordflow">if</span> (!pwndChild)
01176                 <span class="keywordflow">goto</span> NextWindow;
01177 
01178             <span class="comment">/*</span>
01179 <span class="comment">             * Move, size the window</span>
01180 <span class="comment">             */</span>
01181             pawd-&gt;<a class="code" href="../../d4/d8/structtagARRANGEWINDOWSDATA.html#o7">hdwp</a> = <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a108">NtUserDeferWindowPos</a>(
01182                     pawd-&gt;<a class="code" href="../../d4/d8/structtagARRANGEWINDOWSDATA.html#o7">hdwp</a>,
01183                     hwndChild,
01184                     HWND_TOP,
01185                     rcParent.left + iCol*dx,
01186                     rcParent.top + iRow*dy,
01187                     dx,
01188                     dy,
01189                     dwSWPFlags);
01190 
01191             <span class="keywordflow">if</span> (pawd-&gt;<a class="code" href="../../d4/d8/structtagARRANGEWINDOWSDATA.html#o7">hdwp</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
01192                 <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01193 
01194             chwndReal++;
01195             pawd-&gt;<a class="code" href="../../d4/d8/structtagARRANGEWINDOWSDATA.html#o4">chwndReal</a>++;
01196         }
01197 
01198         <span class="keywordflow">if</span> (cCol - iCol &lt;= cRem) {
01199             cRow--;
01200             cRem--;
01201         }
01202     }
01203 
01204     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01205 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a8" doxytag="mdiwin.c::TranslateMDISysAccel" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL TranslateMDISysAccel           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPMSG&nbsp;</td>
          <td class="mdname" nowrap> <em>lpMsg</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00096">96</a> of file <a class="el" href="../../d7/d4/mdiwin_8c-source.html">mdiwin.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l02069">ACTIVE</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00799">FNID_MDICLIENT</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00843">GETFNID</a>, <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00506">GetKeyState()</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00538">IsWindowEnabled()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00652">SendMessage()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00047">ValidateHwndNoRip()</a>.
<p>
Referenced by <a class="el" href="../../d0/d1/usrbench_8c-source.html#l00103">WinMain()</a>.
<p>
<pre class="fragment"><div>00099 {
00100     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwnd;
00101     <a class="code" href="../../d8/d0/structtagMDI.html">PMDI</a> pmdi;
00102     <span class="keywordtype">int</span> event;
00103 
00104     <span class="comment">/*</span>
00105 <span class="comment">     * Is this a message we care about?</span>
00106 <span class="comment">     */</span>
00107     <span class="keywordflow">if</span> (lpMsg-&gt;message != WM_KEYDOWN &amp;&amp; lpMsg-&gt;message != WM_SYSKEYDOWN) {
00108         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00109     }
00110 
00111     <span class="comment">/*</span>
00112 <span class="comment">     * This is called within a message loop. If the window gets destroyed,</span>
00113 <span class="comment">     * there still may be other messages in the queue that get returned</span>
00114 <span class="comment">     * after the window is destroyed. The app will call TranslateAccelerator()</span>
00115 <span class="comment">     * on every one of these, causing RIPs.... Make it nice so it just</span>
00116 <span class="comment">     * returns FALSE.</span>
00117 <span class="comment">     */</span>
00118     <span class="keywordflow">if</span> ((pwnd = <a class="code" href="../../d3/d9/client_2wow_8c.html#a1">ValidateHwndNoRip</a>(hwnd)) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00119         RIPERR0(ERROR_INVALID_WINDOW_HANDLE, RIP_VERBOSE, <span class="stringliteral">""</span>);
00120         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00121     }
00122 
00123     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pwnd);
00124 
00125     <span class="comment">/*</span>
00126 <span class="comment">     * Make sure this is really an MDIClient window. Harvard Graphics 2.0</span>
00127 <span class="comment">     * calls this function with a different window class and caused us</span>
00128 <span class="comment">     * to get an access violation.</span>
00129 <span class="comment">     */</span>
00130     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a232">GETFNID</a>(pwnd) != <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a206">FNID_MDICLIENT</a>) {
00131         RIPMSG0(RIP_WARNING, <span class="stringliteral">"Window not of MDIClient class"</span>);
00132         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00133     }
00134 
00135     <span class="comment">/*</span>
00136 <span class="comment">     * Get a pointer to the MDI structure</span>
00137 <span class="comment">     */</span>
00138     pmdi = ((<a class="code" href="../../d0/d1/structtagMDIWND.html">PMDIWND</a>)pwnd)-&gt;pmdi;
00139 
00140     <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d0/usercli_8h.html#a272">ACTIVE</a>(pmdi))
00141         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00142 
00143     <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d9/client_2wow_8c.html#a20">IsWindowEnabled</a>(<a class="code" href="../../d6/d0/usercli_8h.html#a272">ACTIVE</a>(pmdi)))
00144         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00145 
00146     <span class="keywordflow">switch</span> (lpMsg-&gt;wParam) {
00147     <span class="keywordflow">case</span> VK_F4:
00148         event = SC_CLOSE;
00149         <span class="keywordflow">break</span>;
00150     <span class="keywordflow">case</span> VK_F6:
00151     <span class="keywordflow">case</span> VK_TAB:
00152         <span class="keywordflow">if</span> (<a class="code" href="../../d8/d9/client_2ntstubs_8c.html#a16">GetKeyState</a>(VK_SHIFT) &lt; 0)
00153             event = SC_PREVWINDOW;
00154         <span class="keywordflow">else</span>
00155             event = SC_NEXTWINDOW;
00156         <span class="keywordflow">break</span>;
00157     <span class="keywordflow">default</span>:
00158         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00159     }
00160 
00161     <span class="comment">/*</span>
00162 <span class="comment">     * All of these have the control key down</span>
00163 <span class="comment">     */</span>
00164     <span class="keywordflow">if</span> (<a class="code" href="../../d8/d9/client_2ntstubs_8c.html#a16">GetKeyState</a>(VK_CONTROL) &gt;= 0)
00165         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00166 
00167     <span class="keywordflow">if</span> (<a class="code" href="../../d8/d9/client_2ntstubs_8c.html#a16">GetKeyState</a>(VK_MENU) &lt; 0)
00168         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00169 
00170     <a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(<a class="code" href="../../d6/d0/usercli_8h.html#a272">ACTIVE</a>(pmdi), WM_SYSCOMMAND, event, MAKELONG(lpMsg-&gt;wParam, 0));
00171 
00172     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00173 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a16" doxytag="mdiwin.c::UnmaximizeChildWindows" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL UnmaximizeChildWindows           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hwndParent</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00603">603</a> of file <a class="el" href="../../d7/d4/mdiwin_8c-source.html">mdiwin.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d5/d6/enumwin_8c-source.html#l00091">BuildHwndList()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00120">GetDesktopWindow()</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00305">GetWindow()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05163">NtUserGetForegroundWindow()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04298">NtUserLockWindowUpdate()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l02180">NtUserSetWindowPos()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06274">NtUserShowWindow()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06260">NtUserShowWindowAsync()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01585">RedrawWindow</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00960">UserLocalFree</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00120">ValidateHwnd</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02415">WFMAXIMIZED</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02419">WFVISIBLE</a>.
<p>
Referenced by <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00711">ArrangeWindows()</a>.
<p>
<pre class="fragment"><div>00605 {
00606     HWND hwndMove;
00607     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwndMove;
00608     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fFoundOne = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00609     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fAsync;
00610     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> chwnd;
00611     HWND *phwndList;
00612     HWND *phwnd;
00613     HWND hwndChild = <a class="code" href="../../d3/d9/client_2wow_8c.html#a12">GetWindow</a>(hwndParent, GW_CHILD);
00614 
00615     <span class="comment">/*</span>
00616 <span class="comment">     * Get the hwnd list.  It is returned in a block of memory</span>
00617 <span class="comment">     * allocated with LocalAlloc.</span>
00618 <span class="comment">     */</span>
00619     <span class="keywordflow">if</span> (hwndChild == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> ||
00620             (chwnd = <a class="code" href="../../d4/d1/userk_8h.html#a1157">BuildHwndList</a>(NULL, <a class="code" href="../../d3/d9/client_2wow_8c.html#a12">GetWindow</a>(hwndParent, GW_CHILD),
00621                                    FALSE, 0, &amp;phwndList)) == 0) {
00622         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00623     }
00624 
00625     fAsync = (hwndParent == <a class="code" href="../../d3/d9/client_2wow_8c.html#a4">GetDesktopWindow</a>());
00626 
00627     <span class="keywordflow">for</span> (phwnd = phwndList; chwnd &gt; 0; chwnd--, phwnd++) {
00628         <span class="keywordflow">if</span> ((hwndMove = *phwnd) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00629             <span class="keywordflow">continue</span>;
00630 
00631         <span class="keywordflow">if</span> ((pwndMove = <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(hwndMove)) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00632             <span class="keywordflow">continue</span>;
00633 
00634 <span class="comment">// Not in Chicago -- FritzS</span>
00635 <span class="comment">//        if (pwndMove-&gt;spwndOwner != NULL)</span>
00636 <span class="comment">//            continue;</span>
00637 
00638         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwndMove, WFMAXIMIZED) &amp;&amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwndMove, WFVISIBLE)) {
00639             <span class="comment">//</span>
00640             <span class="comment">// If we haven't done it yet, lock the screen to prevent sending</span>
00641             <span class="comment">// paints for a cleaner update.</span>
00642             <span class="comment">//</span>
00643             <span class="keywordflow">if</span> (!fFoundOne &amp;&amp; fAsync)
00644                 <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a165">NtUserLockWindowUpdate</a>(hwndParent);
00645 
00646             fFoundOne = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00647 
00648             <span class="keywordflow">if</span> (fAsync)
00649                 <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a236">NtUserShowWindowAsync</a>(hwndMove, SW_SHOWNOACTIVATE);
00650             <span class="keywordflow">else</span>
00651                 <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a237">NtUserShowWindow</a>(hwndMove, SW_SHOWNORMAL);
00652         }
00653     }
00654 
00655     <a class="code" href="../../d6/d0/usercli_8h.html#a138">UserLocalFree</a>(phwndList);
00656 
00657     <span class="keywordflow">if</span> (fFoundOne &amp;&amp; fAsync) {
00658 
00659         HWND hwndActive = <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a199">NtUserGetForegroundWindow</a>();
00660         <span class="keywordflow">if</span> (hwndActive != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00661 
00662             <span class="comment">/*</span>
00663 <span class="comment">             * Hack! Since the above showwindows cause zorder changes, we want</span>
00664 <span class="comment">             * the active window to be in front.  This makes sure...</span>
00665 <span class="comment">             */</span>
00666             <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a115">NtUserSetWindowPos</a>(hwndActive, HWND_TOP, 0, 0, 0, 0,
00667                 SWP_NOMOVE | SWP_NOSIZE | SWP_NOACTIVATE | SWP_ASYNCWINDOWPOS);
00668 
00669         }
00670         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a165">NtUserLockWindowUpdate</a>(NULL);
00671         <a class="code" href="../../d6/d0/usercli_8h.html#a239">RedrawWindow</a>(hwndParent, NULL, NULL,
00672                 RDW_INVALIDATE | RDW_ALLCHILDREN | RDW_ERASE | RDW_FRAME);
00673     }
00674 
00675     <span class="keywordflow">return</span> fFoundOne;
00676 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a19" doxytag="mdiwin.c::ValidatePositionableWindow" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d6/d9/structtagWND.html">PWND</a> ValidatePositionableWindow           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwndChild</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwndParent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwndDesktop</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwMDIFlags</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d2/structtagMONITOR.html">PMONITOR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pMonitor</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>pdwSWPFlags</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00869">869</a> of file <a class="el" href="../../d7/d4/mdiwin_8c-source.html">mdiwin.c</a>.
<p>
References <a class="el" href="../../d0/d1/mmrtl_8c-source.html#l00426">_MonitorFromWindow()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00215">REBASEPWND</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00120">ValidateHwnd</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02364">WEFTOOLWINDOW</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02360">WEFTOPMOST</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02262">WFCPRESENT</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02418">WFDISABLED</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02420">WFMINIMIZED</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02404">WFSIZEBOX</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02419">WFVISIBLE</a>.
<p>
Referenced by <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00927">CascadeWindowsEnum()</a>, and <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01072">TileWindowsEnum()</a>.
<p>
<pre class="fragment"><div>00876 {
00877     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a>    pwndChild;
00878 
00879     pwndChild = <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(hwndChild);
00880     <span class="keywordflow">if</span> (pwndChild) {
00881         <span class="keywordflow">if</span> (pwndParent &amp;&amp; <a class="code" href="../../d6/d0/usercli_8h.html#a27">REBASEPWND</a>(pwndChild, spwndParent) != pwndParent) {
00882             RIPMSG0(RIP_WARNING, <span class="stringliteral">"Cascade/Tile Windows: Windows in list must have same parent"</span>);
00883         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (
00884                 <span class="comment">/*</span>
00885 <span class="comment">                 * mikesch - removed the maximized check since the call</span>
00886 <span class="comment">                 * to restore maximized windows in unmaximizechildwindows occurs</span>
00887 <span class="comment">                 * asynchronously now.</span>
00888 <span class="comment">                 */</span>
00889                 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwndChild, WFVISIBLE) &amp;&amp;
00890                 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwndChild, WFCPRESENT) &amp;&amp;
00891                 !<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwndChild, WFMINIMIZED) &amp;&amp;
00892                 !<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwndChild, WEFTOPMOST) &amp;&amp;
00893                 (!(dwMDIFlags &amp; MDITILE_SKIPDISABLED) || !<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwndChild, WFDISABLED)) &amp;&amp;
00894                 !<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwndChild, WEFTOOLWINDOW) &amp;&amp;
00895                 ((pMonitor) ?
00896                     (pMonitor == <a class="code" href="../../d9/d1/mmrtl_8c.html#a8">_MonitorFromWindow</a>(pwndChild, MONITOR_DEFAULTTONULL)) :
00897                     (pwndParent != pwndDesktop || <a class="code" href="../../d9/d1/mmrtl_8c.html#a8">_MonitorFromWindow</a>(pwndChild, MONITOR_DEFAULTTONULL)))) {
00898 
00899                     <span class="keywordflow">if</span> (pdwSWPFlags) {
00900                         *pdwSWPFlags = SWP_NOACTIVATE | SWP_NOCOPYBITS;
00901                         <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwndChild, WFSIZEBOX)) {
00902                             *pdwSWPFlags |= SWP_NOSIZE;
00903                         }
00904                         <span class="keywordflow">if</span> (!(dwMDIFlags &amp; MDITILE_ZORDER)) {
00905                             *pdwSWPFlags |= SWP_NOZORDER;
00906                         }
00907                     }
00908             <span class="keywordflow">return</span> pwndChild;
00909         }
00910     }
00911 
00912     <span class="keywordflow">return</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00913 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a36" doxytag="mdiwin.c::xxxChildResize" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void xxxChildResize           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>wMode</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02425">2425</a> of file <a class="el" href="../../d7/d4/mdiwin_8c-source.html">mdiwin.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01515">HWq</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00508">IsChild()</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00367">Lock</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02068">MAXED</a>, <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00165">MDIAddSysMenu()</a>, <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00289">MDIRemoveSysMenu()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05406">NtUserMinMaximize()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l09643">NtUserQueryWindow()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01574">NtUserSetSysMenu</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02061">OTHERMAXING</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01512">PtoH</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00213">REBASE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00215">REBASEPWND</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00483">RecalculateScrollRanges()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02072">SCROLL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02065">SCROLLCOUNT</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00652">SendMessage()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01747">tagWND::spwndOwner</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02737">SW_MDIRESTORE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00362">ThreadLock</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00363">ThreadLockAlways</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00366">ThreadUnlock</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00368">Unlock</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02419">WFVISIBLE</a>, <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00099">wMode</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02985">tagMDI::wScroll</a>, and <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00032">xxxSetFrameTitle()</a>.
<p>
Referenced by <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02531">DefMDIChildProcWorker()</a>.
<p>
<pre class="fragment"><div>02428 {
02429     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwndT;
02430     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwndMDI = <a class="code" href="../../d6/d0/usercli_8h.html#a27">REBASEPWND</a>(pwnd, spwndParent);
02431     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwndFrame = <a class="code" href="../../d6/d0/usercli_8h.html#a27">REBASEPWND</a>(pwndMDI, spwndParent);
02432     HWND hwndOldActive;
02433     <a class="code" href="../../d8/d0/structtagMDI.html">PMDI</a> pmdi;
02434     HWND hwndActive;
02435     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpwndMDI;
02436     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpwndFrame;
02437     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpwndT;
02438     <a class="code" href="../../d1/d1/structtagMENU.html">PMENU</a> pmenu;
02439     HWND hwnd = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(pwnd);
02440 
02441     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pwnd);
02442 
02443     <a class="code" href="../../d6/d0/usercli_8h.html#a229">NtUserSetSysMenu</a>(hwnd);
02444 
02445     <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(pwndMDI, &amp;tlpwndMDI);
02446     <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(pwndFrame, &amp;tlpwndFrame);
02447 
02448     <span class="comment">/*</span>
02449 <span class="comment">     * Get a pointer to the MDI structure</span>
02450 <span class="comment">     */</span>
02451     pmdi = ((<a class="code" href="../../d0/d1/structtagMDIWND.html">PMDIWND</a>)pwndMDI)-&gt;pmdi;
02452     pmenu = <a class="code" href="../../d6/d0/usercli_8h.html#a26">REBASE</a>(pwndFrame, spmenu);
02453 
02454     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a271">MAXED</a>(pmdi) == hwnd &amp;&amp; <a class="code" href="../../d3/d8/aug98_2test_2main_8c.html#a19">wMode</a> != SIZEFULLSCREEN) {
02455         <span class="comment">/*</span>
02456 <span class="comment">         * Restoring the current maximized window...</span>
02457 <span class="comment">         * Remove the system menu from the Frame window.</span>
02458 <span class="comment">         */</span>
02459         <span class="keywordflow">if</span> (!(<a class="code" href="../../d6/d0/usercli_8h.html#a275">SCROLL</a>(pmdi) &amp; <a class="code" href="../../d6/d0/usercli_8h.html#a266">OTHERMAXING</a>)) {
02460             <a class="code" href="../../d6/d0/usercli_8h.html#a42">Unlock</a>(&amp;<a class="code" href="../../d6/d0/usercli_8h.html#a271">MAXED</a>(pmdi));
02461             <a class="code" href="../../d6/d0/usercli_8h.html#a779">MDIRemoveSysMenu</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a448">PtoH</a>(pmenu), hwnd);
02462             <a class="code" href="../../d6/d0/usercli_8h.html#a42">Unlock</a>(&amp;<a class="code" href="../../d6/d0/usercli_8h.html#a271">MAXED</a>(pmdi));
02463             <a class="code" href="../../d6/d5/mdiwin_8c.html#a7">xxxSetFrameTitle</a>(pwndFrame, pwndMDI, (LPWSTR)1L);
02464         }
02465     }
02466 
02467     <span class="keywordflow">if</span> (<a class="code" href="../../d3/d8/aug98_2test_2main_8c.html#a19">wMode</a> == SIZEFULLSCREEN) {
02468 
02469         <span class="comment">/*</span>
02470 <span class="comment">         * Already maximized?</span>
02471 <span class="comment">         */</span>
02472         <span class="keywordflow">if</span> (hwnd == <a class="code" href="../../d6/d0/usercli_8h.html#a271">MAXED</a>(pmdi))
02473             <span class="keywordflow">goto</span> Exit;
02474 
02475         <span class="comment">/*</span>
02476 <span class="comment">         * Maximizing this window...</span>
02477 <span class="comment">         */</span>
02478 
02479         pmdi-&gt;<a class="code" href="../../d8/d0/structtagMDI.html#o5">wScroll</a> |= <a class="code" href="../../d6/d0/usercli_8h.html#a266">OTHERMAXING</a> | <a class="code" href="../../d6/d0/usercli_8h.html#a269">SCROLLCOUNT</a>;
02480 
02481         <span class="keywordflow">if</span> (hwndOldActive = <a class="code" href="../../d6/d0/usercli_8h.html#a271">MAXED</a>(pmdi)) {
02482             <a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(hwndOldActive, WM_SETREDRAW, FALSE, 0L);
02483             <a class="code" href="../../d6/d0/usercli_8h.html#a779">MDIRemoveSysMenu</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a448">PtoH</a>(pmenu), hwndOldActive);
02484             <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a209">NtUserMinMaximize</a>(hwndOldActive, SW_MDIRESTORE, FALSE);
02485             <a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(hwndOldActive, WM_SETREDRAW, TRUE, 0L);
02486         }
02487 
02488         <a class="code" href="../../d6/d0/usercli_8h.html#a41">Lock</a>(&amp;<a class="code" href="../../d6/d0/usercli_8h.html#a271">MAXED</a>(pmdi), hwnd);
02489 
02490         <span class="comment">/*</span>
02491 <span class="comment">         * Add the system menu to the Frame window.</span>
02492 <span class="comment">         */</span>
02493         <a class="code" href="../../d6/d0/usercli_8h.html#a778">MDIAddSysMenu</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a448">PtoH</a>(pmenu), hwnd);
02494         <a class="code" href="../../d6/d5/mdiwin_8c.html#a7">xxxSetFrameTitle</a>(pwndFrame, pwndMDI, (LPWSTR)1L);
02495 
02496         pmdi-&gt;<a class="code" href="../../d8/d0/structtagMDI.html#o5">wScroll</a> &amp;= ~(<a class="code" href="../../d6/d0/usercli_8h.html#a266">OTHERMAXING</a> | <a class="code" href="../../d6/d0/usercli_8h.html#a269">SCROLLCOUNT</a>);
02497     }
02498 
02499     <span class="keywordflow">if</span> (<a class="code" href="../../d3/d8/aug98_2test_2main_8c.html#a19">wMode</a> == SIZEICONIC) {
02500         <span class="keywordflow">for</span> (pwndT = <a class="code" href="../../d6/d0/usercli_8h.html#a27">REBASEPWND</a>(pwndMDI, spwndChild); pwndT;
02501                 pwndT = <a class="code" href="../../d6/d0/usercli_8h.html#a27">REBASEPWND</a>(pwndT, spwndNext)) {
02502             <span class="keywordflow">if</span> (!pwndT-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o5">spwndOwner</a> &amp;&amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwndT, WFVISIBLE))
02503                 <span class="keywordflow">break</span>;
02504         }
02505 
02506         hwndActive = <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a328">NtUserQueryWindow</a>(hwnd, WindowActiveWindow);
02507         <span class="keywordflow">if</span> ((pwndT != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) &amp;&amp; (hwndActive != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) &amp;&amp;
02508                 <a class="code" href="../../d3/d9/client_2wow_8c.html#a18">IsChild</a>(hwndActive, <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(pwndMDI))) {
02509             <a class="code" href="../../d6/d0/usercli_8h.html#a37">ThreadLockAlways</a>(pwndT, &amp;tlpwndT);
02510             <a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(pwndT), WM_CHILDACTIVATE, 0, 0L);
02511             <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndT);
02512         }
02513     }
02514 
02515     <span class="keywordflow">if</span> (!(<a class="code" href="../../d6/d0/usercli_8h.html#a275">SCROLL</a>(pmdi) &amp; <a class="code" href="../../d6/d0/usercli_8h.html#a269">SCROLLCOUNT</a>))
02516         <a class="code" href="../../d6/d5/mdiwin_8c.html#a13">RecalculateScrollRanges</a>(pwndMDI, FALSE);
02517 
02518 Exit:
02519     <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndFrame);
02520     <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndMDI);
02521 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a24" doxytag="mdiwin.c::xxxMDIActivate" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void xxxMDIActivate           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwndActivate</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01237">1237</a> of file <a class="el" href="../../d7/d4/mdiwin_8c-source.html">mdiwin.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l02069">ACTIVE</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d8/d6/menuc_8c-source.html#l00015">CheckMenuItem()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00024">FindPwndChild()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02071">FIRST</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01514">HW</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01515">HWq</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00367">Lock</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02068">MAXED</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02028">MAXITEMS</a>, <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00104">ModifyMenuItem()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04602">NtUserCallHwndParam()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l09643">NtUserQueryWindow()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05902">NtUserSetFocus()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l02180">NtUserSetWindowPos()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06274">NtUserShowWindow()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00215">REBASEPWND</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00652">SendMessage()</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00408">SetWindowLongPtr()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01764">tagWND::spmenu</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00362">ThreadLock</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00366">ThreadUnlock</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00120">ValidateHwnd</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02418">WFDISABLED</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02267">WFFRAMEON</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02400">WFMAXBOX</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02381">WFNOANIMATE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02318">WFWIN31COMPAT</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02319">WFWIN40COMPAT</a>, and <a class="el" href="../../d7/d9/usercli_8h-source.html#l02070">WINDOW</a>.
<p>
Referenced by <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02531">DefMDIChildProcWorker()</a>, and <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01540">xxxMDIDestroy()</a>.
<p>
<pre class="fragment"><div>01240 {
01241     HWND hwndOld;
01242     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwndOld;
01243 
01244     <a class="code" href="../../d8/d0/structtagMDI.html">PMDI</a> pmdi;
01245     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fShowActivate;
01246     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> nID;
01247     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpwnd;
01248     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpwndOld;
01249     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwndT;
01250     HWND hwnd = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(pwnd);
01251     HWND hwndActivate = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a450">HW</a>(pwndActivate);
01252 
01253     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pwnd);
01254     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pwndActivate);
01255 
01256     <span class="comment">/*</span>
01257 <span class="comment">     * Get a pointer to the MDI structure</span>
01258 <span class="comment">     */</span>
01259     pmdi = ((<a class="code" href="../../d0/d1/structtagMDIWND.html">PMDIWND</a>)pwnd)-&gt;pmdi;
01260 
01261     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a272">ACTIVE</a>(pmdi) == hwndActivate)
01262         <span class="keywordflow">return</span>;
01263 
01264     <span class="keywordflow">if</span> ((pwndActivate != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) &amp;&amp; (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwndActivate, WFDISABLED))) {
01265         <span class="comment">/*</span>
01266 <span class="comment">         * Don't even try activating disabled or invisible windows.</span>
01267 <span class="comment">         */</span>
01268         <span class="keywordflow">return</span>;
01269     }
01270 
01271     pwndT = <a class="code" href="../../d6/d0/usercli_8h.html#a27">REBASEPWND</a>(pwnd, spwndParent);
01272     fShowActivate = (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a450">HW</a>(pwndT) ==
01273             <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a328">NtUserQueryWindow</a>(hwnd, WindowActiveWindow));
01274 
01275     hwndOld = <a class="code" href="../../d6/d0/usercli_8h.html#a272">ACTIVE</a>(pmdi);
01276     <span class="keywordflow">if</span> (hwndOld &amp;&amp; (pwndOld = <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(hwndOld)) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01277         hwndOld = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
01278     }
01279     <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(pwndOld, &amp;tlpwndOld);
01280 
01281     <span class="keywordflow">if</span> (hwndOld) {
01282 
01283         <span class="comment">/*</span>
01284 <span class="comment">         * Attempt to deactivate the MDI child window.</span>
01285 <span class="comment">         * The MDI child window can fail deactivation by returning FALSE.</span>
01286 <span class="comment">         * But this only applies if the MDI frame is the active window</span>
01287 <span class="comment">         * and the app is a 3.1 app or later</span>
01288 <span class="comment">         */</span>
01289         <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(hwndOld, WM_NCACTIVATE, FALSE, 0L) &amp;&amp; fShowActivate) {
01290             <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwndOld, WFWIN31COMPAT))
01291                 <span class="keywordflow">goto</span> UnlockOld;
01292         }
01293 
01294         <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwndOld, WFWIN31COMPAT) &amp;&amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwndOld, WFFRAMEON)) {
01295 
01296             <span class="comment">/*</span>
01297 <span class="comment">             * Error: Quicken for Windows is sort of bogus.  They try to fail</span>
01298 <span class="comment">             * the WM_NCACTIVATE of their newly created window by not passing</span>
01299 <span class="comment">             * it to DefWindowProc.  Bug 6412.  WM_NCACTIVATE sets/unsets the</span>
01300 <span class="comment">             * WFFRAMEON bit if passed to DWP so we can double check things</span>
01301 <span class="comment">             * here.</span>
01302 <span class="comment">             */</span>
01303             <span class="keywordflow">goto</span> UnlockOld;
01304         }
01305 
01306         <a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(hwndOld, WM_MDIACTIVATE, (WPARAM)hwndOld, (LPARAM)hwndActivate);
01307 
01308         <span class="comment">/*</span>
01309 <span class="comment">         * Uncheck the old window menu entry.</span>
01310 <span class="comment">         */</span>
01311         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a273">WINDOW</a>(pmdi))
01312             <a class="code" href="../../d7/d7/menuc_8c.html#a0">CheckMenuItem</a>(<a class="code" href="../../d6/d0/usercli_8h.html#a273">WINDOW</a>(pmdi), PtrToUlong(pwndOld-&gt;spmenu),
01313                 MF_BYCOMMAND | MF_UNCHECKED);
01314     }
01315 
01316     <span class="comment">//</span>
01317     <span class="comment">// Handle switching to a new (or NO) maximized window.  If NO window is</span>
01318     <span class="comment">// to become maximized, because we're activating NULL or the window to</span>
01319     <span class="comment">// become active doesn't have a WS_MAXIMIZEBOX, restore the old one to</span>
01320     <span class="comment">// it's normal size to clean up the MDI maximized menubar mess</span>
01321     <span class="comment">//</span>
01322     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a271">MAXED</a>(pmdi) &amp;&amp; <a class="code" href="../../d6/d0/usercli_8h.html#a271">MAXED</a>(pmdi) != hwndActivate) {
01323         HWND hwndMax;
01324         <span class="keywordtype">int</span>  iShowCode;
01325 
01326         <span class="comment">// The MAXBOX check is a new thing for 4.0 dudes; it breaks 3.x apps.</span>
01327         <span class="comment">// See comment in the WM_MDIMAXIMIZE handling.</span>
01328 
01329         <span class="keywordflow">if</span> (pwndActivate &amp;&amp; (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwndActivate, WFMAXBOX) || !<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwndActivate, WFWIN40COMPAT))) {
01330             hwndMax = hwndActivate;
01331             iShowCode = SW_SHOWMAXIMIZED;
01332             <a class="code" href="../../d6/d0/usercli_8h.html#a41">Lock</a>(&amp;<a class="code" href="../../d6/d0/usercli_8h.html#a272">ACTIVE</a>(pmdi), hwndMax);
01333         } <span class="keywordflow">else</span> {
01334             hwndMax = <a class="code" href="../../d6/d0/usercli_8h.html#a271">MAXED</a>(pmdi);
01335             iShowCode = SW_SHOWNORMAL;
01336         }
01337 
01338         <span class="comment">// overload WFFULLSCREEN bit -- useless for child windows anyways</span>
01339         <span class="comment">// use it to indicate to min/max code to not animate size change.</span>
01340 
01341         <span class="comment">// NO -- no bit overloading, damn it.  FritzS</span>
01342         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a178">NtUserCallHwndParam</a>(hwndMax, WFNOANIMATE, SFI_SETWINDOWSTATE);
01343         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a237">NtUserShowWindow</a>(hwndMax, iShowCode);
01344         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a178">NtUserCallHwndParam</a>(hwndMax, WFNOANIMATE, SFI_CLEARWINDOWSTATE);
01345     }
01346 
01347     <a class="code" href="../../d6/d0/usercli_8h.html#a41">Lock</a>(&amp;<a class="code" href="../../d6/d0/usercli_8h.html#a272">ACTIVE</a>(pmdi), hwndActivate);
01348 
01349     <span class="comment">/*</span>
01350 <span class="comment">     * We may be removing the activation entirely...</span>
01351 <span class="comment">     */</span>
01352     <span class="keywordflow">if</span> (!pwndActivate) {
01353         <span class="keywordflow">if</span> (fShowActivate)
01354             <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a225">NtUserSetFocus</a>(hwnd);
01355         <span class="keywordflow">goto</span> UnlockOld;
01356     }
01357 
01358     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a273">WINDOW</a>(pmdi)) {
01359 
01360         <span class="comment">/*</span>
01361 <span class="comment">         * Check the new window menu entry.</span>
01362 <span class="comment">         */</span>
01363         nID = GetWindowID(<a class="code" href="../../d6/d0/usercli_8h.html#a272">ACTIVE</a>(pmdi));
01364         <span class="keywordflow">if</span> (nID - <a class="code" href="../../d6/d0/usercli_8h.html#a274">FIRST</a>(pmdi) &lt; (<a class="code" href="../../d6/d0/usercli_8h.html#a260">MAXITEMS</a> - 1)) {
01365             <a class="code" href="../../d7/d7/menuc_8c.html#a0">CheckMenuItem</a>(<a class="code" href="../../d6/d0/usercli_8h.html#a273">WINDOW</a>(pmdi), nID, MF_BYCOMMAND | MFS_CHECKED);
01366         } <span class="keywordflow">else</span> {
01367             <span class="comment">/*</span>
01368 <span class="comment">             * the item is not in the menu at all!  Swap it with number 9.</span>
01369 <span class="comment">             */</span>
01370             <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwndOther = <a class="code" href="../../d6/d0/usercli_8h.html#a775">FindPwndChild</a>(pwnd, (UINT)(<a class="code" href="../../d6/d0/usercli_8h.html#a274">FIRST</a>(pmdi) + MAXITEMS - 2));
01371 
01372             <a class="code" href="../../d5/d9/cltxt_8h.html#a12">SetWindowLongPtr</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a450">HW</a>(pwndOther), GWLP_ID, PtrToLong(pwndActivate-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o16">spmenu</a>));
01373             <a class="code" href="../../d5/d9/cltxt_8h.html#a12">SetWindowLongPtr</a>(hwndActivate, GWLP_ID, <a class="code" href="../../d6/d0/usercli_8h.html#a274">FIRST</a>(pmdi) + MAXITEMS - 2);
01374 
01375             <a class="code" href="../../d6/d0/usercli_8h.html#a777">ModifyMenuItem</a>(pwndActivate);
01376         }
01377     }
01378 
01379     <span class="comment">/*</span>
01380 <span class="comment">     * Bring the window to the top.</span>
01381 <span class="comment">     */</span>
01382     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a115">NtUserSetWindowPos</a>(<a class="code" href="../../d6/d0/usercli_8h.html#a272">ACTIVE</a>(pmdi), NULL, 0, 0, 0, 0,
01383         SWP_NOMOVE | SWP_NOSIZE | SWP_NOACTIVATE);
01384 
01385     <span class="comment">/*</span>
01386 <span class="comment">     * Update the Caption bar.  Don't muck with styles for 3.1.</span>
01387 <span class="comment">     */</span>
01388     <span class="keywordflow">if</span> (fShowActivate) {
01389         <a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(<a class="code" href="../../d6/d0/usercli_8h.html#a272">ACTIVE</a>(pmdi), WM_NCACTIVATE, TRUE, 0L);
01390 
01391         <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(pwnd, &amp;tlpwnd);
01392 
01393         <span class="keywordflow">if</span> (hwnd == <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a328">NtUserQueryWindow</a>(hwnd, WindowFocusWindow))
01394             <a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(hwnd, WM_SETFOCUS, (WPARAM)hwnd, 0);
01395         <span class="keywordflow">else</span>
01396             <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a225">NtUserSetFocus</a>(hwnd);
01397 
01398         <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwnd);
01399     }
01400 
01401     <span class="comment">/*</span>
01402 <span class="comment">     * Notify the new active window of his activation.</span>
01403 <span class="comment">     */</span>
01404     <a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(<a class="code" href="../../d6/d0/usercli_8h.html#a272">ACTIVE</a>(pmdi), WM_MDIACTIVATE, (WPARAM)hwndOld,
01405                 (LPARAM)hwndActivate);
01406 
01407 UnlockOld:
01408     <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndOld);
01409 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a28" doxytag="mdiwin.c::xxxMDIDestroy" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void xxxMDIDestroy           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwndVictim</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01540">1540</a> of file <a class="el" href="../../d7/d4/mdiwin_8c-source.html">mdiwin.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l02069">ACTIVE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02067">CKIDS</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02071">FIRST</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01515">HWq</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02068">MAXED</a>, <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00289">MDIRemoveSysMenu()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04115">NtUserDestroyWindow()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01567">NtUserRedrawFrame</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06274">NtUserShowWindow()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01512">PtoH</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00213">REBASE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00215">REBASEPWND</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00483">RecalculateScrollRanges()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00160">SAMEWOWHANDLE</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00652">SendMessage()</a>, <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00467">ShiftMenuIDs()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01764">tagWND::spmenu</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01747">tagWND::spwndOwner</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00362">ThreadLock</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00366">ThreadUnlock</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00368">Unlock</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00120">ValidateHwnd</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02419">WFVISIBLE</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01237">xxxMDIActivate()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01420">xxxMDINext()</a>, and <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00032">xxxSetFrameTitle()</a>.
<p>
Referenced by <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01657">MDIClientWndProcWorker()</a>.
<p>
<pre class="fragment"><div>01543 {
01544     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwndVictim;
01545     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpwndParent;
01546     <a class="code" href="../../d8/d0/structtagMDI.html">PMDI</a> pmdi;
01547     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwndParent;
01548     HWND hwnd;
01549 
01550     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pwnd);
01551 
01552     <span class="keywordflow">if</span> ((pwndVictim = <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(hwndVictim)) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01553         <span class="keywordflow">return</span>;
01554     }
01555     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pwndVictim);
01556 
01557     <span class="comment">/*</span>
01558 <span class="comment">     * Get a pointer to the MDI structure</span>
01559 <span class="comment">     */</span>
01560     pmdi = ((<a class="code" href="../../d0/d1/structtagMDIWND.html">PMDIWND</a>)pwnd)-&gt;pmdi;
01561 
01562 <span class="preprocessor">#ifdef NEVER</span>
01563 <span class="preprocessor"></span><span class="comment">// don't do this validation - because it sometimes doesn't work! If an</span>
01564 <span class="comment">// app passed in idFirstChild (through CLIENTCREATESTRUCT) as -1, this</span>
01565 <span class="comment">// code fails because it treats the id comparisons as unsigned compares.</span>
01566 <span class="comment">// Change them to signed compares and it still doesn't work. That is because</span>
01567 <span class="comment">// when ShiftMenuIDs() is called, you'll shift mdi windows out of the signed</span>
01568 <span class="comment">// comparison range and this check won't allow them to be destroyed. This</span>
01569 <span class="comment">// is straight win3.1 code.</span>
01570 <span class="comment">//</span>
01571     <span class="comment">/*</span>
01572 <span class="comment">     * Validate that this is one of the mdi children we are keeping track</span>
01573 <span class="comment">     * of. If it isn't don't destroy it because it'll get mdi id tracking</span>
01574 <span class="comment">     * code all screwed up.</span>
01575 <span class="comment">     */</span>
01576     <span class="keywordflow">if</span> (((<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)pwndVictim-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o16">spmenu</a>) &lt; <a class="code" href="../../d6/d0/usercli_8h.html#a274">FIRST</a>(pmdi) ||
01577             ((<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)pwndVictim-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o16">spmenu</a>) &gt;= (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)(<a class="code" href="../../d6/d0/usercli_8h.html#a274">FIRST</a>(pmdi) + <a class="code" href="../../d6/d0/usercli_8h.html#a270">CKIDS</a>(pmdi)) ||
01578             pwndVictim-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o5">spwndOwner</a> != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01579         RIPERR0(ERROR_NON_MDICHILD_WINDOW, RIP_VERBOSE, <span class="stringliteral">""</span>);
01580         <span class="keywordflow">return</span>;
01581     }
01582 <span class="preprocessor">#endif</span>
01583 <span class="preprocessor"></span>
01584     <a class="code" href="../../d6/d0/usercli_8h.html#a780">ShiftMenuIDs</a>(pwnd, pwndVictim);
01585 
01586     <span class="comment">/*</span>
01587 <span class="comment">     * First Activate another window.</span>
01588 <span class="comment">     */</span>
01589     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a15">SAMEWOWHANDLE</a>(hwndVictim, <a class="code" href="../../d6/d0/usercli_8h.html#a272">ACTIVE</a>(pmdi))) {
01590         <a class="code" href="../../d6/d5/mdiwin_8c.html#a25">xxxMDINext</a>(pwnd, pwndVictim, FALSE);
01591 
01592         <span class="comment">/*</span>
01593 <span class="comment">         * Destroying only child?</span>
01594 <span class="comment">         */</span>
01595         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a15">SAMEWOWHANDLE</a>(hwndVictim, <a class="code" href="../../d6/d0/usercli_8h.html#a272">ACTIVE</a>(pmdi))) {
01596             <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a237">NtUserShowWindow</a>(hwndVictim, SW_HIDE);
01597 
01598             <span class="comment">/*</span>
01599 <span class="comment">             * If the window is maximized, we need to remove his sys menu</span>
01600 <span class="comment">             * now otherwise it may get deleted twice.  Once when the child</span>
01601 <span class="comment">             * is destroyed and once when the frame is destroyed.</span>
01602 <span class="comment">             */</span>
01603             <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a271">MAXED</a>(pmdi)) {
01604                 pwndParent = <a class="code" href="../../d6/d0/usercli_8h.html#a27">REBASEPWND</a>(pwnd, spwndParent);
01605                 <a class="code" href="../../d6/d0/usercli_8h.html#a779">MDIRemoveSysMenu</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a448">PtoH</a>(<a class="code" href="../../d6/d0/usercli_8h.html#a26">REBASE</a>(pwndParent,spmenu)), <a class="code" href="../../d6/d0/usercli_8h.html#a271">MAXED</a>(pmdi));
01606                 <a class="code" href="../../d6/d0/usercli_8h.html#a42">Unlock</a>(&amp;<a class="code" href="../../d6/d0/usercli_8h.html#a271">MAXED</a>(pmdi));
01607                 <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(pwndParent, &amp;tlpwndParent);
01608                 <a class="code" href="../../d6/d5/mdiwin_8c.html#a7">xxxSetFrameTitle</a>(pwndParent, pwnd, (LPWSTR)1L);
01609 
01610                 <span class="comment">/*</span>
01611 <span class="comment">                 * Redraw frame so menu bar shows the removed sys menu stuff</span>
01612 <span class="comment">                 */</span>
01613                 <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwndParent, WFVISIBLE))
01614                     <a class="code" href="../../d6/d0/usercli_8h.html#a222">NtUserRedrawFrame</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(pwndParent));
01615                 <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndParent);
01616             }
01617             <a class="code" href="../../d6/d5/mdiwin_8c.html#a24">xxxMDIActivate</a>(pwnd, NULL);
01618         }
01619     }
01620 
01621     <span class="comment">/*</span>
01622 <span class="comment">     * Don't ever let this go negative or we'll get caught in long loops.</span>
01623 <span class="comment">     */</span>
01624     <a class="code" href="../../d6/d0/usercli_8h.html#a270">CKIDS</a>(pmdi)--;
01625     <span class="keywordflow">if</span> ((<span class="keywordtype">int</span>)<a class="code" href="../../d6/d0/usercli_8h.html#a270">CKIDS</a>(pmdi) &lt; 0)
01626         <a class="code" href="../../d6/d0/usercli_8h.html#a270">CKIDS</a>(pmdi) = 0;
01627 
01628     hwnd = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(pwnd);
01629     <a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(hwnd, WM_MDIREFRESHMENU, 0L, 0L);
01630 
01631     <span class="comment">/*</span>
01632 <span class="comment">     * Destroy the window.</span>
01633 <span class="comment">     */</span>
01634     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a159">NtUserDestroyWindow</a>(hwndVictim);
01635 
01636 
01637     <span class="comment">/*</span>
01638 <span class="comment">     * During the DestroyWindow the parent may also have been deleted</span>
01639 <span class="comment">     * Remove revalidate if we get client side locking</span>
01640 <span class="comment">     */</span>
01641     <span class="keywordflow">if</span> (<a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(hwnd) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
01642        <span class="keywordflow">return</span>;
01643 
01644     <span class="comment">/*</span>
01645 <span class="comment">     * Deleting a window can change the scroll ranges.</span>
01646 <span class="comment">     */</span>
01647     <a class="code" href="../../d6/d5/mdiwin_8c.html#a13">RecalculateScrollRanges</a>(pwnd, FALSE);
01648 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a25" doxytag="mdiwin.c::xxxMDINext" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void xxxMDINext           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwndMDI</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fPrevWindow</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01420">1420</a> of file <a class="el" href="../../d7/d4/mdiwin_8c-source.html">mdiwin.c</a>.
<p>
References <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00668">_GetWindow()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01514">HW</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01515">HWq</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02068">MAXED</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01558">NtUserBeginDeferWindowPos</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l01761">NtUserDeferWindowPos()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l01865">NtUserEndDeferWindowPosEx()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01575">NtUserSetVisible</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06274">NtUserShowWindow()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00215">REBASEPWND</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02587">SV_CLRFTRUEVIS</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02585">SV_UNSET</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02418">WFDISABLED</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02419">WFVISIBLE</a>.
<p>
Referenced by <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01657">MDIClientWndProcWorker()</a>, and <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01540">xxxMDIDestroy()</a>.
<p>
<pre class="fragment"><div>01424 {
01425     <a class="code" href="../../d8/d0/structtagMDI.html">PMDI</a> pmdi;
01426     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwndNextGuy;
01427     HDWP hdwp;
01428     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fHack = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01429 
01430     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pwndMDI);
01431     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pwnd);
01432 
01433     <span class="comment">/*</span>
01434 <span class="comment">     * Get a pointer to the MDI structure</span>
01435 <span class="comment">     */</span>
01436     pmdi = ((<a class="code" href="../../d0/d1/structtagMDIWND.html">PMDIWND</a>)pwndMDI)-&gt;pmdi;
01437 
01438     pwndNextGuy = pwnd;
01439 
01440     <span class="keywordflow">while</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>) {
01441         <span class="keywordflow">if</span> (fPrevWindow)
01442             pwndNextGuy = <a class="code" href="../../d6/d9/rtl_2wow_8c.html#a13">_GetWindow</a>(pwndNextGuy, GW_HWNDPREV);
01443         <span class="keywordflow">else</span>
01444             pwndNextGuy = <a class="code" href="../../d6/d0/usercli_8h.html#a27">REBASEPWND</a>(pwndNextGuy, spwndNext);
01445 
01446         <span class="keywordflow">if</span> (!pwndNextGuy) {
01447             <span class="keywordflow">if</span> (fPrevWindow) {
01448                 pwndNextGuy = <a class="code" href="../../d6/d9/rtl_2wow_8c.html#a13">_GetWindow</a>(pwnd, GW_HWNDLAST);
01449             } <span class="keywordflow">else</span> {
01450                 pwndNextGuy =  <a class="code" href="../../d6/d0/usercli_8h.html#a27">REBASEPWND</a>(pwndMDI, spwndChild);
01451             }
01452         }
01453 
01454         <span class="keywordflow">if</span> (pwndNextGuy == pwnd)
01455             <span class="keywordflow">return</span>;
01456 
01457 
01458         <span class="comment">//</span>
01459         <span class="comment">// Ignore hidden and disabled windows.</span>
01460         <span class="comment">//</span>
01461         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwndNextGuy, WFVISIBLE) &amp;&amp; !<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwndNextGuy, WFDISABLED))
01462             <span class="keywordflow">break</span>;
01463     }
01464 
01465     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a271">MAXED</a>(pmdi)) {
01466         <a class="code" href="../../d6/d0/usercli_8h.html#a230">NtUserSetVisible</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(pwndMDI), SV_UNSET | SV_CLRFTRUEVIS);
01467         fHack = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01468     }
01469 
01470     hdwp = <a class="code" href="../../d6/d0/usercli_8h.html#a213">NtUserBeginDeferWindowPos</a>(2);
01471 
01472     <span class="comment">/*</span>
01473 <span class="comment">     * activate the new window (first, in case of maximized windows)</span>
01474 <span class="comment">     */</span>
01475     hdwp = <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a108">NtUserDeferWindowPos</a>(hdwp, <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a450">HW</a>(pwndNextGuy), HWND_TOP, 0, 0, 0, 0,
01476         SWP_NOMOVE | SWP_NOSIZE);
01477 
01478 <span class="comment">// LATER 30-Mar-1992 mikeke</span>
01479 <span class="comment">// this used to be _GetWindow(pwndMDI-&gt;spwndChild, GW_HWNDLAST)</span>
01480 <span class="comment">// instead of HWND_BOTTOM</span>
01481    <span class="keywordflow">if</span> (hdwp &amp;&amp; !fPrevWindow &amp;&amp; (pwnd != pwndNextGuy))
01482        hdwp = <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a108">NtUserDeferWindowPos</a>(hdwp, <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a450">HW</a>(pwnd),
01483             HWND_BOTTOM, 0, 0, 0, 0,
01484             SWP_NOACTIVATE | SWP_NOMOVE | SWP_NOSIZE );
01485 
01486     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a109">NtUserEndDeferWindowPosEx</a>(hdwp, FALSE);
01487 
01488     <span class="keywordflow">if</span> (fHack) {
01489         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a237">NtUserShowWindow</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(pwndMDI), SW_SHOW);
01490     }
01491 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a7" doxytag="mdiwin.c::xxxSetFrameTitle" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void xxxSetFrameTitle           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwndFrame</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwndMDI</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPWSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>lpch</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00032">32</a> of file <a class="el" href="../../d7/d4/mdiwin_8c-source.html">mdiwin.c</a>.
<p>
References <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l01171">_DefSetText()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02074">HTITLE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01514">HW</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00410">IS_PTR</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l00463">_LARGE_UNICODE_STRING::Length</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00018">MAX_TITLE_LEN</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02068">MAXED</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01567">NtUserRedrawFrame</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01568">NtUserRedrawFrameAndHook</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01569">NtUserRedrawTitle</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00213">REBASE</a>, <a class="el" href="../../d6/d5/chartran_8c-source.html#l00636">RtlInitLargeUnicodeString()</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01855">tagWND::strName</a>, <a class="el" href="../../d8/d3/w32_2ntuser_2client_2random_8c-source.html#l00164">TextAlloc()</a>, <a class="el" href="../../d2/d4/w32_2ntuser_2rtl_2random_8c-source.html#l00108">TextCopy()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00017">TITLE_EXTRA</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00960">UserLocalFree</a>, and <a class="el" href="../../d5/d9/immcli_8h-source.html#l00120">ValidateHwnd</a>.
<p>
Referenced by <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02101">DefFrameProcWorker()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02531">DefMDIChildProcWorker()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01657">MDIClientWndProcWorker()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02425">xxxChildResize()</a>, and <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01540">xxxMDIDestroy()</a>.
<p>
<pre class="fragment"><div>00036 {
00037     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwnd;
00038     <a class="code" href="../../d8/d0/structtagMDI.html">PMDI</a> pmdi;
00039     WCHAR sz[<a class="code" href="../../d6/d5/mdiwin_8c.html#a1">MAX_TITLE_LEN</a>];
00040     HWND  hwndFrame = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a450">HW</a>(pwndFrame);
00041 
00042     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pwndFrame);
00043     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pwndMDI);
00044 
00045     <span class="comment">/*</span>
00046 <span class="comment">     * Get a pointer to the MDI structure</span>
00047 <span class="comment">     */</span>
00048     pmdi = ((<a class="code" href="../../d0/d1/structtagMDIWND.html">PMDIWND</a>)pwndMDI)-&gt;pmdi;
00049 
00050     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a98">IS_PTR</a>(lpch) || lpch == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00051         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a277">HTITLE</a>(pmdi)) {
00052             <a class="code" href="../../d6/d0/usercli_8h.html#a138">UserLocalFree</a>(<a class="code" href="../../d6/d0/usercli_8h.html#a277">HTITLE</a>(pmdi));
00053         }
00054         <a class="code" href="../../d6/d0/usercli_8h.html#a277">HTITLE</a>(pmdi) = <a class="code" href="../../d1/d0/inc_2user_8h.html#a1222">TextAlloc</a>(lpch);
00055     }
00056 
00057     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a277">HTITLE</a>(pmdi)) {
00058         <a class="code" href="../../d2/d9/struct__LARGE__UNICODE__STRING.html">LARGE_UNICODE_STRING</a> str;
00059         <span class="keywordtype">int</span> cch;
00060 
00061         <a class="code" href="../../d5/d6/chartran_8c.html#a7">RtlInitLargeUnicodeString</a>(&amp;str, <a class="code" href="../../d6/d0/usercli_8h.html#a277">HTITLE</a>(pmdi), (UINT)-1);
00062         <a class="code" href="../../d1/d5/w32_2ntuser_2rtl_2random_8c.html#a2">TextCopy</a>(&amp;str, sz, <span class="keyword">sizeof</span>(sz)/<span class="keyword">sizeof</span>(WCHAR));
00063 
00064         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a271">MAXED</a>(pmdi) &amp;&amp; (pwnd = <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(<a class="code" href="../../d6/d0/usercli_8h.html#a271">MAXED</a>(pmdi))) &amp;&amp; pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o17">strName</a>.<a class="code" href="../../d2/d9/struct__LARGE__UNICODE__STRING.html#o0">Length</a>) {
00065 
00066             cch = <a class="code" href="../../d6/d5/mdiwin_8c.html#a1">MAX_TITLE_LEN</a> - ((str.<a class="code" href="../../d2/d9/struct__LARGE__UNICODE__STRING.html#o0">Length</a> / <span class="keyword">sizeof</span>(WCHAR)) + <a class="code" href="../../d6/d5/mdiwin_8c.html#a0">TITLE_EXTRA</a>);
00067             <span class="keywordflow">if</span> (cch &gt; 0) {
00068                 wcscat(sz, TEXT(<span class="stringliteral">" - ["</span>));
00069                 wcsncat(sz, <a class="code" href="../../d6/d0/usercli_8h.html#a26">REBASE</a>(pwnd, strName.Buffer), cch - 1);
00070                 wcscat(sz, TEXT(<span class="stringliteral">"]"</span>));
00071             }
00072         }
00073     } <span class="keywordflow">else</span> {
00074         sz[0] = 0;
00075     }
00076 
00077     <a class="code" href="../../d6/d0/usercli_8h.html#a622">_DefSetText</a>(hwndFrame, sz, FALSE);
00078 
00079     <span class="keywordflow">if</span> (lpch == (LPWSTR)1<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>)
00080         <a class="code" href="../../d6/d0/usercli_8h.html#a223">NtUserRedrawFrameAndHook</a>(hwndFrame);
00081 
00082     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (lpch != (LPWSTR)2<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>) {
00083         <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d0/usercli_8h.html#a224">NtUserRedrawTitle</a>(hwndFrame, DC_TEXT))
00084             <a class="code" href="../../d6/d0/usercli_8h.html#a222">NtUserRedrawFrame</a>(hwndFrame);
00085     }
00086 }
</div></pre>    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Sat May 15 19:44:36 2004 for test by
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>

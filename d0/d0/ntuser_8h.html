<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>test: ntuser.h File Reference</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="../../main.html">Main&nbsp;Page</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Class&nbsp;List</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Class&nbsp;Members</a> | <a class="qindex" href="../../globals.html">File&nbsp;Members</a></div>
<h1>ntuser.h File Reference</h1><code>#include "w32wow64.h"</code><br>
<code>#include "<a class="el" href="../../d6/d9/usercall_8h-source.html">usercall.h</a>"</code><br>

<p>
<a href="../../d1/d9/ntuser_8h-source.html">Go to the source code of this file.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a0">W32KAPI</a>&nbsp;&nbsp;&nbsp;DECLSPEC_ADDRSAFE</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a1">DBGHYD</a>(m)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a2">NtUserSetClassLongPtr</a>&nbsp;&nbsp;&nbsp;NtUserSetClassLong</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a3">NtUserSetWindowLongPtr</a>&nbsp;&nbsp;&nbsp;NtUserSetWindowLong</td></tr>

<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI UINT&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a4">NtUserHardErrorControl</a> (IN HARDERRORCONTROL dwCmd, IN HANDLE handle OPTIONAL, OUT PDESKRESTOREDATA pdrdRestore OPTIONAL)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a5">NtUserSetDebugErrorLevel</a> (IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwErrorLevel)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a6">NtUserGetObjectInformation</a> (IN HANDLE hObject, IN int nIndex, OUT PVOID pvInfo, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> nLength, OUT LPDWORD pnLengthNeeded)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a7">NtUserSetObjectInformation</a> (IN HANDLE hObject, IN int nIndex, IN LPCVOID pvInfo, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> nLength)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a8">NtUserWin32PoolAllocationStats</a> (IN LPDWORD parrTags, IN SIZE_T tagsCount, OUT SIZE_T *lpdwMaxMem, OUT SIZE_T *lpdwCrtMem, OUT LPDWORD lpdwMaxAlloc, OUT LPDWORD lpdwCrtAlloc)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a9">NtUserConsoleControl</a> (IN CONSOLECONTROL ConsoleCommand, IN PVOID ConsoleInformation, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> ConsoleInformationLength)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI HWINSTA&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a10">NtUserCreateWindowStation</a> (IN POBJECT_ATTRIBUTES pObja, IN ACCESS_MASK amRequest, IN HANDLE hKbdLayoutFile, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> offTable, IN PUNICODE_STRING pstrKLID, IN UINT uKbdInputLocale)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI HWINSTA&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a11">NtUserOpenWindowStation</a> (IN POBJECT_ATTRIBUTES pObja, IN ACCESS_MASK amRequest)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a12">NtUserCloseWindowStation</a> (IN HWINSTA hwinsta)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a13">NtUserSetProcessWindowStation</a> (IN HWINSTA hwinsta)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI HWINSTA&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a14">NtUserGetProcessWindowStation</a> (VOID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a15">NtUserLockWorkStation</a> (VOID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI HDESK&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a16">NtUserCreateDesktop</a> (IN POBJECT_ATTRIBUTES pObja, IN PUNICODE_STRING pstrDevice, IN LPDEVMODEW pDevmode, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> <a class="el" href="../../d3/d8/propapi_8h.html#a34">dwFlags</a>, IN ACCESS_MASK amRequest)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI HDESK&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a17">NtUserOpenDesktop</a> (IN POBJECT_ATTRIBUTES pObja, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> <a class="el" href="../../d3/d8/propapi_8h.html#a34">dwFlags</a>, IN ACCESS_MASK amRequest)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI HDESK&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a18">NtUserOpenInputDesktop</a> (IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> <a class="el" href="../../d3/d8/propapi_8h.html#a34">dwFlags</a>, IN BOOL fInherit, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> amRequest)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a19">NtUserResolveDesktopForWOW</a> (IN OUT PUNICODE_STRING pstrDesktop)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI HDESK&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a20">NtUserResolveDesktop</a> (IN HANDLE hProcess, IN PUNICODE_STRING pstrDesktop, IN BOOL fInherit, OUT HWINSTA *phwinsta)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a21">NtUserCloseDesktop</a> (IN HDESK hdesk)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a22">NtUserSetThreadDesktop</a> (IN HDESK hdesk)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI HDESK&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a23">NtUserGetThreadDesktop</a> (IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwThreadId, IN HDESK hdeskConsole)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a24">NtUserSwitchDesktop</a> (IN HDESK hdesk)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a25">NtUserInitializeClientPfnArrays</a> (IN CONST <a class="el" href="../../d0/d5/struct__PFNCLIENT.html">PFNCLIENT</a> *ppfnClientA OPTIONAL, IN CONST <a class="el" href="../../d0/d5/struct__PFNCLIENT.html">PFNCLIENT</a> *ppfnClientW OPTIONAL, IN CONST <a class="el" href="../../d1/d5/struct__PFNCLIENTWORKER.html">PFNCLIENTWORKER</a> *ppfnClientWorker OPTIONAL, IN HANDLE hModUser)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a26">NtUserWaitForMsgAndEvent</a> (IN HANDLE hevent)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a27">NtUserDragObject</a> (IN HWND hwndParent, IN HWND hwndFrom, IN UINT wFmt, IN ULONG_PTR dwData, IN HCURSOR hcur)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a28">NtUserGetIconInfo</a> (IN HICON hicon, OUT PICONINFO piconinfo, IN OUT OPTIONAL PUNICODE_STRING pstrInstanceName, IN OUT OPTIONAL PUNICODE_STRING pstrResName, OUT OPTIONAL LPDWORD pbpp, IN BOOL fInternal)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a29">NtUserGetIconSize</a> (IN HICON hIcon, IN UINT istepIfAniCur, OUT int *pcx, OUT int *pcy)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a30">NtUserDrawIconEx</a> (IN HDC hdc, IN int x, IN int y, IN HICON hicon, IN int cx, IN int <a class="el" href="../../d1/d1/inctlpan_8c.html#a3">cy</a>, IN UINT istepIfAniCur, IN HBRUSH hbrush, IN UINT diFlags, IN BOOL fMeta, OUT <a class="el" href="../../d9/d8/struct__DRAWICONEXDATA.html">DRAWICONEXDATA</a> *pdid)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI HANDLE&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a31">NtUserDeferWindowPos</a> (IN HDWP hWinPosInfo, IN HWND hwnd, IN HWND hwndInsertAfter, IN int x, IN int y, IN int cx, IN int <a class="el" href="../../d1/d1/inctlpan_8c.html#a3">cy</a>, IN UINT wFlags)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a32">NtUserEndDeferWindowPosEx</a> (IN HDWP hWinPosInfo, IN BOOL fAsync)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a33">NtUserGetMessage</a> (OUT LPMSG pmsg, IN HWND hwnd, IN UINT wMsgFilterMin, IN UINT wMsgFilterMax)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a34">NtUserMoveWindow</a> (IN HWND hwnd, IN int x, IN int y, IN int cx, IN int <a class="el" href="../../d1/d1/inctlpan_8c.html#a3">cy</a>, IN BOOL fRepaint)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a35">NtUserTranslateAccelerator</a> (IN HWND hwnd, IN HACCEL hAccTable, IN LPMSG lpMsg)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI LONG&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a36">NtUserSetClassLong</a> (IN HWND hwnd, IN int nIndex, IN LONG dwNewLong, IN BOOL bAnsi)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a37">NtUserSetKeyboardState</a> (IN CONST <a class="el" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a> *lpKeyState)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a38">NtUserSetWindowPos</a> (IN HWND hwnd, IN HWND hwndInsertAfter, IN int x, IN int y, IN int cx, IN int <a class="el" href="../../d1/d1/inctlpan_8c.html#a3">cy</a>, IN UINT <a class="el" href="../../d3/d8/propapi_8h.html#a34">dwFlags</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a39">NtUserSetShellWindowEx</a> (IN HWND hwnd, IN HWND hwndBkGnd)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a40">NtUserSystemParametersInfo</a> (IN UINT wFlag, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> wParam, IN OUT <a class="el" href="../../d0/d5/perfuser_8c.html#a5">LPVOID</a> lpData, IN UINT flags)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a41">NtUserUpdatePerUserSystemParameters</a> (IN HANDLE hToken, IN BOOL bUserLoggedOn)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a42">NtUserDdeInitialize</a> (OUT PHANDLE phInst, OUT HWND *phwnd, OUT LPDWORD pMonFlags, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> afCmd, IN PVOID pcii)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a43">NtUserUpdateInstance</a> (IN HANDLE <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a0">hInst</a>, OUT LPDWORD pMonFlags, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> afCmd)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a44">NtUserEvent</a> (IN <a class="el" href="../../d7/d4/structtagEVENT__PACKET.html">PEVENT_PACKET</a> pep)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a45">NtUserFillWindow</a> (IN HWND hwndBrush, IN HWND hwndPaint, IN HDC hdc, IN HBRUSH hbr)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI <a class="el" href="../../d7/d0/structtagCLS.html">PCLS</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a46">NtUserGetWOWClass</a> (IN HINSTANCE hInstance, IN PUNICODE_STRING pString)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI UINT&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a47">NtUserGetInternalWindowPos</a> (IN HWND hwnd, OUT LPRECT lpRect OPTIONAL, OUT LPPOINT lpPoint OPTIONAL)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a48">NtUserInitTask</a> (IN UINT dwExpWinVer, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwAppCompatFlags, IN PUNICODE_STRING pstrModName, IN PUNICODE_STRING pstrBaseFileName, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> hTaskWow, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwHotkey, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> idTask, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwX, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwY, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwXSize, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwYSize)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a49">NtUserPostThreadMessage</a> (IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> id, IN UINT <a class="el" href="../../d2/d1/userexts_8c.html#a129">msg</a>, IN WPARAM wParam, IN LPARAM lParam)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a50">NtUserRegisterTasklist</a> (IN HWND hwndTasklist)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a51">NtUserSetClipboardData</a> (IN UINT wFmt, IN HANDLE hMem, IN <a class="el" href="../../d3/d6/structtagSETCLIPBDATA.html">PSETCLIPBDATA</a> scd)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a52">NtUserCloseClipboard</a> (VOID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a53">NtUserEmptyClipboard</a> (VOID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI HANDLE&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a54">NtUserConvertMemHandle</a> (IN LPBYTE lpData, IN UINT cbNULL)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a55">NtUserCreateLocalMemHandle</a> (IN HANDLE hMem, OUT LPBYTE lpData OPTIONAL, IN UINT cbData, OUT <a class="el" href="../../d9/d5/ndismain_8h.html#a266">PUINT</a> lpcbNeeded OPTIONAL)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI HHOOK&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a56">NtUserSetWindowsHookEx</a> (IN HANDLE hmod, IN PUNICODE_STRING pstrLib OPTIONAL, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> idThread, IN int nFilterType, IN PROC pfnFilterProc, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> <a class="el" href="../../d3/d8/propapi_8h.html#a34">dwFlags</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a57">NtUserSetInternalWindowPos</a> (IN HWND hwnd, IN UINT cmdShow, IN CONST RECT *lpRect, IN CONST POINT *lpPoint)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a58">NtUserChangeClipboardChain</a> (IN HWND hwndRemove, IN HWND hwndNewNext)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a59">NtUserCheckMenuItem</a> (IN HMENU hmenu, IN UINT wIDCheckItem, IN UINT wCheck)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI HWND&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a60">NtUserChildWindowFromPointEx</a> (IN HWND hwndParent, IN POINT point, IN UINT flags)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a61">NtUserClipCursor</a> (IN CONST RECT *lpRect OPTIONAL)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI HACCEL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a62">NtUserCreateAcceleratorTable</a> (IN LPACCEL lpAccel, IN <a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a> cAccel)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a63">NtUserDeleteMenu</a> (IN HMENU hmenu, IN UINT nPosition, IN UINT <a class="el" href="../../d3/d8/propapi_8h.html#a34">dwFlags</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a64">NtUserDestroyAcceleratorTable</a> (IN HACCEL hAccel)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a65">NtUserDestroyCursor</a> (IN HCURSOR hcurs, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> cmd)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI HANDLE&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a66">NtUserGetClipboardData</a> (IN UINT fmt, OUT <a class="el" href="../../d6/d5/structtagGETCLIPBDATA.html">PGETCLIPBDATA</a> pgcd)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a67">NtUserDestroyMenu</a> (IN HMENU hmenu)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a68">NtUserDestroyWindow</a> (IN HWND hwnd)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI LRESULT&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a69">NtUserDispatchMessage</a> (IN CONST MSG *pmsg)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a70">NtUserEnableMenuItem</a> (IN HMENU hMenu, IN UINT wIDEnableItem, IN UINT wEnable)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a71">NtUserAttachThreadInput</a> (IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> idAttach, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> idAttachTo, IN BOOL fAttach)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a72">NtUserGetWindowPlacement</a> (IN HWND hwnd, OUT PWINDOWPLACEMENT pwp)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a73">NtUserSetWindowPlacement</a> (IN HWND hwnd, IN CONST WINDOWPLACEMENT *lpwndpl)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a74">NtUserLockWindowUpdate</a> (IN HWND hwnd)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a75">NtUserGetClipCursor</a> (OUT LPRECT lpRect)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a76">NtUserEnableScrollBar</a> (IN HWND hwnd, IN UINT wSBflags, IN UINT wArrows)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a77">NtUserDdeSetQualityOfService</a> (IN HWND hwndClient, IN CONST SECURITY_QUALITY_OF_SERVICE *pqosNew, OUT PSECURITY_QUALITY_OF_SERVICE pqosPrev OPTIONAL)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a78">NtUserDdeGetQualityOfService</a> (IN HWND hwndClient, IN HWND hwndServer, OUT PSECURITY_QUALITY_OF_SERVICE pqos)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a79">NtUserGetMenuIndex</a> (IN HMENU hMenu, IN HMENU hSubMenu)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a80">NtUserSetRipFlags</a> (<a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwRipFlags, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> PID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a81">NtUserSetDbgTag</a> (int tag, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwBitFlags)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a82">NtUserThunkedMenuItemInfo</a> (IN HMENU hMenu, IN UINT nPosition, IN BOOL fByPosition, IN BOOL fInsert, IN LPMENUITEMINFOW lpmii, IN PUNICODE_STRING pstrItem OPTIONAL)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a83">NtUserThunkedMenuInfo</a> (IN HMENU hMenu, IN LPCMENUINFO lpmi)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a84">NtUserSetMenuDefaultItem</a> (IN HMENU hMenu, IN UINT wID, IN UINT fByPosition)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a85">NtUserDrawAnimatedRects</a> (IN HWND hwnd, IN int idAni, IN CONST RECT *lprcFrom, IN CONST RECT *lprcTo)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>HANDLE&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a86">NtUserLoadIcoCur</a> (HANDLE hIcon, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> cxNew, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> cyNew, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> LR_flags)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a87">NtUserDrawCaption</a> (IN HWND hwnd, IN HDC hdc, IN CONST RECT *lprc, IN UINT flags)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a88">NtUserFlashWindowEx</a> (IN PFLASHWINFO pfwi)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a89">NtUserPaintDesktop</a> (IN HDC hdc)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a13">SHORT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a90">NtUserGetAsyncKeyState</a> (IN int vKey)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI HBRUSH&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a91">NtUserGetControlBrush</a> (IN HWND hwnd, IN HDC hdc, IN UINT <a class="el" href="../../d2/d1/userexts_8c.html#a129">msg</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI HBRUSH&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a92">NtUserGetControlColor</a> (IN HWND hwndParent, IN HWND hwndCtl, IN HDC hdc, IN UINT <a class="el" href="../../d2/d1/userexts_8c.html#a129">msg</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a93">NtUserEndMenu</a> (VOID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a94">NtUserCountClipboardFormats</a> (VOID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a95">NtUserGetClipboardSequenceNumber</a> (VOID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI UINT&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a96">NtUserGetCaretBlinkTime</a> (VOID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI HWND&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a97">NtUserGetClipboardOwner</a> (VOID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a98">NtUserGetClipboardSerialNumber</a> (VOID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI HWND&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a99">NtUserGetClipboardViewer</a> (VOID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI UINT&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a100">NtUserGetDoubleClickTime</a> (VOID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI HWND&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a101">NtUserGetForegroundWindow</a> (VOID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI HWND&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a102">NtUserGetOpenClipboardWindow</a> (VOID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a103">NtUserGetPriorityClipboardFormat</a> (OUT UINT *paFormatPriorityList, IN int cFormats)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI HMENU&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a104">NtUserGetSystemMenu</a> (IN HWND hwnd, IN BOOL bRevert)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a105">NtUserGetUpdateRect</a> (IN HWND hwnd, IN LPRECT prect OPTIONAL, IN BOOL bErase)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a106">NtUserHideCaret</a> (IN HWND hwnd)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a107">NtUserHiliteMenuItem</a> (IN HWND hwnd, IN HMENU hMenu, IN UINT uIDHiliteItem, IN UINT uHilite)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a108">NtUserInvalidateRect</a> (IN HWND hwnd, IN CONST RECT *prect OPTIONAL, IN BOOL bErase)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a109">NtUserIsClipboardFormatAvailable</a> (IN UINT nFormat)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a110">NtUserKillTimer</a> (IN HWND hwnd, IN UINT_PTR nIDEvent)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI HWND&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a111">NtUserMinMaximize</a> (IN HWND hwnd, IN UINT nCmdShow, IN BOOL fKeepHidden)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a112">NtUserMNDragOver</a> (IN POINT *ppt, OUT <a class="el" href="../../d7/d1/structtagMNDRAGOVERINFO.html">PMNDRAGOVERINFO</a> pmndoi)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a113">NtUserMNDragLeave</a> (VOID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a114">NtUserOpenClipboard</a> (IN HWND hwnd, OUT PBOOL pfEmptyClient)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a115">NtUserPeekMessage</a> (OUT LPMSG pmsg, IN HWND hwnd, IN UINT wMsgFilterMin, IN UINT wMsgFilterMax, IN UINT wRemoveMsg)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a116">NtUserPostMessage</a> (IN HWND hwnd, IN UINT <a class="el" href="../../d2/d1/userexts_8c.html#a129">msg</a>, IN WPARAM wParam, IN LPARAM lParam)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a117">NtUserSendNotifyMessage</a> (IN HWND hwnd, IN UINT Msg, IN WPARAM wParam, IN LPARAM lParam OPTIONAL)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a118">NtUserSendMessageCallback</a> (IN HWND hwnd, IN UINT wMsg, IN WPARAM wParam, IN LPARAM lParam, IN SENDASYNCPROC lpResultCallBack, IN ULONG_PTR dwData)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a119">NtUserRegisterHotKey</a> (IN HWND hwnd, IN int id, IN UINT fsModifiers, IN UINT vk)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a120">NtUserRemoveMenu</a> (IN HMENU hmenu, IN UINT nPosition, IN UINT <a class="el" href="../../d3/d8/propapi_8h.html#a34">dwFlags</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a121">NtUserScrollWindowEx</a> (IN HWND hwnd, IN int XAmount, IN int YAmount, IN CONST RECT *pRect OPTIONAL, IN CONST RECT *pClipRect OPTIONAL, IN HRGN hrgnUpdate, OUT LPRECT prcUpdate OPTIONAL, IN UINT flags)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI HWND&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a122">NtUserSetActiveWindow</a> (IN HWND hwnd)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI HWND&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a123">NtUserSetCapture</a> (IN HWND hwnd)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI WORD&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a124">NtUserSetClassWord</a> (IN HWND hwnd, IN int nIndex, IN WORD wNewWord)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI HWND&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a125">NtUserSetClipboardViewer</a> (IN HWND hwndNewViewer)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI HCURSOR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a126">NtUserSetCursor</a> (IN HCURSOR hCursor)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI HWND&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a127">NtUserSetFocus</a> (IN HWND hwnd)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a128">NtUserSetMenu</a> (IN HWND hwnd, IN HMENU hmenu, IN BOOL fRedraw)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a129">NtUserSetMenuContextHelpId</a> (IN HMENU hMenu, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwContextHelpId)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a130">NtUserSetMenuFlagRtoL</a> (IN HMENU hMenu)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI HWND&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a131">NtUserSetParent</a> (IN HWND hwndChild, IN HWND hwndNewParent)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a132">NtUserSetScrollInfo</a> (IN HWND hwnd, IN int nBar, IN LPCSCROLLINFO pInfo, IN BOOL fRedraw)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a133">NtUserSetSysColors</a> (IN int cElements, IN CONST <a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a> *lpaElements, IN CONST COLORREF *lpaRgbValues, IN UINT uOptions)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI UINT_PTR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a134">NtUserSetTimer</a> (IN HWND hwnd, IN UINT_PTR nIDEvent, IN UINT wElapse, IN TIMERPROC pTimerFunc)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI LONG&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a135">NtUserSetWindowLong</a> (IN HWND hwnd, IN int nIndex, IN LONG dwNewLong, IN BOOL bAnsi)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI WORD&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a136">NtUserSetWindowWord</a> (IN HWND hwnd, IN int nIndex, IN WORD wNewWord)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI HHOOK&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a137">NtUserSetWindowsHookAW</a> (IN int nFilterType, IN HOOKPROC pfnFilterProc, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> <a class="el" href="../../d3/d8/propapi_8h.html#a34">dwFlags</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a138">NtUserShowCaret</a> (IN HWND hwnd)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a139">NtUserShowScrollBar</a> (IN HWND hwnd, IN int iBar, IN BOOL fShow)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a140">NtUserShowWindowAsync</a> (IN HWND hwnd, IN int nCmdShow)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a141">NtUserShowWindow</a> (IN HWND hwnd, IN int nCmdShow)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a142">NtUserTrackMouseEvent</a> (IN OUT LPTRACKMOUSEEVENT lpTME)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a143">NtUserTrackPopupMenuEx</a> (IN HMENU hMenu, IN UINT uFlags, IN int x, IN int y, IN HWND hwnd, IN CONST TPMPARAMS *pparamst OPTIONAL)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a144">NtUserTranslateMessage</a> (IN CONST MSG *lpMsg, IN UINT flags)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a145">NtUserUnhookWindowsHookEx</a> (IN HHOOK hhk)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a146">NtUserUnregisterHotKey</a> (IN HWND hwnd, IN int id)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a147">NtUserValidateRect</a> (IN HWND hwnd, IN CONST RECT *lpRect OPTIONAL)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a148">NtUserWaitForInputIdle</a> (IN ULONG_PTR idProcess, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwMilliseconds, IN BOOL fSharedWow)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI HWND&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a149">NtUserWindowFromPoint</a> (IN POINT <a class="el" href="../../d7/d5/structPoint.html">Point</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI HDC&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a150">NtUserBeginPaint</a> (IN HWND hwnd, OUT LPPAINTSTRUCT lpPaint)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a151">NtUserCreateCaret</a> (IN HWND hwnd, IN HBITMAP hBitmap, IN int nWidth, IN int nHeight)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a152">NtUserEndPaint</a> (IN HWND hwnd, IN CONST PAINTSTRUCT *lpPaint)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a153">NtUserExcludeUpdateRgn</a> (IN HDC hDC, IN HWND hwnd)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI HDC&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a154">NtUserGetDC</a> (IN HWND hwnd)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI HDC&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a155">NtUserGetDCEx</a> (IN HWND hwnd, IN HRGN hrgnClip, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> flags)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI HDC&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a156">NtUserGetWindowDC</a> (IN HWND hwnd)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a157">NtUserGetUpdateRgn</a> (IN HWND hwnd, IN HRGN hRgn, IN BOOL bErase)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a158">NtUserRedrawWindow</a> (IN HWND hwnd, IN CONST RECT *lprcUpdate OPTIONAL, IN HRGN hrgnUpdate, IN UINT flags)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a159">NtUserInvalidateRgn</a> (IN HWND hwnd, IN HRGN hRgn, IN BOOL bErase)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a160">NtUserSetWindowRgn</a> (IN HWND hwnd, IN HRGN hRgn, IN BOOL bRedraw)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a161">NtUserScrollDC</a> (IN HDC hDC, IN int dx, IN int dy, IN CONST RECT *lprcScroll OPTIONAL, IN CONST RECT *lprcClip OPTIONAL, IN HRGN hrgnUpdate, OUT LPRECT lprcUpdate OPTIONAL)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a162">NtUserInternalGetWindowText</a> (IN HWND hwnd, OUT LPWSTR lpString, IN int nMaxCount)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a163">NtUserGetMouseMovePointsEx</a> (IN UINT cbSize, IN CONST MOUSEMOVEPOINT *lppt, OUT MOUSEMOVEPOINT *lpptBuf, IN UINT nBufPoints, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> resolution)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a164">NtUserToUnicodeEx</a> (IN UINT wVirtKey, IN UINT wScanCode, IN CONST <a class="el" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a> *lpKeyState, OUT LPWSTR lpszBuff, IN int cchBuff, IN UINT wFlags, IN HKL hKeyboardLayout)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a165">NtUserYieldTask</a> (VOID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a166">NtUserWaitMessage</a> (VOID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI UINT&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a167">NtUserLockWindowStation</a> (IN HWINSTA hWindowStation)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a168">NtUserUnlockWindowStation</a> (IN HWINSTA hWindowStation)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI UINT&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a169">NtUserSetWindowStationUser</a> (IN HWINSTA hWindowStation, IN PLUID pLuidUser, IN PSID pSidUser OPTIONAL, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> cbSidUser)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a170">NtUserSetLogonNotifyWindow</a> (IN HWND hwndNotify)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a171">NtUserSetSystemCursor</a> (IN HCURSOR hcur, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> id)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI HCURSOR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a172">NtUserGetCursorFrameInfo</a> (IN HCURSOR hcur, IN int iFrame, OUT LPDWORD pjifRate, OUT LPINT pccur)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a173">NtUserSetCursorContents</a> (IN HCURSOR hCursor, IN HCURSOR hCursorNew)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI HCURSOR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a174">NtUserFindExistingCursorIcon</a> (IN PUNICODE_STRING pstrModName, IN PUNICODE_STRING pstrResName, IN <a class="el" href="../../d9/d1/structtagCURSORFIND.html">PCURSORFIND</a> pcfSearch)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a175">NtUserSetCursorIconData</a> (IN HCURSOR hCursor, IN PUNICODE_STRING pstrModName, IN PUNICODE_STRING pstrResName, IN <a class="el" href="../../d8/d1/structtagCURSORDATA.html">PCURSORDATA</a> pData)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a176">NtUserWOWModuleUnload</a> (IN HANDLE hModule)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a177">NtUserWOWCleanup</a> (IN HANDLE hInstance, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> hTaskWow)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a178">NtUserGetMenuItemRect</a> (IN HWND hwnd, IN HMENU hMenu, IN UINT uItem, OUT LPRECT lprcItem)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a179">NtUserMenuItemFromPoint</a> (IN HWND hwnd, IN HMENU hMenu, IN POINT ptScreen)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a180">NtUserGetCaretPos</a> (OUT LPPOINT lpPoint)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a181">NtUserDefSetText</a> (IN HWND hwnd, IN <a class="el" href="../../d1/d9/struct__LARGE__STRING.html">PLARGE_STRING</a> Text OPTIONAL)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a182">NtUserQueryInformationThread</a> (IN HANDLE hThread, IN USERTHREADINFOCLASS ThreadInfoClass, OUT PVOID ThreadInformation, IN ULONG ThreadInformationLength, IN OUT PULONG ReturnLength OPTIONAL)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a183">NtUserSetInformationThread</a> (IN HANDLE hThread, IN USERTHREADINFOCLASS ThreadInfoClass, IN PVOID ThreadInformation, IN ULONG ThreadInformationLength)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a184">NtUserSetInformationProcess</a> (IN HANDLE hProcess, IN USERPROCESSINFOCLASS ProcessInfoClass, IN PVOID ProcessInformation, IN ULONG ProcessInformationLength)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a185">NtUserNotifyProcessCreate</a> (IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwProcessId, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwParentThreadId, IN ULONG_PTR dwData, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> <a class="el" href="../../d3/d8/propapi_8h.html#a34">dwFlags</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a186">NtUserTestForInteractiveUser</a> (IN PLUID pluidCaller)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a187">NtUserSetConsoleReserveKeys</a> (IN HWND hwnd, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> fsReserveKeys)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a188">NtUserModifyUserStartupInfoFlags</a> (IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwMask, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> <a class="el" href="../../d3/d8/propapi_8h.html#a34">dwFlags</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a189">NtUserSetWindowFNID</a> (IN HWND hwnd, IN WORD fnid)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a190">NtUserAlterWindowStyle</a> (IN HWND hwnd, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> mask, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> flags)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a191">NtUserSetThreadState</a> (IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> <a class="el" href="../../d3/d8/propapi_8h.html#a34">dwFlags</a>, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwMask)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI ULONG_PTR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a192">NtUserGetThreadState</a> (IN USERTHREADSTATECLASS ThreadState)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LRESULT&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a193">NtUserGetListboxString</a> (IN HWND hwnd, IN UINT <a class="el" href="../../d2/d1/userexts_8c.html#a129">msg</a>, IN WPARAM wParam, IN <a class="el" href="../../d1/d9/struct__LARGE__STRING.html">PLARGE_STRING</a> pString, IN ULONG_PTR xParam, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> xpfn, IN PBOOL pbNotString)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a194">NtUserValidateHandleSecure</a> (IN HANDLE h)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a195">NtUserUserHandleGrantAccess</a> (IN HANDLE hUserHandle, IN HANDLE hJob, IN BOOL bGrant)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI HWND&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a196">NtUserCreateWindowEx</a> (IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwExStyle, IN <a class="el" href="../../d1/d9/struct__LARGE__STRING.html">PLARGE_STRING</a> pstrClassName, IN <a class="el" href="../../d1/d9/struct__LARGE__STRING.html">PLARGE_STRING</a> pstrWindowName OPTIONAL, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwStyle, IN int x, IN int y, IN int nWidth, IN int nHeight, IN HWND hwndParent, IN HMENU hmenu, IN HANDLE hModule, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a5">LPVOID</a> pParam, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> <a class="el" href="../../d3/d8/propapi_8h.html#a34">dwFlags</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a197">NtUserBuildHwndList</a> (IN HDESK hdesk, IN HWND hwndNext, IN BOOL fEnumChildren, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> idThread, IN UINT cHwndMax, OUT HWND *phwndFirst, OUT <a class="el" href="../../d9/d5/ndismain_8h.html#a266">PUINT</a> pcHwndNeeded)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a198">NtUserBuildPropList</a> (IN HWND hwnd, IN UINT cPropMax, OUT <a class="el" href="../../d2/d1/struct__PROPSET.html">PPROPSET</a> pPropSet, OUT <a class="el" href="../../d9/d5/ndismain_8h.html#a266">PUINT</a> pcPropNeeded)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a199">NtUserBuildNameList</a> (IN HWINSTA hwinsta, IN UINT cbNameList, OUT <a class="el" href="../../d8/d2/structtagNAMELIST.html">PNAMELIST</a> pNameList, OUT <a class="el" href="../../d9/d5/ndismain_8h.html#a266">PUINT</a> pcbNeeded)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI HKL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a200">NtUserActivateKeyboardLayout</a> (IN HKL hkl, IN UINT Flags)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI HKL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a201">NtUserLoadKeyboardLayoutEx</a> (IN HANDLE hFile, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> offTable, IN HKL hkl, IN PUNICODE_STRING pstrKLID, IN UINT KbdInputLocale, IN UINT Flags)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a202">NtUserUnloadKeyboardLayout</a> (IN HKL hkl)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a203">NtUserSetSystemMenu</a> (IN HWND hwnd, IN HMENU hmenu)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a204">NtUserDragDetect</a> (IN HWND hwnd, IN POINT pt)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI UINT_PTR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a205">NtUserSetSystemTimer</a> (IN HWND hwnd, IN UINT_PTR nIDEvent, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwElapse, IN WNDPROC pTimerFunc)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a206">NtUserQuerySendMessage</a> (OUT PMSG pmsg)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI UINT&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a207">NtUserSendInput</a> (IN UINT cInputs, IN CONST INPUT *pInputs, IN int cbSize)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a208">NtUserImpersonateDdeClientWindow</a> (IN HWND hwndClient, IN HWND hwndServer)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI ULONG_PTR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a209">NtUserGetCPD</a> (IN HWND hwnd, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> options, IN ULONG_PTR dwData)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a210">NtUserCopyAcceleratorTable</a> (IN HACCEL hAccelSrc, IN OUT LPACCEL lpAccelDst OPTIONAL, IN int cAccelEntries)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI HWND&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a211">NtUserFindWindowEx</a> (IN HWND hwndParent, IN HWND hwndChild, IN PUNICODE_STRING pstrClassName OPTIONAL, IN PUNICODE_STRING pstrWindowName OPTIONAL, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwType)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a212">NtUserGetClassInfo</a> (IN HINSTANCE hInstance OPTIONAL, IN PUNICODE_STRING pstrClassName, IN OUT LPWNDCLASSEXW lpWndClass, OUT LPWSTR *ppszMenuName, IN BOOL bAnsi)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a213">NtUserGetClassName</a> (IN HWND hwnd, IN BOOL bReal, IN OUT PUNICODE_STRING pstrClassName)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a214">NtUserGetClipboardFormatName</a> (IN UINT <a class="el" href="../../d8/d3/rtvbatcr_8c.html#a8">format</a>, OUT LPWSTR lpszFormatName, IN UINT chMax)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a215">NtUserGetKeyNameText</a> (IN LONG lParam, OUT LPWSTR lpszKeyName, IN UINT chMax)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a216">NtUserGetKeyboardLayoutName</a> (IN OUT PUNICODE_STRING pstrKLID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI UINT&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a217">NtUserGetKeyboardLayoutList</a> (IN UINT nItems, OUT HKL *lpBuff)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a218">NtUserGetGuiResources</a> (HANDLE hProcess, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> <a class="el" href="../../d3/d8/propapi_8h.html#a34">dwFlags</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI UINT&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a219">NtUserMapVirtualKeyEx</a> (IN UINT uCode, IN UINT uMapType, IN ULONG_PTR dwHKLorPKL, IN BOOL bHKL)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI ATOM&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a220">NtUserRegisterClassExWOW</a> (IN WNDCLASSEX *lpWndClass, IN PUNICODE_STRING pstrClassName, IN <a class="el" href="../../d8/d0/structtagCLSMENUNAME.html">PCLSMENUNAME</a> pcmn, IN WORD fnid, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> <a class="el" href="../../d3/d8/propapi_8h.html#a34">dwFlags</a>, IN LPDWORD pdwWOWstuff OPTIONAL)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI UINT&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a221">NtUserRegisterWindowMessage</a> (IN PUNICODE_STRING pstrMessage)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI HANDLE&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a222">NtUserRemoveProp</a> (IN HWND hwnd, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwProp)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a223">NtUserSetProp</a> (IN HWND hwnd, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwProp, IN HANDLE hData)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a224">NtUserUnregisterClass</a> (IN PUNICODE_STRING pstrClassName, IN HINSTANCE hInstance, OUT <a class="el" href="../../d8/d0/structtagCLSMENUNAME.html">PCLSMENUNAME</a> pcmn)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a13">SHORT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a225">NtUserVkKeyScanEx</a> (IN WCHAR ch, IN ULONG_PTR dwHKLorPKL, IN BOOL bHKL)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a226">NtUserEnumDisplayDevices</a> (IN PUNICODE_STRING pstrDeviceName, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> iDevNum, IN OUT LPDISPLAY_DEVICEW lpDisplayDevice, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> <a class="el" href="../../d3/d8/propapi_8h.html#a34">dwFlags</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI HWINEVENTHOOK&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a227">NtUserSetWinEventHook</a> (IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> eventMin, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> eventMax, IN HMODULE hmodWinEventProc, IN PUNICODE_STRING pstrLib OPTIONAL, IN WINEVENTPROC pfnWinEventProc, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> idEventProcess, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> idEventThread, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> <a class="el" href="../../d3/d8/propapi_8h.html#a34">dwFlags</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a228">NtUserUnhookWinEvent</a> (IN HWINEVENTHOOK hWinEventHook)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a229">NtUserNotifyWinEvent</a> (IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> event, IN HWND hwnd, IN LONG idObject, IN LONG idChild)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a230">NtUserGetGUIThreadInfo</a> (IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> idThread, IN OUT PGUITHREADINFO pgui)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a231">NtUserGetTitleBarInfo</a> (IN HWND hwnd, IN OUT PTITLEBARINFO ptbi)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a232">NtUserGetScrollBarInfo</a> (IN HWND hwnd, IN LONG idObject, IN OUT PSCROLLBARINFO ptbi)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a233">NtUserGetComboBoxInfo</a> (IN HWND hwnd, IN OUT PCOMBOBOXINFO pcbi)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a234">NtUserGetListBoxInfo</a> (IN HWND hwnd)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI HWND&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a235">NtUserGetAncestor</a> (IN HWND hwnd, IN UINT gaFlags)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a236">NtUserGetCursorInfo</a> (IN OUT PCURSORINFO pci)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI HWND&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a237">NtUserRealChildWindowFromPoint</a> (IN HWND hwndParent, IN POINT pt)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a238">NtUserGetAltTabInfo</a> (IN HWND hwnd, IN int iItem, IN OUT PALTTABINFO pati, OUT LPWSTR lpszItemText, IN UINT cchItemText, IN BOOL bAnsi)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a239">NtUserGetMenuBarInfo</a> (IN HWND hwnd, IN long idObject, IN long idItem, IN OUT PMENUBARINFO pmbi)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI LONG&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a240">NtUserChangeDisplaySettings</a> (IN PUNICODE_STRING pstrDeviceName, IN LPDEVMODEW lpDevMode, IN HWND hwnd, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> <a class="el" href="../../d3/d8/propapi_8h.html#a34">dwFlags</a>, IN PVOID lParam)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a241">NtUserCallMsgFilter</a> (IN OUT LPMSG lpMsg, IN int nCode)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a242">NtUserDrawMenuBarTemp</a> (IN HWND hwnd, IN HDC hdc, IN LPCRECT lprc, IN HMENU hMenu, IN HFONT hFont)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a243">NtUserDrawCaptionTemp</a> (IN HWND hwnd, IN HDC hdc, IN LPCRECT lprc, IN HFONT hFont, IN HICON hicon, IN PUNICODE_STRING pstrText, IN UINT flags)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a13">SHORT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a244">NtUserGetKeyState</a> (IN int vk)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a245">NtUserGetKeyboardState</a> (OUT <a class="el" href="../../d9/d7/halvprnt_8c.html#a1">PBYTE</a> pb)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI HANDLE&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a246">NtUserQueryWindow</a> (IN HWND hwnd, IN WINDOWINFOCLASS WindowInfo)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a247">NtUserSBGetParms</a> (IN HWND hwnd, IN int code, IN <a class="el" href="../../d4/d5/structtagSBDATA.html">PSBDATA</a> pw, IN OUT LPSCROLLINFO lpsi)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a248">NtUserBitBltSysBmp</a> (IN HDC hdc, IN int xDest, IN int yDest, IN int cxDest, IN int cyDest, IN int xSrc, IN int ySrc, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwRop)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI LRESULT&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a249">NtUserMessageCall</a> (IN HWND hwnd, IN UINT <a class="el" href="../../d2/d1/userexts_8c.html#a129">msg</a>, IN WPARAM wParam, IN LPARAM lParam, IN ULONG_PTR xParam, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> xpfnProc, IN BOOL bAnsi)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI LRESULT&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a250">NtUserCallNextHookEx</a> (IN int nCode, IN WPARAM wParam, IN LPARAM lParam, IN BOOL bAnsi)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a251">NtUserEnumDisplayMonitors</a> (IN HDC hdc, IN LPCRECT lprcClip, IN MONITORENUMPROC lpfnEnum, IN LPARAM dwData)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a252">NtUserEnumDisplaySettings</a> (IN PUNICODE_STRING pstrDeviceName, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> iModeNum, OUT LPDEVMODEW lpDevMode, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> <a class="el" href="../../d3/d8/propapi_8h.html#a34">dwFlags</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a253">NtUserQueryUserCounters</a> (IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwQueryType, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a5">LPVOID</a> pvIn, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwInSize, OUT <a class="el" href="../../d0/d5/perfuser_8c.html#a5">LPVOID</a> pvResult, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwOutSize)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a254">NtUserUpdateLayeredWindow</a> (IN HWND hwnd, IN HDC hdcDst, IN POINT *pptDst, IN SIZE *psize, IN HDC hdcSrc, IN POINT *pptSrc, IN COLORREF crKey, IN BLENDFUNCTION *pblend, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> <a class="el" href="../../d3/d8/propapi_8h.html#a34">dwFlags</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a255">NtUserSetLayeredWindowAttributes</a> (IN HWND hwnd, IN COLORREF crKey, IN <a class="el" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a> bAlpha, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> <a class="el" href="../../d3/d8/propapi_8h.html#a34">dwFlags</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a256">NtUserRemoteConnect</a> (IN <a class="el" href="../../d3/d8/struct__DOCONNECTDATA.html">PDOCONNECTDATA</a> pDoConnectData, IN ULONG DisplayDriverNameLength, IN PWCHAR DisplayDriverName)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a257">NtUserRemoteRedrawRectangle</a> (IN WORD Left, IN WORD Top, IN WORD Right, IN WORD Bottom)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a258">NtUserRemoteRedrawScreen</a> (VOID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a259">NtUserRemoteStopScreenUpdates</a> (VOID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a260">NtUserCtxDisplayIOCtl</a> (IN ULONG DisplayIOCtlFlags, IN PUCHAR pDisplayIOCtlData, IN ULONG cbDisplayIOCtlData)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI HPALETTE&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a261">NtUserSelectPalette</a> (IN HDC hdc, IN HPALETTE hpalette, IN BOOL fForceBackground)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a262">NtUserProcessConnect</a> (IN HANDLE hProcess, IN OUT PVOID pConnectInfo, IN ULONG cbConnectInfo)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a263">NtUserSoundSentry</a> (VOID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>W32KAPI NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/ntuser_8h.html#a264">NtUserInitialize</a> (IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwVersion, IN HANDLE hPowerRequestEvent, IN HANDLE hMediaRequestEvent)</td></tr>

</table>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="a1" doxytag="ntuser.h::DBGHYD" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define DBGHYD          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">m&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d9/ntuser_8h-source.html#l00029">29</a> of file <a class="el" href="../../d1/d9/ntuser_8h-source.html">ntuser.h</a>.
<p>
Referenced by <a class="el" href="../../d3/d7/api_8c-source.html#l01169">CleanupSessionObjectDirectories()</a>, <a class="el" href="../../d7/d3/icamsg_8c-source.html#l00068">RemoteDoMessage()</a>, <a class="el" href="../../d7/d3/icamsg_8c-source.html#l00167">RemoteMessageThread()</a>, <a class="el" href="../../d3/d7/api_8c-source.html#l00279">TerminalServerRequestThread()</a>, <a class="el" href="../../d3/d7/api_8c-source.html#l01012">W32WinStationBroadcastSystemMessage()</a>, <a class="el" href="../../d3/d7/api_8c-source.html#l00504">W32WinStationDoConnect()</a>, <a class="el" href="../../d3/d7/api_8c-source.html#l00692">W32WinStationDoDisconnect()</a>, <a class="el" href="../../d3/d7/api_8c-source.html#l00996">W32WinStationDoMessage()</a>, <a class="el" href="../../d3/d7/api_8c-source.html#l00718">W32WinStationDoReconnect()</a>, <a class="el" href="../../d3/d7/api_8c-source.html#l00790">W32WinStationExitWindows()</a>, <a class="el" href="../../d3/d7/api_8c-source.html#l00979">W32WinStationNtSecurity()</a>, <a class="el" href="../../d3/d7/api_8c-source.html#l01152">W32WinStationPassthruDisable()</a>, <a class="el" href="../../d3/d7/api_8c-source.html#l01135">W32WinStationPassthruEnable()</a>, <a class="el" href="../../d3/d7/api_8c-source.html#l01028">W32WinStationSendWindowMessage()</a>, <a class="el" href="../../d3/d7/api_8c-source.html#l01116">W32WinStationShadowCleanup()</a>, <a class="el" href="../../d3/d7/api_8c-source.html#l01063">W32WinStationShadowSetup()</a>, <a class="el" href="../../d3/d7/api_8c-source.html#l01080">W32WinStationShadowStart()</a>, <a class="el" href="../../d3/d7/api_8c-source.html#l01099">W32WinStationShadowStop()</a>, <a class="el" href="../../d3/d7/api_8c-source.html#l00818">W32WinStationTerminate()</a>, <a class="el" href="../../d3/d7/api_8c-source.html#l01045">W32WinStationThinwireStats()</a>, <a class="el" href="../../d5/d3/command_8c-source.html#l00035">Win32CommandChannelThread()</a>, and <a class="el" href="../../d3/d7/api_8c-source.html#l00212">WinStationAPIInit()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="ntuser.h::NtUserSetClassLongPtr" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define NtUserSetClassLongPtr&nbsp;&nbsp;&nbsp;NtUserSetClassLong          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d9/ntuser_8h-source.html#l00303">303</a> of file <a class="el" href="../../d1/d9/ntuser_8h-source.html">ntuser.h</a>.
<p>
Referenced by <a class="el" href="../../d1/d7/ntcftxt_8h-source.html#l00579">SetClassLongPtr()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="ntuser.h::NtUserSetWindowLongPtr" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define NtUserSetWindowLongPtr&nbsp;&nbsp;&nbsp;NtUserSetWindowLong          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d9/ntuser_8h-source.html#l00964">964</a> of file <a class="el" href="../../d1/d9/ntuser_8h-source.html">ntuser.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00612">_SetWindowLongPtr()</a>, <a class="el" href="../../d0/d9/imectl_8c-source.html#l01083">CreateIMEUI()</a>, <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l00460">DefDlgProcWorker()</a>, and <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01657">MDIClientWndProcWorker()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a0" doxytag="ntuser.h::W32KAPI" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define W32KAPI&nbsp;&nbsp;&nbsp;DECLSPEC_ADDRSAFE          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d9/ntuser_8h-source.html#l00018">18</a> of file <a class="el" href="../../d1/d9/ntuser_8h-source.html">ntuser.h</a>.    </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="a200" doxytag="ntuser.h::NtUserActivateKeyboardLayout" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI HKL NtUserActivateKeyboardLayout           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HKL&nbsp;</td>
          <td class="mdname" nowrap> <em>hkl</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>Flags</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l08426">8426</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d9/d7/winsta_8c-source.html#l01240">_GetProcessWindowStation()</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03289">IS_CURRENT_THREAD_RESTRICTED</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, and <a class="el" href="../../d7/d1/kbdlyout_8c-source.html#l00916">xxxActivateKeyboardLayout()</a>.
<p>
<pre class="fragment"><div>08429 {
08430     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(HKL, NULL);
08431 
08432     <span class="comment">/*</span>
08433 <span class="comment">     * Prevent restricted threads from setting the keyboard layout</span>
08434 <span class="comment">     * for the entire system.</span>
08435 <span class="comment">     */</span>
08436     <span class="keywordflow">if</span> (<a class="code" href="../../d4/d1/userk_8h.html#a383">IS_CURRENT_THREAD_RESTRICTED</a>(JOB_OBJECT_UILIMIT_HANDLES)) {
08437         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
08438     }
08439 
08440     retval = (HKL)<a class="code" href="../../d4/d1/userk_8h.html#a1303">xxxActivateKeyboardLayout</a>(
08441                      <a class="code" href="../../d8/d8/winsta_8c.html#a11">_GetProcessWindowStation</a>(NULL),
08442                      hkl,
08443                      Flags, NULL);
08444 
08445     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserActivateKeyboardLayout"</span>);
08446     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
08447 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a190" doxytag="ntuser.h::NtUserAlterWindowStyle" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI VOID NtUserAlterWindowStyle           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>mask</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>flags</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l07752">7752</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l07749">AWS_MASK</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00135">BEGINRECV_HWND_VOID</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00142">ENDRECV_HWND_VOID</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01547">GETPTI</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00084">PpiCurrent</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l01119">TRACEVOID</a>, and <a class="el" href="../../d2/d7/hal_8h.html#a212">VOID()</a>.
<p>
Referenced by <a class="el" href="../../d9/d0/btnctl_8c-source.html#l01338">ButtonWndProcWorker()</a>, <a class="el" href="../../d7/d0/lb1_8c-source.html#l00032">ListBoxWndProcWorker()</a>, and <a class="el" href="../../d6/d4/statctl_8c-source.html#l00840">StaticWndProcWorker()</a>.
<p>
<pre class="fragment"><div>07756 {
07757     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a18">BEGINRECV_HWND_VOID</a>(hwnd);
07758 
07759     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a455">GETPTI</a>(pwnd)-&gt;ppi == <a class="code" href="../../d4/d1/userk_8h.html#a16">PpiCurrent</a>()) {
07760 
07761 <span class="preprocessor">#if DBG</span>
07762 <span class="preprocessor"></span>        <span class="keywordflow">if</span> (mask &amp; ~<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a75">AWS_MASK</a>) {
07763             RIPMSG1(RIP_WARNING, <span class="stringliteral">"NtUserAlterWindowStyle: bad mask %x"</span>, mask);
07764         }
07765 <span class="preprocessor">#endif</span>
07766 <span class="preprocessor"></span>
07767         mask &amp;= <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a75">AWS_MASK</a>;
07768         pwnd-&gt;style = (pwnd-&gt;style &amp; (~mask)) | (flags &amp; mask);
07769     } <span class="keywordflow">else</span> {
07770         RIPMSG1(RIP_WARNING, <span class="stringliteral">"NtUserAlterWIndowStyle: current ppi doesn't own pwnd %#p"</span>, pwnd);
07771     }
07772 
07773     <a class="code" href="../../d4/d1/userk_8h.html#a94">TRACEVOID</a>(<span class="stringliteral">"NtUserAlterWindowStyle"</span>);
07774     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a19">ENDRECV_HWND_VOID</a>();
07775 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a71" doxytag="ntuser.h::NtUserAttachThreadInput" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserAttachThreadInput           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>idAttach</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>idAttachTo</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fAttach</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04179">4179</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d2/queue_8c-source.html#l04737">PtiFromThreadId()</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, and <a class="el" href="../../d6/d2/ntuser_2kernel_2input_8c-source.html#l06367">zzzAttachThreadInput()</a>.
<p>
<pre class="fragment"><div>04183 {
04184     <a class="code" href="../../d2/d8/structtagTHREADINFO.html">PTHREADINFO</a> ptiAttach;
04185     <a class="code" href="../../d2/d8/structtagTHREADINFO.html">PTHREADINFO</a> ptiAttachTo;
04186 
04187     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(BOOL, FALSE);
04188 
04189     <span class="comment">/*</span>
04190 <span class="comment">     * Always must attach or detach from a real thread id.</span>
04191 <span class="comment">     */</span>
04192     <span class="keywordflow">if</span> ((ptiAttach = <a class="code" href="../../d4/d1/userk_8h.html#a1201">PtiFromThreadId</a>(idAttach)) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
04193         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
04194     }
04195     <span class="keywordflow">if</span> ((ptiAttachTo = <a class="code" href="../../d4/d1/userk_8h.html#a1201">PtiFromThreadId</a>(idAttachTo)) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
04196         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
04197     }
04198 
04199     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1202">zzzAttachThreadInput</a>(
04200             ptiAttach,
04201             ptiAttachTo,
04202             fAttach);
04203 
04204     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserAttachThreadInput"</span>);
04205     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
04206 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a150" doxytag="ntuser.h::NtUserBeginPaint" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI HDC NtUserBeginPaint           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT LPPAINTSTRUCT&nbsp;</td>
          <td class="mdname" nowrap> <em>lpPaint</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06520">6520</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00172">BEGINRECV_HWNDLOCK</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00186">ENDRECV_HWNDLOCK</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d6/d7/ex_8h-source.html#l01902">ProbeAndWriteStructure</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00343">StubExceptionHandler</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d4/d1/userk_8h.html#a1710">xxxBeginPaint()</a>, and <a class="el" href="../../d4/d1/userk_8h.html#a1711">xxxEndPaint()</a>.
<p>
Referenced by <a class="el" href="../../d9/d0/btnctl_8c-source.html#l01338">ButtonWndProcWorker()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l00207">ComboBoxWndProcWorker()</a>, <a class="el" href="../../d7/d0/lb1_8c-source.html#l00032">ListBoxWndProcWorker()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l03457">MLEditWndProc()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l02520">SLEditWndProc()</a>, and <a class="el" href="../../d6/d4/statctl_8c-source.html#l00840">StaticWndProcWorker()</a>.
<p>
<pre class="fragment"><div>06523 {
06524     PAINTSTRUCT ps;
06525 
06526     <span class="comment">//</span>
06527     <span class="comment">// N.B. This function has implicit window translation and thread locking</span>
06528     <span class="comment">//      enabled. These operations are performed in the User server API</span>
06529     <span class="comment">//      dispatcher.</span>
06530     <span class="comment">//</span>
06531 
06532     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a24">BEGINRECV_HWNDLOCK</a>(HDC, NULL, hwnd);
06533 
06534     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1710">xxxBeginPaint</a>(pwnd, &amp;ps);
06535 
06536     <span class="comment">/*</span>
06537 <span class="comment">     * Probe arguments</span>
06538 <span class="comment">     */</span>
06539     <span class="keywordflow">try</span> {
06540         <a class="code" href="../../d5/d8/ex_8h.html#a54">ProbeAndWriteStructure</a>(lpPaint, ps, PAINTSTRUCT);
06541     } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(TRUE)) {
06542         <a class="code" href="../../d4/d1/userk_8h.html#a1711">xxxEndPaint</a>(pwnd, &amp;ps);
06543         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
06544     }
06545 
06546     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserBeginPaint"</span>);
06547     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a25">ENDRECV_HWNDLOCK</a>();
06548 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a248" doxytag="ntuser.h::NtUserBitBltSysBmp" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserBitBltSysBmp           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HDC&nbsp;</td>
          <td class="mdname" nowrap> <em>hdc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN int&nbsp;</td>
          <td class="mdname" nowrap> <em>xDest</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN int&nbsp;</td>
          <td class="mdname" nowrap> <em>yDest</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN int&nbsp;</td>
          <td class="mdname" nowrap> <em>cxDest</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN int&nbsp;</td>
          <td class="mdname" nowrap> <em>cyDest</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN int&nbsp;</td>
          <td class="mdname" nowrap> <em>xSrc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN int&nbsp;</td>
          <td class="mdname" nowrap> <em>ySrc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwRop</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l09755">9755</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02138">HDCBITS</a>.
<p>
Referenced by <a class="el" href="../../d0/d2/mngrayc_8c-source.html#l00029">BitBltSysBmp()</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l01899">LoadBmp()</a>, and <a class="el" href="../../d9/d0/btnctl_8c-source.html#l00995">xxxButtonDrawCheck()</a>.
<p>
<pre class="fragment"><div>09764 {
09765     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(BOOL, FALSE);
09766 
09767     <span class="comment">/*</span>
09768 <span class="comment">     * Note -- this interface requires exclusive ownership of</span>
09769 <span class="comment">     *         the User crit sect in order to serialize use</span>
09770 <span class="comment">     *         of HDCBITS.  Only one thread at a time may use</span>
09771 <span class="comment">     *         a DC.</span>
09772 <span class="comment">     */</span>
09773 
09774     retval = GreBitBlt(hdc,
09775                        xDest,
09776                        yDest,
09777                        cxDest,
09778                        cyDest,
09779                        <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a527">HDCBITS</a>(),
09780                        xSrc,
09781                        ySrc,
09782                        dwRop,
09783                        0);
09784 
09785     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
09786 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a197" doxytag="ntuser.h::NtUserBuildHwndList" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI NTSTATUS NtUserBuildHwndList           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HDESK&nbsp;</td>
          <td class="mdname" nowrap> <em>hdesk</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwndNext</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fEnumChildren</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>idThread</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>cHwndMax</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT HWND *&nbsp;</td>
          <td class="mdname" nowrap> <em>phwndFirst</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT <a class="el" href="../../d9/d5/ndismain_8h.html#a266">PUINT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pcHwndNeeded</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l08222">8222</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00107">_GetDesktopWindow()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00075">BEGINATOMICRECV</a>, <a class="el" href="../../d5/d6/enumwin_8c-source.html#l00091">BuildHwndList()</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03633">BWL_ENUMCHILDREN</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03637">BWL_ENUMIMELAST</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03634">BWL_ENUMLIST</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00251">CLEANUPRECV</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00081">ENDATOMICRECV</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d5/d6/enumwin_8c-source.html#l00417">FreeHwndList()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00591">IS_IME_ENABLED</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l01539">LogDesktop</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00336">MSGERRORCLEANUP</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d9/ob_8h-source.html#l00494">ObDereferenceObject</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l02644">tagDESKTOP::pDeskInfo</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03621">tagBWL::phwndNext</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00158">ProbeForWriteBuffer</a>, <a class="el" href="../../d6/d7/ex_8h-source.html#l01649">ProbeForWriteUlong</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00058">PtiCurrent</a>, <a class="el" href="../../d7/d2/queue_8c-source.html#l04737">PtiFromThreadId()</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03624">tagBWL::rghwnd</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03327">tagTHREADINFO::rpdesk</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02156">tagDESKTOPINFO::spwnd</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01746">tagWND::spwndChild</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00343">StubExceptionHandler</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, <a class="el" href="../../d0/d9/ntosdef_8h.html#a76a70">UserMode</a>, <a class="el" href="../../d8/d2/validate_8c-source.html#l00092">ValidateHdesk()</a>, and <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00410">ValidateHWNDOPT</a>.
<p>
Referenced by <a class="el" href="../../d1/d7/clenum_8c-source.html#l00037">BuildHwndList()</a>.
<p>
<pre class="fragment"><div>08230 {
08231     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwndNext;
08232     <a class="code" href="../../d0/d3/structtagDESKTOP.html">PDESKTOP</a> pdesk;
08233     <a class="code" href="../../d4/d9/structtagBWL.html">PBWL</a> pbwl;
08234     <a class="code" href="../../d2/d8/structtagTHREADINFO.html">PTHREADINFO</a> pti;
08235     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> cHwndNeeded;
08236     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> wFlags = <a class="code" href="../../d4/d1/userk_8h.html#a410">BWL_ENUMLIST</a>;
08237     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a5">BEGINATOMICRECV</a>(NTSTATUS, STATUS_INVALID_HANDLE);
08238 
08239     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a126">IS_IME_ENABLED</a>()) {
08240         <span class="comment">// special treatment of IME Window</span>
08241         wFlags |= <a class="code" href="../../d4/d1/userk_8h.html#a412">BWL_ENUMIMELAST</a>;
08242     }
08243 
08244     <span class="comment">/*</span>
08245 <span class="comment">     * Validate prior to referencing the desktop</span>
08246 <span class="comment">     */</span>
08247     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a57">ValidateHWNDOPT</a>(pwndNext, hwndNext);
08248 
08249     <span class="keywordflow">if</span> (idThread) {
08250         pti = <a class="code" href="../../d4/d1/userk_8h.html#a1201">PtiFromThreadId</a>(idThread);
08251         <span class="keywordflow">if</span> (pti == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> || pti-&gt;<a class="code" href="../../d2/d8/structtagTHREADINFO.html#o6">rpdesk</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>){
08252             <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(ERROR_INVALID_PARAMETER);
08253         }
08254         pwndNext = pti-&gt;<a class="code" href="../../d2/d8/structtagTHREADINFO.html#o6">rpdesk</a>-&gt;<a class="code" href="../../d0/d3/structtagDESKTOP.html#o0">pDeskInfo</a>-&gt;<a class="code" href="../../d1/d3/structtagDESKTOPINFO.html#o2">spwnd</a>-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o4">spwndChild</a>;
08255     } <span class="keywordflow">else</span> {
08256         pti = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
08257     }
08258 
08259     <span class="keywordflow">if</span> (hdesk) {
08260         retval = <a class="code" href="../../d7/d3/validate_8c.html#a7">ValidateHdesk</a>(hdesk, UserMode, DESKTOP_READOBJECTS, &amp;pdesk);
08261         <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(retval)){
08262             <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(ERROR_INVALID_HANDLE);
08263         }
08264         pwndNext = pdesk-&gt;<a class="code" href="../../d0/d3/structtagDESKTOP.html#o0">pDeskInfo</a>-&gt;<a class="code" href="../../d1/d3/structtagDESKTOPINFO.html#o2">spwnd</a>-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o4">spwndChild</a>;
08265     } <span class="keywordflow">else</span> {
08266         pdesk = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
08267     }
08268 
08269 
08270     <span class="keywordflow">if</span> (pwndNext == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
08271         <span class="comment">/*</span>
08272 <span class="comment">         * Bug: 262004 joejo</span>
08273 <span class="comment">         * If we have a valid desk (just no windows on it), then we need</span>
08274 <span class="comment">         * to fall through. Otherwise, we'll just grab the current desktop and enum it's</span>
08275 <span class="comment">         * windows!</span>
08276 <span class="comment">         */</span>
08277         <span class="keywordflow">if</span> (pdesk == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
08278             <span class="keywordflow">if</span> (pti != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
08279                 pwndNext = pti-&gt;<a class="code" href="../../d2/d8/structtagTHREADINFO.html#o6">rpdesk</a>-&gt;<a class="code" href="../../d0/d3/structtagDESKTOP.html#o0">pDeskInfo</a>-&gt;<a class="code" href="../../d1/d3/structtagDESKTOPINFO.html#o2">spwnd</a>-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o4">spwndChild</a>;
08280             } <span class="keywordflow">else</span> {
08281                 pwndNext = <a class="code" href="../../d3/d9/client_2wow_8c.html#a3">_GetDesktopWindow</a>()-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o4">spwndChild</a>;
08282             }
08283         }
08284     } <span class="keywordflow">else</span> {
08285         <span class="keywordflow">if</span> (fEnumChildren) {
08286             wFlags |= <a class="code" href="../../d4/d1/userk_8h.html#a409">BWL_ENUMCHILDREN</a>;
08287             pwndNext = pwndNext-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o4">spwndChild</a>;
08288         }
08289     }
08290 
08291     <span class="keywordflow">if</span> ((pbwl = <a class="code" href="../../d4/d1/userk_8h.html#a1157">BuildHwndList</a>(pwndNext, wFlags, pti)) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
08292         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a44">MSGERRORCLEANUP</a>(ERROR_NOT_ENOUGH_MEMORY);
08293     }
08294 
08295     cHwndNeeded = (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)(pbwl-&gt;<a class="code" href="../../d4/d9/structtagBWL.html#o1">phwndNext</a> - pbwl-&gt;<a class="code" href="../../d4/d9/structtagBWL.html#o4">rghwnd</a>) + 1;
08296 
08297     <span class="comment">/*</span>
08298 <span class="comment">     * Probe arguments</span>
08299 <span class="comment">     */</span>
08300     <span class="keywordflow">try</span> {
08301         <a class="code" href="../../d4/d1/userk_8h.html#a25">ProbeForWriteBuffer</a>(phwndFirst, cHwndMax, <span class="keyword">sizeof</span>(DWORD));
08302         <a class="code" href="../../d5/d8/ex_8h.html#a40">ProbeForWriteUlong</a>(pcHwndNeeded);
08303 
08304        <span class="comment">/*</span>
08305 <span class="comment">        * If we have enough space, copy out list of hwnds to user mode buffer.</span>
08306 <span class="comment">        */</span>
08307         <span class="keywordflow">if</span> (cHwndNeeded &lt;= cHwndMax) {
08308             RtlCopyMemory(phwndFirst, pbwl-&gt;<a class="code" href="../../d4/d9/structtagBWL.html#o4">rghwnd</a>, cHwndNeeded * <span class="keyword">sizeof</span>(HWND));
08309             retval = STATUS_SUCCESS;
08310         } <span class="keywordflow">else</span> {
08311             retval = STATUS_BUFFER_TOO_SMALL;
08312         }
08313         *pcHwndNeeded = cHwndNeeded;
08314     } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(TRUE)) {
08315         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a44">MSGERRORCLEANUP</a>(0);  <span class="comment">// phwndFirst/pcHwndNeeded are USER's, not app's</span>
08316     }
08317 
08318     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a33">CLEANUPRECV</a>();
08319 
08320     <span class="keywordflow">if</span> (pbwl != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
08321         <a class="code" href="../../d4/d1/userk_8h.html#a1158">FreeHwndList</a>(pbwl);
08322     }
08323 
08324     <span class="keywordflow">if</span> (pdesk != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
08325         <a class="code" href="../../d4/d1/userk_8h.html#a120">LogDesktop</a>(pdesk, LD_DEREF_VALIDATE_HDESK4, FALSE, (ULONG_PTR)<a class="code" href="../../d4/d1/userk_8h.html#a9">PtiCurrent</a>());
08326         <a class="code" href="../../d4/d0/ob_8h.html#a14">ObDereferenceObject</a>(pdesk);
08327     }
08328 
08329     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserBuildHwndList"</span>);
08330     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a6">ENDATOMICRECV</a>();
08331 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a199" doxytag="ntuser.h::NtUserBuildNameList" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI NTSTATUS NtUserBuildNameList           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWINSTA&nbsp;</td>
          <td class="mdname" nowrap> <em>hwinsta</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>cbNameList</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT <a class="el" href="../../d8/d2/structtagNAMELIST.html">PNAMELIST</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pNameList</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT <a class="el" href="../../d9/d5/ndismain_8h.html#a266">PUINT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pcbNeeded</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l08365">8365</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d9/d7/winsta_8c-source.html#l01264">_BuildNameList()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00094">BEGINRECV_SHARED</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00099">ENDRECV_SHARED</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d0/d0/client_2nt6_2user_8h.html#a1064">NAMELIST</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d9/ob_8h-source.html#l00494">ObDereferenceObject</a>, <a class="el" href="../../d0/d0/client_2nt6_2user_8h.html#a1065">PNAMELIST</a>, <a class="el" href="../../d0/d4/probe_8c-source.html#l00034">ProbeForWrite()</a>, <a class="el" href="../../d6/d7/ex_8h-source.html#l01649">ProbeForWriteUlong</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00343">StubExceptionHandler</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, <a class="el" href="../../d0/d9/ntosdef_8h.html#a76a70">UserMode</a>, and <a class="el" href="../../d8/d2/validate_8c-source.html#l00046">ValidateHwinsta()</a>.
<p>
Referenced by <a class="el" href="../../d1/d7/clenum_8c-source.html#l00398">InternalEnumObjects()</a>.
<p>
<pre class="fragment"><div>08370 {
08371     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> cbNeeded;
08372     <a class="code" href="../../d4/d9/structtagWINDOWSTATION.html">PWINDOWSTATION</a> pwinsta = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
08373 
08374     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a9">BEGINRECV_SHARED</a>(NTSTATUS, STATUS_INVALID_HANDLE);
08375 
08376     <span class="keywordflow">if</span> (cbNameList &lt; <span class="keyword">sizeof</span>(<a class="code" href="../../d8/d2/structtagNAMELIST.html">NAMELIST</a>)) {
08377         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
08378     }
08379 
08380     <span class="keywordflow">try</span> {
08381         <a class="code" href="../../d5/d8/ex_8h.html#a40">ProbeForWriteUlong</a>(pcbNeeded);
08382         <a class="code" href="../../d5/d8/ex_8h.html#a259">ProbeForWrite</a>(pNameList, cbNameList, <span class="keyword">sizeof</span>(DWORD));
08383     } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(FALSE)) {
08384         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
08385     }
08386 
08387     <span class="keywordflow">if</span> (hwinsta != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
08388         retval = <a class="code" href="../../d7/d3/validate_8c.html#a6">ValidateHwinsta</a>(hwinsta, UserMode, WINSTA_ENUMDESKTOPS, &amp;pwinsta);
08389     } <span class="keywordflow">else</span> {
08390         retval = STATUS_SUCCESS;
08391     }
08392 
08393     <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(retval)) {
08394         <span class="keywordflow">try</span> {
08395             *pNameList-&gt;awchNames = 0;
08396             pNameList-&gt;cb = 1;
08397         } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(FALSE)) {
08398             <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
08399         }
08400 
08401      }  <span class="keywordflow">else</span> {
08402         <span class="comment">/*</span>
08403 <span class="comment">         * Note -- pNameList is a client-side pointers.</span>
08404 <span class="comment">         *         BuildNameList protects access with try blocks.</span>
08405 <span class="comment">         */</span>
08406 
08407         retval = <a class="code" href="../../d8/d8/winsta_8c.html#a12">_BuildNameList</a>(
08408                     pwinsta,
08409                     pNameList,
08410                     cbNameList,
08411                     &amp;cbNeeded);
08412         <span class="keywordflow">try</span> {
08413             *pcbNeeded = cbNeeded;
08414         } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(FALSE)) {
08415             retval = STATUS_ACCESS_VIOLATION;
08416         }
08417     }
08418 
08419     <span class="keywordflow">if</span> (pwinsta != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
08420         <a class="code" href="../../d4/d0/ob_8h.html#a14">ObDereferenceObject</a>(pwinsta);
08421 
08422     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserBuildNameList"</span>);
08423     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a10">ENDRECV_SHARED</a>();
08424 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a198" doxytag="ntuser.h::NtUserBuildPropList" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI NTSTATUS NtUserBuildPropList           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>cPropMax</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT <a class="el" href="../../d2/d1/struct__PROPSET.html">PPROPSET</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pPropSet</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT <a class="el" href="../../d9/d5/ndismain_8h.html#a266">PUINT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pcPropNeeded</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l08333">8333</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d5/d7/kernel_2winprop_8c-source.html#l00141">_BuildPropList()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00172">BEGINRECV_HWNDLOCK</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00186">ENDRECV_HWNDLOCK</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d0/d0/client_2nt6_2user_8h.html#a983">PPROPSET</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00158">ProbeForWriteBuffer</a>, <a class="el" href="../../d6/d7/ex_8h-source.html#l01649">ProbeForWriteUlong</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00343">StubExceptionHandler</a>, and <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>.
<p>
Referenced by <a class="el" href="../../d1/d7/clenum_8c-source.html#l00251">InternalEnumProps()</a>.
<p>
<pre class="fragment"><div>08338 {
08339     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a24">BEGINRECV_HWNDLOCK</a>(NTSTATUS, STATUS_INVALID_HANDLE, hwnd);
08340 
08341     <span class="keywordflow">if</span> (cPropMax == 0) {
08342         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
08343     }
08344 
08345     <span class="comment">/*</span>
08346 <span class="comment">     * Probe arguments</span>
08347 <span class="comment">     */</span>
08348     <span class="keywordflow">try</span> {
08349         <a class="code" href="../../d4/d1/userk_8h.html#a25">ProbeForWriteBuffer</a>(pPropSet, cPropMax, <span class="keyword">sizeof</span>(DWORD));
08350         <a class="code" href="../../d5/d8/ex_8h.html#a40">ProbeForWriteUlong</a>(pcPropNeeded);
08351 
08352         retval = <a class="code" href="../../d4/d8/kernel_2winprop_8c.html#a2">_BuildPropList</a>(
08353                 pwnd,
08354                 pPropSet,
08355                 cPropMax,
08356                 pcPropNeeded);
08357     } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(FALSE)) {
08358         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);  <span class="comment">// pPropSet/pcPropNeed are USER's, not app's</span>
08359     }
08360 
08361     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserBuildPropList"</span>);
08362     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a25">ENDRECV_HWNDLOCK</a>();
08363 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a241" doxytag="ntuser.h::NtUserCallMsgFilter" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserCallMsgFilter           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN OUT LPMSG&nbsp;</td>
          <td class="mdname" nowrap> <em>lpMsg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN int&nbsp;</td>
          <td class="mdname" nowrap> <em>nCode</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l09413">9413</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d2/d1/hooks_8c-source.html#l01210">_CallMsgFilter()</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d3/d0/userexts_8c-source.html#l01830">msg</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00742">ProbeForWriteMessage</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00343">StubExceptionHandler</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d1/d7/ntcftxt_8h-source.html#l01460">CallMsgFilter()</a>.
<p>
<pre class="fragment"><div>09416 {
09417     MSG <a class="code" href="../../d2/d1/userexts_8c.html#a129">msg</a>;
09418 
09419     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(BOOL, FALSE);
09420 
09421     <span class="comment">/*</span>
09422 <span class="comment">     * Probe arguments</span>
09423 <span class="comment">     */</span>
09424     <span class="keywordflow">try</span> {
09425         <a class="code" href="../../d4/d1/userk_8h.html#a69">ProbeForWriteMessage</a>(lpMsg);
09426         <a class="code" href="../../d2/d1/userexts_8c.html#a129">msg</a> = *lpMsg;
09427     } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(TRUE)) {
09428         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
09429     }
09430 
09431     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1818">_CallMsgFilter</a>(
09432                 &amp;msg,
09433                 nCode);
09434     <span class="keywordflow">try</span> {
09435         *lpMsg = <a class="code" href="../../d2/d1/userexts_8c.html#a129">msg</a>;
09436     } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(TRUE)) {
09437         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
09438     }
09439 
09440     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserCallMsgFilter"</span>);
09441     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
09442 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a250" doxytag="ntuser.h::NtUserCallNextHookEx" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI LRESULT NtUserCallNextHookEx           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN int&nbsp;</td>
          <td class="mdname" nowrap> <em>nCode</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN WPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>bAnsi</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a58" doxytag="ntuser.h::NtUserChangeClipboardChain" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserChangeClipboardChain           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwndRemove</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwndNewNext</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l03864">3864</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00172">BEGINRECV_HWNDLOCK</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00186">ENDRECV_HWNDLOCK</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00364">ThreadLockWithPti</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00366">ThreadUnlock</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00410">ValidateHWNDOPT</a>, and <a class="el" href="../../d9/d7/ntuser_2kernel_2clipbrd_8c-source.html#l02618">xxxChangeClipboardChain()</a>.
<p>
<pre class="fragment"><div>03867 {
03868 
03869     <span class="comment">//</span>
03870     <span class="comment">// N.B. This function has implicit window translation and thread locking</span>
03871     <span class="comment">//      enabled. These operations are performed in the User server API</span>
03872     <span class="comment">//      dispatcher.</span>
03873     <span class="comment">//</span>
03874 
03875     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwndNewNext;
03876     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpwndNewNext;
03877 
03878     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a24">BEGINRECV_HWNDLOCK</a>(DWORD, 0, hwndRemove);
03879 
03880     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a57">ValidateHWNDOPT</a>(pwndNewNext, hwndNewNext);
03881 
03882     <a class="code" href="../../d6/d0/usercli_8h.html#a38">ThreadLockWithPti</a>(ptiCurrent, pwndNewNext, &amp;tlpwndNewNext);
03883     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1743">xxxChangeClipboardChain</a>(
03884             pwnd,
03885             pwndNewNext);
03886 
03887     <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndNewNext);
03888 
03889     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserChangeClipboardChain"</span>);
03890     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a25">ENDRECV_HWNDLOCK</a>();
03891 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a240" doxytag="ntuser.h::NtUserChangeDisplaySettings" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LONG NtUserChangeDisplaySettings           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PUNICODE_STRING&nbsp;</td>
          <td class="mdname" nowrap> <em>pstrDeviceName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN LPDEVMODEW&nbsp;</td>
          <td class="mdname" nowrap> <em>lpDevMode</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwFlags</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PVOID&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l09380">9380</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d4/d7/propapi_8h-source.html#l00043">dwFlags</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03289">IS_CURRENT_THREAD_RESTRICTED</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d0/d9/ntosdef_8h.html#a76a70">UserMode</a>, and <a class="el" href="../../d4/d1/userk_8h.html#a1758">xxxUserChangeDisplaySettings()</a>.
<p>
Referenced by <a class="el" href="../../d1/d7/ntcftxt_8h-source.html#l01386">ChangeDisplaySettingsEx()</a>, and <a class="el" href="../../d1/d3/dynres_8c-source.html#l00033">DrChangeDisplaySettings()</a>.
<p>
<pre class="fragment"><div>09386 {
09387     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(LONG, DISP_CHANGE_FAILED);
09388 
09389     <span class="comment">/*</span>
09390 <span class="comment">     * Prevent restricted threads from changing</span>
09391 <span class="comment">     * display settings</span>
09392 <span class="comment">     */</span>
09393     <span class="keywordflow">if</span> (<a class="code" href="../../d4/d1/userk_8h.html#a383">IS_CURRENT_THREAD_RESTRICTED</a>(JOB_OBJECT_UILIMIT_DISPLAYSETTINGS)) {
09394         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
09395     }
09396 
09397     <span class="comment">/*</span>
09398 <span class="comment">     * Address checking, etc., occurs in GRE.</span>
09399 <span class="comment">     */</span>
09400 
09401     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1758">xxxUserChangeDisplaySettings</a>(pstrDeviceName,
09402                                           pDevMode,
09403                                           hwnd,
09404                                           NULL,     <span class="comment">// pdesk</span>
09405                                           dwFlags,
09406                                           lParam,
09407                                           UserMode);
09408 
09409     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserChangeDisplaySettings"</span>);
09410     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
09411 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a59" doxytag="ntuser.h::NtUserCheckMenuItem" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> NtUserCheckMenuItem           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HMENU&nbsp;</td>
          <td class="mdname" nowrap> <em>hmenu</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>wIDCheckItem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>wCheck</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l03893">3893</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d6/d2/mnsys_8c-source.html#l00546">_CheckMenuItem()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00075">BEGINATOMICRECV</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00081">ENDATOMICRECV</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00345">TESTFLAGS</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, and <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00452">ValidateHMENUMODIFY</a>.
<p>
Referenced by <a class="el" href="../../d8/d6/menuc_8c-source.html#l00015">CheckMenuItem()</a>.
<p>
<pre class="fragment"><div>03897 {
03898     <a class="code" href="../../d1/d1/structtagMENU.html">PMENU</a> pmenu;
03899 
03900     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a5">BEGINATOMICRECV</a>(DWORD, (DWORD)-1);
03901 
03902     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a46">TESTFLAGS</a>(wCheck, MF_VALID);
03903 
03904     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a62">ValidateHMENUMODIFY</a>(pmenu, hmenu);
03905 
03906     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1888">_CheckMenuItem</a>(
03907             pmenu,
03908             wIDCheckItem,
03909             wCheck);
03910 
03911     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserCheckMenuItem"</span>);
03912     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a6">ENDATOMICRECV</a>();
03913 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a60" doxytag="ntuser.h::NtUserChildWindowFromPointEx" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI HWND NtUserChildWindowFromPointEx           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwndParent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN POINT&nbsp;</td>
          <td class="mdname" nowrap> <em>point</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>flags</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l03915">3915</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d0/d8/winwhere_8c-source.html#l00047">_ChildWindowFromPointEx()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00110">BEGINRECV_HWND</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00120">ENDRECV_HWND</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01512">PtoH</a>, and <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/client_8c-source.html#l00117">ChildWindowFromPoint()</a>, and <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01657">MDIClientWndProcWorker()</a>.
<p>
<pre class="fragment"><div>03919 {
03920 
03921     <span class="comment">//</span>
03922     <span class="comment">// N.B. This function has implicit window handle translation. This</span>
03923     <span class="comment">//      operation is performed in the User server API dispatcher.</span>
03924     <span class="comment">//</span>
03925 
03926     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a14">BEGINRECV_HWND</a>(HWND, NULL, hwndParent);
03927 
03928     retval = (HWND)<a class="code" href="../../d9/d8/winwhere_8c.html#a1">_ChildWindowFromPointEx</a>(pwnd, point, flags);
03929     retval = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a448">PtoH</a>((PVOID)retval);
03930 
03931     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserChildWindowFromPointEx"</span>);
03932     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a15">ENDRECV_HWND</a>();
03933 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a61" doxytag="ntuser.h::NtUserClipCursor" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserClipCursor           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN CONST RECT *lpRect&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>OPTIONAL</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l03935">3935</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00203">ProbeAndReadRect</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00343">StubExceptionHandler</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d8/d0/ntuser_2kernel_2cursor_8c-source.html#l00216">zzzClipCursor()</a>.
<p>
<pre class="fragment"><div>03937 {
03938     RECT rc;
03939 
03940     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(BOOL, FALSE);
03941 
03942     <span class="comment">/*</span>
03943 <span class="comment">     * Probe arguments</span>
03944 <span class="comment">     */</span>
03945     <span class="keywordflow">if</span> (ARGUMENT_PRESENT(lpRect)) {
03946         <span class="keywordflow">try</span> {
03947             rc = <a class="code" href="../../d4/d1/userk_8h.html#a31">ProbeAndReadRect</a>(lpRect);
03948             lpRect = &amp;rc;
03949         } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(TRUE)) {
03950             <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
03951         }
03952     }
03953 
03954     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1788">zzzClipCursor</a>(lpRect);
03955 
03956     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserClipCursor"</span>);
03957     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
03958 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a52" doxytag="ntuser.h::NtUserCloseClipboard" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserCloseClipboard           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">VOID&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l03252">3252</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, and <a class="el" href="../../d9/d7/ntuser_2kernel_2clipbrd_8c-source.html#l00538">xxxCloseClipboard()</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/editec_8c-source.html#l02703">ECCopy()</a>, <a class="el" href="../../d7/d3/msgbox_8c-source.html#l01176">MB_CopyToClipboard()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l02720">MLPasteText()</a>, and <a class="el" href="../../d4/d4/editsl_8c-source.html#l01157">SLPasteText()</a>.
<p>
<pre class="fragment"><div>03254 {
03255     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(BOOL, FALSE);
03256 
03257     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1736">xxxCloseClipboard</a>(NULL);
03258 
03259     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserCloseClipboard"</span>);
03260     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
03261 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a21" doxytag="ntuser.h::NtUserCloseDesktop" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserCloseDesktop           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HDESK&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hdesk</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l01423">1423</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d0/d9/ntosdef_8h.html#a76a70">UserMode</a>, and <a class="el" href="../../d0/d6/desktop_8c-source.html#l04332">xxxCloseDesktop()</a>.
<p>
<pre class="fragment"><div>01425 {
01426     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(BOOL, FALSE);
01427 
01428     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1803">xxxCloseDesktop</a>(hdesk, UserMode);
01429 
01430     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserCloseDesktop"</span>);
01431     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
01432 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a12" doxytag="ntuser.h::NtUserCloseWindowStation" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserCloseWindowStation           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWINSTA&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hwinsta</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l01118">1118</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d9/d7/winsta_8c-source.html#l01055">_CloseWindowStation()</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d5/d9/ob_8h-source.html#l00494">ObDereferenceObject</a>, <a class="el" href="../../d3/d0/cttoken_8c-source.html#l00135">Status</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d0/d9/ntosdef_8h.html#a76a70">UserMode</a>, and <a class="el" href="../../d8/d2/validate_8c-source.html#l00046">ValidateHwinsta()</a>.
<p>
<pre class="fragment"><div>01120 {
01121     <a class="code" href="../../d4/d9/structtagWINDOWSTATION.html">PWINDOWSTATION</a> pwinsta;
01122     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
01123 
01124     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(BOOL, FALSE);
01125 
01126     retval = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01127 
01128     <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d7/d3/validate_8c.html#a6">ValidateHwinsta</a>(hwinsta, UserMode, 0, &amp;pwinsta);
01129     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(Status)) {
01130         retval = <a class="code" href="../../d8/d8/winsta_8c.html#a9">_CloseWindowStation</a>(hwinsta);
01131         <a class="code" href="../../d4/d0/ob_8h.html#a14">ObDereferenceObject</a>(pwinsta);
01132     }
01133 
01134     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserCloseWindowStation"</span>);
01135     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
01136 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a9" doxytag="ntuser.h::NtUserConsoleControl" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI NTSTATUS NtUserConsoleControl           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN CONSOLECONTROL&nbsp;</td>
          <td class="mdname" nowrap> <em>ConsoleCommand</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PVOID&nbsp;</td>
          <td class="mdname" nowrap> <em>ConsoleInformation</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ConsoleInformationLength</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00870">870</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00083">BEGINRECVCSRSS</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00092">ENDRECVCSRSS</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d0/d4/probe_8c-source.html#l00034">ProbeForWrite()</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, and <a class="el" href="../../d7/d2/queue_8c-source.html#l06445">xxxConsoleControl()</a>.
<p>
Referenced by <a class="el" href="../../d1/d4/srvinit_8c-source.html#l01091">ConsoleClientConnectRoutine()</a>, <a class="el" href="../../d4/d2/ntcon_2server_2input_8c-source.html#l01946">ConsoleInputThread()</a>, <a class="el" href="../../d7/d0/ntcon_2server_2cursor_8c-source.html#l00332">CursorTimerRoutine()</a>, <a class="el" href="../../d8/d3/server_2private_8c-source.html#l01567">DisplayModeTransition()</a>, <a class="el" href="../../d1/d4/srvinit_8c-source.html#l00590">InitWindowClass()</a>, <a class="el" href="../../d1/d4/srvinit_8c-source.html#l00626">InitWindowsStuff()</a>, <a class="el" href="../../d8/d3/server_2private_8c-source.html#l01094">SrvRegisterConsoleVDM()</a>, <a class="el" href="../../d8/d3/server_2private_8c-source.html#l00432">SrvSetConsolePalette()</a>, and <a class="el" href="../../d8/d3/server_2private_8c-source.html#l00980">UnregisterVDM()</a>.
<p>
<pre class="fragment"><div>00874 {
00875     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a7">BEGINRECVCSRSS</a>(NTSTATUS, STATUS_UNSUCCESSFUL);
00876 
00877 <span class="preprocessor">#if DBG</span>
00878 <span class="preprocessor"></span>    <a class="code" href="../../d5/d8/ex_8h.html#a259">ProbeForWrite</a>(ConsoleInformation,
00879                   ConsoleInformationLength,
00880                   <span class="keyword">sizeof</span>(WORD));
00881 <span class="preprocessor">#endif</span>
00882 <span class="preprocessor"></span>
00883     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1947">xxxConsoleControl</a>(ConsoleCommand,
00884                                 ConsoleInformation,
00885                                 ConsoleInformationLength);
00886 
00887     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserConsoleControl"</span>);
00888     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a8">ENDRECVCSRSS</a>();
00889 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a54" doxytag="ntuser.h::NtUserConvertMemHandle" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI HANDLE NtUserConvertMemHandle           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN LPBYTE&nbsp;</td>
          <td class="mdname" nowrap> <em>lpData</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>cbNULL</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l03310">3310</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d9/d7/ntuser_2kernel_2clipbrd_8c-source.html#l00088">_ConvertMemHandle()</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d0/d7/halvprnt_8c-source.html#l00031">BYTE</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d6/d7/ex_8h-source.html#l01209">ProbeForRead</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00343">StubExceptionHandler</a>, and <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>.
<p>
Referenced by <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00189">ConvertMemHandle()</a>.
<p>
<pre class="fragment"><div>03313 {
03314     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(HANDLE, NULL);
03315 
03316     <span class="comment">/*</span>
03317 <span class="comment">     * Probe arguments</span>
03318 <span class="comment">     */</span>
03319     <span class="keywordflow">try</span> {
03320 
03321         <a class="code" href="../../d5/d8/ex_8h.html#a11">ProbeForRead</a>(lpData, cbData, <span class="keyword">sizeof</span>(BYTE));
03322 
03323     } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(FALSE)) {
03324         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
03325     }
03326 
03327     <span class="comment">/*</span>
03328 <span class="comment">     * lpData is client-side.</span>
03329 <span class="comment">     */</span>
03330     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1487">_ConvertMemHandle</a>(lpData, cbData);
03331 
03332     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserConvertMemHandle"</span>);
03333     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
03334 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a210" doxytag="ntuser.h::NtUserCopyAcceleratorTable" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI int NtUserCopyAcceleratorTable           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HACCEL&nbsp;</td>
          <td class="mdname" nowrap> <em>hAccelSrc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN OUT LPACCEL lpAccelDst&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN int&nbsp;</td>
          <td class="mdname" nowrap> <em>cAccelEntries</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l08729">8729</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d5/d0/userk_8h-source.html#l02782">tagACCELTABLE::accel</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00075">BEGINATOMICRECV</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l02781">tagACCELTABLE::cAccel</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00147">DATAALIGN</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00081">ENDATOMICRECV</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00735">FLASTKEY</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00158">ProbeForWriteBuffer</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00343">StubExceptionHandler</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00460">ValidateHACCEL</a>.
<p>
Referenced by <a class="el" href="../../d5/d8/clres_8c-source.html#l00236">CopyAcceleratorTableA()</a>.
<p>
<pre class="fragment"><div>08733 {
08734     <a class="code" href="../../d0/d8/structtagACCELTABLE.html">LPACCELTABLE</a> pat;
08735     <span class="keywordtype">int</span> i;
08736     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a5">BEGINATOMICRECV</a>(<span class="keywordtype">int</span>, 0);
08737 
08738     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a63">ValidateHACCEL</a>(pat, hAccelSrc);
08739 
08740     <span class="keywordflow">if</span> (lpAccelDst == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
08741         retval = pat-&gt;<a class="code" href="../../d0/d8/structtagACCELTABLE.html#o1">cAccel</a>;
08742     } <span class="keywordflow">else</span> {
08743 
08744         <span class="comment">/*</span>
08745 <span class="comment">         * Probe arguments</span>
08746 <span class="comment">         */</span>
08747         <span class="keywordflow">try</span> {
08748             <a class="code" href="../../d4/d1/userk_8h.html#a25">ProbeForWriteBuffer</a>(lpAccelDst, cAccel, DATAALIGN);
08749 
08750             <span class="keywordflow">if</span> (cAccel &gt; (<span class="keywordtype">int</span>)pat-&gt;<a class="code" href="../../d0/d8/structtagACCELTABLE.html#o1">cAccel</a>)
08751                 cAccel = pat-&gt;<a class="code" href="../../d0/d8/structtagACCELTABLE.html#o1">cAccel</a>;
08752 
08753             retval = cAccel;
08754             <span class="keywordflow">for</span> (i = 0; i &lt; cAccel; i++) {
08755                 RtlCopyMemory(&amp;lpAccelDst[i], &amp;pat-&gt;<a class="code" href="../../d0/d8/structtagACCELTABLE.html#o2">accel</a>[i], <span class="keyword">sizeof</span>(ACCEL));
08756                 lpAccelDst[i].fVirt &amp;= ~<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a190">FLASTKEY</a>;
08757             }
08758         } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(TRUE)) {
08759             <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
08760         }
08761     }
08762 
08763     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserCopyAcceleratorTable"</span>);
08764     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a6">ENDATOMICRECV</a>();
08765 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a94" doxytag="ntuser.h::NtUserCountClipboardFormats" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI int NtUserCountClipboardFormats           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">VOID&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05042">5042</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00094">BEGINRECV_SHARED</a>, <a class="el" href="../../d9/d7/ntuser_2kernel_2clipbrd_8c-source.html#l00049">CheckClipboardAccess()</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l02730">tagWINDOWSTATION::cNumClipFormats</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00099">ENDRECV_SHARED</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>.
<p>
<pre class="fragment"><div>05044 {
05045     <a class="code" href="../../d4/d9/structtagWINDOWSTATION.html">PWINDOWSTATION</a> pwinsta;
05046 
05047     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a9">BEGINRECV_SHARED</a>(<span class="keywordtype">int</span>, 0);
05048 
05049     <span class="comment">/*</span>
05050 <span class="comment">     * Blow it off if the caller doesn't have the proper access rights</span>
05051 <span class="comment">     */</span>
05052     <span class="keywordflow">if</span> ((pwinsta = <a class="code" href="../../d8/d8/ntuser_2kernel_2clipbrd_8c.html#a14">CheckClipboardAccess</a>()) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
05053         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
05054     }
05055 
05056     retval = pwinsta-&gt;<a class="code" href="../../d4/d9/structtagWINDOWSTATION.html#o11">cNumClipFormats</a>;
05057 
05058     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserCountClipboardFormats"</span>);
05059     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a10">ENDRECV_SHARED</a>();
05060 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a62" doxytag="ntuser.h::NtUserCreateAcceleratorTable" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI HACCEL NtUserCreateAcceleratorTable           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN LPACCEL&nbsp;</td>
          <td class="mdname" nowrap> <em>lpAccel</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cAccel</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l03960">3960</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d2/d1/mnaccel_8c-source.html#l00217">_CreateAcceleratorTable()</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00147">DATAALIGN</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00151">ProbeForReadBuffer</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01512">PtoH</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00343">StubExceptionHandler</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d5/d8/clres_8c-source.html#l00199">CreateAcceleratorTableA()</a>, and <a class="el" href="../../d5/d8/clres_8c-source.html#l00403">LoadAcc()</a>.
<p>
<pre class="fragment"><div>03963 {
03964     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(HACCEL, NULL);
03965 
03966     <span class="keywordflow">if</span> (cAccel &lt;= 0) {
03967         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
03968     }
03969 
03970     <span class="comment">/*</span>
03971 <span class="comment">     * Probe arguments</span>
03972 <span class="comment">     */</span>
03973     <span class="keywordflow">try</span> {
03974         <a class="code" href="../../d4/d1/userk_8h.html#a24">ProbeForReadBuffer</a>(paccel, cAccel, DATAALIGN);
03975     } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(TRUE)) {
03976         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
03977     }
03978 
03979     retval = (HACCEL)<a class="code" href="../../d4/d1/userk_8h.html#a1783">_CreateAcceleratorTable</a>(
03980             paccel,
03981             cAccel * <span class="keyword">sizeof</span>(ACCEL));
03982     retval = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a448">PtoH</a>((PVOID)retval);
03983 
03984     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserCreateAcceleratorTable"</span>);
03985     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
03986 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a151" doxytag="ntuser.h::NtUserCreateCaret" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserCreateCaret           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN HBITMAP&nbsp;</td>
          <td class="mdname" nowrap> <em>hBitmap</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN int&nbsp;</td>
          <td class="mdname" nowrap> <em>nWidth</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN int&nbsp;</td>
          <td class="mdname" nowrap> <em>nHeight</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06550">6550</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00172">BEGINRECV_HWNDLOCK</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00186">ENDRECV_HWNDLOCK</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, and <a class="el" href="../../d5/d4/caret_8c-source.html#l00254">xxxCreateCaret()</a>.
<p>
Referenced by <a class="el" href="../../d6/d3/edecrare_8c-source.html#l00708">ECSetFont()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l03274">MLSetFocus()</a>, and <a class="el" href="../../d4/d4/editsl_8c-source.html#l02341">SLSetFocus()</a>.
<p>
<pre class="fragment"><div>06555 {
06556 
06557     <span class="comment">//</span>
06558     <span class="comment">// N.B. This function has implicit window handle translation. This</span>
06559     <span class="comment">//      operation is performed in the User server API dispatcher.</span>
06560     <span class="comment">//</span>
06561 
06562     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a24">BEGINRECV_HWNDLOCK</a>(DWORD, 0, hwnd);
06563 
06564     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1724">xxxCreateCaret</a>(
06565             pwnd,
06566             hBitmap,
06567             nWidth,
06568             nHeight
06569     );
06570 
06571     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserCreateCaret"</span>);
06572     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a25">ENDRECV_HWNDLOCK</a>();
06573 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a16" doxytag="ntuser.h::NtUserCreateDesktop" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI HDESK NtUserCreateDesktop           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN POBJECT_ATTRIBUTES&nbsp;</td>
          <td class="mdname" nowrap> <em>pObja</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PUNICODE_STRING&nbsp;</td>
          <td class="mdname" nowrap> <em>pstrDevice</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN LPDEVMODEW&nbsp;</td>
          <td class="mdname" nowrap> <em>pDevmode</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwFlags</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ACCESS_MASK&nbsp;</td>
          <td class="mdname" nowrap> <em>amRequest</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l01173">1173</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d4/d7/propapi_8h-source.html#l00043">dwFlags</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03289">IS_CURRENT_THREAD_RESTRICTED</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d6/d7/ex_8h-source.html#l01209">ProbeForRead</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00343">StubExceptionHandler</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d0/d9/ntosdef_8h.html#a76a70">UserMode</a>, and <a class="el" href="../../d0/d6/desktop_8c-source.html#l01797">xxxCreateDesktop()</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/client_8c-source.html#l02420">CommonCreateDesktop()</a>.
<p>
<pre class="fragment"><div>01179 {
01180     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(HDESK, NULL);
01181 
01182     <span class="comment">/*</span>
01183 <span class="comment">     * Fail this call for restricted threads</span>
01184 <span class="comment">     */</span>
01185     <span class="keywordflow">if</span> (<a class="code" href="../../d4/d1/userk_8h.html#a383">IS_CURRENT_THREAD_RESTRICTED</a>(JOB_OBJECT_UILIMIT_DESKTOP)) {
01186         RIPMSG0(RIP_WARNING, <span class="stringliteral">"NtUserCreateDesktop failed for restricted thread"</span>);
01187         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
01188     }
01189 
01190     <span class="comment">/*</span>
01191 <span class="comment">     * Probe arguments</span>
01192 <span class="comment">     */</span>
01193     <span class="keywordflow">try</span> {
01194         <a class="code" href="../../d5/d8/ex_8h.html#a11">ProbeForRead</a>(pObja, <span class="keyword">sizeof</span>(*pObja), <span class="keyword">sizeof</span>(DWORD));
01195     } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(TRUE)) {
01196         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
01197     }
01198 
01199     <span class="comment">/*</span>
01200 <span class="comment">     * pObja, pDevmode, and pstrDevice are all client side addresses.</span>
01201 <span class="comment">     *</span>
01202 <span class="comment">     * pstrDevice and pDevmode are put into the Context info,</span>
01203 <span class="comment">     * and they are used in ntgdi\dre\drvsup.cxx,</span>
01204 <span class="comment">     * where thay are captured before use.</span>
01205 <span class="comment"></span>
01206 <span class="comment">     */</span>
01207 
01208     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1795">xxxCreateDesktop</a>(pObja,
01209                               UserMode,
01210                               pstrDevice,
01211                               pDevmode,
01212                               dwFlags,
01213                               amRequest);
01214 
01215     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserCreateDesktop"</span>);
01216     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
01217 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a55" doxytag="ntuser.h::NtUserCreateLocalMemHandle" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI NTSTATUS NtUserCreateLocalMemHandle           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hMem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT LPBYTE lpData&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>cbData</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT <a class="el" href="../../d9/d5/ndismain_8h.html#a266">PUINT</a> lpcbNeeded&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l03336">3336</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d5/d0/userk_8h-source.html#l02453">tagCLIPDATA::abData</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d0/d7/halvprnt_8c-source.html#l00031">BYTE</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l02452">tagCLIPDATA::cbData</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00150">HMValidateHandle()</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d4/d1/userk_8h.html#a825">PCLIPDATA</a>, <a class="el" href="../../d6/d7/ex_8h-source.html#l01847">ProbeAndWriteUlong</a>, <a class="el" href="../../d0/d4/probe_8c-source.html#l00034">ProbeForWrite()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00343">StubExceptionHandler</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00911">TYPE_CLIPDATA</a>.
<p>
Referenced by <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00230">CreateLocalMemHandle()</a>.
<p>
<pre class="fragment"><div>03341 {
03342     <a class="code" href="../../d6/d0/structtagCLIPDATA.html">PCLIPDATA</a> pClipData;
03343 
03344     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(NTSTATUS, STATUS_INVALID_HANDLE);
03345 
03346     pClipData = <a class="code" href="../../d6/d9/rtl_2wow_8c.html#a6">HMValidateHandle</a>(hMem, TYPE_CLIPDATA);
03347     <span class="keywordflow">if</span> (pClipData == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
03348         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
03349 
03350     <span class="comment">/*</span>
03351 <span class="comment">     * Probe arguments</span>
03352 <span class="comment">     */</span>
03353     <span class="keywordflow">try</span> {
03354         <span class="keywordflow">if</span> (ARGUMENT_PRESENT(lpData)) {
03355             <a class="code" href="../../d5/d8/ex_8h.html#a259">ProbeForWrite</a>(lpData, cbData, <span class="keyword">sizeof</span>(BYTE));
03356         }
03357 
03358         <span class="keywordflow">if</span> (ARGUMENT_PRESENT(lpcbNeeded)) {
03359             <a class="code" href="../../d5/d8/ex_8h.html#a51">ProbeAndWriteUlong</a>(lpcbNeeded, pClipData-&gt;<a class="code" href="../../d6/d0/structtagCLIPDATA.html#o1">cbData</a>);
03360         }
03361 
03362         <span class="keywordflow">if</span> (!ARGUMENT_PRESENT(lpData) || cbData &lt; pClipData-&gt;<a class="code" href="../../d6/d0/structtagCLIPDATA.html#o1">cbData</a>) {
03363             retval = STATUS_BUFFER_TOO_SMALL;
03364         } <span class="keywordflow">else</span> {
03365             RtlCopyMemory(lpData, &amp;pClipData-&gt;<a class="code" href="../../d6/d0/structtagCLIPDATA.html#o2">abData</a>, pClipData-&gt;<a class="code" href="../../d6/d0/structtagCLIPDATA.html#o1">cbData</a>);
03366             retval = STATUS_SUCCESS;
03367         }
03368     } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(FALSE)) {
03369         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
03370     }
03371 
03372     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserCreateLocalMemHandle"</span>);
03373     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
03374 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a196" doxytag="ntuser.h::NtUserCreateWindowEx" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI HWND NtUserCreateWindowEx           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwExStyle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d1/d9/struct__LARGE__STRING.html">PLARGE_STRING</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pstrClassName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d1/d9/struct__LARGE__STRING.html">PLARGE_STRING</a> pstrWindowName&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwStyle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN int&nbsp;</td>
          <td class="mdname" nowrap> <em>x</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN int&nbsp;</td>
          <td class="mdname" nowrap> <em>y</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN int&nbsp;</td>
          <td class="mdname" nowrap> <em>nWidth</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN int&nbsp;</td>
          <td class="mdname" nowrap> <em>nHeight</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwndParent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN HMENU&nbsp;</td>
          <td class="mdname" nowrap> <em>hmenu</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hModule</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a5">LPVOID</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwFlags</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l08087">8087</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d0/d7/kernel_2winmgr_8c-source.html#l01158">_GetMessageWindow()</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l00451">_LARGE_STRING::bAnsi</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00421">_LARGE_STRING::Buffer</a>, <a class="el" href="../../d0/d7/halvprnt_8c-source.html#l00031">BYTE</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00251">CLEANUPRECV</a>, <a class="el" href="../../d4/d7/propapi_8h-source.html#l00043">dwFlags</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d2/queue_8c-source.html#l01033">GetAppCompatFlags2()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00410">IS_PTR</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l00449">_LARGE_STRING::Length</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00336">MSGERRORCLEANUP</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00233">ProbeAndReadLargeString</a>, <a class="el" href="../../d6/d7/ex_8h-source.html#l01209">ProbeForRead</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00058">PtiCurrent</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01512">PtoH</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00343">StubExceptionHandler</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00365">ThreadLockAlwaysWithPti</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00364">ThreadLockWithPti</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00366">ThreadUnlock</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00448">ValidateHMENU</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00410">ValidateHWNDOPT</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00475">VER40</a>, and <a class="el" href="../../d5/d7/createw_8c-source.html#l00033">xxxCreateWindowEx()</a>.
<p>
Referenced by <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l01197">_CreateWindowEx()</a>, and <a class="el" href="../../d1/d8/dlgbegin_8c-source.html#l00553">InternalCreateDialog()</a>.
<p>
<pre class="fragment"><div>08101 {
08102     <a class="code" href="../../d1/d9/struct__LARGE__STRING.html">LARGE_STRING</a> strClassName;
08103     <a class="code" href="../../d1/d9/struct__LARGE__STRING.html">LARGE_STRING</a> strWindowName;
08104     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwndParent;
08105     <a class="code" href="../../d1/d1/structtagMENU.html">PMENU</a> pmenu;
08106     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpwndParent;
08107     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpmenu;
08108     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fLockMenu = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
08109     <a class="code" href="../../d2/d8/structtagTHREADINFO.html">PTHREADINFO</a> ptiCurrent;
08110 
08111     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(HWND, NULL);
08112 
08113     <span class="keywordflow">if</span> (hwndParent != HWND_MESSAGE) {
08114         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a57">ValidateHWNDOPT</a>(pwndParent, hwndParent);
08115     } <span class="keywordflow">else</span>
08116         pwndParent = <a class="code" href="../../d9/d7/kernel_2winmgr_8c.html#a15">_GetMessageWindow</a>();
08117 
08118 
08119     <span class="comment">/*</span>
08120 <span class="comment">     * Win3.1 only checks for WS_CHILD before treating pmenu as an id. This</span>
08121 <span class="comment">     * is a bug, because throughout the code, the real check is TestwndChild(),</span>
08122 <span class="comment">     * which checks (style &amp; (WS_CHILD | WS_POPUP)) == WS_CHILD. This is</span>
08123 <span class="comment">     * because old style "iconic popup" is WS_CHILD | WS_POPUP. So... if on</span>
08124 <span class="comment">     * win3.1 an app used ws_iconicpopup, menu validation would not occur</span>
08125 <span class="comment">     * (could crash if hmenu != NULL). On Win32, check for the real thing -</span>
08126 <span class="comment">     * but allow NULL!</span>
08127 <span class="comment">     */</span>
08128     ptiCurrent = <a class="code" href="../../d4/d1/userk_8h.html#a9">PtiCurrent</a>();
08129     <span class="keywordflow">if</span> (((dwStyle &amp; (WS_CHILD | WS_POPUP)) != WS_CHILD) &amp;&amp;
08130             (hmenu != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)) {
08131         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a61">ValidateHMENU</a>(pmenu, hmenu);
08132 
08133         <a class="code" href="../../d6/d0/usercli_8h.html#a39">ThreadLockAlwaysWithPti</a>(ptiCurrent, pmenu, &amp;tlpmenu);
08134         fLockMenu = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
08135 
08136     } <span class="keywordflow">else</span> {
08137         pmenu = (<a class="code" href="../../d1/d1/structtagMENU.html">PMENU</a>)hmenu;
08138     }
08139 
08140     <span class="comment">/*</span>
08141 <span class="comment">     * Mask out the new 5.0 extended style bits for apps</span>
08142 <span class="comment">     * that would try to use them and we'll fail in xxxCreateWindowEx</span>
08143 <span class="comment">     */</span>
08144     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d3/queue_8c.html#a35">GetAppCompatFlags2</a>(VER40) &amp; GACF2_NO50EXSTYLEBITSCW) {
08145 
08146 <span class="preprocessor">#if DBG</span>
08147 <span class="preprocessor"></span>        <span class="keywordflow">if</span> (dwExStyle &amp; ~(WS_EX_VALID40 | WS_EX_INTERNAL)) {
08148             RIPMSG0(RIP_WARNING, <span class="stringliteral">"CreateWindowEx: appcompat removed 5.0 EX bits"</span>);
08149         }
08150 <span class="preprocessor">#endif</span>
08151 <span class="preprocessor"></span>
08152         dwExStyle &amp;= (WS_EX_VALID40 | WS_EX_INTERNAL);
08153     }
08154     
08155     <span class="comment">/*</span>
08156 <span class="comment">     * Probe arguments</span>
08157 <span class="comment">     */</span>
08158     <span class="keywordflow">try</span> {
08159 <span class="preprocessor">#if defined(_X86_)</span>
08160 <span class="preprocessor"></span>        <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a98">IS_PTR</a>(pstrClassName)) {
08161             strClassName = <a class="code" href="../../d4/d1/userk_8h.html#a34">ProbeAndReadLargeString</a>(pstrClassName);
08162             <a class="code" href="../../d5/d8/ex_8h.html#a11">ProbeForRead</a>(strClassName.<a class="code" href="../../d1/d9/struct__LARGE__STRING.html#o3">Buffer</a>, strClassName.<a class="code" href="../../d1/d9/struct__LARGE__STRING.html#o0">Length</a>,
08163                     <span class="keyword">sizeof</span>(BYTE));
08164             pstrClassName = &amp;strClassName;
08165         }
08166         <span class="keywordflow">if</span> (ARGUMENT_PRESENT(pstrWindowName)) {
08167             strWindowName = <a class="code" href="../../d4/d1/userk_8h.html#a34">ProbeAndReadLargeString</a>(pstrWindowName);
08168             <a class="code" href="../../d5/d8/ex_8h.html#a11">ProbeForRead</a>(strWindowName.<a class="code" href="../../d1/d9/struct__LARGE__STRING.html#o3">Buffer</a>, strWindowName.<a class="code" href="../../d1/d9/struct__LARGE__STRING.html#o0">Length</a>,
08169                     <span class="keyword">sizeof</span>(BYTE));
08170             pstrWindowName = &amp;strWindowName;
08171         }
08172 <span class="preprocessor">#else</span>
08173 <span class="preprocessor"></span>        <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a98">IS_PTR</a>(pstrClassName)) {
08174             strClassName = <a class="code" href="../../d4/d1/userk_8h.html#a34">ProbeAndReadLargeString</a>(pstrClassName);
08175             <a class="code" href="../../d5/d8/ex_8h.html#a11">ProbeForRead</a>(strClassName.<a class="code" href="../../d1/d9/struct__LARGE__STRING.html#o3">Buffer</a>, strClassName.<a class="code" href="../../d1/d9/struct__LARGE__STRING.html#o0">Length</a>,
08176                     <span class="keyword">sizeof</span>(WORD));
08177             pstrClassName = &amp;strClassName;
08178         }
08179         <span class="keywordflow">if</span> (ARGUMENT_PRESENT(pstrWindowName)) {
08180             strWindowName = <a class="code" href="../../d4/d1/userk_8h.html#a34">ProbeAndReadLargeString</a>(pstrWindowName);
08181             <a class="code" href="../../d5/d8/ex_8h.html#a11">ProbeForRead</a>(strWindowName.<a class="code" href="../../d1/d9/struct__LARGE__STRING.html#o3">Buffer</a>, strWindowName.<a class="code" href="../../d1/d9/struct__LARGE__STRING.html#o0">Length</a>,
08182                     (strWindowName.<a class="code" href="../../d1/d9/struct__LARGE__STRING.html#o2">bAnsi</a> ? <span class="keyword">sizeof</span>(BYTE) : <span class="keyword">sizeof</span>(WORD)));
08183             pstrWindowName = &amp;strWindowName;
08184         }
08185 <span class="preprocessor">#endif</span>
08186 <span class="preprocessor"></span>    } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(TRUE)) {
08187         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a44">MSGERRORCLEANUP</a>(0);
08188     }
08189 
08190     <a class="code" href="../../d6/d0/usercli_8h.html#a38">ThreadLockWithPti</a>(ptiCurrent, pwndParent, &amp;tlpwndParent);
08191 
08192     <span class="comment">/*</span>
08193 <span class="comment">     * The buffers for ClassName and WindowName are still in client space.</span>
08194 <span class="comment">     */</span>
08195 
08196     retval = (HWND)<a class="code" href="../../d4/d1/userk_8h.html#a1574">xxxCreateWindowEx</a>(
08197             dwExStyle,
08198             pstrClassName,
08199             pstrWindowName,
08200             dwStyle,
08201             x,
08202             y,
08203             nWidth,
08204             nHeight,
08205             pwndParent,
08206             pmenu,
08207             hModule,
08208             pParam,
08209             dwFlags);
08210     retval = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a448">PtoH</a>((PVOID)retval);
08211 
08212     <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndParent);
08213 
08214     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a33">CLEANUPRECV</a>();
08215     <span class="keywordflow">if</span> (fLockMenu)
08216         <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpmenu);
08217 
08218     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserCreateWindowEx"</span>);
08219     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
08220 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a10" doxytag="ntuser.h::NtUserCreateWindowStation" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI HWINSTA NtUserCreateWindowStation           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN POBJECT_ATTRIBUTES&nbsp;</td>
          <td class="mdname" nowrap> <em>pObja</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ACCESS_MASK&nbsp;</td>
          <td class="mdname" nowrap> <em>amRequest</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hKbdLayoutFile</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>offTable</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PUNICODE_STRING&nbsp;</td>
          <td class="mdname" nowrap> <em>pstrKLID</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>uKbdInputLocale</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a260" doxytag="ntuser.h::NtUserCtxDisplayIOCtl" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI NTSTATUS NtUserCtxDisplayIOCtl           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>DisplayIOCtlFlags</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PUCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>pDisplayIOCtlData</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>cbDisplayIOCtlData</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00615">615</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00083">BEGINRECVCSRSS</a>, <a class="el" href="../../d0/d7/halvprnt_8c-source.html#l00031">BYTE</a>, <a class="el" href="../../d7/d9/w32_2ntuser_2kernel_2misc_8c-source.html#l00814">CtxDisplayIOCtl()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00092">ENDRECVCSRSS</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l03600">ISTS</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d6/d7/ex_8h-source.html#l01209">ProbeForRead</a>, and <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>.
<p>
Referenced by <a class="el" href="../../d5/d3/command_8c-source.html#l00035">Win32CommandChannelThread()</a>.
<p>
<pre class="fragment"><div>00619 {
00620     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a7">BEGINRECVCSRSS</a>(NTSTATUS, STATUS_UNSUCCESSFUL);
00621     <span class="keywordflow">if</span> (!<a class="code" href="../../d1/d0/inc_2user_8h.html#a882">ISTS</a>()) {
00622         errret = STATUS_ACCESS_DENIED;
00623         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
00624     }
00625 
00626     <span class="comment">/*</span>
00627 <span class="comment">     * Probe all read arguments</span>
00628 <span class="comment">     */</span>
00629 <span class="preprocessor">#if DBG</span>
00630 <span class="preprocessor"></span>    <a class="code" href="../../d5/d8/ex_8h.html#a11">ProbeForRead</a>(pDisplayIOCtlData, cbDisplayIOCtlData, <span class="keyword">sizeof</span>(BYTE));
00631 <span class="preprocessor">#endif</span>
00632 <span class="preprocessor"></span>
00633     retval = <a class="code" href="../../d4/d1/userk_8h.html#a2100">CtxDisplayIOCtl</a>(
00634                  DisplayIOCtlFlags,
00635                  pDisplayIOCtlData,
00636                  cbDisplayIOCtlData);
00637 
00638     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserCtxDisplayIOCtl"</span>);
00639     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a8">ENDRECVCSRSS</a>();
00640 
00641 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a78" doxytag="ntuser.h::NtUserDdeGetQualityOfService" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserDdeGetQualityOfService           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwndClient</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwndServer</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PSECURITY_QUALITY_OF_SERVICE&nbsp;</td>
          <td class="mdname" nowrap> <em>pqos</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04415">4415</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l02218">_DdeGetQualityOfService()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00122">BEGINATOMICRECV_HWND</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00147">DATAALIGN</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00133">ENDATOMICRECV_HWND</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01547">GETPTI</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d0/d4/probe_8c-source.html#l00034">ProbeForWrite()</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00058">PtiCurrent</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00343">StubExceptionHandler</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, and <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00410">ValidateHWNDOPT</a>.
<p>
Referenced by <a class="el" href="../../d4/d3/ddemlwp_8c-source.html#l00059">ProcessDDEMLInitiate()</a>.
<p>
<pre class="fragment"><div>04419 {
04420 
04421     <span class="comment">//</span>
04422     <span class="comment">// N.B. This function has implicit window handle translation. This</span>
04423     <span class="comment">//      operation is performed in the User server API dispatcher.</span>
04424     <span class="comment">//</span>
04425 
04426     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwndServer;
04427     <a class="code" href="../../d2/d8/structtagTHREADINFO.html">PTHREADINFO</a> ptiCurrent;
04428     SECURITY_QUALITY_OF_SERVICE qos;
04429 
04430     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a16">BEGINATOMICRECV_HWND</a>(BOOL, FALSE, hwndClient);
04431 
04432     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a57">ValidateHWNDOPT</a>(pwndServer, hwndServer);
04433     ptiCurrent = <a class="code" href="../../d4/d1/userk_8h.html#a9">PtiCurrent</a>();
04434     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a455">GETPTI</a>(pwnd) != ptiCurrent &amp;&amp; pwndServer != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> &amp;&amp;
04435             <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a455">GETPTI</a>(pwndServer) != ptiCurrent) {
04436         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
04437     }
04438 
04439     <span class="comment">/*</span>
04440 <span class="comment">     * Probe arguments</span>
04441 <span class="comment">     */</span>
04442     <span class="keywordflow">try</span> {
04443         <a class="code" href="../../d5/d8/ex_8h.html#a259">ProbeForWrite</a>(pqos, <span class="keyword">sizeof</span>(*pqos), DATAALIGN);
04444 
04445     } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(FALSE)) {
04446         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
04447     }
04448     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1128">_DdeGetQualityOfService</a>(
04449                 pwnd,
04450                 pwndServer,
04451                 &amp;qos);
04452     <span class="keywordflow">try</span> {
04453         RtlCopyMemory(pqos, &amp;qos, <span class="keyword">sizeof</span> (SECURITY_QUALITY_OF_SERVICE));
04454     } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(FALSE)) {
04455         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
04456     }
04457 
04458     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserDdeGetQualityOfService"</span>);
04459     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a17">ENDATOMICRECV_HWND</a>();
04460 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a42" doxytag="ntuser.h::NtUserDdeInitialize" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> NtUserDdeInitialize           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">OUT PHANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>phInst</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT HWND *&nbsp;</td>
          <td class="mdname" nowrap> <em>phwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>pMonFlags</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>afCmd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PVOID&nbsp;</td>
          <td class="mdname" nowrap> <em>pcii</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l02888">2888</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00074">hInst</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l01170">HtoP</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d6/d7/ex_8h-source.html#l01811">ProbeAndWriteHandle</a>, <a class="el" href="../../d6/d7/ex_8h-source.html#l01847">ProbeAndWriteUlong</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00058">PtiCurrent</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00343">StubExceptionHandler</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d2/d3/ddemlsvr_8c-source.html#l00019">xxxCsDdeInitialize()</a>, and <a class="el" href="../../d2/d3/ddemlsvr_8c-source.html#l00127">xxxDestroyThreadDDEObject()</a>.
<p>
Referenced by <a class="el" href="../../d0/d3/ddemlcli_8c-source.html#l00065">InternalDdeInitialize()</a>.
<p>
<pre class="fragment"><div>02894 {
02895     HANDLE <a class="code" href="../../d3/d8/aug98_2test_2main_8c.html#a0">hInst</a>;
02896     HWND hwnd;
02897     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> MonFlags;
02898 
02899     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(DWORD, DMLERR_INVALIDPARAMETER);
02900 
02901     <span class="comment">/*</span>
02902 <span class="comment">     * NOTE -- pcii is a value that is passed back to the client side</span>
02903 <span class="comment">     *  for event callbacks.  It is not probed because it is not used</span>
02904 <span class="comment">     *  on the kernel side.</span>
02905 <span class="comment">     */</span>
02906 
02907     retval = <a class="code" href="../../d2/d4/ddemlsvr_8h.html#a8">xxxCsDdeInitialize</a>(&amp;hInst, &amp;hwnd,
02908             &amp;MonFlags, afCmd, pcii);
02909 
02910     <span class="comment">/*</span>
02911 <span class="comment">     * Probe arguments.  pcii is not dereferenced in the kernel so probing</span>
02912 <span class="comment">     * is not needed.</span>
02913 <span class="comment">     */</span>
02914     <span class="keywordflow">if</span> (retval == DMLERR_NO_ERROR) {
02915         <span class="keywordflow">try</span> {
02916             <a class="code" href="../../d5/d8/ex_8h.html#a49">ProbeAndWriteHandle</a>(phInst, hInst);
02917             <a class="code" href="../../d5/d8/ex_8h.html#a49">ProbeAndWriteHandle</a>((PHANDLE)phwnd, hwnd);
02918             <a class="code" href="../../d5/d8/ex_8h.html#a51">ProbeAndWriteUlong</a>(pMonFlags, MonFlags);
02919         } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(TRUE)) {
02920             <a class="code" href="../../d2/d4/ddemlsvr_8h.html#a11">xxxDestroyThreadDDEObject</a>(<a class="code" href="../../d4/d1/userk_8h.html#a9">PtiCurrent</a>(), <a class="code" href="../../d4/d1/userk_8h.html#a102">HtoP</a>(hInst));
02921             <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
02922         }
02923     }
02924 
02925     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserDdeInitialize"</span>);
02926     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
02927 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a77" doxytag="ntuser.h::NtUserDdeSetQualityOfService" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserDdeSetQualityOfService           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwndClient</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN CONST SECURITY_QUALITY_OF_SERVICE *&nbsp;</td>
          <td class="mdname" nowrap> <em>pqosNew</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PSECURITY_QUALITY_OF_SERVICE pqosPrev&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04369">4369</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l02176">_DdeSetQualityOfService()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00110">BEGINRECV_HWND</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00120">ENDRECV_HWND</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01547">GETPTI</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d6/d7/ex_8h-source.html#l01431">ProbeAndReadStructure</a>, <a class="el" href="../../d0/d4/probe_8c-source.html#l00034">ProbeForWrite()</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00058">PtiCurrent</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00343">StubExceptionHandler</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d7/d4/connect_8c-source.html#l00607">ConnectConv()</a>.
<p>
<pre class="fragment"><div>04373 {
04374     SECURITY_QUALITY_OF_SERVICE qosNew, qosPrev;
04375 
04376     <span class="comment">//</span>
04377     <span class="comment">// N.B. This function has implicit window handle translation. This</span>
04378     <span class="comment">//      operation is performed in the User server API dispatcher.</span>
04379     <span class="comment">//</span>
04380 
04381     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a14">BEGINRECV_HWND</a>(BOOL, FALSE, hwndClient);
04382 
04383     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a455">GETPTI</a>(pwnd) != <a class="code" href="../../d4/d1/userk_8h.html#a9">PtiCurrent</a>()) {
04384         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
04385     }
04386 
04387     <span class="comment">/*</span>
04388 <span class="comment">     * Probe arguments</span>
04389 <span class="comment">     */</span>
04390     <span class="keywordflow">try</span> {
04391         qosNew = <a class="code" href="../../d5/d8/ex_8h.html#a27">ProbeAndReadStructure</a>(pqosNew, SECURITY_QUALITY_OF_SERVICE);
04392         <span class="keywordflow">if</span> (ARGUMENT_PRESENT(pqosPrev))
04393             <a class="code" href="../../d5/d8/ex_8h.html#a259">ProbeForWrite</a>(pqosPrev, <span class="keyword">sizeof</span>(*pqosPrev), <span class="keyword">sizeof</span>(DWORD));
04394 
04395     } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(TRUE)) {
04396         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
04397     }
04398 
04399     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1127">_DdeSetQualityOfService</a>(
04400                 pwnd,
04401                 &amp;qosNew,
04402                 &amp;qosPrev);
04403 
04404     <span class="keywordflow">try</span> {
04405         <span class="keywordflow">if</span> (ARGUMENT_PRESENT(pqosPrev))
04406             *pqosPrev = qosPrev;
04407     } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(TRUE)) {
04408         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
04409     }
04410 
04411     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserDdeSetQualityOfService"</span>);
04412     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a15">ENDRECV_HWND</a>();
04413 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a31" doxytag="ntuser.h::NtUserDeferWindowPos" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI HANDLE NtUserDeferWindowPos           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HDWP&nbsp;</td>
          <td class="mdname" nowrap> <em>hWinPosInfo</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwndInsertAfter</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN int&nbsp;</td>
          <td class="mdname" nowrap> <em>x</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN int&nbsp;</td>
          <td class="mdname" nowrap> <em>y</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN int&nbsp;</td>
          <td class="mdname" nowrap> <em>cx</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN int&nbsp;</td>
          <td class="mdname" nowrap> <em>cy</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>wFlags</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l01761">1761</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d3/d7/swp_8c-source.html#l00365">_DeferWindowPos()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00075">BEGINATOMICRECV</a>, <a class="el" href="../../d2/d0/inctlpan_8c-source.html#l00480">cy</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00081">ENDATOMICRECV</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01512">PtoH</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00345">TESTFLAGS</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00488">ValidateHDWP</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00418">ValidateHWNDIA</a>, and <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00403">ValidateHWNDND</a>.
<p>
Referenced by <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00927">CascadeWindowsEnum()</a>, <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00685">MDIActivateDlgSize()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01072">TileWindowsEnum()</a>, and <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01420">xxxMDINext()</a>.
<p>
<pre class="fragment"><div>01770 {
01771     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwnd;
01772     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwndInsertAfter;
01773     <a class="code" href="../../d8/d6/structtagSMWP.html">PSMWP</a> psmwp;
01774 
01775     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a5">BEGINATOMICRECV</a>(HANDLE, NULL);
01776 
01777     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a46">TESTFLAGS</a>(wFlags, SWP_VALID);
01778 
01779     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a56">ValidateHWNDND</a>(pwnd, hwnd);
01780     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a58">ValidateHWNDIA</a>(pwndInsertAfter, hwndInsertAfter);
01781     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a69">ValidateHDWP</a>(psmwp, hWinPosInfo);
01782 
01783     <span class="keywordflow">if</span> (wFlags &amp; ~(SWP_NOSIZE | SWP_NOMOVE | SWP_NOZORDER |
01784             SWP_NOREDRAW | SWP_NOACTIVATE | SWP_FRAMECHANGED |
01785             SWP_SHOWWINDOW | SWP_HIDEWINDOW | SWP_NOCOPYBITS |
01786             SWP_NOOWNERZORDER)) {
01787         RIPERR1(ERROR_INVALID_PARAMETER, RIP_WARNING, <span class="stringliteral">"Invalid flags (0x%lx) passed to DeferWindowPos"</span>,
01788                 wFlags);
01789         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
01790     }
01791 
01792     <span class="comment">/*</span>
01793 <span class="comment">     * Make sure the window coordinates can fit in WORDs.</span>
01794 <span class="comment">     */</span>
01795     <span class="keywordflow">if</span> (!(wFlags &amp; SWP_NOMOVE)) {
01796         <span class="keywordflow">if</span> (x &gt; SHRT_MAX) {
01797             x = SHRT_MAX;
01798         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (x &lt; SHRT_MIN) {
01799             x = SHRT_MIN;
01800         }
01801         <span class="keywordflow">if</span> (y &gt; SHRT_MAX) {
01802             y = SHRT_MAX;
01803         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (y &lt; SHRT_MIN) {
01804             y = SHRT_MIN;
01805         }
01806     }
01807 
01808     <span class="comment">/*</span>
01809 <span class="comment">     * Actually, if we were going to be really strict about this we'd</span>
01810 <span class="comment">     * make sure that x + cx &lt; SHRT_MAX, etc but since we do maintain</span>
01811 <span class="comment">     * signed 32-bit coords internally this case doesn't cause a problem.</span>
01812 <span class="comment">     */</span>
01813     <span class="keywordflow">if</span> (!(wFlags &amp; SWP_NOSIZE)) {
01814         <span class="keywordflow">if</span> (cx &lt; 0) {
01815             cx = 0;
01816         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cx &gt; SHRT_MAX) {
01817             cx = SHRT_MAX;
01818         }
01819         <span class="keywordflow">if</span> (<a class="code" href="../../d1/d1/inctlpan_8c.html#a3">cy</a> &lt; 0) {
01820             <a class="code" href="../../d1/d1/inctlpan_8c.html#a3">cy</a> = 0;
01821         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d1/d1/inctlpan_8c.html#a3">cy</a> &gt; SHRT_MAX) {
01822             <a class="code" href="../../d1/d1/inctlpan_8c.html#a3">cy</a> = SHRT_MAX;
01823         }
01824     }
01825 
01826 <span class="preprocessor">#ifdef NEVER</span>
01827 <span class="preprocessor"></span><span class="comment">//</span>
01828 <span class="comment">// do not fail these conditions because real apps use them.</span>
01829 <span class="comment">//</span>
01830     <span class="keywordflow">if</span> (!(wFlags &amp; SWP_NOMOVE) &amp;&amp;
01831             (x &gt; SHRT_MAX || x &lt; SHRT_MIN ||
01832              y &gt; SHRT_MAX || y &lt; SHRT_MIN)) {
01833         RIPERR0(ERROR_INVALID_PARAMETER, RIP_WARNING, <span class="stringliteral">"Invalid coordinate passed to SetWindowPos"</span>);
01834         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
01835     }
01836 
01837     <span class="comment">/*</span>
01838 <span class="comment">     * Actually, if we were going to be really strict about this we'd</span>
01839 <span class="comment">     * make sure that x + cx &lt; SHRT_MAX, etc but since we do maintain</span>
01840 <span class="comment">     * signed 32-bit coords internally this case doesn't cause a problem.</span>
01841 <span class="comment">     */</span>
01842     <span class="keywordflow">if</span> (!(wFlags &amp; SWP_NOSIZE) &amp;&amp;
01843             (cx &lt; 0 || cx &gt; SHRT_MAX ||
01844              cy &lt; 0 || cy &gt; SHRT_MAX)) {
01845         RIPERR0(ERROR_INVALID_PARAMETER, RIP_WARNING, <span class="stringliteral">"Invalid width/height passed to SetWindowPos"</span>);
01846         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
01847     }
01848 <span class="preprocessor">#endif</span>
01849 <span class="preprocessor"></span>
01850     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1619">_DeferWindowPos</a>(
01851             psmwp,
01852             pwnd,
01853             pwndInsertAfter,
01854             x,
01855             y,
01856             cx,
01857             cy,
01858             wFlags);
01859     retval = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a448">PtoH</a>((PVOID)retval);
01860 
01861     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserDeferWindowPos"</span>);
01862     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a6">ENDATOMICRECV</a>();
01863 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a181" doxytag="ntuser.h::NtUserDefSetText" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserDefSetText           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d1/d9/struct__LARGE__STRING.html">PLARGE_STRING</a> Text&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a63" doxytag="ntuser.h::NtUserDeleteMenu" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserDeleteMenu           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HMENU&nbsp;</td>
          <td class="mdname" nowrap> <em>hmenu</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>nPosition</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>dwFlags</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l03988">3988</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d4/d7/propapi_8h-source.html#l00043">dwFlags</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00345">TESTFLAGS</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00362">ThreadLock</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00366">ThreadUnlock</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00452">ValidateHMENUMODIFY</a>, and <a class="el" href="../../d4/d1/mnchange_8c-source.html#l00782">xxxDeleteMenu()</a>.
<p>
Referenced by <a class="el" href="../../d8/d6/menuc_8c-source.html#l00176">ChangeMenuA()</a>, <a class="el" href="../../d8/d6/menuc_8c-source.html#l00131">ChangeMenuW()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00548">ECMenu()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00278">ECSetIMEMenu()</a>, <a class="el" href="../../d7/d3/msgbox_8c-source.html#l01648">MB_DlgProcWorker()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01657">MDIClientWndProcWorker()</a>, <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00289">MDIRemoveSysMenu()</a>, and <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00499">MDISetMenu()</a>.
<p>
<pre class="fragment"><div>03992 {
03993     <a class="code" href="../../d1/d1/structtagMENU.html">PMENU</a> pmenu;
03994     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpmenu;
03995 
03996     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(BOOL, FALSE);
03997 
03998     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a46">TESTFLAGS</a>(dwFlags, MF_VALID);
03999 
04000     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a62">ValidateHMENUMODIFY</a>(pmenu, hmenu);
04001     <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(pmenu, &amp;tlpmenu);
04002     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1595">xxxDeleteMenu</a>(
04003             pmenu,
04004             nPosition,
04005             dwFlags);
04006     <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpmenu);
04007 
04008     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserDeleteMenu"</span>);
04009     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
04010 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a64" doxytag="ntuser.h::NtUserDestroyAcceleratorTable" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserDestroyAcceleratorTable           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HACCEL&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hAccel</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04012">4012</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d5/d7/handtabl_8c-source.html#l01069">HMFreeObject()</a>, <a class="el" href="../../d5/d7/handtabl_8c-source.html#l01237">HMMarkObjectDestroy()</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00460">ValidateHACCEL</a>.
<p>
Referenced by <a class="el" href="../../d5/d8/clres_8c-source.html#l00358">DestroyAcceleratorTable()</a>.
<p>
<pre class="fragment"><div>04014 {
04015     <a class="code" href="../../d0/d8/structtagACCELTABLE.html">LPACCELTABLE</a> pat;
04016 
04017     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(BOOL, FALSE);
04018 
04019     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a63">ValidateHACCEL</a>(pat, hAccel);
04020 
04021     <span class="comment">/*</span>
04022 <span class="comment">     * Mark the object for destruction - if it says it's ok to free,</span>
04023 <span class="comment">     * then free it.</span>
04024 <span class="comment">     */</span>
04025     <span class="keywordflow">if</span> (<a class="code" href="../../d4/d1/userk_8h.html#a971">HMMarkObjectDestroy</a>(pat))
04026         <a class="code" href="../../d4/d1/userk_8h.html#a970">HMFreeObject</a>(pat);
04027     retval = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
04028 
04029     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserDestroyAcceleratorTable"</span>);
04030     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
04031 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a65" doxytag="ntuser.h::NtUserDestroyCursor" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserDestroyCursor           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HCURSOR&nbsp;</td>
          <td class="mdname" nowrap> <em>hcurs</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cmd</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04033">4033</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d8/d3/loadbits_8c-source.html#l00539">_DestroyCursor()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00075">BEGINATOMICRECV</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00081">ENDATOMICRECV</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, and <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00464">ValidateHCURSOR</a>.
<p>
Referenced by <a class="el" href="../../d5/d8/clres_8c-source.html#l04493">CopyIcoCur()</a>, <a class="el" href="../../d4/d3/client_2acons_8c-source.html#l00581">CreateAniIcon()</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l01029">CreateIcoCur()</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l01084">CreateIcoCurIndirect()</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l01307">CreateIconIndirect()</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l01017">DestroyCursor()</a>, <a class="el" href="../../d4/d3/client_2acons_8c-source.html#l00777">LoadAniIcon()</a>, and <a class="el" href="../../d6/d4/statctl_8c-source.html#l00840">StaticWndProcWorker()</a>.
<p>
<pre class="fragment"><div>04036 {
04037     <a class="code" href="../../d6/d1/structtagCURSOR.html">PCURSOR</a> pcurs;
04038 
04039     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a5">BEGINATOMICRECV</a>(BOOL, FALSE);
04040 
04041     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a64">ValidateHCURSOR</a>(pcurs, hcurs);
04042 
04043     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1782">_DestroyCursor</a>(
04044             pcurs, cmd);
04045 
04046     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserDestroyCursor"</span>);
04047     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a6">ENDATOMICRECV</a>();
04048 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a67" doxytag="ntuser.h::NtUserDestroyMenu" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserDestroyMenu           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HMENU&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hmenu</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04100">4100</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d8/d1/mndstry_8c-source.html#l00027">_DestroyMenu()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00075">BEGINATOMICRECV</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00081">ENDATOMICRECV</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, and <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00452">ValidateHMENUMODIFY</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/editec_8c-source.html#l00548">ECMenu()</a>, <a class="el" href="../../d2/d9/client_2help_8c-source.html#l00348">HelpMenu()</a>, <a class="el" href="../../d1/d8/dlgbegin_8c-source.html#l00553">InternalCreateDialog()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02735">MDICompleteChildCreation()</a>, <a class="el" href="../../d0/d8/clmenu_8c-source.html#l00176">MenuLoadChicagoTemplates()</a>, and <a class="el" href="../../d0/d8/clmenu_8c-source.html#l00029">MenuLoadWinTemplates()</a>.
<p>
<pre class="fragment"><div>04102 {
04103     <a class="code" href="../../d1/d1/structtagMENU.html">PMENU</a> pmenu;
04104 
04105     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a5">BEGINATOMICRECV</a>(BOOL, FALSE);
04106 
04107     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a62">ValidateHMENUMODIFY</a>(pmenu, hmenu);
04108 
04109     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1887">_DestroyMenu</a>(pmenu);
04110 
04111     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserDestroyMenu"</span>);
04112     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a6">ENDATOMICRECV</a>();
04113 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a68" doxytag="ntuser.h::NtUserDestroyWindow" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserDestroyWindow           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hwnd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04115">4115</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00110">BEGINRECV_HWND</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00120">ENDRECV_HWND</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, and <a class="el" href="../../d5/d7/createw_8c-source.html#l01591">xxxDestroyWindow()</a>.
<p>
Referenced by <a class="el" href="../../d7/d4/connect_8c-source.html#l00607">ConnectConv()</a>, <a class="el" href="../../d0/d3/ddemlcli_8c-source.html#l00196">DdeUninitialize()</a>, <a class="el" href="../../d0/d9/imectl_8c-source.html#l01157">DestroyIMEUI()</a>, <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l01036">DialogBox2()</a>, <a class="el" href="../../d1/d8/dlgbegin_8c-source.html#l00553">InternalCreateDialog()</a>, <a class="el" href="../../d0/d3/ddemlcli_8c-source.html#l00065">InternalDdeInitialize()</a>, <a class="el" href="../../d4/d3/ddemlwp_8c-source.html#l00059">ProcessDDEMLInitiate()</a>, <a class="el" href="../../d9/d4/reader_8c-source.html#l00141">ReaderFeedback()</a>, <a class="el" href="../../d9/d4/reader_8c-source.html#l00158">ReaderWndProc()</a>, <a class="el" href="../../d7/d4/connect_8c-source.html#l01153">UnlinkConvFromOthers()</a>, <a class="el" href="../../d4/d3/comboini_8c-source.html#l00394">xxxCBNcDestroyHandler()</a>, and <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01540">xxxMDIDestroy()</a>.
<p>
<pre class="fragment"><div>04117 {
04118 
04119     <span class="comment">//</span>
04120     <span class="comment">// N.B. This function has implicit window handle translation. This</span>
04121     <span class="comment">//      operation is performed in the User server API dispatcher.</span>
04122     <span class="comment">//</span>
04123 
04124     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a14">BEGINRECV_HWND</a>(DWORD, 0, hwnd);
04125 
04126     retval  = <a class="code" href="../../d4/d1/userk_8h.html#a1575">xxxDestroyWindow</a>(pwnd);
04127 
04128     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserDestroyWindow"</span>);
04129     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a15">ENDRECV_HWND</a>();
04130 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a69" doxytag="ntuser.h::NtUserDispatchMessage" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI LRESULT NtUserDispatchMessage           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN CONST MSG *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pmsg</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04132">4132</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d3/d0/userexts_8c-source.html#l01830">msg</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00220">ProbeAndReadMessage</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00343">StubExceptionHandler</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d6/d2/ntuser_2kernel_2input_8c-source.html#l00762">xxxDispatchMessage()</a>.
<p>
Referenced by <a class="el" href="../../d1/d8/clmsg_8c-source.html#l01533">DispatchMessageWorker()</a>.
<p>
<pre class="fragment"><div>04134 {
04135     MSG <a class="code" href="../../d2/d1/userexts_8c.html#a129">msg</a>;
04136 
04137     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(LRESULT, 0);
04138 
04139     <span class="comment">/*</span>
04140 <span class="comment">     * Probe arguments</span>
04141 <span class="comment">     */</span>
04142     <span class="keywordflow">try</span> {
04143         <a class="code" href="../../d2/d1/userexts_8c.html#a129">msg</a> = <a class="code" href="../../d4/d1/userk_8h.html#a33">ProbeAndReadMessage</a>(pmsg);
04144     } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(TRUE)) {
04145         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
04146     }
04147 
04148     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1640">xxxDispatchMessage</a>(&amp;msg);
04149 
04150     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserDispatchMessage"</span>);
04151     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
04152 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a204" doxytag="ntuser.h::NtUserDragDetect" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserDragDetect           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN POINT&nbsp;</td>
          <td class="mdname" nowrap> <em>pt</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l08535">8535</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00172">BEGINRECV_HWNDLOCK</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00186">ENDRECV_HWNDLOCK</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, and <a class="el" href="../../d7/d0/dragdrop_8c-source.html#l00338">xxxDragDetect()</a>.
<p>
Referenced by <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01290">xxxTrackMouse()</a>.
<p>
<pre class="fragment"><div>08538 {
08539 
08540     <span class="comment">//</span>
08541     <span class="comment">// N.B. This function has implicit window translation and thread locking</span>
08542     <span class="comment">//      enabled. These operations are performed in the User server API</span>
08543     <span class="comment">//      dispatcher.</span>
08544     <span class="comment">//</span>
08545 
08546     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a24">BEGINRECV_HWNDLOCK</a>(DWORD, 0, hwnd);
08547 
08548     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1312">xxxDragDetect</a>(pwnd, pt);
08549 
08550     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserDragDetect"</span>);
08551     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a25">ENDRECV_HWNDLOCK</a>();
08552 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a27" doxytag="ntuser.h::NtUserDragObject" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> NtUserDragObject           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwndParent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwndFrom</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>wFmt</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG_PTR&nbsp;</td>
          <td class="mdname" nowrap> <em>dwData</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN HCURSOR&nbsp;</td>
          <td class="mdname" nowrap> <em>hcur</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l01552">1552</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00172">BEGINRECV_HWNDLOCK</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00186">ENDRECV_HWNDLOCK</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00364">ThreadLockWithPti</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00366">ThreadUnlock</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00468">ValidateHCURSOROPT</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00410">ValidateHWNDOPT</a>, and <a class="el" href="../../d7/d0/dragdrop_8c-source.html#l00026">xxxDragObject()</a>.
<p>
<pre class="fragment"><div>01558 {
01559 
01560     <span class="comment">//</span>
01561     <span class="comment">// N.B. This function has implicit window translation and thread locking</span>
01562     <span class="comment">//      enabled. These operations are performed in the User server API</span>
01563     <span class="comment">//      dispatcher.</span>
01564     <span class="comment">//</span>
01565 
01566     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwndFrom;
01567     <a class="code" href="../../d6/d1/structtagCURSOR.html">PCURSOR</a> pcur;
01568     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpwndFrom;
01569     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpcur;
01570 
01571     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a24">BEGINRECV_HWNDLOCK</a>(DWORD, 0, hwndParent);
01572 
01573     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a57">ValidateHWNDOPT</a>(pwndFrom, hwndFrom);
01574     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a65">ValidateHCURSOROPT</a>(pcur, hcur);
01575 
01576     <a class="code" href="../../d6/d0/usercli_8h.html#a38">ThreadLockWithPti</a>(ptiCurrent, pwndFrom, &amp;tlpwndFrom);
01577     <a class="code" href="../../d6/d0/usercli_8h.html#a38">ThreadLockWithPti</a>(ptiCurrent, pcur, &amp;tlpcur);
01578 
01579     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1311">xxxDragObject</a>(
01580             pwnd,
01581             pwndFrom,
01582             wFmt,
01583             dwData,
01584             pcur);
01585 
01586     <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpcur);
01587     <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndFrom);
01588 
01589     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserDragObject"</span>);
01590     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a25">ENDRECV_HWNDLOCK</a>();
01591 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a85" doxytag="ntuser.h::NtUserDrawAnimatedRects" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserDrawAnimatedRects           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN int&nbsp;</td>
          <td class="mdname" nowrap> <em>idAni</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN CONST RECT *&nbsp;</td>
          <td class="mdname" nowrap> <em>lprcFrom</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN CONST RECT *&nbsp;</td>
          <td class="mdname" nowrap> <em>lprcTo</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04812">4812</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00203">ProbeAndReadRect</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00343">StubExceptionHandler</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00362">ThreadLock</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00366">ThreadUnlock</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00410">ValidateHWNDOPT</a>, and <a class="el" href="../../d5/d8/minmax_8c-source.html#l01042">xxxDrawAnimatedRects()</a>.
<p>
<pre class="fragment"><div>04817 {
04818     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwnd;
04819     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpwnd;
04820     RECT rcFrom;
04821     RECT rcTo;
04822 
04823     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(BOOL, FALSE);
04824 
04825     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a57">ValidateHWNDOPT</a>(pwnd, hwnd);
04826 
04827     <span class="comment">/*</span>
04828 <span class="comment">     * Probe arguments</span>
04829 <span class="comment">     */</span>
04830     <span class="keywordflow">try</span> {
04831         rcFrom = <a class="code" href="../../d4/d1/userk_8h.html#a31">ProbeAndReadRect</a>(lprcFrom);
04832         rcTo = <a class="code" href="../../d4/d1/userk_8h.html#a31">ProbeAndReadRect</a>(lprcTo);
04833     } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(TRUE)) {
04834         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
04835     }
04836 
04837     <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(pwnd, &amp;tlpwnd);
04838 
04839     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1043">xxxDrawAnimatedRects</a>(
04840         pwnd,
04841         idAni,
04842         &amp;rcFrom,
04843         &amp;rcTo
04844         );
04845 
04846     <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwnd);
04847 
04848     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserDrawAnimatedRects"</span>);
04849     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
04850 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a87" doxytag="ntuser.h::NtUserDrawCaption" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserDrawCaption           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN HDC&nbsp;</td>
          <td class="mdname" nowrap> <em>hdc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN CONST RECT *&nbsp;</td>
          <td class="mdname" nowrap> <em>lprc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>flags</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04852">4852</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00172">BEGINRECV_HWNDLOCK</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00186">ENDRECV_HWNDLOCK</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00203">ProbeAndReadRect</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00343">StubExceptionHandler</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d2/d4/caption_8c-source.html#l00688">xxxDrawCaptionTemp()</a>.
<p>
Referenced by <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00446">DrawCaption()</a>.
<p>
<pre class="fragment"><div>04857 {
04858     RECT rc;
04859 
04860     <span class="comment">//</span>
04861     <span class="comment">// N.B. This function has implicit window translation and thread locking</span>
04862     <span class="comment">//      enabled. These operations are performed in the User server API</span>
04863     <span class="comment">//      dispatcher.</span>
04864     <span class="comment">//</span>
04865 
04866     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a24">BEGINRECV_HWNDLOCK</a>(DWORD, FALSE, hwnd);
04867 
04868     <span class="comment">/*</span>
04869 <span class="comment">     * Probe arguments</span>
04870 <span class="comment">     */</span>
04871     <span class="keywordflow">try</span> {
04872         rc = <a class="code" href="../../d4/d1/userk_8h.html#a31">ProbeAndReadRect</a>(lprc);
04873     } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(TRUE)) {
04874         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
04875     }
04876 
04877     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1935">xxxDrawCaptionTemp</a>(pwnd, hdc, &amp;rc, NULL, NULL, NULL, flags);
04878 
04879     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserDrawCaption"</span>);
04880     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a25">ENDRECV_HWNDLOCK</a>();
04881 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a243" doxytag="ntuser.h::NtUserDrawCaptionTemp" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserDrawCaptionTemp           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN HDC&nbsp;</td>
          <td class="mdname" nowrap> <em>hdc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN LPCRECT&nbsp;</td>
          <td class="mdname" nowrap> <em>lprc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN HFONT&nbsp;</td>
          <td class="mdname" nowrap> <em>hFont</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN HICON&nbsp;</td>
          <td class="mdname" nowrap> <em>hicon</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PUNICODE_STRING&nbsp;</td>
          <td class="mdname" nowrap> <em>pstrText</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>flags</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l09490">9490</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00148">CHARALIGN</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00251">CLEANUPRECV</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d1/d3/ex_2alpha_2raisests_8c-source.html#l00157">ExRaiseStatus()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00336">MSGERRORCLEANUP</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00203">ProbeAndReadRect</a>, <a class="el" href="../../d6/d7/ex_8h-source.html#l01417">ProbeAndReadUnicodeString</a>, <a class="el" href="../../d6/d7/ex_8h-source.html#l01209">ProbeForRead</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00058">PtiCurrent</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00343">StubExceptionHandler</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l01704">ThreadLockPool</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00364">ThreadLockWithPti</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00366">ThreadUnlock</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l01710">ThreadUnlockAndFreePool</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00468">ValidateHCURSOROPT</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00410">ValidateHWNDOPT</a>, and <a class="el" href="../../d2/d4/caption_8c-source.html#l00688">xxxDrawCaptionTemp()</a>.
<p>
Referenced by <a class="el" href="../../d1/d7/ntcftxt_8h-source.html#l01532">DrawCaptionTemp()</a>.
<p>
<pre class="fragment"><div>09498 {
09499     <a class="code" href="../../d6/d1/structtagCURSOR.html">PCURSOR</a>         pcur;
09500     <a class="code" href="../../d5/d1/struct__TL.html">TL</a>              tlpcur;
09501     RECT            rc;
09502     UNICODE_STRING  strCapture;
09503     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a>            pwnd;
09504     <a class="code" href="../../d5/d1/struct__TL.html">TL</a>              tlpwnd;
09505     <a class="code" href="../../d2/d8/structtagTHREADINFO.html">PTHREADINFO</a>     ptiCurrent;
09506     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlBuffer;
09507     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fFreeBuffer = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
09508 
09509     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(DWORD, FALSE);
09510 
09511     ptiCurrent = <a class="code" href="../../d4/d1/userk_8h.html#a9">PtiCurrent</a>();
09512 
09513     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a57">ValidateHWNDOPT</a>(pwnd, hwnd);
09514     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a65">ValidateHCURSOROPT</a>(pcur, hIcon);
09515 
09516     <span class="comment">/*</span>
09517 <span class="comment">     * Probe and capture arguments.  Capturing the text is ugly,</span>
09518 <span class="comment">     * but must be done because it is passed to GDI.</span>
09519 <span class="comment">     */</span>
09520     <span class="keywordflow">try</span> {
09521         rc = <a class="code" href="../../d4/d1/userk_8h.html#a31">ProbeAndReadRect</a>(lprc);
09522         strCapture = <a class="code" href="../../d5/d8/ex_8h.html#a26">ProbeAndReadUnicodeString</a>(pstrText);
09523         <span class="keywordflow">if</span> (strCapture.Buffer != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
09524             PWSTR pszCapture = strCapture.Buffer;
09525             <a class="code" href="../../d5/d8/ex_8h.html#a11">ProbeForRead</a>(strCapture.Buffer, strCapture.Length, CHARALIGN);
09526             strCapture.Buffer = UserAllocPoolWithQuota(strCapture.Length+<span class="keyword">sizeof</span>(UNICODE_NULL), TAG_TEXT);
09527             <span class="keywordflow">if</span> (strCapture.Buffer != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
09528                 fFreeBuffer = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
09529                 <a class="code" href="../../d4/d1/userk_8h.html#a137">ThreadLockPool</a>(ptiCurrent, strCapture.Buffer, &amp;tlBuffer);
09530                 RtlCopyMemory(strCapture.Buffer, pszCapture, strCapture.Length);
09531                 strCapture.Buffer[strCapture.Length/<span class="keyword">sizeof</span>(WCHAR)]=0;  <span class="comment">// null-terminate string</span>
09532                 strCapture.MaximumLength = strCapture.Length+<span class="keyword">sizeof</span>(UNICODE_NULL);
09533                 pstrText = &amp;strCapture;
09534             } <span class="keywordflow">else</span> {
09535                 <a class="code" href="../../d5/d8/ex_8h.html#a303">ExRaiseStatus</a>(STATUS_NO_MEMORY);
09536             }
09537         }
09538     } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(FALSE)) {
09539         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a44">MSGERRORCLEANUP</a>(0);
09540     }
09541 
09542     <a class="code" href="../../d6/d0/usercli_8h.html#a38">ThreadLockWithPti</a>(ptiCurrent, pwnd, &amp;tlpwnd);
09543     <a class="code" href="../../d6/d0/usercli_8h.html#a38">ThreadLockWithPti</a>(ptiCurrent, pcur, &amp;tlpcur);
09544 
09545     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1935">xxxDrawCaptionTemp</a>(
09546             pwnd,
09547             hdc,
09548             &amp;rc,
09549             hFont,
09550             pcur,
09551             strCapture.Buffer ? &amp;strCapture : NULL,
09552             flags);
09553 
09554     <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpcur);
09555     <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwnd);
09556 
09557     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a33">CLEANUPRECV</a>();
09558     <span class="keywordflow">if</span> (fFreeBuffer)
09559         <a class="code" href="../../d4/d1/userk_8h.html#a139">ThreadUnlockAndFreePool</a>(ptiCurrent, &amp;tlBuffer);
09560 
09561     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserDrawCaptionTemp"</span>);
09562     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
09563 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a30" doxytag="ntuser.h::NtUserDrawIconEx" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserDrawIconEx           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HDC&nbsp;</td>
          <td class="mdname" nowrap> <em>hdc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN int&nbsp;</td>
          <td class="mdname" nowrap> <em>x</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN int&nbsp;</td>
          <td class="mdname" nowrap> <em>y</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN HICON&nbsp;</td>
          <td class="mdname" nowrap> <em>hicon</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN int&nbsp;</td>
          <td class="mdname" nowrap> <em>cx</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN int&nbsp;</td>
          <td class="mdname" nowrap> <em>cy</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>istepIfAniCur</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN HBRUSH&nbsp;</td>
          <td class="mdname" nowrap> <em>hbrush</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>diFlags</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fMeta</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT <a class="el" href="../../d9/d8/struct__DRAWICONEXDATA.html">DRAWICONEXDATA</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>pdid</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l01710">1710</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d1/d8/wmicon_8c-source.html#l00093">_DrawIconEx()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00075">BEGINATOMICRECV</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02176">CURSORF_ACON</a>, <a class="el" href="../../d2/d0/inctlpan_8c-source.html#l00480">cy</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00147">DATAALIGN</a>, <a class="el" href="../../d0/d0/client_2nt6_2user_8h.html#a976">DRAWICONEXDATA</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00081">ENDATOMICRECV</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d0/d4/probe_8c-source.html#l00034">ProbeForWrite()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00343">StubExceptionHandler</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00476">ValidateHICON</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/client_8c-source.html#l01210">DrawIconEx()</a>.
<p>
<pre class="fragment"><div>01722 {
01723     <a class="code" href="../../d6/d1/structtagCURSOR.html">PCURSOR</a> picon;
01724 
01725     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a5">BEGINATOMICRECV</a>(BOOL, FALSE);
01726 
01727     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a66">ValidateHICON</a>(picon, hicon);
01728 
01729     <span class="keywordflow">if</span> (fMeta) {
01730         <span class="keywordflow">if</span> (picon-&gt;CURSORF_flags &amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a537">CURSORF_ACON</a>)
01731             picon = ((<a class="code" href="../../d1/d8/structtagACON.html">PACON</a>)picon)-&gt;aspcur[((<a class="code" href="../../d1/d8/structtagACON.html">PACON</a>)picon)-&gt;aicur[0]];
01732 
01733         <span class="comment">/*</span>
01734 <span class="comment">         * Probe arguments</span>
01735 <span class="comment">         */</span>
01736         <span class="keywordflow">try</span> {
01737             <a class="code" href="../../d5/d8/ex_8h.html#a259">ProbeForWrite</a>(pdid, <span class="keyword">sizeof</span>(*pdid), DATAALIGN);
01738 
01739             pdid-&gt;hbmMask  = picon-&gt;hbmMask;
01740             pdid-&gt;hbmColor = picon-&gt;hbmColor;
01741 
01742             pdid-&gt;cx = cx ? cx : picon-&gt;cx ;
01743             pdid-&gt;cy = <a class="code" href="../../d1/d1/inctlpan_8c.html#a3">cy</a> ? <a class="code" href="../../d1/d1/inctlpan_8c.html#a3">cy</a> : picon-&gt;cy ;
01744 
01745             retval = 1;
01746         } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(TRUE)) {
01747             <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
01748         }
01749 
01750     } <span class="keywordflow">else</span> {
01751         retval = <a class="code" href="../../d0/d9/wmicon_8c.html#a4">_DrawIconEx</a>(hdc, x, y, picon,
01752                             cx, cy,
01753                             istepIfAniCur, hbrush,
01754                             diFlags );
01755     }
01756 
01757     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserDrawIconEx"</span>);
01758     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a6">ENDATOMICRECV</a>();
01759 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a242" doxytag="ntuser.h::NtUserDrawMenuBarTemp" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI int NtUserDrawMenuBarTemp           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN HDC&nbsp;</td>
          <td class="mdname" nowrap> <em>hdc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN LPCRECT&nbsp;</td>
          <td class="mdname" nowrap> <em>lprc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN HMENU&nbsp;</td>
          <td class="mdname" nowrap> <em>hMenu</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN HFONT&nbsp;</td>
          <td class="mdname" nowrap> <em>hFont</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l09444">9444</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00172">BEGINRECV_HWNDLOCK</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00186">ENDRECV_HWNDLOCK</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00203">ProbeAndReadRect</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00343">StubExceptionHandler</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00365">ThreadLockAlwaysWithPti</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00366">ThreadUnlock</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00448">ValidateHMENU</a>, and <a class="el" href="../../d7/d1/mndraw_8c-source.html#l01972">xxxDrawMenuBarTemp()</a>.
<p>
Referenced by <a class="el" href="../../d8/d6/menuc_8c-source.html#l00313">DrawMenuBarTemp()</a>.
<p>
<pre class="fragment"><div>09450 {
09451     <span class="comment">//</span>
09452     <span class="comment">// N.B. This function has implicit window translation and thread locking</span>
09453     <span class="comment">//      enabled. These operations are performed in the User server API</span>
09454     <span class="comment">//      dispatcher.</span>
09455     <span class="comment">//</span>
09456 
09457     <a class="code" href="../../d1/d1/structtagMENU.html">PMENU</a>   pMenu;
09458     <a class="code" href="../../d5/d1/struct__TL.html">TL</a>      tlpMenu;
09459     RECT    rc;
09460 
09461 
09462     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a24">BEGINRECV_HWNDLOCK</a>(<span class="keywordtype">int</span>, 0, hwnd);
09463 
09464     <span class="comment">/*</span>
09465 <span class="comment">     * Probe and capture arguments.</span>
09466 <span class="comment">     */</span>
09467     <span class="keywordflow">try</span> {
09468         rc = <a class="code" href="../../d4/d1/userk_8h.html#a31">ProbeAndReadRect</a>(lprc);
09469     } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(FALSE)) {
09470         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
09471     }
09472 
09473     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a61">ValidateHMENU</a>(pMenu, hMenu);
09474 
09475     <a class="code" href="../../d6/d0/usercli_8h.html#a39">ThreadLockAlwaysWithPti</a>(ptiCurrent, pMenu, &amp;tlpMenu);
09476 
09477     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1934">xxxDrawMenuBarTemp</a>(
09478             pwnd,
09479             hdc,
09480             &amp;rc,
09481             pMenu,
09482             hFont);
09483 
09484     <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpMenu);
09485 
09486     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserDrawMenuBarTemp"</span>);
09487     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a25">ENDRECV_HWNDLOCK</a>();
09488 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a53" doxytag="ntuser.h::NtUserEmptyClipboard" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserEmptyClipboard           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">VOID&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l03263">3263</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, and <a class="el" href="../../d9/d7/ntuser_2kernel_2clipbrd_8c-source.html#l00851">xxxEmptyClipboard()</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/editec_8c-source.html#l02703">ECCopy()</a>, and <a class="el" href="../../d7/d3/msgbox_8c-source.html#l01176">MB_CopyToClipboard()</a>.
<p>
<pre class="fragment"><div>03265 {
03266     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(BOOL, FALSE);
03267 
03268     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1738">xxxEmptyClipboard</a>(NULL);
03269 
03270     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserEmptyClipboard"</span>);
03271     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
03272 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a70" doxytag="ntuser.h::NtUserEnableMenuItem" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserEnableMenuItem           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HMENU&nbsp;</td>
          <td class="mdname" nowrap> <em>hMenu</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>wIDEnableItem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>wEnable</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04154">4154</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00345">TESTFLAGS</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00363">ThreadLockAlways</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00366">ThreadUnlock</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00452">ValidateHMENUMODIFY</a>, and <a class="el" href="../../d6/d2/mnsys_8c-source.html#l00494">xxxEnableMenuItem()</a>.
<p>
Referenced by <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00685">EnableMenuItem()</a>.
<p>
<pre class="fragment"><div>04158 {
04159     <a class="code" href="../../d1/d1/structtagMENU.html">PMENU</a> pmenu;
04160     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlmenu;
04161 
04162     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(BOOL, -1);
04163 
04164     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a46">TESTFLAGS</a>(wEnable, MF_VALID);
04165 
04166     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a62">ValidateHMENUMODIFY</a>(pmenu, hMenu);
04167 
04168     <a class="code" href="../../d6/d0/usercli_8h.html#a37">ThreadLockAlways</a>(pmenu, &amp;tlmenu);
04169     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1889">xxxEnableMenuItem</a>(
04170             pmenu,
04171             wIDEnableItem,
04172             wEnable);
04173     <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlmenu);
04174 
04175     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserEnableMenuItem"</span>);
04176     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
04177 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a76" doxytag="ntuser.h::NtUserEnableScrollBar" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserEnableScrollBar           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>wSBflags</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>wArrows</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04344">4344</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00188">BEGINRECV_HWNDLOCK_ND</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00204">ENDRECV_HWNDLOCK_ND</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00352">LIMITVALUE</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, and <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00392">xxxEnableScrollBar()</a>.
<p>
<pre class="fragment"><div>04348 {
04349 
04350     <span class="comment">//</span>
04351     <span class="comment">// N.B. This function has implicit window translation and thread locking</span>
04352     <span class="comment">//      enabled. These operations are performed in the User server API</span>
04353     <span class="comment">//      dispatcher.</span>
04354     <span class="comment">//</span>
04355 
04356     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a26">BEGINRECV_HWNDLOCK_ND</a>(BOOL, FALSE, hwnd);
04357 
04358     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a47">LIMITVALUE</a>(wSBflags, SB_MAX, <span class="stringliteral">"EnableScrollBar"</span>);
04359 
04360     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1424">xxxEnableScrollBar</a>(
04361             pwndND,
04362             wSBflags,
04363             wArrows);
04364 
04365     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserEnableScrollBar"</span>);
04366     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a27">ENDRECV_HWNDLOCK_ND</a>();
04367 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a32" doxytag="ntuser.h::NtUserEndDeferWindowPosEx" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserEndDeferWindowPosEx           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HDWP&nbsp;</td>
          <td class="mdname" nowrap> <em>hWinPosInfo</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fAsync</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l01865">1865</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00363">ThreadLockAlways</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00366">ThreadUnlock</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00488">ValidateHDWP</a>, and <a class="el" href="../../d3/d7/swp_8c-source.html#l04773">xxxEndDeferWindowPosEx()</a>.
<p>
Referenced by <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00711">ArrangeWindows()</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l02901">EndDeferWindowPos()</a>, <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00685">MDIActivateDlgSize()</a>, and <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01420">xxxMDINext()</a>.
<p>
<pre class="fragment"><div>01868 {
01869     <a class="code" href="../../d8/d6/structtagSMWP.html">PSMWP</a> psmwp;
01870     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpsmp;
01871 
01872     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(BOOL, FALSE);
01873 
01874     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a69">ValidateHDWP</a>(psmwp, hWinPosInfo);
01875 
01876     <a class="code" href="../../d6/d0/usercli_8h.html#a37">ThreadLockAlways</a>(psmwp, &amp;tlpsmp);
01877 
01878     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1620">xxxEndDeferWindowPosEx</a>(
01879             psmwp,
01880             fAsync);
01881 
01882     <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpsmp);
01883 
01884     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserEndDeferWindowPosEx"</span>);
01885     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
01886 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a93" doxytag="ntuser.h::NtUserEndMenu" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserEndMenu           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">VOID&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05008">5008</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d6/d2/ntuser_2kernel_2input_8c-source.html#l00981">_PostMessage()</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03204">tagMENUSTATE::fInsideMenuLoop</a>, <a class="el" href="../../d3/d6/ntuser_2kernel_2menu_8c-source.html#l00232">GetMenuStateWindow()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03349">tagTHREADINFO::pMenuState</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00058">PtiCurrent</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l01119">TRACEVOID</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
<pre class="fragment"><div>05009 {
05010     <a class="code" href="../../d2/d8/structtagTHREADINFO.html">PTHREADINFO</a> ptiCurrent;
05011     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwnd;
05012 
05013     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(BOOL, FALSE);
05014 
05015     ptiCurrent = <a class="code" href="../../d4/d1/userk_8h.html#a9">PtiCurrent</a>();
05016 
05017     <span class="comment">/*</span>
05018 <span class="comment">     * The menu might be in the middle of some callback, so calling xxxEndMenu</span>
05019 <span class="comment">     *  directly might screw things up. So we post it a message to signal it to</span>
05020 <span class="comment">     *  go away at a good moment</span>
05021 <span class="comment">     */</span>
05022     <span class="keywordflow">if</span> (ptiCurrent-&gt;<a class="code" href="../../d2/d8/structtagTHREADINFO.html#o21">pMenuState</a> != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
05023         pwnd = <a class="code" href="../../d4/d1/userk_8h.html#a1359">GetMenuStateWindow</a>(ptiCurrent-&gt;<a class="code" href="../../d2/d8/structtagTHREADINFO.html#o21">pMenuState</a>);
05024 
05025         <span class="keywordflow">if</span> (pwnd != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
05026             <a class="code" href="../../d4/d1/userk_8h.html#a1642">_PostMessage</a>(pwnd, MN_ENDMENU, 0, 0);
05027         } <span class="keywordflow">else</span> {
05028             <span class="comment">/*</span>
05029 <span class="comment">             * Is this menu messed up?</span>
05030 <span class="comment">             */</span>
05031             UserAssert(pwnd != NULL);
05032             ptiCurrent-&gt;<a class="code" href="../../d2/d8/structtagTHREADINFO.html#o21">pMenuState</a>-&gt;<a class="code" href="../../d4/d1/structtagMENUSTATE.html#o3">fInsideMenuLoop</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
05033         }
05034     }
05035 
05036     retval = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
05037 
05038     <a class="code" href="../../d4/d1/userk_8h.html#a94">TRACEVOID</a>(<span class="stringliteral">"NtUserEndMenu"</span>);
05039     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
05040 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a152" doxytag="ntuser.h::NtUserEndPaint" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserEndPaint           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN CONST PAINTSTRUCT *&nbsp;</td>
          <td class="mdname" nowrap> <em>lpPaint</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06575">6575</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00172">BEGINRECV_HWNDLOCK</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00186">ENDRECV_HWNDLOCK</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00311">ProbeAndReadPaintStruct</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00343">StubExceptionHandler</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d4/d1/userk_8h.html#a1711">xxxEndPaint()</a>.
<p>
Referenced by <a class="el" href="../../d9/d0/btnctl_8c-source.html#l01338">ButtonWndProcWorker()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l00207">ComboBoxWndProcWorker()</a>, <a class="el" href="../../d7/d0/lb1_8c-source.html#l00032">ListBoxWndProcWorker()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l03457">MLEditWndProc()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l02520">SLEditWndProc()</a>, and <a class="el" href="../../d6/d4/statctl_8c-source.html#l00840">StaticWndProcWorker()</a>.
<p>
<pre class="fragment"><div>06578 {
06579     PAINTSTRUCT ps;
06580 
06581     <span class="comment">//</span>
06582     <span class="comment">// N.B. This function has implicit window handle translation. This</span>
06583     <span class="comment">//      operation is performed in the User server API dispatcher.</span>
06584     <span class="comment">//</span>
06585 
06586     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a24">BEGINRECV_HWNDLOCK</a>(BOOL, FALSE, hwnd);
06587 
06588     <span class="comment">/*</span>
06589 <span class="comment">     * Probe arguments</span>
06590 <span class="comment">     */</span>
06591     <span class="keywordflow">try</span> {
06592         ps = <a class="code" href="../../d4/d1/userk_8h.html#a40">ProbeAndReadPaintStruct</a>(lpPaint);
06593     } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(TRUE)) {
06594         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
06595     }
06596 
06597     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1711">xxxEndPaint</a>(pwnd, &amp;ps);
06598 
06599     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserEndPaint"</span>);
06600     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a25">ENDRECV_HWNDLOCK</a>();
06601 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a226" doxytag="ntuser.h::NtUserEnumDisplayDevices" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI NTSTATUS NtUserEnumDisplayDevices           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PUNICODE_STRING&nbsp;</td>
          <td class="mdname" nowrap> <em>pstrDeviceName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>iDevNum</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN OUT LPDISPLAY_DEVICEW&nbsp;</td>
          <td class="mdname" nowrap> <em>lpDisplayDevice</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwFlags</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l09312">9312</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d4/d7/propapi_8h-source.html#l00043">dwFlags</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00464">gpDispInfo</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02074">tagMONITOR::hDev</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02095">tagDISPLAYINFO::pmdev</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02202">tagDISPLAYINFO::pMonitorPrimary</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d0/d9/ntosdef_8h.html#a76a70">UserMode</a>, and <a class="el" href="../../d0/d6/desktop_8c-source.html#l03136">xxxUserResetDisplayDevice()</a>.
<p>
Referenced by <a class="el" href="../../d1/d7/ntcftxt_8h-source.html#l01102">EnumDisplayDevices()</a>.
<p>
<pre class="fragment"><div>09317 {
09318     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(NTSTATUS, STATUS_UNSUCCESSFUL);
09319 
09320     <span class="comment">//</span>
09321     <span class="comment">// Update the list of devices.</span>
09322     <span class="comment">// If the function returns FALSE (retry update), then we must</span>
09323     <span class="comment">// disable the current hdev, call back, and reanable the hdev.</span>
09324     <span class="comment">//</span>
09325 
09326     <span class="keywordflow">if</span> (DrvUpdateGraphicsDeviceList(FALSE, FALSE) == <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>) {
09327 
09328         <span class="keywordflow">if</span> (DrvDisableMDEV(<a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a179">gpDispInfo</a>-&gt;<a class="code" href="../../d9/d3/structtagDISPLAYINFO.html#o1">pmdev</a>, TRUE)) {
09329 
09330             DrvUpdateGraphicsDeviceList(TRUE, FALSE);
09331 
09332             DrvEnableMDEV(<a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a179">gpDispInfo</a>-&gt;<a class="code" href="../../d9/d3/structtagDISPLAYINFO.html#o1">pmdev</a>, TRUE);
09333 
09334             <span class="comment">//</span>
09335             <span class="comment">// Repaint the screen</span>
09336             <span class="comment">//</span>
09337 
09338             <a class="code" href="../../d9/d6/desktop_8c.html#a26">xxxUserResetDisplayDevice</a>();
09339         }
09340     }
09341 
09342     <span class="comment">/*</span>
09343 <span class="comment">     * Address checking, etc., occurs in GRE.</span>
09344 <span class="comment">     */</span>
09345 
09346     retval = DrvEnumDisplayDevices(pstrDeviceName,
09347                                    <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a179">gpDispInfo</a>-&gt;<a class="code" href="../../d9/d3/structtagDISPLAYINFO.html#o12">pMonitorPrimary</a>-&gt;<a class="code" href="../../d0/d2/structtagMONITOR.html#o8">hDev</a>,
09348                                    iDevNum,
09349                                    lpDisplayDevice,
09350                                    dwFlags,
09351                                    UserMode);
09352     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserEnumDisplayDevices"</span>);
09353     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
09354 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a251" doxytag="ntuser.h::NtUserEnumDisplayMonitors" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserEnumDisplayMonitors           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HDC&nbsp;</td>
          <td class="mdname" nowrap> <em>hdc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN LPCRECT&nbsp;</td>
          <td class="mdname" nowrap> <em>lprcClip</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN MONITORENUMPROC&nbsp;</td>
          <td class="mdname" nowrap> <em>lpfnEnum</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>dwData</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l13138">13138</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00203">ProbeAndReadRect</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00343">StubExceptionHandler</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d2/d4/multimon_8c-source.html#l00099">xxxEnumDisplayMonitors()</a>.
<p>
Referenced by <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00711">ArrangeWindows()</a>.
<p>
<pre class="fragment"><div>13143 {
13144     RECT    rc;
13145     LPRECT  lprc = (LPRECT) lprcClip;
13146 
13147     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(BOOL, FALSE);
13148 
13149     <span class="comment">/*</span>
13150 <span class="comment">     * Probe arguments</span>
13151 <span class="comment">     */</span>
13152     <span class="keywordflow">if</span> (ARGUMENT_PRESENT(lprc)) {
13153         <span class="keywordflow">try</span> {
13154             rc = <a class="code" href="../../d4/d1/userk_8h.html#a31">ProbeAndReadRect</a>(lprc);
13155             lprc = &amp;rc;
13156         } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(TRUE)) {
13157             <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
13158         }
13159     }
13160 
13161     retval = <a class="code" href="../../d4/d1/userk_8h.html#a2076">xxxEnumDisplayMonitors</a>(
13162             hdc,
13163             lprc,
13164             lpfnEnum,
13165             dwData,
13166             FALSE);
13167 
13168     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserEnumDisplayMonitors"</span>);
13169     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
13170 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a252" doxytag="ntuser.h::NtUserEnumDisplaySettings" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI NTSTATUS NtUserEnumDisplaySettings           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PUNICODE_STRING&nbsp;</td>
          <td class="mdname" nowrap> <em>pstrDeviceName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>iModeNum</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT LPDEVMODEW&nbsp;</td>
          <td class="mdname" nowrap> <em>lpDevMode</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwFlags</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l09357">9357</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d4/d7/propapi_8h-source.html#l00043">dwFlags</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00464">gpDispInfo</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02074">tagMONITOR::hDev</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02202">tagDISPLAYINFO::pMonitorPrimary</a>, and <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>.
<p>
Referenced by <a class="el" href="../../d1/d7/ntcftxt_8h-source.html#l01211">EnumDisplaySettingsEx()</a>, and <a class="el" href="../../d8/d3/server_2private_8c-source.html#l02089">InitializeFullScreen()</a>.
<p>
<pre class="fragment"><div>09362 {
09363     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(NTSTATUS, STATUS_UNSUCCESSFUL);
09364 
09365     <span class="comment">/*</span>
09366 <span class="comment">     * Address checking, etc., occurs in GRE.</span>
09367 <span class="comment">     */</span>
09368 
09369     retval = DrvEnumDisplaySettings(pstrDeviceName,
09370                                     <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a179">gpDispInfo</a>-&gt;<a class="code" href="../../d9/d3/structtagDISPLAYINFO.html#o12">pMonitorPrimary</a>-&gt;<a class="code" href="../../d0/d2/structtagMONITOR.html#o8">hDev</a>,
09371                                     iModeNum,
09372                                     lpDevMode,
09373                                     dwFlags);
09374 
09375     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserEnumDisplaySettings"</span>);
09376     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
09377 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a44" doxytag="ntuser.h::NtUserEvent" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> NtUserEvent           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN <a class="el" href="../../d7/d4/structtagEVENT__PACKET.html">PEVENT_PACKET</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pep</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l02956">2956</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00147">DATAALIGN</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d1/d8/w32_2ntuser_2kernel_2event_8c.html#a2">pep</a>, <a class="el" href="../../d6/d7/ex_8h-source.html#l01209">ProbeForRead</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00343">StubExceptionHandler</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, and <a class="el" href="../../d2/d7/w32_2ntuser_2kernel_2event_8c-source.html#l00120">xxxCsEvent()</a>.
<p>
Referenced by <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00086">Event()</a>.
<p>
<pre class="fragment"><div>02958 {
02959     WORD cbEventData;
02960     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(DWORD, 0);
02961 
02962     <span class="comment">/*</span>
02963 <span class="comment">     * Probe arguments</span>
02964 <span class="comment">     */</span>
02965     <span class="keywordflow">try</span> {
02966         <a class="code" href="../../d5/d8/ex_8h.html#a11">ProbeForRead</a>(pep, <span class="keyword">sizeof</span>(*pep), DATAALIGN);
02967         <span class="comment">/*</span>
02968 <span class="comment">         * capture so that another thread can't change it after the probe.</span>
02969 <span class="comment">         */</span>
02970         cbEventData = <a class="code" href="../../d1/d8/w32_2ntuser_2kernel_2event_8c.html#a2">pep</a>-&gt;cbEventData;
02971         <a class="code" href="../../d5/d8/ex_8h.html#a11">ProbeForRead</a>(&amp;<a class="code" href="../../d1/d8/w32_2ntuser_2kernel_2event_8c.html#a2">pep</a>-&gt;Data, cbEventData, DATAALIGN);
02972     } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(FALSE)) {
02973         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
02974     }
02975 
02976     <span class="comment">/*</span>
02977 <span class="comment">     * The buffer is captured within a try/except in xxxCsEvent.</span>
02978 <span class="comment">     */</span>
02979 
02980     retval = <a class="code" href="../../d1/d8/w32_2ntuser_2kernel_2event_8c.html#a9">xxxCsEvent</a>((<a class="code" href="../../d7/d4/structtagEVENT__PACKET.html">PEVENT_PACKET</a>)pep, cbEventData);
02981 
02982     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserEvent"</span>);
02983     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
02984 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a153" doxytag="ntuser.h::NtUserExcludeUpdateRgn" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI int NtUserExcludeUpdateRgn           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HDC&nbsp;</td>
          <td class="mdname" nowrap> <em>hDC</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06603">6603</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d9/d8/update_8c-source.html#l01462">_ExcludeUpdateRgn()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00110">BEGINRECV_HWND</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00120">ENDRECV_HWND</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>.
<p>
<pre class="fragment"><div>06606 {
06607 
06608     <span class="comment">//</span>
06609     <span class="comment">// N.B. This function has implicit window handle translation. This</span>
06610     <span class="comment">//      operation is performed in the User server API dispatcher.</span>
06611     <span class="comment">//</span>
06612 
06613     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a14">BEGINRECV_HWND</a>(<span class="keywordtype">int</span>, ERROR, hwnd);
06614 
06615     <span class="keywordflow">if</span> (hdc == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
06616         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
06617 
06618     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1676">_ExcludeUpdateRgn</a>(hdc, pwnd);
06619 
06620     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserExcludeUpdateRgn"</span>);
06621     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a15">ENDRECV_HWND</a>();
06622 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a45" doxytag="ntuser.h::NtUserFillWindow" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserFillWindow           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwndBrush</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwndPaint</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN HDC&nbsp;</td>
          <td class="mdname" nowrap> <em>hdc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN HBRUSH&nbsp;</td>
          <td class="mdname" nowrap> <em>hbr</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l02986">2986</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00172">BEGINRECV_HWNDLOCK</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00186">ENDRECV_HWNDLOCK</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00364">ThreadLockWithPti</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00366">ThreadUnlock</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00410">ValidateHWNDOPT</a>, and <a class="el" href="../../d0/d2/paint_8c-source.html#l00033">xxxFillWindow()</a>.
<p>
<pre class="fragment"><div>02991 {
02992 
02993     <span class="comment">//</span>
02994     <span class="comment">// N.B. This function has implicit window translation and thread locking</span>
02995     <span class="comment">//      enabled. These operations are performed in the User server API</span>
02996     <span class="comment">//      dispatcher.</span>
02997     <span class="comment">//</span>
02998 
02999     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwndBrush;
03000     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpwndBrush;
03001 
03002     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a24">BEGINRECV_HWNDLOCK</a>(DWORD, 0, hwndPaint);
03003 
03004     <span class="keywordflow">if</span> (hdc == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
03005         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
03006 
03007     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a57">ValidateHWNDOPT</a>(pwndBrush, hwndBrush);
03008 
03009     <a class="code" href="../../d6/d0/usercli_8h.html#a38">ThreadLockWithPti</a>(ptiCurrent, pwndBrush, &amp;tlpwndBrush);
03010 
03011     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1563">xxxFillWindow</a>(
03012             pwndBrush,
03013             pwnd,
03014             hdc,
03015             hbr);
03016 
03017     <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndBrush);
03018 
03019     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserFillWindow"</span>);
03020     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a25">ENDRECV_HWNDLOCK</a>();
03021 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a174" doxytag="ntuser.h::NtUserFindExistingCursorIcon" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI HCURSOR NtUserFindExistingCursorIcon           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PUNICODE_STRING&nbsp;</td>
          <td class="mdname" nowrap> <em>pstrModName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PUNICODE_STRING&nbsp;</td>
          <td class="mdname" nowrap> <em>pstrResName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d9/d1/structtagCURSORFIND.html">PCURSORFIND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pcfSearch</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l07243">7243</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d8/d3/loadbits_8c-source.html#l00357">_FindExistingCursorIcon()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00094">BEGINRECV_SHARED</a>, <a class="el" href="../../d0/d0/client_2nt6_2user_8h.html#a1072">CURSORFIND</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00099">ENDRECV_SHARED</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02209">tagCURSORFIND::hcur</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00549">ProbeAndReadCursorFind</a>, <a class="el" href="../../d6/d7/ex_8h-source.html#l01417">ProbeAndReadUnicodeString</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00612">ProbeForReadUnicodeStringBuffer</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00654">ProbeForReadUnicodeStringBufferOrId</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01512">PtoH</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00343">StubExceptionHandler</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d2/d9/w32_2ntuser_2kernel_2atom_8c-source.html#l00062">UserFindAtom()</a>, and <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00468">ValidateHCURSOROPT</a>.
<p>
Referenced by <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l01102">FindExistingCursorIcon()</a>.
<p>
<pre class="fragment"><div>07247 {
07248     ATOM           atomModName;
07249     UNICODE_STRING strModName;
07250     UNICODE_STRING strResName;
07251     <a class="code" href="../../d6/d1/structtagCURSOR.html">PCURSOR</a>        pcurSrc;
07252     <a class="code" href="../../d9/d1/structtagCURSORFIND.html">CURSORFIND</a>     cfSearch;
07253 
07254     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a9">BEGINRECV_SHARED</a>(HCURSOR, NULL);
07255 
07256     <span class="comment">/*</span>
07257 <span class="comment">     * Probe arguments</span>
07258 <span class="comment">     */</span>
07259     <span class="keywordflow">try</span> {
07260 
07261         cfSearch = <a class="code" href="../../d4/d1/userk_8h.html#a57">ProbeAndReadCursorFind</a>(pcfSearch);
07262 
07263         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a65">ValidateHCURSOROPT</a>(pcurSrc, cfSearch.<a class="code" href="../../d9/d1/structtagCURSORFIND.html#o0">hcur</a>);
07264 
07265         strModName = <a class="code" href="../../d5/d8/ex_8h.html#a26">ProbeAndReadUnicodeString</a>(pstrModName);
07266         <a class="code" href="../../d4/d1/userk_8h.html#a61">ProbeForReadUnicodeStringBuffer</a>(strModName);
07267 
07268         strResName = <a class="code" href="../../d5/d8/ex_8h.html#a26">ProbeAndReadUnicodeString</a>(pstrResName);
07269         <a class="code" href="../../d4/d1/userk_8h.html#a63">ProbeForReadUnicodeStringBufferOrId</a>(strResName);
07270 
07271     } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(TRUE)) {
07272         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
07273     }
07274 
07275     <span class="comment">/*</span>
07276 <span class="comment">     * The ModName buffer is client-side, but UserFindAtom protects</span>
07277 <span class="comment">     * access.</span>
07278 <span class="comment">     */</span>
07279 
07280     atomModName = <a class="code" href="../../d4/d1/userk_8h.html#a1298">UserFindAtom</a>(strModName.Buffer);
07281 
07282     <span class="keywordflow">if</span> (atomModName) {
07283 
07284         <span class="comment">/*</span>
07285 <span class="comment">         * The ResName buffer is client-side.  FindExistincCursorIcon</span>
07286 <span class="comment">         * protects access.</span>
07287 <span class="comment">         */</span>
07288         retval = (HCURSOR)<a class="code" href="../../d4/d1/userk_8h.html#a1116">_FindExistingCursorIcon</a>(atomModName,
07289                                                   &amp;strResName,
07290                                                   pcurSrc,
07291                                                   &amp;cfSearch);
07292 
07293         retval = (HCURSOR)<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a448">PtoH</a>((<a class="code" href="../../d6/d1/structtagCURSOR.html">PCURSOR</a>)retval);
07294 
07295     } <span class="keywordflow">else</span> {
07296 
07297         retval = 0;
07298     }
07299 
07300 
07301     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserFindExistingCursorIcon"</span>);
07302     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a10">ENDRECV_SHARED</a>();
07303 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a211" doxytag="ntuser.h::NtUserFindWindowEx" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI HWND NtUserFindWindowEx           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwndParent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwndChild</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PUNICODE_STRING pstrClassName&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PUNICODE_STRING pstrWindowName&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwType</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a88" doxytag="ntuser.h::NtUserFlashWindowEx" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserFlashWindowEx           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PFLASHWINFO&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pfwi</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l13325">13325</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00062">DBG_THREADLOCK_END</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00061">DBG_THREADLOCK_START</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d3/d9/nt6_2user32_8def-source.html#l00214">FlashWindowEx</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d6/d7/ex_8h-source.html#l01431">ProbeAndReadStructure</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00058">PtiCurrent</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00343">StubExceptionHandler</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00365">ThreadLockAlwaysWithPti</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00366">ThreadUnlock</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00120">ValidateHwnd</a>, and <a class="el" href="../../d0/d7/kernel_2winmgr_8c-source.html#l00027">xxxFlashWindow()</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/client_8c-source.html#l03050">FlashWindow()</a>.
<p>
<pre class="fragment"><div>13327 {
13328     FLASHWINFO fwiInternal;
13329     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpwnd;
13330     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwnd;
13331 
13332     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(BOOL, FALSE);
13333     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a1">DBG_THREADLOCK_START</a>(FlashWindowEx);
13334 
13335     <span class="comment">/*</span>
13336 <span class="comment">     * Probe arguments</span>
13337 <span class="comment">     */</span>
13338     <span class="keywordflow">try</span> {
13339         fwiInternal = <a class="code" href="../../d5/d8/ex_8h.html#a27">ProbeAndReadStructure</a>(pfwi, FLASHWINFO);
13340 
13341     } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(TRUE)) {
13342         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
13343     }
13344 
13345     <span class="keywordflow">if</span> ((pwnd = <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(fwiInternal.hwnd)) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> ||
13346         fwiInternal.cbSize != <span class="keyword">sizeof</span>(FLASHWINFO) ||
13347         fwiInternal.dwFlags &amp; ~FLASHW_VALID) {
13348 
13349         RIPMSG0(RIP_WARNING, <span class="stringliteral">"NtUserFlashWindowEx: Invalid Parameter"</span>);
13350         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(ERROR_INVALID_PARAMETER);
13351     }
13352     <span class="keywordflow">else</span> {
13353         <a class="code" href="../../d6/d0/usercli_8h.html#a39">ThreadLockAlwaysWithPti</a>(<a class="code" href="../../d4/d1/userk_8h.html#a9">PtiCurrent</a>(), pwnd, &amp;tlpwnd);
13354         retval = <a class="code" href="../../d9/d7/kernel_2winmgr_8c.html#a2">xxxFlashWindow</a>(pwnd,
13355                             MAKELONG(fwiInternal.dwFlags, fwiInternal.uCount),
13356                             fwiInternal.dwTimeout);
13357         <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwnd);
13358     }
13359 
13360     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a2">DBG_THREADLOCK_END</a>(FlashWindowEx);
13361 
13362     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserFlashWindowEx"</span>);
13363     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
13364 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a238" doxytag="ntuser.h::NtUserGetAltTabInfo" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserGetAltTabInfo           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN int&nbsp;</td>
          <td class="mdname" nowrap> <em>iItem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN OUT PALTTABINFO&nbsp;</td>
          <td class="mdname" nowrap> <em>pati</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT LPWSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>lpszItemText</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>cchItemText</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>bAnsi</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a235" doxytag="ntuser.h::NtUserGetAncestor" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI HWND NtUserGetAncestor           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>gaFlags</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l03698">3698</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d7/d6/winable2_8c-source.html#l00460">_GetAncestor()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00144">BEGINRECV_HWND_SHARED</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00154">ENDRECV_HWND_SHARED</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01512">PtoH</a>, and <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>.
<p>
<pre class="fragment"><div>03699 {
03700     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a20">BEGINRECV_HWND_SHARED</a>(HWND, NULL, hwndChild);
03701 
03702     <span class="keywordflow">if</span> ((gaFlags &lt; GA_MIN) || (gaFlags &gt; GA_MAX)) {
03703         RIPERR3(ERROR_INVALID_PARAMETER, RIP_WARNING,
03704                 <span class="stringliteral">"NtUserGetAncestor: Invalid gaFlags parameter %d, not %d - %d"</span>,
03705                  gaFlags, GA_MIN, GA_MAX);
03706         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
03707     }
03708     retval = (HWND)<a class="code" href="../../d6/d7/winable2_8c.html#a3">_GetAncestor</a>(pwnd, gaFlags);
03709     retval = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a448">PtoH</a>((PVOID)retval);
03710 
03711     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserGetAncestor"</span>);
03712     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a21">ENDRECV_HWND_SHARED</a>();
03713 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a90" doxytag="ntuser.h::NtUserGetAsyncKeyState" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a13">SHORT</a> NtUserGetAsyncKeyState           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN int&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>vKey</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04907">4907</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d8/d8/keyboard_8c-source.html#l00087">_GetAsyncKeyState()</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l00542">_CLIENTINFO::afAsyncKeyState</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l00543">_CLIENTINFO::afAsyncKeyStateRecentDown</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03389">tagTHREADINFO::amdesk</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00094">BEGINRECV_SHARED</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00496">CBASYNCKEYCACHE</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l00541">_CLIENTINFO::dwAsyncKeyCache</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l02718">tagWINDOWSTATION::dwWSF_Flags</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00099">ENDRECV_SHARED</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00576">gafAsyncKeyState</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00577">gafAsyncKeyStateRecentDown</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00051">gpsi</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00091">gptiForeground</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00456">grpdeskRitInput</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03329">tagTHREADINFO::pClientInfo</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03319">tagTHREADINFO::ppi</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00084">PpiCurrent</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00059">PtiCurrentShared</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03327">tagTHREADINFO::rpdesk</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l02648">tagDESKTOP::rpwinstaParent</a>, <a class="el" href="../../d9/d5/sertl_8c-source.html#l03344">RtlAreAnyAccessesGranted()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00062">SHORT</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, and <a class="el" href="../../d5/d0/userk_8h-source.html#l02704">WSF_NOIO</a>.
<p>
Referenced by <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00468">GetAsyncKeyState()</a>.
<p>
<pre class="fragment"><div>04909 {
04910 
04911     <a class="code" href="../../d2/d8/structtagTHREADINFO.html">PTHREADINFO</a> ptiCurrent;
04912     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a9">BEGINRECV_SHARED</a>(SHORT, 0);
04913 
04914 
04915     ptiCurrent = <a class="code" href="../../d4/d1/userk_8h.html#a10">PtiCurrentShared</a>();
04916     UserAssert(ptiCurrent);
04917 
04918     <span class="comment">/*</span>
04919 <span class="comment">     * Don't allow other processes to spy on other deskops or a process</span>
04920 <span class="comment">     * to spy on the foreground if the desktop does not allow input spying</span>
04921 <span class="comment">     */</span>
04922     <span class="keywordflow">if</span> ((ptiCurrent-&gt;<a class="code" href="../../d2/d8/structtagTHREADINFO.html#o6">rpdesk</a> != <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a176">grpdeskRitInput</a>) ||
04923             ( ((<a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a25">gptiForeground</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) || (<a class="code" href="../../d4/d1/userk_8h.html#a16">PpiCurrent</a>() != <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a25">gptiForeground</a>-&gt;<a class="code" href="../../d2/d8/structtagTHREADINFO.html#o2">ppi</a>)) &amp;&amp;
04924               !<a class="code" href="../../d8/d6/sertl_8c.html#a69">RtlAreAnyAccessesGranted</a>(ptiCurrent-&gt;<a class="code" href="../../d2/d8/structtagTHREADINFO.html#o48">amdesk</a>, (DESKTOP_HOOKCONTROL | DESKTOP_JOURNALRECORD)))) {
04925         RIPERR0(ERROR_ACCESS_DENIED, RIP_WARNING, <span class="stringliteral">"GetAysncKeyState: not"</span>
04926                 <span class="stringliteral">" foreground desktop or no desktop hooking (input spying)"</span>);
04927         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
04928     }
04929     UserAssert(!(ptiCurrent-&gt;<a class="code" href="../../d2/d8/structtagTHREADINFO.html#o6">rpdesk</a>-&gt;<a class="code" href="../../d0/d3/structtagDESKTOP.html#o3">rpwinstaParent</a>-&gt;<a class="code" href="../../d4/d9/structtagWINDOWSTATION.html#o3">dwWSF_Flags</a> &amp; WSF_NOIO));
04930 
04931     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1714">_GetAsyncKeyState</a>(vKey);
04932 
04933     <span class="comment">/*</span>
04934 <span class="comment">     * Update the client side key state cache.</span>
04935 <span class="comment">     */</span>
04936     ptiCurrent-&gt;<a class="code" href="../../d2/d8/structtagTHREADINFO.html#o8">pClientInfo</a>-&gt;<a class="code" href="../../d2/d2/struct__CLIENTINFO.html#o17">dwAsyncKeyCache</a> = <a class="code" href="../../d1/d8/clglobal_8c.html#a4">gpsi</a>-&gt;dwAsyncKeyCache;
04937     RtlCopyMemory(ptiCurrent-&gt;<a class="code" href="../../d2/d8/structtagTHREADINFO.html#o8">pClientInfo</a>-&gt;<a class="code" href="../../d2/d2/struct__CLIENTINFO.html#o18">afAsyncKeyState</a>,
04938                   gafAsyncKeyState,
04939                   CBASYNCKEYCACHE);
04940     RtlCopyMemory(ptiCurrent-&gt;<a class="code" href="../../d2/d8/structtagTHREADINFO.html#o8">pClientInfo</a>-&gt;<a class="code" href="../../d2/d2/struct__CLIENTINFO.html#o19">afAsyncKeyStateRecentDown</a>,
04941                   gafAsyncKeyStateRecentDown,
04942                   CBASYNCKEYCACHE);
04943 
04944     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserGetAsyncKeyState"</span>);
04945     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a10">ENDRECV_SHARED</a>();
04946 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a96" doxytag="ntuser.h::NtUserGetCaretBlinkTime" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI UINT NtUserGetCaretBlinkTime           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">VOID&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05082">5082</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00094">BEGINRECV_SHARED</a>, <a class="el" href="../../d8/d4/w32_2ntuser_2kernel_2security_8c-source.html#l00492">CheckGrantedAccess()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00099">ENDRECV_SHARED</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00794">gpepCSRSS</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00051">gpsi</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00084">PpiCurrent</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, and <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>.
<p>
<pre class="fragment"><div>05083 {
05084     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a9">BEGINRECV_SHARED</a>(UINT, 0);
05085 
05086     <span class="comment">/*</span>
05087 <span class="comment">     * Blow it off if the caller doesn't have the proper access rights.  However, allow the</span>
05088 <span class="comment">     * CSR process to use this value internally to the server.  Note that if the client</span>
05089 <span class="comment">     * tries to retrieve this value itself, the access check will function normally.</span>
05090 <span class="comment">     */</span>
05091     <span class="keywordflow">if</span> ((<a class="code" href="../../d4/d1/userk_8h.html#a16">PpiCurrent</a>()-&gt;Process != <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a299">gpepCSRSS</a>) &amp;&amp;
05092         (!<a class="code" href="../../d4/d1/userk_8h.html#a1270">CheckGrantedAccess</a>(<a class="code" href="../../d4/d1/userk_8h.html#a16">PpiCurrent</a>()-&gt;amwinsta, WINSTA_READATTRIBUTES))) {
05093         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
05094     }
05095 
05096     retval = <a class="code" href="../../d1/d8/clglobal_8c.html#a4">gpsi</a>-&gt;dtCaretBlink;
05097 
05098     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserGetCaretBlinkTime"</span>);
05099     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a10">ENDRECV_SHARED</a>();
05100 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a180" doxytag="ntuser.h::NtUserGetCaretPos" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserGetCaretPos           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">OUT LPPOINT&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>lpPoint</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l07458">7458</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00094">BEGINRECV_SHARED</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03124">tagQ::caret</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00099">ENDRECV_SHARED</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03321">tagTHREADINFO::pq</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00708">ProbeForWritePoint</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00059">PtiCurrentShared</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00343">StubExceptionHandler</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l03078">tagCARET::x</a>, and <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l03079">tagCARET::y</a>.
<p>
Referenced by <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01037">ECEnableDisableIME()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l00597">ECSize()</a>, and <a class="el" href="../../d9/d3/editec_8c-source.html#l02904">EditWndProc()</a>.
<p>
<pre class="fragment"><div>07460 {
07461 
07462     <span class="comment">//</span>
07463     <span class="comment">// N.B. This function has implicit window handle translation. This</span>
07464     <span class="comment">//      operation is performed in the User server API dispatcher.</span>
07465     <span class="comment">//</span>
07466 
07467     <a class="code" href="../../d2/d8/structtagTHREADINFO.html">PTHREADINFO</a> pti;
07468     <a class="code" href="../../d7/d4/structtagQ.html">PQ</a> pq;
07469     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a9">BEGINRECV_SHARED</a>(BOOL, FALSE);
07470 
07471     <span class="comment">/*</span>
07472 <span class="comment">     * Probe arguments</span>
07473 <span class="comment">     */</span>
07474     <span class="keywordflow">try</span> {
07475         <a class="code" href="../../d4/d1/userk_8h.html#a67">ProbeForWritePoint</a>(lpPoint);
07476 
07477         pti = <a class="code" href="../../d4/d1/userk_8h.html#a10">PtiCurrentShared</a>();
07478         pq = pti-&gt;<a class="code" href="../../d2/d8/structtagTHREADINFO.html#o3">pq</a>;
07479         lpPoint-&gt;x = pq-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o18">caret</a>.<a class="code" href="../../d6/d9/structtagCARET.html#o4">x</a>;
07480         lpPoint-&gt;y = pq-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o18">caret</a>.<a class="code" href="../../d6/d9/structtagCARET.html#o5">y</a>;
07481         retval = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
07482     } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(TRUE)) {
07483         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
07484     }
07485 
07486     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserGetCaretPos"</span>);
07487     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a10">ENDRECV_SHARED</a>();
07488 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a212" doxytag="ntuser.h::NtUserGetClassInfo" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserGetClassInfo           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HINSTANCE hInstance&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PUNICODE_STRING&nbsp;</td>
          <td class="mdname" nowrap> <em>pstrClassName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN OUT LPWNDCLASSEXW&nbsp;</td>
          <td class="mdname" nowrap> <em>lpWndClass</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT LPWSTR *&nbsp;</td>
          <td class="mdname" nowrap> <em>ppszMenuName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>bAnsi</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l08817">8817</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d3/d6/class_8c-source.html#l00678">_GetClassInfoEx()</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00147">DATAALIGN</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d6/d7/ex_8h-source.html#l01417">ProbeAndReadUnicodeString</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00654">ProbeForReadUnicodeStringBufferOrId</a>, <a class="el" href="../../d0/d4/probe_8c-source.html#l00034">ProbeForWrite()</a>, <a class="el" href="../../d6/d7/ex_8h-source.html#l01649">ProbeForWriteUlong</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00343">StubExceptionHandler</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d1/d7/ntcftxt_8h-source.html#l00079">GetClassInfo()</a>, and <a class="el" href="../../d1/d7/ntcftxt_8h-source.html#l00129">GetClassInfoEx()</a>.
<p>
<pre class="fragment"><div>08823 {
08824     UNICODE_STRING strClassName;
08825 
08826     LPWSTR pszMenuName;
08827     WNDCLASSEXW  wc;
08828     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(BOOL, FALSE);
08829 
08830     <span class="comment">/*</span>
08831 <span class="comment">     * Probe arguments</span>
08832 <span class="comment">     */</span>
08833     <span class="keywordflow">try</span> {
08834         strClassName = <a class="code" href="../../d5/d8/ex_8h.html#a26">ProbeAndReadUnicodeString</a>(pstrClassName);
08835 
08836         <span class="comment">/*</span>
08837 <span class="comment">         * The class name may either be a string or an atom.  Only</span>
08838 <span class="comment">         * probe strings.</span>
08839 <span class="comment">         */</span>
08840         <a class="code" href="../../d4/d1/userk_8h.html#a63">ProbeForReadUnicodeStringBufferOrId</a>(strClassName);
08841         <a class="code" href="../../d5/d8/ex_8h.html#a259">ProbeForWrite</a>(lpWndClass, <span class="keyword">sizeof</span>(*lpWndClass), DATAALIGN);
08842         <a class="code" href="../../d5/d8/ex_8h.html#a40">ProbeForWriteUlong</a>((PULONG)ppszMenuName);
08843         RtlCopyMemory(&amp;wc, lpWndClass, <span class="keyword">sizeof</span>(WNDCLASSEXW));
08844     } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(TRUE)) {
08845         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
08846     }
08847 
08848     <span class="comment">/*</span>
08849 <span class="comment">     * The class name buffer is client-side.</span>
08850 <span class="comment">     */</span>
08851     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1902">_GetClassInfoEx</a>(
08852                 hInstance,
08853                 (LPTSTR)strClassName.Buffer,
08854                 &amp;wc,
08855                 &amp;pszMenuName,
08856                 bAnsi);
08857 
08858     <span class="keywordflow">try</span> {
08859         RtlCopyMemory(lpWndClass, &amp;wc, <span class="keyword">sizeof</span>(WNDCLASSEXW));
08860         *ppszMenuName = pszMenuName;
08861     } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(TRUE)) {
08862         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
08863     }
08864     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserGetClassInfo"</span>);
08865     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
08866 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a213" doxytag="ntuser.h::NtUserGetClassName" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI int NtUserGetClassName           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>bReal</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN OUT PUNICODE_STRING&nbsp;</td>
          <td class="mdname" nowrap> <em>pstrClassName</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l08904">8904</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00075">ARRAY_SIZE</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01297">tagSERVERINFO::atomSysClass</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00144">BEGINRECV_HWND_SHARED</a>, <a class="el" href="../../d0/d7/halvprnt_8c-source.html#l00031">BYTE</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00154">ENDRECV_HWND_SHARED</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00819">FNID_END</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00781">FNID_START</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l08873">gaFNIDtoICLS</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00843">GETFNID</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00051">gpsi</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00364">ICLS_MAX</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d6/d7/ex_8h-source.html#l01417">ProbeAndReadUnicodeString</a>, <a class="el" href="../../d0/d4/probe_8c-source.html#l00034">ProbeForWrite()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00343">StubExceptionHandler</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d2/d9/w32_2ntuser_2kernel_2atom_8c-source.html#l00101">UserGetAtomName()</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/winmgrc_8c-source.html#l00077">GetClassNameW()</a>, and <a class="el" href="../../d1/d7/ntcftxt_8h-source.html#l01574">RealGetWindowClass()</a>.
<p>
<pre class="fragment"><div>08908 {
08909     UNICODE_STRING strClassName;
08910     ATOM atom;
08911 
08912     <span class="comment">//</span>
08913     <span class="comment">// N.B. This function has implicit window handle translation. This</span>
08914     <span class="comment">//      operation is performed in the User server API dispatcher.</span>
08915     <span class="comment">//</span>
08916 
08917     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a20">BEGINRECV_HWND_SHARED</a>(DWORD, 0, hwnd);
08918 
08919     <span class="comment">/*</span>
08920 <span class="comment">     * Probe arguments</span>
08921 <span class="comment">     */</span>
08922     <span class="keywordflow">try</span> {
08923         strClassName = <a class="code" href="../../d5/d8/ex_8h.html#a26">ProbeAndReadUnicodeString</a>(pstrClassName);
08924 <span class="preprocessor">#if defined(_X86_)</span>
08925 <span class="preprocessor"></span>        <a class="code" href="../../d5/d8/ex_8h.html#a259">ProbeForWrite</a>(strClassName.Buffer, strClassName.MaximumLength,
08926             <span class="keyword">sizeof</span>(BYTE));
08927 <span class="preprocessor">#else</span>
08928 <span class="preprocessor"></span>        <a class="code" href="../../d5/d8/ex_8h.html#a259">ProbeForWrite</a>(strClassName.Buffer, strClassName.MaximumLength,
08929             <span class="keyword">sizeof</span>(WCHAR));
08930 <span class="preprocessor">#endif</span>
08931 <span class="preprocessor"></span>
08932         atom = pwnd-&gt;pcls-&gt;atomClassName;
08933         UserAssert(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a2">ARRAY_SIZE</a>(gaFNIDtoICLS) == FNID_END - FNID_START + 1);
08934 
08935         <span class="keywordflow">if</span> (bReal) {
08936             <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwFnid;
08937             <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwClass;
08938             dwFnid = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a232">GETFNID</a>(pwnd);
08939             <span class="keywordflow">if</span> (dwFnid) {
08940                 dwFnid -= <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a191">FNID_START</a>;
08941                 <span class="keywordflow">if</span> ((dwFnid &lt; ARRAY_SIZE(gaFNIDtoICLS)) &amp;&amp; (dwFnid &gt;= 0)) {
08942                     dwClass = <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a76">gaFNIDtoICLS</a>[dwFnid];
08943                     <span class="keywordflow">if</span> (dwClass != <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a91">ICLS_MAX</a>) {
08944                         atom = <a class="code" href="../../d1/d8/clglobal_8c.html#a4">gpsi</a>-&gt;<a class="code" href="../../d2/d6/structtagSERVERINFO.html#o12">atomSysClass</a>[dwClass];
08945                     }
08946                 }
08947             }
08948         }
08949         retval = <a class="code" href="../../d4/d1/userk_8h.html#a1300">UserGetAtomName</a>(
08950             atom,
08951             strClassName.Buffer,
08952             strClassName.MaximumLength / <span class="keyword">sizeof</span>(WCHAR));
08953 
08954     } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(TRUE)) {
08955         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
08956     }
08957 
08958     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserGetClassName"</span>);
08959     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a21">ENDRECV_HWND_SHARED</a>();
08960 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a66" doxytag="ntuser.h::NtUserGetClipboardData" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI HANDLE NtUserGetClipboardData           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>fmt</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT <a class="el" href="../../d6/d5/structtagGETCLIPBDATA.html">PGETCLIPBDATA</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pgcd</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04050">4050</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d9/d7/ntuser_2kernel_2clipbrd_8c-source.html#l00049">CheckClipboardAccess()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00251">CLEANUPRECV</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d0/d0/client_2nt6_2user_8h.html#a1007">GETCLIPBDATA</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03284">IS_THREAD_RESTRICTED</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00336">MSGERRORCLEANUP</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d0/d0/client_2nt6_2user_8h.html#a1008">PGETCLIPBDATA</a>, <a class="el" href="../../d6/d7/ex_8h-source.html#l01902">ProbeAndWriteStructure</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00058">PtiCurrent</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00343">StubExceptionHandler</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l01668">ThreadLockWinSta</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l01698">ThreadUnlockWinSta</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01387">tagGETCLIPBDATA::uFmtRet</a>, and <a class="el" href="../../d9/d7/ntuser_2kernel_2clipbrd_8c-source.html#l02356">xxxGetClipboardData()</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/client_8c-source.html#l00390">GetClipboardData()</a>.
<p>
<pre class="fragment"><div>04053 {
04054     <a class="code" href="../../d2/d8/structtagTHREADINFO.html">PTHREADINFO</a>    ptiCurrent;
04055     <a class="code" href="../../d5/d1/struct__TL.html">TL</a>             tlpwinsta;
04056     <a class="code" href="../../d4/d9/structtagWINDOWSTATION.html">PWINDOWSTATION</a> pwinsta;
04057     <a class="code" href="../../d6/d5/structtagGETCLIPBDATA.html">GETCLIPBDATA</a>   gcd;
04058 
04059     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(HANDLE, NULL);
04060 
04061     ptiCurrent = <a class="code" href="../../d4/d1/userk_8h.html#a9">PtiCurrent</a>();
04062     <span class="keywordflow">if</span> ((pwinsta = <a class="code" href="../../d8/d8/ntuser_2kernel_2clipbrd_8c.html#a14">CheckClipboardAccess</a>()) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
04063         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
04064 
04065     <span class="comment">/*</span>
04066 <span class="comment">     * Check for jobs with JOB_OBJECT_UILIMIT_READCLIPBOARD</span>
04067 <span class="comment">     */</span>
04068     <span class="keywordflow">if</span> (<a class="code" href="../../d4/d1/userk_8h.html#a382">IS_THREAD_RESTRICTED</a>(ptiCurrent, JOB_OBJECT_UILIMIT_READCLIPBOARD)) {
04069         RIPERR0(ERROR_ACCESS_DENIED, RIP_WARNING, <span class="stringliteral">"NtUserGetClipboardData failed for restricted thread"</span>);
04070         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
04071     }
04072 
04073     <a class="code" href="../../d4/d1/userk_8h.html#a131">ThreadLockWinSta</a>(ptiCurrent, pwinsta, &amp;tlpwinsta);
04074 
04075     <span class="comment">/*</span>
04076 <span class="comment">     * Start out assuming the format requested</span>
04077 <span class="comment">     * will be the format returned.</span>
04078 <span class="comment">     */</span>
04079     gcd.<a class="code" href="../../d6/d5/structtagGETCLIPBDATA.html#o0">uFmtRet</a> = fmt;
04080 
04081     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1739">xxxGetClipboardData</a>(pwinsta, fmt, &amp;gcd);
04082 
04083     <span class="comment">/*</span>
04084 <span class="comment">     * Probe arguments</span>
04085 <span class="comment">     */</span>
04086     <span class="keywordflow">try</span> {
04087         <a class="code" href="../../d5/d8/ex_8h.html#a54">ProbeAndWriteStructure</a>(pgcd, gcd, <a class="code" href="../../d6/d5/structtagGETCLIPBDATA.html">GETCLIPBDATA</a>);
04088     } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(TRUE)) {
04089         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a44">MSGERRORCLEANUP</a>(0);
04090     }
04091 
04092     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a33">CLEANUPRECV</a>();
04093     <a class="code" href="../../d4/d1/userk_8h.html#a135">ThreadUnlockWinSta</a>(ptiCurrent, &amp;tlpwinsta);
04094 
04095     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserGetClipboardData"</span>);
04096     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
04097 
04098 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a214" doxytag="ntuser.h::NtUserGetClipboardFormatName" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI int NtUserGetClipboardFormatName           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>format</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT LPWSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>lpszFormatName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>chMax</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l08962">8962</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00101">BEGINRECV_NOCRIT</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00148">CHARALIGN</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00269">ENDRECV_NOCRIT</a>, <a class="el" href="../../d9/d9/rtbatcr_8c-source.html#l00064">format</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00158">ProbeForWriteBuffer</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00343">StubExceptionHandler</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d2/d9/w32_2ntuser_2kernel_2atom_8c-source.html#l00101">UserGetAtomName()</a>.
<p>
Referenced by <a class="el" href="../../d1/d7/ntcftxt_8h-source.html#l00169">GetClipboardFormatName()</a>.
<p>
<pre class="fragment"><div>08966 {
08967     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a11">BEGINRECV_NOCRIT</a>(<span class="keywordtype">int</span>, 0);
08968 
08969     <span class="comment">/*</span>
08970 <span class="comment">     * Probe arguments</span>
08971 <span class="comment">     */</span>
08972     <span class="keywordflow">try</span> {
08973         <a class="code" href="../../d4/d1/userk_8h.html#a25">ProbeForWriteBuffer</a>(lpszFormatName, chMax, CHARALIGN);
08974     } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(TRUE)) {
08975         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
08976     }
08977 
08978     <span class="keywordflow">if</span> ((ATOM)<a class="code" href="../../d8/d0/rtbatcr_8c.html#a8">format</a> &lt; MAXINTATOM) {
08979         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(ERROR_INVALID_PARAMETER);
08980     } <span class="keywordflow">else</span> {
08981         <span class="comment">/*</span>
08982 <span class="comment">         * UserGetAtomName (actually RtlQueryAtomInAtomTable) protects access</span>
08983 <span class="comment">         * within a try block, and sets last error appropriately.</span>
08984 <span class="comment">         */</span>
08985         retval = <a class="code" href="../../d4/d1/userk_8h.html#a1300">UserGetAtomName</a>((ATOM)format, lpszFormatName, chMax);
08986     }
08987 
08988     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserGetClipboardFormatName"</span>);
08989     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a36">ENDRECV_NOCRIT</a>();
08990 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a97" doxytag="ntuser.h::NtUserGetClipboardOwner" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI HWND NtUserGetClipboardOwner           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">VOID&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05102">5102</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00094">BEGINRECV_SHARED</a>, <a class="el" href="../../d9/d7/ntuser_2kernel_2clipbrd_8c-source.html#l00049">CheckClipboardAccess()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00099">ENDRECV_SHARED</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01512">PtoH</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l02728">tagWINDOWSTATION::spwndClipOwner</a>, and <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>.
<p>
<pre class="fragment"><div>05104 {
05105     <a class="code" href="../../d4/d9/structtagWINDOWSTATION.html">PWINDOWSTATION</a> pwinsta;
05106 
05107     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a9">BEGINRECV_SHARED</a>(HWND, NULL);
05108 
05109     <span class="comment">/*</span>
05110 <span class="comment">     * Blow it off if the caller doesn't have the proper access rights</span>
05111 <span class="comment">     */</span>
05112     <span class="keywordflow">if</span> ((pwinsta = <a class="code" href="../../d8/d8/ntuser_2kernel_2clipbrd_8c.html#a14">CheckClipboardAccess</a>()) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
05113         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
05114     }
05115 
05116     retval = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a448">PtoH</a>(pwinsta-&gt;<a class="code" href="../../d4/d9/structtagWINDOWSTATION.html#o9">spwndClipOwner</a>);
05117 
05118     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserGetClipboardOwner"</span>);
05119     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a10">ENDRECV_SHARED</a>();
05120 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a95" doxytag="ntuser.h::NtUserGetClipboardSequenceNumber" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> NtUserGetClipboardSequenceNumber           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">VOID&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05062">5062</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00094">BEGINRECV_SHARED</a>, <a class="el" href="../../d9/d7/ntuser_2kernel_2clipbrd_8c-source.html#l00049">CheckClipboardAccess()</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00099">ENDRECV_SHARED</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l02732">tagWINDOWSTATION::iClipSequenceNumber</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>.
<p>
<pre class="fragment"><div>05064 {
05065     <a class="code" href="../../d4/d9/structtagWINDOWSTATION.html">PWINDOWSTATION</a> pwinsta;
05066 
05067     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a9">BEGINRECV_SHARED</a>(DWORD, 0);
05068 
05069     <span class="comment">/*</span>
05070 <span class="comment">     * Blow it off if the caller doesn't have the proper access rights</span>
05071 <span class="comment">     */</span>
05072     <span class="keywordflow">if</span> ((pwinsta = <a class="code" href="../../d8/d8/ntuser_2kernel_2clipbrd_8c.html#a14">CheckClipboardAccess</a>()) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
05073         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
05074     }
05075 
05076     retval = pwinsta-&gt;<a class="code" href="../../d4/d9/structtagWINDOWSTATION.html#o13">iClipSequenceNumber</a>;
05077 
05078     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserGetClipboardSequenceNumber"</span>);
05079     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a10">ENDRECV_SHARED</a>();
05080 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a98" doxytag="ntuser.h::NtUserGetClipboardSerialNumber" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> NtUserGetClipboardSerialNumber           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">VOID&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a99" doxytag="ntuser.h::NtUserGetClipboardViewer" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI HWND NtUserGetClipboardViewer           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">VOID&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05122">5122</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00094">BEGINRECV_SHARED</a>, <a class="el" href="../../d9/d7/ntuser_2kernel_2clipbrd_8c-source.html#l00049">CheckClipboardAccess()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00099">ENDRECV_SHARED</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01512">PtoH</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l02727">tagWINDOWSTATION::spwndClipViewer</a>, and <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>.
<p>
<pre class="fragment"><div>05124 {
05125     <a class="code" href="../../d4/d9/structtagWINDOWSTATION.html">PWINDOWSTATION</a> pwinsta;
05126 
05127     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a9">BEGINRECV_SHARED</a>(HWND, NULL);
05128 
05129     <span class="comment">/*</span>
05130 <span class="comment">     * Blow it off if the caller doesn't have the proper access rights</span>
05131 <span class="comment">     */</span>
05132     <span class="keywordflow">if</span> ((pwinsta = <a class="code" href="../../d8/d8/ntuser_2kernel_2clipbrd_8c.html#a14">CheckClipboardAccess</a>()) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
05133         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
05134     }
05135 
05136     retval = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a448">PtoH</a>(pwinsta-&gt;<a class="code" href="../../d4/d9/structtagWINDOWSTATION.html#o8">spwndClipViewer</a>);
05137 
05138     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserGetClipboardViewer"</span>);
05139     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a10">ENDRECV_SHARED</a>();
05140 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a75" doxytag="ntuser.h::NtUserGetClipCursor" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserGetClipCursor           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">OUT LPRECT&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>lpRect</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04313">4313</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00094">BEGINRECV_SHARED</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00099">ENDRECV_SHARED</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00195">grcCursorClip</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00084">PpiCurrent</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00725">ProbeForWriteRect</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l02364">RETURN_IF_ACCESS_DENIED</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00343">StubExceptionHandler</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
<pre class="fragment"><div>04315 {
04316     <span class="comment">/*</span>
04317 <span class="comment">     * Check if the caller has the proper access rights: if not, this will</span>
04318 <span class="comment">     * SetLastError to ERROR_ACCESS_DENIED and return FALSE.  Do this *before*</span>
04319 <span class="comment">     * BEGINRECV_SHARED, else we must use MSGERROR to release the critsect!</span>
04320 <span class="comment">     */</span>
04321     <a class="code" href="../../d4/d1/userk_8h.html#a263">RETURN_IF_ACCESS_DENIED</a>(<a class="code" href="../../d4/d1/userk_8h.html#a16">PpiCurrent</a>()-&gt;amwinsta,
04322                             WINSTA_READATTRIBUTES,
04323                             FALSE);
04324     {
04325         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a9">BEGINRECV_SHARED</a>(BOOL, FALSE);
04326 
04327         <span class="comment">/*</span>
04328 <span class="comment">         * Probe arguments</span>
04329 <span class="comment">         */</span>
04330         <span class="keywordflow">try</span> {
04331             <a class="code" href="../../d4/d1/userk_8h.html#a68">ProbeForWriteRect</a>(lpRect);
04332 
04333             *lpRect = <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a75">grcCursorClip</a>;
04334             retval = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
04335         } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(TRUE)) {
04336             <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
04337         }
04338 
04339         <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserGetClipCursor"</span>);
04340         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a10">ENDRECV_SHARED</a>();
04341     }
04342 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a233" doxytag="ntuser.h::NtUserGetComboBoxInfo" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserGetComboBoxInfo           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN OUT PCOMBOBOXINFO&nbsp;</td>
          <td class="mdname" nowrap> <em>pcbi</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l03564">3564</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d7/d6/winable2_8c-source.html#l00778">_GetComboBoxInfo()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00144">BEGINRECV_HWND_SHARED</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00147">DATAALIGN</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00154">ENDRECV_HWND_SHARED</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d0/d4/probe_8c-source.html#l00034">ProbeForWrite()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00343">StubExceptionHandler</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
<pre class="fragment"><div>03565 {
03566     COMBOBOXINFO cbi;
03567 
03568     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a20">BEGINRECV_HWND_SHARED</a>(BOOL, FALSE, hwnd);
03569 
03570     <span class="comment">/*</span>
03571 <span class="comment">     * Probe arguments and copy out results</span>
03572 <span class="comment">     */</span>
03573     <span class="keywordflow">try</span> {
03574         <a class="code" href="../../d5/d8/ex_8h.html#a259">ProbeForWrite</a>(pcbi, <span class="keyword">sizeof</span>(*pcbi), DATAALIGN);
03575         cbi.cbSize = pcbi-&gt;cbSize;
03576     } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(TRUE)) {
03577         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
03578     }
03579 
03580         <span class="comment">/*</span>
03581 <span class="comment">         * Get the combobox info</span>
03582 <span class="comment">         */</span>
03583     retval = <a class="code" href="../../d6/d7/winable2_8c.html#a6">_GetComboBoxInfo</a>(pwnd, &amp;cbi);
03584 
03585     <span class="keywordflow">if</span> (retval) {
03586         <span class="keywordflow">try</span> {
03587             *pcbi = cbi;
03588         } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(TRUE)) {
03589              <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
03590         }
03591     }
03592 
03593     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserGetComboBoxInfo"</span>);
03594     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a21">ENDRECV_HWND_SHARED</a>();
03595 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a91" doxytag="ntuser.h::NtUserGetControlBrush" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI HBRUSH NtUserGetControlBrush           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN HDC&nbsp;</td>
          <td class="mdname" nowrap> <em>hdc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>msg</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04948">4948</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00172">BEGINRECV_HWNDLOCK</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00186">ENDRECV_HWNDLOCK</a>, <a class="el" href="../../d3/d0/userexts_8c-source.html#l01830">msg</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, and <a class="el" href="../../d9/d3/w32_2ntuser_2kernel_2random_8c-source.html#l00241">xxxGetControlBrush()</a>.
<p>
<pre class="fragment"><div>04952 {
04953 
04954     <span class="comment">//</span>
04955     <span class="comment">// N.B. This function has implicit window translation and thread locking</span>
04956     <span class="comment">//      enabled. These operations are performed in the User server API</span>
04957     <span class="comment">//      dispatcher.</span>
04958     <span class="comment">//</span>
04959 
04960     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a24">BEGINRECV_HWNDLOCK</a>(HBRUSH, NULL, hwnd);
04961 
04962     <span class="keywordflow">if</span> (hdc == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
04963         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
04964 
04965     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1564">xxxGetControlBrush</a>(
04966             pwnd,
04967             hdc,
04968             msg);
04969 
04970     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserGetControlBrush"</span>);
04971     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a25">ENDRECV_HWNDLOCK</a>();
04972 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a92" doxytag="ntuser.h::NtUserGetControlColor" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI HBRUSH NtUserGetControlColor           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwndParent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwndCtl</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN HDC&nbsp;</td>
          <td class="mdname" nowrap> <em>hdc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>msg</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04974">4974</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00172">BEGINRECV_HWNDLOCK</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00186">ENDRECV_HWNDLOCK</a>, <a class="el" href="../../d3/d0/userexts_8c-source.html#l01830">msg</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00365">ThreadLockAlwaysWithPti</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00366">ThreadUnlock</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00399">ValidateHWND</a>, and <a class="el" href="../../d9/d3/w32_2ntuser_2kernel_2random_8c-source.html#l00193">xxxGetControlColor()</a>.
<p>
<pre class="fragment"><div>04979 {
04980 
04981     <span class="comment">//</span>
04982     <span class="comment">// N.B. This function has implicit window translation and thread locking</span>
04983     <span class="comment">//      enabled. These operations are performed in the User server API</span>
04984     <span class="comment">//      dispatcher.</span>
04985     <span class="comment">//</span>
04986 
04987     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwndCtl;
04988     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpwndCtl;
04989 
04990     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a24">BEGINRECV_HWNDLOCK</a>(HBRUSH, NULL, hwndParent);
04991 
04992     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a55">ValidateHWND</a>(pwndCtl, hwndCtl);
04993 
04994     <a class="code" href="../../d6/d0/usercli_8h.html#a39">ThreadLockAlwaysWithPti</a>(ptiCurrent, pwndCtl, &amp;tlpwndCtl);
04995 
04996     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1565">xxxGetControlColor</a>(
04997             pwnd,
04998             pwndCtl,
04999             hdc,
05000             msg);
05001 
05002     <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndCtl);
05003 
05004     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserGetControlColor"</span>);
05005     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a25">ENDRECV_HWNDLOCK</a>();
05006 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a209" doxytag="ntuser.h::NtUserGetCPD" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI ULONG_PTR NtUserGetCPD           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>options</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG_PTR&nbsp;</td>
          <td class="mdname" nowrap> <em>dwData</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l08700">8700</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00110">BEGINRECV_HWND</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01567">CPD_DIALOG</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01563">CPD_TRANSITION_TYPES</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01566">CPD_WND</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01568">CPD_WNDTOCLS</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00120">ENDRECV_HWND</a>, <a class="el" href="../../d1/d4/ntuser_2kernel_2getset_8c-source.html#l00875">GetCPD()</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, and <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>.
<p>
Referenced by <a class="el" href="../../d1/d8/clmsg_8c-source.html#l01789">GetCPD()</a>.
<p>
<pre class="fragment"><div>08704 {
08705 
08706     <span class="comment">//</span>
08707     <span class="comment">// N.B. This function has implicit window handle translation. This</span>
08708     <span class="comment">//      operation is performed in the User server API dispatcher.</span>
08709     <span class="comment">//</span>
08710 
08711     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a14">BEGINRECV_HWND</a>(ULONG_PTR, 0, hwnd);
08712 
08713     <span class="keywordflow">switch</span> (options &amp; ~<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a461">CPD_TRANSITION_TYPES</a>) {
08714     <span class="keywordflow">case</span> <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a463">CPD_WND</a>:
08715     <span class="keywordflow">case</span> <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a464">CPD_DIALOG</a>:
08716     <span class="keywordflow">case</span> <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a465">CPD_WNDTOCLS</a>:
08717         <span class="keywordflow">break</span>;
08718     <span class="keywordflow">default</span>:
08719         RIPMSG1(RIP_WARNING, <span class="stringliteral">"GetCPD: Invalid options %x"</span>, options);
08720         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
08721     }
08722 
08723     retval = <a class="code" href="../../d0/d5/ntuser_2kernel_2getset_8c.html#a7">GetCPD</a>(pwnd, options, dwData);
08724 
08725     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserGetCPD"</span>);
08726     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a15">ENDRECV_HWND</a>();
08727 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a172" doxytag="ntuser.h::NtUserGetCursorFrameInfo" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI HCURSOR NtUserGetCursorFrameInfo           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HCURSOR&nbsp;</td>
          <td class="mdname" nowrap> <em>hcur</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN int&nbsp;</td>
          <td class="mdname" nowrap> <em>iFrame</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>pjifRate</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT LPINT&nbsp;</td>
          <td class="mdname" nowrap> <em>pccur</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l07184">7184</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d5/d3/kernel_2acons_8c-source.html#l00183">_GetCursorFrameInfo()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00094">BEGINRECV_SHARED</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00099">ENDRECV_SHARED</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00025">INT</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d6/d7/ex_8h-source.html#l01632">ProbeForWriteLong</a>, <a class="el" href="../../d6/d7/ex_8h-source.html#l01649">ProbeForWriteUlong</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01512">PtoH</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00343">StubExceptionHandler</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, and <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00464">ValidateHCURSOR</a>.
<p>
Referenced by <a class="el" href="../../d5/d8/clres_8c-source.html#l01465">GetCursorFrameInfo()</a>.
<p>
<pre class="fragment"><div>07189 {
07190     <a class="code" href="../../d6/d1/structtagCURSOR.html">PCURSOR</a> pcur;
07191     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> jifRate;
07192     <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a> ccur;
07193 
07194     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a9">BEGINRECV_SHARED</a>(HCURSOR, NULL);
07195 
07196     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a64">ValidateHCURSOR</a>(pcur, hcur);
07197 
07198     <span class="comment">/*</span>
07199 <span class="comment">     * Probe arguments</span>
07200 <span class="comment">     */</span>
07201     <span class="keywordflow">try</span> {
07202         <a class="code" href="../../d5/d8/ex_8h.html#a40">ProbeForWriteUlong</a>(pjifRate);
07203         <a class="code" href="../../d5/d8/ex_8h.html#a39">ProbeForWriteLong</a>(pccur);
07204     } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(FALSE)) {
07205         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);  <span class="comment">// don't SetLastError for private API</span>
07206     }
07207 
07208     retval = (HCURSOR)<a class="code" href="../../d4/d1/userk_8h.html#a1115">_GetCursorFrameInfo</a>(
07209                 pcur,
07210                 iFrame,
07211                 &amp;jifRate,
07212                 &amp;ccur);
07213         retval = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a448">PtoH</a>((PVOID)retval);
07214     <span class="keywordflow">try</span> {
07215         *pjifRate = jifRate;
07216         *pccur = ccur;
07217     } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(FALSE)) {
07218         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);  <span class="comment">// don't SetLastError for private API</span>
07219     }
07220 
07221     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserGetCursorFrameInfo"</span>);
07222     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a10">ENDRECV_SHARED</a>();
07223 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a236" doxytag="ntuser.h::NtUserGetCursorInfo" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserGetCursorInfo           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN OUT PCURSORINFO&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pci</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l03622">3622</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00094">BEGINRECV_SHARED</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00147">DATAALIGN</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00099">ENDRECV_SHARED</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00210">gpcurLogCurrent</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00211">gpcurPhysCurrent</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00051">gpsi</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d0/d4/probe_8c-source.html#l00034">ProbeForWrite()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01512">PtoH</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00343">StubExceptionHandler</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
<pre class="fragment"><div>03623 {
03624     CURSORINFO ci = {0};
03625 
03626     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a9">BEGINRECV_SHARED</a>(BOOL, FALSE);
03627 
03628     ci.ptScreenPos = <a class="code" href="../../d1/d8/clglobal_8c.html#a4">gpsi</a>-&gt;ptCursor;
03629     ci.flags = 0;
03630 
03631     <span class="keywordflow">if</span> (<a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a84">gpcurPhysCurrent</a>)
03632         ci.flags |= CURSOR_SHOWING;
03633 
03634     <span class="comment">/*</span>
03635 <span class="comment">     * Get the current LOGICAL cursor (the one apps actually see from LoadCursor())</span>
03636 <span class="comment">     */</span>
03637     ci.hCursor = (HCURSOR)<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a448">PtoH</a>(gpcurLogCurrent);
03638 
03639     retval = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
03640 
03641     <span class="comment">/*</span>
03642 <span class="comment">     * Probe arguments and copy out result</span>
03643 <span class="comment">     */</span>
03644     <span class="keywordflow">try</span> {
03645         <a class="code" href="../../d5/d8/ex_8h.html#a259">ProbeForWrite</a>(pci, <span class="keyword">sizeof</span>(*pci), DATAALIGN);
03646         <span class="keywordflow">if</span> (pci-&gt;cbSize != <span class="keyword">sizeof</span>(CURSORINFO)) {
03647             RIPERR1(ERROR_INVALID_PARAMETER, RIP_WARNING, <span class="stringliteral">"CURSORINFO.cbSize %d is wrong"</span>, pci-&gt;cbSize);
03648             retval = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
03649         } <span class="keywordflow">else</span> {
03650             *pci = ci;
03651         }
03652 
03653     } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(TRUE)) {
03654         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
03655     }
03656 
03657     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserGetCursorInfo"</span>);
03658     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a10">ENDRECV_SHARED</a>();
03659 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a154" doxytag="ntuser.h::NtUserGetDC" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI HDC NtUserGetDC           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hwnd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06624">6624</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d9/d2/dc_8c-source.html#l00148">_GetDC()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00075">BEGINATOMICRECV</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d4/d5/visrgn_8c-source.html#l00057">CreateEmptyRgn()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00081">ENDATOMICRECV</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03289">IS_CURRENT_THREAD_RESTRICTED</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l02644">tagDESKTOP::pDeskInfo</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00058">PtiCurrent</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01512">PtoH</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02156">tagDESKTOPINFO::spwnd</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00120">ValidateHwnd</a>, and <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00410">ValidateHWNDOPT</a>.
<p>
Referenced by <a class="el" href="../../d1/d1/lboxctl3_8c-source.html#l00061">ChopText()</a>, <a class="el" href="../../d1/d8/hdata_8c-source.html#l00579">CopyBitmap()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l00109">ECCalcMarginForDBCSFont()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02492">ECGetEditDC()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l00708">ECSetFont()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00126">LBGetDC()</a>, <a class="el" href="../../d6/d4/statctl_8c-source.html#l00784">StaticRepaint()</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l00258">xxxBNGetDC()</a>, <a class="el" href="../../d4/d3/comboini_8c-source.html#l00253">xxxCBCalcControlRects()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l02028">xxxCBInternalUpdateEditWindow()</a>, <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00611">xxxInitActivateDlg()</a>, <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00062">xxxLBCreate()</a>, and <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00438">xxxLBSetFont()</a>.
<p>
<pre class="fragment"><div>06626 {
06627     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwnd;
06628     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> bValid = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
06629 
06630     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a5">BEGINATOMICRECV</a>(HDC, NULL);
06631 
06632     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a57">ValidateHWNDOPT</a>(pwnd, hwnd);
06633 
06634     <span class="keywordflow">if</span> (<a class="code" href="../../d4/d1/userk_8h.html#a383">IS_CURRENT_THREAD_RESTRICTED</a>(JOB_OBJECT_UILIMIT_HANDLES) &amp;&amp; pwnd == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
06635 
06636         <a class="code" href="../../d0/d3/structtagDESKTOP.html">PDESKTOP</a> pdesk = <a class="code" href="../../d4/d1/userk_8h.html#a9">PtiCurrent</a>()-&gt;rpdesk;
06637 
06638         <span class="comment">/*</span>
06639 <span class="comment">         * make sure it has access to the desktop window</span>
06640 <span class="comment">         */</span>
06641         <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a448">PtoH</a>(pdesk-&gt;<a class="code" href="../../d0/d3/structtagDESKTOP.html#o0">pDeskInfo</a>-&gt;<a class="code" href="../../d1/d3/structtagDESKTOPINFO.html#o2">spwnd</a>))) {
06642             bValid = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
06643         }
06644     }
06645 
06646     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1694">_GetDC</a>(pwnd);
06647 
06648     <span class="keywordflow">if</span> (!bValid) {
06649 
06650         HRGN hrgn;
06651 
06652         <span class="comment">/*</span>
06653 <span class="comment">         * Select a NULL visible region on this DC so that restricted</span>
06654 <span class="comment">         * processes don't mess with GetDC(NULL)</span>
06655 <span class="comment">         */</span>
06656         hrgn = <a class="code" href="../../d4/d1/userk_8h.html#a1162">CreateEmptyRgn</a>();
06657 
06658         GreSelectVisRgn(retval, hrgn, SVR_DELETEOLD);
06659     }
06660 
06661     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserGetDC"</span>);
06662     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a6">ENDATOMICRECV</a>();
06663 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a155" doxytag="ntuser.h::NtUserGetDCEx" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI HDC NtUserGetDCEx           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN HRGN&nbsp;</td>
          <td class="mdname" nowrap> <em>hrgnClip</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>flags</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06665">6665</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d9/d2/dc_8c-source.html#l00608">_GetDCEx()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00075">BEGINATOMICRECV</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00081">ENDATOMICRECV</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03289">IS_CURRENT_THREAD_RESTRICTED</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00058">PtiCurrent</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01512">PtoH</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00120">ValidateHwnd</a>, and <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00410">ValidateHWNDOPT</a>.
<p>
Referenced by <a class="el" href="../../d7/d3/msgbox_8c-source.html#l00730">SoftModalMessageBox()</a>.
<p>
<pre class="fragment"><div>06669 {
06670     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwnd;
06671 
06672     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a5">BEGINATOMICRECV</a>(HDC, NULL);
06673 
06674     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a57">ValidateHWNDOPT</a>(pwnd, hwnd);
06675 
06676     <span class="keywordflow">if</span> (pwnd == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
06677         pwnd = <a class="code" href="../../d4/d1/userk_8h.html#a9">PtiCurrent</a>()-&gt;rpdesk-&gt;pDeskInfo-&gt;spwnd;
06678 
06679         <span class="keywordflow">if</span> (<a class="code" href="../../d4/d1/userk_8h.html#a383">IS_CURRENT_THREAD_RESTRICTED</a>(JOB_OBJECT_UILIMIT_HANDLES)) {
06680             <span class="comment">/*</span>
06681 <span class="comment">             * make sure it has access to the desktop window</span>
06682 <span class="comment">             */</span>
06683             <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a448">PtoH</a>(pwnd))) {
06684                 RIPMSG0(RIP_WARNING,
06685                         <span class="stringliteral">"NtUserGetDCEx fails desktop window validation"</span>);
06686                 <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
06687             }
06688         }
06689     }
06690 
06691     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1695">_GetDCEx</a>(
06692             pwnd,
06693             hrgnClip,
06694             flags);
06695 
06696     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserGetDCEx"</span>);
06697     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a6">ENDATOMICRECV</a>();
06698 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a100" doxytag="ntuser.h::NtUserGetDoubleClickTime" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI UINT NtUserGetDoubleClickTime           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">VOID&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05142">5142</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00094">BEGINRECV_SHARED</a>, <a class="el" href="../../d8/d4/w32_2ntuser_2kernel_2security_8c-source.html#l00492">CheckGrantedAccess()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00099">ENDRECV_SHARED</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00233">gdtDblClk</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00794">gpepCSRSS</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00084">PpiCurrent</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, and <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>.
<p>
<pre class="fragment"><div>05144 {
05145     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a9">BEGINRECV_SHARED</a>(UINT, 0);
05146 
05147     <span class="comment">/*</span>
05148 <span class="comment">     * Blow it off if the caller doesn't have the proper access rights.  However, allow the</span>
05149 <span class="comment">     * CSR process to use this value internally to the server.  Note that if the client</span>
05150 <span class="comment">     * tries to retrieve this value itself, the access check will function normally.</span>
05151 <span class="comment">     */</span>
05152     <span class="keywordflow">if</span> ((<a class="code" href="../../d4/d1/userk_8h.html#a16">PpiCurrent</a>()-&gt;Process != <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a299">gpepCSRSS</a>) &amp;&amp;
05153         (!<a class="code" href="../../d4/d1/userk_8h.html#a1270">CheckGrantedAccess</a>(<a class="code" href="../../d4/d1/userk_8h.html#a16">PpiCurrent</a>()-&gt;amwinsta, WINSTA_READATTRIBUTES))) {
05154         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
05155     }
05156 
05157     retval = <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a100">gdtDblClk</a>;
05158 
05159     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserGetDoubleClickTime"</span>);
05160     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a10">ENDRECV_SHARED</a>();
05161 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a101" doxytag="ntuser.h::NtUserGetForegroundWindow" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI HWND NtUserGetForegroundWindow           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">VOID&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05163">5163</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00094">BEGINRECV_SHARED</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00099">ENDRECV_SHARED</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00099">gpqForeground</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01827">tagWND::head</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00059">PtiCurrentShared</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01513">PtoHq</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03111">tagQ::spwndActive</a>, and <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>.
<p>
Referenced by <a class="el" href="../../d1/d8/dlgbegin_8c-source.html#l00490">GetDialogMonitor()</a>, <a class="el" href="../../d7/d3/msgbox_8c-source.html#l00730">SoftModalMessageBox()</a>, and <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00603">UnmaximizeChildWindows()</a>.
<p>
<pre class="fragment"><div>05165 {
05166     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a9">BEGINRECV_SHARED</a>(HWND, NULL);
05167 
05168     <span class="comment">/*</span>
05169 <span class="comment">     * Only return a window if there is a foreground queue and the</span>
05170 <span class="comment">     * caller has access to the current desktop.</span>
05171 <span class="comment">     */</span>
05172     <span class="keywordflow">if</span> (<a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a29">gpqForeground</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> || <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a29">gpqForeground</a>-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o8">spwndActive</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> ||
05173             <a class="code" href="../../d4/d1/userk_8h.html#a10">PtiCurrentShared</a>()-&gt;rpdesk != <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a29">gpqForeground</a>-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o8">spwndActive</a>-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o0">head</a>.rpdesk) {
05174         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
05175     }
05176 
05177     retval = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a449">PtoHq</a>(<a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a29">gpqForeground</a>-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o8">spwndActive</a>);
05178 
05179     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserGetForegroundWindow"</span>);
05180     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a10">ENDRECV_SHARED</a>();
05181 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a218" doxytag="ntuser.h::NtUserGetGuiResources" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> NtUserGetGuiResources           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hProcess</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwFlags</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l02329">2329</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00094">BEGINRECV_SHARED</a>, <a class="el" href="../../d4/d7/propapi_8h-source.html#l00043">dwFlags</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00099">ENDRECV_SHARED</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00931">gSessionId</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d9/ob_8h-source.html#l00494">ObDereferenceObject</a>, <a class="el" href="../../d8/d0/obref_8c-source.html#l00542">ObReferenceObjectByHandle()</a>, <a class="el" href="../../d0/d8/ntos_8h-source.html#l00088">PsProcessType</a>, <a class="el" href="../../d2/d8/ps_8h-source.html#l00265">_EPROCESS::SessionId</a>, <a class="el" href="../../d3/d0/cttoken_8c-source.html#l00135">Status</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d0/d9/ntosdef_8h.html#a76a70">UserMode</a>, and <a class="el" href="../../d2/d8/ps_8h-source.html#l00284">_EPROCESS::Win32Process</a>.
<p>
<pre class="fragment"><div>02333 {
02334     <a class="code" href="../../d0/d4/struct__EPROCESS.html">PEPROCESS</a> Process;
02335     PW32PROCESS pW32Process;
02336     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a9">BEGINRECV_SHARED</a>(DWORD, 0);
02337 
02338     <span class="comment">/*</span>
02339 <span class="comment">     * Probe arguments</span>
02340 <span class="comment">     */</span>
02341     <span class="keywordflow">if</span> (<a class="code" href="../../d3/d8/propapi_8h.html#a34">dwFlags</a> &gt; GR_MAXOBJECT) {
02342         RIPERR1(ERROR_INVALID_PARAMETER, RIP_VERBOSE, <span class="stringliteral">"GetGuiResources: invalid flag bits %x\n"</span>,
02343                         dwFlags);
02344         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
02345     }
02346 
02347 
02348     <span class="keywordflow">if</span> (hProcess == NtCurrentProcess()) {
02349         pW32Process = W32GetCurrentProcess();
02350     } <span class="keywordflow">else</span> {
02351         <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
02352         <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d7/d1/obref_8c.html#a4">ObReferenceObjectByHandle</a>(
02353             hProcess,
02354             PROCESS_QUERY_INFORMATION,
02355             *PsProcessType,
02356             UserMode,
02357             &amp;Process,
02358             NULL);
02359 
02360         <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(Status)) {
02361             RIPERR2(ERROR_INVALID_PARAMETER, RIP_WARNING, <span class="stringliteral">"GetGuiResources: Failed with Process handle == %X, Status = %x\n"</span>,
02362                     hProcess, Status);
02363             <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
02364         }
02365 
02366         <span class="comment">/*</span>
02367 <span class="comment">         * Make sure they are from the same session</span>
02368 <span class="comment">         */</span>
02369         <span class="keywordflow">if</span> (Process-&gt;<a class="code" href="../../d0/d4/struct__EPROCESS.html#o60">SessionId</a> != <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a327">gSessionId</a>) {
02370             RIPERR2(ERROR_INVALID_PARAMETER, RIP_VERBOSE, <span class="stringliteral">"GetGuiResources: Different session. Failed with Process handle == %X, Status = %x\n"</span>,
02371                     hProcess, Status);
02372             <a class="code" href="../../d4/d0/ob_8h.html#a14">ObDereferenceObject</a>(Process);
02373             <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
02374         }
02375 
02376         pW32Process = Process-&gt;<a class="code" href="../../d0/d4/struct__EPROCESS.html#o72">Win32Process</a>;
02377     }
02378 
02379     <span class="keywordflow">if</span> (pW32Process) {
02380         <span class="keywordflow">switch</span>(<a class="code" href="../../d3/d8/propapi_8h.html#a34">dwFlags</a>) {
02381         <span class="keywordflow">case</span> GR_GDIOBJECTS:
02382             retval = pW32Process-&gt;GDIHandleCount;
02383             <span class="keywordflow">break</span>;
02384         <span class="keywordflow">case</span> GR_USEROBJECTS:
02385             retval = pW32Process-&gt;UserHandleCount;
02386             <span class="keywordflow">break</span>;
02387         }
02388     } <span class="keywordflow">else</span>
02389         retval = 0;
02390 
02391     <span class="keywordflow">if</span> (hProcess != NtCurrentProcess()) {
02392         <a class="code" href="../../d4/d0/ob_8h.html#a14">ObDereferenceObject</a>(Process);
02393     }
02394 
02395     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserGetGuiResources"</span>);
02396     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a10">ENDRECV_SHARED</a>();
02397 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a230" doxytag="ntuser.h::NtUserGetGUIThreadInfo" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserGetGUIThreadInfo           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>idThread</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN OUT PGUITHREADINFO&nbsp;</td>
          <td class="mdname" nowrap> <em>pgui</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l03479">3479</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d7/d6/winable2_8c-source.html#l00036">_GetGUIThreadInfo()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00094">BEGINRECV_SHARED</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00147">DATAALIGN</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00099">ENDRECV_SHARED</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d0/d4/probe_8c-source.html#l00034">ProbeForWrite()</a>, <a class="el" href="../../d7/d2/queue_8c-source.html#l04737">PtiFromThreadId()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00343">StubExceptionHandler</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
<pre class="fragment"><div>03482 {
03483     <a class="code" href="../../d2/d8/structtagTHREADINFO.html">PTHREADINFO</a> ptiThread;
03484     GUITHREADINFO gui;
03485 
03486     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a9">BEGINRECV_SHARED</a>(BOOL, FALSE);
03487 
03488     <span class="keywordflow">if</span> (idThread) {
03489         ptiThread = <a class="code" href="../../d4/d1/userk_8h.html#a1201">PtiFromThreadId</a>(idThread);
03490         <span class="keywordflow">if</span> (ptiThread == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
03491             RIPERR0(ERROR_INVALID_PARAMETER, RIP_VERBOSE, <span class="stringliteral">"Bad thread id"</span>);
03492             <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
03493         }
03494     } <span class="keywordflow">else</span> {
03495         ptiThread = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
03496     }
03497 
03498     <span class="comment">/*</span>
03499 <span class="comment">     * Probe arguments and copy results</span>
03500 <span class="comment">     * C2: test pti &amp; current thread on same desktop within _GetGUIThreadInfo</span>
03501 <span class="comment">     */</span>
03502     <span class="keywordflow">try</span> {
03503         <a class="code" href="../../d5/d8/ex_8h.html#a259">ProbeForWrite</a>(pgui, <span class="keyword">sizeof</span>(*pgui), DATAALIGN);
03504         gui.cbSize = pgui-&gt;cbSize;
03505     } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(TRUE)) {
03506         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
03507     }
03508 
03509     retval = <a class="code" href="../../d6/d7/winable2_8c.html#a0">_GetGUIThreadInfo</a>(ptiThread, &amp;gui);
03510     <span class="keywordflow">if</span> (retval) {
03511         <span class="keywordflow">try</span> {
03512             *pgui = gui;
03513         } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(TRUE)) {
03514             <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
03515         }
03516     }
03517 
03518     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserGetGUIThreadInfo"</span>);
03519     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a10">ENDRECV_SHARED</a>();
03520 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a28" doxytag="ntuser.h::NtUserGetIconInfo" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserGetIconInfo           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HICON&nbsp;</td>
          <td class="mdname" nowrap> <em>hicon</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PICONINFO&nbsp;</td>
          <td class="mdname" nowrap> <em>piconinfo</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN OUT OPTIONAL PUNICODE_STRING&nbsp;</td>
          <td class="mdname" nowrap> <em>pstrInstanceName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN OUT OPTIONAL PUNICODE_STRING&nbsp;</td>
          <td class="mdname" nowrap> <em>pstrResName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT OPTIONAL LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>pbpp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fInternal</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a29" doxytag="ntuser.h::NtUserGetIconSize" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserGetIconSize           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HICON&nbsp;</td>
          <td class="mdname" nowrap> <em>hIcon</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>istepIfAniCur</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT int *&nbsp;</td>
          <td class="mdname" nowrap> <em>pcx</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT int *&nbsp;</td>
          <td class="mdname" nowrap> <em>pcy</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l01669">1669</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00094">BEGINRECV_SHARED</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02176">CURSORF_ACON</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00099">ENDRECV_SHARED</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d4/d4/kernel_2acons_8c.html#a1">pacon</a>, <a class="el" href="../../d6/d7/ex_8h-source.html#l01829">ProbeAndWriteLong</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00343">StubExceptionHandler</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, and <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00476">ValidateHICON</a>.
<p>
Referenced by <a class="el" href="../../d5/d8/clres_8c-source.html#l04493">CopyIcoCur()</a>, <a class="el" href="../../d0/d2/mngrayc_8c-source.html#l00075">DrawStateW()</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l00722">xxxBNDrawText()</a>, <a class="el" href="../../d6/d4/statctl_8c-source.html#l00094">xxxSetStaticImage()</a>, and <a class="el" href="../../d6/d4/statctl_8c-source.html#l00419">xxxStaticPaint()</a>.
<p>
<pre class="fragment"><div>01674 {
01675     <a class="code" href="../../d6/d1/structtagCURSOR.html">PCURSOR</a> picon;
01676 
01677     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a9">BEGINRECV_SHARED</a>(BOOL, FALSE);
01678 
01679     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a66">ValidateHICON</a>(picon, hIcon);
01680 
01681     <span class="keywordflow">if</span> (picon-&gt;CURSORF_flags &amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a537">CURSORF_ACON</a>) {
01682         <a class="code" href="../../d1/d8/structtagACON.html">PACON</a> <a class="code" href="../../d4/d4/kernel_2acons_8c.html#a1">pacon</a> = (<a class="code" href="../../d1/d8/structtagACON.html">PACON</a>)picon;
01683         <span class="keywordflow">if</span> (istepIfAniCur &lt; (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)<a class="code" href="../../d4/d4/kernel_2acons_8c.html#a1">pacon</a>-&gt;cpcur) {
01684             picon = <a class="code" href="../../d4/d4/kernel_2acons_8c.html#a1">pacon</a>-&gt;aspcur[<a class="code" href="../../d4/d4/kernel_2acons_8c.html#a1">pacon</a>-&gt;aicur[istepIfAniCur]];
01685         } <span class="keywordflow">else</span> {
01686             RIPMSG2(RIP_WARNING, <span class="stringliteral">"NtUserGetIconSize: Invalid istepIfAniCur:%#lx. picon:%#p"</span>,
01687                     istepIfAniCur, picon);
01688             <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
01689         }
01690     }
01691 
01692     <span class="comment">/*</span>
01693 <span class="comment">     * Probe arguments</span>
01694 <span class="comment">     */</span>
01695     <span class="keywordflow">try</span> {
01696         <a class="code" href="../../d5/d8/ex_8h.html#a50">ProbeAndWriteLong</a>(pcx, picon-&gt;cx);
01697         <a class="code" href="../../d5/d8/ex_8h.html#a50">ProbeAndWriteLong</a>(pcy, picon-&gt;cy);
01698 
01699         retval = 1;
01700     } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(FALSE)) {
01701         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
01702     }
01703 
01704     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserGetIconSize"</span>);
01705     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a10">ENDRECV_SHARED</a>();
01706 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a47" doxytag="ntuser.h::NtUserGetInternalWindowPos" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI UINT NtUserGetInternalWindowPos           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT LPRECT lpRect&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT LPPOINT lpPoint&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l03049">3049</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d0/d7/kernel_2winmgr_8c-source.html#l00679">_GetWindowPlacement()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00144">BEGINRECV_HWND_SHARED</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00154">ENDRECV_HWND_SHARED</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00708">ProbeForWritePoint</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00725">ProbeForWriteRect</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00343">StubExceptionHandler</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, and <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>.
<p>
<pre class="fragment"><div>03053 {
03054     WINDOWPLACEMENT wp;
03055 
03056     <span class="comment">//</span>
03057     <span class="comment">// N.B. This function has implicit window handle translation. This</span>
03058     <span class="comment">//      operation is performed in the User server API dispatcher.</span>
03059     <span class="comment">//</span>
03060 
03061     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a20">BEGINRECV_HWND_SHARED</a>(DWORD, 0, hwnd);
03062 
03063     <span class="comment">/*</span>
03064 <span class="comment">     * Probe arguments</span>
03065 <span class="comment">     */</span>
03066     <span class="keywordflow">try</span> {
03067         <span class="keywordflow">if</span> (ARGUMENT_PRESENT(lpRect)) {
03068             <a class="code" href="../../d4/d1/userk_8h.html#a68">ProbeForWriteRect</a>(lpRect);
03069         }
03070         <span class="keywordflow">if</span> (ARGUMENT_PRESENT(lpPoint)) {
03071             <a class="code" href="../../d4/d1/userk_8h.html#a67">ProbeForWritePoint</a>(lpPoint);
03072         }
03073 
03074     } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(FALSE)) {
03075         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
03076     }
03077 
03078     wp.length = <span class="keyword">sizeof</span>(WINDOWPLACEMENT);
03079 
03080     <a class="code" href="../../d9/d7/kernel_2winmgr_8c.html#a9">_GetWindowPlacement</a>(pwnd, &amp;wp);
03081 
03082     retval = wp.showCmd;
03083     <span class="keywordflow">try</span> {
03084         <span class="keywordflow">if</span> (ARGUMENT_PRESENT(lpRect)) {
03085             RtlCopyMemory(lpRect, &amp;wp.rcNormalPosition, sizeof (RECT));
03086         }
03087         <span class="keywordflow">if</span> (ARGUMENT_PRESENT(lpPoint)) {
03088             RtlCopyMemory(lpPoint, &amp;wp.ptMinPosition, sizeof (POINT));
03089         }
03090 
03091     } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(FALSE)) {
03092     }
03093 
03094     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserGetInternalWindowPos"</span>);
03095     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a21">ENDRECV_HWND_SHARED</a>();
03096 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a217" doxytag="ntuser.h::NtUserGetKeyboardLayoutList" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI UINT NtUserGetKeyboardLayoutList           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>nItems</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT HKL *&nbsp;</td>
          <td class="mdname" nowrap> <em>lpBuff</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l09058">9058</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d7/d1/kbdlyout_8c-source.html#l01507">_GetKeyboardLayoutList()</a>, <a class="el" href="../../d9/d7/winsta_8c-source.html#l01240">_GetProcessWindowStation()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00094">BEGINRECV_SHARED</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00147">DATAALIGN</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00099">ENDRECV_SHARED</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00158">ProbeForWriteBuffer</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00343">StubExceptionHandler</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>.
<p>
Referenced by <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00129">CliImmInitializeHotKeys()</a>.
<p>
<pre class="fragment"><div>09061 {
09062     <a class="code" href="../../d4/d9/structtagWINDOWSTATION.html">PWINDOWSTATION</a> pwinsta;
09063 
09064     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a9">BEGINRECV_SHARED</a>(UINT, 0);
09065 
09066     <span class="comment">/*</span>
09067 <span class="comment">     * Probe arguments</span>
09068 <span class="comment">     */</span>
09069     <span class="keywordflow">try</span> {
09070         <span class="keywordflow">if</span> (!lpBuff) {
09071             nItems = 0;
09072         }
09073         <a class="code" href="../../d4/d1/userk_8h.html#a25">ProbeForWriteBuffer</a>(lpBuff, nItems, DATAALIGN);
09074         pwinsta = <a class="code" href="../../d8/d8/winsta_8c.html#a11">_GetProcessWindowStation</a>(NULL);
09075 
09076     } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(TRUE)) {
09077         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
09078     }
09079 
09080     <span class="comment">/*</span>
09081 <span class="comment">     * Access to the client-side buffer lpBuff is protected by try/except</span>
09082 <span class="comment">     * inside _GetKeyboardLayoutList()</span>
09083 <span class="comment">     */</span>
09084     retval = (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)<a class="code" href="../../d4/d1/userk_8h.html#a1309">_GetKeyboardLayoutList</a>(pwinsta, nItems, lpBuff);
09085     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserGetKeyboardLayoutList"</span>);
09086     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a10">ENDRECV_SHARED</a>();
09087 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a216" doxytag="ntuser.h::NtUserGetKeyboardLayoutName" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserGetKeyboardLayoutName           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN OUT PUNICODE_STRING&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pstrKLID</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l09022">9022</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d5/d0/userk_8h-source.html#l02493">tagKBDFILE::awchKF</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00094">BEGINRECV_SHARED</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00148">CHARALIGN</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00099">ENDRECV_SHARED</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d6/d7/ex_8h-source.html#l01417">ProbeAndReadUnicodeString</a>, <a class="el" href="../../d0/d4/probe_8c-source.html#l00034">ProbeForWrite()</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00059">PtiCurrentShared</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l02509">tagKL::spkf</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03323">tagTHREADINFO::spklActive</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00343">StubExceptionHandler</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d2/d4/w32_2ntuser_2rtl_2random_8c-source.html#l00146">wcsncpycch()</a>.
<p>
Referenced by <a class="el" href="../../d1/d7/ntcftxt_8h-source.html#l00306">GetKeyboardLayoutName()</a>.
<p>
<pre class="fragment"><div>09024 {
09025     <a class="code" href="../../d2/d8/structtagTHREADINFO.html">PTHREADINFO</a> ptiCurrent;
09026     <a class="code" href="../../d4/d9/structtagKL.html">PKL</a> pklActive;
09027     UNICODE_STRING strKLID;
09028 
09029     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a9">BEGINRECV_SHARED</a>(BOOL, FALSE);
09030 
09031     ptiCurrent = <a class="code" href="../../d4/d1/userk_8h.html#a10">PtiCurrentShared</a>();
09032     pklActive = ptiCurrent-&gt;<a class="code" href="../../d2/d8/structtagTHREADINFO.html#o4">spklActive</a>;
09033 
09034     <span class="keywordflow">if</span> (pklActive == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
09035         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
09036     }
09037     <span class="comment">/*</span>
09038 <span class="comment">     * Probe arguments</span>
09039 <span class="comment">     */</span>
09040     <span class="keywordflow">try</span> {
09041         strKLID = <a class="code" href="../../d5/d8/ex_8h.html#a26">ProbeAndReadUnicodeString</a>(pstrKLID);
09042         <a class="code" href="../../d5/d8/ex_8h.html#a259">ProbeForWrite</a>(strKLID.Buffer, strKLID.MaximumLength, CHARALIGN);
09043 
09044         <a class="code" href="../../d1/d5/w32_2ntuser_2rtl_2random_8c.html#a3">wcsncpycch</a>(strKLID.Buffer,
09045                 pklActive-&gt;<a class="code" href="../../d4/d9/structtagKL.html#o5">spkf</a>-&gt;<a class="code" href="../../d1/d9/structtagKBDFILE.html#o2">awchKF</a>,
09046                 strKLID.MaximumLength / <span class="keyword">sizeof</span>(WCHAR));
09047 
09048         retval = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
09049 
09050     } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(TRUE)) {
09051         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
09052     }
09053 
09054     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserGetKeyboardLayoutName"</span>);
09055     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a10">ENDRECV_SHARED</a>();
09056 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a245" doxytag="ntuser.h::NtUserGetKeyboardState" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserGetKeyboardState           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">OUT <a class="el" href="../../d9/d7/halvprnt_8c.html#a1">PBYTE</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pb</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l09565">9565</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00094">BEGINRECV_SHARED</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d0/d7/halvprnt_8c-source.html#l00031">BYTE</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00099">ENDRECV_SHARED</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d0/d4/probe_8c-source.html#l00034">ProbeForWrite()</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00059">PtiCurrentShared</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00062">SHORT</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00343">StubExceptionHandler</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02955">TestKeyStateDown</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02961">TestKeyStateToggle</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
<pre class="fragment"><div>09567 {
09568     <span class="keywordtype">int</span> i;
09569     <a class="code" href="../../d7/d4/structtagQ.html">PQ</a> pq;
09570     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a9">BEGINRECV_SHARED</a>(SHORT, 0)
09571 
09572     <span class="comment">/*</span>
09573 <span class="comment">     * Probe arguments</span>
09574 <span class="comment">     */</span>
09575     try {
09576         <a class="code" href="../../d5/d8/ex_8h.html#a259">ProbeForWrite</a>(pb, 256, <span class="keyword">sizeof</span>(BYTE));
09577 
09578         pq = <a class="code" href="../../d4/d1/userk_8h.html#a10">PtiCurrentShared</a>()-&gt;pq;
09579 
09580         <span class="keywordflow">for</span> (i = 0; i &lt; 256; i++, pb++) {
09581             *pb = 0;
09582             <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a837">TestKeyStateDown</a>(pq, i))
09583                 *pb |= 0x80;
09584 
09585             <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a840">TestKeyStateToggle</a>(pq, i))
09586                 *pb |= 0x01;
09587         }
09588         retval = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
09589     } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(TRUE)) {
09590         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
09591     }
09592 
09593     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a10">ENDRECV_SHARED</a>();
09594 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a215" doxytag="ntuser.h::NtUserGetKeyNameText" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI int NtUserGetKeyNameText           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN LONG&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT LPWSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>lpszKeyName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>chMax</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l08992">8992</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d4/d0/xlate_8c-source.html#l00408">_GetKeyNameText()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00094">BEGINRECV_SHARED</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00148">CHARALIGN</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00099">ENDRECV_SHARED</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00158">ProbeForWriteBuffer</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00343">StubExceptionHandler</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d1/d7/ntcftxt_8h-source.html#l00209">GetKeyNameText()</a>.
<p>
<pre class="fragment"><div>08996 {
08997     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a9">BEGINRECV_SHARED</a>(<span class="keywordtype">int</span>, 0);
08998 
08999     <span class="comment">/*</span>
09000 <span class="comment">     * Probe arguments</span>
09001 <span class="comment">     */</span>
09002     <span class="keywordflow">try</span> {
09003         <a class="code" href="../../d4/d1/userk_8h.html#a25">ProbeForWriteBuffer</a>(lpszKeyName, chMax, CHARALIGN);
09004     } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(TRUE)) {
09005         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
09006     }
09007 
09008     <span class="comment">/*</span>
09009 <span class="comment">     * Note -- lpszKeyName is a client-side address.  GetKeyNameText</span>
09010 <span class="comment">     * protects uses with try blocks, and sets last error accordingly.</span>
09011 <span class="comment">     */</span>
09012 
09013     retval = <a class="code" href="../../d3/d1/xlate_8c.html#a5">_GetKeyNameText</a>(
09014                 lParam,
09015                 lpszKeyName,
09016                 chMax);
09017 
09018     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserGetKeyNameText"</span>);
09019     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a10">ENDRECV_SHARED</a>();
09020 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a244" doxytag="ntuser.h::NtUserGetKeyState" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a13">SHORT</a> NtUserGetKeyState           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN int&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>vk</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l09596">9596</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d8/d8/keyboard_8c-source.html#l00027">_GetKeyState()</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l00540">_CLIENTINFO::afKeyState</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03122">tagQ::afKeyState</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00094">BEGINRECV_SHARED</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00493">CBKEYCACHE</a>, <a class="el" href="../../d8/d2/validate_8c-source.html#l00887">ChangeAcquireResourceType()</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l00539">_CLIENTINFO::dwKeyCache</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00099">ENDRECV_SHARED</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00051">gpsi</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03329">tagTHREADINFO::pClientInfo</a>, <a class="el" href="../../d6/d2/ntuser_2kernel_2input_8c-source.html#l01874">PostUpdateKeyStateEvent()</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03321">tagTHREADINFO::pq</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00059">PtiCurrentShared</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03129">tagQ::QF_flags</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02997">QF_UPDATEKEYSTATE</a>, and <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00062">SHORT</a>.
<p>
Referenced by <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00506">GetKeyState()</a>.
<p>
<pre class="fragment"><div>09598 {
09599     <a class="code" href="../../d2/d8/structtagTHREADINFO.html">PTHREADINFO</a> ptiCurrent;
09600     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a9">BEGINRECV_SHARED</a>(SHORT, 0)
09601 
09602     ptiCurrent = PtiCurrentShared();
09603     if (ptiCurrent-&gt;pq-&gt;QF_flags &amp; QF_UPDATEKEYSTATE) {
09604 
09605         <span class="comment">/*</span>
09606 <span class="comment">         * We are going to change the system state, so we</span>
09607 <span class="comment">         * must have an exclusive lock</span>
09608 <span class="comment">         */</span>
09609         <a class="code" href="../../d7/d3/validate_8c.html#a21">ChangeAcquireResourceType</a>();
09610 
09611         <span class="comment">/*</span>
09612 <span class="comment">         * If this thread needs a key state event, give one to it. There are</span>
09613 <span class="comment">         * cases where any app may be looping looking at GetKeyState(), plus</span>
09614 <span class="comment">         * calling PeekMessage(). Key state events don't get created unless</span>
09615 <span class="comment">         * new hardware input comes along. If the app isn't receiving hardware</span>
09616 <span class="comment">         * input, it won't get the new key state. So ResyncKeyState() will</span>
09617 <span class="comment">         * ensure that if the app is looping on GetKeyState(), it'll get the</span>
09618 <span class="comment">         * right key state.</span>
09619 <span class="comment">         */</span>
09620         <span class="keywordflow">if</span> (ptiCurrent-&gt;<a class="code" href="../../d2/d8/structtagTHREADINFO.html#o3">pq</a>-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o21">QF_flags</a> &amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a856">QF_UPDATEKEYSTATE</a>) {
09621             <a class="code" href="../../d4/d1/userk_8h.html#a1235">PostUpdateKeyStateEvent</a>(ptiCurrent-&gt;<a class="code" href="../../d2/d8/structtagTHREADINFO.html#o3">pq</a>);
09622         }
09623     }
09624     retval = <a class="code" href="../../d7/d9/keyboard_8c.html#a1">_GetKeyState</a>(vk);
09625 
09626     <span class="comment">/*</span>
09627 <span class="comment">     * Update the client side key state cache.</span>
09628 <span class="comment">     */</span>
09629     ptiCurrent-&gt;<a class="code" href="../../d2/d8/structtagTHREADINFO.html#o8">pClientInfo</a>-&gt;<a class="code" href="../../d2/d2/struct__CLIENTINFO.html#o15">dwKeyCache</a> = <a class="code" href="../../d1/d8/clglobal_8c.html#a4">gpsi</a>-&gt;dwKeyCache;
09630     RtlCopyMemory(ptiCurrent-&gt;<a class="code" href="../../d2/d8/structtagTHREADINFO.html#o8">pClientInfo</a>-&gt;<a class="code" href="../../d2/d2/struct__CLIENTINFO.html#o16">afKeyState</a>,
09631                   ptiCurrent-&gt;<a class="code" href="../../d2/d8/structtagTHREADINFO.html#o3">pq</a>-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o17">afKeyState</a>,
09632                   CBKEYCACHE);
09633 
09634     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a10">ENDRECV_SHARED</a>();
09635 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a234" doxytag="ntuser.h::NtUserGetListBoxInfo" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> NtUserGetListBoxInfo           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hwnd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l03603">3603</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d7/d6/winable2_8c-source.html#l00946">_GetListBoxInfo()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00144">BEGINRECV_HWND_SHARED</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00154">ENDRECV_HWND_SHARED</a>, and <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>.
<p>
<pre class="fragment"><div>03604 {
03605     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a20">BEGINRECV_HWND_SHARED</a>(DWORD, 0, hwnd);
03606 
03607     <span class="comment">/*</span>
03608 <span class="comment">     * Get the listbox info</span>
03609 <span class="comment">     */</span>
03610     retval = <a class="code" href="../../d6/d7/winable2_8c.html#a7">_GetListBoxInfo</a>(pwnd);
03611 
03612     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserGetListBoxInfo"</span>);
03613     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a21">ENDRECV_HWND_SHARED</a>();
03614 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a193" doxytag="ntuser.h::NtUserGetListboxString" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LRESULT NtUserGetListboxString           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>msg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN WPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d1/d9/struct__LARGE__STRING.html">PLARGE_STRING</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pString</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG_PTR&nbsp;</td>
          <td class="mdname" nowrap> <em>xParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>xpfn</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PBOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>pbNotString</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a239" doxytag="ntuser.h::NtUserGetMenuBarInfo" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserGetMenuBarInfo           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN long&nbsp;</td>
          <td class="mdname" nowrap> <em>idObject</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN long&nbsp;</td>
          <td class="mdname" nowrap> <em>idItem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN OUT PMENUBARINFO&nbsp;</td>
          <td class="mdname" nowrap> <em>pmbi</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l03785">3785</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00172">BEGINRECV_HWNDLOCK</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d0/d7/halvprnt_8c-source.html#l00031">BYTE</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00186">ENDRECV_HWNDLOCK</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d0/d4/probe_8c-source.html#l00034">ProbeForWrite()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00343">StubExceptionHandler</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d7/d6/winable2_8c-source.html#l00580">xxxGetMenuBarInfo()</a>.
<p>
<pre class="fragment"><div>03790 {
03791     MENUBARINFO mbi;
03792 
03793     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a24">BEGINRECV_HWNDLOCK</a>(BOOL, FALSE, hwnd);
03794 
03795     <span class="comment">/*</span>
03796 <span class="comment">     * Probe arguments</span>
03797 <span class="comment">     */</span>
03798     <span class="keywordflow">try</span> {
03799 <span class="preprocessor">#if defined(_X86_)</span>
03800 <span class="preprocessor"></span>        <a class="code" href="../../d5/d8/ex_8h.html#a259">ProbeForWrite</a>(pmbi, <span class="keyword">sizeof</span>(*pmbi), <span class="keyword">sizeof</span>(BYTE));
03801 <span class="preprocessor">#else</span>
03802 <span class="preprocessor"></span>        <a class="code" href="../../d5/d8/ex_8h.html#a259">ProbeForWrite</a>(pmbi, <span class="keyword">sizeof</span>(*pmbi), <span class="keyword">sizeof</span>(DWORD));
03803 <span class="preprocessor">#endif</span>
03804 <span class="preprocessor"></span>        mbi.cbSize = pmbi-&gt;cbSize;
03805     } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(TRUE)) {
03806         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
03807     }
03808 
03809     <span class="comment">/*</span>
03810 <span class="comment">     * Get the menubar info</span>
03811 <span class="comment">     */</span>
03812     retval = <a class="code" href="../../d6/d7/winable2_8c.html#a5">xxxGetMenuBarInfo</a>(pwnd, idObject, idItem, &amp;mbi);
03813 
03814     <span class="keywordflow">if</span> (retval) {
03815         <span class="keywordflow">try</span> {
03816             *pmbi = mbi;
03817         } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(TRUE)) {
03818             <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
03819         }
03820     }
03821 
03822     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserGetMenuBarInfo"</span>);
03823     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a25">ENDRECV_HWNDLOCK</a>();
03824 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a79" doxytag="ntuser.h::NtUserGetMenuIndex" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> NtUserGetMenuIndex           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HMENU&nbsp;</td>
          <td class="mdname" nowrap> <em>hMenu</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN HMENU&nbsp;</td>
          <td class="mdname" nowrap> <em>hSubMenu</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04462">4462</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00094">BEGINRECV_SHARED</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02791">tagMENU::cItems</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00099">ENDRECV_SHARED</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02797">tagMENU::rgItems</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02606">tagITEM::spSubMenu</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, and <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00448">ValidateHMENU</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/client_8c-source.html#l02696">UserRegisterWowHandlers()</a>.
<p>
<pre class="fragment"><div>04465 {
04466 
04467     <a class="code" href="../../d1/d1/structtagMENU.html">PMENU</a> pmenu;
04468     <a class="code" href="../../d1/d1/structtagMENU.html">PMENU</a> psubmenu;
04469     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> idx;
04470 
04471     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a9">BEGINRECV_SHARED</a>(DWORD, 0);
04472 
04473     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a61">ValidateHMENU</a>(pmenu, hMenu);
04474     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a61">ValidateHMENU</a>(psubmenu, hSubMenu);
04475 
04476     retval = (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)-1;
04477 
04478     <span class="keywordflow">if</span> (pmenu &amp;&amp; psubmenu) {
04479         <span class="keywordflow">for</span> (idx=0; idx&lt;pmenu-&gt;<a class="code" href="../../d1/d1/structtagMENU.html#o4">cItems</a>; idx++)
04480             <span class="keywordflow">if</span> ((pmenu-&gt;<a class="code" href="../../d1/d1/structtagMENU.html#o9">rgItems</a>[idx].<a class="code" href="../../d0/d9/structtagITEM.html#o3">spSubMenu</a> == psubmenu)) {
04481                 retval = idx;
04482                 <span class="keywordflow">break</span>;
04483             }
04484     }
04485 
04486     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserGetMenuIndex"</span>);
04487     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a10">ENDRECV_SHARED</a>();
04488 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a178" doxytag="ntuser.h::NtUserGetMenuItemRect" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserGetMenuItemRect           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN HMENU&nbsp;</td>
          <td class="mdname" nowrap> <em>hMenu</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>uItem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT LPRECT&nbsp;</td>
          <td class="mdname" nowrap> <em>lprcItem</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l07381">7381</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00206">BEGINRECV_HWNDLOCK_OPT</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00251">CLEANUPRECV</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00224">ENDRECV_HWNDLOCK_OPT</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00336">MSGERRORCLEANUP</a>, <a class="el" href="../../d6/d7/ex_8h-source.html#l01902">ProbeAndWriteStructure</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00343">StubExceptionHandler</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00365">ThreadLockAlwaysWithPti</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00366">ThreadUnlock</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00448">ValidateHMENU</a>, and <a class="el" href="../../d5/d1/mncomput_8c-source.html#l00911">xxxGetMenuItemRect()</a>.
<p>
<pre class="fragment"><div>07386 {
07387 
07388     <span class="comment">//</span>
07389     <span class="comment">// N.B. This function has implicit window translation and thread locking</span>
07390     <span class="comment">//      enabled. These operations are performed in the User server API</span>
07391     <span class="comment">//      dispatcher.</span>
07392     <span class="comment">//</span>
07393 
07394     <a class="code" href="../../d1/d1/structtagMENU.html">PMENU</a> pmenu;
07395     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpmenu;
07396     RECT rcItem;
07397 
07398     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a28">BEGINRECV_HWNDLOCK_OPT</a>(DWORD, 0, hwnd);
07399 
07400     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a61">ValidateHMENU</a>(pmenu, hMenu);
07401 
07402     <a class="code" href="../../d6/d0/usercli_8h.html#a39">ThreadLockAlwaysWithPti</a>(ptiCurrent, pmenu, &amp;tlpmenu);
07403 
07404     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1601">xxxGetMenuItemRect</a>(
07405                 pwnd,
07406                 pmenu,
07407                 uItem,
07408                 &amp;rcItem);
07409     <span class="comment">/*</span>
07410 <span class="comment">     * Probe arguments</span>
07411 <span class="comment">     */</span>
07412     <span class="keywordflow">try</span> {
07413         <a class="code" href="../../d5/d8/ex_8h.html#a54">ProbeAndWriteStructure</a>(lprcItem, rcItem, RECT);
07414     } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(TRUE)) {
07415         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a44">MSGERRORCLEANUP</a>(0);
07416     }
07417 
07418     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a33">CLEANUPRECV</a>();
07419 
07420     <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpmenu);
07421 
07422     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserGetMenuItemRect"</span>);
07423     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a29">ENDRECV_HWNDLOCK_OPT</a>();
07424 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a33" doxytag="ntuser.h::NtUserGetMessage" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserGetMessage           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">OUT LPMSG&nbsp;</td>
          <td class="mdname" nowrap> <em>pmsg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>wMsgFilterMin</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>wMsgFilterMax</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l01888">1888</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d3/d0/userexts_8c-source.html#l01830">msg</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d6/d7/ex_8h-source.html#l01902">ProbeAndWriteStructure</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00343">StubExceptionHandler</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d5/d0/userk_8h-source.html#l05555">xxxGetMessage</a>.
<p>
Referenced by <a class="el" href="../../d1/d7/ntcftxt_8h-source.html#l00249">GetMessage()</a>.
<p>
<pre class="fragment"><div>01893 {
01894     MSG <a class="code" href="../../d2/d1/userexts_8c.html#a129">msg</a>;
01895 
01896     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(BOOL, FALSE);
01897 
01898     retval = <a class="code" href="../../d4/d1/userk_8h.html#a577">xxxGetMessage</a>(
01899             &amp;msg,
01900             hwnd,
01901             wMsgFilterMin,
01902             wMsgFilterMax);
01903 
01904     <span class="comment">/*</span>
01905 <span class="comment">     * Probe arguments</span>
01906 <span class="comment">     */</span>
01907     <span class="keywordflow">try</span> {
01908         <a class="code" href="../../d5/d8/ex_8h.html#a54">ProbeAndWriteStructure</a>(pmsg, msg, MSG);
01909     } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(TRUE)) {
01910         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
01911     }
01912 
01913     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserGetMessage"</span>);
01914     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
01915 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a163" doxytag="ntuser.h::NtUserGetMouseMovePointsEx" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI int NtUserGetMouseMovePointsEx           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>cbSize</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN CONST MOUSEMOVEPOINT *&nbsp;</td>
          <td class="mdname" nowrap> <em>lppt</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT MOUSEMOVEPOINT *&nbsp;</td>
          <td class="mdname" nowrap> <em>lpptBuf</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>nBufPoints</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>resolution</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06914">6914</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d7/d7/ntinput_8c-source.html#l03652">_GetMouseMovePointsEx()</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00147">DATAALIGN</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l01758">MAX_MOUSEPOINTS</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d6/d7/ex_8h-source.html#l01431">ProbeAndReadStructure</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00158">ProbeForWriteBuffer</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00343">StubExceptionHandler</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
<pre class="fragment"><div>06920 {
06921     MOUSEMOVEPOINT mmp;
06922     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(<span class="keywordtype">int</span>, -1);
06923 
06924     <span class="keywordflow">if</span> (cbSize != <span class="keyword">sizeof</span>(MOUSEMOVEPOINT) || nBufPoints &gt; <a class="code" href="../../d4/d1/userk_8h.html#a148">MAX_MOUSEPOINTS</a>) {
06925 
06926         RIPERR2(ERROR_INVALID_PARAMETER, RIP_VERBOSE,
06927                 <span class="stringliteral">"GetMouseMovePointsEx: invalid cbSize %d or nBufPoints %d"</span>,
06928                 cbSize, nBufPoints);
06929         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
06930     }
06931 
06932     <span class="comment">/*</span>
06933 <span class="comment">     * Probe arguments</span>
06934 <span class="comment">     */</span>
06935     <span class="keywordflow">try</span> {
06936         mmp = <a class="code" href="../../d5/d8/ex_8h.html#a27">ProbeAndReadStructure</a>(lppt, MOUSEMOVEPOINT);
06937         <a class="code" href="../../d4/d1/userk_8h.html#a25">ProbeForWriteBuffer</a>(lpptBuf, nBufPoints, DATAALIGN);
06938     } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(TRUE)) {
06939         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
06940     }
06941 
06942     <span class="comment">/*</span>
06943 <span class="comment">     * GetMouseMovePointsEx protects itself with a try block.</span>
06944 <span class="comment">     * No it doesn't!</span>
06945 <span class="comment">     */</span>
06946 
06947     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1025">_GetMouseMovePointsEx</a>(&amp;mmp, lpptBuf, nBufPoints, resolution);
06948 
06949     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserGetMouseMovePointsEx"</span>);
06950     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
06951 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a6" doxytag="ntuser.h::NtUserGetObjectInformation" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserGetObjectInformation           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hObject</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN int&nbsp;</td>
          <td class="mdname" nowrap> <em>nIndex</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PVOID&nbsp;</td>
          <td class="mdname" nowrap> <em>pvInfo</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>nLength</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>pnLengthNeeded</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a102" doxytag="ntuser.h::NtUserGetOpenClipboardWindow" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI HWND NtUserGetOpenClipboardWindow           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">VOID&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05183">5183</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00094">BEGINRECV_SHARED</a>, <a class="el" href="../../d9/d7/ntuser_2kernel_2clipbrd_8c-source.html#l00049">CheckClipboardAccess()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00099">ENDRECV_SHARED</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01512">PtoH</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l02726">tagWINDOWSTATION::spwndClipOpen</a>, and <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>.
<p>
<pre class="fragment"><div>05185 {
05186     <a class="code" href="../../d4/d9/structtagWINDOWSTATION.html">PWINDOWSTATION</a> pwinsta;
05187 
05188     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a9">BEGINRECV_SHARED</a>(HWND, NULL);
05189 
05190     <span class="comment">/*</span>
05191 <span class="comment">     * Blow it off if the caller doesn't have the proper access rights</span>
05192 <span class="comment">     */</span>
05193     <span class="keywordflow">if</span> ((pwinsta = <a class="code" href="../../d8/d8/ntuser_2kernel_2clipbrd_8c.html#a14">CheckClipboardAccess</a>()) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
05194         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
05195     }
05196 
05197     retval = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a448">PtoH</a>(pwinsta-&gt;<a class="code" href="../../d4/d9/structtagWINDOWSTATION.html#o7">spwndClipOpen</a>);
05198 
05199     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserGetOpenClipboardWindow"</span>);
05200     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a10">ENDRECV_SHARED</a>();
05201 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a103" doxytag="ntuser.h::NtUserGetPriorityClipboardFormat" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI int NtUserGetPriorityClipboardFormat           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">OUT UINT *&nbsp;</td>
          <td class="mdname" nowrap> <em>paFormatPriorityList</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN int&nbsp;</td>
          <td class="mdname" nowrap> <em>cFormats</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a14" doxytag="ntuser.h::NtUserGetProcessWindowStation" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI HWINSTA NtUserGetProcessWindowStation           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">VOID&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l01150">1150</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d9/d7/winsta_8c-source.html#l01240">_GetProcessWindowStation()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00094">BEGINRECV_SHARED</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00099">ENDRECV_SHARED</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/client_8c-source.html#l02420">CommonCreateDesktop()</a>, and <a class="el" href="../../d4/d7/client_8c-source.html#l02555">CommonOpenDesktop()</a>.
<p>
<pre class="fragment"><div>01152 {
01153     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a9">BEGINRECV_SHARED</a>(HWINSTA, NULL);
01154 
01155     <a class="code" href="../../d8/d8/winsta_8c.html#a11">_GetProcessWindowStation</a>(&amp;retval);
01156 
01157     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserGetProcessWindowStation"</span>);
01158     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a10">ENDRECV_SHARED</a>();
01159 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a232" doxytag="ntuser.h::NtUserGetScrollBarInfo" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserGetScrollBarInfo           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN LONG&nbsp;</td>
          <td class="mdname" nowrap> <em>idObject</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN OUT PSCROLLBARINFO&nbsp;</td>
          <td class="mdname" nowrap> <em>ptbi</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l03666">3666</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d7/d6/winable2_8c-source.html#l00309">_GetScrollBarInfo()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00144">BEGINRECV_HWND_SHARED</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00147">DATAALIGN</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00154">ENDRECV_HWND_SHARED</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d0/d4/probe_8c-source.html#l00034">ProbeForWrite()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00343">StubExceptionHandler</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
<pre class="fragment"><div>03667 {
03668     SCROLLBARINFO sbi;
03669 
03670     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a20">BEGINRECV_HWND_SHARED</a>(BOOL, FALSE, hwnd);
03671 
03672     <span class="comment">/*</span>
03673 <span class="comment">     * Probe arguments and copy out results</span>
03674 <span class="comment">     */</span>
03675     <span class="keywordflow">try</span> {
03676         <a class="code" href="../../d5/d8/ex_8h.html#a259">ProbeForWrite</a>(psbi, <span class="keyword">sizeof</span>(*psbi), DATAALIGN);
03677         sbi.cbSize = psbi-&gt;cbSize;
03678     } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(TRUE)) {
03679         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
03680     }
03681     <span class="comment">/*</span>
03682 <span class="comment">     * Get the scrollbar info</span>
03683 <span class="comment">     */</span>
03684     retval = <a class="code" href="../../d6/d7/winable2_8c.html#a2">_GetScrollBarInfo</a>(pwnd, idObject, &amp;sbi);
03685 
03686     <span class="keywordflow">if</span> (retval) {
03687         <span class="keywordflow">try</span> {
03688             *psbi = sbi;
03689         } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(TRUE)) {
03690             <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
03691         }
03692     }
03693 
03694     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserGetScrollBarInfo"</span>);
03695     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a21">ENDRECV_HWND_SHARED</a>();
03696 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a104" doxytag="ntuser.h::NtUserGetSystemMenu" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI HMENU NtUserGetSystemMenu           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>bRevert</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05226">5226</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00172">BEGINRECV_HWNDLOCK</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00186">ENDRECV_HWNDLOCK</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01512">PtoH</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, and <a class="el" href="../../d6/d2/mnsys_8c-source.html#l00368">xxxGetSystemMenu()</a>.
<p>
Referenced by <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02101">DefFrameProcWorker()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02531">DefMDIChildProcWorker()</a>, <a class="el" href="../../d1/d8/dlgbegin_8c-source.html#l00553">InternalCreateDialog()</a>, <a class="el" href="../../d7/d3/msgbox_8c-source.html#l01648">MB_DlgProcWorker()</a>, and <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01657">MDIClientWndProcWorker()</a>.
<p>
<pre class="fragment"><div>05229 {
05230 
05231     <span class="comment">//</span>
05232     <span class="comment">// N.B. This function has implicit window handle translation. This</span>
05233     <span class="comment">//      operation is performed in the User server API dispatcher.</span>
05234     <span class="comment">//</span>
05235 
05236     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a24">BEGINRECV_HWNDLOCK</a>(HMENU, NULL, hwnd);
05237 
05238     retval = (HMENU)<a class="code" href="../../d4/d1/userk_8h.html#a1886">xxxGetSystemMenu</a>(pwnd, bRevert);
05239     retval = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a448">PtoH</a>((PVOID)retval);
05240 
05241     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserGetSystemMenu"</span>);
05242     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a25">ENDRECV_HWNDLOCK</a>();
05243 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a23" doxytag="ntuser.h::NtUserGetThreadDesktop" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI HDESK NtUserGetThreadDesktop           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwThreadId</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN HDESK&nbsp;</td>
          <td class="mdname" nowrap> <em>hdeskConsole</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l01455">1455</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00094">BEGINRECV_SHARED</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00099">ENDRECV_SHARED</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d0/d9/ntosdef_8h.html#a76a70">UserMode</a>, and <a class="el" href="../../d0/d6/desktop_8c-source.html#l04211">xxxGetThreadDesktop()</a>.
<p>
Referenced by <a class="el" href="../../d7/d7/clinit_8c-source.html#l01219">ClientThreadSetup()</a>, and <a class="el" href="../../d4/d9/csrstubs_8c-source.html#l00298">GetThreadDesktop()</a>.
<p>
<pre class="fragment"><div>01458 {
01459     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a9">BEGINRECV_SHARED</a>(HDESK, NULL);
01460 
01461     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1802">xxxGetThreadDesktop</a>(dwThreadId, hdeskConsole, UserMode);
01462 
01463     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserGetThreadDesktop"</span>);
01464     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a10">ENDRECV_SHARED</a>();
01465 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a192" doxytag="ntuser.h::NtUserGetThreadState" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI ULONG_PTR NtUserGetThreadState           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN USERTHREADSTATECLASS&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>ThreadState</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l07799">7799</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d7/d2/queue_8c-source.html#l04206">_GetInputState()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00094">BEGINRECV_SHARED</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l02666">tagDESKTOP::dwConsoleIMEThreadId</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03503">tagPROCESSINFO::dwImeCompatFlags</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00099">ENDRECV_SHARED</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03135">tagQ::ExtraInfo</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l03040">tagCLIENTTHREADINFO::fsChangeBits</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00092">GetCurrentProcessId</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00793">gpidLogon</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00099">gpqForeground</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03381">tagTHREADINFO::hklPrev</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01514">HW</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03325">tagTHREADINFO::pcti</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03319">tagTHREADINFO::ppi</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03321">tagTHREADINFO::pq</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03336">tagTHREADINFO::psmsCurrent</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00059">PtiCurrentShared</a>, <a class="el" href="../../d7/d2/queue_8c-source.html#l04737">PtiFromThreadId()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01512">PtoH</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03327">tagTHREADINFO::rpdesk</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l02347">SET_TIME_LAST_READ</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03733">SMF_CB_REPLY</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03732">SMF_CB_REQUEST</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03727">SMF_REPLY</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03126">tagQ::spcurCurrent</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03380">tagTHREADINFO::spDefaultImc</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03111">tagQ::spwndActive</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03109">tagQ::spwndCapture</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03379">tagTHREADINFO::spwndDefaultIme</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03110">tagQ::spwndFocus</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03339">tagTHREADINFO::timeLast</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/winmgrc_8c-source.html#l00449">GetActiveWindow()</a>, <a class="el" href="../../d4/d7/winmgrc_8c-source.html#l00096">GetCapture()</a>, <a class="el" href="../../d4/d7/winmgrc_8c-source.html#l00461">GetCursor()</a>, <a class="el" href="../../d4/d7/winmgrc_8c-source.html#l00090">GetFocus()</a>, <a class="el" href="../../d4/d7/winmgrc_8c-source.html#l00137">GetInputState()</a>, <a class="el" href="../../d1/d8/clmsg_8c-source.html#l01728">GetMessageExtraInfo()</a>, <a class="el" href="../../d1/d8/clmsg_8c-source.html#l01716">GetMessageTime()</a>, <a class="el" href="../../d3/d1/hotkey_8c-source.html#l00292">IMENonIMEToggle()</a>, <a class="el" href="../../d0/d9/imectl_8c-source.html#l00798">ImeSetContextHandler()</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00026">ImmCreateContext()</a>, <a class="el" href="../../d8/d9/imminit_8c-source.html#l00067">ImmDllInitialize()</a>, <a class="el" href="../../d7/d8/clwinnls_8c-source.html#l00484">ImmEnableIME()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00027">ImmGetDefaultIMEWnd()</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00225">ImmGetSaveContext()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00689">ImmLockClientImc()</a>, <a class="el" href="../../d7/d9/immime_8c-source.html#l00040">InquireIme()</a>, <a class="el" href="../../d1/d8/clmsg_8c-source.html#l01750">InSendMessage()</a>, <a class="el" href="../../d1/d8/clmsg_8c-source.html#l01769">InSendMessageEx()</a>, and <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00483">PeekMessage()</a>.
<p>
<pre class="fragment"><div>07801 {
07802     <a class="code" href="../../d2/d8/structtagTHREADINFO.html">PTHREADINFO</a> ptiCurrent = <a class="code" href="../../d4/d1/userk_8h.html#a10">PtiCurrentShared</a>();
07803 
07804     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a9">BEGINRECV_SHARED</a>(ULONG_PTR, 0);
07805 
07806     <span class="keywordflow">switch</span> (ThreadState) {
07807     <span class="keywordflow">case</span> UserThreadStateFocusWindow:
07808         retval = (ULONG_PTR)<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a450">HW</a>(ptiCurrent-&gt;<a class="code" href="../../d2/d8/structtagTHREADINFO.html#o3">pq</a>-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o7">spwndFocus</a>);
07809         <span class="keywordflow">break</span>;
07810     <span class="keywordflow">case</span> UserThreadStateActiveWindow:
07811         retval = (ULONG_PTR)<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a450">HW</a>(ptiCurrent-&gt;<a class="code" href="../../d2/d8/structtagTHREADINFO.html#o3">pq</a>-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o8">spwndActive</a>);
07812         <span class="keywordflow">break</span>;
07813     <span class="keywordflow">case</span> UserThreadStateCaptureWindow:
07814         retval = (ULONG_PTR)<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a450">HW</a>(ptiCurrent-&gt;<a class="code" href="../../d2/d8/structtagTHREADINFO.html#o3">pq</a>-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o6">spwndCapture</a>);
07815         <span class="keywordflow">break</span>;
07816     <span class="keywordflow">case</span> UserThreadStateDefaultImeWindow:
07817         retval = (ULONG_PTR)<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a450">HW</a>(ptiCurrent-&gt;<a class="code" href="../../d2/d8/structtagTHREADINFO.html#o39">spwndDefaultIme</a>);
07818         <span class="keywordflow">break</span>;
07819     <span class="keywordflow">case</span> UserThreadStateDefaultInputContext:
07820         retval = (ULONG_PTR)<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a448">PtoH</a>(ptiCurrent-&gt;<a class="code" href="../../d2/d8/structtagTHREADINFO.html#o40">spDefaultImc</a>);
07821         <span class="keywordflow">break</span>;
07822     <span class="keywordflow">case</span> UserThreadStateImeCompatFlags:
07823         UserAssert(ptiCurrent-&gt;<a class="code" href="../../d2/d8/structtagTHREADINFO.html#o2">ppi</a> != NULL);
07824         retval = (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)(ptiCurrent-&gt;<a class="code" href="../../d2/d8/structtagTHREADINFO.html#o2">ppi</a>-&gt;<a class="code" href="../../d7/d3/structtagPROCESSINFO.html#o26">dwImeCompatFlags</a>);
07825         <span class="keywordflow">break</span>;
07826     <span class="keywordflow">case</span> UserThreadStatePreviousKeyboardLayout:
07827         retval = (ULONG_PTR)(ptiCurrent-&gt;<a class="code" href="../../d2/d8/structtagTHREADINFO.html#o41">hklPrev</a>);
07828         <span class="keywordflow">break</span>;
07829     <span class="keywordflow">case</span> UserThreadStateIsWinlogonThread:
07830         <span class="comment">// Client IMM checks if the process is Login;</span>
07831         <span class="comment">// to prevent switching dictionaries, etc.</span>
07832         <span class="comment">// LATER: gpidLogin per WinStation ?</span>
07833         retval = (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)(<a class="code" href="../../d4/d1/userk_8h.html#a19">GetCurrentProcessId</a>() == <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a298">gpidLogon</a>);
07834         <span class="keywordflow">break</span>;
07835     <span class="keywordflow">case</span> UserThreadStateIsConImeThread:
07836         UserAssert(ptiCurrent-&gt;<a class="code" href="../../d2/d8/structtagTHREADINFO.html#o6">rpdesk</a> != NULL);
07837         retval = (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)(<a class="code" href="../../d4/d1/userk_8h.html#a1201">PtiFromThreadId</a>(ptiCurrent-&gt;<a class="code" href="../../d2/d8/structtagTHREADINFO.html#o6">rpdesk</a>-&gt;<a class="code" href="../../d0/d3/structtagDESKTOP.html#o18">dwConsoleIMEThreadId</a>) == ptiCurrent);
07838         <span class="keywordflow">break</span>;
07839     <span class="keywordflow">case</span> UserThreadStateInputState:
07840         retval = (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)<a class="code" href="../../d4/d1/userk_8h.html#a1647">_GetInputState</a>();
07841         <span class="keywordflow">break</span>;
07842     <span class="keywordflow">case</span> UserThreadStateCursor:
07843         retval = (ULONG_PTR)<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a448">PtoH</a>(ptiCurrent-&gt;<a class="code" href="../../d2/d8/structtagTHREADINFO.html#o3">pq</a>-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o19">spcurCurrent</a>);
07844         <span class="keywordflow">break</span>;
07845     <span class="keywordflow">case</span> UserThreadStateChangeBits:
07846         retval = ptiCurrent-&gt;<a class="code" href="../../d2/d8/structtagTHREADINFO.html#o5">pcti</a>-&gt;<a class="code" href="../../d4/d0/structtagCLIENTTHREADINFO.html#o1">fsChangeBits</a>;
07847         <span class="keywordflow">break</span>;
07848     <span class="keywordflow">case</span> UserThreadStatePeekMessage:
07849         <span class="comment">/*</span>
07850 <span class="comment">         * Update the last read time so that hung app painting won't occur.</span>
07851 <span class="comment">         */</span>
07852         <a class="code" href="../../d4/d1/userk_8h.html#a257">SET_TIME_LAST_READ</a>(ptiCurrent);
07853         retval = (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
07854         <span class="keywordflow">break</span>;
07855     <span class="keywordflow">case</span> UserThreadStateExtraInfo:
07856         retval = ptiCurrent-&gt;<a class="code" href="../../d2/d8/structtagTHREADINFO.html#o3">pq</a>-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o25">ExtraInfo</a>;
07857         <span class="keywordflow">break</span>;
07858 
07859     <span class="keywordflow">case</span> UserThreadStateInSendMessage:
07860         <span class="keywordflow">if</span> (ptiCurrent-&gt;<a class="code" href="../../d2/d8/structtagTHREADINFO.html#o12">psmsCurrent</a> != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
07861             <span class="keywordflow">if</span> (ptiCurrent-&gt;<a class="code" href="../../d2/d8/structtagTHREADINFO.html#o12">psmsCurrent</a>-&gt;ptiSender != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
07862                 retval = ISMEX_SEND;
07863             } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ptiCurrent-&gt;<a class="code" href="../../d2/d8/structtagTHREADINFO.html#o12">psmsCurrent</a>-&gt;flags &amp; (<a class="code" href="../../d4/d1/userk_8h.html#a429">SMF_CB_REQUEST</a> | <a class="code" href="../../d4/d1/userk_8h.html#a430">SMF_CB_REPLY</a>)) {
07864                 retval = ISMEX_CALLBACK;
07865             } <span class="keywordflow">else</span> {
07866                 retval = ISMEX_NOTIFY;
07867             }
07868 
07869             <span class="keywordflow">if</span> (ptiCurrent-&gt;<a class="code" href="../../d2/d8/structtagTHREADINFO.html#o12">psmsCurrent</a>-&gt;flags &amp; <a class="code" href="../../d4/d1/userk_8h.html#a424">SMF_REPLY</a>) {
07870                 retval |= ISMEX_REPLIED;
07871             }
07872         } <span class="keywordflow">else</span> {
07873             retval = ISMEX_NOSEND;
07874         }
07875         <span class="keywordflow">break</span>;
07876 
07877     <span class="keywordflow">case</span> UserThreadStateMessageTime:
07878         retval = ptiCurrent-&gt;<a class="code" href="../../d2/d8/structtagTHREADINFO.html#o14">timeLast</a>;
07879         <span class="keywordflow">break</span>;
07880     <span class="keywordflow">case</span> UserThreadStateIsForeground:
07881         retval = (ptiCurrent-&gt;<a class="code" href="../../d2/d8/structtagTHREADINFO.html#o3">pq</a> == <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a29">gpqForeground</a>);
07882         <span class="keywordflow">break</span>;
07883     <span class="keywordflow">case</span> UserThreadConnect:
07884         retval = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
07885         <span class="keywordflow">break</span>;
07886     <span class="keywordflow">default</span>:
07887         RIPMSG1(RIP_WARNING, <span class="stringliteral">"NtUserGetThreadState invalid ThreadState:%#x"</span>, ThreadState);
07888         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
07889     }
07890 
07891     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a10">ENDRECV_SHARED</a>();
07892 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a231" doxytag="ntuser.h::NtUserGetTitleBarInfo" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserGetTitleBarInfo           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN OUT PTITLEBARINFO&nbsp;</td>
          <td class="mdname" nowrap> <em>ptbi</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l03527">3527</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00172">BEGINRECV_HWNDLOCK</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00147">DATAALIGN</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00186">ENDRECV_HWNDLOCK</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d0/d4/probe_8c-source.html#l00034">ProbeForWrite()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00343">StubExceptionHandler</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d7/d6/winable2_8c-source.html#l00170">xxxGetTitleBarInfo()</a>.
<p>
<pre class="fragment"><div>03528 {
03529     TITLEBARINFO tbi;
03530 
03531     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a24">BEGINRECV_HWNDLOCK</a>(BOOL, FALSE, hwnd);
03532 
03533     <span class="comment">/*</span>
03534 <span class="comment">     * Probe arguments and copy out results</span>
03535 <span class="comment">     */</span>
03536     <span class="keywordflow">try</span> {
03537         <a class="code" href="../../d5/d8/ex_8h.html#a259">ProbeForWrite</a>(ptbi, <span class="keyword">sizeof</span>(*ptbi), DATAALIGN);
03538         tbi.cbSize = ptbi-&gt;cbSize;
03539     } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(TRUE)) {
03540         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
03541     }
03542     <span class="comment">/*</span>
03543 <span class="comment">     * Get the titlebar info</span>
03544 <span class="comment">     */</span>
03545     retval = <a class="code" href="../../d6/d7/winable2_8c.html#a1">xxxGetTitleBarInfo</a>(pwnd, &amp;tbi);
03546     <span class="keywordflow">if</span> (retval) {
03547         <span class="keywordflow">try</span> {
03548             *ptbi = tbi;
03549         } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(TRUE)) {
03550             <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
03551         }
03552     }
03553 
03554     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserGetTitleBarInfo"</span>);
03555     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a25">ENDRECV_HWNDLOCK</a>();
03556 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a105" doxytag="ntuser.h::NtUserGetUpdateRect" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserGetUpdateRect           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN LPRECT prect&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>bErase</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05245">5245</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00172">BEGINRECV_HWNDLOCK</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00186">ENDRECV_HWNDLOCK</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d6/d7/ex_8h-source.html#l01902">ProbeAndWriteStructure</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00343">StubExceptionHandler</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d9/d8/update_8c-source.html#l01525">xxxGetUpdateRect()</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/client_8c-source.html#l01357">GetUpdateRect()</a>.
<p>
<pre class="fragment"><div>05249 {
05250 
05251     <span class="comment">//</span>
05252     <span class="comment">// N.B. This function has implicit window translation and thread locking</span>
05253     <span class="comment">//      enabled. These operations are performed in the User server API</span>
05254     <span class="comment">//      dispatcher.</span>
05255     <span class="comment">//</span>
05256 
05257     RECT rect2;
05258     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a24">BEGINRECV_HWNDLOCK</a>(DWORD, 0, hwnd);
05259 
05260     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1674">xxxGetUpdateRect</a>(
05261             pwnd,
05262             prect? &amp;rect2:NULL,
05263             bErase);
05264     <span class="comment">/*</span>
05265 <span class="comment">     * Probe arguments</span>
05266 <span class="comment">     */</span>
05267     <span class="keywordflow">if</span> (ARGUMENT_PRESENT(prect)) {
05268         <span class="keywordflow">try</span> {
05269             <a class="code" href="../../d5/d8/ex_8h.html#a54">ProbeAndWriteStructure</a>(prect, rect2, RECT);
05270         } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(TRUE)) {
05271             <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
05272         }
05273     }
05274 
05275     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserGetUpdateRect"</span>);
05276     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a25">ENDRECV_HWNDLOCK</a>();
05277 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a157" doxytag="ntuser.h::NtUserGetUpdateRgn" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI int NtUserGetUpdateRgn           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN HRGN&nbsp;</td>
          <td class="mdname" nowrap> <em>hRgn</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>bErase</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06715">6715</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00172">BEGINRECV_HWNDLOCK</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00186">ENDRECV_HWNDLOCK</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, and <a class="el" href="../../d9/d8/update_8c-source.html#l01665">xxxGetUpdateRgn()</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/client_8c-source.html#l01328">GetUpdateRgn()</a>.
<p>
<pre class="fragment"><div>06719 {
06720 
06721     <span class="comment">//</span>
06722     <span class="comment">// N.B. This function has implicit window translation and thread locking</span>
06723     <span class="comment">//      enabled. These operations are performed in the User server API</span>
06724     <span class="comment">//      dispatcher.</span>
06725     <span class="comment">//</span>
06726 
06727     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a24">BEGINRECV_HWNDLOCK</a>(<span class="keywordtype">int</span>, ERROR, hwnd);
06728 
06729     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1675">xxxGetUpdateRgn</a>(
06730             pwnd,
06731             hrgn,
06732             bErase);
06733 
06734     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserGetUpdateRgn"</span>);
06735     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a25">ENDRECV_HWNDLOCK</a>();
06736 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a156" doxytag="ntuser.h::NtUserGetWindowDC" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI HDC NtUserGetWindowDC           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hwnd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06700">6700</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d9/d2/dc_8c-source.html#l00201">_GetWindowDC()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00075">BEGINATOMICRECV</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00081">ENDATOMICRECV</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, and <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00410">ValidateHWNDOPT</a>.
<p>
<pre class="fragment"><div>06702 {
06703     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwnd;
06704 
06705     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a5">BEGINATOMICRECV</a>(HDC, NULL);
06706 
06707     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a57">ValidateHWNDOPT</a>(pwnd, hwnd);
06708 
06709     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1696">_GetWindowDC</a>(pwnd);
06710 
06711     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserGetWindowDC"</span>);
06712     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a6">ENDATOMICRECV</a>();
06713 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a72" doxytag="ntuser.h::NtUserGetWindowPlacement" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserGetWindowPlacement           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PWINDOWPLACEMENT&nbsp;</td>
          <td class="mdname" nowrap> <em>pwp</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04208">4208</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d0/d7/kernel_2winmgr_8c-source.html#l00679">_GetWindowPlacement()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00110">BEGINRECV_HWND</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00120">ENDRECV_HWND</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00878">ProbeForWriteWindowPlacement</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00343">StubExceptionHandler</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02319">WFWIN40COMPAT</a>.
<p>
<pre class="fragment"><div>04211 {
04212 
04213     <span class="comment">//</span>
04214     <span class="comment">// N.B. This function has implicit window handle translation. This</span>
04215     <span class="comment">//      operation is performed in the User server API dispatcher.</span>
04216     <span class="comment">//</span>
04217 
04218     <span class="comment">/*</span>
04219 <span class="comment">     * Note -- this routine updates the checkpoint, so it needs exclusive</span>
04220 <span class="comment">     * use of the crit sect.</span>
04221 <span class="comment">     */</span>
04222 
04223     WINDOWPLACEMENT wp;
04224     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a14">BEGINRECV_HWND</a>(DWORD, 0, hwnd);
04225 
04226     <span class="comment">/*</span>
04227 <span class="comment">     * Probe arguments</span>
04228 <span class="comment">     */</span>
04229     <span class="keywordflow">try</span> {
04230         <a class="code" href="../../d4/d1/userk_8h.html#a77">ProbeForWriteWindowPlacement</a>(pwp);
04231         wp.length = pwp-&gt;length;
04232 <span class="preprocessor">#ifdef LATER</span>
04233 <span class="preprocessor"></span>        <span class="keywordflow">if</span> (pwp-&gt;length != <span class="keyword">sizeof</span>(WINDOWPLACEMENT)) {
04234             <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFWIN40COMPAT)) {
04235                 RIPERR1(ERROR_INVALID_PARAMETER, RIP_WARNING, <span class="stringliteral">"GetWindowPlacement: invalid length %lX"</span>, pwp-&gt;length);
04236                 <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
04237             } <span class="keywordflow">else</span> {
04238                 RIPMSG1(RIP_WARNING, <span class="stringliteral">"GetWindowPlacement: invalid length %lX"</span>, pwp-&gt;length);
04239                 pwp-&gt;length = <span class="keyword">sizeof</span>(WINDOWPLACEMENT);
04240             }
04241         }
04242 <span class="preprocessor">#endif</span>
04243 <span class="preprocessor"></span>
04244     } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(TRUE)) {
04245         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
04246     }
04247 
04248     retval = <a class="code" href="../../d9/d7/kernel_2winmgr_8c.html#a9">_GetWindowPlacement</a>(pwnd, &amp;wp);
04249 
04250     <span class="keywordflow">try</span> {
04251         RtlCopyMemory(pwp, &amp;wp, <span class="keyword">sizeof</span> (WINDOWPLACEMENT));
04252     } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(TRUE)) {
04253         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
04254     }
04255 
04256     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserGetWindowPlacement"</span>);
04257     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a15">ENDRECV_HWND</a>();
04258 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a46" doxytag="ntuser.h::NtUserGetWOWClass" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI <a class="el" href="../../d7/d0/structtagCLS.html">PCLS</a> NtUserGetWOWClass           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HINSTANCE&nbsp;</td>
          <td class="mdname" nowrap> <em>hInstance</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PUNICODE_STRING&nbsp;</td>
          <td class="mdname" nowrap> <em>pString</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l03023">3023</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d3/d6/class_8c-source.html#l00616">_GetWOWClass()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00094">BEGINRECV_SHARED</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00099">ENDRECV_SHARED</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d6/d7/ex_8h-source.html#l01417">ProbeAndReadUnicodeString</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00612">ProbeForReadUnicodeStringBuffer</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00343">StubExceptionHandler</a>, and <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>.
<p>
Referenced by <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00100">GetClassWOWWords()</a>.
<p>
<pre class="fragment"><div>03026 {
03027     UNICODE_STRING strClassName;
03028 
03029     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a9">BEGINRECV_SHARED</a>(<a class="code" href="../../d7/d0/structtagCLS.html">PCLS</a>, NULL);
03030 
03031     <span class="comment">/*</span>
03032 <span class="comment">     * Probe arguments</span>
03033 <span class="comment">     */</span>
03034     <span class="keywordflow">try</span> {
03035         strClassName = <a class="code" href="../../d5/d8/ex_8h.html#a26">ProbeAndReadUnicodeString</a>(pString);
03036         <a class="code" href="../../d4/d1/userk_8h.html#a61">ProbeForReadUnicodeStringBuffer</a>(strClassName);
03037     } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(FALSE)) {
03038         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
03039     }
03040 
03041     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1904">_GetWOWClass</a>(
03042             hInstance,
03043             strClassName.Buffer);
03044 
03045     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserGetWOWClass"</span>);
03046     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a10">ENDRECV_SHARED</a>();
03047 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="ntuser.h::NtUserHardErrorControl" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI UINT NtUserHardErrorControl           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HARDERRORCONTROL&nbsp;</td>
          <td class="mdname" nowrap> <em>dwCmd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN HANDLE handle&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PDESKRESTOREDATA pdrdRestore&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00643">643</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00083">BEGINRECVCSRSS</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00092">ENDRECVCSRSS</a>, <a class="el" href="../../d0/d4/probe_8c-source.html#l00034">ProbeForWrite()</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, and <a class="el" href="../../d9/d3/w32_2ntuser_2kernel_2random_8c-source.html#l00276">xxxHardErrorControl()</a>.
<p>
Referenced by <a class="el" href="../../d8/d7/w32_2ntuser_2server_2harderr_8c-source.html#l01906">BoostHardError()</a>, <a class="el" href="../../d8/d7/w32_2ntuser_2server_2harderr_8c-source.html#l00347">CheckDefaultDesktop()</a>, and <a class="el" href="../../d8/d7/w32_2ntuser_2server_2harderr_8c-source.html#l01129">HardErrorHandler()</a>.
<p>
<pre class="fragment"><div>00647 {
00648     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a7">BEGINRECVCSRSS</a>(BOOL, HEC_ERROR);
00649 
00650 <span class="preprocessor">#if DBG</span>
00651 <span class="preprocessor"></span>    <span class="keywordflow">if</span> (ARGUMENT_PRESENT(pdrdRestore)) {
00652         <a class="code" href="../../d5/d8/ex_8h.html#a259">ProbeForWrite</a>(pdrdRestore, <span class="keyword">sizeof</span>(DESKRESTOREDATA), <span class="keyword">sizeof</span>(DWORD));
00653     }
00654 <span class="preprocessor">#endif</span>
00655 <span class="preprocessor"></span>
00656     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1175">xxxHardErrorControl</a>(dwCmd, handle, pdrdRestore);
00657 
00658     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserHardErrorControl"</span>);
00659     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a8">ENDRECVCSRSS</a>();
00660 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a106" doxytag="ntuser.h::NtUserHideCaret" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserHideCaret           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hwnd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05279">5279</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00410">ValidateHWNDOPT</a>, and <a class="el" href="../../d5/d4/caret_8c-source.html#l00434">zzzHideCaret()</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/editec_8c-source.html#l02492">ECGetEditDC()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00402">ECInOutReconversionMode()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01225">ECSetCaretHandler()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l00708">ECSetFont()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l00919">MLChangeSelection()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l03991">MLDrawText()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l03457">MLEditWndProc()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l00395">SLChangeSelection()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l02520">SLEditWndProc()</a>, and <a class="el" href="../../d4/d4/editsl_8c-source.html#l02280">SLPaint()</a>.
<p>
<pre class="fragment"><div>05281 {
05282     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwnd;
05283 
05284     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(BOOL, FALSE);
05285 
05286     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a57">ValidateHWNDOPT</a>(pwnd, hwnd);
05287 
05288     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1726">zzzHideCaret</a>(pwnd);
05289 
05290     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserHideCaret"</span>);
05291     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
05292 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a107" doxytag="ntuser.h::NtUserHiliteMenuItem" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserHiliteMenuItem           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN HMENU&nbsp;</td>
          <td class="mdname" nowrap> <em>hMenu</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>uIDHiliteItem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>uHilite</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05294">5294</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00172">BEGINRECV_HWNDLOCK</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00186">ENDRECV_HWNDLOCK</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00345">TESTFLAGS</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00365">ThreadLockAlwaysWithPti</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00366">ThreadUnlock</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00452">ValidateHMENUMODIFY</a>, and <a class="el" href="../../d2/d1/mnaccel_8c-source.html#l00117">xxxHiliteMenuItem()</a>.
<p>
<pre class="fragment"><div>05299 {
05300 
05301     <span class="comment">//</span>
05302     <span class="comment">// N.B. This function has implicit window translation and thread locking</span>
05303     <span class="comment">//      enabled. These operations are performed in the User server API</span>
05304     <span class="comment">//      dispatcher.</span>
05305     <span class="comment">//</span>
05306 
05307     <a class="code" href="../../d1/d1/structtagMENU.html">PMENU</a> pmenu;
05308     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpmenu;
05309 
05310     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a24">BEGINRECV_HWNDLOCK</a>(DWORD, 0, hwnd);
05311 
05312     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a46">TESTFLAGS</a>(uHilite, MF_VALID);
05313 
05314     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a62">ValidateHMENUMODIFY</a>(pmenu, hMenu);
05315 
05316     <a class="code" href="../../d6/d0/usercli_8h.html#a39">ThreadLockAlwaysWithPti</a>(ptiCurrent, pmenu, &amp;tlpmenu);
05317 
05318     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1899">xxxHiliteMenuItem</a>(
05319             pwnd,
05320             pmenu,
05321             uIDHiliteItem,
05322             uHilite);
05323 
05324     <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpmenu);
05325 
05326     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserHiliteMenuItem"</span>);
05327     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a25">ENDRECV_HWNDLOCK</a>();
05328 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a208" doxytag="ntuser.h::NtUserImpersonateDdeClientWindow" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserImpersonateDdeClientWindow           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwndClient</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwndServer</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l08670">8670</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l02256">_ImpersonateDdeClientWindow()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00122">BEGINATOMICRECV_HWND</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00133">ENDATOMICRECV_HWND</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01547">GETPTI</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01553">GETPWNDPPI</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00058">PtiCurrent</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00399">ValidateHWND</a>.
<p>
Referenced by <a class="el" href="../../d0/d3/ddemlcli_8c-source.html#l00438">DdeImpersonateClient()</a>.
<p>
<pre class="fragment"><div>08673 {
08674 
08675     <span class="comment">//</span>
08676     <span class="comment">// N.B. This function has implicit window handle translation. This</span>
08677     <span class="comment">//      operation is performed in the User server API dispatcher.</span>
08678     <span class="comment">//</span>
08679 
08680     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwndServer;
08681 
08682     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a16">BEGINATOMICRECV_HWND</a>(BOOL, FALSE, hwndClient);
08683 
08684     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a55">ValidateHWND</a>(pwndServer, hwndServer);
08685     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a455">GETPTI</a>(pwndServer) != <a class="code" href="../../d4/d1/userk_8h.html#a9">PtiCurrent</a>()) {
08686         RIPERR0(ERROR_INVALID_PARAMETER, RIP_VERBOSE, <span class="stringliteral">""</span>);
08687         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
08688     }
08689 
08690     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a458">GETPWNDPPI</a>(pwnd) == <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a458">GETPWNDPPI</a>(pwndServer)) {
08691         retval = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;  <span class="comment">// impersonating self is a NOOP</span>
08692     } <span class="keywordflow">else</span> {
08693         retval = <a class="code" href="../../d4/d1/userk_8h.html#a1879">_ImpersonateDdeClientWindow</a>(pwnd, pwndServer);
08694     }
08695 
08696     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserImpersonateDdeClientWindow"</span>);
08697     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a17">ENDATOMICRECV_HWND</a>();
08698 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a264" doxytag="ntuser.h::NtUserInitialize" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI NTSTATUS NtUserInitialize           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwVersion</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hPowerRequestEvent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hMediaRequestEvent</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/kernel_2server_8c-source.html#l02713">2713</a> of file <a class="el" href="../../d0/d6/kernel_2server_8c-source.html">kernel/server.c</a>.
<p>
References <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00932">gbRemoteSession</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00794">gpepCSRSS</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00931">gSessionId</a>, <a class="el" href="../../d6/d8/w32_2ntuser_2kernel_2pnp_8c-source.html#l00119">InitializeMediaChange()</a>, <a class="el" href="../../d8/d1/power_8c-source.html#l00180">InitializePowerRequestList()</a>, <a class="el" href="../../d0/d1/bugcheck_8c-source.html#l00428">KeBugCheckEx()</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d2/d8/ps_8h-source.html#l00643">PsGetCurrentProcess</a>, <a class="el" href="../../d3/d0/cttoken_8c-source.html#l00135">Status</a>, <a class="el" href="../../d9/d6/kernel_2server_8c.html#a82">TellGdiToGetReady()</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l01116">TRACE_INIT</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01305">USERCURRENTVERSION</a>, <a class="el" href="../../d0/d6/kernel_2server_8c-source.html#l02004">UserInitialize()</a>, and <a class="el" href="../../d2/d8/ps_8h-source.html#l00284">_EPROCESS::Win32Process</a>.
<p>
Referenced by <a class="el" href="../../d1/d6/server_2server_8c-source.html#l00192">UserServerDllInitialization()</a>.
<p>
<pre class="fragment"><div>02717 {
02718     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
02719 
02720     <a class="code" href="../../d4/d1/userk_8h.html#a91">TRACE_INIT</a>((<span class="stringliteral">"Entering NtUserInitialize\n"</span>));
02721 
02722     <span class="comment">/*</span>
02723 <span class="comment">     * Make sure we're not trying to load this twice.</span>
02724 <span class="comment">     */</span>
02725     <span class="keywordflow">if</span> (<a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a299">gpepCSRSS</a> != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
02726         RIPMSG0(RIP_ERROR, <span class="stringliteral">"Can't initialize more than once"</span>);
02727         <span class="keywordflow">return</span> STATUS_UNSUCCESSFUL;
02728     }
02729 
02730     <span class="comment">/*</span>
02731 <span class="comment">     * Check version number</span>
02732 <span class="comment">     */</span>
02733     <span class="keywordflow">if</span> (dwVersion != <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a409">USERCURRENTVERSION</a>) {
02734         <a class="code" href="../../d9/d1/bugcheck_8c.html#a19">KeBugCheckEx</a>(WIN32K_INIT_OR_RIT_FAILURE,
02735                      0,
02736                      0,
02737                      dwVersion,
02738                      USERCURRENTVERSION);
02739     }
02740 
02741     <span class="comment">/*</span>
02742 <span class="comment">     * Get the session ID from the EPROCESS structure</span>
02743 <span class="comment">     */</span>
02744     <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a327">gSessionId</a> = <a class="code" href="../../d1/d9/ps_8h.html#a19">PsGetCurrentProcess</a>()-&gt;SessionId;
02745 
02746     UserAssert(gSessionId == 0 || gbRemoteSession == TRUE);
02747 
02748     <span class="comment">/*</span>
02749 <span class="comment">     * Initialize the power request list.</span>
02750 <span class="comment">     */</span>
02751     <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d4/d1/userk_8h.html#a1966">InitializePowerRequestList</a>(hPowerRequestEvent);
02752     <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(Status)) {
02753         <span class="keywordflow">return</span> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
02754     }
02755 
02756     <a class="code" href="../../d4/d1/userk_8h.html#a996">InitializeMediaChange</a>(hMediaRequestEvent);
02757 
02758     <span class="comment">/*</span>
02759 <span class="comment">     * Save the system process structure.</span>
02760 <span class="comment">     */</span>
02761     <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a299">gpepCSRSS</a> = <a class="code" href="../../d1/d9/ps_8h.html#a19">PsGetCurrentProcess</a>();
02762 
02763     <span class="keywordflow">if</span> (!<a class="code" href="../../d9/d6/kernel_2server_8c.html#a82">TellGdiToGetReady</a>())
02764     {
02765         RIPMSG0(RIP_WARNING, <span class="stringliteral">"TellGdiToGetReady failed"</span>);
02766         <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = STATUS_UNSUCCESSFUL;
02767         <span class="keywordflow">return</span> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
02768     }
02769 
02770     <span class="comment">/*</span>
02771 <span class="comment">     * Allow CSR to read the screen</span>
02772 <span class="comment">     */</span>
02773     ((PW32PROCESS)<a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a299">gpepCSRSS</a>-&gt;<a class="code" href="../../d0/d4/struct__EPROCESS.html#o72">Win32Process</a>)-&gt;W32PF_Flags |= (W32PF_READSCREENACCESSGRANTED|W32PF_IOWINSTA);
02774 
02775 
02776     <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d9/d6/kernel_2server_8c.html#a75">UserInitialize</a>();
02777 
02778     <a class="code" href="../../d4/d1/userk_8h.html#a91">TRACE_INIT</a>((<span class="stringliteral">"Leaving NtUserInitialize\n"</span>));
02779     <span class="keywordflow">return</span> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
02780 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a25" doxytag="ntuser.h::NtUserInitializeClientPfnArrays" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI NTSTATUS NtUserInitializeClientPfnArrays           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN CONST <a class="el" href="../../d0/d5/struct__PFNCLIENT.html">PFNCLIENT</a> *ppfnClientA&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN CONST <a class="el" href="../../d0/d5/struct__PFNCLIENT.html">PFNCLIENT</a> *ppfnClientW&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN CONST <a class="el" href="../../d1/d5/struct__PFNCLIENTWORKER.html">PFNCLIENTWORKER</a> *ppfnClientWorker&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hModUser</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l01508">1508</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d8/d0/w32_2ntuser_2kernel_2init_8c-source.html#l02313">InitializeClientPfnArrays()</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d6/d7/ex_8h-source.html#l01209">ProbeForRead</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00343">StubExceptionHandler</a>, and <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>.
<p>
Referenced by <a class="el" href="../../d7/d7/clinit_8c-source.html#l01219">ClientThreadSetup()</a>.
<p>
<pre class="fragment"><div>01513 {
01514     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(NTSTATUS, STATUS_UNSUCCESSFUL);
01515 
01516     <span class="comment">/*</span>
01517 <span class="comment">     * Probe all read arguments</span>
01518 <span class="comment">     */</span>
01519     <span class="keywordflow">try</span> {
01520         <span class="keywordflow">if</span> (ARGUMENT_PRESENT(ppfnClientA)) {
01521             <a class="code" href="../../d5/d8/ex_8h.html#a11">ProbeForRead</a>(ppfnClientA, <span class="keyword">sizeof</span>(*ppfnClientA), <span class="keyword">sizeof</span>(DWORD));
01522         }
01523         <span class="keywordflow">if</span> (ARGUMENT_PRESENT(ppfnClientW)) {
01524             <a class="code" href="../../d5/d8/ex_8h.html#a11">ProbeForRead</a>(ppfnClientW, <span class="keyword">sizeof</span>(*ppfnClientW), <span class="keyword">sizeof</span>(DWORD));
01525         }
01526 
01527         <span class="keywordflow">if</span> (ARGUMENT_PRESENT(ppfnClientWorker)) {
01528             <a class="code" href="../../d5/d8/ex_8h.html#a11">ProbeForRead</a>(ppfnClientWorker, <span class="keyword">sizeof</span>(*ppfnClientWorker), <span class="keyword">sizeof</span>(DWORD));
01529         }
01530 
01531         retval = <a class="code" href="../../d4/d1/userk_8h.html#a1014">InitializeClientPfnArrays</a>(
01532                 ppfnClientA, ppfnClientW, ppfnClientWorker, hModUser);
01533     } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(FALSE)) {
01534         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
01535     }
01536 
01537     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserInitializeThreadInfo"</span>);
01538     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
01539 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a48" doxytag="ntuser.h::NtUserInitTask" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI NTSTATUS NtUserInitTask           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>dwExpWinVer</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwAppCompatFlags</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PUNICODE_STRING&nbsp;</td>
          <td class="mdname" nowrap> <em>pstrModName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PUNICODE_STRING&nbsp;</td>
          <td class="mdname" nowrap> <em>pstrBaseFileName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>hTaskWow</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwHotkey</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>idTask</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwX</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwY</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwXSize</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwYSize</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l03098">3098</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00084">PpiCurrent</a>, <a class="el" href="../../d6/d7/ex_8h-source.html#l01417">ProbeAndReadUnicodeString</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00612">ProbeForReadUnicodeStringBuffer</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00343">StubExceptionHandler</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, and <a class="el" href="../../d7/d2/queue_8c-source.html#l01147">zzzInitTask()</a>.
<p>
Referenced by <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00140">InitTask()</a>.
<p>
<pre class="fragment"><div>03110 {
03111     UNICODE_STRING strModName;
03112     UNICODE_STRING strBaseFileName;
03113 
03114     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(NTSTATUS, STATUS_UNSUCCESSFUL);
03115 
03116     <span class="comment">/*</span>
03117 <span class="comment">     * Make sure this is really a WOW process.</span>
03118 <span class="comment">     */</span>
03119     <span class="keywordflow">if</span> (<a class="code" href="../../d4/d1/userk_8h.html#a16">PpiCurrent</a>()-&gt;pwpi == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
03120         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
03121     }
03122 
03123     <span class="comment">/*</span>
03124 <span class="comment">     * Probe arguments</span>
03125 <span class="comment">     */</span>
03126     <span class="keywordflow">try</span> {
03127         strModName = <a class="code" href="../../d5/d8/ex_8h.html#a26">ProbeAndReadUnicodeString</a>(pstrModName);
03128         <span class="comment">/*</span>
03129 <span class="comment">         * pstrModName-&gt;Buffer has a UNICODE_NULL that's not counted in</span>
03130 <span class="comment">         * the length, but we want to include it for convenience. The</span>
03131 <span class="comment">         * probe routine does this.</span>
03132 <span class="comment">         */</span>
03133         <a class="code" href="../../d4/d1/userk_8h.html#a61">ProbeForReadUnicodeStringBuffer</a>(strModName);
03134 
03135         <span class="keywordflow">if</span> (pstrBaseFileName) {
03136             strBaseFileName = <a class="code" href="../../d5/d8/ex_8h.html#a26">ProbeAndReadUnicodeString</a>(pstrBaseFileName);
03137             <a class="code" href="../../d4/d1/userk_8h.html#a61">ProbeForReadUnicodeStringBuffer</a>(strBaseFileName);
03138         }
03139 
03140     } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(FALSE)) {
03141         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
03142     }
03143 
03144     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1193">zzzInitTask</a>(
03145             dwExpWinVer,
03146             dwAppCompatFlags,
03147             &amp;strModName,
03148             pstrBaseFileName ? &amp;strBaseFileName : NULL,
03149             hTaskWow,
03150             dwHotkey,
03151             idTask,
03152             dwX,
03153             dwY,
03154             dwXSize,
03155             dwYSize);
03156 
03157     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserInitTask"</span>);
03158     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
03159 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a162" doxytag="ntuser.h::NtUserInternalGetWindowText" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI int NtUserInternalGetWindowText           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT LPWSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>lpString</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN int&nbsp;</td>
          <td class="mdname" nowrap> <em>nMaxCount</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06874">6874</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00144">BEGINRECV_HWND_SHARED</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00148">CHARALIGN</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00154">ENDRECV_HWND_SHARED</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00158">ProbeForWriteBuffer</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00343">StubExceptionHandler</a>, <a class="el" href="../../d2/d4/w32_2ntuser_2rtl_2random_8c-source.html#l00108">TextCopy()</a>, and <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>.
<p>
Referenced by <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00926">InternalGetWindowText()</a>.
<p>
<pre class="fragment"><div>06878 {
06879 
06880     <span class="comment">//</span>
06881     <span class="comment">// N.B. This function has implicit window handle translation. This</span>
06882     <span class="comment">//      operation is performed in the User server API dispatcher.</span>
06883     <span class="comment">//</span>
06884 
06885     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a20">BEGINRECV_HWND_SHARED</a>(DWORD, 0, hwnd);
06886 
06887     <span class="keywordflow">if</span> (nMaxCount) {
06888         <span class="comment">/*</span>
06889 <span class="comment">         * Probe arguments</span>
06890 <span class="comment">         */</span>
06891         <span class="keywordflow">try</span> {
06892             <a class="code" href="../../d4/d1/userk_8h.html#a25">ProbeForWriteBuffer</a>(lpString, nMaxCount, CHARALIGN);
06893            <span class="comment">/*</span>
06894 <span class="comment">            * Initialize string empty.</span>
06895 <span class="comment">            */</span>
06896             *lpString = TEXT(<span class="charliteral">'\0'</span>);
06897             <span class="keywordflow">if</span> (pwnd-&gt;strName.Length) {
06898                 retval = <a class="code" href="../../d1/d5/w32_2ntuser_2rtl_2random_8c.html#a2">TextCopy</a>(&amp;pwnd-&gt;strName, lpString, nMaxCount);
06899             } <span class="keywordflow">else</span> {
06900                 retval = 0;
06901             }
06902 
06903         } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(FALSE)) {
06904             <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0); <span class="comment">// private API, don't SetLastError</span>
06905         }
06906     } <span class="keywordflow">else</span> {
06907         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
06908     }
06909 
06910     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserInternalGetWindowText"</span>);
06911     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a21">ENDRECV_HWND_SHARED</a>();
06912 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a108" doxytag="ntuser.h::NtUserInvalidateRect" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserInvalidateRect           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN CONST RECT *prect&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>bErase</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05330">5330</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00203">ProbeAndReadRect</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00343">StubExceptionHandler</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00362">ThreadLock</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00366">ThreadUnlock</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00410">ValidateHWNDOPT</a>, and <a class="el" href="../../d9/d8/update_8c-source.html#l00039">xxxInvalidateRect()</a>.
<p>
Referenced by <a class="el" href="../../d9/d0/btnctl_8c-source.html#l00171">BNSetFont()</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l01338">ButtonWndProcWorker()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l00207">ComboBoxWndProcWorker()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02679">ECInvalidateClient()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l00597">ECSize()</a>, <a class="el" href="../../d7/d0/lb1_8c-source.html#l00032">ListBoxWndProcWorker()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l01367">MLDeleteText()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l03991">MLDrawText()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l01040">MLInsertText()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l02966">MLScroll()</a>, <a class="el" href="../../d6/d4/edmlrare_8c-source.html#l00458">MLSetTabStops()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l02394">SLKillFocus()</a>, <a class="el" href="../../d6/d4/statctl_8c-source.html#l00840">StaticWndProcWorker()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l01719">xxxCBHideListBoxWindow()</a>, <a class="el" href="../../d4/d3/comboini_8c-source.html#l00443">xxxCBSetFontHandler()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l01819">xxxCBShowListBoxWindow()</a>, <a class="el" href="../../d1/d1/lboxctl3_8c-source.html#l00190">xxxDlgDirListHelper()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00038">xxxLBInvalidateRect()</a>, <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l00797">xxxLBResetContent()</a>, <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00514">xxxLBSize()</a>, <a class="el" href="../../d6/d4/statctl_8c-source.html#l01211">xxxNextAniIconStep()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l00029">xxxPressButton()</a>, and <a class="el" href="../../d6/d4/statctl_8c-source.html#l00094">xxxSetStaticImage()</a>.
<p>
<pre class="fragment"><div>05334 {
05335     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwnd;
05336     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpwnd;
05337     RECT rc;
05338 
05339     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(BOOL, FALSE);
05340 
05341     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a57">ValidateHWNDOPT</a>(pwnd, hwnd);
05342 
05343     <span class="comment">/*</span>
05344 <span class="comment">     * Probe arguments</span>
05345 <span class="comment">     */</span>
05346     <span class="keywordflow">if</span> (ARGUMENT_PRESENT(prect)) {
05347         <span class="keywordflow">try</span> {
05348             rc = <a class="code" href="../../d4/d1/userk_8h.html#a31">ProbeAndReadRect</a>(prect);
05349             prect = &amp;rc;
05350         } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(TRUE)) {
05351             <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
05352         }
05353     }
05354 
05355     <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(pwnd, &amp;tlpwnd);
05356 
05357     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1669">xxxInvalidateRect</a>(
05358             pwnd,
05359             (PRECT)prect,
05360             bErase);
05361 
05362     <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwnd);
05363 
05364     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserInvalidateRect"</span>);
05365     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
05366 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a159" doxytag="ntuser.h::NtUserInvalidateRgn" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserInvalidateRgn           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN HRGN&nbsp;</td>
          <td class="mdname" nowrap> <em>hRgn</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>bErase</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06778">6778</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00172">BEGINRECV_HWNDLOCK</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00186">ENDRECV_HWNDLOCK</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, and <a class="el" href="../../d9/d8/update_8c-source.html#l00110">xxxInvalidateRgn()</a>.
<p>
<pre class="fragment"><div>06782 {
06783 
06784     <span class="comment">//</span>
06785     <span class="comment">// N.B. This function has implicit window translation and thread locking</span>
06786     <span class="comment">//      enabled. These operations are performed in the User server API</span>
06787     <span class="comment">//      dispatcher.</span>
06788     <span class="comment">//</span>
06789 
06790     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a24">BEGINRECV_HWNDLOCK</a>(BOOL, FALSE, hwnd);
06791 
06792     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1671">xxxInvalidateRgn</a>(
06793             pwnd,
06794             hrgn,
06795             bErase);
06796 
06797     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserInvalidateRgn"</span>);
06798     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a25">ENDRECV_HWNDLOCK</a>();
06799 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a109" doxytag="ntuser.h::NtUserIsClipboardFormatAvailable" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserIsClipboardFormatAvailable           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN UINT&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>nFormat</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05368">5368</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00094">BEGINRECV_SHARED</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d9/d7/ntuser_2kernel_2clipbrd_8c-source.html#l00049">CheckClipboardAccess()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00099">ENDRECV_SHARED</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d9/d7/ntuser_2kernel_2clipbrd_8c-source.html#l02482">FindClipFormat()</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/editec_8c-source.html#l00548">ECMenu()</a>.
<p>
<pre class="fragment"><div>05370 {
05371     <a class="code" href="../../d4/d9/structtagWINDOWSTATION.html">PWINDOWSTATION</a> pwinsta;
05372 
05373     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a9">BEGINRECV_SHARED</a>(BOOL, FALSE);
05374 
05375     <span class="comment">/*</span>
05376 <span class="comment">     * Blow it off if the caller doesn't have the proper access rights</span>
05377 <span class="comment">     */</span>
05378     <span class="keywordflow">if</span> ((pwinsta = <a class="code" href="../../d8/d8/ntuser_2kernel_2clipbrd_8c.html#a14">CheckClipboardAccess</a>()) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
05379         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
05380     }
05381 
05382     retval = (<a class="code" href="../../d4/d1/userk_8h.html#a1495">FindClipFormat</a>(pwinsta, nFormat) != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>);
05383 
05384     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserIsClipboardFormatAvailable"</span>);
05385     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a10">ENDRECV_SHARED</a>();
05386 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a110" doxytag="ntuser.h::NtUserKillTimer" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserKillTimer           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN UINT_PTR&nbsp;</td>
          <td class="mdname" nowrap> <em>nIDEvent</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05388">5388</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d5/d1/timers_8c-source.html#l00414">_KillTimer()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00075">BEGINATOMICRECV</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00081">ENDATOMICRECV</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, and <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00410">ValidateHWNDOPT</a>.
<p>
Referenced by <a class="el" href="../../d1/d0/xact_8c-source.html#l00024">DdeClientTransaction()</a>, <a class="el" href="../../d7/d0/lb1_8c-source.html#l00032">ListBoxWndProcWorker()</a>, <a class="el" href="../../d9/d4/reader_8c-source.html#l00158">ReaderWndProc()</a>, <a class="el" href="../../d6/d4/statctl_8c-source.html#l00840">StaticWndProcWorker()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l03411">xxxCaretDestroy()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01875">xxxLBButtonUp()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02183">xxxLBoxCtlKeyInput()</a>, <a class="el" href="../../d6/d4/statctl_8c-source.html#l01211">xxxNextAniIconStep()</a>, <a class="el" href="../../d6/d4/statctl_8c-source.html#l00094">xxxSetStaticImage()</a>, and <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01290">xxxTrackMouse()</a>.
<p>
<pre class="fragment"><div>05391 {
05392     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwnd;
05393 
05394     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a5">BEGINATOMICRECV</a>(BOOL, FALSE);
05395 
05396     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a57">ValidateHWNDOPT</a>(pwnd, hwnd);
05397 
05398     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1720">_KillTimer</a>(
05399             pwnd,
05400             nIDEvent);
05401 
05402     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserKillTimer"</span>);
05403     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a6">ENDATOMICRECV</a>();
05404 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a86" doxytag="ntuser.h::NtUserLoadIcoCur" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HANDLE NtUserLoadIcoCur           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hIcon</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cxNew</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cyNew</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>LR_flags</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a201" doxytag="ntuser.h::NtUserLoadKeyboardLayoutEx" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI HKL NtUserLoadKeyboardLayoutEx           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hFile</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>offTable</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN HKL&nbsp;</td>
          <td class="mdname" nowrap> <em>hkl</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PUNICODE_STRING&nbsp;</td>
          <td class="mdname" nowrap> <em>pstrKLID</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>KbdInputLocale</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>Flags</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l08449">8449</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d9/d7/winsta_8c-source.html#l01240">_GetProcessWindowStation()</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00148">CHARALIGN</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d6/d3/acpitabl_8h-source.html#l00366">min</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d6/d7/ex_8h-source.html#l01417">ProbeAndReadUnicodeString</a>, <a class="el" href="../../d6/d7/ex_8h-source.html#l01209">ProbeForRead</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00343">StubExceptionHandler</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00345">TESTFLAGS</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, and <a class="el" href="../../d7/d1/kbdlyout_8c-source.html#l00654">xxxLoadKeyboardLayoutEx()</a>.
<p>
Referenced by <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l01363">_LoadKeyboardLayoutEx()</a>.
<p>
<pre class="fragment"><div>08456 {
08457     UNICODE_STRING strKLID;
08458     <a class="code" href="../../d4/d9/structtagWINDOWSTATION.html">PWINDOWSTATION</a> pwinsta;
08459     WCHAR awchKF[<span class="keyword">sizeof</span>(((<a class="code" href="../../d4/d9/structtagKL.html">PKL</a>)0)-&gt;spkf-&gt;awchKF)];
08460     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> chMax;
08461 
08462     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(HKL, NULL);
08463 
08464     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a46">TESTFLAGS</a>(Flags, KLF_VALID);
08465 
08466     pwinsta = <a class="code" href="../../d8/d8/winsta_8c.html#a11">_GetProcessWindowStation</a>(NULL);
08467 
08468     <span class="comment">/*</span>
08469 <span class="comment">     * Probe arguments</span>
08470 <span class="comment">     */</span>
08471     <span class="keywordflow">try</span> {
08472         strKLID = <a class="code" href="../../d5/d8/ex_8h.html#a26">ProbeAndReadUnicodeString</a>(pstrKLID);
08473         <a class="code" href="../../d5/d8/ex_8h.html#a11">ProbeForRead</a>(strKLID.Buffer, strKLID.Length, CHARALIGN);
08474         chMax = <a class="code" href="../../d5/d4/acpitabl_8h.html#a69">min</a>(<span class="keyword">sizeof</span>(awchKF) - <span class="keyword">sizeof</span>(WCHAR), strKLID.Length) / <span class="keyword">sizeof</span>(WCHAR);
08475         wcsncpy(awchKF, strKLID.Buffer, chMax);
08476         awchKF[chMax] = 0;
08477     } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(TRUE)) {
08478         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
08479     }
08480 
08481     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1302">xxxLoadKeyboardLayoutEx</a>(
08482             pwinsta,
08483             hFile,
08484             hkl,
08485             offTable,
08486             awchKF,
08487             KbdInputLocale,
08488             Flags);
08489 
08490     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserLoadKeyboardLayoutEx"</span>);
08491     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
08492 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a167" doxytag="ntuser.h::NtUserLockWindowStation" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI UINT NtUserLockWindowStation           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWINSTA&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hWindowStation</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l07070">7070</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d6/d4/logon_8c-source.html#l00057">_LockWindowStation()</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d5/d9/ob_8h-source.html#l00494">ObDereferenceObject</a>, <a class="el" href="../../d3/d0/cttoken_8c-source.html#l00135">Status</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, <a class="el" href="../../d0/d9/ntosdef_8h.html#a76a70">UserMode</a>, and <a class="el" href="../../d8/d2/validate_8c-source.html#l00046">ValidateHwinsta()</a>.
<p>
<pre class="fragment"><div>07072 {
07073     <a class="code" href="../../d4/d9/structtagWINDOWSTATION.html">PWINDOWSTATION</a> pwinsta;
07074     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
07075 
07076     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(UINT, 0);
07077 
07078     <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d7/d3/validate_8c.html#a6">ValidateHwinsta</a>(hwinsta, UserMode, 0, &amp;pwinsta);
07079     <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(Status))
07080         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
07081 
07082     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1909">_LockWindowStation</a>(pwinsta);
07083 
07084     <a class="code" href="../../d4/d0/ob_8h.html#a14">ObDereferenceObject</a>(pwinsta);
07085 
07086     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserLockWindowStation"</span>);
07087     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
07088 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a74" doxytag="ntuser.h::NtUserLockWindowUpdate" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserLockWindowUpdate           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hwnd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04298">4298</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00075">BEGINATOMICRECV</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00081">ENDATOMICRECV</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d2/d3/spb_8c-source.html#l00802">LockWindowUpdate2()</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, and <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00410">ValidateHWNDOPT</a>.
<p>
Referenced by <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00603">UnmaximizeChildWindows()</a>.
<p>
<pre class="fragment"><div>04300 {
04301     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwnd;
04302 
04303     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a5">BEGINATOMICRECV</a>(BOOL, FALSE);
04304 
04305     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a57">ValidateHWNDOPT</a>(pwnd, hwnd);
04306 
04307     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1772">LockWindowUpdate2</a>(pwnd, FALSE);
04308 
04309     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserLockWindowUpdate"</span>);
04310     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a6">ENDATOMICRECV</a>();
04311 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a15" doxytag="ntuser.h::NtUserLockWorkStation" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserLockWorkStation           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">VOID&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l01161">1161</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d9/d7/winsta_8c-source.html#l01517">_LockWorkStation()</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, and <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>.
<p>
<pre class="fragment"><div>01163 {
01164     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(BOOL, FALSE);
01165 
01166     retval = <a class="code" href="../../d8/d8/winsta_8c.html#a15">_LockWorkStation</a>();
01167 
01168     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserLockWorkStation"</span>);
01169     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
01170 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a219" doxytag="ntuser.h::NtUserMapVirtualKeyEx" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI UINT NtUserMapVirtualKeyEx           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>uCode</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>uMapType</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG_PTR&nbsp;</td>
          <td class="mdname" nowrap> <em>dwHKLorPKL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>bHKL</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l09089">9089</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00094">BEGINRECV_SHARED</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00099">ENDRECV_SHARED</a>, <a class="el" href="../../d7/d1/kbdlyout_8c-source.html#l00040">HKLtoPKL()</a>, <a class="el" href="../../d4/d0/xlate_8c-source.html#l00231">InternalMapVirtualKeyEx()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l02495">tagKBDFILE::pKbdTbl</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00059">PtiCurrentShared</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l02509">tagKL::spkf</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, and <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>.
<p>
Referenced by <a class="el" href="../../d1/d7/ntcftxt_8h-source.html#l00339">MapVirtualKey()</a>, and <a class="el" href="../../d1/d7/ntcftxt_8h-source.html#l00374">MapVirtualKeyEx()</a>.
<p>
<pre class="fragment"><div>09094 {
09095     <a class="code" href="../../d4/d9/structtagKL.html">PKL</a> pkl;
09096 
09097     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a9">BEGINRECV_SHARED</a>(UINT, 0);
09098 
09099     <span class="comment">/*</span>
09100 <span class="comment">     * See if we need to convert an HKL to a PKL.  MapVirtualKey passes a PKL and</span>
09101 <span class="comment">     * MapVirtualKeyEx passes an HKL.  The conversion must be done in the kernel.</span>
09102 <span class="comment">     */</span>
09103     <span class="keywordflow">if</span> (bHKL) {
09104         pkl = <a class="code" href="../../d4/d1/userk_8h.html#a1019">HKLtoPKL</a>(<a class="code" href="../../d4/d1/userk_8h.html#a10">PtiCurrentShared</a>(), (HKL)dwHKLorPKL);
09105     } <span class="keywordflow">else</span> {
09106         pkl = <a class="code" href="../../d4/d1/userk_8h.html#a10">PtiCurrentShared</a>()-&gt;spklActive;
09107     }
09108 
09109     <span class="keywordflow">if</span> (pkl == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
09110         retval = 0;
09111     } <span class="keywordflow">else</span> {
09112         retval = <a class="code" href="../../d3/d1/xlate_8c.html#a4">InternalMapVirtualKeyEx</a>(uCode, uMapType, pkl-&gt;<a class="code" href="../../d4/d9/structtagKL.html#o5">spkf</a>-&gt;<a class="code" href="../../d1/d9/structtagKBDFILE.html#o4">pKbdTbl</a>);
09113     }
09114 
09115     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserMapVirtualKeyEx"</span>);
09116     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a10">ENDRECV_SHARED</a>();
09117 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a179" doxytag="ntuser.h::NtUserMenuItemFromPoint" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI int NtUserMenuItemFromPoint           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN HMENU&nbsp;</td>
          <td class="mdname" nowrap> <em>hMenu</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN POINT&nbsp;</td>
          <td class="mdname" nowrap> <em>ptScreen</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l07426">7426</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00206">BEGINRECV_HWNDLOCK_OPT</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00224">ENDRECV_HWNDLOCK_OPT</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00365">ThreadLockAlwaysWithPti</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00366">ThreadUnlock</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00448">ValidateHMENU</a>, and <a class="el" href="../../d5/d1/mncomput_8c-source.html#l00972">xxxMenuItemFromPoint()</a>.
<p>
<pre class="fragment"><div>07430 {
07431 
07432     <span class="comment">//</span>
07433     <span class="comment">// N.B. This function has implicit window translation and thread locking</span>
07434     <span class="comment">//      enabled. These operations are performed in the User server API</span>
07435     <span class="comment">//      dispatcher.</span>
07436     <span class="comment">//</span>
07437 
07438     <a class="code" href="../../d1/d1/structtagMENU.html">PMENU</a> pmenu;
07439     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpmenu;
07440 
07441     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a28">BEGINRECV_HWNDLOCK_OPT</a>(DWORD, -1, hwnd);
07442 
07443     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a61">ValidateHMENU</a>(pmenu, hMenu);
07444 
07445     <a class="code" href="../../d6/d0/usercli_8h.html#a39">ThreadLockAlwaysWithPti</a>(ptiCurrent, pmenu, &amp;tlpmenu);
07446 
07447     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1600">xxxMenuItemFromPoint</a>(
07448             pwnd,
07449             pmenu,
07450             ptScreen);
07451 
07452     <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpmenu);
07453 
07454     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserMenuItemFromPoint"</span>);
07455     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a29">ENDRECV_HWNDLOCK_OPT</a>();
07456 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a249" doxytag="ntuser.h::NtUserMessageCall" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI LRESULT NtUserMessageCall           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>msg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN WPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG_PTR&nbsp;</td>
          <td class="mdname" nowrap> <em>xParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>xpfnProc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>bAnsi</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l09804">9804</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00172">BEGINRECV_HWNDLOCK</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00176">CALLPROC</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00186">ENDRECV_HWNDLOCK</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l03667">tagMSG_TABLE_ENTRY::iFunction</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l03524">MessageTable</a>, <a class="el" href="../../d3/d0/userexts_8c-source.html#l01830">msg</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02217">MSGFLAG_MASK</a>, and <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>.
<p>
Referenced by <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l01444">MESSAGECALL()</a>.
<p>
<pre class="fragment"><div>09812 {
09813     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a24">BEGINRECV_HWNDLOCK</a>(LRESULT, 0, hwnd);
09814 
09815     <span class="keywordflow">if</span> ((<a class="code" href="../../d2/d1/userexts_8c.html#a129">msg</a> &amp; ~<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a543">MSGFLAG_MASK</a>) &gt;= WM_USER) {
09816         retval = <a class="code" href="../../d6/d0/usercli_8h.html#a17">CALLPROC</a>(xpfnProc)(
09817                 pwnd,
09818                 <a class="code" href="../../d2/d1/userexts_8c.html#a129">msg</a>,
09819                 wParam,
09820                 lParam,
09821                 xParam);
09822     } <span class="keywordflow">else</span> {
09823         retval = gapfnMessageCall[<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a1144">MessageTable</a>[(<a class="code" href="../../d2/d1/userexts_8c.html#a129">msg</a> &amp; ~<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a543">MSGFLAG_MASK</a>)].<a class="code" href="../../d6/d2/structtagMSG__TABLE__ENTRY.html#o0">iFunction</a>](
09824                 pwnd,
09825                 <a class="code" href="../../d2/d1/userexts_8c.html#a129">msg</a>,
09826                 wParam,
09827                 lParam,
09828                 xParam,
09829                 xpfnProc,
09830                 bAnsi);
09831     }
09832 
09833     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserMessageCall"</span>);
09834     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a25">ENDRECV_HWNDLOCK</a>();
09835 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a111" doxytag="ntuser.h::NtUserMinMaximize" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI HWND NtUserMinMaximize           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>nCmdShow</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fKeepHidden</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05406">5406</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00188">BEGINRECV_HWNDLOCK_ND</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00204">ENDRECV_HWNDLOCK_ND</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l04322">MINMAX_KEEPHIDDEN</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01512">PtoH</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06584">PUDF_ANIMATE</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06608">TEST_PUDF</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, and <a class="el" href="../../d5/d8/minmax_8c-source.html#l01329">xxxMinMaximize()</a>.
<p>
Referenced by <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02794">CreateMDIChild()</a>, and <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02425">xxxChildResize()</a>.
<p>
<pre class="fragment"><div>05410 {
05411     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a26">BEGINRECV_HWNDLOCK_ND</a>(HWND, NULL, hwnd);
05412 
05413     retval = (HWND)<a class="code" href="../../d4/d1/userk_8h.html#a1159">xxxMinMaximize</a>(
05414             pwndND,
05415             nCmdShow,
05416             ((fKeepHidden) ? MINMAX_KEEPHIDDEN : 0) | <a class="code" href="../../d4/d1/userk_8h.html#a657">TEST_PUDF</a>(PUDF_ANIMATE));
05417     retval = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a448">PtoH</a>((PVOID)retval);
05418 
05419     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserMinMaximize"</span>);
05420     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a27">ENDRECV_HWNDLOCK_ND</a>();
05421 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a113" doxytag="ntuser.h::NtUserMNDragLeave" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserMNDragLeave           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">VOID&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05473">5473</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, and <a class="el" href="../../d9/d6/menudd_8c-source.html#l00237">xxxMNDragLeave()</a>.
<p>
Referenced by <a class="el" href="../../d0/d7/menuddc_8c-source.html#l00158">mndtDragLeave()</a>.
<p>
<pre class="fragment"><div>05474 {
05475     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(BOOL, FALSE);
05476     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1418">xxxMNDragLeave</a>();
05477     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserMNDragLeave"</span>);
05478     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
05479 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a112" doxytag="ntuser.h::NtUserMNDragOver" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserMNDragOver           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN POINT *&nbsp;</td>
          <td class="mdname" nowrap> <em>ppt</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT <a class="el" href="../../d7/d1/structtagMNDRAGOVERINFO.html">PMNDRAGOVERINFO</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pmndoi</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05432">5432</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00186">ProbeAndReadPoint</a>, <a class="el" href="../../d6/d7/ex_8h-source.html#l01902">ProbeAndWriteStructure</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00343">StubExceptionHandler</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, and <a class="el" href="../../d9/d6/menudd_8c-source.html#l00156">xxxMNDragOver()</a>.
<p>
Referenced by <a class="el" href="../../d0/d7/menuddc_8c-source.html#l00074">mndtDragOver()</a>.
<p>
<pre class="fragment"><div>05435 {
05436     POINT pt;
05437     <a class="code" href="../../d7/d1/structtagMNDRAGOVERINFO.html">MNDRAGOVERINFO</a> mndoi;
05438 
05439     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(BOOL, FALSE);
05440 
05441     <span class="comment">/*</span>
05442 <span class="comment">     * No need to SetLastError since ppt and pmndoi are always addresses of</span>
05443 <span class="comment">     * local stack variables in USER, not addresses from an application</span>
05444 <span class="comment">     */</span>
05445     <span class="keywordflow">try</span> {
05446         pt = <a class="code" href="../../d4/d1/userk_8h.html#a29">ProbeAndReadPoint</a>(ppt);
05447     } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(FALSE)) {
05448         RIPMSG1(RIP_WARNING, <span class="stringliteral">"NtUserMNDragOver: Exception:%#lx"</span>, GetExceptionCode());
05449         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
05450     }
05451 
05452     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1417">xxxMNDragOver</a>(&amp;pt, &amp;mndoi);
05453 
05454     <span class="keywordflow">if</span> (retval) {
05455         <span class="keywordflow">try</span> {
05456             <a class="code" href="../../d5/d8/ex_8h.html#a54">ProbeAndWriteStructure</a>(pmndoi, mndoi, <a class="code" href="../../d7/d1/structtagMNDRAGOVERINFO.html">MNDRAGOVERINFO</a>);
05457         } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(FALSE)) {
05458             RIPMSG1(RIP_WARNING, <span class="stringliteral">"NtUserMNDragOver: Exception:%#lx"</span>, GetExceptionCode());
05459             <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
05460         }
05461     }
05462 
05463     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserMNDragOver"</span>);
05464     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
05465 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a188" doxytag="ntuser.h::NtUserModifyUserStartupInfoFlags" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI VOID NtUserModifyUserStartupInfoFlags           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwMask</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwFlags</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l07703">7703</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00105">BEGINRECV_VOID</a>, <a class="el" href="../../d4/d7/propapi_8h-source.html#l00043">dwFlags</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00108">ENDRECV_VOID</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00084">PpiCurrent</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l01119">TRACEVOID</a>, and <a class="el" href="../../d2/d7/hal_8h.html#a212">VOID()</a>.
<p>
Referenced by <a class="el" href="../../d7/d3/msgbox_8c-source.html#l00489">MessageBoxWorker()</a>.
<p>
<pre class="fragment"><div>07706 {
07707     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a12">BEGINRECV_VOID</a>();
07708 
07709     <a class="code" href="../../d4/d1/userk_8h.html#a16">PpiCurrent</a>()-&gt;usi.dwFlags = (<a class="code" href="../../d4/d1/userk_8h.html#a16">PpiCurrent</a>()-&gt;usi.dwFlags &amp; ~dwMask) | (<a class="code" href="../../d3/d8/propapi_8h.html#a34">dwFlags</a> &amp; dwMask);
07710 
07711     <a class="code" href="../../d4/d1/userk_8h.html#a94">TRACEVOID</a>(<span class="stringliteral">"NtUserModifyUserStartupInfoFlags"</span>);
07712     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a13">ENDRECV_VOID</a>();
07713 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a34" doxytag="ntuser.h::NtUserMoveWindow" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserMoveWindow           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN int&nbsp;</td>
          <td class="mdname" nowrap> <em>x</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN int&nbsp;</td>
          <td class="mdname" nowrap> <em>y</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN int&nbsp;</td>
          <td class="mdname" nowrap> <em>cx</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN int&nbsp;</td>
          <td class="mdname" nowrap> <em>cy</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fRepaint</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l01917">1917</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00188">BEGINRECV_HWNDLOCK_ND</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d2/d0/inctlpan_8c-source.html#l00480">cy</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00204">ENDRECV_HWNDLOCK_ND</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, and <a class="el" href="../../d3/d7/swp_8c-source.html#l00144">xxxMoveWindow()</a>.
<p>
Referenced by <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02101">DefFrameProcWorker()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01657">MDIClientWndProcWorker()</a>, <a class="el" href="../../d4/d3/comboini_8c-source.html#l00589">xxxCBPosition()</a>, <a class="el" href="../../d4/d3/comboini_8c-source.html#l00617">xxxCBSetDroppedSize()</a>, <a class="el" href="../../d4/d3/comboini_8c-source.html#l00485">xxxCBSetEditItemHeight()</a>, and <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00062">xxxLBCreate()</a>.
<p>
<pre class="fragment"><div>01924 {
01925     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a26">BEGINRECV_HWNDLOCK_ND</a>(BOOL, FALSE, hwnd);
01926 
01927     <span class="comment">/*</span>
01928 <span class="comment">     * Make sure the window coordinates can fit in WORDs.</span>
01929 <span class="comment">     */</span>
01930     <span class="keywordflow">if</span> (x &gt; SHRT_MAX) {
01931         x = SHRT_MAX;
01932     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (x &lt; SHRT_MIN) {
01933         x = SHRT_MIN;
01934     }
01935     <span class="keywordflow">if</span> (y &gt; SHRT_MAX) {
01936         y = SHRT_MAX;
01937     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (y &lt; SHRT_MIN) {
01938         y = SHRT_MIN;
01939     }
01940 
01941     <span class="comment">/*</span>
01942 <span class="comment">     * Actually, if we were going to be really strict about this we'd</span>
01943 <span class="comment">     * make sure that x + cx &lt; SHRT_MAX, etc but since we do maintain</span>
01944 <span class="comment">     * signed 32-bit coords internally this case doesn't cause a problem.</span>
01945 <span class="comment">     */</span>
01946     <span class="keywordflow">if</span> (cx &lt; 0) {
01947         cx = 0;
01948     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cx &gt; SHRT_MAX) {
01949         cx = SHRT_MAX;
01950     }
01951     <span class="keywordflow">if</span> (<a class="code" href="../../d1/d1/inctlpan_8c.html#a3">cy</a> &lt; 0) {
01952         <a class="code" href="../../d1/d1/inctlpan_8c.html#a3">cy</a> = 0;
01953     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d1/d1/inctlpan_8c.html#a3">cy</a> &gt; SHRT_MAX) {
01954         <a class="code" href="../../d1/d1/inctlpan_8c.html#a3">cy</a> = SHRT_MAX;
01955     }
01956 
01957 <span class="preprocessor">#ifdef NEVER</span>
01958 <span class="preprocessor"></span><span class="comment">//</span>
01959 <span class="comment">// do not fail these conditions because real apps use them.</span>
01960 <span class="comment">//</span>
01961     <span class="keywordflow">if</span> (x &gt; SHRT_MAX || x &lt; SHRT_MIN ||
01962             y &gt; SHRT_MAX || y &lt; SHRT_MIN) {
01963         RIPERR0(ERROR_INVALID_PARAMETER, RIP_WARNING, <span class="stringliteral">"Invalid coordinate passed to MoveWindow"</span>);
01964         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
01965     }
01966 
01967     <span class="comment">/*</span>
01968 <span class="comment">     * Actually, if we were going to be really strict about this we'd</span>
01969 <span class="comment">     * make sure that x + cx &lt; SHRT_MAX, etc but since we do maintain</span>
01970 <span class="comment">     * signed 32-bit coords internally this case doesn't cause a problem.</span>
01971 <span class="comment">     */</span>
01972     <span class="keywordflow">if</span> (cx &lt; 0 || cx &gt; SHRT_MAX ||
01973             cy &lt; 0 || cy &gt; SHRT_MAX) {
01974         RIPERR0(ERROR_INVALID_PARAMETER, RIP_WARNING, <span class="stringliteral">"Invalid width/height passed to MoveWindow"</span>);
01975         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
01976     }
01977 <span class="preprocessor">#endif</span>
01978 <span class="preprocessor"></span>
01979     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1621">xxxMoveWindow</a>(
01980             pwndND,
01981             x,
01982             y,
01983             cx,
01984             cy,
01985             fRepaint);
01986 
01987     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserMoveWindow"</span>);
01988     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a27">ENDRECV_HWNDLOCK_ND</a>();
01989 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a185" doxytag="ntuser.h::NtUserNotifyProcessCreate" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserNotifyProcessCreate           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwProcessId</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwParentThreadId</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG_PTR&nbsp;</td>
          <td class="mdname" nowrap> <em>dwData</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwFlags</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l07631">7631</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00083">BEGINRECVCSRSS</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d4/d7/propapi_8h-source.html#l00043">dwFlags</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00092">ENDRECVCSRSS</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, and <a class="el" href="../../d7/d2/queue_8c-source.html#l00445">xxxUserNotifyProcessCreate()</a>.
<p>
Referenced by <a class="el" href="../../d1/d6/server_2server_8c-source.html#l00192">UserServerDllInitialization()</a>.
<p>
<pre class="fragment"><div>07636 {
07637     <span class="keyword">extern</span> <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> <a class="code" href="../../d6/d3/queue_8c.html#a30">xxxUserNotifyProcessCreate</a>(DWORD idProcess, DWORD idParentThread,
07638             ULONG_PTR dwData, DWORD dwFlags);
07639 
07640     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a7">BEGINRECVCSRSS</a>(BOOL, FALSE);
07641 
07642     retval = <a class="code" href="../../d6/d3/queue_8c.html#a30">xxxUserNotifyProcessCreate</a>(dwProcessId,
07643             dwParentThreadId,
07644             dwData,
07645             dwFlags);
07646 
07647     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserNotifyProcessCreate"</span>);
07648     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a8">ENDRECVCSRSS</a>();
07649 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a229" doxytag="ntuser.h::NtUserNotifyWinEvent" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI VOID NtUserNotifyWinEvent           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>event</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN LONG&nbsp;</td>
          <td class="mdname" nowrap> <em>idObject</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN LONG&nbsp;</td>
          <td class="mdname" nowrap> <em>idChild</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l03461">3461</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00226">BEGINRECV_HWNDLOCK_VOID</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00305">ENDRECV_HWNDLOCK_VOID</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01265">FWINABLE</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00330">MSGERROR_VOID</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l01119">TRACEVOID</a>, <a class="el" href="../../d2/d7/hal_8h.html#a212">VOID()</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06464">WEF_USEPWNDTHREAD</a>, and <a class="el" href="../../d6/d6/kernel_2winable_8c-source.html#l00274">xxxWindowEvent()</a>.
<p>
Referenced by <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00354">NotifyWinEvent()</a>.
<p>
<pre class="fragment"><div>03466 {
03467     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a30">BEGINRECV_HWNDLOCK_VOID</a>(hwnd);
03468 
03469     <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a405">FWINABLE</a>()) {
03470         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a43">MSGERROR_VOID</a>();
03471     }
03472     <a class="code" href="../../d5/d7/kernel_2winable_8c.html#a8">xxxWindowEvent</a>(event, pwnd, idObject, idChild, WEF_USEPWNDTHREAD);
03473 
03474     <a class="code" href="../../d4/d1/userk_8h.html#a94">TRACEVOID</a>(<span class="stringliteral">"NtUserNotifyWinEvent"</span>);
03475     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a41">ENDRECV_HWNDLOCK_VOID</a>();
03476 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a114" doxytag="ntuser.h::NtUserOpenClipboard" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserOpenClipboard           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PBOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>pfEmptyClient</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05481">5481</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d6/d7/ex_8h-source.html#l01847">ProbeAndWriteUlong</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00343">StubExceptionHandler</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00362">ThreadLock</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00366">ThreadUnlock</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00410">ValidateHWNDOPT</a>, and <a class="el" href="../../d9/d7/ntuser_2kernel_2clipbrd_8c-source.html#l00124">xxxOpenClipboard()</a>.
<p>
Referenced by <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00540">OpenClipboard()</a>.
<p>
<pre class="fragment"><div>05484 {
05485     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwnd;
05486     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpwnd;
05487     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fEmptyClient;
05488 
05489     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(BOOL, FALSE);
05490 
05491     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a57">ValidateHWNDOPT</a>(pwnd, hwnd);
05492 
05493     <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(pwnd, &amp;tlpwnd);
05494 
05495     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1735">xxxOpenClipboard</a>(pwnd, &amp;fEmptyClient);
05496 
05497     <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwnd);
05498 
05499     <span class="comment">/*</span>
05500 <span class="comment">     * Probe arguments</span>
05501 <span class="comment">     * No need to SetLastError since pfEmptyClient is the address of a local</span>
05502 <span class="comment">     * variable in USER client code, not an application address.</span>
05503 <span class="comment">     */</span>
05504     <span class="keywordflow">try</span> {
05505         <a class="code" href="../../d5/d8/ex_8h.html#a51">ProbeAndWriteUlong</a>(pfEmptyClient, fEmptyClient);
05506     } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(FALSE)) {
05507         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
05508     }
05509 
05510     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserOpenClipboard"</span>);
05511     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
05512 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a17" doxytag="ntuser.h::NtUserOpenDesktop" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI HDESK NtUserOpenDesktop           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN POBJECT_ATTRIBUTES&nbsp;</td>
          <td class="mdname" nowrap> <em>pObja</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwFlags</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ACCESS_MASK&nbsp;</td>
          <td class="mdname" nowrap> <em>amRequest</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l01219">1219</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d4/d7/propapi_8h-source.html#l00043">dwFlags</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d0/d9/ntosdef_8h.html#a76a70">UserMode</a>, and <a class="el" href="../../d0/d6/desktop_8c-source.html#l03265">xxxOpenDesktop()</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/client_8c-source.html#l02555">CommonOpenDesktop()</a>.
<p>
<pre class="fragment"><div>01223 {
01224     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> bShutDown;
01225 
01226     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(HDESK, NULL);
01227 
01228     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1796">xxxOpenDesktop</a>(pObja, UserMode, dwFlags, amRequest, &amp;bShutDown);
01229 
01230     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserOpenDesktop"</span>);
01231     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
01232 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a18" doxytag="ntuser.h::NtUserOpenInputDesktop" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI HDESK NtUserOpenInputDesktop           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwFlags</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fInherit</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>amRequest</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l01235">1235</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d9/d7/winsta_8c-source.html#l01240">_GetProcessWindowStation()</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l07298">CloseProtectedHandle()</a>, <a class="el" href="../../d4/d7/propapi_8h-source.html#l00043">dwFlags</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l02718">tagWINDOWSTATION::dwWSF_Flags</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d4/d6/win32_8c-source.html#l00033">ExDesktopObjectType</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00937">gbDesktopLocked</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00456">grpdeskRitInput</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00936">gspdeskShouldBeForeground</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l07290">HF_PROTECTED</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d8/d0/obref_8c-source.html#l00367">ObOpenObjectByPointer()</a>, <a class="el" href="../../d0/d6/desktop_8c-source.html#l03192">OpenDesktopCompletion()</a>, <a class="el" href="../../d0/d6/desktop_8c-source.html#l04494">SetHandleFlag()</a>, <a class="el" href="../../d3/d0/cttoken_8c-source.html#l00135">Status</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d0/d9/ntosdef_8h.html#a76a70">UserMode</a>, and <a class="el" href="../../d5/d0/userk_8h-source.html#l02704">WSF_NOIO</a>.
<p>
<pre class="fragment"><div>01239 {
01240     HWINSTA        hwinsta;
01241     <a class="code" href="../../d4/d9/structtagWINDOWSTATION.html">PWINDOWSTATION</a> pwinsta;
01242     <a class="code" href="../../d0/d3/structtagDESKTOP.html">PDESKTOP</a>       pdesk;
01243     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>       <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
01244 
01245     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(HDESK, NULL);
01246 
01247     <span class="keywordflow">if</span> (<a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a176">grpdeskRitInput</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01248         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(ERROR_OPEN_FAILED);
01249     } <span class="keywordflow">else</span> {
01250         pwinsta = <a class="code" href="../../d8/d8/winsta_8c.html#a11">_GetProcessWindowStation</a>(&amp;hwinsta);
01251         <span class="keywordflow">if</span> (pwinsta == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01252             <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(ERROR_ACCESS_DENIED);
01253         }
01254         <span class="keywordflow">if</span> (pwinsta-&gt;<a class="code" href="../../d4/d9/structtagWINDOWSTATION.html#o3">dwWSF_Flags</a> &amp; <a class="code" href="../../d4/d1/userk_8h.html#a316">WSF_NOIO</a>) {
01255             <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(ERROR_INVALID_FUNCTION);
01256         } <span class="keywordflow">else</span> {
01257 
01258             <span class="comment">/*</span>
01259 <span class="comment">             * We should never return the 'Disconnect' desktop to</span>
01260 <span class="comment">             * an app. We should return instead the desktop that we will</span>
01261 <span class="comment">             * restore to from the Disconnect desktop.</span>
01262 <span class="comment">             */</span>
01263             
01264             pdesk = (<a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a331">gbDesktopLocked</a> ? <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a330">gspdeskShouldBeForeground</a> : <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a176">grpdeskRitInput</a>);
01265             
01266             <span class="comment">/*</span>
01267 <span class="comment">             * Require read/write access</span>
01268 <span class="comment">             */</span>
01269             amRequest |= DESKTOP_READOBJECTS | DESKTOP_WRITEOBJECTS;
01270 
01271             <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d7/d1/obref_8c.html#a3">ObOpenObjectByPointer</a>(
01272                     pdesk,
01273                     fInherit ? OBJ_INHERIT : 0,
01274                     NULL,
01275                     amRequest,
01276                     *ExDesktopObjectType,
01277                     UserMode,
01278                     &amp;retval);
01279             <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(Status)) {
01280 
01281                 <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> bShutDown;
01282                 <span class="comment">/*</span>
01283 <span class="comment">                 * Complete the desktop open</span>
01284 <span class="comment">                 */</span>
01285                 <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d1/userk_8h.html#a1797">OpenDesktopCompletion</a>(pdesk, retval,
01286                     dwFlags, &amp;bShutDown)) {
01287 
01288                     <a class="code" href="../../d4/d1/userk_8h.html#a2073">CloseProtectedHandle</a>(retval);
01289                     retval = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
01290                 } <span class="keywordflow">else</span> {
01291                     <a class="code" href="../../d4/d1/userk_8h.html#a2069">SetHandleFlag</a>(retval, HF_PROTECTED, TRUE);
01292                 }
01293             } <span class="keywordflow">else</span>
01294                 retval = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
01295         }
01296     }
01297 
01298     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserOpenInputDesktop"</span>);
01299     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
01300 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a11" doxytag="ntuser.h::NtUserOpenWindowStation" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI HWINSTA NtUserOpenWindowStation           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN POBJECT_ATTRIBUTES&nbsp;</td>
          <td class="mdname" nowrap> <em>pObja</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ACCESS_MASK&nbsp;</td>
          <td class="mdname" nowrap> <em>amRequest</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a89" doxytag="ntuser.h::NtUserPaintDesktop" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserPaintDesktop           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HDC&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hdc</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04883">4883</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l02644">tagDESKTOP::pDeskInfo</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00058">PtiCurrent</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03327">tagTHREADINFO::rpdesk</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02156">tagDESKTOPINFO::spwnd</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00364">ThreadLockWithPti</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00366">ThreadUnlock</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d2/d2/dtbitmap_8c-source.html#l01615">xxxInternalPaintDesktop()</a>.
<p>
<pre class="fragment"><div>04885 {
04886     <a class="code" href="../../d2/d8/structtagTHREADINFO.html">PTHREADINFO</a> ptiCurrent;
04887     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a>        pwndDesk;
04888     <a class="code" href="../../d5/d1/struct__TL.html">TL</a>          tlpwndDesk;
04889 
04890     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(BOOL, FALSE);
04891 
04892     ptiCurrent = <a class="code" href="../../d4/d1/userk_8h.html#a9">PtiCurrent</a>();
04893 
04894     <span class="keywordflow">if</span> (ptiCurrent-&gt;<a class="code" href="../../d2/d8/structtagTHREADINFO.html#o6">rpdesk</a> != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
04895         pwndDesk = ptiCurrent-&gt;<a class="code" href="../../d2/d8/structtagTHREADINFO.html#o6">rpdesk</a>-&gt;<a class="code" href="../../d0/d3/structtagDESKTOP.html#o0">pDeskInfo</a>-&gt;<a class="code" href="../../d1/d3/structtagDESKTOPINFO.html#o2">spwnd</a>;
04896         <a class="code" href="../../d6/d0/usercli_8h.html#a38">ThreadLockWithPti</a>(ptiCurrent, pwndDesk, &amp;tlpwndDesk);
04897         retval = <a class="code" href="../../d4/d1/userk_8h.html#a1444">xxxInternalPaintDesktop</a>(pwndDesk, hdc, TRUE);
04898         <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndDesk);
04899     } <span class="keywordflow">else</span> {
04900         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
04901     }
04902 
04903     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserPaintDesktop"</span>);
04904     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
04905 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a115" doxytag="ntuser.h::NtUserPeekMessage" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserPeekMessage           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">OUT LPMSG&nbsp;</td>
          <td class="mdname" nowrap> <em>pmsg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>wMsgFilterMin</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>wMsgFilterMax</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>wRemoveMsg</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05514">5514</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d3/d0/userexts_8c-source.html#l01830">msg</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d6/d7/ex_8h-source.html#l01902">ProbeAndWriteStructure</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00343">StubExceptionHandler</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00345">TESTFLAGS</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d5/d0/userk_8h-source.html#l05553">xxxPeekMessage</a>.
<p>
Referenced by <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00556">_PeekMessage()</a>.
<p>
<pre class="fragment"><div>05520 {
05521     MSG <a class="code" href="../../d2/d1/userexts_8c.html#a129">msg</a>;
05522 
05523     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(BOOL, FALSE);
05524 
05525     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a46">TESTFLAGS</a>(wRemoveMsg, PM_VALID);
05526 
05527     retval = <a class="code" href="../../d4/d1/userk_8h.html#a576">xxxPeekMessage</a>(
05528             &amp;msg,
05529             hwnd,
05530             wMsgFilterMin,
05531             wMsgFilterMax,
05532             wRemoveMsg);
05533 
05534     <span class="comment">/*</span>
05535 <span class="comment">     * Probe and write arguments only if PeekMessage suceeds otherwise</span>
05536 <span class="comment">     * we want to leave MSG undisturbed (bug 16224) to be compatible.</span>
05537 <span class="comment">     */</span>
05538     <span class="keywordflow">if</span> (retval) {
05539         <span class="keywordflow">try</span> {
05540             <a class="code" href="../../d5/d8/ex_8h.html#a54">ProbeAndWriteStructure</a>(pmsg, msg, MSG);
05541         } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(TRUE)) {
05542             <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
05543         }
05544     }
05545 
05546     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserPeekMessage"</span>);
05547     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
05548 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a116" doxytag="ntuser.h::NtUserPostMessage" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserPostMessage           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>msg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN WPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05550">5550</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d6/d2/ntuser_2kernel_2input_8c-source.html#l00981">_PostMessage()</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d3/d0/userexts_8c-source.html#l01830">msg</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02217">MSGFLAG_MASK</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03833">PWND_BROADCAST</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, and <a class="el" href="../../d5/d9/immcli_8h-source.html#l00120">ValidateHwnd</a>.
<p>
Referenced by <a class="el" href="../../d1/d7/ntcftxt_8h-source.html#l00427">PostMessage()</a>.
<p>
<pre class="fragment"><div>05555 {
05556     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwnd;
05557 
05558     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(BOOL, FALSE);
05559 
05560     <span class="comment">/*</span>
05561 <span class="comment">     * Prevent apps from setting hi 16 bits so we can use them internally.</span>
05562 <span class="comment">     */</span>
05563     <span class="keywordflow">if</span> (<a class="code" href="../../d2/d1/userexts_8c.html#a129">msg</a> &amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a543">MSGFLAG_MASK</a>) {
05564         RIPERR0(ERROR_INVALID_PARAMETER, RIP_WARNING, <span class="stringliteral">"Invalid message"</span>);
05565         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
05566     }
05567 
05568     <span class="keywordflow">switch</span> ((ULONG_PTR)hwnd) {
05569     <span class="keywordflow">case</span> -1:
05570     <span class="keywordflow">case</span> 0x0000FFFF:
05571         pwnd = <a class="code" href="../../d4/d1/userk_8h.html#a457">PWND_BROADCAST</a>;
05572         <span class="keywordflow">break</span>;
05573 
05574     <span class="keywordflow">case</span> 0:
05575         pwnd = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
05576         <span class="keywordflow">break</span>;
05577 
05578     <span class="keywordflow">default</span>:
05579         <span class="keywordflow">if</span> ((pwnd = <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(hwnd)) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
05580             <span class="comment">/*</span>
05581 <span class="comment">             * We fake terminates to dead windows! (SAS)</span>
05582 <span class="comment">             */</span>
05583             errret = (<a class="code" href="../../d2/d1/userexts_8c.html#a129">msg</a> == WM_DDE_TERMINATE);
05584             <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
05585         }
05586         <span class="keywordflow">break</span>;
05587     }
05588 
05589     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1642">_PostMessage</a>(
05590             pwnd,
05591             msg,
05592             wParam,
05593             lParam);
05594 
05595     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserPostMessage"</span>);
05596     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
05597 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a49" doxytag="ntuser.h::NtUserPostThreadMessage" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserPostThreadMessage           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>id</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>msg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN WPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l03161">3161</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d6/d2/ntuser_2kernel_2input_8c-source.html#l01123">_PostThreadMessage()</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d0/d6/desktop_8c-source.html#l02773">GetDesktopView()</a>, <a class="el" href="../../d5/d7/ex_8c-source.html#l00050">GetProcessLuid()</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00094">gpwpiFirstWow</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03173">tagTDB::hTaskWow</a>, <a class="el" href="../../d3/d0/userexts_8c-source.html#l01830">msg</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02217">MSGFLAG_MASK</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03319">tagTHREADINFO::ppi</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03168">tagTDB::ptdbNext</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03171">tagTDB::pti</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00058">PtiCurrent</a>, <a class="el" href="../../d7/d2/queue_8c-source.html#l04737">PtiFromThreadId()</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03410">tagWOWPROCESSINFO::pwpiNext</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03327">tagTHREADINFO::rpdesk</a>, <a class="el" href="../../d9/d5/sertl_8c-source.html#l01824">RtlEqualLuid()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02829">TIF_CSRSSTHREAD</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03331">tagTHREADINFO::TIF_flags</a>, and <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>.
<p>
Referenced by <a class="el" href="../../d1/d7/ntcftxt_8h-source.html#l00481">PostThreadMessage()</a>.
<p>
<pre class="fragment"><div>03166 {
03167     <a class="code" href="../../d2/d8/structtagTHREADINFO.html">PTHREADINFO</a> ptiCurrent, pti;
03168 
03169     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(BOOL, FALSE);
03170 
03171     <span class="comment">/*</span>
03172 <span class="comment">     * Prevent apps from setting hi 16 bits so we can use them internally.</span>
03173 <span class="comment">     */</span>
03174     <span class="keywordflow">if</span> (<a class="code" href="../../d2/d1/userexts_8c.html#a129">msg</a> &amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a543">MSGFLAG_MASK</a>) {
03175         RIPERR0(ERROR_INVALID_PARAMETER, RIP_WARNING, <span class="stringliteral">"Invalid message"</span>);
03176         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
03177     }
03178 
03179     pti = <a class="code" href="../../d4/d1/userk_8h.html#a1201">PtiFromThreadId</a>(<span class="keywordtype">id</span>);
03180     <span class="keywordflow">if</span> (pti == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
03181         <span class="keyword">struct </span><a class="code" href="../../d7/d9/structtagWOWPROCESSINFO.html">tagWOWPROCESSINFO</a> *pwpi;
03182         <a class="code" href="../../d0/d8/structtagTDB.html">PTDB</a> ptdb;
03183 
03184         <span class="keywordflow">for</span> (pwpi=<a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a28">gpwpiFirstWow</a>; pwpi; pwpi=pwpi-&gt;<a class="code" href="../../d7/d9/structtagWOWPROCESSINFO.html#o0">pwpiNext</a>) {
03185             <span class="keywordflow">for</span> (ptdb=pwpi-&gt;ptdbHead; ptdb; ptdb=ptdb-&gt;<a class="code" href="../../d0/d8/structtagTDB.html#o0">ptdbNext</a>) {
03186                 <span class="keywordflow">if</span> (ptdb-&gt;<a class="code" href="../../d0/d8/structtagTDB.html#o5">hTaskWow</a> == <span class="keywordtype">id</span>) {
03187                     pti=ptdb-&gt;<a class="code" href="../../d0/d8/structtagTDB.html#o3">pti</a>;
03188                     <span class="keywordflow">goto</span> PTM_DoIt;
03189                 }
03190             }
03191         }
03192 
03193         RIPERR0(ERROR_INVALID_THREAD_ID, RIP_VERBOSE, <span class="stringliteral">""</span>);
03194         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
03195     }
03196 
03197 PTM_DoIt:
03198 
03199     <span class="comment">/*</span>
03200 <span class="comment">     * Should be OK if any of the following are true</span>
03201 <span class="comment">     *   threads are running on the same desktop</span>
03202 <span class="comment">     *   request is on behalf of a system process</span>
03203 <span class="comment">     *   this process owns the desktop the thread is running in</span>
03204 <span class="comment">     *   the LUIDs match</span>
03205 <span class="comment">     */</span>
03206     ptiCurrent = <a class="code" href="../../d4/d1/userk_8h.html#a9">PtiCurrent</a>();
03207     <span class="keywordflow">if</span> ( !(ptiCurrent-&gt;<a class="code" href="../../d2/d8/structtagTHREADINFO.html#o6">rpdesk</a> == pti-&gt;<a class="code" href="../../d2/d8/structtagTHREADINFO.html#o6">rpdesk</a>) &amp;&amp;
03208          !(ptiCurrent-&gt;<a class="code" href="../../d2/d8/structtagTHREADINFO.html#o9">TIF_flags</a> &amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a798">TIF_CSRSSTHREAD</a>) &amp;&amp;
03209          !(<a class="code" href="../../d4/d1/userk_8h.html#a1283">GetDesktopView</a>(ptiCurrent-&gt;<a class="code" href="../../d2/d8/structtagTHREADINFO.html#o2">ppi</a>, pti-&gt;<a class="code" href="../../d2/d8/structtagTHREADINFO.html#o6">rpdesk</a>))) {
03210 
03211         LUID     luidCurrent, luidTo;
03212 
03213         <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(<a class="code" href="../../d4/d1/userk_8h.html#a961">GetProcessLuid</a>(ptiCurrent-&gt;pEThread, &amp;luidCurrent)) ||
03214             !<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(<a class="code" href="../../d4/d1/userk_8h.html#a961">GetProcessLuid</a>(pti-&gt;pEThread, &amp;luidTo)) ||
03215             !<a class="code" href="../../d8/d6/sertl_8c.html#a50">RtlEqualLuid</a>(&amp;luidCurrent, &amp;luidTo)) {
03216             RIPERR3(ERROR_INVALID_THREAD_ID,
03217                     RIP_WARNING,
03218                     <span class="stringliteral">"NtUserPostThreadMessage failed LUID check: msg(%lx), t1(%#p) -&gt; t2(%#p)"</span>,
03219                     msg, ptiCurrent, pti);
03220             <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
03221         }
03222     }
03223 
03224     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1645">_PostThreadMessage</a>(
03225             pti,
03226             msg,
03227             wParam,
03228             lParam);
03229 
03230     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserPostThreadMessage"</span>);
03231     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
03232 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a262" doxytag="ntuser.h::NtUserProcessConnect" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI NTSTATUS NtUserProcessConnect           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hProcess</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN OUT PVOID&nbsp;</td>
          <td class="mdname" nowrap> <em>pConnectInfo</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>cbConnectInfo</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/kernel_2server_8c-source.html#l02788">2788</a> of file <a class="el" href="../../d0/d6/kernel_2server_8c-source.html">kernel/server.c</a>.
<p>
References <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01364">_USERCONNECT::dwDispatchCount</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d9/d5/ntuser_2client_2globals_8h-source.html#l00026">gDispatchTableValues</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00092">GetCurrentProcessId</a>, <a class="el" href="../../d0/d6/kernel_2server_8c-source.html#l01654">InitMapSharedSection()</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d9/ob_8h-source.html#l00494">ObDereferenceObject</a>, <a class="el" href="../../d8/d0/obref_8c-source.html#l00542">ObReferenceObjectByHandle()</a>, <a class="el" href="../../d0/d4/probe_8c-source.html#l00034">ProbeForWrite()</a>, <a class="el" href="../../d0/d8/ntos_8h-source.html#l00088">PsProcessType</a>, <a class="el" href="../../d3/d0/cttoken_8c-source.html#l00135">Status</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l01116">TRACE_INIT</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01362">_USERCONNECT::ulVersion</a>, <a class="el" href="../../d0/d0/client_2nt6_2user_8h.html#a1005">USERCONNECT</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01305">USERCURRENTVERSION</a>, and <a class="el" href="../../d0/d9/ntosdef_8h.html#a76a70">UserMode</a>.
<p>
Referenced by <a class="el" href="../../d7/d7/clinit_8c-source.html#l01219">ClientThreadSetup()</a>, and <a class="el" href="../../d1/d6/server_2server_8c-source.html#l00357">UserClientConnect()</a>.
<p>
<pre class="fragment"><div>02792 {
02793     <a class="code" href="../../d0/d4/struct__EPROCESS.html">PEPROCESS</a>    Process;
02794     <a class="code" href="../../d6/d4/struct__USERCONNECT.html">PUSERCONNECT</a> pucConnect = (<a class="code" href="../../d6/d4/struct__USERCONNECT.html">PUSERCONNECT</a>)pConnectInfo;
02795     <a class="code" href="../../d6/d4/struct__USERCONNECT.html">USERCONNECT</a>  ucLocal;
02796     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>     <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = STATUS_SUCCESS;
02797 
02798 
02799     <a class="code" href="../../d4/d1/userk_8h.html#a91">TRACE_INIT</a>((<span class="stringliteral">"Entering NtUserProcessConnect\n"</span>));
02800 
02801     <span class="keywordflow">if</span> (!pucConnect || (cbConnectInfo != <span class="keyword">sizeof</span>(<a class="code" href="../../d6/d4/struct__USERCONNECT.html">USERCONNECT</a>))) {
02802         <span class="keywordflow">return</span> STATUS_UNSUCCESSFUL;
02803     }
02804 
02805     <span class="keywordflow">try</span> {
02806         <a class="code" href="../../d5/d8/ex_8h.html#a259">ProbeForWrite</a>(pucConnect, cbConnectInfo, <span class="keyword">sizeof</span>(DWORD));
02807 
02808         ucLocal = *pucConnect;
02809     } except (W32ExceptionHandler(FALSE, RIP_WARNING)) {
02810         <span class="keywordflow">return</span> GetExceptionCode();
02811     }
02812 
02813     <span class="comment">/*</span>
02814 <span class="comment">     * Check client/server versions.</span>
02815 <span class="comment">     */</span>
02816     <span class="keywordflow">if</span> (ucLocal.<a class="code" href="../../d6/d4/struct__USERCONNECT.html#o0">ulVersion</a> != <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a409">USERCURRENTVERSION</a>) {
02817 
02818         RIPMSG2(RIP_ERROR,
02819             <span class="stringliteral">"Client version %lx &gt; server version %lx\n"</span>,
02820             ucLocal.<a class="code" href="../../d6/d4/struct__USERCONNECT.html#o0">ulVersion</a>, USERCURRENTVERSION);
02821         <span class="keywordflow">return</span> STATUS_UNSUCCESSFUL;
02822     }
02823 
02824 
02825 
02826     <span class="keywordflow">if</span> (ucLocal.<a class="code" href="../../d6/d4/struct__USERCONNECT.html#o2">dwDispatchCount</a> != <a class="code" href="../../d8/d6/ntuser_2client_2globals_8h.html#a11">gDispatchTableValues</a>) {
02827         RIPMSG2(RIP_ERROR,
02828             <span class="stringliteral">"!!!! Client Dispatch info %lX != Server %lX\n"</span>,
02829             ucLocal.<a class="code" href="../../d6/d4/struct__USERCONNECT.html#o2">dwDispatchCount</a>, gDispatchTableValues);
02830     }
02831 
02832 
02833     <span class="comment">/*</span>
02834 <span class="comment">     * Reference the process.</span>
02835 <span class="comment">     */</span>
02836     <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d7/d1/obref_8c.html#a4">ObReferenceObjectByHandle</a>(hProcess,
02837                                        PROCESS_VM_OPERATION,
02838                                        *PsProcessType,
02839                                        UserMode,
02840                                        &amp;Process,
02841                                        NULL);
02842     <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(Status))
02843         <span class="keywordflow">return</span> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
02844     <span class="comment">/*</span>
02845 <span class="comment">     * Return client's view of shared data.</span>
02846 <span class="comment">     */</span>
02847     <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d9/d6/kernel_2server_8c.html#a70">InitMapSharedSection</a>(Process, &amp;ucLocal);
02848 
02849     <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(Status)                       &amp;&amp;
02850         (<a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> != STATUS_NO_MEMORY)              &amp;&amp;
02851         (<a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> != STATUS_PROCESS_IS_TERMINATING) &amp;&amp;
02852         (<a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> != STATUS_QUOTA_EXCEEDED)         &amp;&amp;
02853         (<a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> != STATUS_COMMITMENT_LIMIT)) {
02854 
02855         RIPMSG2(RIP_ERROR,
02856               <span class="stringliteral">"Failed to map shared data into client %x, status = %x\n"</span>,
02857               <a class="code" href="../../d4/d1/userk_8h.html#a19">GetCurrentProcessId</a>(), Status);
02858     }
02859 
02860     <a class="code" href="../../d4/d0/ob_8h.html#a14">ObDereferenceObject</a>(Process);
02861 
02862     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(Status)) {
02863 
02864         <span class="keywordflow">try</span> {
02865              *pucConnect = ucLocal;
02866         } except (W32ExceptionHandler(FALSE, RIP_WARNING)) {
02867             <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = GetExceptionCode();
02868         }
02869     }
02870 
02871     <a class="code" href="../../d4/d1/userk_8h.html#a91">TRACE_INIT</a>((<span class="stringliteral">"Leaving NtUserProcessConnect\n"</span>));
02872 
02873     <span class="keywordflow">return</span> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
02874 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a182" doxytag="ntuser.h::NtUserQueryInformationThread" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI NTSTATUS NtUserQueryInformationThread           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hThread</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN USERTHREADINFOCLASS&nbsp;</td>
          <td class="mdname" nowrap> <em>ThreadInfoClass</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PVOID&nbsp;</td>
          <td class="mdname" nowrap> <em>ThreadInformation</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>ThreadInformationLength</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN OUT PULONG ReturnLength&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l07532">7532</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00083">BEGINRECVCSRSS</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00092">ENDRECVCSRSS</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d0/d4/probe_8c-source.html#l00034">ProbeForWrite()</a>, <a class="el" href="../../d6/d7/ex_8h-source.html#l01447">ProbeForWriteBoolean</a>, <a class="el" href="../../d6/d7/ex_8h-source.html#l01649">ProbeForWriteUlong</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, and <a class="el" href="../../d7/d2/queue_8c-source.html#l05901">xxxQueryInformationThread()</a>.
<p>
Referenced by <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l00728">GetApplicationText()</a>, <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l00698">GetInputWindow()</a>, <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l00757">ThreadShutdownNotify()</a>, <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l00219">UserClientShutdown()</a>, and <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l01791">WowExitTask()</a>.
<p>
<pre class="fragment"><div>07538 {
07539     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a7">BEGINRECVCSRSS</a>(NTSTATUS, STATUS_UNSUCCESSFUL);
07540     <span class="comment">/*</span>
07541 <span class="comment">     * note -- QueryInformationThread can call xxxSwitchDesktop, so it is not sharable</span>
07542 <span class="comment">     */</span>
07543 
07544     <span class="comment">/*</span>
07545 <span class="comment">     * Probe arguments -- no try/except</span>
07546 <span class="comment">     */</span>
07547 
07548 <span class="preprocessor">#if DBG</span>
07549 <span class="preprocessor"></span>    <span class="keywordflow">if</span> (ARGUMENT_PRESENT(ThreadInformation)) {
07550         <span class="keywordflow">switch</span> (ThreadInfoClass) {
07551         <span class="keywordflow">case</span> UserThreadShutdownInformation:
07552         <span class="keywordflow">case</span> UserThreadFlags:
07553         <span class="keywordflow">case</span> UserThreadWOWInformation:
07554         <span class="keywordflow">case</span> UserThreadHungStatus:
07555             <a class="code" href="../../d5/d8/ex_8h.html#a28">ProbeForWriteBoolean</a>((PBOOLEAN)ThreadInformation);
07556             <span class="keywordflow">break</span>;
07557         <span class="keywordflow">case</span> UserThreadTaskName:
07558             <a class="code" href="../../d5/d8/ex_8h.html#a259">ProbeForWrite</a>(ThreadInformation, ThreadInformationLength,
07559                     <span class="keyword">sizeof</span>(WCHAR));
07560             <span class="keywordflow">break</span>;
07561         }
07562     }
07563     <span class="keywordflow">if</span> (ARGUMENT_PRESENT(ReturnLength))
07564         <a class="code" href="../../d5/d8/ex_8h.html#a40">ProbeForWriteUlong</a>(ReturnLength);
07565 <span class="preprocessor">#endif</span>
07566 <span class="preprocessor"></span>
07567     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1944">xxxQueryInformationThread</a>(hThread,
07568             ThreadInfoClass, ThreadInformation,
07569             ThreadInformationLength, ReturnLength);
07570 
07571     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserQueryInformationThread"</span>);
07572     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a8">ENDRECVCSRSS</a>();
07573 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a206" doxytag="ntuser.h::NtUserQuerySendMessage" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserQuerySendMessage           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">OUT PMSG&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pmsg</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l08580">8580</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00094">BEGINRECV_SHARED</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00099">ENDRECV_SHARED</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01514">HW</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00742">ProbeForWriteMessage</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03297">PSMS</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00059">PtiCurrentShared</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00343">StubExceptionHandler</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
<pre class="fragment"><div>08582 {
08583     <a class="code" href="../../d4/d1/userk_8h.html#a871">PSMS</a> psms;
08584     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a9">BEGINRECV_SHARED</a>(BOOL, FALSE);
08585 
08586     <span class="comment">/*</span>
08587 <span class="comment">     * This function looks like dead code. If it's not, it can be optimized</span>
08588 <span class="comment">     * by using the CTIF_INSENDMESSAGE flag from user mode. - JerrySh</span>
08589 <span class="comment">     */</span>
08590     RIPMSG0(RIP_ERROR, <span class="stringliteral">"I don't think QuerySendMessage ever gets called. Remove this assert if it does."</span>);
08591 
08592     <span class="keywordflow">if</span> ((psms = <a class="code" href="../../d4/d1/userk_8h.html#a10">PtiCurrentShared</a>()-&gt;psmsCurrent) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
08593         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
08594     }
08595 
08596     retval = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
08597     <span class="keywordflow">if</span> (ARGUMENT_PRESENT(pmsg)) {
08598         <span class="keywordflow">try</span> {
08599             <a class="code" href="../../d4/d1/userk_8h.html#a69">ProbeForWriteMessage</a>(pmsg);
08600             pmsg-&gt;hwnd = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a450">HW</a>(psms-&gt;spwnd);
08601             pmsg-&gt;message = psms-&gt;message;
08602             pmsg-&gt;wParam = psms-&gt;wParam;
08603             pmsg-&gt;lParam = psms-&gt;lParam;
08604             pmsg-&gt;time = psms-&gt;tSent;
08605             pmsg-&gt;pt.x = 0;
08606             pmsg-&gt;pt.y = 0;
08607             retval = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
08608         } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(FALSE)) {
08609             <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
08610         }
08611     }
08612 
08613     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserQuerySendMessage"</span>);
08614     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a10">ENDRECV_SHARED</a>();
08615 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a253" doxytag="ntuser.h::NtUserQueryUserCounters" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserQueryUserCounters           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwQueryType</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a5">LPVOID</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pvIn</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwInSize</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT <a class="el" href="../../d0/d5/perfuser_8c.html#a5">LPVOID</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pvResult</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwOutSize</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l13179">13179</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d4/d1/userk_8h.html#a2084">_QueryUserHandles()</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00047">_tagCSStatistics::cExclusive</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00251">CLEANUPRECV</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00048">_tagCSStatistics::cShared</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d1/d3/ex_2alpha_2raisests_8c-source.html#l00157">ExRaiseStatus()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00049">_tagCSStatistics::i64TimeExclusive</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00330">MSGERROR_VOID</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00336">MSGERRORCLEANUP</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d6/d7/ex_8h-source.html#l01209">ProbeForRead</a>, <a class="el" href="../../d0/d4/probe_8c-source.html#l00034">ProbeForWrite()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00343">StubExceptionHandler</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00924">TYPE_CTYPES</a>.
<p>
<pre class="fragment"><div>13185 {
13186     PDWORD  pdwInternalIn = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
13187     PDWORD  pdwInternalResult = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
13188 
13189     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(BOOL, FALSE);
13190 
13191 <span class="preprocessor">#if defined (USER_PERFORMANCE)</span>
13192 <span class="preprocessor"></span>    <span class="keywordflow">if</span> (dwQueryType == QUERYUSER_CS) {
13193         <a class="code" href="../../d5/d8/struct__tagCSStatistics.html">CSSTATISTICS</a>* pcsData;
13194 
13195         <span class="keywordflow">if</span> (dwOutSize != <span class="keyword">sizeof</span>(<a class="code" href="../../d5/d8/struct__tagCSStatistics.html">CSSTATISTICS</a>)) {
13196             <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
13197         }
13198         <span class="keywordflow">try</span> {
13199             <a class="code" href="../../d5/d8/ex_8h.html#a259">ProbeForWrite</a>((PDWORD)pvResult, dwOutSize, <span class="keyword">sizeof</span>(DWORD));
13200 
13201             <span class="comment">/*</span>
13202 <span class="comment">             * Checking for overflow on these counters is caller responsability</span>
13203 <span class="comment">             */</span>
13204             pcsData = (<a class="code" href="../../d5/d8/struct__tagCSStatistics.html">CSSTATISTICS</a>*)pvResult;
13205             pcsData-&gt;<a class="code" href="../../d5/d8/struct__tagCSStatistics.html#o0">cExclusive</a>       = gCSStatistics.cExclusive;
13206             pcsData-&gt;<a class="code" href="../../d5/d8/struct__tagCSStatistics.html#o1">cShared</a>          = gCSStatistics.cShared;
13207             pcsData-&gt;<a class="code" href="../../d5/d8/struct__tagCSStatistics.html#o2">i64TimeExclusive</a> = gCSStatistics.i64TimeExclusive;
13208 
13209         } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(FALSE)) {
13210             <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
13211         }
13212         retval = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
13213         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a43">MSGERROR_VOID</a>();
13214     }
13215     <span class="keywordflow">else</span>
13216 <span class="preprocessor">#endif // USER_PERFORMANCE</span>
13217 <span class="preprocessor"></span>
13218     <span class="keywordflow">if</span> (dwQueryType == QUERYUSER_HANDLES) {
13219 
13220         <span class="comment">/*</span>
13221 <span class="comment">         * Probe arguments, dwInSize should be multiple of 4</span>
13222 <span class="comment">         */</span>
13223         <span class="keywordflow">if</span> (dwInSize &amp; (<span class="keyword">sizeof</span>(<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)-1) ||
13224             dwOutSize != <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a254">TYPE_CTYPES</a>*dwInSize) {
13225 
13226             <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0)
13227         }
13228 
13229         <span class="keywordflow">try</span> {
13230             <a class="code" href="../../d5/d8/ex_8h.html#a11">ProbeForRead</a>((PDWORD)pvIn, dwInSize, <span class="keyword">sizeof</span>(DWORD));
13231             pdwInternalIn = UserAllocPoolWithQuota(dwInSize, TAG_SYSTEM);
13232             <span class="keywordflow">if</span> (!pdwInternalIn) {
13233                 <a class="code" href="../../d5/d8/ex_8h.html#a303">ExRaiseStatus</a>(STATUS_NO_MEMORY);
13234             }
13235             RtlCopyMemory(pdwInternalIn, pvIn, dwInSize);
13236 
13237             <a class="code" href="../../d5/d8/ex_8h.html#a259">ProbeForWrite</a>(pvResult, dwOutSize, <span class="keyword">sizeof</span>(DWORD));
13238             pdwInternalResult = UserAllocPoolWithQuota(dwOutSize, TAG_SYSTEM);
13239             <span class="keywordflow">if</span> (!pdwInternalResult) {
13240                 <a class="code" href="../../d5/d8/ex_8h.html#a303">ExRaiseStatus</a>(STATUS_NO_MEMORY);
13241             }
13242 
13243         } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(FALSE)) {
13244                 <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a44">MSGERRORCLEANUP</a>(0);
13245         }
13246 
13247         <a class="code" href="../../d4/d1/userk_8h.html#a2084">_QueryUserHandles</a>(pdwInternalIn,
13248                 dwInSize/<span class="keyword">sizeof</span>(DWORD),
13249                 (DWORD (*)[TYPE_CTYPES])pdwInternalResult);
13250         retval = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
13251 
13252         <span class="keywordflow">try</span> {
13253             RtlCopyMemory(pvResult, pdwInternalResult, dwOutSize);
13254 
13255         } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(FALSE)) {
13256                 <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a44">MSGERRORCLEANUP</a>(0);
13257         }
13258     }
13259 
13260     <span class="keywordflow">else</span> {
13261 
13262        <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
13263     }
13264 
13265     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a33">CLEANUPRECV</a>();
13266     <span class="keywordflow">if</span> (pdwInternalIn) {
13267         UserFreePool(pdwInternalIn);
13268     }
13269     <span class="keywordflow">if</span> (pdwInternalResult) {
13270         UserFreePool(pdwInternalResult);
13271     }
13272 
13273     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserQueryCounters"</span>);
13274     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
13275 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a246" doxytag="ntuser.h::NtUserQueryWindow" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI HANDLE NtUserQueryWindow           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN WINDOWINFOCLASS&nbsp;</td>
          <td class="mdname" nowrap> <em>WindowInfo</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l09643">9643</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d5/d0/userk_8h-source.html#l05797">_GetWindowLong</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00144">BEGINRECV_HWND_SHARED</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l03506">CMSHUNGAPPTIMEOUT</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00154">ENDRECV_HWND_SHARED</a>, <a class="el" href="../../d6/d1/hungapp_8c-source.html#l00080">FHungApp()</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00767">gatomConsoleClass</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01547">GETPTI</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00099">gpqForeground</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01827">tagWND::head</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01514">HW</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03321">tagTHREADINFO::pq</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00059">PtiCurrentShared</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01512">PtoH</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01513">PtoHq</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03380">tagTHREADINFO::spDefaultImc</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03111">tagQ::spwndActive</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03379">tagTHREADINFO::spwndDefaultIme</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03110">tagQ::spwndFocus</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02829">TIF_CSRSSTHREAD</a>, and <a class="el" href="../../d5/d0/userk_8h-source.html#l03331">tagTHREADINFO::TIF_flags</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/winmgrc_8c-source.html#l00251">GetWindowThreadProcessId()</a>, <a class="el" href="../../d0/d9/imectl_8c-source.html#l00798">ImeSetContextHandler()</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00086">ImmAssociateContext()</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00142">ImmAssociateContextEx()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00027">ImmGetDefaultIMEWnd()</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00225">ImmGetSaveContext()</a>, <a class="el" href="../../d7/d9/immime_8c-source.html#l01272">ImmSendMessageToActiveDefImeWndW()</a>, <a class="el" href="../../d4/d7/winmgrc_8c-source.html#l00571">IsHungAppWindow()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02425">xxxChildResize()</a>, and <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01237">xxxMDIActivate()</a>.
<p>
<pre class="fragment"><div>09646 {
09647     <a class="code" href="../../d2/d8/structtagTHREADINFO.html">PTHREADINFO</a> ptiWnd;
09648 
09649     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a20">BEGINRECV_HWND_SHARED</a>(HANDLE, NULL, hwnd);
09650 
09651     ptiWnd = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a455">GETPTI</a>(pwnd);
09652 
09653     <span class="keywordflow">switch</span> (WindowInfo) {
09654     <span class="keywordflow">case</span> WindowProcess:
09655 
09656         <span class="comment">/*</span>
09657 <span class="comment">         * Special case console windows</span>
09658 <span class="comment">         */</span>
09659         <span class="keywordflow">if</span> (ptiWnd-&gt;<a class="code" href="../../d2/d8/structtagTHREADINFO.html#o9">TIF_flags</a> &amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a798">TIF_CSRSSTHREAD</a> &amp;&amp;
09660                 pwnd-&gt;pcls-&gt;atomClassName == <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a281">gatomConsoleClass</a>) {
09661             retval = (HANDLE)LongToHandle( <a class="code" href="../../d4/d1/userk_8h.html#a589">_GetWindowLong</a>(pwnd, 0) );
09662         } <span class="keywordflow">else</span> {
09663             retval = (HANDLE)ptiWnd-&gt;pEThread-&gt;Cid.UniqueProcess;
09664         }
09665         <span class="keywordflow">break</span>;
09666     <span class="keywordflow">case</span> WindowThread:
09667 
09668         <span class="comment">/*</span>
09669 <span class="comment">         * Special case console windows</span>
09670 <span class="comment">         */</span>
09671         <span class="keywordflow">if</span> (ptiWnd-&gt;<a class="code" href="../../d2/d8/structtagTHREADINFO.html#o9">TIF_flags</a> &amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a798">TIF_CSRSSTHREAD</a> &amp;&amp;
09672                 pwnd-&gt;pcls-&gt;atomClassName == <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a281">gatomConsoleClass</a>) {
09673             retval = (HANDLE)LongToHandle( <a class="code" href="../../d4/d1/userk_8h.html#a589">_GetWindowLong</a>(pwnd, 4) );
09674         } <span class="keywordflow">else</span> {
09675             retval = (HANDLE)ptiWnd-&gt;pEThread-&gt;Cid.UniqueThread;
09676         }
09677         <span class="keywordflow">break</span>;
09678     <span class="keywordflow">case</span> WindowActiveWindow:
09679         retval = (HANDLE)<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a450">HW</a>(ptiWnd-&gt;<a class="code" href="../../d2/d8/structtagTHREADINFO.html#o3">pq</a>-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o8">spwndActive</a>);
09680         <span class="keywordflow">break</span>;
09681     <span class="keywordflow">case</span> WindowFocusWindow:
09682         retval = (HANDLE)<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a450">HW</a>(ptiWnd-&gt;<a class="code" href="../../d2/d8/structtagTHREADINFO.html#o3">pq</a>-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o7">spwndFocus</a>);
09683         <span class="keywordflow">break</span>;
09684     <span class="keywordflow">case</span> WindowIsHung:
09685         retval = (HANDLE)IntToPtr( <a class="code" href="../../d4/d1/userk_8h.html#a1650">FHungApp</a>(ptiWnd, CMSHUNGAPPTIMEOUT) );
09686         <span class="keywordflow">break</span>;
09687     <span class="keywordflow">case</span> WindowIsForegroundThread:
09688         retval = (HANDLE)IntToPtr( (ptiWnd-&gt;<a class="code" href="../../d2/d8/structtagTHREADINFO.html#o3">pq</a> == gpqForeground) );
09689         <span class="keywordflow">break</span>;
09690     <span class="keywordflow">case</span> WindowDefaultImeWindow:
09691         retval = (HANDLE)<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a450">HW</a>(ptiWnd-&gt;<a class="code" href="../../d2/d8/structtagTHREADINFO.html#o39">spwndDefaultIme</a>);
09692         <span class="keywordflow">break</span>;
09693     <span class="keywordflow">case</span> WindowDefaultInputContext:
09694         retval = (HANDLE)<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a448">PtoH</a>(ptiWnd-&gt;<a class="code" href="../../d2/d8/structtagTHREADINFO.html#o40">spDefaultImc</a>);
09695         <span class="keywordflow">break</span>;
09696     <span class="keywordflow">case</span> WindowActiveDefaultImeWindow:
09697         <span class="comment">/*</span>
09698 <span class="comment">         * Only return a window if there is a foreground queue and the</span>
09699 <span class="comment">         * caller has access to the current desktop.</span>
09700 <span class="comment">         */</span>
09701         retval = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
09702         <span class="keywordflow">if</span> (<a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a29">gpqForeground</a> &amp;&amp; <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a29">gpqForeground</a>-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o8">spwndActive</a> &amp;&amp;
09703                 <a class="code" href="../../d4/d1/userk_8h.html#a10">PtiCurrentShared</a>()-&gt;rpdesk == <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a29">gpqForeground</a>-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o8">spwndActive</a>-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o0">head</a>.rpdesk) {
09704             <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwndFG = <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a29">gpqForeground</a>-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o8">spwndActive</a>;
09705 
09706             <span class="keywordflow">if</span> (pwndFG &amp;&amp; pwndFG-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o0">head</a>.pti) {
09707                 retval = (HANDLE)<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a449">PtoHq</a>(pwndFG-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o0">head</a>.pti-&gt;spwndDefaultIme);
09708             }
09709         }
09710         <span class="keywordflow">break</span>;
09711     <span class="keywordflow">default</span>:
09712         retval = (HANDLE)<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
09713         <span class="keywordflow">break</span>;
09714     }
09715 
09716     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a21">ENDRECV_HWND_SHARED</a>();
09717 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a237" doxytag="ntuser.h::NtUserRealChildWindowFromPoint" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI HWND NtUserRealChildWindowFromPoint           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwndParent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN POINT&nbsp;</td>
          <td class="mdname" nowrap> <em>pt</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l03715">3715</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d7/d6/winable2_8c-source.html#l00505">_RealChildWindowFromPoint()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00144">BEGINRECV_HWND_SHARED</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00154">ENDRECV_HWND_SHARED</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01512">PtoH</a>, and <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>.
<p>
<pre class="fragment"><div>03716 {
03717     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a20">BEGINRECV_HWND_SHARED</a>(HWND, NULL, hwndParent);
03718 
03719     retval = (HWND)<a class="code" href="../../d6/d7/winable2_8c.html#a4">_RealChildWindowFromPoint</a>(pwnd, pt);
03720     retval = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a448">PtoH</a>((PVOID)retval);
03721 
03722     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserRealChildWindowFromPoint"</span>);
03723     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a21">ENDRECV_HWND_SHARED</a>();
03724 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a158" doxytag="ntuser.h::NtUserRedrawWindow" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserRedrawWindow           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN CONST RECT *lprcUpdate&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN HRGN&nbsp;</td>
          <td class="mdname" nowrap> <em>hrgnUpdate</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>flags</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06738">6738</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00206">BEGINRECV_HWNDLOCK_OPT</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00224">ENDRECV_HWNDLOCK_OPT</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00203">ProbeAndReadRect</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00343">StubExceptionHandler</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00345">TESTFLAGS</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d9/d8/update_8c-source.html#l00299">xxxRedrawWindow()</a>.
<p>
<pre class="fragment"><div>06743 {
06744     RECT rc;
06745 
06746     <span class="comment">//</span>
06747     <span class="comment">// N.B. This function has implicit window translation and thread locking</span>
06748     <span class="comment">//      enabled. These operations are performed in the User server API</span>
06749     <span class="comment">//      dispatcher.</span>
06750     <span class="comment">//</span>
06751 
06752     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a28">BEGINRECV_HWNDLOCK_OPT</a>(BOOL, FALSE, hwnd);
06753 
06754     <span class="comment">/*</span>
06755 <span class="comment">     * Probe arguments</span>
06756 <span class="comment">     */</span>
06757     <span class="keywordflow">if</span> (ARGUMENT_PRESENT(lprcUpdate)) {
06758         <span class="keywordflow">try</span> {
06759             rc = <a class="code" href="../../d4/d1/userk_8h.html#a31">ProbeAndReadRect</a>(lprcUpdate);
06760             lprcUpdate = &amp;rc;
06761         } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(TRUE)) {
06762             <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
06763         }
06764     }
06765 
06766     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a46">TESTFLAGS</a>(flags, RDW_VALIDMASK);
06767 
06768     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1679">xxxRedrawWindow</a>(
06769             pwnd,
06770             (PRECT)lprcUpdate,
06771             hrgnUpdate,
06772             flags);
06773 
06774     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserRedrawWindow"</span>);
06775     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a29">ENDRECV_HWNDLOCK_OPT</a>();
06776 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a220" doxytag="ntuser.h::NtUserRegisterClassExWOW" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI ATOM NtUserRegisterClassExWOW           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN WNDCLASSEX *&nbsp;</td>
          <td class="mdname" nowrap> <em>lpWndClass</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PUNICODE_STRING&nbsp;</td>
          <td class="mdname" nowrap> <em>pstrClassName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d8/d0/structtagCLSMENUNAME.html">PCLSMENUNAME</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pcmn</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN WORD&nbsp;</td>
          <td class="mdname" nowrap> <em>fnid</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwFlags</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN LPDWORD pdwWOWstuff&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l09119">9119</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d0/d7/halvprnt_8c-source.html#l00031">BYTE</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01772">CSF_VALID</a>, <a class="el" href="../../d4/d7/propapi_8h-source.html#l00043">dwFlags</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d6/d7/ex_8h-source.html#l01431">ProbeAndReadStructure</a>, <a class="el" href="../../d6/d7/ex_8h-source.html#l01417">ProbeAndReadUnicodeString</a>, <a class="el" href="../../d6/d7/ex_8h-source.html#l01209">ProbeForRead</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00654">ProbeForReadUnicodeStringBufferOrId</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01724">tagCLSMENUNAME::pusMenuName</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00343">StubExceptionHandler</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00345">TESTFLAGS</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d3/d6/class_8c-source.html#l00101">xxxRegisterClassEx()</a>.
<p>
<pre class="fragment"><div>09126 {
09127     UNICODE_STRING strClassName;
09128     UNICODE_STRING strMenuName;
09129     WNDCLASSEX WndClass;
09130     WC WowCls;
09131     <a class="code" href="../../d8/d0/structtagCLSMENUNAME.html">CLSMENUNAME</a> cmn;
09132 
09133     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(ATOM, 0);
09134 
09135     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a46">TESTFLAGS</a>(dwFlags, CSF_VALID);
09136 
09137     <span class="comment">/*</span>
09138 <span class="comment">     * Probe arguments</span>
09139 <span class="comment">     */</span>
09140     <span class="keywordflow">try</span> {
09141         strClassName = <a class="code" href="../../d5/d8/ex_8h.html#a26">ProbeAndReadUnicodeString</a>(pstrClassName);
09142         cmn = <a class="code" href="../../d5/d8/ex_8h.html#a27">ProbeAndReadStructure</a>(pcmn, <a class="code" href="../../d8/d0/structtagCLSMENUNAME.html">CLSMENUNAME</a>);
09143         strMenuName = <a class="code" href="../../d5/d8/ex_8h.html#a26">ProbeAndReadUnicodeString</a>(cmn.<a class="code" href="../../d8/d0/structtagCLSMENUNAME.html#o2">pusMenuName</a>);
09144         WndClass = <a class="code" href="../../d5/d8/ex_8h.html#a27">ProbeAndReadStructure</a>(lpWndClass, WNDCLASSEX);
09145         <a class="code" href="../../d4/d1/userk_8h.html#a63">ProbeForReadUnicodeStringBufferOrId</a>(strClassName);
09146         <a class="code" href="../../d4/d1/userk_8h.html#a63">ProbeForReadUnicodeStringBufferOrId</a>(strMenuName);
09147         <span class="keywordflow">if</span> (ARGUMENT_PRESENT(pdwWOWstuff)) {
09148             <a class="code" href="../../d5/d8/ex_8h.html#a11">ProbeForRead</a>(pdwWOWstuff, <span class="keyword">sizeof</span>(WC), <span class="keyword">sizeof</span>(BYTE));
09149             RtlCopyMemory(&amp;WowCls, pdwWOWstuff, <span class="keyword">sizeof</span>(WC));
09150             pdwWOWstuff = (PDWORD)&amp;WowCls;
09151         }
09152         WndClass.lpszClassName = strClassName.Buffer;
09153         WndClass.lpszMenuName = strMenuName.Buffer;
09154     } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(TRUE)) {
09155         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
09156     }
09157 
09158     <span class="comment">/*</span>
09159 <span class="comment">     * ClassName and MenuName in WndClass are client-side pointers.</span>
09160 <span class="comment">     */</span>
09161 
09162     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1898">xxxRegisterClassEx</a>(
09163             &amp;WndClass,
09164             &amp;cmn,
09165             fnid,
09166             dwFlags,
09167             pdwWOWstuff);
09168 
09169     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserRegisterClassExWOW"</span>);
09170     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
09171 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a119" doxytag="ntuser.h::NtUserRegisterHotKey" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserRegisterHotKey           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN int&nbsp;</td>
          <td class="mdname" nowrap> <em>id</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>fsModifiers</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>vk</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05690">5690</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d4/d1/hotkeys_8c-source.html#l00125">_RegisterHotKey()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00075">BEGINATOMICRECV</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00081">ENDATOMICRECV</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00345">TESTFLAGS</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, and <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00410">ValidateHWNDOPT</a>.
<p>
<pre class="fragment"><div>05695 {
05696     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwnd;
05697 
05698     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a5">BEGINATOMICRECV</a>(BOOL, FALSE);
05699 
05700     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a46">TESTFLAGS</a>(fsModifiers, MOD_VALID);
05701 
05702     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a57">ValidateHWNDOPT</a>(pwnd, hwnd);
05703 
05704     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1660">_RegisterHotKey</a>(
05705             pwnd,
05706             <span class="keywordtype">id</span>,
05707             fsModifiers,
05708             vk
05709             );
05710 
05711     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserRegisterHotKey"</span>);
05712     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a6">ENDATOMICRECV</a>();
05713 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a50" doxytag="ntuser.h::NtUserRegisterTasklist" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserRegisterTasklist           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hwndTasklist</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l03234">3234</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d5/d7/syscmd_8c-source.html#l00583">_RegisterTasklist()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00110">BEGINRECV_HWND</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00120">ENDRECV_HWND</a>, and <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>.
<p>
<pre class="fragment"><div>03236 {
03237 
03238     <span class="comment">//</span>
03239     <span class="comment">// N.B. This function has implicit window handle translation. This</span>
03240     <span class="comment">//      operation is performed in the User server API dispatcher.</span>
03241     <span class="comment">//</span>
03242 
03243     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a14">BEGINRECV_HWND</a>(DWORD, 0, hwnd);
03244 
03245     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1914">_RegisterTasklist</a>(
03246             pwnd);
03247 
03248     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserRegisterTasklist"</span>);
03249     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a15">ENDRECV_HWND</a>();
03250 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a221" doxytag="ntuser.h::NtUserRegisterWindowMessage" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI UINT NtUserRegisterWindowMessage           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PUNICODE_STRING&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pstrMessage</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l09173">9173</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00101">BEGINRECV_NOCRIT</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00269">ENDRECV_NOCRIT</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d6/d7/ex_8h-source.html#l01417">ProbeAndReadUnicodeString</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00612">ProbeForReadUnicodeStringBuffer</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00343">StubExceptionHandler</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, and <a class="el" href="../../d2/d9/w32_2ntuser_2kernel_2atom_8c-source.html#l00035">UserAddAtom()</a>.
<p>
Referenced by <a class="el" href="../../d1/d7/ntcftxt_8h-source.html#l00800">RegisterWindowMessage()</a>.
<p>
<pre class="fragment"><div>09175 {
09176     UNICODE_STRING strMessage;
09177 
09178     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a11">BEGINRECV_NOCRIT</a>(UINT, 0);
09179 
09180     <span class="comment">/*</span>
09181 <span class="comment">     * Probe arguments</span>
09182 <span class="comment">     */</span>
09183     <span class="keywordflow">try</span> {
09184         strMessage = <a class="code" href="../../d5/d8/ex_8h.html#a26">ProbeAndReadUnicodeString</a>(pstrMessage);
09185         <a class="code" href="../../d4/d1/userk_8h.html#a61">ProbeForReadUnicodeStringBuffer</a>(strMessage);
09186     } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(TRUE)) {
09187         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
09188     }
09189 
09190     <span class="comment">/*</span>
09191 <span class="comment">     * The buffer is in client-side memory.</span>
09192 <span class="comment">     * Rtl atom routines protect accesses to strings with their</span>
09193 <span class="comment">     * own try/except blocks, UserAddAtom sets last error accordingly.</span>
09194 <span class="comment">     */</span>
09195     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1297">UserAddAtom</a>(
09196             strMessage.Buffer, FALSE);
09197 
09198     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserRegisterWindowMessage"</span>);
09199     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a36">ENDRECV_NOCRIT</a>();
09200 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a256" doxytag="ntuser.h::NtUserRemoteConnect" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI NTSTATUS NtUserRemoteConnect           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN <a class="el" href="../../d3/d8/struct__DOCONNECTDATA.html">PDOCONNECTDATA</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pDoConnectData</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>DisplayDriverNameLength</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PWCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>DisplayDriverName</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00521">521</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00083">BEGINRECVCSRSS</a>, <a class="el" href="../../d0/d7/halvprnt_8c-source.html#l00031">BYTE</a>, <a class="el" href="../../d0/d0/client_2nt6_2user_8h.html#a1139">DOCONNECTDATA</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00092">ENDRECVCSRSS</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l03600">ISTS</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d6/d7/ex_8h-source.html#l01209">ProbeForRead</a>, <a class="el" href="../../d7/d9/w32_2ntuser_2kernel_2misc_8c-source.html#l00020">RemoteConnect()</a>, and <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>.
<p>
Referenced by <a class="el" href="../../d3/d7/api_8c-source.html#l00504">W32WinStationDoConnect()</a>.
<p>
<pre class="fragment"><div>00525 {
00526     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a7">BEGINRECVCSRSS</a>(NTSTATUS, STATUS_UNSUCCESSFUL);
00527     <span class="keywordflow">if</span> (!<a class="code" href="../../d1/d0/inc_2user_8h.html#a882">ISTS</a>()) {
00528         errret = STATUS_ACCESS_DENIED;
00529         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
00530     }
00531 
00532     <span class="comment">/*</span>
00533 <span class="comment">     * Probe all read arguments -- no try block.</span>
00534 <span class="comment">     */</span>
00535 <span class="preprocessor">#if DBG</span>
00536 <span class="preprocessor"></span>    <a class="code" href="../../d5/d8/ex_8h.html#a11">ProbeForRead</a>(DisplayDriverName, DisplayDriverNameLength, <span class="keyword">sizeof</span>(BYTE));
00537     <a class="code" href="../../d5/d8/ex_8h.html#a11">ProbeForRead</a>(pDoConnectData, <span class="keyword">sizeof</span>(<a class="code" href="../../d3/d8/struct__DOCONNECTDATA.html">DOCONNECTDATA</a>), <span class="keyword">sizeof</span>(BYTE));
00538 <span class="preprocessor">#endif</span>
00539 <span class="preprocessor"></span>
00540     retval = <a class="code" href="../../d4/d1/userk_8h.html#a2085">RemoteConnect</a>(
00541                  pDoConnectData,
00542                  DisplayDriverNameLength,
00543                  DisplayDriverName);
00544 
00545 
00546     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserRemoteConnect"</span>);
00547     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a8">ENDRECVCSRSS</a>();
00548 
00549 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a257" doxytag="ntuser.h::NtUserRemoteRedrawRectangle" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI NTSTATUS NtUserRemoteRedrawRectangle           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN WORD&nbsp;</td>
          <td class="mdname" nowrap> <em>Left</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN WORD&nbsp;</td>
          <td class="mdname" nowrap> <em>Top</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN WORD&nbsp;</td>
          <td class="mdname" nowrap> <em>Right</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN WORD&nbsp;</td>
          <td class="mdname" nowrap> <em>Bottom</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00552">552</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00083">BEGINRECVCSRSS</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00092">ENDRECVCSRSS</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l03600">ISTS</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d9/d7/fullscr_8c-source.html#l01634">RemoteRedrawRectangle()</a>, and <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>.
<p>
Referenced by <a class="el" href="../../d5/d3/command_8c-source.html#l00035">Win32CommandChannelThread()</a>.
<p>
<pre class="fragment"><div>00557 {
00558     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a7">BEGINRECVCSRSS</a>(NTSTATUS, STATUS_UNSUCCESSFUL);
00559     <span class="keywordflow">if</span> (!<a class="code" href="../../d1/d0/inc_2user_8h.html#a882">ISTS</a>()) {
00560         errret = STATUS_ACCESS_DENIED;
00561         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
00562     }
00563 
00564     retval = <a class="code" href="../../d4/d1/userk_8h.html#a2103">RemoteRedrawRectangle</a>(
00565                  Left,
00566                  Top,
00567                  Right,
00568                  Bottom);
00569 
00570     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserRemoteRedrawRectangle"</span>);
00571     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a8">ENDRECVCSRSS</a>();
00572 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a258" doxytag="ntuser.h::NtUserRemoteRedrawScreen" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI NTSTATUS NtUserRemoteRedrawScreen           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">VOID&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00576">576</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00083">BEGINRECVCSRSS</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00092">ENDRECVCSRSS</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00965">gbConnected</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00964">gnShadowers</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l03600">ISTS</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d9/d7/fullscr_8c-source.html#l01675">RemoteRedrawScreen()</a>, and <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>.
<p>
Referenced by <a class="el" href="../../d5/d3/command_8c-source.html#l00035">Win32CommandChannelThread()</a>.
<p>
<pre class="fragment"><div>00578 {
00579     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a7">BEGINRECVCSRSS</a>(NTSTATUS, STATUS_UNSUCCESSFUL);
00580     <span class="keywordflow">if</span> (!<a class="code" href="../../d1/d0/inc_2user_8h.html#a882">ISTS</a>()) {
00581         errret = STATUS_ACCESS_DENIED;
00582         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
00583     }
00584 
00585     <span class="comment">/*</span>
00586 <span class="comment">     * If there are any shadow connections, or it's not disconnected</span>
00587 <span class="comment">     */</span>
00588     <span class="keywordflow">if</span> (<a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a349">gnShadowers</a> &gt; 0 || <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a350">gbConnected</a>)
00589         retval = <a class="code" href="../../d4/d1/userk_8h.html#a2104">RemoteRedrawScreen</a>();
00590     <span class="keywordflow">else</span>
00591         retval = STATUS_UNSUCCESSFUL;
00592 
00593     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserRemoteRedrawScreen"</span>);
00594     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a8">ENDRECVCSRSS</a>();
00595 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a259" doxytag="ntuser.h::NtUserRemoteStopScreenUpdates" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI NTSTATUS NtUserRemoteStopScreenUpdates           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">VOID&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00599">599</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00083">BEGINRECVCSRSS</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00092">ENDRECVCSRSS</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l03600">ISTS</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d7/d9/w32_2ntuser_2kernel_2misc_8c-source.html#l00446">xxxRemoteStopScreenUpdates()</a>.
<p>
Referenced by <a class="el" href="../../d5/d3/command_8c-source.html#l00035">Win32CommandChannelThread()</a>.
<p>
<pre class="fragment"><div>00601 {
00602     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a7">BEGINRECVCSRSS</a>(NTSTATUS, STATUS_UNSUCCESSFUL);
00603     <span class="keywordflow">if</span> (!<a class="code" href="../../d1/d0/inc_2user_8h.html#a882">ISTS</a>()) {
00604         errret = STATUS_ACCESS_DENIED;
00605         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
00606     }
00607 
00608     retval = <a class="code" href="../../d4/d1/userk_8h.html#a2090">xxxRemoteStopScreenUpdates</a>(TRUE);
00609 
00610     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserRemoteStopScreenUpdates"</span>);
00611     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a8">ENDRECVCSRSS</a>();
00612 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a120" doxytag="ntuser.h::NtUserRemoveMenu" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserRemoveMenu           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HMENU&nbsp;</td>
          <td class="mdname" nowrap> <em>hmenu</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>nPosition</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>dwFlags</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05715">5715</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d4/d7/propapi_8h-source.html#l00043">dwFlags</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00345">TESTFLAGS</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00362">ThreadLock</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00366">ThreadUnlock</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00452">ValidateHMENUMODIFY</a>, and <a class="el" href="../../d4/d1/mnchange_8c-source.html#l00766">xxxRemoveMenu()</a>.
<p>
Referenced by <a class="el" href="../../d8/d6/menuc_8c-source.html#l00176">ChangeMenuA()</a>, <a class="el" href="../../d8/d6/menuc_8c-source.html#l00131">ChangeMenuW()</a>, <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00165">MDIAddSysMenu()</a>, <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00289">MDIRemoveSysMenu()</a>, and <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00417">SwitchWindowsMenus()</a>.
<p>
<pre class="fragment"><div>05719 {
05720     <a class="code" href="../../d1/d1/structtagMENU.html">PMENU</a> pmenu;
05721     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpmenu;
05722 
05723     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(BOOL, FALSE);
05724 
05725     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a46">TESTFLAGS</a>(dwFlags, MF_VALID);
05726 
05727     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a62">ValidateHMENUMODIFY</a>(pmenu, hmenu);
05728 
05729     <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>( pmenu, &amp;tlpmenu);
05730     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1594">xxxRemoveMenu</a>(
05731             pmenu,
05732             nPosition,
05733             dwFlags);
05734     <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpmenu);
05735 
05736     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserRemoveMenu"</span>);
05737     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
05738 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a222" doxytag="ntuser.h::NtUserRemoveProp" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI HANDLE NtUserRemoveProp           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwProp</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l09202">9202</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00110">BEGINRECV_HWND</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00120">ENDRECV_HWND</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d5/d7/kernel_2winprop_8c-source.html#l00098">InternalRemoveProp()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>.
<p>
Referenced by <a class="el" href="../../d1/d7/ntcftxt_8h-source.html#l00822">RemoveProp()</a>.
<p>
<pre class="fragment"><div>09205 {
09206 
09207     <span class="comment">//</span>
09208     <span class="comment">// N.B. This function has implicit window handle translation. This</span>
09209     <span class="comment">//      operation is performed in the User server API dispatcher.</span>
09210     <span class="comment">//</span>
09211 
09212     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a14">BEGINRECV_HWND</a>(HANDLE, NULL, hwnd);
09213 
09214     retval = <a class="code" href="../../d4/d8/kernel_2winprop_8c.html#a1">InternalRemoveProp</a>(pwnd, (LPWSTR)LOWORD(dwProp), FALSE);
09215 
09216     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserRemoveProp"</span>);
09217     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a15">ENDRECV_HWND</a>();
09218 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a20" doxytag="ntuser.h::NtUserResolveDesktop" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI HDESK NtUserResolveDesktop           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hProcess</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PUNICODE_STRING&nbsp;</td>
          <td class="mdname" nowrap> <em>pstrDesktop</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fInherit</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT HWINSTA *&nbsp;</td>
          <td class="mdname" nowrap> <em>phwinsta</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l01365">1365</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d9/d7/winsta_8c-source.html#l01055">_CloseWindowStation()</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00251">CLEANUPRECV</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d1/d3/ex_2alpha_2raisests_8c-source.html#l00157">ExRaiseStatus()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00624">KernelMode</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00336">MSGERRORCLEANUP</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d6/d7/ex_8h-source.html#l01417">ProbeAndReadUnicodeString</a>, <a class="el" href="../../d6/d7/ex_8h-source.html#l01811">ProbeAndWriteHandle</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00612">ProbeForReadUnicodeStringBuffer</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00058">PtiCurrent</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00343">StubExceptionHandler</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l01704">ThreadLockPool</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l01710">ThreadUnlockAndFreePool</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d0/d6/desktop_8c-source.html#l04332">xxxCloseDesktop()</a>, and <a class="el" href="../../d0/d6/desktop_8c-source.html#l04821">xxxResolveDesktop()</a>.
<p>
Referenced by <a class="el" href="../../d1/d4/srvinit_8c-source.html#l00955">SetUpConsole()</a>.
<p>
<pre class="fragment"><div>01370 {
01371     UNICODE_STRING strDesktop;
01372     HWINSTA hwinsta = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
01373     <a class="code" href="../../d2/d8/structtagTHREADINFO.html">PTHREADINFO</a> pti;
01374     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlBuffer;
01375     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fFreeBuffer = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01376     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> bShutDown = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01377 
01378     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(HDESK, NULL);
01379 
01380     pti = <a class="code" href="../../d4/d1/userk_8h.html#a9">PtiCurrent</a>();
01381     <span class="comment">/*</span>
01382 <span class="comment">     * Probe and capture desktop path</span>
01383 <span class="comment">     */</span>
01384     <span class="keywordflow">try</span> {
01385         strDesktop = <a class="code" href="../../d5/d8/ex_8h.html#a26">ProbeAndReadUnicodeString</a>(pstrDesktop);
01386         <span class="keywordflow">if</span> (strDesktop.Length &gt; 0) {
01387             PWSTR pszCapture = strDesktop.Buffer;
01388             <a class="code" href="../../d4/d1/userk_8h.html#a61">ProbeForReadUnicodeStringBuffer</a>(strDesktop);
01389             strDesktop.Buffer = UserAllocPoolWithQuota(strDesktop.Length, TAG_TEXT2);
01390             <span class="keywordflow">if</span> (strDesktop.Buffer) {
01391                 fFreeBuffer = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01392                 <a class="code" href="../../d4/d1/userk_8h.html#a137">ThreadLockPool</a>(pti, strDesktop.Buffer, &amp;tlBuffer);
01393                 RtlCopyMemory(strDesktop.Buffer, pszCapture, strDesktop.Length);
01394             } <span class="keywordflow">else</span>
01395                 <a class="code" href="../../d5/d8/ex_8h.html#a303">ExRaiseStatus</a>(STATUS_NO_MEMORY);
01396         } <span class="keywordflow">else</span> {
01397             strDesktop.Buffer = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
01398         }
01399     } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(TRUE)) {
01400         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a44">MSGERRORCLEANUP</a>(0);
01401     }
01402 
01403     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1279">xxxResolveDesktop</a>(hProcess, &amp;strDesktop, &amp;hwinsta,
01404             fInherit, &amp;bShutDown);
01405 
01406     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a33">CLEANUPRECV</a>();
01407     <span class="keywordflow">if</span> (fFreeBuffer)
01408         <a class="code" href="../../d4/d1/userk_8h.html#a139">ThreadUnlockAndFreePool</a>(pti, &amp;tlBuffer);
01409 
01410     <span class="keywordflow">try</span> {
01411         <a class="code" href="../../d5/d8/ex_8h.html#a49">ProbeAndWriteHandle</a>((PHANDLE)phwinsta, hwinsta);
01412     } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(TRUE)) {
01413         <a class="code" href="../../d4/d1/userk_8h.html#a1803">xxxCloseDesktop</a>(retval, KernelMode);
01414         <span class="keywordflow">if</span> (hwinsta)
01415             <a class="code" href="../../d8/d8/winsta_8c.html#a9">_CloseWindowStation</a>(hwinsta);
01416         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
01417     }
01418 
01419     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserResolveDesktop"</span>);
01420     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
01421 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a19" doxytag="ntuser.h::NtUserResolveDesktopForWOW" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI NTSTATUS NtUserResolveDesktopForWOW           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN OUT PUNICODE_STRING&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pstrDesktop</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l01303">1303</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00251">CLEANUPRECV</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d1/d3/ex_2alpha_2raisests_8c-source.html#l00157">ExRaiseStatus()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00336">MSGERRORCLEANUP</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d6/d7/ex_8h-source.html#l01417">ProbeAndReadUnicodeString</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00634">ProbeForReadUnicodeStringFullBuffer</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00058">PtiCurrent</a>, <a class="el" href="../../d7/d5/nls_8c-source.html#l01763">RtlCopyUnicodeString()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00343">StubExceptionHandler</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l01704">ThreadLockPool</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l01710">ThreadUnlockAndFreePool</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d0/d6/desktop_8c-source.html#l04588">xxxResolveDesktopForWOW()</a>.
<p>
<pre class="fragment"><div>01305 {
01306     UNICODE_STRING strDesktop, strDesktop2;
01307     <a class="code" href="../../d2/d8/structtagTHREADINFO.html">PTHREADINFO</a> ptiCurrent;
01308     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlBuffer;
01309     LPWSTR lpBuffer = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
01310     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fFreeBuffer = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01311     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(NTSTATUS, STATUS_UNSUCCESSFUL);
01312 
01313     retval = STATUS_SUCCESS;
01314 
01315     ptiCurrent = <a class="code" href="../../d4/d1/userk_8h.html#a9">PtiCurrent</a>();
01316     <span class="comment">/*</span>
01317 <span class="comment">     * Probe arguments</span>
01318 <span class="comment">     */</span>
01319     <span class="keywordflow">try</span> {
01320         strDesktop = <a class="code" href="../../d5/d8/ex_8h.html#a26">ProbeAndReadUnicodeString</a>(pstrDesktop);
01321         <a class="code" href="../../d4/d1/userk_8h.html#a62">ProbeForReadUnicodeStringFullBuffer</a>(strDesktop);
01322         RtlCopyMemory(&amp;strDesktop2, &amp;strDesktop, <span class="keyword">sizeof</span> strDesktop);
01323         <span class="keywordflow">if</span> (strDesktop.MaximumLength &gt; 0) {
01324             PWSTR pszCapture = strDesktop.Buffer;
01325             strDesktop.Buffer = UserAllocPoolWithQuota(strDesktop.MaximumLength, TAG_TEXT2);
01326             <span class="keywordflow">if</span> (strDesktop.Buffer) {
01327                 fFreeBuffer = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01328                 <a class="code" href="../../d4/d1/userk_8h.html#a137">ThreadLockPool</a>(ptiCurrent, strDesktop.Buffer, &amp;tlBuffer);
01329                 RtlCopyMemory(strDesktop.Buffer, pszCapture, strDesktop.Length);
01330             } <span class="keywordflow">else</span>
01331                 <a class="code" href="../../d5/d8/ex_8h.html#a303">ExRaiseStatus</a>(STATUS_NO_MEMORY);
01332 
01333         } <span class="keywordflow">else</span> {
01334             strDesktop.Buffer = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
01335         }
01336     } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(FALSE)) {
01337         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a44">MSGERRORCLEANUP</a>(0);
01338     }
01339 
01340     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1280">xxxResolveDesktopForWOW</a>(&amp;strDesktop);
01341 
01342     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(retval)) {
01343         <span class="keywordflow">try</span> {
01344             <span class="comment">/*</span>
01345 <span class="comment">             * The string structure at pstrDesktop could have changed</span>
01346 <span class="comment">             * so we will ignore it and drop the one we have already</span>
01347 <span class="comment">             * probed down on top of it.  We have already performed the</span>
01348 <span class="comment">             * ResolveDesktopForWOW action, so we should not return an</span>
01349 <span class="comment">             * error if this copy fails.</span>
01350 <span class="comment">             */</span>
01351 
01352             <a class="code" href="../../d6/d6/nls_8c.html#a44">RtlCopyUnicodeString</a>(&amp;strDesktop2, &amp;strDesktop);
01353             RtlCopyMemory(pstrDesktop, &amp;strDesktop2, <span class="keyword">sizeof</span> strDesktop2);
01354         } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(FALSE)) {
01355         }
01356     }
01357 
01358 <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a33">CLEANUPRECV</a>();
01359     <span class="keywordflow">if</span> (fFreeBuffer)
01360         <a class="code" href="../../d4/d1/userk_8h.html#a139">ThreadUnlockAndFreePool</a>(ptiCurrent, &amp;tlBuffer);
01361     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserResolveDesktopForWOW"</span>);
01362     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
01363 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a247" doxytag="ntuser.h::NtUserSBGetParms" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserSBGetParms           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN int&nbsp;</td>
          <td class="mdname" nowrap> <em>code</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d4/d5/structtagSBDATA.html">PSBDATA</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pw</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN OUT LPSCROLLINFO&nbsp;</td>
          <td class="mdname" nowrap> <em>lpsi</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l09719">9719</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00140">_SBGetParms()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00144">BEGINRECV_HWND_SHARED</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00154">ENDRECV_HWND_SHARED</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d6/d7/ex_8h-source.html#l01209">ProbeForRead</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00793">ProbeForWriteScrollInfo</a>, <a class="el" href="../../d0/d0/client_2nt6_2user_8h.html#a1042">PSBDATA</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00343">StubExceptionHandler</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/winmgrc_8c-source.html#l00383">GetScrollInfo()</a>, and <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00187">ScrollBarWndProcWorker()</a>.
<p>
<pre class="fragment"><div>09724 {
09725     <a class="code" href="../../d4/d5/structtagSBDATA.html">SBDATA</a> sbd;
09726     SCROLLINFO si;
09727     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a20">BEGINRECV_HWND_SHARED</a>(BOOL, FALSE, hwnd);
09728 
09729     <span class="comment">/*</span>
09730 <span class="comment">     * Probe arguments</span>
09731 <span class="comment">     */</span>
09732     <span class="keywordflow">try</span> {
09733         <a class="code" href="../../d4/d1/userk_8h.html#a72">ProbeForWriteScrollInfo</a>(lpsi);
09734 
09735         <span class="comment">/*</span>
09736 <span class="comment">         * Probe the 4 DWORDS (MIN, MAX, PAGE, POS)</span>
09737 <span class="comment">         */</span>
09738         <a class="code" href="../../d5/d8/ex_8h.html#a11">ProbeForRead</a>(pw, <span class="keyword">sizeof</span>(<a class="code" href="../../d4/d5/structtagSBDATA.html">SBDATA</a>), <span class="keyword">sizeof</span>(DWORD));
09739         RtlCopyMemory(&amp;sbd, pw, <span class="keyword">sizeof</span>(sbd));
09740         RtlCopyMemory(&amp;si, lpsi, <span class="keyword">sizeof</span>(SCROLLINFO));
09741     } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(TRUE)) {
09742         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
09743     }
09744 
09745     retval = <a class="code" href="../../d8/d4/sbctl_8c.html#a15">_SBGetParms</a>(pwnd, code, &amp;sbd, &amp;si);
09746     <span class="keywordflow">try</span> {
09747         RtlCopyMemory(lpsi, &amp;si, <span class="keyword">sizeof</span>(SCROLLINFO));
09748     } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(TRUE)) {
09749         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
09750     }
09751 
09752     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a21">ENDRECV_HWND_SHARED</a>();
09753 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a161" doxytag="ntuser.h::NtUserScrollDC" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserScrollDC           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HDC&nbsp;</td>
          <td class="mdname" nowrap> <em>hDC</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN int&nbsp;</td>
          <td class="mdname" nowrap> <em>dx</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN int&nbsp;</td>
          <td class="mdname" nowrap> <em>dy</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN CONST RECT *lprcScroll&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN CONST RECT *lprcClip&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN HRGN&nbsp;</td>
          <td class="mdname" nowrap> <em>hrgnUpdate</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT LPRECT lprcUpdate&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a121" doxytag="ntuser.h::NtUserScrollWindowEx" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserScrollWindowEx           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN int&nbsp;</td>
          <td class="mdname" nowrap> <em>XAmount</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN int&nbsp;</td>
          <td class="mdname" nowrap> <em>YAmount</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN CONST RECT *pRect&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN CONST RECT *pClipRect&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN HRGN&nbsp;</td>
          <td class="mdname" nowrap> <em>hrgnUpdate</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT LPRECT prcUpdate&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>flags</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a261" doxytag="ntuser.h::NtUserSelectPalette" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI HPALETTE NtUserSelectPalette           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HDC&nbsp;</td>
          <td class="mdname" nowrap> <em>hdc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN HPALETTE&nbsp;</td>
          <td class="mdname" nowrap> <em>hpalette</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fForceBackground</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l09788">9788</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d1/d2/palette_8c-source.html#l00051">_SelectPalette()</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, and <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>.
<p>
<pre class="fragment"><div>09792 {
09793     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(HPALETTE, NULL)
09794 
09795     retval = _SelectPalette(hdc, hpalette, fForceBackground);
09796 
09797     ENDRECV();
09798 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a207" doxytag="ntuser.h::NtUserSendInput" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI UINT NtUserSendInput           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>cInputs</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN CONST INPUT *&nbsp;</td>
          <td class="mdname" nowrap> <em>pInputs</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN int&nbsp;</td>
          <td class="mdname" nowrap> <em>cbSize</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l08617">8617</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00251">CLEANUPRECV</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00147">DATAALIGN</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d1/d3/ex_2alpha_2raisests_8c-source.html#l00157">ExRaiseStatus()</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00336">MSGERRORCLEANUP</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00151">ProbeForReadBuffer</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00058">PtiCurrent</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00343">StubExceptionHandler</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l01704">ThreadLockPool</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l01707">ThreadUnlockPool</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, and <a class="el" href="../../d7/d7/ntinput_8c-source.html#l03575">xxxSendInput()</a>.
<p>
Referenced by <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l01419">keybd_event()</a>, and <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l01395">mouse_event()</a>.
<p>
<pre class="fragment"><div>08621 {
08622     LPINPUT pInput2 = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
08623     <a class="code" href="../../d2/d8/structtagTHREADINFO.html">PTHREADINFO</a> ptiCurrent;
08624     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlInput;
08625     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwArgumentError = ERROR_INVALID_PARAMETER;
08626 
08627     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(UINT, 0);
08628 
08629     <span class="keywordflow">if</span> (<span class="keyword">sizeof</span>(INPUT) != cbSize || cInputs == 0) {
08630         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(dwArgumentError);
08631     }
08632 
08633     ptiCurrent = <a class="code" href="../../d4/d1/userk_8h.html#a9">PtiCurrent</a>();
08634 
08635     <span class="comment">/*</span>
08636 <span class="comment">     * Probe arguments</span>
08637 <span class="comment">     */</span>
08638     <span class="keywordflow">try</span> {
08639         <a class="code" href="../../d4/d1/userk_8h.html#a24">ProbeForReadBuffer</a>(pInputs, cInputs, DATAALIGN);
08640 
08641         pInput2 = UserAllocPoolWithQuota(cInputs * <span class="keyword">sizeof</span>(*pInputs), TAG_SENDINPUT);
08642         <span class="keywordflow">if</span> (pInput2 == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
08643             <a class="code" href="../../d5/d8/ex_8h.html#a303">ExRaiseStatus</a>(STATUS_NO_MEMORY);
08644         }
08645         RtlCopyMemory(pInput2, pInputs, cInputs * <span class="keyword">sizeof</span>(*pInputs));
08646     } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(TRUE)) {
08647         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a44">MSGERRORCLEANUP</a>(0);
08648     }
08649 
08650     <a class="code" href="../../d4/d1/userk_8h.html#a137">ThreadLockPool</a>(ptiCurrent, pInput2, &amp;tlInput);
08651     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1023">xxxSendInput</a>(cInputs, pInput2);
08652     <a class="code" href="../../d4/d1/userk_8h.html#a138">ThreadUnlockPool</a>(ptiCurrent, &amp;tlInput);
08653 <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a33">CLEANUPRECV</a>();
08654     <span class="keywordflow">if</span> (pInput2) {
08655         UserFreePool(pInput2);
08656     }
08657     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserSendInput"</span>);
08658     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
08659 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a118" doxytag="ntuser.h::NtUserSendMessageCallback" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserSendMessageCallback           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>wMsg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN WPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN SENDASYNCPROC&nbsp;</td>
          <td class="mdname" nowrap> <em>lpResultCallBack</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG_PTR&nbsp;</td>
          <td class="mdname" nowrap> <em>dwData</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05648">5648</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02217">MSGFLAG_MASK</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03833">PWND_BROADCAST</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00363">ThreadLockAlways</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00366">ThreadUnlock</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00432">ValidateHWNDFF</a>, and <a class="el" href="../../d4/d5/kernel_2sendmsg_8c-source.html#l01114">xxxSendMessageCallback()</a>.
<p>
Referenced by <a class="el" href="../../d1/d7/ntcftxt_8h-source.html#l00850">SendMessageCallback()</a>.
<p>
<pre class="fragment"><div>05655 {
05656     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwnd;
05657     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpwnd;
05658 
05659     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(BOOL, FALSE);
05660 
05661     <span class="comment">/*</span>
05662 <span class="comment">     * Prevent apps from setting hi 16 bits so we can use them internally.</span>
05663 <span class="comment">     */</span>
05664     <span class="keywordflow">if</span> (wMsg &amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a543">MSGFLAG_MASK</a>) {
05665         RIPERR0(ERROR_INVALID_PARAMETER, RIP_WARNING, <span class="stringliteral">"Invalid message"</span>);
05666         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
05667     }
05668 
05669     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a59">ValidateHWNDFF</a>(pwnd, hwnd);
05670 
05671     <span class="keywordflow">if</span> (pwnd != <a class="code" href="../../d4/d1/userk_8h.html#a457">PWND_BROADCAST</a>)
05672         <a class="code" href="../../d6/d0/usercli_8h.html#a37">ThreadLockAlways</a>(pwnd, &amp;tlpwnd);
05673 
05674     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1583">xxxSendMessageCallback</a>(
05675             pwnd,
05676             wMsg,
05677             wParam,
05678             lParam,
05679             lpResultCallBack,
05680             dwData,
05681             TRUE );
05682 
05683     <span class="keywordflow">if</span> (pwnd != <a class="code" href="../../d4/d1/userk_8h.html#a457">PWND_BROADCAST</a>)
05684         <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwnd);
05685 
05686     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserSendMessageCallback"</span>);
05687     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
05688 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a117" doxytag="ntuser.h::NtUserSendNotifyMessage" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserSendNotifyMessage           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>Msg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN WPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN LPARAM lParam&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05599">5599</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02217">MSGFLAG_MASK</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00233">ProbeAndReadLargeString</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00612">ProbeForReadUnicodeStringBuffer</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03833">PWND_BROADCAST</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00343">StubExceptionHandler</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00363">ThreadLockAlways</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00366">ThreadUnlock</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00432">ValidateHWNDFF</a>, and <a class="el" href="../../d4/d5/kernel_2sendmsg_8c-source.html#l01069">xxxSendNotifyMessage()</a>.
<p>
Referenced by <a class="el" href="../../d1/d7/ntcftxt_8h-source.html#l00883">SendNotifyMessage()</a>.
<p>
<pre class="fragment"><div>05604 {
05605     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwnd;
05606     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpwnd;
05607     <a class="code" href="../../d1/d9/struct__LARGE__STRING.html">LARGE_STRING</a> strLParam;
05608 
05609     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(BOOL, FALSE);
05610 
05611     <span class="comment">/*</span>
05612 <span class="comment">     * Prevent apps from setting hi 16 bits so we can use them internally.</span>
05613 <span class="comment">     */</span>
05614     <span class="keywordflow">if</span> (Msg &amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a543">MSGFLAG_MASK</a>) {
05615         RIPERR0(ERROR_INVALID_PARAMETER, RIP_WARNING, <span class="stringliteral">"Invalid message"</span>);
05616         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
05617     }
05618 
05619     <span class="keywordflow">if</span> ((Msg == WM_WININICHANGE || Msg == WM_DEVMODECHANGE) &amp;&amp;
05620             ARGUMENT_PRESENT(lParam)) {
05621         <span class="keywordflow">try</span> {
05622             strLParam = <a class="code" href="../../d4/d1/userk_8h.html#a34">ProbeAndReadLargeString</a>((<a class="code" href="../../d1/d9/struct__LARGE__STRING.html">PLARGE_STRING</a>)lParam);
05623             <a class="code" href="../../d4/d1/userk_8h.html#a61">ProbeForReadUnicodeStringBuffer</a>(strLParam);
05624             lParam = (LPARAM)&amp;strLParam;
05625         } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(TRUE)) {
05626             <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
05627         }
05628     }
05629 
05630     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a59">ValidateHWNDFF</a>(pwnd, hwnd);
05631 
05632     <span class="keywordflow">if</span> (pwnd != <a class="code" href="../../d4/d1/userk_8h.html#a457">PWND_BROADCAST</a>)
05633         <a class="code" href="../../d6/d0/usercli_8h.html#a37">ThreadLockAlways</a>(pwnd, &amp;tlpwnd);
05634 
05635     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1581">xxxSendNotifyMessage</a>(
05636             pwnd,
05637             Msg,
05638             wParam,
05639             lParam );
05640 
05641     <span class="keywordflow">if</span> (pwnd != <a class="code" href="../../d4/d1/userk_8h.html#a457">PWND_BROADCAST</a>)
05642         <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwnd);
05643 
05644     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserSendNotifyMessage"</span>);
05645     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
05646 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a122" doxytag="ntuser.h::NtUserSetActiveWindow" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI HWND NtUserSetActiveWindow           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hwnd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05801">5801</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01512">PtoH</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00362">ThreadLock</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00366">ThreadUnlock</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00410">ValidateHWNDOPT</a>, and <a class="el" href="../../d4/d5/focusact_8c-source.html#l01990">xxxSetActiveWindow()</a>.
<p>
Referenced by <a class="el" href="../../d3/d8/dlgend_8c-source.html#l00024">EndDialog()</a>.
<p>
<pre class="fragment"><div>05803 {
05804     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwnd;
05805     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpwnd;
05806 
05807     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(HWND, NULL);
05808 
05809     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a57">ValidateHWNDOPT</a>(pwnd, hwnd);
05810 
05811     <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(pwnd, &amp;tlpwnd);
05812 
05813     retval = (HWND)<a class="code" href="../../d4/d1/userk_8h.html#a1666">xxxSetActiveWindow</a>(pwnd);
05814     retval = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a448">PtoH</a>((PVOID)retval);
05815 
05816     <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwnd);
05817 
05818     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserSetActiveWindow"</span>);
05819     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
05820 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a123" doxytag="ntuser.h::NtUserSetCapture" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI HWND NtUserSetCapture           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hwnd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05822">5822</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01512">PtoH</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00362">ThreadLock</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00366">ThreadUnlock</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00410">ValidateHWNDOPT</a>, and <a class="el" href="../../d4/d4/w32_2ntuser_2kernel_2capture_8c-source.html#l00023">xxxSetCapture()</a>.
<p>
Referenced by <a class="el" href="../../d2/d3/combo_8c-source.html#l00207">ComboBoxWndProcWorker()</a>, <a class="el" href="../../d7/d0/lb1_8c-source.html#l00032">ListBoxWndProcWorker()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l02792">MLMouseMotion()</a>, <a class="el" href="../../d9/d4/reader_8c-source.html#l00158">ReaderWndProc()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l02098">SLMouseMotion()</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l00590">xxxBNSetCapture()</a>, and <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01290">xxxTrackMouse()</a>.
<p>
<pre class="fragment"><div>05824 {
05825     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwnd;
05826     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpwnd;
05827 
05828     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(HWND, NULL);
05829 
05830     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a57">ValidateHWNDOPT</a>(pwnd, hwnd);
05831 
05832     <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(pwnd, &amp;tlpwnd);
05833 
05834     retval = (HWND)<a class="code" href="../../d4/d1/userk_8h.html#a1712">xxxSetCapture</a>(pwnd);
05835     retval = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a448">PtoH</a>((PVOID)retval);
05836 
05837     <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwnd);
05838 
05839     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserSetCapture"</span>);
05840     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
05841 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a36" doxytag="ntuser.h::NtUserSetClassLong" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI LONG NtUserSetClassLong           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN int&nbsp;</td>
          <td class="mdname" nowrap> <em>nIndex</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN LONG&nbsp;</td>
          <td class="mdname" nowrap> <em>dwNewLong</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>bAnsi</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a124" doxytag="ntuser.h::NtUserSetClassWord" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI WORD NtUserSetClassWord           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN int&nbsp;</td>
          <td class="mdname" nowrap> <em>nIndex</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN WORD&nbsp;</td>
          <td class="mdname" nowrap> <em>wNewWord</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05843">5843</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d3/d6/class_8c-source.html#l00863">_SetClassWord()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00110">BEGINRECV_HWND</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00120">ENDRECV_HWND</a>, and <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>.
<p>
<pre class="fragment"><div>05847 {
05848 
05849     <span class="comment">//</span>
05850     <span class="comment">// N.B. This function has implicit window handle translation. This</span>
05851     <span class="comment">//      operation is performed in the User server API dispatcher.</span>
05852     <span class="comment">//</span>
05853 
05854     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a14">BEGINRECV_HWND</a>(WORD, 0, hwnd);
05855 
05856     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1896">_SetClassWord</a>(
05857             pwnd,
05858             nIndex,
05859             wNewWord);
05860 
05861     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserSetClassWord"</span>);
05862     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a15">ENDRECV_HWND</a>();
05863 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a51" doxytag="ntuser.h::NtUserSetClipboardData" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserSetClipboardData           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>wFmt</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hMem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d3/d6/structtagSETCLIPBDATA.html">PSETCLIPBDATA</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>scd</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l03274">3274</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d9/d7/ntuser_2kernel_2clipbrd_8c-source.html#l00953">_SetClipboardData()</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01402">tagSETCLIPBDATA::fGlobalHandle</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01403">tagSETCLIPBDATA::fIncSerialNumber</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03289">IS_CURRENT_THREAD_RESTRICTED</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00562">ProbeAndReadSetClipBData</a>, <a class="el" href="../../d0/d0/client_2nt6_2user_8h.html#a1010">PSETCLIPBDATA</a>, <a class="el" href="../../d0/d0/client_2nt6_2user_8h.html#a1009">SETCLIPBDATA</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00343">StubExceptionHandler</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/client_8c-source.html#l00390">GetClipboardData()</a>, and <a class="el" href="../../d4/d7/client_8c-source.html#l00876">SetClipboardData()</a>.
<p>
<pre class="fragment"><div>03278 {
03279     <a class="code" href="../../d3/d6/structtagSETCLIPBDATA.html">SETCLIPBDATA</a> scd;
03280 
03281     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(BOOL, FALSE);
03282 
03283     <span class="comment">/*</span>
03284 <span class="comment">     * Check for jobs with JOB_OBJECT_UILIMIT_WRITECLIPBOARD</span>
03285 <span class="comment">     */</span>
03286     <span class="keywordflow">if</span> (<a class="code" href="../../d4/d1/userk_8h.html#a383">IS_CURRENT_THREAD_RESTRICTED</a>(JOB_OBJECT_UILIMIT_WRITECLIPBOARD)) {
03287         RIPMSG0(RIP_WARNING, <span class="stringliteral">"NtUserSetClipboardData failed for restricted thread"</span>);
03288         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
03289     }
03290 
03291     <span class="comment">/*</span>
03292 <span class="comment">     * Probe arguments</span>
03293 <span class="comment">     */</span>
03294     <span class="keywordflow">try</span> {
03295         scd = <a class="code" href="../../d4/d1/userk_8h.html#a58">ProbeAndReadSetClipBData</a>(pscd);
03296     } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(TRUE)) {
03297         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
03298     }
03299 
03300     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1895">_SetClipboardData</a>(
03301             fmt,
03302             hData,
03303             scd.<a class="code" href="../../d3/d6/structtagSETCLIPBDATA.html#o0">fGlobalHandle</a>,
03304             scd.<a class="code" href="../../d3/d6/structtagSETCLIPBDATA.html#o1">fIncSerialNumber</a>);
03305 
03306     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserSetClipboardData"</span>);
03307     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
03308 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a125" doxytag="ntuser.h::NtUserSetClipboardViewer" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI HWND NtUserSetClipboardViewer           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hwndNewViewer</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05865">5865</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01512">PtoH</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00362">ThreadLock</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00366">ThreadUnlock</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00410">ValidateHWNDOPT</a>, and <a class="el" href="../../d9/d7/ntuser_2kernel_2clipbrd_8c-source.html#l02572">xxxSetClipboardViewer()</a>.
<p>
<pre class="fragment"><div>05867 {
05868     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwnd;
05869     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpwnd;
05870 
05871     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(HWND, NULL);
05872 
05873     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a57">ValidateHWNDOPT</a>(pwnd, hwnd);
05874 
05875     <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(pwnd, &amp;tlpwnd);
05876 
05877     retval = (HWND)<a class="code" href="../../d4/d1/userk_8h.html#a1742">xxxSetClipboardViewer</a>(pwnd);
05878     retval = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a448">PtoH</a>((PVOID)retval);
05879 
05880     <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwnd);
05881 
05882     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserSetClipboardViewer"</span>);
05883     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
05884 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a187" doxytag="ntuser.h::NtUserSetConsoleReserveKeys" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserSetConsoleReserveKeys           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>fsReserveKeys</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l07684">7684</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d7/d7/ntinput_8c-source.html#l03634">_SetConsoleReserveKeys()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00110">BEGINRECV_HWND</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00120">ENDRECV_HWND</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, and <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>.
<p>
<pre class="fragment"><div>07687 {
07688     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> <a class="code" href="../../d6/d8/ntinput_8c.html#a67">_SetConsoleReserveKeys</a>(<a class="code" href="../../d6/d9/structtagWND.html">PWND</a>, DWORD);
07689 
07690     <span class="comment">//</span>
07691     <span class="comment">// N.B. This function has implicit window handle translation. This</span>
07692     <span class="comment">//      operation is performed in the User server API dispatcher.</span>
07693     <span class="comment">//</span>
07694 
07695     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a14">BEGINRECV_HWND</a>(BOOL, FALSE, hwnd);
07696 
07697     retval = <a class="code" href="../../d6/d8/ntinput_8c.html#a67">_SetConsoleReserveKeys</a>(pwnd, fsReserveKeys);
07698 
07699     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserSetConsoleReserveKeys"</span>);
07700     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a15">ENDRECV_HWND</a>();
07701 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a126" doxytag="ntuser.h::NtUserSetCursor" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI HCURSOR NtUserSetCursor           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HCURSOR&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hCursor</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05886">5886</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01512">PtoH</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00468">ValidateHCURSOROPT</a>, and <a class="el" href="../../d8/d0/ntuser_2kernel_2cursor_8c-source.html#l00028">zzzSetCursor()</a>.
<p>
Referenced by <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l01246">InternalDialogBox()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l02720">MLPasteText()</a>, <a class="el" href="../../d9/d4/reader_8c-source.html#l00040">ReaderSetCursor()</a>, and <a class="el" href="../../d7/d3/msgbox_8c-source.html#l00730">SoftModalMessageBox()</a>.
<p>
<pre class="fragment"><div>05888 {
05889     <a class="code" href="../../d6/d1/structtagCURSOR.html">PCURSOR</a> pCursor;
05890 
05891     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(HCURSOR, NULL);
05892 
05893     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a65">ValidateHCURSOROPT</a>(pCursor, hCursor);
05894 
05895     retval = (HCURSOR)<a class="code" href="../../d4/d1/userk_8h.html#a1785">zzzSetCursor</a>(pCursor);
05896     retval = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a448">PtoH</a>((PVOID)retval);
05897 
05898     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserSetCursor"</span>);
05899     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
05900 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a173" doxytag="ntuser.h::NtUserSetCursorContents" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserSetCursorContents           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HCURSOR&nbsp;</td>
          <td class="mdname" nowrap> <em>hCursor</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN HCURSOR&nbsp;</td>
          <td class="mdname" nowrap> <em>hCursorNew</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l07225">7225</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d8/d3/loadbits_8c-source.html#l00695">_SetCursorContents()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00075">BEGINATOMICRECV</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00081">ENDATOMICRECV</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, and <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00464">ValidateHCURSOR</a>.
<p>
<pre class="fragment"><div>07228 {
07229     <a class="code" href="../../d6/d1/structtagCURSOR.html">PCURSOR</a> pCursor;
07230     <a class="code" href="../../d6/d1/structtagCURSOR.html">PCURSOR</a> pCursorNew;
07231 
07232     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a5">BEGINATOMICRECV</a>(BOOL, FALSE);
07233 
07234     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a64">ValidateHCURSOR</a>(pCursor, hCursor);
07235     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a64">ValidateHCURSOR</a>(pCursorNew, hCursorNew);
07236 
07237     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1789">_SetCursorContents</a>(pCursor, pCursorNew);
07238 
07239     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserSetCursorContents"</span>);
07240     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a6">ENDATOMICRECV</a>();
07241 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a175" doxytag="ntuser.h::NtUserSetCursorIconData" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserSetCursorIconData           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HCURSOR&nbsp;</td>
          <td class="mdname" nowrap> <em>hCursor</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PUNICODE_STRING&nbsp;</td>
          <td class="mdname" nowrap> <em>pstrModName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PUNICODE_STRING&nbsp;</td>
          <td class="mdname" nowrap> <em>pstrResName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d8/d1/structtagCURSORDATA.html">PCURSORDATA</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pData</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l07305">7305</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d5/d3/kernel_2acons_8c-source.html#l00319">_SetCursorIconData()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02200">tagCURSORDATA::aicur</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02201">tagCURSORDATA::ajifRate</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02199">tagCURSORDATA::aspcur</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00075">BEGINATOMICRECV</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02198">tagCURSORDATA::cicur</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02197">tagCURSORDATA::cpcur</a>, <a class="el" href="../../d0/d0/client_2nt6_2user_8h.html#a1070">CURSORDATA</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02176">CURSORF_ACON</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02184">tagCURSORDATA::CURSORF_flags</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00081">ENDATOMICRECV</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00588">ProbeAndReadCursorData</a>, <a class="el" href="../../d6/d7/ex_8h-source.html#l01417">ProbeAndReadUnicodeString</a>, <a class="el" href="../../d6/d7/ex_8h-source.html#l01209">ProbeForRead</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00612">ProbeForReadUnicodeStringBuffer</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00654">ProbeForReadUnicodeStringBufferOrId</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00343">StubExceptionHandler</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, and <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00464">ValidateHCURSOR</a>.
<p>
Referenced by <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l01138">_SetCursorIconData()</a>.
<p>
<pre class="fragment"><div>07310 {
07311     UNICODE_STRING strModName;
07312     UNICODE_STRING strResName;
07313     <a class="code" href="../../d6/d1/structtagCURSOR.html">PCURSOR</a>        pCursor;
07314     <a class="code" href="../../d8/d1/structtagCURSORDATA.html">CURSORDATA</a>     curData;
07315     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>          cbData;
07316 
07317     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a5">BEGINATOMICRECV</a>(BOOL, FALSE);
07318 
07319     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a64">ValidateHCURSOR</a>(pCursor, hCursor);
07320 
07321     <span class="comment">/*</span>
07322 <span class="comment">     * Probe arguments</span>
07323 <span class="comment">     */</span>
07324     <span class="keywordflow">try</span> {
07325 
07326         strModName = <a class="code" href="../../d5/d8/ex_8h.html#a26">ProbeAndReadUnicodeString</a>(pstrModName);
07327         strResName = <a class="code" href="../../d5/d8/ex_8h.html#a26">ProbeAndReadUnicodeString</a>(pstrResName);
07328 
07329         <a class="code" href="../../d4/d1/userk_8h.html#a61">ProbeForReadUnicodeStringBuffer</a>(strModName);
07330         <a class="code" href="../../d4/d1/userk_8h.html#a63">ProbeForReadUnicodeStringBufferOrId</a>(strResName);
07331 
07332         curData = <a class="code" href="../../d4/d1/userk_8h.html#a60">ProbeAndReadCursorData</a>(pData);
07333 
07334         <span class="keywordflow">if</span> (curData.<a class="code" href="../../d8/d1/structtagCURSORDATA.html#o0">CURSORF_flags</a> &amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a537">CURSORF_ACON</a>) {
07335             <span class="comment">/*</span>
07336 <span class="comment">             * Avoid overflow here.  Or we might end up probing less</span>
07337 <span class="comment">             * MCostea #199188</span>
07338 <span class="comment">             */</span>
07339             <span class="keywordflow">if</span> (HIWORD(curData.<a class="code" href="../../d8/d1/structtagCURSORDATA.html#o12">cpcur</a>) | HIWORD(curData.<a class="code" href="../../d8/d1/structtagCURSORDATA.html#o13">cicur</a>)) {
07340                 <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
07341             }
07342             <span class="comment">/*</span>
07343 <span class="comment">             * The code assumes that the memory was allocated in one chunk</span>
07344 <span class="comment">             * as in CreateAniIcon().  To prevent evil apps, do this check.</span>
07345 <span class="comment">             */</span>
07346             <span class="keywordflow">if</span> ((INT_PTR)curData.<a class="code" href="../../d8/d1/structtagCURSORDATA.html#o16">ajifRate</a> != curData.<a class="code" href="../../d8/d1/structtagCURSORDATA.html#o12">cpcur</a> * (INT_PTR) <span class="keyword">sizeof</span>(HCURSOR) ||
07347                 (INT_PTR)curData.<a class="code" href="../../d8/d1/structtagCURSORDATA.html#o15">aicur</a> != (INT_PTR)curData.<a class="code" href="../../d8/d1/structtagCURSORDATA.html#o16">ajifRate</a> + curData.<a class="code" href="../../d8/d1/structtagCURSORDATA.html#o13">cicur</a> * (INT_PTR) <span class="keyword">sizeof</span>(JIF)) {
07348                 <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
07349             }
07350             cbData = (curData.<a class="code" href="../../d8/d1/structtagCURSORDATA.html#o12">cpcur</a> * <span class="keyword">sizeof</span>(HCURSOR)) +
07351                      (curData.<a class="code" href="../../d8/d1/structtagCURSORDATA.html#o13">cicur</a> * <span class="keyword">sizeof</span>(JIF)) +
07352                      (curData.<a class="code" href="../../d8/d1/structtagCURSORDATA.html#o13">cicur</a> * <span class="keyword">sizeof</span>(<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>));
07353 
07354         } <span class="keywordflow">else</span> {
07355             cbData = 0;
07356         }
07357         <a class="code" href="../../d5/d8/ex_8h.html#a11">ProbeForRead</a>(curData.<a class="code" href="../../d8/d1/structtagCURSORDATA.html#o14">aspcur</a>, cbData, <span class="keyword">sizeof</span>(DWORD));
07358 
07359     } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(FALSE)) {
07360         <span class="comment">/*</span>
07361 <span class="comment">         * probed parameters are USER stack variables, not supplied by the</span>
07362 <span class="comment">         * application itself, so don't bother to SetLastError.</span>
07363 <span class="comment">         */</span>
07364         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
07365     }
07366 
07367     <span class="comment">/*</span>
07368 <span class="comment">     * SetCursorIconData guards use of the buffer addresses</span>
07369 <span class="comment">     * with try clauses.</span>
07370 <span class="comment">     */</span>
07371     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1114">_SetCursorIconData</a>(pCursor,
07372                                     &amp;strModName,
07373                                     &amp;strResName,
07374                                     &amp;curData,
07375                                     cbData);
07376 
07377     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserSetCursorIconData"</span>);
07378     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a6">ENDATOMICRECV</a>();
07379 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a81" doxytag="ntuser.h::NtUserSetDbgTag" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI VOID NtUserSetDbgTag           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname" nowrap> <em>tag</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwBitFlags</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04500">4500</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d5/d4/rare_8c-source.html#l00287">_SetDbgTag()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00105">BEGINRECV_VOID</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00108">ENDRECV_VOID</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l01119">TRACEVOID</a>, and <a class="el" href="../../d2/d7/hal_8h.html#a212">VOID()</a>.
<p>
Referenced by <a class="el" href="../../d7/d7/clinit_8c-source.html#l01800">SetDbgTag()</a>.
<p>
<pre class="fragment"><div>04501 {
04502     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a12">BEGINRECV_VOID</a>();
04503 
04504     <a class="code" href="../../d4/d1/userk_8h.html#a1016">_SetDbgTag</a>(tag, dwBitFlags);
04505 
04506     <a class="code" href="../../d4/d1/userk_8h.html#a94">TRACEVOID</a>(<span class="stringliteral">"NtUserSetRipFlags"</span>);
04507     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a13">ENDRECV_VOID</a>();
04508 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="ntuser.h::NtUserSetDebugErrorLevel" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID NtUserSetDebugErrorLevel           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>dwErrorLevel</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a127" doxytag="ntuser.h::NtUserSetFocus" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI HWND NtUserSetFocus           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hwnd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05902">5902</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01512">PtoH</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00362">ThreadLock</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00366">ThreadUnlock</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00410">ValidateHWNDOPT</a>, and <a class="el" href="../../d4/d5/focusact_8c-source.html#l01815">xxxSetFocus()</a>.
<p>
Referenced by <a class="el" href="../../d2/d3/combo_8c-source.html#l00207">ComboBoxWndProcWorker()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02101">DefFrameProcWorker()</a>, <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l01036">DialogBox2()</a>, <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l00152">DlgSetFocus()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00548">ECMenu()</a>, <a class="el" href="../../d3/d8/dlgend_8c-source.html#l00024">EndDialog()</a>, <a class="el" href="../../d7/d3/msgbox_8c-source.html#l01648">MB_DlgProcWorker()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01657">MDIClientWndProcWorker()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l02792">MLMouseMotion()</a>, <a class="el" href="../../d9/d4/reader_8c-source.html#l00158">ReaderWndProc()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l02098">SLMouseMotion()</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l00590">xxxBNSetCapture()</a>, <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00611">xxxInitActivateDlg()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01237">xxxMDIActivate()</a>, <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l00110">xxxRestoreDlgFocus()</a>, and <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01290">xxxTrackMouse()</a>.
<p>
<pre class="fragment"><div>05904 {
05905     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwnd;
05906     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpwnd;
05907 
05908     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(HWND, NULL);
05909 
05910     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a57">ValidateHWNDOPT</a>(pwnd, hwnd);
05911 
05912     <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(pwnd, &amp;tlpwnd);
05913 
05914     retval = (HWND)<a class="code" href="../../d4/d1/userk_8h.html#a1662">xxxSetFocus</a>(pwnd);
05915     retval = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a448">PtoH</a>((PVOID)retval);
05916 
05917     <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwnd);
05918 
05919     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserSetFocus"</span>);
05920     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
05921 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a184" doxytag="ntuser.h::NtUserSetInformationProcess" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI NTSTATUS NtUserSetInformationProcess           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hProcess</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN USERPROCESSINFOCLASS&nbsp;</td>
          <td class="mdname" nowrap> <em>ProcessInfoClass</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PVOID&nbsp;</td>
          <td class="mdname" nowrap> <em>ProcessInformation</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>ProcessInformationLength</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l07606">7606</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00083">BEGINRECVCSRSS</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00092">ENDRECVCSRSS</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d6/d7/ex_8h-source.html#l01209">ProbeForRead</a>, <a class="el" href="../../d7/d2/queue_8c-source.html#l06357">SetInformationProcess()</a>, and <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>.
<p>
Referenced by <a class="el" href="../../d7/d1/output_8c-source.html#l04213">SetProcessForegroundRights()</a>.
<p>
<pre class="fragment"><div>07611 {
07612     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a7">BEGINRECVCSRSS</a>(NTSTATUS, STATUS_UNSUCCESSFUL);
07613 
07614     <span class="comment">/*</span>
07615 <span class="comment">     * Probe arguments without try/except</span>
07616 <span class="comment">     */</span>
07617 <span class="preprocessor">#if DBG</span>
07618 <span class="preprocessor"></span>    <a class="code" href="../../d5/d8/ex_8h.html#a11">ProbeForRead</a>(ProcessInformation, ProcessInformationLength,
07619                 <span class="keyword">sizeof</span>(DWORD));
07620 <span class="preprocessor">#endif</span>
07621 <span class="preprocessor"></span>
07622     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1946">SetInformationProcess</a>(hProcess,
07623                     ProcessInfoClass, ProcessInformation,
07624                     ProcessInformationLength);
07625 
07626 
07627     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserSetInformationProcess"</span>);
07628     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a8">ENDRECVCSRSS</a>();
07629 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a183" doxytag="ntuser.h::NtUserSetInformationThread" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI NTSTATUS NtUserSetInformationThread           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hThread</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN USERTHREADINFOCLASS&nbsp;</td>
          <td class="mdname" nowrap> <em>ThreadInfoClass</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PVOID&nbsp;</td>
          <td class="mdname" nowrap> <em>ThreadInformation</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>ThreadInformationLength</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l07575">7575</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00083">BEGINRECVCSRSS</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00092">ENDRECVCSRSS</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d6/d7/ex_8h-source.html#l01209">ProbeForRead</a>, <a class="el" href="../../d0/d4/probe_8c-source.html#l00034">ProbeForWrite()</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, and <a class="el" href="../../d7/d2/queue_8c-source.html#l06114">xxxSetInformationThread()</a>.
<p>
Referenced by <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l01601">_EndTask()</a>, <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l00050">_ExitWindowsEx()</a>, <a class="el" href="../../d8/d3/server_2private_8c-source.html#l01519">ConnectToEmulator()</a>, <a class="el" href="../../d1/d4/srvinit_8c-source.html#l01912">ConsoleClientShutdown()</a>, <a class="el" href="../../d4/d2/ntcon_2server_2input_8c-source.html#l03369">HandleFocusEvent()</a>, <a class="el" href="../../d1/d6/server_2server_8c-source.html#l00479">HandleMediaChangeEvent()</a>, <a class="el" href="../../d1/d6/server_2server_8c-source.html#l00589">HandleRemoteNetDeviceChangeEvent()</a>, <a class="el" href="../../d8/d3/server_2private_8c-source.html#l00544">SetActivePalette()</a>, <a class="el" href="../../d7/d1/output_8c-source.html#l04072">SetActiveScreenBuffer()</a>, <a class="el" href="../../d2/d3/instdev_8c-source.html#l00037">SrvDeviceEvent()</a>, <a class="el" href="../../d8/d3/server_2private_8c-source.html#l01094">SrvRegisterConsoleVDM()</a>, <a class="el" href="../../d8/d3/server_2private_8c-source.html#l00432">SrvSetConsolePalette()</a>, <a class="el" href="../../d3/d7/api_8c-source.html#l00279">TerminalServerRequestThread()</a>, <a class="el" href="../../d8/d3/server_2private_8c-source.html#l00980">UnregisterVDM()</a>, <a class="el" href="../../d8/d3/server_2private_8c-source.html#l00573">UnsetActivePalette()</a>, <a class="el" href="../../d1/d6/server_2server_8c-source.html#l00357">UserClientConnect()</a>, and <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l00219">UserClientShutdown()</a>.
<p>
<pre class="fragment"><div>07580 {
07581     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a7">BEGINRECVCSRSS</a>(NTSTATUS, STATUS_UNSUCCESSFUL);
07582 
07583     <span class="comment">/*</span>
07584 <span class="comment">     * Probe arguments outside a try clause -- CSRSS</span>
07585 <span class="comment">     */</span>
07586 <span class="preprocessor">#if DBG</span>
07587 <span class="preprocessor"></span>    <span class="keywordflow">if</span> (ThreadInfoClass == UserThreadUseDesktop) {
07588         <a class="code" href="../../d5/d8/ex_8h.html#a259">ProbeForWrite</a>(ThreadInformation, ThreadInformationLength,
07589                 <span class="keyword">sizeof</span>(DWORD));
07590     } <span class="keywordflow">else</span> {
07591         <a class="code" href="../../d5/d8/ex_8h.html#a11">ProbeForRead</a>(ThreadInformation, ThreadInformationLength,
07592                 <span class="keyword">sizeof</span>(DWORD));
07593     }
07594 
07595 <span class="preprocessor">#endif</span>
07596 <span class="preprocessor"></span>
07597     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1945">xxxSetInformationThread</a>(hThread,
07598                 ThreadInfoClass, ThreadInformation,
07599                 ThreadInformationLength);
07600 
07601 
07602     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserSetInformationThread"</span>);
07603     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a8">ENDRECVCSRSS</a>();
07604 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a57" doxytag="ntuser.h::NtUserSetInternalWindowPos" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserSetInternalWindowPos           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>cmdShow</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN CONST RECT *&nbsp;</td>
          <td class="mdname" nowrap> <em>lpRect</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN CONST POINT *&nbsp;</td>
          <td class="mdname" nowrap> <em>lpPoint</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l03826">3826</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00172">BEGINRECV_HWNDLOCK</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00186">ENDRECV_HWNDLOCK</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00186">ProbeAndReadPoint</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00203">ProbeAndReadRect</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00343">StubExceptionHandler</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, and <a class="el" href="../../d0/d7/kernel_2winmgr_8c-source.html#l01054">xxxSetInternalWindowPos()</a>.
<p>
<pre class="fragment"><div>03831 {
03832     RECT rc;
03833     POINT pt;
03834 
03835     <span class="comment">//</span>
03836     <span class="comment">// N.B. This function has implicit window translation and thread locking</span>
03837     <span class="comment">//      enabled. These operations are performed in the User server API</span>
03838     <span class="comment">//      dispatcher.</span>
03839     <span class="comment">//</span>
03840 
03841     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a24">BEGINRECV_HWNDLOCK</a>(DWORD, 0, hwnd);
03842 
03843     <span class="comment">/*</span>
03844 <span class="comment">     * Probe arguments</span>
03845 <span class="comment">     */</span>
03846     <span class="keywordflow">try</span> {
03847         rc = <a class="code" href="../../d4/d1/userk_8h.html#a31">ProbeAndReadRect</a>(lpRect);
03848         pt = <a class="code" href="../../d4/d1/userk_8h.html#a29">ProbeAndReadPoint</a>(lpPoint);
03849     } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(FALSE)) {
03850         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
03851     }
03852 
03853     retval = <a class="code" href="../../d9/d7/kernel_2winmgr_8c.html#a13">xxxSetInternalWindowPos</a>(
03854             pwnd,
03855             cmdShow,
03856             &amp;rc,
03857             &amp;pt);
03858 
03859     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserSetInternalWindowPos"</span>);
03860     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a25">ENDRECV_HWNDLOCK</a>();
03861 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a37" doxytag="ntuser.h::NtUserSetKeyboardState" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserSetKeyboardState           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN CONST <a class="el" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>lpKeyState</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l02160">2160</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d8/d8/keyboard_8c-source.html#l00136">_SetKeyboardState()</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d0/d7/halvprnt_8c-source.html#l00031">BYTE</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d6/d7/ex_8h-source.html#l01209">ProbeForRead</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00343">StubExceptionHandler</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
<pre class="fragment"><div>02162 {
02163     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(BOOL, FALSE);
02164 
02165     <span class="comment">/*</span>
02166 <span class="comment">     * Probe arguments</span>
02167 <span class="comment">     */</span>
02168     <span class="keywordflow">try</span> {
02169         <a class="code" href="../../d5/d8/ex_8h.html#a11">ProbeForRead</a>(lpKeyState, 256, <span class="keyword">sizeof</span>(BYTE));
02170 
02171         retval = <a class="code" href="../../d4/d1/userk_8h.html#a1715">_SetKeyboardState</a>(lpKeyState);
02172     } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(TRUE)) {
02173         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
02174     }
02175 
02176     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserSetKeyboardState"</span>);
02177     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
02178 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a255" doxytag="ntuser.h::NtUserSetLayeredWindowAttributes" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserSetLayeredWindowAttributes           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN COLORREF&nbsp;</td>
          <td class="mdname" nowrap> <em>crKey</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>bAlpha</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwFlags</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l13435">13435</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d9/d3/sprite_8c-source.html#l00230">_SetLayeredWindowAttributes()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00075">BEGINATOMICRECV</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d4/d7/propapi_8h-source.html#l00043">dwFlags</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00081">ENDATOMICRECV</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, and <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00399">ValidateHWND</a>.
<p>
<pre class="fragment"><div>13440 {
13441     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwnd;
13442 
13443     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a5">BEGINATOMICRECV</a>(BOOL, FALSE);
13444 
13445     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a55">ValidateHWND</a>(pwnd, hwnd);
13446 
13447     <span class="keywordflow">if</span> (<a class="code" href="../../d3/d8/propapi_8h.html#a34">dwFlags</a> &amp; ~LWA_VALID) {
13448         RIPMSG0(RIP_WARNING, <span class="stringliteral">"SetLayeredWindowAttributes: Invalid Parameter"</span>);
13449         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(ERROR_INVALID_PARAMETER);
13450     } <span class="keywordflow">else</span> {
13451         retval = <a class="code" href="../../d4/d1/userk_8h.html#a1988">_SetLayeredWindowAttributes</a>(pwnd, crKey, bAlpha, dwFlags);
13452     }
13453 
13454     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserSetLayeredWindowAttributes"</span>);
13455     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a6">ENDATOMICRECV</a>();
13456 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a170" doxytag="ntuser.h::NtUserSetLogonNotifyWindow" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserSetLogonNotifyWindow           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hwndNotify</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l07149">7149</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d6/d4/logon_8c-source.html#l00153">_SetLogonNotifyWindow()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00110">BEGINRECV_HWND</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00120">ENDRECV_HWND</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, and <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>.
<p>
<pre class="fragment"><div>07151 {
07152 
07153     <span class="comment">//</span>
07154     <span class="comment">// N.B. This function has implicit window handle translation. This</span>
07155     <span class="comment">//      operation is performed in the User server API dispatcher.</span>
07156     <span class="comment">//</span>
07157 
07158     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a14">BEGINRECV_HWND</a>(BOOL, FALSE, hwnd);
07159 
07160     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1913">_SetLogonNotifyWindow</a>(pwnd);
07161 
07162     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserSetLogonNotifyWindow"</span>);
07163     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a15">ENDRECV_HWND</a>();
07164 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a128" doxytag="ntuser.h::NtUserSetMenu" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserSetMenu           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN HMENU&nbsp;</td>
          <td class="mdname" nowrap> <em>hmenu</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fRedraw</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05923">5923</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00188">BEGINRECV_HWNDLOCK_ND</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00204">ENDRECV_HWNDLOCK_ND</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00364">ThreadLockWithPti</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00366">ThreadUnlock</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00440">ValidateHMENUOPT</a>, and <a class="el" href="../../d3/d1/mnapi_8c-source.html#l00027">xxxSetMenu()</a>.
<p>
Referenced by <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00499">MDISetMenu()</a>, and <a class="el" href="../../d0/d8/clmenu_8c-source.html#l00358">SetMenu()</a>.
<p>
<pre class="fragment"><div>05927 {
05928 
05929     <span class="comment">//</span>
05930     <span class="comment">// N.B. This function has implicit window translation and thread locking</span>
05931     <span class="comment">//      enabled. These operations are performed in the User server API</span>
05932     <span class="comment">//      dispatcher.</span>
05933     <span class="comment">//</span>
05934 
05935     <a class="code" href="../../d1/d1/structtagMENU.html">PMENU</a> pmenu;
05936     <a class="code" href="../../d5/d1/struct__TL.html">TL</a>    tlpmenu;
05937 
05938     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a26">BEGINRECV_HWNDLOCK_ND</a>(DWORD, 0, hwnd);
05939 
05940     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a60">ValidateHMENUOPT</a>(pmenu, hmenu);
05941 
05942     <a class="code" href="../../d6/d0/usercli_8h.html#a38">ThreadLockWithPti</a>(ptiCurrent, pmenu, &amp;tlpmenu);
05943 
05944     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1586">xxxSetMenu</a>(
05945             pwndND,
05946             pmenu,
05947             fRedraw);
05948 
05949     <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpmenu);
05950 
05951     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserSetMenu"</span>);
05952     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a27">ENDRECV_HWNDLOCK_ND</a>();
05953 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a129" doxytag="ntuser.h::NtUserSetMenuContextHelpId" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserSetMenuContextHelpId           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HMENU&nbsp;</td>
          <td class="mdname" nowrap> <em>hMenu</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwContextHelpId</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04779">4779</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d4/d1/mnchange_8c-source.html#l00999">_SetMenuContextHelpId()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00075">BEGINATOMICRECV</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00081">ENDATOMICRECV</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, and <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00452">ValidateHMENUMODIFY</a>.
<p>
Referenced by <a class="el" href="../../d0/d8/clmenu_8c-source.html#l00176">MenuLoadChicagoTemplates()</a>.
<p>
<pre class="fragment"><div>04782 {
04783     <a class="code" href="../../d1/d1/structtagMENU.html">PMENU</a> pmenu;
04784 
04785     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a5">BEGINATOMICRECV</a>(BOOL, FALSE);
04786 
04787     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a62">ValidateHMENUMODIFY</a>(pmenu, hMenu);
04788 
04789     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1591">_SetMenuContextHelpId</a>(
04790             pmenu,
04791             dwContextHelpId);
04792 
04793     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserSetMenuContextHelpId"</span>);
04794     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a6">ENDATOMICRECV</a>();
04795 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a84" doxytag="ntuser.h::NtUserSetMenuDefaultItem" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserSetMenuDefaultItem           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HMENU&nbsp;</td>
          <td class="mdname" nowrap> <em>hMenu</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>wID</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>fByPosition</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04759">4759</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d6/d2/mnsys_8c-source.html#l00567">_SetMenuDefaultItem()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00075">BEGINATOMICRECV</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00081">ENDATOMICRECV</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, and <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00452">ValidateHMENUMODIFY</a>.
<p>
<pre class="fragment"><div>04763 {
04764     <a class="code" href="../../d1/d1/structtagMENU.html">PMENU</a> pmenu;
04765 
04766     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a5">BEGINATOMICRECV</a>(BOOL, FALSE);
04767 
04768     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a62">ValidateHMENUMODIFY</a>(pmenu, hMenu);
04769 
04770     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1599">_SetMenuDefaultItem</a>(
04771             pmenu,
04772             wID,
04773             fByPosition);
04774 
04775     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserSetMenuDefaultItem"</span>);
04776     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a6">ENDATOMICRECV</a>();
04777 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a130" doxytag="ntuser.h::NtUserSetMenuFlagRtoL" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserSetMenuFlagRtoL           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HMENU&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hMenu</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04797">4797</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d4/d1/mnchange_8c-source.html#l01008">_SetMenuFlagRtoL()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00075">BEGINATOMICRECV</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00081">ENDATOMICRECV</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, and <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00448">ValidateHMENU</a>.
<p>
Referenced by <a class="el" href="../../d0/d8/clmenu_8c-source.html#l00176">MenuLoadChicagoTemplates()</a>.
<p>
<pre class="fragment"><div>04799 {
04800     <a class="code" href="../../d1/d1/structtagMENU.html">PMENU</a> pmenu;
04801 
04802     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a5">BEGINATOMICRECV</a>(BOOL, FALSE);
04803 
04804     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a61">ValidateHMENU</a>(pmenu, hMenu);
04805 
04806     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1592">_SetMenuFlagRtoL</a>(pmenu);
04807 
04808     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserSetMenuFlagRtoL"</span>);
04809     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a6">ENDATOMICRECV</a>();
04810 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a7" doxytag="ntuser.h::NtUserSetObjectInformation" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserSetObjectInformation           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hObject</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN int&nbsp;</td>
          <td class="mdname" nowrap> <em>nIndex</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN LPCVOID&nbsp;</td>
          <td class="mdname" nowrap> <em>pvInfo</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>nLength</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a131" doxytag="ntuser.h::NtUserSetParent" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI HWND NtUserSetParent           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwndChild</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwndNewParent</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05955">5955</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00107">_GetDesktopWindow()</a>, <a class="el" href="../../d0/d7/kernel_2winmgr_8c-source.html#l01158">_GetMessageWindow()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00188">BEGINRECV_HWNDLOCK_ND</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00204">ENDRECV_HWNDLOCK_ND</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01512">PtoH</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00364">ThreadLockWithPti</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00366">ThreadUnlock</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00399">ValidateHWND</a>, and <a class="el" href="../../d0/d7/kernel_2winmgr_8c-source.html#l00311">xxxSetParent()</a>.
<p>
Referenced by <a class="el" href="../../d4/d3/comboini_8c-source.html#l00070">xxxCBCreateHandler()</a>.
<p>
<pre class="fragment"><div>05958 {
05959 
05960     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwndNewParent;
05961     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpwndNewParent;
05962 
05963     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a26">BEGINRECV_HWNDLOCK_ND</a>(HWND, NULL, hwndChild);
05964 
05965     <span class="keywordflow">if</span> (hwndNewParent == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
05966         pwndNewParent = <a class="code" href="../../d3/d9/client_2wow_8c.html#a3">_GetDesktopWindow</a>();
05967     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (hwndNewParent == HWND_MESSAGE) {
05968         pwndNewParent = <a class="code" href="../../d9/d7/kernel_2winmgr_8c.html#a15">_GetMessageWindow</a>();
05969     } <span class="keywordflow">else</span> {
05970         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a55">ValidateHWND</a>(pwndNewParent, hwndNewParent);
05971     }
05972 
05973     <a class="code" href="../../d6/d0/usercli_8h.html#a38">ThreadLockWithPti</a>(ptiCurrent, pwndNewParent, &amp;tlpwndNewParent);
05974 
05975     retval = (HWND)<a class="code" href="../../d9/d7/kernel_2winmgr_8c.html#a6">xxxSetParent</a>(
05976             pwndND,
05977             pwndNewParent);
05978     retval = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a448">PtoH</a>((PVOID)retval);
05979 
05980     <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndNewParent);
05981 
05982     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserSetParent"</span>);
05983     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a27">ENDRECV_HWNDLOCK_ND</a>();
05984 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a13" doxytag="ntuser.h::NtUserSetProcessWindowStation" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserSetProcessWindowStation           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWINSTA&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hwinsta</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l01139">1139</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d0/d9/ntosdef_8h.html#a76a70">UserMode</a>, and <a class="el" href="../../d9/d7/winsta_8c-source.html#l01077">xxxSetProcessWindowStation()</a>.
<p>
<pre class="fragment"><div>01141 {
01142     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(BOOL, FALSE);
01143 
01144     retval = <a class="code" href="../../d8/d8/winsta_8c.html#a10">xxxSetProcessWindowStation</a>(hwinsta, UserMode);
01145 
01146     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserSetProcessWindowStation"</span>);
01147     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
01148 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a223" doxytag="ntuser.h::NtUserSetProp" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserSetProp           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwProp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hData</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l09220">9220</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00110">BEGINRECV_HWND</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00120">ENDRECV_HWND</a>, <a class="el" href="../../d5/d7/kernel_2winprop_8c-source.html#l00039">InternalSetProp()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01723">PROPF_STRING</a>, and <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>.
<p>
Referenced by <a class="el" href="../../d1/d7/ntcftxt_8h-source.html#l00937">SetProp()</a>.
<p>
<pre class="fragment"><div>09224 {
09225 
09226     <span class="comment">//</span>
09227     <span class="comment">// N.B. This function has implicit window handle translation. This</span>
09228     <span class="comment">//      operation is performed in the User server API dispatcher.</span>
09229     <span class="comment">//</span>
09230 
09231     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a14">BEGINRECV_HWND</a>(DWORD, 0, hwnd);
09232 
09233     retval = <a class="code" href="../../d4/d8/kernel_2winprop_8c.html#a0">InternalSetProp</a>(
09234             pwnd,
09235             (LPTSTR)LOWORD(dwProp),
09236             hData,
09237             HIWORD(dwProp) ? PROPF_STRING : 0);
09238 
09239     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserSetProp"</span>);
09240     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a15">ENDRECV_HWND</a>();
09241 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a80" doxytag="ntuser.h::NtUserSetRipFlags" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI VOID NtUserSetRipFlags           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwRipFlags</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>PID</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04490">4490</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d5/d4/rare_8c-source.html#l00264">_SetRipFlags()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00105">BEGINRECV_VOID</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00108">ENDRECV_VOID</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l01119">TRACEVOID</a>, and <a class="el" href="../../d2/d7/hal_8h.html#a212">VOID()</a>.
<p>
Referenced by <a class="el" href="../../d7/d7/clinit_8c-source.html#l01795">SetRipFlags()</a>.
<p>
<pre class="fragment"><div>04491 {
04492     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a12">BEGINRECV_VOID</a>();
04493 
04494     <a class="code" href="../../d4/d1/userk_8h.html#a1015">_SetRipFlags</a>(dwRipFlags, dwPID);
04495 
04496     <a class="code" href="../../d4/d1/userk_8h.html#a94">TRACEVOID</a>(<span class="stringliteral">"NtUserSetRipFlags"</span>);
04497     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a13">ENDRECV_VOID</a>();
04498 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a132" doxytag="ntuser.h::NtUserSetScrollInfo" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI int NtUserSetScrollInfo           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN int&nbsp;</td>
          <td class="mdname" nowrap> <em>nBar</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN LPCSCROLLINFO&nbsp;</td>
          <td class="mdname" nowrap> <em>pInfo</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fRedraw</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05986">5986</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00188">BEGINRECV_HWNDLOCK_ND</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00204">ENDRECV_HWNDLOCK_ND</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00352">LIMITVALUE</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00285">ProbeAndReadScrollInfo</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00343">StubExceptionHandler</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01316">xxxSetScrollBar()</a>.
<p>
Referenced by <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00200">CalcClientScrolling()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l02966">MLScroll()</a>, <a class="el" href="../../d7/d3/client_2sbapi_8c-source.html#l00021">SetScrollPos()</a>, <a class="el" href="../../d7/d3/client_2sbapi_8c-source.html#l00044">SetScrollRange()</a>, and <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l00026">xxxSetLBScrollParms()</a>.
<p>
<pre class="fragment"><div>05991 {
05992     SCROLLINFO si;
05993 
05994     <span class="comment">//</span>
05995     <span class="comment">// N.B. This function has implicit window translation and thread locking</span>
05996     <span class="comment">//      enabled. These operations are performed in the User server API</span>
05997     <span class="comment">//      dispatcher.</span>
05998     <span class="comment">//</span>
05999 
06000     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a26">BEGINRECV_HWNDLOCK_ND</a>(DWORD, 0, hwnd);
06001 
06002     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a47">LIMITVALUE</a>(nBar, SB_MAX, <span class="stringliteral">"SetScrollInfo"</span>);
06003 
06004     <span class="comment">/*</span>
06005 <span class="comment">     * Probe arguments</span>
06006 <span class="comment">     */</span>
06007     <span class="keywordflow">try</span> {
06008         si = <a class="code" href="../../d4/d1/userk_8h.html#a38">ProbeAndReadScrollInfo</a>(pInfo);
06009     } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(TRUE)) {
06010         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
06011     }
06012 
06013     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1468">xxxSetScrollBar</a>(
06014             pwndND,
06015             nBar,
06016             &amp;si,
06017             fRedraw);
06018 
06019     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserSetScrollInfo"</span>);
06020     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a27">ENDRECV_HWNDLOCK_ND</a>();
06021 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a39" doxytag="ntuser.h::NtUserSetShellWindowEx" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserSetShellWindowEx           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwndBkGnd</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l02307">2307</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00188">BEGINRECV_HWNDLOCK_ND</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00204">ENDRECV_HWNDLOCK_ND</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00365">ThreadLockAlwaysWithPti</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00366">ThreadUnlock</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00403">ValidateHWNDND</a>, and <a class="el" href="../../d0/d0/miscutil_8c-source.html#l00097">xxxSetShellWindow()</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/client_8c-source.html#l03294">SetShellWindow()</a>.
<p>
<pre class="fragment"><div>02310 {
02311     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a>        pwndBkGnd;
02312     <a class="code" href="../../d5/d1/struct__TL.html">TL</a>          tlpwndBkGnd;
02313 
02314     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a26">BEGINRECV_HWNDLOCK_ND</a>(BOOL, FALSE, hwnd);
02315 
02316     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a56">ValidateHWNDND</a>(pwndBkGnd, hwndBkGnd);
02317 
02318     <a class="code" href="../../d6/d0/usercli_8h.html#a39">ThreadLockAlwaysWithPti</a>(ptiCurrent, pwndBkGnd, &amp;tlpwndBkGnd);
02319 
02320     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1746">xxxSetShellWindow</a>(pwndND, pwndBkGnd);
02321 
02322     <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndBkGnd);
02323 
02324     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserSetShellWindowEx"</span>);
02325     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a27">ENDRECV_HWNDLOCK_ND</a>();
02326 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a133" doxytag="ntuser.h::NtUserSetSysColors" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserSetSysColors           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN int&nbsp;</td>
          <td class="mdname" nowrap> <em>cElements</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN CONST <a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>lpaElements</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN CONST COLORREF *&nbsp;</td>
          <td class="mdname" nowrap> <em>lpaRgbValues</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>uOptions</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06023">6023</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00251">CLEANUPRECV</a>, <a class="el" href="../../d2/d6/w32_2ntuser_2kernel_2profile_8c-source.html#l00151">CreateProfileUserName()</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00147">DATAALIGN</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d1/d3/ex_2alpha_2raisests_8c-source.html#l00157">ExRaiseStatus()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d2/d6/w32_2ntuser_2kernel_2profile_8c-source.html#l00174">FreeProfileUserName()</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03284">IS_THREAD_RESTRICTED</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00336">MSGERRORCLEANUP</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00151">ProbeForReadBuffer</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00058">PtiCurrent</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00343">StubExceptionHandler</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l01704">ThreadLockPool</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l01707">ThreadUnlockPool</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d4/d1/userk_8h.html#a1774">xxxSetSysColors()</a>.
<p>
Referenced by <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00028">SetSysColors()</a>, and <a class="el" href="../../d8/d3/w32_2ntuser_2client_2random_8c-source.html#l00063">SetSysColorsTemp()</a>.
<p>
<pre class="fragment"><div>06028 {
06029     LPINT lpSysColors = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
06030     LPDWORD lpSysColorValues = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
06031     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlName, tlSysColors, tlSysColorValues;
06032     PUNICODE_STRING pProfileUserName = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
06033     <a class="code" href="../../d2/d8/structtagTHREADINFO.html">PTHREADINFO</a> ptiCurrent;
06034 
06035     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(BOOL, FALSE);
06036 
06037     ptiCurrent = <a class="code" href="../../d4/d1/userk_8h.html#a9">PtiCurrent</a>();
06038 
06039     <span class="comment">/*</span>
06040 <span class="comment">     * Prevent restricted threads from changing global stuff</span>
06041 <span class="comment">     */</span>
06042     <span class="keywordflow">if</span> (<a class="code" href="../../d4/d1/userk_8h.html#a382">IS_THREAD_RESTRICTED</a>(ptiCurrent, JOB_OBJECT_UILIMIT_SYSTEMPARAMETERS)) {
06043         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
06044     }
06045 
06046     <span class="comment">/*</span>
06047 <span class="comment">     * Probe arguments</span>
06048 <span class="comment">     */</span>
06049     <span class="keywordflow">if</span> (nCount) {
06050         <span class="keywordflow">try</span> {
06051             <a class="code" href="../../d4/d1/userk_8h.html#a24">ProbeForReadBuffer</a>(pSysColor, nCount, DATAALIGN);
06052             <a class="code" href="../../d4/d1/userk_8h.html#a24">ProbeForReadBuffer</a>(pColorValues, nCount, DATAALIGN);
06053             lpSysColors = UserAllocPoolWithQuota(nCount * <span class="keyword">sizeof</span>(*pSysColor), TAG_COLORS);
06054             <span class="keywordflow">if</span> (lpSysColors == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
06055                 <a class="code" href="../../d5/d8/ex_8h.html#a303">ExRaiseStatus</a>(STATUS_NO_MEMORY);
06056             }
06057             RtlCopyMemory(lpSysColors, pSysColor, nCount * <span class="keyword">sizeof</span>(*pSysColor));
06058             lpSysColorValues = UserAllocPoolWithQuota(nCount * <span class="keyword">sizeof</span>(*pColorValues), TAG_COLORVALUES);
06059             <span class="keywordflow">if</span> (lpSysColorValues == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
06060                 <a class="code" href="../../d5/d8/ex_8h.html#a303">ExRaiseStatus</a>(STATUS_NO_MEMORY);
06061             }
06062             RtlCopyMemory(lpSysColorValues, pColorValues, nCount * <span class="keyword">sizeof</span>(*pColorValues));
06063 
06064         } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(TRUE)) {
06065             <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a44">MSGERRORCLEANUP</a>(0);
06066         }
06067     }
06068 
06069     <a class="code" href="../../d4/d1/userk_8h.html#a137">ThreadLockPool</a>(ptiCurrent, lpSysColors, &amp;tlSysColors);
06070     <a class="code" href="../../d4/d1/userk_8h.html#a137">ThreadLockPool</a>(ptiCurrent, lpSysColorValues, &amp;tlSysColorValues);
06071     pProfileUserName = <a class="code" href="../../d4/d1/userk_8h.html#a2000">CreateProfileUserName</a>(&amp;tlName);
06072     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1774">xxxSetSysColors</a>(pProfileUserName,
06073                 nCount,
06074                 lpSysColors,
06075                 lpSysColorValues,
06076                 uOptions
06077                 );
06078     <a class="code" href="../../d4/d1/userk_8h.html#a2001">FreeProfileUserName</a>(pProfileUserName, &amp;tlName);
06079     <a class="code" href="../../d4/d1/userk_8h.html#a138">ThreadUnlockPool</a>(ptiCurrent, &amp;tlSysColorValues);
06080     <a class="code" href="../../d4/d1/userk_8h.html#a138">ThreadUnlockPool</a>(ptiCurrent, &amp;tlSysColors);
06081 
06082     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a33">CLEANUPRECV</a>();
06083     <span class="keywordflow">if</span> (lpSysColors)
06084         UserFreePool(lpSysColors);
06085     <span class="keywordflow">if</span> (lpSysColorValues)
06086         UserFreePool(lpSysColorValues);
06087 
06088     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserSetSysColors"</span>);
06089     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
06090 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a171" doxytag="ntuser.h::NtUserSetSystemCursor" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserSetSystemCursor           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HCURSOR&nbsp;</td>
          <td class="mdname" nowrap> <em>hcur</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>id</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l07166">7166</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00464">ValidateHCURSOR</a>, and <a class="el" href="../../d5/d3/kernel_2acons_8c-source.html#l00028">zzzSetSystemCursor()</a>.
<p>
Referenced by <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l01078">SetSystemCursor()</a>.
<p>
<pre class="fragment"><div>07169 {
07170     <a class="code" href="../../d6/d1/structtagCURSOR.html">PCURSOR</a> pcur;
07171 
07172     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(BOOL, FALSE);
07173 
07174     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a64">ValidateHCURSOR</a>(pcur, hcur);
07175 
07176     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1110">zzzSetSystemCursor</a>(
07177             pcur,
07178             <span class="keywordtype">id</span>);
07179 
07180     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserSetSystemCursor"</span>);
07181     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
07182 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a203" doxytag="ntuser.h::NtUserSetSystemMenu" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserSetSystemMenu           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN HMENU&nbsp;</td>
          <td class="mdname" nowrap> <em>hmenu</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l08507">8507</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00172">BEGINRECV_HWNDLOCK</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00186">ENDRECV_HWNDLOCK</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00365">ThreadLockAlwaysWithPti</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00366">ThreadUnlock</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00448">ValidateHMENU</a>, and <a class="el" href="../../d3/d1/mnapi_8c-source.html#l00065">xxxSetSystemMenu()</a>.
<p>
Referenced by <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02735">MDICompleteChildCreation()</a>.
<p>
<pre class="fragment"><div>08510 {
08511 
08512     <span class="comment">//</span>
08513     <span class="comment">// N.B. This function has implicit window translation and thread locking</span>
08514     <span class="comment">//      enabled. These operations are performed in the User server API</span>
08515     <span class="comment">//      dispatcher.</span>
08516     <span class="comment">//</span>
08517 
08518     <a class="code" href="../../d1/d1/structtagMENU.html">PMENU</a> pmenu;
08519     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpmenu;
08520 
08521     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a24">BEGINRECV_HWNDLOCK</a>(DWORD, 0, hwnd);
08522 
08523     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a61">ValidateHMENU</a>(pmenu, hmenu);
08524 
08525     <a class="code" href="../../d6/d0/usercli_8h.html#a39">ThreadLockAlwaysWithPti</a>(ptiCurrent, pmenu, &amp;tlpmenu);
08526 
08527     retval =  <a class="code" href="../../d4/d1/userk_8h.html#a1390">xxxSetSystemMenu</a>(pwnd, pmenu);
08528 
08529     <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpmenu);
08530 
08531     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserSetSystemMenu"</span>);
08532     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a25">ENDRECV_HWNDLOCK</a>();
08533 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a205" doxytag="ntuser.h::NtUserSetSystemTimer" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI UINT_PTR NtUserSetSystemTimer           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN UINT_PTR&nbsp;</td>
          <td class="mdname" nowrap> <em>nIDEvent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwElapse</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN WNDPROC&nbsp;</td>
          <td class="mdname" nowrap> <em>pTimerFunc</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l08554">8554</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d5/d1/timers_8c-source.html#l00078">_SetSystemTimer()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00110">BEGINRECV_HWND</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00120">ENDRECV_HWND</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>.
<p>
Referenced by <a class="el" href="../../d2/d4/editml_8c-source.html#l02792">MLMouseMotion()</a>.
<p>
<pre class="fragment"><div>08559 {
08560 
08561     <span class="comment">//</span>
08562     <span class="comment">// N.B. This function has implicit window translation and thread locking</span>
08563     <span class="comment">//      enabled. These operations are performed in the User server API</span>
08564     <span class="comment">//      dispatcher.</span>
08565     <span class="comment">//</span>
08566 
08567     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a14">BEGINRECV_HWND</a>(UINT_PTR, 0, hwnd);
08568 
08569     UNREFERENCED_PARAMETER(pTimerFunc);
08570 
08571     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1894">_SetSystemTimer</a>(pwnd,
08572             nIDEvent,
08573             dwElapse,
08574             NULL);
08575 
08576     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserSetSystemTimer"</span>);
08577     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a15">ENDRECV_HWND</a>();
08578 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a22" doxytag="ntuser.h::NtUserSetThreadDesktop" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserSetThreadDesktop           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HDESK&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hdesk</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l01434">1434</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00794">gpepCSRSS</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l01539">LogDesktop</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d9/ob_8h-source.html#l00494">ObDereferenceObject</a>, <a class="el" href="../../d2/d8/ps_8h-source.html#l00643">PsGetCurrentProcess</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00058">PtiCurrent</a>, <a class="el" href="../../d3/d0/cttoken_8c-source.html#l00135">Status</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d0/d9/ntosdef_8h.html#a76a70">UserMode</a>, <a class="el" href="../../d8/d2/validate_8c-source.html#l00092">ValidateHdesk()</a>, and <a class="el" href="../../d0/d6/desktop_8c-source.html#l04033">xxxSetThreadDesktop()</a>.
<p>
<pre class="fragment"><div>01436 {
01437     <a class="code" href="../../d0/d3/structtagDESKTOP.html">PDESKTOP</a> pdesk = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
01438     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = STATUS_SUCCESS;
01439 
01440     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(BOOL, FALSE);
01441     <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d7/d3/validate_8c.html#a7">ValidateHdesk</a>(hdesk, UserMode, 0, &amp;pdesk);
01442     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(Status)) {
01443         retval = <a class="code" href="../../d4/d1/userk_8h.html#a1801">xxxSetThreadDesktop</a>(hdesk, pdesk);
01444         <a class="code" href="../../d4/d1/userk_8h.html#a120">LogDesktop</a>(pdesk, LD_DEREF_VALIDATE_HDESK1, FALSE, (ULONG_PTR)<a class="code" href="../../d4/d1/userk_8h.html#a9">PtiCurrent</a>());
01445         <a class="code" href="../../d4/d0/ob_8h.html#a14">ObDereferenceObject</a>(pdesk);
01446     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (hdesk == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> &amp;&amp; <a class="code" href="../../d1/d9/ps_8h.html#a19">PsGetCurrentProcess</a>() == <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a299">gpepCSRSS</a>) {
01447         retval = <a class="code" href="../../d4/d1/userk_8h.html#a1801">xxxSetThreadDesktop</a>(NULL, NULL);
01448     } <span class="keywordflow">else</span>
01449         retval = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01450 
01451     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserSetThreadDesktop"</span>);
01452     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
01453 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a191" doxytag="ntuser.h::NtUserSetThreadState" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI VOID NtUserSetThreadState           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwFlags</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwMask</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l07777">7777</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00105">BEGINRECV_VOID</a>, <a class="el" href="../../d4/d7/propapi_8h-source.html#l00043">dwFlags</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00108">ENDRECV_VOID</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03321">tagTHREADINFO::pq</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00058">PtiCurrent</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l03022">QF_DIALOGACTIVE</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03129">tagQ::QF_flags</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l01119">TRACEVOID</a>, and <a class="el" href="../../d2/d7/hal_8h.html#a212">VOID()</a>.
<p>
Referenced by <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l00460">DefDlgProcWorker()</a>.
<p>
<pre class="fragment"><div>07780 {
07781     <a class="code" href="../../d2/d8/structtagTHREADINFO.html">PTHREADINFO</a> ptiCurrent;
07782     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwOldFlags;
07783 
07784     <span class="keywordflow">if</span> (<a class="code" href="../../d3/d8/propapi_8h.html#a34">dwFlags</a> &amp; ~(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a867">QF_DIALOGACTIVE</a>)) {
07785         <span class="keywordflow">return</span>;
07786     }
07787 
07788     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a12">BEGINRECV_VOID</a>();
07789 
07790     ptiCurrent = <a class="code" href="../../d4/d1/userk_8h.html#a9">PtiCurrent</a>();
07791     dwOldFlags = ptiCurrent-&gt;<a class="code" href="../../d2/d8/structtagTHREADINFO.html#o3">pq</a>-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o21">QF_flags</a>;
07792     ptiCurrent-&gt;<a class="code" href="../../d2/d8/structtagTHREADINFO.html#o3">pq</a>-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o21">QF_flags</a> ^= ((dwOldFlags ^ <a class="code" href="../../d3/d8/propapi_8h.html#a34">dwFlags</a>) &amp; dwMask);
07793 
07794     <a class="code" href="../../d4/d1/userk_8h.html#a94">TRACEVOID</a>(<span class="stringliteral">"NtUserSetThreadState"</span>);
07795     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a13">ENDRECV_VOID</a>();
07796 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a134" doxytag="ntuser.h::NtUserSetTimer" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI UINT_PTR NtUserSetTimer           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN UINT_PTR&nbsp;</td>
          <td class="mdname" nowrap> <em>nIDEvent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>wElapse</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN TIMERPROC&nbsp;</td>
          <td class="mdname" nowrap> <em>pTimerFunc</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06092">6092</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d5/d1/timers_8c-source.html#l00045">_SetTimer()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00075">BEGINATOMICRECV</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00081">ENDATOMICRECV</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00848">TIMERPROC_PWND</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, and <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00410">ValidateHWNDOPT</a>.
<p>
Referenced by <a class="el" href="../../d1/d0/xact_8c-source.html#l00024">DdeClientTransaction()</a>, <a class="el" href="../../d9/d4/reader_8c-source.html#l00158">ReaderWndProc()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02948">xxxLBoxCtlCharInput()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02183">xxxLBoxCtlKeyInput()</a>, <a class="el" href="../../d6/d4/statctl_8c-source.html#l01211">xxxNextAniIconStep()</a>, <a class="el" href="../../d6/d4/statctl_8c-source.html#l00094">xxxSetStaticImage()</a>, and <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01290">xxxTrackMouse()</a>.
<p>
<pre class="fragment"><div>06097 {
06098     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwnd;
06099 
06100     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a5">BEGINATOMICRECV</a>(UINT_PTR, 0);
06101 
06102     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a57">ValidateHWNDOPT</a>(pwnd, hwnd);
06103 
06104     <span class="comment">/*</span>
06105 <span class="comment">     * If we let apps set a timer granularity less then 10 the app</span>
06106 <span class="comment">     * spend too long processing timer messages.  Some WOW apps like</span>
06107 <span class="comment">     * Paradox in WinStone use zero to effectively get the minimal</span>
06108 <span class="comment">     * timer value which was ~55ms in Win 3.1.  We also step this</span>
06109 <span class="comment">     * value up for 32 bit apps because the NT timer resolution</span>
06110 <span class="comment">     * can very depending if the multimedia timers have turned up</span>
06111 <span class="comment">     * the resolution.  If they have NT apps that specify a low value</span>
06112 <span class="comment">     * will not work properly because they will eat the CPU processing</span>
06113 <span class="comment">     * WM_TIMER messages</span>
06114 <span class="comment">     */</span>
06115     <span class="keywordflow">if</span> (wElapse &lt; 10) {
06116         RIPMSG1(RIP_WARNING, <span class="stringliteral">"SetTimer: timeout value was %ld set to 10"</span>,
06117                 wElapse);
06118         wElapse = 10;
06119     }
06120 
06121     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1241">_SetTimer</a>(
06122             pwnd,
06123             nIDEvent,
06124             wElapse,
06125             (TIMERPROC_PWND)pTimerFunc);
06126 
06127     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserSetTimer"</span>);
06128     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a6">ENDATOMICRECV</a>();
06129 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a189" doxytag="ntuser.h::NtUserSetWindowFNID" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserSetWindowFNID           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN WORD&nbsp;</td>
          <td class="mdname" nowrap> <em>fnid</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l07715">7715</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00110">BEGINRECV_HWND</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00120">ENDRECV_HWND</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00836">FNID_CLEANEDUP_BIT</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00803">FNID_CONTROLEND</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00843">GETFNID</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01547">GETPTI</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00084">PpiCurrent</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d9/d0/btnctl_8c-source.html#l01338">ButtonWndProcWorker()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l00285">ECNcCreate()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l00439">ECNcDestroyHandler()</a>, <a class="el" href="../../d0/d9/imectl_8c-source.html#l00083">ImeWndProcWorker()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01657">MDIClientWndProcWorker()</a>, <a class="el" href="../../d6/d4/statctl_8c-source.html#l00840">StaticWndProcWorker()</a>, <a class="el" href="../../d4/d3/comboini_8c-source.html#l00394">xxxCBNcDestroyHandler()</a>, and <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00375">xxxDestroyLBox()</a>.
<p>
<pre class="fragment"><div>07718 {
07719     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a14">BEGINRECV_HWND</a>(BOOL, FALSE, hwnd);
07720 
07721     <span class="comment">/*</span>
07722 <span class="comment">     * Don't let apps mess with windows on other processes.</span>
07723 <span class="comment">     */</span>
07724     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a455">GETPTI</a>(pwnd)-&gt;ppi != <a class="code" href="../../d4/d1/userk_8h.html#a16">PpiCurrent</a>()) {
07725         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
07726     }
07727 
07728     <span class="comment">/*</span>
07729 <span class="comment">     * Make sure the fnid is in the correct range.</span>
07730 <span class="comment">     */</span>
07731     <span class="keywordflow">if</span> (fnid != <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a226">FNID_CLEANEDUP_BIT</a>) {
07732         <span class="keywordflow">if</span> ((fnid &lt; FNID_CONTROLSTART) || (fnid &gt; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a209">FNID_CONTROLEND</a>) || (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a232">GETFNID</a>(pwnd) != 0)) {
07733             <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
07734         }
07735     }
07736 
07737     <span class="comment">/*</span>
07738 <span class="comment">     * Remember what window class this window belongs to.  Can't use</span>
07739 <span class="comment">     * the real class because any app can call CallWindowProc()</span>
07740 <span class="comment">     * directly no matter what the class is!</span>
07741 <span class="comment">     */</span>
07742     pwnd-&gt;fnid |= fnid;
07743     retval = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
07744 
07745     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserSetWindowFNID"</span>);
07746     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a15">ENDRECV_HWND</a>();
07747 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a135" doxytag="ntuser.h::NtUserSetWindowLong" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI LONG NtUserSetWindowLong           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN int&nbsp;</td>
          <td class="mdname" nowrap> <em>nIndex</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN LONG&nbsp;</td>
          <td class="mdname" nowrap> <em>dwNewLong</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>bAnsi</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a73" doxytag="ntuser.h::NtUserSetWindowPlacement" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserSetWindowPlacement           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN CONST WINDOWPLACEMENT *&nbsp;</td>
          <td class="mdname" nowrap> <em>lpwndpl</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04260">4260</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00188">BEGINRECV_HWNDLOCK_ND</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00204">ENDRECV_HWNDLOCK_ND</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00480">Is400Compat</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00246">ProbeAndReadWindowPlacement</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00343">StubExceptionHandler</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d0/d7/kernel_2winmgr_8c-source.html#l00911">xxxSetWindowPlacement()</a>.
<p>
<pre class="fragment"><div>04263 {
04264     WINDOWPLACEMENT wp;
04265 
04266     <span class="comment">//</span>
04267     <span class="comment">// N.B. This function has implicit window translation and thread locking</span>
04268     <span class="comment">//      enabled. These operations are performed in the User server API</span>
04269     <span class="comment">//      dispatcher.</span>
04270     <span class="comment">//</span>
04271 
04272     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a26">BEGINRECV_HWNDLOCK_ND</a>(BOOL, FALSE, hwnd);
04273 
04274     <span class="comment">/*</span>
04275 <span class="comment">     * Probe arguments</span>
04276 <span class="comment">     */</span>
04277     <span class="keywordflow">try</span> {
04278         wp = <a class="code" href="../../d4/d1/userk_8h.html#a35">ProbeAndReadWindowPlacement</a>(pwp);
04279     } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(TRUE)) {
04280         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
04281     }
04282 
04283     <span class="keywordflow">if</span> (wp.length != <span class="keyword">sizeof</span>(WINDOWPLACEMENT)) {
04284         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a105">Is400Compat</a>(ptiCurrent-&gt;dwExpWinVer)) {
04285             RIPERR1(ERROR_INVALID_PARAMETER, RIP_WARNING, <span class="stringliteral">"SetWindowPlacement: invalid length %lX"</span>, pwp-&gt;length);
04286             <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
04287         } <span class="keywordflow">else</span> {
04288             RIPMSG1(RIP_WARNING, <span class="stringliteral">"SetWindowPlacement: invalid length %lX"</span>, pwp-&gt;length);
04289         }
04290     }
04291 
04292     retval = <a class="code" href="../../d9/d7/kernel_2winmgr_8c.html#a12">xxxSetWindowPlacement</a>(pwndND, &amp;wp);
04293 
04294     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserSetWindowPlacement"</span>);
04295     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a27">ENDRECV_HWNDLOCK_ND</a>();
04296 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a38" doxytag="ntuser.h::NtUserSetWindowPos" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserSetWindowPos           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwndInsertAfter</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN int&nbsp;</td>
          <td class="mdname" nowrap> <em>x</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN int&nbsp;</td>
          <td class="mdname" nowrap> <em>y</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN int&nbsp;</td>
          <td class="mdname" nowrap> <em>cx</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN int&nbsp;</td>
          <td class="mdname" nowrap> <em>cy</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>dwFlags</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l02180">2180</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00188">BEGINRECV_HWNDLOCK_ND</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d2/d0/inctlpan_8c-source.html#l00480">cy</a>, <a class="el" href="../../d4/d7/propapi_8h-source.html#l00043">dwFlags</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00204">ENDRECV_HWNDLOCK_ND</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00345">TESTFLAGS</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00364">ThreadLockWithPti</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00366">ThreadUnlock</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00418">ValidateHWNDIA</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02312">WFINDESTROY</a>, and <a class="el" href="../../d3/d7/swp_8c-source.html#l01468">xxxSetWindowPos()</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/winmgrc_8c-source.html#l00680">AnimateBlend()</a>, <a class="el" href="../../d4/d7/winmgrc_8c-source.html#l00810">AnimateWindow()</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l00105">BringWindowToTop()</a>, <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l00460">DefDlgProcWorker()</a>, <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l01036">DialogBox2()</a>, <a class="el" href="../../d3/d8/dlgend_8c-source.html#l00024">EndDialog()</a>, <a class="el" href="../../d7/d3/msgbox_8c-source.html#l01648">MB_DlgProcWorker()</a>, <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00775">MDIActivateDlgInit()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01657">MDIClientWndProcWorker()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02735">MDICompleteChildCreation()</a>, <a class="el" href="../../d9/d4/reader_8c-source.html#l00158">ReaderWndProc()</a>, <a class="el" href="../../d4/d7/winmgrc_8c-source.html#l00661">ShowWindowNoRepaint()</a>, <a class="el" href="../../d6/d4/statctl_8c-source.html#l00840">StaticWndProcWorker()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00603">UnmaximizeChildWindows()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l01719">xxxCBHideListBoxWindow()</a>, <a class="el" href="../../d4/d3/comboini_8c-source.html#l00485">xxxCBSetEditItemHeight()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l01819">xxxCBShowListBoxWindow()</a>, <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00514">xxxLBSize()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01237">xxxMDIActivate()</a>, and <a class="el" href="../../d6/d4/statctl_8c-source.html#l00094">xxxSetStaticImage()</a>.
<p>
<pre class="fragment"><div>02188 {
02189     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a>        pwndT;
02190     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a>        pwndInsertAfter;
02191     <a class="code" href="../../d5/d1/struct__TL.html">TL</a>          tlpwndT;
02192 
02193     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a26">BEGINRECV_HWNDLOCK_ND</a>(BOOL, FALSE, hwnd);
02194 
02195     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a46">TESTFLAGS</a>(dwFlags, SWP_VALID);
02196 
02197     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a58">ValidateHWNDIA</a>(pwndInsertAfter, hwndInsertAfter);
02198 
02199     <span class="comment">/*</span>
02200 <span class="comment">     * Let's not allow the window to be shown/hidden once we</span>
02201 <span class="comment">     * started the destruction of the window.</span>
02202 <span class="comment">     */</span>
02203     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwndND, WFINDESTROY)) {
02204         RIPERR1(ERROR_INVALID_PARAMETER,
02205                 RIP_WARNING,
02206                 <span class="stringliteral">"SetWindowPos: Window is being destroyed (pwnd == %#p)"</span>,
02207                 pwndND);
02208         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
02209     }
02210 
02211     <span class="keywordflow">if</span> (<a class="code" href="../../d3/d8/propapi_8h.html#a34">dwFlags</a> &amp; ~SWP_VALID) {
02212         RIPERR1(ERROR_INVALID_PARAMETER,
02213                 RIP_WARNING,
02214                 <span class="stringliteral">"SetWindowPos: Invalid flags passed in (flags == 0x%lx)"</span>,
02215                 dwFlags);
02216         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
02217     }
02218 
02219     <span class="comment">/*</span>
02220 <span class="comment">     * Make sure the window coordinates can fit in WORDs.</span>
02221 <span class="comment">     */</span>
02222     <span class="keywordflow">if</span> (!(<a class="code" href="../../d3/d8/propapi_8h.html#a34">dwFlags</a> &amp; SWP_NOMOVE)) {
02223         <span class="keywordflow">if</span> (x &gt; SHRT_MAX) {
02224             x = SHRT_MAX;
02225         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (x &lt; SHRT_MIN) {
02226             x = SHRT_MIN;
02227         }
02228         <span class="keywordflow">if</span> (y &gt; SHRT_MAX) {
02229             y = SHRT_MAX;
02230         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (y &lt; SHRT_MIN) {
02231             y = SHRT_MIN;
02232         }
02233     }
02234 
02235     <span class="comment">/*</span>
02236 <span class="comment">     * Actually, if we were going to be really strict about this we'd</span>
02237 <span class="comment">     * make sure that x + cx &lt; SHRT_MAX, etc but since we do maintain</span>
02238 <span class="comment">     * signed 32-bit coords internally this case doesn't cause a problem.</span>
02239 <span class="comment">     */</span>
02240     <span class="keywordflow">if</span> (!(<a class="code" href="../../d3/d8/propapi_8h.html#a34">dwFlags</a> &amp; SWP_NOSIZE)) {
02241         <span class="keywordflow">if</span> (cx &lt; 0) {
02242             cx = 0;
02243         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cx &gt; SHRT_MAX) {
02244             cx = SHRT_MAX;
02245         }
02246         <span class="keywordflow">if</span> (<a class="code" href="../../d1/d1/inctlpan_8c.html#a3">cy</a> &lt; 0) {
02247             <a class="code" href="../../d1/d1/inctlpan_8c.html#a3">cy</a> = 0;
02248         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d1/d1/inctlpan_8c.html#a3">cy</a> &gt; SHRT_MAX) {
02249             <a class="code" href="../../d1/d1/inctlpan_8c.html#a3">cy</a> = SHRT_MAX;
02250         }
02251     }
02252 
02253 <span class="preprocessor">#ifdef NEVER</span>
02254 <span class="preprocessor"></span><span class="comment">//</span>
02255 <span class="comment">// do not fail these conditions because real apps use them.</span>
02256 <span class="comment">//</span>
02257     <span class="keywordflow">if</span> (!(<a class="code" href="../../d3/d8/propapi_8h.html#a34">dwFlags</a> &amp; SWP_NOMOVE) &amp;&amp;
02258             (x &gt; SHRT_MAX || x &lt; SHRT_MIN ||
02259              y &gt; SHRT_MAX || y &lt; SHRT_MIN)) {
02260         RIPERR0(ERROR_INVALID_PARAMETER, RIP_WARNING, <span class="stringliteral">"Invalid coordinate passed to SetWindowPos"</span>);
02261         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
02262     }
02263 
02264     <span class="comment">/*</span>
02265 <span class="comment">     * Actually, if we were going to be really strict about this we'd</span>
02266 <span class="comment">     * make sure that x + cx &lt; SHRT_MAX, etc but since we do maintain</span>
02267 <span class="comment">     * signed 32-bit coords internally this case doesn't cause a problem.</span>
02268 <span class="comment">     */</span>
02269     <span class="keywordflow">if</span> (!(<a class="code" href="../../d3/d8/propapi_8h.html#a34">dwFlags</a> &amp; SWP_NOSIZE) &amp;&amp;
02270             (cx &lt; 0 || cx &gt; SHRT_MAX ||
02271              cy &lt; 0 || cy &gt; SHRT_MAX)) {
02272         RIPERR0(ERROR_INVALID_PARAMETER, RIP_WARNING, <span class="stringliteral">"Invalid width/height passed to SetWindowPos"</span>);
02273         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
02274     }
02275 <span class="preprocessor">#endif</span>
02276 <span class="preprocessor"></span>
02277     <span class="keywordflow">switch</span>((ULONG_PTR)pwndInsertAfter) {
02278     <span class="keywordflow">case</span> (ULONG_PTR)HWND_TOPMOST:
02279     <span class="keywordflow">case</span> (ULONG_PTR)HWND_NOTOPMOST:
02280     <span class="keywordflow">case</span> (ULONG_PTR)HWND_TOP:
02281     <span class="keywordflow">case</span> (ULONG_PTR)HWND_BOTTOM:
02282         pwndT = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
02283         <span class="keywordflow">break</span>;
02284 
02285     <span class="keywordflow">default</span>:
02286         pwndT = pwndInsertAfter;
02287         <span class="keywordflow">break</span>;
02288     }
02289 
02290     <a class="code" href="../../d6/d0/usercli_8h.html#a38">ThreadLockWithPti</a>(ptiCurrent, pwndT, &amp;tlpwndT);
02291 
02292     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1615">xxxSetWindowPos</a>(
02293             pwndND,
02294             pwndInsertAfter,
02295             x,
02296             y,
02297             cx,
02298             cy,
02299             dwFlags);
02300 
02301     <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndT);
02302 
02303     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserSetWindowPos"</span>);
02304     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a27">ENDRECV_HWNDLOCK_ND</a>();
02305 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a160" doxytag="ntuser.h::NtUserSetWindowRgn" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI int NtUserSetWindowRgn           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN HRGN&nbsp;</td>
          <td class="mdname" nowrap> <em>hRgn</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>bRedraw</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06801">6801</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00188">BEGINRECV_HWNDLOCK_ND</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00204">ENDRECV_HWNDLOCK_ND</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, and <a class="el" href="../../d3/d7/swp_8c-source.html#l05661">xxxSetWindowRgn()</a>.
<p>
Referenced by <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00906">SetWindowRgn()</a>.
<p>
<pre class="fragment"><div>06805 {
06806 
06807     <span class="comment">//</span>
06808     <span class="comment">// N.B. This function has implicit window translation and thread locking</span>
06809     <span class="comment">//      enabled. These operations are performed in the User server API</span>
06810     <span class="comment">//      dispatcher.</span>
06811     <span class="comment">//</span>
06812 
06813     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a26">BEGINRECV_HWNDLOCK_ND</a>(<span class="keywordtype">int</span>, 0, hwnd);
06814 
06815     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1610">xxxSetWindowRgn</a>(
06816             pwndND,
06817             hrgn,
06818             bRedraw);
06819 
06820     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserSetWindowRgn"</span>);
06821     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a27">ENDRECV_HWNDLOCK_ND</a>();
06822 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a137" doxytag="ntuser.h::NtUserSetWindowsHookAW" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI HHOOK NtUserSetWindowsHookAW           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN int&nbsp;</td>
          <td class="mdname" nowrap> <em>nFilterType</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN HOOKPROC&nbsp;</td>
          <td class="mdname" nowrap> <em>pfnFilterProc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwFlags</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06203">6203</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d4/d7/propapi_8h-source.html#l00043">dwFlags</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, and <a class="el" href="../../d2/d1/hooks_8c-source.html#l00528">zzzSetWindowsHookAW()</a>.
<p>
Referenced by <a class="el" href="../../d3/d7/clhook_8c-source.html#l00078">SetWindowsHookA()</a>, and <a class="el" href="../../d3/d7/clhook_8c-source.html#l00087">SetWindowsHookW()</a>.
<p>
<pre class="fragment"><div>06207 {
06208     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(HHOOK, NULL);
06209 
06210     retval = (HHOOK)<a class="code" href="../../d4/d1/userk_8h.html#a1814">zzzSetWindowsHookAW</a>(
06211             nFilterType,
06212             (PROC)pfnFilterProc,
06213             dwFlags);
06214 
06215     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserSetWindowsHookAW"</span>);
06216     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
06217 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a56" doxytag="ntuser.h::NtUserSetWindowsHookEx" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI HHOOK NtUserSetWindowsHookEx           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hmod</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PUNICODE_STRING pstrLib&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>idThread</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN int&nbsp;</td>
          <td class="mdname" nowrap> <em>nFilterType</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PROC&nbsp;</td>
          <td class="mdname" nowrap> <em>pfnFilterProc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwFlags</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l03376">3376</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d4/d7/propapi_8h-source.html#l00043">dwFlags</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d2/queue_8c-source.html#l04737">PtiFromThreadId()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01512">PtoH</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, and <a class="el" href="../../d2/d1/hooks_8c-source.html#l00576">zzzSetWindowsHookEx()</a>.
<p>
Referenced by <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00258">_SetWindowsHookEx()</a>.
<p>
<pre class="fragment"><div>03383 {
03384     <a class="code" href="../../d2/d8/structtagTHREADINFO.html">PTHREADINFO</a> ptiThread;
03385 
03386     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(HHOOK, NULL);
03387 
03388     <span class="keywordflow">if</span> (idThread != 0) {
03389         ptiThread = <a class="code" href="../../d4/d1/userk_8h.html#a1201">PtiFromThreadId</a>(idThread);
03390         <span class="keywordflow">if</span> (ptiThread == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
03391             RIPERR0(ERROR_INVALID_PARAMETER, RIP_VERBOSE, <span class="stringliteral">""</span>);
03392             <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
03393         }
03394     } <span class="keywordflow">else</span> {
03395         ptiThread = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
03396     }
03397 
03398     <span class="comment">/*</span>
03399 <span class="comment">     * Probe pstrLib in GetHmodTableIndex().</span>
03400 <span class="comment">     */</span>
03401     retval = (HHOOK)<a class="code" href="../../d4/d1/userk_8h.html#a1906">zzzSetWindowsHookEx</a>(
03402             hmod,
03403             pstrLib,
03404             ptiThread,
03405             nFilterType,
03406             pfnFilterProc,
03407             dwFlags);
03408     retval = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a448">PtoH</a>((PVOID)retval);
03409 
03410     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserSetWindowsHookEx"</span>);
03411     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
03412 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a169" doxytag="ntuser.h::NtUserSetWindowStationUser" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI UINT NtUserSetWindowStationUser           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWINSTA&nbsp;</td>
          <td class="mdname" nowrap> <em>hWindowStation</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PLUID&nbsp;</td>
          <td class="mdname" nowrap> <em>pLuidUser</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PSID pSidUser&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cbSidUser</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l07110">7110</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d9/d7/winsta_8c-source.html#l01459">_SetWindowStationUser()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00075">BEGINATOMICRECV</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00251">CLEANUPRECV</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00081">ENDATOMICRECV</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00336">MSGERRORCLEANUP</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d5/d9/ob_8h-source.html#l00494">ObDereferenceObject</a>, <a class="el" href="../../d6/d7/ex_8h-source.html#l01209">ProbeForRead</a>, <a class="el" href="../../d3/d0/cttoken_8c-source.html#l00135">Status</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00343">StubExceptionHandler</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, <a class="el" href="../../d0/d9/ntosdef_8h.html#a76a70">UserMode</a>, and <a class="el" href="../../d8/d2/validate_8c-source.html#l00046">ValidateHwinsta()</a>.
<p>
Referenced by <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l01039">SetWindowStationUser()</a>.
<p>
<pre class="fragment"><div>07115 {
07116     <a class="code" href="../../d4/d9/structtagWINDOWSTATION.html">PWINDOWSTATION</a> pwinsta;
07117     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
07118     LUID luid;
07119     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a5">BEGINATOMICRECV</a>(UINT, FALSE);
07120 
07121     <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d7/d3/validate_8c.html#a6">ValidateHwinsta</a>(hwinsta, UserMode, 0, &amp;pwinsta);
07122     <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(Status))
07123         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
07124 
07125     <span class="keywordflow">try</span> {
07126         <a class="code" href="../../d5/d8/ex_8h.html#a11">ProbeForRead</a>(pLuidUser, <span class="keyword">sizeof</span>(*pLuidUser), <span class="keyword">sizeof</span>(DWORD));
07127         luid = *pLuidUser;
07128         <span class="keywordflow">if</span> (ARGUMENT_PRESENT(pSidUser)) {
07129             <a class="code" href="../../d5/d8/ex_8h.html#a11">ProbeForRead</a>(pSidUser, cbSidUser, <span class="keyword">sizeof</span>(DWORD));
07130         }
07131     } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(FALSE)) {
07132         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a44">MSGERRORCLEANUP</a>(0);  <span class="comment">// don't SetLastError for private API</span>
07133     }
07134 
07135     <span class="comment">/*</span>
07136 <span class="comment">     * SetWindowStationUser uses pSidUser in a try block.</span>
07137 <span class="comment">     */</span>
07138 
07139     retval = <a class="code" href="../../d8/d8/winsta_8c.html#a14">_SetWindowStationUser</a>(pwinsta, &amp;luid, pSidUser, cbSidUser);
07140 
07141     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a33">CLEANUPRECV</a>();
07142 
07143     <a class="code" href="../../d4/d0/ob_8h.html#a14">ObDereferenceObject</a>(pwinsta);
07144 
07145     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserSetWindowStationUser"</span>);
07146     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a6">ENDATOMICRECV</a>();
07147 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a136" doxytag="ntuser.h::NtUserSetWindowWord" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI WORD NtUserSetWindowWord           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN int&nbsp;</td>
          <td class="mdname" nowrap> <em>nIndex</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN WORD&nbsp;</td>
          <td class="mdname" nowrap> <em>wNewWord</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06181">6181</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d1/d4/ntuser_2kernel_2getset_8c-source.html#l00133">_SetWindowWord()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00110">BEGINRECV_HWND</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00120">ENDRECV_HWND</a>, and <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>.
<p>
<pre class="fragment"><div>06185 {
06186 
06187     <span class="comment">//</span>
06188     <span class="comment">// N.B. This function has implicit window handle translation. This</span>
06189     <span class="comment">//      operation is performed in the User server API dispatcher.</span>
06190     <span class="comment">//</span>
06191 
06192     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a14">BEGINRECV_HWND</a>(WORD, 0, hwnd);
06193 
06194     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1431">_SetWindowWord</a>(
06195             pwnd,
06196             nIndex,
06197             wNewWord);
06198 
06199     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserSetWindowWord"</span>);
06200     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a15">ENDRECV_HWND</a>();
06201 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a227" doxytag="ntuser.h::NtUserSetWinEventHook" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI HWINEVENTHOOK NtUserSetWinEventHook           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>eventMin</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>eventMax</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN HMODULE&nbsp;</td>
          <td class="mdname" nowrap> <em>hmodWinEventProc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PUNICODE_STRING pstrLib&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN WINEVENTPROC&nbsp;</td>
          <td class="mdname" nowrap> <em>pfnWinEventProc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>idEventProcess</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>idEventThread</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwFlags</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l03414">3414</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d6/d6/kernel_2winable_8c-source.html#l00674">_SetWinEventHook()</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d4/d7/propapi_8h-source.html#l00043">dwFlags</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01512">PtoH</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00345">TESTFLAGS</a>, and <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>.
<p>
Referenced by <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00299">SetWinEventHook()</a>.
<p>
<pre class="fragment"><div>03423 {
03424     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(HWINEVENTHOOK, NULL);
03425 
03426     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a46">TESTFLAGS</a>(dwFlags, WINEVENT_VALID);
03427 
03428     <span class="comment">/*</span>
03429 <span class="comment">     * Probe pstrLib in GetHmodTableIndex().</span>
03430 <span class="comment">     */</span>
03431     retval = (HWINEVENTHOOK)<a class="code" href="../../d5/d7/kernel_2winable_8c.html#a12">_SetWinEventHook</a>(
03432             eventMin,
03433             eventMax,
03434             hmodWinEventProc,
03435             pstrLib,
03436             pfnWinEventProc,
03437             (HANDLE)LongToHandle( idEventProcess ),
03438             idEventThread,
03439             dwFlags);
03440     retval = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a448">PtoH</a>((PVOID)retval);
03441 
03442     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserSetWinEventHook"</span>);
03443     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
03444 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a138" doxytag="ntuser.h::NtUserShowCaret" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserShowCaret           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hwnd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06219">6219</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00410">ValidateHWNDOPT</a>, and <a class="el" href="../../d5/d4/caret_8c-source.html#l00413">zzzShowCaret()</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/editec_8c-source.html#l00402">ECInOutReconversionMode()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02524">ECReleaseEditDC()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01225">ECSetCaretHandler()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l00708">ECSetFont()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l00919">MLChangeSelection()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l03991">MLDrawText()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l03457">MLEditWndProc()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l03274">MLSetFocus()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l00395">SLChangeSelection()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l02520">SLEditWndProc()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l02280">SLPaint()</a>, and <a class="el" href="../../d4/d4/editsl_8c-source.html#l02341">SLSetFocus()</a>.
<p>
<pre class="fragment"><div>06221 {
06222     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwnd;
06223 
06224     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(BOOL, FALSE);
06225 
06226     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a57">ValidateHWNDOPT</a>(pwnd, hwnd);
06227 
06228     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1725">zzzShowCaret</a>(
06229             pwnd);
06230 
06231     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserShowCaret"</span>);
06232     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
06233 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a139" doxytag="ntuser.h::NtUserShowScrollBar" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserShowScrollBar           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN int&nbsp;</td>
          <td class="mdname" nowrap> <em>iBar</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fShow</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06235">6235</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00188">BEGINRECV_HWNDLOCK_ND</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00204">ENDRECV_HWNDLOCK_ND</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00352">LIMITVALUE</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, and <a class="el" href="../../d8/d3/kernel_2sbapi_8c-source.html#l00032">xxxShowScrollBar()</a>.
<p>
Referenced by <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01657">MDIClientWndProcWorker()</a>.
<p>
<pre class="fragment"><div>06239 {
06240 
06241     <span class="comment">//</span>
06242     <span class="comment">// N.B. This function has implicit window translation and thread locking</span>
06243     <span class="comment">//      enabled. These operations are performed in the User server API</span>
06244     <span class="comment">//      dispatcher.</span>
06245     <span class="comment">//</span>
06246 
06247     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a26">BEGINRECV_HWNDLOCK_ND</a>(DWORD, 0, hwnd);
06248 
06249     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a47">LIMITVALUE</a>(iBar, SB_MAX, <span class="stringliteral">"ShowScrollBar"</span>);
06250 
06251     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1760">xxxShowScrollBar</a>(
06252             pwndND,
06253             iBar,
06254             fShow);
06255 
06256     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserShowScrollBar"</span>);
06257     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a27">ENDRECV_HWNDLOCK_ND</a>();
06258 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a141" doxytag="ntuser.h::NtUserShowWindow" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserShowWindow           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN int&nbsp;</td>
          <td class="mdname" nowrap> <em>nCmdShow</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06274">6274</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00188">BEGINRECV_HWNDLOCK_ND</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00204">ENDRECV_HWNDLOCK_ND</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00352">LIMITVALUE</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06584">PUDF_ANIMATE</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06608">TEST_PUDF</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02312">WFINDESTROY</a>, and <a class="el" href="../../d1/d8/showwin_8c-source.html#l00085">xxxShowWindow()</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/winmgrc_8c-source.html#l00810">AnimateWindow()</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l02927">CloseWindow()</a>, <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l01036">DialogBox2()</a>, <a class="el" href="../../d1/d8/dlgbegin_8c-source.html#l00553">InternalCreateDialog()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01657">MDIClientWndProcWorker()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02735">MDICompleteChildCreation()</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l03265">OpenIcon()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00603">UnmaximizeChildWindows()</a>, <a class="el" href="../../d4/d3/comboini_8c-source.html#l00070">xxxCBCreateHandler()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l01719">xxxCBHideListBoxWindow()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l01819">xxxCBShowListBoxWindow()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01237">xxxMDIActivate()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01540">xxxMDIDestroy()</a>, and <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01420">xxxMDINext()</a>.
<p>
<pre class="fragment"><div>06277 {
06278     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a26">BEGINRECV_HWNDLOCK_ND</a>(BOOL, FALSE, hwnd);
06279 
06280     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a47">LIMITVALUE</a>(nCmdShow, SW_MAX, <span class="stringliteral">"ShowWindow"</span>);
06281 
06282     <span class="comment">/*</span>
06283 <span class="comment">     * Let's not allow the window to be shown/hidden once we</span>
06284 <span class="comment">     * started the destruction of the window.</span>
06285 <span class="comment">     */</span>
06286     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwndND, WFINDESTROY)) {
06287         RIPERR1(ERROR_INVALID_PARAMETER,
06288                 RIP_WARNING,
06289                 <span class="stringliteral">"ShowWindow: Window is being destroyed (%#p)"</span>,
06290                 pwndND);
06291         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
06292     }
06293 
06294     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1607">xxxShowWindow</a>(pwndND, nCmdShow | <a class="code" href="../../d4/d1/userk_8h.html#a657">TEST_PUDF</a>(PUDF_ANIMATE));
06295 
06296     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserShowWindow"</span>);
06297     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a27">ENDRECV_HWNDLOCK_ND</a>();
06298 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a140" doxytag="ntuser.h::NtUserShowWindowAsync" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserShowWindowAsync           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN int&nbsp;</td>
          <td class="mdname" nowrap> <em>nCmdShow</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06260">6260</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d1/d8/showwin_8c-source.html#l00025">_ShowWindowAsync()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00188">BEGINRECV_HWNDLOCK_ND</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00204">ENDRECV_HWNDLOCK_ND</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00352">LIMITVALUE</a>, and <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>.
<p>
Referenced by <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00603">UnmaximizeChildWindows()</a>.
<p>
<pre class="fragment"><div>06263 {
06264     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a26">BEGINRECV_HWNDLOCK_ND</a>(BOOL, FALSE, hwnd);
06265 
06266     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a47">LIMITVALUE</a>(nCmdShow, SW_MAX, <span class="stringliteral">"ShowWindowAsync"</span>);
06267 
06268     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1608">_ShowWindowAsync</a>(pwndND, nCmdShow, 0);
06269 
06270     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserShowWindowAsync"</span>);
06271     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a27">ENDRECV_HWNDLOCK_ND</a>();
06272 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a263" doxytag="ntuser.h::NtUserSoundSentry" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI NTSTATUS NtUserSoundSentry           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">VOID&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l07651">7651</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d9/d2/ntuser_2kernel_2access_8c-source.html#l02943">_UserSoundSentryWorker()</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, and <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>.
<p>
Referenced by <a class="el" href="../../d6/d9/exports_8c-source.html#l00024">_UserSoundSentry()</a>.
<p>
<pre class="fragment"><div>07652 {
07653     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(NTSTATUS, STATUS_UNSUCCESSFUL);
07654 
07655     retval = (<a class="code" href="../../d9/d3/access_8h.html#a74">_UserSoundSentryWorker</a>() ?
07656             STATUS_SUCCESS : STATUS_UNSUCCESSFUL);
07657 
07658     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserSoundSentry"</span>);
07659     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
07660 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a24" doxytag="ntuser.h::NtUserSwitchDesktop" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserSwitchDesktop           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HDESK&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hdesk</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l01467">1467</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l02718">tagWINDOWSTATION::dwWSF_Flags</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03289">IS_CURRENT_THREAD_RESTRICTED</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l01539">LogDesktop</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d9/ob_8h-source.html#l00494">ObDereferenceObject</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00058">PtiCurrent</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l02648">tagDESKTOP::rpwinstaParent</a>, <a class="el" href="../../d3/d0/cttoken_8c-source.html#l00135">Status</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l01652">ThreadLockDesktop</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l01664">ThreadUnlockDesktop</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d0/d9/ntosdef_8h.html#a76a70">UserMode</a>, <a class="el" href="../../d8/d2/validate_8c-source.html#l00092">ValidateHdesk()</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l02704">WSF_NOIO</a>, and <a class="el" href="../../d0/d6/desktop_8c-source.html#l03358">xxxSwitchDesktop()</a>.
<p>
<pre class="fragment"><div>01469 {
01470     <a class="code" href="../../d0/d3/structtagDESKTOP.html">PDESKTOP</a> pdesk;
01471     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpdesk;
01472     <a class="code" href="../../d2/d8/structtagTHREADINFO.html">PTHREADINFO</a> ptiCurrent;
01473     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
01474 
01475     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(BOOL, FALSE);
01476 
01477     ptiCurrent = <a class="code" href="../../d4/d1/userk_8h.html#a9">PtiCurrent</a>();
01478 
01479     <span class="comment">/*</span>
01480 <span class="comment">     * Fail this call for restricted threads</span>
01481 <span class="comment">     */</span>
01482     <span class="keywordflow">if</span> (<a class="code" href="../../d4/d1/userk_8h.html#a383">IS_CURRENT_THREAD_RESTRICTED</a>(JOB_OBJECT_UILIMIT_DESKTOP)) {
01483         RIPMSG0(RIP_WARNING, <span class="stringliteral">"NtUserSwitchDesktop failed for restricted thread"</span>);
01484         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
01485     }
01486 
01487     <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d7/d3/validate_8c.html#a7">ValidateHdesk</a>(hdesk, UserMode, DESKTOP_SWITCHDESKTOP, &amp;pdesk);
01488     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(Status)) {
01489         <span class="keywordflow">if</span> (pdesk-&gt;<a class="code" href="../../d0/d3/structtagDESKTOP.html#o3">rpwinstaParent</a>-&gt;<a class="code" href="../../d4/d9/structtagWINDOWSTATION.html#o3">dwWSF_Flags</a> &amp; <a class="code" href="../../d4/d1/userk_8h.html#a316">WSF_NOIO</a>) {
01490             <a class="code" href="../../d4/d1/userk_8h.html#a120">LogDesktop</a>(pdesk, LD_DEREF_VALIDATE_HDESK2, FALSE, (ULONG_PTR)<a class="code" href="../../d4/d1/userk_8h.html#a9">PtiCurrent</a>());
01491             <a class="code" href="../../d4/d0/ob_8h.html#a14">ObDereferenceObject</a>(pdesk);
01492             RIPERR0(ERROR_ACCESS_DENIED, RIP_VERBOSE, <span class="stringliteral">""</span>);
01493             retval = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01494         } <span class="keywordflow">else</span> {
01495             <a class="code" href="../../d4/d1/userk_8h.html#a128">ThreadLockDesktop</a>(ptiCurrent, pdesk, &amp;tlpdesk, LDLT_FN_NTUSERSWITCHDESKTOP);
01496             <a class="code" href="../../d4/d1/userk_8h.html#a120">LogDesktop</a>(pdesk, LD_DEREF_VALIDATE_HDESK3, FALSE, (ULONG_PTR)<a class="code" href="../../d4/d1/userk_8h.html#a9">PtiCurrent</a>());
01497             <a class="code" href="../../d4/d0/ob_8h.html#a14">ObDereferenceObject</a>(pdesk);
01498             retval = <a class="code" href="../../d4/d1/userk_8h.html#a1798">xxxSwitchDesktop</a>(NULL, pdesk, FALSE);
01499             <a class="code" href="../../d4/d1/userk_8h.html#a130">ThreadUnlockDesktop</a>(ptiCurrent, &amp;tlpdesk, LDUT_FN_NTUSERSWITCHDESKTOP);
01500         }
01501     } <span class="keywordflow">else</span>
01502         retval = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01503 
01504     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserSwitchDesktop"</span>);
01505     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
01506 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a40" doxytag="ntuser.h::NtUserSystemParametersInfo" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserSystemParametersInfo           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>wFlag</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN OUT <a class="el" href="../../d0/d5/perfuser_8c.html#a5">LPVOID</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpData</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>flags</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l02400">2400</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d0/d7/halvprnt_8c-source.html#l00031">BYTE</a>, <a class="el" href="../../d4/d5/focusact_8c-source.html#l01056">CanForceForeground()</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00148">CHARALIGN</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00251">CLEANUPRECV</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00147">DATAALIGN</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d1/d3/ex_2alpha_2raisests_8c-source.html#l00157">ExRaiseStatus()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d9/d2/ntuser_2kernel_2access_8c-source.html#l00485">FilterKeys()</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00025">INT</a>, <a class="el" href="../../d1/d0/inc_2user_8h.html#a1120">INTERNALSETHIGHCONTRAST</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03289">IS_CURRENT_THREAD_RESTRICTED</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00410">IS_PTR</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">LPVOID</a>, <a class="el" href="../../d4/d8/arcinst_8c-source.html#l00065">MAX_PATH</a>, <a class="el" href="../../d9/d2/ntuser_2kernel_2access_8c-source.html#l01813">MouseKeys()</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00336">MSGERRORCLEANUP</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00084">PpiCurrent</a>, <a class="el" href="../../d6/d7/ex_8h-source.html#l01431">ProbeAndReadStructure</a>, <a class="el" href="../../d6/d7/ex_8h-source.html#l01417">ProbeAndReadUnicodeString</a>, <a class="el" href="../../d6/d7/ex_8h-source.html#l01209">ProbeForRead</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00612">ProbeForReadUnicodeStringBuffer</a>, <a class="el" href="../../d0/d4/probe_8c-source.html#l00034">ProbeForWrite()</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00158">ProbeForWriteBuffer</a>, <a class="el" href="../../d6/d7/ex_8h-source.html#l01649">ProbeForWriteUlong</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00058">PtiCurrent</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00343">StubExceptionHandler</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l01704">ThreadLockPool</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l01710">ThreadUnlockAndFreePool</a>, <a class="el" href="../../d9/d2/ntuser_2kernel_2access_8c-source.html#l02108">ToggleKeys()</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l05226">UPIsBOOLRange</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l05213">UPIsDWORDRange</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00475">VER40</a>, and <a class="el" href="../../d4/d1/userk_8h.html#a1493">xxxSystemParametersInfo()</a>.
<p>
Referenced by <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00959">SystemParametersInfo()</a>.
<p>
<pre class="fragment"><div>02405 {
02406     UNICODE_STRING strData;
02407     ULONG          ulLength, ulLength2;
02408     <a class="code" href="../../d0/d5/perfuser_8c.html#a5">LPVOID</a>         lpDataSave;
02409     <span class="keyword">union </span>{
02410         <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a>              MouseData[3];
02411         LOGFONTW         LogFont;
02412         MOUSEKEYS        <a class="code" href="../../d8/d3/ntuser_2kernel_2access_8c.html#a36">MouseKeys</a>;
02413         FILTERKEYS       <a class="code" href="../../d8/d3/ntuser_2kernel_2access_8c.html#a16">FilterKeys</a>;
02414         STICKYKEYS       StickyKeys;
02415         TOGGLEKEYS       <a class="code" href="../../d8/d3/ntuser_2kernel_2access_8c.html#a40">ToggleKeys</a>;
02416         SOUNDSENTRY      SoundSentry;
02417         ACCESSTIMEOUT    AccessTimeout;
02418         RECT             <a class="code" href="../../d5/d6/structRect.html">Rect</a>;
02419         ANIMATIONINFO    AnimationInfo;
02420         NONCLIENTMETRICS NonClientMetrics;
02421         MINIMIZEDMETRICS MinimizedMetrics;
02422         ICONMETRICS      IconMetrics;
02423         HKL              hkl;
02424         <a class="code" href="../../d8/d8/structtagINTERNALSETHIGHCONTRAST.html">INTERNALSETHIGHCONTRAST</a>     ihc;
02425         HIGHCONTRAST     hc;
02426         WCHAR            szTemp[<a class="code" href="../../d3/d9/arcinst_8c.html#a6">MAX_PATH</a>];
02427     } CaptureBuffer;
02428     <a class="code" href="../../d2/d8/structtagTHREADINFO.html">PTHREADINFO</a> pti;
02429     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlBuffer;
02430     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fFreeBuffer = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
02431     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fWrite = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
02432 
02433 
02434 
02435 
02436     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(BOOL, FALSE);
02437 
02438     <span class="comment">/*</span>
02439 <span class="comment">     * Prevent restricted processes from setting system</span>
02440 <span class="comment">     * parameters.</span>
02441 <span class="comment">     *</span>
02442 <span class="comment">     * clupu: this is ineficient and temporary. I'll change this</span>
02443 <span class="comment">     * soon !!!</span>
02444 <span class="comment">     */</span>
02445     <span class="keywordflow">if</span> (<a class="code" href="../../d4/d1/userk_8h.html#a383">IS_CURRENT_THREAD_RESTRICTED</a>(JOB_OBJECT_UILIMIT_SYSTEMPARAMETERS)) {
02446 
02447         <span class="keywordflow">switch</span> (wFlag) {
02448         <span class="keywordflow">case</span> SPI_SETBEEP:
02449         <span class="keywordflow">case</span> SPI_SETMOUSE:
02450         <span class="keywordflow">case</span> SPI_SETBORDER:
02451         <span class="keywordflow">case</span> SPI_SETKEYBOARDSPEED:
02452         <span class="keywordflow">case</span> SPI_ICONHORIZONTALSPACING:
02453         <span class="keywordflow">case</span> SPI_SETSCREENSAVETIMEOUT:
02454         <span class="keywordflow">case</span> SPI_SETSCREENSAVEACTIVE:
02455         <span class="keywordflow">case</span> SPI_SETGRIDGRANULARITY:
02456         <span class="keywordflow">case</span> SPI_SETDESKWALLPAPER:
02457         <span class="keywordflow">case</span> SPI_SETDESKPATTERN:
02458         <span class="keywordflow">case</span> SPI_SETKEYBOARDDELAY:
02459         <span class="keywordflow">case</span> SPI_ICONVERTICALSPACING:
02460         <span class="keywordflow">case</span> SPI_SETICONTITLEWRAP:
02461         <span class="keywordflow">case</span> SPI_SETMENUDROPALIGNMENT:
02462         <span class="keywordflow">case</span> SPI_SETDOUBLECLKWIDTH:
02463         <span class="keywordflow">case</span> SPI_SETDOUBLECLKHEIGHT:
02464         <span class="keywordflow">case</span> SPI_SETDOUBLECLICKTIME:
02465         <span class="keywordflow">case</span> SPI_SETMOUSEBUTTONSWAP:
02466         <span class="keywordflow">case</span> SPI_SETICONTITLELOGFONT:
02467         <span class="keywordflow">case</span> SPI_SETFASTTASKSWITCH:
02468         <span class="keywordflow">case</span> SPI_SETDRAGFULLWINDOWS:
02469         <span class="keywordflow">case</span> SPI_SETNONCLIENTMETRICS:
02470         <span class="keywordflow">case</span> SPI_SETMINIMIZEDMETRICS:
02471         <span class="keywordflow">case</span> SPI_SETICONMETRICS:
02472         <span class="keywordflow">case</span> SPI_SETWORKAREA:
02473         <span class="keywordflow">case</span> SPI_SETPENWINDOWS:
02474         <span class="keywordflow">case</span> SPI_SETHIGHCONTRAST:
02475         <span class="keywordflow">case</span> SPI_SETKEYBOARDPREF:
02476         <span class="keywordflow">case</span> SPI_SETSCREENREADER:
02477         <span class="keywordflow">case</span> SPI_SETANIMATION:
02478         <span class="keywordflow">case</span> SPI_SETFONTSMOOTHING:
02479         <span class="keywordflow">case</span> SPI_SETDRAGWIDTH:
02480         <span class="keywordflow">case</span> SPI_SETDRAGHEIGHT:
02481         <span class="keywordflow">case</span> SPI_SETHANDHELD:
02482         <span class="keywordflow">case</span> SPI_SETLOWPOWERTIMEOUT:
02483         <span class="keywordflow">case</span> SPI_SETPOWEROFFTIMEOUT:
02484         <span class="keywordflow">case</span> SPI_SETLOWPOWERACTIVE:
02485         <span class="keywordflow">case</span> SPI_SETPOWEROFFACTIVE:
02486         <span class="keywordflow">case</span> SPI_SETCURSORS:
02487         <span class="keywordflow">case</span> SPI_SETICONS:
02488         <span class="keywordflow">case</span> SPI_SETDEFAULTINPUTLANG:
02489         <span class="keywordflow">case</span> SPI_SETLANGTOGGLE:
02490         <span class="keywordflow">case</span> SPI_SETMOUSETRAILS:
02491         <span class="keywordflow">case</span> SPI_SETSCREENSAVERRUNNING:
02492         <span class="keywordflow">case</span> SPI_SETFILTERKEYS:
02493         <span class="keywordflow">case</span> SPI_SETTOGGLEKEYS:
02494         <span class="keywordflow">case</span> SPI_SETMOUSEKEYS:
02495         <span class="keywordflow">case</span> SPI_SETSHOWSOUNDS:
02496         <span class="keywordflow">case</span> SPI_SETSTICKYKEYS:
02497         <span class="keywordflow">case</span> SPI_SETACCESSTIMEOUT:
02498         <span class="keywordflow">case</span> SPI_SETSOUNDSENTRY:
02499         <span class="keywordflow">case</span> SPI_SETSNAPTODEFBUTTON:
02500         <span class="keywordflow">case</span> SPI_SETMOUSEHOVERWIDTH:
02501         <span class="keywordflow">case</span> SPI_SETMOUSEHOVERHEIGHT:
02502         <span class="keywordflow">case</span> SPI_SETMOUSEHOVERTIME:
02503         <span class="keywordflow">case</span> SPI_SETWHEELSCROLLLINES:
02504         <span class="keywordflow">case</span> SPI_SETMENUSHOWDELAY:
02505         <span class="keywordflow">case</span> SPI_SETSHOWIMEUI:
02506         <span class="keywordflow">case</span> SPI_SETMOUSESPEED:
02507         <span class="keywordflow">case</span> SPI_SETACTIVEWINDOWTRACKING:
02508         <span class="keywordflow">case</span> SPI_SETMENUANIMATION:
02509         <span class="keywordflow">case</span> SPI_SETCOMBOBOXANIMATION:
02510         <span class="keywordflow">case</span> SPI_SETLISTBOXSMOOTHSCROLLING:
02511         <span class="keywordflow">case</span> SPI_SETGRADIENTCAPTIONS:
02512         <span class="keywordflow">case</span> SPI_SETKEYBOARDCUES:
02513         <span class="keywordflow">case</span> SPI_SETACTIVEWNDTRKZORDER:
02514         <span class="keywordflow">case</span> SPI_SETHOTTRACKING:
02515         <span class="keywordflow">case</span> SPI_SETMENUFADE:
02516         <span class="keywordflow">case</span> SPI_SETSELECTIONFADE:
02517         <span class="keywordflow">case</span> SPI_SETTOOLTIPANIMATION:
02518         <span class="keywordflow">case</span> SPI_SETTOOLTIPFADE:
02519         <span class="keywordflow">case</span> SPI_SETFOREGROUNDLOCKTIMEOUT:
02520         <span class="keywordflow">case</span> SPI_SETACTIVEWNDTRKTIMEOUT:
02521         <span class="keywordflow">case</span> SPI_SETFOREGROUNDFLASHCOUNT:
02522             <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
02523             <span class="keywordflow">break</span>;
02524         }
02525     }
02526 
02527     <span class="keywordflow">try</span> {
02528         <span class="keywordflow">switch</span>(wFlag) {
02529 
02530         <span class="keywordflow">case</span> SPI_SETDESKPATTERN:
02531             <span class="comment">/*</span>
02532 <span class="comment">             * If wParam is -1, that means read the new wallpaper from</span>
02533 <span class="comment">             * win.ini. If wParam is not -1, lParam points to the wallpaper</span>
02534 <span class="comment">             * string.</span>
02535 <span class="comment">             */</span>
02536             <span class="keywordflow">if</span> (wParam == (WPARAM)-1)
02537                 <span class="keywordflow">break</span>;
02538 
02539             <span class="comment">/*</span>
02540 <span class="comment">             * SetDeskPattern may take a string in lpData; if lpData</span>
02541 <span class="comment">             * is one of the magic values it obviously is not a string</span>
02542 <span class="comment">             */</span>
02543             <span class="keywordflow">if</span> (lpData == (PVOID)IntToPtr( 0xFFFFFFFF ) || lpData == (PVOID)<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
02544                 <span class="comment">/*</span>
02545 <span class="comment">                 * These are not really magic values, but in order not to break apps</span>
02546 <span class="comment">                 * we have to keep them valid.  wParam =-1 will make lParam be ignored</span>
02547 <span class="comment">                 * MCostea 208416</span>
02548 <span class="comment">                 */</span>
02549                 wParam = -1;
02550                 <span class="keywordflow">break</span>;
02551             }
02552             <span class="keywordflow">goto</span> ProbeString;
02553 
02554         <span class="keywordflow">case</span> SPI_SETDESKWALLPAPER:
02555 
02556             <span class="comment">/*</span>
02557 <span class="comment">             * If the caller passed in (-1) in the wParam, then the</span>
02558 <span class="comment">             * wallpaper-name is to be loaded later.  Otherwise,</span>
02559 <span class="comment">             * they passed in a unicode-string in the lParam.</span>
02560 <span class="comment">             */</span>
02561             <span class="keywordflow">if</span> (wParam == (WPARAM)-1)
02562                 <span class="keywordflow">break</span>;
02563 
02564             <span class="keywordflow">if</span> (((LPWSTR)lpData == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)                 ||
02565                 ((LPWSTR)lpData == SETWALLPAPER_METRICS) ||
02566                 ((LPWSTR)lpData == SETWALLPAPER_DEFAULT)) {
02567                 <span class="keywordflow">break</span>;
02568             }
02569 
02570 ProbeString:
02571 
02572             <span class="comment">/*</span>
02573 <span class="comment">             * Probe and capture the string.  Capture is necessary to</span>
02574 <span class="comment">             * the pointer to be passed directly to the registry routines</span>
02575 <span class="comment">             * which cannot cleanly handle exceptions.</span>
02576 <span class="comment">             */</span>
02577             strData = <a class="code" href="../../d5/d8/ex_8h.html#a26">ProbeAndReadUnicodeString</a>((PUNICODE_STRING)lpData);
02578 <span class="preprocessor">#if defined(_X86_)</span>
02579 <span class="preprocessor"></span>            <a class="code" href="../../d5/d8/ex_8h.html#a11">ProbeForRead</a>(strData.Buffer, strData.Length, <span class="keyword">sizeof</span>(BYTE));
02580 <span class="preprocessor">#else</span>
02581 <span class="preprocessor"></span>            <a class="code" href="../../d5/d8/ex_8h.html#a11">ProbeForRead</a>(strData.Buffer, strData.Length, <span class="keyword">sizeof</span>(WCHAR));
02582 <span class="preprocessor">#endif</span>
02583 <span class="preprocessor"></span>            lpData = UserAllocPoolWithQuota(strData.Length + <span class="keyword">sizeof</span>(WCHAR), TAG_TEXT2);
02584             <span class="keywordflow">if</span> (lpData == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
02585                 <a class="code" href="../../d5/d8/ex_8h.html#a303">ExRaiseStatus</a>(STATUS_NO_MEMORY);
02586             }
02587             pti = <a class="code" href="../../d4/d1/userk_8h.html#a9">PtiCurrent</a>();
02588             <a class="code" href="../../d4/d1/userk_8h.html#a137">ThreadLockPool</a>(pti, lpData, &amp;tlBuffer);
02589             fFreeBuffer = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
02590             RtlCopyMemory(lpData,
02591                           strData.Buffer,
02592                           strData.Length);
02593             ((PWSTR)lpData)[strData.Length / <span class="keyword">sizeof</span>(WCHAR)] = 0;
02594             <span class="keywordflow">break</span>;
02595 
02596         <span class="keywordflow">case</span> SPI_SETMOUSE:
02597             ulLength = <span class="keyword">sizeof</span>(<a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a>) * 3;
02598             <span class="keywordflow">goto</span> ProbeRead;
02599         <span class="keywordflow">case</span> SPI_SETICONTITLELOGFONT:
02600             <span class="keywordflow">if</span> (!ARGUMENT_PRESENT(lpData))
02601                 <span class="keywordflow">break</span>;
02602             ulLength = <span class="keyword">sizeof</span>(LOGFONTW);
02603             <span class="keywordflow">goto</span> ProbeRead;
02604         <span class="keywordflow">case</span> SPI_SETMOUSEKEYS:
02605             ulLength = <span class="keyword">sizeof</span>(MOUSEKEYS);
02606             <span class="keywordflow">goto</span> ProbeRead;
02607         <span class="keywordflow">case</span> SPI_SETFILTERKEYS:
02608             ulLength = <span class="keyword">sizeof</span>(FILTERKEYS);
02609             <span class="keywordflow">goto</span> ProbeRead;
02610         <span class="keywordflow">case</span> SPI_SETSTICKYKEYS:
02611             ulLength = <span class="keyword">sizeof</span>(STICKYKEYS);
02612             <span class="keywordflow">goto</span> ProbeRead;
02613         <span class="keywordflow">case</span> SPI_SETTOGGLEKEYS:
02614             ulLength = <span class="keyword">sizeof</span>(TOGGLEKEYS);
02615             <span class="keywordflow">goto</span> ProbeRead;
02616         <span class="keywordflow">case</span> SPI_SETSOUNDSENTRY:
02617             ulLength = <span class="keyword">sizeof</span>(SOUNDSENTRY);
02618             <span class="keywordflow">goto</span> ProbeRead;
02619         <span class="keywordflow">case</span> SPI_SETACCESSTIMEOUT:
02620             ulLength = <span class="keyword">sizeof</span>(ACCESSTIMEOUT);
02621             <span class="keywordflow">goto</span> ProbeRead;
02622         <span class="keywordflow">case</span> SPI_SETWORKAREA:
02623             ulLength = <span class="keyword">sizeof</span>(RECT);
02624             <span class="keywordflow">goto</span> ProbeRead;
02625         <span class="keywordflow">case</span> SPI_SETANIMATION:
02626             ulLength = <span class="keyword">sizeof</span>(ANIMATIONINFO);
02627             <span class="keywordflow">goto</span> ProbeRead;
02628         <span class="keywordflow">case</span> SPI_SETNONCLIENTMETRICS:
02629             ulLength = <span class="keyword">sizeof</span>(NONCLIENTMETRICS);
02630             <span class="keywordflow">goto</span> ProbeRead;
02631         <span class="keywordflow">case</span> SPI_SETMINIMIZEDMETRICS:
02632             ulLength = <span class="keyword">sizeof</span>(MINIMIZEDMETRICS);
02633             <span class="keywordflow">goto</span> ProbeRead;
02634         <span class="keywordflow">case</span> SPI_SETICONMETRICS:
02635             ulLength = <span class="keyword">sizeof</span>(ICONMETRICS);
02636             <span class="keywordflow">goto</span> ProbeRead;
02637         <span class="keywordflow">case</span> SPI_SETDEFAULTINPUTLANG:
02638             ulLength = <span class="keyword">sizeof</span>(HKL);
02639             <span class="keywordflow">goto</span> ProbeRead;
02640         <span class="keywordflow">case</span> SPI_SETHIGHCONTRAST:
02641             CaptureBuffer.ihc = <a class="code" href="../../d5/d8/ex_8h.html#a27">ProbeAndReadStructure</a>((<a class="code" href="../../d8/d8/structtagINTERNALSETHIGHCONTRAST.html">INTERNALSETHIGHCONTRAST</a> *)lpData, <a class="code" href="../../d8/d8/structtagINTERNALSETHIGHCONTRAST.html">INTERNALSETHIGHCONTRAST</a>);
02642             lpData = &amp;CaptureBuffer.ihc;
02643 
02644             <span class="comment">/*</span>
02645 <span class="comment">             * Now probe High Contrast string -- note that we send a client-side buffer pointer to the routine.</span>
02646 <span class="comment">             */</span>
02647 
02648             <a class="code" href="../../d4/d1/userk_8h.html#a61">ProbeForReadUnicodeStringBuffer</a>(CaptureBuffer.ihc.usDefaultScheme);
02649             <span class="keywordflow">if</span> (CaptureBuffer.ihc.usDefaultScheme.Length == 0) {
02650                 CaptureBuffer.ihc.usDefaultScheme.Buffer = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
02651             }
02652             <span class="keywordflow">break</span>;
02653 
02654             <span class="comment">/*</span>
02655 <span class="comment">             * Probe and capture the data.  Capture is necessary to</span>
02656 <span class="comment">             * allow the pointer to be passed to the worker routines</span>
02657 <span class="comment">             * where exceptions cannot be cleanly handled.</span>
02658 <span class="comment">             */</span>
02659 ProbeRead:
02660 <span class="preprocessor">#if defined(_X86_)</span>
02661 <span class="preprocessor"></span>            <a class="code" href="../../d5/d8/ex_8h.html#a11">ProbeForRead</a>(lpData, ulLength, <span class="keyword">sizeof</span>(BYTE));
02662 <span class="preprocessor">#else</span>
02663 <span class="preprocessor"></span>            <a class="code" href="../../d5/d8/ex_8h.html#a11">ProbeForRead</a>(lpData, ulLength, <span class="keyword">sizeof</span>(DWORD));
02664 <span class="preprocessor">#endif</span>
02665 <span class="preprocessor"></span>            RtlCopyMemory(&amp;CaptureBuffer, lpData, ulLength);
02666             lpData = &amp;CaptureBuffer;
02667             <span class="keywordflow">break</span>;
02668 
02669         <span class="keywordflow">case</span> SPI_ICONHORIZONTALSPACING: <span class="comment">// returns INT</span>
02670         <span class="keywordflow">case</span> SPI_ICONVERTICALSPACING:   <span class="comment">// returns INT</span>
02671             <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a98">IS_PTR</a>(lpData))
02672                 <span class="keywordflow">break</span>;
02673 
02674             <span class="comment">/*</span>
02675 <span class="comment">             * Fall through and probe the data</span>
02676 <span class="comment">             */</span>
02677         <span class="keywordflow">case</span> SPI_GETBEEP:               <span class="comment">// returns BOOL</span>
02678         <span class="keywordflow">case</span> SPI_GETBORDER:             <span class="comment">// returns INT</span>
02679         <span class="keywordflow">case</span> SPI_GETKEYBOARDSPEED:      <span class="comment">// returns DWORD</span>
02680         <span class="keywordflow">case</span> SPI_GETKEYBOARDDELAY:      <span class="comment">// returns INT</span>
02681         <span class="keywordflow">case</span> SPI_GETSCREENSAVETIMEOUT:  <span class="comment">// returns INT</span>
02682         <span class="keywordflow">case</span> SPI_GETLOWPOWERTIMEOUT:    <span class="comment">// returns INT</span>
02683         <span class="keywordflow">case</span> SPI_GETPOWEROFFTIMEOUT:    <span class="comment">// returns INT</span>
02684         <span class="keywordflow">case</span> SPI_GETSCREENSAVEACTIVE:   <span class="comment">// returns BOOL</span>
02685         <span class="keywordflow">case</span> SPI_GETLOWPOWERACTIVE:     <span class="comment">// returns BOOL</span>
02686         <span class="keywordflow">case</span> SPI_GETPOWEROFFACTIVE:     <span class="comment">// returns BOOL</span>
02687         <span class="keywordflow">case</span> SPI_GETGRIDGRANULARITY:    <span class="comment">// returns INT</span>
02688         <span class="keywordflow">case</span> SPI_GETICONTITLEWRAP:      <span class="comment">// returns BOOL</span>
02689         <span class="keywordflow">case</span> SPI_GETMENUDROPALIGNMENT:  <span class="comment">// returns BOOL</span>
02690         <span class="keywordflow">case</span> SPI_GETFASTTASKSWITCH:     <span class="comment">// returns BOOL</span>
02691         <span class="keywordflow">case</span> SPI_GETDRAGFULLWINDOWS:    <span class="comment">// returns INT</span>
02692         <span class="keywordflow">case</span> SPI_GETSHOWSOUNDS:         <span class="comment">// returns BOOL</span>
02693         <span class="keywordflow">case</span> SPI_GETFONTSMOOTHING:      <span class="comment">// returns INT</span>
02694         <span class="keywordflow">case</span> SPI_GETSNAPTODEFBUTTON:    <span class="comment">// returns BOOL</span>
02695         <span class="keywordflow">case</span> SPI_GETKEYBOARDPREF:       <span class="comment">// returns BOOL</span>
02696         <span class="keywordflow">case</span> SPI_GETSCREENREADER:       <span class="comment">// returns BOOL</span>
02697         <span class="keywordflow">case</span> SPI_GETDEFAULTINPUTLANG:
02698         <span class="keywordflow">case</span> SPI_GETMOUSEHOVERWIDTH:
02699         <span class="keywordflow">case</span> SPI_GETMOUSEHOVERHEIGHT:
02700         <span class="keywordflow">case</span> SPI_GETMOUSEHOVERTIME:
02701         <span class="keywordflow">case</span> SPI_GETWHEELSCROLLLINES:
02702         <span class="keywordflow">case</span> SPI_GETMENUSHOWDELAY:
02703         <span class="keywordflow">case</span> SPI_GETMOUSESPEED:
02704         <span class="keywordflow">case</span> SPI_GETSCREENSAVERRUNNING:
02705         <span class="keywordflow">case</span> SPI_GETSHOWIMEUI:
02706             <span class="keywordflow">goto</span> ProbeWriteUlong;
02707 
02708         <span class="keywordflow">case</span> SPI_GETICONTITLELOGFONT:   <span class="comment">// returns LOGFONT</span>
02709             ulLength = <span class="keyword">sizeof</span>(LOGFONT);
02710             <span class="keywordflow">goto</span> ProbeWrite;
02711         <span class="keywordflow">case</span> SPI_GETMOUSE:              <span class="comment">// returns 3 INTs</span>
02712             ulLength = <span class="keyword">sizeof</span>(<a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a>) * 3;
02713             <span class="keywordflow">goto</span> ProbeWrite;
02714         <span class="keywordflow">case</span> SPI_GETFILTERKEYS:         <span class="comment">// returns FILTERKEYS</span>
02715             ulLength = <span class="keyword">sizeof</span>(FILTERKEYS);
02716             <span class="keywordflow">goto</span> ProbeWrite;
02717         <span class="keywordflow">case</span> SPI_GETSTICKYKEYS:         <span class="comment">// returns STICKYKEYS</span>
02718             ulLength = <span class="keyword">sizeof</span>(STICKYKEYS);
02719             <span class="keywordflow">goto</span> ProbeWrite;
02720         <span class="keywordflow">case</span> SPI_GETMOUSEKEYS:          <span class="comment">// returns MOUSEKEYS</span>
02721             ulLength = <span class="keyword">sizeof</span>(MOUSEKEYS);
02722             <span class="keywordflow">goto</span> ProbeWrite;
02723         <span class="keywordflow">case</span> SPI_GETTOGGLEKEYS:         <span class="comment">// returns TOGGLEKEYS</span>
02724             ulLength = <span class="keyword">sizeof</span>(TOGGLEKEYS);
02725             <span class="keywordflow">goto</span> ProbeWrite;
02726         <span class="keywordflow">case</span> SPI_GETSOUNDSENTRY:        <span class="comment">// returns SOUNDSENTRY</span>
02727             ulLength = <span class="keyword">sizeof</span>(SOUNDSENTRY);
02728             <span class="keywordflow">goto</span> ProbeWrite;
02729         <span class="keywordflow">case</span> SPI_GETACCESSTIMEOUT:      <span class="comment">// returns ACCESSTIMEOUT</span>
02730             ulLength = <span class="keyword">sizeof</span>(ACCESSTIMEOUT);
02731             <span class="keywordflow">goto</span> ProbeWrite;
02732         <span class="keywordflow">case</span> SPI_GETANIMATION:          <span class="comment">// returns ANIMATIONINFO</span>
02733             ulLength = <span class="keyword">sizeof</span>(ANIMATIONINFO);
02734             <span class="keywordflow">goto</span> ProbeWrite;
02735         <span class="keywordflow">case</span> SPI_GETNONCLIENTMETRICS:   <span class="comment">// returns NONCLIENTMETRICS</span>
02736             ulLength = <span class="keyword">sizeof</span>(NONCLIENTMETRICS);
02737             <span class="keywordflow">goto</span> ProbeWrite;
02738         <span class="keywordflow">case</span> SPI_GETMINIMIZEDMETRICS:   <span class="comment">// returns MINIMIZEDMETRICS</span>
02739             ulLength = <span class="keyword">sizeof</span>(MINIMIZEDMETRICS);
02740             <span class="keywordflow">goto</span> ProbeWrite;
02741         <span class="keywordflow">case</span> SPI_GETICONMETRICS:        <span class="comment">// returns ICONMETRICS</span>
02742             ulLength = <span class="keyword">sizeof</span>(ICONMETRICS);
02743             <span class="keywordflow">goto</span> ProbeWrite;
02744 
02745         <span class="keywordflow">case</span> SPI_GETHIGHCONTRAST:       <span class="comment">// returns HIGHCONTRAST</span>
02746             ulLength = <span class="keyword">sizeof</span>(HIGHCONTRASTW);
02747             <a class="code" href="../../d5/d8/ex_8h.html#a259">ProbeForWrite</a>(lpData, ulLength, DATAALIGN);
02748             lpDataSave = lpData;
02749             CaptureBuffer.hc = *((LPHIGHCONTRAST)lpData);
02750             lpData = &amp;CaptureBuffer.hc;
02751 
02752             <span class="comment">/*</span>
02753 <span class="comment">             * now probe string address</span>
02754 <span class="comment">             */</span>
02755 
02756             ulLength2 = MAX_SCHEME_NAME_SIZE * <span class="keyword">sizeof</span>(WCHAR);
02757 
02758             <a class="code" href="../../d5/d8/ex_8h.html#a259">ProbeForWrite</a>(((LPHIGHCONTRAST)lpData)-&gt;lpszDefaultScheme, ulLength2, CHARALIGN);
02759             fWrite = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
02760             <span class="keywordflow">break</span>;
02761         <span class="keywordflow">case</span> SPI_GETWORKAREA:           <span class="comment">// returns RECT</span>
02762             ulLength = <span class="keyword">sizeof</span>(RECT);
02763             <span class="keywordflow">goto</span> ProbeWrite;
02764 
02765 
02766         <span class="comment">/*</span>
02767 <span class="comment">         * Bug 257718 - joejo</span>
02768 <span class="comment">         * Add SPI_GETDESKWALLPAPER to SystemParametersInfo</span>
02769 <span class="comment">         */</span>
02770         <span class="keywordflow">case</span> SPI_GETDESKWALLPAPER:
02771             lpDataSave = lpData;
02772             lpData = CaptureBuffer.szTemp;
02773             <a class="code" href="../../d4/d1/userk_8h.html#a25">ProbeForWriteBuffer</a>((PWSTR)lpDataSave, wParam, CHARALIGN);
02774             wParam = (wParam &lt; <a class="code" href="../../d3/d9/arcinst_8c.html#a6">MAX_PATH</a>) ? wParam : <a class="code" href="../../d3/d9/arcinst_8c.html#a6">MAX_PATH</a>;
02775             ulLength = wParam * <span class="keyword">sizeof</span>(WCHAR);
02776             fWrite = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
02777             <span class="keywordflow">break</span>;
02778 
02779         <span class="keywordflow">default</span>:
02780             <span class="keywordflow">if</span> (wFlag &lt; SPI_MAX) {
02781                 <span class="keywordflow">break</span>;
02782             } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d1/userk_8h.html#a556">UPIsBOOLRange</a>(wFlag)
02783                     &amp;&amp; !<a class="code" href="../../d4/d1/userk_8h.html#a554">UPIsDWORDRange</a>(wFlag)) {
02784 
02785                 RIPERR1(ERROR_INVALID_PARAMETER, RIP_WARNING, <span class="stringliteral">"NtUserSystemParametersInfo: Invalid SPI_:%#lx"</span>, wFlag);
02786                 retval = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
02787                 <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a44">MSGERRORCLEANUP</a>(0);
02788             }
02789 
02790             <span class="comment">/*</span>
02791 <span class="comment">             * Let's enforce this or this parameter is gone for good.</span>
02792 <span class="comment">             */</span>
02793             <span class="keywordflow">if</span> (wParam != 0) {
02794                 <span class="comment">/*</span>
02795 <span class="comment">                 * Too late, Winstone98 is alreay using it (incorrectly).</span>
02796 <span class="comment">                 * Bummer, this has never been shipped and it's hacked already</span>
02797 <span class="comment">                 * Allow a special case to go through</span>
02798 <span class="comment">                 */</span>
02799                 <span class="keywordflow">if</span> ((<a class="code" href="../../d4/d1/userk_8h.html#a9">PtiCurrent</a>()-&gt;dwExpWinVer &gt; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a101">VER40</a>)
02800                         || (wFlag != SPI_SETUIEFFECTS)
02801                         || (wParam != 1)) {
02802                     RIPERR1(ERROR_INVALID_PARAMETER, RIP_WARNING, <span class="stringliteral">"NtUserSystemParametersInfo: uiParam must be zero for SPI %#lx"</span>, wFlag);
02803                     retval = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
02804                     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a44">MSGERRORCLEANUP</a>(0);
02805                 }
02806             }
02807 
02808             UserAssert(wFlag &amp; SPIF_RANGETYPEMASK);
02809 
02810             <span class="keywordflow">if</span> (wFlag &amp; SPIF_SET) {
02811                 <span class="comment">/*</span>
02812 <span class="comment">                 * If your dword data needs to be validated (i.e, range, value),</span>
02813 <span class="comment">                 *  switch here on wFlag and do it here</span>
02814 <span class="comment">                 */</span>
02815                 <span class="keywordflow">switch</span> (wFlag) {
02816                     <span class="keywordflow">case</span> SPI_SETFOREGROUNDLOCKTIMEOUT:
02817                         <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d1/userk_8h.html#a1663">CanForceForeground</a>(<a class="code" href="../../d4/d1/userk_8h.html#a16">PpiCurrent</a>())) {
02818                             RIPERR0(ERROR_ACCESS_DENIED, RIP_VERBOSE, <span class="stringliteral">""</span>);
02819                             retval = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
02820                             <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a44">MSGERRORCLEANUP</a>(0);
02821                         }
02822                         <span class="keywordflow">break</span>;
02823                 }
02824 
02825             } <span class="keywordflow">else</span> { <span class="comment">/* if (wFlag &amp; SPIF_SET) */</span>
02826 ProbeWriteUlong:
02827                 ulLength = <span class="keyword">sizeof</span>(ULONG);
02828                 lpDataSave = lpData;
02829                 lpData = &amp;CaptureBuffer;
02830                 <a class="code" href="../../d5/d8/ex_8h.html#a40">ProbeForWriteUlong</a>((PULONG)lpDataSave);
02831                 fWrite = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
02832             }
02833             <span class="keywordflow">break</span>;
02834 
02835             <span class="comment">/*</span>
02836 <span class="comment">             * Probe the data.  wParam contains the length</span>
02837 <span class="comment">             */</span>
02838 ProbeWrite:
02839             lpDataSave = lpData;
02840             lpData = &amp;CaptureBuffer;
02841             <a class="code" href="../../d5/d8/ex_8h.html#a259">ProbeForWrite</a>(lpDataSave, ulLength, DATAALIGN);
02842             fWrite = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
02843             <span class="comment">/*</span>
02844 <span class="comment">             * Copy the first DWORD of the buffer.  This will make sure that</span>
02845 <span class="comment">             * the cbSize parameter of some structures gets copied.</span>
02846 <span class="comment">             */</span>
02847 
02848             UserAssert(ulLength &gt;= <span class="keyword">sizeof</span>(DWORD));
02849             *(LPDWORD)lpData=*(LPDWORD)lpDataSave;
02850         }
02851     } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(TRUE)) {
02852         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a44">MSGERRORCLEANUP</a>(0);
02853     }
02854 
02855    retval = <a class="code" href="../../d4/d1/userk_8h.html#a1493">xxxSystemParametersInfo</a>(wFlag, wParam, lpData, flags);
02856 
02857    <span class="comment">/*</span>
02858 <span class="comment">     * Copy out any data we need to.</span>
02859 <span class="comment">     */</span>
02860     <span class="keywordflow">if</span> (fWrite) {
02861         <span class="keywordflow">try</span> {
02862             RtlCopyMemory(lpDataSave, lpData, ulLength);
02863         } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(TRUE)) {
02864             <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a44">MSGERRORCLEANUP</a>(0);
02865         }
02866     }
02867 
02868     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a33">CLEANUPRECV</a>();
02869     <span class="keywordflow">if</span> (fFreeBuffer)
02870         <a class="code" href="../../d4/d1/userk_8h.html#a139">ThreadUnlockAndFreePool</a>(pti, &amp;tlBuffer);
02871 
02872     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserSystemParametersInfo"</span>);
02873     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
02874 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a186" doxytag="ntuser.h::NtUserTestForInteractiveUser" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI NTSTATUS NtUserTestForInteractiveUser           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PLUID&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pluidCaller</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l07662">7662</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00094">BEGINRECV_SHARED</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00099">ENDRECV_SHARED</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d6/d7/ex_8h-source.html#l01431">ProbeAndReadStructure</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00343">StubExceptionHandler</a>, <a class="el" href="../../d8/d4/w32_2ntuser_2kernel_2security_8c-source.html#l00255">TestForInteractiveUser()</a>, and <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>.
<p>
Referenced by <a class="el" href="../../d6/d9/exports_8c-source.html#l00045">_UserTestTokenForInteractive()</a>.
<p>
<pre class="fragment"><div>07664 {
07665     LUID luidCaller;
07666 
07667     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a9">BEGINRECV_SHARED</a>(NTSTATUS, STATUS_UNSUCCESSFUL);
07668 
07669     <span class="comment">/*</span>
07670 <span class="comment">     * Probe arguments</span>
07671 <span class="comment">     */</span>
07672     <span class="keywordflow">try</span> {
07673         luidCaller = <a class="code" href="../../d5/d8/ex_8h.html#a27">ProbeAndReadStructure</a>(pluidCaller, LUID);
07674     } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(FALSE)) {
07675         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
07676     }
07677 
07678     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1277">TestForInteractiveUser</a>(&amp;luidCaller);
07679 
07680     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserTestForInteractiveUser"</span>);
07681     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a10">ENDRECV_SHARED</a>();
07682 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a83" doxytag="ntuser.h::NtUserThunkedMenuInfo" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserThunkedMenuInfo           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HMENU&nbsp;</td>
          <td class="mdname" nowrap> <em>hMenu</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN LPCMENUINFO&nbsp;</td>
          <td class="mdname" nowrap> <em>lpmi</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04730">4730</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00272">ProbeAndReadMenuInfo</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00343">StubExceptionHandler</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00362">ThreadLock</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00366">ThreadUnlock</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00452">ValidateHMENUMODIFY</a>, and <a class="el" href="../../d4/d1/mnchange_8c-source.html#l00204">xxxSetMenuInfo()</a>.
<p>
Referenced by <a class="el" href="../../d8/d6/menuc_8c-source.html#l00115">SetMenuInfo()</a>.
<p>
<pre class="fragment"><div>04733 {
04734     <a class="code" href="../../d1/d1/structtagMENU.html">PMENU</a> pmenu;
04735     MENUINFO mi;
04736     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpmenu;
04737 
04738     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(BOOL, FALSE);
04739 
04740     <span class="comment">/*</span>
04741 <span class="comment">     * Probe arguments</span>
04742 <span class="comment">     */</span>
04743     <span class="keywordflow">try</span> {
04744         mi = <a class="code" href="../../d4/d1/userk_8h.html#a37">ProbeAndReadMenuInfo</a>(lpmi);
04745     } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(TRUE)) {
04746         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
04747     }
04748 
04749     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a62">ValidateHMENUMODIFY</a>(pmenu, hMenu);
04750 
04751     <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(pmenu, &amp;tlpmenu);
04752     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1596">xxxSetMenuInfo</a>(pmenu, &amp;mi);
04753     <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpmenu);
04754 
04755     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserThunkedMenuInfo"</span>);
04756     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
04757 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a82" doxytag="ntuser.h::NtUserThunkedMenuItemInfo" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserThunkedMenuItemInfo           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HMENU&nbsp;</td>
          <td class="mdname" nowrap> <em>hMenu</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>nPosition</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fByPosition</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fInsert</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN LPMENUITEMINFOW&nbsp;</td>
          <td class="mdname" nowrap> <em>lpmii</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PUNICODE_STRING pstrItem&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04663">4663</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00259">ProbeAndReadMenuItem</a>, <a class="el" href="../../d6/d7/ex_8h-source.html#l01417">ProbeAndReadUnicodeString</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00612">ProbeForReadUnicodeStringBuffer</a>, <a class="el" href="../../d3/d6/string_8c-source.html#l00148">RtlInitUnicodeString()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00343">StubExceptionHandler</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00362">ThreadLock</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00366">ThreadUnlock</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00452">ValidateHMENUMODIFY</a>, <a class="el" href="../../d4/d1/mnchange_8c-source.html#l00323">xxxInsertMenuItem()</a>, and <a class="el" href="../../d4/d1/mnchange_8c-source.html#l00146">xxxSetMenuItemInfo()</a>.
<p>
Referenced by <a class="el" href="../../d8/d6/menuc_8c-source.html#l00354">CheckMenuRadioItem()</a>, <a class="el" href="../../d0/d8/clmenu_8c-source.html#l00176">MenuLoadChicagoTemplates()</a>, <a class="el" href="../../d0/d8/clmenu_8c-source.html#l00029">MenuLoadWinTemplates()</a>, and <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00377">ThunkedMenuItemInfo()</a>.
<p>
<pre class="fragment"><div>04670 {
04671     <a class="code" href="../../d1/d1/structtagMENU.html">PMENU</a> pmenu;
04672     MENUITEMINFO mii;
04673     UNICODE_STRING strItem;
04674     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpmenu;
04675 
04676     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(BOOL, FALSE);
04677 
04678     <span class="comment">/*</span>
04679 <span class="comment">     * Probe arguments</span>
04680 <span class="comment">     * No need to SetLastError because lpmii always the address of</span>
04681 <span class="comment">     * local stack structure in USER code, not an application address.</span>
04682 <span class="comment">     */</span>
04683     <span class="keywordflow">try</span> {
04684         mii = <a class="code" href="../../d4/d1/userk_8h.html#a36">ProbeAndReadMenuItem</a>(lpmii);
04685 
04686         <span class="keywordflow">if</span> (ARGUMENT_PRESENT(pstrItem)) {
04687             strItem = <a class="code" href="../../d5/d8/ex_8h.html#a26">ProbeAndReadUnicodeString</a>(pstrItem);
04688             <a class="code" href="../../d4/d1/userk_8h.html#a61">ProbeForReadUnicodeStringBuffer</a>(strItem);
04689         } <span class="keywordflow">else</span> {
04690             <a class="code" href="../../d2/d7/string_8c.html#a7">RtlInitUnicodeString</a>(&amp;strItem, NULL);
04691         }
04692     } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(FALSE)) {
04693         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
04694     }
04695 
04696     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a62">ValidateHMENUMODIFY</a>(pmenu, hMenu);
04697 
04698     <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(pmenu, &amp;tlpmenu);
04699     <span class="comment">/*</span>
04700 <span class="comment">     * These routines only use the buffer in a try/except (actually in</span>
04701 <span class="comment">     * xxxSetLPITEMInfo).</span>
04702 <span class="comment">     */</span>
04703     <span class="keywordflow">if</span> (fInsert) {
04704         retval = <a class="code" href="../../d4/d1/userk_8h.html#a1593">xxxInsertMenuItem</a>(
04705                 pmenu,
04706                 nPosition,
04707                 fByPosition,
04708                 &amp;mii,
04709                 &amp;strItem);
04710     } <span class="keywordflow">else</span> {
04711         retval = <a class="code" href="../../d4/d1/userk_8h.html#a1590">xxxSetMenuItemInfo</a>(
04712                 pmenu,
04713                 nPosition,
04714                 fByPosition,
04715                 &amp;mii,
04716                 &amp;strItem);
04717     }
04718     <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpmenu);
04719 
04720     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserThunkedMenuItemInfo"</span>);
04721     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
04722 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a164" doxytag="ntuser.h::NtUserToUnicodeEx" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI int NtUserToUnicodeEx           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>wVirtKey</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>wScanCode</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN CONST <a class="el" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>lpKeyState</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT LPWSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>lpszBuff</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN int&nbsp;</td>
          <td class="mdname" nowrap> <em>cchBuff</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>wFlags</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN HKL&nbsp;</td>
          <td class="mdname" nowrap> <em>hKeyboardLayout</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06953">6953</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d0/d7/halvprnt_8c-source.html#l00031">BYTE</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00148">CHARALIGN</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00251">CLEANUPRECV</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d1/d3/ex_2alpha_2raisests_8c-source.html#l00157">ExRaiseStatus()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00336">MSGERRORCLEANUP</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d6/d7/ex_8h-source.html#l01209">ProbeForRead</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00158">ProbeForWriteBuffer</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00058">PtiCurrent</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00343">StubExceptionHandler</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l01704">ThreadLockPool</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l01710">ThreadUnlockAndFreePool</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d3/d3/tounicod_8c-source.html#l00040">xxxToUnicodeEx()</a>.
<p>
Referenced by <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00946">ToUnicode()</a>, and <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00973">ToUnicodeEx()</a>.
<p>
<pre class="fragment"><div>06961 {
06962     <a class="code" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a> KeyState[256];
06963     WCHAR wcBuff[4];
06964     LPWSTR pwszBuffK;
06965     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> bAlloc = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
06966     <a class="code" href="../../d2/d8/structtagTHREADINFO.html">PTHREADINFO</a> ptiCurrent;
06967     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlInput;
06968 
06969     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(<span class="keywordtype">int</span>, 0);
06970 
06971     <span class="keywordflow">if</span> (cchBuff &lt;= 0) {
06972         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(ERROR_INVALID_PARAMETER);
06973     }
06974 
06975     <span class="comment">/*</span>
06976 <span class="comment">     * Probe arguments</span>
06977 <span class="comment">     */</span>
06978     <span class="keywordflow">try</span> {
06979         <a class="code" href="../../d5/d8/ex_8h.html#a11">ProbeForRead</a>(lpKeyState, 256, <span class="keyword">sizeof</span>(BYTE));
06980         RtlCopyMemory(&amp;KeyState, lpKeyState, 256);
06981         <a class="code" href="../../d4/d1/userk_8h.html#a25">ProbeForWriteBuffer</a>(pwszBuff, cchBuff, CHARALIGN);
06982         <span class="keywordflow">if</span> (cchBuff &lt; 4) {
06983             pwszBuffK = wcBuff;
06984         }<span class="keywordflow">else</span> {
06985             pwszBuffK = UserAllocPoolWithQuota(cchBuff * <span class="keyword">sizeof</span>(WCHAR), TAG_UNICODEBUFFER);
06986             <span class="keywordflow">if</span> (pwszBuffK == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
06987                 <a class="code" href="../../d5/d8/ex_8h.html#a303">ExRaiseStatus</a>(STATUS_NO_MEMORY);
06988             }
06989             bAlloc = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
06990             ptiCurrent = <a class="code" href="../../d4/d1/userk_8h.html#a9">PtiCurrent</a>();
06991             <a class="code" href="../../d4/d1/userk_8h.html#a137">ThreadLockPool</a>(ptiCurrent, pwszBuffK, &amp;tlInput);
06992         }
06993     } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(TRUE)) {
06994         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
06995     }
06996 
06997     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1658">xxxToUnicodeEx</a>(
06998                 wVirtKey,
06999                 wScanCode,
07000                 KeyState,
07001                 pwszBuffK,
07002                 cchBuff,
07003                 wFlags,
07004                 hKeyboardLayout);
07005 
07006     <span class="keywordflow">try</span> {
07007         RtlCopyMemory(pwszBuff, pwszBuffK, cchBuff*<span class="keyword">sizeof</span>(WCHAR));
07008     } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(TRUE)) {
07009         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a44">MSGERRORCLEANUP</a>(0);
07010     }
07011 
07012     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a33">CLEANUPRECV</a>();
07013 
07014     <span class="keywordflow">if</span> (bAlloc) {
07015         <a class="code" href="../../d4/d1/userk_8h.html#a139">ThreadUnlockAndFreePool</a>(ptiCurrent, &amp;tlInput);
07016     }
07017 
07018     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserToUnicodeEx"</span>);
07019     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
07020 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a142" doxytag="ntuser.h::NtUserTrackMouseEvent" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserTrackMouseEvent           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN OUT LPTRACKMOUSEEVENT&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>lpTME</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06300">6300</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00523">ProbeAndReadTrackMouseEvent</a>, <a class="el" href="../../d6/d2/ntuser_2kernel_2input_8c-source.html#l02679">QueryTrackMouseEvent()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00343">StubExceptionHandler</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00345">TESTFLAGS</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d6/d2/ntuser_2kernel_2input_8c-source.html#l02725">TrackMouseEvent()</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
<pre class="fragment"><div>06302 {
06303     TRACKMOUSEEVENT tme;
06304 
06305     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(BOOL, FALSE);
06306 
06307     <span class="comment">/*</span>
06308 <span class="comment">     * Probe arguments</span>
06309 <span class="comment">     */</span>
06310     <span class="keywordflow">try</span> {
06311         tme = <a class="code" href="../../d4/d1/userk_8h.html#a55">ProbeAndReadTrackMouseEvent</a>(lpTME);
06312 
06313         <span class="keywordflow">if</span> (tme.cbSize != <span class="keyword">sizeof</span>(tme)) {
06314             RIPERR1(ERROR_INVALID_PARAMETER, RIP_WARNING, <span class="stringliteral">"TrackMouseEvent: invalid size %lX"</span>, tme.cbSize);
06315             <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
06316         }
06317 
06318         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a46">TESTFLAGS</a>(tme.dwFlags, TME_VALID);
06319 
06320     } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(TRUE)) {
06321         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
06322     }
06323 
06324     <span class="keywordflow">if</span> (tme.dwFlags &amp; TME_QUERY) {
06325         retval = <a class="code" href="../../d4/d1/userk_8h.html#a1129">QueryTrackMouseEvent</a>(&amp;tme);
06326         <span class="keywordflow">try</span> {
06327             RtlCopyMemory(lpTME, &amp;tme, <span class="keyword">sizeof</span>(tme));
06328         } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(TRUE)) {
06329             <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
06330         }
06331     } <span class="keywordflow">else</span> {
06332         retval = <a class="code" href="../../d5/d3/ntuser_2kernel_2input_8c.html#a47">TrackMouseEvent</a>(&amp;tme);
06333     }
06334 
06335     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserTrackMouseEvent"</span>);
06336     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
06337 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a143" doxytag="ntuser.h::NtUserTrackPopupMenuEx" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserTrackPopupMenuEx           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HMENU&nbsp;</td>
          <td class="mdname" nowrap> <em>hMenu</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>uFlags</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN int&nbsp;</td>
          <td class="mdname" nowrap> <em>x</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN int&nbsp;</td>
          <td class="mdname" nowrap> <em>y</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN CONST TPMPARAMS *pparamst&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06339">6339</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00251">CLEANUPRECV</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00336">MSGERRORCLEANUP</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00298">ProbeAndReadPopupParams</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00058">PtiCurrent</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00343">StubExceptionHandler</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00345">TESTFLAGS</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00365">ThreadLockAlwaysWithPti</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00366">ThreadUnlock</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00448">ValidateHMENU</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00399">ValidateHWND</a>, and <a class="el" href="../../d3/d2/mnpopup_8c-source.html#l00052">xxxTrackPopupMenuEx()</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/editec_8c-source.html#l00548">ECMenu()</a>, and <a class="el" href="../../d8/d6/menuc_8c-source.html#l00246">TrackPopupMenu()</a>.
<p>
<pre class="fragment"><div>06346 {
06347     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwnd;
06348     <a class="code" href="../../d1/d1/structtagMENU.html">PMENU</a> pmenu;
06349     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpwnd;
06350     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpmenu;
06351     <a class="code" href="../../d2/d8/structtagTHREADINFO.html">PTHREADINFO</a> ptiCurrent;
06352     TPMPARAMS paramst;
06353 
06354     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(BOOL, FALSE);
06355 
06356     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a46">TESTFLAGS</a>(uFlags, TPM_VALID);
06357 
06358     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a61">ValidateHMENU</a>(pmenu, hMenu);
06359     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a55">ValidateHWND</a>(pwnd, hwnd);
06360 
06361     ptiCurrent = <a class="code" href="../../d4/d1/userk_8h.html#a9">PtiCurrent</a>();
06362     <a class="code" href="../../d6/d0/usercli_8h.html#a39">ThreadLockAlwaysWithPti</a>(ptiCurrent, pwnd, &amp;tlpwnd);
06363     <a class="code" href="../../d6/d0/usercli_8h.html#a39">ThreadLockAlwaysWithPti</a>(ptiCurrent, pmenu, &amp;tlpmenu);
06364 
06365     <span class="comment">/*</span>
06366 <span class="comment">     * Probe arguments</span>
06367 <span class="comment">     */</span>
06368     <span class="keywordflow">try</span> {
06369         <span class="keywordflow">if</span> (ARGUMENT_PRESENT(pparamst)) {
06370             paramst = <a class="code" href="../../d4/d1/userk_8h.html#a39">ProbeAndReadPopupParams</a>(pparamst);
06371             pparamst = &amp;paramst;
06372         }
06373 
06374     } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(TRUE)) {
06375         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a44">MSGERRORCLEANUP</a>(0);
06376     }
06377     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1597">xxxTrackPopupMenuEx</a>(
06378                 pmenu,
06379                 uFlags,
06380                 x,
06381                 y,
06382                 pwnd,
06383                 pparamst);
06384 
06385     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a33">CLEANUPRECV</a>();
06386 
06387     <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpmenu);
06388     <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwnd);
06389 
06390     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserTrackPopupMenuEx"</span>);
06391     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
06392 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a35" doxytag="ntuser.h::NtUserTranslateAccelerator" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI int NtUserTranslateAccelerator           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN HACCEL&nbsp;</td>
          <td class="mdname" nowrap> <em>hAccTable</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN LPMSG&nbsp;</td>
          <td class="mdname" nowrap> <em>lpMsg</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l01991">1991</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d3/d0/userexts_8c-source.html#l01830">msg</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00220">ProbeAndReadMessage</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00058">PtiCurrent</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00343">StubExceptionHandler</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00365">ThreadLockAlwaysWithPti</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00366">ThreadUnlock</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00460">ValidateHACCEL</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00395">ValidateHWNDNoRIP</a>, and <a class="el" href="../../d2/d1/mnaccel_8c-source.html#l00251">xxxTranslateAccelerator()</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/client_8c-source.html#l00225">TranslateAcceleratorA()</a>, and <a class="el" href="../../d4/d7/client_8c-source.html#l00195">TranslateAcceleratorW()</a>.
<p>
<pre class="fragment"><div>01995 {
01996     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwnd;
01997     <a class="code" href="../../d0/d8/structtagACCELTABLE.html">LPACCELTABLE</a> pat;
01998     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpwnd;
01999     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpat;
02000     <a class="code" href="../../d2/d8/structtagTHREADINFO.html">PTHREADINFO</a> ptiCurrent;
02001     MSG <a class="code" href="../../d2/d1/userexts_8c.html#a129">msg</a>;
02002 
02003     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(<span class="keywordtype">int</span>, 0);
02004 
02005     <span class="comment">/*</span>
02006 <span class="comment">     * Probe arguments</span>
02007 <span class="comment">     */</span>
02008     <span class="keywordflow">try</span> {
02009         <a class="code" href="../../d2/d1/userexts_8c.html#a129">msg</a> = <a class="code" href="../../d4/d1/userk_8h.html#a33">ProbeAndReadMessage</a>(lpmsg);
02010     } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(FALSE)) {
02011         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
02012     }
02013 
02014     <span class="comment">/*</span>
02015 <span class="comment">     * This is called within a message loop. If the window gets destroyed,</span>
02016 <span class="comment">     * there still may be other messages in the queue that get returned</span>
02017 <span class="comment">     * after the window is destroyed. The app will call TranslateAccelerator()</span>
02018 <span class="comment">     * on every one of these, causing RIPs.... Make it nice so it just</span>
02019 <span class="comment">     * returns FALSE.</span>
02020 <span class="comment">     */</span>
02021     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a54">ValidateHWNDNoRIP</a>(pwnd, hwnd);
02022     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a63">ValidateHACCEL</a>(pat, haccel);
02023 
02024     ptiCurrent = <a class="code" href="../../d4/d1/userk_8h.html#a9">PtiCurrent</a>();
02025     <a class="code" href="../../d6/d0/usercli_8h.html#a39">ThreadLockAlwaysWithPti</a>(ptiCurrent, pwnd, &amp;tlpwnd);
02026     <a class="code" href="../../d6/d0/usercli_8h.html#a39">ThreadLockAlwaysWithPti</a>(ptiCurrent, pat, &amp;tlpat);
02027 
02028     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1585">xxxTranslateAccelerator</a>(
02029             pwnd,
02030             pat,
02031             &amp;msg);
02032 
02033     <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpat);
02034     <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwnd);
02035 
02036     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserTranslateAccelerator"</span>);
02037     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
02038 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a144" doxytag="ntuser.h::NtUserTranslateMessage" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserTranslateMessage           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN CONST MSG *&nbsp;</td>
          <td class="mdname" nowrap> <em>lpMsg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>flags</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06394">6394</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d3/d0/userexts_8c-source.html#l01830">msg</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00220">ProbeAndReadMessage</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00343">StubExceptionHandler</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00120">ValidateHwnd</a>, and <a class="el" href="../../d0/d9/keyconv_8c-source.html#l00028">xxxTranslateMessage()</a>.
<p>
Referenced by <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00851">TranslateMessageEx()</a>.
<p>
<pre class="fragment"><div>06397 {
06398     MSG <a class="code" href="../../d2/d1/userexts_8c.html#a129">msg</a>;
06399 
06400     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(BOOL, FALSE);
06401 
06402     <span class="comment">/*</span>
06403 <span class="comment">     * Probe arguments</span>
06404 <span class="comment">     */</span>
06405     <span class="keywordflow">try</span> {
06406         <a class="code" href="../../d2/d1/userexts_8c.html#a129">msg</a> = <a class="code" href="../../d4/d1/userk_8h.html#a33">ProbeAndReadMessage</a>(lpMsg);
06407     } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(TRUE)) {
06408         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
06409     }
06410 
06411     <span class="keywordflow">if</span> (<a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(<a class="code" href="../../d2/d1/userexts_8c.html#a129">msg</a>.hwnd) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
06412         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
06413     }
06414 
06415     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1646">xxxTranslateMessage</a>(
06416             &amp;msg,
06417             flags);
06418 
06419     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserTranslateMessage"</span>);
06420     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
06421 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a145" doxytag="ntuser.h::NtUserUnhookWindowsHookEx" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserUnhookWindowsHookEx           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HHOOK&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hhk</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06423">6423</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00480">ValidateHHOOK</a>, and <a class="el" href="../../d2/d1/hooks_8c-source.html#l01126">zzzUnhookWindowsHookEx()</a>.
<p>
<pre class="fragment"><div>06425 {
06426     <a class="code" href="../../d5/d6/structtagHOOK.html">PHOOK</a> phk;
06427 
06428     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(BOOL, FALSE);
06429 
06430     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a67">ValidateHHOOK</a>(phk, hhk);
06431 
06432     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1815">zzzUnhookWindowsHookEx</a>(
06433             phk);
06434 
06435     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserUnhookWindowsHookEx"</span>);
06436     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
06437 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a228" doxytag="ntuser.h::NtUserUnhookWinEvent" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserUnhookWinEvent           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWINEVENTHOOK&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hWinEventHook</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l03446">3446</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d6/d6/kernel_2winable_8c-source.html#l00827">_UnhookWinEvent()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00075">BEGINATOMICRECV</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00081">ENDATOMICRECV</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, and <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00484">ValidateHWINEVENTHOOK</a>.
<p>
<pre class="fragment"><div>03448 {
03449     <a class="code" href="../../d8/d4/structtagEVENTHOOK.html">PEVENTHOOK</a> peh;
03450 
03451     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a5">BEGINATOMICRECV</a>(BOOL, FALSE);
03452 
03453     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a68">ValidateHWINEVENTHOOK</a>(peh, hWinEventUnhook);
03454 
03455     retval = <a class="code" href="../../d5/d7/kernel_2winable_8c.html#a13">_UnhookWinEvent</a>(peh);
03456 
03457     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserUnhookWinEvent"</span>);
03458     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a6">ENDATOMICRECV</a>();
03459 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a202" doxytag="ntuser.h::NtUserUnloadKeyboardLayout" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserUnloadKeyboardLayout           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HKL&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hkl</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l08494">8494</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d9/d7/winsta_8c-source.html#l01240">_GetProcessWindowStation()</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, and <a class="el" href="../../d7/d1/kbdlyout_8c-source.html#l01451">xxxUnloadKeyboardLayout()</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/client_8c-source.html#l04483">UnloadKeyboardLayout()</a>.
<p>
<pre class="fragment"><div>08496 {
08497     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(BOOL, FALSE);
08498 
08499     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1306">xxxUnloadKeyboardLayout</a>(
08500                      <a class="code" href="../../d8/d8/winsta_8c.html#a11">_GetProcessWindowStation</a>(NULL),
08501                      hkl);
08502 
08503     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserUnloadKeyboardLayout"</span>);
08504     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
08505 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a168" doxytag="ntuser.h::NtUserUnlockWindowStation" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserUnlockWindowStation           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWINSTA&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hWindowStation</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l07090">7090</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d6/d4/logon_8c-source.html#l00119">_UnlockWindowStation()</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d5/d9/ob_8h-source.html#l00494">ObDereferenceObject</a>, <a class="el" href="../../d3/d0/cttoken_8c-source.html#l00135">Status</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d0/d9/ntosdef_8h.html#a76a70">UserMode</a>, and <a class="el" href="../../d8/d2/validate_8c-source.html#l00046">ValidateHwinsta()</a>.
<p>
<pre class="fragment"><div>07092 {
07093     <a class="code" href="../../d4/d9/structtagWINDOWSTATION.html">PWINDOWSTATION</a> pwinsta;
07094     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
07095 
07096     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(BOOL, FALSE);
07097 
07098     <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d7/d3/validate_8c.html#a6">ValidateHwinsta</a>(hwinsta, UserMode, 0, &amp;pwinsta);
07099     <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(Status))
07100         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
07101 
07102     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1910">_UnlockWindowStation</a>(pwinsta);
07103 
07104     <a class="code" href="../../d4/d0/ob_8h.html#a14">ObDereferenceObject</a>(pwinsta);
07105 
07106     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserUnlockWindowStation"</span>);
07107     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
07108 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a224" doxytag="ntuser.h::NtUserUnregisterClass" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserUnregisterClass           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PUNICODE_STRING&nbsp;</td>
          <td class="mdname" nowrap> <em>pstrClassName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN HINSTANCE&nbsp;</td>
          <td class="mdname" nowrap> <em>hInstance</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT <a class="el" href="../../d8/d0/structtagCLSMENUNAME.html">PCLSMENUNAME</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pcmn</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l09243">9243</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d3/d6/class_8c-source.html#l00555">_UnregisterClass()</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d6/d7/ex_8h-source.html#l01417">ProbeAndReadUnicodeString</a>, <a class="el" href="../../d6/d7/ex_8h-source.html#l01902">ProbeAndWriteStructure</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00654">ProbeForReadUnicodeStringBufferOrId</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00343">StubExceptionHandler</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d1/d7/ntcftxt_8h-source.html#l00970">UnregisterClass()</a>.
<p>
<pre class="fragment"><div>09247 {
09248     UNICODE_STRING strClassName;
09249     <a class="code" href="../../d8/d0/structtagCLSMENUNAME.html">CLSMENUNAME</a> cmn;
09250 
09251     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(BOOL, FALSE);
09252 
09253     <span class="comment">/*</span>
09254 <span class="comment">     * Probe arguments</span>
09255 <span class="comment">     */</span>
09256     <span class="keywordflow">try</span> {
09257         strClassName = <a class="code" href="../../d5/d8/ex_8h.html#a26">ProbeAndReadUnicodeString</a>(pstrClassName);
09258         <a class="code" href="../../d4/d1/userk_8h.html#a63">ProbeForReadUnicodeStringBufferOrId</a>(strClassName);
09259     } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(TRUE)) {
09260         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
09261     }
09262 
09263     <span class="comment">/*</span>
09264 <span class="comment">     * The buffer is in client-side memory.</span>
09265 <span class="comment">     */</span>
09266 
09267     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1901">_UnregisterClass</a>(
09268                 strClassName.Buffer,
09269                 hInstance,
09270                 &amp;cmn);
09271 
09272     <span class="keywordflow">try</span> {
09273         <a class="code" href="../../d5/d8/ex_8h.html#a54">ProbeAndWriteStructure</a>(pcmn, cmn, <a class="code" href="../../d8/d0/structtagCLSMENUNAME.html">CLSMENUNAME</a>);
09274     } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(FALSE)) {
09275         <span class="comment">// no SetLastError, since pcmn is a USER address, not the application's</span>
09276     }
09277 
09278     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserUnregisterClass"</span>);
09279     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
09280 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a146" doxytag="ntuser.h::NtUserUnregisterHotKey" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserUnregisterHotKey           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN int&nbsp;</td>
          <td class="mdname" nowrap> <em>id</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06439">6439</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d4/d1/hotkeys_8c-source.html#l00255">_UnregisterHotKey()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00075">BEGINATOMICRECV</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00081">ENDATOMICRECV</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, and <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00410">ValidateHWNDOPT</a>.
<p>
<pre class="fragment"><div>06442 {
06443     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwnd;
06444 
06445     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a5">BEGINATOMICRECV</a>(BOOL, FALSE);
06446 
06447     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a57">ValidateHWNDOPT</a>(pwnd, hwnd);
06448 
06449     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1661">_UnregisterHotKey</a>(
06450             pwnd,
06451             <span class="keywordtype">id</span>);
06452 
06453     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserUnregisterHotKey"</span>);
06454     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a6">ENDATOMICRECV</a>();
06455 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a43" doxytag="ntuser.h::NtUserUpdateInstance" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> NtUserUpdateInstance           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hInst</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>pMonFlags</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>afCmd</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l02929">2929</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d2/d3/ddemlsvr_8c-source.html#l00088">_CsUpdateInstance()</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00074">hInst</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d6/d7/ex_8h-source.html#l01649">ProbeForWriteUlong</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00343">StubExceptionHandler</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d0/d3/ddemlcli_8c-source.html#l00273">DdeNameService()</a>, and <a class="el" href="../../d0/d3/ddemlcli_8c-source.html#l00065">InternalDdeInitialize()</a>.
<p>
<pre class="fragment"><div>02933 {
02934     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> MonFlags;
02935     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(DWORD, DMLERR_INVALIDPARAMETER);
02936 
02937     <span class="comment">/*</span>
02938 <span class="comment">     * Probe arguments</span>
02939 <span class="comment">     */</span>
02940     <span class="keywordflow">try</span> {
02941         <a class="code" href="../../d5/d8/ex_8h.html#a40">ProbeForWriteUlong</a>(pMonFlags);
02942     } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(FALSE)) {
02943         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
02944     }
02945     retval = <a class="code" href="../../d2/d4/ddemlsvr_8h.html#a9">_CsUpdateInstance</a>(hInst, &amp;MonFlags, afCmd);
02946     <span class="keywordflow">try</span> {
02947         *pMonFlags = MonFlags;
02948     } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(TRUE)) {
02949         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
02950     }
02951 
02952     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserUpdateInstance"</span>);
02953     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
02954 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a254" doxytag="ntuser.h::NtUserUpdateLayeredWindow" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserUpdateLayeredWindow           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN HDC&nbsp;</td>
          <td class="mdname" nowrap> <em>hdcDst</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN POINT *&nbsp;</td>
          <td class="mdname" nowrap> <em>pptDst</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN SIZE *&nbsp;</td>
          <td class="mdname" nowrap> <em>psize</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN HDC&nbsp;</td>
          <td class="mdname" nowrap> <em>hdcSrc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN POINT *&nbsp;</td>
          <td class="mdname" nowrap> <em>pptSrc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN COLORREF&nbsp;</td>
          <td class="mdname" nowrap> <em>crKey</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN BLENDFUNCTION *&nbsp;</td>
          <td class="mdname" nowrap> <em>pblend</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwFlags</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l13366">13366</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d9/d3/sprite_8c-source.html#l00625">_UpdateLayeredWindow()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00075">BEGINATOMICRECV</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d4/d7/propapi_8h-source.html#l00043">dwFlags</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00081">ENDATOMICRECV</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00169">ProbeAndReadBlendfunction</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00186">ProbeAndReadPoint</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00165">ProbeAndReadSize</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00343">StubExceptionHandler</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00399">ValidateHWND</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/winmgrc_8c-source.html#l00680">AnimateBlend()</a>.
<p>
<pre class="fragment"><div>13376 {
13377     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwnd;
13378     POINT ptSrc;
13379     SIZE size;
13380     POINT ptDst;
13381     BLENDFUNCTION blend;
13382 
13383     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a5">BEGINATOMICRECV</a>(BOOL, FALSE);
13384 
13385     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a55">ValidateHWND</a>(pwnd, hwnd);
13386 
13387     <span class="comment">/*</span>
13388 <span class="comment">     * Probe and validate arguments.</span>
13389 <span class="comment">     */</span>
13390     <span class="keywordflow">try</span> {
13391         <span class="keywordflow">if</span> (ARGUMENT_PRESENT(pptSrc)) {
13392             ptSrc = <a class="code" href="../../d4/d1/userk_8h.html#a29">ProbeAndReadPoint</a>(pptSrc);
13393             pptSrc = &amp;ptSrc;
13394         }
13395         <span class="keywordflow">if</span> (ARGUMENT_PRESENT(psize)) {
13396             size = <a class="code" href="../../d4/d1/userk_8h.html#a26">ProbeAndReadSize</a>(psize);
13397             psize = &amp;size;
13398             <span class="keywordflow">if</span> (psize-&gt;cx &lt; 0 || psize-&gt;cy &lt; 0) {
13399                 <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(ERROR_INVALID_PARAMETER);  <span class="comment">// this is a jump out of try!</span>
13400             }
13401         }
13402         <span class="keywordflow">if</span> (ARGUMENT_PRESENT(pptDst)) {
13403             ptDst = <a class="code" href="../../d4/d1/userk_8h.html#a29">ProbeAndReadPoint</a>(pptDst);
13404             pptDst = &amp;ptDst;
13405         }
13406 
13407         <span class="keywordflow">if</span> (ARGUMENT_PRESENT(pblend)) {
13408             blend = <a class="code" href="../../d4/d1/userk_8h.html#a27">ProbeAndReadBlendfunction</a>(pblend);
13409             pblend = &amp;blend;
13410         }
13411     } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(TRUE)) {
13412         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
13413     }
13414 
13415     <span class="keywordflow">if</span> (<a class="code" href="../../d3/d8/propapi_8h.html#a34">dwFlags</a> &amp; ~ULW_VALID) {
13416         RIPMSG0(RIP_WARNING, <span class="stringliteral">"UpdateLayeredWindow: Invalid Parameter"</span>);
13417         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(ERROR_INVALID_PARAMETER);
13418     } <span class="keywordflow">else</span> {
13419         retval = <a class="code" href="../../d4/d1/userk_8h.html#a1987">_UpdateLayeredWindow</a>(
13420                 pwnd,
13421                 hdcDst,
13422                 pptDst,
13423                 psize,
13424                 hdcSrc,
13425                 pptSrc,
13426                 crKey,
13427                 pblend,
13428                 dwFlags);
13429     }
13430 
13431     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserUpdateLayeredWindow"</span>);
13432     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a6">ENDATOMICRECV</a>();
13433 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a41" doxytag="ntuser.h::NtUserUpdatePerUserSystemParameters" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserUpdatePerUserSystemParameters           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hToken</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>bUserLoggedOn</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l02876">2876</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, and <a class="el" href="../../d8/d0/w32_2ntuser_2kernel_2init_8c-source.html#l02445">xxxUpdatePerUserSystemParameters()</a>.
<p>
Referenced by <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00049">UpdatePerUserSystemParameters()</a>.
<p>
<pre class="fragment"><div>02879 {
02880     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(BOOL, FALSE);
02881 
02882     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1538">xxxUpdatePerUserSystemParameters</a>(hToken, bUserLoggedOn);
02883 
02884     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserUpdatePerUserSystemParameters"</span>);
02885     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
02886 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a195" doxytag="ntuser.h::NtUserUserHandleGrantAccess" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserUserHandleGrantAccess           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hUserHandle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hJob</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>bGrant</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l07905">7905</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01278">tagSHAREDINFO::aheList</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01515">_HANDLEENTRY::bFlags</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00251">CLEANUPRECV</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d8/d0/usersrv_8h-source.html#l00201">EnterCrit</a>, <a class="el" href="../../d6/d7/ex_8h-source.html#l02475">ExAcquireResourceExclusive</a>, <a class="el" href="../../d6/d7/ex_8h-source.html#l02393">ExReleaseResource</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03433">GH_SIZE</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00259">gpJobsList</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00052">gSharedInfo</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01434">HANDLEF_GRANTED</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01470">HMIndexFromHandle</a>, <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00150">HMValidateHandle()</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03445">tagW32JOB::Job</a>, <a class="el" href="../../d5/d8/ke_8h-source.html#l01598">KeEnterCriticalRegion</a>, <a class="el" href="../../d5/d8/ke_8h-source.html#l01628">KeLeaveCriticalRegion</a>, <a class="el" href="../../d8/d0/usersrv_8h-source.html#l00202">LeaveCrit</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00336">MSGERRORCLEANUP</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d9/ob_8h-source.html#l00494">ObDereferenceObject</a>, <a class="el" href="../../d8/d0/obref_8c-source.html#l00542">ObReferenceObjectByHandle()</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03453">tagW32JOB::pgh</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03444">tagW32JOB::pNext</a>, <a class="el" href="../../d0/d8/ntos_8h-source.html#l00090">PsJobType</a>, <a class="el" href="../../d3/d0/cttoken_8c-source.html#l00135">Status</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00343">StubExceptionHandler</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00926">TYPE_GENERIC</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03451">tagW32JOB::ughCrt</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03452">tagW32JOB::ughMax</a>, and <a class="el" href="../../d0/d9/ntosdef_8h.html#a76a70">UserMode</a>.
<p>
<pre class="fragment"><div>07909 {
07910     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>  <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
07911     <a class="code" href="../../d0/d3/struct__EJOB.html">PEJOB</a>     Job;
07912     <a class="code" href="../../d1/d9/structtagW32JOB.html">PW32JOB</a>   pW32Job;
07913     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>     dw;
07914     <a class="code" href="../../d2/d4/struct__HANDLEENTRY.html">PHE</a>       phe;
07915     PULONG_PTR pgh;
07916     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>      retval;
07917     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>      errret = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
07918 
07919     <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d7/d1/obref_8c.html#a4">ObReferenceObjectByHandle</a>(
07920                     hJob,
07921                     JOB_OBJECT_SET_ATTRIBUTES,
07922                     *PsJobType,
07923                     UserMode,
07924                     (PVOID*)&amp;Job,
07925                     NULL);
07926 
07927     <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(Status)) {
07928         RIPERR1(ERROR_INVALID_PARAMETER,
07929                 RIP_WARNING,
07930                 <span class="stringliteral">"UserHandleGrantAccess: invalid job handle %#p\n"</span>,
07931                 hJob);
07932         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
07933     }
07934 
07935     <span class="comment">/*</span>
07936 <span class="comment">     * aquire the job's lock and after that enter the user</span>
07937 <span class="comment">     * critical section.</span>
07938 <span class="comment">     */</span>
07939     <a class="code" href="../../d4/d9/ke_8h.html#a28">KeEnterCriticalRegion</a>();
07940     <a class="code" href="../../d5/d8/ex_8h.html#a70">ExAcquireResourceExclusive</a>(&amp;Job-&gt;<a class="code" href="../../d0/d3/struct__EJOB.html#o3">JobLock</a>, TRUE);
07941 
07942     <a class="code" href="../../d7/d1/usersrv_8h.html#a36">EnterCrit</a>();
07943 
07944     <span class="comment">/*</span>
07945 <span class="comment">     * bail out if it doesn't have UI restrictions</span>
07946 <span class="comment">     */</span>
07947     <span class="keywordflow">if</span> (Job-&gt;<a class="code" href="../../d0/d3/struct__EJOB.html#o20">UIRestrictionsClass</a> == 0) {
07948         RIPERR1(ERROR_INVALID_PARAMETER,
07949                 RIP_WARNING,
07950                 <span class="stringliteral">"UserHandleGrantAccess: job %#p doesn't have UI restrictions\n"</span>,
07951                 hJob);
07952         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a44">MSGERRORCLEANUP</a>(0);
07953     }
07954 
07955     <span class="comment">/*</span>
07956 <span class="comment">     * see if we have a W32JOB structure created for this job</span>
07957 <span class="comment">     */</span>
07958     pW32Job = <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a113">gpJobsList</a>;
07959 
07960     <span class="keywordflow">while</span> (pW32Job) {
07961         <span class="keywordflow">if</span> (pW32Job-&gt;<a class="code" href="../../d1/d9/structtagW32JOB.html#o1">Job</a> == Job) {
07962             <span class="keywordflow">break</span>;
07963         }
07964         pW32Job = pW32Job-&gt;<a class="code" href="../../d1/d9/structtagW32JOB.html#o0">pNext</a>;
07965     }
07966 
07967     UserAssert(pW32Job != NULL);
07968 
07969     <span class="keywordflow">try</span> {
07970         <span class="comment">/*</span>
07971 <span class="comment">         * Now, validate the 'unsecure' handle</span>
07972 <span class="comment">         */</span>
07973         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d9/rtl_2wow_8c.html#a6">HMValidateHandle</a>(hUserHandle, TYPE_GENERIC) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
07974             RIPERR1(ERROR_INVALID_PARAMETER,
07975                     RIP_WARNING,
07976                     <span class="stringliteral">"UserHandleGrantAccess: invalid handle %#p\n"</span>,
07977                     hUserHandle);
07978 
07979             <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a44">MSGERRORCLEANUP</a>(0);
07980         }
07981 
07982         dw = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a432">HMIndexFromHandle</a>(hUserHandle);
07983 
07984         phe = &amp;<a class="code" href="../../d1/d8/clglobal_8c.html#a5">gSharedInfo</a>.<a class="code" href="../../d4/d6/structtagSHAREDINFO.html#o1">aheList</a>[dw];
07985 
07986         phe-&gt;<a class="code" href="../../d2/d4/struct__HANDLEENTRY.html#o3">bFlags</a> |= <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a426">HANDLEF_GRANTED</a>;
07987 
07988         pgh = pW32Job-&gt;<a class="code" href="../../d1/d9/structtagW32JOB.html#o9">pgh</a>;
07989 
07990         <span class="keywordflow">if</span> (bGrant) {
07991             <span class="comment">/*</span>
07992 <span class="comment">             * Add the handle to the process' list</span>
07993 <span class="comment">             */</span>
07994             <span class="keywordflow">if</span> (pW32Job-&gt;<a class="code" href="../../d1/d9/structtagW32JOB.html#o7">ughCrt</a> == pW32Job-&gt;<a class="code" href="../../d1/d9/structtagW32JOB.html#o8">ughMax</a>) {
07995 
07996                 <span class="keywordflow">if</span> (pW32Job-&gt;<a class="code" href="../../d1/d9/structtagW32JOB.html#o7">ughCrt</a> == 0) {
07997                     pgh = UserAllocPool(GH_SIZE * <span class="keyword">sizeof</span>(*pgh), TAG_GRANTEDHANDLES);
07998                 } <span class="keywordflow">else</span> {
07999                     <span class="comment">/*</span>
08000 <span class="comment">                     * we need to grow the array</span>
08001 <span class="comment">                     */</span>
08002                     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> uBytes = (pW32Job-&gt;<a class="code" href="../../d1/d9/structtagW32JOB.html#o8">ughMax</a>) * <span class="keyword">sizeof</span>(*pgh);
08003 
08004                     pgh = UserReAllocPool(pgh,
08005                                           uBytes,
08006                                           uBytes + GH_SIZE * <span class="keyword">sizeof</span>(*pgh),
08007                                           TAG_GRANTEDHANDLES);
08008                 }
08009 
08010                 <span class="keywordflow">if</span> (pgh == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
08011                     RIPMSG0(RIP_WARNING, <span class="stringliteral">"UserHandleGrantAccess: out of memory\n"</span>);
08012                     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a44">MSGERRORCLEANUP</a>(ERROR_NOT_ENOUGH_MEMORY);
08013                 }
08014 
08015                 pW32Job-&gt;<a class="code" href="../../d1/d9/structtagW32JOB.html#o9">pgh</a>     = pgh;
08016                 pW32Job-&gt;<a class="code" href="../../d1/d9/structtagW32JOB.html#o8">ughMax</a> += <a class="code" href="../../d4/d1/userk_8h.html#a386">GH_SIZE</a>;
08017             }
08018 
08019             UserAssert(pW32Job-&gt;<a class="code" href="../../d1/d9/structtagW32JOB.html#o7">ughCrt</a> &lt; pW32Job-&gt;<a class="code" href="../../d1/d9/structtagW32JOB.html#o8">ughMax</a>);
08020 
08021             <span class="comment">/*</span>
08022 <span class="comment">             * see if the handle is not already granted to this process</span>
08023 <span class="comment">             */</span>
08024             <span class="keywordflow">for</span> (dw = 0; dw &lt; pW32Job-&gt;<a class="code" href="../../d1/d9/structtagW32JOB.html#o7">ughCrt</a>; dw++) {
08025                 <span class="keywordflow">if</span> (*(pgh + dw) == (ULONG_PTR)hUserHandle) {
08026                     <span class="keywordflow">break</span>;
08027                 }
08028             }
08029 
08030             <span class="keywordflow">if</span> (dw &gt;= pW32Job-&gt;<a class="code" href="../../d1/d9/structtagW32JOB.html#o7">ughCrt</a>) {
08031 
08032                 <span class="comment">/*</span>
08033 <span class="comment">                 * add the handle to the granted handles table</span>
08034 <span class="comment">                 */</span>
08035                 *(pgh + pW32Job-&gt;<a class="code" href="../../d1/d9/structtagW32JOB.html#o7">ughCrt</a>) = (ULONG_PTR)hUserHandle;
08036 
08037                 (pW32Job-&gt;<a class="code" href="../../d1/d9/structtagW32JOB.html#o7">ughCrt</a>)++;
08038             }
08039         } <span class="keywordflow">else</span> {
08040             <span class="comment">/*</span>
08041 <span class="comment">             * Remove the handle from the granted list</span>
08042 <span class="comment">             */</span>
08043             <span class="comment">/*</span>
08044 <span class="comment">             * search for the handle in the array.</span>
08045 <span class="comment">             */</span>
08046             <span class="keywordflow">for</span> (dw = 0; dw &lt; pW32Job-&gt;<a class="code" href="../../d1/d9/structtagW32JOB.html#o7">ughCrt</a>; dw++) {
08047                 <span class="keywordflow">if</span> (*(pgh + dw) == (ULONG_PTR)hUserHandle) {
08048 
08049                     <span class="comment">/*</span>
08050 <span class="comment">                     * found the handle granted to this process</span>
08051 <span class="comment">                     */</span>
08052                     RtlMoveMemory(pgh + dw,
08053                                   pgh + dw + 1,
08054                                   (pW32Job-&gt;<a class="code" href="../../d1/d9/structtagW32JOB.html#o7">ughCrt</a> - dw - 1) * <span class="keyword">sizeof</span>(*pgh));
08055 
08056                     (pW32Job-&gt;<a class="code" href="../../d1/d9/structtagW32JOB.html#o7">ughCrt</a>)--;
08057                     <span class="keywordflow">break</span>;
08058                 }
08059             }
08060 <span class="preprocessor">#if DBG</span>
08061 <span class="preprocessor"></span>            <span class="keywordflow">if</span> (dw &gt;= pW32Job-&gt;<a class="code" href="../../d1/d9/structtagW32JOB.html#o7">ughCrt</a>) {
08062                 RIPERR1(ERROR_INVALID_HANDLE, RIP_WARNING,
08063                         <span class="stringliteral">"UserHandleGrantAccess(FALSE): handle not found %#p"</span>,
08064                         hUserHandle);
08065             }
08066 <span class="preprocessor">#endif // DBG</span>
08067 <span class="preprocessor"></span>        }
08068 
08069         retval = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
08070 
08071     } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(TRUE)) {
08072         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a44">MSGERRORCLEANUP</a>(0);
08073     }
08074 
08075     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a33">CLEANUPRECV</a>();
08076 
08077     <a class="code" href="../../d7/d1/usersrv_8h.html#a37">LeaveCrit</a>();
08078     <a class="code" href="../../d5/d8/ex_8h.html#a66">ExReleaseResource</a>(&amp;Job-&gt;<a class="code" href="../../d0/d3/struct__EJOB.html#o3">JobLock</a>);
08079     <a class="code" href="../../d4/d9/ke_8h.html#a29">KeLeaveCriticalRegion</a>();
08080     <a class="code" href="../../d4/d0/ob_8h.html#a14">ObDereferenceObject</a>(Job);
08081 
08082     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserUserHandleGrantAccess"</span>);
08083 
08084     <span class="keywordflow">return</span> retval;
08085 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a194" doxytag="ntuser.h::NtUserValidateHandleSecure" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserValidateHandleSecure           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HANDLE&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>h</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l07894">7894</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, and <a class="el" href="../../d8/d2/validate_8c-source.html#l00321">ValidateHandleSecure()</a>.
<p>
<pre class="fragment"><div>07896 {
07897     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(BOOL, FALSE);
07898 
07899     retval = <a class="code" href="../../d7/d3/validate_8c.html#a12">ValidateHandleSecure</a>(h);
07900 
07901     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserValidateHandleSecure"</span>);
07902     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
07903 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a147" doxytag="ntuser.h::NtUserValidateRect" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserValidateRect           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN CONST RECT *lpRect&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06457">6457</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00203">ProbeAndReadRect</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00343">StubExceptionHandler</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00362">ThreadLock</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00366">ThreadUnlock</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00410">ValidateHWNDOPT</a>, and <a class="el" href="../../d9/d8/update_8c-source.html#l00077">xxxValidateRect()</a>.
<p>
<pre class="fragment"><div>06460 {
06461     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwnd;
06462     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpwnd;
06463     RECT rc;
06464 
06465     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(BOOL, FALSE);
06466 
06467     <span class="comment">/*</span>
06468 <span class="comment">     * Probe arguments</span>
06469 <span class="comment">     */</span>
06470     <span class="keywordflow">if</span> (ARGUMENT_PRESENT(lpRect)) {
06471         <span class="keywordflow">try</span> {
06472             rc = <a class="code" href="../../d4/d1/userk_8h.html#a31">ProbeAndReadRect</a>(lpRect);
06473             lpRect = &amp;rc;
06474         } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(TRUE)) {
06475             <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
06476         }
06477     }
06478 
06479     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a57">ValidateHWNDOPT</a>(pwnd, hwnd);
06480 
06481     <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(pwnd, &amp;tlpwnd);
06482 
06483     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1670">xxxValidateRect</a>(pwnd, (PRECT)lpRect);
06484 
06485     <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwnd);
06486 
06487     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserValidateRect"</span>);
06488     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
06489 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a225" doxytag="ntuser.h::NtUserVkKeyScanEx" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a13">SHORT</a> NtUserVkKeyScanEx           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN WCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>ch</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG_PTR&nbsp;</td>
          <td class="mdname" nowrap> <em>dwHKLorPKL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>bHKL</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l09282">9282</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00094">BEGINRECV_SHARED</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00099">ENDRECV_SHARED</a>, <a class="el" href="../../d7/d1/kbdlyout_8c-source.html#l00040">HKLtoPKL()</a>, <a class="el" href="../../d3/d3/tounicod_8c-source.html#l00803">InternalVkKeyScanEx()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l02495">tagKBDFILE::pKbdTbl</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00059">PtiCurrentShared</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00062">SHORT</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l02509">tagKL::spkf</a>, and <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>.
<p>
Referenced by <a class="el" href="../../d1/d7/ntcftxt_8h-source.html#l01013">VkKeyScan()</a>, and <a class="el" href="../../d1/d7/ntcftxt_8h-source.html#l01048">VkKeyScanEx()</a>.
<p>
<pre class="fragment"><div>09286 {
09287     <a class="code" href="../../d4/d9/structtagKL.html">PKL</a> pkl;
09288 
09289     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a9">BEGINRECV_SHARED</a>(SHORT, -1);
09290 
09291     <span class="comment">/*</span>
09292 <span class="comment">     * See if we need to convert an HKL to a PKL.  VkKeyScan passes a PKL and</span>
09293 <span class="comment">     * VkKeyScanEx passes an HKL.  The conversion must be done on the server side.</span>
09294 <span class="comment">     */</span>
09295     <span class="keywordflow">if</span> (bHKL) {
09296         pkl = <a class="code" href="../../d4/d1/userk_8h.html#a1019">HKLtoPKL</a>(<a class="code" href="../../d4/d1/userk_8h.html#a10">PtiCurrentShared</a>(), (HKL)dwHKLorPKL);
09297     } <span class="keywordflow">else</span> {
09298         pkl = <a class="code" href="../../d4/d1/userk_8h.html#a10">PtiCurrentShared</a>()-&gt;spklActive;
09299     }
09300 
09301     <span class="keywordflow">if</span> (pkl == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
09302         retval = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a13">SHORT</a>)-1;
09303     } <span class="keywordflow">else</span> {
09304         retval = <a class="code" href="../../d4/d1/userk_8h.html#a1123">InternalVkKeyScanEx</a>(cChar, pkl-&gt;<a class="code" href="../../d4/d9/structtagKL.html#o5">spkf</a>-&gt;<a class="code" href="../../d1/d9/structtagKBDFILE.html#o4">pKbdTbl</a>);
09305     }
09306 
09307     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserVkKeyScanEx"</span>);
09308     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a10">ENDRECV_SHARED</a>();
09309 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a148" doxytag="ntuser.h::NtUserWaitForInputIdle" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> NtUserWaitForInputIdle           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN ULONG_PTR&nbsp;</td>
          <td class="mdname" nowrap> <em>idProcess</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwMilliseconds</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fSharedWow</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06491">6491</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, and <a class="el" href="../../d7/d2/queue_8c-source.html#l05310">xxxWaitForInputIdle()</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/client_8c-source.html#l01434">WaitForInputIdle()</a>.
<p>
<pre class="fragment"><div>06495 {
06496     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(DWORD, (DWORD)-1);
06497 
06498     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1120">xxxWaitForInputIdle</a>(
06499             idProcess,
06500             dwMilliseconds,
06501             fSharedWow);
06502 
06503     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserWaitForInputIdle"</span>);
06504     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
06505 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a26" doxytag="ntuser.h::NtUserWaitForMsgAndEvent" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserWaitForMsgAndEvent           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HANDLE&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hevent</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l01541">1541</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, and <a class="el" href="../../d7/d8/taskman_8c-source.html#l00252">xxxSleepTask()</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/client_8c-source.html#l01486">MsgWaitForMultipleObjectsEx()</a>, and <a class="el" href="../../d4/d7/client_8c-source.html#l02696">UserRegisterWowHandlers()</a>.
<p>
<pre class="fragment"><div>01543 {
01544     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(BOOL, FALSE);
01545 
01546     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1556">xxxSleepTask</a>(FALSE, hevent);
01547 
01548     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserWaitForMsgAndEvent"</span>);
01549     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
01550 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a166" doxytag="ntuser.h::NtUserWaitMessage" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserWaitMessage           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">VOID&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l07059">7059</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, and <a class="el" href="../../d6/d2/ntuser_2kernel_2input_8c-source.html#l00112">xxxWaitMessage()</a>.
<p>
Referenced by <a class="el" href="../../d9/d9/badapp_8c-source.html#l00147">CtxUserWaitMessage()</a>, and <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l01036">DialogBox2()</a>.
<p>
<pre class="fragment"><div>07061 {
07062     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(BOOL, FALSE);
07063 
07064     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1634">xxxWaitMessage</a>();
07065 
07066     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserWaitMessage"</span>);
07067     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
07068 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a8" doxytag="ntuser.h::NtUserWin32PoolAllocationStats" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserWin32PoolAllocationStats           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>parrTags</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN SIZE_T&nbsp;</td>
          <td class="mdname" nowrap> <em>tagsCount</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT SIZE_T *&nbsp;</td>
          <td class="mdname" nowrap> <em>lpdwMaxMem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT SIZE_T *&nbsp;</td>
          <td class="mdname" nowrap> <em>lpdwCrtMem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpdwMaxAlloc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpdwCrtAlloc</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00724">724</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d0/d4/probe_8c-source.html#l00034">ProbeForWrite()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00343">StubExceptionHandler</a>, and <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>.
<p>
<pre class="fragment"><div>00731 {
00732 <span class="preprocessor">#ifdef POOL_INSTR_API</span>
00733 <span class="preprocessor"></span>    SIZE_T  dwMaxMem, dwCrtMem;
00734     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>   dwMaxAlloc, dwCrtAlloc;
00735 
00736     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(BOOL, FALSE);
00737 
00738     retval = _Win32PoolAllocationStats(parrTags,
00739                                        tagsCount,
00740                                        &amp;dwMaxMem,
00741                                        &amp;dwCrtMem,
00742                                        &amp;dwMaxAlloc,
00743                                        &amp;dwCrtAlloc);
00744     <span class="comment">/*</span>
00745 <span class="comment">     * Probe and copy</span>
00746 <span class="comment">     */</span>
00747     <span class="keywordflow">try</span> {
00748         <span class="keywordflow">if</span> (lpdwMaxMem != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00749             <a class="code" href="../../d5/d8/ex_8h.html#a259">ProbeForWrite</a>(lpdwMaxMem, <span class="keyword">sizeof</span>(SIZE_T), <span class="keyword">sizeof</span>(DWORD));
00750             *lpdwMaxMem = dwMaxMem;
00751         }
00752         <span class="keywordflow">if</span> (lpdwCrtMem != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00753             <a class="code" href="../../d5/d8/ex_8h.html#a259">ProbeForWrite</a>(lpdwCrtMem, <span class="keyword">sizeof</span>(SIZE_T), <span class="keyword">sizeof</span>(DWORD));
00754             *lpdwCrtMem = dwCrtMem;
00755         }
00756         <span class="keywordflow">if</span> (lpdwMaxAlloc != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00757             <a class="code" href="../../d5/d8/ex_8h.html#a259">ProbeForWrite</a>(lpdwMaxAlloc, <span class="keyword">sizeof</span>(DWORD), <span class="keyword">sizeof</span>(DWORD));
00758             *lpdwMaxAlloc = dwMaxAlloc;
00759         }
00760         <span class="keywordflow">if</span> (lpdwCrtAlloc != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00761             <a class="code" href="../../d5/d8/ex_8h.html#a259">ProbeForWrite</a>(lpdwCrtAlloc, <span class="keyword">sizeof</span>(DWORD), <span class="keyword">sizeof</span>(DWORD));
00762             *lpdwCrtAlloc = dwCrtAlloc;
00763         }
00764 
00765     } except (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a45">StubExceptionHandler</a>(FALSE)) {
00766         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>(0);
00767     }
00768 
00769     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserWin32PoolAllocationStats"</span>);
00770     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
00771 <span class="preprocessor">#else</span>
00772 <span class="preprocessor"></span>    UNREFERENCED_PARAMETER(parrTags);
00773     UNREFERENCED_PARAMETER(tagsCount);
00774     UNREFERENCED_PARAMETER(lpdwMaxMem);
00775     UNREFERENCED_PARAMETER(lpdwCrtMem);
00776     UNREFERENCED_PARAMETER(lpdwMaxAlloc);
00777     UNREFERENCED_PARAMETER(lpdwCrtAlloc);
00778     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00779 <span class="preprocessor">#endif // POOL_INSTR_API</span>
00780 <span class="preprocessor"></span>}
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a149" doxytag="ntuser.h::NtUserWindowFromPoint" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI HWND NtUserWindowFromPoint           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN POINT&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>Point</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06507">6507</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00059">Point</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01512">PtoH</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, and <a class="el" href="../../d0/d8/winwhere_8c-source.html#l00128">xxxWindowFromPoint()</a>.
<p>
<pre class="fragment"><div>06509 {
06510     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(HWND, NULL);
06511 
06512     retval = (HWND)<a class="code" href="../../d9/d8/winwhere_8c.html#a2">xxxWindowFromPoint</a>(
06513             Point);
06514     retval = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a448">PtoH</a>((PVOID)retval);
06515 
06516     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserWindowFromPoint"</span>);
06517     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
06518 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a177" doxytag="ntuser.h::NtUserWOWCleanup" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL NtUserWOWCleanup           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hInstance</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>hTaskWow</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a176" doxytag="ntuser.h::NtUserWOWModuleUnload" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL NtUserWOWModuleUnload           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HANDLE&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hModule</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a165" doxytag="ntuser.h::NtUserYieldTask" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> W32KAPI BOOL NtUserYieldTask           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">VOID&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l07022">7022</a> of file <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html">kernel/ntstubs.c</a>.
<p>
References <a class="el" href="../../d6/d7/crecv_8c-source.html#l00029">BEGINRECV</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02733">CSPINBACKGROUND</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00509">_CLIENTINFO::cSpins</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l00529">_CLIENTINFO::dwTIFlags</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00060">ENDRECV</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00256">gppiWantForegroundPriority</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03329">tagTHREADINFO::pClientInfo</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03319">tagTHREADINFO::ppi</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00058">PtiCurrent</a>, <a class="el" href="../../d4/d5/focusact_8c-source.html#l02708">SetForegroundPriority()</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03331">tagTHREADINFO::TIF_flags</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02836">TIF_SPINNING</a>, <a class="el" href="../../d8/d4/ntuser_2client_2nt6_2debug_8h-source.html#l00014">TRACE</a>, and <a class="el" href="../../d7/d8/taskman_8c-source.html#l00537">xxxUserYield()</a>.
<p>
Referenced by <a class="el" href="../../d9/d9/badapp_8c-source.html#l00113">CtxUserYieldTask()</a>, and <a class="el" href="../../d4/d7/client_8c-source.html#l02696">UserRegisterWowHandlers()</a>.
<p>
<pre class="fragment"><div>07024 {
07025     <a class="code" href="../../d2/d8/structtagTHREADINFO.html">PTHREADINFO</a> ptiCurrent;
07026 
07027     <a class="code" href="../../d5/d8/crecv_8c.html#a4">BEGINRECV</a>(BOOL, FALSE);
07028 
07029     <span class="comment">/*</span>
07030 <span class="comment">     * Make sure this process is running in the background if it is just</span>
07031 <span class="comment">     * spinning.</span>
07032 <span class="comment">     */</span>
07033     ptiCurrent = <a class="code" href="../../d4/d1/userk_8h.html#a9">PtiCurrent</a>();
07034 
07035     ptiCurrent-&gt;<a class="code" href="../../d2/d8/structtagTHREADINFO.html#o8">pClientInfo</a>-&gt;<a class="code" href="../../d2/d2/struct__CLIENTINFO.html#o1">cSpins</a>++;
07036 
07037     <span class="comment">/*</span>
07038 <span class="comment">     * CheckProcessBackground see input.c for comments</span>
07039 <span class="comment">     */</span>
07040     <span class="keywordflow">if</span> (ptiCurrent-&gt;<a class="code" href="../../d2/d8/structtagTHREADINFO.html#o8">pClientInfo</a>-&gt;<a class="code" href="../../d2/d2/struct__CLIENTINFO.html#o1">cSpins</a> &gt;= <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a767">CSPINBACKGROUND</a>) {
07041         ptiCurrent-&gt;<a class="code" href="../../d2/d8/structtagTHREADINFO.html#o8">pClientInfo</a>-&gt;<a class="code" href="../../d2/d2/struct__CLIENTINFO.html#o1">cSpins</a> = 0;
07042         ptiCurrent-&gt;<a class="code" href="../../d2/d8/structtagTHREADINFO.html#o9">TIF_flags</a> |= <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a804">TIF_SPINNING</a>;
07043         ptiCurrent-&gt;<a class="code" href="../../d2/d8/structtagTHREADINFO.html#o8">pClientInfo</a>-&gt;<a class="code" href="../../d2/d2/struct__CLIENTINFO.html#o4">dwTIFlags</a> |= <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a804">TIF_SPINNING</a>;
07044 
07045         <span class="keywordflow">if</span> (!(ptiCurrent-&gt;<a class="code" href="../../d2/d8/structtagTHREADINFO.html#o2">ppi</a>-&gt;W32PF_Flags &amp; W32PF_FORCEBACKGROUNDPRIORITY)) {
07046             ptiCurrent-&gt;<a class="code" href="../../d2/d8/structtagTHREADINFO.html#o2">ppi</a>-&gt;W32PF_Flags |= W32PF_FORCEBACKGROUNDPRIORITY;
07047             <span class="keywordflow">if</span> (ptiCurrent-&gt;<a class="code" href="../../d2/d8/structtagTHREADINFO.html#o2">ppi</a> == <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a111">gppiWantForegroundPriority</a>) {
07048                 <a class="code" href="../../d4/d1/userk_8h.html#a1334">SetForegroundPriority</a>(ptiCurrent, FALSE);
07049             }
07050         }
07051     }
07052 
07053     retval = <a class="code" href="../../d4/d1/userk_8h.html#a1557">xxxUserYield</a>(ptiCurrent);
07054 
07055     <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<span class="stringliteral">"NtUserYieldTask"</span>);
07056     <a class="code" href="../../d5/d8/crecv_8c.html#a6">ENDRECV</a>();
07057 }
</div></pre>    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Sat May 15 19:44:57 2004 for test by
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>

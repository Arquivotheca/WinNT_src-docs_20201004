<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>test: udfdata.c File Reference</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="../../main.html">Main&nbsp;Page</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Class&nbsp;List</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Class&nbsp;Members</a> | <a class="qindex" href="../../globals.html">File&nbsp;Members</a></div>
<h1>udfdata.c File Reference</h1><code>#include "UdfProcs.h"</code><br>

<p>
<a href="../../d1/d7/udfdata_8c-source.html">Go to the source code of this file.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d8/udfdata_8c.html#a0">BugCheckFileId</a>&nbsp;&nbsp;&nbsp;(UDFS_BUG_CHECK_UDFDATA)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d8/udfdata_8c.html#a1">Dbg</a>&nbsp;&nbsp;&nbsp;(UDFS_DEBUG_LEVEL_UDFDATA)</td></tr>

<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d8/udfdata_8c.html#a30">UdfFsdDispatch</a> (IN <a class="el" href="../../d6/d7/struct__VOLUME__DEVICE__OBJECT.html">PVOLUME_DEVICE_OBJECT</a> VolumeDeviceObject, IN <a class="el" href="../../d0/d2/struct__IRP.html">PIRP</a> <a class="el" href="../../d0/d6/iop_8h.html#a35">Irp</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LONG&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d8/udfdata_8c.html#a31">UdfExceptionFilter</a> (IN <a class="el" href="../../d0/d3/struct__IRP__CONTEXT.html">PIRP_CONTEXT</a> IrpContext, IN PEXCEPTION_POINTERS ExceptionPointer)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d8/udfdata_8c.html#a32">UdfProcessException</a> (IN <a class="el" href="../../d0/d3/struct__IRP__CONTEXT.html">PIRP_CONTEXT</a> IrpContext OPTIONAL, IN <a class="el" href="../../d0/d2/struct__IRP.html">PIRP</a> <a class="el" href="../../d0/d6/iop_8h.html#a35">Irp</a>, IN NTSTATUS ExceptionCode)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d8/udfdata_8c.html#a33">UdfCompleteRequest</a> (IN <a class="el" href="../../d0/d3/struct__IRP__CONTEXT.html">PIRP_CONTEXT</a> IrpContext OPTIONAL, IN <a class="el" href="../../d0/d2/struct__IRP.html">PIRP</a> <a class="el" href="../../d0/d6/iop_8h.html#a35">Irp</a> OPTIONAL, IN NTSTATUS <a class="el" href="../../d2/d1/cttoken_8c.html#a18">Status</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d8/udfdata_8c.html#a34">UdfSetThreadContext</a> (IN <a class="el" href="../../d0/d3/struct__IRP__CONTEXT.html">PIRP_CONTEXT</a> IrpContext, IN <a class="el" href="../../d0/d1/struct__THREAD__CONTEXT.html">PTHREAD_CONTEXT</a> <a class="el" href="../../d2/d1/cttoken_8c.html#a62">ThreadContext</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOLEAN&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d8/udfdata_8c.html#a35">UdfFastIoCheckIfPossible</a> (IN <a class="el" href="../../d9/d1/struct__FILE__OBJECT.html">PFILE_OBJECT</a> FileObject, IN PLARGE_INTEGER FileOffset, IN ULONG Length, IN BOOLEAN Wait, IN ULONG LockKey, IN BOOLEAN CheckForReadOperation, OUT PIO_STATUS_BLOCK IoStatus, IN <a class="el" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> DeviceObject)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>ULONG&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d8/udfdata_8c.html#a36">UdfSerial32</a> (IN PCHAR <a class="el" href="../../d8/d6/ttri_8c.html#a3">Buffer</a>, IN ULONG ByteCount)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d8/udfdata_8c.html#a37">UdfInitializeCrc16</a> (ULONG Polynomial)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a14">USHORT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d8/udfdata_8c.html#a38">UdfComputeCrc16</a> (PUCHAR <a class="el" href="../../d8/d6/ttri_8c.html#a3">Buffer</a>, ULONG ByteCount)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a14">USHORT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d8/udfdata_8c.html#a39">UdfComputeCrc16Uni</a> (PWCHAR <a class="el" href="../../d8/d6/ttri_8c.html#a3">Buffer</a>, ULONG CharCount)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>ULONG&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d8/udfdata_8c.html#a40">UdfHighBit</a> (ULONG Word)</td></tr>

<tr><td colspan=2><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d2/d3/struct__UDF__DATA.html">UDF_DATA</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d8/udfdata_8c.html#a2">UdfData</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d5/d9/struct__FAST__IO__DISPATCH.html">FAST_IO_DISPATCH</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d8/udfdata_8c.html#a3">UdfFastIoDispatch</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>WCHAR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d8/udfdata_8c.html#a4">UdfUnicodeSelfArray</a> [] = { L'.' }</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>WCHAR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d8/udfdata_8c.html#a5">UdfUnicodeParentArray</a> [] = { L'.', L'.' }</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>UNICODE_STRING&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d8/udfdata_8c.html#a6">UdfUnicodeDirectoryNames</a> []</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d2/d1/bench_8h.html#a8">CHAR</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d8/udfdata_8c.html#a7">UdfCS0IdentifierArray</a> []</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>STRING&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d8/udfdata_8c.html#a8">UdfCS0Identifier</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d2/d1/bench_8h.html#a8">CHAR</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d8/udfdata_8c.html#a9">UdfDomainIdentifierArray</a> []</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>STRING&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d8/udfdata_8c.html#a10">UdfDomainIdentifier</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d2/d1/bench_8h.html#a8">CHAR</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d8/udfdata_8c.html#a11">UdfVirtualPartitionDomainIdentifierArray</a> []</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>STRING&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d8/udfdata_8c.html#a12">UdfVirtualPartitionDomainIdentifier</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d2/d1/bench_8h.html#a8">CHAR</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d8/udfdata_8c.html#a13">UdfVatTableIdentifierArray</a> []</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>STRING&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d8/udfdata_8c.html#a14">UdfVatTableIdentifier</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d2/d1/bench_8h.html#a8">CHAR</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d8/udfdata_8c.html#a15">UdfSparablePartitionDomainIdentifierArray</a> []</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>STRING&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d8/udfdata_8c.html#a16">UdfSparablePartitionDomainIdentifier</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d2/d1/bench_8h.html#a8">CHAR</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d8/udfdata_8c.html#a17">UdfSparingTableIdentifierArray</a> []</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>STRING&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d8/udfdata_8c.html#a18">UdfSparingTableIdentifier</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d2/d1/bench_8h.html#a8">CHAR</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d8/udfdata_8c.html#a19">UdfNSR02IdentifierArray</a> [] = NSR_PART_CONTID_NSR02</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>STRING&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d8/udfdata_8c.html#a20">UdfNSR02Identifier</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d2/d8/struct__PARSE__KEYVALUE.html">PARSE_KEYVALUE</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d8/udfdata_8c.html#a21">VsdIdentParseTable</a> []</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d2/d8/struct__PARSE__KEYVALUE.html">PARSE_KEYVALUE</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d8/udfdata_8c.html#a22">NsrPartContIdParseTable</a> []</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d1/d4/struct__NPAGED__LOOKASIDE__LIST.html">NPAGED_LOOKASIDE_LIST</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d8/udfdata_8c.html#a23">UdfFcbNonPagedLookasideList</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d1/d4/struct__NPAGED__LOOKASIDE__LIST.html">NPAGED_LOOKASIDE_LIST</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d8/udfdata_8c.html#a24">UdfIrpContextLookasideList</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d1/d8/struct__PAGED__LOOKASIDE__LIST.html">PAGED_LOOKASIDE_LIST</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d8/udfdata_8c.html#a25">UdfCcbLookasideList</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d1/d8/struct__PAGED__LOOKASIDE__LIST.html">PAGED_LOOKASIDE_LIST</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d8/udfdata_8c.html#a26">UdfFcbIndexLookasideList</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d1/d8/struct__PAGED__LOOKASIDE__LIST.html">PAGED_LOOKASIDE_LIST</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d8/udfdata_8c.html#a27">UdfFcbDataLookasideList</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d1/d8/struct__PAGED__LOOKASIDE__LIST.html">PAGED_LOOKASIDE_LIST</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d8/udfdata_8c.html#a28">UdfLcbLookasideList</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a22">PUSHORT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d8/udfdata_8c.html#a29">UdfCrcTable</a></td></tr>

</table>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="a0" doxytag="udfdata.c::BugCheckFileId" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define BugCheckFileId&nbsp;&nbsp;&nbsp;(UDFS_BUG_CHECK_UDFDATA)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d7/udfdata_8c-source.html#l00030">30</a> of file <a class="el" href="../../d1/d7/udfdata_8c-source.html">udfdata.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="udfdata.c::Dbg" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define Dbg&nbsp;&nbsp;&nbsp;(UDFS_DEBUG_LEVEL_UDFDATA)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d7/udfdata_8c-source.html#l00036">36</a> of file <a class="el" href="../../d1/d7/udfdata_8c-source.html">udfdata.c</a>.    </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="a33" doxytag="udfdata.c::UdfCompleteRequest" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID UdfCompleteRequest           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN <a class="el" href="../../d0/d3/struct__IRP__CONTEXT.html">PIRP_CONTEXT</a> IrpContext&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d2/struct__IRP.html">PIRP</a> <a class="el" href="../../d0/d6/iop_8h.html#a35">Irp</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN NTSTATUS&nbsp;</td>
          <td class="mdname" nowrap> <em>Status</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d7/udfdata_8c-source.html#l00809">809</a> of file <a class="el" href="../../d1/d7/udfdata_8c-source.html">udfdata.c</a>.
<p>
References <a class="el" href="../../d2/d7/udfdata_8h-source.html#l00357">ASSERT_OPTIONAL_IRP</a>, <a class="el" href="../../d2/d7/udfdata_8h-source.html#l00353">ASSERT_OPTIONAL_IRP_CONTEXT</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d6/d4/cc_8h-source.html#l00497">FlagOn</a>, <a class="el" href="../../d1/d4/io_8h-source.html#l01602">_IRP::Flags</a>, <a class="el" href="../../d8/d7/exboosts_8h-source.html#l00063">IO_CD_ROM_INCREMENT</a>, <a class="el" href="../../d1/d4/io_8h-source.html#l02960">IoCompleteRequest</a>, <a class="el" href="../../d1/d4/io_8h-source.html#l01635">_IRP::IoStatus</a>, <a class="el" href="../../d1/d5/iop_8h-source.html#l00130">Irp</a>, <a class="el" href="../../d1/d4/io_8h-source.html#l01556">IRP_INPUT_OPERATION</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00048">NT_ERROR</a>, <a class="el" href="../../d3/d0/cttoken_8c-source.html#l00135">Status</a>, and <a class="el" href="../../d0/d7/udfs_2strucsup_8c-source.html#l01437">UdfCleanupIrpContext()</a>.
<p>
Referenced by <a class="el" href="../../d9/d6/udfs_2cleanup_8c-source.html#l00042">UdfCommonCleanup()</a>, <a class="el" href="../../d3/d8/close_8c-source.html#l00319">UdfCommonClose()</a>, <a class="el" href="../../d4/d7/udfs_2create_8c-source.html#l00108">UdfCommonCreate()</a>, <a class="el" href="../../d3/d6/udfs_2devctrl_8c-source.html#l00069">UdfCommonDevControl()</a>, <a class="el" href="../../d2/d7/dirctrl_8c-source.html#l00255">UdfCommonDirControl()</a>, <a class="el" href="../../d0/d7/udfs_2fsctrl_8c-source.html#l00283">UdfCommonFsControl()</a>, <a class="el" href="../../d3/d4/lockctrl_8c-source.html#l00046">UdfCommonLockControl()</a>, <a class="el" href="../../d5/d8/udfs_2pnp_8c-source.html#l00075">UdfCommonPnp()</a>, <a class="el" href="../../d5/d2/fileinfo_8c-source.html#l00156">UdfCommonQueryInfo()</a>, <a class="el" href="../../d8/d5/volinfo_8c-source.html#l00082">UdfCommonQueryVolInfo()</a>, <a class="el" href="../../d8/d4/udfs_2read_8c-source.html#l00068">UdfCommonRead()</a>, <a class="el" href="../../d5/d2/fileinfo_8c-source.html#l00385">UdfCommonSetInfo()</a>, <a class="el" href="../../d9/d1/udfs_2cachesup_8c-source.html#l00285">UdfCompleteMdl()</a>, <a class="el" href="../../d0/d7/udfs_2fsctrl_8c-source.html#l00966">UdfDismountVolume()</a>, <a class="el" href="../../d3/d6/udfs_2devctrl_8c-source.html#l00337">UdfDvdReadStructure()</a>, <a class="el" href="../../d3/d6/udfs_2devctrl_8c-source.html#l00227">UdfDvdTransferKey()</a>, <a class="el" href="../../d1/d7/udfdata_8c-source.html#l00218">UdfFsdDispatch()</a>, <a class="el" href="../../d3/d8/close_8c-source.html#l00099">UdfFspClose()</a>, <a class="el" href="../../d1/d7/fspdisp_8c-source.html#l00038">UdfFspDispatch()</a>, <a class="el" href="../../d0/d7/udfs_2fsctrl_8c-source.html#l01271">UdfInvalidateVolumes()</a>, <a class="el" href="../../d0/d7/udfs_2fsctrl_8c-source.html#l01236">UdfIsPathnameValid()</a>, <a class="el" href="../../d0/d7/udfs_2fsctrl_8c-source.html#l01064">UdfIsVolumeDirty()</a>, <a class="el" href="../../d0/d7/udfs_2fsctrl_8c-source.html#l01175">UdfIsVolumeMounted()</a>, <a class="el" href="../../d0/d7/udfs_2fsctrl_8c-source.html#l00780">UdfLockVolume()</a>, <a class="el" href="../../d0/d7/udfs_2fsctrl_8c-source.html#l01444">UdfMountVolume()</a>, <a class="el" href="../../d2/d7/dirctrl_8c-source.html#l00904">UdfNotifyChangeDirectory()</a>, <a class="el" href="../../d3/d8/workque_8c-source.html#l00222">UdfOplockComplete()</a>, <a class="el" href="../../d0/d7/udfs_2fsctrl_8c-source.html#l00470">UdfOplockRequest()</a>, <a class="el" href="../../d9/d4/udfs_2verfysup_8c-source.html#l00042">UdfPerformVerify()</a>, <a class="el" href="../../d5/d8/udfs_2pnp_8c-source.html#l00632">UdfPnpCancelRemove()</a>, <a class="el" href="../../d5/d8/udfs_2pnp_8c-source.html#l00194">UdfPnpQueryRemove()</a>, <a class="el" href="../../d5/d8/udfs_2pnp_8c-source.html#l00350">UdfPnpRemove()</a>, <a class="el" href="../../d5/d8/udfs_2pnp_8c-source.html#l00500">UdfPnpSurpriseRemove()</a>, <a class="el" href="../../d1/d7/udfdata_8c-source.html#l00539">UdfProcessException()</a>, <a class="el" href="../../d2/d7/dirctrl_8c-source.html#l00334">UdfQueryDirectory()</a>, <a class="el" href="../../d3/d8/close_8c-source.html#l00634">UdfQueueClose()</a>, <a class="el" href="../../d0/d7/udfs_2fsctrl_8c-source.html#l00877">UdfUnlockVolume()</a>, <a class="el" href="../../d0/d7/udfs_2fsctrl_8c-source.html#l00363">UdfUserFsctl()</a>, and <a class="el" href="../../d0/d7/udfs_2fsctrl_8c-source.html#l02043">UdfVerifyVolume()</a>.
<p>
<pre class="fragment"><div>00817                    :
00818 
00819     This routine completes a <a class="code" href="../../d0/d6/iop_8h.html#a35">Irp</a> and cleans up <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> IrpContext.  Either or
00820     both of these may not be specified.
00821 
00822 Arguments:
00823 
00824     <a class="code" href="../../d0/d6/iop_8h.html#a35">Irp</a> - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> <a class="code" href="../../d0/d6/iop_8h.html#a35">Irp</a> being processed.
00825 
00826     <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> status to complete <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> <a class="code" href="../../d0/d6/iop_8h.html#a35">Irp</a> with
00827 
00828 Return Value:
00829 
00830     None.
00831 
00832 --*/
00833 
00834 {
00835     <a class="code" href="../../d1/d8/udfdata_8h.html#a29">ASSERT_OPTIONAL_IRP_CONTEXT</a>( IrpContext );
00836     <a class="code" href="../../d1/d8/udfdata_8h.html#a33">ASSERT_OPTIONAL_IRP</a>( Irp );
00837 
00838     <span class="comment">//</span>
00839     <span class="comment">//  Cleanup the IrpContext if passed in here.</span>
00840     <span class="comment">//</span>
00841 
00842     <span class="keywordflow">if</span> (ARGUMENT_PRESENT( IrpContext )) {
00843 
00844         <a class="code" href="../../d3/d8/udfprocs_8h.html#a208">UdfCleanupIrpContext</a>( IrpContext, FALSE );
00845     }
00846 
00847     <span class="comment">//</span>
00848     <span class="comment">//  If we have an Irp then complete the irp.</span>
00849     <span class="comment">//</span>
00850 
00851     <span class="keywordflow">if</span> (ARGUMENT_PRESENT( Irp )) {
00852 
00853         <span class="comment">//</span>
00854         <span class="comment">//  Clear the information field in case we have used this Irp</span>
00855         <span class="comment">//  internally.</span>
00856         <span class="comment">//</span>
00857 
00858         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a3">NT_ERROR</a>( Status ) &amp;&amp;
00859             <a class="code" href="../../d5/d5/cc_8h.html#a58">FlagOn</a>( <a class="code" href="../../d0/d6/iop_8h.html#a35">Irp</a>-&gt;<a class="code" href="../../d0/d2/struct__IRP.html#o3">Flags</a>, IRP_INPUT_OPERATION )) {
00860 
00861             <a class="code" href="../../d0/d6/iop_8h.html#a35">Irp</a>-&gt;<a class="code" href="../../d0/d2/struct__IRP.html#o9">IoStatus</a>.Information = 0;
00862         }
00863 
00864         <a class="code" href="../../d0/d6/iop_8h.html#a35">Irp</a>-&gt;<a class="code" href="../../d0/d2/struct__IRP.html#o9">IoStatus</a>.Status = <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
00865         <a class="code" href="../../d0/d5/io_8h.html#a224">IoCompleteRequest</a>( Irp, IO_CD_ROM_INCREMENT );
00866     }
00867 
00868     <span class="keywordflow">return</span>;
00869 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a38" doxytag="udfdata.c::UdfComputeCrc16" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a14">USHORT</a> UdfComputeCrc16           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">PUCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>Buffer</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>ByteCount</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d7/udfdata_8c-source.html#l01146">1146</a> of file <a class="el" href="../../d1/d7/udfdata_8c-source.html">udfdata.c</a>.
<p>
References <a class="el" href="../../d7/d1/rtqkey_8c-source.html#l00042">Buffer</a>, <a class="el" href="../../d1/d7/udfdata_8c-source.html#l00202">UdfCrcTable</a>, and <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00064">USHORT</a>.
<p>
<pre class="fragment"><div>01153                    :
01154 
01155     This routine generates a 16 bit CRC of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> input buffer in accordance
01156     with <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> precomputed CRC table.
01157 
01158 Arguments:
01159 
01160     <a class="code" href="../../d6/d2/rtqkey_8c.html#a3">Buffer</a> - Pointer to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> buffer to generate <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> CRC <span class="keywordflow">for</span>.
01161 
01162     ByteCount - Number of bytes in <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> buffer.
01163 
01164 Return Value:
01165 
01166     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> - The 16bit CRC
01167 
01168 --*/
01169 
01170 {
01171         <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> Crc = 0;
01172 
01173     <span class="comment">//</span>
01174     <span class="comment">//  All CRC code was devised by Don P. Mitchell of AT&amp;T Bell Laboratories</span>
01175     <span class="comment">//  and Ned W. Rhodes of Software Systems Group.  It has been published in</span>
01176     <span class="comment">//  "Design and Validation of Computer Protocols", Prentice Hall, Englewood</span>
01177     <span class="comment">//  Cliffs, NJ, 1991, Chapter 3, ISBN 0-13-539925-4.</span>
01178     <span class="comment">//</span>
01179     <span class="comment">//  Copyright is held by AT&amp;T.</span>
01180     <span class="comment">//</span>
01181     <span class="comment">//  AT&amp;T gives permission for the free use of the source code.</span>
01182     <span class="comment">//</span>
01183 
01184     <span class="keywordflow">while</span> (ByteCount-- &gt; 0) {
01185 
01186         Crc = <a class="code" href="../../d0/d8/udfdata_8c.html#a29">UdfCrcTable</a>[((Crc &gt;&gt; 8) ^ *<a class="code" href="../../d6/d2/rtqkey_8c.html#a3">Buffer</a>++) &amp; 0xff] ^ (Crc &lt;&lt; 8);
01187     }
01188 
01189         <span class="keywordflow">return</span> Crc;
01190 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a39" doxytag="udfdata.c::UdfComputeCrc16Uni" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a14">USHORT</a> UdfComputeCrc16Uni           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">PWCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>Buffer</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>CharCount</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d7/udfdata_8c-source.html#l01194">1194</a> of file <a class="el" href="../../d1/d7/udfdata_8c-source.html">udfdata.c</a>.
<p>
References <a class="el" href="../../d7/d1/rtqkey_8c-source.html#l00042">Buffer</a>, <a class="el" href="../../d1/d7/udfdata_8c-source.html#l00202">UdfCrcTable</a>, and <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00064">USHORT</a>.
<p>
Referenced by <a class="el" href="../../d6/d4/namesup_8c-source.html#l00389">UdfGenerate8dot3Name()</a>, and <a class="el" href="../../d6/d4/namesup_8c-source.html#l00927">UdfRenderNameToLegalUnicode()</a>.
<p>
<pre class="fragment"><div>01201                    :
01202 
01203     This routine generates a 16 bit CRC of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> input buffer in accordance
01204     with <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> precomputed CRC table.
01205     
01206     It performs a byte-order independent crc (hi then lo). This <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> a bit
01207     suspect, but <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> called <span class="keywordflow">for</span> in <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> specification. 
01208 
01209 Arguments:
01210 
01211     <a class="code" href="../../d6/d2/rtqkey_8c.html#a3">Buffer</a> - Pointer to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> buffer to generate <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> CRC <span class="keywordflow">for</span>.
01212 
01213     ShortCount - Number of wide characters in <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> buffer.
01214 
01215 Return Value:
01216 
01217     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> - The 16bit CRC
01218 
01219 --*/
01220 
01221 {
01222     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> Crc = 0;
01223 
01224     <span class="comment">//</span>
01225     <span class="comment">//  Byte order independent CRC, hi byte to low byte per character.</span>
01226     <span class="comment">//</span>
01227 
01228     <span class="keywordflow">while</span> (CharCount-- &gt; 0) {
01229 
01230         Crc = <a class="code" href="../../d0/d8/udfdata_8c.html#a29">UdfCrcTable</a>[((Crc &gt;&gt; 8) ^ (*<a class="code" href="../../d6/d2/rtqkey_8c.html#a3">Buffer</a> &gt;&gt; 8)) &amp; 0xff] ^ (Crc &lt;&lt; 8);
01231         Crc = <a class="code" href="../../d0/d8/udfdata_8c.html#a29">UdfCrcTable</a>[((Crc &gt;&gt; 8) ^ (*<a class="code" href="../../d6/d2/rtqkey_8c.html#a3">Buffer</a>++ &amp; 0xff)) &amp; 0xff] ^ (Crc &lt;&lt; 8);
01232     }
01233 
01234     <span class="keywordflow">return</span> Crc;
01235 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a31" doxytag="udfdata.c::UdfExceptionFilter" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LONG UdfExceptionFilter           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN <a class="el" href="../../d0/d3/struct__IRP__CONTEXT.html">PIRP_CONTEXT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>IrpContext</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PEXCEPTION_POINTERS&nbsp;</td>
          <td class="mdname" nowrap> <em>ExceptionPointer</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d7/udfdata_8c-source.html#l00448">448</a> of file <a class="el" href="../../d1/d7/udfdata_8c-source.html">udfdata.c</a>.
<p>
References <a class="el" href="../../d2/d7/udfdata_8h-source.html#l00353">ASSERT_OPTIONAL_IRP_CONTEXT</a>, <a class="el" href="../../d0/d5/cdfs__rec_8c-source.html#l00032">Dbg</a>, <a class="el" href="../../d6/d4/cc_8h-source.html#l02290">DebugTrace</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00055">EXCEPTION_EXECUTE_HANDLER</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d8/d2/fsrtl_2filter_8c-source.html#l00082">FsRtlIsNtstatusExpected()</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d2/d6/udfs_2nodetype_8h-source.html#l00149">UdfBugCheck</a>.
<p>
Referenced by <a class="el" href="../../d0/d7/udfs_2fsctrl_8c-source.html#l02558">UdfFindFileSetDescriptor()</a>, <a class="el" href="../../d1/d7/udfdata_8c-source.html#l00218">UdfFsdDispatch()</a>, <a class="el" href="../../d1/d7/fspdisp_8c-source.html#l00038">UdfFspDispatch()</a>, <a class="el" href="../../d4/d7/udfs_2create_8c-source.html#l01244">UdfOpenObjectByFileId()</a>, <a class="el" href="../../d9/d4/udfs_2verfysup_8c-source.html#l00042">UdfPerformVerify()</a>, and <a class="el" href="../../d1/d7/udfdata_8c-source.html#l00539">UdfProcessException()</a>.
<p>
<pre class="fragment"><div>00455                    :
00456 
00457     This routine <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> used to decide whether we will handle a raised exception
00458     status.  If UDFS explicitly raised an error then <span class="keyword">this</span> status <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> already
00459     in <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> IrpContext.  We choose which <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> correct status code and
00460     either indicate that we will handle <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> exception or bug-check <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> system.
00461 
00462 Arguments:
00463 
00464     ExceptionCode - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> exception code to being checked.
00465 
00466 Return Value:
00467 
00468     ULONG - returns <a class="code" href="../../d6/d7/halmips_8h.html#a33">EXCEPTION_EXECUTE_HANDLER</a> or bugchecks
00469 
00470 --*/
00471 
00472 {
00473     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> ExceptionCode;
00474     BOOLEAN TestStatus = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00475 
00476     <a class="code" href="../../d1/d8/udfdata_8h.html#a29">ASSERT_OPTIONAL_IRP_CONTEXT</a>( IrpContext );
00477 
00478     ExceptionCode = ExceptionPointer-&gt;ExceptionRecord-&gt;ExceptionCode;
00479 
00480     <a class="code" href="../../d5/d5/cc_8h.html#a91">DebugTrace</a>(( 0, Dbg,
00481                  <span class="stringliteral">"UdfExceptionFilter: %08x (exr %08x cxr %08x)\n"</span>,
00482                  ExceptionCode,
00483                  ExceptionPointer-&gt;ExceptionRecord,
00484                  ExceptionPointer-&gt;ContextRecord ));
00485 
00486 
00487     <span class="comment">//</span>
00488     <span class="comment">// If the exception is STATUS_IN_PAGE_ERROR, get the I/O error code</span>
00489     <span class="comment">// from the exception record.</span>
00490     <span class="comment">//</span>
00491 
00492     <span class="keywordflow">if</span> ((ExceptionCode == STATUS_IN_PAGE_ERROR) &amp;&amp;
00493         (ExceptionPointer-&gt;ExceptionRecord-&gt;NumberParameters &gt;= 3)) {
00494 
00495         ExceptionCode = (<a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>) ExceptionPointer-&gt;ExceptionRecord-&gt;ExceptionInformation[2];
00496     }
00497 
00498     <span class="comment">//</span>
00499     <span class="comment">//  If there is an Irp context then check which status code to use.</span>
00500     <span class="comment">//</span>
00501 
00502     <span class="keywordflow">if</span> (ARGUMENT_PRESENT( IrpContext )) {
00503 
00504         <span class="keywordflow">if</span> (IrpContext-&gt;ExceptionStatus == STATUS_SUCCESS) {
00505 
00506             <span class="comment">//</span>
00507             <span class="comment">//  Store the real status into the IrpContext.</span>
00508             <span class="comment">//</span>
00509 
00510             IrpContext-&gt;ExceptionStatus = ExceptionCode;
00511 
00512         } <span class="keywordflow">else</span> {
00513 
00514             <span class="comment">//</span>
00515             <span class="comment">//  No need to test the status code if we raised it ourselves.</span>
00516             <span class="comment">//</span>
00517 
00518             TestStatus = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00519         }
00520     }
00521 
00522     <span class="comment">//</span>
00523     <span class="comment">//  Bug check if this status is not supported.</span>
00524     <span class="comment">//</span>
00525 
00526     <span class="keywordflow">if</span> (TestStatus &amp;&amp; !<a class="code" href="../../d1/d8/fsrtl_8h.html#a137">FsRtlIsNtstatusExpected</a>( ExceptionCode )) {
00527 
00528         <a class="code" href="../../d1/d7/udfs_2nodetype_8h.html#a66">UdfBugCheck</a>( (ULONG_PTR) ExceptionPointer-&gt;ExceptionRecord,
00529                      (ULONG_PTR) ExceptionPointer-&gt;ContextRecord,
00530                      (ULONG_PTR) ExceptionPointer-&gt;ExceptionRecord-&gt;ExceptionAddress );
00531 
00532     }
00533 
00534     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a33">EXCEPTION_EXECUTE_HANDLER</a>;
00535 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a35" doxytag="udfdata.c::UdfFastIoCheckIfPossible" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOLEAN UdfFastIoCheckIfPossible           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN <a class="el" href="../../d9/d1/struct__FILE__OBJECT.html">PFILE_OBJECT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>FileObject</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PLARGE_INTEGER&nbsp;</td>
          <td class="mdname" nowrap> <em>FileOffset</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>Length</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN BOOLEAN&nbsp;</td>
          <td class="mdname" nowrap> <em>Wait</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>LockKey</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN BOOLEAN&nbsp;</td>
          <td class="mdname" nowrap> <em>CheckForReadOperation</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PIO_STATUS_BLOCK&nbsp;</td>
          <td class="mdname" nowrap> <em>IoStatus</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>DeviceObject</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d7/udfdata_8c-source.html#l00972">972</a> of file <a class="el" href="../../d1/d7/udfdata_8c-source.html">udfdata.c</a>.
<p>
References <a class="el" href="../../d1/d8/ntosdef_8h-source.html#l00462">PAGED_CODE</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d3/d7/udfinit_8c-source.html#l00183">UdfInitializeGlobalData()</a>.
<p>
<pre class="fragment"><div>00985                    :
00986 
00987     This routine checks <span class="keywordflow">if</span> fast i/o <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> possible <span class="keywordflow">for</span> a read/write operation
00988 
00989 Arguments:
00990 
00991     FileObject - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a9">file</a> object used in <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> query
00992 
00993     FileOffset - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> starting byte offset <span class="keywordflow">for</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> read/write operation
00994 
00995     Length - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> length, in bytes, of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> read/write operation
00996 
00997     Wait - Indicates <span class="keywordflow">if</span> we can wait
00998 
00999     LockKey - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> lock key
01000 
01001     CheckForReadOperation - Indicates <span class="keywordflow">if</span> <span class="keyword">this</span> <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> a check <span class="keywordflow">for</span> a read or write
01002         operation
01003 
01004     IoStatus - Receives <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> status of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> operation <span class="keywordflow">if</span> our <span class="keywordflow">return</span> value <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a>
01005         FastIoReturnError
01006 
01007 Return Value:
01008 
01009     BOOLEAN - <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a> <span class="keywordflow">if</span> fast I/O <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> possible and <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a> <span class="keywordflow">if</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> caller needs
01010         to take <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> <span class="keywordtype">long</span> route.
01011 
01012 --*/
01013 
01014 {
01015     <a class="code" href="../../d0/d9/ntosdef_8h.html#a28">PAGED_CODE</a>();
01016 
01017     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01018 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a30" doxytag="udfdata.c::UdfFsdDispatch" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS UdfFsdDispatch           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN <a class="el" href="../../d6/d7/struct__VOLUME__DEVICE__OBJECT.html">PVOLUME_DEVICE_OBJECT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>VolumeDeviceObject</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d2/struct__IRP.html">PIRP</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Irp</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d7/udfdata_8c-source.html#l00218">218</a> of file <a class="el" href="../../d1/d7/udfdata_8c-source.html">udfdata.c</a>.
<p>
References <a class="el" href="../../d7/d4/ntgdi_2icm_2inc_2debug_8h-source.html#l00146">ASSERT</a>, <a class="el" href="../../d2/d7/udfdata_8h-source.html#l00357">ASSERT_OPTIONAL_IRP</a>, <a class="el" href="../../d4/d7/udfprocs_8h-source.html#l00371">CanFsdWait</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d6/d4/cc_8h-source.html#l00497">FlagOn</a>, <a class="el" href="../../d7/d7/udfstruc_8h-source.html#l01186">_IRP_CONTEXT::Flags</a>, <a class="el" href="../../d2/d7/fsrtl_8h-source.html#l01772">FsRtlEnterFileSystem</a>, <a class="el" href="../../d2/d7/fsrtl_8h-source.html#l01795">FsRtlExitFileSystem</a>, <a class="el" href="../../d1/d4/io_8h-source.html#l03252">IoGetCurrentIrpStackLocation</a>, <a class="el" href="../../d5/d5/iosubs_8c-source.html#l07409">IoGetTopLevelIrp()</a>, <a class="el" href="../../d1/d5/iop_8h-source.html#l00130">Irp</a>, <a class="el" href="../../d7/d7/udfstruc_8h-source.html#l01234">IRP_CONTEXT_FLAG_MORE_PROCESSING</a>, <a class="el" href="../../d1/d4/io_8h-source.html#l00073">IRP_MJ_CLEANUP</a>, <a class="el" href="../../d1/d4/io_8h-source.html#l00057">IRP_MJ_CLOSE</a>, <a class="el" href="../../d1/d4/io_8h-source.html#l00055">IRP_MJ_CREATE</a>, <a class="el" href="../../d1/d4/io_8h-source.html#l00069">IRP_MJ_DEVICE_CONTROL</a>, <a class="el" href="../../d1/d4/io_8h-source.html#l00067">IRP_MJ_DIRECTORY_CONTROL</a>, <a class="el" href="../../d1/d4/io_8h-source.html#l00068">IRP_MJ_FILE_SYSTEM_CONTROL</a>, <a class="el" href="../../d1/d4/io_8h-source.html#l00072">IRP_MJ_LOCK_CONTROL</a>, <a class="el" href="../../d1/d4/io_8h-source.html#l00082">IRP_MJ_PNP</a>, <a class="el" href="../../d1/d4/io_8h-source.html#l00060">IRP_MJ_QUERY_INFORMATION</a>, <a class="el" href="../../d1/d4/io_8h-source.html#l00065">IRP_MJ_QUERY_VOLUME_INFORMATION</a>, <a class="el" href="../../d1/d4/io_8h-source.html#l00058">IRP_MJ_READ</a>, <a class="el" href="../../d1/d4/io_8h-source.html#l00061">IRP_MJ_SET_INFORMATION</a>, <a class="el" href="../../d1/d4/io_8h-source.html#l00141">IRP_MN_COMPLETE</a>, <a class="el" href="../../d7/d7/udfstruc_8h-source.html#l01215">_IRP_CONTEXT::MajorFunction</a>, <a class="el" href="../../d7/d7/udfstruc_8h-source.html#l01216">_IRP_CONTEXT::MinorFunction</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d2/d6/udfs_2nodetype_8h-source.html#l00063">SafeNodeType</a>, <a class="el" href="../../d6/d4/cc_8h-source.html#l00505">SetFlag</a>, <a class="el" href="../../d3/d0/cttoken_8c-source.html#l00135">Status</a>, <a class="el" href="../../d6/d8/udfstruc_8h.html#a98">THREAD_CONTEXT</a>, <a class="el" href="../../d3/d0/cttoken_8c-source.html#l00137">ThreadContext</a>, <a class="el" href="../../d7/d7/udfstruc_8h-source.html#l01209">_IRP_CONTEXT::TopLevel</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d0/d7/udfs_2strucsup_8c-source.html#l01437">UdfCleanupIrpContext()</a>, <a class="el" href="../../d9/d6/udfs_2cleanup_8c-source.html#l00042">UdfCommonCleanup()</a>, <a class="el" href="../../d3/d8/close_8c-source.html#l00319">UdfCommonClose()</a>, <a class="el" href="../../d4/d7/udfs_2create_8c-source.html#l00108">UdfCommonCreate()</a>, <a class="el" href="../../d3/d6/udfs_2devctrl_8c-source.html#l00069">UdfCommonDevControl()</a>, <a class="el" href="../../d2/d7/dirctrl_8c-source.html#l00255">UdfCommonDirControl()</a>, <a class="el" href="../../d0/d7/udfs_2fsctrl_8c-source.html#l00283">UdfCommonFsControl()</a>, <a class="el" href="../../d3/d4/lockctrl_8c-source.html#l00046">UdfCommonLockControl()</a>, <a class="el" href="../../d5/d8/udfs_2pnp_8c-source.html#l00075">UdfCommonPnp()</a>, <a class="el" href="../../d5/d2/fileinfo_8c-source.html#l00156">UdfCommonQueryInfo()</a>, <a class="el" href="../../d8/d5/volinfo_8c-source.html#l00082">UdfCommonQueryVolInfo()</a>, <a class="el" href="../../d8/d4/udfs_2read_8c-source.html#l00068">UdfCommonRead()</a>, <a class="el" href="../../d5/d2/fileinfo_8c-source.html#l00385">UdfCommonSetInfo()</a>, <a class="el" href="../../d9/d1/udfs_2cachesup_8c-source.html#l00285">UdfCompleteMdl()</a>, <a class="el" href="../../d1/d7/udfdata_8c-source.html#l00809">UdfCompleteRequest()</a>, <a class="el" href="../../d0/d7/udfs_2strucsup_8c-source.html#l01301">UdfCreateIrpContext()</a>, <a class="el" href="../../d1/d7/udfdata_8c-source.html#l00448">UdfExceptionFilter()</a>, <a class="el" href="../../d1/d7/udfdata_8c-source.html#l00539">UdfProcessException()</a>, <a class="el" href="../../d2/d6/udfs_2nodetype_8h-source.html#l00041">UDFS_NTC_IRP_CONTEXT</a>, and <a class="el" href="../../d1/d7/udfdata_8c-source.html#l00873">UdfSetThreadContext()</a>.
<p>
<pre class="fragment"><div>00225                    :
00226 
00227     This <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> driver entry to all of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> Fsd dispatch points.
00228 
00229     Conceptually <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> Io routine will call <span class="keyword">this</span> routine on all requests
00230     to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a9">file</a> system.  We <span class="keywordflow">case</span> on <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> <a class="code" href="../../d3/d5/i386_2trapc_8c.html#a9">type</a> of request and invoke <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a>
00231     correct handler <span class="keywordflow">for</span> <span class="keyword">this</span> <a class="code" href="../../d3/d5/i386_2trapc_8c.html#a9">type</a> of request.  There <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> an exception filter
00232     to <span class="keywordflow">catch</span> any exceptions in <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> UDFS code as well as <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> UDFS process
00233     exception routine.
00234 
00235     This routine allocates and initializes <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> IrpContext <span class="keywordflow">for</span> <span class="keyword">this</span> request as
00236     well as updating <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> top-level thread context as necessary.  We may loop
00237     in <span class="keyword">this</span> routine <span class="keywordflow">if</span> we need to retry <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> request <span class="keywordflow">for</span> any <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a10">reason</a>.  The
00238     status code STATUS_CANT_WAIT <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> used to indicate <span class="keyword">this</span>.  Suppose <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> disk
00239     in <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> drive has changed.  An Fsd request will proceed normally until <a class="code" href="../../d1/d9/icmui_8def.html#a4">it</a>
00240     recognizes <span class="keyword">this</span> condition.  STATUS_VERIFY_REQUIRED <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> raised at that point
00241     and <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> exception code will handle <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> verify and either <span class="keywordflow">return</span>
00242     STATUS_CANT_WAIT or STATUS_PENDING depending on whether <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> request was
00243     posted.
00244 
00245 Arguments:
00246 
00247     VolumeDeviceObject - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> volume device object <span class="keywordflow">for</span> <span class="keyword">this</span> request
00248 
00249     <a class="code" href="../../d0/d6/iop_8h.html#a35">Irp</a> - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> <a class="code" href="../../d0/d6/iop_8h.html#a35">Irp</a> being processed
00250 
00251 Return Value:
00252 
00253     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> - The FSD status <span class="keywordflow">for</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> <a class="code" href="../../d0/d2/struct__IRP.html">IRP</a>
00254 
00255 --*/
00256 
00257 {
00258     <a class="code" href="../../d0/d1/struct__THREAD__CONTEXT.html">THREAD_CONTEXT</a> <a class="code" href="../../d2/d1/cttoken_8c.html#a62">ThreadContext</a>;
00259     <a class="code" href="../../d0/d3/struct__IRP__CONTEXT.html">PIRP_CONTEXT</a> IrpContext = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00260     BOOLEAN Wait;
00261 
00262 <span class="preprocessor">#ifdef UDF_SANITY</span>
00263 <span class="preprocessor"></span>    PVOID PreviousTopLevel;
00264 <span class="preprocessor">#endif</span>
00265 <span class="preprocessor"></span>
00266     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
00267 
00268     KIRQL SaveIrql = KeGetCurrentIrql();
00269 
00270     <a class="code" href="../../d1/d8/udfdata_8h.html#a33">ASSERT_OPTIONAL_IRP</a>( Irp );
00271 
00272     <a class="code" href="../../d1/d8/fsrtl_8h.html#a48">FsRtlEnterFileSystem</a>();
00273 
00274 <span class="preprocessor">#ifdef UDF_SANITY</span>
00275 <span class="preprocessor"></span>    PreviousTopLevel = <a class="code" href="../../d4/d6/iosubs_8c.html#a79">IoGetTopLevelIrp</a>();
00276 <span class="preprocessor">#endif</span>
00277 <span class="preprocessor"></span>
00278     <span class="comment">//</span>
00279     <span class="comment">//  Loop until this request has been completed or posted.</span>
00280     <span class="comment">//</span>
00281 
00282     <span class="keywordflow">do</span> {
00283 
00284         <span class="comment">//</span>
00285         <span class="comment">//  Use a try-except to handle the exception cases.</span>
00286         <span class="comment">//</span>
00287 
00288         <span class="keywordflow">try</span> {
00289 
00290             <span class="comment">//</span>
00291             <span class="comment">//  If the IrpContext is NULL then this is the first pass through</span>
00292             <span class="comment">//  this loop.</span>
00293             <span class="comment">//</span>
00294 
00295             <span class="keywordflow">if</span> (IrpContext == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00296 
00297                 <span class="comment">//</span>
00298                 <span class="comment">//  Decide if this request is waitable an allocate the IrpContext.</span>
00299                 <span class="comment">//  If the file object in the stack location is NULL then this</span>
00300                 <span class="comment">//  is a mount which is always waitable.  Otherwise we look at</span>
00301                 <span class="comment">//  the file object flags.</span>
00302                 <span class="comment">//</span>
00303 
00304                 <span class="keywordflow">if</span> (<a class="code" href="../../d0/d5/io_8h.html#a228">IoGetCurrentIrpStackLocation</a>( Irp )-&gt;FileObject == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00305 
00306                     Wait = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00307 
00308                 } <span class="keywordflow">else</span> {
00309 
00310                     Wait = <a class="code" href="../../d3/d8/udfprocs_8h.html#a62">CanFsdWait</a>( Irp );
00311                 }
00312 
00313                 IrpContext = <a class="code" href="../../d3/d8/udfprocs_8h.html#a207">UdfCreateIrpContext</a>( Irp, Wait );
00314 
00315                 <span class="comment">//</span>
00316                 <span class="comment">//  Update the thread context information.</span>
00317                 <span class="comment">//</span>
00318 
00319                 <a class="code" href="../../d3/d8/udfprocs_8h.html#a130">UdfSetThreadContext</a>( IrpContext, &amp;ThreadContext );
00320 
00321 <span class="preprocessor">#ifdef UDF_SANITY</span>
00322 <span class="preprocessor"></span>                <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>( !UdfTestTopLevel ||
00323                         <a class="code" href="../../d1/d7/udfs_2nodetype_8h.html#a12">SafeNodeType</a>( IrpContext-&gt;<a class="code" href="../../d0/d3/struct__IRP__CONTEXT.html#o9">TopLevel</a> ) == UDFS_NTC_IRP_CONTEXT );
00324 <span class="preprocessor">#endif</span>
00325 <span class="preprocessor"></span>
00326             <span class="comment">//</span>
00327             <span class="comment">//  Otherwise cleanup the IrpContext for the retry.</span>
00328             <span class="comment">//</span>
00329 
00330             } <span class="keywordflow">else</span> {
00331 
00332                 <span class="comment">//</span>
00333                 <span class="comment">//  Set the MORE_PROCESSING flag to make sure the IrpContext</span>
00334                 <span class="comment">//  isn't inadvertently deleted here.  Then cleanup the</span>
00335                 <span class="comment">//  IrpContext to perform the retry.</span>
00336                 <span class="comment">//</span>
00337 
00338                 <a class="code" href="../../d5/d5/cc_8h.html#a60">SetFlag</a>( IrpContext-&gt;<a class="code" href="../../d0/d3/struct__IRP__CONTEXT.html#o5">Flags</a>, IRP_CONTEXT_FLAG_MORE_PROCESSING );
00339                 <a class="code" href="../../d3/d8/udfprocs_8h.html#a208">UdfCleanupIrpContext</a>( IrpContext, FALSE );
00340             }
00341 
00342             <span class="comment">//</span>
00343             <span class="comment">//  Case on the major irp code.</span>
00344             <span class="comment">//</span>
00345 
00346             <span class="keywordflow">switch</span> (IrpContext-&gt;<a class="code" href="../../d0/d3/struct__IRP__CONTEXT.html#o10">MajorFunction</a>) {
00347 
00348                 <span class="keywordflow">case</span> <a class="code" href="../../d0/d5/io_8h.html#a31">IRP_MJ_CLEANUP</a> :
00349                     
00350                     <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d3/d8/udfprocs_8h.html#a251">UdfCommonCleanup</a>( IrpContext, Irp );
00351                     <span class="keywordflow">break</span>;
00352     
00353                 <span class="keywordflow">case</span> <a class="code" href="../../d0/d5/io_8h.html#a15">IRP_MJ_CLOSE</a> :
00354 
00355                     <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d3/d8/udfprocs_8h.html#a252">UdfCommonClose</a>( IrpContext, Irp );
00356                     <span class="keywordflow">break</span>;
00357 
00358                 <span class="keywordflow">case</span> <a class="code" href="../../d0/d5/io_8h.html#a13">IRP_MJ_CREATE</a> :
00359                     
00360                     <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d3/d8/udfprocs_8h.html#a253">UdfCommonCreate</a>( IrpContext, Irp );
00361                     <span class="keywordflow">break</span>;
00362     
00363                 <span class="keywordflow">case</span> <a class="code" href="../../d0/d5/io_8h.html#a27">IRP_MJ_DEVICE_CONTROL</a> :
00364     
00365                     <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d3/d8/udfprocs_8h.html#a254">UdfCommonDevControl</a>( IrpContext, Irp );
00366                     <span class="keywordflow">break</span>;
00367     
00368                 <span class="keywordflow">case</span> <a class="code" href="../../d0/d5/io_8h.html#a25">IRP_MJ_DIRECTORY_CONTROL</a> :
00369 
00370                     <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d3/d8/udfprocs_8h.html#a255">UdfCommonDirControl</a>( IrpContext, Irp );
00371                     <span class="keywordflow">break</span>;
00372 
00373                 <span class="keywordflow">case</span> <a class="code" href="../../d0/d5/io_8h.html#a26">IRP_MJ_FILE_SYSTEM_CONTROL</a> :
00374     
00375                     <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d3/d8/udfprocs_8h.html#a256">UdfCommonFsControl</a>( IrpContext, Irp );
00376                     <span class="keywordflow">break</span>;
00377 
00378                 <span class="keywordflow">case</span> <a class="code" href="../../d0/d5/io_8h.html#a30">IRP_MJ_LOCK_CONTROL</a> :
00379 
00380                     <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d3/d8/udfprocs_8h.html#a257">UdfCommonLockControl</a>( IrpContext, Irp );
00381                     <span class="keywordflow">break</span>;
00382 
00383                 <span class="keywordflow">case</span> <a class="code" href="../../d0/d5/io_8h.html#a40">IRP_MJ_PNP</a> :
00384 
00385                     <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d3/d8/udfprocs_8h.html#a258">UdfCommonPnp</a>( IrpContext, Irp );
00386                     <span class="keywordflow">break</span>;
00387 
00388                 <span class="keywordflow">case</span> <a class="code" href="../../d0/d5/io_8h.html#a18">IRP_MJ_QUERY_INFORMATION</a> :
00389 
00390                     <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d3/d8/udfprocs_8h.html#a259">UdfCommonQueryInfo</a>( IrpContext, Irp );
00391                     <span class="keywordflow">break</span>;
00392                 
00393                 <span class="keywordflow">case</span> <a class="code" href="../../d0/d5/io_8h.html#a23">IRP_MJ_QUERY_VOLUME_INFORMATION</a> :
00394 
00395                     <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d7/d6/volinfo_8c.html#a6">UdfCommonQueryVolInfo</a>( IrpContext, Irp );
00396                     <span class="keywordflow">break</span>;
00397                 
00398                 <span class="keywordflow">case</span> <a class="code" href="../../d0/d5/io_8h.html#a16">IRP_MJ_READ</a> :
00399     
00400                     <span class="comment">//</span>
00401                     <span class="comment">//  If this is an Mdl complete request, don't go through</span>
00402                     <span class="comment">//  common read.</span>
00403                     <span class="comment">//</span>
00404     
00405                     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d5/cc_8h.html#a58">FlagOn</a>( IrpContext-&gt;<a class="code" href="../../d0/d3/struct__IRP__CONTEXT.html#o11">MinorFunction</a>, IRP_MN_COMPLETE )) {
00406     
00407                         <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d3/d8/udfprocs_8h.html#a156">UdfCompleteMdl</a>( IrpContext, Irp );
00408     
00409                     } <span class="keywordflow">else</span> {
00410     
00411                         <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d3/d8/udfprocs_8h.html#a261">UdfCommonRead</a>( IrpContext, Irp );
00412                     }
00413     
00414                     <span class="keywordflow">break</span>;
00415 
00416                 <span class="keywordflow">case</span> <a class="code" href="../../d0/d5/io_8h.html#a19">IRP_MJ_SET_INFORMATION</a> :
00417 
00418                     <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d3/d8/udfprocs_8h.html#a262">UdfCommonSetInfo</a>( IrpContext, Irp );
00419                     <span class="keywordflow">break</span>;
00420                 
00421                 <span class="keywordflow">default</span> :
00422                             
00423                     <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = STATUS_INVALID_DEVICE_REQUEST;
00424                     <a class="code" href="../../d3/d8/udfprocs_8h.html#a129">UdfCompleteRequest</a>( IrpContext, Irp, Status );
00425             }
00426 
00427         } except( <a class="code" href="../../d3/d8/udfprocs_8h.html#a127">UdfExceptionFilter</a>( IrpContext, GetExceptionInformation() )) {
00428 
00429             <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d3/d8/udfprocs_8h.html#a128">UdfProcessException</a>( IrpContext, Irp, GetExceptionCode() );
00430         }
00431 
00432     } <span class="keywordflow">while</span> (<a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> == STATUS_CANT_WAIT);
00433 
00434 <span class="preprocessor">#ifdef UDF_SANITY</span>
00435 <span class="preprocessor"></span>    <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>( !UdfTestTopLevel ||
00436             (PreviousTopLevel == <a class="code" href="../../d4/d6/iosubs_8c.html#a79">IoGetTopLevelIrp</a>()) );
00437 <span class="preprocessor">#endif</span>
00438 <span class="preprocessor"></span>
00439     <a class="code" href="../../d1/d8/fsrtl_8h.html#a49">FsRtlExitFileSystem</a>();
00440 
00441     <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>( SaveIrql == KeGetCurrentIrql( ));
00442 
00443     <span class="keywordflow">return</span> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
00444 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a40" doxytag="udfdata.c::UdfHighBit" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ULONG UdfHighBit           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">ULONG&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>Word</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d7/udfdata_8c-source.html#l01239">1239</a> of file <a class="el" href="../../d1/d7/udfdata_8c-source.html">udfdata.c</a>.
<p>
References <a class="el" href="../../d5/d8/heapdbg_8c-source.html#l00033">Offset</a>.
<p>
Referenced by <a class="el" href="../../d0/d7/udfs_2strucsup_8c-source.html#l00331">UdfInitializeVcb()</a>, and <a class="el" href="../../d0/d7/udfs_2fsctrl_8c-source.html#l01444">UdfMountVolume()</a>.
<p>
<pre class="fragment"><div>01245                    :
01246 
01247     This routine discovers <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> highest set bit of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> input word.  It <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a>
01248     equivalent to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> integer logarithim base 2.
01249 
01250 Arguments:
01251 
01252     Word - word to check
01253 
01254 Return Value:
01255 
01256     Bit offset of highest set bit. If no bit <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> set, <span class="keywordflow">return</span> <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> zero.
01257 
01258 --*/
01259 
01260 {
01261     ULONG <a class="code" href="../../d4/d9/heapdbg_8c.html#a3">Offset</a> = 31;
01262     ULONG Mask = (ULONG)(1 &lt;&lt; 31);
01263 
01264     <span class="keywordflow">if</span> (Word == 0) {
01265 
01266         <span class="keywordflow">return</span> 0;
01267     }
01268 
01269     <span class="keywordflow">while</span> ((Word &amp; Mask) == 0) {
01270 
01271         <a class="code" href="../../d4/d9/heapdbg_8c.html#a3">Offset</a>--;
01272         Mask &gt;&gt;= 1;
01273     }
01274 
01275     <span class="keywordflow">return</span> <a class="code" href="../../d4/d9/heapdbg_8c.html#a3">Offset</a>;
01276 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a37" doxytag="udfdata.c::UdfInitializeCrc16" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID UdfInitializeCrc16           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">ULONG&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>Polynomial</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d7/udfdata_8c-source.html#l01083">1083</a> of file <a class="el" href="../../d1/d7/udfdata_8c-source.html">udfdata.c</a>.
<p>
References <a class="el" href="../../d2/d7/fsrtl_8h-source.html#l01101">FsRtlAllocatePoolWithTag</a>, <a class="el" href="../../d8/d9/exts_8h-source.html#l00092">n</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00085">PUSHORT</a>, <a class="el" href="../../d2/d6/udfs_2nodetype_8h-source.html#l00159">TAG_CRC_TABLE</a>, <a class="el" href="../../d1/d7/udfdata_8c-source.html#l00202">UdfCrcTable</a>, <a class="el" href="../../d4/d7/udfprocs_8h-source.html#l00443">UdfPagedPool</a>, and <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00064">USHORT</a>.
<p>
Referenced by <a class="el" href="../../d3/d7/udfinit_8c-source.html#l00183">UdfInitializeGlobalData()</a>.
<p>
<pre class="fragment"><div>01089                    :
01090 
01091     This routine generates <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> 16bit CRC Table to be used in CRC calculation.
01092 
01093 Arguments:
01094 
01095     Polynomial - Starting seed <span class="keywordflow">for</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> generation
01096 
01097 Return Value:
01098 
01099     None
01100 
01101 --*/
01102 
01103 {
01104     ULONG <a class="code" href="../../d7/d0/exts_8h.html#a0">n</a>, i, Crc;
01105 
01106     <span class="comment">//</span>
01107     <span class="comment">//  All CRC code was devised by Don P. Mitchell of AT&amp;T Bell Laboratories</span>
01108     <span class="comment">//  and Ned W. Rhodes of Software Systems Group.  It has been published in</span>
01109     <span class="comment">//  "Design and Validation of Computer Protocols", Prentice Hall, Englewood</span>
01110     <span class="comment">//  Cliffs, NJ, 1991, Chapter 3, ISBN 0-13-539925-4.</span>
01111     <span class="comment">//</span>
01112     <span class="comment">//  Copyright is held by AT&amp;T.</span>
01113     <span class="comment">//</span>
01114     <span class="comment">//  AT&amp;T gives permission for the free use of the source code.</span>
01115     <span class="comment">//</span>
01116 
01117     <a class="code" href="../../d0/d8/udfdata_8c.html#a29">UdfCrcTable</a> = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a22">PUSHORT</a>) <a class="code" href="../../d1/d8/fsrtl_8h.html#a37">FsRtlAllocatePoolWithTag</a>( UdfPagedPool,
01118                                                       256 * <span class="keyword">sizeof</span>(USHORT),
01119                                                       TAG_CRC_TABLE );
01120 
01121     <span class="keywordflow">for</span> (<a class="code" href="../../d7/d0/exts_8h.html#a0">n</a> = 0; <a class="code" href="../../d7/d0/exts_8h.html#a0">n</a> &lt; 256; <a class="code" href="../../d7/d0/exts_8h.html#a0">n</a>++) {
01122 
01123         Crc = <a class="code" href="../../d7/d0/exts_8h.html#a0">n</a> &lt;&lt; 8;
01124 
01125         <span class="keywordflow">for</span> (i = 0; i &lt; 8; i++) {
01126 
01127             <span class="keywordflow">if</span>(Crc &amp; 0x8000) {
01128 
01129                 Crc = (Crc &lt;&lt; 1) ^ Polynomial;
01130 
01131             } <span class="keywordflow">else</span> {
01132 
01133                 Crc &lt;&lt;= 1;
01134             }
01135 
01136             Crc &amp;= 0xffff;
01137         }
01138 
01139         <a class="code" href="../../d0/d8/udfdata_8c.html#a29">UdfCrcTable</a>[<a class="code" href="../../d7/d0/exts_8h.html#a0">n</a>] = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a>) Crc;
01140     }
01141 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a32" doxytag="udfdata.c::UdfProcessException" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS UdfProcessException           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN <a class="el" href="../../d0/d3/struct__IRP__CONTEXT.html">PIRP_CONTEXT</a> IrpContext&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d2/struct__IRP.html">PIRP</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Irp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN NTSTATUS&nbsp;</td>
          <td class="mdname" nowrap> <em>ExceptionCode</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d7/udfdata_8c-source.html#l00539">539</a> of file <a class="el" href="../../d1/d7/udfdata_8c-source.html">udfdata.c</a>.
<p>
References <a class="el" href="../../d7/d6/halmips_8h-source.html#l00086">APC_LEVEL</a>, <a class="el" href="../../d7/d4/ntgdi_2icm_2inc_2debug_8h-source.html#l00146">ASSERT</a>, <a class="el" href="../../d2/d7/udfdata_8h-source.html#l00356">ASSERT_IRP</a>, <a class="el" href="../../d2/d7/udfdata_8h-source.html#l00353">ASSERT_OPTIONAL_IRP_CONTEXT</a>, <a class="el" href="../../d6/d4/cc_8h-source.html#l00509">ClearFlag</a>, <a class="el" href="../../d6/d4/cc_8h-source.html#l00497">FlagOn</a>, <a class="el" href="../../d1/d4/io_8h-source.html#l03252">IoGetCurrentIrpStackLocation</a>, <a class="el" href="../../d5/d5/iosubs_8c-source.html#l07093">IoGetDeviceToVerify()</a>, <a class="el" href="../../d1/d4/io_8h-source.html#l03528">IoIsErrorUserInduced</a>, <a class="el" href="../../d1/d4/io_8h-source.html#l03620">IoMarkIrpPending</a>, <a class="el" href="../../d5/d5/iosubs_8c-source.html#l08769">IoRaiseHardError()</a>, <a class="el" href="../../d5/d5/iosubs_8c-source.html#l09757">IoSetDeviceToVerify()</a>, <a class="el" href="../../d1/d4/io_8h-source.html#l01635">_IRP::IoStatus</a>, <a class="el" href="../../d1/d5/iop_8h-source.html#l00130">Irp</a>, <a class="el" href="../../d7/d7/udfstruc_8h-source.html#l01242">IRP_CONTEXT_FLAG_DISABLE_POPUPS</a>, <a class="el" href="../../d7/d7/udfstruc_8h-source.html#l01236">IRP_CONTEXT_FLAG_FORCE_POST</a>, <a class="el" href="../../d7/d7/udfstruc_8h-source.html#l01234">IRP_CONTEXT_FLAG_MORE_PROCESSING</a>, <a class="el" href="../../d7/d7/udfstruc_8h-source.html#l01237">IRP_CONTEXT_FLAG_TOP_LEVEL</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d2/d8/ps_8h-source.html#l00645">PsGetCurrentThread</a>, <a class="el" href="../../d0/d2/struct__IRP.html#o38">_IRP::Tail</a>, <a class="el" href="../../d1/d7/udfdata_8c-source.html#l00809">UdfCompleteRequest()</a>, <a class="el" href="../../d1/d7/udfdata_8c-source.html#l00448">UdfExceptionFilter()</a>, <a class="el" href="../../d3/d8/workque_8c-source.html#l00061">UdfFsdPostRequest()</a>, and <a class="el" href="../../d9/d4/udfs_2verfysup_8c-source.html#l00042">UdfPerformVerify()</a>.
<p>
Referenced by <a class="el" href="../../d1/d7/udfdata_8c-source.html#l00218">UdfFsdDispatch()</a>, <a class="el" href="../../d1/d7/fspdisp_8c-source.html#l00038">UdfFspDispatch()</a>, and <a class="el" href="../../d9/d4/udfs_2verfysup_8c-source.html#l00042">UdfPerformVerify()</a>.
<p>
<pre class="fragment"><div>00547                    :
00548 
00549     This routine processes an exception.  It either completes <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> request
00550     with <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> exception status in <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> IrpContext, sends <span class="keyword">this</span> off to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> Fsp
00551     workque or causes <a class="code" href="../../d1/d9/icmui_8def.html#a4">it</a> to be retried in <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> current thread <span class="keywordflow">if</span> a verification
00552     <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> needed.
00553 
00554     If <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> volume needs to be verified (STATUS_VERIFY_REQUIRED) and we can
00555     do the work in the current thread we will translate the status code
00556     to STATUS_CANT_WAIT to indicate that we need to retry the request.
00557 
00558 Arguments:
00559 
00560     Irp - Supplies the Irp being processed
00561 
00562     ExceptionCode - Supplies the normalized exception status being handled
00563 
00564 Return Value:
00565 
00566     NTSTATUS - Returns the results of either posting the Irp or the
00567         saved completion status.
00568 
00569 --*/
00570 
00571 {
00572     <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> Device;
00573     <a class="code" href="../../d7/d7/struct__VPB.html">PVPB</a> Vpb;
00574     <a class="code" href="../../d5/d6/struct__ETHREAD.html">PETHREAD</a> Thread;
00575 
00576     <a class="code" href="../../d1/d8/udfdata_8h.html#a29">ASSERT_OPTIONAL_IRP_CONTEXT</a>( IrpContext );
00577     <a class="code" href="../../d1/d8/udfdata_8h.html#a32">ASSERT_IRP</a>( Irp );
00578 
00579     <span class="comment">//</span>
00580     <span class="comment">//  If there is not an irp context, then complete the request with the</span>
00581     <span class="comment">//  current status code.</span>
00582     <span class="comment">//</span>
00583 
00584     <span class="keywordflow">if</span> (!ARGUMENT_PRESENT( IrpContext )) {
00585 
00586         <a class="code" href="../../d3/d8/udfprocs_8h.html#a129">UdfCompleteRequest</a>( NULL, Irp, ExceptionCode );
00587         <span class="keywordflow">return</span> ExceptionCode;
00588     }
00589 
00590     <span class="comment">//</span>
00591     <span class="comment">//  Get the real exception status from the IrpContext.</span>
00592     <span class="comment">//</span>
00593 
00594     ExceptionCode = IrpContext-&gt;ExceptionStatus;
00595 
00596     <span class="comment">//</span>
00597     <span class="comment">//  If we are not a top level request then we just complete the request</span>
00598     <span class="comment">//  with the current status code.</span>
00599     <span class="comment">//</span>
00600 
00601     <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d5/cc_8h.html#a58">FlagOn</a>( IrpContext-&gt;Flags, IRP_CONTEXT_FLAG_TOP_LEVEL )) {
00602 
00603         <a class="code" href="../../d3/d8/udfprocs_8h.html#a129">UdfCompleteRequest</a>( IrpContext, Irp, ExceptionCode );
00604 
00605         <span class="keywordflow">return</span> ExceptionCode;
00606     }
00607 
00608     <span class="comment">//</span>
00609     <span class="comment">//  Check if we are posting this request.  One of the following must be true</span>
00610     <span class="comment">//  if we are to post a request.</span>
00611     <span class="comment">//</span>
00612     <span class="comment">//      - Status code is STATUS_CANT_WAIT and the request is asynchronous</span>
00613     <span class="comment">//          or we are forcing this to be posted.</span>
00614     <span class="comment">//</span>
00615     <span class="comment">//      - Status code is STATUS_VERIFY_REQUIRED and we are at APC level</span>
00616     <span class="comment">//          or higher.  Can't wait for IO in the verify path in this case.</span>
00617     <span class="comment">//</span>
00618     <span class="comment">//  Set the MORE_PROCESSING flag in the IrpContext to keep if from being</span>
00619     <span class="comment">//  deleted if this is a retryable condition.</span>
00620     <span class="comment">//</span>
00621     <span class="comment">//  Note:  Children of UdfFsdPostRequest() can raise.</span>
00622     <span class="comment">//</span>
00623 
00624     <span class="keywordflow">try</span> {
00625     
00626         <span class="keywordflow">if</span> (ExceptionCode == STATUS_CANT_WAIT) {
00627 
00628             <span class="keywordflow">if</span> (<a class="code" href="../../d5/d5/cc_8h.html#a58">FlagOn</a>( IrpContext-&gt;Flags, IRP_CONTEXT_FLAG_FORCE_POST )) {
00629 
00630                 ExceptionCode = <a class="code" href="../../d2/d9/workque_8c.html#a4">UdfFsdPostRequest</a>( IrpContext, Irp );
00631             }
00632 
00633         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ExceptionCode == STATUS_VERIFY_REQUIRED) {
00634 
00635             <span class="keywordflow">if</span> (KeGetCurrentIrql() &gt;= <a class="code" href="../../d6/d7/halmips_8h.html#a52">APC_LEVEL</a>) {
00636 
00637                 ExceptionCode = <a class="code" href="../../d2/d9/workque_8c.html#a4">UdfFsdPostRequest</a>( IrpContext, Irp );
00638             }
00639         }
00640     }
00641     except (<a class="code" href="../../d3/d8/udfprocs_8h.html#a127">UdfExceptionFilter</a>( IrpContext, GetExceptionInformation()))  {
00642     
00643         ExceptionCode = GetExceptionCode(); 
00644     }
00645 
00646     <span class="comment">//</span>
00647     <span class="comment">//  If we posted the request or our caller will retry then just return here.</span>
00648     <span class="comment">//</span>
00649 
00650     <span class="keywordflow">if</span> ((ExceptionCode == STATUS_PENDING) ||
00651         (ExceptionCode == STATUS_CANT_WAIT)) {
00652 
00653         <span class="keywordflow">return</span> ExceptionCode;
00654     }
00655 
00656     <a class="code" href="../../d5/d5/cc_8h.html#a61">ClearFlag</a>( IrpContext-&gt;Flags, IRP_CONTEXT_FLAG_MORE_PROCESSING );
00657 
00658     <span class="comment">//</span>
00659     <span class="comment">//  Store this error into the Irp for posting back to the Io system.</span>
00660     <span class="comment">//</span>
00661 
00662     <a class="code" href="../../d0/d6/iop_8h.html#a35">Irp</a>-&gt;<a class="code" href="../../d0/d2/struct__IRP.html#o9">IoStatus</a>.Status = ExceptionCode;
00663 
00664     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d5/io_8h.html#a232">IoIsErrorUserInduced</a>( ExceptionCode )) {
00665 
00666         <span class="comment">//</span>
00667         <span class="comment">//  Check for the various error conditions that can be caused by,</span>
00668         <span class="comment">//  and possibly resolved my the user.</span>
00669         <span class="comment">//</span>
00670 
00671         <span class="keywordflow">if</span> (ExceptionCode == STATUS_VERIFY_REQUIRED) {
00672 
00673             <span class="comment">//</span>
00674             <span class="comment">//  Now we are at the top level file system entry point.</span>
00675             <span class="comment">//</span>
00676             <span class="comment">//  If we have already posted this request then the device to</span>
00677             <span class="comment">//  verify is in the original thread.  Find this via the Irp.</span>
00678             <span class="comment">//</span>
00679 
00680             Device = <a class="code" href="../../d4/d6/iosubs_8c.html#a72">IoGetDeviceToVerify</a>( <a class="code" href="../../d0/d6/iop_8h.html#a35">Irp</a>-&gt;<a class="code" href="../../d0/d2/struct__IRP.html#o38">Tail</a>.Overlay.Thread );
00681             <a class="code" href="../../d4/d6/iosubs_8c.html#a104">IoSetDeviceToVerify</a>( <a class="code" href="../../d0/d6/iop_8h.html#a35">Irp</a>-&gt;<a class="code" href="../../d0/d2/struct__IRP.html#o38">Tail</a>.Overlay.Thread, NULL );
00682 
00683             <span class="comment">//</span>
00684             <span class="comment">//  If there is no device in that location then check in the</span>
00685             <span class="comment">//  current thread.</span>
00686             <span class="comment">//</span>
00687 
00688             <span class="keywordflow">if</span> (Device == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00689 
00690                 Device = <a class="code" href="../../d4/d6/iosubs_8c.html#a72">IoGetDeviceToVerify</a>( <a class="code" href="../../d1/d9/ps_8h.html#a20">PsGetCurrentThread</a>() );
00691                 <a class="code" href="../../d4/d6/iosubs_8c.html#a104">IoSetDeviceToVerify</a>( <a class="code" href="../../d1/d9/ps_8h.html#a20">PsGetCurrentThread</a>(), NULL );
00692 
00693                 <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>( Device != NULL );
00694 
00695                 <span class="comment">//</span>
00696                 <span class="comment">//  Let's not BugCheck just because the driver screwed up.</span>
00697                 <span class="comment">//</span>
00698 
00699                 <span class="keywordflow">if</span> (Device == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00700 
00701                     ExceptionCode = STATUS_DRIVER_INTERNAL_ERROR;
00702 
00703                     <a class="code" href="../../d3/d8/udfprocs_8h.html#a129">UdfCompleteRequest</a>( IrpContext, Irp, ExceptionCode );
00704 
00705                     <span class="keywordflow">return</span> ExceptionCode;
00706                 }
00707             }
00708 
00709             <span class="comment">//</span>
00710             <span class="comment">//  CdPerformVerify() will do the right thing with the Irp.</span>
00711             <span class="comment">//  If we return STATUS_CANT_WAIT then the current thread</span>
00712             <span class="comment">//  can retry the request.</span>
00713             <span class="comment">//</span>
00714 
00715             <span class="keywordflow">return</span> <a class="code" href="../../d8/d5/udfs_2verfysup_8c.html#a2">UdfPerformVerify</a>( IrpContext, Irp, Device );
00716         }
00717 
00718         <span class="comment">//</span>
00719         <span class="comment">//  The other user induced conditions generate an error unless</span>
00720         <span class="comment">//  they have been disabled for this request.</span>
00721         <span class="comment">//</span>
00722 
00723         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d5/cc_8h.html#a58">FlagOn</a>( IrpContext-&gt;Flags, IRP_CONTEXT_FLAG_DISABLE_POPUPS )) {
00724 
00725             <a class="code" href="../../d3/d8/udfprocs_8h.html#a129">UdfCompleteRequest</a>( IrpContext, Irp, ExceptionCode );
00726 
00727             <span class="keywordflow">return</span> ExceptionCode;
00728 
00729         } <span class="keywordflow">else</span> {
00730 
00731             <span class="comment">//</span>
00732             <span class="comment">//  Generate a pop-up</span>
00733             <span class="comment">//</span>
00734 
00735             <span class="keywordflow">if</span> (<a class="code" href="../../d0/d5/io_8h.html#a228">IoGetCurrentIrpStackLocation</a>( Irp )-&gt;FileObject != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00736 
00737                 Vpb = <a class="code" href="../../d0/d5/io_8h.html#a228">IoGetCurrentIrpStackLocation</a>( Irp )-&gt;FileObject-&gt;Vpb;
00738 
00739             } <span class="keywordflow">else</span> {
00740 
00741                 Vpb = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00742             }
00743 
00744             <span class="comment">//</span>
00745             <span class="comment">//  The device to verify is either in my thread local storage</span>
00746             <span class="comment">//  or that of the thread that owns the Irp.</span>
00747             <span class="comment">//</span>
00748 
00749             Thread = <a class="code" href="../../d0/d6/iop_8h.html#a35">Irp</a>-&gt;<a class="code" href="../../d0/d2/struct__IRP.html#o38">Tail</a>.Overlay.Thread;
00750             Device = <a class="code" href="../../d4/d6/iosubs_8c.html#a72">IoGetDeviceToVerify</a>( Thread );
00751 
00752             <span class="keywordflow">if</span> (Device == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00753 
00754                 Thread = <a class="code" href="../../d1/d9/ps_8h.html#a20">PsGetCurrentThread</a>();
00755                 Device = <a class="code" href="../../d4/d6/iosubs_8c.html#a72">IoGetDeviceToVerify</a>( Thread );
00756 
00757                 <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>( Device != NULL );
00758 
00759                 <span class="comment">//</span>
00760                 <span class="comment">//  Let's not BugCheck just because the driver screwed up.</span>
00761                 <span class="comment">//</span>
00762 
00763                 <span class="keywordflow">if</span> (Device == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00764 
00765                     <a class="code" href="../../d3/d8/udfprocs_8h.html#a129">UdfCompleteRequest</a>( IrpContext, Irp, ExceptionCode );
00766 
00767                     <span class="keywordflow">return</span> ExceptionCode;
00768                 }
00769             }
00770 
00771             <span class="comment">//</span>
00772             <span class="comment">//  This routine actually causes the pop-up.  It usually</span>
00773             <span class="comment">//  does this by queuing an APC to the callers thread,</span>
00774             <span class="comment">//  but in some cases it will complete the request immediately,</span>
00775             <span class="comment">//  so it is very important to IoMarkIrpPending() first.</span>
00776             <span class="comment">//</span>
00777 
00778             <a class="code" href="../../d0/d5/io_8h.html#a234">IoMarkIrpPending</a>( Irp );
00779             <a class="code" href="../../d4/d6/iosubs_8c.html#a93">IoRaiseHardError</a>( Irp, Vpb, Device );
00780 
00781             <span class="comment">//</span>
00782             <span class="comment">//  We will be handing control back to the caller here, so</span>
00783             <span class="comment">//  reset the saved device object.</span>
00784             <span class="comment">//</span>
00785 
00786             <a class="code" href="../../d4/d6/iosubs_8c.html#a104">IoSetDeviceToVerify</a>( Thread, NULL );
00787 
00788             <span class="comment">//</span>
00789             <span class="comment">//  The Irp will be completed by Io or resubmitted.  In either</span>
00790             <span class="comment">//  case we must clean up the IrpContext here.</span>
00791             <span class="comment">//</span>
00792 
00793             <a class="code" href="../../d3/d8/udfprocs_8h.html#a129">UdfCompleteRequest</a>( IrpContext, NULL, STATUS_SUCCESS );
00794             <span class="keywordflow">return</span> STATUS_PENDING;
00795         }
00796     }
00797 
00798     <span class="comment">//</span>
00799     <span class="comment">//  This is just a run of the mill error.</span>
00800     <span class="comment">//</span>
00801 
00802     <a class="code" href="../../d3/d8/udfprocs_8h.html#a129">UdfCompleteRequest</a>( IrpContext, Irp, ExceptionCode );
00803 
00804     <span class="keywordflow">return</span> ExceptionCode;
00805 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a36" doxytag="udfdata.c::UdfSerial32" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ULONG UdfSerial32           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>Buffer</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>ByteCount</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d7/udfdata_8c-source.html#l01022">1022</a> of file <a class="el" href="../../d1/d7/udfdata_8c-source.html">udfdata.c</a>.
<p>
References <a class="el" href="../../d7/d1/rtqkey_8c-source.html#l00042">Buffer</a>, <a class="el" href="../../d1/d8/ntosdef_8h-source.html#l00462">PAGED_CODE</a>, and <a class="el" href="../../d3/d4/mapper_8c-source.html#l00206">SerialId</a>.
<p>
Referenced by <a class="el" href="../../d0/d7/udfs_2fsctrl_8c-source.html#l04165">UdfUpdateVolumeSerialNumber()</a>.
<p>
<pre class="fragment"><div>01029                    :
01030 
01031     This routine <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> called to generate a 32 bit serial number.  This <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a>
01032     done by doing four separate checksums into an array of bytes and
01033     then treating <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> bytes as a ULONG.
01034 
01035 Arguments:
01036 
01037     <a class="code" href="../../d6/d2/rtqkey_8c.html#a3">Buffer</a> - Pointer to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> buffer to generate <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> <a class="code" href="../../d4/d9/smbtrsup_8c.html#a7">ID</a> <span class="keywordflow">for</span>.
01038 
01039     ByteCount - Number of bytes in <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> buffer.
01040 
01041 Return Value:
01042 
01043     ULONG - The 32 bit serial number.
01044 
01045 --*/
01046 
01047 {
01048     <span class="keyword">union </span>{
01049         UCHAR   Bytes[4];
01050         ULONG   <a class="code" href="../../d2/d5/mapper_8c.html#a30">SerialId</a>;
01051     } Checksum;
01052 
01053     <a class="code" href="../../d0/d9/ntosdef_8h.html#a28">PAGED_CODE</a>();
01054 
01055     <span class="comment">//</span>
01056     <span class="comment">//  Initialize the serial number.</span>
01057     <span class="comment">//</span>
01058 
01059     Checksum.SerialId = 0;
01060 
01061     <span class="comment">//</span>
01062     <span class="comment">//  Continue while there are more bytes to use.</span>
01063     <span class="comment">//</span>
01064 
01065     <span class="keywordflow">while</span> (ByteCount--) {
01066 
01067         <span class="comment">//</span>
01068         <span class="comment">//  Increment this sub-checksum.</span>
01069         <span class="comment">//</span>
01070 
01071         Checksum.Bytes[ByteCount &amp; 0x3] += *(<a class="code" href="../../d6/d2/rtqkey_8c.html#a3">Buffer</a>++);
01072     }
01073 
01074     <span class="comment">//</span>
01075     <span class="comment">//  Return the checksums as a ULONG.</span>
01076     <span class="comment">//</span>
01077 
01078     <span class="keywordflow">return</span> Checksum.SerialId;
01079 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a34" doxytag="udfdata.c::UdfSetThreadContext" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID UdfSetThreadContext           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN <a class="el" href="../../d0/d3/struct__IRP__CONTEXT.html">PIRP_CONTEXT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>IrpContext</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d1/struct__THREAD__CONTEXT.html">PTHREAD_CONTEXT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ThreadContext</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d7/udfdata_8c-source.html#l00873">873</a> of file <a class="el" href="../../d1/d7/udfdata_8c-source.html">udfdata.c</a>.
<p>
References <a class="el" href="../../d2/d7/udfdata_8h-source.html#l00352">ASSERT_IRP_CONTEXT</a>, <a class="el" href="../../d6/d4/cc_8h-source.html#l00497">FlagOn</a>, <a class="el" href="../../d0/d5/io_8h.html#a508">IoGetStackLimits()</a>, <a class="el" href="../../d5/d5/iosubs_8c-source.html#l07409">IoGetTopLevelIrp()</a>, <a class="el" href="../../d5/d5/iosubs_8c-source.html#l10321">IoSetTopLevelIrp()</a>, <a class="el" href="../../d7/d7/udfstruc_8h-source.html#l01237">IRP_CONTEXT_FLAG_TOP_LEVEL</a>, <a class="el" href="../../d7/d7/udfstruc_8h-source.html#l01238">IRP_CONTEXT_FLAG_TOP_LEVEL_UDFS</a>, <a class="el" href="../../d4/d7/udfprocs_8h-source.html#l00174">LongOffsetPtr</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d8/ntosdef_8h-source.html#l00462">PAGED_CODE</a>, <a class="el" href="../../d6/d8/udfstruc_8h.html#a99">PTHREAD_CONTEXT</a>, <a class="el" href="../../d6/d4/cc_8h-source.html#l00505">SetFlag</a>, <a class="el" href="../../d3/d0/cttoken_8c-source.html#l00137">ThreadContext</a>, <a class="el" href="../../d7/d7/udfstruc_8h-source.html#l01400">_THREAD_CONTEXT::TopLevelIrpContext</a>, <a class="el" href="../../d7/d7/udfstruc_8h-source.html#l01386">_THREAD_CONTEXT::Udfs</a>, and <a class="el" href="../../d2/d7/udfdata_8h-source.html#l00062">UDFS_SIGNATURE</a>.
<p>
Referenced by <a class="el" href="../../d1/d7/udfdata_8c-source.html#l00218">UdfFsdDispatch()</a>, <a class="el" href="../../d3/d8/close_8c-source.html#l00099">UdfFspClose()</a>, and <a class="el" href="../../d1/d7/fspdisp_8c-source.html#l00038">UdfFspDispatch()</a>.
<p>
<pre class="fragment"><div>00880                    :
00881 
00882     This routine <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> called at each Fsd/Fsp entry point set up <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> IrpContext
00883     and thread local storage to track top level requests.  If there <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a>
00884     not a Udfs context in <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> thread local storage then we use <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> input one.
00885     Otherwise we use <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> one already there.  This routine also updates <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a>
00886     IrpContext based on <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> state of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> top-level context.
00887 
00888     If <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> TOP_LEVEL flag in <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> IrpContext <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> already set when we are called
00889     then we force <span class="keyword">this</span> request to appear top level.
00890 
00891 Arguments:
00892 
00893     <a class="code" href="../../d2/d1/cttoken_8c.html#a62">ThreadContext</a> - Address on stack <span class="keywordflow">for</span> local storage <span class="keywordflow">if</span> not already present.
00894 
00895     ForceTopLevel - We force <span class="keyword">this</span> request to appear top level regardless of
00896         any previous stack value.
00897 
00898 Return Value:
00899 
00900     None
00901 
00902 --*/
00903 
00904 {
00905     <a class="code" href="../../d0/d1/struct__THREAD__CONTEXT.html">PTHREAD_CONTEXT</a> CurrentThreadContext;
00906     ULONG_PTR StackTop;
00907     ULONG_PTR StackBottom;
00908 
00909     <a class="code" href="../../d0/d9/ntosdef_8h.html#a28">PAGED_CODE</a>();
00910 
00911     <a class="code" href="../../d1/d8/udfdata_8h.html#a28">ASSERT_IRP_CONTEXT</a>( IrpContext );
00912 
00913     <span class="comment">//</span>
00914     <span class="comment">//  Get the current top-level irp out of the thread storage.</span>
00915     <span class="comment">//  If NULL then this is the top-level request.</span>
00916     <span class="comment">//</span>
00917 
00918     CurrentThreadContext = (<a class="code" href="../../d0/d1/struct__THREAD__CONTEXT.html">PTHREAD_CONTEXT</a>) <a class="code" href="../../d4/d6/iosubs_8c.html#a79">IoGetTopLevelIrp</a>();
00919 
00920     <span class="keywordflow">if</span> (CurrentThreadContext == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00921 
00922         <a class="code" href="../../d5/d5/cc_8h.html#a60">SetFlag</a>( IrpContext-&gt;Flags, IRP_CONTEXT_FLAG_TOP_LEVEL );
00923     }
00924 
00925     <span class="comment">//</span>
00926     <span class="comment">//  Initialize the input context unless we are using the current</span>
00927     <span class="comment">//  thread context block.  We use the new block if our caller</span>
00928     <span class="comment">//  specified this or the existing block is invalid.</span>
00929     <span class="comment">//</span>
00930     <span class="comment">//  The following must be true for the current to be a valid Udfs context.</span>
00931     <span class="comment">//</span>
00932     <span class="comment">//      Structure must lie within current stack.</span>
00933     <span class="comment">//      Address must be ULONG aligned.</span>
00934     <span class="comment">//      Udfs signature must be present.</span>
00935     <span class="comment">//</span>
00936     <span class="comment">//  If this is not a valid Udfs context then use the input thread</span>
00937     <span class="comment">//  context and store it in the top level context.</span>
00938     <span class="comment">//</span>
00939 
00940     <a class="code" href="../../d0/d5/io_8h.html#a508">IoGetStackLimits</a>( &amp;StackTop, &amp;StackBottom);
00941 
00942     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d5/cc_8h.html#a58">FlagOn</a>( IrpContext-&gt;Flags, IRP_CONTEXT_FLAG_TOP_LEVEL ) ||
00943         (((ULONG_PTR) CurrentThreadContext &gt; StackBottom - <span class="keyword">sizeof</span>( <a class="code" href="../../d0/d1/struct__THREAD__CONTEXT.html">THREAD_CONTEXT</a> )) ||
00944          ((ULONG_PTR) CurrentThreadContext &lt;= StackTop) ||
00945          <a class="code" href="../../d3/d8/udfprocs_8h.html#a30">LongOffsetPtr</a>( CurrentThreadContext ) ||
00946          (CurrentThreadContext-&gt;<a class="code" href="../../d0/d1/struct__THREAD__CONTEXT.html#o0">Udfs</a> != <a class="code" href="../../d1/d8/udfdata_8h.html#a4">UDFS_SIGNATURE</a>))) {
00947 
00948         <a class="code" href="../../d2/d1/cttoken_8c.html#a62">ThreadContext</a>-&gt;Udfs = <a class="code" href="../../d1/d8/udfdata_8h.html#a4">UDFS_SIGNATURE</a>;
00949         <a class="code" href="../../d2/d1/cttoken_8c.html#a62">ThreadContext</a>-&gt;SavedTopLevelIrp = (<a class="code" href="../../d0/d2/struct__IRP.html">PIRP</a>) CurrentThreadContext;
00950         <a class="code" href="../../d2/d1/cttoken_8c.html#a62">ThreadContext</a>-&gt;TopLevelIrpContext = IrpContext;
00951         <a class="code" href="../../d4/d6/iosubs_8c.html#a109">IoSetTopLevelIrp</a>( (<a class="code" href="../../d0/d2/struct__IRP.html">PIRP</a>) ThreadContext );
00952 
00953         IrpContext-&gt;TopLevel = IrpContext;
00954         IrpContext-&gt;ThreadContext = <a class="code" href="../../d2/d1/cttoken_8c.html#a62">ThreadContext</a>;
00955 
00956         <a class="code" href="../../d5/d5/cc_8h.html#a60">SetFlag</a>( IrpContext-&gt;Flags, IRP_CONTEXT_FLAG_TOP_LEVEL_UDFS );
00957 
00958     <span class="comment">//</span>
00959     <span class="comment">//  Otherwise use the IrpContext in the thread context.</span>
00960     <span class="comment">//</span>
00961 
00962     } <span class="keywordflow">else</span> {
00963 
00964         IrpContext-&gt;TopLevel = CurrentThreadContext-&gt;<a class="code" href="../../d0/d1/struct__THREAD__CONTEXT.html#o2">TopLevelIrpContext</a>;
00965     }
00966 
00967     <span class="keywordflow">return</span>;
00968 }

</div></pre>    </td>
  </tr>
</table>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="a22" doxytag="udfdata.c::NsrPartContIdParseTable" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d2/d8/struct__PARSE__KEYVALUE.html">PARSE_KEYVALUE</a> <a class="el" href="../../d1/d8/udfdata_8h.html#a64">NsrPartContIdParseTable</a>[]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Initial value:</b><pre class="fragment"><div> {
    { <a class="code" href="../../d0/d7/iso13346_8h.html#a68">NSR_PART_CONTID_FDC01</a>, <a class="code" href="../../d0/d7/iso13346_8h.html#a279a272">NsrPartContIdFDC01</a> },
    { <a class="code" href="../../d0/d7/iso13346_8h.html#a69">NSR_PART_CONTID_CD001</a>, <a class="code" href="../../d0/d7/iso13346_8h.html#a279a273">NsrPartContIdCD001</a> },
    { <a class="code" href="../../d0/d7/iso13346_8h.html#a70">NSR_PART_CONTID_CDW01</a>, <a class="code" href="../../d0/d7/iso13346_8h.html#a279a274">NsrPartContIdCDW01</a> },
    { <a class="code" href="../../d0/d7/iso13346_8h.html#a71">NSR_PART_CONTID_CDW02</a>, <a class="code" href="../../d0/d7/iso13346_8h.html#a279a275">NsrPartContIdCDW02</a> },
    { <a class="code" href="../../d0/d7/iso13346_8h.html#a72">NSR_PART_CONTID_NSR01</a>, <a class="code" href="../../d0/d7/iso13346_8h.html#a279a276">NsrPartContIdNSR01</a> },
    { <a class="code" href="../../d0/d7/iso13346_8h.html#a73">NSR_PART_CONTID_NSR02</a>, <a class="code" href="../../d0/d7/iso13346_8h.html#a279a277">NsrPartContIdNSR02</a> },
    { <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>,                  <a class="code" href="../../d0/d7/iso13346_8h.html#a279a271">NsrPartContIdBad</a> }
    }
</div></pre>
<p>
Definition at line <a class="el" href="../../d1/d7/udfdata_8c-source.html#l00176">176</a> of file <a class="el" href="../../d1/d7/udfdata_8c-source.html">udfdata.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a25" doxytag="udfdata.c::UdfCcbLookasideList" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d1/d8/struct__PAGED__LOOKASIDE__LIST.html">PAGED_LOOKASIDE_LIST</a> <a class="el" href="../../d1/d8/udfdata_8h.html#a67">UdfCcbLookasideList</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d7/udfdata_8c-source.html#l00193">193</a> of file <a class="el" href="../../d1/d7/udfdata_8c-source.html">udfdata.c</a>.
<p>
Referenced by <a class="el" href="../../d3/d7/udfinit_8c-source.html#l00183">UdfInitializeGlobalData()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a29" doxytag="udfdata.c::UdfCrcTable" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a22">PUSHORT</a> <a class="el" href="../../d1/d8/udfdata_8h.html#a71">UdfCrcTable</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d7/udfdata_8c-source.html#l00202">202</a> of file <a class="el" href="../../d1/d7/udfdata_8c-source.html">udfdata.c</a>.
<p>
Referenced by <a class="el" href="../../d1/d7/udfdata_8c-source.html#l01146">UdfComputeCrc16()</a>, <a class="el" href="../../d1/d7/udfdata_8c-source.html#l01194">UdfComputeCrc16Uni()</a>, and <a class="el" href="../../d1/d7/udfdata_8c-source.html#l01083">UdfInitializeCrc16()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a8" doxytag="udfdata.c::UdfCS0Identifier" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> STRING <a class="el" href="../../d1/d8/udfdata_8h.html#a56">UdfCS0Identifier</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Initial value:</b><pre class="fragment"><div> {
    <span class="keyword">sizeof</span>(<a class="code" href="../../d0/d8/udfdata_8c.html#a7">UdfCS0IdentifierArray</a>),
    <span class="keyword">sizeof</span>(<a class="code" href="../../d0/d8/udfdata_8c.html#a7">UdfCS0IdentifierArray</a>),
    <a class="code" href="../../d0/d8/udfdata_8c.html#a7">UdfCS0IdentifierArray</a>
    }
</div></pre>
<p>
Definition at line <a class="el" href="../../d1/d7/udfdata_8c-source.html#l00094">94</a> of file <a class="el" href="../../d1/d7/udfdata_8c-source.html">udfdata.c</a>.
<p>
Referenced by <a class="el" href="../../d0/d7/udfs_2fsctrl_8c-source.html#l02832">UdfFindVolumeDescriptors()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a7" doxytag="udfdata.c::UdfCS0IdentifierArray" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d2/d1/bench_8h.html#a8">CHAR</a> <a class="el" href="../../d0/d8/udfdata_8c.html#a7">UdfCS0IdentifierArray</a>[]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Initial value:</b><pre class="fragment"><div> { <span class="charliteral">'O'</span>, <span class="charliteral">'S'</span>, <span class="charliteral">'T'</span>, <span class="charliteral">'A'</span>,  ,
                                 <span class="charliteral">'C'</span>, <span class="charliteral">'o'</span>, <span class="charliteral">'m'</span>, <span class="charliteral">'p'</span>, <span class="charliteral">'r'</span>, <span class="charliteral">'e'</span>, <span class="charliteral">'s'</span>, <span class="charliteral">'s'</span>, <span class="charliteral">'e'</span>, <span class="charliteral">'d'</span>,  ,
                                 <span class="charliteral">'U'</span>, <span class="charliteral">'n'</span>, <span class="charliteral">'i'</span>, <span class="charliteral">'c'</span>, <span class="charliteral">'o'</span>, <span class="charliteral">'d'</span>, <span class="charliteral">'e'</span> }
</div></pre>
<p>
Definition at line <a class="el" href="../../d1/d7/udfdata_8c-source.html#l00090">90</a> of file <a class="el" href="../../d1/d7/udfdata_8c-source.html">udfdata.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="udfdata.c::UdfData" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d2/d3/struct__UDF__DATA.html">UDF_DATA</a> <a class="el" href="../../d1/d8/udfdata_8h.html#a51">UdfData</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d7/udfdata_8c-source.html#l00042">42</a> of file <a class="el" href="../../d1/d7/udfdata_8c-source.html">udfdata.c</a>.
<p>
Referenced by <a class="el" href="../../d8/d4/udfs_2read_8c-source.html#l00068">UdfCommonRead()</a>, <a class="el" href="../../d9/d1/udfs_2cachesup_8c-source.html#l00046">UdfCreateInternalStream()</a>, <a class="el" href="../../d0/d7/udfs_2strucsup_8c-source.html#l01301">UdfCreateIrpContext()</a>, <a class="el" href="../../d3/d8/close_8c-source.html#l00099">UdfFspClose()</a>, <a class="el" href="../../d3/d7/udfinit_8c-source.html#l00183">UdfInitializeGlobalData()</a>, <a class="el" href="../../d0/d7/udfs_2strucsup_8c-source.html#l00331">UdfInitializeVcb()</a>, <a class="el" href="../../d0/d7/udfs_2fsctrl_8c-source.html#l01271">UdfInvalidateVolumes()</a>, <a class="el" href="../../d0/d7/udfs_2fsctrl_8c-source.html#l02439">UdfIsRemount()</a>, <a class="el" href="../../d0/d7/udfs_2fsctrl_8c-source.html#l01444">UdfMountVolume()</a>, <a class="el" href="../../d3/d8/close_8c-source.html#l00634">UdfQueueClose()</a>, <a class="el" href="../../d3/d8/close_8c-source.html#l00833">UdfRemoveClose()</a>, and <a class="el" href="../../d0/d7/udfs_2fsctrl_8c-source.html#l03749">UdfScanForDismountedVcb()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a10" doxytag="udfdata.c::UdfDomainIdentifier" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> STRING <a class="el" href="../../d1/d8/udfdata_8h.html#a57">UdfDomainIdentifier</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Initial value:</b><pre class="fragment"><div> {
    <span class="keyword">sizeof</span>(<a class="code" href="../../d0/d8/udfdata_8c.html#a9">UdfDomainIdentifierArray</a>),
    <span class="keyword">sizeof</span>(<a class="code" href="../../d0/d8/udfdata_8c.html#a9">UdfDomainIdentifierArray</a>),
    <a class="code" href="../../d0/d8/udfdata_8c.html#a9">UdfDomainIdentifierArray</a>
    }
</div></pre>
<p>
Definition at line <a class="el" href="../../d1/d7/udfdata_8c-source.html#l00104">104</a> of file <a class="el" href="../../d1/d7/udfdata_8c-source.html">udfdata.c</a>.
<p>
Referenced by <a class="el" href="../../d0/d7/udfs_2fsctrl_8c-source.html#l02832">UdfFindVolumeDescriptors()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a9" doxytag="udfdata.c::UdfDomainIdentifierArray" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d2/d1/bench_8h.html#a8">CHAR</a> <a class="el" href="../../d0/d8/udfdata_8c.html#a9">UdfDomainIdentifierArray</a>[]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Initial value:</b><pre class="fragment"><div> { <span class="charliteral">'*'</span>, <span class="charliteral">'O'</span>, <span class="charliteral">'S'</span>, <span class="charliteral">'T'</span>, <span class="charliteral">'A'</span>,  ,
                                    <span class="charliteral">'U'</span>, <span class="charliteral">'D'</span>, <span class="charliteral">'F'</span>,  ,
                                    <span class="charliteral">'C'</span>, <span class="charliteral">'o'</span>, <span class="charliteral">'m'</span>, <span class="charliteral">'p'</span>, <span class="charliteral">'l'</span>, <span class="charliteral">'i'</span>, <span class="charliteral">'a'</span>, <span class="charliteral">'n'</span>, <span class="charliteral">'t'</span> }
</div></pre>
<p>
Definition at line <a class="el" href="../../d1/d7/udfdata_8c-source.html#l00100">100</a> of file <a class="el" href="../../d1/d7/udfdata_8c-source.html">udfdata.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="udfdata.c::UdfFastIoDispatch" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d5/d9/struct__FAST__IO__DISPATCH.html">FAST_IO_DISPATCH</a> <a class="el" href="../../d1/d8/udfdata_8h.html#a52">UdfFastIoDispatch</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d7/udfdata_8c-source.html#l00043">43</a> of file <a class="el" href="../../d1/d7/udfdata_8c-source.html">udfdata.c</a>.
<p>
Referenced by <a class="el" href="../../d3/d7/udfinit_8c-source.html#l00183">UdfInitializeGlobalData()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a27" doxytag="udfdata.c::UdfFcbDataLookasideList" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d1/d8/struct__PAGED__LOOKASIDE__LIST.html">PAGED_LOOKASIDE_LIST</a> <a class="el" href="../../d1/d8/udfdata_8h.html#a69">UdfFcbDataLookasideList</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d7/udfdata_8c-source.html#l00195">195</a> of file <a class="el" href="../../d1/d7/udfdata_8c-source.html">udfdata.c</a>.
<p>
Referenced by <a class="el" href="../../d3/d7/udfinit_8c-source.html#l00183">UdfInitializeGlobalData()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a26" doxytag="udfdata.c::UdfFcbIndexLookasideList" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d1/d8/struct__PAGED__LOOKASIDE__LIST.html">PAGED_LOOKASIDE_LIST</a> <a class="el" href="../../d1/d8/udfdata_8h.html#a68">UdfFcbIndexLookasideList</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d7/udfdata_8c-source.html#l00194">194</a> of file <a class="el" href="../../d1/d7/udfdata_8c-source.html">udfdata.c</a>.
<p>
Referenced by <a class="el" href="../../d3/d7/udfinit_8c-source.html#l00183">UdfInitializeGlobalData()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a23" doxytag="udfdata.c::UdfFcbNonPagedLookasideList" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d1/d4/struct__NPAGED__LOOKASIDE__LIST.html">NPAGED_LOOKASIDE_LIST</a> <a class="el" href="../../d1/d8/udfdata_8h.html#a65">UdfFcbNonPagedLookasideList</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d7/udfdata_8c-source.html#l00190">190</a> of file <a class="el" href="../../d1/d7/udfdata_8c-source.html">udfdata.c</a>.
<p>
Referenced by <a class="el" href="../../d3/d7/udfinit_8c-source.html#l00183">UdfInitializeGlobalData()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a24" doxytag="udfdata.c::UdfIrpContextLookasideList" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d1/d4/struct__NPAGED__LOOKASIDE__LIST.html">NPAGED_LOOKASIDE_LIST</a> <a class="el" href="../../d1/d8/udfdata_8h.html#a66">UdfIrpContextLookasideList</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d7/udfdata_8c-source.html#l00191">191</a> of file <a class="el" href="../../d1/d7/udfdata_8c-source.html">udfdata.c</a>.
<p>
Referenced by <a class="el" href="../../d0/d7/udfs_2strucsup_8c-source.html#l01437">UdfCleanupIrpContext()</a>, <a class="el" href="../../d0/d7/udfs_2strucsup_8c-source.html#l01301">UdfCreateIrpContext()</a>, and <a class="el" href="../../d3/d7/udfinit_8c-source.html#l00183">UdfInitializeGlobalData()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a28" doxytag="udfdata.c::UdfLcbLookasideList" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d1/d8/struct__PAGED__LOOKASIDE__LIST.html">PAGED_LOOKASIDE_LIST</a> <a class="el" href="../../d1/d8/udfdata_8h.html#a70">UdfLcbLookasideList</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d7/udfdata_8c-source.html#l00196">196</a> of file <a class="el" href="../../d1/d7/udfdata_8c-source.html">udfdata.c</a>.
<p>
Referenced by <a class="el" href="../../d3/d7/udfinit_8c-source.html#l00183">UdfInitializeGlobalData()</a>, <a class="el" href="../../d6/d3/prefxsup_8c-source.html#l00064">UdfInsertPrefix()</a>, and <a class="el" href="../../d6/d3/prefxsup_8c-source.html#l00256">UdfRemovePrefix()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a20" doxytag="udfdata.c::UdfNSR02Identifier" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> STRING <a class="el" href="../../d1/d8/udfdata_8h.html#a62">UdfNSR02Identifier</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Initial value:</b><pre class="fragment"><div> {
    <span class="keyword">sizeof</span>(<a class="code" href="../../d0/d8/udfdata_8c.html#a19">UdfNSR02IdentifierArray</a>),
    <span class="keyword">sizeof</span>(<a class="code" href="../../d0/d8/udfdata_8c.html#a19">UdfNSR02IdentifierArray</a>),
    <a class="code" href="../../d0/d8/udfdata_8c.html#a19">UdfNSR02IdentifierArray</a>
    }
</div></pre>
<p>
Definition at line <a class="el" href="../../d1/d7/udfdata_8c-source.html#l00153">153</a> of file <a class="el" href="../../d1/d7/udfdata_8c-source.html">udfdata.c</a>.
<p>
Referenced by <a class="el" href="../../d0/d7/udfs_2fsctrl_8c-source.html#l02832">UdfFindVolumeDescriptors()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a19" doxytag="udfdata.c::UdfNSR02IdentifierArray" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d2/d1/bench_8h.html#a8">CHAR</a> <a class="el" href="../../d0/d8/udfdata_8c.html#a19">UdfNSR02IdentifierArray</a>[] = NSR_PART_CONTID_NSR02          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d7/udfdata_8c-source.html#l00151">151</a> of file <a class="el" href="../../d1/d7/udfdata_8c-source.html">udfdata.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a16" doxytag="udfdata.c::UdfSparablePartitionDomainIdentifier" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> STRING <a class="el" href="../../d1/d8/udfdata_8h.html#a60">UdfSparablePartitionDomainIdentifier</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Initial value:</b><pre class="fragment"><div> {
    <span class="keyword">sizeof</span>(<a class="code" href="../../d0/d8/udfdata_8c.html#a15">UdfSparablePartitionDomainIdentifierArray</a>),
    <span class="keyword">sizeof</span>(<a class="code" href="../../d0/d8/udfdata_8c.html#a15">UdfSparablePartitionDomainIdentifierArray</a>),
    <a class="code" href="../../d0/d8/udfdata_8c.html#a15">UdfSparablePartitionDomainIdentifierArray</a>
    }
</div></pre>
<p>
Definition at line <a class="el" href="../../d1/d7/udfdata_8c-source.html#l00135">135</a> of file <a class="el" href="../../d1/d7/udfdata_8c-source.html">udfdata.c</a>.
<p>
Referenced by <a class="el" href="../../d3/d5/allocsup_8c-source.html#l00367">UdfInitializePcb()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a15" doxytag="udfdata.c::UdfSparablePartitionDomainIdentifierArray" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d2/d1/bench_8h.html#a8">CHAR</a> <a class="el" href="../../d0/d8/udfdata_8c.html#a15">UdfSparablePartitionDomainIdentifierArray</a>[]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Initial value:</b><pre class="fragment"><div> { <span class="charliteral">'*'</span>, <span class="charliteral">'U'</span>, <span class="charliteral">'D'</span>, <span class="charliteral">'F'</span>,  ,
                                                     <span class="charliteral">'S'</span>, <span class="charliteral">'p'</span>, <span class="charliteral">'a'</span>, <span class="charliteral">'r'</span>, <span class="charliteral">'a'</span>, <span class="charliteral">'b'</span>, <span class="charliteral">'l'</span>, <span class="charliteral">'e'</span>,  ,
                                                     <span class="charliteral">'P'</span>, <span class="charliteral">'a'</span>, <span class="charliteral">'r'</span>, <span class="charliteral">'t'</span>, <span class="charliteral">'i'</span>, <span class="charliteral">'t'</span>, <span class="charliteral">'i'</span>, <span class="charliteral">'o'</span>, <span class="charliteral">'n'</span> }
</div></pre>
<p>
Definition at line <a class="el" href="../../d1/d7/udfdata_8c-source.html#l00131">131</a> of file <a class="el" href="../../d1/d7/udfdata_8c-source.html">udfdata.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a18" doxytag="udfdata.c::UdfSparingTableIdentifier" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> STRING <a class="el" href="../../d1/d8/udfdata_8h.html#a61">UdfSparingTableIdentifier</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Initial value:</b><pre class="fragment"><div> {
    <span class="keyword">sizeof</span>(<a class="code" href="../../d0/d8/udfdata_8c.html#a17">UdfSparingTableIdentifierArray</a>),
    <span class="keyword">sizeof</span>(<a class="code" href="../../d0/d8/udfdata_8c.html#a17">UdfSparingTableIdentifierArray</a>),
    <a class="code" href="../../d0/d8/udfdata_8c.html#a17">UdfSparingTableIdentifierArray</a>
    }
</div></pre>
<p>
Definition at line <a class="el" href="../../d1/d7/udfdata_8c-source.html#l00145">145</a> of file <a class="el" href="../../d1/d7/udfdata_8c-source.html">udfdata.c</a>.
<p>
Referenced by <a class="el" href="../../d3/d5/allocsup_8c-source.html#l01406">UdfLoadSparingTables()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a17" doxytag="udfdata.c::UdfSparingTableIdentifierArray" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d2/d1/bench_8h.html#a8">CHAR</a> <a class="el" href="../../d0/d8/udfdata_8c.html#a17">UdfSparingTableIdentifierArray</a>[]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Initial value:</b><pre class="fragment"><div> { <span class="charliteral">'*'</span>, <span class="charliteral">'U'</span>, <span class="charliteral">'D'</span>, <span class="charliteral">'F'</span>,  ,
                                          <span class="charliteral">'S'</span>, <span class="charliteral">'p'</span>, <span class="charliteral">'a'</span>, <span class="charliteral">'r'</span>, <span class="charliteral">'i'</span>, <span class="charliteral">'n'</span>, <span class="charliteral">'g'</span>,  ,
                                          <span class="charliteral">'T'</span>, <span class="charliteral">'a'</span>, <span class="charliteral">'b'</span>, <span class="charliteral">'l'</span>, <span class="charliteral">'e'</span> }
</div></pre>
<p>
Definition at line <a class="el" href="../../d1/d7/udfdata_8c-source.html#l00141">141</a> of file <a class="el" href="../../d1/d7/udfdata_8c-source.html">udfdata.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a6" doxytag="udfdata.c::UdfUnicodeDirectoryNames" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> UNICODE_STRING <a class="el" href="../../d1/d8/udfdata_8h.html#a55">UdfUnicodeDirectoryNames</a>[]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Initial value:</b><pre class="fragment"><div> {
    { <span class="keyword">sizeof</span>(<a class="code" href="../../d0/d8/udfdata_8c.html#a4">UdfUnicodeSelfArray</a>), <span class="keyword">sizeof</span>(<a class="code" href="../../d0/d8/udfdata_8c.html#a4">UdfUnicodeSelfArray</a>), <a class="code" href="../../d0/d8/udfdata_8c.html#a4">UdfUnicodeSelfArray</a>},
    { <span class="keyword">sizeof</span>(<a class="code" href="../../d0/d8/udfdata_8c.html#a5">UdfUnicodeParentArray</a>), <span class="keyword">sizeof</span>(<a class="code" href="../../d0/d8/udfdata_8c.html#a5">UdfUnicodeParentArray</a>), <a class="code" href="../../d0/d8/udfdata_8c.html#a5">UdfUnicodeParentArray</a>}
    }
</div></pre>
<p>
Definition at line <a class="el" href="../../d1/d7/udfdata_8c-source.html#l00081">81</a> of file <a class="el" href="../../d1/d7/udfdata_8c-source.html">udfdata.c</a>.
<p>
Referenced by <a class="el" href="../../d2/d7/dirctrl_8c-source.html#l01003">UdfInitializeEnumeration()</a>, and <a class="el" href="../../d5/d7/dirsup_8c-source.html#l00360">UdfUpdateDirNames()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="udfdata.c::UdfUnicodeParentArray" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> WCHAR <a class="el" href="../../d1/d8/udfdata_8h.html#a54">UdfUnicodeParentArray</a>[] = { L'.', L'.' }          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d7/udfdata_8c-source.html#l00079">79</a> of file <a class="el" href="../../d1/d7/udfdata_8c-source.html">udfdata.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="udfdata.c::UdfUnicodeSelfArray" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> WCHAR <a class="el" href="../../d1/d8/udfdata_8h.html#a53">UdfUnicodeSelfArray</a>[] = { L'.' }          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d7/udfdata_8c-source.html#l00078">78</a> of file <a class="el" href="../../d1/d7/udfdata_8c-source.html">udfdata.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a14" doxytag="udfdata.c::UdfVatTableIdentifier" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> STRING <a class="el" href="../../d1/d8/udfdata_8h.html#a59">UdfVatTableIdentifier</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Initial value:</b><pre class="fragment"><div> {
    <span class="keyword">sizeof</span>(<a class="code" href="../../d0/d8/udfdata_8c.html#a13">UdfVatTableIdentifierArray</a>),
    <span class="keyword">sizeof</span>(<a class="code" href="../../d0/d8/udfdata_8c.html#a13">UdfVatTableIdentifierArray</a>),
    <a class="code" href="../../d0/d8/udfdata_8c.html#a13">UdfVatTableIdentifierArray</a>
    }
</div></pre>
<p>
Definition at line <a class="el" href="../../d1/d7/udfdata_8c-source.html#l00125">125</a> of file <a class="el" href="../../d1/d7/udfdata_8c-source.html">udfdata.c</a>.
<p>
Referenced by <a class="el" href="../../d0/d7/udfs_2strucsup_8c-source.html#l00477">UdfUpdateVcbPhase0()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a13" doxytag="udfdata.c::UdfVatTableIdentifierArray" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d2/d1/bench_8h.html#a8">CHAR</a> <a class="el" href="../../d0/d8/udfdata_8c.html#a13">UdfVatTableIdentifierArray</a>[]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Initial value:</b><pre class="fragment"><div> { <span class="charliteral">'*'</span>, <span class="charliteral">'U'</span>, <span class="charliteral">'D'</span>, <span class="charliteral">'F'</span>,  ,
                                      <span class="charliteral">'V'</span>, <span class="charliteral">'i'</span>, <span class="charliteral">'r'</span>, <span class="charliteral">'t'</span>, <span class="charliteral">'u'</span>, <span class="charliteral">'a'</span>, <span class="charliteral">'l'</span>,  ,
                                      <span class="charliteral">'A'</span>, <span class="charliteral">'l'</span>, <span class="charliteral">'l'</span>, <span class="charliteral">'o'</span>, <span class="charliteral">'c'</span>,  ,
                                      <span class="charliteral">'T'</span>, <span class="charliteral">'b'</span>, <span class="charliteral">'l'</span> }
</div></pre>
<p>
Definition at line <a class="el" href="../../d1/d7/udfdata_8c-source.html#l00120">120</a> of file <a class="el" href="../../d1/d7/udfdata_8c-source.html">udfdata.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a12" doxytag="udfdata.c::UdfVirtualPartitionDomainIdentifier" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> STRING <a class="el" href="../../d1/d8/udfdata_8h.html#a58">UdfVirtualPartitionDomainIdentifier</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Initial value:</b><pre class="fragment"><div> {
    <span class="keyword">sizeof</span>(<a class="code" href="../../d0/d8/udfdata_8c.html#a11">UdfVirtualPartitionDomainIdentifierArray</a>),
    <span class="keyword">sizeof</span>(<a class="code" href="../../d0/d8/udfdata_8c.html#a11">UdfVirtualPartitionDomainIdentifierArray</a>),
    <a class="code" href="../../d0/d8/udfdata_8c.html#a11">UdfVirtualPartitionDomainIdentifierArray</a> 
    }
</div></pre>
<p>
Definition at line <a class="el" href="../../d1/d7/udfdata_8c-source.html#l00114">114</a> of file <a class="el" href="../../d1/d7/udfdata_8c-source.html">udfdata.c</a>.
<p>
Referenced by <a class="el" href="../../d3/d5/allocsup_8c-source.html#l00367">UdfInitializePcb()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a11" doxytag="udfdata.c::UdfVirtualPartitionDomainIdentifierArray" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d2/d1/bench_8h.html#a8">CHAR</a> <a class="el" href="../../d0/d8/udfdata_8c.html#a11">UdfVirtualPartitionDomainIdentifierArray</a>[]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Initial value:</b><pre class="fragment"><div> { <span class="charliteral">'*'</span>, <span class="charliteral">'U'</span>, <span class="charliteral">'D'</span>, <span class="charliteral">'F'</span>,  ,
                                                    <span class="charliteral">'V'</span>, <span class="charliteral">'i'</span>, <span class="charliteral">'r'</span>, <span class="charliteral">'t'</span>, <span class="charliteral">'u'</span>, <span class="charliteral">'a'</span>, <span class="charliteral">'l'</span>,  ,
                                                    <span class="charliteral">'P'</span>, <span class="charliteral">'a'</span>, <span class="charliteral">'r'</span>, <span class="charliteral">'t'</span>, <span class="charliteral">'i'</span>, <span class="charliteral">'t'</span>, <span class="charliteral">'i'</span>, <span class="charliteral">'o'</span>, <span class="charliteral">'n'</span> }
</div></pre>
<p>
Definition at line <a class="el" href="../../d1/d7/udfdata_8c-source.html#l00110">110</a> of file <a class="el" href="../../d1/d7/udfdata_8c-source.html">udfdata.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a21" doxytag="udfdata.c::VsdIdentParseTable" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d2/d8/struct__PARSE__KEYVALUE.html">PARSE_KEYVALUE</a> <a class="el" href="../../d1/d8/udfdata_8h.html#a63">VsdIdentParseTable</a>[]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Initial value:</b><pre class="fragment"><div> {
    { <a class="code" href="../../d5/d8/udfs__rec_8h.html#a2">VSD_IDENT_BEA01</a>, <a class="code" href="../../d5/d8/udfs__rec_8h.html#a30a19">VsdIdentBEA01</a> },
    { <a class="code" href="../../d5/d8/udfs__rec_8h.html#a3">VSD_IDENT_TEA01</a>, <a class="code" href="../../d5/d8/udfs__rec_8h.html#a30a20">VsdIdentTEA01</a> },
    { <a class="code" href="../../d5/d8/udfs__rec_8h.html#a4">VSD_IDENT_CDROM</a>, <a class="code" href="../../d5/d8/udfs__rec_8h.html#a30a21">VsdIdentCDROM</a> },
    { <a class="code" href="../../d5/d8/udfs__rec_8h.html#a5">VSD_IDENT_CD001</a>, <a class="code" href="../../d5/d8/udfs__rec_8h.html#a30a22">VsdIdentCD001</a> },
    { <a class="code" href="../../d5/d8/udfs__rec_8h.html#a6">VSD_IDENT_CDW01</a>, <a class="code" href="../../d5/d8/udfs__rec_8h.html#a30a23">VsdIdentCDW01</a> },
    { <a class="code" href="../../d5/d8/udfs__rec_8h.html#a7">VSD_IDENT_CDW02</a>, <a class="code" href="../../d5/d8/udfs__rec_8h.html#a30a24">VsdIdentCDW02</a> },
    { <a class="code" href="../../d5/d8/udfs__rec_8h.html#a8">VSD_IDENT_NSR01</a>, <a class="code" href="../../d5/d8/udfs__rec_8h.html#a30a25">VsdIdentNSR01</a> },
    { <a class="code" href="../../d5/d8/udfs__rec_8h.html#a9">VSD_IDENT_NSR02</a>, <a class="code" href="../../d5/d8/udfs__rec_8h.html#a30a26">VsdIdentNSR02</a> },
    { <a class="code" href="../../d5/d8/udfs__rec_8h.html#a10">VSD_IDENT_BOOT2</a>, <a class="code" href="../../d5/d8/udfs__rec_8h.html#a30a27">VsdIdentBOOT2</a> },
    { <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>,            <a class="code" href="../../d5/d8/udfs__rec_8h.html#a30a18">VsdIdentBad</a> }
    }
</div></pre>
<p>
Definition at line <a class="el" href="../../d1/d7/udfdata_8c-source.html#l00163">163</a> of file <a class="el" href="../../d1/d7/udfdata_8c-source.html">udfdata.c</a>.    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Sat May 15 19:45:50 2004 for test by
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>test: mtrramd.c File Reference</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="../../main.html">Main&nbsp;Page</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Class&nbsp;List</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Class&nbsp;Members</a> | <a class="qindex" href="../../globals.html">File&nbsp;Members</a></div>
<h1>mtrramd.c File Reference</h1><code>#include "<a class="el" href="../../d1/d9/ki_8h-source.html">ki.h</a>"</code><br>

<p>
<a href="../../d1/d4/mtrramd_8c-source.html">Go to the source code of this file.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/struct__AMDK6__MTRR.html">_AMDK6_MTRR</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d7/struct__AMDK6__MTRR__MSR__IMAGE.html">_AMDK6_MTRR_MSR_IMAGE</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d7/struct__AMDK6__MTRR__REGION.html">_AMDK6_MTRR_REGION</a></td></tr>

<tr><td colspan=2><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d5/mtrramd_8c.html#a0">STATIC</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d5/mtrramd_8c.html#a1">IDBG</a>&nbsp;&nbsp;&nbsp;0</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d5/mtrramd_8c.html#a2">DBGMSG</a>(a)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d5/mtrramd_8c.html#a3">AMDK6_MTRR_TYPE_DISABLED</a>&nbsp;&nbsp;&nbsp;0</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d5/mtrramd_8c.html#a4">AMDK6_MTRR_TYPE_UC</a>&nbsp;&nbsp;&nbsp;1</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d5/mtrramd_8c.html#a5">AMDK6_MTRR_TYPE_WC</a>&nbsp;&nbsp;&nbsp;2</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d5/mtrramd_8c.html#a6">AMDK6_MTRR_TYPE_MASK</a>&nbsp;&nbsp;&nbsp;3</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d5/mtrramd_8c.html#a7">AMDK6_MTRR_MSR</a>&nbsp;&nbsp;&nbsp;0xC0000085</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d5/mtrramd_8c.html#a8">MAX_K6_REGIONS</a>&nbsp;&nbsp;&nbsp;2</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d5/mtrramd_8c.html#a9">AMDK6_REGION_UNUSED</a>&nbsp;&nbsp;&nbsp;0xFFFFFFFF</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d5/mtrramd_8c.html#a10">AMDK6_REGION_FLAGS_BIOS</a>&nbsp;&nbsp;&nbsp;0x00000001</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d5/mtrramd_8c.html#a11">AMDK6_MAX_MTRR</a>&nbsp;&nbsp;&nbsp;2</td></tr>

<tr><td colspan=2><br><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d9/d6/struct__AMDK6__MTRR.html">_AMDK6_MTRR</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d5/mtrramd_8c.html#a12">AMDK6_MTRR</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d9/d6/struct__AMDK6__MTRR.html">_AMDK6_MTRR</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d5/mtrramd_8c.html#a13">PAMDK6_MTRR</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d0/d7/struct__AMDK6__MTRR__MSR__IMAGE.html">_AMDK6_MTRR_MSR_IMAGE</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d5/mtrramd_8c.html#a14">AMDK6_MTRR_MSR_IMAGE</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d0/d7/struct__AMDK6__MTRR__MSR__IMAGE.html">_AMDK6_MTRR_MSR_IMAGE</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d5/mtrramd_8c.html#a15">PAMDK6_MTRR_MSR_IMAGE</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d3/d7/struct__AMDK6__MTRR__REGION.html">_AMDK6_MTRR_REGION</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d5/mtrramd_8c.html#a16">AMDK6_MTRR_REGION</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d3/d7/struct__AMDK6__MTRR__REGION.html">_AMDK6_MTRR_REGION</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d5/mtrramd_8c.html#a17">PAMDK6_MTRR_REGION</a></td></tr>

<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d5/mtrramd_8c.html#a23">KiLoadMTRR</a> (PVOID Context)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d5/mtrramd_8c.html#a24">KiAmdK6InitializeMTRR</a> (VOID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d5/mtrramd_8c.html#a25">KiAmdK6RestoreMTRR</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d5/mtrramd_8c.html#a26">KiAmdK6MtrrSetMemoryType</a> (ULONG BaseAddress, ULONG <a class="el" href="../../d9/d7/w98_2lh__open_2pi__mem_8h.html#a0">Size</a>, <a class="el" href="../../d4/d9/ke_8h.html#a156">MEMORY_CACHING_TYPE</a> Type)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOLEAN&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d5/mtrramd_8c.html#a27">KiAmdK6AddRegion</a> (ULONG BaseAddress, ULONG <a class="el" href="../../d9/d7/w98_2lh__open_2pi__mem_8h.html#a0">Size</a>, <a class="el" href="../../d4/d9/ke_8h.html#a156">MEMORY_CACHING_TYPE</a> Type, ULONG Flags)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d5/mtrramd_8c.html#a28">KiAmdK6MtrrCommitChanges</a> (VOID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d5/mtrramd_8c.html#a29">KiAmdK6HandleWcRegionRequest</a> (ULONG BaseAddress, ULONG <a class="el" href="../../d9/d7/w98_2lh__open_2pi__mem_8h.html#a0">Size</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d5/mtrramd_8c.html#a30">KiAmdK6MTRRAddRegionFromHW</a> (<a class="el" href="../../d9/d6/struct__AMDK6__MTRR.html">AMDK6_MTRR</a> RegImage)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d3/d7/struct__AMDK6__MTRR__REGION.html">PAMDK6_MTRR_REGION</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d5/mtrramd_8c.html#a31">KiAmdK6FindFreeRegion</a> (<a class="el" href="../../d4/d9/ke_8h.html#a156">MEMORY_CACHING_TYPE</a> Type)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d5/mtrramd_8c.html#a32">KiAmdK6MtrrWRMSR</a> (VOID)</td></tr>

<tr><td colspan=2><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>KSPIN_LOCK&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d5/mtrramd_8c.html#a18">KiRangeLock</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d3/d7/struct__AMDK6__MTRR__REGION.html">AMDK6_MTRR_REGION</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d5/mtrramd_8c.html#a19">AmdK6Regions</a> [MAX_K6_REGIONS]</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>ULONG&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d5/mtrramd_8c.html#a20">AmdK6RegionCount</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>ULONG&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d5/mtrramd_8c.html#a21">AmdMtrrHwUsageCount</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d7/struct__AMDK6__MTRR__MSR__IMAGE.html">AMDK6_MTRR_MSR_IMAGE</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d5/mtrramd_8c.html#a22">KiAmdK6Mtrr</a></td></tr>

</table>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="a11" doxytag="mtrramd.c::AMDK6_MAX_MTRR" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define AMDK6_MAX_MTRR&nbsp;&nbsp;&nbsp;2          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00088">88</a> of file <a class="el" href="../../d1/d4/mtrramd_8c-source.html">mtrramd.c</a>.
<p>
Referenced by <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00581">KiAmdK6FindFreeRegion()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a7" doxytag="mtrramd.c::AMDK6_MTRR_MSR" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define AMDK6_MTRR_MSR&nbsp;&nbsp;&nbsp;0xC0000085          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00055">55</a> of file <a class="el" href="../../d1/d4/mtrramd_8c-source.html">mtrramd.c</a>.
<p>
Referenced by <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00168">KiAmdK6InitializeMTRR()</a>, and <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00754">KiAmdK6MtrrWRMSR()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="mtrramd.c::AMDK6_MTRR_TYPE_DISABLED" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define AMDK6_MTRR_TYPE_DISABLED&nbsp;&nbsp;&nbsp;0          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00048">48</a> of file <a class="el" href="../../d1/d4/mtrramd_8c-source.html">mtrramd.c</a>.
<p>
Referenced by <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00168">KiAmdK6InitializeMTRR()</a>, <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00230">KiAmdK6MTRRAddRegionFromHW()</a>, and <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00635">KiAmdK6MtrrCommitChanges()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a6" doxytag="mtrramd.c::AMDK6_MTRR_TYPE_MASK" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define AMDK6_MTRR_TYPE_MASK&nbsp;&nbsp;&nbsp;3          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00051">51</a> of file <a class="el" href="../../d1/d4/mtrramd_8c-source.html">mtrramd.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="mtrramd.c::AMDK6_MTRR_TYPE_UC" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define AMDK6_MTRR_TYPE_UC&nbsp;&nbsp;&nbsp;1          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00049">49</a> of file <a class="el" href="../../d1/d4/mtrramd_8c-source.html">mtrramd.c</a>.
<p>
Referenced by <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00230">KiAmdK6MTRRAddRegionFromHW()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="mtrramd.c::AMDK6_MTRR_TYPE_WC" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define AMDK6_MTRR_TYPE_WC&nbsp;&nbsp;&nbsp;2          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00050">50</a> of file <a class="el" href="../../d1/d4/mtrramd_8c-source.html">mtrramd.c</a>.
<p>
Referenced by <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00635">KiAmdK6MtrrCommitChanges()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a10" doxytag="mtrramd.c::AMDK6_REGION_FLAGS_BIOS" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define AMDK6_REGION_FLAGS_BIOS&nbsp;&nbsp;&nbsp;0x00000001          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00082">82</a> of file <a class="el" href="../../d1/d4/mtrramd_8c-source.html">mtrramd.c</a>.
<p>
Referenced by <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00581">KiAmdK6FindFreeRegion()</a>, <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00375">KiAmdK6HandleWcRegionRequest()</a>, and <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00230">KiAmdK6MTRRAddRegionFromHW()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a9" doxytag="mtrramd.c::AMDK6_REGION_UNUSED" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define AMDK6_REGION_UNUSED&nbsp;&nbsp;&nbsp;0xFFFFFFFF          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00076">76</a> of file <a class="el" href="../../d1/d4/mtrramd_8c-source.html">mtrramd.c</a>.
<p>
Referenced by <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00581">KiAmdK6FindFreeRegion()</a>, <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00375">KiAmdK6HandleWcRegionRequest()</a>, <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00168">KiAmdK6InitializeMTRR()</a>, and <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00635">KiAmdK6MtrrCommitChanges()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="mtrramd.c::DBGMSG" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define DBGMSG          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">a&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00010">10</a> of file <a class="el" href="../../d1/d4/mtrramd_8c-source.html">mtrramd.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="mtrramd.c::IDBG" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define IDBG&nbsp;&nbsp;&nbsp;0          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00005">5</a> of file <a class="el" href="../../d1/d4/mtrramd_8c-source.html">mtrramd.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a8" doxytag="mtrramd.c::MAX_K6_REGIONS" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define MAX_K6_REGIONS&nbsp;&nbsp;&nbsp;2          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00070">70</a> of file <a class="el" href="../../d1/d4/mtrramd_8c-source.html">mtrramd.c</a>.
<p>
Referenced by <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00168">KiAmdK6InitializeMTRR()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a0" doxytag="mtrramd.c::STATIC" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define STATIC          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00003">3</a> of file <a class="el" href="../../d1/d4/mtrramd_8c-source.html">mtrramd.c</a>.    </td>
  </tr>
</table>
<hr><h2>Typedef Documentation</h2>
<a class="anchor" name="a12" doxytag="mtrramd.c::AMDK6_MTRR" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d9/d6/struct__AMDK6__MTRR.html">_AMDK6_MTRR</a>  <a class="el" href="../../d9/d6/struct__AMDK6__MTRR.html">AMDK6_MTRR</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a14" doxytag="mtrramd.c::AMDK6_MTRR_MSR_IMAGE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d0/d7/struct__AMDK6__MTRR__MSR__IMAGE.html">_AMDK6_MTRR_MSR_IMAGE</a>  <a class="el" href="../../d0/d7/struct__AMDK6__MTRR__MSR__IMAGE.html">AMDK6_MTRR_MSR_IMAGE</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a16" doxytag="mtrramd.c::AMDK6_MTRR_REGION" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d3/d7/struct__AMDK6__MTRR__REGION.html">_AMDK6_MTRR_REGION</a>  <a class="el" href="../../d3/d7/struct__AMDK6__MTRR__REGION.html">AMDK6_MTRR_REGION</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a13" doxytag="mtrramd.c::PAMDK6_MTRR" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d9/d6/struct__AMDK6__MTRR.html">_AMDK6_MTRR</a> * <a class="el" href="../../d9/d6/struct__AMDK6__MTRR.html">PAMDK6_MTRR</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a15" doxytag="mtrramd.c::PAMDK6_MTRR_MSR_IMAGE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d0/d7/struct__AMDK6__MTRR__MSR__IMAGE.html">_AMDK6_MTRR_MSR_IMAGE</a> * <a class="el" href="../../d0/d7/struct__AMDK6__MTRR__MSR__IMAGE.html">PAMDK6_MTRR_MSR_IMAGE</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a17" doxytag="mtrramd.c::PAMDK6_MTRR_REGION" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d3/d7/struct__AMDK6__MTRR__REGION.html">_AMDK6_MTRR_REGION</a> * <a class="el" href="../../d3/d7/struct__AMDK6__MTRR__REGION.html">PAMDK6_MTRR_REGION</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00560">KiAmdK6AddRegion()</a>, and <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00375">KiAmdK6HandleWcRegionRequest()</a>.    </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="a27" doxytag="mtrramd.c::KiAmdK6AddRegion" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOLEAN KiAmdK6AddRegion           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>BaseAddress</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>Size</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d4/d9/ke_8h.html#a156">MEMORY_CACHING_TYPE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Type</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>Flags</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00560">560</a> of file <a class="el" href="../../d1/d4/mtrramd_8c-source.html">mtrramd.c</a>.
<p>
References <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00064">_AMDK6_MTRR_REGION::BaseAddress</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00581">KiAmdK6FindFreeRegion()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d0/d5/mtrramd_8c.html#a17">PAMDK6_MTRR_REGION</a>, <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00067">_AMDK6_MTRR_REGION::RegionFlags</a>, <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00066">_AMDK6_MTRR_REGION::RegionType</a>, <a class="el" href="../../d9/d6/lh__open_2pi__mem_8h-source.html#l00017">Size</a>, <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00065">_AMDK6_MTRR_REGION::Size</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00375">KiAmdK6HandleWcRegionRequest()</a>, and <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00230">KiAmdK6MTRRAddRegionFromHW()</a>.
<p>
<pre class="fragment"><div>00566 {
00567     <a class="code" href="../../d3/d7/struct__AMDK6__MTRR__REGION.html">PAMDK6_MTRR_REGION</a> pRegion;
00568 
00569     <span class="keywordflow">if</span> ((pRegion = <a class="code" href="../../d0/d5/mtrramd_8c.html#a31">KiAmdK6FindFreeRegion</a>(Type)) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00570         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00571     }
00572     pRegion-&gt;<a class="code" href="../../d3/d7/struct__AMDK6__MTRR__REGION.html#o0">BaseAddress</a> = BaseAddress;
00573     pRegion-&gt;<a class="code" href="../../d3/d7/struct__AMDK6__MTRR__REGION.html#o1">Size</a> = <a class="code" href="../../d8/d7/lh__open_2pi__mem_8h.html#a0">Size</a>;
00574     pRegion-&gt;<a class="code" href="../../d3/d7/struct__AMDK6__MTRR__REGION.html#o2">RegionType</a> = Type;
00575     pRegion-&gt;<a class="code" href="../../d3/d7/struct__AMDK6__MTRR__REGION.html#o3">RegionFlags</a> = Flags;
00576     
00577     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00578 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a31" doxytag="mtrramd.c::KiAmdK6FindFreeRegion" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d3/d7/struct__AMDK6__MTRR__REGION.html">PAMDK6_MTRR_REGION</a> KiAmdK6FindFreeRegion           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d4/d9/ke_8h.html#a156">MEMORY_CACHING_TYPE</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>Type</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00581">581</a> of file <a class="el" href="../../d1/d4/mtrramd_8c-source.html">mtrramd.c</a>.
<p>
References <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00088">AMDK6_MAX_MTRR</a>, <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00082">AMDK6_REGION_FLAGS_BIOS</a>, <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00076">AMDK6_REGION_UNUSED</a>, <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00155">AmdK6RegionCount</a>, <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00154">AmdK6Regions</a>, <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00159">AmdMtrrHwUsageCount</a>, <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00064">_AMDK6_MTRR_REGION::BaseAddress</a>, <a class="el" href="../../d8/d8/assign_8c-source.html#l00348">DBGMSG</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d4/d9/ke_8h.html#a413a250">MmWriteCombined</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00067">_AMDK6_MTRR_REGION::RegionFlags</a>.
<p>
Referenced by <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00560">KiAmdK6AddRegion()</a>.
<p>
<pre class="fragment"><div>00584 {
00585     ULONG    i;
00586 
00587     <span class="comment">//</span>
00588     <span class="comment">// If this is a MmWriteCombined request, limit the number of</span>
00589     <span class="comment">// regions to match the actual hardware support.</span>
00590     <span class="comment">//</span>
00591 
00592     <span class="keywordflow">if</span> (Type == <a class="code" href="../../d4/d9/ke_8h.html#a413a250">MmWriteCombined</a>) {
00593         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d5/mtrramd_8c.html#a21">AmdMtrrHwUsageCount</a> &gt;= <a class="code" href="../../d0/d5/mtrramd_8c.html#a11">AMDK6_MAX_MTRR</a>) {
00594 
00595             <span class="comment">//</span>
00596             <span class="comment">// Search the table to see if there are any BIOS entries</span>
00597             <span class="comment">// we can replace.</span>
00598             <span class="comment">//</span>
00599 
00600             <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../d0/d5/mtrramd_8c.html#a20">AmdK6RegionCount</a>; i++) {
00601                 <span class="keywordflow">if</span> (<a class="code" href="../../d0/d5/mtrramd_8c.html#a19">AmdK6Regions</a>[i].<a class="code" href="../../d3/d7/struct__AMDK6__MTRR__REGION.html#o3">RegionFlags</a> &amp; <a class="code" href="../../d0/d5/mtrramd_8c.html#a10">AMDK6_REGION_FLAGS_BIOS</a>) {
00602                     <span class="keywordflow">return</span> &amp;<a class="code" href="../../d0/d5/mtrramd_8c.html#a19">AmdK6Regions</a>[i];
00603                 }
00604             }
00605 
00606             <span class="comment">//</span>
00607             <span class="comment">// No free HW MTRRs and no reusable entries.</span>
00608             <span class="comment">//</span>
00609 
00610             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00611         }
00612     }
00613 
00614     <span class="comment">//</span>
00615     <span class="comment">// Find the next free region in the table.</span>
00616     <span class="comment">//</span>
00617 
00618     <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../d0/d5/mtrramd_8c.html#a20">AmdK6RegionCount</a>; i++) {
00619         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d5/mtrramd_8c.html#a19">AmdK6Regions</a>[i].<a class="code" href="../../d3/d7/struct__AMDK6__MTRR__REGION.html#o0">BaseAddress</a> == <a class="code" href="../../d0/d5/mtrramd_8c.html#a9">AMDK6_REGION_UNUSED</a>) {
00620 
00621             <span class="keywordflow">if</span> (Type == <a class="code" href="../../d4/d9/ke_8h.html#a413a250">MmWriteCombined</a>) {
00622                 <a class="code" href="../../d0/d5/mtrramd_8c.html#a21">AmdMtrrHwUsageCount</a>++;
00623             }
00624             <span class="keywordflow">return</span> &amp;<a class="code" href="../../d0/d5/mtrramd_8c.html#a19">AmdK6Regions</a>[i];
00625         }
00626     }
00627 
00628 
00629     <a class="code" href="../../d7/d9/assign_8c.html#a19">DBGMSG</a>(<span class="stringliteral">"AmdK6FindFreeRegion: Region Table is Full!\n"</span>);
00630 
00631     <span class="keywordflow">return</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00632 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a29" doxytag="mtrramd.c::KiAmdK6HandleWcRegionRequest" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS KiAmdK6HandleWcRegionRequest           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>BaseAddress</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>Size</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00375">375</a> of file <a class="el" href="../../d1/d4/mtrramd_8c-source.html">mtrramd.c</a>.
<p>
References <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00082">AMDK6_REGION_FLAGS_BIOS</a>, <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00076">AMDK6_REGION_UNUSED</a>, <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00155">AmdK6RegionCount</a>, <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00154">AmdK6Regions</a>, <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00064">_AMDK6_MTRR_REGION::BaseAddress</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00560">KiAmdK6AddRegion()</a>, <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00635">KiAmdK6MtrrCommitChanges()</a>, <a class="el" href="../../d4/d9/ke_8h.html#a413a250">MmWriteCombined</a>, <a class="el" href="../../d0/d5/mtrramd_8c.html#a17">PAMDK6_MTRR_REGION</a>, <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00067">_AMDK6_MTRR_REGION::RegionFlags</a>, <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00066">_AMDK6_MTRR_REGION::RegionType</a>, <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00065">_AMDK6_MTRR_REGION::Size</a>, <a class="el" href="../../d9/d6/lh__open_2pi__mem_8h-source.html#l00017">Size</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00294">KiAmdK6MtrrSetMemoryType()</a>.
<p>
<pre class="fragment"><div>00379 {
00380     ULONG               i;
00381     ULONG               AdjustedSize, AdjustedEndAddress, AlignmentMask;
00382     ULONG               CombinedBase, CombinedSize, CombinedAdjustedSize;
00383     <a class="code" href="../../d3/d7/struct__AMDK6__MTRR__REGION.html">PAMDK6_MTRR_REGION</a>  pRegion;
00384     BOOLEAN             bCanCombine, bValidRange;
00385 
00386     <span class="comment">//</span>
00387     <span class="comment">// Try and find a region that overlaps or is adjacent to the new one and</span>
00388     <span class="comment">// check to see if the combined region would be a legal mapping.</span>
00389     <span class="comment">//</span>
00390 
00391     <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../d0/d5/mtrramd_8c.html#a20">AmdK6RegionCount</a>; i++) {
00392         pRegion = &amp;<a class="code" href="../../d0/d5/mtrramd_8c.html#a19">AmdK6Regions</a>[i];
00393         <span class="keywordflow">if</span> ((pRegion-&gt;<a class="code" href="../../d3/d7/struct__AMDK6__MTRR__REGION.html#o0">BaseAddress</a> != <a class="code" href="../../d0/d5/mtrramd_8c.html#a9">AMDK6_REGION_UNUSED</a>) &amp;&amp;
00394             (pRegion-&gt;<a class="code" href="../../d3/d7/struct__AMDK6__MTRR__REGION.html#o2">RegionType</a> == <a class="code" href="../../d4/d9/ke_8h.html#a413a250">MmWriteCombined</a>)) {
00395 
00396             <span class="comment">//</span>
00397             <span class="comment">// Does the new start address overlap or adjoin an</span>
00398             <span class="comment">// existing WC region?</span>
00399             <span class="comment">//</span>
00400 
00401             <span class="keywordflow">if</span> (((pRegion-&gt;<a class="code" href="../../d3/d7/struct__AMDK6__MTRR__REGION.html#o0">BaseAddress</a> &gt;= BaseAddress) &amp;&amp;
00402                  (pRegion-&gt;<a class="code" href="../../d3/d7/struct__AMDK6__MTRR__REGION.html#o0">BaseAddress</a> &lt;= (BaseAddress + <a class="code" href="../../d8/d7/lh__open_2pi__mem_8h.html#a0">Size</a>))) ||
00403                  ((BaseAddress &lt;= (pRegion-&gt;<a class="code" href="../../d3/d7/struct__AMDK6__MTRR__REGION.html#o0">BaseAddress</a> + pRegion-&gt;<a class="code" href="../../d3/d7/struct__AMDK6__MTRR__REGION.html#o1">Size</a>)) &amp;&amp;
00404                   (BaseAddress &gt;= pRegion-&gt;<a class="code" href="../../d3/d7/struct__AMDK6__MTRR__REGION.html#o0">BaseAddress</a>))) {
00405 
00406                 <span class="comment">//</span>
00407                 <span class="comment">// Combine the two regions into one.</span>
00408                 <span class="comment">//</span>
00409 
00410                 AdjustedEndAddress = BaseAddress + <a class="code" href="../../d8/d7/lh__open_2pi__mem_8h.html#a0">Size</a>;
00411 
00412                 <span class="keywordflow">if</span> (pRegion-&gt;<a class="code" href="../../d3/d7/struct__AMDK6__MTRR__REGION.html#o0">BaseAddress</a> &lt; BaseAddress) {
00413                     CombinedBase = pRegion-&gt;<a class="code" href="../../d3/d7/struct__AMDK6__MTRR__REGION.html#o0">BaseAddress</a>;
00414                 } <span class="keywordflow">else</span> {
00415                     CombinedBase = BaseAddress;
00416                 }
00417 
00418                 <span class="keywordflow">if</span> ((pRegion-&gt;<a class="code" href="../../d3/d7/struct__AMDK6__MTRR__REGION.html#o0">BaseAddress</a> + pRegion-&gt;<a class="code" href="../../d3/d7/struct__AMDK6__MTRR__REGION.html#o1">Size</a>) &gt;
00419                     AdjustedEndAddress) {
00420                     CombinedSize = (pRegion-&gt;<a class="code" href="../../d3/d7/struct__AMDK6__MTRR__REGION.html#o0">BaseAddress</a> + pRegion-&gt;<a class="code" href="../../d3/d7/struct__AMDK6__MTRR__REGION.html#o1">Size</a>) -
00421                            CombinedBase;
00422                 } <span class="keywordflow">else</span> {
00423                     CombinedSize = AdjustedEndAddress - CombinedBase;
00424                 }
00425 
00426                 <span class="comment">//</span>
00427                 <span class="comment">// See if the new region would be a legal mapping.</span>
00428                 <span class="comment">//</span>
00429                 <span class="comment">//</span>
00430                 <span class="comment">// Find the smallest legal size that is equal to the requested range.  Scan</span>
00431                 <span class="comment">// all ranges from 128k - 2G. (Start at 2G and work down).</span>
00432                 <span class="comment">//</span>
00433         
00434                 CombinedAdjustedSize = 0x80000000;
00435                 AlignmentMask = 0x7fffffff;
00436                 bCanCombine = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00437                 
00438                 <span class="keywordflow">while</span> (CombinedAdjustedSize &gt; 0x00010000) {
00439 
00440                     <span class="comment">//</span>
00441                     <span class="comment">// Check the size to see if it matches the requested limit.</span>
00442                     <span class="comment">//</span>
00443 
00444                     <span class="keywordflow">if</span> (CombinedAdjustedSize == CombinedSize) {
00445 
00446                         <span class="comment">//</span>
00447                         <span class="comment">// This one works.</span>
00448                         <span class="comment">// Check to see if the base address conforms to the MTRR restrictions.</span>
00449                         <span class="comment">//</span>
00450 
00451                         <span class="keywordflow">if</span> ((CombinedBase &amp; AlignmentMask) == 0) {
00452                             bCanCombine = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00453                         }
00454 
00455                         <span class="keywordflow">break</span>;
00456 
00457                     } <span class="keywordflow">else</span> {
00458 
00459                         <span class="comment">//</span>
00460                         <span class="comment">// Bump it down to the next range size and try again.</span>
00461                         <span class="comment">//</span>
00462 
00463                         CombinedAdjustedSize &gt;&gt;= 1;
00464                         AlignmentMask &gt;&gt;= 1;
00465                     }
00466                 }
00467 
00468                 <span class="keywordflow">if</span> (bCanCombine) {
00469                     <span class="comment">//</span>
00470                     <span class="comment">// If the resized range is OK, record the change in the region</span>
00471                     <span class="comment">// table and commit the changes to hardware.</span>
00472                     <span class="comment">//</span>
00473                     
00474                     pRegion-&gt;<a class="code" href="../../d3/d7/struct__AMDK6__MTRR__REGION.html#o0">BaseAddress</a> = CombinedBase;
00475                     pRegion-&gt;<a class="code" href="../../d3/d7/struct__AMDK6__MTRR__REGION.html#o1">Size</a> = CombinedAdjustedSize;
00476                 
00477                     <span class="comment">//</span>
00478                     <span class="comment">// Reset the BIOS flag since we now "own" this region (if we didn't already).</span>
00479                     <span class="comment">//</span>
00480                 
00481                     pRegion-&gt;<a class="code" href="../../d3/d7/struct__AMDK6__MTRR__REGION.html#o3">RegionFlags</a> &amp;= ~<a class="code" href="../../d0/d5/mtrramd_8c.html#a10">AMDK6_REGION_FLAGS_BIOS</a>;
00482 
00483                     <span class="keywordflow">return</span> <a class="code" href="../../d0/d5/mtrramd_8c.html#a28">KiAmdK6MtrrCommitChanges</a>();
00484                 }
00485             }
00486         }
00487     }
00488 
00489         <span class="comment">// A valid combination could not be found, so try to create a new range for this request.</span>
00490     <span class="comment">//</span>
00491     <span class="comment">// Find the smallest legal size that is less than or equal to the requested range.  Scan</span>
00492     <span class="comment">// all ranges from 128k - 2G. (Start at 2G and work down).</span>
00493     <span class="comment">//</span>
00494         
00495     AdjustedSize = 0x80000000;
00496     AlignmentMask = 0x7fffffff;
00497     bValidRange = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00498 
00499     <span class="keywordflow">while</span> (AdjustedSize &gt; 0x00010000) {
00500 
00501         <span class="comment">//</span>
00502         <span class="comment">// Check the size to see if it matches the requested limit.</span>
00503         <span class="comment">//</span>
00504 
00505         <span class="keywordflow">if</span> (AdjustedSize == <a class="code" href="../../d8/d7/lh__open_2pi__mem_8h.html#a0">Size</a>) {
00506 
00507             <span class="comment">//</span>
00508             <span class="comment">// This one works.</span>
00509             <span class="comment">//</span>
00510             <span class="comment">// Check to see if the base address conforms to the MTRR restrictions.</span>
00511             <span class="comment">//</span>
00512 
00513             <span class="keywordflow">if</span> ((BaseAddress &amp; AlignmentMask) == 0) {
00514                 bValidRange = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00515             }
00516             
00517             <span class="comment">//</span>
00518             <span class="comment">// Stop looking.</span>
00519             <span class="comment">//</span>
00520             
00521             <span class="keywordflow">break</span>;
00522 
00523         } <span class="keywordflow">else</span> {
00524 
00525             <span class="comment">//</span>
00526             <span class="comment">// Bump it down to the next range size and try again.</span>
00527             <span class="comment">//</span>
00528 
00529             AdjustedSize &gt;&gt;= 1;
00530             AlignmentMask &gt;&gt;= 1;
00531         }
00532     }
00533 
00534     <span class="comment">//</span>
00535     <span class="comment">// Couldn't find a legal region that fit.</span>
00536     <span class="comment">//</span>
00537     
00538     <span class="keywordflow">if</span> (!bValidRange) {
00539         <span class="keywordflow">return</span> STATUS_NOT_SUPPORTED;
00540     }
00541     
00542     
00543     <span class="comment">//</span>
00544     <span class="comment">// If we got this far then this is a new WC region.</span>
00545     <span class="comment">// Create a new region entry for this request.</span>
00546     <span class="comment">//</span>
00547 
00548     <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d5/mtrramd_8c.html#a27">KiAmdK6AddRegion</a>(BaseAddress, AdjustedSize, MmWriteCombined, 0)) {
00549         <span class="keywordflow">return</span> STATUS_UNSUCCESSFUL;
00550     }
00551 
00552     <span class="comment">//</span>
00553     <span class="comment">// Commit the changes to hardware.</span>
00554     <span class="comment">//</span>
00555         
00556     <span class="keywordflow">return</span> <a class="code" href="../../d0/d5/mtrramd_8c.html#a28">KiAmdK6MtrrCommitChanges</a>();
00557 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a24" doxytag="mtrramd.c::KiAmdK6InitializeMTRR" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID KiAmdK6InitializeMTRR           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">VOID&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d7/d8/kernlini_8c-source.html#l01691">KiInitMachineDependent()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a30" doxytag="mtrramd.c::KiAmdK6MTRRAddRegionFromHW" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID KiAmdK6MTRRAddRegionFromHW           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d9/d6/struct__AMDK6__MTRR.html">AMDK6_MTRR</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>RegImage</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00230">230</a> of file <a class="el" href="../../d1/d4/mtrramd_8c-source.html">mtrramd.c</a>.
<p>
References <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00048">AMDK6_MTRR_TYPE_DISABLED</a>, <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00049">AMDK6_MTRR_TYPE_UC</a>, <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00082">AMDK6_REGION_FLAGS_BIOS</a>, <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00159">AmdMtrrHwUsageCount</a>, <a class="el" href="../../d7/d4/ntgdi_2icm_2inc_2debug_8h-source.html#l00146">ASSERT</a>, <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00031">_AMDK6_MTRR::base</a>, <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00560">KiAmdK6AddRegion()</a>, <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00030">_AMDK6_MTRR::mask</a>, <a class="el" href="../../d4/d9/ke_8h.html#a413a250">MmWriteCombined</a>, <a class="el" href="../../d9/d6/lh__open_2pi__mem_8h-source.html#l00017">Size</a>, and <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00029">_AMDK6_MTRR::type</a>.
<p>
Referenced by <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00168">KiAmdK6InitializeMTRR()</a>.
<p>
<pre class="fragment"><div>00233 {
00234     ULONG BaseAddress, <a class="code" href="../../d8/d7/lh__open_2pi__mem_8h.html#a0">Size</a>, TempMask;
00235 
00236     <span class="comment">//</span>
00237     <span class="comment">// Check to see if this MTRR is enabled.</span>
00238     <span class="comment">//</span>
00239         
00240     <span class="keywordflow">if</span> (RegImage.<a class="code" href="../../d9/d6/struct__AMDK6__MTRR.html#o0">type</a> != <a class="code" href="../../d0/d5/mtrramd_8c.html#a3">AMDK6_MTRR_TYPE_DISABLED</a>) {
00241 
00242         <span class="comment">//</span>
00243         <span class="comment">// If this is a write combined region then add an entry to</span>
00244         <span class="comment">// the region table.</span>
00245         <span class="comment">//</span>
00246 
00247         <span class="keywordflow">if</span> ((RegImage.<a class="code" href="../../d9/d6/struct__AMDK6__MTRR.html#o0">type</a> &amp; <a class="code" href="../../d0/d5/mtrramd_8c.html#a4">AMDK6_MTRR_TYPE_UC</a>) == 0) {
00248 
00249             <span class="comment">//</span>
00250             <span class="comment">// Create a new resion table entry.</span>
00251             <span class="comment">//</span>
00252 
00253             BaseAddress = RegImage.<a class="code" href="../../d9/d6/struct__AMDK6__MTRR.html#o2">base</a> &lt;&lt; 17;
00254 
00255             <span class="comment">//</span>
00256             <span class="comment">// Calculate the size base on the mask value.</span>
00257             <span class="comment">//</span>
00258 
00259             TempMask = RegImage.<a class="code" href="../../d9/d6/struct__AMDK6__MTRR.html#o1">mask</a>;
00260             
00261             <span class="comment">//</span>
00262             <span class="comment">// There should never be 4GB WC region!</span>
00263             <span class="comment">//</span>
00264 
00265             <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a> (TempMask != 0);
00266 
00267             <span class="comment">//</span>
00268             <span class="comment">// Start with 128 size and search upward.</span>
00269             <span class="comment">//</span>
00270 
00271             <a class="code" href="../../d8/d7/lh__open_2pi__mem_8h.html#a0">Size</a> = 0x00020000;
00272 
00273             <span class="keywordflow">while</span> ((TempMask &amp; 0x00000001) == 0) {
00274                 TempMask &gt;&gt;= 1;
00275                 <a class="code" href="../../d8/d7/lh__open_2pi__mem_8h.html#a0">Size</a> &lt;&lt;= 1;
00276             }
00277 
00278             <span class="comment">//</span>
00279             <span class="comment">// Add the region to the table.</span>
00280             <span class="comment">//</span>
00281             
00282             <a class="code" href="../../d0/d5/mtrramd_8c.html#a27">KiAmdK6AddRegion</a>(BaseAddress,
00283                              Size,
00284                              MmWriteCombined,
00285                              AMDK6_REGION_FLAGS_BIOS);
00286 
00287             <a class="code" href="../../d0/d5/mtrramd_8c.html#a21">AmdMtrrHwUsageCount</a>++;
00288         }
00289     }
00290 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a28" doxytag="mtrramd.c::KiAmdK6MtrrCommitChanges" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS KiAmdK6MtrrCommitChanges           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">VOID&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00635">635</a> of file <a class="el" href="../../d1/d4/mtrramd_8c-source.html">mtrramd.c</a>.
<p>
References <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00048">AMDK6_MTRR_TYPE_DISABLED</a>, <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00050">AMDK6_MTRR_TYPE_WC</a>, <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00076">AMDK6_REGION_UNUSED</a>, <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00155">AmdK6RegionCount</a>, <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00154">AmdK6Regions</a>, <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00064">_AMDK6_MTRR_REGION::BaseAddress</a>, <a class="el" href="../../d8/d8/assign_8c-source.html#l00348">DBGMSG</a>, <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00163">KiAmdK6Mtrr</a>, <a class="el" href="../../d0/d5/mtrramd_8c.html#a23">KiLoadMTRR()</a>, <a class="el" href="../../d4/d9/ke_8h.html#a413a250">MmWriteCombined</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00066">_AMDK6_MTRR_REGION::RegionType</a>, <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00065">_AMDK6_MTRR_REGION::Size</a>, and <a class="el" href="../../d0/d7/struct__AMDK6__MTRR__MSR__IMAGE.html#o4">_AMDK6_MTRR_MSR_IMAGE::u</a>.
<p>
Referenced by <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00375">KiAmdK6HandleWcRegionRequest()</a>.
<p>
<pre class="fragment"><div>00641                    :
00642 
00643     Commits <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> values in <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> table to hardware.
00644 
00645     This <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a69">procedure</a> builds <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> MTRR images into <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> <a class="code" href="../../d0/d5/mtrramd_8c.html#a22">KiAmdK6Mtrr</a> variable and
00646     calls <a class="code" href="../../d8/d4/mtrr_8c.html#a25">KiLoadMTRR</a> to actually load <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> <span class="keyword">register</span>.
00647 
00648 Arguments:
00649 
00650    None.
00651 
00652 Return Value:
00653 
00654    None.
00655 
00656 --*/
00657 
00658 {
00659     ULONG    i, dwWcRangeCount = 0;
00660     ULONG    RangeTemp, RangeMask;
00661 
00662     <span class="comment">//</span>
00663     <span class="comment">// Reset the MTRR image for both MTRRs disabled.</span>
00664     <span class="comment">//</span>
00665 
00666     <a class="code" href="../../d0/d5/mtrramd_8c.html#a22">KiAmdK6Mtrr</a>.<a class="code" href="../../d0/d7/struct__AMDK6__MTRR__MSR__IMAGE.html#o4">u</a>.hw.mtrr0.type = <a class="code" href="../../d0/d5/mtrramd_8c.html#a3">AMDK6_MTRR_TYPE_DISABLED</a>;
00667     <a class="code" href="../../d0/d5/mtrramd_8c.html#a22">KiAmdK6Mtrr</a>.<a class="code" href="../../d0/d7/struct__AMDK6__MTRR__MSR__IMAGE.html#o4">u</a>.hw.mtrr1.type = <a class="code" href="../../d0/d5/mtrramd_8c.html#a3">AMDK6_MTRR_TYPE_DISABLED</a>;
00668 
00669     <span class="comment">//</span>
00670     <span class="comment">// Find the Write Combining Regions, if any and set up the MTRR register.</span>
00671     <span class="comment">//</span>
00672 
00673     <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../d0/d5/mtrramd_8c.html#a20">AmdK6RegionCount</a>; i++) {
00674 
00675         <span class="comment">//</span>
00676         <span class="comment">// Is this a valid region, and is it a write combined type?</span>
00677         <span class="comment">//</span>
00678 
00679         <span class="keywordflow">if</span> ((<a class="code" href="../../d0/d5/mtrramd_8c.html#a19">AmdK6Regions</a>[i].<a class="code" href="../../d3/d7/struct__AMDK6__MTRR__REGION.html#o0">BaseAddress</a> != <a class="code" href="../../d0/d5/mtrramd_8c.html#a9">AMDK6_REGION_UNUSED</a>) &amp;&amp;
00680             (<a class="code" href="../../d0/d5/mtrramd_8c.html#a19">AmdK6Regions</a>[i].<a class="code" href="../../d3/d7/struct__AMDK6__MTRR__REGION.html#o2">RegionType</a> == <a class="code" href="../../d4/d9/ke_8h.html#a413a250">MmWriteCombined</a>)) {
00681             
00682             <span class="comment">//</span>
00683             <span class="comment">// Calculate the correct mask for this range size.  The</span>
00684             <span class="comment">// BaseAddress and size were validated and adjusted in</span>
00685             <span class="comment">// AmdK6MtrrSetMemoryType().</span>
00686             <span class="comment">//</span>
00687             <span class="comment">// Start with 128K and scan for all legal range values and</span>
00688             <span class="comment">// build the appropriate range mask at the same time.</span>
00689             <span class="comment">//</span>
00690 
00691             RangeTemp = 0x00020000;
00692             RangeMask = 0xfffe0000;            
00693 
00694             <span class="keywordflow">while</span> (RangeTemp != 0) {
00695                 <span class="keywordflow">if</span> (RangeTemp == <a class="code" href="../../d0/d5/mtrramd_8c.html#a19">AmdK6Regions</a>[i].<a class="code" href="../../d3/d7/struct__AMDK6__MTRR__REGION.html#o1">Size</a>) {
00696                     <span class="keywordflow">break</span>;
00697                 }
00698                 RangeTemp &lt;&lt;= 1;
00699                 RangeMask &lt;&lt;= 1;
00700             }
00701             <span class="keywordflow">if</span> (RangeTemp == 0) {
00702 
00703                 <span class="comment">//</span>
00704                 <span class="comment">// Not a valid range size.  This can never happen!!</span>
00705                 <span class="comment">//</span>
00706 
00707                 <a class="code" href="../../d7/d9/assign_8c.html#a19">DBGMSG</a> (<span class="stringliteral">"AmdK6MtrrCommitChanges: Bad WC range in region table!\n"</span>);
00708 
00709                 <span class="keywordflow">return</span> STATUS_NOT_SUPPORTED;
00710             }
00711 
00712             <span class="comment">//</span>
00713             <span class="comment">// Add the region to the next available register.</span>
00714             <span class="comment">//</span>
00715 
00716             <span class="keywordflow">if</span> (dwWcRangeCount == 0)  {
00717 
00718                 <a class="code" href="../../d0/d5/mtrramd_8c.html#a22">KiAmdK6Mtrr</a>.<a class="code" href="../../d0/d7/struct__AMDK6__MTRR__MSR__IMAGE.html#o4">u</a>.hw.mtrr0.base = <a class="code" href="../../d0/d5/mtrramd_8c.html#a19">AmdK6Regions</a>[i].<a class="code" href="../../d3/d7/struct__AMDK6__MTRR__REGION.html#o0">BaseAddress</a> &gt;&gt; 17;
00719                 <a class="code" href="../../d0/d5/mtrramd_8c.html#a22">KiAmdK6Mtrr</a>.<a class="code" href="../../d0/d7/struct__AMDK6__MTRR__MSR__IMAGE.html#o4">u</a>.hw.mtrr0.mask = RangeMask &gt;&gt; 17;
00720                 <a class="code" href="../../d0/d5/mtrramd_8c.html#a22">KiAmdK6Mtrr</a>.<a class="code" href="../../d0/d7/struct__AMDK6__MTRR__MSR__IMAGE.html#o4">u</a>.hw.mtrr0.type = <a class="code" href="../../d0/d5/mtrramd_8c.html#a5">AMDK6_MTRR_TYPE_WC</a>;
00721                 dwWcRangeCount++;
00722 
00723             }  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dwWcRangeCount == 1) {
00724 
00725                 <a class="code" href="../../d0/d5/mtrramd_8c.html#a22">KiAmdK6Mtrr</a>.<a class="code" href="../../d0/d7/struct__AMDK6__MTRR__MSR__IMAGE.html#o4">u</a>.hw.mtrr1.base = <a class="code" href="../../d0/d5/mtrramd_8c.html#a19">AmdK6Regions</a>[i].<a class="code" href="../../d3/d7/struct__AMDK6__MTRR__REGION.html#o0">BaseAddress</a> &gt;&gt; 17;
00726                 <a class="code" href="../../d0/d5/mtrramd_8c.html#a22">KiAmdK6Mtrr</a>.<a class="code" href="../../d0/d7/struct__AMDK6__MTRR__MSR__IMAGE.html#o4">u</a>.hw.mtrr1.mask = RangeMask &gt;&gt; 17;
00727                 <a class="code" href="../../d0/d5/mtrramd_8c.html#a22">KiAmdK6Mtrr</a>.<a class="code" href="../../d0/d7/struct__AMDK6__MTRR__MSR__IMAGE.html#o4">u</a>.hw.mtrr1.type = <a class="code" href="../../d0/d5/mtrramd_8c.html#a5">AMDK6_MTRR_TYPE_WC</a>;
00728                 dwWcRangeCount++;
00729 
00730             } <span class="keywordflow">else</span> {
00731 
00732                 <span class="comment">//</span>
00733                 <span class="comment">// Should never happen!  This should have been caught in</span>
00734                 <span class="comment">// the calling routine.</span>
00735                 <span class="comment">//</span>
00736 
00737                 <a class="code" href="../../d7/d9/assign_8c.html#a19">DBGMSG</a> (<span class="stringliteral">"AmdK6MtrrCommitChanges: Not enough MTRR registers to satisfy region table!\n"</span>);
00738 
00739                 <span class="keywordflow">return</span> STATUS_NOT_SUPPORTED;
00740             }
00741         }
00742     }
00743 
00744     <span class="comment">//</span>
00745     <span class="comment">// Commit the changes to hardware.</span>
00746     <span class="comment">//</span>
00747 
00748     <a class="code" href="../../d0/d5/mtrramd_8c.html#a23">KiLoadMTRR</a>(NULL);
00749 
00750     <span class="keywordflow">return</span> STATUS_SUCCESS;
00751 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a26" doxytag="mtrramd.c::KiAmdK6MtrrSetMemoryType" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS KiAmdK6MtrrSetMemoryType           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>BaseAddress</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>Size</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d4/d9/ke_8h.html#a156">MEMORY_CACHING_TYPE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Type</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00294">294</a> of file <a class="el" href="../../d1/d4/mtrramd_8c-source.html">mtrramd.c</a>.
<p>
References <a class="el" href="../../d8/d8/assign_8c-source.html#l00348">DBGMSG</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00087">DISPATCH_LEVEL</a>, <a class="el" href="../../d6/d7/ex_8h-source.html#l03321">ExPageLockHandle</a>, <a class="el" href="../../d5/d8/ke_8h-source.html#l02007">KeAcquireSpinLock</a>, <a class="el" href="../../d9/d5/verifier_8c.html#a119">KeReleaseSpinLock()</a>, <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00375">KiAmdK6HandleWcRegionRequest()</a>, <a class="el" href="../../d9/d3/mtrr_8c-source.html#l00265">KiRangeLock</a>, <a class="el" href="../../d4/d9/ke_8h.html#a413a249">MmCached</a>, <a class="el" href="../../d6/d5/iosup_8c-source.html#l06284">MmLockPagableSectionByHandle()</a>, <a class="el" href="../../d4/d9/ke_8h.html#a413a248">MmNonCached</a>, <a class="el" href="../../d6/d5/iosup_8c-source.html#l07065">MmUnlockPagableImageSection()</a>, <a class="el" href="../../d4/d9/ke_8h.html#a413a250">MmWriteCombined</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d9/d6/lh__open_2pi__mem_8h-source.html#l00017">Size</a>, and <a class="el" href="../../d3/d0/cttoken_8c-source.html#l00135">Status</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/mtrr_8c-source.html#l00576">KeSetPhysicalCacheTypeRange()</a>.
<p>
<pre class="fragment"><div>00299 {
00300     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>    <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = STATUS_SUCCESS;
00301     KIRQL       OldIrql;
00302 
00303     <span class="keywordflow">switch</span>(Type) {
00304     <span class="keywordflow">case</span> <a class="code" href="../../d4/d9/ke_8h.html#a413a250">MmWriteCombined</a>:
00305 
00306         <span class="comment">//</span>
00307         <span class="comment">// H/W needs updating, lock down the code required to effect</span>
00308         <span class="comment">// the change.</span>
00309         <span class="comment">//</span>
00310 
00311         <span class="keywordflow">if</span> (KeGetCurrentIrql() &gt;= <a class="code" href="../../d6/d7/halmips_8h.html#a53">DISPATCH_LEVEL</a>) {
00312 
00313             <span class="comment">//</span>
00314             <span class="comment">// Code can not be locked down.   Supplying a new range type</span>
00315             <span class="comment">// requires that the caller calls at irql &lt; dispatch_level.</span>
00316             <span class="comment">//</span>
00317 
00318             <a class="code" href="../../d7/d9/assign_8c.html#a19">DBGMSG</a> (<span class="stringliteral">"KeAmdK6SetPhysicalCacheTypeRange failed due to calling IRQL == DISPATCH_LEVEL\n"</span>);
00319             <span class="keywordflow">return</span> STATUS_UNSUCCESSFUL;
00320         }
00321 
00322         <span class="comment">//</span>
00323         <span class="comment">// Lock the code.</span>
00324         <span class="comment">//</span>
00325 
00326         <a class="code" href="../../d5/d6/iosup_8c.html#a76">MmLockPagableSectionByHandle</a>(ExPageLockHandle);
00327         
00328         <span class="comment">//</span>
00329         <span class="comment">// Serialize the region table.</span>
00330         <span class="comment">//</span>
00331 
00332         <a class="code" href="../../d4/d9/ke_8h.html#a37">KeAcquireSpinLock</a> (&amp;KiRangeLock, &amp;OldIrql);
00333 
00334         <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d0/d5/mtrramd_8c.html#a29">KiAmdK6HandleWcRegionRequest</a>(BaseAddress, Size);
00335         
00336         <span class="comment">//</span>
00337         <span class="comment">// Release the locks.</span>
00338         <span class="comment">//</span>
00339 
00340         <a class="code" href="../../d9/d5/verifier_8c.html#a119">KeReleaseSpinLock</a> (&amp;KiRangeLock, OldIrql);
00341         <a class="code" href="../../d5/d6/iosup_8c.html#a81">MmUnlockPagableImageSection</a>(ExPageLockHandle);
00342         
00343         <span class="keywordflow">break</span>;  <span class="comment">// End of WriteCombined case.</span>
00344 
00345     <span class="keywordflow">case</span> <a class="code" href="../../d4/d9/ke_8h.html#a413a248">MmNonCached</a>:
00346 
00347         <span class="comment">//</span>
00348         <span class="comment">// Add an entry to the region table.</span>
00349         <span class="comment">//</span>
00350 
00351         <span class="comment">// Don't need to add these to the region table.  Non-cached regions are </span>
00352         <span class="comment">// accessed using a non-caching virtual pointer set up in the page tables.</span>
00353 
00354         <span class="keywordflow">break</span>;
00355 
00356     <span class="keywordflow">case</span> <a class="code" href="../../d4/d9/ke_8h.html#a413a249">MmCached</a>:
00357 
00358         <span class="comment">//</span>
00359         <span class="comment">// Redundant.  These should be filtered out in</span>
00360         <span class="comment">// KeAmdK6SetPhysicalCacheTypeRange();</span>
00361         <span class="comment">//</span>
00362 
00363         <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = STATUS_NOT_SUPPORTED;
00364         <span class="keywordflow">break</span>;
00365 
00366     <span class="keywordflow">default</span>:
00367         <a class="code" href="../../d7/d9/assign_8c.html#a19">DBGMSG</a> (<span class="stringliteral">"KeAmdK6SetPhysicalCacheTypeRange: no such cache type\n"</span>);
00368         <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = STATUS_INVALID_PARAMETER;
00369         <span class="keywordflow">break</span>;
00370     }
00371     <span class="keywordflow">return</span> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
00372 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a32" doxytag="mtrramd.c::KiAmdK6MtrrWRMSR" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID KiAmdK6MtrrWRMSR           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">VOID&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00754">754</a> of file <a class="el" href="../../d1/d4/mtrramd_8c-source.html">mtrramd.c</a>.
<p>
References <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00055">AMDK6_MTRR_MSR</a>, <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00163">KiAmdK6Mtrr</a>, <a class="el" href="../../d0/d7/struct__AMDK6__MTRR__MSR__IMAGE.html#o4">_AMDK6_MTRR_MSR_IMAGE::u</a>, and <a class="el" href="../../d5/d3/i386_8h.html#a53">WRMSR()</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/mtrr_8c-source.html#l01796">KiLoadMTRR()</a>.
<p>
<pre class="fragment"><div>00760                    :
00761 
00762     Write <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> AMD K6 MTRRs.
00763 
00764     Note: Access to <a class="code" href="../../d0/d5/mtrramd_8c.html#a22">KiAmdK6Mtrr</a> has been <span class="keyword">synchronized</span> around <span class="keyword">this</span>
00765     call.
00766 
00767 Arguments:
00768 
00769     None.
00770 
00771 Return Value:
00772 
00773     None.
00774 
00775 --*/
00776 
00777 {
00778     <span class="comment">//</span>
00779     <span class="comment">// Write the MTRRs</span>
00780     <span class="comment">//</span>
00781 
00782     <a class="code" href="../../d5/d3/i386_8h.html#a53">WRMSR</a> (AMDK6_MTRR_MSR, <a class="code" href="../../d0/d5/mtrramd_8c.html#a22">KiAmdK6Mtrr</a>.<a class="code" href="../../d0/d7/struct__AMDK6__MTRR__MSR__IMAGE.html#o4">u</a>.QuadPart);
00783 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a25" doxytag="mtrramd.c::KiAmdK6RestoreMTRR" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS KiAmdK6RestoreMTRR           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a23" doxytag="mtrramd.c::KiLoadMTRR" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS KiLoadMTRR           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">PVOID&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>Context</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d9/d3/mtrr_8c-source.html#l00526">KeRestoreMtrr()</a>, <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00635">KiAmdK6MtrrCommitChanges()</a>, <a class="el" href="../../d9/d3/mtrr_8c-source.html#l01112">KiCompleteEffectiveRangeChange()</a>, and <a class="el" href="../../d9/d3/mtrr_8c-source.html#l01766">KiLoadMTRRTarget()</a>.    </td>
  </tr>
</table>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="a20" doxytag="mtrramd.c::AmdK6RegionCount" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ULONG <a class="el" href="../../d0/d5/mtrramd_8c.html#a20">AmdK6RegionCount</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00155">155</a> of file <a class="el" href="../../d1/d4/mtrramd_8c-source.html">mtrramd.c</a>.
<p>
Referenced by <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00581">KiAmdK6FindFreeRegion()</a>, <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00375">KiAmdK6HandleWcRegionRequest()</a>, <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00168">KiAmdK6InitializeMTRR()</a>, and <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00635">KiAmdK6MtrrCommitChanges()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a19" doxytag="mtrramd.c::AmdK6Regions" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d3/d7/struct__AMDK6__MTRR__REGION.html">AMDK6_MTRR_REGION</a> <a class="el" href="../../d0/d5/mtrramd_8c.html#a19">AmdK6Regions</a>[MAX_K6_REGIONS]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00154">154</a> of file <a class="el" href="../../d1/d4/mtrramd_8c-source.html">mtrramd.c</a>.
<p>
Referenced by <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00581">KiAmdK6FindFreeRegion()</a>, <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00375">KiAmdK6HandleWcRegionRequest()</a>, <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00168">KiAmdK6InitializeMTRR()</a>, and <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00635">KiAmdK6MtrrCommitChanges()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a21" doxytag="mtrramd.c::AmdMtrrHwUsageCount" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ULONG <a class="el" href="../../d0/d5/mtrramd_8c.html#a21">AmdMtrrHwUsageCount</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00159">159</a> of file <a class="el" href="../../d1/d4/mtrramd_8c-source.html">mtrramd.c</a>.
<p>
Referenced by <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00581">KiAmdK6FindFreeRegion()</a>, <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00168">KiAmdK6InitializeMTRR()</a>, and <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00230">KiAmdK6MTRRAddRegionFromHW()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a22" doxytag="mtrramd.c::KiAmdK6Mtrr" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d7/struct__AMDK6__MTRR__MSR__IMAGE.html">AMDK6_MTRR_MSR_IMAGE</a> <a class="el" href="../../d0/d5/mtrramd_8c.html#a22">KiAmdK6Mtrr</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00163">163</a> of file <a class="el" href="../../d1/d4/mtrramd_8c-source.html">mtrramd.c</a>.
<p>
Referenced by <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00168">KiAmdK6InitializeMTRR()</a>, <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00635">KiAmdK6MtrrCommitChanges()</a>, and <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00754">KiAmdK6MtrrWRMSR()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a18" doxytag="mtrramd.c::KiRangeLock" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> KSPIN_LOCK <a class="el" href="../../d0/d5/mtrramd_8c.html#a18">KiRangeLock</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00150">150</a> of file <a class="el" href="../../d1/d4/mtrramd_8c-source.html">mtrramd.c</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/mtrr_8c-source.html#l00526">KeRestoreMtrr()</a>, <a class="el" href="../../d9/d3/mtrr_8c-source.html#l00576">KeSetPhysicalCacheTypeRange()</a>, <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00168">KiAmdK6InitializeMTRR()</a>, <a class="el" href="../../d1/d4/mtrramd_8c-source.html#l00294">KiAmdK6MtrrSetMemoryType()</a>, and <a class="el" href="../../d9/d3/mtrr_8c-source.html#l00275">KiInitializeMTRR()</a>.    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Sat May 15 19:44:49 2004 for test by
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>

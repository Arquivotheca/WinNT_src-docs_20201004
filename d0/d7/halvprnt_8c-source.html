<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>test: halvprnt.c Source File</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="../../main.html">Main&nbsp;Page</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Class&nbsp;List</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Class&nbsp;Members</a> | <a class="qindex" href="../../globals.html">File&nbsp;Members</a></div>
<h1>halvprnt.c</h1><a href="../../d9/d7/halvprnt_8c.html">Go to the documentation of this file.</a><pre class="fragment"><div>00001 <span class="comment">/*++</span>
00002 <span class="comment"></span>
00003 <span class="comment">Copyright (c) 1990  Microsoft Corporation</span>
00004 <span class="comment"></span>
00005 <span class="comment">Module Name:</span>
00006 <span class="comment"></span>
00007 <span class="comment">    halvprnt.c</span>
00008 <span class="comment"></span>
00009 <span class="comment">Author:</span>
00010 <span class="comment"></span>
00011 <span class="comment">    John Vert (jvert) 13-Aug-1991</span>
00012 <span class="comment">        based on TomP's video.c</span>
00013 <span class="comment"></span>
00014 <span class="comment">Abstract:</span>
00015 <span class="comment"></span>
00016 <span class="comment">    Video support routines.</span>
00017 <span class="comment"></span>
00018 <span class="comment">    The vprintf function here outputs to the console via InbvDisplayString.</span>
00019 <span class="comment">    All the global variables have been made local, so multiple processors</span>
00020 <span class="comment">    can execute it simultaneously.  If this is the case, it relies on</span>
00021 <span class="comment">    InbvDisplayString to sort the output to avoid interleaving the text from</span>
00022 <span class="comment">    the processors.</span>
00023 <span class="comment"></span>
00024 <span class="comment">History:</span>
00025 <span class="comment"></span>
00026 <span class="comment">--*/</span>
00027 
00028 <span class="preprocessor">#include &lt;<a class="code" href="../../d9/d8/ntos_8h.html">ntos.h</a>&gt;</span>
00029 <span class="preprocessor">#include &lt;<a class="code" href="../../d0/d1/inbv_8h.html">inbv.h</a>&gt;</span>
00030 
<a name="l00031"></a><a class="code" href="../../d9/d7/halvprnt_8c.html#a1">00031</a> <span class="keyword">typedef</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a>, *<a class="code" href="../../d9/d7/halvprnt_8c.html#a1">PBYTE</a>;
00032 
00033 
00034 <span class="comment">//</span>
00035 <span class="comment">// Internal routines</span>
00036 <span class="comment">//</span>
00037 
00038 <span class="keyword">static</span>
00039 <span class="keywordtype">int</span>
00040 <a class="code" href="../../d9/d7/halvprnt_8c.html#a2">xatoi</a>(<span class="keywordtype">char</span> c);
00041 
00042 <span class="keyword">static</span>
00043 <span class="keywordtype">int</span>
00044 <a class="code" href="../../d9/d7/halvprnt_8c.html#a3">fields</a>(
00045     <span class="keywordtype">char</span> *cp,
00046     <span class="keywordtype">int</span> *zerofill,
00047     <span class="keywordtype">int</span> *fieldwidth
00048     );
00049 
00050 <span class="keyword">static</span>
00051 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00052 <a class="code" href="../../d9/d7/halvprnt_8c.html#a4">putx</a>(
00053     ULONG x,
00054     <span class="keywordtype">int</span> digits,
00055     <span class="keywordtype">int</span> zerofill,
00056     <span class="keywordtype">int</span> *fieldwidth
00057     );
00058 
00059 <span class="keyword">static</span>
00060 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00061 <a class="code" href="../../d9/d7/halvprnt_8c.html#a9">puti</a>(
00062     LONG i,
00063     <span class="keywordtype">int</span> digits,
00064     <span class="keywordtype">int</span> zerofill,
00065     <span class="keywordtype">int</span> *fieldwidth
00066     );
00067 
00068 <span class="keyword">static</span>
00069 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00070 <a class="code" href="../../d9/d7/halvprnt_8c.html#a6">putu</a>(
00071     ULONG u,
00072     <span class="keywordtype">int</span> digits,
00073     <span class="keywordtype">int</span> zerofill,
00074     <span class="keywordtype">int</span> *fieldwidth
00075     );
00076 
00077 <span class="keyword">static</span>
00078 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00079 <a class="code" href="../../d9/d7/halvprnt_8c.html#a7">putc</a>(
00080     CHAR c
00081     );
00082 
00083 
00084 <span class="comment">/*++</span>
00085 <span class="comment"></span>
00086 <span class="comment">Name</span>
00087 <span class="comment"></span>
00088 <span class="comment">    vprintf - DbgPrint function on standard video</span>
00089 <span class="comment"></span>
00090 <span class="comment">    Currently handles</span>
00091 <span class="comment"></span>
00092 <span class="comment"></span>
00093 <span class="comment">     %i, %li - signed short, signed long  (same as d)</span>
00094 <span class="comment">     %d, %ld - signed short, signed long</span>
00095 <span class="comment">     %u, %lu - unsigned short, unsigned long</span>
00096 <span class="comment">     %c, %s, %.*s - character, string</span>
00097 <span class="comment">     %Z - PSTRING data type</span>
00098 <span class="comment">     %x, %lx - unsigned print in hex, unsigned long print in hex</span>
00099 <span class="comment">     %X, %lX, %X, %X, %X, %X - same as %x and %lx</span>
00100 <span class="comment">     field widths</span>
00101 <span class="comment">     leading 0 fills</span>
00102 <span class="comment"></span>
00103 <span class="comment">    Does not do yet:</span>
00104 <span class="comment"></span>
00105 <span class="comment">     No floating point.</span>
00106 <span class="comment"></span>
00107 <span class="comment"></span>
00108 <span class="comment">--*/</span>
00109 <span class="keywordtype">void</span>
<a name="l00110"></a><a class="code" href="../../d9/d7/halvprnt_8c.html#a8">00110</a> <a class="code" href="../../d9/d7/halvprnt_8c.html#a8">vprintf</a>(PCHAR cp,USHORT a1)
00111 {
00112    ULONG cb;
00113    <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> b,<a class="code" href="../../d2/d0/nt6_2user32_8def.html#a35">c</a>;
00114    <a class="code" href="../../d9/d7/halvprnt_8c.html#a1">PBYTE</a> ap;
00115    PCHAR s;
00116    PSTRING str;
00117    ULONG Flags;
00118    <span class="keywordtype">int</span> zerofill, fieldwidth;
00119 
00120    <span class="comment">//</span>
00121    <span class="comment">// Cast a pointer to the first word on the stack</span>
00122    <span class="comment">//</span>
00123 
00124    ap = (<a class="code" href="../../d9/d7/halvprnt_8c.html#a1">PBYTE</a>)&amp;a1;
00125 
00126 
00127     <span class="comment">//  Save flags in automatic variable on stack, turn off ints.</span>
00128 
00129    _asm {
00130         pushfd
00131         pop     Flags
00132         cli
00133     }
00134 
00135    <span class="comment">//</span>
00136    <span class="comment">// Process the argements using the descriptor string</span>
00137    <span class="comment">//</span>
00138 
00139     <span class="keywordflow">while</span> (b = *cp++) {
00140         <span class="keywordflow">if</span> (b == <span class="charliteral">'%'</span>) {
00141             cp += <a class="code" href="../../d9/d7/halvprnt_8c.html#a3">fields</a>(cp, &amp;zerofill, &amp;fieldwidth);
00142             <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a35">c</a> = *cp++;
00143 
00144             <span class="keywordflow">switch</span> (<a class="code" href="../../d2/d0/nt6_2user32_8def.html#a35">c</a>) {
00145             <span class="keywordflow">case</span> <span class="charliteral">'.'</span>:
00146                 <span class="keywordflow">if</span> (*cp != <span class="charliteral">'*'</span> || cp[1] != <span class="charliteral">'s'</span>) {
00147                     <a class="code" href="../../d9/d7/halvprnt_8c.html#a7">putc</a>((<span class="keywordtype">char</span>)b);
00148                     <a class="code" href="../../d9/d7/halvprnt_8c.html#a7">putc</a>((<span class="keywordtype">char</span>)<a class="code" href="../../d2/d0/nt6_2user32_8def.html#a35">c</a>);
00149                     <span class="keywordflow">break</span>;
00150                 }
00151                 cp += 2;
00152                 cb = *((ULONG *)ap);
00153                 ap += <span class="keyword">sizeof</span>( ULONG );
00154                 s = *((PCHAR *)ap);
00155                 ap += <span class="keyword">sizeof</span>( PCHAR );
00156                 <span class="keywordflow">if</span> (s == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00157                    s = <span class="stringliteral">"(null)"</span>;
00158                    cb = 6;
00159                 }
00160                 <span class="keywordflow">if</span> (cb &gt; 0xFFF) {
00161                    s = <span class="stringliteral">"(overflow)"</span>;
00162                    cb = 10;
00163                 }
00164 
00165                 <span class="keywordflow">while</span> (cb--) {
00166                     <span class="keywordflow">if</span> (*s) {
00167                         <a class="code" href="../../d9/d7/halvprnt_8c.html#a7">putc</a>(*s++);
00168                     } <span class="keywordflow">else</span> {
00169                         <a class="code" href="../../d9/d7/halvprnt_8c.html#a7">putc</a>(<span class="charliteral">' '</span>);
00170                     }
00171                 }
00172                 <span class="keywordflow">break</span>;
00173 
00174             <span class="keywordflow">case</span> <span class="charliteral">'i'</span>:
00175             <span class="keywordflow">case</span> <span class="charliteral">'d'</span>:
00176                 <a class="code" href="../../d9/d7/halvprnt_8c.html#a9">puti</a>((<span class="keywordtype">long</span>)*((<span class="keywordtype">int</span> *)ap), 1, zerofill, &amp;fieldwidth);
00177                 ap += <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>);
00178                 <span class="keywordflow">break</span>;
00179 
00180             <span class="keywordflow">case</span> <span class="charliteral">'S'</span>:
00181                 str = *((PSTRING *)ap);
00182                 ap += <span class="keyword">sizeof</span> (STRING *);
00183                 b = str-&gt;Length;
00184                 s = str-&gt;Buffer;
00185                 <span class="keywordflow">if</span> (s == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00186                     s = <span class="stringliteral">"(null)"</span>;
00187                 <span class="keywordflow">while</span> (b--)
00188                     <a class="code" href="../../d9/d7/halvprnt_8c.html#a7">putc</a>(*s++);
00189                 <span class="keywordflow">break</span>;
00190 
00191             <span class="keywordflow">case</span> <span class="charliteral">'s'</span>:
00192                 s = *((PCHAR *)ap);
00193                 ap += <span class="keyword">sizeof</span>( PCHAR );
00194                 <span class="keywordflow">if</span> (s == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00195                    s = <span class="stringliteral">"(null)"</span>;
00196                 <span class="keywordflow">while</span> (*s)
00197                    <a class="code" href="../../d9/d7/halvprnt_8c.html#a7">putc</a>(*s++);
00198                 <span class="keywordflow">break</span>;
00199 
00200             <span class="keywordflow">case</span> <span class="charliteral">'c'</span>:
00201                 <a class="code" href="../../d9/d7/halvprnt_8c.html#a7">putc</a>(*((<span class="keywordtype">char</span> *)ap));
00202                 ap += <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>);
00203                 <span class="keywordflow">break</span>;
00204 
00205 
00206             <span class="comment">//</span>
00207             <span class="comment">//  If we cannot find the status value in the table, print it in</span>
00208             <span class="comment">//  hex.</span>
00209             <span class="comment">//</span>
00210             <span class="keywordflow">case</span> <span class="charliteral">'C'</span>:
00211             <span class="keywordflow">case</span> <span class="charliteral">'B'</span>:
00212                 <span class="comment">//</span>
00213                 <span class="comment">// Should search bugcodes.h to display bug code</span>
00214                 <span class="comment">// symbolically.  For now just show as hex</span>
00215                 <span class="comment">//</span>
00216 
00217             <span class="keywordflow">case</span> <span class="charliteral">'X'</span>:
00218             <span class="keywordflow">case</span> <span class="charliteral">'x'</span>:
00219                 <a class="code" href="../../d9/d7/halvprnt_8c.html#a4">putx</a>((ULONG)*((<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> *)ap), 1, zerofill, &amp;fieldwidth);
00220                 ap += <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>);
00221                 <span class="keywordflow">break</span>;
00222 
00223             <span class="keywordflow">case</span> <span class="charliteral">'u'</span>:
00224                 <a class="code" href="../../d9/d7/halvprnt_8c.html#a6">putu</a>((ULONG)*((<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> *)ap), 1, zerofill, &amp;fieldwidth);
00225                 ap += <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>);
00226                 <span class="keywordflow">break</span>;
00227 
00228             <span class="keywordflow">case</span> <span class="charliteral">'l'</span>:
00229                 <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a35">c</a> = *cp++;
00230 
00231                 <span class="keywordflow">switch</span>(<a class="code" href="../../d2/d0/nt6_2user32_8def.html#a35">c</a>) {
00232                 <span class="keywordflow">case</span> <span class="charliteral">'u'</span>:
00233                     <a class="code" href="../../d9/d7/halvprnt_8c.html#a6">putu</a>(*((ULONG *)ap), 1, zerofill, &amp;fieldwidth);
00234                     ap += <span class="keyword">sizeof</span>(<span class="keywordtype">long</span>);
00235                     <span class="keywordflow">break</span>;
00236 
00237                 <span class="keywordflow">case</span> <span class="charliteral">'C'</span>:
00238                 <span class="keywordflow">case</span> <span class="charliteral">'B'</span>:
00239                     <span class="comment">//</span>
00240                     <span class="comment">// Should search bugcodes.h to display bug code</span>
00241                     <span class="comment">// symbolically.  For now just show as hex</span>
00242                     <span class="comment">//</span>
00243 
00244                 <span class="keywordflow">case</span> <span class="charliteral">'X'</span>:
00245                 <span class="keywordflow">case</span> <span class="charliteral">'x'</span>:
00246                     <a class="code" href="../../d9/d7/halvprnt_8c.html#a4">putx</a>(*((ULONG *)ap), 1, zerofill, &amp;fieldwidth);
00247                     ap += <span class="keyword">sizeof</span>(<span class="keywordtype">long</span>);
00248                     <span class="keywordflow">break</span>;
00249 
00250                 <span class="keywordflow">case</span> <span class="charliteral">'i'</span>:
00251                 <span class="keywordflow">case</span> <span class="charliteral">'d'</span>:
00252                     <a class="code" href="../../d9/d7/halvprnt_8c.html#a9">puti</a>(*((ULONG *)ap), 1, zerofill, &amp;fieldwidth);
00253                     ap += <span class="keyword">sizeof</span>(<span class="keywordtype">long</span>);
00254                     <span class="keywordflow">break</span>;
00255                 }                               <span class="comment">// inner switch</span>
00256                 <span class="keywordflow">break</span>;
00257 
00258             <span class="keywordflow">default</span> :
00259                 <a class="code" href="../../d9/d7/halvprnt_8c.html#a7">putc</a>((<span class="keywordtype">char</span>)b);
00260                 <a class="code" href="../../d9/d7/halvprnt_8c.html#a7">putc</a>((<span class="keywordtype">char</span>)<a class="code" href="../../d2/d0/nt6_2user32_8def.html#a35">c</a>);
00261             } <span class="comment">// outer switch</span>
00262         }   <span class="comment">// if</span>
00263         <span class="keywordflow">else</span>
00264             <a class="code" href="../../d9/d7/halvprnt_8c.html#a7">putc</a>((<span class="keywordtype">char</span>)b);
00265     } <span class="comment">// while</span>
00266 
00267     <span class="comment">// Restore flags from automatic variable on stack</span>
00268 
00269     _asm {
00270         push    Flags
00271         popfd
00272     }
00273     <span class="keywordflow">return</span>;
00274 }
00275 
00276 
00277 <span class="comment">//</span>
00278 <span class="comment">// Fields computation</span>
00279 <span class="comment">//</span>
00280 
<a name="l00281"></a><a class="code" href="../../d9/d7/halvprnt_8c.html#a3">00281</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d9/d7/halvprnt_8c.html#a3">fields</a>(<span class="keywordtype">char</span> *cp, <span class="keywordtype">int</span> *zerofill, <span class="keywordtype">int</span> *fieldwidth)
00282 {
00283     <span class="keywordtype">int</span> incval = 0;
00284 
00285     *zerofill = 0;
00286     *fieldwidth = 0;
00287 
00288     <span class="keywordflow">if</span> (*cp == <span class="charliteral">'0'</span>) {
00289         *zerofill = 1;
00290         cp++;
00291         incval++;
00292     }
00293 
00294     <span class="keywordflow">while</span> ((*cp &gt;= <span class="charliteral">'0'</span>) &amp;&amp; (*cp &lt;= <span class="charliteral">'9'</span>)) {
00295         *fieldwidth = (*fieldwidth * 10) + <a class="code" href="../../d9/d7/halvprnt_8c.html#a2">xatoi</a>(*cp);
00296         cp++;
00297         incval++;
00298     }
00299     <span class="keywordflow">return</span> incval;
00300 }
00301 
00302 <span class="comment">//</span>
00303 <span class="comment">// Write a hex short to display</span>
00304 <span class="comment">//</span>
00305 
<a name="l00306"></a><a class="code" href="../../d9/d7/halvprnt_8c.html#a4">00306</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d9/d7/halvprnt_8c.html#a4">putx</a>(ULONG x, <span class="keywordtype">int</span> digits, <span class="keywordtype">int</span> zerofill, <span class="keywordtype">int</span> *fieldwidth)
00307 {
00308    ULONG j;
00309 
00310    <span class="keywordflow">if</span> (x/16)
00311       <a class="code" href="../../d9/d7/halvprnt_8c.html#a4">putx</a>(x/16, digits+1, zerofill, fieldwidth);
00312 
00313    <span class="keywordflow">if</span> (*fieldwidth &gt; digits) {
00314         <span class="keywordflow">while</span> (*fieldwidth &gt; digits) {
00315             <span class="keywordflow">if</span> (zerofill)
00316                 <a class="code" href="../../d9/d7/halvprnt_8c.html#a7">putc</a>(<span class="charliteral">'0'</span>);
00317             <span class="keywordflow">else</span>
00318                 <a class="code" href="../../d9/d7/halvprnt_8c.html#a7">putc</a>(<span class="charliteral">' '</span>);
00319             *fieldwidth--;
00320         }
00321     }
00322     *fieldwidth = 0;
00323 
00324 
00325    <span class="keywordflow">if</span>((j=x%16) &gt; 9)
00326       <a class="code" href="../../d9/d7/halvprnt_8c.html#a7">putc</a>((<span class="keywordtype">char</span>)(j+<span class="charliteral">'A'</span>- 10));
00327    <span class="keywordflow">else</span>
00328       <a class="code" href="../../d9/d7/halvprnt_8c.html#a7">putc</a>((<span class="keywordtype">char</span>)(j+<span class="charliteral">'0'</span>));
00329 
00330 }
00331 
00332 
00333 <span class="comment">//</span>
00334 <span class="comment">// Write a short integer to display</span>
00335 <span class="comment">//</span>
00336 
<a name="l00337"></a><a class="code" href="../../d9/d7/halvprnt_8c.html#a9">00337</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d9/d7/halvprnt_8c.html#a9">puti</a>(<span class="keywordtype">long</span> i, <span class="keywordtype">int</span> digits, <span class="keywordtype">int</span> zerofill, <span class="keywordtype">int</span> *fieldwidth)
00338 {
00339     <span class="keywordflow">if</span> (i&lt;0) {
00340         i = -i;
00341         <a class="code" href="../../d9/d7/halvprnt_8c.html#a7">putc</a>((<span class="keywordtype">char</span>)<span class="charliteral">'-'</span>);
00342     }
00343 
00344     <span class="keywordflow">if</span> (i/10)
00345         <a class="code" href="../../d9/d7/halvprnt_8c.html#a9">puti</a>(i/10, digits+1, zerofill, fieldwidth);
00346 
00347     <span class="keywordflow">if</span> (*fieldwidth &gt; digits) {
00348         <span class="keywordflow">while</span> (*fieldwidth &gt; digits) {
00349             <span class="keywordflow">if</span> (zerofill)
00350                 <a class="code" href="../../d9/d7/halvprnt_8c.html#a7">putc</a>(<span class="charliteral">'0'</span>);
00351             <span class="keywordflow">else</span>
00352                 <a class="code" href="../../d9/d7/halvprnt_8c.html#a7">putc</a>(<span class="charliteral">' '</span>);
00353             *fieldwidth--;
00354         }
00355     }
00356     *fieldwidth = 0;
00357 
00358     <a class="code" href="../../d9/d7/halvprnt_8c.html#a7">putc</a>((<span class="keywordtype">char</span>)((i%10)+<span class="charliteral">'0'</span>));
00359 }
00360 
00361 
00362 <span class="comment">//</span>
00363 <span class="comment">// Write an unsigned short to display</span>
00364 <span class="comment">//</span>
00365 
<a name="l00366"></a><a class="code" href="../../d9/d7/halvprnt_8c.html#a6">00366</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d9/d7/halvprnt_8c.html#a6">putu</a>(ULONG u, <span class="keywordtype">int</span> digits, <span class="keywordtype">int</span> zerofill, <span class="keywordtype">int</span> *fieldwidth)
00367 {
00368    <span class="keywordflow">if</span> (u/10)
00369       <a class="code" href="../../d9/d7/halvprnt_8c.html#a6">putu</a>(u/10, digits+1, zerofill, fieldwidth);
00370 
00371    <span class="keywordflow">if</span> (*fieldwidth &gt; digits) {
00372         <span class="keywordflow">while</span> (*fieldwidth &gt; digits) {
00373             <span class="keywordflow">if</span> (zerofill)
00374                 <a class="code" href="../../d9/d7/halvprnt_8c.html#a7">putc</a>(<span class="charliteral">'0'</span>);
00375             <span class="keywordflow">else</span>
00376                 <a class="code" href="../../d9/d7/halvprnt_8c.html#a7">putc</a>(<span class="charliteral">' '</span>);
00377             *fieldwidth--;
00378         }
00379     }
00380     *fieldwidth = 0;
00381 
00382     <a class="code" href="../../d9/d7/halvprnt_8c.html#a7">putc</a>((<span class="keywordtype">char</span>)((u%10)+<span class="charliteral">'0'</span>));
00383 }
00384 
00385 <span class="comment">//</span>
00386 <span class="comment">// Write a character to display</span>
00387 <span class="comment">//</span>
00388 
<a name="l00389"></a><a class="code" href="../../d9/d7/halvprnt_8c.html#a7">00389</a> <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a> <a class="code" href="../../d9/d7/halvprnt_8c.html#a7">putc</a>(
00390     CHAR c
00391     )
00392 {
00393     <span class="keyword">static</span> UCHAR OneCharacter[2];
00394 
00395     OneCharacter[1] = <span class="charliteral">'\0'</span>;
00396     OneCharacter[0] = <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a35">c</a>;
00397     <a class="code" href="../../d0/d1/inbv_8h.html#a9">InbvDisplayString</a>(OneCharacter);
00398 }
00399 
00400 
00401 <span class="comment">//</span>
00402 <span class="comment">// Return the integer value of numeral represented by ascii char</span>
00403 <span class="comment">//</span>
00404 
<a name="l00405"></a><a class="code" href="../../d9/d7/halvprnt_8c.html#a2">00405</a> <span class="keywordtype">int</span> <a class="code" href="../../d9/d7/halvprnt_8c.html#a2">xatoi</a>(<span class="keywordtype">char</span> c)
00406 {
00407     <span class="keywordflow">return</span> <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a35">c</a> - <span class="charliteral">'0'</span>;
00408 }
</div></pre><hr size="1"><address style="align: right;"><small>Generated on Sat May 15 19:40:14 2004 for test by
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>

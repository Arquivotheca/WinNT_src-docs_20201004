<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>test: tscroll.c File Reference</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="../../main.html">Main&nbsp;Page</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Class&nbsp;List</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Class&nbsp;Members</a> | <a class="qindex" href="../../globals.html">File&nbsp;Members</a></div>
<h1>tscroll.c File Reference</h1><code>#include "<a class="el" href="../../d5/d2/w32_2ntcon_2client_2precomp_8h-source.html">precomp.h</a>"</code><br>

<p>
<a href="../../d1/d5/tscroll_8c-source.html">Go to the source code of this file.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d6/tscroll_8c.html#a0">FOREGROUND_WHITE</a>&nbsp;&nbsp;&nbsp;(FOREGROUND_BLUE | FOREGROUND_GREEN | FOREGROUND_RED)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d6/tscroll_8c.html#a1">NUM_TESTS</a>&nbsp;&nbsp;&nbsp;5</td></tr>

<tr><td colspan=2><br><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>typedef BOOL(*&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d6/tscroll_8c.html#a2">PTEST_ROUTINE</a> )(IN HANDLE <a class="el" href="../../d5/d6/w98_2lh__open_2pi__basic_8h.html#a29">Handle</a>)</td></tr>

<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d6/tscroll_8c.html#a4">Scroll1</a> (IN HANDLE <a class="el" href="../../d5/d6/w98_2lh__open_2pi__basic_8h.html#a29">Handle</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d6/tscroll_8c.html#a5">Scroll2</a> (IN HANDLE <a class="el" href="../../d5/d6/w98_2lh__open_2pi__basic_8h.html#a29">Handle</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d6/tscroll_8c.html#a6">Scroll3</a> (IN HANDLE <a class="el" href="../../d5/d6/w98_2lh__open_2pi__basic_8h.html#a29">Handle</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d6/tscroll_8c.html#a7">Scroll4</a> (IN HANDLE <a class="el" href="../../d5/d6/w98_2lh__open_2pi__basic_8h.html#a29">Handle</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d6/tscroll_8c.html#a8">Scroll5</a> (IN HANDLE <a class="el" href="../../d5/d6/w98_2lh__open_2pi__basic_8h.html#a29">Handle</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d6/tscroll_8c.html#a9">main</a> (int argc, char *argv[])</td></tr>

<tr><td colspan=2><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d6/tscroll_8c.html#a2">PTEST_ROUTINE</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d6/tscroll_8c.html#a3">Tests</a> [NUM_TESTS] = {Scroll1,Scroll2,Scroll3,Scroll4,Scroll5}</td></tr>

</table>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="a0" doxytag="tscroll.c::FOREGROUND_WHITE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define FOREGROUND_WHITE&nbsp;&nbsp;&nbsp;(FOREGROUND_BLUE | FOREGROUND_GREEN | FOREGROUND_RED)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d5/tscroll_8c-source.html#l00008">8</a> of file <a class="el" href="../../d1/d5/tscroll_8c-source.html">tscroll.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="tscroll.c::NUM_TESTS" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define NUM_TESTS&nbsp;&nbsp;&nbsp;5          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d5/tscroll_8c-source.html#l00037">37</a> of file <a class="el" href="../../d1/d5/tscroll_8c-source.html">tscroll.c</a>.
<p>
Referenced by <a class="el" href="../../d1/d5/tscroll_8c-source.html#l00402">main()</a>, <a class="el" href="../../d0/d1/usrbench_8c-source.html#l01398">ResultsDlgProc()</a>, <a class="el" href="../../d0/d1/usrbench_8c-source.html#l00268">WndProc()</a>, and <a class="el" href="../../d0/d1/usrbench_8c-source.html#l01638">WriteBatchResults()</a>.    </td>
  </tr>
</table>
<hr><h2>Typedef Documentation</h2>
<a class="anchor" name="a2" doxytag="tscroll.c::PTEST_ROUTINE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef BOOL(* <a class="el" href="../../d0/d6/tscroll_8c.html#a2">PTEST_ROUTINE</a>)(IN HANDLE <a class="el" href="../../d5/d6/w98_2lh__open_2pi__basic_8h.html#a29">Handle</a>)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d5/tscroll_8c-source.html#l00012">12</a> of file <a class="el" href="../../d1/d5/tscroll_8c-source.html">tscroll.c</a>.    </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="a9" doxytag="tscroll.c::main" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> main           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname" nowrap> <em>argc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>char *&nbsp;</td>
          <td class="mdname" nowrap> <em>argv</em>[]</td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d5/tscroll_8c-source.html#l00402">402</a> of file <a class="el" href="../../d1/d5/tscroll_8c-source.html">tscroll.c</a>.
<p>
References <a class="el" href="../../d7/d5/memprint_8h-source.html#l00079">DbgPrint</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d8/d9/cmdat2_8c-source.html#l00091">Handle</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d5/tscroll_8c-source.html#l00037">NUM_TESTS</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l00736">SetConsoleActiveScreenBuffer()</a>, <a class="el" href="../../d6/d4/rdwr_8c-source.html#l00046">STD_OUTPUT_HANDLE</a>, <a class="el" href="../../d1/d5/tscroll_8c-source.html#l00038">Tests</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
<pre class="fragment"><div>00406 {
00407     SECURITY_ATTRIBUTES SecurityAttributes;
00408     HANDLE <a class="code" href="../../d7/d0/cmdat2_8c.html#a19">Handle</a>;
00409     <span class="keywordtype">int</span> i;
00410 
00411     <a class="code" href="../../d6/d6/memprint_8h.html#a7">DbgPrint</a>( <span class="stringliteral">"TSCROLL: Entering Scrolling Test Program\n"</span> );
00412 
00413     <span class="keywordflow">for</span> (i=0;i&lt;<a class="code" href="../../d0/d6/tscroll_8c.html#a1">NUM_TESTS</a>;i++) {
00414 
00415         <span class="keywordflow">if</span> (argc==2) {
00416             i = atoi(argv[1]);
00417         }
00418 
00419         <span class="comment">//</span>
00420         <span class="comment">// open a new console</span>
00421         <span class="comment">//</span>
00422 
00423         SecurityAttributes.bInheritHandle = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00424         SecurityAttributes.lpSecurityDescriptor = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00425         SecurityAttributes.nLength = <span class="keyword">sizeof</span> (SECURITY_ATTRIBUTES);
00426         <a class="code" href="../../d7/d0/cmdat2_8c.html#a19">Handle</a> = CreateFile(<span class="stringliteral">"CONOUT$"</span>,
00427                             GENERIC_READ | GENERIC_WRITE,
00428                             FILE_SHARE_READ | FILE_SHARE_WRITE,
00429                             &amp;SecurityAttributes,
00430                             CREATE_ALWAYS,
00431                             0,
00432                             (HANDLE)-1
00433                            );
00434         <span class="keywordflow">if</span> (<a class="code" href="../../d7/d0/cmdat2_8c.html#a19">Handle</a> == (HANDLE)-1) {
00435             <a class="code" href="../../d6/d6/memprint_8h.html#a7">DbgPrint</a>(<span class="stringliteral">"CreateFile failed\n"</span>);
00436             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00437         }
00438 
00439         <span class="comment">//</span>
00440         <span class="comment">// make it current</span>
00441         <span class="comment">//</span>
00442 
00443         <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d4/ntcon_2client_2getset_8c.html#a12">SetConsoleActiveScreenBuffer</a>(Handle)) {
00444             <a class="code" href="../../d6/d6/memprint_8h.html#a7">DbgPrint</a>(<span class="stringliteral">"SetConsoleActiveScreenBuffer failed\n"</span>);
00445             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00446         }
00447 
00448         <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d6/tscroll_8c.html#a3">Tests</a>[i](<a class="code" href="../../d7/d0/cmdat2_8c.html#a19">Handle</a>)) {
00449             <a class="code" href="../../d6/d6/memprint_8h.html#a7">DbgPrint</a>(<span class="stringliteral">"Scroll%d failed\n"</span>,i+1);
00450         }
00451         <span class="keywordflow">else</span> {
00452             <a class="code" href="../../d6/d6/memprint_8h.html#a7">DbgPrint</a>(<span class="stringliteral">"Scroll%d succeeded\n"</span>,i+1);
00453         }
00454 
00455         <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d4/ntcon_2client_2getset_8c.html#a12">SetConsoleActiveScreenBuffer</a>(GetStdHandle(STD_OUTPUT_HANDLE))) {
00456             <a class="code" href="../../d6/d6/memprint_8h.html#a7">DbgPrint</a>(<span class="stringliteral">"SetConsoleActiveScreenBuffer failed\n"</span>);
00457             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00458         }
00459 
00460         <span class="keywordflow">if</span> (!CloseHandle(Handle)) {
00461             <a class="code" href="../../d6/d6/memprint_8h.html#a7">DbgPrint</a>(<span class="stringliteral">"CloseHandle failed\n"</span>);
00462             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00463         }
00464         <span class="keywordflow">if</span> (argc==2) {
00465             <span class="keywordflow">break</span>;
00466         }
00467     }
00468 
00469     <a class="code" href="../../d6/d6/memprint_8h.html#a7">DbgPrint</a>( <span class="stringliteral">"TCON: Exiting Test Program\n"</span> );
00470 
00471     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00472 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="tscroll.c::Scroll1" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL Scroll1           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HANDLE&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>Handle</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d5/tscroll_8c-source.html#l00319">319</a> of file <a class="el" href="../../d1/d5/tscroll_8c-source.html">tscroll.c</a>.
<p>
References <a class="el" href="../../d7/d1/rtqkey_8c-source.html#l00045">BufferSize</a>, <a class="el" href="../../d2/d0/bench_8c-source.html#l00050">CHAR</a>, <a class="el" href="../../d7/d5/memprint_8h-source.html#l00079">DbgPrint</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d1/d0/tgraph_8c-source.html#l00008">FOREGROUND_WHITE</a>, <a class="el" href="../../d8/d9/cmdat2_8c-source.html#l00091">Handle</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
<pre class="fragment"><div>00322 {
00323     CHAR_INFO CharBuffer[20][25];
00324     SMALL_RECT WriteRegion;
00325     COORD <a class="code" href="../../d6/d2/rtqkey_8c.html#a5">BufferSize</a>;
00326     COORD BufferCoord;
00327     <a class="code" href="../../d1/d1/bench_8c.html#a16">CHAR</a> TextAttr;
00328     <a class="code" href="../../d1/d1/bench_8c.html#a16">CHAR</a> BackgroundAttr;
00329     <span class="keywordtype">int</span> i,j;
00330     <a class="code" href="../../d1/d1/bench_8c.html#a16">CHAR</a> Char;
00331     SMALL_RECT ScrollRectangle,ClipRectangle;
00332     CHAR_INFO Fill;
00333     COORD DestinationOrigin;
00334 
00335     BackgroundAttr = BACKGROUND_BLUE;
00336     TextAttr = <a class="code" href="../../d0/d1/tgraph_8c.html#a0">FOREGROUND_WHITE</a>;
00337     <span class="keywordflow">for</span> (i=0;i&lt;20;i++) {
00338         <span class="keywordflow">for</span> (Char=<span class="charliteral">'a'</span>,j=0;j&lt;25;j++) {
00339             CharBuffer[i][j].Attributes = BackgroundAttr | TextAttr;
00340             CharBuffer[i][j].Char.AsciiChar = Char;
00341             Char++;
00342             <span class="keywordflow">if</span> (Char &gt; <span class="charliteral">'z'</span>) Char = <span class="charliteral">'a'</span>;
00343         }
00344     }
00345 
00346     <span class="comment">//</span>
00347     <span class="comment">// write square to screen</span>
00348     <span class="comment">//</span>
00349 
00350     <a class="code" href="../../d6/d2/rtqkey_8c.html#a5">BufferSize</a>.X = 25;
00351     <a class="code" href="../../d6/d2/rtqkey_8c.html#a5">BufferSize</a>.Y = 20;
00352     BufferCoord.X = 0;
00353     BufferCoord.Y = 0;
00354     WriteRegion.Left = 0;
00355     WriteRegion.Right = 10;
00356     WriteRegion.Top = 0;
00357     WriteRegion.Bottom = 10;
00358     <span class="keywordflow">if</span> (!WriteConsoleOutput(Handle,
00359                             (PCHAR_INFO)CharBuffer,
00360                             BufferSize,
00361                             BufferCoord,
00362                             &amp;WriteRegion
00363                            )) {
00364         <a class="code" href="../../d6/d6/memprint_8h.html#a7">DbgPrint</a>(<span class="stringliteral">"WriteConsoleOutput failed\n"</span>);
00365         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00366     }
00367     <span class="keywordflow">if</span> (WriteRegion.Left != 0 || WriteRegion.Right != 10 ||
00368         WriteRegion.Top != 0 || WriteRegion.Bottom != 10) {
00369         <a class="code" href="../../d6/d6/memprint_8h.html#a7">DbgPrint</a>(<span class="stringliteral">"test 1: regions don't match\n"</span>);
00370         <a class="code" href="../../d6/d6/memprint_8h.html#a7">DbgPrint</a>(<span class="stringliteral">"WriteRegion is %ld\n"</span>,&amp;WriteRegion);
00371     }
00372     <a class="code" href="../../d6/d6/memprint_8h.html#a7">DbgPrint</a>(<span class="stringliteral">"wrote rectangle to 0,0\n"</span>);
00373     DbgBreakPoint();
00374 
00375     ScrollRectangle.Left = 0;
00376     ScrollRectangle.Right = 10;
00377     ScrollRectangle.Top = 0;
00378     ScrollRectangle.Bottom = 10;
00379     ClipRectangle.Left = 25;
00380     ClipRectangle.Right = 30;
00381     ClipRectangle.Top = 25;
00382     ClipRectangle.Bottom = 30;
00383     Fill.Attributes = BACKGROUND_GREEN;
00384     Fill.Char.UnicodeChar = <span class="charliteral">'T'</span>;
00385     DestinationOrigin.X = 20;
00386     DestinationOrigin.Y = 20;
00387     <span class="keywordflow">if</span> (!ScrollConsoleScreenBuffer(Handle,
00388                                    &amp;ScrollRectangle,
00389                                    &amp;ClipRectangle,
00390                                    DestinationOrigin,
00391                                    &amp;Fill)) {
00392         <a class="code" href="../../d6/d6/memprint_8h.html#a7">DbgPrint</a>(<span class="stringliteral">"ScrollConsoleScreenBuffer failed\n"</span>);
00393         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00394     }
00395     <a class="code" href="../../d6/d6/memprint_8h.html#a7">DbgPrint</a>(<span class="stringliteral">"scrolled region (0,10)(0,10) to (20,20)\n"</span>);
00396     DbgBreakPoint();
00397     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00398 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="tscroll.c::Scroll2" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL Scroll2           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HANDLE&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>Handle</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d5/tscroll_8c-source.html#l00237">237</a> of file <a class="el" href="../../d1/d5/tscroll_8c-source.html">tscroll.c</a>.
<p>
References <a class="el" href="../../d7/d1/rtqkey_8c-source.html#l00045">BufferSize</a>, <a class="el" href="../../d2/d0/bench_8c-source.html#l00050">CHAR</a>, <a class="el" href="../../d7/d5/memprint_8h-source.html#l00079">DbgPrint</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d1/d0/tgraph_8c-source.html#l00008">FOREGROUND_WHITE</a>, <a class="el" href="../../d8/d9/cmdat2_8c-source.html#l00091">Handle</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
<pre class="fragment"><div>00240 {
00241     CHAR_INFO CharBuffer[20][25];
00242     SMALL_RECT WriteRegion;
00243     COORD <a class="code" href="../../d6/d2/rtqkey_8c.html#a5">BufferSize</a>;
00244     COORD BufferCoord;
00245     <a class="code" href="../../d1/d1/bench_8c.html#a16">CHAR</a> TextAttr;
00246     <a class="code" href="../../d1/d1/bench_8c.html#a16">CHAR</a> BackgroundAttr;
00247     <span class="keywordtype">int</span> i,j;
00248     <a class="code" href="../../d1/d1/bench_8c.html#a16">CHAR</a> Char;
00249     SMALL_RECT ScrollRectangle,ClipRectangle;
00250     CHAR_INFO Fill;
00251     COORD DestinationOrigin;
00252 
00253     BackgroundAttr = BACKGROUND_BLUE;
00254     TextAttr = <a class="code" href="../../d0/d1/tgraph_8c.html#a0">FOREGROUND_WHITE</a>;
00255     <span class="keywordflow">for</span> (i=0;i&lt;20;i++) {
00256         <span class="keywordflow">for</span> (Char=<span class="charliteral">'a'</span>,j=0;j&lt;25;j++) {
00257             CharBuffer[i][j].Attributes = BackgroundAttr | TextAttr;
00258             CharBuffer[i][j].Char.AsciiChar = Char;
00259             Char++;
00260             <span class="keywordflow">if</span> (Char &gt; <span class="charliteral">'z'</span>) Char = <span class="charliteral">'a'</span>;
00261         }
00262     }
00263 
00264     <span class="comment">//</span>
00265     <span class="comment">// write square to screen</span>
00266     <span class="comment">//</span>
00267 
00268     <a class="code" href="../../d6/d2/rtqkey_8c.html#a5">BufferSize</a>.X = 25;
00269     <a class="code" href="../../d6/d2/rtqkey_8c.html#a5">BufferSize</a>.Y = 20;
00270     BufferCoord.X = 0;
00271     BufferCoord.Y = 0;
00272     WriteRegion.Left = 5;
00273     WriteRegion.Right = 15;
00274     WriteRegion.Top = 5;
00275     WriteRegion.Bottom = 15;
00276     <span class="keywordflow">if</span> (!WriteConsoleOutput(Handle,
00277                             (PCHAR_INFO)CharBuffer,
00278                             BufferSize,
00279                             BufferCoord,
00280                             &amp;WriteRegion
00281                            )) {
00282         <a class="code" href="../../d6/d6/memprint_8h.html#a7">DbgPrint</a>(<span class="stringliteral">"WriteConsoleOutput failed\n"</span>);
00283         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00284     }
00285     <span class="keywordflow">if</span> (WriteRegion.Left != 5 || WriteRegion.Right != 15 ||
00286         WriteRegion.Top != 5 || WriteRegion.Bottom != 15) {
00287         <a class="code" href="../../d6/d6/memprint_8h.html#a7">DbgPrint</a>(<span class="stringliteral">"test 1: regions don't match\n"</span>);
00288         <a class="code" href="../../d6/d6/memprint_8h.html#a7">DbgPrint</a>(<span class="stringliteral">"WriteRegion is %ld\n"</span>,&amp;WriteRegion);
00289     }
00290     <a class="code" href="../../d6/d6/memprint_8h.html#a7">DbgPrint</a>(<span class="stringliteral">"wrote rectangle to 5,5\n"</span>);
00291     DbgBreakPoint();
00292 
00293     ScrollRectangle.Left = 5;
00294     ScrollRectangle.Right = 15;
00295     ScrollRectangle.Top = 5;
00296     ScrollRectangle.Bottom = 15;
00297     ClipRectangle.Left = 10;
00298     ClipRectangle.Right = 25;
00299     ClipRectangle.Top = 10;
00300     ClipRectangle.Bottom = 25;
00301     Fill.Attributes = BACKGROUND_GREEN;
00302     Fill.Char.UnicodeChar = <span class="charliteral">'T'</span>;
00303     DestinationOrigin.X = 10;
00304     DestinationOrigin.Y = 10;
00305     <span class="keywordflow">if</span> (!ScrollConsoleScreenBuffer(Handle,
00306                                    &amp;ScrollRectangle,
00307                                    NULL,
00308                                    DestinationOrigin,
00309                                    &amp;Fill)) {
00310         <a class="code" href="../../d6/d6/memprint_8h.html#a7">DbgPrint</a>(<span class="stringliteral">"ScrollConsoleScreenBuffer failed\n"</span>);
00311         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00312     }
00313     <a class="code" href="../../d6/d6/memprint_8h.html#a7">DbgPrint</a>(<span class="stringliteral">"scrolled region (5,15)(5,15) to (10,10)\n"</span>);
00314     DbgBreakPoint();
00315     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00316 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a6" doxytag="tscroll.c::Scroll3" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL Scroll3           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HANDLE&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>Handle</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d5/tscroll_8c-source.html#l00155">155</a> of file <a class="el" href="../../d1/d5/tscroll_8c-source.html">tscroll.c</a>.
<p>
References <a class="el" href="../../d7/d1/rtqkey_8c-source.html#l00045">BufferSize</a>, <a class="el" href="../../d2/d0/bench_8c-source.html#l00050">CHAR</a>, <a class="el" href="../../d7/d5/memprint_8h-source.html#l00079">DbgPrint</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d1/d0/tgraph_8c-source.html#l00008">FOREGROUND_WHITE</a>, <a class="el" href="../../d8/d9/cmdat2_8c-source.html#l00091">Handle</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
<pre class="fragment"><div>00158 {
00159     CHAR_INFO CharBuffer[20][25];
00160     SMALL_RECT WriteRegion;
00161     COORD <a class="code" href="../../d6/d2/rtqkey_8c.html#a5">BufferSize</a>;
00162     COORD BufferCoord;
00163     <a class="code" href="../../d1/d1/bench_8c.html#a16">CHAR</a> TextAttr;
00164     <a class="code" href="../../d1/d1/bench_8c.html#a16">CHAR</a> BackgroundAttr;
00165     <span class="keywordtype">int</span> i,j;
00166     <a class="code" href="../../d1/d1/bench_8c.html#a16">CHAR</a> Char;
00167     SMALL_RECT ScrollRectangle,ClipRectangle;
00168     CHAR_INFO Fill;
00169     COORD DestinationOrigin;
00170 
00171     BackgroundAttr = BACKGROUND_BLUE;
00172     TextAttr = <a class="code" href="../../d0/d1/tgraph_8c.html#a0">FOREGROUND_WHITE</a>;
00173     <span class="keywordflow">for</span> (i=0;i&lt;20;i++) {
00174         <span class="keywordflow">for</span> (Char=<span class="charliteral">'a'</span>,j=0;j&lt;25;j++) {
00175             CharBuffer[i][j].Attributes = BackgroundAttr | TextAttr;
00176             CharBuffer[i][j].Char.AsciiChar = Char;
00177             Char++;
00178             <span class="keywordflow">if</span> (Char &gt; <span class="charliteral">'z'</span>) Char = <span class="charliteral">'a'</span>;
00179         }
00180     }
00181 
00182     <span class="comment">//</span>
00183     <span class="comment">// write square to screen</span>
00184     <span class="comment">//</span>
00185 
00186     <a class="code" href="../../d6/d2/rtqkey_8c.html#a5">BufferSize</a>.X = 25;
00187     <a class="code" href="../../d6/d2/rtqkey_8c.html#a5">BufferSize</a>.Y = 20;
00188     BufferCoord.X = 0;
00189     BufferCoord.Y = 0;
00190     WriteRegion.Left = 5;
00191     WriteRegion.Right = 15;
00192     WriteRegion.Top = 5;
00193     WriteRegion.Bottom = 15;
00194     <span class="keywordflow">if</span> (!WriteConsoleOutput(Handle,
00195                             (PCHAR_INFO)CharBuffer,
00196                             BufferSize,
00197                             BufferCoord,
00198                             &amp;WriteRegion
00199                            )) {
00200         <a class="code" href="../../d6/d6/memprint_8h.html#a7">DbgPrint</a>(<span class="stringliteral">"WriteConsoleOutput failed\n"</span>);
00201         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00202     }
00203     <span class="keywordflow">if</span> (WriteRegion.Left != 5 || WriteRegion.Right != 15 ||
00204         WriteRegion.Top != 5 || WriteRegion.Bottom != 15) {
00205         <a class="code" href="../../d6/d6/memprint_8h.html#a7">DbgPrint</a>(<span class="stringliteral">"test 1: regions don't match\n"</span>);
00206         <a class="code" href="../../d6/d6/memprint_8h.html#a7">DbgPrint</a>(<span class="stringliteral">"WriteRegion is %ld\n"</span>,&amp;WriteRegion);
00207     }
00208     <a class="code" href="../../d6/d6/memprint_8h.html#a7">DbgPrint</a>(<span class="stringliteral">"wrote rectangle to 5,5\n"</span>);
00209     DbgBreakPoint();
00210 
00211     ScrollRectangle.Left = 5;
00212     ScrollRectangle.Right = 15;
00213     ScrollRectangle.Top = 5;
00214     ScrollRectangle.Bottom = 15;
00215     ClipRectangle.Left = 5;
00216     ClipRectangle.Right = 15;
00217     ClipRectangle.Top = 5;
00218     ClipRectangle.Bottom = 15;
00219     Fill.Attributes = BACKGROUND_GREEN;
00220     Fill.Char.UnicodeChar = <span class="charliteral">'T'</span>;
00221     DestinationOrigin.X = 5;
00222     DestinationOrigin.Y = 4;
00223     <span class="keywordflow">if</span> (!ScrollConsoleScreenBuffer(Handle,
00224                                    &amp;ScrollRectangle,
00225                                    &amp;ClipRectangle,
00226                                    DestinationOrigin,
00227                                    &amp;Fill)) {
00228         <a class="code" href="../../d6/d6/memprint_8h.html#a7">DbgPrint</a>(<span class="stringliteral">"ScrollConsoleScreenBuffer failed\n"</span>);
00229         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00230     }
00231     <a class="code" href="../../d6/d6/memprint_8h.html#a7">DbgPrint</a>(<span class="stringliteral">"scrolled region (5,15)(5,15) to (5,4)\n"</span>);
00232     DbgBreakPoint();
00233     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00234 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a7" doxytag="tscroll.c::Scroll4" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL Scroll4           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HANDLE&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>Handle</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d5/tscroll_8c-source.html#l00073">73</a> of file <a class="el" href="../../d1/d5/tscroll_8c-source.html">tscroll.c</a>.
<p>
References <a class="el" href="../../d7/d1/rtqkey_8c-source.html#l00045">BufferSize</a>, <a class="el" href="../../d2/d0/bench_8c-source.html#l00050">CHAR</a>, <a class="el" href="../../d7/d5/memprint_8h-source.html#l00079">DbgPrint</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d1/d0/tgraph_8c-source.html#l00008">FOREGROUND_WHITE</a>, <a class="el" href="../../d8/d9/cmdat2_8c-source.html#l00091">Handle</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
<pre class="fragment"><div>00076 {
00077     CHAR_INFO CharBuffer[20][25];
00078     SMALL_RECT WriteRegion;
00079     COORD <a class="code" href="../../d6/d2/rtqkey_8c.html#a5">BufferSize</a>;
00080     COORD BufferCoord;
00081     <a class="code" href="../../d1/d1/bench_8c.html#a16">CHAR</a> TextAttr;
00082     <a class="code" href="../../d1/d1/bench_8c.html#a16">CHAR</a> BackgroundAttr;
00083     <span class="keywordtype">int</span> i,j;
00084     <a class="code" href="../../d1/d1/bench_8c.html#a16">CHAR</a> Char;
00085     SMALL_RECT ScrollRectangle,ClipRectangle;
00086     CHAR_INFO Fill;
00087     COORD DestinationOrigin;
00088 
00089     BackgroundAttr = BACKGROUND_BLUE;
00090     TextAttr = <a class="code" href="../../d0/d1/tgraph_8c.html#a0">FOREGROUND_WHITE</a>;
00091     <span class="keywordflow">for</span> (i=0;i&lt;20;i++) {
00092         <span class="keywordflow">for</span> (Char=<span class="charliteral">'a'</span>,j=0;j&lt;25;j++) {
00093             CharBuffer[i][j].Attributes = BackgroundAttr | TextAttr;
00094             CharBuffer[i][j].Char.AsciiChar = Char;
00095             Char++;
00096             <span class="keywordflow">if</span> (Char &gt; <span class="charliteral">'z'</span>) Char = <span class="charliteral">'a'</span>;
00097         }
00098     }
00099 
00100     <span class="comment">//</span>
00101     <span class="comment">// write square to screen</span>
00102     <span class="comment">//</span>
00103 
00104     <a class="code" href="../../d6/d2/rtqkey_8c.html#a5">BufferSize</a>.X = 25;
00105     <a class="code" href="../../d6/d2/rtqkey_8c.html#a5">BufferSize</a>.Y = 20;
00106     BufferCoord.X = 0;
00107     BufferCoord.Y = 0;
00108     WriteRegion.Left = 5;
00109     WriteRegion.Right = 15;
00110     WriteRegion.Top = 5;
00111     WriteRegion.Bottom = 15;
00112     <span class="keywordflow">if</span> (!WriteConsoleOutput(Handle,
00113                             (PCHAR_INFO)CharBuffer,
00114                             BufferSize,
00115                             BufferCoord,
00116                             &amp;WriteRegion
00117                            )) {
00118         <a class="code" href="../../d6/d6/memprint_8h.html#a7">DbgPrint</a>(<span class="stringliteral">"WriteConsoleOutput failed\n"</span>);
00119         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00120     }
00121     <span class="keywordflow">if</span> (WriteRegion.Left != 5 || WriteRegion.Right != 15 ||
00122         WriteRegion.Top != 5 || WriteRegion.Bottom != 15) {
00123         <a class="code" href="../../d6/d6/memprint_8h.html#a7">DbgPrint</a>(<span class="stringliteral">"test 1: regions don't match\n"</span>);
00124         <a class="code" href="../../d6/d6/memprint_8h.html#a7">DbgPrint</a>(<span class="stringliteral">"WriteRegion is %ld\n"</span>,&amp;WriteRegion);
00125     }
00126     <a class="code" href="../../d6/d6/memprint_8h.html#a7">DbgPrint</a>(<span class="stringliteral">"wrote rectangle to 5,5\n"</span>);
00127     DbgBreakPoint();
00128 
00129     ScrollRectangle.Left = 5;
00130     ScrollRectangle.Right = 15;
00131     ScrollRectangle.Top = 5;
00132     ScrollRectangle.Bottom = 15;
00133     ClipRectangle.Left = 9;
00134     ClipRectangle.Right = 25;
00135     ClipRectangle.Top = 9;
00136     ClipRectangle.Bottom = 25;
00137     Fill.Attributes = BACKGROUND_GREEN;
00138     Fill.Char.UnicodeChar = <span class="charliteral">'T'</span>;
00139     DestinationOrigin.X = 20;
00140     DestinationOrigin.Y = 20;
00141     <span class="keywordflow">if</span> (!ScrollConsoleScreenBuffer(Handle,
00142                                    &amp;ScrollRectangle,
00143                                    &amp;ClipRectangle,
00144                                    DestinationOrigin,
00145                                    &amp;Fill)) {
00146         <a class="code" href="../../d6/d6/memprint_8h.html#a7">DbgPrint</a>(<span class="stringliteral">"ScrollConsoleScreenBuffer failed\n"</span>);
00147         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00148     }
00149     <a class="code" href="../../d6/d6/memprint_8h.html#a7">DbgPrint</a>(<span class="stringliteral">"scrolled region (5,15)(5,15) to (20,20) with clip (9,9)(25,25)\n"</span>);
00150     DbgBreakPoint();
00151     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00152 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a8" doxytag="tscroll.c::Scroll5" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL Scroll5           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HANDLE&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>Handle</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d5/tscroll_8c-source.html#l00041">41</a> of file <a class="el" href="../../d1/d5/tscroll_8c-source.html">tscroll.c</a>.
<p>
References <a class="el" href="../../d7/d5/memprint_8h-source.html#l00079">DbgPrint</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l00247">GetConsoleScreenBufferInfo()</a>, <a class="el" href="../../d8/d9/cmdat2_8c-source.html#l00091">Handle</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
<pre class="fragment"><div>00044 {
00045     SMALL_RECT ScrollRectangle;
00046     CHAR_INFO Fill;
00047     COORD DestinationOrigin;
00048     CONSOLE_SCREEN_BUFFER_INFO ScreenInfo;
00049 
00050     <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d4/ntcon_2client_2getset_8c.html#a4">GetConsoleScreenBufferInfo</a>(Handle,&amp;ScreenInfo)) {
00051         <a class="code" href="../../d6/d6/memprint_8h.html#a7">DbgPrint</a>(<span class="stringliteral">"ERROR: GetConsoleScreenBufferInfo failed\n"</span>);
00052     }
00053 
00054     ScrollRectangle = ScreenInfo.srWindow;
00055     Fill.Attributes = BACKGROUND_GREEN;
00056     Fill.Char.UnicodeChar = <span class="charliteral">'T'</span>;
00057     DestinationOrigin.X = 0;
00058     DestinationOrigin.Y = -(ScreenInfo.srWindow.Bottom - ScreenInfo.srWindow.Top + 1);
00059     <span class="keywordflow">if</span> (!ScrollConsoleScreenBuffer(Handle,
00060                                    &amp;ScrollRectangle,
00061                                    NULL,
00062                                    DestinationOrigin,
00063                                    &amp;Fill)) {
00064         <a class="code" href="../../d6/d6/memprint_8h.html#a7">DbgPrint</a>(<span class="stringliteral">"ScrollConsoleScreenBuffer failed\n"</span>);
00065         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00066     }
00067     <a class="code" href="../../d6/d6/memprint_8h.html#a7">DbgPrint</a>(<span class="stringliteral">"scrolled entire screen\n"</span>);
00068     DbgBreakPoint();
00069     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00070 }
</div></pre>    </td>
  </tr>
</table>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="a3" doxytag="tscroll.c::Tests" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d6/tscroll_8c.html#a2">PTEST_ROUTINE</a> <a class="el" href="../../d0/d6/tscroll_8c.html#a3">Tests</a>[NUM_TESTS] = {Scroll1,Scroll2,Scroll3,Scroll4,Scroll5}          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d5/tscroll_8c-source.html#l00038">38</a> of file <a class="el" href="../../d1/d5/tscroll_8c-source.html">tscroll.c</a>.
<p>
Referenced by <a class="el" href="../../d1/d5/tscroll_8c-source.html#l00402">main()</a>.    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Sat May 15 19:45:49 2004 for test by
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>

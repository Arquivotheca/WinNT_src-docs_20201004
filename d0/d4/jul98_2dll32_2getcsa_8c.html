<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>test: jul98/dll32/getcsa.c File Reference</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="../../main.html">Main&nbsp;Page</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Class&nbsp;List</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Class&nbsp;Members</a> | <a class="qindex" href="../../globals.html">File&nbsp;Members</a></div>
<h1>getcsa.c File Reference</h1><code>#include "<a class="el" href="../../d4/d9/jul98_2dll32_2generic_8h-source.html">generic.h</a>"</code><br>
<code>#include "<a class="el" href="../../d0/d8/jul98_2dll32_2icmstr_8h-source.html">icmstr.h</a>"</code><br>

<p>
<a href="../../d1/d3/jul98_2dll32_2getcsa_8c-source.html">Go to the source code of this file.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d4/jul98_2dll32_2getcsa_8c.html#a0">ICMSEG</a></td></tr>

<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d4/jul98_2dll32_2getcsa_8c.html#a2">CreateColSpArray</a> (<a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a> cp, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpMem, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a> CPTag, BOOL <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a27">AllowBinary</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d4/jul98_2dll32_2getcsa_8c.html#a3">CreateColSpProc</a> (<a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a> cp, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpMem, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a> CPTag, BOOL <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a27">AllowBinary</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d4/jul98_2dll32_2getcsa_8c.html#a4">CreateFloatString</a> (<a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a> cp, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpMem, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a> CPTag)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d4/jul98_2dll32_2getcsa_8c.html#a5">SendCSABWPoint</a> (<a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpMem, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a> <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a28">Intent</a>, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a26">LPSFLOAT</a> IlluminantWP, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a26">LPSFLOAT</a> MediaWP)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d4/jul98_2dll32_2getcsa_8c.html#a6">GetMediaWP</a> (<a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a> cp, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a> InputIntent, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a26">LPSFLOAT</a> IlluminantWP, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a26">LPSFLOAT</a> MediaWP)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d4/jul98_2dll32_2getcsa_8c.html#a7">GetDeviceRGB</a> (<a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpMem, LPDWORD lpcbSize, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> InpDrvClrSp, BOOL BackupCSA)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d4/jul98_2dll32_2getcsa_8c.html#a8">GetDeviceCMYK</a> (<a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpMem, LPDWORD lpcbSize, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> InpDrvClrSp)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d4/jul98_2dll32_2getcsa_8c.html#a9">GetDeviceGray</a> (<a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpMem, LPDWORD lpcbSize, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> InpDrvClrSp)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d4/jul98_2dll32_2getcsa_8c.html#a10">GetPublicArrayName</a> (<a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a> cp, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a> IntentSig, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> PublicArrayName)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d4/jul98_2dll32_2getcsa_8c.html#a11">BeginGlobalDict</a> (<a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpMem)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d4/jul98_2dll32_2getcsa_8c.html#a12">EndGlobalDict</a> (<a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpMem)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d4/jul98_2dll32_2getcsa_8c.html#a13">EnableGlobalDict</a> (<a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpMem)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d4/jul98_2dll32_2getcsa_8c.html#a14">GetPS2CSA_DEFG</a> (<a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a> cp, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpMem, LPDWORD lpcbSize, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a> InputIntent, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a> <a class="el" href="../../d7/d0/cmdat2_8c.html#a27">Index</a>, int Type, BOOL <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a27">AllowBinary</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d4/jul98_2dll32_2getcsa_8c.html#a15">GetPS2CSA_ABC</a> (<a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a> cp, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpMem, LPDWORD lpcbSize, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a> InputIntent, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> InpDrvClrSp, BOOL <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a27">AllowBinary</a>, BOOL BackupCSA)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d4/jul98_2dll32_2getcsa_8c.html#a16">GetPS2CSA_ABC_LAB</a> (<a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a> cp, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpMem, LPDWORD lpcbSize, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a> InputIntent, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> InpDrvClrSp, BOOL <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a27">AllowBinary</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d4/jul98_2dll32_2getcsa_8c.html#a17">GetPS2CSA_MONO_ABC</a> (<a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a> cp, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpMem, LPDWORD lpcbSize, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a> InputIntent, BOOL <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a27">AllowBinary</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d4/jul98_2dll32_2getcsa_8c.html#a18">GetPS2CSA_MONO_A</a> (<a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a> cp, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpMem, LPDWORD lpcbSize, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a> InputIntent, BOOL <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a27">AllowBinary</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d4/jul98_2dll32_2getcsa_8c.html#a19">GetPS2CSA_MONO</a> (<a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a> cp, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpMem, LPDWORD lpcbSize, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> InpDrvClrSp, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a> InputIntent, BOOL <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a27">AllowBinary</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d4/jul98_2dll32_2getcsa_8c.html#a20">GetCSAFromProfile</a> (<a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a> cp, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpMem, LPDWORD lpcbSize, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> InpDrvClrSp, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a> DrvColorSpace, BOOL <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a27">AllowBinary</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d4/jul98_2dll32_2getcsa_8c.html#a21">GetPS2CSA_DEFG_Intent</a> (<a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a> cp, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpBuffer, LPDWORD lpcbSize, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> InpDrvClrSp, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a> <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a28">Intent</a>, int Type, BOOL <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a27">AllowBinary</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL EXTERN&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d4/jul98_2dll32_2getcsa_8c.html#a22">GetPS2ColorSpaceArray</a> (<a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a> cp, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> InputIntent, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> InpDrvClrSp, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpBuffer, LPDWORD lpcbSize, BOOL <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a27">AllowBinary</a>)</td></tr>

<tr><td colspan=2><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>char *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d4/jul98_2dll32_2getcsa_8c.html#a1">DecodeABCLab</a> []</td></tr>

</table>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="a0" doxytag="jul98/dll32/getcsa.c::ICMSEG" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ICMSEG          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="a11" doxytag="jul98/dll32/getcsa.c::BeginGlobalDict" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a> BeginGlobalDict           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>lpMem</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d3/jul98_2dll32_2getcsa_8c-source.html#l00205">205</a> of file <a class="el" href="../../d1/d3/jul98_2dll32_2getcsa_8c-source.html">jul98/dll32/getcsa.c</a>.
<p>
References <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00056">BeginOp</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00052">GlobalDictOp</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00080">MEMPTR</a>, <a class="el" href="../../d7/d6/aug98_2dll32_2icmdll_8h-source.html#l00011">SINT</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04573">WriteNewLineObject()</a>, and <a class="el" href="../../d3/d8/ps2_8c-source.html#l00072">WriteObject</a>.
<p>
<pre class="fragment"><div>00206 {
00207     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpOldMem = lpMem;
00208 
00209     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, GlobalDictOp);
00210     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginOp);
00211 
00212     <span class="keywordflow">return</span> (lpMem - lpOldMem);
00213 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="jul98/dll32/getcsa.c::CreateColSpArray" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a> CreateColSpArray           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpMem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>CPTag</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>AllowBinary</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="jul98/dll32/getcsa.c::CreateColSpProc" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a> CreateColSpProc           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpMem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>CPTag</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>AllowBinary</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="jul98/dll32/getcsa.c::CreateFloatString" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a> CreateFloatString           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpMem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>CPTag</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a13" doxytag="jul98/dll32/getcsa.c::EnableGlobalDict" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a> EnableGlobalDict           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>lpMem</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d3/jul98_2dll32_2getcsa_8c-source.html#l00225">225</a> of file <a class="el" href="../../d1/d3/jul98_2dll32_2getcsa_8c-source.html">jul98/dll32/getcsa.c</a>.
<p>
References <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00053">CurrentGlobalOp</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00080">MEMPTR</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00054">SetGlobalOp</a>, <a class="el" href="../../d7/d6/aug98_2dll32_2icmdll_8h-source.html#l00011">SINT</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00058">TrueOp</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04573">WriteNewLineObject()</a>, and <a class="el" href="../../d3/d8/ps2_8c-source.html#l00072">WriteObject</a>.
<p>
<pre class="fragment"><div>00226 {
00227     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpOldMem = lpMem;
00228 
00229     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, CurrentGlobalOp);
00230     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, TrueOp);
00231     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, SetGlobalOp);
00232     <span class="keywordflow">return</span> (lpMem - lpOldMem);
00233 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a12" doxytag="jul98/dll32/getcsa.c::EndGlobalDict" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a> EndGlobalDict           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>lpMem</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d3/jul98_2dll32_2getcsa_8c-source.html#l00215">215</a> of file <a class="el" href="../../d1/d3/jul98_2dll32_2getcsa_8c-source.html">jul98/dll32/getcsa.c</a>.
<p>
References <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00057">EndOp</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00080">MEMPTR</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00054">SetGlobalOp</a>, <a class="el" href="../../d7/d6/aug98_2dll32_2icmdll_8h-source.html#l00011">SINT</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04573">WriteNewLineObject()</a>, and <a class="el" href="../../d3/d8/ps2_8c-source.html#l00072">WriteObject</a>.
<p>
<pre class="fragment"><div>00216 {
00217     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpOldMem = lpMem;
00218 
00219     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, EndOp);
00220     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, SetGlobalOp);
00221 
00222     <span class="keywordflow">return</span> (lpMem - lpOldMem);
00223 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a20" doxytag="jul98/dll32/getcsa.c::GetCSAFromProfile" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL GetCSAFromProfile           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpMem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpcbSize</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>InpDrvClrSp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>DrvColorSpace</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>AllowBinary</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d3/jul98_2dll32_2getcsa_8c-source.html#l01441">1441</a> of file <a class="el" href="../../d1/d3/jul98_2dll32_2getcsa_8c-source.html">jul98/dll32/getcsa.c</a>.
<p>
References <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00108">AllowBinary</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l01485">Convert2Ascii()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04007">DoesCPTagExist()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04180">GetCPElementData()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04121">GetCPElementDataSize()</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l00426">GetCPTagIndex()</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00253">icSigGrayData</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00172">icSigPs2CSATag</a>, <a class="el" href="../../d2/d9/cmchek_8c-source.html#l00095">Index</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00105">LPSINT</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d6/aug98_2dll32_2icmdll_8h-source.html#l00011">SINT</a>, <a class="el" href="../../d9/d6/lh__open_2pi__mem_8h-source.html#l00017">Size</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
<pre class="fragment"><div>01448 {
01449     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a> <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>;
01450     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a> <a class="code" href="../../d8/d7/lh__open_2pi__mem_8h.html#a0">Size</a>;
01451     <span class="keywordflow">if</span> ((DrvColorSpace == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a115">icSigGrayData</a>) &amp;&amp; (InpDrvClrSp != <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a115">icSigGrayData</a>))
01452         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01453 
01454     <span class="keywordflow">if</span> (<a class="code" href="../../d2/d9/ps2_8c.html#a189">DoesCPTagExist</a> (cp, icSigPs2CSATag) &amp;&amp;
01455         <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a12">GetCPTagIndex</a> (cp, icSigPs2CSATag, (LPSINT) &amp; Index) &amp;&amp;
01456         <a class="code" href="../../d2/d9/ps2_8c.html#a193">GetCPElementDataSize</a> (cp, Index, (LPSINT) &amp; Size) &amp;&amp;
01457         ((lpMem == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) || <a class="code" href="../../d2/d9/ps2_8c.html#a196">GetCPElementData</a> (cp, Index, lpMem, Size)) &amp;&amp;
01458         (*lpcbSize = <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a55">Convert2Ascii</a> (cp, Index, lpMem, *lpcbSize, Size, AllowBinary)))
01459     {
01460         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01461     } <span class="keywordflow">else</span>
01462     {
01463         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01464     }
01465 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a8" doxytag="jul98/dll32/getcsa.c::GetDeviceCMYK" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL GetDeviceCMYK           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpMem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpcbSize</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>InpDrvClrSp</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d3/jul98_2dll32_2getcsa_8c-source.html#l00090">90</a> of file <a class="el" href="../../d1/d3/jul98_2dll32_2getcsa_8c-source.html">jul98/dll32/getcsa.c</a>.
<p>
References <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00043">DeviceCMYKTag</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00256">icSigCmykData</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00080">MEMPTR</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d3/d8/ps2_8c-source.html#l04573">WriteNewLineObject()</a>.
<p>
Referenced by <a class="el" href="../../d8/d2/aug98_2dll32_2getcsa_8c-source.html#l01579">GetPS2ColorSpaceArray()</a>.
<p>
<pre class="fragment"><div>00094 {
00095     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpOldMem = lpMem;
00096     <span class="keywordflow">if</span> ((InpDrvClrSp != <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a118">icSigCmykData</a>) &amp;&amp;
00097         (InpDrvClrSp != 0))
00098         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00099     <span class="keywordflow">if</span> (lpMem == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00100     {
00101         *lpcbSize = lstrlen (DeviceCMYKTag) + 8;
00102         <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
00103     }
00104     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, DeviceCMYKTag);
00105 
00106     *lpcbSize = (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>) (lpMem - lpOldMem);
00107     <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
00108 
00109 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a9" doxytag="jul98/dll32/getcsa.c::GetDeviceGray" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL GetDeviceGray           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpMem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpcbSize</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>InpDrvClrSp</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d3/jul98_2dll32_2getcsa_8c-source.html#l00115">115</a> of file <a class="el" href="../../d1/d3/jul98_2dll32_2getcsa_8c-source.html">jul98/dll32/getcsa.c</a>.
<p>
References <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00044">DeviceGrayTag</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00042">DeviceRGBTag</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00258">icSigDefData</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00253">icSigGrayData</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00252">icSigRgbData</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00080">MEMPTR</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d3/d8/ps2_8c-source.html#l04573">WriteNewLineObject()</a>.
<p>
Referenced by <a class="el" href="../../d8/d2/aug98_2dll32_2getcsa_8c-source.html#l01579">GetPS2ColorSpaceArray()</a>.
<p>
<pre class="fragment"><div>00119 {
00120     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpOldMem = lpMem;
00121     <span class="keywordflow">if</span> ((InpDrvClrSp == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a114">icSigRgbData</a>) ||
00122         (InpDrvClrSp == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a120">icSigDefData</a>) ||
00123         (InpDrvClrSp == 0))
00124     {
00125         <span class="keywordflow">if</span> (lpMem == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00126         {
00127             *lpcbSize = lstrlen (DeviceRGBTag) + 8;
00128             <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
00129         }
00130         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, DeviceRGBTag);
00131 
00132         *lpcbSize = (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>) (lpMem - lpOldMem);
00133         <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
00134     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (InpDrvClrSp == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a115">icSigGrayData</a>)
00135     {
00136         <span class="keywordflow">if</span> (lpMem == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00137         {
00138             *lpcbSize = lstrlen (DeviceGrayTag) + 8;
00139             <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
00140         }
00141         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, DeviceGrayTag);
00142 
00143         *lpcbSize = (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>) (lpMem - lpOldMem);
00144         <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
00145     }
00146 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a7" doxytag="jul98/dll32/getcsa.c::GetDeviceRGB" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL GetDeviceRGB           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpMem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpcbSize</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>InpDrvClrSp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>BackupCSA</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d3/jul98_2dll32_2getcsa_8c-source.html#l00039">39</a> of file <a class="el" href="../../d1/d3/jul98_2dll32_2getcsa_8c-source.html">jul98/dll32/getcsa.c</a>.
<p>
References <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00042">DeviceRGBTag</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00258">icSigDefData</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00252">icSigRgbData</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00080">MEMPTR</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00124">NotSupportDEFG_S</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00125">SupportDEFG_E</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d3/d8/ps2_8c-source.html#l04573">WriteNewLineObject()</a>.
<p>
Referenced by <a class="el" href="../../d8/d2/aug98_2dll32_2getcsa_8c-source.html#l01579">GetPS2ColorSpaceArray()</a>.
<p>
<pre class="fragment"><div>00044 {
00045     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpOldMem = lpMem;
00046     <span class="keywordflow">if</span> ((InpDrvClrSp != <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a114">icSigRgbData</a>) &amp;&amp;
00047         (InpDrvClrSp != <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a120">icSigDefData</a>) &amp;&amp;
00048         (InpDrvClrSp != 0))
00049         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00050 
00051     <span class="keywordflow">if</span> (lpMem == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00052     {
00053         *lpcbSize = lstrlen (DeviceRGBTag) + 8;
00054         <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
00055     }
00056 
00057     <span class="keywordflow">if</span> (BackupCSA)
00058     {
00059         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, NotSupportDEFG_S);
00060     }
00061 
00062     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, DeviceRGBTag);
00063 
00064     <span class="keywordflow">if</span> (BackupCSA)
00065     {
00066         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, SupportDEFG_E);
00067     }
00068 
00069     *lpcbSize = (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>) (lpMem - lpOldMem);
00070     <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
00071 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a6" doxytag="jul98/dll32/getcsa.c::GetMediaWP" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void GetMediaWP           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>InputIntent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a26">LPSFLOAT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>IlluminantWP</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a26">LPSFLOAT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>MediaWP</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d3/jul98_2dll32_2getcsa_8c-source.html#l00191">191</a> of file <a class="el" href="../../d1/d3/jul98_2dll32_2getcsa_8c-source.html">jul98/dll32/getcsa.c</a>.
<p>
References <a class="el" href="../../d3/d8/ps2_8c-source.html#l04087">GetCPMediaWhitePoint()</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00306">icAbsoluteColorimetric</a>, and <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00106">LPSFLOAT</a>.
<p>
<pre class="fragment"><div>00193 {
00194     <span class="keywordflow">if</span> (InputIntent == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a145">icAbsoluteColorimetric</a>)
00195     {
00196         <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d9/ps2_8c.html#a192">GetCPMediaWhitePoint</a> (cp, (LPSFLOAT) &amp; MediaWP)) <span class="comment">// .. Media WhitePoint</span>
00197         {
00198             MediaWP[0] = IlluminantWP[0];
00199             MediaWP[1] = IlluminantWP[1];
00200             MediaWP[2] = IlluminantWP[2];
00201         }
00202     }
00203 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a22" doxytag="jul98/dll32/getcsa.c::GetPS2ColorSpaceArray" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL EXTERN GetPS2ColorSpaceArray           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>InputIntent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>InpDrvClrSp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpBuffer</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpcbSize</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>AllowBinary</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d3/jul98_2dll32_2getcsa_8c-source.html#l01570">1570</a> of file <a class="el" href="../../d1/d3/jul98_2dll32_2getcsa_8c-source.html">jul98/dll32/getcsa.c</a>.
<p>
References <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00108">AllowBinary</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00074">CSIG</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l00070">GetCPDevSpace</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l00071">GetCPRenderIntent</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l01172">GetCSAFromProfile()</a>, <a class="el" href="../../d1/d3/jul98_2dll32_2getcsa_8c-source.html#l00090">GetDeviceCMYK()</a>, <a class="el" href="../../d1/d3/jul98_2dll32_2getcsa_8c-source.html#l00115">GetDeviceGray()</a>, <a class="el" href="../../d1/d3/jul98_2dll32_2getcsa_8c-source.html#l00039">GetDeviceRGB()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l01519">GetPS2CSA_ABC()</a>, <a class="el" href="../../d8/d2/aug98_2dll32_2getcsa_8c-source.html#l00812">GetPS2CSA_ABC_LAB()</a>, <a class="el" href="../../d8/d2/aug98_2dll32_2getcsa_8c-source.html#l01502">GetPS2CSA_DEFG_Intent()</a>, <a class="el" href="../../d1/d3/jul98_2dll32_2getcsa_8c-source.html#l01244">GetPS2CSA_MONO()</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00256">icSigCmykData</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00253">icSigGrayData</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00248">icSigLabData</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00252">icSigRgbData</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00307">icUseRenderingIntent</a>, <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00109">Intent</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00107">LPCSIG</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00080">MEMPTR</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00063">NewLine</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00124">NotSupportDEFG_S</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00125">SupportDEFG_E</a>, <a class="el" href="../../d3/d8/aug98_2dll32_2csprof_8h-source.html#l00012">TYPE_CIEBASEDDEF</a>, <a class="el" href="../../d3/d8/aug98_2dll32_2csprof_8h-source.html#l00013">TYPE_CIEBASEDDEFG</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04573">WriteNewLineObject()</a>, and <a class="el" href="../../d3/d8/ps2_8c-source.html#l00072">WriteObject</a>.
<p>
<pre class="fragment"><div>01577 {
01578     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a17">CSIG</a> ColorSpace, <a class="code" href="../../d3/d8/aug98_2test_2main_8c.html#a28">Intent</a>;
01579     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> Success = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01580     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwSaveSize;
01581     <span class="keywordflow">if</span> (!cp)
01582         <span class="keywordflow">return</span> Success;
01583 
01584     <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d9/ps2_8c.html#a41">GetCPDevSpace</a> (cp, (LPCSIG) &amp; ColorSpace) ||
01585         !<a class="code" href="../../d2/d9/ps2_8c.html#a42">GetCPRenderIntent</a> (cp, (LPCSIG) &amp; Intent))
01586     {
01587         <span class="keywordflow">return</span> Success;
01588     }
01589     dwSaveSize = *lpcbSize;
01590     <span class="keywordflow">if</span> (InputIntent == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a146">icUseRenderingIntent</a>)
01591         InputIntent = (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)<a class="code" href="../../d3/d8/aug98_2test_2main_8c.html#a28">Intent</a>;
01592 
01593  <span class="comment">// Get ColorSpace from Profile.</span>
01594     <span class="keywordflow">if</span> ((<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a17">CSIG</a>) InputIntent == <a class="code" href="../../d3/d8/aug98_2test_2main_8c.html#a28">Intent</a>)
01595     {
01596         Success = <a class="code" href="../../d2/d9/ps2_8c.html#a182">GetCSAFromProfile</a> (cp, lpBuffer, lpcbSize,
01597                                      InpDrvClrSp, ColorSpace, AllowBinary);
01598     }
01599     <span class="keywordflow">if</span> (!Success)
01600     {
01601         <span class="keywordflow">switch</span> (ColorSpace)
01602         {
01603             <span class="keywordflow">case</span> <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a114">icSigRgbData</a>:
01604                 Success = <a class="code" href="../../d7/d4/jul98_2test_2getcsa_8h.html#a1">GetPS2CSA_DEFG_Intent</a> (cp, lpBuffer, lpcbSize,
01605                                                  InpDrvClrSp, (CSIG) InputIntent, 
01606                                                  TYPE_CIEBASEDDEF, AllowBinary);
01607                 <span class="keywordflow">if</span> (Success)
01608                 {                       <span class="comment">// Create CieBasedABC or DeviceRGB</span>
01609                                         <span class="comment">// for the printer</span>
01610                                         <span class="comment">// which does not support CieBasedDEF(G).</span>
01611                     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> cbNewSize = 0;
01612                     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpNewBuffer;
01613                     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpOldBuffer;
01614                     <span class="keywordflow">if</span> (lpBuffer)
01615                     {
01616                         lpNewBuffer = lpBuffer + *lpcbSize;
01617                         lpOldBuffer = lpNewBuffer;
01618                         lpNewBuffer += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpNewBuffer, NewLine);
01619                         cbNewSize = dwSaveSize - (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>) (lpNewBuffer - lpBuffer);
01620                     } <span class="keywordflow">else</span>
01621                         lpNewBuffer = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
01622 
01623                     <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d9/ps2_8c.html#a184">GetPS2CSA_ABC</a> (cp, lpNewBuffer, &amp;cbNewSize,
01624                                         (CSIG)InputIntent, InpDrvClrSp, 
01625                                         AllowBinary, 1))   <span class="comment">// create a backup CSA</span>
01626                         <a class="code" href="../../d0/d4/jul98_2dll32_2getcsa_8c.html#a7">GetDeviceRGB</a> (lpNewBuffer, &amp;cbNewSize, InpDrvClrSp, 1);
01627 
01628                     <span class="keywordflow">if</span> (lpBuffer)
01629                     {
01630                         lpNewBuffer += cbNewSize;
01631                         *lpcbSize += (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>) (lpNewBuffer - lpOldBuffer);
01632                     } <span class="keywordflow">else</span>
01633                         *lpcbSize += cbNewSize;
01634 
01635                 }
01636                 <span class="keywordflow">if</span> (!Success)
01637                 {                           <span class="comment">// Create CieBasedABC</span>
01638                     Success = <a class="code" href="../../d2/d9/ps2_8c.html#a184">GetPS2CSA_ABC</a> (cp, lpBuffer, lpcbSize,
01639                                          (CSIG)InputIntent, InpDrvClrSp, 
01640                                          AllowBinary, 0);
01641                 }
01642                 <span class="keywordflow">if</span> (!Success)
01643                 {                           <span class="comment">// Create DeviceRGB</span>
01644                     Success = <a class="code" href="../../d0/d4/jul98_2dll32_2getcsa_8c.html#a7">GetDeviceRGB</a> (lpBuffer, lpcbSize, InpDrvClrSp, 0);
01645                     Success = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01646                 }
01647                 <span class="keywordflow">break</span>;
01648             <span class="keywordflow">case</span> <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a118">icSigCmykData</a>:
01649                 Success = <a class="code" href="../../d7/d4/jul98_2test_2getcsa_8h.html#a1">GetPS2CSA_DEFG_Intent</a> (cp, lpBuffer, lpcbSize,
01650                                                  InpDrvClrSp, (CSIG) InputIntent, 
01651                                                  TYPE_CIEBASEDDEFG, AllowBinary);
01652                 <span class="keywordflow">if</span> (Success)
01653                 {                       <span class="comment">// Create DeviceCMYK for the printer</span>
01654                                         <span class="comment">// which does not support CieBasedDEF(G).</span>
01655                     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> cbNewSize = 0;
01656                     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpNewBuffer;
01657                     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpOldBuffer;
01658                     <span class="keywordflow">if</span> (lpBuffer)
01659                     {
01660                         lpNewBuffer = lpBuffer + *lpcbSize;
01661                         lpOldBuffer = lpNewBuffer;
01662                         lpNewBuffer += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpNewBuffer, NewLine);
01663                         lpNewBuffer += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpNewBuffer, NotSupportDEFG_S);
01664                         cbNewSize = dwSaveSize - (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>) (lpNewBuffer - lpBuffer);
01665                     } <span class="keywordflow">else</span>
01666                         lpNewBuffer = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
01667 
01668                     <a class="code" href="../../d0/d4/jul98_2dll32_2getcsa_8c.html#a8">GetDeviceCMYK</a> (lpNewBuffer, &amp;cbNewSize, InpDrvClrSp);
01669 
01670                     <span class="keywordflow">if</span> (lpBuffer)
01671                     {
01672                         lpNewBuffer += cbNewSize;
01673                         lpNewBuffer += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpNewBuffer, SupportDEFG_E);
01674                         *lpcbSize += (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>) (lpNewBuffer - lpOldBuffer);
01675                     } <span class="keywordflow">else</span>
01676                         *lpcbSize += cbNewSize;
01677                 }
01678                 <span class="keywordflow">if</span> (!Success)
01679                 {                           <span class="comment">// Create DeviceCMYK</span>
01680                     Success = <a class="code" href="../../d0/d4/jul98_2dll32_2getcsa_8c.html#a8">GetDeviceCMYK</a> (lpBuffer, lpcbSize, InpDrvClrSp);
01681                     Success = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01682                 }
01683                 <span class="keywordflow">break</span>;
01684             <span class="keywordflow">case</span> <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a115">icSigGrayData</a>:
01685                 Success = <a class="code" href="../../d0/d4/jul98_2dll32_2getcsa_8c.html#a19">GetPS2CSA_MONO</a> (cp, lpBuffer, lpcbSize, InpDrvClrSp, 
01686                                           (CSIG)InputIntent, AllowBinary);
01687                 <span class="keywordflow">if</span> (!Success)
01688                 {                           <span class="comment">// Create DeviceGray</span>
01689                     Success = <a class="code" href="../../d0/d4/jul98_2dll32_2getcsa_8c.html#a9">GetDeviceGray</a> (lpBuffer, lpcbSize, InpDrvClrSp);
01690                     Success = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01691                 }
01692                 <span class="keywordflow">break</span>;
01693             <span class="keywordflow">case</span> <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a110">icSigLabData</a>:
01694                 Success = <a class="code" href="../../d7/d4/jul98_2test_2getcsa_8h.html#a1">GetPS2CSA_DEFG_Intent</a> (cp, lpBuffer, lpcbSize,
01695                                                  InpDrvClrSp, (CSIG) InputIntent, 
01696                                                  TYPE_CIEBASEDDEF, AllowBinary);
01697                 <span class="keywordflow">if</span> (Success)
01698                 {                       <span class="comment">// Create CieBasedABC or DeviceRGB</span>
01699                                         <span class="comment">// for the printer</span>
01700                                         <span class="comment">// which does not support CieBasedDEF(G).</span>
01701                     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> cbNewSize = 0;
01702                     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpNewBuffer;
01703                     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpOldBuffer;
01704                     <span class="keywordflow">if</span> (lpBuffer)
01705                     {
01706                         lpNewBuffer = lpBuffer + *lpcbSize;
01707                         lpOldBuffer = lpNewBuffer;
01708                         lpNewBuffer += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpNewBuffer, NewLine);
01709                         lpNewBuffer += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpNewBuffer, NotSupportDEFG_S);
01710                         cbNewSize = dwSaveSize - (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>) (lpNewBuffer - lpBuffer);
01711                     } <span class="keywordflow">else</span>
01712                         lpNewBuffer = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
01713 
01714                     <a class="code" href="../../d7/d4/jul98_2test_2getcsa_8h.html#a3">GetPS2CSA_ABC_LAB</a> (cp, lpNewBuffer, &amp;cbNewSize,
01715                                         (CSIG)InputIntent, InpDrvClrSp, AllowBinary);
01716 
01717                     <span class="keywordflow">if</span> (lpBuffer)
01718                     {
01719                         lpNewBuffer += cbNewSize;
01720                         lpNewBuffer += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpNewBuffer, SupportDEFG_E);
01721                         *lpcbSize += (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>) (lpNewBuffer - lpOldBuffer);
01722                     } <span class="keywordflow">else</span>
01723                         *lpcbSize += cbNewSize;
01724                 }
01725                 <span class="keywordflow">if</span> (!Success)
01726                 {                           <span class="comment">// Create CieBasedABC</span>
01727                     Success = <a class="code" href="../../d7/d4/jul98_2test_2getcsa_8h.html#a3">GetPS2CSA_ABC_LAB</a> (cp, lpBuffer, lpcbSize,
01728                                          (CSIG)InputIntent, InpDrvClrSp, AllowBinary);
01729                 }
01730                 <span class="keywordflow">break</span>;
01731 
01732             <span class="keywordflow">default</span>:
01733                 <span class="keywordflow">break</span>;
01734         }
01735     }
01736     <span class="keywordflow">return</span> Success;
01737 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a15" doxytag="jul98/dll32/getcsa.c::GetPS2CSA_ABC" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL GetPS2CSA_ABC           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpMem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpcbSize</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>InputIntent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>InpDrvClrSp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>AllowBinary</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>BackupCSA</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d3/jul98_2dll32_2getcsa_8c-source.html#l00641">641</a> of file <a class="el" href="../../d1/d3/jul98_2dll32_2getcsa_8c-source.html">jul98/dll32/getcsa.c</a>.
<p>
References <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00108">AllowBinary</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00007">BeginArray</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00011">BeginDict</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00009">BeginFunction</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l05001">BeginGlobalDict()</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00070">CieBasedABCBegin</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00074">CieBasedABCEnd</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00036">CIEBasedABCTag</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l02501">CreateColSpArray()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l02581">CreateColSpProc()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l02657">CreateFloatString()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00074">CSIG</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00040">DecodeABCTag</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00041">DecodeLMNTag</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04055">DoesTRCAndColorantTagExist()</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04987">EnableGlobalDict()</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00008">EndArray</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00012">EndDict</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00010">EndFunction</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00057">EndOp</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l00069">GetCPConnSpace</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l00070">GetCPDevSpace</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04074">GetCPWhitePoint()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l05068">GetMediaWP()</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00306">icAbsoluteColorimetric</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00143">icSigBlueColorantTag</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00144">icSigBlueTRCTag</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00258">icSigDefData</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00156">icSigGreenColorantTag</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00157">icSigGreenTRCTag</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00177">icSigRedColorantTag</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00178">icSigRedTRCTag</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00252">icSigRgbData</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00107">LPCSIG</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00106">LPSFLOAT</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00029">MatrixABCTag</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00080">MEMPTR</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00060">MulOp</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00063">NewLine</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00124">NotSupportDEFG_S</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00077">RangeLMN</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00031">RangeLMNTag</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l05027">SendCSABWPoint()</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00054">SetGlobalOp</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00069">SFLOAT</a>, <a class="el" href="../../d7/d6/aug98_2dll32_2icmdll_8h-source.html#l00011">SINT</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00125">SupportDEFG_E</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l01193">WriteFloat()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04573">WriteNewLineObject()</a>, and <a class="el" href="../../d3/d8/ps2_8c-source.html#l00072">WriteObject</a>.
<p>
<pre class="fragment"><div>00644 {
00645     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a17">CSIG</a> PCS, Dev;
00646     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a16">SFLOAT</a> IlluminantWP[3];
00647     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a16">SFLOAT</a> MediaWP[3];
00648 
00649     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a> i;
00650     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpOldMem = lpMem;
00651     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a> Ret = 0;
00652  <span class="comment">// Check if we can generate the CS.</span>
00653  <span class="comment">// Required  tags are: red, green and blue Colorants.</span>
00654  <span class="comment">// As for TRC tags - we are quite flexible here - if we cannot find the</span>
00655  <span class="comment">// required tag - we assume the linear responce</span>
00656     <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d9/ps2_8c.html#a40">GetCPConnSpace</a> (cp, (LPCSIG) &amp; PCS) ||
00657         !<a class="code" href="../../d2/d9/ps2_8c.html#a41">GetCPDevSpace</a> (cp, (LPCSIG) &amp; Dev) ||
00658         (Dev != <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a114">icSigRgbData</a>) ||
00659         !<a class="code" href="../../d2/d9/ps2_8c.html#a190">DoesTRCAndColorantTagExist</a>(cp))
00660     {
00661         <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00662     }
00663     <span class="keywordflow">if</span> ((InpDrvClrSp != <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a114">icSigRgbData</a>) &amp;&amp;
00664         (InpDrvClrSp != <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a120">icSigDefData</a>) &amp;&amp;
00665         (InpDrvClrSp != 0))
00666     {
00667         <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00668     }
00669  <span class="comment">// Estimate the memory size required to hold CS</span>
00670 
00671     <span class="keywordflow">if</span> (lpMem == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)                  <span class="comment">// This is a size request</span>
00672     {
00673         *lpcbSize = 65530;
00674         <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
00675     }
00676  <span class="comment">// Get info about Illuminant White Point from the header</span>
00677     <a class="code" href="../../d2/d9/ps2_8c.html#a191">GetCPWhitePoint</a> (cp, (LPSFLOAT) &amp; IlluminantWP);     <span class="comment">// .. Illuminant</span>
00678                                                          
00679  <span class="comment">// Support absolute whitePoint</span>
00680     <a class="code" href="../../d2/d9/ps2_8c.html#a209">GetMediaWP</a>(cp, InputIntent, IlluminantWP, MediaWP);
00681 
00682  <span class="comment">//*********** Creating global data</span>
00683     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, CieBasedABCBegin);
00684 
00685     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a220">EnableGlobalDict</a>(lpMem);
00686     
00687     <span class="keywordflow">if</span> (BackupCSA)
00688     {
00689         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, NotSupportDEFG_S);
00690     }
00691 
00692     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a221">BeginGlobalDict</a>(lpMem);
00693 
00694     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a212">CreateColSpArray</a> (cp, lpMem, icSigRedTRCTag, AllowBinary);
00695     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a212">CreateColSpArray</a> (cp, lpMem, icSigGreenTRCTag, AllowBinary);
00696     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a212">CreateColSpArray</a> (cp, lpMem, icSigBlueTRCTag, AllowBinary);
00697 
00698     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, EndOp);
00699 
00700     <span class="keywordflow">if</span> (BackupCSA)
00701     {
00702         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, SupportDEFG_E);
00703     }
00704     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, SetGlobalOp);
00705 
00706     <span class="keywordflow">if</span> (BackupCSA)
00707     {
00708         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, NotSupportDEFG_S);
00709     }
00710 
00711  <span class="comment">//*********** Start creating the ColorSpace</span>
00712     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, BeginArray);   <span class="comment">// Begin array</span>
00713  <span class="comment">//********** /CIEBasedABC</span>
00714     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, CIEBasedABCTag);   <span class="comment">// Create entry</span>
00715     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginDict);    <span class="comment">// Begin dictionary</span>
00716 
00717  <span class="comment">//********** Black/White Point</span>
00718     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a208">SendCSABWPoint</a>(lpMem, InputIntent, IlluminantWP, MediaWP);
00719 
00720  <span class="comment">//********** /DecodeABC</span>
00721     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, DecodeABCTag);
00722     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginArray);
00723 
00724     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
00725     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a213">CreateColSpProc</a> (cp, lpMem, icSigRedTRCTag, AllowBinary);
00726     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
00727     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a213">CreateColSpProc</a> (cp, lpMem, icSigGreenTRCTag, AllowBinary);
00728     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
00729     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a213">CreateColSpProc</a> (cp, lpMem, icSigBlueTRCTag, AllowBinary);
00730     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndArray);
00731 
00732  <span class="comment">//********** /MatrixABC</span>
00733     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, MatrixABCTag);
00734     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginArray);
00735 
00736     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a214">CreateFloatString</a> (cp, lpMem, icSigRedColorantTag);
00737     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a214">CreateFloatString</a> (cp, lpMem, icSigGreenColorantTag);
00738     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a214">CreateFloatString</a> (cp, lpMem, icSigBlueColorantTag);
00739 
00740     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndArray);
00741 
00742  <span class="comment">//********** /RangeLMN</span>
00743     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, RangeLMNTag);
00744     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, RangeLMN);
00745 
00746  <span class="comment">//********** /DecodeLMN</span>
00747     <span class="keywordflow">if</span> (InputIntent == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a145">icAbsoluteColorimetric</a>)
00748     {
00749         <span class="comment">// Support absolute whitePoint</span>
00750         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, DecodeLMNTag);
00751         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginArray);
00752         <span class="keywordflow">for</span> (i = 0; i &lt; 3; i ++)
00753         {
00754             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginFunction);
00755             lpMem += <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a46">WriteFloat</a> (lpMem, (<span class="keywordtype">double</span>)MediaWP[i]/IlluminantWP[i]);
00756             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, MulOp); 
00757             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndFunction);
00758         }
00759         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndArray);
00760     }
00761 
00762  <span class="comment">//********** End dictionary definition</span>
00763     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, EndDict);
00764     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndArray);
00765 
00766     <span class="keywordflow">if</span> (BackupCSA)
00767     {
00768         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, SupportDEFG_E);
00769     }
00770 
00771     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, CieBasedABCEnd);
00772     *lpcbSize = (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>) ((lpMem - lpOldMem));
00773     <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
00774 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a16" doxytag="jul98/dll32/getcsa.c::GetPS2CSA_ABC_LAB" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL GetPS2CSA_ABC_LAB           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpMem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpcbSize</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>InputIntent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>InpDrvClrSp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>AllowBinary</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d3/jul98_2dll32_2getcsa_8c-source.html#l00801">801</a> of file <a class="el" href="../../d1/d3/jul98_2dll32_2getcsa_8c-source.html">jul98/dll32/getcsa.c</a>.
<p>
References <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00007">BeginArray</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00011">BeginDict</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00009">BeginFunction</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00074">CieBasedABCEnd</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00036">CIEBasedABCTag</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00074">CSIG</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00136">DecodeABCLab1</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00040">DecodeABCTag</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00138">DecodeLMNLab</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00041">DecodeLMNTag</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00008">EndArray</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00012">EndDict</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00010">EndFunction</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l00069">GetCPConnSpace</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l00070">GetCPDevSpace</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04074">GetCPWhitePoint()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l05068">GetMediaWP()</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00306">icAbsoluteColorimetric</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00258">icSigDefData</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00248">icSigLabData</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00107">LPCSIG</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00106">LPSFLOAT</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00135">MatrixABCLab</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00029">MatrixABCTag</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00080">MEMPTR</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00060">MulOp</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00063">NewLine</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00079">RangeABC_Lab</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00027">RangeABCTag</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l05027">SendCSABWPoint()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00069">SFLOAT</a>, <a class="el" href="../../d7/d6/aug98_2dll32_2icmdll_8h-source.html#l00011">SINT</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l01193">WriteFloat()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04573">WriteNewLineObject()</a>, and <a class="el" href="../../d3/d8/ps2_8c-source.html#l00072">WriteObject</a>.
<p>
Referenced by <a class="el" href="../../d8/d2/aug98_2dll32_2getcsa_8c-source.html#l01579">GetPS2ColorSpaceArray()</a>.
<p>
<pre class="fragment"><div>00803 {
00804     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a17">CSIG</a> PCS, Dev;
00805     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a16">SFLOAT</a> IlluminantWP[3];
00806     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a16">SFLOAT</a> MediaWP[3];
00807 
00808     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a> i;
00809     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpOldMem = lpMem;
00810     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a> Ret = 0;
00811  <span class="comment">// Check if we can generate the CS.</span>
00812  <span class="comment">// Required  tags are: red, green and blue Colorants.</span>
00813  <span class="comment">// As for TRC tags - we are quite flexible here - if we cannot find the</span>
00814  <span class="comment">// required tag - we assume the linear responce</span>
00815     <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d9/ps2_8c.html#a40">GetCPConnSpace</a> (cp, (LPCSIG) &amp; PCS) ||
00816         !<a class="code" href="../../d2/d9/ps2_8c.html#a41">GetCPDevSpace</a> (cp, (LPCSIG) &amp; Dev) ||
00817         (Dev != <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a110">icSigLabData</a>))
00818     {
00819         <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00820     }
00821     <span class="keywordflow">if</span> ((InpDrvClrSp != <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a110">icSigLabData</a>) &amp;&amp;
00822         (InpDrvClrSp != <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a120">icSigDefData</a>) &amp;&amp;
00823         (InpDrvClrSp != 0))
00824     {
00825         <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00826     }
00827  <span class="comment">// Estimate the memory size required to hold CS</span>
00828 
00829     <span class="keywordflow">if</span> (lpMem == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)                  <span class="comment">// This is a size request</span>
00830     {
00831         *lpcbSize = 65530;
00832         <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
00833     }
00834  <span class="comment">// Get info about Illuminant White Point from the header</span>
00835     <a class="code" href="../../d2/d9/ps2_8c.html#a191">GetCPWhitePoint</a> (cp, (LPSFLOAT) &amp; IlluminantWP);     <span class="comment">// .. Illuminant</span>
00836                                                          
00837  <span class="comment">// Support absolute whitePoint</span>
00838     <a class="code" href="../../d2/d9/ps2_8c.html#a209">GetMediaWP</a>(cp, InputIntent, IlluminantWP, MediaWP);
00839 
00840  <span class="comment">//*********** Start creating the ColorSpace</span>
00841     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, BeginArray);   <span class="comment">// Begin array</span>
00842 
00843  <span class="comment">//********** /CIEBasedABC</span>
00844     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, CIEBasedABCTag);   <span class="comment">// Create entry</span>
00845     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginDict);    <span class="comment">// Begin dictionary</span>
00846 
00847  <span class="comment">//********** Black/White Point</span>
00848     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a208">SendCSABWPoint</a>(lpMem, InputIntent, IlluminantWP, MediaWP);
00849 
00850  <span class="comment">//********** /RangeABC</span>
00851     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, RangeABCTag);
00852     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, RangeABC_Lab);
00853 
00854  <span class="comment">//********** /DecodeABC</span>
00855     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, DecodeABCTag);
00856     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, DecodeABCLab1);
00857 
00858  <span class="comment">//********** /MatrixABC</span>
00859     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, MatrixABCTag);
00860     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, MatrixABCLab);
00861 
00862  <span class="comment">//********** /DecodeLMN</span>
00863     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, DecodeLMNTag);
00864     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginArray);
00865     <span class="keywordflow">for</span> (i = 0; i &lt; 3; i ++)
00866     {
00867         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginFunction);
00868         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, DecodeLMNLab);
00869         <span class="keywordflow">if</span> (InputIntent == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a145">icAbsoluteColorimetric</a>)
00870         {
00871             lpMem += <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a46">WriteFloat</a> (lpMem, (<span class="keywordtype">double</span>) MediaWP[i]);
00872         }
00873         <span class="keywordflow">else</span>
00874         {
00875             lpMem += <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a46">WriteFloat</a> (lpMem, (<span class="keywordtype">double</span>) IlluminantWP[i]);
00876         }
00877         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, MulOp); 
00878         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndFunction);
00879         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
00880     }
00881     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndArray);
00882 
00883 
00884  <span class="comment">//********** End dictionary definition</span>
00885     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, EndDict);
00886     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndArray);
00887 
00888     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, CieBasedABCEnd);
00889     *lpcbSize = (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>) ((lpMem - lpOldMem));
00890     <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
00891 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a14" doxytag="jul98/dll32/getcsa.c::GetPS2CSA_DEFG" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL GetPS2CSA_DEFG           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpMem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpcbSize</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>InputIntent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Index</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>Type</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>AllowBinary</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d3/jul98_2dll32_2getcsa_8c-source.html#l00259">259</a> of file <a class="el" href="../../d1/d3/jul98_2dll32_2getcsa_8c-source.html">jul98/dll32/getcsa.c</a>.
<p>
References <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00108">AllowBinary</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00007">BeginArray</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00011">BeginDict</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00009">BeginFunction</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l05001">BeginGlobalDict()</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00005">BeginString</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00069">CieBasedDEFBegin</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00073">CieBasedDEFEnd</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00068">CieBasedDEFGBegin</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00072">CieBasedDEFGEnd</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00037">CIEBasedDEFGTag</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00038">CIEBasedDEFTag</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00083">Clip01</a>, <a class="el" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a48a47">CP_POSTSCRIPT_ERR</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l02709">CreateInputArray()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l02834">CreateOutputArray()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00074">CSIG</a>, <a class="el" href="../../d1/d3/jul98_2dll32_2getcsa_8c-source.html#l00006">DecodeABCLab</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00040">DecodeABCTag</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00046">DecodeDEFGTag</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00047">DecodeDEFTag</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00138">DecodeLMNLab</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00041">DecodeLMNTag</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04987">EnableGlobalDict()</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00147">EncodeABCLab1</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00148">EncodeABCLab2</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00008">EndArray</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00128">EndClip</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00012">EndDict</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00010">EndFunction</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00057">EndOp</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00006">EndString</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d6/aug98_2dll32_2icmdll_8h-source.html#l00010">FAR</a>, <a class="el" href="../../d9/d4/aug98_2dll32_2profcrd_8c-source.html#l00099">GetCLUTinfo()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l00069">GetCPConnSpace</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l00557">GetCPElement()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04143">GetCPElementSize()</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l00485">GetCPElementType()</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l00461">GetCPTagSig()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04074">GetCPWhitePoint()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l05068">GetMediaWP()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l02953">GetPublicArrayName()</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00306">icAbsoluteColorimetric</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00248">icSigLabData</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00220">icSigLut16Type</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00221">icSigLut8Type</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00247">icSigXYZData</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00347">icUInt16Number</a>, <a class="el" href="../../d2/d9/cmchek_8c-source.html#l00095">Index</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00115">IndexArray</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00110">IndexArray16b</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00087">InputArray</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00118">lpcpLut16Type</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00119">lpcpLut8Type</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00107">LPCSIG</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00109">LPMEMPTR</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00106">LPSFLOAT</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00105">LPSINT</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00135">MatrixABCLab</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00029">MatrixABCTag</a>, <a class="el" href="../../d3/d8/aug98_2dll32_2csprof_8h-source.html#l00016">MAX_LINELENG</a>, <a class="el" href="../../d3/d0/object_8c-source.html#l00205">MemAlloc()</a>, <a class="el" href="../../d3/d0/object_8c-source.html#l00260">MemFree()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00080">MEMPTR</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00060">MulOp</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00063">NewLine</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00088">OutputArray</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00077">RangeLMN</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00031">RangeLMNTag</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00131">Scale16</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00132">Scale16XYZ</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00130">Scale8</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l05027">SendCSABWPoint()</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l00021">SetCPLastError()</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00054">SetGlobalOp</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00069">SFLOAT</a>, <a class="el" href="../../d7/d6/aug98_2dll32_2icmdll_8h-source.html#l00011">SINT</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00127">StartClip</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00125">SupportDEFG_E</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00123">SupportDEFG_S</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00045">TableTag</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l00006">TempBfSize</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00120">TestingDEFG</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00134">TFunction8XYZ</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d3/d8/aug98_2dll32_2csprof_8h-source.html#l00012">TYPE_CIEBASEDDEF</a>, <a class="el" href="../../d3/d8/aug98_2dll32_2csprof_8h-source.html#l00013">TYPE_CIEBASEDDEFG</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00135">ui16toSINT</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04401">WriteByteString()</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l01193">WriteFloat()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l00081">WriteHex</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04351">WriteHexBuffer()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l00080">WriteInt</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04422">WriteInt2ByteString()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04573">WriteNewLineObject()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l00072">WriteObject</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l01152">WriteObjectN()</a>, and <a class="el" href="../../d3/d8/ps2_8c-source.html#l04381">WriteStringToken()</a>.
<p>
<pre class="fragment"><div>00267 {
00268     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a17">CSIG</a> PCS, LutTag;
00269     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a17">CSIG</a> IntentSig;
00270     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a16">SFLOAT</a> IlluminantWP[3];
00271     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a16">SFLOAT</a> MediaWP[3];
00272     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a> nInputCh, nOutputCh, nGrids, SecondGrids;
00273     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a> nInputTable, nOutputTable, nNumbers;
00274     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a> i, j, k;
00275     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpTable;
00276     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpOldMem = lpMem;
00277     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpLut = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00278     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpLineStart;
00279     HGLOBAL hLut = 0;
00280     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a> LutSize;
00281     <span class="keywordtype">char</span> PublicArrayName[<a class="code" href="../../d8/d8/aug98_2dll32_2csprof_8c.html#a1">TempBfSize</a>];
00282  <span class="comment">// Check if we can generate the CS.</span>
00283  <span class="comment">// Required  tags are: red, green and blue Colorants.</span>
00284  <span class="comment">// As for TRC tags - we are quite flexible here - if we cannot find the</span>
00285  <span class="comment">// required tag - we assume the linear responce</span>
00286     <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d9/ps2_8c.html#a40">GetCPConnSpace</a> (cp, (LPCSIG) &amp; PCS) ||
00287         (PCS != <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a110">icSigLabData</a>) &amp;&amp; (PCS != <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a109">icSigXYZData</a>) ||
00288         !<a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a15">GetCPTagSig</a> (cp, Index, (LPCSIG) &amp; IntentSig))
00289     {
00290         <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00291     }
00292     <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a16">GetCPElementType</a> (cp, Index, (LPCSIG) &amp; LutTag) ||
00293         ((LutTag != <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a91">icSigLut8Type</a>) &amp;&amp; (LutTag != <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a90">icSigLut16Type</a>)) ||
00294         !<a class="code" href="../../d2/d9/ps2_8c.html#a194">GetCPElementSize</a> (cp, Index, (LPSINT) &amp; LutSize) ||
00295         !<a class="code" href="../../d2/d1/object_8c.html#a7">MemAlloc</a> (LutSize, (HGLOBAL FAR *) &amp;hLut, (LPMEMPTR) &amp; lpLut) ||
00296         !<a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a19">GetCPElement</a> (cp, Index, lpLut, LutSize))
00297     {
00298         <span class="keywordflow">if</span> (0 != hLut)
00299         {
00300             <a class="code" href="../../d2/d1/object_8c.html#a9">MemFree</a> (hLut);
00301         }
00302         <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00303     }
00304  <span class="comment">// Estimate the memory size required to hold CS</span>
00305 
00306     <a class="code" href="../../d7/d4/jul98_2test_2getcsa_8h.html#a7">GetCLUTinfo</a>(LutTag, lpLut, &amp;nInputCh, &amp;nOutputCh, 
00307         &amp;nGrids, &amp;nInputTable, &amp;nOutputTable, &amp;i);
00308 
00309  <span class="comment">// Level 2 printers support only tri-component CIEBasedABC input,</span>
00310  <span class="comment">// but can have either 3 or 4 output channels.</span>
00311     <span class="keywordflow">if</span> (!(nOutputCh == 3) ||
00312         !((nInputCh == 3) &amp;&amp; (Type == <a class="code" href="../../d2/d9/aug98_2dll32_2csprof_8h.html#a0">TYPE_CIEBASEDDEF</a>)) &amp;&amp;
00313         !((nInputCh == 4) &amp;&amp; (Type == <a class="code" href="../../d2/d9/aug98_2dll32_2csprof_8h.html#a1">TYPE_CIEBASEDDEFG</a>)))
00314     {
00315         <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a39">SetCPLastError</a> (CP_POSTSCRIPT_ERR);
00316         <a class="code" href="../../d2/d1/object_8c.html#a9">MemFree</a> (hLut);
00317         <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00318     }
00319     <span class="keywordflow">if</span> (lpMem == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)                  <span class="comment">// This is a size request</span>
00320     {
00321         <span class="keywordflow">if</span> (Type == <a class="code" href="../../d2/d9/aug98_2dll32_2csprof_8h.html#a1">TYPE_CIEBASEDDEFG</a>)
00322             *lpcbSize = nOutputCh * nGrids * nGrids * nGrids * nGrids * 2;  <span class="comment">// LUT HEX bytes</span>
00323         <span class="keywordflow">else</span>
00324             *lpcbSize = nOutputCh * nGrids * nGrids * nGrids * 2;   <span class="comment">// LUT HEX bytes</span>
00325 
00326         *lpcbSize = *lpcbSize +
00327             nInputCh * nInputTable * 6 +
00328             nOutputCh * nOutputTable * 6 +  <span class="comment">// Number of INT bytes</span>
00329             nInputCh * (lstrlen (IndexArray) +
00330                         lstrlen (StartClip) +
00331                         lstrlen (EndClip)) +
00332             nOutputCh * (lstrlen (IndexArray) +
00333                          lstrlen (StartClip) +
00334                          lstrlen (EndClip)) +
00335             4096;                       <span class="comment">// + other PS stuff</span>
00336 
00337 
00338         <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
00339     }
00340  <span class="comment">// Get info about Illuminant White Point from the header</span>
00341     <a class="code" href="../../d2/d9/ps2_8c.html#a191">GetCPWhitePoint</a> (cp, (LPSFLOAT) &amp; IlluminantWP);          <span class="comment">// .. Illuminant</span>
00342 
00343  <span class="comment">// Support absolute whitePoint</span>
00344     <a class="code" href="../../d2/d9/ps2_8c.html#a209">GetMediaWP</a>(cp, InputIntent, IlluminantWP, MediaWP);
00345 
00346  <span class="comment">//*********** Testing CieBasedDEFG support</span>
00347     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, TestingDEFG);
00348 
00349  <span class="comment">//*********** Creating global data</span>
00350     <a class="code" href="../../d2/d9/ps2_8c.html#a217">GetPublicArrayName</a> (cp, IntentSig, PublicArrayName);
00351     <span class="keywordflow">if</span> (Type == <a class="code" href="../../d2/d9/aug98_2dll32_2csprof_8h.html#a1">TYPE_CIEBASEDDEFG</a>)
00352         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, CieBasedDEFGBegin);
00353     <span class="keywordflow">else</span>
00354         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, CieBasedDEFBegin);
00355 
00356     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a220">EnableGlobalDict</a>(lpMem);
00357     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, SupportDEFG_S);
00358     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a221">BeginGlobalDict</a>(lpMem);
00359 
00360     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a215">CreateInputArray</a> (lpMem, nInputCh, nInputTable,
00361              (MEMPTR) PublicArrayName, LutTag, lpLut, AllowBinary, NULL);
00362 
00363     <span class="keywordflow">if</span> (Type == <a class="code" href="../../d2/d9/aug98_2dll32_2csprof_8h.html#a1">TYPE_CIEBASEDDEFG</a>)
00364     {
00365         i = nInputTable * nInputCh +
00366             nGrids * nGrids * nGrids * nGrids * nOutputCh;
00367     } <span class="keywordflow">else</span>
00368     {
00369         i = nInputTable * nInputCh +
00370             nGrids * nGrids * nGrids * nOutputCh;
00371     }
00372     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a216">CreateOutputArray</a> (lpMem, nOutputCh, nOutputTable, i,
00373              (MEMPTR) PublicArrayName, LutTag, lpLut, AllowBinary, NULL);
00374 
00375     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, EndOp);
00376     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, SupportDEFG_E);
00377     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, SetGlobalOp);
00378     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, SupportDEFG_S);
00379 
00380  <span class="comment">//*********** Start creating the ColorSpace</span>
00381     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, BeginArray);   <span class="comment">// Begin array</span>
00382 
00383  <span class="comment">//********** /CIEBasedDEF(G)</span>
00384     <span class="keywordflow">if</span> (Type == <a class="code" href="../../d2/d9/aug98_2dll32_2csprof_8h.html#a1">TYPE_CIEBASEDDEFG</a>)
00385         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, CIEBasedDEFGTag);
00386     <span class="keywordflow">else</span>
00387         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, CIEBasedDEFTag);
00388     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginDict);    <span class="comment">// Begin dictionary</span>
00389 
00390  <span class="comment">//********** Black/White Point</span>
00391     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a208">SendCSABWPoint</a>(lpMem, InputIntent, IlluminantWP, MediaWP);
00392 
00393  <span class="comment">//********** /DecodeDEF(G)</span>
00394     lpLineStart = lpMem;
00395     <span class="keywordflow">if</span> (Type == <a class="code" href="../../d2/d9/aug98_2dll32_2csprof_8h.html#a1">TYPE_CIEBASEDDEFG</a>)
00396         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, DecodeDEFGTag);
00397     <span class="keywordflow">else</span>
00398         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, DecodeDEFTag);
00399 
00400     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginArray);
00401     <span class="keywordflow">for</span> (i = 0; i &lt; nInputCh; i++)
00402     {
00403         lpLineStart = lpMem;
00404 
00405         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, BeginFunction);
00406 <span class="preprocessor">#if 0</span>
00407 <span class="preprocessor"></span>        <span class="keywordflow">if</span> (PCS == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a110">icSigLabData</a>)
00408         {
00409             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem,
00410                                   (0 == i) ? EncodeABCLab1 : EncodeABCLab2);
00411         }
00412 <span class="preprocessor">#endif</span>
00413 <span class="preprocessor"></span>        lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, StartClip);
00414         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, InputArray);
00415         lpMem += <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a44">WriteObjectN</a> (lpMem, (MEMPTR) PublicArrayName, lstrlen (PublicArrayName));
00416         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a44">WriteInt</a> (lpMem, i);
00417 
00418         <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d8/aug98_2test_2main_8c.html#a27">AllowBinary</a>)               <span class="comment">// Output ASCII</span>
00419         {
00420             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, IndexArray);
00421         } <span class="keywordflow">else</span>
00422         {                               <span class="comment">// Output BINARY</span>
00423             <span class="keywordflow">if</span> (LutTag == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a91">icSigLut8Type</a>)
00424             {
00425                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, IndexArray);
00426             } <span class="keywordflow">else</span>
00427             {
00428                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, IndexArray16b);
00429             }
00430         }
00431         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, (LutTag == icSigLut8Type) ? Scale8 : Scale16);
00432         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndClip);
00433         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndFunction);
00434     }
00435     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndArray);
00436 
00437  <span class="comment">//********** /Table</span>
00438     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, TableTag);
00439     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginArray);
00440 
00441     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a44">WriteInt</a> (lpMem, nGrids);  <span class="comment">// Send down Nh</span>
00442     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a44">WriteInt</a> (lpMem, nGrids);  <span class="comment">// Send down Ni</span>
00443     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a44">WriteInt</a> (lpMem, nGrids);  <span class="comment">// Send down Nj</span>
00444     nNumbers = nGrids * nGrids * nOutputCh;
00445     SecondGrids = 1;
00446     <span class="keywordflow">if</span> (Type == <a class="code" href="../../d2/d9/aug98_2dll32_2csprof_8h.html#a1">TYPE_CIEBASEDDEFG</a>)
00447     {
00448         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a44">WriteInt</a> (lpMem, nGrids);  <span class="comment">// Send down Nk</span>
00449 <span class="comment">//      nNumbers = nGrids * nGrids * nGrids * nOutputCh ;</span>
00450         SecondGrids = nGrids;
00451     }
00452     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, BeginArray);
00453     <span class="keywordflow">for</span> (i = 0; i &lt; nGrids; i++)        <span class="comment">// Nh strings should be sent</span>
00454     {
00455         <span class="keywordflow">if</span> (Type == <a class="code" href="../../d2/d9/aug98_2dll32_2csprof_8h.html#a1">TYPE_CIEBASEDDEFG</a>)
00456         {
00457             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, BeginArray);
00458         }
00459         <span class="keywordflow">for</span> (k = 0; k &lt; SecondGrids; k++)
00460         {
00461             lpLineStart = lpMem;
00462             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
00463             <span class="keywordflow">if</span> (LutTag == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a91">icSigLut8Type</a>)
00464             {
00465                 lpTable = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>) (((<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a37">lpcpLut8Type</a>) lpLut)-&gt;lut.data) +
00466                     nInputTable * nInputCh +
00467                     nNumbers * (i * SecondGrids + k);
00468             } <span class="keywordflow">else</span>
00469             {
00470                 lpTable = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>) (((<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a36">lpcpLut16Type</a>) lpLut)-&gt;lut.data) +
00471                     2 * nInputTable * nInputCh +
00472                     2 * nNumbers * (i * SecondGrids + k);
00473             }
00474 
00475             <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d8/aug98_2test_2main_8c.html#a27">AllowBinary</a>)           <span class="comment">// Output ASCII</span>
00476             {
00477                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginString);
00478                 <span class="keywordflow">if</span> (LutTag == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a91">icSigLut8Type</a>)
00479                     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a227">WriteHexBuffer</a> (lpMem, lpTable, lpLineStart, nNumbers);
00480                 <span class="keywordflow">else</span>
00481                 {
00482                     <span class="keywordflow">for</span> (j = 0; j &lt; nNumbers; j++)
00483                     {
00484                         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a45">WriteHex</a> (lpMem, ui16toSINT (lpTable) / 256);
00485                         lpTable += <span class="keyword">sizeof</span> (<a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a185">icUInt16Number</a>);
00486                         <span class="keywordflow">if</span> (((<a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>) (lpMem - lpLineStart)) &gt; <a class="code" href="../../d2/d9/aug98_2dll32_2csprof_8h.html#a4">MAX_LINELENG</a>)
00487                         {
00488                             lpLineStart = lpMem;
00489                             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
00490                         }
00491                     }
00492                 }
00493                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndString);
00494             } <span class="keywordflow">else</span>
00495             {                           <span class="comment">// Output BINARY</span>
00496                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a228">WriteStringToken</a> (lpMem, 143, nNumbers);
00497                 <span class="keywordflow">if</span> (LutTag == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a91">icSigLut8Type</a>)
00498                     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a229">WriteByteString</a> (lpMem, lpTable, nNumbers);
00499                 <span class="keywordflow">else</span>
00500                     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a230">WriteInt2ByteString</a> (lpMem, lpTable, nNumbers);
00501             }
00502             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
00503         }
00504         <span class="keywordflow">if</span> (Type == <a class="code" href="../../d2/d9/aug98_2dll32_2csprof_8h.html#a1">TYPE_CIEBASEDDEFG</a>)
00505         {
00506             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndArray);
00507         }
00508     }
00509     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndArray);
00510     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndArray); <span class="comment">// End array</span>
00511 
00512  <span class="comment">//********** /DecodeABC</span>
00513     lpLineStart = lpMem;
00514     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, DecodeABCTag);
00515     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginArray);
00516     <span class="keywordflow">for</span> (i = 0; i &lt; nOutputCh; i++)
00517     {
00518         lpLineStart = lpMem;
00519         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, BeginFunction);
00520         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, Clip01);
00521         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, OutputArray);
00522         lpMem += <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a44">WriteObjectN</a> (lpMem, (MEMPTR) PublicArrayName, lstrlen (PublicArrayName));
00523         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a44">WriteInt</a> (lpMem, i);
00524 
00525         <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d8/aug98_2test_2main_8c.html#a27">AllowBinary</a>)               <span class="comment">// Output ASCII CRD</span>
00526         {
00527             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
00528 
00529             <span class="keywordflow">if</span> (LutTag == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a91">icSigLut8Type</a>)
00530             {
00531                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, TFunction8XYZ);
00532             } <span class="keywordflow">else</span>
00533             {
00534                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, IndexArray);
00535                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, Scale16XYZ);
00536             }
00537         } <span class="keywordflow">else</span>
00538         {                               <span class="comment">// Output BINARY CRD</span>
00539             <span class="keywordflow">if</span> (LutTag == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a91">icSigLut8Type</a>)
00540             {
00541                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, TFunction8XYZ);
00542             } <span class="keywordflow">else</span>
00543             {
00544                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, IndexArray16b);
00545                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, Scale16XYZ);
00546             }
00547         }
00548 
00549  <span class="comment">// Now, We get CieBasedXYZ output. Output range 0 --&gt; 1.99997</span>
00550  <span class="comment">// If the connection space is absolute XYZ, We need to convert </span>
00551  <span class="comment">// from relative XYZ to absolute XYZ.</span>
00552         <span class="keywordflow">if</span> ((PCS == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a109">icSigXYZData</a>) &amp;&amp;
00553             (InputIntent == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a145">icAbsoluteColorimetric</a>))
00554         {
00555             lpMem += <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a46">WriteFloat</a> (lpMem, (<span class="keywordtype">double</span>)MediaWP[i]/IlluminantWP[i]);
00556             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, MulOp); 
00557         }
00558  <span class="comment">// If the connection space is Lab, We need to convert XYZ to Lab.</span>
00559         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (PCS == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a110">icSigLabData</a>)
00560             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, DecodeABCLab[i]);
00561         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndFunction);
00562     }
00563     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndArray);
00564 
00565     <span class="keywordflow">if</span> (PCS == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a110">icSigLabData</a>)
00566     {
00567  <span class="comment">//********** /MatrixABC</span>
00568         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, MatrixABCTag);
00569         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, MatrixABCLab);
00570 
00571  <span class="comment">//********** /DecodeLMN</span>
00572         lpLineStart = lpMem;
00573         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, DecodeLMNTag);
00574         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginArray);
00575         <span class="keywordflow">for</span> (i = 0; i &lt; 3; i++)
00576         {
00577             lpLineStart = lpMem;
00578             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, BeginFunction);
00579             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, DecodeLMNLab);
00580             <span class="keywordflow">if</span> (InputIntent == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a145">icAbsoluteColorimetric</a>)
00581                 lpMem += <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a46">WriteFloat</a> (lpMem, (<span class="keywordtype">double</span>) MediaWP[i]);
00582             <span class="keywordflow">else</span> 
00583                 lpMem += <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a46">WriteFloat</a> (lpMem, (<span class="keywordtype">double</span>) IlluminantWP[i]);
00584             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, MulOp);
00585             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndFunction);
00586         }
00587         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndArray);
00588     } <span class="keywordflow">else</span>
00589     {
00590  <span class="comment">//********** /RangeLMN</span>
00591         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, RangeLMNTag);
00592         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, RangeLMN);
00593     }
00594 
00595  <span class="comment">//********** End dictionary definition</span>
00596     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, EndDict);
00597     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndArray);
00598 
00599     <span class="keywordflow">if</span> (Type == <a class="code" href="../../d2/d9/aug98_2dll32_2csprof_8h.html#a1">TYPE_CIEBASEDDEFG</a>)
00600         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, CieBasedDEFGEnd);
00601     <span class="keywordflow">else</span>
00602         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, CieBasedDEFEnd);
00603 
00604     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, SupportDEFG_E);
00605 
00606     *lpcbSize = (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>) (lpMem - lpOldMem);
00607 
00608     <a class="code" href="../../d2/d1/object_8c.html#a9">MemFree</a> (hLut);
00609     <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
00610 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a21" doxytag="jul98/dll32/getcsa.c::GetPS2CSA_DEFG_Intent" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL GetPS2CSA_DEFG_Intent           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpBuffer</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpcbSize</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>InpDrvClrSp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Intent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>Type</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>AllowBinary</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d3/jul98_2dll32_2getcsa_8c-source.html#l01493">1493</a> of file <a class="el" href="../../d1/d3/jul98_2dll32_2getcsa_8c-source.html">jul98/dll32/getcsa.c</a>.
<p>
References <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00108">AllowBinary</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00074">CSIG</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04007">DoesCPTagExist()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l00426">GetCPTagIndex()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l01895">GetPS2CSA_DEFG()</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00306">icAbsoluteColorimetric</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00303">icPerceptual</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00304">icRelativeColorimetric</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00305">icSaturation</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00139">icSigAToB0Tag</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00140">icSigAToB1Tag</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00141">icSigAToB2Tag</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00256">icSigCmykData</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00258">icSigDefData</a>, <a class="el" href="../../d2/d9/cmchek_8c-source.html#l00095">Index</a>, <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00109">Intent</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00105">LPSINT</a>, <a class="el" href="../../d7/d6/aug98_2dll32_2icmdll_8h-source.html#l00011">SINT</a>, <a class="el" href="../../d3/d8/aug98_2dll32_2csprof_8h-source.html#l00012">TYPE_CIEBASEDDEF</a>, and <a class="el" href="../../d3/d8/aug98_2dll32_2csprof_8h-source.html#l00013">TYPE_CIEBASEDDEFG</a>.
<p>
Referenced by <a class="el" href="../../d9/d5/aug98_2test_2control_8c-source.html#l00232">ColorSpaceControl()</a>, and <a class="el" href="../../d8/d2/aug98_2dll32_2getcsa_8c-source.html#l01579">GetPS2ColorSpaceArray()</a>.
<p>
<pre class="fragment"><div>01501 {
01502     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a> <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>;
01503     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> Success = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01504     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a17">CSIG</a> icSigAToBx;
01505 
01506  <span class="comment">// Try to create CieBasedDEFG CSA first.</span>
01507     <span class="keywordflow">if</span> (((Type == <a class="code" href="../../d2/d9/aug98_2dll32_2csprof_8h.html#a1">TYPE_CIEBASEDDEFG</a>) &amp;&amp; (InpDrvClrSp != <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a118">icSigCmykData</a>) ||
01508          (Type == <a class="code" href="../../d2/d9/aug98_2dll32_2csprof_8h.html#a0">TYPE_CIEBASEDDEF</a>) &amp;&amp; (InpDrvClrSp != <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a120">icSigDefData</a>)) &amp;&amp;
01509         (InpDrvClrSp != 0))
01510     {
01511         <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
01512     }
01513     <span class="keywordflow">switch</span> (<a class="code" href="../../d3/d8/aug98_2test_2main_8c.html#a28">Intent</a>)
01514     {
01515         <span class="keywordflow">case</span> <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a142">icPerceptual</a>:
01516             icSigAToBx = <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a17">icSigAToB0Tag</a>;
01517             <span class="keywordflow">break</span>;
01518         <span class="keywordflow">case</span> <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a143">icRelativeColorimetric</a>:
01519             icSigAToBx = <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a18">icSigAToB1Tag</a>;
01520             <span class="keywordflow">break</span>;
01521         <span class="keywordflow">case</span> <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a144">icSaturation</a>:
01522             icSigAToBx = <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a19">icSigAToB2Tag</a>;
01523             <span class="keywordflow">break</span>;
01524         <span class="keywordflow">case</span> <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a145">icAbsoluteColorimetric</a>:
01525             icSigAToBx = <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a18">icSigAToB1Tag</a>;
01526             <span class="keywordflow">break</span>;
01527         <span class="keywordflow">default</span>:
01528             <span class="keywordflow">return</span> Success;
01529     }
01530 
01531     <span class="keywordflow">if</span> (<a class="code" href="../../d2/d9/ps2_8c.html#a189">DoesCPTagExist</a> (cp, icSigAToBx) &amp;&amp;
01532         <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a12">GetCPTagIndex</a> (cp, icSigAToBx, (LPSINT) &amp; Index))
01533     {
01534         Success = <a class="code" href="../../d2/d9/ps2_8c.html#a186">GetPS2CSA_DEFG</a> (cp, lpBuffer, lpcbSize, Intent, Index, Type, AllowBinary);
01535     }
01536 
01537     <span class="keywordflow">return</span> Success;
01538 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a19" doxytag="jul98/dll32/getcsa.c::GetPS2CSA_MONO" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL GetPS2CSA_MONO           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpMem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpcbSize</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>InpDrvClrSp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>InputIntent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>AllowBinary</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d3/jul98_2dll32_2getcsa_8c-source.html#l01244">1244</a> of file <a class="el" href="../../d1/d3/jul98_2dll32_2getcsa_8c-source.html">jul98/dll32/getcsa.c</a>.
<p>
References <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00108">AllowBinary</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l01279">GetPS2CSA_MONO_A()</a>, <a class="el" href="../../d1/d3/jul98_2dll32_2getcsa_8c-source.html#l00916">GetPS2CSA_MONO_ABC()</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00258">icSigDefData</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00253">icSigGrayData</a>, and <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00252">icSigRgbData</a>.
<p>
Referenced by <a class="el" href="../../d8/d2/aug98_2dll32_2getcsa_8c-source.html#l01579">GetPS2ColorSpaceArray()</a>.
<p>
<pre class="fragment"><div>01246 {
01247     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> Success = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01248 <span class="preprocessor">#if 0</span>
01249 <span class="preprocessor"></span>    <span class="keywordflow">if</span> ((InpDrvClrSp == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a114">icSigRgbData</a>) ||
01250         (InpDrvClrSp == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a120">icSigDefData</a>) ||
01251         (InpDrvClrSp == 0))
01252     {
01253         Success = <a class="code" href="../../d0/d4/jul98_2dll32_2getcsa_8c.html#a17">GetPS2CSA_MONO_ABC</a> (cp, lpMem, lpcbSize, InputIntent, AllowBinary);
01254     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (InpDrvClrSp == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a115">icSigGrayData</a>)
01255     {
01256         Success = <a class="code" href="../../d2/d9/ps2_8c.html#a183">GetPS2CSA_MONO_A</a> (cp, lpMem, lpcbSize, InputIntent, AllowBinary);
01257     }
01258 <span class="preprocessor">#else</span>
01259 <span class="preprocessor"></span>    <span class="keywordflow">if</span> ((InpDrvClrSp == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a115">icSigGrayData</a>) ||
01260         (InpDrvClrSp == 0))
01261     {
01262         Success = <a class="code" href="../../d2/d9/ps2_8c.html#a183">GetPS2CSA_MONO_A</a> (cp, lpMem, lpcbSize, InputIntent, AllowBinary);
01263     }
01264     <span class="keywordflow">else</span>
01265     {
01266         Success = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01267     }
01268 <span class="preprocessor">#endif</span>
01269 <span class="preprocessor"></span>    <span class="keywordflow">return</span> Success;
01270 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a18" doxytag="jul98/dll32/getcsa.c::GetPS2CSA_MONO_A" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL GetPS2CSA_MONO_A           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpMem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpcbSize</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>InputIntent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>AllowBinary</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d3/jul98_2dll32_2getcsa_8c-source.html#l01076">1076</a> of file <a class="el" href="../../d1/d3/jul98_2dll32_2getcsa_8c-source.html">jul98/dll32/getcsa.c</a>.
<p>
References <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00007">BeginArray</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00011">BeginDict</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00009">BeginFunction</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00071">CieBasedABegin</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00075">CieBasedAEnd</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00035">CIEBasedATag</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00074">CSIG</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00084">DecodeA3</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00137">DecodeALab</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00039">DecodeATag</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00138">DecodeLMNLab</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04007">DoesCPTagExist()</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00008">EndArray</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00128">EndClip</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00012">EndDict</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00010">EndFunction</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d6/aug98_2dll32_2icmdll_8h-source.html#l00010">FAR</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l00069">GetCPConnSpace</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l00557">GetCPElement()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04143">GetCPElementSize()</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l00485">GetCPElementType()</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l00426">GetCPTagIndex()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04074">GetCPWhitePoint()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l05068">GetMediaWP()</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00306">icAbsoluteColorimetric</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00217">icSigCurveType</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00155">icSigGrayTRCTag</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00248">icSigLabData</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00347">icUInt16Number</a>, <a class="el" href="../../d2/d9/cmchek_8c-source.html#l00095">Index</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00115">IndexArray</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00117">lpcpCurveType</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00107">LPCSIG</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00109">LPMEMPTR</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00106">LPSFLOAT</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00105">LPSINT</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00028">MatrixATag</a>, <a class="el" href="../../d3/d8/aug98_2dll32_2csprof_8h-source.html#l00016">MAX_LINELENG</a>, <a class="el" href="../../d3/d0/object_8c-source.html#l00205">MemAlloc()</a>, <a class="el" href="../../d3/d0/object_8c-source.html#l00260">MemFree()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00080">MEMPTR</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00063">NewLine</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00077">RangeLMN</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00031">RangeLMNTag</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00131">Scale16</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l05027">SendCSABWPoint()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00069">SFLOAT</a>, <a class="el" href="../../d7/d6/aug98_2dll32_2icmdll_8h-source.html#l00011">SINT</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00127">StartClip</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00135">ui16toSINT</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00137">ui32toSINT</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l01193">WriteFloat()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l00080">WriteInt</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04573">WriteNewLineObject()</a>, and <a class="el" href="../../d3/d8/ps2_8c-source.html#l00072">WriteObject</a>.
<p>
<pre class="fragment"><div>01078 {
01079     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a> nCount;
01080     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a17">CSIG</a> Tag, PCS;
01081     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a> i, <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>;
01082     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpTable;
01083     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a16">SFLOAT</a> IlluminantWP[3];
01084     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a16">SFLOAT</a> MediaWP[3];
01085     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpBuff = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
01086     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a> MemSize = 0;
01087     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpOldMem = lpMem;
01088     HGLOBAL hBuff;
01089     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpLineStart;
01090  <span class="comment">// Check if we can generate the CS</span>
01091     <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d9/ps2_8c.html#a189">DoesCPTagExist</a> (cp, icSigGrayTRCTag) ||
01092         !<a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a12">GetCPTagIndex</a> (cp, icSigGrayTRCTag, &amp;Index) ||
01093         !<a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a16">GetCPElementType</a> (cp, Index, (LPCSIG) &amp; Tag) ||
01094         (Tag != <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a87">icSigCurveType</a>) ||
01095         !<a class="code" href="../../d2/d9/ps2_8c.html#a40">GetCPConnSpace</a> (cp, (LPCSIG) &amp; PCS) ||
01096         !<a class="code" href="../../d2/d9/ps2_8c.html#a194">GetCPElementSize</a> (cp, Index, (LPSINT) &amp; MemSize) ||
01097         !<a class="code" href="../../d2/d1/object_8c.html#a7">MemAlloc</a> (MemSize, (HGLOBAL FAR *)&amp;hBuff, (LPMEMPTR) &amp; lpBuff) ||
01098         !<a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a19">GetCPElement</a> (cp, Index, lpBuff, MemSize))
01099     {
01100         <span class="keywordflow">if</span> (<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> != lpBuff)
01101         {
01102             <a class="code" href="../../d2/d1/object_8c.html#a9">MemFree</a> (hBuff);
01103         }
01104         <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
01105     }
01106     nCount = <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a3">ui32toSINT</a> (((lpcpCurveType) lpBuff)-&gt;curve.count);
01107 
01108  <span class="comment">// Estimate the memory size required to hold CS</span>
01109     *lpcbSize = nCount * 6 +            <span class="comment">// Number of INT elements</span>
01110         3 * (lstrlen (IndexArray) +
01111              lstrlen (StartClip) +
01112              lstrlen (EndClip)) +
01113         2048;                           <span class="comment">// + other PS stuff</span>
01114     <span class="keywordflow">if</span> (lpMem == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)                  <span class="comment">// This is a size request</span>
01115     {
01116         <a class="code" href="../../d2/d1/object_8c.html#a9">MemFree</a> (hBuff);
01117         <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
01118     }
01119  <span class="comment">// Get info about Illuminant White Point from the header</span>
01120     <a class="code" href="../../d2/d9/ps2_8c.html#a191">GetCPWhitePoint</a> (cp, (LPSFLOAT) &amp; IlluminantWP);          <span class="comment">// .. Illuminant</span>
01121 
01122  <span class="comment">// Support absolute whitePoint</span>
01123     <a class="code" href="../../d2/d9/ps2_8c.html#a209">GetMediaWP</a>(cp, InputIntent, IlluminantWP, MediaWP);
01124 
01125  <span class="comment">//*********** Start creating the ColorSpace</span>
01126     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, CieBasedABegin);
01127 
01128     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, BeginArray);   <span class="comment">// Begin array</span>
01129  <span class="comment">//********** /CIEBasedA</span>
01130     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, CIEBasedATag); <span class="comment">// Create entry</span>
01131     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginDict);    <span class="comment">// Begin dictionary</span>
01132 
01133  <span class="comment">//********** Black/White Point</span>
01134     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a208">SendCSABWPoint</a>(lpMem, InputIntent, IlluminantWP, MediaWP);
01135 
01136  <span class="comment">//********** /DecodeA</span>
01137     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
01138     lpLineStart = lpMem;
01139 
01140     <span class="keywordflow">if</span> (nCount != 0)
01141     {
01142         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, DecodeATag);
01143         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginArray);
01144 
01145         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginFunction);
01146         <span class="keywordflow">if</span> (nCount == 1)                <span class="comment">// Gamma supplied in ui16 format</span>
01147         {
01148             lpTable = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>) (((<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a35">lpcpCurveType</a>) lpBuff)-&gt;curve.data);
01149             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a44">WriteInt</a> (lpMem, ui16toSINT (lpTable));
01150             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, DecodeA3);
01151     <span class="comment">// If the PCS is Lab, we need to convert Lab to XYZ</span>
01152     <span class="comment">// Now, the range is from 0 --&gt; 0.99997.</span>
01153     <span class="comment">// Actually, the conversion from Lab to XYZ is not needed.</span>
01154             <span class="keywordflow">if</span> (PCS == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a110">icSigLabData</a>)
01155             {
01156                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, DecodeALab);
01157                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, DecodeLMNLab);
01158             }
01159         } <span class="keywordflow">else</span>
01160         {
01161             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, StartClip);
01162             lpTable = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>) (((<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a35">lpcpCurveType</a>) lpBuff)-&gt;curve.data);
01163             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginArray);
01164             <span class="keywordflow">for</span> (i = 0; i &lt; nCount; i++)
01165             {
01166                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a44">WriteInt</a> (lpMem, ui16toSINT (lpTable));
01167                 lpTable += <span class="keyword">sizeof</span> (<a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a185">icUInt16Number</a>);
01168                 <span class="keywordflow">if</span> (((<a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>) (lpMem - lpLineStart)) &gt; <a class="code" href="../../d2/d9/aug98_2dll32_2csprof_8h.html#a4">MAX_LINELENG</a>)
01169                 {
01170                     lpLineStart = lpMem;
01171                     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
01172                 }
01173             }
01174             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndArray);
01175             lpLineStart = lpMem;
01176             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
01177 
01178             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, IndexArray);
01179             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, Scale16);
01180     <span class="comment">// If the PCS is Lab, we need to convert Lab to XYZ</span>
01181     <span class="comment">// Now, the range is from 0 --&gt; .99997.</span>
01182     <span class="comment">// Actually, the conversion from Lab to XYZ is not needed.</span>
01183             <span class="keywordflow">if</span> (PCS == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a110">icSigLabData</a>)
01184             {
01185                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, DecodeALab);
01186                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, DecodeLMNLab);
01187             }
01188             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndClip);
01189         }
01190         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndFunction);
01191         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndArray);
01192     }
01193 
01194  <span class="comment">//********** /MatrixA</span>
01195     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, MatrixATag);
01196     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginArray);
01197     <span class="keywordflow">for</span> (i = 0; i &lt; 3; i++)
01198     {
01199         <span class="keywordflow">if</span> (InputIntent == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a145">icAbsoluteColorimetric</a>)
01200             lpMem += <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a46">WriteFloat</a> (lpMem, (<span class="keywordtype">double</span>) MediaWP[i]);
01201         <span class="keywordflow">else</span>
01202             lpMem += <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a46">WriteFloat</a> (lpMem, (<span class="keywordtype">double</span>) IlluminantWP[i]);
01203     }
01204     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndArray);
01205 
01206  <span class="comment">//********** /RangeLMN</span>
01207     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, RangeLMNTag);
01208     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, RangeLMN);
01209 
01210  <span class="comment">//********** /End dictionary</span>
01211     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndDict);  <span class="comment">// End dictionary definition</span>
01212     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndArray);
01213 
01214     <a class="code" href="../../d2/d1/object_8c.html#a9">MemFree</a> (hBuff);
01215 
01216     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, CieBasedAEnd);
01217     *lpcbSize = (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>) (lpMem - lpOldMem);
01218     <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
01219 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a17" doxytag="jul98/dll32/getcsa.c::GetPS2CSA_MONO_ABC" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL GetPS2CSA_MONO_ABC           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpMem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpcbSize</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>InputIntent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>AllowBinary</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d3/jul98_2dll32_2getcsa_8c-source.html#l00916">916</a> of file <a class="el" href="../../d1/d3/jul98_2dll32_2getcsa_8c-source.html">jul98/dll32/getcsa.c</a>.
<p>
References <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00007">BeginArray</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00011">BeginDict</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00009">BeginFunction</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00070">CieBasedABCBegin</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00074">CieBasedABCEnd</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00036">CIEBasedABCTag</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00074">CSIG</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00084">DecodeA3</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00040">DecodeABCTag</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04007">DoesCPTagExist()</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00050">DupOp</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00008">EndArray</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00128">EndClip</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00012">EndDict</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00010">EndFunction</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d6/aug98_2dll32_2icmdll_8h-source.html#l00010">FAR</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l00069">GetCPConnSpace</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l00557">GetCPElement()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04143">GetCPElementSize()</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l00485">GetCPElementType()</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l00426">GetCPTagIndex()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04074">GetCPWhitePoint()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l05068">GetMediaWP()</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00306">icAbsoluteColorimetric</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00217">icSigCurveType</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00155">icSigGrayTRCTag</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00347">icUInt16Number</a>, <a class="el" href="../../d2/d9/cmchek_8c-source.html#l00095">Index</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00115">IndexArray</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00117">lpcpCurveType</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00107">LPCSIG</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00109">LPMEMPTR</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00106">LPSFLOAT</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00105">LPSINT</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00029">MatrixABCTag</a>, <a class="el" href="../../d3/d8/aug98_2dll32_2csprof_8h-source.html#l00016">MAX_LINELENG</a>, <a class="el" href="../../d3/d0/object_8c-source.html#l00205">MemAlloc()</a>, <a class="el" href="../../d3/d0/object_8c-source.html#l00260">MemFree()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00080">MEMPTR</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00063">NewLine</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00077">RangeLMN</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00031">RangeLMNTag</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00131">Scale16</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l05027">SendCSABWPoint()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00069">SFLOAT</a>, <a class="el" href="../../d7/d6/aug98_2dll32_2icmdll_8h-source.html#l00011">SINT</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00127">StartClip</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00135">ui16toSINT</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00137">ui32toSINT</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l01193">WriteFloat()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l00080">WriteInt</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04573">WriteNewLineObject()</a>, and <a class="el" href="../../d3/d8/ps2_8c-source.html#l00072">WriteObject</a>.
<p>
Referenced by <a class="el" href="../../d8/d2/aug98_2dll32_2getcsa_8c-source.html#l01253">GetPS2CSA_MONO()</a>.
<p>
<pre class="fragment"><div>00918 {
00919     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a> nCount;
00920     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a17">CSIG</a> Tag, PCS;
00921     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a> i, j, <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>;
00922     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpTable;
00923     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a16">SFLOAT</a> IlluminantWP[3];
00924     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a16">SFLOAT</a> MediaWP[3];
00925     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpBuff = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00926     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a> MemSize = 0;
00927     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpOldMem = lpMem;
00928     HGLOBAL hBuff;
00929     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpLineStart;
00930  <span class="comment">// Check if we can generate the CS</span>
00931     <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d9/ps2_8c.html#a189">DoesCPTagExist</a> (cp, icSigGrayTRCTag) ||
00932         !<a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a12">GetCPTagIndex</a> (cp, icSigGrayTRCTag, &amp;Index) ||
00933         !<a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a16">GetCPElementType</a> (cp, Index, (LPCSIG) &amp; Tag) ||
00934         (Tag != <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a87">icSigCurveType</a>) ||
00935         !<a class="code" href="../../d2/d9/ps2_8c.html#a40">GetCPConnSpace</a> (cp, (LPCSIG) &amp; PCS) ||
00936         !<a class="code" href="../../d2/d9/ps2_8c.html#a194">GetCPElementSize</a> (cp, Index, (LPSINT) &amp; MemSize) ||
00937         !<a class="code" href="../../d2/d1/object_8c.html#a7">MemAlloc</a> (MemSize, (HGLOBAL FAR *)&amp;hBuff, (LPMEMPTR) &amp; lpBuff) ||
00938         !<a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a19">GetCPElement</a> (cp, Index, lpBuff, MemSize))
00939     {
00940         <span class="keywordflow">if</span> (<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> != lpBuff)
00941         {
00942             <a class="code" href="../../d2/d1/object_8c.html#a9">MemFree</a> (hBuff);
00943         }
00944         <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00945     }
00946     nCount = <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a3">ui32toSINT</a> (((lpcpCurveType) lpBuff)-&gt;curve.count);
00947 
00948  <span class="comment">// Estimate the memory size required to hold CS</span>
00949     *lpcbSize = nCount * 6 +            <span class="comment">// Number of INT elements</span>
00950         3 * (lstrlen (IndexArray) +
00951              lstrlen (StartClip) +
00952              lstrlen (EndClip)) +
00953         2048;                           <span class="comment">// + other PS stuff</span>
00954     <span class="keywordflow">if</span> (lpMem == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)                  <span class="comment">// This is a size request</span>
00955     {
00956         <a class="code" href="../../d2/d1/object_8c.html#a9">MemFree</a> (hBuff);
00957         <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
00958     }
00959  <span class="comment">// Get info about Illuminant White Point from the header</span>
00960     <a class="code" href="../../d2/d9/ps2_8c.html#a191">GetCPWhitePoint</a> (cp, (LPSFLOAT) &amp; IlluminantWP);          <span class="comment">// .. Illuminant</span>
00961 
00962  <span class="comment">// Support absolute whitePoint</span>
00963     <a class="code" href="../../d2/d9/ps2_8c.html#a209">GetMediaWP</a>(cp, InputIntent, IlluminantWP, MediaWP);
00964 
00965  <span class="comment">//*********** Start creating the ColorSpace</span>
00966     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, CieBasedABCBegin);
00967 
00968     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, BeginArray);   <span class="comment">// Begin array</span>
00969  <span class="comment">//********** /CIEBasedABC</span>
00970     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, CIEBasedABCTag);   <span class="comment">// Create entry</span>
00971     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginDict);    <span class="comment">// Begin dictionary</span>
00972 
00973  <span class="comment">//********** Black/White Point</span>
00974     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a208">SendCSABWPoint</a>(lpMem, InputIntent, IlluminantWP, MediaWP);
00975 
00976  <span class="comment">//********** /DecodeABC</span>
00977     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
00978     lpLineStart = lpMem;
00979 
00980     <span class="keywordflow">if</span> (nCount != 0)
00981     {
00982         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, DecodeABCTag);
00983         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginArray);
00984 
00985         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginFunction);
00986         <span class="keywordflow">if</span> (nCount == 1)                <span class="comment">// Gamma supplied in ui16 format</span>
00987         {
00988             lpTable = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>) (((<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a35">lpcpCurveType</a>) lpBuff)-&gt;curve.data);
00989             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a44">WriteInt</a> (lpMem, ui16toSINT (lpTable));
00990             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, DecodeA3);
00991         } <span class="keywordflow">else</span>
00992         {
00993             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, StartClip);
00994             lpTable = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>) (((<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a35">lpcpCurveType</a>) lpBuff)-&gt;curve.data);
00995             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginArray);
00996             <span class="keywordflow">for</span> (i = 0; i &lt; nCount; i++)
00997             {
00998                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a44">WriteInt</a> (lpMem, ui16toSINT (lpTable));
00999                 lpTable += <span class="keyword">sizeof</span> (<a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a185">icUInt16Number</a>);
01000                 <span class="keywordflow">if</span> (((<a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>) (lpMem - lpLineStart)) &gt; <a class="code" href="../../d2/d9/aug98_2dll32_2csprof_8h.html#a4">MAX_LINELENG</a>)
01001                 {
01002                     lpLineStart = lpMem;
01003                     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
01004                 }
01005             }
01006             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndArray);
01007             lpLineStart = lpMem;
01008             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
01009 
01010             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, IndexArray);
01011             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, Scale16);
01012             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndClip);
01013         }
01014         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndFunction);
01015         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, DupOp);
01016         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, DupOp);
01017         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndArray);
01018     }
01019  <span class="comment">//********** /MatrixABC</span>
01020     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, MatrixABCTag);
01021     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginArray);
01022     <span class="keywordflow">for</span> (i = 0; i &lt; 3; i ++)
01023     {
01024         <span class="keywordflow">for</span> (j = 0; j &lt; 3; j++)
01025         {
01026             <span class="keywordflow">if</span> (i != j)
01027                 lpMem += <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a46">WriteFloat</a> (lpMem, (<span class="keywordtype">double</span>)0);
01028             <span class="keywordflow">else</span>
01029             {
01030                 <span class="keywordflow">if</span> (InputIntent == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a145">icAbsoluteColorimetric</a>)
01031                     lpMem += <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a46">WriteFloat</a> (lpMem, (<span class="keywordtype">double</span>)MediaWP[i]);
01032                 <span class="keywordflow">else</span>
01033                     lpMem += <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a46">WriteFloat</a> (lpMem, (<span class="keywordtype">double</span>)IlluminantWP[i]);
01034             }
01035         }
01036     }
01037     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndArray);
01038 
01039  <span class="comment">//********** /RangeLMN</span>
01040     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, RangeLMNTag);
01041     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, RangeLMN);
01042 
01043 
01044     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndDict);  <span class="comment">// End dictionary definition</span>
01045     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndArray);
01046 
01047     <a class="code" href="../../d2/d1/object_8c.html#a9">MemFree</a> (hBuff);
01048 
01049     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, CieBasedABCEnd);
01050     *lpcbSize = (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>) (lpMem - lpOldMem);
01051     <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
01052 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a10" doxytag="jul98/dll32/getcsa.c::GetPublicArrayName" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a> GetPublicArrayName           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>IntentSig</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>PublicArrayName</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d3/jul98_2dll32_2getcsa_8c-source.html#l00152">152</a> of file <a class="el" href="../../d1/d3/jul98_2dll32_2getcsa_8c-source.html">jul98/dll32/getcsa.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00074">CSIG</a>, and <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00080">MEMPTR</a>.
<p>
<pre class="fragment"><div>00153 {
00154     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> OldPtr;
00155     OldPtr = PublicArrayName;
00156     PublicArrayName[0] = 0;
00157     MemCopy (PublicArrayName, (MEMPTR) &amp; IntentSig, <span class="keyword">sizeof</span> (CSIG));
00158     PublicArrayName += <span class="keyword">sizeof</span> (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a17">CSIG</a>);
00159     PublicArrayName[0] = 0;
00160     <span class="keywordflow">return</span> (PublicArrayName - OldPtr);
00161 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="jul98/dll32/getcsa.c::SendCSABWPoint" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a> SendCSABWPoint           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpMem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Intent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a26">LPSFLOAT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>IlluminantWP</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a26">LPSFLOAT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>MediaWP</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d3/jul98_2dll32_2getcsa_8c-source.html#l00163">163</a> of file <a class="el" href="../../d1/d3/jul98_2dll32_2getcsa_8c-source.html">jul98/dll32/getcsa.c</a>.
<p>
References <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00007">BeginArray</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00013">BlackPoint</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00022">BlackPointTag</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00008">EndArray</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00306">icAbsoluteColorimetric</a>, <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00109">Intent</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00080">MEMPTR</a>, <a class="el" href="../../d7/d6/aug98_2dll32_2icmdll_8h-source.html#l00011">SINT</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00021">WhitePointTag</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l01193">WriteFloat()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04573">WriteNewLineObject()</a>, and <a class="el" href="../../d3/d8/ps2_8c-source.html#l00072">WriteObject</a>.
<p>
<pre class="fragment"><div>00165 {
00166     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>   i;
00167     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpOldMem = lpMem;
00168 
00169  <span class="comment">//********** /BlackPoint</span>
00170     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, BlackPointTag);
00171     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BlackPoint);
00172 
00173  <span class="comment">//********** /WhitePoint</span>
00174     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, WhitePointTag);
00175     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginArray);
00176     <span class="keywordflow">for</span> (i = 0; i &lt; 3; i++)
00177     {
00178         <span class="keywordflow">if</span> (<a class="code" href="../../d3/d8/aug98_2test_2main_8c.html#a28">Intent</a> == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a145">icAbsoluteColorimetric</a>)
00179         {
00180             lpMem += <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a46">WriteFloat</a> (lpMem, (<span class="keywordtype">double</span>) MediaWP[i]);
00181         }
00182         <span class="keywordflow">else</span>
00183         {
00184             lpMem += <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a46">WriteFloat</a> (lpMem, (<span class="keywordtype">double</span>) IlluminantWP[i]);
00185         }
00186     }
00187     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndArray);
00188     <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>)(lpMem - lpOldMem);
00189 }
</div></pre>    </td>
  </tr>
</table>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="a1" doxytag="jul98/dll32/getcsa.c::DecodeABCLab" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> char* <a class="el" href="../../d2/d9/ps2_8c.html#a172">DecodeABCLab</a>[]<code> [static]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Initial value:</b><pre class="fragment"><div> {<span class="stringliteral">"50 mul 16 add 116 div "</span>, 
                               <span class="stringliteral">"128 mul 128 sub 500 div"</span>, 
                               <span class="stringliteral">"128 mul 128 sub 200 div"</span>}
</div></pre>
<p>
Definition at line <a class="el" href="../../d1/d3/jul98_2dll32_2getcsa_8c-source.html#l00006">6</a> of file <a class="el" href="../../d1/d3/jul98_2dll32_2getcsa_8c-source.html">jul98/dll32/getcsa.c</a>.
<p>
Referenced by <a class="el" href="../../d1/d3/jul98_2dll32_2getcsa_8c-source.html#l00259">GetPS2CSA_DEFG()</a>.    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Sat May 15 19:43:53 2004 for test by
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>

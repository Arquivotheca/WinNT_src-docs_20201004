<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>test: trackirp.h Source File</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="../../main.html">Main&nbsp;Page</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Class&nbsp;List</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Class&nbsp;Members</a> | <a class="qindex" href="../../globals.html">File&nbsp;Members</a></div>
<h1>trackirp.h</h1><a href="../../d9/d4/trackirp_8h.html">Go to the documentation of this file.</a><pre class="fragment"><div>00001 <span class="comment">/*++</span>
00002 <span class="comment"></span>
00003 <span class="comment">Copyright (c) 1998  Microsoft Corporation</span>
00004 <span class="comment"></span>
00005 <span class="comment">Module Name:</span>
00006 <span class="comment"></span>
00007 <span class="comment">    trackirp.h</span>
00008 <span class="comment"></span>
00009 <span class="comment">Abstract:</span>
00010 <span class="comment"></span>
00011 <span class="comment">    The module associated with the header asserts Irps are handled correctly</span>
00012 <span class="comment">    by drivers. No IRP-major specific testing is done; such code is done in</span>
00013 <span class="comment">    flunkirp.*</span>
00014 <span class="comment"></span>
00015 <span class="comment">Author:</span>
00016 <span class="comment"></span>
00017 <span class="comment">    Adrian J. Oney (adriao) 20-Apr-1998</span>
00018 <span class="comment"></span>
00019 <span class="comment">Revision History:</span>
00020 <span class="comment"></span>
00021 <span class="comment"></span>
00022 <span class="comment">--*/</span>
00023 
00024 <span class="preprocessor">#ifndef _TRACKIRP_H_</span>
00025 <span class="preprocessor"></span><span class="preprocessor">#define _TRACKIRP_H_</span>
00026 <span class="preprocessor"></span>
<a name="l00027"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a0">00027</a> <span class="preprocessor">#define ASSERTFLAG_TRACKIRPS           0x00000001</span>
<a name="l00028"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a1">00028</a> <span class="preprocessor"></span><span class="preprocessor">#define ASSERTFLAG_MONITOR_ALLOCS      0x00000002</span>
<a name="l00029"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a2">00029</a> <span class="preprocessor"></span><span class="preprocessor">#define ASSERTFLAG_POLICEIRPS          0x00000004</span>
<a name="l00030"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a3">00030</a> <span class="preprocessor"></span><span class="preprocessor">#define ASSERTFLAG_MONITORMAJORS       0x00000008</span>
<a name="l00031"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a4">00031</a> <span class="preprocessor"></span><span class="preprocessor">#define ASSERTFLAG_SURROGATE           0x00000010</span>
<a name="l00032"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a5">00032</a> <span class="preprocessor"></span><span class="preprocessor">#define ASSERTFLAG_SMASH_SRBS          0x00000020</span>
<a name="l00033"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a6">00033</a> <span class="preprocessor"></span><span class="preprocessor">#define ASSERTFLAG_CONSUME_ALWAYS      0x00000040</span>
<a name="l00034"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a7">00034</a> <span class="preprocessor"></span><span class="preprocessor">#define ASSERTFLAG_FORCEPENDING        0x00000080</span>
<a name="l00035"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a8">00035</a> <span class="preprocessor"></span><span class="preprocessor">#define ASSERTFLAG_COMPLETEATDPC       0x00000100</span>
<a name="l00036"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a9">00036</a> <span class="preprocessor"></span><span class="preprocessor">#define ASSERTFLAG_COMPLETEATPASSIVE   0x00000200</span>
<a name="l00037"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a10">00037</a> <span class="preprocessor"></span><span class="preprocessor">#define ASSERTFLAG_DEFERCOMPLETION     0x00000800</span>
<a name="l00038"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a11">00038</a> <span class="preprocessor"></span><span class="preprocessor">#define ASSERTFLAG_ROTATE_STATUS       0x00001000</span>
00039 <span class="preprocessor"></span><span class="comment">//                                     ----------</span>
<a name="l00040"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a12">00040</a> <span class="preprocessor">#define ASSERTMASK_COMPLETESTYLE       0x00000F80</span>
<a name="l00041"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a13">00041</a> <span class="preprocessor"></span><span class="preprocessor">#define ASSERTFLAG_SEEDSTACK           0x00010000</span>
00042 <span class="preprocessor"></span>
00043 <span class="comment">//</span>
00044 <span class="comment">// Disabling HACKHACKS_ENABLED will remove support for all hack code. The</span>
00045 <span class="comment">// hack code allows the machine to fully boot in checked builds. Note that</span>
00046 <span class="comment">// those hacks can be individually disabled by setting the IovpHackFlags</span>
00047 <span class="comment">// variable at boot time.</span>
00048 <span class="comment">//</span>
<a name="l00049"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a14">00049</a> <span class="preprocessor">#define HACKHACKS_ENABLED</span>
<a name="l00050"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a15">00050</a> <span class="preprocessor"></span><span class="preprocessor">#define HACKFLAG_FOR_MUP               0x00000001</span>
<a name="l00051"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a16">00051</a> <span class="preprocessor"></span><span class="preprocessor">#define HACKFLAG_FOR_SCSIPORT          0x00000002</span>
<a name="l00052"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a17">00052</a> <span class="preprocessor"></span><span class="preprocessor">#define HACKFLAG_FOR_ACPI              0x00000004</span>
<a name="l00053"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a18">00053</a> <span class="preprocessor"></span><span class="preprocessor">#define HACKFLAG_FOR_BOGUSIRPS         0x00000008</span>
00054 <span class="preprocessor"></span>
<a name="l00055"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a89">00055</a> <span class="keyword">extern</span> ULONG <a class="code" href="../../d8/d4/trackirp_8c.html#a8">IovpHackFlags</a> ;
<a name="l00056"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a90">00056</a> <span class="keyword">extern</span> ULONG <a class="code" href="../../d8/d4/trackirp_8c.html#a7">IovpTrackingFlags</a> ;
00057 
00058 <span class="comment">//</span>
00059 <span class="comment">// Currently, ntddk.h uses up to 0x2000 for Irp-&gt;Flags</span>
00060 <span class="comment">//</span>
<a name="l00061"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a19">00061</a> <span class="preprocessor">#define IRPFLAG_EXAMINE_MASK           0xC0000000</span>
<a name="l00062"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a20">00062</a> <span class="preprocessor"></span><span class="preprocessor">#define IRPFLAG_EXAMINE_NOT_TRACKED    0x80000000</span>
<a name="l00063"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a21">00063</a> <span class="preprocessor"></span><span class="preprocessor">#define IRPFLAG_EXAMINE_TRACKED        0x40000000</span>
<a name="l00064"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a22">00064</a> <span class="preprocessor"></span><span class="preprocessor">#define IRPFLAG_EXAMINE_UNMARKED       0x00000000</span>
00065 <span class="preprocessor"></span>
<a name="l00066"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a23">00066</a> <span class="preprocessor">#define IRP_DIAG_HAS_SURROGATE         0x02000000</span>
<a name="l00067"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a24">00067</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_DIAG_IS_SURROGATE          0x01000000</span>
00068 <span class="preprocessor"></span>
00069 
<a name="l00070"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a25">00070</a> <span class="preprocessor">#define TRACKFLAG_ACTIVE               0x00000001</span>
<a name="l00071"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a26">00071</a> <span class="preprocessor"></span><span class="preprocessor">#define TRACKFLAG_SURROGATE            0x00000002</span>
<a name="l00072"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a27">00072</a> <span class="preprocessor"></span><span class="preprocessor">#define TRACKFLAG_HAS_SURROGATE        0x00000004</span>
<a name="l00073"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a28">00073</a> <span class="preprocessor"></span><span class="preprocessor">#define TRACKFLAG_PROTECTEDIRP         0x00000008</span>
00074 <span class="preprocessor"></span>
<a name="l00075"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a29">00075</a> <span class="preprocessor">#define TRACKFLAG_QUEUED_INTERNALLY    0x00000010</span>
<a name="l00076"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a30">00076</a> <span class="preprocessor"></span><span class="preprocessor">#define TRACKFLAG_BOGUS                0x00000020</span>
<a name="l00077"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a31">00077</a> <span class="preprocessor"></span><span class="preprocessor">#define TRACKFLAG_RELEASED             0x00000040</span>
<a name="l00078"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a32">00078</a> <span class="preprocessor"></span><span class="preprocessor">#define TRACKFLAG_SRB_MUNGED           0x00000080</span>
<a name="l00079"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a33">00079</a> <span class="preprocessor"></span><span class="preprocessor">#define TRACKFLAG_SWAPPED_BACK         0x00000100</span>
<a name="l00080"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a34">00080</a> <span class="preprocessor"></span><span class="preprocessor">#define TRACKFLAG_WATERMARKED          0x00100000</span>
<a name="l00081"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a35">00081</a> <span class="preprocessor"></span><span class="preprocessor">#define TRACKFLAG_IO_ALLOCATED         0x00200000</span>
<a name="l00082"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a36">00082</a> <span class="preprocessor"></span><span class="preprocessor">#define TRACKFLAG_UNWOUND_BADLY        0x00400000</span>
<a name="l00083"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a37">00083</a> <span class="preprocessor"></span><span class="preprocessor">#define TRACKFLAG_PASSED_FAILURE       0x01000000</span>
<a name="l00084"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a38">00084</a> <span class="preprocessor"></span><span class="preprocessor">#define TRACKFLAG_PASSED_AT_BAD_IRQL   0x02000000</span>
<a name="l00085"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a39">00085</a> <span class="preprocessor"></span><span class="preprocessor">#define TRACKFLAG_IN_TRANSIT           0x40000000</span>
<a name="l00086"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a40">00086</a> <span class="preprocessor"></span><span class="preprocessor">#define TRACKFLAG_REMOVED_FROM_TABLE   0x80000000</span>
00087 <span class="preprocessor"></span>
<a name="l00088"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a41">00088</a> <span class="preprocessor">#define DOE_DESIGNATED_FDO             0x80000000</span>
<a name="l00089"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a42">00089</a> <span class="preprocessor"></span><span class="preprocessor">#define DOE_BOTTOM_OF_FDO_STACK        0x40000000</span>
<a name="l00090"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a43">00090</a> <span class="preprocessor"></span><span class="preprocessor">#define DOE_RAW_FDO                    0x20000000</span>
<a name="l00091"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a44">00091</a> <span class="preprocessor"></span><span class="preprocessor">#define DOE_EXAMINED                   0x10000000</span>
<a name="l00092"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a45">00092</a> <span class="preprocessor"></span><span class="preprocessor">#define DOE_TRACKED                    0x08000000</span>
00093 <span class="preprocessor"></span>
<a name="l00094"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a46">00094</a> <span class="preprocessor">#define STACKFLAG_NO_HANDLER           0x80000000</span>
<a name="l00095"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a47">00095</a> <span class="preprocessor"></span><span class="preprocessor">#define STACKFLAG_REQUEST_COMPLETED    0x40000000</span>
<a name="l00096"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a48">00096</a> <span class="preprocessor"></span><span class="preprocessor">#define STACKFLAG_CHECK_FOR_REFERENCE  0x20000000</span>
<a name="l00097"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a49">00097</a> <span class="preprocessor"></span><span class="preprocessor">#define STACKFLAG_REACHED_PDO          0x10000000</span>
<a name="l00098"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a50">00098</a> <span class="preprocessor"></span><span class="preprocessor">#define STACKFLAG_FIRST_REQUEST        0x08000000</span>
00099 <span class="preprocessor"></span>
<a name="l00100"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a51">00100</a> <span class="preprocessor">#define CALLFLAG_COMPLETED             0x80000000</span>
<a name="l00101"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a52">00101</a> <span class="preprocessor"></span><span class="preprocessor">#define CALLFLAG_IS_REMOVE_IRP         0x40000000</span>
<a name="l00102"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a53">00102</a> <span class="preprocessor"></span><span class="preprocessor">#define CALLFLAG_REMOVING_FDO_STACK_DO 0x20000000</span>
<a name="l00103"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a54">00103</a> <span class="preprocessor"></span><span class="preprocessor">#define CALLFLAG_OVERRIDE_STATUS       0x10000000</span>
<a name="l00104"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a55">00104</a> <span class="preprocessor"></span><span class="preprocessor">#define CALLFLAG_TOPMOST_IN_SLOT       0x08000000</span>
00105 <span class="preprocessor"></span>
<a name="l00106"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a56">00106</a> <span class="preprocessor">#define ALLOCFLAG_PROTECTEDIRP         0x00000001</span>
00107 <span class="preprocessor"></span>
<a name="l00108"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a57">00108</a> <span class="preprocessor">#define SESSIONFLAG_UNWOUND_INCONSISTANT    0x00000001</span>
00109 <span class="preprocessor"></span>
<a name="l00110"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a58">00110</a> <span class="preprocessor">#define IRP_SYSTEM_RESTRICTED          0x00000001</span>
<a name="l00111"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a59">00111</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_BOGUS                      0x00000002</span>
00112 <span class="preprocessor"></span>
<a name="l00113"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a60">00113</a> <span class="preprocessor">#define SL_NOTCOPIED                   0x10</span>
00114 <span class="preprocessor"></span>
<a name="l00115"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a61">00115</a> <span class="preprocessor">#define IRP_ALLOCATION_MONITORED       0x80</span>
00116 <span class="preprocessor"></span>
<a name="l00117"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a62">00117</a> <span class="preprocessor">#define STARTED_TOP_OF_STACK        1</span>
<a name="l00118"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a63">00118</a> <span class="preprocessor"></span><span class="preprocessor">#define FORWARDED_TO_NEXT_DO        2</span>
<a name="l00119"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a64">00119</a> <span class="preprocessor"></span><span class="preprocessor">#define SKIPPED_A_DO                3</span>
<a name="l00120"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a65">00120</a> <span class="preprocessor"></span><span class="preprocessor">#define STARTED_INSIDE_STACK        4</span>
<a name="l00121"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a66">00121</a> <span class="preprocessor"></span><span class="preprocessor">#define CHANGED_STACKS_AT_BOTTOM    5</span>
<a name="l00122"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a67">00122</a> <span class="preprocessor"></span><span class="preprocessor">#define CHANGED_STACKS_MID_STACK    6</span>
00123 <span class="preprocessor"></span>
<a name="l00124"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a68">00124</a> <span class="preprocessor">#define IRP_ALLOC_COUNT             5</span>
00125 <span class="preprocessor"></span>
<a name="l00126"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a146">00126</a> <span class="keyword">typedef</span> <span class="keyword">enum</span> {
00127 
00128     <a class="code" href="../../d9/d4/trackirp_8h.html#a146a103">DEFERACTION_QUEUE_WORKITEM</a>,
00129     <a class="code" href="../../d9/d4/trackirp_8h.html#a146a104">DEFERACTION_QUEUE_PASSIVE_TIMER</a>,
00130     <a class="code" href="../../d9/d4/trackirp_8h.html#a146a105">DEFERACTION_QUEUE_DISPATCH_TIMER</a>,
00131     <a class="code" href="../../d9/d4/trackirp_8h.html#a146a106">DEFERACTION_NORMAL</a>
00132 
00133 } <a class="code" href="../../d9/d4/trackirp_8h.html#a146">DEFER_ACTION</a>;
00134 
00135 <span class="keyword">struct </span><a class="code" href="../../d3/d0/struct__IOFCALLDRIVER__STACKDATA.html">_IOFCALLDRIVER_STACKDATA</a>;
00136 <span class="keyword">struct </span><a class="code" href="../../d9/d1/struct__IOV__STACK__LOCATION.html">_IOV_STACK_LOCATION</a>;
00137 <span class="keyword">struct </span><a class="code" href="../../d7/d1/struct__IOV__REQUEST__PACKET.html">_IOV_REQUEST_PACKET</a>;
00138 
<a name="l00139"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a91">00139</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d3/d0/struct__IOFCALLDRIVER__STACKDATA.html">_IOFCALLDRIVER_STACKDATA</a> *<a class="code" href="../../d3/d0/struct__IOFCALLDRIVER__STACKDATA.html">PIOFCALLDRIVER_STACKDATA</a>;
<a name="l00140"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a92">00140</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d9/d1/struct__IOV__STACK__LOCATION.html">_IOV_STACK_LOCATION</a>      *<a class="code" href="../../d9/d1/struct__IOV__STACK__LOCATION.html">PIOV_STACK_LOCATION</a>;
<a name="l00141"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a93">00141</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d7/d1/struct__IOV__REQUEST__PACKET.html">_IOV_REQUEST_PACKET</a>      *<a class="code" href="../../d7/d1/struct__IOV__REQUEST__PACKET.html">PIOV_REQUEST_PACKET</a>;
<a name="l00142"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a94">00142</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d8/d1/struct__IOV__SESSION__DATA.html">_IOV_SESSION_DATA</a>        *<a class="code" href="../../d8/d1/struct__IOV__SESSION__DATA.html">PIOV_SESSION_DATA</a>;
00143 
<a name="l00144"></a><a class="code" href="../../d3/d0/struct__IOFCALLDRIVER__STACKDATA.html">00144</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d3/d0/struct__IOFCALLDRIVER__STACKDATA.html">_IOFCALLDRIVER_STACKDATA</a> {
00145 
<a name="l00146"></a><a class="code" href="../../d3/d0/struct__IOFCALLDRIVER__STACKDATA.html#o0">00146</a>     <a class="code" href="../../d8/d1/struct__IOV__SESSION__DATA.html">PIOV_SESSION_DATA</a>       <a class="code" href="../../d3/d0/struct__IOFCALLDRIVER__STACKDATA.html#o0">IovSessionData</a>;
<a name="l00147"></a><a class="code" href="../../d3/d0/struct__IOFCALLDRIVER__STACKDATA.html#o1">00147</a>     <a class="code" href="../../d9/d1/struct__IOV__STACK__LOCATION.html">PIOV_STACK_LOCATION</a>     <a class="code" href="../../d3/d0/struct__IOFCALLDRIVER__STACKDATA.html#o1">IovStackLocation</a>; <span class="comment">// For internal consistency checks only...</span>
<a name="l00148"></a><a class="code" href="../../d3/d0/struct__IOFCALLDRIVER__STACKDATA.html#o2">00148</a>     ULONG                   <a class="code" href="../../d3/d0/struct__IOFCALLDRIVER__STACKDATA.html#o2">Flags</a>;
<a name="l00149"></a><a class="code" href="../../d3/d0/struct__IOFCALLDRIVER__STACKDATA.html#o3">00149</a>     LIST_ENTRY              <a class="code" href="../../d3/d0/struct__IOFCALLDRIVER__STACKDATA.html#o3">SharedLocationList</a>;
<a name="l00150"></a><a class="code" href="../../d3/d0/struct__IOFCALLDRIVER__STACKDATA.html#o4">00150</a>     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>                <a class="code" href="../../d3/d0/struct__IOFCALLDRIVER__STACKDATA.html#o4">ExpectedStatus</a>;
<a name="l00151"></a><a class="code" href="../../d3/d0/struct__IOFCALLDRIVER__STACKDATA.html#o5">00151</a>     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>                <a class="code" href="../../d3/d0/struct__IOFCALLDRIVER__STACKDATA.html#o5">NewStatus</a>;
<a name="l00152"></a><a class="code" href="../../d3/d0/struct__IOFCALLDRIVER__STACKDATA.html#o6">00152</a>     <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a>          <a class="code" href="../../d3/d0/struct__IOFCALLDRIVER__STACKDATA.html#o6">RemovePdo</a>;
00153 
00154 } <a class="code" href="../../d3/d0/struct__IOFCALLDRIVER__STACKDATA.html">IOFCALLDRIVER_STACKDATA</a>;
00155 
<a name="l00156"></a><a class="code" href="../../d9/d1/struct__IOV__STACK__LOCATION.html">00156</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d9/d1/struct__IOV__STACK__LOCATION.html">_IOV_STACK_LOCATION</a> {
00157 
<a name="l00158"></a><a class="code" href="../../d9/d1/struct__IOV__STACK__LOCATION.html#o0">00158</a>     BOOLEAN                 <a class="code" href="../../d9/d1/struct__IOV__STACK__LOCATION.html#o0">InUse</a>;
<a name="l00159"></a><a class="code" href="../../d9/d1/struct__IOV__STACK__LOCATION.html#o1">00159</a>     ULONG                   <a class="code" href="../../d9/d1/struct__IOV__STACK__LOCATION.html#o1">Flags</a>;
<a name="l00160"></a><a class="code" href="../../d9/d1/struct__IOV__STACK__LOCATION.html#o2">00160</a>     <a class="code" href="../../d9/d1/struct__IOV__STACK__LOCATION.html">PIOV_STACK_LOCATION</a>     <a class="code" href="../../d9/d1/struct__IOV__STACK__LOCATION.html#o2">RequestsFirstStackLocation</a>;
<a name="l00161"></a><a class="code" href="../../d9/d1/struct__IOV__STACK__LOCATION.html#o3">00161</a>     LIST_ENTRY              <a class="code" href="../../d9/d1/struct__IOV__STACK__LOCATION.html#o3">CallStackData</a>;
<a name="l00162"></a><a class="code" href="../../d9/d1/struct__IOV__STACK__LOCATION.html#o4">00162</a>     <a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html">PIO_STACK_LOCATION</a>      <a class="code" href="../../d9/d1/struct__IOV__STACK__LOCATION.html#o4">IrpSp</a>;
<a name="l00163"></a><a class="code" href="../../d9/d1/struct__IOV__STACK__LOCATION.html#o5">00163</a>     PVOID                   <a class="code" href="../../d9/d1/struct__IOV__STACK__LOCATION.html#o5">LastDispatch</a>;
<a name="l00164"></a><a class="code" href="../../d9/d1/struct__IOV__STACK__LOCATION.html#o6">00164</a>     LARGE_INTEGER           <a class="code" href="../../d9/d1/struct__IOV__STACK__LOCATION.html#o6">PerfDispatchStart</a>;
<a name="l00165"></a><a class="code" href="../../d9/d1/struct__IOV__STACK__LOCATION.html#o7">00165</a>     LARGE_INTEGER           <a class="code" href="../../d9/d1/struct__IOV__STACK__LOCATION.html#o7">PerfStackLocationStart</a>;
<a name="l00166"></a><a class="code" href="../../d9/d1/struct__IOV__STACK__LOCATION.html#o8">00166</a>     <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a>          <a class="code" href="../../d9/d1/struct__IOV__STACK__LOCATION.html#o8">ReferencingObject</a>;
<a name="l00167"></a><a class="code" href="../../d9/d1/struct__IOV__STACK__LOCATION.html#o9">00167</a>     LONG                    <a class="code" href="../../d9/d1/struct__IOV__STACK__LOCATION.html#o9">ReferencingCount</a>;
<a name="l00168"></a><a class="code" href="../../d9/d1/struct__IOV__STACK__LOCATION.html#o10">00168</a>     IO_STATUS_BLOCK         <a class="code" href="../../d9/d1/struct__IOV__STACK__LOCATION.html#o10">InitialStatusBlock</a>;
<a name="l00169"></a><a class="code" href="../../d9/d1/struct__IOV__STACK__LOCATION.html#o11">00169</a>     IO_STATUS_BLOCK         <a class="code" href="../../d9/d1/struct__IOV__STACK__LOCATION.html#o11">LastStatusBlock</a>;
<a name="l00170"></a><a class="code" href="../../d9/d1/struct__IOV__STACK__LOCATION.html#o12">00170</a>     <a class="code" href="../../d5/d6/struct__ETHREAD.html">PETHREAD</a>                <a class="code" href="../../d9/d1/struct__IOV__STACK__LOCATION.html#o12">ThreadDispatchedTo</a>;
00171 
00172 } <a class="code" href="../../d9/d1/struct__IOV__STACK__LOCATION.html">IOV_STACK_LOCATION</a>;
00173 
<a name="l00174"></a><a class="code" href="../../d8/d1/struct__IOV__SESSION__DATA.html">00174</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d8/d1/struct__IOV__SESSION__DATA.html">_IOV_SESSION_DATA</a> {
00175 
<a name="l00176"></a><a class="code" href="../../d8/d1/struct__IOV__SESSION__DATA.html#o0">00176</a>    <a class="code" href="../../d7/d1/struct__IOV__REQUEST__PACKET.html">PIOV_REQUEST_PACKET</a>     <a class="code" href="../../d8/d1/struct__IOV__SESSION__DATA.html#o0">IovRequestPacket</a>;
<a name="l00177"></a><a class="code" href="../../d8/d1/struct__IOV__SESSION__DATA.html#o1">00177</a>    LONG                    <a class="code" href="../../d8/d1/struct__IOV__SESSION__DATA.html#o1">SessionRefCount</a>;
<a name="l00178"></a><a class="code" href="../../d8/d1/struct__IOV__SESSION__DATA.html#o2">00178</a>    LIST_ENTRY              <a class="code" href="../../d8/d1/struct__IOV__SESSION__DATA.html#o2">SessionLink</a>;
<a name="l00179"></a><a class="code" href="../../d8/d1/struct__IOV__SESSION__DATA.html#o3">00179</a>    ULONG                   <a class="code" href="../../d8/d1/struct__IOV__SESSION__DATA.html#o3">SessionFlags</a>;
<a name="l00180"></a><a class="code" href="../../d8/d1/struct__IOV__SESSION__DATA.html#o4">00180</a>    ULONG                   <a class="code" href="../../d8/d1/struct__IOV__SESSION__DATA.html#o4">AssertFlags</a>;
00181 
<a name="l00182"></a><a class="code" href="../../d8/d1/struct__IOV__SESSION__DATA.html#o5">00182</a>    <a class="code" href="../../d5/d6/struct__ETHREAD.html">PETHREAD</a>                <a class="code" href="../../d8/d1/struct__IOV__SESSION__DATA.html#o5">OriginatorThread</a>;
<a name="l00183"></a><a class="code" href="../../d8/d1/struct__IOV__SESSION__DATA.html#o6">00183</a>    <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a>          <a class="code" href="../../d8/d1/struct__IOV__SESSION__DATA.html#o6">DeviceLastCalled</a>; <span class="comment">// Last device called</span>
<a name="l00184"></a><a class="code" href="../../d8/d1/struct__IOV__SESSION__DATA.html#o7">00184</a>    ULONG                   <a class="code" href="../../d8/d1/struct__IOV__SESSION__DATA.html#o7">ForwardMethod</a>;
<a name="l00185"></a><a class="code" href="../../d8/d1/struct__IOV__SESSION__DATA.html#o8">00185</a>    <a class="code" href="../../d0/d2/struct__IRP.html">PIRP</a>                    <a class="code" href="../../d8/d1/struct__IOV__SESSION__DATA.html#o8">BestVisibleIrp</a>;
<a name="l00186"></a><a class="code" href="../../d8/d1/struct__IOV__SESSION__DATA.html#o9">00186</a>    <a class="code" href="../../d9/d1/struct__IOV__STACK__LOCATION.html">IOV_STACK_LOCATION</a>      <a class="code" href="../../d8/d1/struct__IOV__SESSION__DATA.html#o9">StackData</a>[<a class="code" href="../../d5/d4/acpitabl_8h.html#a44">ANYSIZE_ARRAY</a>];
00187 
00188 } <a class="code" href="../../d8/d1/struct__IOV__SESSION__DATA.html">IOV_SESSION_DATA</a>;
00189 
<a name="l00190"></a><a class="code" href="../../d7/d1/struct__IOV__REQUEST__PACKET.html">00190</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d7/d1/struct__IOV__REQUEST__PACKET.html">_IOV_REQUEST_PACKET</a> {
00191 
<a name="l00192"></a><a class="code" href="../../d7/d1/struct__IOV__REQUEST__PACKET.html#o0">00192</a>     <a class="code" href="../../d0/d2/struct__IRP.html">PIRP</a>                    <a class="code" href="../../d7/d1/struct__IOV__REQUEST__PACKET.html#o0">TrackedIrp</a>;     <span class="comment">// Tracked IRP (could be surrogate)</span>
<a name="l00193"></a><a class="code" href="../../d7/d1/struct__IOV__REQUEST__PACKET.html#o1">00193</a>     KSPIN_LOCK              <a class="code" href="../../d7/d1/struct__IOV__REQUEST__PACKET.html#o1">IrpLock</a>;        <span class="comment">// Spinlock on data structure</span>
<a name="l00194"></a><a class="code" href="../../d7/d1/struct__IOV__REQUEST__PACKET.html#o2">00194</a>     KIRQL                   <a class="code" href="../../d7/d1/struct__IOV__REQUEST__PACKET.html#o2">CallerIrql</a>;     <span class="comment">// IRQL taken at.</span>
<a name="l00195"></a><a class="code" href="../../d7/d1/struct__IOV__REQUEST__PACKET.html#o3">00195</a>     LONG                    <a class="code" href="../../d7/d1/struct__IOV__REQUEST__PACKET.html#o3">ReferenceCount</a>; <span class="comment">// # of reasons to keep this packet</span>
<a name="l00196"></a><a class="code" href="../../d7/d1/struct__IOV__REQUEST__PACKET.html#o4">00196</a>     LONG                    <a class="code" href="../../d7/d1/struct__IOV__REQUEST__PACKET.html#o4">PointerCount</a>;   <span class="comment">// # of reasons to track by irp addr</span>
<a name="l00197"></a><a class="code" href="../../d7/d1/struct__IOV__REQUEST__PACKET.html#o5">00197</a>     ULONG                   <a class="code" href="../../d7/d1/struct__IOV__REQUEST__PACKET.html#o5">Flags</a>;
<a name="l00198"></a><a class="code" href="../../d7/d1/struct__IOV__REQUEST__PACKET.html#o6">00198</a>     LIST_ENTRY              <a class="code" href="../../d7/d1/struct__IOV__REQUEST__PACKET.html#o6">HashLink</a>;       <span class="comment">// Link in hash table.</span>
<a name="l00199"></a><a class="code" href="../../d7/d1/struct__IOV__REQUEST__PACKET.html#o7">00199</a>     LIST_ENTRY              <a class="code" href="../../d7/d1/struct__IOV__REQUEST__PACKET.html#o7">SurrogateLink</a>;  <span class="comment">// Head is at HeadPacket</span>
<a name="l00200"></a><a class="code" href="../../d7/d1/struct__IOV__REQUEST__PACKET.html#o8">00200</a>     LIST_ENTRY              <a class="code" href="../../d7/d1/struct__IOV__REQUEST__PACKET.html#o8">SessionHead</a>;    <span class="comment">// List of all sessions.</span>
<a name="l00201"></a><a class="code" href="../../d7/d1/struct__IOV__REQUEST__PACKET.html#o9">00201</a>     <a class="code" href="../../d7/d1/struct__IOV__REQUEST__PACKET.html">PIOV_REQUEST_PACKET</a>     <a class="code" href="../../d7/d1/struct__IOV__REQUEST__PACKET.html#o9">HeadPacket</a>;     <span class="comment">// First non-surrogate packet.</span>
<a name="l00202"></a><a class="code" href="../../d7/d1/struct__IOV__REQUEST__PACKET.html#o10">00202</a>     CCHAR                   <a class="code" href="../../d7/d1/struct__IOV__REQUEST__PACKET.html#o10">StackCount</a>;     <span class="comment">// StackCount of tracked IRP.</span>
00203 
<a name="l00204"></a><a class="code" href="../../d7/d1/struct__IOV__REQUEST__PACKET.html#o11">00204</a>     ULONG                   <a class="code" href="../../d7/d1/struct__IOV__REQUEST__PACKET.html#o11">AssertFlags</a>;
00205 
<a name="l00206"></a><a class="code" href="../../d7/d1/struct__IOV__REQUEST__PACKET.html#o12">00206</a>     <a class="code" href="../../d0/d5/io_8h.html#a357">PIO_COMPLETION_ROUTINE</a>  <a class="code" href="../../d7/d1/struct__IOV__REQUEST__PACKET.html#o12">RealIrpCompletionRoutine</a>;
<a name="l00207"></a><a class="code" href="../../d7/d1/struct__IOV__REQUEST__PACKET.html#o13">00207</a>     UCHAR                   <a class="code" href="../../d7/d1/struct__IOV__REQUEST__PACKET.html#o13">RealIrpControl</a>;
<a name="l00208"></a><a class="code" href="../../d7/d1/struct__IOV__REQUEST__PACKET.html#o14">00208</a>     PVOID                   <a class="code" href="../../d7/d1/struct__IOV__REQUEST__PACKET.html#o14">RealIrpContext</a>;
<a name="l00209"></a><a class="code" href="../../d7/d1/struct__IOV__REQUEST__PACKET.html#o15">00209</a>     PVOID                   <a class="code" href="../../d7/d1/struct__IOV__REQUEST__PACKET.html#o15">AllocatorStack</a>[<a class="code" href="../../d9/d4/trackirp_8h.html#a68">IRP_ALLOC_COUNT</a>];
00210 
00211     <span class="comment">//</span>
00212     <span class="comment">// The following information is for the assertion routines to read.</span>
00213     <span class="comment">//</span>
<a name="l00214"></a><a class="code" href="../../d7/d1/struct__IOV__REQUEST__PACKET.html#o16">00214</a>     UCHAR                   <a class="code" href="../../d7/d1/struct__IOV__REQUEST__PACKET.html#o16">TopStackLocation</a>;
00215 
<a name="l00216"></a><a class="code" href="../../d7/d1/struct__IOV__REQUEST__PACKET.html#o17">00216</a>     CCHAR                   <a class="code" href="../../d0/d6/iop_8h.html#a36">PriorityBoost</a>;  <span class="comment">// Boost from IofCompleteRequest</span>
<a name="l00217"></a><a class="code" href="../../d7/d1/struct__IOV__REQUEST__PACKET.html#o18">00217</a>     UCHAR                   <a class="code" href="../../d7/d1/struct__IOV__REQUEST__PACKET.html#o18">LastLocation</a>;   <span class="comment">// Last location from IofCallDriver</span>
<a name="l00218"></a><a class="code" href="../../d7/d1/struct__IOV__REQUEST__PACKET.html#o19">00218</a>     ULONG                   <a class="code" href="../../d7/d1/struct__IOV__REQUEST__PACKET.html#o19">RefTrackingCount</a>;
<a name="l00219"></a><a class="code" href="../../d7/d1/struct__IOV__REQUEST__PACKET.html#o20">00219</a>     PVOID                   <a class="code" href="../../d7/d1/struct__IOV__REQUEST__PACKET.html#o20">RestoreHandle</a>;
00220 
<a name="l00221"></a><a class="code" href="../../d7/d1/struct__IOV__REQUEST__PACKET.html#o21">00221</a>     <a class="code" href="../../d8/d1/struct__IOV__SESSION__DATA.html">PIOV_SESSION_DATA</a>       <a class="code" href="../../d7/d1/struct__IOV__REQUEST__PACKET.html#o21">pIovSessionData</a>;
00222 
00223 } <a class="code" href="../../d7/d1/struct__IOV__REQUEST__PACKET.html">IOV_REQUEST_PACKET</a>;
00224 
<a name="l00225"></a><a class="code" href="../../d3/d2/struct__DEFERRAL__CONTEXT.html">00225</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d3/d2/struct__DEFERRAL__CONTEXT.html">_DEFERRAL_CONTEXT</a> {
00226 
<a name="l00227"></a><a class="code" href="../../d3/d2/struct__DEFERRAL__CONTEXT.html#o0">00227</a>     <a class="code" href="../../d7/d1/struct__IOV__REQUEST__PACKET.html">PIOV_REQUEST_PACKET</a>     <a class="code" href="../../d3/d2/struct__DEFERRAL__CONTEXT.html#o0">IovRequestPacket</a>;
<a name="l00228"></a><a class="code" href="../../d3/d2/struct__DEFERRAL__CONTEXT.html#o1">00228</a>     <a class="code" href="../../d0/d5/io_8h.html#a357">PIO_COMPLETION_ROUTINE</a>  <a class="code" href="../../d3/d2/struct__DEFERRAL__CONTEXT.html#o1">OriginalCompletionRoutine</a>;
<a name="l00229"></a><a class="code" href="../../d3/d2/struct__DEFERRAL__CONTEXT.html#o2">00229</a>     PVOID                   <a class="code" href="../../d3/d2/struct__DEFERRAL__CONTEXT.html#o2">OriginalContext</a>;
<a name="l00230"></a><a class="code" href="../../d3/d2/struct__DEFERRAL__CONTEXT.html#o3">00230</a>     <a class="code" href="../../d0/d2/struct__IRP.html">PIRP</a>                    <a class="code" href="../../d3/d2/struct__DEFERRAL__CONTEXT.html#o3">OriginalIrp</a>;
<a name="l00231"></a><a class="code" href="../../d3/d2/struct__DEFERRAL__CONTEXT.html#o4">00231</a>     CCHAR                   <a class="code" href="../../d3/d2/struct__DEFERRAL__CONTEXT.html#o4">OriginalPriorityBoost</a>;
<a name="l00232"></a><a class="code" href="../../d3/d2/struct__DEFERRAL__CONTEXT.html#o5">00232</a>     <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a>          <a class="code" href="../../d3/d2/struct__DEFERRAL__CONTEXT.html#o5">DeviceObject</a>;
<a name="l00233"></a><a class="code" href="../../d3/d2/struct__DEFERRAL__CONTEXT.html#o6">00233</a>     <a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html">PIO_STACK_LOCATION</a>      <a class="code" href="../../d3/d2/struct__DEFERRAL__CONTEXT.html#o6">IrpSpNext</a>;
<a name="l00234"></a><a class="code" href="../../d3/d2/struct__DEFERRAL__CONTEXT.html#o7">00234</a>     <a class="code" href="../../d7/d9/struct__WORK__QUEUE__ITEM.html">WORK_QUEUE_ITEM</a>         <a class="code" href="../../d3/d2/struct__DEFERRAL__CONTEXT.html#o7">WorkQueueItem</a>;
<a name="l00235"></a><a class="code" href="../../d3/d2/struct__DEFERRAL__CONTEXT.html#o8">00235</a>     <a class="code" href="../../d1/d6/struct__KDPC.html">KDPC</a>                    <a class="code" href="../../d3/d2/struct__DEFERRAL__CONTEXT.html#o8">DpcItem</a>;
<a name="l00236"></a><a class="code" href="../../d3/d2/struct__DEFERRAL__CONTEXT.html#o9">00236</a>     <a class="code" href="../../d3/d8/struct__KTIMER.html">KTIMER</a>                  <a class="code" href="../../d3/d2/struct__DEFERRAL__CONTEXT.html#o9">DeferralTimer</a>;
<a name="l00237"></a><a class="code" href="../../d3/d2/struct__DEFERRAL__CONTEXT.html#o10">00237</a>     <a class="code" href="../../d9/d4/trackirp_8h.html#a146">DEFER_ACTION</a>            <a class="code" href="../../d3/d2/struct__DEFERRAL__CONTEXT.html#o10">DeferAction</a>;
00238 
00239 } <a class="code" href="../../d3/d2/struct__DEFERRAL__CONTEXT.html">DEFERRAL_CONTEXT</a>, *<a class="code" href="../../d3/d2/struct__DEFERRAL__CONTEXT.html">PDEFERRAL_CONTEXT</a>;
00240 
<a name="l00241"></a><a class="code" href="../../d4/d0/struct__IOFCOMPLETEREQUEST__STACKDATA.html">00241</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d4/d0/struct__IOFCOMPLETEREQUEST__STACKDATA.html">_IOFCOMPLETEREQUEST_STACKDATA</a> {
00242 
<a name="l00243"></a><a class="code" href="../../d4/d0/struct__IOFCOMPLETEREQUEST__STACKDATA.html#o0">00243</a>     <a class="code" href="../../d8/d1/struct__IOV__SESSION__DATA.html">PIOV_SESSION_DATA</a>       <a class="code" href="../../d4/d0/struct__IOFCOMPLETEREQUEST__STACKDATA.html#o0">IovSessionData</a>;
<a name="l00244"></a><a class="code" href="../../d4/d0/struct__IOFCOMPLETEREQUEST__STACKDATA.html#o1">00244</a>     <a class="code" href="../../d7/d1/struct__IOV__REQUEST__PACKET.html">PIOV_REQUEST_PACKET</a>     <a class="code" href="../../d4/d0/struct__IOFCOMPLETEREQUEST__STACKDATA.html#o1">IovRequestPacket</a>;
<a name="l00245"></a><a class="code" href="../../d4/d0/struct__IOFCOMPLETEREQUEST__STACKDATA.html#o2">00245</a>     BOOLEAN                 <a class="code" href="../../d4/d0/struct__IOFCOMPLETEREQUEST__STACKDATA.html#o2">IsRemoveIrp</a> ;
<a name="l00246"></a><a class="code" href="../../d4/d0/struct__IOFCOMPLETEREQUEST__STACKDATA.html#o3">00246</a>     LONG                    <a class="code" href="../../d4/d0/struct__IOFCOMPLETEREQUEST__STACKDATA.html#o3">LocationsAdvanced</a> ;
<a name="l00247"></a><a class="code" href="../../d4/d0/struct__IOFCOMPLETEREQUEST__STACKDATA.html#o4">00247</a>     ULONG                   <a class="code" href="../../d4/d0/struct__IOFCOMPLETEREQUEST__STACKDATA.html#o4">RaisedCount</a> ;
<a name="l00248"></a><a class="code" href="../../d4/d0/struct__IOFCOMPLETEREQUEST__STACKDATA.html#o5">00248</a>     KIRQL                   <a class="code" href="../../d4/d0/struct__IOFCOMPLETEREQUEST__STACKDATA.html#o5">PreviousIrql</a> ;
<a name="l00249"></a><a class="code" href="../../d4/d0/struct__IOFCOMPLETEREQUEST__STACKDATA.html#o6">00249</a>     PVOID                   <a class="code" href="../../d4/d0/struct__IOFCOMPLETEREQUEST__STACKDATA.html#o6">CompletionRoutine</a> ;
00250 
00251 } <a class="code" href="../../d4/d0/struct__IOFCOMPLETEREQUEST__STACKDATA.html">IOFCOMPLETEREQUEST_STACKDATA</a>, *<a class="code" href="../../d4/d0/struct__IOFCOMPLETEREQUEST__STACKDATA.html">PIOFCOMPLETEREQUEST_STACKDATA</a> ;
00252 
00253 <span class="preprocessor">#ifdef NO_SPECIAL_IRP</span>
00254 <span class="preprocessor"></span>
00255 <span class="preprocessor">#define SPECIALIRP_MARK_NON_TRACKABLE(Irp)</span>
00256 <span class="preprocessor"></span><span class="preprocessor">#define SPECIALIRP_IOF_CALL_1(pIrp, DeviceObject, st1)</span>
00257 <span class="preprocessor"></span><span class="preprocessor">#define SPECIALIRP_IOF_CALL_2(Irp, DeviceObject, Routine, FinalStatus, st1)</span>
00258 <span class="preprocessor"></span><span class="preprocessor">#define SPECIALIRP_IOF_COMPLETE_1(Irp, PriorityBoost, CompletionPacket)</span>
00259 <span class="preprocessor"></span><span class="preprocessor">#define SPECIALIRP_IOF_COMPLETE_2(Irp, CompletionPacket)</span>
00260 <span class="preprocessor"></span><span class="preprocessor">#define SPECIALIRP_IOF_COMPLETE_3(Irp, Routine, CompletionPacket)</span>
00261 <span class="preprocessor"></span><span class="preprocessor">#define SPECIALIRP_IOF_COMPLETE_4(Irp, ReturnedStatus, CompletionPacket)</span>
00262 <span class="preprocessor"></span><span class="preprocessor">#define SPECIALIRP_IOF_COMPLETE_5(Irp, CompletionPacket)</span>
00263 <span class="preprocessor"></span><span class="preprocessor">#define SPECIALIRP_IOP_COMPLETE_REQUEST(Irp, StackPointer)</span>
00264 <span class="preprocessor"></span><span class="preprocessor">#define SPECIALIRP_IO_CANCEL_IRP(Irp, CancelHandled, ReturnValue) DbgBreakPoint() ;</span>
00265 <span class="preprocessor"></span><span class="preprocessor">#define SPECIALIRP_IO_FREE_IRP(Irp, FreeHandled)                  DbgBreakPoint() ;</span>
00266 <span class="preprocessor"></span><span class="preprocessor">#define SPECIALIRP_IO_ALLOCATE_IRP_1(StackSize, Quota, pIrp)      DbgBreakPoint() ;</span>
00267 <span class="preprocessor"></span><span class="preprocessor">#define SPECIALIRP_IO_ALLOCATE_IRP_2(Irp)</span>
00268 <span class="preprocessor"></span><span class="preprocessor">#define SPECIALIRP_IO_INITIALIZE_IRP(Irp, PacketSize, StackSize, InitHandled) \</span>
00269 <span class="preprocessor">                                                                  DbgBreakPoint() ;</span>
00270 <span class="preprocessor"></span><span class="preprocessor">#define SPECIALIRP_IO_ATTACH_DEVICE_TO_DEVICE_STACK(NewDevice, ExistingDevice)</span>
00271 <span class="preprocessor"></span><span class="preprocessor">#define SPECIALIRP_IO_DETACH_DEVICE(TargetDevice)</span>
00272 <span class="preprocessor"></span><span class="preprocessor">#define SPECIALIRP_IO_DELETE_DEVICE(TargetDevice)</span>
00273 <span class="preprocessor"></span><span class="preprocessor">#define SPECIALIRP_WATERMARK_IRP(Irp, Flags)</span>
00274 <span class="preprocessor"></span>
00275 <span class="preprocessor">#define IOP_DIAG_THROW_CHAFF_AT_STARTED_PDO_STACK(DeviceObject)</span>
00276 <span class="preprocessor"></span>
00277 <span class="preprocessor">#else // NO_SPECIAL_IRP</span>
00278 <span class="preprocessor"></span>
00279 <span class="comment">//</span>
00280 <span class="comment">// These are in trackirp.c</span>
00281 <span class="comment">//</span>
00282 
00283 BOOLEAN
00284 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a0">FASTCALL</a>
00285 <a class="code" href="../../d9/d4/trackirp_8h.html#a107">IovpInitIrpTracking</a>(
00286     IN ULONG   Level,
00287     IN ULONG   Flags
00288     );
00289 
00290 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00291 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a0">FASTCALL</a>
00292 <a class="code" href="../../d9/d4/trackirp_8h.html#a108">IovpCallDriver1</a>(
00293     IN OUT <a class="code" href="../../d0/d2/struct__IRP.html">PIRP</a>           *IrpPointer,
00294     IN     <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> DeviceObject,
00295     IN OUT <a class="code" href="../../d3/d0/struct__IOFCALLDRIVER__STACKDATA.html">PIOFCALLDRIVER_STACKDATA</a> IofCallDriverStackData
00296     );
00297 
00298 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00299 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a0">FASTCALL</a>
00300 <a class="code" href="../../d9/d4/trackirp_8h.html#a109">IovpCallDriver2</a>(
00301     IN     <a class="code" href="../../d0/d2/struct__IRP.html">PIRP</a>               Irp,
00302     IN     <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a>     DeviceObject,
00303     IN     PVOID              Routine,
00304     IN OUT NTSTATUS           *FinalStatus,
00305     IN     <a class="code" href="../../d3/d0/struct__IOFCALLDRIVER__STACKDATA.html">PIOFCALLDRIVER_STACKDATA</a> IofCallDriverStackData
00306     );
00307 
00308 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00309 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a0">FASTCALL</a>
00310 <a class="code" href="../../d9/d4/trackirp_8h.html#a110">IovpCompleteRequest1</a>(
00311     IN     <a class="code" href="../../d0/d2/struct__IRP.html">PIRP</a>               Irp,
00312     IN     CCHAR              PriorityBoost,
00313     IN OUT PIOFCOMPLETEREQUEST_STACKDATA CompletionPacket
00314     );
00315 
00316 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00317 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a0">FASTCALL</a>
00318 <a class="code" href="../../d9/d4/trackirp_8h.html#a111">IovpCompleteRequest2</a>(
00319     IN     <a class="code" href="../../d0/d2/struct__IRP.html">PIRP</a>               Irp,
00320     IN OUT PIOFCOMPLETEREQUEST_STACKDATA CompletionPacket
00321     );
00322 
00323 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00324 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a0">FASTCALL</a>
00325 <a class="code" href="../../d9/d4/trackirp_8h.html#a112">IovpCompleteRequest3</a>(
00326     IN     <a class="code" href="../../d0/d2/struct__IRP.html">PIRP</a>               Irp,
00327     IN     PVOID              Routine,
00328     IN OUT PIOFCOMPLETEREQUEST_STACKDATA CompletionPacket
00329     );
00330 
00331 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00332 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a0">FASTCALL</a>
00333 <a class="code" href="../../d9/d4/trackirp_8h.html#a113">IovpCompleteRequest4</a>(
00334     IN     <a class="code" href="../../d0/d2/struct__IRP.html">PIRP</a>               Irp,
00335     IN     NTSTATUS           ReturnedStatus,
00336     IN OUT PIOFCOMPLETEREQUEST_STACKDATA CompletionPacket
00337     );
00338 
00339 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00340 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a0">FASTCALL</a>
00341 <a class="code" href="../../d9/d4/trackirp_8h.html#a114">IovpCompleteRequest5</a>(
00342     IN     <a class="code" href="../../d0/d2/struct__IRP.html">PIRP</a>               Irp,
00343     IN OUT PIOFCOMPLETEREQUEST_STACKDATA CompletionPacket
00344     );
00345 
00346 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00347 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a0">FASTCALL</a>
00348 <a class="code" href="../../d9/d4/trackirp_8h.html#a115">IovpCompleteRequestApc</a>(
00349     IN     <a class="code" href="../../d0/d2/struct__IRP.html">PIRP</a>               Irp,
00350     IN     PVOID              BestStackOffset
00351     );
00352 
00353 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00354 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a0">FASTCALL</a>
00355 <a class="code" href="../../d9/d4/trackirp_8h.html#a116">IovpCancelIrp</a>(
00356     IN     <a class="code" href="../../d0/d2/struct__IRP.html">PIRP</a>               Irp,
00357     IN OUT PBOOLEAN           CancelHandled,
00358     IN OUT PBOOLEAN           ReturnValue
00359     );
00360 
00361 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00362 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a0">FASTCALL</a>
00363 <a class="code" href="../../d9/d4/trackirp_8h.html#a117">IovpFreeIrp</a>(
00364     IN     <a class="code" href="../../d0/d2/struct__IRP.html">PIRP</a>               Irp,
00365     IN OUT PBOOLEAN           FreeHandled
00366     );
00367 
00368 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00369 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a0">FASTCALL</a>
00370 <a class="code" href="../../d9/d4/trackirp_8h.html#a118">IovpAllocateIrp1</a>(
00371     IN     CCHAR              StackSize,
00372     IN     BOOLEAN            ChargeQuota,
00373     IN OUT <a class="code" href="../../d0/d2/struct__IRP.html">PIRP</a>               *IrpPointer
00374     );
00375 
00376 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00377 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a0">FASTCALL</a>
00378 <a class="code" href="../../d9/d4/trackirp_8h.html#a119">IovpAllocateIrp2</a>(
00379     IN     <a class="code" href="../../d0/d2/struct__IRP.html">PIRP</a>               Irp
00380     );
00381 
00382 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00383 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a0">FASTCALL</a>
00384 <a class="code" href="../../d9/d4/trackirp_8h.html#a120">IovpInitializeIrp</a>(
00385     IN OUT <a class="code" href="../../d0/d2/struct__IRP.html">PIRP</a>               Irp,
00386     IN     USHORT             PacketSize,
00387     IN     CCHAR              StackSize,
00388     IN OUT PBOOLEAN           InitializeHandled
00389     );
00390 
00391 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00392 <a class="code" href="../../d9/d4/trackirp_8h.html#a121">IovpExamineIrpStackForwarding</a>(
00393     IN OUT  <a class="code" href="../../d7/d1/struct__IOV__REQUEST__PACKET.html">PIOV_REQUEST_PACKET</a>  IovPacket,
00394     IN      BOOLEAN              IsNewSession,
00395     IN      ULONG                ForwardMethod,
00396     IN      <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a>       DeviceObject,
00397     IN      <a class="code" href="../../d0/d2/struct__IRP.html">PIRP</a>                 Irp,
00398     IN OUT  <a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html">PIO_STACK_LOCATION</a>  *IoCurrentStackLocation,
00399     OUT     <a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html">PIO_STACK_LOCATION</a>  *IoLastStackLocation,
00400     OUT     ULONG               *StackLocationsAdvanced
00401     );
00402 
00403 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
00404 <a class="code" href="../../d9/d4/trackirp_8h.html#a122">IovpSwapSurrogateIrp</a>(
00405     IN <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> DeviceObject,
00406     IN <a class="code" href="../../d0/d2/struct__IRP.html">PIRP</a> Irp,
00407     IN PVOID Context
00408     );
00409 
00410 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00411 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a0">FASTCALL</a>
00412 <a class="code" href="../../d9/d4/trackirp_8h.html#a123">IovpExamineDevObjForwarding</a>(
00413     IN  <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> DeviceBeingCalled,
00414     IN  <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> DeviceLastCalled,
00415     OUT PULONG         ForwardingTechnique
00416     );
00417 
00418 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00419 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a0">FASTCALL</a>
00420 <a class="code" href="../../d9/d4/trackirp_8h.html#a124">IovpFinalizeIrpSettings</a>(
00421     IN OUT <a class="code" href="../../d7/d1/struct__IOV__REQUEST__PACKET.html">PIOV_REQUEST_PACKET</a>   IrpTrackingData,
00422     IN BOOLEAN                   SurrogateIrpSwapped
00423     );
00424 
00425 <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a>
00426 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a0">FASTCALL</a>
00427 <a class="code" href="../../d9/d4/trackirp_8h.html#a125">IovpGetDeviceAttachedTo</a>(
00428     IN <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> DeviceObject
00429     );
00430 
00431 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
00432 <a class="code" href="../../d9/d4/trackirp_8h.html#a126">IovpInternalCompletionTrap</a>(
00433     IN <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> DeviceObject,
00434     IN <a class="code" href="../../d0/d2/struct__IRP.html">PIRP</a> Irp,
00435     IN PVOID Context
00436     );
00437 
00438 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
00439 <a class="code" href="../../d9/d4/trackirp_8h.html#a127">IovpInternalDeferredCompletion</a>(
00440     IN <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> DeviceObject,
00441     IN <a class="code" href="../../d0/d2/struct__IRP.html">PIRP</a> Irp,
00442     IN PVOID Context
00443     );
00444 
00445 <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a>
00446 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a0">FASTCALL</a>
00447 <a class="code" href="../../d9/d4/trackirp_8h.html#a128">IovpGetLowestDevice</a>(
00448     IN <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> DeviceObject
00449     );
00450 
00451 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00452 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a0">FASTCALL</a>
00453 <a class="code" href="../../d9/d4/trackirp_8h.html#a129">IovpAssertNonLegacyDevice</a>(
00454     IN <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> DeviceObject,
00455     IN ULONG StackFramesToSkip,
00456     IN PUCHAR FailureTxt
00457     );
00458 
00459 BOOLEAN
00460 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a0">FASTCALL</a>
00461 <a class="code" href="../../d9/d4/trackirp_8h.html#a130">IovpIsInFdoStack</a>(
00462     IN <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> DeviceObject
00463     );
00464 
00465 BOOLEAN
00466 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a0">FASTCALL</a>
00467 <a class="code" href="../../d9/d4/trackirp_8h.html#a131">IovpDoAssertIrps</a>(
00468     VOID
00469     );
00470 
00471 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00472 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a0">FASTCALL</a>
00473 <a class="code" href="../../d9/d4/trackirp_8h.html#a132">IovpSeedStack</a>(
00474     VOID
00475     );
00476 
00477 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00478 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a0">FASTCALL</a>
00479 <a class="code" href="../../d9/d4/trackirp_8h.html#a133">IovpSeedOnePage</a>(
00480     VOID
00481     );
00482 
00483 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00484 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a0">FASTCALL</a>
00485 <a class="code" href="../../d9/d4/trackirp_8h.html#a134">IovpSeedTwoPages</a>(
00486     VOID
00487     );
00488 
00489 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00490 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a0">FASTCALL</a>
00491 <a class="code" href="../../d9/d4/trackirp_8h.html#a135">IovpSeedThreePages</a>(
00492     VOID
00493     );
00494 
00495 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00496 <a class="code" href="../../d9/d4/trackirp_8h.html#a136">IovpInternalCompleteAfterWait</a>(
00497     IN PVOID Context
00498     );
00499 
00500 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00501 <a class="code" href="../../d9/d4/trackirp_8h.html#a137">IovpInternalCompleteAtDPC</a>(
00502     IN <a class="code" href="../../d1/d6/struct__KDPC.html">PKDPC</a> Dpc,
00503     IN PVOID DeferredContext,
00504     IN PVOID SystemArgument1,
00505     IN PVOID SystemArgument2
00506     );
00507 
00508 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00509 <a class="code" href="../../d9/d4/trackirp_8h.html#a138">IovpAttachDeviceToDeviceStack</a>(
00510     IN <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> NewDevice,
00511     IN <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> ExistingDevice
00512     );
00513 
00514 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00515 <a class="code" href="../../d9/d4/trackirp_8h.html#a139">IovpDetachDevice</a>(
00516     IN <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> LowerDevice
00517     );
00518 
00519 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00520 <a class="code" href="../../d9/d4/trackirp_8h.html#a140">IovpDeleteDevice</a>(
00521     IN <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> Device
00522     );
00523 
00524 BOOLEAN
00525 <a class="code" href="../../d9/d4/trackirp_8h.html#a141">IovpIsInterestingStack</a>(
00526     IN <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> DeviceObject
00527     );
00528 
00529 BOOLEAN
00530 <a class="code" href="../../d9/d4/trackirp_8h.html#a142">IovpIsInterestingDriver</a>(
00531     IN <a class="code" href="../../d4/d9/struct__DRIVER__OBJECT.html">PDRIVER_OBJECT</a> DriverObject
00532     );
00533 
00534 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00535 <a class="code" href="../../d9/d4/trackirp_8h.html#a143">IovpReexamineAllStacks</a>(
00536     VOID
00537     );
00538 
00539 BOOLEAN
00540 <a class="code" href="../../d9/d4/trackirp_8h.html#a144">IovpEnumDevObjCallback</a>(
00541     IN PVOID Object,
00542     IN PUNICODE_STRING ObjectName,
00543     IN ULONG HandleCount,
00544     IN ULONG PointerCount,
00545     IN PVOID Context
00546     );
00547 
00548 BOOLEAN
00549 <a class="code" href="../../d9/d4/trackirp_8h.html#a145">IovpAdvanceStackDownwards</a>(
00550     IN  <a class="code" href="../../d9/d1/struct__IOV__STACK__LOCATION.html">PIOV_STACK_LOCATION</a>   StackDataArray,
00551     IN  CCHAR                 CurrentLocation,
00552     IN  <a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html">PIO_STACK_LOCATION</a>    IrpSp,
00553     IN  <a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html">PIO_STACK_LOCATION</a>    IrpLastSp OPTIONAL,
00554     IN  ULONG                 LocationsAdvanced,
00555     IN  BOOLEAN               IsNewRequest,
00556     IN  BOOLEAN               MarkAsTaken,
00557     OUT <a class="code" href="../../d9/d1/struct__IOV__STACK__LOCATION.html">PIOV_STACK_LOCATION</a>   *StackLocationInfo
00558     );
00559 
<a name="l00560"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a69">00560</a> <span class="preprocessor">#define SPECIALIRP_MARK_NON_TRACKABLE(Irp) { \</span>
00561 <span class="preprocessor">    (Irp)-&gt;Flags |= IRPFLAG_EXAMINE_NOT_TRACKED; \</span>
00562 <span class="preprocessor">}</span>
00563 <span class="preprocessor"></span>
<a name="l00564"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a70">00564</a> <span class="preprocessor">#define SPECIALIRP_IOF_CALL_1(pIrp, DeviceObject, st1) \</span>
00565 <span class="preprocessor">{\</span>
00566 <span class="preprocessor">    if (IovpTrackingFlags &amp;&amp; IovpDoAssertIrps()) { \</span>
00567 <span class="preprocessor">        IovpCallDriver1((pIrp), (DeviceObject), (st1));\</span>
00568 <span class="preprocessor">        IovpSeedStack() ; \</span>
00569 <span class="preprocessor">    } else { \</span>
00570 <span class="preprocessor">        (st1)-&gt;IovSessionData = NULL ; \</span>
00571 <span class="preprocessor">        SPECIALIRP_MARK_NON_TRACKABLE(*pIrp); \</span>
00572 <span class="preprocessor">    } \</span>
00573 <span class="preprocessor">}</span>
00574 <span class="preprocessor"></span>
<a name="l00575"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a71">00575</a> <span class="preprocessor">#define SPECIALIRP_IOF_CALL_2(Irp, DeviceObject, Routine, FinalStatus, st1) \</span>
00576 <span class="preprocessor">{\</span>
00577 <span class="preprocessor">    if (IovpTrackingFlags &amp;&amp; IovpDoAssertIrps()) { \</span>
00578 <span class="preprocessor">        IovpCallDriver2((Irp), (DeviceObject), (Routine), (FinalStatus), (st1));\</span>
00579 <span class="preprocessor">    } \</span>
00580 <span class="preprocessor">}</span>
00581 <span class="preprocessor"></span>
<a name="l00582"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a72">00582</a> <span class="preprocessor">#define SPECIALIRP_IOF_COMPLETE_1(Irp, PriorityBoost, CompletionPacket) \</span>
00583 <span class="preprocessor">{\</span>
00584 <span class="preprocessor">    if (IovpTrackingFlags &amp;&amp; IovpDoAssertIrps()) { \</span>
00585 <span class="preprocessor">        IovpCompleteRequest1((Irp), (PriorityBoost), (CompletionPacket));\</span>
00586 <span class="preprocessor">    } else { \</span>
00587 <span class="preprocessor">        (CompletionPacket)-&gt;IovSessionData  = NULL ; \</span>
00588 <span class="preprocessor">    } \</span>
00589 <span class="preprocessor">}</span>
00590 <span class="preprocessor"></span>
<a name="l00591"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a73">00591</a> <span class="preprocessor">#define SPECIALIRP_IOF_COMPLETE_2(Irp, CompletionPacket) \</span>
00592 <span class="preprocessor">{\</span>
00593 <span class="preprocessor">    if (IovpTrackingFlags &amp;&amp; IovpDoAssertIrps()) { \</span>
00594 <span class="preprocessor">        IovpCompleteRequest2((Irp), (CompletionPacket));\</span>
00595 <span class="preprocessor">    } \</span>
00596 <span class="preprocessor">}</span>
00597 <span class="preprocessor"></span>
<a name="l00598"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a74">00598</a> <span class="preprocessor">#define SPECIALIRP_IOF_COMPLETE_3(Irp, Routine, CompletionPacket) \</span>
00599 <span class="preprocessor">{\</span>
00600 <span class="preprocessor">    if (IovpTrackingFlags &amp;&amp; IovpDoAssertIrps()) { \</span>
00601 <span class="preprocessor">        IovpCompleteRequest3((Irp), (Routine), (CompletionPacket));\</span>
00602 <span class="preprocessor">    } \</span>
00603 <span class="preprocessor">}</span>
00604 <span class="preprocessor"></span>
<a name="l00605"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a75">00605</a> <span class="preprocessor">#define SPECIALIRP_IOF_COMPLETE_4(Irp, ReturnedStatus, CompletionPacket) \</span>
00606 <span class="preprocessor">{\</span>
00607 <span class="preprocessor">    if (IovpTrackingFlags &amp;&amp; IovpDoAssertIrps()) { \</span>
00608 <span class="preprocessor">        IovpCompleteRequest4((Irp), (ReturnedStatus), (CompletionPacket));\</span>
00609 <span class="preprocessor">    } \</span>
00610 <span class="preprocessor">}</span>
00611 <span class="preprocessor"></span>
<a name="l00612"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a76">00612</a> <span class="preprocessor">#define SPECIALIRP_IOF_COMPLETE_5(Irp, CompletionPacket) \</span>
00613 <span class="preprocessor">{\</span>
00614 <span class="preprocessor">    if (IovpTrackingFlags &amp;&amp; IovpDoAssertIrps()) { \</span>
00615 <span class="preprocessor">        IovpCompleteRequest5((Irp), (CompletionPacket));\</span>
00616 <span class="preprocessor">    } \</span>
00617 <span class="preprocessor">}</span>
00618 <span class="preprocessor"></span>
<a name="l00619"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a77">00619</a> <span class="preprocessor">#define SPECIALIRP_IO_CANCEL_IRP(Irp, CancelHandled, ReturnValue) \</span>
00620 <span class="preprocessor">{\</span>
00621 <span class="preprocessor">    if (IovpTrackingFlags &amp;&amp; IovpDoAssertIrps()) { \</span>
00622 <span class="preprocessor">        IovpCancelIrp((Irp), (CancelHandled), (ReturnValue));\</span>
00623 <span class="preprocessor">    } else { \</span>
00624 <span class="preprocessor">        *(CancelHandled) = FALSE ; \</span>
00625 <span class="preprocessor">    } \</span>
00626 <span class="preprocessor">}</span>
00627 <span class="preprocessor"></span>
<a name="l00628"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a78">00628</a> <span class="preprocessor">#define IOP_DIAG_THROW_CHAFF_AT_STARTED_PDO_STACK(DeviceObject) \</span>
00629 <span class="preprocessor">{\</span>
00630 <span class="preprocessor">    if (IovpTrackingFlags &amp;&amp; IovpDoAssertIrps()) { \</span>
00631 <span class="preprocessor">        IovpThrowChaffAtStartedPdoStack(DeviceObject);\</span>
00632 <span class="preprocessor">    }\</span>
00633 <span class="preprocessor">}</span>
00634 <span class="preprocessor"></span>
<a name="l00635"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a79">00635</a> <span class="preprocessor">#define SPECIALIRP_IO_FREE_IRP(Irp, FreeHandled) \</span>
00636 <span class="preprocessor">{\</span>
00637 <span class="preprocessor">    if (IovpTrackingFlags &amp;&amp; IovpDoAssertIrps()) { \</span>
00638 <span class="preprocessor">        IovpFreeIrp((Irp), (FreeHandled));\</span>
00639 <span class="preprocessor">    } else { \</span>
00640 <span class="preprocessor">        *(FreeHandled) = FALSE ; \</span>
00641 <span class="preprocessor">    } \</span>
00642 <span class="preprocessor">}</span>
00643 <span class="preprocessor"></span>
<a name="l00644"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a80">00644</a> <span class="preprocessor">#define SPECIALIRP_IO_ALLOCATE_IRP_1(StackSize, Quota, IrpPointer) \</span>
00645 <span class="preprocessor">{\</span>
00646 <span class="preprocessor">    if (IovpTrackingFlags &amp;&amp; IovpDoAssertIrps()) { \</span>
00647 <span class="preprocessor">        IovpAllocateIrp1((StackSize), (Quota), (IrpPointer));\</span>
00648 <span class="preprocessor">    } else { \</span>
00649 <span class="preprocessor">        *(IrpPointer) = NULL ; \</span>
00650 <span class="preprocessor">    } \</span>
00651 <span class="preprocessor">}</span>
00652 <span class="preprocessor"></span>
<a name="l00653"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a81">00653</a> <span class="preprocessor">#define SPECIALIRP_IO_ALLOCATE_IRP_2(Irp) \</span>
00654 <span class="preprocessor">{\</span>
00655 <span class="preprocessor">    if (IovpTrackingFlags &amp;&amp; IovpDoAssertIrps()) { \</span>
00656 <span class="preprocessor">        IovpAllocateIrp2(Irp);\</span>
00657 <span class="preprocessor">    }\</span>
00658 <span class="preprocessor">}</span>
00659 <span class="preprocessor"></span>
<a name="l00660"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a82">00660</a> <span class="preprocessor">#define SPECIALIRP_IO_INITIALIZE_IRP(Irp, PacketSize, StackSize, InitHandled) \</span>
00661 <span class="preprocessor">{\</span>
00662 <span class="preprocessor">    if (IovpTrackingFlags &amp;&amp; IovpDoAssertIrps()) { \</span>
00663 <span class="preprocessor">        IovpInitializeIrp((Irp), (PacketSize), (StackSize), (InitHandled));\</span>
00664 <span class="preprocessor">    } else { \</span>
00665 <span class="preprocessor">        *(InitHandled) = FALSE ; \</span>
00666 <span class="preprocessor">    }\</span>
00667 <span class="preprocessor">}</span>
00668 <span class="preprocessor"></span>
<a name="l00669"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a83">00669</a> <span class="preprocessor">#define SPECIALIRP_IO_DELETE_DEVICE(Device) \</span>
00670 <span class="preprocessor">{\</span>
00671 <span class="preprocessor">    if (IovpTrackingFlags &amp;&amp; IovpDoAssertIrps()) { \</span>
00672 <span class="preprocessor">        IovpDeleteDevice(Device);\</span>
00673 <span class="preprocessor">    }\</span>
00674 <span class="preprocessor">}</span>
00675 <span class="preprocessor"></span>
<a name="l00676"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a84">00676</a> <span class="preprocessor">#define SPECIALIRP_IO_ATTACH_DEVICE_TO_DEVICE_STACK(NewDevice, ExistingDevice) \</span>
00677 <span class="preprocessor">{\</span>
00678 <span class="preprocessor">    if (IovpTrackingFlags &amp;&amp; IovpDoAssertIrps()) { \</span>
00679 <span class="preprocessor">        IovpAttachDeviceToDeviceStack(NewDevice, ExistingDevice);\</span>
00680 <span class="preprocessor">    }\</span>
00681 <span class="preprocessor">}</span>
00682 <span class="preprocessor"></span>
<a name="l00683"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a85">00683</a> <span class="preprocessor">#define SPECIALIRP_IO_DETACH_DEVICE(TargetDevice) \</span>
00684 <span class="preprocessor">{\</span>
00685 <span class="preprocessor">    if (IovpTrackingFlags &amp;&amp; IovpDoAssertIrps()) { \</span>
00686 <span class="preprocessor">        IovpDetachDevice(TargetDevice);\</span>
00687 <span class="preprocessor">    }\</span>
00688 <span class="preprocessor">}</span>
00689 <span class="preprocessor"></span>
<a name="l00690"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a86">00690</a> <span class="preprocessor">#define SPECIALIRP_WATERMARK_IRP(Irp, Flags) \</span>
00691 <span class="preprocessor">{\</span>
00692 <span class="preprocessor">    if (IovpTrackingFlags &amp;&amp; IovpDoAssertIrps()) { \</span>
00693 <span class="preprocessor">        IovpWatermarkIrp(Irp, Flags);\</span>
00694 <span class="preprocessor">    }\</span>
00695 <span class="preprocessor">}</span>
00696 <span class="preprocessor"></span>
<a name="l00697"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a87">00697</a> <span class="preprocessor">#define SPECIALIRP_IOP_COMPLETE_REQUEST(Irp, StackPointer) \</span>
00698 <span class="preprocessor">{\</span>
00699 <span class="preprocessor">    if (IovpTrackingFlags &amp;&amp; IovpDoAssertIrps()) { \</span>
00700 <span class="preprocessor">        IovpCompleteRequestApc(Irp, StackPointer);\</span>
00701 <span class="preprocessor">    }\</span>
00702 <span class="preprocessor">}</span>
00703 <span class="preprocessor"></span>
00704 <span class="preprocessor">#if DBG</span>
00705 <span class="preprocessor"></span><span class="preprocessor">#define TRACKIRP_DBGPRINT(txt,level) \</span>
00706 <span class="preprocessor">{ \</span>
00707 <span class="preprocessor">    if (IovpIrpTrackingSpewLevel&gt;(level)) { \</span>
00708 <span class="preprocessor">        DbgPrint##txt ; \</span>
00709 <span class="preprocessor">    }\</span>
00710 <span class="preprocessor">}</span>
00711 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l00712"></a><a class="code" href="../../d9/d4/trackirp_8h.html#a88">00712</a> <span class="preprocessor"></span><span class="preprocessor">#define TRACKIRP_DBGPRINT(txt,level)</span>
00713 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00714 <span class="preprocessor"></span>
00715 <span class="preprocessor">#endif // NO_SPECIAL_IRP</span>
00716 <span class="preprocessor"></span>
00717 <span class="preprocessor">#endif // _TRACKIRP_H_</span>
00718 <span class="preprocessor"></span>
</div></pre><hr size="1"><address style="align: right;"><small>Generated on Sat May 15 19:42:03 2004 for test by
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>

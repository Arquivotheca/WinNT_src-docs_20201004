<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>test: makefile.inc Source File</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="../../main.html">Main&nbsp;Page</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Class&nbsp;List</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Class&nbsp;Members</a> | <a class="qindex" href="../../globals.html">File&nbsp;Members</a></div>
<h1>makefile.inc</h1><a href="../../d9/d9/ke_2up_2makefile_8inc.html">Go to the documentation of this file.</a><pre class="fragment"><div>00001 
00002 SERVICES_DIR=$(TARGET_DIRECTORY)
00003 SERVICES_TAB=$(SERVICES_DIR)\services.tab
00004 
00005 $(SERVICES_TAB): ..\services.tab
00006     @echo Creating $@ from $**
00007     $(C_PREPROCESSOR) $** &gt; $@
00008 
00009 obj\$(TARGET_DIRECTORY)\sysstubs.obj: $(TARGET_DIRECTORY)\sysstubs.$(ASM_SUFFIX)
00010 
00011 obj\$(TARGET_DIRECTORY)\systable.obj: $(TARGET_DIRECTORY)\systable.$(ASM_SUFFIX)
00012 
00013 $(TARGET_DIRECTORY)\sysstubs.$(ASM_SUFFIX) $(TARGET_DIRECTORY)\systable.$(ASM_SUFFIX): $(SERVICES_TAB) ..\$(TARGET_DIRECTORY)\table.stb ..\$(TARGET_DIRECTORY)\services.stb
00014     gensrv -d $(TARGET_DIRECTORY) -e $(ASM_SUFFIX) -<a class="code" href="../../d2/d9/ps2_8c.html#a244">g</a> $(SERVICES_DIR) $(TARGET_BRACES) -a . -s ..
00015 
00016 <span class="preprocessor">#</span>
00017 <span class="preprocessor"></span><span class="preprocessor"># "nmake genxx" will generate platform-dependent include files</span>
00018 <span class="preprocessor"></span><span class="preprocessor">#</span>
00019 <span class="preprocessor"></span>
00020 !<span class="keywordflow">if</span> <span class="stringliteral">"$(TARGET_DIRECTORY)"</span>==<span class="stringliteral">"alpha"</span> || <span class="stringliteral">"$(TARGET_DIRECTORY)"</span>==<span class="stringliteral">"axp64"</span>
00021 KS_NAME=ksp$(TARGET_DIRECTORY)
00022 HAL_NAME=halp$(TARGET_DIRECTORY)
00023 
00024 !<span class="keywordflow">else</span> <span class="keywordflow">if</span> <span class="stringliteral">"$(TARGET_DIRECTORY)"</span>==<span class="stringliteral">"i386"</span>
00025 HAL_NAME=hal386
00026 KS_NAME=ks386
00027 
00028 !<span class="keywordflow">else</span>
00029 HAL_NAME=hal$(TARGET_DIRECTORY)
00030 KS_NAME=ks$(TARGET_DIRECTORY)
00031 !endif
00032 
00033 KS_TARGET =$(_NTROOT)\<span class="keyword">public</span>\sdk\inc\$(KS_NAME).$(ASM_INCLUDE_SUFFIX)
00034 HAL_TARGET=$(_NTROOT)\<span class="keyword">private</span>\ntos\inc\$(HAL_NAME).$(ASM_INCLUDE_SUFFIX)
00035 
00036 genxx: $(KS_TARGET) $(HAL_TARGET)
00037 
00038 <span class="preprocessor">#</span>
00039 <span class="preprocessor"></span><span class="preprocessor"># If the following invocation of genxx fails, make sure you have a</span>
00040 <span class="preprocessor"></span><span class="preprocessor"># current version of genxx.</span>
00041 <span class="preprocessor"></span><span class="preprocessor">#</span>
00042 <span class="preprocessor"></span>
00043 $(KS_TARGET) $(HAL_TARGET): \
00044 !<span class="keywordflow">if</span> $(AXP64)
00045         ..\alpha\genalpha.m4 \
00046 !endif  
00047         ..\$(TARGET_DIRECTORY)\gen$(TARGET_DIRECTORY).m4 \
00048         ..\genxx.h \
00049         ..\genxx.inc \
00050         $(_NTROOT)\<span class="keyword">public</span>\ddk\inc\ntddk.h
00051     set PASS0ONLY=
00052     <span class="keywordflow">if</span> not exist obj\$(TARGET_DIRECTORY) mkdir obj\$(TARGET_DIRECTORY)
00053     -erase obj\$(TARGET_DIRECTORY)\gen$(TARGET_DIRECTORY).obj
00054     -erase ..\$(TARGET_DIRECTORY)\gen$(TARGET_DIRECTORY).c
00055     m4 &lt; ..\$(TARGET_DIRECTORY)\gen$(TARGET_DIRECTORY).m4 \
00056        &gt; ..\$(TARGET_DIRECTORY)\gen$(TARGET_DIRECTORY).c
00057     nmake -l obj\$(TARGET_DIRECTORY)\gen$(TARGET_DIRECTORY).obj NTNOPCH=1
00058     genxx -$(TARGET_DIRECTORY)
00059 
00060 
</div></pre><hr size="1"><address style="align: right;"><small>Generated on Sat May 15 19:40:41 2004 for test by
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>

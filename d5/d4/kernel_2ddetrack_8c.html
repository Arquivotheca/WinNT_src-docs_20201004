<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>test: kernel/ddetrack.c File Reference</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="../../main.html">Main&nbsp;Page</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Class&nbsp;List</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Class&nbsp;Members</a> | <a class="qindex" href="../../globals.html">File&nbsp;Members</a></div>
<h1>ddetrack.c File Reference</h1><code>#include "<a class="el" href="../../d1/d3/w32_2ntuser_2kernel_2precomp_8h-source.html">precomp.h</a>"</code><br>

<p>
<a href="../../d6/d3/kernel_2ddetrack_8c-source.html">Go to the source code of this file.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d4/kernel_2ddetrack_8c.html#a0">TRACE_DDE</a>(str)&nbsp;&nbsp;&nbsp;TAGMSG0(DBGTAG_DDE, str)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d4/kernel_2ddetrack_8c.html#a1">TRACE_DDE1</a>(s, a)&nbsp;&nbsp;&nbsp;TAGMSG1(DBGTAG_DDE, (s), (a))</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d4/kernel_2ddetrack_8c.html#a2">TRACE_DDE2</a>(s, a, b)&nbsp;&nbsp;&nbsp;TAGMSG2(DBGTAG_DDE, (s), (a), (b))</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d4/kernel_2ddetrack_8c.html#a3">TRACE_DDE3</a>(s, a, b, <a class="el" href="../../d7/d1/genuedef_8c.html#a8">c</a>)&nbsp;&nbsp;&nbsp;TAGMSG3(DBGTAG_DDE, (s), (a), (b), (<a class="el" href="../../d7/d1/genuedef_8c.html#a8">c</a>))</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d4/kernel_2ddetrack_8c.html#a4">ValidatePublicObjectList</a>()</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d4/kernel_2ddetrack_8c.html#a5">TraceDdeMsg</a>(m, h1, h2, <a class="el" href="../../d7/d1/genuedef_8c.html#a8">c</a>)</td></tr>

<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d4/kernel_2ddetrack_8c.html#a20">NewConversation</a> (<a class="el" href="../../d6/d2/structtagDDECONV.html">PDDECONV</a> *ppdcNewClient, <a class="el" href="../../d6/d2/structtagDDECONV.html">PDDECONV</a> *ppdcNewServer, <a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwndClient, <a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwndServer)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d6/d2/structtagDDECONV.html">PDDECONV</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d4/kernel_2ddetrack_8c.html#a21">FindDdeConv</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwndProp, <a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwndPartner)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d4/kernel_2ddetrack_8c.html#a22">AddConvProp</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwndUs, <a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwndThem, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> flags, <a class="el" href="../../d6/d2/structtagDDECONV.html">PDDECONV</a> pdcNew, <a class="el" href="../../d6/d2/structtagDDECONV.html">PDDECONV</a> pdcPartner)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d4/kernel_2ddetrack_8c.html#a23">Unadvise</a> (<a class="el" href="../../d6/d2/structtagDDECONV.html">PDDECONV</a> pDdeConv)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d4/kernel_2ddetrack_8c.html#a24">Request</a> (<a class="el" href="../../d6/d2/structtagDDECONV.html">PDDECONV</a> pDdeConv)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d4/kernel_2ddetrack_8c.html#a25">SpontaneousTerminate</a> (PDWORD pmessage, <a class="el" href="../../d6/d2/structtagDDECONV.html">PDDECONV</a> pDdeConv)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>HANDLE&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d4/kernel_2ddetrack_8c.html#a26">AnticipatePost</a> (<a class="el" href="../../d6/d2/structtagDDECONV.html">PDDECONV</a> pDdeConv, <a class="el" href="../../d4/d1/userk_8h.html#a931">FNDDERESPONSE</a> fnResponse, HANDLE hClient, HANDLE hServer, <a class="el" href="../../d7/d8/structtagINTDDEINFO.html">PINTDDEINFO</a> pIntDdeInfo, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> flags)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d1/d0/structtagXSTATE.html">PXSTATE</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d4/kernel_2ddetrack_8c.html#a27">Createpxs</a> (<a class="el" href="../../d4/d1/userk_8h.html#a931">FNDDERESPONSE</a> fnResponse, HANDLE hClient, HANDLE hServer, <a class="el" href="../../d7/d8/structtagINTDDEINFO.html">PINTDDEINFO</a> pIntDdeInfo, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> flags)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d4/kernel_2ddetrack_8c.html#a28">AbnormalDDEPost</a> (<a class="el" href="../../d6/d2/structtagDDECONV.html">PDDECONV</a> pDdeConv, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> message)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d4/kernel_2ddetrack_8c.html#a29">xxxCopyDdeIn</a> (HANDLE hSrc, PDWORD pflags, PHANDLE phDirect, <a class="el" href="../../d7/d8/structtagINTDDEINFO.html">PINTDDEINFO</a> *ppi)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d4/kernel_2ddetrack_8c.html#a30">xxxCopyAckIn</a> (PDWORD pmessage, LPARAM *plParam, <a class="el" href="../../d6/d2/structtagDDECONV.html">PDDECONV</a> pDdeConv, <a class="el" href="../../d7/d8/structtagINTDDEINFO.html">PINTDDEINFO</a> *ppIntDdeInfo)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>HANDLE&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d4/kernel_2ddetrack_8c.html#a31">xxxCopyDDEOut</a> (<a class="el" href="../../d7/d8/structtagINTDDEINFO.html">PINTDDEINFO</a> pIntDdeInfo, PHANDLE phDirect)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d4/kernel_2ddetrack_8c.html#a32">FreeListAdd</a> (<a class="el" href="../../d6/d2/structtagDDECONV.html">PDDECONV</a> pDdeConv, HANDLE hClient, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> flags)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d4/kernel_2ddetrack_8c.html#a33">xxxFreeListFree</a> (<a class="el" href="../../d4/d5/structtagFREELIST.html">PFREELIST</a> pfl)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d4/kernel_2ddetrack_8c.html#a34">PopState</a> (<a class="el" href="../../d6/d2/structtagDDECONV.html">PDDECONV</a> pDdeConv)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d6/d2/structtagDDECONV.html">PDDECONV</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d4/kernel_2ddetrack_8c.html#a35">UnlinkConv</a> (<a class="el" href="../../d6/d2/structtagDDECONV.html">PDDECONV</a> pDdeConv)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d4/kernel_2ddetrack_8c.html#a36">FreeDDEHandle</a> (<a class="el" href="../../d6/d2/structtagDDECONV.html">PDDECONV</a> pDdeConv, HANDLE hClient, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> flags)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d4/kernel_2ddetrack_8c.html#a37">ClientFreeDDEHandle</a> (HANDLE hClient, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> flags)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d4/kernel_2ddetrack_8c.html#a38">ClientGetDDEFlags</a> (HANDLE hClient, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> flags)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d4/kernel_2ddetrack_8c.html#a39">xxxClientCopyDDEIn1</a> (HANDLE hClient, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> flags, <a class="el" href="../../d7/d8/structtagINTDDEINFO.html">PINTDDEINFO</a> *ppi)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>HANDLE&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d4/kernel_2ddetrack_8c.html#a40">xxxClientCopyDDEOut1</a> (<a class="el" href="../../d7/d8/structtagINTDDEINFO.html">PINTDDEINFO</a> pIntDdeInfo)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d4/kernel_2ddetrack_8c.html#a41">xxxClientCopyDDEOut2</a> (<a class="el" href="../../d7/d8/structtagINTDDEINFO.html">PINTDDEINFO</a> pIntDdeInfo)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d6/d4/structtagPUBOBJ.html">PPUBOBJ</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d4/kernel_2ddetrack_8c.html#a42">IsObjectPublic</a> (HANDLE hObj)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d4/kernel_2ddetrack_8c.html#a43">AddPublicObject</a> (UINT <a class="el" href="../../d8/d3/rtvbatcr_8c.html#a8">format</a>, HANDLE hObj, W32PID pid)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d4/kernel_2ddetrack_8c.html#a44">RemovePublicObject</a> (UINT <a class="el" href="../../d8/d3/rtvbatcr_8c.html#a8">format</a>, HANDLE hObj)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d4/kernel_2ddetrack_8c.html#a45">GiveObject</a> (UINT <a class="el" href="../../d8/d3/rtvbatcr_8c.html#a8">format</a>, HANDLE hObj, W32PID pid)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d4/kernel_2ddetrack_8c.html#a46">xxxDDETrackSendHook</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwndTo, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> message, WPARAM wParam, LPARAM lParam)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d4/kernel_2ddetrack_8c.html#a47">xxxDDETrackPostHook</a> (<a class="el" href="../../d9/d5/ndismain_8h.html#a266">PUINT</a> pmessage, <a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwndTo, WPARAM wParam, LPARAM *plParam, BOOL fSent)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d4/kernel_2ddetrack_8c.html#a48">xxxCleanupDdeConv</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwndProp)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d4/kernel_2ddetrack_8c.html#a49">xxxDDETrackGetMessageHook</a> (PMSG pmsg)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d4/kernel_2ddetrack_8c.html#a50">xxxDDETrackWindowDying</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, <a class="el" href="../../d6/d2/structtagDDECONV.html">PDDECONV</a> pDdeConv)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d4/kernel_2ddetrack_8c.html#a51">xxxUnexpectedServerPost</a> (PDWORD pmessage, LPARAM *plParam, <a class="el" href="../../d6/d2/structtagDDECONV.html">PDDECONV</a> pDdeConv)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d4/kernel_2ddetrack_8c.html#a52">xxxUnexpectedClientPost</a> (PDWORD pmessage, LPARAM *plParam, <a class="el" href="../../d6/d2/structtagDDECONV.html">PDDECONV</a> pDdeConv)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d4/kernel_2ddetrack_8c.html#a53">xxxAdvise</a> (PDWORD pmessage, LPARAM *plParam, <a class="el" href="../../d6/d2/structtagDDECONV.html">PDDECONV</a> pDdeConv)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d4/kernel_2ddetrack_8c.html#a54">xxxAdviseAck</a> (PDWORD pmessage, LPARAM *plParam, <a class="el" href="../../d6/d2/structtagDDECONV.html">PDDECONV</a> pDdeConv)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d4/kernel_2ddetrack_8c.html#a55">xxxAdviseData</a> (PDWORD pmessage, LPARAM *plParam, <a class="el" href="../../d6/d2/structtagDDECONV.html">PDDECONV</a> pDdeConv)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d4/kernel_2ddetrack_8c.html#a56">xxxAdviseDataAck</a> (PDWORD pmessage, LPARAM *plParam, <a class="el" href="../../d6/d2/structtagDDECONV.html">PDDECONV</a> pDdeConv)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d4/kernel_2ddetrack_8c.html#a57">xxxUnadviseAck</a> (PDWORD pmessage, LPARAM *plParam, <a class="el" href="../../d6/d2/structtagDDECONV.html">PDDECONV</a> pDdeConv)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d4/kernel_2ddetrack_8c.html#a58">xxxRequestAck</a> (PDWORD pmessage, LPARAM *plParam, <a class="el" href="../../d6/d2/structtagDDECONV.html">PDDECONV</a> pDdeConv)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d4/kernel_2ddetrack_8c.html#a59">xxxPoke</a> (PDWORD pmessage, LPARAM *plParam, <a class="el" href="../../d6/d2/structtagDDECONV.html">PDDECONV</a> pDdeConv)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d4/kernel_2ddetrack_8c.html#a60">xxxPokeAck</a> (PDWORD pmessage, LPARAM *plParam, <a class="el" href="../../d6/d2/structtagDDECONV.html">PDDECONV</a> pDdeConv)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d4/kernel_2ddetrack_8c.html#a61">xxxExecute</a> (PDWORD pmessage, LPARAM *plParam, <a class="el" href="../../d6/d2/structtagDDECONV.html">PDDECONV</a> pDdeConv)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d4/kernel_2ddetrack_8c.html#a62">xxxExecuteAck</a> (PDWORD pmessage, LPARAM *plParam, <a class="el" href="../../d6/d2/structtagDDECONV.html">PDDECONV</a> pDdeConv)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d4/kernel_2ddetrack_8c.html#a63">DupConvTerminate</a> (PDWORD pmessage, LPARAM *plParam, <a class="el" href="../../d6/d2/structtagDDECONV.html">PDDECONV</a> pDdeConv)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d4/kernel_2ddetrack_8c.html#a64">xxxCopyAckIn</a> (LPDWORD pmessage, LPARAM *plParam, <a class="el" href="../../d6/d2/structtagDDECONV.html">PDDECONV</a> pDdeConv, <a class="el" href="../../d7/d8/structtagINTDDEINFO.html">PINTDDEINFO</a> *ppIntDdeInfo)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d4/kernel_2ddetrack_8c.html#a65">FreeListFree</a> (<a class="el" href="../../d4/d5/structtagFREELIST.html">PFREELIST</a> pfl)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d4/kernel_2ddetrack_8c.html#a66">FreeDdeConv</a> (<a class="el" href="../../d6/d2/structtagDDECONV.html">PDDECONV</a> pDdeConv)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d4/kernel_2ddetrack_8c.html#a67">_DdeSetQualityOfService</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwndClient, CONST PSECURITY_QUALITY_OF_SERVICE pqosNew, PSECURITY_QUALITY_OF_SERVICE pqosOld)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d4/kernel_2ddetrack_8c.html#a68">_DdeGetQualityOfService</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwndClient, <a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwndServer, PSECURITY_QUALITY_OF_SERVICE pqos)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d4/kernel_2ddetrack_8c.html#a69">_ImpersonateDdeClientWindow</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwndClient, <a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwndServer)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d4/kernel_2ddetrack_8c.html#a70">FreeDdeXact</a> (<a class="el" href="../../d1/d0/structtagXSTATE.html">PXSTATE</a> pxs)</td></tr>

<tr><td colspan=2><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d6/d4/structtagPUBOBJ.html">PPUBOBJ</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d4/kernel_2ddetrack_8c.html#a6">gpPublicObjectList</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d4/d1/userk_8h.html#a931">FNDDERESPONSE</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d4/kernel_2ddetrack_8c.html#a7">xxxUnexpectedServerPost</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d4/d1/userk_8h.html#a931">FNDDERESPONSE</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d4/kernel_2ddetrack_8c.html#a8">xxxUnexpectedClientPost</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d4/d1/userk_8h.html#a931">FNDDERESPONSE</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d4/kernel_2ddetrack_8c.html#a9">xxxAdvise</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d4/d1/userk_8h.html#a931">FNDDERESPONSE</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d4/kernel_2ddetrack_8c.html#a10">xxxAdviseAck</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d4/d1/userk_8h.html#a931">FNDDERESPONSE</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d4/kernel_2ddetrack_8c.html#a11">xxxAdviseData</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d4/d1/userk_8h.html#a931">FNDDERESPONSE</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d4/kernel_2ddetrack_8c.html#a12">xxxAdviseDataAck</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d4/d1/userk_8h.html#a931">FNDDERESPONSE</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d4/kernel_2ddetrack_8c.html#a13">xxxUnadviseAck</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d4/d1/userk_8h.html#a931">FNDDERESPONSE</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d4/kernel_2ddetrack_8c.html#a14">xxxRequestAck</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d4/d1/userk_8h.html#a931">FNDDERESPONSE</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d4/kernel_2ddetrack_8c.html#a15">xxxPoke</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d4/d1/userk_8h.html#a931">FNDDERESPONSE</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d4/kernel_2ddetrack_8c.html#a16">xxxPokeAck</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d4/d1/userk_8h.html#a931">FNDDERESPONSE</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d4/kernel_2ddetrack_8c.html#a17">xxxExecute</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d4/d1/userk_8h.html#a931">FNDDERESPONSE</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d4/kernel_2ddetrack_8c.html#a18">xxxExecuteAck</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d4/d1/userk_8h.html#a931">FNDDERESPONSE</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d4/kernel_2ddetrack_8c.html#a19">DupConvTerminate</a></td></tr>

</table>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="a0" doxytag="kernel/ddetrack.c::TRACE_DDE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define TRACE_DDE          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">str&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;TAGMSG0(DBGTAG_DDE, str)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00019">19</a> of file <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html">kernel/ddetrack.c</a>.
<p>
Referenced by <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01601">DupConvTerminate()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01221">Request()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01565">SpontaneousTerminate()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01180">Unadvise()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00942">xxxAdvise()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00978">xxxAdviseAck()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01028">xxxAdviseData()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01113">xxxAdviseDataAck()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00618">xxxDDETrackGetMessageHook()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00320">xxxDDETrackPostHook()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01460">xxxExecute()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01515">xxxExecuteAck()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01344">xxxPoke()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01411">xxxPokeAck()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01234">xxxRequestAck()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01193">xxxUnadviseAck()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00895">xxxUnexpectedClientPost()</a>, and <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00853">xxxUnexpectedServerPost()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="kernel/ddetrack.c::TRACE_DDE1" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define TRACE_DDE1          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">s,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>a&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;TAGMSG1(DBGTAG_DDE, (s), (a))</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00020">20</a> of file <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html">kernel/ddetrack.c</a>.
<p>
Referenced by <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l02042">FreeDdeConv()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01919">FreeDDEHandle()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00264">UnlinkConv()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01028">xxxAdviseData()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01113">xxxAdviseDataAck()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l02149">xxxCopyDDEOut()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00618">xxxDDETrackGetMessageHook()</a>, and <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01960">xxxFreeListFree()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="kernel/ddetrack.c::TRACE_DDE2" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define TRACE_DDE2          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">s,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>a,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>b&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;TAGMSG2(DBGTAG_DDE, (s), (a), (b))</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00021">21</a> of file <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html">kernel/ddetrack.c</a>.
<p>
Referenced by <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01890">FreeListAdd()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l02104">xxxCopyDdeIn()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00618">xxxDDETrackGetMessageHook()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00147">xxxDDETrackSendHook()</a>, and <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00768">xxxDDETrackWindowDying()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="kernel/ddetrack.c::TRACE_DDE3" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define TRACE_DDE3          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">s,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>a,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>b,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d7/d1/genuedef_8c.html#a8">c</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;TAGMSG3(DBGTAG_DDE, (s), (a), (b), (<a class="el" href="../../d7/d1/genuedef_8c.html#a8">c</a>))</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00022">22</a> of file <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html">kernel/ddetrack.c</a>.
<p>
Referenced by <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01113">xxxAdviseDataAck()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l02104">xxxCopyDdeIn()</a>, and <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l02149">xxxCopyDDEOut()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="kernel/ddetrack.c::TraceDdeMsg" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define TraceDdeMsg          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">m,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>h1,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>h2,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d7/d1/genuedef_8c.html#a8">c</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00079">79</a> of file <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html">kernel/ddetrack.c</a>.
<p>
Referenced by <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00618">xxxDDETrackGetMessageHook()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00320">xxxDDETrackPostHook()</a>, and <a class="el" href="../../d7/d2/queue_8c-source.html#l03499">xxxReadPostMessage()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="kernel/ddetrack.c::ValidatePublicObjectList" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ValidatePublicObjectList          </td>
          <td class="md" valign="top">(&nbsp;</td>
&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00078">78</a> of file <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html">kernel/ddetrack.c</a>.
<p>
Referenced by <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01689">Createpxs()</a>, and <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l02285">FreeDdeXact()</a>.    </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="a68" doxytag="kernel/ddetrack.c::_DdeGetQualityOfService" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL _DdeGetQualityOfService           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwndClient</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwndServer</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PSECURITY_QUALITY_OF_SERVICE&nbsp;</td>
          <td class="mdname" nowrap> <em>pqos</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l02218">2218</a> of file <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html">kernel/ddetrack.c</a>.
<p>
References <a class="el" href="../../d8/d7/rtl_2winprop_8c-source.html#l00106">_GetProp()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01811">FindDdeConv()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01553">GETPWNDPPI</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00862">gqosDefault</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06163">tagDDECONV::pddei</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03894">PROP_QOS</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01722">PROPF_INTERNAL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06147">tagDDEIMP::qos</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04415">NtUserDdeGetQualityOfService()</a>.
<p>
<pre class="fragment"><div>02222 {
02223     <a class="code" href="../../d6/d2/structtagDDECONV.html">PDDECONV</a> pDdeConv;
02224     PSECURITY_QUALITY_OF_SERVICE pqosClient;
02225 
02226     <span class="keywordflow">if</span> (pwndServer == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
02227         <span class="comment">/*</span>
02228 <span class="comment">         * Special case to support DDEML-RAW conversations that need to get</span>
02229 <span class="comment">         * the QOS prior to initiation completion.</span>
02230 <span class="comment">         */</span>
02231         pqosClient = <a class="code" href="../../d7/d8/rtl_2winprop_8c.html#a2">_GetProp</a>(pwndClient, PROP_QOS, PROPF_INTERNAL);
02232         <span class="keywordflow">if</span> (pqosClient == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
02233             *pqos = <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a311">gqosDefault</a>;
02234         } <span class="keywordflow">else</span> {
02235             *pqos = *pqosClient;
02236         }
02237         <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
02238     }
02239     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a458">GETPWNDPPI</a>(pwndClient) == <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a458">GETPWNDPPI</a>(pwndServer)) {
02240         *pqos = <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a311">gqosDefault</a>;
02241         <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
02242     }
02243     pDdeConv = <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a21">FindDdeConv</a>(pwndClient, pwndServer);
02244     <span class="keywordflow">if</span> (pDdeConv == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
02245         <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
02246     }
02247     <span class="keywordflow">if</span> (pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o9">pddei</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
02248         <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
02249     }
02250     *pqos = pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o9">pddei</a>-&gt;<a class="code" href="../../d7/d2/structtagDDEIMP.html#o0">qos</a>;
02251     <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
02252 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a67" doxytag="kernel/ddetrack.c::_DdeSetQualityOfService" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL _DdeSetQualityOfService           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwndClient</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>CONST PSECURITY_QUALITY_OF_SERVICE&nbsp;</td>
          <td class="mdname" nowrap> <em>pqosNew</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PSECURITY_QUALITY_OF_SERVICE&nbsp;</td>
          <td class="mdname" nowrap> <em>pqosOld</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l02176">2176</a> of file <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html">kernel/ddetrack.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00862">gqosDefault</a>, <a class="el" href="../../d5/d7/kernel_2winprop_8c-source.html#l00098">InternalRemoveProp()</a>, <a class="el" href="../../d5/d7/kernel_2winprop_8c-source.html#l00039">InternalSetProp()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03894">PROP_QOS</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01722">PROPF_INTERNAL</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04369">NtUserDdeSetQualityOfService()</a>.
<p>
<pre class="fragment"><div>02180 {
02181     PSECURITY_QUALITY_OF_SERVICE pqosUser;
02182     PSECURITY_QUALITY_OF_SERVICE pqosAlloc = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
02183     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fRet;
02184 
02185     <span class="comment">/*</span>
02186 <span class="comment">     * ASSUME: calling process is owner of pwndClient - ensured in thunk.</span>
02187 <span class="comment">     */</span>
02188     pqosUser = (PSECURITY_QUALITY_OF_SERVICE)<a class="code" href="../../d4/d8/kernel_2winprop_8c.html#a1">InternalRemoveProp</a>(pwndClient,
02189             PROP_QOS, PROPF_INTERNAL);
02190     <span class="keywordflow">if</span> (pqosUser == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
02191         <span class="keywordflow">if</span> (RtlEqualMemory(pqosNew, &amp;gqosDefault, <span class="keyword">sizeof</span>(SECURITY_QUALITY_OF_SERVICE))) {
02192             <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);           <span class="comment">// no PROP_QOS property implies default QOS</span>
02193         }
02194         pqosAlloc = (PSECURITY_QUALITY_OF_SERVICE)UserAllocPoolZInit(
02195                 <span class="keyword">sizeof</span>(SECURITY_QUALITY_OF_SERVICE), TAG_DDE2);
02196         <span class="keywordflow">if</span> (pqosAlloc == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
02197             <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);          <span class="comment">// memory allocation failure - can't change from default</span>
02198         }
02199         pqosUser = pqosAlloc;
02200     }
02201     *pqosOld = *pqosUser;
02202     *pqosUser = *pqosNew;
02203 
02204     fRet = <a class="code" href="../../d4/d8/kernel_2winprop_8c.html#a0">InternalSetProp</a>(pwndClient, PROP_QOS, pqosUser, PROPF_INTERNAL);
02205     <span class="keywordflow">if</span> ((fRet == <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>) &amp;&amp; (pqosAlloc != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)) {
02206         UserFreePool(pqosAlloc);
02207     }
02208 
02209     <span class="keywordflow">return</span> fRet;
02210 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a69" doxytag="kernel/ddetrack.c::_ImpersonateDdeClientWindow" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL _ImpersonateDdeClientWindow           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwndClient</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwndServer</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l02256">2256</a> of file <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html">kernel/ddetrack.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06148">tagDDEIMP::ClientContext</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01811">FindDdeConv()</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06163">tagDDECONV::pddei</a>, <a class="el" href="../../d2/d8/ps_8h-source.html#l00645">PsGetCurrentThread</a>, <a class="el" href="../../d5/d4/seclient_8c-source.html#l00636">SeImpersonateClientEx()</a>, <a class="el" href="../../d3/d0/cttoken_8c-source.html#l00135">Status</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l08670">NtUserImpersonateDdeClientWindow()</a>.
<p>
<pre class="fragment"><div>02259 {
02260     <a class="code" href="../../d6/d2/structtagDDECONV.html">PDDECONV</a> pDdeConv;
02261     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
02262 
02263     <span class="comment">/*</span>
02264 <span class="comment">     * Locate token used in the conversation</span>
02265 <span class="comment">     */</span>
02266     pDdeConv = <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a21">FindDdeConv</a>(pwndClient, pwndServer);
02267     <span class="keywordflow">if</span> (pDdeConv == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> || pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o9">pddei</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
02268         <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
02269 
02270     <span class="comment">/*</span>
02271 <span class="comment">     * Stick the token into the dde server thread</span>
02272 <span class="comment">     */</span>
02273     <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d4/d5/seclient_8c.html#a3">SeImpersonateClientEx</a>(&amp;pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o9">pddei</a>-&gt;<a class="code" href="../../d7/d2/structtagDDEIMP.html#o1">ClientContext</a>,
02274             <a class="code" href="../../d1/d9/ps_8h.html#a20">PsGetCurrentThread</a>());
02275     <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(Status)) {
02276         RIPNTERR0(Status, RIP_VERBOSE, <span class="stringliteral">""</span>);
02277         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
02278     }
02279     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
02280 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a28" doxytag="kernel/ddetrack.c::AbnormalDDEPost" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> AbnormalDDEPost           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d2/structtagDDECONV.html">PDDECONV</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pDdeConv</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>message</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01729">1729</a> of file <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html">kernel/ddetrack.c</a>.
<p>
References <a class="el" href="../../d6/d2/ntuser_2kernel_2input_8c-source.html#l00981">_PostMessage()</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06182">CXF_TERMINATE_POSTED</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00061">FAIL_POST</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00062">FAKE_POST</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06162">tagDDECONV::flags</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01512">PtoH</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06157">tagDDECONV::spwnd</a>, and <a class="el" href="../../d5/d0/userk_8h-source.html#l06158">tagDDECONV::spwndPartner</a>.
<p>
Referenced by <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00895">xxxUnexpectedClientPost()</a>, and <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00853">xxxUnexpectedServerPost()</a>.
<p>
<pre class="fragment"><div>01732 {
01733 
01734 <span class="preprocessor">#if DBG</span>
01735 <span class="preprocessor"></span>    <span class="keywordflow">if</span> (message != WM_DDE_TERMINATE) {
01736         RIPMSG2(RIP_WARNING,
01737                 <span class="stringliteral">"DDE Post failed (%#p:%#p) - protocol violation."</span>,
01738                 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a448">PtoH</a>(pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o3">spwnd</a>), <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a448">PtoH</a>(pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o4">spwndPartner</a>));
01739     }
01740 <span class="preprocessor">#endif // DBG</span>
01741 <span class="preprocessor"></span>
01742     <span class="comment">// shutdown this conversation by posting a terminate on</span>
01743     <span class="comment">// behalf of this guy, then fail all future posts but</span>
01744     <span class="comment">// fake a successful terminate.</span>
01745 
01746     <span class="keywordflow">if</span> (!(pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o8">flags</a> &amp; <a class="code" href="../../d4/d1/userk_8h.html#a603">CXF_TERMINATE_POSTED</a>)) {
01747         <a class="code" href="../../d4/d1/userk_8h.html#a1642">_PostMessage</a>(pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o4">spwndPartner</a>, WM_DDE_TERMINATE,
01748                 (WPARAM)<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a448">PtoH</a>(pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o3">spwnd</a>), 0);
01749         <span class="comment">// pDdeConv-&gt;flags |= CXF_TERMINATE_POSTED; Set by post hook proc</span>
01750     }
01751     <span class="keywordflow">return</span>(message == WM_DDE_TERMINATE ? <a class="code" href="../../d6/d4/ddetrack_8h.html#a18">FAKE_POST</a> : <a class="code" href="../../d6/d4/ddetrack_8h.html#a17">FAIL_POST</a>);
01752 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a22" doxytag="kernel/ddetrack.c::AddConvProp" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL AddConvProp           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwndUs</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwndThem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>flags</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d6/d2/structtagDDECONV.html">PDDECONV</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pdcNew</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d6/d2/structtagDDECONV.html">PDDECONV</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pdcPartner</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00217">217</a> of file <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html">kernel/ddetrack.c</a>.
<p>
References <a class="el" href="../../d8/d7/rtl_2winprop_8c-source.html#l00106">_GetProp()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06150">tagDDEIMP::cRefConv</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06181">CXF_IS_SERVER</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06162">tagDDECONV::flags</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l01197">HMLockObject</a>, <a class="el" href="../../d5/d7/kernel_2winprop_8c-source.html#l00039">InternalSetProp()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00367">Lock</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06163">tagDDECONV::pddei</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03895">PROP_DDEIMP</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03893">PROP_DDETRACK</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01722">PROPF_INTERNAL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06155">tagDDECONV::snext</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06156">tagDDECONV::spartnerConv</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06157">tagDDECONV::spwnd</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06158">tagDDECONV::spwndPartner</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06160">tagDDECONV::spxsIn</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06159">tagDDECONV::spxsOut</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01766">NewConversation()</a>.
<p>
<pre class="fragment"><div>00223 {
00224     <a class="code" href="../../d6/d2/structtagDDECONV.html">PDDECONV</a> pDdeConv;
00225     <a class="code" href="../../d7/d2/structtagDDEIMP.html">PDDEIMP</a> pddei;
00226 
00227     pDdeConv = (<a class="code" href="../../d6/d2/structtagDDECONV.html">PDDECONV</a>)<a class="code" href="../../d7/d8/rtl_2winprop_8c.html#a2">_GetProp</a>(pwndUs, PROP_DDETRACK, PROPF_INTERNAL);
00228     <a class="code" href="../../d6/d0/usercli_8h.html#a41">Lock</a>(&amp;(pdcNew-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o1">snext</a>), pDdeConv);
00229     <a class="code" href="../../d6/d0/usercli_8h.html#a41">Lock</a>(&amp;(pdcNew-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o3">spwnd</a>), pwndUs);
00230     <a class="code" href="../../d6/d0/usercli_8h.html#a41">Lock</a>(&amp;(pdcNew-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o4">spwndPartner</a>), pwndThem);
00231 
00232     <span class="comment">/*</span>
00233 <span class="comment">     * Assert to catch stress bug.</span>
00234 <span class="comment">     */</span>
00235     UserAssert(pdcPartner != (<a class="code" href="../../d6/d2/structtagDDECONV.html">PDDECONV</a>)(-1));
00236 
00237     <a class="code" href="../../d6/d0/usercli_8h.html#a41">Lock</a>(&amp;(pdcNew-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o2">spartnerConv</a>), pdcPartner);
00238     pdcNew-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o6">spxsIn</a> = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00239     pdcNew-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o5">spxsOut</a> = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00240     pdcNew-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o8">flags</a> = flags;
00241     pddei = (<a class="code" href="../../d7/d2/structtagDDEIMP.html">PDDEIMP</a>)<a class="code" href="../../d7/d8/rtl_2winprop_8c.html#a2">_GetProp</a>((flags &amp; CXF_IS_SERVER) ?
00242             pwndThem : pwndUs, PROP_DDEIMP, PROPF_INTERNAL);
00243     <span class="keywordflow">if</span> (pddei != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {    <span class="comment">// This can be NULL if a bad WOW app has been</span>
00244         pddei-&gt;<a class="code" href="../../d7/d2/structtagDDEIMP.html#o3">cRefConv</a>++;  <span class="comment">// allowed through for compatability.</span>
00245     }
00246     pdcNew-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o9">pddei</a> = pddei;
00247 
00248     <a class="code" href="../../d4/d1/userk_8h.html#a112">HMLockObject</a>(pdcNew);         <span class="comment">// lock for property</span>
00249     <a class="code" href="../../d4/d8/kernel_2winprop_8c.html#a0">InternalSetProp</a>(pwndUs, PROP_DDETRACK, pdcNew, PROPF_INTERNAL);
00250     <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
00251 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a43" doxytag="kernel/ddetrack.c::AddPublicObject" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL AddPublicObject           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>format</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hObj</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>W32PID&nbsp;</td>
          <td class="mdname" nowrap> <em>pid</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l02348">2348</a> of file <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html">kernel/ddetrack.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l02958">tagPUBOBJ::count</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d9/d9/rtbatcr_8c-source.html#l00064">format</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l02427">GiveObject()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00017">gpPublicObjectList</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l02957">tagPUBOBJ::hObj</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l02333">IsObjectPublic()</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l02956">tagPUBOBJ::next</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l02962">tagPUBOBJ::pid</a>, <a class="el" href="../../d4/d1/userk_8h.html#a852">PUBOBJ</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01028">xxxAdviseData()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01344">xxxPoke()</a>, and <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01234">xxxRequestAck()</a>.
<p>
<pre class="fragment"><div>02352 {
02353     <a class="code" href="../../d6/d4/structtagPUBOBJ.html">PPUBOBJ</a> ppo;
02354 
02355     <span class="keywordflow">switch</span> (<a class="code" href="../../d8/d0/rtbatcr_8c.html#a8">format</a>) {
02356     <span class="keywordflow">case</span> CF_BITMAP:
02357     <span class="keywordflow">case</span> CF_DSPBITMAP:
02358     <span class="keywordflow">case</span> CF_PALETTE:
02359         <span class="keywordflow">break</span>;
02360 
02361     <span class="keywordflow">default</span>:
02362         <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
02363     }
02364 
02365     ppo = <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a42">IsObjectPublic</a>(hObj);
02366     <span class="keywordflow">if</span> (ppo == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
02367         ppo = UserAllocPool(<span class="keyword">sizeof</span>(<a class="code" href="../../d6/d4/structtagPUBOBJ.html">PUBOBJ</a>), TAG_DDE4);
02368         <span class="keywordflow">if</span> (ppo == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
02369             <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
02370         }
02371         ppo-&gt;<a class="code" href="../../d6/d4/structtagPUBOBJ.html#o2">count</a> = 1;
02372         ppo-&gt;<a class="code" href="../../d6/d4/structtagPUBOBJ.html#o1">hObj</a> = hObj;
02373         ppo-&gt;<a class="code" href="../../d6/d4/structtagPUBOBJ.html#o3">pid</a> = pid;
02374         ppo-&gt;<a class="code" href="../../d6/d4/structtagPUBOBJ.html#o0">next</a> = <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a6">gpPublicObjectList</a>;
02375         <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a6">gpPublicObjectList</a> = ppo;
02376         <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a45">GiveObject</a>(format, hObj, OBJECT_OWNER_PUBLIC);
02377     } <span class="keywordflow">else</span> {
02378         ppo-&gt;<a class="code" href="../../d6/d4/structtagPUBOBJ.html#o2">count</a>++;
02379     }
02380     <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
02381 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a26" doxytag="kernel/ddetrack.c::AnticipatePost" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HANDLE AnticipatePost           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d2/structtagDDECONV.html">PDDECONV</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pDdeConv</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d4/d1/userk_8h.html#a931">FNDDERESPONSE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>fnResponse</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hClient</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hServer</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d7/d8/structtagINTDDEINFO.html">PINTDDEINFO</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pIntDdeInfo</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>flags</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01634">1634</a> of file <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html">kernel/ddetrack.c</a>.
<p>
References <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01278">tagSHAREDINFO::aheList</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01689">Createpxs()</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00849">giheLast</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00052">gSharedInfo</a>, <a class="el" href="../../d0/d0/client_2nt6_2user_8h.html#a1030">HANDLEENTRY</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06154">tagDDECONV::head</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06170">tagXSTATE::head</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00367">Lock</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01457">_THROBJHEAD::pti</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01512">PtoH</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06171">tagXSTATE::snext</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06160">tagDDECONV::spxsIn</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06159">tagDDECONV::spxsOut</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00915">TYPE_DDECONV</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00916">TYPE_DDEXACT</a>.
<p>
Referenced by <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01221">Request()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01180">Unadvise()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00942">xxxAdvise()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01028">xxxAdviseData()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00147">xxxDDETrackSendHook()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01460">xxxExecute()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01344">xxxPoke()</a>, and <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01234">xxxRequestAck()</a>.
<p>
<pre class="fragment"><div>01641 {
01642     <a class="code" href="../../d1/d0/structtagXSTATE.html">PXSTATE</a> pxs;
01643 
01644     pxs = <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a27">Createpxs</a>(fnResponse, hClient, hServer, pIntDdeInfo, flags);
01645     <span class="keywordflow">if</span> (pxs != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01646         pxs-&gt;<a class="code" href="../../d1/d0/structtagXSTATE.html#o0">head</a>.<a class="code" href="../../d1/d1/struct__THROBJHEAD.html#o1">pti</a> = pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o0">head</a>.<a class="code" href="../../d1/d1/struct__THROBJHEAD.html#o1">pti</a>;
01647         <span class="keywordflow">if</span> (pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o5">spxsOut</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01648             UserAssert(pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o6">spxsIn</a> == NULL);
01649             <a class="code" href="../../d6/d0/usercli_8h.html#a41">Lock</a>(&amp;(pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o5">spxsOut</a>), pxs);
01650             <a class="code" href="../../d6/d0/usercli_8h.html#a41">Lock</a>(&amp;(pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o6">spxsIn</a>), pxs);
01651         } <span class="keywordflow">else</span> {
01652             UserAssert(pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o6">spxsIn</a> != NULL);
01653             <a class="code" href="../../d6/d0/usercli_8h.html#a41">Lock</a>(&amp;(pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o6">spxsIn</a>-&gt;<a class="code" href="../../d1/d0/structtagXSTATE.html#o1">snext</a>), pxs);
01654             <a class="code" href="../../d6/d0/usercli_8h.html#a41">Lock</a>(&amp;(pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o6">spxsIn</a>), pxs);
01655         }
01656 <span class="preprocessor">#if 0</span>
01657 <span class="preprocessor"></span>        {
01658             <span class="keywordtype">int</span> i;
01659             <a class="code" href="../../d2/d4/struct__HANDLEENTRY.html">HANDLEENTRY</a> *phe;
01660 
01661             <span class="keywordflow">for</span> (i = 0, phe = <a class="code" href="../../d1/d8/clglobal_8c.html#a5">gSharedInfo</a>.<a class="code" href="../../d4/d6/structtagSHAREDINFO.html#o1">aheList</a>;
01662                 i &lt;= (<span class="keywordtype">int</span>)<a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a308">giheLast</a>;
01663                     i++) {
01664                 <span class="keywordflow">if</span> (phe[i].bType == <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a247">TYPE_DDEXACT</a>) {
01665                     UserAssert(((<a class="code" href="../../d1/d0/structtagXSTATE.html">PXSTATE</a>)(phe[i].phead))-&gt;snext != pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o5">spxsOut</a>);
01666                 }
01667                 <span class="keywordflow">if</span> (phe[i].bType == <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a246">TYPE_DDECONV</a> &amp;&amp;
01668                         (<a class="code" href="../../d6/d2/structtagDDECONV.html">PDDECONV</a>)phe[i].phead != pDdeConv) {
01669                     UserAssert(((<a class="code" href="../../d6/d2/structtagDDECONV.html">PDDECONV</a>)(phe[i].phead))-&gt;spxsOut != pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o5">spxsOut</a>);
01670                     UserAssert(((<a class="code" href="../../d6/d2/structtagDDECONV.html">PDDECONV</a>)(phe[i].phead))-&gt;spxsIn != pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o5">spxsOut</a>);
01671                 }
01672             }
01673         }
01674 <span class="preprocessor">#endif</span>
01675 <span class="preprocessor"></span>    }
01676     <span class="keywordflow">return</span>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a448">PtoH</a>(pxs));
01677 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a37" doxytag="kernel/ddetrack.c::ClientFreeDDEHandle" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> ClientFreeDDEHandle           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hClient</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>flags</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01919">FreeDDEHandle()</a>, and <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01960">xxxFreeListFree()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a38" doxytag="kernel/ddetrack.c::ClientGetDDEFlags" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> ClientGetDDEFlags           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hClient</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>flags</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01234">xxxRequestAck()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a27" doxytag="kernel/ddetrack.c::Createpxs" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d1/d0/structtagXSTATE.html">PXSTATE</a> Createpxs           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d4/d1/userk_8h.html#a931">FNDDERESPONSE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>fnResponse</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hClient</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hServer</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d7/d8/structtagINTDDEINFO.html">PINTDDEINFO</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pIntDdeInfo</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>flags</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01689">1689</a> of file <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html">kernel/ddetrack.c</a>.
<p>
References <a class="el" href="../../d5/d0/userk_8h-source.html#l06176">tagXSTATE::flags</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06172">tagXSTATE::fnResponse</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06173">tagXSTATE::hClient</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06170">tagXSTATE::head</a>, <a class="el" href="../../d5/d7/handtabl_8c-source.html#l00828">HMAllocObject()</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06174">tagXSTATE::hServer</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06175">tagXSTATE::pIntDdeInfo</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00058">PtiCurrent</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06171">tagXSTATE::snext</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00916">TYPE_DDEXACT</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00078">ValidatePublicObjectList</a>, and <a class="el" href="../../d4/d1/userk_8h.html#a933">XSTATE</a>.
<p>
Referenced by <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01634">AnticipatePost()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01028">xxxAdviseData()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01835">xxxCopyAckIn()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01515">xxxExecuteAck()</a>, and <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01234">xxxRequestAck()</a>.
<p>
<pre class="fragment"><div>01695 {
01696     <a class="code" href="../../d1/d0/structtagXSTATE.html">PXSTATE</a> pxs;
01697 
01698     pxs = <a class="code" href="../../d4/d1/userk_8h.html#a969">HMAllocObject</a>(<a class="code" href="../../d4/d1/userk_8h.html#a9">PtiCurrent</a>(), NULL, TYPE_DDEXACT, <span class="keyword">sizeof</span>(<a class="code" href="../../d1/d0/structtagXSTATE.html">XSTATE</a>));
01699     <span class="keywordflow">if</span> (pxs == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01700 <span class="preprocessor">#if DBG</span>
01701 <span class="preprocessor"></span>        RIPMSG0(RIP_WARNING, <span class="stringliteral">"Unable to alloc DDEXACT"</span>);
01702 <span class="preprocessor">#endif</span>
01703 <span class="preprocessor"></span>        <span class="keywordflow">return</span>(<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>);
01704     }
01705     pxs-&gt;<a class="code" href="../../d1/d0/structtagXSTATE.html#o1">snext</a> = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
01706     pxs-&gt;<a class="code" href="../../d1/d0/structtagXSTATE.html#o2">fnResponse</a> = fnResponse;
01707     pxs-&gt;<a class="code" href="../../d1/d0/structtagXSTATE.html#o3">hClient</a> = hClient;
01708     pxs-&gt;<a class="code" href="../../d1/d0/structtagXSTATE.html#o4">hServer</a> = hServer;
01709     pxs-&gt;<a class="code" href="../../d1/d0/structtagXSTATE.html#o5">pIntDdeInfo</a> = pIntDdeInfo;
01710     pxs-&gt;<a class="code" href="../../d1/d0/structtagXSTATE.html#o6">flags</a> = flags;
01711     <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a4">ValidatePublicObjectList</a>();
01712     UserAssert(pxs-&gt;<a class="code" href="../../d1/d0/structtagXSTATE.html#o0">head</a>.cLockObj == 0);
01713     <span class="keywordflow">return</span>(pxs);
01714 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a63" doxytag="kernel/ddetrack.c::DupConvTerminate" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> DupConvTerminate           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">PDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>pmessage</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM *&nbsp;</td>
          <td class="mdname" nowrap> <em>plParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d6/d2/structtagDDECONV.html">PDDECONV</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pDdeConv</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01601">1601</a> of file <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html">kernel/ddetrack.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00062">FAKE_POST</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l02001">PopState()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00019">TRACE_DDE</a>, and <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00853">xxxUnexpectedServerPost()</a>.
<p>
<pre class="fragment"><div>01605 {
01606     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pDdeConv);
01607 
01608     <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a0">TRACE_DDE</a>(<span class="stringliteral">"DupConvTerminate"</span>);
01609 
01610     <span class="keywordflow">if</span> (*pmessage != WM_DDE_TERMINATE) {
01611         <span class="keywordflow">return</span>(<a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a51">xxxUnexpectedServerPost</a>(pmessage, plParam, pDdeConv));
01612     }
01613 
01614     <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a34">PopState</a>(pDdeConv);
01615     <span class="keywordflow">return</span>(<a class="code" href="../../d6/d4/ddetrack_8h.html#a18">FAKE_POST</a>);
01616 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a21" doxytag="kernel/ddetrack.c::FindDdeConv" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d6/d2/structtagDDECONV.html">PDDECONV</a> FindDdeConv           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwndProp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwndPartner</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01811">1811</a> of file <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html">kernel/ddetrack.c</a>.
<p>
References <a class="el" href="../../d8/d7/rtl_2winprop_8c-source.html#l00106">_GetProp()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03893">PROP_DDETRACK</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01722">PROPF_INTERNAL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06155">tagDDECONV::snext</a>, and <a class="el" href="../../d5/d0/userk_8h-source.html#l06158">tagDDECONV::spwndPartner</a>.
<p>
Referenced by <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l02218">_DdeGetQualityOfService()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l02256">_ImpersonateDdeClientWindow()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00618">xxxDDETrackGetMessageHook()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00320">xxxDDETrackPostHook()</a>, and <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00147">xxxDDETrackSendHook()</a>.
<p>
<pre class="fragment"><div>01814 {
01815     <a class="code" href="../../d6/d2/structtagDDECONV.html">PDDECONV</a> pDdeConv;
01816 
01817     pDdeConv = (<a class="code" href="../../d6/d2/structtagDDECONV.html">PDDECONV</a>)<a class="code" href="../../d7/d8/rtl_2winprop_8c.html#a2">_GetProp</a>(pwndProp, PROP_DDETRACK, PROPF_INTERNAL);
01818     <span class="keywordflow">while</span> (pDdeConv != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> &amp;&amp; pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o4">spwndPartner</a> != pwndPartner) {
01819         pDdeConv = pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o1">snext</a>;
01820     }
01821 
01822     <span class="keywordflow">return</span>(pDdeConv);
01823 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a66" doxytag="kernel/ddetrack.c::FreeDdeConv" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID FreeDdeConv           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d2/structtagDDECONV.html">PDDECONV</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pDdeConv</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l02042">2042</a> of file <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html">kernel/ddetrack.c</a>.
<p>
References <a class="el" href="../../d6/d2/ntuser_2kernel_2input_8c-source.html#l00981">_PostMessage()</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06148">tagDDEIMP::ClientContext</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06150">tagDDEIMP::cRefConv</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06149">tagDDEIMP::cRefInit</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06182">CXF_TERMINATE_POSTED</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06162">tagDDECONV::flags</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01547">GETPTI</a>, <a class="el" href="../../d5/d7/handtabl_8c-source.html#l01069">HMFreeObject()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01477">HMIsMarkDestroy</a>, <a class="el" href="../../d5/d7/handtabl_8c-source.html#l01237">HMMarkObjectDestroy()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06163">tagDDECONV::pddei</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l02001">PopState()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01512">PtoH</a>, <a class="el" href="../../d1/d4/se_8h-source.html#l00612">SeDeleteClientSecurity</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06156">tagDDECONV::spartnerConv</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06157">tagDDECONV::spwnd</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06158">tagDDECONV::spwndPartner</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02826">TIF_INCLEANUP</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00020">TRACE_DDE1</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00264">UnlinkConv()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00368">Unlock</a>, and <a class="el" href="../../d2/d7/hal_8h.html#a212">VOID()</a>.
<p>
Referenced by <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00548">xxxCleanupDdeConv()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00618">xxxDDETrackGetMessageHook()</a>, and <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00768">xxxDDETrackWindowDying()</a>.
<p>
<pre class="fragment"><div>02044 {
02045 
02046     <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a1">TRACE_DDE1</a>(<span class="stringliteral">"FreeDdeConv(%#p)"</span>, pDdeConv);
02047 
02048     <span class="keywordflow">if</span> (!(pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o8">flags</a> &amp; <a class="code" href="../../d4/d1/userk_8h.html#a603">CXF_TERMINATE_POSTED</a>) &amp;&amp;
02049             !<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a438">HMIsMarkDestroy</a>(pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o4">spwndPartner</a>)) {
02050         <a class="code" href="../../d4/d1/userk_8h.html#a1642">_PostMessage</a>(pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o4">spwndPartner</a>, WM_DDE_TERMINATE,
02051                 (WPARAM)<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a448">PtoH</a>(pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o3">spwnd</a>), 0);
02052         <span class="comment">// pDdeConv-&gt;flags |= CXF_TERMINATE_POSTED; set by PostHookProc</span>
02053     }
02054 
02055     <span class="keywordflow">if</span> (pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o2">spartnerConv</a> != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> &amp;&amp;
02056             <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a455">GETPTI</a>(pDdeConv)-&gt;TIF_flags &amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a795">TIF_INCLEANUP</a>) {
02057         <span class="comment">/*</span>
02058 <span class="comment">         * Fake that the other side already posted a terminate.</span>
02059 <span class="comment">         * This prevents vestigal dde structures from hanging</span>
02060 <span class="comment">         * around after thread cleanup if the conversation structure</span>
02061 <span class="comment">         * is destroyed before the associated window.</span>
02062 <span class="comment">         */</span>
02063         pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o2">spartnerConv</a>-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o8">flags</a> |= <a class="code" href="../../d4/d1/userk_8h.html#a603">CXF_TERMINATE_POSTED</a>;
02064     }
02065 
02066     <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a35">UnlinkConv</a>(pDdeConv);
02067 
02068     <span class="keywordflow">if</span> (pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o9">pddei</a> != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
02069         pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o9">pddei</a>-&gt;<a class="code" href="../../d7/d2/structtagDDEIMP.html#o3">cRefConv</a>--;
02070         <span class="keywordflow">if</span> (pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o9">pddei</a>-&gt;<a class="code" href="../../d7/d2/structtagDDEIMP.html#o3">cRefConv</a> == 0 &amp;&amp; pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o9">pddei</a>-&gt;<a class="code" href="../../d7/d2/structtagDDEIMP.html#o2">cRefInit</a> == 0) {
02071             <a class="code" href="../../d0/d5/se_8h.html#a12">SeDeleteClientSecurity</a>(&amp;pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o9">pddei</a>-&gt;<a class="code" href="../../d7/d2/structtagDDEIMP.html#o1">ClientContext</a>);
02072             UserFreePool(pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o9">pddei</a>);
02073         }
02074         pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o9">pddei</a> = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
02075     }
02076 
02077     <a class="code" href="../../d6/d0/usercli_8h.html#a42">Unlock</a>(&amp;(pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o2">spartnerConv</a>));
02078     <a class="code" href="../../d6/d0/usercli_8h.html#a42">Unlock</a>(&amp;(pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o4">spwndPartner</a>));
02079     <a class="code" href="../../d6/d0/usercli_8h.html#a42">Unlock</a>(&amp;(pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o3">spwnd</a>));
02080 
02081     <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d1/userk_8h.html#a971">HMMarkObjectDestroy</a>((<a class="code" href="../../d4/d5/struct__HEAD.html">PHEAD</a>)pDdeConv))
02082         <span class="keywordflow">return</span>;
02083 
02084     <span class="keywordflow">while</span> (pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o5">spxsOut</a>) {
02085         <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a34">PopState</a>(pDdeConv);
02086     }
02087 
02088     <a class="code" href="../../d4/d1/userk_8h.html#a970">HMFreeObject</a>(pDdeConv);
02089 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a36" doxytag="kernel/ddetrack.c::FreeDDEHandle" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID FreeDDEHandle           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d2/structtagDDECONV.html">PDDECONV</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pDdeConv</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hClient</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>flags</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01919">1919</a> of file <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html">kernel/ddetrack.c</a>.
<p>
References <a class="el" href="../../d5/d4/kernel_2ddetrack_8c.html#a37">ClientFreeDDEHandle()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01890">FreeListAdd()</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00058">PtiCurrent</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02827">TIF_16BIT</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00020">TRACE_DDE1</a>, and <a class="el" href="../../d2/d7/hal_8h.html#a212">VOID()</a>.
<p>
Referenced by <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01028">xxxAdviseData()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01113">xxxAdviseDataAck()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00320">xxxDDETrackPostHook()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01411">xxxPokeAck()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00895">xxxUnexpectedClientPost()</a>, and <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00853">xxxUnexpectedServerPost()</a>.
<p>
<pre class="fragment"><div>01923 {
01924     <span class="keywordflow">if</span> (<a class="code" href="../../d4/d1/userk_8h.html#a9">PtiCurrent</a>()-&gt;TIF_flags &amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a796">TIF_16BIT</a>) {
01925         <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a1">TRACE_DDE1</a>(<span class="stringliteral">"FreeDDEHandle: (WOW hack) delayed Freeing %#p."</span>, hClient);
01926         <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a32">FreeListAdd</a>(pDdeConv, hClient, flags);
01927     } <span class="keywordflow">else</span> {
01928         <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a1">TRACE_DDE1</a>(<span class="stringliteral">"FreeDDEHandle: Freeing %#p."</span>, hClient);
01929         <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a37">ClientFreeDDEHandle</a>(hClient, flags);
01930     }
01931 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a70" doxytag="kernel/ddetrack.c::FreeDdeXact" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID FreeDdeXact           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/d0/structtagXSTATE.html">PXSTATE</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pxs</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l02285">2285</a> of file <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html">kernel/ddetrack.c</a>.
<p>
References <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01278">tagSHAREDINFO::aheList</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00030">tagINTDDEINFO::flags</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06176">tagXSTATE::flags</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00849">giheLast</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00052">gSharedInfo</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06170">tagXSTATE::head</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00034">tagINTDDEINFO::hIndirect</a>, <a class="el" href="../../d5/d7/handtabl_8c-source.html#l01069">HMFreeObject()</a>, <a class="el" href="../../d5/d7/handtabl_8c-source.html#l01237">HMMarkObjectDestroy()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06175">tagXSTATE::pIntDdeInfo</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l02385">RemovePublicObject()</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06171">tagXSTATE::snext</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00915">TYPE_DDECONV</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00916">TYPE_DDEXACT</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00078">ValidatePublicObjectList</a>, <a class="el" href="../../d2/d7/hal_8h.html#a212">VOID()</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00048">XS_ENHMETAFILE</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00045">XS_METAFILEPICT</a>, and <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00056">XS_PUBLICOBJ</a>.
<p>
Referenced by <a class="el" href="../../d7/d2/queue_8c-source.html#l03336">FindQMsg()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l02001">PopState()</a>, and <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00618">xxxDDETrackGetMessageHook()</a>.
<p>
<pre class="fragment"><div>02287 {
02288     <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d1/userk_8h.html#a971">HMMarkObjectDestroy</a>(pxs))
02289         <span class="keywordflow">return</span>;
02290 
02291 <span class="preprocessor">#if 0</span>
02292 <span class="preprocessor"></span>    {
02293         <span class="keywordtype">int</span> i;
02294         <a class="code" href="../../d2/d4/struct__HANDLEENTRY.html">HANDLEENTRY</a> *phe;
02295 
02296         <span class="keywordflow">for</span> (i = 0, phe = <a class="code" href="../../d1/d8/clglobal_8c.html#a5">gSharedInfo</a>.<a class="code" href="../../d4/d6/structtagSHAREDINFO.html#o1">aheList</a>;
02297             i &lt;= <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a308">giheLast</a>;
02298                 i++) {
02299             <span class="keywordflow">if</span> (phe[i].bType == <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a247">TYPE_DDEXACT</a>) {
02300                 UserAssert(((<a class="code" href="../../d1/d0/structtagXSTATE.html">PXSTATE</a>)(phe[i].phead))-&gt;snext != pxs);
02301             }
02302             <span class="keywordflow">if</span> (phe[i].bType == <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a246">TYPE_DDECONV</a>) {
02303                 UserAssert(((<a class="code" href="../../d6/d2/structtagDDECONV.html">PDDECONV</a>)(phe[i].phead))-&gt;spxsOut != pxs);
02304                 UserAssert(((<a class="code" href="../../d6/d2/structtagDDECONV.html">PDDECONV</a>)(phe[i].phead))-&gt;spxsIn != pxs);
02305             }
02306         }
02307     }
02308     UserAssert(pxs-&gt;<a class="code" href="../../d1/d0/structtagXSTATE.html#o0">head</a>.cLockObj == 0);
02309     UserAssert(pxs-&gt;<a class="code" href="../../d1/d0/structtagXSTATE.html#o1">snext</a> == NULL);
02310 <span class="preprocessor">#endif</span>
02311 <span class="preprocessor"></span>
02312     <span class="keywordflow">if</span> (pxs-&gt;<a class="code" href="../../d1/d0/structtagXSTATE.html#o5">pIntDdeInfo</a> != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
02313         <span class="comment">/*</span>
02314 <span class="comment">         * free any server-side GDI objects</span>
02315 <span class="comment">         */</span>
02316         <span class="keywordflow">if</span> (pxs-&gt;<a class="code" href="../../d1/d0/structtagXSTATE.html#o5">pIntDdeInfo</a>-&gt;<a class="code" href="../../d7/d8/structtagINTDDEINFO.html#o1">flags</a> &amp; (<a class="code" href="../../d6/d4/ddetrack_8h.html#a2">XS_METAFILEPICT</a> | <a class="code" href="../../d6/d4/ddetrack_8h.html#a5">XS_ENHMETAFILE</a>)) {
02317             GreDeleteServerMetaFile(pxs-&gt;<a class="code" href="../../d1/d0/structtagXSTATE.html#o5">pIntDdeInfo</a>-&gt;<a class="code" href="../../d7/d8/structtagINTDDEINFO.html#o5">hIndirect</a>);
02318         }
02319         <span class="keywordflow">if</span> (pxs-&gt;<a class="code" href="../../d1/d0/structtagXSTATE.html#o6">flags</a> &amp; <a class="code" href="../../d6/d4/ddetrack_8h.html#a13">XS_PUBLICOBJ</a>) {
02320             <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a44">RemovePublicObject</a>(((<a class="code" href="../../d4/d2/structtagDDE__DATA.html">PDDE_DATA</a>)(pxs-&gt;<a class="code" href="../../d1/d0/structtagXSTATE.html#o5">pIntDdeInfo</a> + 1))-&gt;wFmt,
02321                     pxs-&gt;<a class="code" href="../../d1/d0/structtagXSTATE.html#o5">pIntDdeInfo</a>-&gt;<a class="code" href="../../d7/d8/structtagINTDDEINFO.html#o5">hIndirect</a>);
02322             pxs-&gt;<a class="code" href="../../d1/d0/structtagXSTATE.html#o6">flags</a> &amp;= ~<a class="code" href="../../d6/d4/ddetrack_8h.html#a13">XS_PUBLICOBJ</a>;
02323         }
02324         UserFreePool(pxs-&gt;<a class="code" href="../../d1/d0/structtagXSTATE.html#o5">pIntDdeInfo</a>);
02325     }
02326 
02327     <a class="code" href="../../d4/d1/userk_8h.html#a970">HMFreeObject</a>(pxs);
02328     <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a4">ValidatePublicObjectList</a>();
02329 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a32" doxytag="kernel/ddetrack.c::FreeListAdd" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL FreeListAdd           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d2/structtagDDECONV.html">PDDECONV</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pDdeConv</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hClient</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>flags</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01890">1890</a> of file <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html">kernel/ddetrack.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06143">tagFREELIST::flags</a>, <a class="el" href="../../d4/d1/userk_8h.html#a925">FREELIST</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06142">tagFREELIST::h</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06154">tagDDECONV::head</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06141">tagFREELIST::next</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06161">tagDDECONV::pfl</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01457">_THROBJHEAD::pti</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00021">TRACE_DDE2</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01919">FreeDDEHandle()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00978">xxxAdviseAck()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01113">xxxAdviseDataAck()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01411">xxxPokeAck()</a>, and <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01234">xxxRequestAck()</a>.
<p>
<pre class="fragment"><div>01894 {
01895     <a class="code" href="../../d4/d5/structtagFREELIST.html">PFREELIST</a> pfl;
01896 
01897     pfl = (<a class="code" href="../../d4/d5/structtagFREELIST.html">PFREELIST</a>)UserAllocPool(<span class="keyword">sizeof</span>(<a class="code" href="../../d4/d5/structtagFREELIST.html">FREELIST</a>), TAG_DDE1);
01898     <span class="keywordflow">if</span> (!pfl) {
01899         <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
01900     }
01901     <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a2">TRACE_DDE2</a>(<span class="stringliteral">"FreeListAdd: %x for thread %x."</span>, hClient,
01902             pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o0">head</a>.<a class="code" href="../../d1/d1/struct__THROBJHEAD.html#o1">pti</a>-&gt;pEThread-&gt;Cid.UniqueThread);
01903     pfl-&gt;<a class="code" href="../../d4/d5/structtagFREELIST.html#o1">h</a> = hClient;
01904     pfl-&gt;<a class="code" href="../../d4/d5/structtagFREELIST.html#o2">flags</a> = flags;
01905     pfl-&gt;<a class="code" href="../../d4/d5/structtagFREELIST.html#o0">next</a> = pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o7">pfl</a>;
01906     pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o7">pfl</a> = pfl;
01907     <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
01908 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a65" doxytag="kernel/ddetrack.c::FreeListFree" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID FreeListFree           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d4/d5/structtagFREELIST.html">PFREELIST</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pfl</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01943">1943</a> of file <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html">kernel/ddetrack.c</a>.
<p>
References <a class="el" href="../../d5/d0/userk_8h-source.html#l01833">CheckCritIn</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06141">tagFREELIST::next</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d2/d7/hal_8h.html#a212">VOID()</a>.
<p>
Referenced by <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01960">xxxFreeListFree()</a>.
<p>
<pre class="fragment"><div>01945 {
01946     <a class="code" href="../../d4/d5/structtagFREELIST.html">PFREELIST</a> pflPrev;
01947 
01948     <a class="code" href="../../d4/d1/userk_8h.html#a154">CheckCritIn</a>();
01949 
01950     UserAssert(pfl != NULL);
01951 
01952     <span class="keywordflow">while</span> (pfl != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01953         pflPrev = pfl;
01954         pfl = pfl-&gt;<a class="code" href="../../d4/d5/structtagFREELIST.html#o0">next</a>;
01955         UserFreePool(pflPrev);
01956     }
01957 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a45" doxytag="kernel/ddetrack.c::GiveObject" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL GiveObject           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>format</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hObj</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>W32PID&nbsp;</td>
          <td class="mdname" nowrap> <em>pid</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l02427">2427</a> of file <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html">kernel/ddetrack.c</a>.
<p>
References <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d9/d9/rtbatcr_8c-source.html#l00064">format</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l02348">AddPublicObject()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l02385">RemovePublicObject()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01028">xxxAdviseData()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01835">xxxCopyAckIn()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01344">xxxPoke()</a>, and <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01234">xxxRequestAck()</a>.
<p>
<pre class="fragment"><div>02431 {
02432     <span class="keywordflow">switch</span> (<a class="code" href="../../d8/d0/rtbatcr_8c.html#a8">format</a>) {
02433     <span class="keywordflow">case</span> CF_BITMAP:
02434     <span class="keywordflow">case</span> CF_DSPBITMAP:
02435         GreSetBitmapOwner(hObj, pid);
02436         <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
02437 
02438     <span class="keywordflow">case</span> CF_PALETTE:
02439         GreSetPaletteOwner(hObj, pid);
02440         <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
02441 
02442     <span class="keywordflow">default</span>:
02443         <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
02444     }
02445 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a42" doxytag="kernel/ddetrack.c::IsObjectPublic" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d6/d4/structtagPUBOBJ.html">PPUBOBJ</a> IsObjectPublic           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HANDLE&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hObj</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l02333">2333</a> of file <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html">kernel/ddetrack.c</a>.
<p>
References <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00017">gpPublicObjectList</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l02957">tagPUBOBJ::hObj</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l02956">tagPUBOBJ::next</a>, and <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>.
<p>
Referenced by <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l02348">AddPublicObject()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01028">xxxAdviseData()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01344">xxxPoke()</a>, and <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01234">xxxRequestAck()</a>.
<p>
<pre class="fragment"><div>02335 {
02336     <a class="code" href="../../d6/d4/structtagPUBOBJ.html">PPUBOBJ</a> ppo;
02337 
02338     <span class="keywordflow">for</span> (ppo = <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a6">gpPublicObjectList</a>; ppo != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>; ppo = ppo-&gt;<a class="code" href="../../d6/d4/structtagPUBOBJ.html#o0">next</a>) {
02339         <span class="keywordflow">if</span> (ppo-&gt;<a class="code" href="../../d6/d4/structtagPUBOBJ.html#o1">hObj</a> == hObj) {
02340             <span class="keywordflow">break</span>;
02341         }
02342     }
02343     <span class="keywordflow">return</span>(ppo);
02344 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a20" doxytag="kernel/ddetrack.c::NewConversation" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL NewConversation           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d2/structtagDDECONV.html">PDDECONV</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>ppdcNewClient</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d6/d2/structtagDDECONV.html">PDDECONV</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>ppdcNewServer</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwndClient</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwndServer</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01766">1766</a> of file <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html">kernel/ddetrack.c</a>.
<p>
References <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00217">AddConvProp()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06181">CXF_IS_SERVER</a>, <a class="el" href="../../d4/d1/userk_8h.html#a929">DDECONV</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01547">GETPTI</a>, <a class="el" href="../../d5/d7/handtabl_8c-source.html#l00828">HMAllocObject()</a>, <a class="el" href="../../d5/d7/handtabl_8c-source.html#l01069">HMFreeObject()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00915">TYPE_DDECONV</a>.
<p>
Referenced by <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00320">xxxDDETrackPostHook()</a>, and <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00147">xxxDDETrackSendHook()</a>.
<p>
<pre class="fragment"><div>01771 {
01772     <a class="code" href="../../d6/d2/structtagDDECONV.html">PDDECONV</a> pdcNewClient;
01773     <a class="code" href="../../d6/d2/structtagDDECONV.html">PDDECONV</a> pdcNewServer;
01774 
01775     pdcNewClient = <a class="code" href="../../d4/d1/userk_8h.html#a969">HMAllocObject</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a455">GETPTI</a>(pwndClient), NULL,
01776             TYPE_DDECONV, <span class="keyword">sizeof</span>(<a class="code" href="../../d6/d2/structtagDDECONV.html">DDECONV</a>));
01777     <span class="keywordflow">if</span> (pdcNewClient == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01778         <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
01779     }
01780 
01781     pdcNewServer = <a class="code" href="../../d4/d1/userk_8h.html#a969">HMAllocObject</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a455">GETPTI</a>(pwndServer), NULL,
01782             TYPE_DDECONV, <span class="keyword">sizeof</span>(<a class="code" href="../../d6/d2/structtagDDECONV.html">DDECONV</a>));
01783     <span class="keywordflow">if</span> (pdcNewServer == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01784         <a class="code" href="../../d4/d1/userk_8h.html#a970">HMFreeObject</a>(pdcNewClient);     <span class="comment">// we know it's not locked.</span>
01785         <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
01786     }
01787 
01788     <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a22">AddConvProp</a>(pwndClient, pwndServer, 0, pdcNewClient, pdcNewServer);
01789     <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a22">AddConvProp</a>(pwndServer, pwndClient, CXF_IS_SERVER, pdcNewServer,
01790             pdcNewClient);
01791 
01792     <span class="keywordflow">if</span> (ppdcNewClient != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01793         *ppdcNewClient = pdcNewClient;
01794     }
01795     <span class="keywordflow">if</span> (ppdcNewServer != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01796         *ppdcNewServer = pdcNewServer;
01797     }
01798     <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
01799 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a34" doxytag="kernel/ddetrack.c::PopState" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID PopState           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d2/structtagDDECONV.html">PDDECONV</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pDdeConv</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l02001">2001</a> of file <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html">kernel/ddetrack.c</a>.
<p>
References <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01278">tagSHAREDINFO::aheList</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06176">tagXSTATE::flags</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l02285">FreeDdeXact()</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00849">giheLast</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00052">gSharedInfo</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00367">Lock</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06171">tagXSTATE::snext</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06160">tagDDECONV::spxsIn</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06159">tagDDECONV::spxsOut</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00363">ThreadLockAlways</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00366">ThreadUnlock</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00916">TYPE_DDEXACT</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00368">Unlock</a>, <a class="el" href="../../d2/d7/hal_8h.html#a212">VOID()</a>, and <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00052">XS_FREEPXS</a>.
<p>
Referenced by <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01601">DupConvTerminate()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l02042">FreeDdeConv()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00978">xxxAdviseAck()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01113">xxxAdviseDataAck()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01515">xxxExecuteAck()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01411">xxxPokeAck()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01234">xxxRequestAck()</a>, and <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01193">xxxUnadviseAck()</a>.
<p>
<pre class="fragment"><div>02003 {
02004     <a class="code" href="../../d1/d0/structtagXSTATE.html">PXSTATE</a> pxsNext, pxsFree;
02005     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpxs;
02006 
02007     UserAssert(pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o5">spxsOut</a> != NULL);
02008 <span class="preprocessor">#if 0</span>
02009 <span class="preprocessor"></span>    {
02010         <span class="keywordtype">int</span> i;
02011         <a class="code" href="../../d2/d4/struct__HANDLEENTRY.html">HANDLEENTRY</a> *phe;
02012 
02013         <span class="keywordflow">for</span> (i = 0, phe = <a class="code" href="../../d1/d8/clglobal_8c.html#a5">gSharedInfo</a>.<a class="code" href="../../d4/d6/structtagSHAREDINFO.html#o1">aheList</a>;
02014             i &lt;= <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a308">giheLast</a>;
02015                 i++) {
02016             <span class="keywordflow">if</span> (phe[i].bType == <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a247">TYPE_DDEXACT</a>) {
02017                 UserAssert(((<a class="code" href="../../d1/d0/structtagXSTATE.html">PXSTATE</a>)(phe[i].phead))-&gt;snext != pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o5">spxsOut</a>);
02018             }
02019         }
02020     }
02021 <span class="preprocessor">#endif</span>
02022 <span class="preprocessor"></span>    UserAssert(!(pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o5">spxsOut</a>-&gt;<a class="code" href="../../d1/d0/structtagXSTATE.html#o6">flags</a> &amp; XS_FREEPXS));
02023     UserAssert(pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o6">spxsIn</a> != NULL);
02024     UserAssert(pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o6">spxsIn</a>-&gt;<a class="code" href="../../d1/d0/structtagXSTATE.html#o1">snext</a> == NULL);
02025 
02026     <a class="code" href="../../d6/d0/usercli_8h.html#a37">ThreadLockAlways</a>(pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o5">spxsOut</a>, &amp;tlpxs);              <span class="comment">// hold it fast</span>
02027     pxsNext = pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o5">spxsOut</a>-&gt;<a class="code" href="../../d1/d0/structtagXSTATE.html#o1">snext</a>;
02028     pxsFree = <a class="code" href="../../d6/d0/usercli_8h.html#a41">Lock</a>(&amp;(pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o5">spxsOut</a>), pxsNext);      <span class="comment">// lock next into head</span>
02029     <span class="keywordflow">if</span> (pxsNext == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
02030         UserAssert(pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o6">spxsIn</a> == pxsFree);
02031         <a class="code" href="../../d6/d0/usercli_8h.html#a42">Unlock</a>(&amp;(pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o6">spxsIn</a>));                <span class="comment">// queue is empty.</span>
02032     } <span class="keywordflow">else</span> {
02033         <a class="code" href="../../d6/d0/usercli_8h.html#a42">Unlock</a>(&amp;(pxsFree-&gt;<a class="code" href="../../d1/d0/structtagXSTATE.html#o1">snext</a>));                  <span class="comment">// clear next ptr</span>
02034     }
02035     pxsFree = <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpxs);                     <span class="comment">// undo our lock</span>
02036     <span class="keywordflow">if</span> (pxsFree != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
02037         <a class="code" href="../../d4/d1/userk_8h.html#a1875">FreeDdeXact</a>(pxsFree);                           <span class="comment">// cleanup.</span>
02038     }
02039 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a44" doxytag="kernel/ddetrack.c::RemovePublicObject" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL RemovePublicObject           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>format</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hObj</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l02385">2385</a> of file <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html">kernel/ddetrack.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d9/d9/rtbatcr_8c-source.html#l00064">format</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l02427">GiveObject()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00017">gpPublicObjectList</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l02956">tagPUBOBJ::next</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l02285">FreeDdeXact()</a>, and <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01835">xxxCopyAckIn()</a>.
<p>
<pre class="fragment"><div>02388 {
02389     <a class="code" href="../../d6/d4/structtagPUBOBJ.html">PPUBOBJ</a> ppo, ppoPrev;
02390 
02391     <span class="keywordflow">switch</span> (<a class="code" href="../../d8/d0/rtbatcr_8c.html#a8">format</a>) {
02392     <span class="keywordflow">case</span> CF_BITMAP:
02393     <span class="keywordflow">case</span> CF_DSPBITMAP:
02394     <span class="keywordflow">case</span> CF_PALETTE:
02395         <span class="keywordflow">break</span>;
02396 
02397     <span class="keywordflow">default</span>:
02398         <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
02399     }
02400 
02401     <span class="keywordflow">for</span> (ppoPrev = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>, ppo = <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a6">gpPublicObjectList</a>;
02402             ppo != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
02403                 ppoPrev = ppo, ppo = ppo-&gt;<a class="code" href="../../d6/d4/structtagPUBOBJ.html#o0">next</a>) {
02404         <span class="keywordflow">if</span> (ppo-&gt;hObj == hObj) {
02405             <span class="keywordflow">break</span>;
02406         }
02407     }
02408     <span class="keywordflow">if</span> (ppo == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
02409         UserAssert(FALSE);
02410         <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
02411     }
02412     ppo-&gt;count--;
02413     <span class="keywordflow">if</span> (ppo-&gt;count == 0) {
02414         <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a45">GiveObject</a>(format, hObj, ppo-&gt;pid);
02415         <span class="keywordflow">if</span> (ppoPrev != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
02416             ppoPrev-&gt;<a class="code" href="../../d6/d4/structtagPUBOBJ.html#o0">next</a> = ppo-&gt;<a class="code" href="../../d6/d4/structtagPUBOBJ.html#o0">next</a>;
02417         } <span class="keywordflow">else</span> {
02418             <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a6">gpPublicObjectList</a> = ppo-&gt;<a class="code" href="../../d6/d4/structtagPUBOBJ.html#o0">next</a>;
02419         }
02420         UserFreePool(ppo);
02421     }
02422     <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
02423 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a24" doxytag="kernel/ddetrack.c::Request" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> Request           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d2/structtagDDECONV.html">PDDECONV</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pDdeConv</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01221">1221</a> of file <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html">kernel/ddetrack.c</a>.
<p>
References <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01634">AnticipatePost()</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00063">DO_POST</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00061">FAIL_POST</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06156">tagDDECONV::spartnerConv</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00019">TRACE_DDE</a>, and <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00038">xxxRequestAck</a>.
<p>
Referenced by <a class="el" href="../../d1/d0/pnpirp_8c-source.html#l02733">IopQueryReconfiguration()</a>, <a class="el" href="../../d3/d3/internal_8c-source.html#l06127">IopSendMessageToTrackService()</a>, <a class="el" href="../../d7/d5/lpccreat_8c-source.html#l00136">LpcpCreatePort()</a>, <a class="el" href="../../d8/d6/lpcsvr_8c-source.html#l00712">RtlCallbackLpcClient()</a>, <a class="el" href="../../d4/d8/ulpc_8h-source.html#l00208">SendRequest()</a>, and <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00895">xxxUnexpectedClientPost()</a>.
<p>
<pre class="fragment"><div>01223 {
01224     <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a0">TRACE_DDE</a>(<span class="stringliteral">"Request"</span>);
01225     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a26">AnticipatePost</a>(pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o2">spartnerConv</a>, xxxRequestAck, NULL, NULL, NULL, 0)) {
01226         <span class="keywordflow">return</span>(<a class="code" href="../../d6/d4/ddetrack_8h.html#a19">DO_POST</a>);
01227     } <span class="keywordflow">else</span> {
01228         <span class="keywordflow">return</span>(<a class="code" href="../../d6/d4/ddetrack_8h.html#a17">FAIL_POST</a>);
01229     }
01230 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a25" doxytag="kernel/ddetrack.c::SpontaneousTerminate" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> SpontaneousTerminate           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">PDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>pmessage</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d6/d2/structtagDDECONV.html">PDDECONV</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pDdeConv</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01565">1565</a> of file <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html">kernel/ddetrack.c</a>.
<p>
References <a class="el" href="../../d5/d0/userk_8h-source.html#l06182">CXF_TERMINATE_POSTED</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00063">DO_POST</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00062">FAKE_POST</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06162">tagDDECONV::flags</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02219">MSGFLAG_DDE_MID_THUNK</a>, and <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00019">TRACE_DDE</a>.
<p>
Referenced by <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00895">xxxUnexpectedClientPost()</a>, and <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00853">xxxUnexpectedServerPost()</a>.
<p>
<pre class="fragment"><div>01568 {
01569     <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a0">TRACE_DDE</a>(<span class="stringliteral">"SpontaneousTerminate"</span>);
01570     <span class="keywordflow">if</span> (pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o8">flags</a> &amp; <a class="code" href="../../d4/d1/userk_8h.html#a603">CXF_TERMINATE_POSTED</a>) {
01571         <span class="keywordflow">return</span>(<a class="code" href="../../d6/d4/ddetrack_8h.html#a18">FAKE_POST</a>);
01572     } <span class="keywordflow">else</span> {
01573         pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o8">flags</a> |= <a class="code" href="../../d4/d1/userk_8h.html#a603">CXF_TERMINATE_POSTED</a>;
01574         *pmessage |= <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a545">MSGFLAG_DDE_MID_THUNK</a>;
01575         <span class="keywordflow">return</span>(<a class="code" href="../../d6/d4/ddetrack_8h.html#a19">DO_POST</a>);
01576     }
01577 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a23" doxytag="kernel/ddetrack.c::Unadvise" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> Unadvise           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d2/structtagDDECONV.html">PDDECONV</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pDdeConv</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01180">1180</a> of file <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html">kernel/ddetrack.c</a>.
<p>
References <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01634">AnticipatePost()</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00063">DO_POST</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00061">FAIL_POST</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06156">tagDDECONV::spartnerConv</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00019">TRACE_DDE</a>, and <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00036">xxxUnadviseAck</a>.
<p>
Referenced by <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00895">xxxUnexpectedClientPost()</a>.
<p>
<pre class="fragment"><div>01182 {
01183     <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a0">TRACE_DDE</a>(<span class="stringliteral">"Unadvise"</span>);
01184     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a26">AnticipatePost</a>(pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o2">spartnerConv</a>, xxxUnadviseAck, NULL, NULL, NULL, 0)) {
01185         <span class="keywordflow">return</span>(<a class="code" href="../../d6/d4/ddetrack_8h.html#a19">DO_POST</a>);
01186     } <span class="keywordflow">else</span> {
01187         <span class="keywordflow">return</span>(<a class="code" href="../../d6/d4/ddetrack_8h.html#a17">FAIL_POST</a>);
01188     }
01189 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a35" doxytag="kernel/ddetrack.c::UnlinkConv" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d6/d2/structtagDDECONV.html">PDDECONV</a> UnlinkConv           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d2/structtagDDECONV.html">PDDECONV</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pDdeConv</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00264">264</a> of file <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html">kernel/ddetrack.c</a>.
<p>
References <a class="el" href="../../d8/d7/rtl_2winprop_8c-source.html#l00106">_GetProp()</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l01186">HMUnlockObject</a>, <a class="el" href="../../d5/d7/kernel_2winprop_8c-source.html#l00098">InternalRemoveProp()</a>, <a class="el" href="../../d5/d7/kernel_2winprop_8c-source.html#l00039">InternalSetProp()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00367">Lock</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03893">PROP_DDETRACK</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01722">PROPF_INTERNAL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06155">tagDDECONV::snext</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06157">tagDDECONV::spwnd</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00020">TRACE_DDE1</a>, and <a class="el" href="../../d7/d9/usercli_8h-source.html#l00368">Unlock</a>.
<p>
Referenced by <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l02042">FreeDdeConv()</a>, and <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00768">xxxDDETrackWindowDying()</a>.
<p>
<pre class="fragment"><div>00266 {
00267     <a class="code" href="../../d6/d2/structtagDDECONV.html">PDDECONV</a> pdcPrev, pdcT, pDdeConvNext;
00268 
00269     <span class="comment">/*</span>
00270 <span class="comment">     * Already unlinked</span>
00271 <span class="comment">     */</span>
00272     <span class="keywordflow">if</span> (pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o3">spwnd</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00273         <span class="keywordflow">return</span>(<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>);
00274     }
00275     <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a1">TRACE_DDE1</a>(<span class="stringliteral">"UnlinkConv(%#p)"</span>, pDdeConv);
00276 
00277     pdcT = (<a class="code" href="../../d6/d2/structtagDDECONV.html">PDDECONV</a>)<a class="code" href="../../d7/d8/rtl_2winprop_8c.html#a2">_GetProp</a>(pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o3">spwnd</a>,
00278             PROP_DDETRACK, PROPF_INTERNAL);
00279     <span class="keywordflow">if</span> (pdcT == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00280         <span class="keywordflow">return</span>(<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>);             <span class="comment">// already unlinked</span>
00281     }
00282 
00283     pdcPrev = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00284     <span class="keywordflow">while</span> (pdcT != pDdeConv) {
00285         pdcPrev = pdcT;
00286         pdcT = pdcT-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o1">snext</a>;
00287         <span class="keywordflow">if</span> (pdcT == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00288             <span class="keywordflow">return</span>(<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>);        <span class="comment">// already unlinked</span>
00289         }
00290     }
00291 
00292     <span class="keywordflow">if</span> (pdcPrev == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00293         <span class="keywordflow">if</span> (pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o1">snext</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00294             <span class="comment">// last one out removes the property</span>
00295             <a class="code" href="../../d4/d8/kernel_2winprop_8c.html#a1">InternalRemoveProp</a>(pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o3">spwnd</a>, PROP_DDETRACK, PROPF_INTERNAL);
00296         } <span class="keywordflow">else</span> {
00297             <span class="comment">// head conv unlinked - update prop</span>
00298             <a class="code" href="../../d4/d8/kernel_2winprop_8c.html#a0">InternalSetProp</a>(pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o3">spwnd</a>, PROP_DDETRACK, pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o1">snext</a>,
00299                     PROPF_INTERNAL);
00300         }
00301     } <span class="keywordflow">else</span> {
00302         <a class="code" href="../../d6/d0/usercli_8h.html#a41">Lock</a>(&amp;(pdcPrev-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o1">snext</a>), pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o1">snext</a>);
00303     }
00304     pDdeConvNext = <a class="code" href="../../d6/d0/usercli_8h.html#a42">Unlock</a>(&amp;(pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o1">snext</a>));
00305     <a class="code" href="../../d4/d1/userk_8h.html#a110">HMUnlockObject</a>(pDdeConv);      <span class="comment">// unlock for property detachment</span>
00306     <span class="keywordflow">return</span>(pDdeConvNext);
00307 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a53" doxytag="kernel/ddetrack.c::xxxAdvise" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> xxxAdvise           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">PDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>pmessage</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM *&nbsp;</td>
          <td class="mdname" nowrap> <em>plParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d6/d2/structtagDDECONV.html">PDDECONV</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pDdeConv</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00942">942</a> of file <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html">kernel/ddetrack.c</a>.
<p>
References <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01634">AnticipatePost()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00063">DO_POST</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00064">FAILNOFREE_POST</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02219">MSGFLAG_DDE_MID_THUNK</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06156">tagDDECONV::spartnerConv</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00019">TRACE_DDE</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00050">XS_LOHANDLE</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00043">XS_PACKED</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00032">xxxAdviseAck</a>, and <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l02104">xxxCopyDdeIn()</a>.
<p>
Referenced by <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00895">xxxUnexpectedClientPost()</a>.
<p>
<pre class="fragment"><div>00946 {
00947     <a class="code" href="../../d7/d8/structtagINTDDEINFO.html">PINTDDEINFO</a> pIntDdeInfo;
00948     HANDLE hDirect;
00949     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> flags, dwRet;
00950 
00951     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pDdeConv);
00952 
00953     <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a0">TRACE_DDE</a>(<span class="stringliteral">"xxxAdvise"</span>);
00954     flags = <a class="code" href="../../d6/d4/ddetrack_8h.html#a0">XS_PACKED</a> | <a class="code" href="../../d6/d4/ddetrack_8h.html#a7">XS_LOHANDLE</a>;
00955     dwRet = <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a29">xxxCopyDdeIn</a>((HANDLE)*plParam, &amp;flags, &amp;hDirect, &amp;pIntDdeInfo);
00956     <span class="keywordflow">if</span> (dwRet == <a class="code" href="../../d6/d4/ddetrack_8h.html#a19">DO_POST</a>) {
00957         UserAssert(pIntDdeInfo != NULL);
00958         *pmessage |= <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a545">MSGFLAG_DDE_MID_THUNK</a>;
00959         *plParam = (LPARAM)<a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a26">AnticipatePost</a>(pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o2">spartnerConv</a>, xxxAdviseAck,
00960              hDirect, NULL, pIntDdeInfo, flags);
00961         <span class="keywordflow">if</span> (*plParam == 0) {
00962             dwRet = <a class="code" href="../../d6/d4/ddetrack_8h.html#a20">FAILNOFREE_POST</a>;
00963         }
00964     }
00965     <span class="keywordflow">return</span> dwRet;
00966 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a54" doxytag="kernel/ddetrack.c::xxxAdviseAck" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> xxxAdviseAck           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">PDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>pmessage</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM *&nbsp;</td>
          <td class="mdname" nowrap> <em>plParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d6/d2/structtagDDECONV.html">PDDECONV</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pDdeConv</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00978">978</a> of file <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html">kernel/ddetrack.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00029">tagINTDDEINFO::DdePack</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00063">DO_POST</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06176">tagXSTATE::flags</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01890">FreeListAdd()</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06173">tagXSTATE::hClient</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06174">tagXSTATE::hServer</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l02001">PopState()</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06156">tagDDECONV::spartnerConv</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06159">tagDDECONV::spxsOut</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00019">TRACE_DDE</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00013">tagDDEPACK::uiLo</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00043">XS_PACKED</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01835">xxxCopyAckIn()</a>, and <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00853">xxxUnexpectedServerPost()</a>.
<p>
<pre class="fragment"><div>00982 {
00983     <a class="code" href="../../d1/d0/structtagXSTATE.html">PXSTATE</a> pxsFree;
00984     <a class="code" href="../../d7/d8/structtagINTDDEINFO.html">PINTDDEINFO</a> pIntDdeInfo;
00985     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwRet;
00986 
00987     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pDdeConv);
00988 
00989     <span class="keywordflow">if</span> (*pmessage != WM_DDE_ACK) {
00990         <span class="keywordflow">return</span>(<a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a51">xxxUnexpectedServerPost</a>(pmessage, plParam, pDdeConv));
00991     }
00992 
00993     <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a0">TRACE_DDE</a>(<span class="stringliteral">"xxxAdviseAck"</span>);
00994 
00995     dwRet = <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a64">xxxCopyAckIn</a>(pmessage, plParam, pDdeConv, &amp;pIntDdeInfo);
00996     <span class="keywordflow">if</span> (dwRet != <a class="code" href="../../d6/d4/ddetrack_8h.html#a19">DO_POST</a>) {
00997         <span class="keywordflow">return</span> dwRet;
00998     }
00999     UserAssert(pIntDdeInfo != NULL);
01000 
01001     pxsFree = pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o5">spxsOut</a>;
01002     <span class="keywordflow">if</span> (pIntDdeInfo-&gt;<a class="code" href="../../d7/d8/structtagINTDDEINFO.html#o0">DdePack</a>.<a class="code" href="../../d9/d2/structtagDDEPACK.html#o0">uiLo</a> &amp; DDE_FACK) {
01003 
01004         <span class="comment">/*</span>
01005 <span class="comment">         * positive ack implies server accepted the hOptions data - free from</span>
01006 <span class="comment">         * client at postmessage time.</span>
01007 <span class="comment">         */</span>
01008         <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a0">TRACE_DDE</a>(<span class="stringliteral">"xxxAdviseAck: +ACK delayed freeing data from client"</span>);
01009         <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a32">FreeListAdd</a>(pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o2">spartnerConv</a>, pxsFree-&gt;<a class="code" href="../../d1/d0/structtagXSTATE.html#o3">hClient</a>, pxsFree-&gt;<a class="code" href="../../d1/d0/structtagXSTATE.html#o6">flags</a> &amp; ~XS_PACKED);
01010     } <span class="keywordflow">else</span> {
01011         <span class="comment">// Shouldn't this be freed directly?</span>
01012         <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a0">TRACE_DDE</a>(<span class="stringliteral">"xxxAdviseAck: -ACK delayed freeing data from server"</span>);
01013         <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a32">FreeListAdd</a>(pDdeConv, pxsFree-&gt;<a class="code" href="../../d1/d0/structtagXSTATE.html#o4">hServer</a>, pxsFree-&gt;<a class="code" href="../../d1/d0/structtagXSTATE.html#o6">flags</a> &amp; ~XS_PACKED);
01014     }
01015 
01016     <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a34">PopState</a>(pDdeConv);
01017     <span class="keywordflow">return</span>(<a class="code" href="../../d6/d4/ddetrack_8h.html#a19">DO_POST</a>);
01018 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a55" doxytag="kernel/ddetrack.c::xxxAdviseData" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> xxxAdviseData           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">PDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>pmessage</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM *&nbsp;</td>
          <td class="mdname" nowrap> <em>plParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d6/d2/structtagDDECONV.html">PDDECONV</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pDdeConv</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01028">1028</a> of file <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html">kernel/ddetrack.c</a>.
<p>
References <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l02348">AddPublicObject()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01634">AnticipatePost()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01689">Createpxs()</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00063">DO_POST</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00064">FAILNOFREE_POST</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01919">FreeDDEHandle()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01547">GETPTI</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l02427">GiveObject()</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06170">tagXSTATE::head</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l02333">IsObjectPublic()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02219">MSGFLAG_DDE_MID_THUNK</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01457">_THROBJHEAD::pti</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01512">PtoH</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06156">tagDDECONV::spartnerConv</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06157">tagDDECONV::spwnd</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06158">tagDDECONV::spwndPartner</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00019">TRACE_DDE</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00020">TRACE_DDE1</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00044">XS_DATA</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00052">XS_FREEPXS</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00053">XS_FRELEASE</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00057">XS_GIVEBACKONNACK</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00050">XS_LOHANDLE</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00043">XS_PACKED</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00056">XS_PUBLICOBJ</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00034">xxxAdviseDataAck</a>, and <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l02104">xxxCopyDdeIn()</a>.
<p>
Referenced by <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01234">xxxRequestAck()</a>, and <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00853">xxxUnexpectedServerPost()</a>.
<p>
<pre class="fragment"><div>01032 {
01033     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> flags, dwRet;
01034     <a class="code" href="../../d7/d8/structtagINTDDEINFO.html">PINTDDEINFO</a> pIntDdeInfo;
01035     HANDLE hDirect;
01036     <a class="code" href="../../d1/d0/structtagXSTATE.html">PXSTATE</a> pxs;
01037 
01038     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pDdeConv);
01039 
01040     <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a0">TRACE_DDE</a>(<span class="stringliteral">"xxxAdviseData"</span>);
01041 
01042     flags = <a class="code" href="../../d6/d4/ddetrack_8h.html#a0">XS_PACKED</a> | <a class="code" href="../../d6/d4/ddetrack_8h.html#a7">XS_LOHANDLE</a> | <a class="code" href="../../d6/d4/ddetrack_8h.html#a1">XS_DATA</a>;
01043 
01044     dwRet = <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a29">xxxCopyDdeIn</a>((HANDLE)*plParam, &amp;flags, &amp;hDirect, &amp;pIntDdeInfo);
01045     <span class="keywordflow">if</span> (dwRet == <a class="code" href="../../d6/d4/ddetrack_8h.html#a19">DO_POST</a>) {
01046         UserAssert(pIntDdeInfo != NULL);
01047         <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a1">TRACE_DDE1</a>(<span class="stringliteral">"xxxAdviseData: wStatus = %x"</span>,
01048                 ((<a class="code" href="../../d4/d2/structtagDDE__DATA.html">PDDE_DATA</a>)(pIntDdeInfo + 1))-&gt;wStatus);
01049         <span class="keywordflow">if</span> (!(((<a class="code" href="../../d4/d2/structtagDDE__DATA.html">PDDE_DATA</a>)(pIntDdeInfo + 1))-&gt;wStatus &amp; (DDE_FACK | DDE_FRELEASE))) {
01050             RIPMSG0(RIP_ERROR, <span class="stringliteral">"DDE protocol violation - no RELEASE or ACK bit set - setting RELEASE."</span>);
01051             ((<a class="code" href="../../d4/d2/structtagDDE__DATA.html">PDDE_DATA</a>)(pIntDdeInfo + 1))-&gt;wStatus |= DDE_FRELEASE;
01052         }
01053         <span class="keywordflow">if</span> (((<a class="code" href="../../d4/d2/structtagDDE__DATA.html">PDDE_DATA</a>)(pIntDdeInfo + 1))-&gt;wStatus &amp; DDE_FRELEASE) {
01054             <span class="comment">/*</span>
01055 <span class="comment">             * giving it away</span>
01056 <span class="comment">             */</span>
01057             <span class="keywordflow">if</span> (<a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a42">IsObjectPublic</a>(pIntDdeInfo-&gt;<a class="code" href="../../d7/d8/structtagINTDDEINFO.html#o5">hIndirect</a>) != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01058                 RIPMSG0(RIP_ERROR, <span class="stringliteral">"DDE Protocol violation - giving away a public GDI object."</span>);
01059                 UserFreePool(pIntDdeInfo);
01060                 <span class="keywordflow">return</span>(<a class="code" href="../../d6/d4/ddetrack_8h.html#a20">FAILNOFREE_POST</a>);
01061             }
01062             <span class="keywordflow">if</span> (<a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a45">GiveObject</a>(((<a class="code" href="../../d4/d2/structtagDDE__DATA.html">PDDE_DATA</a>)(pIntDdeInfo + 1))-&gt;wFmt,
01063                     pIntDdeInfo-&gt;hIndirect,
01064                     (W32PID)(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a455">GETPTI</a>(pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o4">spwndPartner</a>)-&gt;ppi-&gt;W32Pid))) {
01065                 flags |= <a class="code" href="../../d6/d4/ddetrack_8h.html#a14">XS_GIVEBACKONNACK</a>;
01066             }
01067             flags |= <a class="code" href="../../d6/d4/ddetrack_8h.html#a10">XS_FRELEASE</a>;
01068         } <span class="keywordflow">else</span> {
01069             <span class="comment">/*</span>
01070 <span class="comment">             * on loan</span>
01071 <span class="comment">             */</span>
01072             <span class="keywordflow">if</span> (<a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a43">AddPublicObject</a>(((<a class="code" href="../../d4/d2/structtagDDE__DATA.html">PDDE_DATA</a>)(pIntDdeInfo + 1))-&gt;wFmt,
01073                         pIntDdeInfo-&gt;hIndirect,
01074                         (W32PID)(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a455">GETPTI</a>(pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o3">spwnd</a>)-&gt;ppi-&gt;W32Pid))) {
01075                 flags |= <a class="code" href="../../d6/d4/ddetrack_8h.html#a13">XS_PUBLICOBJ</a>;
01076             }
01077         }
01078 
01079         *pmessage |= <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a545">MSGFLAG_DDE_MID_THUNK</a>;
01080         <span class="keywordflow">if</span> (((<a class="code" href="../../d4/d2/structtagDDE__DATA.html">PDDE_DATA</a>)(pIntDdeInfo + 1))-&gt;wStatus &amp; DDE_FACK) {
01081             *plParam = (LPARAM)<a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a26">AnticipatePost</a>(pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o2">spartnerConv</a>,
01082                 xxxAdviseDataAck, NULL, hDirect, pIntDdeInfo, flags);
01083         } <span class="keywordflow">else</span> {
01084             <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a0">TRACE_DDE</a>(<span class="stringliteral">"xxxAdviseData: dumping non Ackable data..."</span>);
01085             UserAssert(hDirect != (HANDLE)*plParam);
01086             <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a36">FreeDDEHandle</a>(pDdeConv, hDirect, flags &amp; ~XS_PACKED);
01087             pxs = <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a27">Createpxs</a>(NULL, NULL, NULL, pIntDdeInfo, flags | XS_FREEPXS);
01088             <span class="keywordflow">if</span> (pxs != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01089                 pxs-&gt;<a class="code" href="../../d1/d0/structtagXSTATE.html#o0">head</a>.<a class="code" href="../../d1/d1/struct__THROBJHEAD.html#o1">pti</a> = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a455">GETPTI</a>(pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o4">spwndPartner</a>);
01090             }
01091             *plParam = (LPARAM)<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a448">PtoH</a>(pxs);
01092         }
01093         <span class="keywordflow">if</span> (*plParam == 0) {
01094             dwRet = <a class="code" href="../../d6/d4/ddetrack_8h.html#a20">FAILNOFREE_POST</a>;
01095         }
01096     }
01097     <span class="keywordflow">return</span> dwRet;
01098 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a56" doxytag="kernel/ddetrack.c::xxxAdviseDataAck" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> xxxAdviseDataAck           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">PDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>pmessage</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM *&nbsp;</td>
          <td class="mdname" nowrap> <em>plParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d6/d2/structtagDDECONV.html">PDDECONV</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pDdeConv</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01113">1113</a> of file <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html">kernel/ddetrack.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00029">tagINTDDEINFO::DdePack</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00063">DO_POST</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06176">tagXSTATE::flags</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01919">FreeDDEHandle()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01890">FreeListAdd()</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06173">tagXSTATE::hClient</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06174">tagXSTATE::hServer</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l02001">PopState()</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06156">tagDDECONV::spartnerConv</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06159">tagDDECONV::spxsOut</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00019">TRACE_DDE</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00020">TRACE_DDE1</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00022">TRACE_DDE3</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00013">tagDDEPACK::uiLo</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00053">XS_FRELEASE</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00043">XS_PACKED</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01835">xxxCopyAckIn()</a>, and <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00895">xxxUnexpectedClientPost()</a>.
<p>
<pre class="fragment"><div>01117 {
01118     <a class="code" href="../../d1/d0/structtagXSTATE.html">PXSTATE</a> pxsFree;
01119     <a class="code" href="../../d7/d8/structtagINTDDEINFO.html">PINTDDEINFO</a> pIntDdeInfo;
01120     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwRet;
01121 
01122     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pDdeConv);
01123 
01124     <span class="comment">/*</span>
01125 <span class="comment">     * This is also used for request data ack processing.</span>
01126 <span class="comment">     */</span>
01127     <span class="keywordflow">if</span> (*pmessage != WM_DDE_ACK) {
01128         <span class="keywordflow">return</span>(<a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a52">xxxUnexpectedClientPost</a>(pmessage, plParam, pDdeConv));
01129     }
01130 
01131     <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a0">TRACE_DDE</a>(<span class="stringliteral">"xxxAdviseDataAck"</span>);
01132 
01133     dwRet = <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a64">xxxCopyAckIn</a>(pmessage, plParam, pDdeConv, &amp;pIntDdeInfo);
01134     <span class="keywordflow">if</span> (dwRet != <a class="code" href="../../d6/d4/ddetrack_8h.html#a19">DO_POST</a>) {
01135         <span class="keywordflow">return</span> dwRet;
01136     }
01137     UserAssert(pIntDdeInfo != NULL);
01138 
01139     pxsFree = pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o5">spxsOut</a>;
01140     <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a3">TRACE_DDE3</a>(<span class="stringliteral">"xxxAdviseDataAck:pxs.hClient(%#p), hServer(%#p), wStatus(%x)"</span>,
01141             pxsFree-&gt;<a class="code" href="../../d1/d0/structtagXSTATE.html#o3">hClient</a>, pxsFree-&gt;<a class="code" href="../../d1/d0/structtagXSTATE.html#o4">hServer</a>, pIntDdeInfo-&gt;<a class="code" href="../../d7/d8/structtagINTDDEINFO.html#o0">DdePack</a>.<a class="code" href="../../d9/d2/structtagDDEPACK.html#o0">uiLo</a>);
01142     <span class="keywordflow">if</span> (pIntDdeInfo-&gt;<a class="code" href="../../d7/d8/structtagINTDDEINFO.html#o0">DdePack</a>.<a class="code" href="../../d9/d2/structtagDDEPACK.html#o0">uiLo</a> &amp; DDE_FACK) {
01143 
01144         <span class="comment">/*</span>
01145 <span class="comment">         * positive ack implies client accepted the data - free from</span>
01146 <span class="comment">         * server at postmessage time iff FRELEASE was set in data msg.</span>
01147 <span class="comment">         */</span>
01148         <span class="keywordflow">if</span> (pxsFree-&gt;<a class="code" href="../../d1/d0/structtagXSTATE.html#o6">flags</a> &amp; <a class="code" href="../../d6/d4/ddetrack_8h.html#a10">XS_FRELEASE</a>) {
01149             <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a0">TRACE_DDE</a>(<span class="stringliteral">"xxxAdviseDataAck: +ACK delayed server data free"</span>);
01150             <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a32">FreeListAdd</a>(pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o2">spartnerConv</a>, pxsFree-&gt;<a class="code" href="../../d1/d0/structtagXSTATE.html#o4">hServer</a>,
01151                     pxsFree-&gt;<a class="code" href="../../d1/d0/structtagXSTATE.html#o6">flags</a> &amp; ~XS_PACKED);
01152         } <span class="keywordflow">else</span> {
01153             <span class="comment">/*</span>
01154 <span class="comment">             * Ack w/out fRelease bit means client is done with data.</span>
01155 <span class="comment">             */</span>
01156             <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a1">TRACE_DDE1</a>(<span class="stringliteral">"xxxAdviseDataAck: Freeing %#p. (+ACK)"</span>,
01157                     pxsFree-&gt;<a class="code" href="../../d1/d0/structtagXSTATE.html#o3">hClient</a>);
01158             UserAssert(pxsFree-&gt;<a class="code" href="../../d1/d0/structtagXSTATE.html#o3">hClient</a> != (HANDLE)*plParam);
01159             <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a36">FreeDDEHandle</a>(pDdeConv, pxsFree-&gt;<a class="code" href="../../d1/d0/structtagXSTATE.html#o3">hClient</a>, pxsFree-&gt;<a class="code" href="../../d1/d0/structtagXSTATE.html#o6">flags</a> &amp; ~XS_PACKED);
01160         }
01161 
01162     } <span class="keywordflow">else</span> {
01163         <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a1">TRACE_DDE1</a>(<span class="stringliteral">"xxxAdviseDataAck: Freeing %#p. (-ACK)"</span>,
01164                 pxsFree-&gt;<a class="code" href="../../d1/d0/structtagXSTATE.html#o3">hClient</a>);
01165         <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a36">FreeDDEHandle</a>(pDdeConv, pxsFree-&gt;<a class="code" href="../../d1/d0/structtagXSTATE.html#o3">hClient</a>, pxsFree-&gt;<a class="code" href="../../d1/d0/structtagXSTATE.html#o6">flags</a> &amp; ~XS_PACKED);
01166         UserAssert(pxsFree-&gt;<a class="code" href="../../d1/d0/structtagXSTATE.html#o3">hClient</a> != (HANDLE)*plParam);
01167     }
01168     <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a34">PopState</a>(pDdeConv);
01169     <span class="keywordflow">return</span>(<a class="code" href="../../d6/d4/ddetrack_8h.html#a19">DO_POST</a>);
01170 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a48" doxytag="kernel/ddetrack.c::xxxCleanupDdeConv" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void xxxCleanupDdeConv           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pwndProp</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00548">548</a> of file <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html">kernel/ddetrack.c</a>.
<p>
References <a class="el" href="../../d8/d7/rtl_2winprop_8c-source.html#l00106">_GetProp()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l01833">CheckCritIn</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06181">CXF_IS_SERVER</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06183">CXF_PARTNER_WINDOW_DIED</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06182">CXF_TERMINATE_POSTED</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06162">tagDDECONV::flags</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l02042">FreeDdeConv()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06161">tagDDECONV::pfl</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03893">PROP_DDETRACK</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01722">PROPF_INTERNAL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06155">tagDDECONV::snext</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06156">tagDDECONV::spartnerConv</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00363">ThreadLockAlways</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00366">ThreadUnlock</a>, and <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01960">xxxFreeListFree()</a>.
<p>
Referenced by <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00618">xxxDDETrackGetMessageHook()</a>.
<p>
<pre class="fragment"><div>00550 {
00551     <a class="code" href="../../d6/d2/structtagDDECONV.html">PDDECONV</a> pDdeConv;
00552 
00553 Restart:
00554 
00555     <a class="code" href="../../d4/d1/userk_8h.html#a154">CheckCritIn</a>();
00556 
00557     pDdeConv = (<a class="code" href="../../d6/d2/structtagDDECONV.html">PDDECONV</a>)<a class="code" href="../../d7/d8/rtl_2winprop_8c.html#a2">_GetProp</a>(pwndProp, PROP_DDETRACK, PROPF_INTERNAL);
00558     
00559     <span class="keywordflow">while</span> (pDdeConv != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00560         <span class="keywordflow">if</span> ((pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o8">flags</a> &amp; (<a class="code" href="../../d4/d1/userk_8h.html#a602">CXF_IS_SERVER</a> | <a class="code" href="../../d4/d1/userk_8h.html#a603">CXF_TERMINATE_POSTED</a> | <a class="code" href="../../d4/d1/userk_8h.html#a604">CXF_PARTNER_WINDOW_DIED</a>))
00561                 == (<a class="code" href="../../d4/d1/userk_8h.html#a602">CXF_IS_SERVER</a> | <a class="code" href="../../d4/d1/userk_8h.html#a603">CXF_TERMINATE_POSTED</a> | <a class="code" href="../../d4/d1/userk_8h.html#a604">CXF_PARTNER_WINDOW_DIED</a>) &amp;&amp;
00562             
00563             (pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o2">spartnerConv</a>-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o8">flags</a> &amp; <a class="code" href="../../d4/d1/userk_8h.html#a603">CXF_TERMINATE_POSTED</a>)) {
00564             
00565             <span class="comment">/*</span>
00566 <span class="comment">             * clean up client side objects on this side</span>
00567 <span class="comment">             */</span>
00568             <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fUnlockDdeConv;
00569             <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpDdeConv;
00570 
00571             RIPMSG1(RIP_VERBOSE, <span class="stringliteral">"xxxCleanupDdeConv %p"</span>, pDdeConv);
00572 
00573             fUnlockDdeConv = (pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o7">pfl</a> != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>);
00574             <span class="keywordflow">if</span> (fUnlockDdeConv) {
00575                 <a class="code" href="../../d4/d5/structtagFREELIST.html">PFREELIST</a> pfl;
00576 
00577                 <a class="code" href="../../d6/d0/usercli_8h.html#a37">ThreadLockAlways</a>(pDdeConv, &amp;tlpDdeConv);
00578 
00579                 pfl = pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o7">pfl</a>;
00580                 pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o7">pfl</a> = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00581                 <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a33">xxxFreeListFree</a>(pfl);
00582             }
00583 
00584             <a class="code" href="../../d4/d1/userk_8h.html#a1878">FreeDdeConv</a>(pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o2">spartnerConv</a>);
00585             <a class="code" href="../../d4/d1/userk_8h.html#a1878">FreeDdeConv</a>(pDdeConv);
00586 
00587             <span class="keywordflow">if</span> (fUnlockDdeConv) {
00588                 <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpDdeConv);
00589             }
00590             
00591             <span class="comment">/*</span>
00592 <span class="comment">             * Take it back from the top. The list might have changed</span>
00593 <span class="comment">             * if we left the critical section</span>
00594 <span class="comment">             */</span>
00595             <span class="keywordflow">goto</span> Restart;
00596         }
00597         
00598         pDdeConv = pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o1">snext</a>;
00599     }
00600 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a39" doxytag="kernel/ddetrack.c::xxxClientCopyDDEIn1" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> xxxClientCopyDDEIn1           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hClient</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>flags</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d7/d8/structtagINTDDEINFO.html">PINTDDEINFO</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>ppi</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l02104">xxxCopyDdeIn()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a40" doxytag="kernel/ddetrack.c::xxxClientCopyDDEOut1" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HANDLE xxxClientCopyDDEOut1           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d8/structtagINTDDEINFO.html">PINTDDEINFO</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pIntDdeInfo</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l02149">xxxCopyDDEOut()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a41" doxytag="kernel/ddetrack.c::xxxClientCopyDDEOut2" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> xxxClientCopyDDEOut2           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d8/structtagINTDDEINFO.html">PINTDDEINFO</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pIntDdeInfo</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a64" doxytag="kernel/ddetrack.c::xxxCopyAckIn" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> xxxCopyAckIn           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>pmessage</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM *&nbsp;</td>
          <td class="mdname" nowrap> <em>plParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d6/d2/structtagDDECONV.html">PDDECONV</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pDdeConv</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d7/d8/structtagINTDDEINFO.html">PINTDDEINFO</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>ppIntDdeInfo</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01835">1835</a> of file <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html">kernel/ddetrack.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01689">Createpxs()</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00063">DO_POST</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00064">FAILNOFREE_POST</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06176">tagXSTATE::flags</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01547">GETPTI</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l02427">GiveObject()</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06170">tagXSTATE::head</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00034">tagINTDDEINFO::hIndirect</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02219">MSGFLAG_DDE_MID_THUNK</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06175">tagXSTATE::pIntDdeInfo</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01457">_THROBJHEAD::pti</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01512">PtoH</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l02385">RemovePublicObject()</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06158">tagDDECONV::spwndPartner</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06159">tagDDECONV::spxsOut</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00052">XS_FREEPXS</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00055">XS_FREESRC</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00057">XS_GIVEBACKONNACK</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00043">XS_PACKED</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00056">XS_PUBLICOBJ</a>, and <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l02104">xxxCopyDdeIn()</a>.
<p>
Referenced by <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00978">xxxAdviseAck()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01113">xxxAdviseDataAck()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01411">xxxPokeAck()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01234">xxxRequestAck()</a>, and <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01193">xxxUnadviseAck()</a>.
<p>
<pre class="fragment"><div>01840 {
01841     <a class="code" href="../../d7/d8/structtagINTDDEINFO.html">PINTDDEINFO</a> pIntDdeInfo;
01842     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> flags, dwRet;
01843     <a class="code" href="../../d1/d0/structtagXSTATE.html">PXSTATE</a> pxs;
01844 
01845     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pDdeConv);
01846 
01847     flags = <a class="code" href="../../d6/d4/ddetrack_8h.html#a0">XS_PACKED</a> | <a class="code" href="../../d6/d4/ddetrack_8h.html#a12">XS_FREESRC</a>;
01848     dwRet = <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a29">xxxCopyDdeIn</a>((HANDLE)*plParam, &amp;flags, NULL, ppIntDdeInfo);
01849     <span class="keywordflow">if</span> (dwRet == <a class="code" href="../../d6/d4/ddetrack_8h.html#a19">DO_POST</a>) {
01850         UserAssert(*ppIntDdeInfo != NULL);
01851         pIntDdeInfo = *ppIntDdeInfo;
01852         <span class="keywordflow">if</span> (pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o5">spxsOut</a>-&gt;<a class="code" href="../../d1/d0/structtagXSTATE.html#o6">flags</a> &amp; <a class="code" href="../../d6/d4/ddetrack_8h.html#a14">XS_GIVEBACKONNACK</a> &amp;&amp;
01853                 !(((<a class="code" href="../../d4/d2/structtagDDE__DATA.html">PDDE_DATA</a>)(pIntDdeInfo + 1))-&gt;wStatus &amp; DDE_FACK)) {
01854             <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a45">GiveObject</a>(((<a class="code" href="../../d4/d2/structtagDDE__DATA.html">PDDE_DATA</a>)(pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o5">spxsOut</a>-&gt;<a class="code" href="../../d1/d0/structtagXSTATE.html#o5">pIntDdeInfo</a> + 1))-&gt;wFmt,
01855                     pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o5">spxsOut</a>-&gt;<a class="code" href="../../d1/d0/structtagXSTATE.html#o5">pIntDdeInfo</a>-&gt;<a class="code" href="../../d7/d8/structtagINTDDEINFO.html#o5">hIndirect</a>,
01856                     (W32PID)<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a455">GETPTI</a>(pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o4">spwndPartner</a>)-&gt;ppi-&gt;W32Pid);
01857         }
01858         <span class="keywordflow">if</span> (pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o5">spxsOut</a>-&gt;<a class="code" href="../../d1/d0/structtagXSTATE.html#o6">flags</a> &amp; <a class="code" href="../../d6/d4/ddetrack_8h.html#a13">XS_PUBLICOBJ</a>) {
01859             <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a44">RemovePublicObject</a>(((<a class="code" href="../../d4/d2/structtagDDE__DATA.html">PDDE_DATA</a>)(pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o5">spxsOut</a>-&gt;<a class="code" href="../../d1/d0/structtagXSTATE.html#o5">pIntDdeInfo</a> + 1))-&gt;wFmt,
01860                     pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o5">spxsOut</a>-&gt;<a class="code" href="../../d1/d0/structtagXSTATE.html#o5">pIntDdeInfo</a>-&gt;<a class="code" href="../../d7/d8/structtagINTDDEINFO.html#o5">hIndirect</a>);
01861             pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o5">spxsOut</a>-&gt;<a class="code" href="../../d1/d0/structtagXSTATE.html#o6">flags</a> &amp;= ~<a class="code" href="../../d6/d4/ddetrack_8h.html#a13">XS_PUBLICOBJ</a>;
01862         }
01863         pxs = <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a27">Createpxs</a>(NULL, NULL, NULL, pIntDdeInfo, flags | XS_FREEPXS);
01864         <span class="keywordflow">if</span> (pxs != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01865             pxs-&gt;<a class="code" href="../../d1/d0/structtagXSTATE.html#o0">head</a>.<a class="code" href="../../d1/d1/struct__THROBJHEAD.html#o1">pti</a> = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a455">GETPTI</a>(pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o4">spwndPartner</a>);
01866         }
01867         *plParam = (LPARAM)<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a448">PtoH</a>(pxs);
01868         <span class="keywordflow">if</span> (*plParam == 0) {
01869             <span class="keywordflow">return</span> <a class="code" href="../../d6/d4/ddetrack_8h.html#a20">FAILNOFREE_POST</a>;
01870         }
01871         *pmessage |= <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a545">MSGFLAG_DDE_MID_THUNK</a>;
01872     }
01873     <span class="keywordflow">return</span> dwRet;
01874 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a30" doxytag="kernel/ddetrack.c::xxxCopyAckIn" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> xxxCopyAckIn           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">PDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>pmessage</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM *&nbsp;</td>
          <td class="mdname" nowrap> <em>plParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d6/d2/structtagDDECONV.html">PDDECONV</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pDdeConv</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d7/d8/structtagINTDDEINFO.html">PINTDDEINFO</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>ppIntDdeInfo</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a29" doxytag="kernel/ddetrack.c::xxxCopyDdeIn" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> xxxCopyDdeIn           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hSrc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>pflags</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PHANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>phDirect</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d7/d8/structtagINTDDEINFO.html">PINTDDEINFO</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>ppi</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l02104">2104</a> of file <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html">kernel/ddetrack.c</a>.
<p>
References <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00029">tagINTDDEINFO::DdePack</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00063">DO_POST</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00030">tagINTDDEINFO::flags</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00031">tagINTDDEINFO::hDirect</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00021">TRACE_DDE2</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00022">TRACE_DDE3</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00014">tagDDEPACK::uiHi</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00013">tagDDEPACK::uiLo</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00055">XS_FREESRC</a>, and <a class="el" href="../../d5/d4/kernel_2ddetrack_8c.html#a39">xxxClientCopyDDEIn1()</a>.
<p>
Referenced by <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00942">xxxAdvise()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01028">xxxAdviseData()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01835">xxxCopyAckIn()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01460">xxxExecute()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01515">xxxExecuteAck()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01344">xxxPoke()</a>, and <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01234">xxxRequestAck()</a>.
<p>
<pre class="fragment"><div>02109 {
02110     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwRet;
02111     <a class="code" href="../../d7/d8/structtagINTDDEINFO.html">PINTDDEINFO</a> pi;
02112 
02113     dwRet = <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a39">xxxClientCopyDDEIn1</a>(hSrc, *pflags, ppi);
02114     pi = *ppi;
02115     <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a2">TRACE_DDE2</a>(*pflags &amp; XS_FREESRC ?
02116             <span class="stringliteral">"Copying in and freeing %#p(%#p)"</span> :
02117             <span class="stringliteral">"Copying in %#p(%#p)"</span>,
02118             hSrc, pi ? pi-&gt;<a class="code" href="../../d7/d8/structtagINTDDEINFO.html#o2">hDirect</a> : 0);
02119 
02120     <span class="keywordflow">if</span> (dwRet == <a class="code" href="../../d6/d4/ddetrack_8h.html#a19">DO_POST</a>) {
02121         UserAssert(*ppi != NULL);
02122         *pflags = pi-&gt;<a class="code" href="../../d7/d8/structtagINTDDEINFO.html#o1">flags</a>;
02123         <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a3">TRACE_DDE3</a>(<span class="stringliteral">"xxxCopyDdeIn: uiLo=%x, uiHi=%x, hDirect=%#p"</span>,
02124                 pi-&gt;<a class="code" href="../../d7/d8/structtagINTDDEINFO.html#o0">DdePack</a>.<a class="code" href="../../d9/d2/structtagDDEPACK.html#o0">uiLo</a>, pi-&gt;<a class="code" href="../../d7/d8/structtagINTDDEINFO.html#o0">DdePack</a>.<a class="code" href="../../d9/d2/structtagDDEPACK.html#o1">uiHi</a>, pi-&gt;<a class="code" href="../../d7/d8/structtagINTDDEINFO.html#o2">hDirect</a>);
02125         <span class="keywordflow">if</span> (phDirect != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
02126             *phDirect = pi-&gt;<a class="code" href="../../d7/d8/structtagINTDDEINFO.html#o2">hDirect</a>;
02127         }
02128     }
02129 <span class="preprocessor">#if DBG</span>
02130 <span class="preprocessor"></span>      <span class="keywordflow">else</span> {
02131         RIPMSG0(RIP_WARNING, <span class="stringliteral">"Unable to alloc DDE INTDDEINFO"</span>);
02132     }
02133 <span class="preprocessor">#endif</span>
02134 <span class="preprocessor"></span>
02135     <span class="keywordflow">return</span>(dwRet);
02136 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a31" doxytag="kernel/ddetrack.c::xxxCopyDDEOut" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HANDLE xxxCopyDDEOut           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d8/structtagINTDDEINFO.html">PINTDDEINFO</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pIntDdeInfo</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PHANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>phDirect</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l02149">2149</a> of file <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html">kernel/ddetrack.c</a>.
<p>
References <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00033">tagINTDDEINFO::cbDirect</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00036">tagINTDDEINFO::cbIndirect</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00029">tagINTDDEINFO::DdePack</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00030">tagINTDDEINFO::flags</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00031">tagINTDDEINFO::hDirect</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00020">TRACE_DDE1</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00022">TRACE_DDE3</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00014">tagDDEPACK::uiHi</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00013">tagDDEPACK::uiLo</a>, and <a class="el" href="../../d5/d4/kernel_2ddetrack_8c.html#a40">xxxClientCopyDDEOut1()</a>.
<p>
Referenced by <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00618">xxxDDETrackGetMessageHook()</a>.
<p>
<pre class="fragment"><div>02152 {
02153     HANDLE hDst;
02154 
02155     <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a3">TRACE_DDE3</a>(<span class="stringliteral">"xxxCopyDDEOut: cbDirect=%x, cbIndirect=%x, flags=%x"</span>,
02156             pi-&gt;<a class="code" href="../../d7/d8/structtagINTDDEINFO.html#o4">cbDirect</a>, pi-&gt;<a class="code" href="../../d7/d8/structtagINTDDEINFO.html#o7">cbIndirect</a>, pi-&gt;<a class="code" href="../../d7/d8/structtagINTDDEINFO.html#o1">flags</a>);
02157     hDst = <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a40">xxxClientCopyDDEOut1</a>(pi);
02158     <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a3">TRACE_DDE3</a>(<span class="stringliteral">"xxxCopyDDEOut: uiLo=%x, uiHi=%x, hResult=%#p"</span>,
02159             pi-&gt;<a class="code" href="../../d7/d8/structtagINTDDEINFO.html#o0">DdePack</a>.<a class="code" href="../../d9/d2/structtagDDEPACK.html#o0">uiLo</a>, pi-&gt;<a class="code" href="../../d7/d8/structtagINTDDEINFO.html#o0">DdePack</a>.<a class="code" href="../../d9/d2/structtagDDEPACK.html#o1">uiHi</a>, hDst);
02160     <span class="keywordflow">if</span> (hDst != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
02161         <span class="keywordflow">if</span> (phDirect != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
02162             <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a1">TRACE_DDE1</a>(<span class="stringliteral">"xxxCopyDDEOut: *phDirect=%#p"</span>, pi-&gt;<a class="code" href="../../d7/d8/structtagINTDDEINFO.html#o2">hDirect</a>);
02163             *phDirect = pi-&gt;<a class="code" href="../../d7/d8/structtagINTDDEINFO.html#o2">hDirect</a>;
02164         }
02165     }
02166     <span class="keywordflow">return</span>(hDst);
02167 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a49" doxytag="kernel/ddetrack.c::xxxDDETrackGetMessageHook" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID xxxDDETrackGetMessageHook           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">PMSG&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pmsg</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00618">618</a> of file <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html">kernel/ddetrack.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06181">CXF_IS_SERVER</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06182">CXF_TERMINATE_POSTED</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01811">FindDdeConv()</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06162">tagDDECONV::flags</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06176">tagXSTATE::flags</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l02042">FreeDdeConv()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l02285">FreeDdeXact()</a>, <a class="el" href="../../d7/d2/queue_8c-source.html#l01033">GetAppCompatFlags2()</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06173">tagXSTATE::hClient</a>, <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00353">HMValidateHandleNoRip()</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06174">tagXSTATE::hServer</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06161">tagDDECONV::pfl</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06175">tagXSTATE::pIntDdeInfo</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l01166">RevalidateCatHwnd</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06156">tagDDECONV::spartnerConv</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00363">ThreadLockAlways</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00366">ThreadUnlock</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00019">TRACE_DDE</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00020">TRACE_DDE1</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00021">TRACE_DDE2</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00079">TraceDdeMsg</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00916">TYPE_DDEXACT</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00120">ValidateHwnd</a>, <a class="el" href="../../d2/d7/hal_8h.html#a212">VOID()</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00052">XS_FREEPXS</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00548">xxxCleanupDdeConv()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l02149">xxxCopyDDEOut()</a>, and <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01960">xxxFreeListFree()</a>.
<p>
Referenced by <a class="el" href="../../d7/d2/queue_8c-source.html#l03499">xxxReadPostMessage()</a>.
<p>
<pre class="fragment"><div>00620 {
00621     <a class="code" href="../../d1/d0/structtagXSTATE.html">PXSTATE</a> pxs;
00622     HANDLE hDirect;
00623     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> flags;
00624     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fUnlockDdeConv;
00625     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpDdeConv, tlpxs;
00626 
00627     <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a5">TraceDdeMsg</a>(pmsg-&gt;message, (HWND)pmsg-&gt;wParam, pmsg-&gt;hwnd, MSG_RECV);
00628 
00629     <span class="keywordflow">if</span> (pmsg-&gt;message == WM_DDE_TERMINATE) {
00630         <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwndFrom, pwndTo;
00631         <a class="code" href="../../d6/d2/structtagDDECONV.html">PDDECONV</a> pDdeConv;
00632 
00633         pwndTo = <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(pmsg-&gt;hwnd);
00634         
00635         <span class="comment">/*</span>
00636 <span class="comment">         * We should get the pwnd even if the partner is destroyed in order</span>
00637 <span class="comment">         * to clean up the DDE objects now.  Exiting now would work, but would</span>
00638 <span class="comment">         * leave the conversation objects locked and present until the To window</span>
00639 <span class="comment">         * gets destroyed, which seems excessive.</span>
00640 <span class="comment">         */</span>
00641         pwndFrom = <a class="code" href="../../d4/d1/userk_8h.html#a99">RevalidateCatHwnd</a>((HWND)pmsg-&gt;wParam);
00642         
00643         <span class="keywordflow">if</span> (pwndTo == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00644             <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a0">TRACE_DDE</a>(<span class="stringliteral">"TERMINATE ignored, invalid window(s)."</span>);
00645             <span class="keywordflow">return</span>;
00646         
00647         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pwndFrom == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00648             
00649 CleanupAndExit:            
00650             <span class="comment">/*</span>
00651 <span class="comment">             * Do this only for appcompat</span>
00652 <span class="comment">             */</span>
00653             <span class="keywordflow">if</span> (<a class="code" href="../../d6/d3/queue_8c.html#a35">GetAppCompatFlags2</a>(VERMAX) &amp; GACF2_DDE) {
00654                 <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a48">xxxCleanupDdeConv</a>(pwndTo);
00655             } <span class="keywordflow">else</span> {
00656                 <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a0">TRACE_DDE</a>(<span class="stringliteral">"TERMINATE ignored, invalid window(s)."</span>);
00657             }
00658             <span class="keywordflow">return</span>;
00659         }
00660         
00661         <span class="comment">/*</span>
00662 <span class="comment">         * locate conversation info.</span>
00663 <span class="comment">         */</span>
00664         pDdeConv = <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a21">FindDdeConv</a>(pwndTo, pwndFrom);
00665         <span class="keywordflow">if</span> (pDdeConv == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00666             <span class="comment">/*</span>
00667 <span class="comment">             * Must be a harmless extra terminate.</span>
00668 <span class="comment">             */</span>
00669             <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a0">TRACE_DDE</a>(<span class="stringliteral">"TERMINATE ignored, conversation not found."</span>);
00670             <span class="keywordflow">return</span>;
00671         }
00672 
00673         <span class="keywordflow">if</span> (pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o8">flags</a> &amp; <a class="code" href="../../d4/d1/userk_8h.html#a603">CXF_TERMINATE_POSTED</a> &amp;&amp;
00674                 pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o2">spartnerConv</a>-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o8">flags</a> &amp; <a class="code" href="../../d4/d1/userk_8h.html#a603">CXF_TERMINATE_POSTED</a>) {
00675 
00676             <span class="comment">/*</span>
00677 <span class="comment">             * clean up client side objects on this side</span>
00678 <span class="comment">             */</span>
00679             fUnlockDdeConv = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00680             <span class="keywordflow">if</span> (pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o7">pfl</a> != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00681                 <a class="code" href="../../d4/d5/structtagFREELIST.html">PFREELIST</a> pfl;
00682 
00683                 fUnlockDdeConv = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00684                 <a class="code" href="../../d6/d0/usercli_8h.html#a37">ThreadLockAlways</a>(pDdeConv, &amp;tlpDdeConv);
00685                 pfl = pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o7">pfl</a>;
00686                 pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o7">pfl</a> = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00687                 <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a33">xxxFreeListFree</a>(pfl);
00688             }
00689 
00690             <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a2">TRACE_DDE2</a>(<span class="stringliteral">"DDE conversation (%#p:%#p) closed"</span>,
00691                     (pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o8">flags</a> &amp; CXF_IS_SERVER) ? pmsg-&gt;wParam : (ULONG_PTR)pmsg-&gt;hwnd,
00692                     (pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o8">flags</a> &amp; CXF_IS_SERVER) ? (ULONG_PTR)pmsg-&gt;hwnd : pmsg-&gt;wParam);
00693 
00694             <a class="code" href="../../d4/d1/userk_8h.html#a1878">FreeDdeConv</a>(pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o2">spartnerConv</a>);
00695             <a class="code" href="../../d4/d1/userk_8h.html#a1878">FreeDdeConv</a>(pDdeConv);
00696 
00697             <span class="keywordflow">if</span> (fUnlockDdeConv) {
00698                 <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpDdeConv);
00699             }
00700         }
00701 
00702         <span class="keywordflow">goto</span> CleanupAndExit;
00703     }
00704 
00705     pxs = (<a class="code" href="../../d1/d0/structtagXSTATE.html">PXSTATE</a>)<a class="code" href="../../d6/d9/rtl_2wow_8c.html#a8">HMValidateHandleNoRip</a>((HANDLE)pmsg-&gt;lParam, TYPE_DDEXACT);
00706     <span class="keywordflow">if</span> (pxs == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00707         <span class="comment">/*</span>
00708 <span class="comment">         * The posting window has died and the pxs was freed so this</span>
00709 <span class="comment">         * message shouldn't be bothered with...map to WM_NULL.</span>
00710 <span class="comment">         */</span>
00711         pmsg-&gt;lParam = 0;
00712         pmsg-&gt;message = WM_NULL;
00713         <span class="keywordflow">return</span>;
00714     }
00715     flags = pxs-&gt;<a class="code" href="../../d1/d0/structtagXSTATE.html#o6">flags</a>;
00716 
00717     <a class="code" href="../../d6/d0/usercli_8h.html#a37">ThreadLockAlways</a>(pxs, &amp;tlpxs);
00718     pmsg-&gt;lParam = (LPARAM)<a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a31">xxxCopyDDEOut</a>(pxs-&gt;<a class="code" href="../../d1/d0/structtagXSTATE.html#o5">pIntDdeInfo</a>, &amp;hDirect);
00719     <span class="keywordflow">if</span> (pmsg-&gt;lParam == (LPARAM)<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00720         <span class="comment">/*</span>
00721 <span class="comment">         * Turn this message into a terminate - we failed to copy the</span>
00722 <span class="comment">         * message data out which implies we are too low on memory</span>
00723 <span class="comment">         * to continue the conversation.  Shut it down now before</span>
00724 <span class="comment">         * other problems pop up that this failure will cause.</span>
00725 <span class="comment">         */</span>
00726         pmsg-&gt;message = WM_DDE_TERMINATE;
00727         RIPMSG0(RIP_WARNING, <span class="stringliteral">"DDETrack: couldn't copy data out, terminate faked."</span>);
00728     }
00729     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpxs) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00730         <span class="keywordflow">return</span>;
00731     }
00732 
00733     <span class="keywordflow">if</span> (flags &amp; <a class="code" href="../../d6/d4/ddetrack_8h.html#a9">XS_FREEPXS</a>) {
00734         <a class="code" href="../../d4/d1/userk_8h.html#a1875">FreeDdeXact</a>(pxs);
00735         <span class="keywordflow">return</span>;
00736     }
00737 
00738     <span class="comment">/*</span>
00739 <span class="comment">     * The only reason XS_FREEPXS isn't set is because we don't know which</span>
00740 <span class="comment">     * side frees the data till an ACK comes back, thus one of the client</span>
00741 <span class="comment">     * handles in pxs is already set via xxxDDETrackPostHook().  The one thats</span>
00742 <span class="comment">     * not yet set gets set here.</span>
00743 <span class="comment">     */</span>
00744 
00745     <span class="keywordflow">if</span> (pxs-&gt;<a class="code" href="../../d1/d0/structtagXSTATE.html#o3">hClient</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00746         <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a1">TRACE_DDE1</a>(<span class="stringliteral">"Saving %#p into hClient"</span>, hDirect);
00747         pxs-&gt;<a class="code" href="../../d1/d0/structtagXSTATE.html#o3">hClient</a> = hDirect;
00748     } <span class="keywordflow">else</span> {
00749         <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a1">TRACE_DDE1</a>(<span class="stringliteral">"Saving %#p into hServer."</span>, hDirect);
00750         pxs-&gt;<a class="code" href="../../d1/d0/structtagXSTATE.html#o4">hServer</a> = hDirect;
00751     }
00752     <span class="keywordflow">return</span>;
00753 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a47" doxytag="kernel/ddetrack.c::xxxDDETrackPostHook" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> xxxDDETrackPostHook           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d9/d5/ndismain_8h.html#a266">PUINT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pmessage</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwndTo</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM *&nbsp;</td>
          <td class="mdname" nowrap> <em>plParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fSent</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00320">320</a> of file <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html">kernel/ddetrack.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d2/d4/ddemlsvr_8h.html#a14">ClientGetDDEHookData()</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06181">CXF_IS_SERVER</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06183">CXF_PARTNER_WINDOW_DIED</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06182">CXF_TERMINATE_POSTED</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00063">DO_POST</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00061">FAIL_POST</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00064">FAILNOFREE_POST</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00062">FAKE_POST</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01811">FindDdeConv()</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06162">tagDDECONV::flags</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06172">tagXSTATE::fnResponse</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01919">FreeDDEHandle()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01547">GETPTI</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01553">GETPWNDPPI</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01827">tagWND::head</a>, <a class="el" href="../../d3/d3/ddemlsvr_8h-source.html#l00019">MonitorFlags</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01766">NewConversation()</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06141">tagFREELIST::next</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06161">tagDDECONV::pfl</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00058">PtiCurrent</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01512">PtoH</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06156">tagDDECONV::spartnerConv</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06159">tagDDECONV::spxsOut</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00363">ThreadLockAlways</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00366">ThreadUnlock</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02827">TIF_16BIT</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02826">TIF_INCLEANUP</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00019">TRACE_DDE</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00079">TraceDdeMsg</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00120">ValidateHwnd</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00475">VER40</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00044">XS_DATA</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00058">XS_DUMPMSG</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00054">XS_EXECUTE</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00051">XS_HIHANDLE</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00050">XS_LOHANDLE</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00043">XS_PACKED</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01960">xxxFreeListFree()</a>, <a class="el" href="../../d2/d7/w32_2ntuser_2kernel_2event_8c-source.html#l00275">xxxMessageEvent()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00895">xxxUnexpectedClientPost()</a>, and <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00853">xxxUnexpectedServerPost()</a>.
<p>
Referenced by <a class="el" href="../../d6/d2/ntuser_2kernel_2input_8c-source.html#l00981">_PostMessage()</a>, and <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l10058">MESSAGECALL()</a>.
<p>
<pre class="fragment"><div>00326 {
00327     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwndFrom;
00328     <a class="code" href="../../d6/d2/structtagDDECONV.html">PDDECONV</a> pDdeConv = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00329     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwRet;
00330     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpDdeConv;
00331     <a class="code" href="../../d4/d5/structtagFREELIST.html">PFREELIST</a> pfl, *ppfl;
00332     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> MFlag;
00333 
00334     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pwndTo);
00335 
00336     MFlag = fSent ? MF_SENDMSGS : MF_POSTMSGS;
00337     <span class="keywordflow">if</span> (<a class="code" href="../../d2/d4/ddemlsvr_8h.html#a2">MonitorFlags</a> &amp; MFlag) {
00338         DDEML_MSG_HOOK_DATA dmhd;
00339 
00340         <span class="keywordflow">switch</span> (*pmessage ) {
00341         <span class="keywordflow">case</span> WM_DDE_DATA:
00342         <span class="keywordflow">case</span> WM_DDE_POKE:
00343         <span class="keywordflow">case</span> WM_DDE_ADVISE:
00344         <span class="keywordflow">case</span> WM_DDE_EXECUTE:
00345         <span class="keywordflow">case</span> WM_DDE_ACK:
00346             <a class="code" href="../../d2/d4/ddemlsvr_8h.html#a14">ClientGetDDEHookData</a>(*pmessage, *plParam, &amp;dmhd);
00347             <span class="keywordflow">break</span>;
00348 
00349         <span class="keywordflow">default</span>:
00350             <span class="comment">// WM_DDE_REQUEST</span>
00351             <span class="comment">// WM_DDE_TERMINATE</span>
00352             <span class="comment">// WM_DDE_UNADVISE</span>
00353             dmhd.cbData = 0;
00354             dmhd.uiLo = LOWORD(*plParam);
00355             dmhd.uiHi = HIWORD(*plParam);
00356         }
00357         <a class="code" href="../../d1/d8/w32_2ntuser_2kernel_2event_8c.html#a11">xxxMessageEvent</a>(pwndTo, *pmessage, wParam, *plParam, MFlag,
00358                 &amp;dmhd);
00359     }
00360 
00361     <span class="keywordflow">if</span> (<a class="code" href="../../d4/d1/userk_8h.html#a9">PtiCurrent</a>()-&gt;ppi == <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a458">GETPWNDPPI</a>(pwndTo)) {
00362         <span class="comment">/*</span>
00363 <span class="comment">         * skip all intra-process conversation tracking.</span>
00364 <span class="comment">         */</span>
00365         dwRet = <a class="code" href="../../d6/d4/ddetrack_8h.html#a19">DO_POST</a>;
00366         <span class="keywordflow">goto</span> Exit;
00367     }
00368 
00369     <span class="keywordflow">if</span> (*pmessage == WM_DDE_INITIATE) {
00370         RIPMSG2(RIP_WARNING,
00371                 <span class="stringliteral">"DDE Post failed (%#p:%#p) - WM_DDE_INITIATE posted"</span>,
00372                 wParam, <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a448">PtoH</a>(pwndTo));
00373         dwRet = <a class="code" href="../../d6/d4/ddetrack_8h.html#a17">FAIL_POST</a>;
00374         <span class="keywordflow">goto</span> Exit;
00375     }
00376 
00377     pwndFrom = <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>((HWND)wParam);
00378     <span class="keywordflow">if</span> (pwndFrom == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00379         <span class="comment">/*</span>
00380 <span class="comment">         * This is a post AFTER a window has been destroyed.  This is not</span>
00381 <span class="comment">         * expected except in the case where xxxDdeTrackWindowDying()</span>
00382 <span class="comment">         * is posting a cleanup terminate.</span>
00383 <span class="comment">         */</span>
00384         dwRet = *pmessage == WM_DDE_TERMINATE ? <a class="code" href="../../d6/d4/ddetrack_8h.html#a19">DO_POST</a> : <a class="code" href="../../d6/d4/ddetrack_8h.html#a18">FAKE_POST</a>;
00385         <span class="keywordflow">goto</span> Exit;
00386     }
00387 
00388     <span class="comment">/*</span>
00389 <span class="comment">     * locate conversation info.</span>
00390 <span class="comment">     */</span>
00391     pDdeConv = <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a21">FindDdeConv</a>(pwndFrom, pwndTo);
00392     <span class="keywordflow">if</span> (pDdeConv == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00393         <span class="keywordflow">if</span> (*pmessage != WM_DDE_TERMINATE &amp;&amp;
00394                 (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a455">GETPTI</a>(pwndFrom)-&gt;TIF_flags &amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a796">TIF_16BIT</a>) &amp;&amp;
00395                 (pwndTo-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o0">head</a>.rpdesk == pwndFrom-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o0">head</a>.rpdesk)) {
00396             <span class="comment">/*</span>
00397 <span class="comment">             * If a WOW app bypasses initiates and posts directly to</span>
00398 <span class="comment">             * a window on the same desktop, let it sneak by here.</span>
00399 <span class="comment">             *</span>
00400 <span class="comment">             * This allows some evil apps such as OpenEngine and CA-Cricket</span>
00401 <span class="comment">             * to get away with murder.</span>
00402 <span class="comment">             *</span>
00403 <span class="comment">             * TERMINATES out of the blue however may be due to an app</span>
00404 <span class="comment">             * posting its WM_DDE_TERMINATE after it has destroyed its</span>
00405 <span class="comment">             * window.  Since window destruction would have generated the</span>
00406 <span class="comment">             * TERMINATE already, don't let it through here.</span>
00407 <span class="comment">             */</span>
00408             <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a20">NewConversation</a>(&amp;pDdeConv, NULL, pwndFrom, pwndTo);
00409         }
00410         <span class="keywordflow">if</span> (pDdeConv == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00411             RIPMSG2(RIP_VERBOSE, <span class="stringliteral">"Can't find DDE conversation for (%#p:%#p)."</span>,
00412                     wParam, <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a448">PtoH</a>(pwndTo));
00413             dwRet = *pmessage == WM_DDE_TERMINATE ? <a class="code" href="../../d6/d4/ddetrack_8h.html#a18">FAKE_POST</a> : <a class="code" href="../../d6/d4/ddetrack_8h.html#a17">FAIL_POST</a>;
00414             <span class="keywordflow">goto</span> Exit;
00415         }
00416     }
00417 
00418     <span class="keywordflow">if</span> (fSent &amp;&amp; pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o2">spartnerConv</a>-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o5">spxsOut</a> != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00419         <span class="comment">/*</span>
00420 <span class="comment">         * Sent DDE messages will not work if any posted DDE messages are</span>
00421 <span class="comment">         * in the queue because this will violate the message ordering rule.</span>
00422 <span class="comment">         */</span>
00423         RIPMSG0(RIP_VERBOSE,
00424                 <span class="stringliteral">"Sent DDE message failed - queue contains a previous post."</span>);
00425         dwRet = <a class="code" href="../../d6/d4/ddetrack_8h.html#a17">FAIL_POST</a>;
00426         <span class="keywordflow">goto</span> Exit;
00427     }
00428 
00429     <span class="comment">/*</span>
00430 <span class="comment">     * The tracking layer never did allow multiple threads to handle</span>
00431 <span class="comment">     * the same DDE conversation but win95 shipped and some apps</span>
00432 <span class="comment">     * got out there that did just this.  We will let it slide for</span>
00433 <span class="comment">     * 4.0 apps only so that when they rev their app, they will see</span>
00434 <span class="comment">     * that they were wrong.</span>
00435 <span class="comment">     */</span>
00436     <span class="keywordflow">if</span> (<a class="code" href="../../d4/d1/userk_8h.html#a9">PtiCurrent</a>() != <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a455">GETPTI</a>(pDdeConv) &amp;&amp;
00437             <a class="code" href="../../d4/d1/userk_8h.html#a9">PtiCurrent</a>()-&gt;dwExpWinVer != <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a101">VER40</a>) {
00438         RIPERR0(ERROR_WINDOW_OF_OTHER_THREAD,
00439                 RIP_ERROR,
00440                 <span class="stringliteral">"Posting DDE message from wrong thread!"</span>);
00441 
00442         dwRet = <a class="code" href="../../d6/d4/ddetrack_8h.html#a17">FAIL_POST</a>;
00443         <span class="keywordflow">goto</span> Exit;
00444     }
00445 
00446     <a class="code" href="../../d6/d0/usercli_8h.html#a37">ThreadLockAlways</a>(pDdeConv, &amp;tlpDdeConv);
00447 
00448     <span class="comment">/*</span>
00449 <span class="comment">     * If the handle we're using is in the free list, remove it</span>
00450 <span class="comment">     */</span>
00451     ppfl = &amp;pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o7">pfl</a>;
00452     <span class="keywordflow">while</span> (*ppfl != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00453         <span class="keywordflow">if</span> ((*ppfl)-&gt;h == (HANDLE)*plParam) {
00454             <span class="comment">/* Let's stop to check this out */</span>
00455             UserAssert((*ppfl)-&gt;h == (HANDLE)*plParam);
00456             *ppfl = (*ppfl)-&gt;<a class="code" href="../../d4/d5/structtagFREELIST.html#o0">next</a>;
00457         } <span class="keywordflow">else</span> {
00458             ppfl = &amp;(*ppfl)-&gt;<a class="code" href="../../d4/d5/structtagFREELIST.html#o0">next</a>;
00459         }
00460     }
00461     pfl = pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o7">pfl</a>;
00462     pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o7">pfl</a> = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00463     <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a33">xxxFreeListFree</a>(pfl);
00464 
00465     <span class="keywordflow">if</span> (*pmessage != WM_DDE_TERMINATE &amp;&amp;
00466             (pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o8">flags</a> &amp; (<a class="code" href="../../d4/d1/userk_8h.html#a603">CXF_TERMINATE_POSTED</a> | <a class="code" href="../../d4/d1/userk_8h.html#a604">CXF_PARTNER_WINDOW_DIED</a>))) {
00467         dwRet = <a class="code" href="../../d6/d4/ddetrack_8h.html#a18">FAKE_POST</a>;
00468         <span class="keywordflow">goto</span> UnlockExit;
00469     }
00470 
00471     <span class="keywordflow">if</span> (pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o5">spxsOut</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00472         <span class="keywordflow">if</span> (pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o8">flags</a> &amp; <a class="code" href="../../d4/d1/userk_8h.html#a602">CXF_IS_SERVER</a>) {
00473             dwRet = <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a51">xxxUnexpectedServerPost</a>((PDWORD)pmessage, plParam, pDdeConv);
00474         } <span class="keywordflow">else</span> {
00475             dwRet = <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a52">xxxUnexpectedClientPost</a>((PDWORD)pmessage, plParam, pDdeConv);
00476         }
00477     } <span class="keywordflow">else</span> {
00478         dwRet = (pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o5">spxsOut</a>-&gt;<a class="code" href="../../d1/d0/structtagXSTATE.html#o2">fnResponse</a>)(pmessage, plParam, pDdeConv);
00479     }
00480 
00481 UnlockExit:
00482 
00483     <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpDdeConv);
00484 
00485 Exit:
00486 
00487     <span class="keywordflow">if</span> (dwRet == <a class="code" href="../../d6/d4/ddetrack_8h.html#a18">FAKE_POST</a> &amp;&amp; !((<a class="code" href="../../d4/d1/userk_8h.html#a9">PtiCurrent</a>())-&gt;TIF_flags &amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a795">TIF_INCLEANUP</a>)) {
00488         <span class="comment">/*</span>
00489 <span class="comment">         * We faked the post so do a client side cleanup here so that we</span>
00490 <span class="comment">         * don't make it appear there is a leak in the client app.</span>
00491 <span class="comment">         */</span>
00492         <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> flags = <a class="code" href="../../d6/d4/ddetrack_8h.html#a15">XS_DUMPMSG</a>;
00493         <span class="comment">/*</span>
00494 <span class="comment">         * The XS_DUMPMSG tells FreeDDEHandle to also free the atoms</span>
00495 <span class="comment">         * associated with the data - since a faked post would make the app</span>
00496 <span class="comment">         * think that the receiver was going to cleanup the atoms.</span>
00497 <span class="comment">         * It also tells FreeDDEHandle to pay attention to the</span>
00498 <span class="comment">         * fRelease bit when freeing the data - this way, loaned data</span>
00499 <span class="comment">         * won't be destroyed.</span>
00500 <span class="comment">         */</span>
00501 
00502         <span class="keywordflow">switch</span> (*pmessage &amp; 0xFFFF) {
00503         <span class="keywordflow">case</span> WM_DDE_UNADVISE:
00504         <span class="keywordflow">case</span> WM_DDE_REQUEST:
00505             <span class="keywordflow">goto</span> DumpMsg;
00506 
00507         <span class="keywordflow">case</span> WM_DDE_ACK:
00508             flags |= <a class="code" href="../../d6/d4/ddetrack_8h.html#a0">XS_PACKED</a>;
00509             <span class="keywordflow">goto</span> DumpMsg;
00510 
00511         <span class="keywordflow">case</span> WM_DDE_ADVISE:
00512             flags |= <a class="code" href="../../d6/d4/ddetrack_8h.html#a0">XS_PACKED</a> | <a class="code" href="../../d6/d4/ddetrack_8h.html#a8">XS_HIHANDLE</a>;
00513             <span class="keywordflow">goto</span> DumpMsg;
00514 
00515         <span class="keywordflow">case</span> WM_DDE_DATA:
00516         <span class="keywordflow">case</span> WM_DDE_POKE:
00517             flags |= <a class="code" href="../../d6/d4/ddetrack_8h.html#a1">XS_DATA</a> | <a class="code" href="../../d6/d4/ddetrack_8h.html#a7">XS_LOHANDLE</a> | <a class="code" href="../../d6/d4/ddetrack_8h.html#a0">XS_PACKED</a>;
00518             <span class="keywordflow">goto</span> DumpMsg;
00519 
00520         <span class="keywordflow">case</span> WM_DDE_EXECUTE:
00521             flags |= <a class="code" href="../../d6/d4/ddetrack_8h.html#a11">XS_EXECUTE</a>;
00522             <span class="comment">// fall through</span>
00523 DumpMsg:
00524             <span class="keywordflow">if</span> (pDdeConv != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00525                 <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a0">TRACE_DDE</a>(<span class="stringliteral">"xxxDdeTrackPostHook: dumping message..."</span>);
00526                 <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a36">FreeDDEHandle</a>(pDdeConv, (HANDLE)*plParam, flags);
00527                 dwRet = <a class="code" href="../../d6/d4/ddetrack_8h.html#a20">FAILNOFREE_POST</a>;
00528             }
00529         }
00530     }
00531 <span class="preprocessor">#if DBG</span>
00532 <span class="preprocessor"></span>    <span class="keywordflow">if</span> (fSent) {
00533         <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a5">TraceDdeMsg</a>(*pmessage, (HWND)wParam, <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a448">PtoH</a>(pwndTo), MSG_SENT);
00534     } <span class="keywordflow">else</span> {
00535         <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a5">TraceDdeMsg</a>(*pmessage, (HWND)wParam, <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a448">PtoH</a>(pwndTo), MSG_POST);
00536     }
00537     <span class="keywordflow">if</span> (dwRet == <a class="code" href="../../d6/d4/ddetrack_8h.html#a18">FAKE_POST</a>) {
00538         <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a0">TRACE_DDE</a>(<span class="stringliteral">"...FAKED!"</span>);
00539     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dwRet == <a class="code" href="../../d6/d4/ddetrack_8h.html#a17">FAIL_POST</a>) {
00540         <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a0">TRACE_DDE</a>(<span class="stringliteral">"...FAILED!"</span>);
00541     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dwRet == <a class="code" href="../../d6/d4/ddetrack_8h.html#a20">FAILNOFREE_POST</a>) {
00542         <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a0">TRACE_DDE</a>(<span class="stringliteral">"...FAILED, DATA FREED!"</span>);
00543     }
00544 <span class="preprocessor">#endif // DBG</span>
00545 <span class="preprocessor"></span>    <span class="keywordflow">return</span>(dwRet);
00546 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a46" doxytag="kernel/ddetrack.c::xxxDDETrackSendHook" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL xxxDDETrackSendHook           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwndTo</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>message</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00147">147</a> of file <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html">kernel/ddetrack.c</a>.
<p>
References <a class="el" href="../../d6/d2/ntuser_2kernel_2input_8c-source.html#l00981">_PostMessage()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01634">AnticipatePost()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00044">DupConvTerminate</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01811">FindDdeConv()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01553">GETPWNDPPI</a>, <a class="el" href="../../d3/d3/ddemlsvr_8h-source.html#l00019">MonitorFlags</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01766">NewConversation()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00058">PtiCurrent</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01512">PtoH</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00021">TRACE_DDE2</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00120">ValidateHwnd</a>, and <a class="el" href="../../d2/d7/w32_2ntuser_2kernel_2event_8c-source.html#l00275">xxxMessageEvent()</a>.
<p>
Referenced by <a class="el" href="../../d4/d5/kernel_2sendmsg_8c-source.html#l00764">xxxSendMessageTimeout()</a>.
<p>
<pre class="fragment"><div>00152 {
00153     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwndServer;
00154     <a class="code" href="../../d6/d2/structtagDDECONV.html">PDDECONV</a> pdcNewClient, pdcNewServer;
00155 
00156     <span class="keywordflow">if</span> (<a class="code" href="../../d2/d4/ddemlsvr_8h.html#a2">MonitorFlags</a> &amp; MF_SENDMSGS) {
00157         DDEML_MSG_HOOK_DATA dmhd;
00158 
00159         dmhd.cbData = 0;    <span class="comment">// Initiate and Ack sent messages have no data.</span>
00160         dmhd.uiLo = LOWORD(lParam);     <span class="comment">// they arn't packed either.</span>
00161         dmhd.uiHi = HIWORD(lParam);
00162         <a class="code" href="../../d1/d8/w32_2ntuser_2kernel_2event_8c.html#a11">xxxMessageEvent</a>(pwndTo, message, wParam, lParam, MF_SENDMSGS, &amp;dmhd);
00163     }
00164 
00165     <span class="keywordflow">if</span> (<a class="code" href="../../d4/d1/userk_8h.html#a9">PtiCurrent</a>()-&gt;ppi == <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a458">GETPWNDPPI</a>(pwndTo)) {
00166         <span class="comment">/*</span>
00167 <span class="comment">         * Skip monitoring of all intra-process conversations.</span>
00168 <span class="comment">         */</span>
00169         <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
00170     }
00171 
00172     <span class="keywordflow">if</span> (message != WM_DDE_ACK) {
00173         <span class="keywordflow">if</span> (message == WM_DDE_INITIATE) {
00174             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;     <span class="comment">// this is cool</span>
00175         }
00176         <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00177     }
00178 
00179     pwndServer = <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>((HWND)wParam);
00180     <span class="keywordflow">if</span> (pwndServer == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00181         <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00182     }
00183 
00184     pdcNewServer = <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a21">FindDdeConv</a>(pwndServer, pwndTo);
00185     <span class="keywordflow">if</span> (pdcNewServer != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00186         RIPMSG2(RIP_WARNING,
00187                 <span class="stringliteral">"DDE protocol violation - non-unique window pair (%#p:%#p)"</span>,
00188                 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a448">PtoH</a>(pwndTo), <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a448">PtoH</a>(pwndServer));
00189         <span class="comment">/*</span>
00190 <span class="comment">         * Duplicate Conversation case:</span>
00191 <span class="comment">         *  Don't allow the ACK to pass, post a terminate to the server</span>
00192 <span class="comment">         *  to shut down the duplicate on his end.</span>
00193 <span class="comment">         */</span>
00194         <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a26">AnticipatePost</a>(pdcNewServer, DupConvTerminate, NULL, NULL, NULL, 0);
00195         <a class="code" href="../../d4/d1/userk_8h.html#a1642">_PostMessage</a>(pwndServer, WM_DDE_TERMINATE, (WPARAM)<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a448">PtoH</a>(pwndTo), 0);
00196         <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00197     }
00198 
00199     <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a20">NewConversation</a>(&amp;pdcNewClient, &amp;pdcNewServer, pwndTo, pwndServer)) {
00200         <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00201     }
00202 
00203     <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a2">TRACE_DDE2</a>(<span class="stringliteral">"%#p-&gt;%#p DDE Conversation started"</span>, <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a448">PtoH</a>(pwndTo), wParam);
00204     <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
00205 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a50" doxytag="kernel/ddetrack.c::xxxDDETrackWindowDying" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID xxxDDETrackWindowDying           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d6/d2/structtagDDECONV.html">PDDECONV</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pDdeConv</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00768">768</a> of file <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html">kernel/ddetrack.c</a>.
<p>
References <a class="el" href="../../d6/d2/ntuser_2kernel_2input_8c-source.html#l00981">_PostMessage()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06183">CXF_PARTNER_WINDOW_DIED</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06182">CXF_TERMINATE_POSTED</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06162">tagDDECONV::flags</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l02042">FreeDdeConv()</a>, <a class="el" href="../../d7/d2/queue_8c-source.html#l01033">GetAppCompatFlags2()</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06044">GetAppCompatFlags2ForPti()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01547">GETPTI</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06161">tagDDECONV::pfl</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01512">PtoH</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06155">tagDDECONV::snext</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06156">tagDDECONV::spartnerConv</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06157">tagDDECONV::spwnd</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06158">tagDDECONV::spwndPartner</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00362">ThreadLock</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00363">ThreadLockAlways</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00366">ThreadUnlock</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00021">TRACE_DDE2</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00264">UnlinkConv()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00475">VER40</a>, <a class="el" href="../../d2/d7/hal_8h.html#a212">VOID()</a>, and <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01960">xxxFreeListFree()</a>.
<p>
Referenced by <a class="el" href="../../d5/d7/createw_8c-source.html#l02218">xxxFreeWindow()</a>.
<p>
<pre class="fragment"><div>00771 {
00772     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpDdeConv, tlpDdeConvNext;
00773 
00774     UNREFERENCED_PARAMETER(pwnd);
00775 
00776     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pwnd);
00777     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pDdeConv);
00778 
00779     <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a2">TRACE_DDE2</a>(<span class="stringliteral">"xxxDDETrackWindowDying(%#p, %#p)"</span>, <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a448">PtoH</a>(pwnd), pDdeConv);
00780 
00781     <span class="keywordflow">while</span> (pDdeConv != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00782 
00783         <a class="code" href="../../d4/d5/structtagFREELIST.html">PFREELIST</a> pfl;
00784 
00785         <span class="comment">/*</span>
00786 <span class="comment">         * If there are any active conversations for this window</span>
00787 <span class="comment">         * start termination if not already started.</span>
00788 <span class="comment">         */</span>
00789         <span class="keywordflow">if</span> (!(pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o8">flags</a> &amp; <a class="code" href="../../d4/d1/userk_8h.html#a603">CXF_TERMINATE_POSTED</a>)) {
00790             <span class="comment">/*</span>
00791 <span class="comment">             * Win9x doesn't do any tracking. This breaks some apps that</span>
00792 <span class="comment">             *  destroy the window first and then post the terminate. The</span>
00793 <span class="comment">             *  other side gets two terminates.</span>
00794 <span class="comment">             */</span>
00795             <span class="keywordflow">if</span> (!(GACF2_NODDETRKDYING &amp; <a class="code" href="../../d6/d3/queue_8c.html#a35">GetAppCompatFlags2</a>(VER40))
00796                 || (pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o4">spwndPartner</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00797                 || !(GACF2_NODDETRKDYING
00798                         &amp; <a class="code" href="../../d4/d1/userk_8h.html#a1823">GetAppCompatFlags2ForPti</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a455">GETPTI</a>(pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o4">spwndPartner</a>), VER40))) {
00799 
00800                 <span class="comment">/*</span>
00801 <span class="comment">                 * CXF_TERMINATE_POSTED would have been set if the window had died.</span>
00802 <span class="comment">                 */</span>
00803                 <a class="code" href="../../d4/d1/userk_8h.html#a1642">_PostMessage</a>(pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o4">spwndPartner</a>, WM_DDE_TERMINATE,
00804                         (WPARAM)<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a448">PtoH</a>(pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o3">spwnd</a>), 0);
00805                 <span class="comment">// pDdeConv-&gt;flags |= CXF_TERMINATE_POSTED;  set by PostHookProc</span>
00806             } <span class="keywordflow">else</span> {
00807                 RIPMSG2(RIP_WARNING, <span class="stringliteral">"xxxDDETrackWindowDying(GACF2_NODDETRKDYING) not posting terminate from %#p to %#p\r\n"</span>,
00808                         pwnd, pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o4">spwndPartner</a>);
00809             }
00810         }
00811 
00812         <span class="comment">/*</span>
00813 <span class="comment">         * now fake that the other side already posted a terminate since</span>
00814 <span class="comment">         * we will be gone.</span>
00815 <span class="comment">         */</span>
00816         pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o2">spartnerConv</a>-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o8">flags</a> |=
00817                 <a class="code" href="../../d4/d1/userk_8h.html#a603">CXF_TERMINATE_POSTED</a> | <a class="code" href="../../d4/d1/userk_8h.html#a604">CXF_PARTNER_WINDOW_DIED</a>;
00818 
00819         <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o1">snext</a>, &amp;tlpDdeConvNext);
00820         <a class="code" href="../../d6/d0/usercli_8h.html#a37">ThreadLockAlways</a>(pDdeConv, &amp;tlpDdeConv);
00821 
00822         pfl = pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o7">pfl</a>;
00823         pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o7">pfl</a> = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00824 
00825         <span class="keywordflow">if</span> (pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o8">flags</a> &amp; <a class="code" href="../../d4/d1/userk_8h.html#a604">CXF_PARTNER_WINDOW_DIED</a>) {
00826 
00827             <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpDdeConv);
00828             <span class="comment">/*</span>
00829 <span class="comment">             * he's already gone, free up conversation tracking data</span>
00830 <span class="comment">             */</span>
00831             <a class="code" href="../../d4/d1/userk_8h.html#a1878">FreeDdeConv</a>(pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o2">spartnerConv</a>);
00832             <a class="code" href="../../d4/d1/userk_8h.html#a1878">FreeDdeConv</a>(pDdeConv);
00833         } <span class="keywordflow">else</span> {
00834             <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a35">UnlinkConv</a>(pDdeConv);
00835             <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpDdeConv);
00836         }
00837         <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a33">xxxFreeListFree</a>(pfl);
00838 
00839         pDdeConv = <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpDdeConvNext);
00840     }
00841 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a61" doxytag="kernel/ddetrack.c::xxxExecute" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> xxxExecute           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">PDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>pmessage</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM *&nbsp;</td>
          <td class="mdname" nowrap> <em>plParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d6/d2/structtagDDECONV.html">PDDECONV</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pDdeConv</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01460">1460</a> of file <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html">kernel/ddetrack.c</a>.
<p>
References <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01634">AnticipatePost()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00063">DO_POST</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00064">FAILNOFREE_POST</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01547">GETPTI</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02219">MSGFLAG_DDE_MID_THUNK</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06156">tagDDECONV::spartnerConv</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06157">tagDDECONV::spwnd</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06158">tagDDECONV::spwndPartner</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02831">TIF_ALLOWFOREGROUNDACTIVATE</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00019">TRACE_DDE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02286">WFANSIPROC</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00054">XS_EXECUTE</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00059">XS_UNICODE</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l02104">xxxCopyDdeIn()</a>, and <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00042">xxxExecuteAck</a>.
<p>
Referenced by <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00895">xxxUnexpectedClientPost()</a>.
<p>
<pre class="fragment"><div>01464 {
01465     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> flags, dwRet;
01466     <a class="code" href="../../d7/d8/structtagINTDDEINFO.html">PINTDDEINFO</a> pIntDdeInfo;
01467     HANDLE hDirect;
01468 
01469     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pDdeConv);
01470 
01471     <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a0">TRACE_DDE</a>(<span class="stringliteral">"xxxExecute"</span>);
01472 
01473     flags = <a class="code" href="../../d6/d4/ddetrack_8h.html#a11">XS_EXECUTE</a>;
01474     <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o3">spwnd</a>, WFANSIPROC) &amp;&amp;
01475             !<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o4">spwndPartner</a>, WFANSIPROC)) {
01476         flags |= <a class="code" href="../../d6/d4/ddetrack_8h.html#a16">XS_UNICODE</a>;
01477     }
01478     dwRet = <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a29">xxxCopyDdeIn</a>((HANDLE)*plParam, &amp;flags, &amp;hDirect, &amp;pIntDdeInfo);
01479     <span class="keywordflow">if</span> (dwRet == <a class="code" href="../../d6/d4/ddetrack_8h.html#a19">DO_POST</a>) {
01480         UserAssert(pIntDdeInfo != NULL);
01481         *pmessage |= <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a545">MSGFLAG_DDE_MID_THUNK</a>;
01482         *plParam = (LPARAM)<a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a26">AnticipatePost</a>(pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o2">spartnerConv</a>, xxxExecuteAck,
01483                 hDirect, NULL, pIntDdeInfo, flags);
01484         <span class="comment">/*</span>
01485 <span class="comment">         * Check for != 0 to make sure the AnticipatePost() succeeded.</span>
01486 <span class="comment">         */</span>
01487         <span class="keywordflow">if</span> (*plParam != 0) {
01488 
01489             <span class="comment">/*</span>
01490 <span class="comment">             * In the execute case it is likely that the postee will want to activate</span>
01491 <span class="comment">             * itself and come on top (OLE 1.0 is an example). In this case, allow</span>
01492 <span class="comment">             * both the postee and the poster to foreground activate for the next</span>
01493 <span class="comment">             * activate (poster because it will want to activate itself again</span>
01494 <span class="comment">             * probably, once the postee is done.)</span>
01495 <span class="comment">             */</span>
01496             <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a455">GETPTI</a>(pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o3">spwnd</a>)-&gt;TIF_flags |= <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a800">TIF_ALLOWFOREGROUNDACTIVATE</a>;
01497             TAGMSG1(DBGTAG_FOREGROUND, <span class="stringliteral">"xxxExecute set TIF %#p"</span>, <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a455">GETPTI</a>(pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o3">spwnd</a>));
01498             <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a455">GETPTI</a>(pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o4">spwndPartner</a>)-&gt;TIF_flags |= <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a800">TIF_ALLOWFOREGROUNDACTIVATE</a>;
01499             TAGMSG1(DBGTAG_FOREGROUND, <span class="stringliteral">"xxxExecute set TIF %#p"</span>, <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a455">GETPTI</a>(pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o4">spwndPartner</a>));
01500         } <span class="keywordflow">else</span> {
01501             dwRet = <a class="code" href="../../d6/d4/ddetrack_8h.html#a20">FAILNOFREE_POST</a>;
01502         }
01503 
01504     }
01505     <span class="keywordflow">return</span> dwRet;
01506 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a62" doxytag="kernel/ddetrack.c::xxxExecuteAck" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> xxxExecuteAck           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">PDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>pmessage</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM *&nbsp;</td>
          <td class="mdname" nowrap> <em>plParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d6/d2/structtagDDECONV.html">PDDECONV</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pDdeConv</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01515">1515</a> of file <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html">kernel/ddetrack.c</a>.
<p>
References <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00033">tagINTDDEINFO::cbDirect</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01689">Createpxs()</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00029">tagINTDDEINFO::DdePack</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00063">DO_POST</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00064">FAILNOFREE_POST</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01547">GETPTI</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06173">tagXSTATE::hClient</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00031">tagINTDDEINFO::hDirect</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06170">tagXSTATE::head</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02219">MSGFLAG_DDE_MID_THUNK</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l02001">PopState()</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01457">_THROBJHEAD::pti</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01512">PtoH</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06158">tagDDECONV::spwndPartner</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06159">tagDDECONV::spxsOut</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00019">TRACE_DDE</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00014">tagDDEPACK::uiHi</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00054">XS_EXECUTE</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00052">XS_FREEPXS</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00055">XS_FREESRC</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00043">XS_PACKED</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l02104">xxxCopyDdeIn()</a>, and <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00853">xxxUnexpectedServerPost()</a>.
<p>
<pre class="fragment"><div>01519 {
01520     <a class="code" href="../../d1/d0/structtagXSTATE.html">PXSTATE</a> pxsFree;
01521     <a class="code" href="../../d7/d8/structtagINTDDEINFO.html">PINTDDEINFO</a> pi;
01522     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> flags = <a class="code" href="../../d6/d4/ddetrack_8h.html#a0">XS_PACKED</a> | <a class="code" href="../../d6/d4/ddetrack_8h.html#a12">XS_FREESRC</a> | <a class="code" href="../../d6/d4/ddetrack_8h.html#a11">XS_EXECUTE</a>;
01523     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwRet;
01524 
01525     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pDdeConv);
01526 
01527     <span class="keywordflow">if</span> (*pmessage != WM_DDE_ACK) {
01528         <span class="keywordflow">return</span>(<a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a51">xxxUnexpectedServerPost</a>(pmessage, plParam, pDdeConv));
01529     }
01530 
01531     <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a0">TRACE_DDE</a>(<span class="stringliteral">"xxxExecuteAck"</span>);
01532     dwRet = <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a29">xxxCopyDdeIn</a>((HANDLE)*plParam, &amp;flags, NULL, &amp;pi);
01533     <span class="keywordflow">if</span> (dwRet == <a class="code" href="../../d6/d4/ddetrack_8h.html#a19">DO_POST</a>) {
01534         UserAssert(pi != NULL);
01535         <span class="comment">/*</span>
01536 <span class="comment">         * the server must respond to the execute with an ack containing the</span>
01537 <span class="comment">         * same handle it was given.</span>
01538 <span class="comment">         */</span>
01539         pi-&gt;<a class="code" href="../../d7/d8/structtagINTDDEINFO.html#o0">DdePack</a>.<a class="code" href="../../d9/d2/structtagDDEPACK.html#o1">uiHi</a> = (ULONG_PTR)pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o5">spxsOut</a>-&gt;<a class="code" href="../../d1/d0/structtagXSTATE.html#o3">hClient</a>;
01540         pi-&gt;<a class="code" href="../../d7/d8/structtagINTDDEINFO.html#o2">hDirect</a> = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
01541         pi-&gt;<a class="code" href="../../d7/d8/structtagINTDDEINFO.html#o4">cbDirect</a> = 0;
01542         *pmessage |= <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a545">MSGFLAG_DDE_MID_THUNK</a>;
01543         pxsFree = <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a27">Createpxs</a>(NULL, NULL, NULL, pi, XS_PACKED | XS_FREEPXS);
01544         <span class="keywordflow">if</span> (pxsFree != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01545             pxsFree-&gt;<a class="code" href="../../d1/d0/structtagXSTATE.html#o0">head</a>.<a class="code" href="../../d1/d1/struct__THROBJHEAD.html#o1">pti</a> = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a455">GETPTI</a>(pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o4">spwndPartner</a>);
01546         }
01547         *plParam = (LPARAM)<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a448">PtoH</a>(pxsFree);
01548         <span class="keywordflow">if</span> (*plParam != 0) {
01549             <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a34">PopState</a>(pDdeConv);
01550         } <span class="keywordflow">else</span> {
01551             dwRet = <a class="code" href="../../d6/d4/ddetrack_8h.html#a20">FAILNOFREE_POST</a>;
01552         }
01553     }
01554     <span class="keywordflow">return</span> dwRet;
01555 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a33" doxytag="kernel/ddetrack.c::xxxFreeListFree" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID xxxFreeListFree           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d4/d5/structtagFREELIST.html">PFREELIST</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pfl</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01960">1960</a> of file <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html">kernel/ddetrack.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l01833">CheckCritIn</a>, <a class="el" href="../../d5/d4/kernel_2ddetrack_8c.html#a37">ClientFreeDDEHandle()</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06143">tagFREELIST::flags</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01943">FreeListFree()</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06142">tagFREELIST::h</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06141">tagFREELIST::next</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00058">PtiCurrent</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l01713">ThreadLockPoolCleanup</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l01716">ThreadUnlockPoolCleanup</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02826">TIF_INCLEANUP</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00020">TRACE_DDE1</a>, and <a class="el" href="../../d2/d7/hal_8h.html#a212">VOID()</a>.
<p>
Referenced by <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00548">xxxCleanupDdeConv()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00618">xxxDDETrackGetMessageHook()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00320">xxxDDETrackPostHook()</a>, and <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00768">xxxDDETrackWindowDying()</a>.
<p>
<pre class="fragment"><div>01962 {
01963     <a class="code" href="../../d4/d5/structtagFREELIST.html">PFREELIST</a> pflPrev;
01964     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>      fInCleanup;
01965     <a class="code" href="../../d5/d1/struct__TL.html">TL</a>        tlPool;
01966 
01967     <a class="code" href="../../d4/d1/userk_8h.html#a154">CheckCritIn</a>();
01968 
01969     <span class="keywordflow">if</span> (pfl == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01970         <span class="keywordflow">return</span>;
01971     }
01972 
01973     fInCleanup = (<a class="code" href="../../d4/d1/userk_8h.html#a9">PtiCurrent</a>())-&gt;TIF_flags &amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a795">TIF_INCLEANUP</a>;
01974 
01975     <span class="keywordflow">while</span> (pfl != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01976 
01977         <a class="code" href="../../d4/d1/userk_8h.html#a140">ThreadLockPoolCleanup</a>(<a class="code" href="../../d4/d1/userk_8h.html#a9">PtiCurrent</a>(), pfl, &amp;tlPool, FreeListFree);
01978 
01979         <span class="keywordflow">if</span> (!fInCleanup) {
01980             <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a1">TRACE_DDE1</a>(<span class="stringliteral">"Freeing %#p from free list.\n"</span>, pfl-&gt;<a class="code" href="../../d4/d5/structtagFREELIST.html#o1">h</a>);
01981             <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a37">ClientFreeDDEHandle</a>(pfl-&gt;<a class="code" href="../../d4/d5/structtagFREELIST.html#o1">h</a>, pfl-&gt;<a class="code" href="../../d4/d5/structtagFREELIST.html#o2">flags</a>);
01982         }
01983 
01984         <a class="code" href="../../d4/d1/userk_8h.html#a141">ThreadUnlockPoolCleanup</a>(<a class="code" href="../../d4/d1/userk_8h.html#a9">PtiCurrent</a>(), &amp;tlPool);
01985 
01986         pflPrev = pfl;
01987         pfl = pfl-&gt;<a class="code" href="../../d4/d5/structtagFREELIST.html#o0">next</a>;
01988         UserFreePool(pflPrev);
01989     }
01990 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a59" doxytag="kernel/ddetrack.c::xxxPoke" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> xxxPoke           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">PDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>pmessage</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM *&nbsp;</td>
          <td class="mdname" nowrap> <em>plParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d6/d2/structtagDDECONV.html">PDDECONV</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pDdeConv</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01344">1344</a> of file <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html">kernel/ddetrack.c</a>.
<p>
References <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l02348">AddPublicObject()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01634">AnticipatePost()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00063">DO_POST</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00064">FAILNOFREE_POST</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01547">GETPTI</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l02427">GiveObject()</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00034">tagINTDDEINFO::hIndirect</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l02333">IsObjectPublic()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02219">MSGFLAG_DDE_MID_THUNK</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06156">tagDDECONV::spartnerConv</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06157">tagDDECONV::spwnd</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06158">tagDDECONV::spwndPartner</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00019">TRACE_DDE</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00044">XS_DATA</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00053">XS_FRELEASE</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00057">XS_GIVEBACKONNACK</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00050">XS_LOHANDLE</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00043">XS_PACKED</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00056">XS_PUBLICOBJ</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l02104">xxxCopyDdeIn()</a>, and <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00040">xxxPokeAck</a>.
<p>
Referenced by <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00895">xxxUnexpectedClientPost()</a>.
<p>
<pre class="fragment"><div>01348 {
01349     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> flags, dwRet;
01350     <a class="code" href="../../d7/d8/structtagINTDDEINFO.html">PINTDDEINFO</a> pIntDdeInfo;
01351     HANDLE hDirect;
01352 
01353     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pDdeConv);
01354 
01355     <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a0">TRACE_DDE</a>(<span class="stringliteral">"xxxPoke"</span>);
01356     flags = <a class="code" href="../../d6/d4/ddetrack_8h.html#a0">XS_PACKED</a> | <a class="code" href="../../d6/d4/ddetrack_8h.html#a7">XS_LOHANDLE</a> | <a class="code" href="../../d6/d4/ddetrack_8h.html#a1">XS_DATA</a>;
01357     dwRet = <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a29">xxxCopyDdeIn</a>((HANDLE)*plParam, &amp;flags, &amp;hDirect, &amp;pIntDdeInfo);
01358     <span class="keywordflow">if</span> (dwRet == <a class="code" href="../../d6/d4/ddetrack_8h.html#a19">DO_POST</a>) {
01359         UserAssert(pIntDdeInfo != NULL);
01360         <span class="keywordflow">if</span> (((<a class="code" href="../../d4/d2/structtagDDE__DATA.html">PDDE_DATA</a>)(pIntDdeInfo + 1))-&gt;wStatus &amp; DDE_FRELEASE) {
01361             <span class="comment">/*</span>
01362 <span class="comment">             * giving it away</span>
01363 <span class="comment">             */</span>
01364             <span class="keywordflow">if</span> (<a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a42">IsObjectPublic</a>(pIntDdeInfo-&gt;<a class="code" href="../../d7/d8/structtagINTDDEINFO.html#o5">hIndirect</a>) != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01365                 RIPMSG0(RIP_ERROR, <span class="stringliteral">"DDE Protocol violation - giving away a public GDI object."</span>);
01366                 UserFreePool(pIntDdeInfo);
01367                 <span class="keywordflow">return</span> <a class="code" href="../../d6/d4/ddetrack_8h.html#a20">FAILNOFREE_POST</a>;
01368             }
01369             <span class="keywordflow">if</span> (<a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a45">GiveObject</a>(((<a class="code" href="../../d4/d2/structtagDDE__DATA.html">PDDE_DATA</a>)(pIntDdeInfo + 1))-&gt;wFmt,
01370                     pIntDdeInfo-&gt;hIndirect,
01371                     (W32PID)<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a455">GETPTI</a>(pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o4">spwndPartner</a>)-&gt;ppi-&gt;W32Pid)) {
01372                 flags |= <a class="code" href="../../d6/d4/ddetrack_8h.html#a14">XS_GIVEBACKONNACK</a>;
01373             }
01374             flags |= <a class="code" href="../../d6/d4/ddetrack_8h.html#a10">XS_FRELEASE</a>;
01375         } <span class="keywordflow">else</span> {
01376             <span class="comment">/*</span>
01377 <span class="comment">             * on loan</span>
01378 <span class="comment">             */</span>
01379             <span class="comment">/*</span>
01380 <span class="comment">             * fAck bit is ignored and assumed on.</span>
01381 <span class="comment">             */</span>
01382             <span class="keywordflow">if</span> (<a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a43">AddPublicObject</a>(((<a class="code" href="../../d4/d2/structtagDDE__DATA.html">PDDE_DATA</a>)(pIntDdeInfo + 1))-&gt;wFmt,
01383                         pIntDdeInfo-&gt;hIndirect,
01384                         (W32PID)<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a455">GETPTI</a>(pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o3">spwnd</a>)-&gt;ppi-&gt;W32Pid)) {
01385                 flags |= <a class="code" href="../../d6/d4/ddetrack_8h.html#a13">XS_PUBLICOBJ</a>;
01386             }
01387         }
01388         *pmessage |= <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a545">MSGFLAG_DDE_MID_THUNK</a>;
01389         *plParam = (LPARAM)<a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a26">AnticipatePost</a>(pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o2">spartnerConv</a>, xxxPokeAck,
01390              hDirect, NULL, pIntDdeInfo, flags);
01391         <span class="keywordflow">if</span> (*plParam == 0) {
01392             dwRet = <a class="code" href="../../d6/d4/ddetrack_8h.html#a20">FAILNOFREE_POST</a>;
01393         }
01394     }
01395     <span class="keywordflow">return</span> dwRet;
01396 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a60" doxytag="kernel/ddetrack.c::xxxPokeAck" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> xxxPokeAck           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">PDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>pmessage</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM *&nbsp;</td>
          <td class="mdname" nowrap> <em>plParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d6/d2/structtagDDECONV.html">PDDECONV</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pDdeConv</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01411">1411</a> of file <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html">kernel/ddetrack.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00029">tagINTDDEINFO::DdePack</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00063">DO_POST</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06176">tagXSTATE::flags</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01919">FreeDDEHandle()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01890">FreeListAdd()</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06173">tagXSTATE::hClient</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06174">tagXSTATE::hServer</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l02001">PopState()</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06156">tagDDECONV::spartnerConv</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06159">tagDDECONV::spxsOut</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00019">TRACE_DDE</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00013">tagDDEPACK::uiLo</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00053">XS_FRELEASE</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00043">XS_PACKED</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01835">xxxCopyAckIn()</a>, and <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00853">xxxUnexpectedServerPost()</a>.
<p>
<pre class="fragment"><div>01415 {
01416     <a class="code" href="../../d1/d0/structtagXSTATE.html">PXSTATE</a> pxsFree;
01417     <a class="code" href="../../d7/d8/structtagINTDDEINFO.html">PINTDDEINFO</a> pIntDdeInfo;
01418     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwRet;
01419 
01420     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pDdeConv);
01421 
01422     <span class="keywordflow">if</span> (*pmessage != WM_DDE_ACK) {
01423         <span class="keywordflow">return</span>(<a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a51">xxxUnexpectedServerPost</a>(pmessage, plParam, pDdeConv));
01424     }
01425 
01426     <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a0">TRACE_DDE</a>(<span class="stringliteral">"xxxPokeAck"</span>);
01427 
01428     dwRet = <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a64">xxxCopyAckIn</a>(pmessage, plParam, pDdeConv, &amp;pIntDdeInfo);
01429     <span class="keywordflow">if</span> (dwRet != <a class="code" href="../../d6/d4/ddetrack_8h.html#a19">DO_POST</a>) {
01430         <span class="keywordflow">return</span> dwRet;
01431     }
01432     UserAssert(pIntDdeInfo != NULL);
01433 
01434     pxsFree = pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o5">spxsOut</a>;
01435     <span class="keywordflow">if</span> (pIntDdeInfo-&gt;<a class="code" href="../../d7/d8/structtagINTDDEINFO.html#o0">DdePack</a>.<a class="code" href="../../d9/d2/structtagDDEPACK.html#o0">uiLo</a> &amp; DDE_FACK) {
01436         <span class="comment">// positive ack implies server accepted the data - free from</span>
01437         <span class="comment">// client at postmessage time iff fRelease was set in poke message.</span>
01438         <span class="keywordflow">if</span> (pxsFree-&gt;<a class="code" href="../../d1/d0/structtagXSTATE.html#o6">flags</a> &amp; <a class="code" href="../../d6/d4/ddetrack_8h.html#a10">XS_FRELEASE</a>) {
01439             <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a0">TRACE_DDE</a>(<span class="stringliteral">"xxxPokeAck: delayed freeing client data"</span>);
01440             <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a32">FreeListAdd</a>(pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o2">spartnerConv</a>, pxsFree-&gt;<a class="code" href="../../d1/d0/structtagXSTATE.html#o3">hClient</a>,
01441                     pxsFree-&gt;<a class="code" href="../../d1/d0/structtagXSTATE.html#o6">flags</a> &amp; ~XS_PACKED);
01442         }
01443     } <span class="keywordflow">else</span> {
01444         <span class="comment">// Nack means that sender is responsible for freeing it.</span>
01445         <span class="comment">// We must free it in the receiver's context for him.</span>
01446         <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a0">TRACE_DDE</a>(<span class="stringliteral">"xxxPokeAck: freeing Nacked data"</span>);
01447         UserAssert(pxsFree-&gt;<a class="code" href="../../d1/d0/structtagXSTATE.html#o4">hServer</a> != (HANDLE)*plParam);
01448         <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a36">FreeDDEHandle</a>(pDdeConv, pxsFree-&gt;<a class="code" href="../../d1/d0/structtagXSTATE.html#o4">hServer</a>, pxsFree-&gt;<a class="code" href="../../d1/d0/structtagXSTATE.html#o6">flags</a> &amp; ~XS_PACKED);
01449     }
01450     <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a34">PopState</a>(pDdeConv);
01451     <span class="keywordflow">return</span>(<a class="code" href="../../d6/d4/ddetrack_8h.html#a19">DO_POST</a>);
01452 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a58" doxytag="kernel/ddetrack.c::xxxRequestAck" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> xxxRequestAck           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">PDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>pmessage</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM *&nbsp;</td>
          <td class="mdname" nowrap> <em>plParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d6/d2/structtagDDECONV.html">PDDECONV</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pDdeConv</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01234">1234</a> of file <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html">kernel/ddetrack.c</a>.
<p>
References <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l02348">AddPublicObject()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01634">AnticipatePost()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d5/d4/kernel_2ddetrack_8c.html#a38">ClientGetDDEFlags()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01689">Createpxs()</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00063">DO_POST</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00064">FAILNOFREE_POST</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01890">FreeListAdd()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01547">GETPTI</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l02427">GiveObject()</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06170">tagXSTATE::head</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00034">tagINTDDEINFO::hIndirect</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l02333">IsObjectPublic()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02219">MSGFLAG_DDE_MID_THUNK</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l02001">PopState()</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01457">_THROBJHEAD::pti</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01512">PtoH</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06156">tagDDECONV::spartnerConv</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06157">tagDDECONV::spwnd</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06158">tagDDECONV::spwndPartner</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06159">tagDDECONV::spxsOut</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00019">TRACE_DDE</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00044">XS_DATA</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00052">XS_FREEPXS</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00053">XS_FRELEASE</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00057">XS_GIVEBACKONNACK</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00050">XS_LOHANDLE</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00043">XS_PACKED</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00056">XS_PUBLICOBJ</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01028">xxxAdviseData()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00034">xxxAdviseDataAck</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01835">xxxCopyAckIn()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l02104">xxxCopyDdeIn()</a>, and <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00853">xxxUnexpectedServerPost()</a>.
<p>
<pre class="fragment"><div>01238 {
01239     <a class="code" href="../../d1/d0/structtagXSTATE.html">PXSTATE</a> pxsFree;
01240     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> flags;
01241     <a class="code" href="../../d7/d8/structtagINTDDEINFO.html">PINTDDEINFO</a> pIntDdeInfo;
01242     HANDLE hDirect;
01243     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwStatus, dwRet;
01244 
01245     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pDdeConv);
01246 
01247     <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a0">TRACE_DDE</a>(<span class="stringliteral">"xxxRequestAck or xxxAdviseData"</span>);
01248     <span class="keywordflow">switch</span> (*pmessage) {
01249     <span class="keywordflow">case</span> WM_DDE_DATA:
01250 
01251         <span class="comment">/*</span>
01252 <span class="comment">         * This is very close to advise data handling - the only catch</span>
01253 <span class="comment">         * is that if the fRequest bit is clear this IS advise data.</span>
01254 <span class="comment">         */</span>
01255         flags = <a class="code" href="../../d6/d4/ddetrack_8h.html#a0">XS_PACKED</a> | <a class="code" href="../../d6/d4/ddetrack_8h.html#a7">XS_LOHANDLE</a> | <a class="code" href="../../d6/d4/ddetrack_8h.html#a1">XS_DATA</a>;
01256 
01257         dwStatus = <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a38">ClientGetDDEFlags</a>((HANDLE)*plParam, flags);
01258 
01259         <span class="keywordflow">if</span> (!(dwStatus &amp; DDE_FREQUESTED)) {
01260 
01261             <span class="comment">/*</span>
01262 <span class="comment">             * Its NOT a request Ack - it must be advise data</span>
01263 <span class="comment">             */</span>
01264             <span class="keywordflow">return</span>(<a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a55">xxxAdviseData</a>(pmessage, plParam, pDdeConv));
01265         }
01266 
01267         pxsFree = pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o5">spxsOut</a>;
01268         dwRet = <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a29">xxxCopyDdeIn</a>((HANDLE)*plParam, &amp;flags, &amp;hDirect, &amp;pIntDdeInfo);
01269         <span class="keywordflow">if</span> (dwRet == <a class="code" href="../../d6/d4/ddetrack_8h.html#a19">DO_POST</a>) {
01270             UserAssert(pIntDdeInfo != NULL);
01271             <span class="keywordflow">if</span> (!(((<a class="code" href="../../d4/d2/structtagDDE__DATA.html">PDDE_DATA</a>)(pIntDdeInfo + 1))-&gt;wStatus &amp; (DDE_FACK | DDE_FRELEASE))) {
01272                 RIPMSG0(RIP_ERROR, <span class="stringliteral">"DDE protocol violation - no RELEASE or ACK bit set - setting RELEASE."</span>);
01273                 ((<a class="code" href="../../d4/d2/structtagDDE__DATA.html">PDDE_DATA</a>)(pIntDdeInfo + 1))-&gt;wStatus |= DDE_FRELEASE;
01274             }
01275             <span class="keywordflow">if</span> (dwStatus &amp; DDE_FRELEASE) {
01276                 <span class="comment">/*</span>
01277 <span class="comment">                 * giving it away</span>
01278 <span class="comment">                 */</span>
01279                 <span class="keywordflow">if</span> (<a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a42">IsObjectPublic</a>(pIntDdeInfo-&gt;<a class="code" href="../../d7/d8/structtagINTDDEINFO.html#o5">hIndirect</a>) != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01280                     RIPMSG0(RIP_ERROR, <span class="stringliteral">"DDE Protocol violation - giving away a public GDI object."</span>);
01281                     UserFreePool(pIntDdeInfo);
01282                     <span class="keywordflow">return</span> <a class="code" href="../../d6/d4/ddetrack_8h.html#a20">FAILNOFREE_POST</a>;
01283                 }
01284                 <span class="keywordflow">if</span> (<a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a45">GiveObject</a>(((<a class="code" href="../../d4/d2/structtagDDE__DATA.html">PDDE_DATA</a>)(pIntDdeInfo + 1))-&gt;wFmt,
01285                         pIntDdeInfo-&gt;hIndirect,
01286                         (W32PID)<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a455">GETPTI</a>(pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o4">spwndPartner</a>)-&gt;ppi-&gt;W32Pid)) {
01287                     flags |= <a class="code" href="../../d6/d4/ddetrack_8h.html#a14">XS_GIVEBACKONNACK</a>;
01288                 }
01289                 flags |= <a class="code" href="../../d6/d4/ddetrack_8h.html#a10">XS_FRELEASE</a>;
01290             } <span class="keywordflow">else</span> {
01291                 <span class="comment">/*</span>
01292 <span class="comment">                 * on loan</span>
01293 <span class="comment">                 */</span>
01294                 <span class="keywordflow">if</span> (<a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a43">AddPublicObject</a>(((<a class="code" href="../../d4/d2/structtagDDE__DATA.html">PDDE_DATA</a>)(pIntDdeInfo + 1))-&gt;wFmt,
01295                             pIntDdeInfo-&gt;hIndirect,
01296                             (W32PID)<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a455">GETPTI</a>(pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o3">spwnd</a>)-&gt;ppi-&gt;W32Pid)) {
01297                     flags |= <a class="code" href="../../d6/d4/ddetrack_8h.html#a13">XS_PUBLICOBJ</a>;
01298                 }
01299             }
01300             *pmessage |= <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a545">MSGFLAG_DDE_MID_THUNK</a>;
01301             <span class="keywordflow">if</span> (dwStatus &amp; DDE_FACK) {
01302                 *plParam = (LPARAM)<a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a26">AnticipatePost</a>(pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o2">spartnerConv</a>,
01303                     xxxAdviseDataAck, NULL, hDirect, pIntDdeInfo, flags);
01304             } <span class="keywordflow">else</span> {
01305                 <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a0">TRACE_DDE</a>(<span class="stringliteral">"xxxRequestAck: Delayed freeing non-ackable request data"</span>);
01306                 <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a32">FreeListAdd</a>(pDdeConv, hDirect, flags &amp; ~XS_PACKED);
01307                 pxsFree = <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a27">Createpxs</a>(NULL, NULL, NULL, pIntDdeInfo, flags | XS_FREEPXS);
01308                 <span class="keywordflow">if</span> (pxsFree != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01309                     pxsFree-&gt;<a class="code" href="../../d1/d0/structtagXSTATE.html#o0">head</a>.<a class="code" href="../../d1/d1/struct__THROBJHEAD.html#o1">pti</a> = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a455">GETPTI</a>(pDdeConv-&gt;<a class="code" href="../../d6/d2/structtagDDECONV.html#o4">spwndPartner</a>);
01310                 }
01311                 *plParam = (LPARAM)<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a448">PtoH</a>(pxsFree);
01312             }
01313 
01314             <span class="keywordflow">if</span> (*plParam != 0) {
01315                 <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a34">PopState</a>(pDdeConv);
01316             } <span class="keywordflow">else</span> {
01317                 dwRet = <a class="code" href="../../d6/d4/ddetrack_8h.html#a20">FAILNOFREE_POST</a>;
01318             }
01319         }
01320         <span class="keywordflow">return</span> dwRet;
01321 
01322     <span class="keywordflow">case</span> WM_DDE_ACK:        <span class="comment">// server NACKs request</span>
01323         dwRet = <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a64">xxxCopyAckIn</a>(pmessage, plParam, pDdeConv, &amp;pIntDdeInfo);
01324         <span class="keywordflow">if</span> (dwRet != <a class="code" href="../../d6/d4/ddetrack_8h.html#a19">DO_POST</a>) {
01325             <span class="keywordflow">return</span> dwRet;
01326         }
01327         UserAssert(pIntDdeInfo != NULL);
01328         <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a34">PopState</a>(pDdeConv);
01329         <span class="keywordflow">return</span>(<a class="code" href="../../d6/d4/ddetrack_8h.html#a19">DO_POST</a>);
01330 
01331     <span class="keywordflow">default</span>:
01332         <span class="keywordflow">return</span>(<a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a51">xxxUnexpectedServerPost</a>(pmessage, plParam, pDdeConv));
01333     }
01334 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a57" doxytag="kernel/ddetrack.c::xxxUnadviseAck" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> xxxUnadviseAck           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">PDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>pmessage</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM *&nbsp;</td>
          <td class="mdname" nowrap> <em>plParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d6/d2/structtagDDECONV.html">PDDECONV</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pDdeConv</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01193">1193</a> of file <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html">kernel/ddetrack.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00063">DO_POST</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l02001">PopState()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00019">TRACE_DDE</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01835">xxxCopyAckIn()</a>, and <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00853">xxxUnexpectedServerPost()</a>.
<p>
<pre class="fragment"><div>01197 {
01198     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwRet;
01199     <a class="code" href="../../d7/d8/structtagINTDDEINFO.html">PINTDDEINFO</a> pIntDdeInfo;
01200     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pDdeConv);
01201 
01202     <span class="keywordflow">if</span> (*pmessage != WM_DDE_ACK) {
01203         <span class="keywordflow">return</span>(<a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a51">xxxUnexpectedServerPost</a>(pmessage, plParam, pDdeConv));
01204     }
01205     <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a0">TRACE_DDE</a>(<span class="stringliteral">"xxxUnadviseAck"</span>);
01206     dwRet = <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a64">xxxCopyAckIn</a>(pmessage, plParam, pDdeConv, &amp;pIntDdeInfo);
01207     <span class="keywordflow">if</span> (dwRet != <a class="code" href="../../d6/d4/ddetrack_8h.html#a19">DO_POST</a>) {
01208         <span class="keywordflow">return</span> dwRet;
01209     }
01210     UserAssert(pIntDdeInfo != NULL);
01211     <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a34">PopState</a>(pDdeConv);
01212     <span class="keywordflow">return</span>(<a class="code" href="../../d6/d4/ddetrack_8h.html#a19">DO_POST</a>);
01213 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a52" doxytag="kernel/ddetrack.c::xxxUnexpectedClientPost" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> xxxUnexpectedClientPost           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">PDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>pmessage</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM *&nbsp;</td>
          <td class="mdname" nowrap> <em>plParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d6/d2/structtagDDECONV.html">PDDECONV</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pDdeConv</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00895">895</a> of file <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html">kernel/ddetrack.c</a>.
<p>
References <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01729">AbnormalDDEPost()</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00064">FAILNOFREE_POST</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01919">FreeDDEHandle()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01221">Request()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01565">SpontaneousTerminate()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00019">TRACE_DDE</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01180">Unadvise()</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00043">XS_PACKED</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00942">xxxAdvise()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01460">xxxExecute()</a>, and <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01344">xxxPoke()</a>.
<p>
Referenced by <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01113">xxxAdviseDataAck()</a>, and <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00320">xxxDDETrackPostHook()</a>.
<p>
<pre class="fragment"><div>00899 {
00900     <span class="keywordflow">switch</span> (*pmessage) {
00901     <span class="keywordflow">case</span> WM_DDE_TERMINATE:
00902         <span class="keywordflow">return</span>(<a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a25">SpontaneousTerminate</a>(pmessage, pDdeConv));
00903 
00904     <span class="keywordflow">case</span> WM_DDE_ACK:
00905 
00906         <span class="comment">/*</span>
00907 <span class="comment">         * Could be an extra NACK due to timeout problems, just fake it.</span>
00908 <span class="comment">         */</span>
00909         <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a0">TRACE_DDE</a>(<span class="stringliteral">"xxxUnexpectedClientPost: dumping ACK data..."</span>);
00910         <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a36">FreeDDEHandle</a>(pDdeConv, (HANDLE)*plParam, XS_PACKED);
00911         <span class="keywordflow">return</span>(<a class="code" href="../../d6/d4/ddetrack_8h.html#a20">FAILNOFREE_POST</a>);
00912 
00913     <span class="keywordflow">case</span> WM_DDE_DATA:
00914         <span class="keywordflow">return</span>(<a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a28">AbnormalDDEPost</a>(pDdeConv, *pmessage));
00915 
00916     <span class="keywordflow">case</span> WM_DDE_ADVISE:
00917         <span class="keywordflow">return</span>(<a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a53">xxxAdvise</a>(pmessage, plParam, pDdeConv));
00918 
00919     <span class="keywordflow">case</span> WM_DDE_UNADVISE:
00920         <span class="keywordflow">return</span>(<a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a23">Unadvise</a>(pDdeConv));
00921 
00922     <span class="keywordflow">case</span> WM_DDE_REQUEST:
00923         <span class="keywordflow">return</span>(<a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a24">Request</a>(pDdeConv));
00924 
00925     <span class="keywordflow">case</span> WM_DDE_POKE:
00926         <span class="keywordflow">return</span>(<a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a59">xxxPoke</a>(pmessage, plParam, pDdeConv));
00927 
00928     <span class="keywordflow">case</span> WM_DDE_EXECUTE:
00929         <span class="keywordflow">return</span>(<a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a61">xxxExecute</a>(pmessage, plParam, pDdeConv));
00930     }
00931     <span class="keywordflow">return</span> 0;
00932 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a51" doxytag="kernel/ddetrack.c::xxxUnexpectedServerPost" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> xxxUnexpectedServerPost           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">PDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>pmessage</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM *&nbsp;</td>
          <td class="mdname" nowrap> <em>plParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d6/d2/structtagDDECONV.html">PDDECONV</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pDdeConv</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00853">853</a> of file <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html">kernel/ddetrack.c</a>.
<p>
References <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01729">AbnormalDDEPost()</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00064">FAILNOFREE_POST</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01919">FreeDDEHandle()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01565">SpontaneousTerminate()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00019">TRACE_DDE</a>, <a class="el" href="../../d7/d3/ddetrack_8h-source.html#l00043">XS_PACKED</a>, and <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01028">xxxAdviseData()</a>.
<p>
Referenced by <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01601">DupConvTerminate()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00978">xxxAdviseAck()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00320">xxxDDETrackPostHook()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01515">xxxExecuteAck()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01411">xxxPokeAck()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01234">xxxRequestAck()</a>, and <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01193">xxxUnadviseAck()</a>.
<p>
<pre class="fragment"><div>00857 {
00858     <span class="keywordflow">switch</span> (*pmessage) {
00859     <span class="keywordflow">case</span> WM_DDE_TERMINATE:
00860         <span class="keywordflow">return</span>(<a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a25">SpontaneousTerminate</a>(pmessage, pDdeConv));
00861 
00862     <span class="keywordflow">case</span> WM_DDE_DATA:
00863         <span class="keywordflow">return</span>(<a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a55">xxxAdviseData</a>(pmessage, plParam, pDdeConv));
00864 
00865     <span class="keywordflow">case</span> WM_DDE_ACK:
00866 
00867         <span class="comment">/*</span>
00868 <span class="comment">         * Could be an extra NACK due to timeout problems, just fake it.</span>
00869 <span class="comment">         */</span>
00870         <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a0">TRACE_DDE</a>(<span class="stringliteral">"xxxUnexpectedServerPost: dumping ACK data..."</span>);
00871         <a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a36">FreeDDEHandle</a>(pDdeConv, (HANDLE)*plParam, XS_PACKED);
00872         <span class="keywordflow">return</span>(<a class="code" href="../../d6/d4/ddetrack_8h.html#a20">FAILNOFREE_POST</a>);
00873 
00874     <span class="keywordflow">case</span> WM_DDE_ADVISE:
00875     <span class="keywordflow">case</span> WM_DDE_UNADVISE:
00876     <span class="keywordflow">case</span> WM_DDE_REQUEST:
00877     <span class="keywordflow">case</span> WM_DDE_POKE:
00878     <span class="keywordflow">case</span> WM_DDE_EXECUTE:
00879         <span class="keywordflow">return</span>(<a class="code" href="../../d5/d4/kernel_2ddetrack_8c.html#a28">AbnormalDDEPost</a>(pDdeConv, *pmessage));
00880     }
00881     <span class="keywordflow">return</span> 0;
00882 }
</div></pre>    </td>
  </tr>
</table>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="a19" doxytag="kernel/ddetrack.c::DupConvTerminate" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d4/d1/userk_8h.html#a931">FNDDERESPONSE</a> DupConvTerminate          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00044">44</a> of file <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html">kernel/ddetrack.c</a>.
<p>
Referenced by <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00147">xxxDDETrackSendHook()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a6" doxytag="kernel/ddetrack.c::gpPublicObjectList" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d6/d4/structtagPUBOBJ.html">PPUBOBJ</a> <a class="el" href="../../d9/d6/ntuser_2kernel_2globals_8h.html#a245">gpPublicObjectList</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00017">17</a> of file <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html">kernel/ddetrack.c</a>.
<p>
Referenced by <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l02348">AddPublicObject()</a>, <a class="el" href="../../d7/d2/queue_8c-source.html#l04976">DestroyProcessInfo()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l02333">IsObjectPublic()</a>, and <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l02385">RemovePublicObject()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a9" doxytag="kernel/ddetrack.c::xxxAdvise" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d4/d1/userk_8h.html#a931">FNDDERESPONSE</a> xxxAdvise          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00031">31</a> of file <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html">kernel/ddetrack.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a10" doxytag="kernel/ddetrack.c::xxxAdviseAck" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d4/d1/userk_8h.html#a931">FNDDERESPONSE</a> xxxAdviseAck          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00032">32</a> of file <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html">kernel/ddetrack.c</a>.
<p>
Referenced by <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00942">xxxAdvise()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a11" doxytag="kernel/ddetrack.c::xxxAdviseData" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d4/d1/userk_8h.html#a931">FNDDERESPONSE</a> xxxAdviseData          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00033">33</a> of file <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html">kernel/ddetrack.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a12" doxytag="kernel/ddetrack.c::xxxAdviseDataAck" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d4/d1/userk_8h.html#a931">FNDDERESPONSE</a> xxxAdviseDataAck          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00034">34</a> of file <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html">kernel/ddetrack.c</a>.
<p>
Referenced by <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01028">xxxAdviseData()</a>, and <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01234">xxxRequestAck()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a17" doxytag="kernel/ddetrack.c::xxxExecute" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d4/d1/userk_8h.html#a931">FNDDERESPONSE</a> xxxExecute          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00041">41</a> of file <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html">kernel/ddetrack.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a18" doxytag="kernel/ddetrack.c::xxxExecuteAck" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d4/d1/userk_8h.html#a931">FNDDERESPONSE</a> xxxExecuteAck          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00042">42</a> of file <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html">kernel/ddetrack.c</a>.
<p>
Referenced by <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01460">xxxExecute()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a15" doxytag="kernel/ddetrack.c::xxxPoke" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d4/d1/userk_8h.html#a931">FNDDERESPONSE</a> xxxPoke          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00039">39</a> of file <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html">kernel/ddetrack.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a16" doxytag="kernel/ddetrack.c::xxxPokeAck" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d4/d1/userk_8h.html#a931">FNDDERESPONSE</a> xxxPokeAck          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00040">40</a> of file <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html">kernel/ddetrack.c</a>.
<p>
Referenced by <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01344">xxxPoke()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a14" doxytag="kernel/ddetrack.c::xxxRequestAck" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d4/d1/userk_8h.html#a931">FNDDERESPONSE</a> xxxRequestAck          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00038">38</a> of file <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html">kernel/ddetrack.c</a>.
<p>
Referenced by <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01221">Request()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a13" doxytag="kernel/ddetrack.c::xxxUnadviseAck" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d4/d1/userk_8h.html#a931">FNDDERESPONSE</a> xxxUnadviseAck          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00036">36</a> of file <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html">kernel/ddetrack.c</a>.
<p>
Referenced by <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l01180">Unadvise()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a8" doxytag="kernel/ddetrack.c::xxxUnexpectedClientPost" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d4/d1/userk_8h.html#a931">FNDDERESPONSE</a> xxxUnexpectedClientPost          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00030">30</a> of file <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html">kernel/ddetrack.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a7" doxytag="kernel/ddetrack.c::xxxUnexpectedServerPost" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d4/d1/userk_8h.html#a931">FNDDERESPONSE</a> xxxUnexpectedServerPost          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00029">29</a> of file <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html">kernel/ddetrack.c</a>.    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Sat May 15 19:43:25 2004 for test by
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>test: immhotky.c File Reference</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="../../main.html">Main&nbsp;Page</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Class&nbsp;List</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Class&nbsp;Members</a> | <a class="qindex" href="../../globals.html">File&nbsp;Members</a></div>
<h1>immhotky.c File Reference</h1><code>#include "<a class="el" href="../../d8/d2/w32_2ntuser_2client_2precomp_8h-source.html">precomp.h</a>"</code><br>

<p>
<a href="../../d6/d9/immhotky_8c-source.html">Go to the source code of this file.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d2/d5/structtagFE__KEYBOARDS.html">tagFE_KEYBOARDS</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d0/structADVAPI__FN.html">ADVAPI_FN</a></td></tr>

<tr><td colspan=2><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d0/immhotky_8c.html#a0">GET</a>(a)</td></tr>

<tr><td colspan=2><br><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d2/d5/structtagFE__KEYBOARDS.html">tagFE_KEYBOARDS</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d0/immhotky_8c.html#a1">FE_KEYBOARDS</a></td></tr>

<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d0/immhotky_8c.html#a16">CliSaveImeHotKey</a> (<a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwID, UINT uModifiers, UINT uVKey, HKL hkl, BOOL fDelete)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d0/immhotky_8c.html#a17">CliImmSetHotKeyWorker</a> (<a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwID, UINT uModifiers, UINT uVKey, HKL hkl, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwAction)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d0/immhotky_8c.html#a18">NumToHexAscii</a> (<a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>, PTSTR)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d0/immhotky_8c.html#a19">CliGetImeHotKeysFromRegistry</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d0/immhotky_8c.html#a20">CliSetSingleHotKey</a> (PKEY_BASIC_INFORMATION pKeyInfo, HANDLE hKey)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d0/immhotky_8c.html#a21">CliSetDefaultImeHotKeys</a> (<a class="el" href="../../d8/d0/immstruc_8h.html#a34">PCIMEHOTKEY</a> ph, <a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a> num, BOOL fCheckExistingHotKey)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d0/immhotky_8c.html#a22">CliGetPreloadKeyboardLayouts</a> (<a class="el" href="../../d2/d5/structtagFE__KEYBOARDS.html">FE_KEYBOARDS</a> *pFeKbds)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d0/immhotky_8c.html#a23">SetFeKeyboardFlags</a> (LANGID langid, <a class="el" href="../../d2/d5/structtagFE__KEYBOARDS.html">FE_KEYBOARDS</a> *pFeKbds)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d0/immhotky_8c.html#a24">CliImmInitializeHotKeys</a> (<a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwAction, HKL hkl)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d0/immhotky_8c.html#a25">CliReadRegistryValue</a> (HANDLE hKey, PCWSTR pName)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL WINAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d0/immhotky_8c.html#a26">CliImmSetHotKey</a> (<a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwID, UINT uModifiers, UINT uVKey, HKL hkl)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d0/immhotky_8c.html#a27">OpenRegApi</a> (<a class="el" href="../../d8/d0/structADVAPI__FN.html">ADVAPI_FN</a> *pfn)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d0/immhotky_8c.html#a28">CloseRegApi</a> (<a class="el" href="../../d8/d0/structADVAPI__FN.html">ADVAPI_FN</a> *pfn)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d0/immhotky_8c.html#a29">CliSaveImeHotKeyWorker</a> (<a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>, UINT, UINT, HKL, BOOL, <a class="el" href="../../d8/d0/structADVAPI__FN.html">ADVAPI_FN</a> *)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d0/immhotky_8c.html#a30">NumToHexAscii</a> (<a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwNum, PWSTR szAscii)</td></tr>

<tr><td colspan=2><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>CONST TCHAR *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d0/immhotky_8c.html#a2">szaRegImmHotKeys</a> []</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>CONST TCHAR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d0/immhotky_8c.html#a3">szRegImeHotKey</a> [] = TEXT("Control Panel\\Input Method\\Hot Keys")</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>CONST TCHAR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d0/immhotky_8c.html#a4">szRegKeyboardPreload</a> [] = TEXT("Keyboard Layout\\Preload")</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>CONST TCHAR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d0/immhotky_8c.html#a5">szRegVK</a> [] = TEXT("Virtual <a class="el" href="../../d3/d0/user32_8def.html#a52">Key</a>")</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>CONST TCHAR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d0/immhotky_8c.html#a6">szRegMOD</a> [] = TEXT("Key Modifiers")</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>CONST TCHAR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d0/immhotky_8c.html#a7">szRegHKL</a> [] = TEXT("Target IME")</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>CONST <a class="el" href="../../d7/d8/struct__tagIMEHOTKEY.html">IMEHOTKEY</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d0/immhotky_8c.html#a8">DefaultHotKeyTableJ</a> []</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>CONST <a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d0/immhotky_8c.html#a9">DefaultHotKeyNumJ</a> = sizeof(<a class="el" href="../../d5/d0/immhotky_8c.html#a8">DefaultHotKeyTableJ</a>) / sizeof(<a class="el" href="../../d7/d8/struct__tagIMEHOTKEY.html">IMEHOTKEY</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>CONST <a class="el" href="../../d7/d8/struct__tagIMEHOTKEY.html">IMEHOTKEY</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d0/immhotky_8c.html#a10">DefaultHotKeyTableT</a> []</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>CONST <a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d0/immhotky_8c.html#a11">DefaultHotKeyNumT</a> = sizeof(<a class="el" href="../../d5/d0/immhotky_8c.html#a10">DefaultHotKeyTableT</a>) / sizeof(<a class="el" href="../../d7/d8/struct__tagIMEHOTKEY.html">IMEHOTKEY</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>CONST <a class="el" href="../../d7/d8/struct__tagIMEHOTKEY.html">IMEHOTKEY</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d0/immhotky_8c.html#a12">DefaultHotKeyTableC</a> []</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>CONST <a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d0/immhotky_8c.html#a13">DefaultHotKeyNumC</a> = sizeof(<a class="el" href="../../d5/d0/immhotky_8c.html#a12">DefaultHotKeyTableC</a>) / sizeof(<a class="el" href="../../d7/d8/struct__tagIMEHOTKEY.html">IMEHOTKEY</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d8/d0/structADVAPI__FN.html">ADVAPI_FN</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d0/immhotky_8c.html#a14">gAdvApiFn</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>CONST TCHAR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d0/immhotky_8c.html#a15">szHexString</a> [] = TEXT("0123456789ABCDEF")</td></tr>

</table>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="a0" doxytag="immhotky.c::GET" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define GET          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">a&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Value:</b><pre class="fragment"><div><span class="keywordflow">if</span> ((pfn-&gt;a = (<span class="keywordtype">void</span>*)GetProcAddress(pfn-&gt;hModule, #a)) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {   \
        RIPMSG0(RIP_WARNING, <span class="stringliteral">"OpenRegApi: "</span> #a <span class="stringliteral">" cannot be imported."</span>);  \
        FreeLibrary(pfn-&gt;hModule);                                      \
        <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;                                                   \
    }
</div></pre>
<p>
Definition at line <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00452">452</a> of file <a class="el" href="../../d6/d9/immhotky_8c-source.html">immhotky.c</a>.
<p>
Referenced by <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00461">OpenRegApi()</a>.    </td>
  </tr>
</table>
<hr><h2>Typedef Documentation</h2>
<a class="anchor" name="a1" doxytag="immhotky.c::FE_KEYBOARDS" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d2/d5/structtagFE__KEYBOARDS.html">tagFE_KEYBOARDS</a>  <a class="el" href="../../d2/d5/structtagFE__KEYBOARDS.html">FE_KEYBOARDS</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="a19" doxytag="immhotky.c::CliGetImeHotKeysFromRegistry" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL CliGetImeHotKeysFromRegistry           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00260">260</a> of file <a class="el" href="../../d6/d9/immhotky_8c-source.html">immhotky.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d0/d7/halvprnt_8c-source.html#l00031">BYTE</a>, <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00353">CliSetSingleHotKey()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d6/d9/obclose_8c-source.html#l00037">NtClose()</a>, <a class="el" href="../../d8/d6/ntapi_8c-source.html#l00610">NtEnumerateKey()</a>, <a class="el" href="../../d8/d6/ntapi_8c-source.html#l01870">NtOpenKey()</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d3/d6/string_8c-source.html#l00148">RtlInitUnicodeString()</a>, <a class="el" href="../../d5/d6/rtl_2regutil_8c-source.html#l01564">RtlOpenCurrentUser()</a>, <a class="el" href="../../d3/d0/cttoken_8c-source.html#l00135">Status</a>, <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00058">szRegImeHotKey</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00129">CliImmInitializeHotKeys()</a>.
<p>
<pre class="fragment"><div>00261 {
00262     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>    fFoundAny = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00263 
00264     HANDLE hCurrentUserKey;
00265     HANDLE hKeyHotKeys;
00266 
00267     OBJECT_ATTRIBUTES   Obja;
00268     UNICODE_STRING      SubKeyName;
00269 
00270     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
00271     ULONG uIndex;
00272 
00273     <span class="comment">//</span>
00274     <span class="comment">// Open the current user registry key</span>
00275     <span class="comment">//</span>
00276     <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d4/d7/rtl_2regutil_8c.html#a27">RtlOpenCurrentUser</a>(MAXIMUM_ALLOWED, &amp;hCurrentUserKey);
00277     <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(Status)) {
00278         <span class="keywordflow">return</span> fFoundAny;
00279     }
00280 
00281     <a class="code" href="../../d2/d7/string_8c.html#a7">RtlInitUnicodeString</a>( &amp;SubKeyName, szRegImeHotKey );
00282     InitializeObjectAttributes( &amp;Obja,
00283                                 &amp;SubKeyName,
00284                                 OBJ_CASE_INSENSITIVE,
00285                                 hCurrentUserKey,
00286                                 NULL);
00287     <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d7/d7/ntapi_8c.html#a23">NtOpenKey</a>( &amp;hKeyHotKeys, KEY_READ, &amp;Obja );
00288     <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(Status)) {
00289         <a class="code" href="../../d5/d0/obclose_8c.html#a1">NtClose</a>( hCurrentUserKey );
00290         <span class="keywordflow">return</span> fFoundAny;
00291     }
00292 
00293     <span class="keywordflow">for</span> (uIndex = 0; <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>; uIndex++) {
00294         <a class="code" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a> KeyBuffer[<span class="keyword">sizeof</span>(KEY_BASIC_INFORMATION) + 16 * <span class="keyword">sizeof</span>(WCHAR)];
00295         PKEY_BASIC_INFORMATION pKeyInfo;
00296         ULONG ResultLength;
00297 
00298         pKeyInfo = (PKEY_BASIC_INFORMATION)KeyBuffer;
00299         <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d7/d7/ntapi_8c.html#a17">NtEnumerateKey</a>(hKeyHotKeys,
00300                                  uIndex,
00301                                  KeyBasicInformation,
00302                                  pKeyInfo,
00303                                  <span class="keyword">sizeof</span>( KeyBuffer ),
00304                                  &amp;ResultLength );
00305 
00306         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(Status)) {
00307 
00308             <span class="keywordflow">if</span> (<a class="code" href="../../d5/d0/immhotky_8c.html#a20">CliSetSingleHotKey</a>(pKeyInfo, hKeyHotKeys)) {
00309 
00310                     fFoundAny = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00311             }
00312 
00313         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> == STATUS_NO_MORE_ENTRIES) {
00314             <span class="keywordflow">break</span>;
00315         }
00316     }
00317 
00318     <a class="code" href="../../d5/d0/obclose_8c.html#a1">NtClose</a>(hKeyHotKeys);
00319     <a class="code" href="../../d5/d0/obclose_8c.html#a1">NtClose</a>(hCurrentUserKey);
00320 
00321     <span class="keywordflow">return</span> fFoundAny;
00322 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a22" doxytag="immhotky.c::CliGetPreloadKeyboardLayouts" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID CliGetPreloadKeyboardLayouts           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d2/d5/structtagFE__KEYBOARDS.html">FE_KEYBOARDS</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pFeKbds</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00229">229</a> of file <a class="el" href="../../d6/d9/immhotky_8c-source.html">immhotky.c</a>.
<p>
References <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d3/d6/string_8c-source.html#l00148">RtlInitUnicodeString()</a>, <a class="el" href="../../d0/d3/cnvint_8c-source.html#l00225">RtlUnicodeStringToInteger()</a>, <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00099">SetFeKeyboardFlags()</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, and <a class="el" href="../../d2/d7/hal_8h.html#a212">VOID()</a>.
<p>
Referenced by <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00129">CliImmInitializeHotKeys()</a>.
<p>
<pre class="fragment"><div>00230 {
00231     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>  i;
00232     WCHAR szPreLoadee[4];   <span class="comment">// up to 999 preloads</span>
00233     WCHAR lpszName[KL_NAMELENGTH];
00234     UNICODE_STRING UnicodeString;
00235     HKL hkl;
00236 
00237     <span class="keywordflow">for</span> (i = 1; i &lt; 1000; i++) {
00238         wsprintf(szPreLoadee, L<span class="stringliteral">"%d"</span>, i);
00239         <span class="keywordflow">if</span> ((GetPrivateProfileStringW(
00240                  L<span class="stringliteral">"Preload"</span>,
00241                  szPreLoadee,
00242                  L<span class="stringliteral">""</span>,                            <span class="comment">// default = NULL</span>
00243                  lpszName,                       <span class="comment">// output buffer</span>
00244                  KL_NAMELENGTH,
00245                  L<span class="stringliteral">"keyboardlayout.ini"</span>) == -1 ) || (*lpszName == <a class="code" href="../../d2/d0/aw_8h.html#a3">L</a><span class="charliteral">'\0'</span>)) {
00246             <span class="keywordflow">break</span>;
00247         }
00248         <a class="code" href="../../d2/d7/string_8c.html#a7">RtlInitUnicodeString</a>(&amp;UnicodeString, lpszName);
00249         <a class="code" href="../../d9/d3/cnvint_8c.html#a4">RtlUnicodeStringToInteger</a>(&amp;UnicodeString, 16L, (PULONG)&amp;hkl);
00250 
00251         RIPMSG2(RIP_VERBOSE, <span class="stringliteral">"PreLoaded HKL(%d): %08X\n"</span>, i, hkl);
00252 
00253         <span class="comment">//</span>
00254         <span class="comment">// Set language flags. By its definition, LOWORD(hkl) is LANGID</span>
00255         <span class="comment">//</span>
00256         <a class="code" href="../../d5/d0/immhotky_8c.html#a23">SetFeKeyboardFlags</a>(LOWORD(HandleToUlong(hkl)), pFeKbds);
00257     }
00258 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a24" doxytag="immhotky.c::CliImmInitializeHotKeys" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID CliImmInitializeHotKeys           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwAction</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HKL&nbsp;</td>
          <td class="mdname" nowrap> <em>hkl</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00129">129</a> of file <a class="el" href="../../d6/d9/immhotky_8c-source.html">immhotky.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00260">CliGetImeHotKeysFromRegistry()</a>, <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00229">CliGetPreloadKeyboardLayouts()</a>, <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00631">CliImmSetHotKeyWorker()</a>, <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00197">CliSetDefaultImeHotKeys()</a>, <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00085">DefaultHotKeyNumC</a>, <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00073">DefaultHotKeyNumJ</a>, <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00079">DefaultHotKeyNumT</a>, <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00081">DefaultHotKeyTableC</a>, <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00070">DefaultHotKeyTableJ</a>, <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00075">DefaultHotKeyTableT</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00064">tagFE_KEYBOARDS::fCHS</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00063">tagFE_KEYBOARDS::fCHT</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00062">tagFE_KEYBOARDS::fJPN</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00065">tagFE_KEYBOARDS::fKOR</a>, <a class="el" href="../../d9/d9/immstruc_8h-source.html#l00078">ISHK_INITIALIZE</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l09058">NtUserGetKeyboardLayoutList()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00099">SetFeKeyboardFlags()</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00958">UserLocalAlloc</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00960">UserLocalFree</a>, and <a class="el" href="../../d2/d7/hal_8h.html#a212">VOID()</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/client_8c-source.html#l04385">LoadKeyboardLayoutWorker()</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l04483">UnloadKeyboardLayout()</a>, and <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00049">UpdatePerUserSystemParameters()</a>.
<p>
<pre class="fragment"><div>00130 {
00131     <a class="code" href="../../d2/d5/structtagFE__KEYBOARDS.html">FE_KEYBOARDS</a> feKbds = { 0, 0, 0, 0, };
00132     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fFoundAny;
00133 
00134     UNREFERENCED_PARAMETER(hkl);
00135 
00136     <span class="comment">// First, initialize the hotkey list</span>
00137     <a class="code" href="../../d5/d0/immhotky_8c.html#a17">CliImmSetHotKeyWorker</a>(0, 0, 0, NULL, ISHK_INITIALIZE);
00138 
00139     <span class="comment">// Check if the user has customized IME hotkeys</span>
00140     <span class="comment">// (they're stored in the registry)</span>
00141     fFoundAny = <a class="code" href="../../d5/d0/immhotky_8c.html#a19">CliGetImeHotKeysFromRegistry</a>();
00142 
00143     <span class="keywordflow">if</span> (dwAction == <a class="code" href="../../d8/d0/immstruc_8h.html#a30">ISHK_INITIALIZE</a>) {
00144         TAGMSG0(DBGTAG_IMM, <span class="stringliteral">"Setting IME HotKeys for Init.\n"</span>);
00145 
00146         <span class="comment">// Get the user's default locale and set its flag</span>
00147         <a class="code" href="../../d5/d0/immhotky_8c.html#a23">SetFeKeyboardFlags</a>(LANGIDFROMLCID(GetUserDefaultLCID()), &amp;feKbds);
00148 
00149         <span class="comment">// Get preloaded keyboards' locales and set their flags</span>
00150         <a class="code" href="../../d5/d0/immhotky_8c.html#a22">CliGetPreloadKeyboardLayouts</a>(&amp;feKbds);
00151 
00152     }
00153     <span class="keywordflow">else</span> {
00154         <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> i;
00155         <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> nLayouts;
00156         LPHKL lphkl;
00157 
00158         TAGMSG0(DBGTAG_IMM, <span class="stringliteral">"Setting IME HotKeys for Add.\n"</span>);
00159 
00160         nLayouts = <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a312">NtUserGetKeyboardLayoutList</a>(0, NULL);
00161         <span class="keywordflow">if</span> (nLayouts == 0) {
00162             <span class="keywordflow">return</span>;
00163         }
00164         lphkl = <a class="code" href="../../d6/d0/usercli_8h.html#a136">UserLocalAlloc</a>(0, nLayouts * <span class="keyword">sizeof</span>(HKL));
00165         <span class="keywordflow">if</span> (lphkl == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00166             <span class="keywordflow">return</span>;
00167         }
00168         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a312">NtUserGetKeyboardLayoutList</a>(nLayouts, lphkl);
00169         <span class="keywordflow">for</span> (i = 0; i &lt; nLayouts; ++i) {
00170             <span class="comment">//</span>
00171             <span class="comment">// Set language flags. By its definition, LOWORD(hkl) is LANGID</span>
00172             <span class="comment">//</span>
00173             <a class="code" href="../../d5/d0/immhotky_8c.html#a23">SetFeKeyboardFlags</a>(LOWORD(HandleToUlong(lphkl[i])), &amp;feKbds);
00174         }
00175         <a class="code" href="../../d6/d0/usercli_8h.html#a138">UserLocalFree</a>(lphkl);
00176     }
00177 
00178     <span class="keywordflow">if</span> (feKbds.<a class="code" href="../../d2/d5/structtagFE__KEYBOARDS.html#o0">fJPN</a>) {
00179         TAGMSG0(DBGTAG_IMM, <span class="stringliteral">"JPN KL Preloaded.\n"</span>);
00180         <a class="code" href="../../d5/d0/immhotky_8c.html#a21">CliSetDefaultImeHotKeys</a>(DefaultHotKeyTableJ, DefaultHotKeyNumJ, fFoundAny);
00181     }
00182 
00183     <span class="keywordflow">if</span> (feKbds.<a class="code" href="../../d2/d5/structtagFE__KEYBOARDS.html#o3">fKOR</a>) {
00184         TAGMSG0(DBGTAG_IMM, <span class="stringliteral">"KOR KL Preloaded, but KOR hotkeys will not be registered.\n"</span>);
00185     }
00186 
00187     <span class="keywordflow">if</span> (feKbds.<a class="code" href="../../d2/d5/structtagFE__KEYBOARDS.html#o1">fCHT</a>) {
00188         TAGMSG0(DBGTAG_IMM, <span class="stringliteral">"CHT KL Preloaded.\n"</span>);
00189         <a class="code" href="../../d5/d0/immhotky_8c.html#a21">CliSetDefaultImeHotKeys</a>(DefaultHotKeyTableT, DefaultHotKeyNumT, fFoundAny);
00190     }
00191     <span class="keywordflow">if</span> (feKbds.<a class="code" href="../../d2/d5/structtagFE__KEYBOARDS.html#o2">fCHS</a>) {
00192         TAGMSG0(DBGTAG_IMM, <span class="stringliteral">"CHS KL Preloaded.\n"</span>);
00193         <a class="code" href="../../d5/d0/immhotky_8c.html#a21">CliSetDefaultImeHotKeys</a>(DefaultHotKeyTableC, DefaultHotKeyNumC, fFoundAny);
00194     }
00195 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a26" doxytag="immhotky.c::CliImmSetHotKey" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL WINAPI CliImmSetHotKey           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwID</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>uModifiers</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>uVKey</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HKL&nbsp;</td>
          <td class="mdname" nowrap> <em>hkl</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00398">398</a> of file <a class="el" href="../../d6/d9/immhotky_8c-source.html">immhotky.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00631">CliImmSetHotKeyWorker()</a>, <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00508">CliSaveImeHotKey()</a>, <a class="el" href="../../d9/d9/immstruc_8h-source.html#l00077">ISHK_ADD</a>, and <a class="el" href="../../d9/d9/immstruc_8h-source.html#l00076">ISHK_REMOVE</a>.
<p>
<pre class="fragment"><div>00403 {
00404     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fResult;
00405     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fTmp;
00406     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fDelete = (uVKey == 0 );
00407 
00408     <span class="keywordflow">if</span> (fDelete) {
00409         <span class="comment">//</span>
00410         <span class="comment">// Removing an IME hotkey from the list in the kernel side</span>
00411         <span class="comment">// should not be failed, if we succeed to remove the IME</span>
00412         <span class="comment">// hotkey entry from the registry. Therefore CliSaveImeHotKey</span>
00413         <span class="comment">// is called first.</span>
00414         <span class="comment">//</span>
00415         fResult = <a class="code" href="../../d5/d0/immhotky_8c.html#a16">CliSaveImeHotKey</a>( dwID, uModifiers, uVKey, hkl,  fDelete );
00416         <span class="keywordflow">if</span> (fResult) {
00417             fTmp = <a class="code" href="../../d5/d0/immhotky_8c.html#a17">CliImmSetHotKeyWorker</a>( dwID, uModifiers, uVKey, hkl, ISHK_REMOVE );
00418             UserAssert(fTmp);
00419         }
00420     } <span class="keywordflow">else</span> {
00421         <span class="comment">//</span>
00422         <span class="comment">// CliImmSetHotKeyWorker should be called first since</span>
00423         <span class="comment">// adding an IME hotkey into the list in the kernel side</span>
00424         <span class="comment">// will be failed in various reasons.</span>
00425         <span class="comment">//</span>
00426         fResult = <a class="code" href="../../d5/d0/immhotky_8c.html#a17">CliImmSetHotKeyWorker</a>(dwID, uModifiers, uVKey, hkl, ISHK_ADD);
00427         <span class="keywordflow">if</span> (fResult) {
00428             fResult = <a class="code" href="../../d5/d0/immhotky_8c.html#a16">CliSaveImeHotKey</a>(dwID, uModifiers, uVKey, hkl, fDelete);
00429             <span class="keywordflow">if</span> (!fResult) {
00430                 <span class="comment">//</span>
00431                 <span class="comment">// We failed to save the hotkey to the registry.</span>
00432                 <span class="comment">// We need to remove the entry from the IME hotkey</span>
00433                 <span class="comment">// list in the kernel side.</span>
00434                 <span class="comment">//</span>
00435                 fTmp = <a class="code" href="../../d5/d0/immhotky_8c.html#a17">CliImmSetHotKeyWorker</a>(dwID, uModifiers, uVKey, hkl, ISHK_REMOVE);
00436                 UserAssert(fTmp);
00437             }
00438         }
00439     }
00440     <span class="keywordflow">return</span> fResult;
00441 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a17" doxytag="immhotky.c::CliImmSetHotKeyWorker" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL CliImmSetHotKeyWorker           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwID</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>uModifiers</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>uVKey</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HKL&nbsp;</td>
          <td class="mdname" nowrap> <em>hkl</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwAction</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00631">631</a> of file <a class="el" href="../../d6/d9/immhotky_8c-source.html">immhotky.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d9/d9/immstruc_8h-source.html#l00077">ISHK_ADD</a>, <a class="el" href="../../d9/d9/immstruc_8h-source.html#l00075">MOD_BOTH_SIDES</a>, <a class="el" href="../../d9/d9/immstruc_8h-source.html#l00074">MOD_MODIFY_KEYS</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l12863">NtUserSetImeHotKey()</a>, and <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>.
<p>
Referenced by <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00129">CliImmInitializeHotKeys()</a>, <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00398">CliImmSetHotKey()</a>, <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00197">CliSetDefaultImeHotKeys()</a>, and <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00353">CliSetSingleHotKey()</a>.
<p>
<pre class="fragment"><div>00637 {
00638     <span class="comment">//</span>
00639     <span class="comment">// if we're adding an IME hotkey entry, let's check</span>
00640     <span class="comment">// the parameters before calling the kernel side code</span>
00641     <span class="comment">//</span>
00642     <span class="keywordflow">if</span> (dwAction == <a class="code" href="../../d8/d0/immstruc_8h.html#a29">ISHK_ADD</a>) {
00643 
00644         <span class="keywordflow">if</span> (dwID &gt;= IME_HOTKEY_DSWITCH_FIRST &amp;&amp;
00645                 dwID &lt;= IME_HOTKEY_DSWITCH_LAST) {
00646             <span class="comment">//</span>
00647             <span class="comment">// IME direct switching hot key - switch to</span>
00648             <span class="comment">// the keyboard layout specified.</span>
00649             <span class="comment">// We need to specify keyboard layout.</span>
00650             <span class="comment">//</span>
00651             <span class="keywordflow">if</span> (hkl == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00652                 RIPERR0(ERROR_INVALID_PARAMETER, RIP_WARNING, <span class="stringliteral">"hkl should be specified"</span>);
00653                 <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00654             }
00655 
00656         } <span class="keywordflow">else</span> {
00657             <span class="comment">//</span>
00658             <span class="comment">// normal hot keys - change the mode of current iME</span>
00659             <span class="comment">//</span>
00660             <span class="comment">// Because it should be effective in all IME no matter</span>
00661             <span class="comment">// which IME is active we should not specify a target IME</span>
00662             <span class="comment">//</span>
00663             <span class="keywordflow">if</span> (hkl != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00664                 RIPERR0(ERROR_INVALID_PARAMETER, RIP_WARNING, <span class="stringliteral">"hkl shouldn't be specified"</span>);
00665                 <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00666             }
00667 
00668             <span class="keywordflow">if</span> (dwID &gt;= IME_KHOTKEY_FIRST &amp;&amp; dwID &lt;= IME_KHOTKEY_LAST) {
00669                 RIPERR0(ERROR_INVALID_PARAMETER, RIP_WARNING, <span class="stringliteral">"Hotkey for Korean IMEs are invalid."</span>);
00670                 <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00671             }
00672         }
00673 
00674         <span class="keywordflow">if</span> (uModifiers &amp; <a class="code" href="../../d8/d0/immstruc_8h.html#a26">MOD_MODIFY_KEYS</a>) {
00675             <span class="comment">//</span>
00676             <span class="comment">// Because normal keyboard has left and right key for</span>
00677             <span class="comment">// these keys, you should specify left or right ( or both )</span>
00678             <span class="comment">//</span>
00679             <span class="keywordflow">if</span> ((uModifiers &amp; <a class="code" href="../../d8/d0/immstruc_8h.html#a27">MOD_BOTH_SIDES</a>) == 0) {
00680                 RIPERR3(ERROR_INVALID_PARAMETER, RIP_WARNING, <span class="stringliteral">"invalid modifiers %x for id %x vKey %x"</span>, uModifiers, dwID, uVKey);
00681                 <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00682             }
00683         }
00684 
00685 <span class="preprocessor">#if 0   // Skip this check for now</span>
00686 <span class="preprocessor"></span>        <span class="comment">//</span>
00687         <span class="comment">// It doesn't make sense if vkey is same as modifiers</span>
00688         <span class="comment">//</span>
00689         <span class="keywordflow">if</span> ( ((uModifiers &amp; MOD_ALT) &amp;&amp; (uVKey == VK_MENU))        ||
00690              ((uModifiers &amp; MOD_CONTROL) &amp;&amp; (uVKey == VK_CONTROL)) ||
00691              ((uModifiers &amp; MOD_SHIFT) &amp;&amp; (uVKey == VK_SHIFT))     ||
00692              ((uModifiers &amp; MOD_WIN) &amp;&amp; ((uVKey == VK_LWIN)||(uVKey == VK_RWIN)))
00693            ) {
00694 
00695             RIPERR0( ERROR_INVALID_PARAMETER, RIP_WARNING, <span class="stringliteral">"vkey and modifiers are same"</span>);
00696             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00697         }
00698 <span class="preprocessor">#endif</span>
00699 <span class="preprocessor"></span>    }
00700     <span class="keywordflow">return</span> <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a394">NtUserSetImeHotKey</a>(dwID, uModifiers, uVKey, hkl, dwAction);
00701 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a25" doxytag="immhotky.c::CliReadRegistryValue" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> CliReadRegistryValue           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hKey</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PCWSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>pName</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00324">324</a> of file <a class="el" href="../../d6/d9/immhotky_8c-source.html">immhotky.c</a>.
<p>
References <a class="el" href="../../d0/d7/halvprnt_8c-source.html#l00031">BYTE</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d8/d6/ntapi_8c-source.html#l02187">NtQueryValueKey()</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d3/d6/string_8c-source.html#l00148">RtlInitUnicodeString()</a>, <a class="el" href="../../d3/d0/cttoken_8c-source.html#l00135">Status</a>, <a class="el" href="../../d2/d0/hivedmp_8c-source.html#l00060">ValueBuffer</a>, and <a class="el" href="../../d2/d0/rtdelval_8c-source.html#l00047">ValueName</a>.
<p>
Referenced by <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00353">CliSetSingleHotKey()</a>.
<p>
<pre class="fragment"><div>00325 {
00326     <a class="code" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a> <a class="code" href="../../d1/d1/hivedmp_8c.html#a0">ValueBuffer</a>[<span class="keyword">sizeof</span>(KEY_VALUE_PARTIAL_INFORMATION) + 16 * <span class="keyword">sizeof</span>(UCHAR)];
00327     PKEY_VALUE_PARTIAL_INFORMATION pKeyValue;
00328     UNICODE_STRING      <a class="code" href="../../d1/d1/rtdelval_8c.html#a3">ValueName</a>;
00329     ULONG ResultLength;
00330     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
00331 
00332     pKeyValue = (PKEY_VALUE_PARTIAL_INFORMATION)<a class="code" href="../../d1/d1/hivedmp_8c.html#a0">ValueBuffer</a>;
00333 
00334     <a class="code" href="../../d2/d7/string_8c.html#a7">RtlInitUnicodeString</a>(&amp;ValueName, pName);
00335     <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d7/d7/ntapi_8c.html#a25">NtQueryValueKey</a>(hKey,
00336                              &amp;ValueName,
00337                              KeyValuePartialInformation,
00338                              pKeyValue,
00339                              <span class="keyword">sizeof</span>(ValueBuffer),
00340                              &amp;ResultLength );
00341 
00342     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(Status) &amp;&amp; pKeyValue-&gt;DataLength &gt; 3) {
00343         <span class="comment">//</span>
00344         <span class="comment">// In Win95 registry, these items are written as BYTE data...</span>
00345         <span class="comment">//</span>
00346         <span class="keywordflow">return</span> (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)(MAKEWORD( pKeyValue-&gt;Data[0], pKeyValue-&gt;Data[1])) |
00347                  (((<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)(MAKEWORD( pKeyValue-&gt;Data[2], pKeyValue-&gt;Data[3]))) &lt;&lt; 16);
00348     }
00349 
00350     <span class="keywordflow">return</span> 0;
00351 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a16" doxytag="immhotky.c::CliSaveImeHotKey" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL CliSaveImeHotKey           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwID</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>uModifiers</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>uVKey</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HKL&nbsp;</td>
          <td class="mdname" nowrap> <em>hkl</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fDelete</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00508">508</a> of file <a class="el" href="../../d6/d9/immhotky_8c-source.html">immhotky.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00521">CliSaveImeHotKeyWorker()</a>, <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00486">CloseRegApi()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, and <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00461">OpenRegApi()</a>.
<p>
Referenced by <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00398">CliImmSetHotKey()</a>, and <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00521">CliSaveImeHotKeyWorker()</a>.
<p>
<pre class="fragment"><div>00509 {
00510     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fRet = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00511     <a class="code" href="../../d8/d0/structADVAPI__FN.html">ADVAPI_FN</a> fn;
00512 
00513     <span class="keywordflow">if</span> (<a class="code" href="../../d4/d0/immcli_8h.html#a106">OpenRegApi</a>(&amp;fn)) {
00514         fRet = <a class="code" href="../../d5/d0/immhotky_8c.html#a29">CliSaveImeHotKeyWorker</a>(<span class="keywordtype">id</span>, mod, vk, hkl, fDelete, &amp;fn);
00515         <a class="code" href="../../d4/d0/immcli_8h.html#a107">CloseRegApi</a>(&amp;fn);
00516     }
00517 
00518     <span class="keywordflow">return</span> fRet;
00519 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a29" doxytag="immhotky.c::CliSaveImeHotKeyWorker" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL CliSaveImeHotKeyWorker           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HKL&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d8/d0/structADVAPI__FN.html">ADVAPI_FN</a> *&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00521">521</a> of file <a class="el" href="../../d6/d9/immhotky_8c-source.html">immhotky.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00508">CliSaveImeHotKey()</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00025">INT</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00714">NumToHexAscii()</a>, <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00051">szaRegImmHotKeys</a>, <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00063">szRegHKL</a>, <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00058">szRegImeHotKey</a>, <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00062">szRegMOD</a>, <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00061">szRegVK</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00508">CliSaveImeHotKey()</a>.
<p>
<pre class="fragment"><div>00522 {
00523     HKEY hKey, hKeyParent;
00524     <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a> i;
00525     LONG lResult;
00526     TCHAR szHex[16];
00527 
00528     <span class="keywordflow">if</span> (fDelete) {
00529         TCHAR szRegTmp[(<span class="keyword">sizeof</span>(<a class="code" href="../../d5/d0/immhotky_8c.html#a3">szRegImeHotKey</a>) / <span class="keyword">sizeof</span>(TCHAR) + 1 + 8 + 1)];
00530 
00531         lstrcpy(szRegTmp, szRegImeHotKey);
00532         lstrcat(szRegTmp, TEXT(<span class="stringliteral">"\\"</span>));
00533         <a class="code" href="../../d5/d0/immhotky_8c.html#a30">NumToHexAscii</a>(<span class="keywordtype">id</span>, szHex);
00534         lstrcat(szRegTmp, szHex);
00535 
00536         lResult = fn-&gt;RegDeleteKey(HKEY_CURRENT_USER, szRegTmp);
00537         <span class="keywordflow">if</span> (lResult != ERROR_SUCCESS) {
00538             RIPERR1(lResult, RIP_WARNING,
00539                      <span class="stringliteral">"CliSaveImeHotKeyWorker: deleting %s failed"</span>, szRegTmp);
00540             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00541         }
00542         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00543     }
00544 
00545     hKeyParent = HKEY_CURRENT_USER;
00546     <span class="keywordflow">for</span> (i = 0; <a class="code" href="../../d5/d0/immhotky_8c.html#a2">szaRegImmHotKeys</a>[i] != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>; i++) {
00547         lResult = fn-&gt;RegCreateKeyEx(hKeyParent,
00548                                   szaRegImmHotKeys[i],
00549                                   0,
00550                                   NULL,
00551                                   REG_OPTION_NON_VOLATILE,
00552                                   KEY_WRITE|KEY_READ,
00553                                   NULL,
00554                                   &amp;hKey,
00555                                   NULL );
00556         fn-&gt;RegCloseKey(hKeyParent);
00557         <span class="keywordflow">if</span> (lResult == ERROR_SUCCESS) {
00558             hKeyParent = hKey;
00559         } <span class="keywordflow">else</span> {
00560             RIPERR1(lResult, RIP_WARNING,
00561                     <span class="stringliteral">"CliSaveImeHotKeyWorker: creating %s failed"</span>, szaRegImmHotKeys[i]);
00562 
00563             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00564         }
00565     }
00566 
00567     <a class="code" href="../../d5/d0/immhotky_8c.html#a30">NumToHexAscii</a>(<span class="keywordtype">id</span>, szHex);
00568     lResult = fn-&gt;RegCreateKeyEx(hKeyParent,
00569                              szHex,
00570                              0,
00571                              NULL,
00572                              REG_OPTION_NON_VOLATILE,
00573                              KEY_WRITE|KEY_READ,
00574                              NULL,
00575                              &amp;hKey,
00576                              NULL );
00577     fn-&gt;RegCloseKey(hKeyParent);
00578     <span class="keywordflow">if</span> (lResult != ERROR_SUCCESS) {
00579         RIPERR1(lResult, RIP_WARNING,
00580                 <span class="stringliteral">"CliSaveImeHotKeyWorker: creating %s failed"</span>, szHex );
00581         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00582     }
00583 
00584     lResult = fn-&gt;RegSetValueExW(hKey,
00585                              szRegVK,
00586                              0,
00587                              REG_BINARY,
00588                             (LPBYTE)&amp;vk,
00589                             <span class="keyword">sizeof</span>(DWORD));
00590     <span class="keywordflow">if</span> (lResult != ERROR_SUCCESS) {
00591         fn-&gt;RegCloseKey(hKey);
00592         <a class="code" href="../../d5/d0/immhotky_8c.html#a16">CliSaveImeHotKey</a>(<span class="keywordtype">id</span>, vk, mod, hkl, TRUE);
00593         RIPERR1( lResult, RIP_WARNING,
00594                  <span class="stringliteral">"SaveImeHotKey:setting value on %s failed"</span>, szRegVK );
00595         <span class="keywordflow">return</span> ( <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a> );
00596     }
00597     lResult = fn-&gt;RegSetValueExW(hKey,
00598                              szRegMOD,
00599                              0,
00600                              REG_BINARY,
00601                             (LPBYTE)&amp;mod,
00602                             <span class="keyword">sizeof</span>(DWORD));
00603 
00604     <span class="keywordflow">if</span> (lResult != ERROR_SUCCESS) {
00605         fn-&gt;RegCloseKey(hKey);
00606         <a class="code" href="../../d5/d0/immhotky_8c.html#a16">CliSaveImeHotKey</a>(<span class="keywordtype">id</span>, vk, mod, hkl, TRUE);
00607         RIPERR1(lResult, RIP_WARNING,
00608                 <span class="stringliteral">"CliSaveImeHotKeyWorker: setting value on %s failed"</span>, szRegMOD);
00609         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00610     }
00611 
00612     lResult = fn-&gt;RegSetValueExW(hKey,
00613                              szRegHKL,
00614                              0,
00615                              REG_BINARY,
00616                             (LPBYTE)&amp;hkl,
00617                             <span class="keyword">sizeof</span>(DWORD) );
00618 
00619     <span class="keywordflow">if</span> (lResult != ERROR_SUCCESS) {
00620         fn-&gt;RegCloseKey(hKey);
00621         <a class="code" href="../../d5/d0/immhotky_8c.html#a16">CliSaveImeHotKey</a>(<span class="keywordtype">id</span>, vk, mod, hkl, TRUE);
00622         RIPERR1(lResult, RIP_WARNING,
00623                 <span class="stringliteral">"CliSaveImeHotKeyWorker: setting value on %s failed"</span>, szRegHKL);
00624         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00625     }
00626 
00627     fn-&gt;RegCloseKey(hKey);
00628     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00629 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a21" doxytag="immhotky.c::CliSetDefaultImeHotKeys" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID CliSetDefaultImeHotKeys           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d0/immstruc_8h.html#a34">PCIMEHOTKEY</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ph</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>num</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fCheckExistingHotKey</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00197">197</a> of file <a class="el" href="../../d6/d9/immhotky_8c-source.html">immhotky.c</a>.
<p>
References <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00631">CliImmSetHotKeyWorker()</a>, <a class="el" href="../../d9/d9/immstruc_8h-source.html#l00084">_tagIMEHOTKEY::hKL</a>, <a class="el" href="../../d9/d9/immstruc_8h-source.html#l00077">ISHK_ADD</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l12826">NtUserGetImeHotKey()</a>, <a class="el" href="../../d9/d9/immstruc_8h-source.html#l00083">_tagIMEHOTKEY::uModifiers</a>, <a class="el" href="../../d9/d9/immstruc_8h-source.html#l00082">_tagIMEHOTKEY::uVKey</a>, and <a class="el" href="../../d2/d7/hal_8h.html#a212">VOID()</a>.
<p>
Referenced by <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00129">CliImmInitializeHotKeys()</a>.
<p>
<pre class="fragment"><div>00198 {
00199     <a class="code" href="../../d7/d8/struct__tagIMEHOTKEY.html">IMEHOTKEY</a> hkt;
00200 
00201     <span class="keywordflow">while</span>( num-- &gt; 0 ) {
00202         <span class="comment">//</span>
00203         <span class="comment">// Set IME hotkey only if there is no such</span>
00204         <span class="comment">// hotkey in the registry</span>
00205         <span class="comment">//</span>
00206         <span class="keywordflow">if</span> (!fNeedToCheckExistingHotKey ||
00207                 !<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a393">NtUserGetImeHotKey</a>(ph-&gt;dwHotKeyID, &amp;hkt.<a class="code" href="../../d7/d8/struct__tagIMEHOTKEY.html#o2">uModifiers</a>, &amp;hkt.<a class="code" href="../../d7/d8/struct__tagIMEHOTKEY.html#o1">uVKey</a>, &amp;hkt.<a class="code" href="../../d7/d8/struct__tagIMEHOTKEY.html#o3">hKL</a>)) {
00208 
00209             <a class="code" href="../../d5/d0/immhotky_8c.html#a17">CliImmSetHotKeyWorker</a>(ph-&gt;dwHotKeyID,
00210                                     ph-&gt;uModifiers,
00211                                     ph-&gt;uVKey,
00212                                     ph-&gt;hKL,
00213                                     ISHK_ADD);
00214         }
00215         ph++;
00216     }
00217 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a20" doxytag="immhotky.c::CliSetSingleHotKey" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL CliSetSingleHotKey           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">PKEY_BASIC_INFORMATION&nbsp;</td>
          <td class="mdname" nowrap> <em>pKeyInfo</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hKey</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00353">353</a> of file <a class="el" href="../../d6/d9/immhotky_8c-source.html">immhotky.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00631">CliImmSetHotKeyWorker()</a>, <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00324">CliReadRegistryValue()</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d9/d9/immstruc_8h-source.html#l00077">ISHK_ADD</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d6/d9/obclose_8c-source.html#l00037">NtClose()</a>, <a class="el" href="../../d8/d6/ntapi_8c-source.html#l01870">NtOpenKey()</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d0/d3/cnvint_8c-source.html#l00225">RtlUnicodeStringToInteger()</a>, <a class="el" href="../../d3/d0/cttoken_8c-source.html#l00135">Status</a>, <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00063">szRegHKL</a>, <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00062">szRegMOD</a>, <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00061">szRegVK</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, and <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00064">USHORT</a>.
<p>
Referenced by <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00260">CliGetImeHotKeysFromRegistry()</a>.
<p>
<pre class="fragment"><div>00354 {
00355     UNICODE_STRING      SubKeyName;
00356     HANDLE    hKeySingleHotKey;
00357     OBJECT_ATTRIBUTES   Obja;
00358 
00359     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwID = 0;
00360     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>  uVKey = 0;
00361     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>  uModifiers = 0;
00362     HKL   hKL = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00363 
00364     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
00365 
00366     SubKeyName.Buffer = (PWSTR)&amp;(pKeyInfo-&gt;Name[0]);
00367     SubKeyName.Length = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a>)pKeyInfo-&gt;NameLength;
00368     SubKeyName.MaximumLength = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a>)pKeyInfo-&gt;NameLength;
00369     InitializeObjectAttributes(&amp;Obja,
00370                                &amp;SubKeyName,
00371                                OBJ_CASE_INSENSITIVE,
00372                                hKey,
00373                                NULL);
00374 
00375     <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d7/d7/ntapi_8c.html#a23">NtOpenKey</a>(&amp;hKeySingleHotKey, KEY_READ, &amp;Obja);
00376     <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(Status)) {
00377         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00378     }
00379 
00380     <a class="code" href="../../d9/d3/cnvint_8c.html#a4">RtlUnicodeStringToInteger</a>(&amp;SubKeyName, 16L, &amp;dwID);
00381     uVKey = <a class="code" href="../../d5/d0/immhotky_8c.html#a25">CliReadRegistryValue</a>(hKeySingleHotKey, szRegVK);
00382     uModifiers = <a class="code" href="../../d5/d0/immhotky_8c.html#a25">CliReadRegistryValue</a>(hKeySingleHotKey, szRegMOD);
00383     hKL = (HKL)LongToHandle( <a class="code" href="../../d5/d0/immhotky_8c.html#a25">CliReadRegistryValue</a>(hKeySingleHotKey, szRegHKL) );
00384 
00385     <a class="code" href="../../d5/d0/obclose_8c.html#a1">NtClose</a>(hKeySingleHotKey);
00386 
00387     <span class="keywordflow">return</span> <a class="code" href="../../d5/d0/immhotky_8c.html#a17">CliImmSetHotKeyWorker</a>(dwID, uModifiers, uVKey, hKL, ISHK_ADD);
00388 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a28" doxytag="immhotky.c::CloseRegApi" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void CloseRegApi           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d0/structADVAPI__FN.html">ADVAPI_FN</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pfn</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00486">486</a> of file <a class="el" href="../../d6/d9/immhotky_8c-source.html">immhotky.c</a>.
<p>
References <a class="el" href="../../d5/d9/immcli_8h-source.html#l00079">ADVAPI_FN::hModule</a>.
<p>
Referenced by <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00508">CliSaveImeHotKey()</a>.
<p>
<pre class="fragment"><div>00487 {
00488     UserAssert(pfn-&gt;<a class="code" href="../../d8/d0/structADVAPI__FN.html#o0">hModule</a>);
00489     <span class="keywordflow">if</span> (pfn-&gt;<a class="code" href="../../d8/d0/structADVAPI__FN.html#o0">hModule</a>) {
00490         FreeLibrary(pfn-&gt;<a class="code" href="../../d8/d0/structADVAPI__FN.html#o0">hModule</a>);
00491         pfn-&gt;<a class="code" href="../../d8/d0/structADVAPI__FN.html#o0">hModule</a>;
00492     }
00493 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a30" doxytag="immhotky.c::NumToHexAscii" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID NumToHexAscii           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwNum</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PWSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>szAscii</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00714">714</a> of file <a class="el" href="../../d6/d9/immhotky_8c-source.html">immhotky.c</a>.
<p>
References <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00711">szHexString</a>.
<p>
Referenced by <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00521">CliSaveImeHotKeyWorker()</a>.
<p>
<pre class="fragment"><div>00717 {
00718     <span class="keywordtype">int</span> i;
00719 
00720     <span class="keywordflow">for</span> (i = 7; i &gt;= 0; i--) {
00721         szAscii[i] = <a class="code" href="../../d5/d0/immhotky_8c.html#a15">szHexString</a>[dwNum &amp; 0x0000000f];
00722         dwNum &gt;&gt;= 4;
00723     }
00724     szAscii[8] = TEXT(<span class="charliteral">'\0'</span>);
00725 
00726     <span class="keywordflow">return</span>;
00727 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a18" doxytag="immhotky.c::NumToHexAscii" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID NumToHexAscii           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PTSTR&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a27" doxytag="immhotky.c::OpenRegApi" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL OpenRegApi           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d0/structADVAPI__FN.html">ADVAPI_FN</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pfn</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00461">461</a> of file <a class="el" href="../../d6/d9/immhotky_8c-source.html">immhotky.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00452">GET</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00079">ADVAPI_FN::hModule</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00508">CliSaveImeHotKey()</a>.
<p>
<pre class="fragment"><div>00462 {
00463     pfn-&gt;<a class="code" href="../../d8/d0/structADVAPI__FN.html#o0">hModule</a> = LoadLibraryW(L<span class="stringliteral">"ADVAPI32.DLL"</span>);
00464 
00465     <span class="keywordflow">if</span> (pfn-&gt;<a class="code" href="../../d8/d0/structADVAPI__FN.html#o0">hModule</a> != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00466         <a class="code" href="../../d5/d0/immhotky_8c.html#a0">GET</a>(RegCreateKeyW);
00467         <a class="code" href="../../d5/d0/immhotky_8c.html#a0">GET</a>(RegOpenKeyW);
00468         <a class="code" href="../../d5/d0/immhotky_8c.html#a0">GET</a>(RegCloseKey);
00469         <a class="code" href="../../d5/d0/immhotky_8c.html#a0">GET</a>(RegDeleteKeyW);
00470         <a class="code" href="../../d5/d0/immhotky_8c.html#a0">GET</a>(RegCreateKeyExW);
00471         <a class="code" href="../../d5/d0/immhotky_8c.html#a0">GET</a>(RegSetValueExW);
00472         <a class="code" href="../../d5/d0/immhotky_8c.html#a0">GET</a>(RegQueryValueExW);
00473 
00474         <span class="comment">//</span>
00475         <span class="comment">// Succeeded.</span>
00476         <span class="comment">//</span>
00477         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00478     }
00479 
00480     <span class="comment">//</span>
00481     <span class="comment">// Failed to open registry APIs.</span>
00482     <span class="comment">//</span>
00483     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00484 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a23" doxytag="immhotky.c::SetFeKeyboardFlags" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID SetFeKeyboardFlags           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">LANGID&nbsp;</td>
          <td class="mdname" nowrap> <em>langid</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d2/d5/structtagFE__KEYBOARDS.html">FE_KEYBOARDS</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>pFeKbds</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00099">99</a> of file <a class="el" href="../../d6/d9/immhotky_8c-source.html">immhotky.c</a>.
<p>
References <a class="el" href="../../d5/d9/immcli_8h-source.html#l00064">tagFE_KEYBOARDS::fCHS</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00063">tagFE_KEYBOARDS::fCHT</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00062">tagFE_KEYBOARDS::fJPN</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00065">tagFE_KEYBOARDS::fKOR</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d2/d7/hal_8h.html#a212">VOID()</a>.
<p>
Referenced by <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00229">CliGetPreloadKeyboardLayouts()</a>, and <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00129">CliImmInitializeHotKeys()</a>.
<p>
<pre class="fragment"><div>00100 {
00101     <span class="keywordflow">switch</span> (langid) {
00102     <span class="keywordflow">case</span> MAKELANGID(LANG_CHINESE, SUBLANG_CHINESE_TRADITIONAL):
00103     case MAKELANGID(LANG_CHINESE, SUBLANG_CHINESE_HONGKONG):
00104         pFeKbds-&gt;fCHT = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00105         <span class="keywordflow">break</span>;
00106     <span class="keywordflow">case</span> MAKELANGID(LANG_CHINESE, SUBLANG_CHINESE_SIMPLIFIED):
00107     case MAKELANGID(LANG_CHINESE, SUBLANG_CHINESE_SINGAPORE):
00108         pFeKbds-&gt;fCHS = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00109         <span class="keywordflow">break</span>;
00110     <span class="keywordflow">case</span> MAKELANGID(LANG_JAPANESE, SUBLANG_DEFAULT):
00111         pFeKbds-&gt;fJPN = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00112         <span class="keywordflow">break</span>;
00113     <span class="keywordflow">case</span> MAKELANGID(LANG_KOREAN, SUBLANG_DEFAULT):
00114         pFeKbds-&gt;fKOR = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00115         <span class="keywordflow">break</span>;
00116     }
00117 }
</div></pre>    </td>
  </tr>
</table>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="a13" doxytag="immhotky.c::DefaultHotKeyNumC" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> CONST <a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a> <a class="el" href="../../d5/d0/immhotky_8c.html#a13">DefaultHotKeyNumC</a> = sizeof(<a class="el" href="../../d5/d0/immhotky_8c.html#a12">DefaultHotKeyTableC</a>) / sizeof(<a class="el" href="../../d7/d8/struct__tagIMEHOTKEY.html">IMEHOTKEY</a>)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00085">85</a> of file <a class="el" href="../../d6/d9/immhotky_8c-source.html">immhotky.c</a>.
<p>
Referenced by <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00129">CliImmInitializeHotKeys()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a9" doxytag="immhotky.c::DefaultHotKeyNumJ" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> CONST <a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a> <a class="el" href="../../d5/d0/immhotky_8c.html#a9">DefaultHotKeyNumJ</a> = sizeof(<a class="el" href="../../d5/d0/immhotky_8c.html#a8">DefaultHotKeyTableJ</a>) / sizeof(<a class="el" href="../../d7/d8/struct__tagIMEHOTKEY.html">IMEHOTKEY</a>)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00073">73</a> of file <a class="el" href="../../d6/d9/immhotky_8c-source.html">immhotky.c</a>.
<p>
Referenced by <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00129">CliImmInitializeHotKeys()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a11" doxytag="immhotky.c::DefaultHotKeyNumT" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> CONST <a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a> <a class="el" href="../../d5/d0/immhotky_8c.html#a11">DefaultHotKeyNumT</a> = sizeof(<a class="el" href="../../d5/d0/immhotky_8c.html#a10">DefaultHotKeyTableT</a>) / sizeof(<a class="el" href="../../d7/d8/struct__tagIMEHOTKEY.html">IMEHOTKEY</a>)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00079">79</a> of file <a class="el" href="../../d6/d9/immhotky_8c-source.html">immhotky.c</a>.
<p>
Referenced by <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00129">CliImmInitializeHotKeys()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a12" doxytag="immhotky.c::DefaultHotKeyTableC" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> CONST <a class="el" href="../../d7/d8/struct__tagIMEHOTKEY.html">IMEHOTKEY</a> <a class="el" href="../../d5/d0/immhotky_8c.html#a12">DefaultHotKeyTableC</a>[]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Initial value:</b><pre class="fragment"><div> {
    { IME_CHOTKEY_IME_NONIME_TOGGLE, VK_SPACE, <a class="code" href="../../d8/d0/immstruc_8h.html#a27">MOD_BOTH_SIDES</a>|MOD_CONTROL, <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> },
    { IME_CHOTKEY_SHAPE_TOGGLE, VK_SPACE, <a class="code" href="../../d8/d0/immstruc_8h.html#a27">MOD_BOTH_SIDES</a>|MOD_SHIFT,  <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> }
}
</div></pre>
<p>
Definition at line <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00081">81</a> of file <a class="el" href="../../d6/d9/immhotky_8c-source.html">immhotky.c</a>.
<p>
Referenced by <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00129">CliImmInitializeHotKeys()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a8" doxytag="immhotky.c::DefaultHotKeyTableJ" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> CONST <a class="el" href="../../d7/d8/struct__tagIMEHOTKEY.html">IMEHOTKEY</a> <a class="el" href="../../d5/d0/immhotky_8c.html#a8">DefaultHotKeyTableJ</a>[]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Initial value:</b><pre class="fragment"><div> {
    {IME_JHOTKEY_CLOSE_OPEN, VK_KANJI, MOD_IGNORE_ALL_MODIFIER, <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>}
}
</div></pre>
<p>
Definition at line <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00070">70</a> of file <a class="el" href="../../d6/d9/immhotky_8c-source.html">immhotky.c</a>.
<p>
Referenced by <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00129">CliImmInitializeHotKeys()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a10" doxytag="immhotky.c::DefaultHotKeyTableT" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> CONST <a class="el" href="../../d7/d8/struct__tagIMEHOTKEY.html">IMEHOTKEY</a> <a class="el" href="../../d5/d0/immhotky_8c.html#a10">DefaultHotKeyTableT</a>[]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Initial value:</b><pre class="fragment"><div> {
    { IME_THOTKEY_IME_NONIME_TOGGLE, VK_SPACE, <a class="code" href="../../d8/d0/immstruc_8h.html#a27">MOD_BOTH_SIDES</a>|MOD_CONTROL, <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> },
    { IME_THOTKEY_SHAPE_TOGGLE, VK_SPACE, <a class="code" href="../../d8/d0/immstruc_8h.html#a27">MOD_BOTH_SIDES</a>|MOD_SHIFT,  <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> }
}
</div></pre>
<p>
Definition at line <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00075">75</a> of file <a class="el" href="../../d6/d9/immhotky_8c-source.html">immhotky.c</a>.
<p>
Referenced by <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00129">CliImmInitializeHotKeys()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a14" doxytag="immhotky.c::gAdvApiFn" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d8/d0/structADVAPI__FN.html">ADVAPI_FN</a> <a class="el" href="../../d5/d0/immhotky_8c.html#a14">gAdvApiFn</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00459">459</a> of file <a class="el" href="../../d6/d9/immhotky_8c-source.html">immhotky.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="immhotky.c::szaRegImmHotKeys" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> CONST TCHAR* <a class="el" href="../../d5/d0/immhotky_8c.html#a2">szaRegImmHotKeys</a>[]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Initial value:</b><pre class="fragment"><div> {
    TEXT(<span class="stringliteral">"Control Panel"</span>),
    TEXT(<span class="stringliteral">"Input Method"</span>),
    TEXT(<span class="stringliteral">"Hot Keys"</span>),
    <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>
}
</div></pre>
<p>
Definition at line <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00051">51</a> of file <a class="el" href="../../d6/d9/immhotky_8c-source.html">immhotky.c</a>.
<p>
Referenced by <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00521">CliSaveImeHotKeyWorker()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a15" doxytag="immhotky.c::szHexString" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> CONST TCHAR <a class="el" href="../../d5/d0/immhotky_8c.html#a15">szHexString</a>[] = TEXT("0123456789ABCDEF")<code> [static]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00711">711</a> of file <a class="el" href="../../d6/d9/immhotky_8c-source.html">immhotky.c</a>.
<p>
Referenced by <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00714">NumToHexAscii()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a7" doxytag="immhotky.c::szRegHKL" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> CONST TCHAR <a class="el" href="../../d5/d0/immhotky_8c.html#a7">szRegHKL</a>[] = TEXT("Target IME")          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00063">63</a> of file <a class="el" href="../../d6/d9/immhotky_8c-source.html">immhotky.c</a>.
<p>
Referenced by <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00521">CliSaveImeHotKeyWorker()</a>, and <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00353">CliSetSingleHotKey()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="immhotky.c::szRegImeHotKey" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> CONST TCHAR <a class="el" href="../../d5/d0/immhotky_8c.html#a3">szRegImeHotKey</a>[] = TEXT("Control Panel\\Input Method\\Hot Keys")          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00058">58</a> of file <a class="el" href="../../d6/d9/immhotky_8c-source.html">immhotky.c</a>.
<p>
Referenced by <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00260">CliGetImeHotKeysFromRegistry()</a>, and <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00521">CliSaveImeHotKeyWorker()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="immhotky.c::szRegKeyboardPreload" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> CONST TCHAR <a class="el" href="../../d5/d0/immhotky_8c.html#a4">szRegKeyboardPreload</a>[] = TEXT("Keyboard Layout\\Preload")          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00059">59</a> of file <a class="el" href="../../d6/d9/immhotky_8c-source.html">immhotky.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a6" doxytag="immhotky.c::szRegMOD" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> CONST TCHAR <a class="el" href="../../d5/d0/immhotky_8c.html#a6">szRegMOD</a>[] = TEXT("Key Modifiers")          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00062">62</a> of file <a class="el" href="../../d6/d9/immhotky_8c-source.html">immhotky.c</a>.
<p>
Referenced by <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00521">CliSaveImeHotKeyWorker()</a>, and <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00353">CliSetSingleHotKey()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="immhotky.c::szRegVK" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> CONST TCHAR <a class="el" href="../../d5/d0/immhotky_8c.html#a5">szRegVK</a>[] = TEXT("Virtual <a class="el" href="../../d3/d0/user32_8def.html#a52">Key</a>")          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00061">61</a> of file <a class="el" href="../../d6/d9/immhotky_8c-source.html">immhotky.c</a>.
<p>
Referenced by <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00521">CliSaveImeHotKeyWorker()</a>, and <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00353">CliSetSingleHotKey()</a>.    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Sat May 15 19:44:10 2004 for test by
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>

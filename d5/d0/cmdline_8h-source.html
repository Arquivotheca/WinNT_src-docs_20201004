<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>test: cmdline.h Source File</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="../../main.html">Main&nbsp;Page</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Class&nbsp;List</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Class&nbsp;Members</a> | <a class="qindex" href="../../globals.html">File&nbsp;Members</a></div>
<h1>cmdline.h</h1><a href="../../d4/d1/cmdline_8h.html">Go to the documentation of this file.</a><pre class="fragment"><div>00001 <span class="comment">/*++</span>
00002 <span class="comment"></span>
00003 <span class="comment">Copyright (c) 1985 - 1999, Microsoft Corporation</span>
00004 <span class="comment"></span>
00005 <span class="comment">Module Name:</span>
00006 <span class="comment"></span>
00007 <span class="comment">    cmdline.h</span>
00008 <span class="comment"></span>
00009 <span class="comment">Abstract:</span>
00010 <span class="comment"></span>
00011 <span class="comment">    This file contains the internal structures and definitions used</span>
00012 <span class="comment">    by command line input and editing.</span>
00013 <span class="comment"></span>
00014 <span class="comment">Author:</span>
00015 <span class="comment"></span>
00016 <span class="comment">    Therese Stowell (thereses) 15-Nov-1991</span>
00017 <span class="comment"></span>
00018 <span class="comment">Revision History:</span>
00019 <span class="comment"></span>
00020 <span class="comment">--*/</span>
00021 
<a name="l00022"></a><a class="code" href="../../d8/d7/struct__COMMAND.html">00022</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d8/d7/struct__COMMAND.html">_COMMAND</a> {
<a name="l00023"></a><a class="code" href="../../d8/d7/struct__COMMAND.html#o0">00023</a>     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> <a class="code" href="../../d8/d7/struct__COMMAND.html#o0">CommandLength</a>;
<a name="l00024"></a><a class="code" href="../../d8/d7/struct__COMMAND.html#o1">00024</a>     WCHAR <a class="code" href="../../d8/d7/struct__COMMAND.html#o1">Command</a>[1];
00025 } <a class="code" href="../../d8/d7/struct__COMMAND.html">COMMAND</a>, *<a class="code" href="../../d8/d7/struct__COMMAND.html">PCOMMAND</a>;
00026 
00027 <span class="keyword">typedef</span>
00028 ULONG
<a name="l00029"></a><a class="code" href="../../d4/d1/cmdline_8h.html#a27">00029</a> (*PCLE_POPUP_INPUT_ROUTINE)(
00030     IN PVOID CookedReadData,
00031     IN PCSR_API_MSG WaitReplyMessage,
00032     IN PCSR_THREAD WaitingThread,
00033     IN BOOLEAN WaitRoutine
00034     );
00035 
00036 <span class="comment">/*</span>
00037 <span class="comment"> * CLE_POPUP Flags</span>
00038 <span class="comment"> */</span>
<a name="l00039"></a><a class="code" href="../../d4/d1/cmdline_8h.html#a0">00039</a> <span class="preprocessor">#define CLEPF_FALSE_UNICODE 0x0001</span>
00040 <span class="preprocessor"></span>
<a name="l00041"></a><a class="code" href="../../d1/d0/struct__CLE__POPUP.html">00041</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d1/d0/struct__CLE__POPUP.html">_CLE_POPUP</a> {
<a name="l00042"></a><a class="code" href="../../d1/d0/struct__CLE__POPUP.html#o0">00042</a>     LIST_ENTRY <a class="code" href="../../d1/d0/struct__CLE__POPUP.html#o0">ListLink</a>;    <span class="comment">// pointer to next popup</span>
<a name="l00043"></a><a class="code" href="../../d1/d0/struct__CLE__POPUP.html#o1">00043</a>     SMALL_RECT <a class="code" href="../../d1/d0/struct__CLE__POPUP.html#o1">Region</a>;      <span class="comment">// region popup occupies</span>
<a name="l00044"></a><a class="code" href="../../d1/d0/struct__CLE__POPUP.html#o2">00044</a>     WORD  <a class="code" href="../../d1/d0/struct__CLE__POPUP.html#o2">Attributes</a>;       <span class="comment">// text attributes</span>
<a name="l00045"></a><a class="code" href="../../d1/d0/struct__CLE__POPUP.html#o3">00045</a>     WORD  <a class="code" href="../../d1/d0/struct__CLE__POPUP.html#o3">Flags</a>;            <span class="comment">// CLEPF_ flags</span>
<a name="l00046"></a><a class="code" href="../../d1/d0/struct__CLE__POPUP.html#o4">00046</a>     PCHAR_INFO <a class="code" href="../../d1/d0/struct__CLE__POPUP.html#o4">OldContents</a>; <span class="comment">// contains data under popup</span>
<a name="l00047"></a><a class="code" href="../../d1/d0/struct__CLE__POPUP.html#o5">00047</a>     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a13">SHORT</a> <a class="code" href="../../d1/d0/struct__CLE__POPUP.html#o5">BottomIndex</a>;      <span class="comment">// number of command displayed on last line of popup</span>
<a name="l00048"></a><a class="code" href="../../d1/d0/struct__CLE__POPUP.html#o6">00048</a>     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a13">SHORT</a> <a class="code" href="../../d1/d0/struct__CLE__POPUP.html#o6">CurrentCommand</a>;
<a name="l00049"></a><a class="code" href="../../d1/d0/struct__CLE__POPUP.html#o7">00049</a>     WCHAR <a class="code" href="../../d1/d0/struct__CLE__POPUP.html#o7">NumberBuffer</a>[6];
<a name="l00050"></a><a class="code" href="../../d1/d0/struct__CLE__POPUP.html#o8">00050</a>     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a13">SHORT</a> <a class="code" href="../../d1/d0/struct__CLE__POPUP.html#o8">NumberRead</a>;
<a name="l00051"></a><a class="code" href="../../d1/d0/struct__CLE__POPUP.html#o9">00051</a>     <a class="code" href="../../d4/d1/cmdline_8h.html#a27">PCLE_POPUP_INPUT_ROUTINE</a> <a class="code" href="../../d1/d0/struct__CLE__POPUP.html#o9">PopupInputRoutine</a>; <span class="comment">// routine to call when input is received</span>
00052 <span class="preprocessor">#if defined(FE_SB)</span>
00053 <span class="preprocessor"></span>    COORD OldScreenSize;
00054 <span class="preprocessor">#endif</span>
00055 <span class="preprocessor"></span>} <a class="code" href="../../d1/d0/struct__CLE__POPUP.html">CLE_POPUP</a>, *<a class="code" href="../../d1/d0/struct__CLE__POPUP.html">PCLE_POPUP</a>;
00056 
<a name="l00057"></a><a class="code" href="../../d4/d1/cmdline_8h.html#a1">00057</a> <span class="preprocessor">#define POPUP_SIZE_X(POPUP) (SHORT)(((POPUP)-&gt;Region.Right - (POPUP)-&gt;Region.Left - 1))</span>
<a name="l00058"></a><a class="code" href="../../d4/d1/cmdline_8h.html#a2">00058</a> <span class="preprocessor"></span><span class="preprocessor">#define POPUP_SIZE_Y(POPUP) (SHORT)(((POPUP)-&gt;Region.Bottom - (POPUP)-&gt;Region.Top - 1))</span>
<a name="l00059"></a><a class="code" href="../../d4/d1/cmdline_8h.html#a3">00059</a> <span class="preprocessor"></span><span class="preprocessor">#define COMMAND_NUMBER_SIZE 8   // size of command number buffer</span>
00060 <span class="preprocessor"></span>
00061 
00062 <span class="comment">/*</span>
00063 <span class="comment"> * COMMAND_HISTORY Flags</span>
00064 <span class="comment"> */</span>
<a name="l00065"></a><a class="code" href="../../d4/d1/cmdline_8h.html#a4">00065</a> <span class="preprocessor">#define CLE_ALLOCATED 0x00000001</span>
<a name="l00066"></a><a class="code" href="../../d4/d1/cmdline_8h.html#a5">00066</a> <span class="preprocessor"></span><span class="preprocessor">#define CLE_RESET     0x00000002</span>
00067 <span class="preprocessor"></span>
<a name="l00068"></a><a class="code" href="../../d9/d7/struct__COMMAND__HISTORY.html">00068</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d9/d7/struct__COMMAND__HISTORY.html">_COMMAND_HISTORY</a> {
<a name="l00069"></a><a class="code" href="../../d9/d7/struct__COMMAND__HISTORY.html#o0">00069</a>     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> <a class="code" href="../../d9/d7/struct__COMMAND__HISTORY.html#o0">Flags</a>;
<a name="l00070"></a><a class="code" href="../../d9/d7/struct__COMMAND__HISTORY.html#o1">00070</a>     LIST_ENTRY <a class="code" href="../../d9/d7/struct__COMMAND__HISTORY.html#o1">ListLink</a>;
<a name="l00071"></a><a class="code" href="../../d9/d7/struct__COMMAND__HISTORY.html#o2">00071</a>     PWCHAR <a class="code" href="../../d9/d7/struct__COMMAND__HISTORY.html#o2">AppName</a>;
<a name="l00072"></a><a class="code" href="../../d9/d7/struct__COMMAND__HISTORY.html#o3">00072</a>     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a13">SHORT</a> <a class="code" href="../../d9/d7/struct__COMMAND__HISTORY.html#o3">NumberOfCommands</a>;
<a name="l00073"></a><a class="code" href="../../d9/d7/struct__COMMAND__HISTORY.html#o4">00073</a>     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a13">SHORT</a> <a class="code" href="../../d9/d7/struct__COMMAND__HISTORY.html#o4">LastAdded</a>;
<a name="l00074"></a><a class="code" href="../../d9/d7/struct__COMMAND__HISTORY.html#o5">00074</a>     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a13">SHORT</a> <a class="code" href="../../d9/d7/struct__COMMAND__HISTORY.html#o5">LastDisplayed</a>;
<a name="l00075"></a><a class="code" href="../../d9/d7/struct__COMMAND__HISTORY.html#o6">00075</a>     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a13">SHORT</a> <a class="code" href="../../d9/d7/struct__COMMAND__HISTORY.html#o6">FirstCommand</a>;     <span class="comment">// circular buffer</span>
<a name="l00076"></a><a class="code" href="../../d9/d7/struct__COMMAND__HISTORY.html#o7">00076</a>     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a13">SHORT</a> <a class="code" href="../../d9/d7/struct__COMMAND__HISTORY.html#o7">MaximumNumberOfCommands</a>;
<a name="l00077"></a><a class="code" href="../../d9/d7/struct__COMMAND__HISTORY.html#o8">00077</a>     HANDLE <a class="code" href="../../d9/d7/struct__COMMAND__HISTORY.html#o8">ProcessHandle</a>;
<a name="l00078"></a><a class="code" href="../../d9/d7/struct__COMMAND__HISTORY.html#o9">00078</a>     LIST_ENTRY <a class="code" href="../../d9/d7/struct__COMMAND__HISTORY.html#o9">PopupList</a>;    <span class="comment">// pointer to top-level popup</span>
<a name="l00079"></a><a class="code" href="../../d9/d7/struct__COMMAND__HISTORY.html#o10">00079</a>     <a class="code" href="../../d4/d1/cmdline_8h.html#a26">PCOMMAND</a> <a class="code" href="../../d9/d7/struct__COMMAND__HISTORY.html#o10">Commands</a>[1];
00080 } <a class="code" href="../../d9/d7/struct__COMMAND__HISTORY.html">COMMAND_HISTORY</a>, *<a class="code" href="../../d9/d7/struct__COMMAND__HISTORY.html">PCOMMAND_HISTORY</a>;
00081 
<a name="l00082"></a><a class="code" href="../../d4/d1/cmdline_8h.html#a6">00082</a> <span class="preprocessor">#define DEFAULT_NUMBER_OF_COMMANDS 25</span>
<a name="l00083"></a><a class="code" href="../../d4/d1/cmdline_8h.html#a7">00083</a> <span class="preprocessor"></span><span class="preprocessor">#define DEFAULT_NUMBER_OF_BUFFERS 4</span>
00084 <span class="preprocessor"></span>
<a name="l00085"></a><a class="code" href="../../d2/d8/struct__COOKED__READ__DATA.html">00085</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d2/d8/struct__COOKED__READ__DATA.html">_COOKED_READ_DATA</a> {
<a name="l00086"></a><a class="code" href="../../d2/d8/struct__COOKED__READ__DATA.html#o0">00086</a>     <a class="code" href="../../d7/d2/struct__INPUT__INFORMATION.html">PINPUT_INFORMATION</a> <a class="code" href="../../d2/d8/struct__COOKED__READ__DATA.html#o0">InputInfo</a>;
<a name="l00087"></a><a class="code" href="../../d2/d8/struct__COOKED__READ__DATA.html#o1">00087</a>     <a class="code" href="../../d7/d8/struct__SCREEN__INFORMATION.html">PSCREEN_INFORMATION</a> <a class="code" href="../../d2/d8/struct__COOKED__READ__DATA.html#o1">ScreenInfo</a>;
<a name="l00088"></a><a class="code" href="../../d2/d8/struct__COOKED__READ__DATA.html#o2">00088</a>     <a class="code" href="../../d1/d3/struct__CONSOLE__INFORMATION.html">PCONSOLE_INFORMATION</a> <a class="code" href="../../d2/d8/struct__COOKED__READ__DATA.html#o2">Console</a>;
<a name="l00089"></a><a class="code" href="../../d2/d8/struct__COOKED__READ__DATA.html#o3">00089</a>     <a class="code" href="../../d4/d3/struct__HANDLE__DATA.html">HANDLE_DATA</a> <a class="code" href="../../d2/d8/struct__COOKED__READ__DATA.html#o3">TempHandle</a>;
<a name="l00090"></a><a class="code" href="../../d2/d8/struct__COOKED__READ__DATA.html#o4">00090</a>     ULONG <a class="code" href="../../d2/d8/struct__COOKED__READ__DATA.html#o4">UserBufferSize</a>;   <span class="comment">// doubled size in ansi case</span>
<a name="l00091"></a><a class="code" href="../../d2/d8/struct__COOKED__READ__DATA.html#o5">00091</a>     PWCHAR <a class="code" href="../../d2/d8/struct__COOKED__READ__DATA.html#o5">UserBuffer</a>;
<a name="l00092"></a><a class="code" href="../../d2/d8/struct__COOKED__READ__DATA.html#o6">00092</a>     ULONG <a class="code" href="../../d2/d8/struct__COOKED__READ__DATA.html#o6">BufferSize</a>;
<a name="l00093"></a><a class="code" href="../../d2/d8/struct__COOKED__READ__DATA.html#o7">00093</a>     ULONG <a class="code" href="../../d2/d8/struct__COOKED__READ__DATA.html#o7">BytesRead</a>;
<a name="l00094"></a><a class="code" href="../../d2/d8/struct__COOKED__READ__DATA.html#o8">00094</a>     ULONG <a class="code" href="../../d2/d8/struct__COOKED__READ__DATA.html#o8">CurrentPosition</a>;  <span class="comment">// char position, not byte position</span>
<a name="l00095"></a><a class="code" href="../../d2/d8/struct__COOKED__READ__DATA.html#o9">00095</a>     PWCHAR <a class="code" href="../../d2/d8/struct__COOKED__READ__DATA.html#o9">BufPtr</a>;
<a name="l00096"></a><a class="code" href="../../d2/d8/struct__COOKED__READ__DATA.html#o10">00096</a>     PWCHAR <a class="code" href="../../d2/d8/struct__COOKED__READ__DATA.html#o10">BackupLimit</a>;
<a name="l00097"></a><a class="code" href="../../d2/d8/struct__COOKED__READ__DATA.html#o11">00097</a>     COORD <a class="code" href="../../d2/d8/struct__COOKED__READ__DATA.html#o11">OriginalCursorPosition</a>;
<a name="l00098"></a><a class="code" href="../../d2/d8/struct__COOKED__READ__DATA.html#o12">00098</a>     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> <a class="code" href="../../d2/d8/struct__COOKED__READ__DATA.html#o12">NumberOfVisibleChars</a>;
<a name="l00099"></a><a class="code" href="../../d2/d8/struct__COOKED__READ__DATA.html#o13">00099</a>     <a class="code" href="../../d4/d1/cmdline_8h.html#a31">PCOMMAND_HISTORY</a> <a class="code" href="../../d2/d8/struct__COOKED__READ__DATA.html#o13">CommandHistory</a>;
<a name="l00100"></a><a class="code" href="../../d2/d8/struct__COOKED__READ__DATA.html#o14">00100</a>     BOOLEAN <a class="code" href="../../d2/d8/struct__COOKED__READ__DATA.html#o14">Echo</a>;
<a name="l00101"></a><a class="code" href="../../d2/d8/struct__COOKED__READ__DATA.html#o15">00101</a>     BOOLEAN <a class="code" href="../../d2/d8/struct__COOKED__READ__DATA.html#o15">Processed</a>;
<a name="l00102"></a><a class="code" href="../../d2/d8/struct__COOKED__READ__DATA.html#o16">00102</a>     BOOLEAN <a class="code" href="../../d2/d8/struct__COOKED__READ__DATA.html#o16">Line</a>;
<a name="l00103"></a><a class="code" href="../../d2/d8/struct__COOKED__READ__DATA.html#o17">00103</a>     BOOLEAN <a class="code" href="../../d2/d8/struct__COOKED__READ__DATA.html#o17">InsertMode</a>;
<a name="l00104"></a><a class="code" href="../../d2/d8/struct__COOKED__READ__DATA.html#o18">00104</a>     <a class="code" href="../../d0/d4/struct__CONSOLE__PER__PROCESS__DATA.html">PCONSOLE_PER_PROCESS_DATA</a> <a class="code" href="../../d2/d8/struct__COOKED__READ__DATA.html#o18">ProcessData</a>;
<a name="l00105"></a><a class="code" href="../../d2/d8/struct__COOKED__READ__DATA.html#o19">00105</a>     HANDLE <a class="code" href="../../d2/d8/struct__COOKED__READ__DATA.html#o19">HandleIndex</a>;
<a name="l00106"></a><a class="code" href="../../d2/d8/struct__COOKED__READ__DATA.html#o20">00106</a>     PWCHAR <a class="code" href="../../d2/d8/struct__COOKED__READ__DATA.html#o20">ExeName</a>;
<a name="l00107"></a><a class="code" href="../../d2/d8/struct__COOKED__READ__DATA.html#o21">00107</a>     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> <a class="code" href="../../d2/d8/struct__COOKED__READ__DATA.html#o21">ExeNameLength</a>;   <span class="comment">// in bytes</span>
<a name="l00108"></a><a class="code" href="../../d2/d8/struct__COOKED__READ__DATA.html#o22">00108</a>     ULONG <a class="code" href="../../d2/d8/struct__COOKED__READ__DATA.html#o22">CtrlWakeupMask</a>;
<a name="l00109"></a><a class="code" href="../../d2/d8/struct__COOKED__READ__DATA.html#o23">00109</a>     ULONG <a class="code" href="../../d2/d8/struct__COOKED__READ__DATA.html#o23">ControlKeyState</a>;
00110 } <a class="code" href="../../d2/d8/struct__COOKED__READ__DATA.html">COOKED_READ_DATA</a>, *<a class="code" href="../../d2/d8/struct__COOKED__READ__DATA.html">PCOOKED_READ_DATA</a>;
00111 
<a name="l00112"></a><a class="code" href="../../d4/d1/cmdline_8h.html#a8">00112</a> <span class="preprocessor">#define COMMAND_NUM_TO_INDEX(NUM,CMDHIST) (SHORT)(((NUM+(CMDHIST)-&gt;FirstCommand)%((CMDHIST)-&gt;MaximumNumberOfCommands)))</span>
<a name="l00113"></a><a class="code" href="../../d4/d1/cmdline_8h.html#a9">00113</a> <span class="preprocessor"></span><span class="preprocessor">#define COMMAND_INDEX_TO_NUM(INDEX,CMDHIST) (SHORT)(((INDEX+((CMDHIST)-&gt;MaximumNumberOfCommands)-(CMDHIST)-&gt;FirstCommand)%((CMDHIST)-&gt;MaximumNumberOfCommands)))</span>
00114 <span class="preprocessor"></span>
00115 <span class="comment">/*</span>
00116 <span class="comment"> * COMMAND_IND_NEXT and COMMAND_IND_PREV go to the next and prev command</span>
00117 <span class="comment"> * COMMAND_IND_INC  and COMMAND_IND_DEC  go to the next and prev slots</span>
00118 <span class="comment"> *</span>
00119 <span class="comment"> * Don't get the two confused - it matters when the cmd history is not full!</span>
00120 <span class="comment"> */</span>
00121 
<a name="l00122"></a><a class="code" href="../../d4/d1/cmdline_8h.html#a10">00122</a> <span class="preprocessor">#define COMMAND_IND_PREV(IND,CMDHIST)               \</span>
00123 <span class="preprocessor">{                                                   \</span>
00124 <span class="preprocessor">    if (IND &lt;= 0) {                                 \</span>
00125 <span class="preprocessor">        IND = (CMDHIST)-&gt;NumberOfCommands;          \</span>
00126 <span class="preprocessor">    }                                               \</span>
00127 <span class="preprocessor">    IND--;                                          \</span>
00128 <span class="preprocessor">}</span>
00129 <span class="preprocessor"></span>
<a name="l00130"></a><a class="code" href="../../d4/d1/cmdline_8h.html#a11">00130</a> <span class="preprocessor">#define COMMAND_IND_NEXT(IND,CMDHIST)               \</span>
00131 <span class="preprocessor">{                                                   \</span>
00132 <span class="preprocessor">    ++IND;                                          \</span>
00133 <span class="preprocessor">    if (IND &gt;= (CMDHIST)-&gt;NumberOfCommands){        \</span>
00134 <span class="preprocessor">        IND = 0;                                    \</span>
00135 <span class="preprocessor">    }                                               \</span>
00136 <span class="preprocessor">}</span>
00137 <span class="preprocessor"></span>
<a name="l00138"></a><a class="code" href="../../d4/d1/cmdline_8h.html#a12">00138</a> <span class="preprocessor">#define COMMAND_IND_DEC(IND,CMDHIST)                \</span>
00139 <span class="preprocessor">{                                                   \</span>
00140 <span class="preprocessor">    if (IND &lt;= 0) {                                 \</span>
00141 <span class="preprocessor">        IND = (CMDHIST)-&gt;MaximumNumberOfCommands;   \</span>
00142 <span class="preprocessor">    }                                               \</span>
00143 <span class="preprocessor">    IND--;                                          \</span>
00144 <span class="preprocessor">}</span>
00145 <span class="preprocessor"></span>
<a name="l00146"></a><a class="code" href="../../d4/d1/cmdline_8h.html#a13">00146</a> <span class="preprocessor">#define COMMAND_IND_INC(IND,CMDHIST)                \</span>
00147 <span class="preprocessor">{                                                   \</span>
00148 <span class="preprocessor">    ++IND;                                          \</span>
00149 <span class="preprocessor">    if (IND &gt;= (CMDHIST)-&gt;MaximumNumberOfCommands){ \</span>
00150 <span class="preprocessor">        IND = 0;                                    \</span>
00151 <span class="preprocessor">    }                                               \</span>
00152 <span class="preprocessor">}</span>
00153 <span class="preprocessor"></span>
<a name="l00154"></a><a class="code" href="../../d4/d1/cmdline_8h.html#a14">00154</a> <span class="preprocessor">#define CLE_NO_POPUPS(COMMAND_HISTORY) (&amp;(COMMAND_HISTORY)-&gt;PopupList == (COMMAND_HISTORY)-&gt;PopupList.Blink)</span>
00155 <span class="preprocessor"></span>
00156 <span class="comment">//</span>
00157 <span class="comment">// aliases are grouped per console, per exe.</span>
00158 <span class="comment">//</span>
00159 
<a name="l00160"></a><a class="code" href="../../d1/d6/struct__ALIAS.html">00160</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d1/d6/struct__ALIAS.html">_ALIAS</a> {
<a name="l00161"></a><a class="code" href="../../d1/d6/struct__ALIAS.html#o0">00161</a>     LIST_ENTRY <a class="code" href="../../d1/d6/struct__ALIAS.html#o0">ListLink</a>;
<a name="l00162"></a><a class="code" href="../../d1/d6/struct__ALIAS.html#o1">00162</a>     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> <a class="code" href="../../d1/d6/struct__ALIAS.html#o1">SourceLength</a>; <span class="comment">// in bytes</span>
<a name="l00163"></a><a class="code" href="../../d1/d6/struct__ALIAS.html#o2">00163</a>     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> <a class="code" href="../../d1/d6/struct__ALIAS.html#o2">TargetLength</a>; <span class="comment">// in bytes</span>
<a name="l00164"></a><a class="code" href="../../d1/d6/struct__ALIAS.html#o3">00164</a>     PWCHAR <a class="code" href="../../d1/d6/struct__ALIAS.html#o3">Source</a>;
<a name="l00165"></a><a class="code" href="../../d1/d6/struct__ALIAS.html#o4">00165</a>     PWCHAR <a class="code" href="../../d1/d6/struct__ALIAS.html#o4">Target</a>;
00166 } <a class="code" href="../../d1/d6/struct__ALIAS.html">ALIAS</a>, *<a class="code" href="../../d1/d6/struct__ALIAS.html">PALIAS</a>;
00167 
<a name="l00168"></a><a class="code" href="../../d6/d8/struct__EXE__ALIAS__LIST.html">00168</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d6/d8/struct__EXE__ALIAS__LIST.html">_EXE_ALIAS_LIST</a> {
<a name="l00169"></a><a class="code" href="../../d6/d8/struct__EXE__ALIAS__LIST.html#o0">00169</a>     LIST_ENTRY <a class="code" href="../../d6/d8/struct__EXE__ALIAS__LIST.html#o0">ListLink</a>;
<a name="l00170"></a><a class="code" href="../../d6/d8/struct__EXE__ALIAS__LIST.html#o1">00170</a>     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> <a class="code" href="../../d6/d8/struct__EXE__ALIAS__LIST.html#o1">ExeLength</a>;   <span class="comment">// in bytes</span>
<a name="l00171"></a><a class="code" href="../../d6/d8/struct__EXE__ALIAS__LIST.html#o2">00171</a>     PWCHAR <a class="code" href="../../d6/d8/struct__EXE__ALIAS__LIST.html#o2">ExeName</a>;
<a name="l00172"></a><a class="code" href="../../d6/d8/struct__EXE__ALIAS__LIST.html#o3">00172</a>     LIST_ENTRY <a class="code" href="../../d6/d8/struct__EXE__ALIAS__LIST.html#o3">AliasList</a>;
00173 } <a class="code" href="../../d6/d8/struct__EXE__ALIAS__LIST.html">EXE_ALIAS_LIST</a>, *<a class="code" href="../../d6/d8/struct__EXE__ALIAS__LIST.html">PEXE_ALIAS_LIST</a>;
00174 
00175 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
00176 <a class="code" href="../../d4/d1/cmdline_8h.html#a40">ProcessCommandLine</a>(
00177     IN PCOOKED_READ_DATA CookedReadData,
00178     IN WCHAR Char,
00179     IN DWORD KeyState,
00180     IN PCSR_API_MSG WaitReplyMessage,
00181     IN PCSR_THREAD WaitingThread,
00182     IN BOOLEAN WaitRoutine
00183     );
00184 
00185 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00186 <a class="code" href="../../d4/d1/cmdline_8h.html#a41">DeleteCommandLine</a>(
00187     IN OUT PCOOKED_READ_DATA CookedReadData,
00188     IN BOOL UpdateFields
00189     );
00190 
00191 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00192 <a class="code" href="../../d4/d1/cmdline_8h.html#a42">RedrawCommandLine</a>(
00193     IN PCOOKED_READ_DATA CookedReadData
00194     );
00195 
00196 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00197 <a class="code" href="../../d4/d1/cmdline_8h.html#a43">EmptyCommandHistory</a>(
00198     IN PCOMMAND_HISTORY CommandHistory
00199     );
00200 
00201 <a class="code" href="../../d4/d1/cmdline_8h.html#a31">PCOMMAND_HISTORY</a>
00202 <a class="code" href="../../d4/d1/cmdline_8h.html#a44">ReallocCommandHistory</a>(
00203     IN <a class="code" href="../../d1/d3/struct__CONSOLE__INFORMATION.html">PCONSOLE_INFORMATION</a> Console,
00204     IN PCOMMAND_HISTORY CurrentCommandHistory,
00205     IN DWORD NumCommands
00206     );
00207 
00208 <a class="code" href="../../d4/d1/cmdline_8h.html#a31">PCOMMAND_HISTORY</a>
00209 <a class="code" href="../../d4/d1/cmdline_8h.html#a45">FindExeCommandHistory</a>(
00210     IN <a class="code" href="../../d1/d3/struct__CONSOLE__INFORMATION.html">PCONSOLE_INFORMATION</a> Console,
00211     IN PVOID AppName,
00212     IN DWORD AppNameLength,
00213     IN BOOLEAN UnicodeExe
00214     );
00215 
00216 <a class="code" href="../../d4/d1/cmdline_8h.html#a31">PCOMMAND_HISTORY</a>
00217 <a class="code" href="../../d4/d1/cmdline_8h.html#a46">FindCommandHistory</a>(
00218     IN <a class="code" href="../../d1/d3/struct__CONSOLE__INFORMATION.html">PCONSOLE_INFORMATION</a> Console,
00219     IN HANDLE ProcessHandle
00220     );
00221 
00222 ULONG
00223 <a class="code" href="../../d0/d7/server_2stream_8c.html#a22">RetrieveNumberOfSpaces</a>(
00224     IN SHORT OriginalCursorPositionX,
00225     IN PWCHAR Buffer,
00226     IN ULONG CurrentPosition
00227 #<span class="keywordflow">if</span> defined(FE_SB)
00228     ,
00229     IN <a class="code" href="../../d1/d3/struct__CONSOLE__INFORMATION.html">PCONSOLE_INFORMATION</a> Console,
00230     IN DWORD CodePage
00231 #endif
00232     );
00233 
00234 ULONG
00235 <a class="code" href="../../d0/d7/server_2stream_8c.html#a21">RetrieveTotalNumberOfSpaces</a>(
00236     IN SHORT OriginalCursorPositionX,
00237     IN PWCHAR Buffer,
00238     IN ULONG CurrentPosition
00239 #<span class="keywordflow">if</span> defined(FE_SB)
00240     ,
00241     IN <a class="code" href="../../d1/d3/struct__CONSOLE__INFORMATION.html">PCONSOLE_INFORMATION</a> Console
00242 #endif
00243     );
00244 
00245 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
00246 <a class="code" href="../../d0/d7/server_2stream_8c.html#a19">GetChar</a>(
00247     IN <a class="code" href="../../d7/d2/struct__INPUT__INFORMATION.html">PINPUT_INFORMATION</a> InputInfo,
00248     OUT PWCHAR Char,
00249     IN BOOLEAN Wait,
00250     IN <a class="code" href="../../d1/d3/struct__CONSOLE__INFORMATION.html">PCONSOLE_INFORMATION</a> Console,
00251     IN <a class="code" href="../../d4/d3/struct__HANDLE__DATA.html">PHANDLE_DATA</a> HandleData,
00252     IN PCSR_API_MSG Message OPTIONAL,
00253     IN CSR_WAIT_ROUTINE WaitRoutine OPTIONAL,
00254     IN PVOID WaitParameter OPTIONAL,
00255     IN ULONG WaitParameterLength  OPTIONAL,
00256     IN BOOLEAN WaitBlockExists OPTIONAL,
00257     OUT PBOOLEAN CommandLineEditingKeys OPTIONAL,
00258     OUT PBOOLEAN CommandLinePopupKeys OPTIONAL,
00259     OUT PBOOLEAN EnableScrollMode OPTIONAL,
00260     OUT PDWORD KeyState OPTIONAL
00261     );
00262 
00263 <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>
00264 <a class="code" href="../../d4/d1/cmdline_8h.html#a50">IsCommandLinePopupKey</a>(
00265     IN OUT PKEY_EVENT_RECORD KeyEvent
00266     );
00267 
00268 <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>
00269 <a class="code" href="../../d4/d1/cmdline_8h.html#a51">IsCommandLineEditingKey</a>(
00270     IN OUT PKEY_EVENT_RECORD KeyEvent
00271     );
00272 
00273 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00274 <a class="code" href="../../d4/d1/cmdline_8h.html#a52">CleanUpPopups</a>(
00275     IN PCOOKED_READ_DATA CookedReadData
00276     );
00277 
00278 <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>
00279 <a class="code" href="../../d0/d7/server_2stream_8c.html#a23">ProcessCookedReadInput</a>(
00280     IN PCOOKED_READ_DATA CookedReadData,
00281     IN WCHAR Char,
00282     IN DWORD KeyState,
00283     OUT PNTSTATUS Status
00284     );
00285 
00286 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00287 <a class="code" href="../../d4/d1/cmdline_8h.html#a54">DrawCommandListBorder</a>(
00288     IN PCLE_POPUP Popup,
00289     IN <a class="code" href="../../d7/d8/struct__SCREEN__INFORMATION.html">PSCREEN_INFORMATION</a> ScreenInfo
00290     );
00291 
00292 <a class="code" href="../../d4/d1/cmdline_8h.html#a26">PCOMMAND</a>
00293 <a class="code" href="../../d4/d1/cmdline_8h.html#a55">GetLastCommand</a>(
00294     IN PCOMMAND_HISTORY CommandHistory
00295     );
00296 
00297 <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a13">SHORT</a>
00298 <a class="code" href="../../d4/d1/cmdline_8h.html#a56">FindMatchingCommand</a>(
00299     IN PCOMMAND_HISTORY CommandHistory,
00300     IN PWCHAR CurrentCommand,
00301     IN ULONG CurrentCommandLength,
00302     IN SHORT CurrentIndex,
00303     IN DWORD Flags
00304     );
00305 
<a name="l00306"></a><a class="code" href="../../d4/d1/cmdline_8h.html#a15">00306</a> <span class="preprocessor">#define FMCFL_EXACT_MATCH   1</span>
<a name="l00307"></a><a class="code" href="../../d4/d1/cmdline_8h.html#a16">00307</a> <span class="preprocessor"></span><span class="preprocessor">#define FMCFL_JUST_LOOKING  2</span>
00308 <span class="preprocessor"></span>
00309 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
00310 <a class="code" href="../../d4/d1/cmdline_8h.html#a57">CommandNumberPopup</a>(
00311     IN PCOOKED_READ_DATA CookedReadData,
00312     IN PCSR_API_MSG WaitReplyMessage,
00313     IN PCSR_THREAD WaitingThread,
00314     IN BOOLEAN WaitRoutine
00315     );
00316 
00317 BOOLEAN
00318 <a class="code" href="../../d0/d7/server_2stream_8c.html#a25">CookedReadWaitRoutine</a>(
00319     IN PLIST_ENTRY WaitQueue,
00320     IN PCSR_THREAD WaitingThread,
00321     IN PCSR_API_MSG WaitReplyMessage,
00322     IN PVOID WaitParameter,
00323     IN PVOID SatisfyParameter1,
00324     IN PVOID SatisfyParameter2,
00325     IN ULONG WaitFlags
00326     );
00327 
00328 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00329 <a class="code" href="../../d6/d2/output_8c.html#a50">ReadRectFromScreenBuffer</a>(
00330     IN <a class="code" href="../../d7/d8/struct__SCREEN__INFORMATION.html">PSCREEN_INFORMATION</a> ScreenInfo,
00331     IN COORD SourcePoint,
00332     IN PCHAR_INFO Target,
00333     IN COORD TargetSize,
00334     IN PSMALL_RECT TargetRect
00335     );
00336 
00337 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
00338 <a class="code" href="../../d0/d7/server_2stream_8c.html#a38">WriteCharsFromInput</a>(
00339     IN <a class="code" href="../../d7/d8/struct__SCREEN__INFORMATION.html">PSCREEN_INFORMATION</a> ScreenInfo,
00340     IN PWCHAR lpBufferBackupLimit,
00341     IN PWCHAR lpBuffer,
00342     IN PWCHAR lpString,
00343     IN OUT PDWORD NumBytes,
00344     OUT PLONG NumSpaces OPTIONAL,
00345     IN SHORT OriginalXPosition,
00346     IN DWORD dwFlags,
00347     OUT PSHORT ScrollY OPTIONAL
00348     );
00349 
00350 <span class="comment">//</span>
00351 <span class="comment">// Values for WriteChars(),WriteCharsFromInput() dwFlags</span>
00352 <span class="comment">//</span>
<a name="l00353"></a><a class="code" href="../../d4/d1/cmdline_8h.html#a17">00353</a> <span class="preprocessor">#define WC_DESTRUCTIVE_BACKSPACE 0x01</span>
<a name="l00354"></a><a class="code" href="../../d4/d1/cmdline_8h.html#a18">00354</a> <span class="preprocessor"></span><span class="preprocessor">#define WC_KEEP_CURSOR_VISIBLE   0x02</span>
<a name="l00355"></a><a class="code" href="../../d4/d1/cmdline_8h.html#a19">00355</a> <span class="preprocessor"></span><span class="preprocessor">#define WC_ECHO                  0x04</span>
<a name="l00356"></a><a class="code" href="../../d4/d1/cmdline_8h.html#a20">00356</a> <span class="preprocessor"></span><span class="preprocessor">#define WC_FALSIFY_UNICODE       0x08</span>
<a name="l00357"></a><a class="code" href="../../d4/d1/cmdline_8h.html#a21">00357</a> <span class="preprocessor"></span><span class="preprocessor">#define WC_LIMIT_BACKSPACE       0x10</span>
00358 <span class="preprocessor"></span>
00359 
00360 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00361 <a class="code" href="../../d4/d1/cmdline_8h.html#a61">DrawCommandListPopup</a>(
00362     IN PCLE_POPUP Popup,
00363     IN SHORT CurrentCommand,
00364     IN PCOMMAND_HISTORY CommandHistory,
00365     IN <a class="code" href="../../d7/d8/struct__SCREEN__INFORMATION.html">PSCREEN_INFORMATION</a> ScreenInfo
00366     );
00367 
00368 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00369 <a class="code" href="../../d4/d1/cmdline_8h.html#a62">UpdateCommandListPopup</a>(
00370     IN SHORT Delta,
00371     IN OUT PSHORT CurrentCommand,
00372     IN PCOMMAND_HISTORY CommandHistory,
00373     IN PCLE_POPUP Popup,
00374     IN <a class="code" href="../../d7/d8/struct__SCREEN__INFORMATION.html">PSCREEN_INFORMATION</a> ScreenInfo,
00375     IN DWORD Flags
00376     );
00377 
<a name="l00378"></a><a class="code" href="../../d4/d1/cmdline_8h.html#a22">00378</a> <span class="preprocessor">#define UCLP_WRAP   1</span>
00379 <span class="preprocessor"></span>
00380 
00381 <span class="comment">//</span>
00382 <span class="comment">// InitExtendedEditKey</span>
00383 <span class="comment">// If lpwstr is NULL, the default value will be used.</span>
00384 <span class="comment">//</span>
00385 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a> <a class="code" href="../../d4/d1/cmdline_8h.html#a63">InitExtendedEditKeys</a>(CONST ExtKeyDefBuf* lpbuf);
00386 
00387 <span class="comment">//</span>
00388 <span class="comment">// IsPauseKey</span>
00389 <span class="comment">// returns TRUE if pKeyEvent is pause.</span>
00390 <span class="comment">// The default key is Ctrl-S if extended edit keys are not specified.</span>
00391 <span class="comment">//</span>
00392 <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> <a class="code" href="../../d4/d1/cmdline_8h.html#a64">IsPauseKey</a>(IN PKEY_EVENT_RECORD pKeyEvent);
00393 
00394 
00395 <span class="comment">//</span>
00396 <span class="comment">// Word delimiters</span>
00397 <span class="comment">//</span>
00398 
<a name="l00399"></a><a class="code" href="../../d4/d1/cmdline_8h.html#a23">00399</a> <span class="preprocessor">#define IS_WORD_DELIM(wch)  ((wch) == L' ' || (gaWordDelimChars[0] &amp;&amp; IsWordDelim(wch)))</span>
00400 <span class="preprocessor"></span>
<a name="l00401"></a><a class="code" href="../../d4/d1/cmdline_8h.html#a38">00401</a> <span class="keyword">extern</span> WCHAR <a class="code" href="../../d3/d1/server_2cmdline_8c.html#a14">gaWordDelimChars</a>[];
<a name="l00402"></a><a class="code" href="../../d4/d1/cmdline_8h.html#a39">00402</a> <span class="keyword">extern</span> CONST WCHAR <a class="code" href="../../d3/d1/server_2cmdline_8c.html#a15">gaWordDelimCharsDefault</a>[];
00403 <span class="keyword">extern</span> <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> <a class="code" href="../../d4/d1/cmdline_8h.html#a65">IsWordDelim</a>(WCHAR);
00404 
<a name="l00405"></a><a class="code" href="../../d4/d1/cmdline_8h.html#a24">00405</a> <span class="preprocessor">#define WORD_DELIM_MAX  32</span>
00406 <span class="preprocessor"></span>
</div></pre><hr size="1"><address style="align: right;"><small>Generated on Sat May 15 19:39:27 2004 for test by
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>test: w32/ntuser/imm/misc.c File Reference</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="../../main.html">Main&nbsp;Page</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Class&nbsp;List</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Class&nbsp;Members</a> | <a class="qindex" href="../../globals.html">File&nbsp;Members</a></div>
<h1>misc.c File Reference</h1><code>#include "<a class="el" href="../../d9/d2/w32_2ntuser_2imm_2precomp_8h-source.html">precomp.h</a>"</code><br>

<p>
<a href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html">Go to the source code of this file.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a0">D</a>(x)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a1">LOCALE_CPDATA</a>&nbsp;&nbsp;&nbsp;7</td></tr>

<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>HWND WINAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a4">ImmGetDefaultIMEWnd</a> (HWND <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a29">hWnd</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL WINAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a5">ImmDisableIME</a> (<a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwThreadId)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL WINAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a6">ImmIsUIMessageA</a> (HWND hIMEWnd, UINT message, WPARAM wParam, LPARAM lParam)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL WINAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a7">ImmIsUIMessageW</a> (HWND hIMEWnd, UINT message, WPARAM wParam, LPARAM lParam)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a8">ImmIsUIMessageWorker</a> (HWND hIMEWnd, UINT message, WPARAM wParam, LPARAM lParam, BOOL fAnsi)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL WINAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a9">ImmGenerateMessage</a> (HIMC hImc)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>UINT WINAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a10">ImmGetVirtualKey</a> (HWND <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a29">hWnd</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>PINPUTCONTEXT WINAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a11">InternalImmLockIMC</a> (HIMC hImc, BOOL fCanCallImeSelect)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>PINPUTCONTEXT WINAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a12">ImmLockIMC</a> (HIMC hImc)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL WINAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a13">ImmUnlockIMC</a> (HIMC hImc)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> WINAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a14">ImmGetIMCLockCount</a> (HIMC hImc)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>HIMCC WINAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a15">ImmCreateIMCC</a> (<a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwSize)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>HIMCC WINAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a16">ImmDestroyIMCC</a> (HIMCC hIMCC)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a5">LPVOID</a> WINAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a17">ImmLockIMCC</a> (HIMCC hIMCC)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL WINAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a18">ImmUnlockIMCC</a> (HIMCC hIMCC)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> WINAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a19">ImmGetIMCCLockCount</a> (HIMCC hIMCC)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>HIMCC WINAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a20">ImmReSizeIMCC</a> (HIMCC hIMCC, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwSize)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> WINAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a21">ImmGetIMCCSize</a> (HIMCC hIMCC)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a5">LPVOID</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a22">ImmLocalAlloc</a> (<a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> uFlag, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> uBytes)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d2/d8/structtagTHREADINFO.html">PTHREADINFO</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a23">PtiCurrent</a> (VOID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a24">TestInputContextProcess</a> (<a class="el" href="../../d1/d7/structtagIMC.html">PIMC</a> pImc)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a25">TestWindowProcess</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>UINT&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a26">GetKeyboardLayoutCP</a> (HKL hKL)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>UINT&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a27">GetThreadKeyboardLayoutCP</a> (<a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwThreadId)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d3/d0/structtagCLIENTIMC.html">PCLIENTIMC</a> WINAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a28">ImmLockClientImc</a> (HIMC hImc)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID WINAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a29">ImmUnlockClientImc</a> (<a class="el" href="../../d3/d0/structtagCLIENTIMC.html">PCLIENTIMC</a> pClientImc)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d2/d7/structtagIMEDPI.html">PIMEDPI</a> WINAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a30">ImmGetImeDpi</a> (HKL hKL)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d2/d7/structtagIMEDPI.html">PIMEDPI</a> WINAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a31">ImmLockImeDpi</a> (HKL hKL)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID WINAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a32">ImmUnlockImeDpi</a> (<a class="el" href="../../d2/d7/structtagIMEDPI.html">PIMEDPI</a> pImeDpi)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL WINAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a33">ImmGetImeInfoEx</a> (<a class="el" href="../../d0/d8/structtagIMEINFOEX.html">PIMEINFOEX</a> piiex, <a class="el" href="../../d8/d0/immstruc_8h.html#a42">IMEINFOEXCLASS</a> SearchType, PVOID pvSearchKey)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a34">ImmGetAppCompatFlags</a> (HIMC hImc)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a35">ImmPtInRect</a> (int left, int top, int width, int height, LPPOINT lppt)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LRESULT&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a36">ImmSystemHandler</a> (HIMC hImc, WPARAM wParam, LPARAM lParam)</td></tr>

<tr><td colspan=2><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>LCID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a2">CachedLCID</a> = 0</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>UINT&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a3">CachedCP</a> = CP_ACP</td></tr>

</table>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="a0" doxytag="w32/ntuser/imm/misc.c::D" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define D          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">x&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00017">17</a> of file <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html">w32/ntuser/imm/misc.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="w32/ntuser/imm/misc.c::LOCALE_CPDATA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define LOCALE_CPDATA&nbsp;&nbsp;&nbsp;7          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00643">GetKeyboardLayoutCP()</a>.    </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="a26" doxytag="w32/ntuser/imm/misc.c::GetKeyboardLayoutCP" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> UINT GetKeyboardLayoutCP           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HKL&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hKL</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00643">643</a> of file <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html">w32/ntuser/imm/misc.c</a>.
<p>
References <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00641">CachedCP</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00640">CachedLCID</a>, <a class="el" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a1">LOCALE_CPDATA</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>.
<p>
Referenced by <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00672">GetThreadKeyboardLayoutCP()</a>, and <a class="el" href="../../d7/d9/immime_8c-source.html#l01128">ImmPenAuxInput()</a>.
<p>
<pre class="fragment"><div>00645 {
00646 <span class="preprocessor">    #define LOCALE_CPDATA 7</span>
00647 <span class="preprocessor"></span>    WCHAR wszCodePage[<a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a1">LOCALE_CPDATA</a>];
00648     LCID  lcid;
00649 
00650     lcid = MAKELCID(LOWORD(HandleToUlong(hKL)), SORT_DEFAULT);
00651 
00652     <span class="keywordflow">if</span> (lcid == <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a2">CachedLCID</a>)
00653         <span class="keywordflow">return</span> <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a3">CachedCP</a>;
00654 
00655     <span class="keywordflow">if</span> (!GetLocaleInfoW(lcid, LOCALE_IDEFAULTANSICODEPAGE,
00656                 wszCodePage, LOCALE_CPDATA))
00657         <span class="keywordflow">return</span> CP_ACP;
00658 
00659     <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a2">CachedLCID</a> = lcid;
00660     <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a3">CachedCP</a> = (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)wcstol(wszCodePage, NULL, 10);
00661 
00662     <span class="keywordflow">return</span> <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a3">CachedCP</a>;
00663 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a27" doxytag="w32/ntuser/imm/misc.c::GetThreadKeyboardLayoutCP" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> UINT GetThreadKeyboardLayoutCP           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>dwThreadId</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00672">672</a> of file <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html">w32/ntuser/imm/misc.c</a>.
<p>
References <a class="el" href="../../d4/d7/client_8c-source.html#l04502">GetKeyboardLayout()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00643">GetKeyboardLayoutCP()</a>, and <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>.
<p>
<pre class="fragment"><div>00674 {
00675     HKL hKL;
00676 
00677     hKL = <a class="code" href="../../d3/d8/client_8c.html#a154">GetKeyboardLayout</a>(dwThreadId);
00678 
00679     <span class="keywordflow">return</span> <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a26">GetKeyboardLayoutCP</a>(hKL);
00680 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a15" doxytag="w32/ntuser/imm/misc.c::ImmCreateIMCC" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HIMCC WINAPI ImmCreateIMCC           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>dwSize</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00436">436</a> of file <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html">w32/ntuser/imm/misc.c</a>.
<p>
References <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, and <a class="el" href="../../d9/d5/ntuser_2client_2globals_8h-source.html#l00090">LHND</a>.
<p>
Referenced by <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00563">CreateInputContext()</a>, and <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00837">SelectInputContext()</a>.
<p>
<pre class="fragment"><div>00438 {
00439     <span class="comment">// At least size should be DWORD.</span>
00440     <span class="keywordflow">if</span> (dwSize &lt; <span class="keyword">sizeof</span>(<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)) {
00441         dwSize = <span class="keyword">sizeof</span>(<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>);
00442     }
00443 
00444     <span class="keywordflow">return</span> (HIMCC)LocalAlloc(LHND, dwSize);
00445 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a16" doxytag="w32/ntuser/imm/misc.c::ImmDestroyIMCC" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HIMCC WINAPI ImmDestroyIMCC           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HIMCC&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hIMCC</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00454">454</a> of file <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html">w32/ntuser/imm/misc.c</a>.
<p>
References <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>.
<p>
Referenced by <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00563">CreateInputContext()</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00718">DestroyInputContext()</a>, and <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00837">SelectInputContext()</a>.
<p>
<pre class="fragment"><div>00456 {
00457     <span class="keywordflow">if</span> (hIMCC == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00458         <span class="keywordflow">return</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00459     }
00460 
00461     <span class="keywordflow">return</span> (HIMCC)LocalFree(hIMCC);
00462 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="w32/ntuser/imm/misc.c::ImmDisableIME" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL WINAPI ImmDisableIME           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>dwThreadId</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00050">50</a> of file <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html">w32/ntuser/imm/misc.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d3/d5/ntuser_2imm_2globals_8c-source.html#l00034">gcsImeDpi</a>, <a class="el" href="../../d3/d5/ntuser_2imm_2globals_8c-source.html#l00033">gpImeDpi</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00137">ImmLocalFree</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l13087">NtUserDisableThreadIme()</a>, <a class="el" href="../../d0/d0/immuser_8h-source.html#l00067">tagIMEDPI::pNext</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d7/d9/immime_8c-source.html#l00212">UnloadIME()</a>.
<p>
<pre class="fragment"><div>00051 {
00052 <span class="preprocessor">#ifdef LATER    // hiro</span>
00053 <span class="preprocessor"></span>    <span class="keywordflow">if</span> (dwThreadId == -1) {
00054         <span class="comment">// Unload all IMEs</span>
00055         RtlEnterCriticalSection(&amp;gcsImeDpi);
00056         <span class="keywordflow">while</span> (<a class="code" href="../../d2/d6/ntuser_2imm_2globals_8c.html#a7">gpImeDpi</a>) {
00057             <a class="code" href="../../d2/d7/structtagIMEDPI.html">PIMEDPI</a> pImeDpi = <a class="code" href="../../d2/d6/ntuser_2imm_2globals_8c.html#a7">gpImeDpi</a>;
00058             <a class="code" href="../../d2/d6/ntuser_2imm_2globals_8c.html#a7">gpImeDpi</a> = <a class="code" href="../../d2/d6/ntuser_2imm_2globals_8c.html#a7">gpImeDpi</a>-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o0">pNext</a>;
00059             <a class="code" href="../../d6/d0/immime_8c.html#a9">UnloadIME</a>(pImeDpi, TRUE);
00060             <a class="code" href="../../d4/d0/immcli_8h.html#a8">ImmLocalFree</a>(pImeDpi);
00061         }
00062         RtlLeaveCriticalSection(&amp;gcsImeDpi);
00063     }
00064 <span class="preprocessor">#endif</span>
00065 <span class="preprocessor"></span>    <span class="keywordflow">return</span> (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>)<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a401">NtUserDisableThreadIme</a>(dwThreadId);
00066 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a9" doxytag="w32/ntuser/imm/misc.c::ImmGenerateMessage" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL WINAPI ImmGenerateMessage           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HIMC&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hImc</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00171">171</a> of file <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html">w32/ntuser/imm/misc.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00192">GetClientInfo</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00152">GetInputContextThread</a>, <a class="el" href="../../d9/d9/immstruc_8h-source.html#l00033">IMCF_UNICODE</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00557">ImmLocalAlloc()</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00137">ImmLocalFree</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00689">ImmLockClientImc()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00371">ImmLockIMC()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00471">ImmLockIMCC()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00747">ImmUnlockClientImc()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00383">ImmUnlockIMC()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00488">ImmUnlockIMCC()</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00025">INT</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00166">TestICF</a>, <a class="el" href="../../d3/d4/transsub_8c-source.html#l01099">TransGetLevel()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00475">VER40</a>, and <a class="el" href="../../d5/d2/ntuser_2imm_2input_8c-source.html#l00478">WINNLSTranslateMessage()</a>.
<p>
<pre class="fragment"><div>00173 {
00174     <a class="code" href="../../d3/d0/structtagCLIENTIMC.html">PCLIENTIMC</a>    pClientImc;
00175     PINPUTCONTEXT pInputContext;
00176     PTRANSMSG     pTransMsg;
00177     <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a>           iNum;
00178     <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a>           i;
00179     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>          fUnicodeImc;
00180 
00181     <span class="keywordflow">if</span> (<a class="code" href="../../d4/d0/immcli_8h.html#a15">GetInputContextThread</a>(hImc) != GetCurrentThreadId()) {
00182         RIPMSG1(RIP_WARNING,
00183               <span class="stringliteral">"ImmGenerateMessage: Invalid input context access %lx."</span>, hImc);
00184         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00185     }
00186 
00187     pClientImc = <a class="code" href="../../d9/d0/immuser_8h.html#a43">ImmLockClientImc</a>(hImc);
00188     <span class="keywordflow">if</span> (pClientImc == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00189         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00190 
00191     fUnicodeImc = <a class="code" href="../../d4/d0/immcli_8h.html#a21">TestICF</a>(pClientImc, IMCF_UNICODE);
00192 
00193     <a class="code" href="../../d9/d0/immuser_8h.html#a44">ImmUnlockClientImc</a>(pClientImc);
00194 
00195     pInputContext = <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a12">ImmLockIMC</a>(hImc);
00196     <span class="keywordflow">if</span> (!pInputContext) {
00197         RIPMSG1(RIP_WARNING, <span class="stringliteral">"ImmGenerateMessage: Lock hImc %lx failed."</span>, hImc);
00198         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00199     }
00200 
00201     iNum = (<span class="keywordtype">int</span>)pInputContext-&gt;dwNumMsgBuf;
00202 
00203     <span class="keywordflow">if</span> (iNum &amp;&amp; (pTransMsg = (PTRANSMSG)<a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a17">ImmLockIMCC</a>(pInputContext-&gt;hMsgBuf))) {
00204         PTRANSMSG pTransMsgBuf, pTransMsgTemp;
00205 
00206         pTransMsgBuf = (PTRANSMSG)<a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a22">ImmLocalAlloc</a>(0, iNum * <span class="keyword">sizeof</span>(TRANSMSG));
00207 
00208         <span class="keywordflow">if</span> (pTransMsgBuf != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00209 
00210             RtlCopyMemory(pTransMsgBuf, pTransMsg, iNum * <span class="keyword">sizeof</span>(TRANSMSG));
00211 
00212             <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a16">GetClientInfo</a>()-&gt;dwExpWinVer &lt; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a101">VER40</a>) {
00213                 <span class="comment">/*</span>
00214 <span class="comment">                 * translate messages for those applications that expect</span>
00215 <span class="comment">                 * old style IME messages.</span>
00216 <span class="comment">                 */</span>
00217                 <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwLangId;
00218                 dwLangId = PRIMARYLANGID(LANGIDFROMLCID(GetSystemDefaultLCID()));
00219                 <span class="keywordflow">if</span> ( (dwLangId == LANG_KOREAN &amp;&amp; <a class="code" href="../../d2/d5/transsub_8c.html#a25">TransGetLevel</a>(pInputContext-&gt;hWnd) == 3) ||
00220                      (dwLangId == LANG_JAPANESE) ) {
00221                     iNum = <a class="code" href="../../d4/d3/ntuser_2imm_2input_8c.html#a5">WINNLSTranslateMessage</a>(iNum,
00222                                                   pTransMsgBuf,
00223                                                   hImc,
00224                                                   !fUnicodeImc,
00225                                                   dwLangId );
00226                 }
00227             }
00228 
00229             pTransMsgTemp = pTransMsgBuf;
00230 
00231             <span class="keywordflow">for</span> (i = 0; i &lt; iNum; i++) {
00232                 <span class="keywordflow">if</span> (fUnicodeImc) {
00233                     SendMessageW( pInputContext-&gt;hWnd,
00234                                   pTransMsgTemp-&gt;message,
00235                                   pTransMsgTemp-&gt;wParam,
00236                                   pTransMsgTemp-&gt;lParam );
00237                 } <span class="keywordflow">else</span> {
00238                     SendMessageW( pInputContext-&gt;hWnd,
00239                                   pTransMsgTemp-&gt;message,
00240                                   pTransMsgTemp-&gt;wParam,
00241                                   pTransMsgTemp-&gt;lParam );
00242                 }
00243                 pTransMsgTemp++;
00244             }
00245 
00246             <a class="code" href="../../d4/d0/immcli_8h.html#a8">ImmLocalFree</a>(pTransMsgBuf);
00247         }
00248 
00249         <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a18">ImmUnlockIMCC</a>(pInputContext-&gt;hMsgBuf);
00250     }
00251 
00252     <span class="comment">/*</span>
00253 <span class="comment">     * We should not reallocate the message buffer</span>
00254 <span class="comment">     */</span>
00255     pInputContext-&gt;dwNumMsgBuf = 0<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>;
00256 
00257     <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a13">ImmUnlockIMC</a>(hImc);
00258 
00259     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00260 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a34" doxytag="w32/ntuser/imm/misc.c::ImmGetAppCompatFlags" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> ImmGetAppCompatFlags           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HIMC&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hImc</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00912">912</a> of file <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html">w32/ntuser/imm/misc.c</a>.
<p>
References <a class="el" href="../../d0/d0/immuser_8h-source.html#l00027">tagCLIENTIMC::dwImeCompatFlags</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00689">ImmLockClientImc()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00747">ImmUnlockClientImc()</a>, and <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>.
<p>
Referenced by <a class="el" href="../../d5/d2/ntuser_2imm_2input_8c-source.html#l00030">ImmProcessKey()</a>, <a class="el" href="../../d3/d4/transsub_8c-source.html#l01441">MySetCandidateWindow()</a>, <a class="el" href="../../d3/d4/transsub_8c-source.html#l01328">MySetCompFont()</a>, and <a class="el" href="../../d3/d4/transsub_8c-source.html#l01396">MySetCompWindow()</a>.
<p>
<pre class="fragment"><div>00913 {
00914     <a class="code" href="../../d3/d0/structtagCLIENTIMC.html">PCLIENTIMC</a>    pClientImc;
00915     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>         dwImeCompat = 0;
00916 
00917     pClientImc = <a class="code" href="../../d9/d0/immuser_8h.html#a43">ImmLockClientImc</a>( hImc );
00918     <span class="keywordflow">if</span> ( pClientImc != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> ) {
00919         dwImeCompat = pClientImc-&gt;<a class="code" href="../../d3/d0/structtagCLIENTIMC.html#o3">dwImeCompatFlags</a>;
00920         <a class="code" href="../../d9/d0/immuser_8h.html#a44">ImmUnlockClientImc</a>( pClientImc );
00921     }
00922     <span class="keywordflow">return</span> dwImeCompat;
00923 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="w32/ntuser/imm/misc.c::ImmGetDefaultIMEWnd" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HWND WINAPI ImmGetDefaultIMEWnd           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hWnd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00027">27</a> of file <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html">w32/ntuser/imm/misc.c</a>.
<p>
References <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00110">hWnd</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00591">IS_IME_ENABLED</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l07799">NtUserGetThreadState()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l09643">NtUserQueryWindow()</a>, and <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>.
<p>
Referenced by <a class="el" href="../../d3/d0/fareast_8c-source.html#l00238">_InitializeImmEntryTable()</a>, <a class="el" href="../../d7/d9/immime_8c-source.html#l00495">ImmActivateLayout()</a>, <a class="el" href="../../d7/d8/clwinnls_8c-source.html#l00484">ImmEnableIME()</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00309">ImmSetActiveContext()</a>, <a class="el" href="../../d3/d4/transsub_8c-source.html#l01481">MyPostImsMessage()</a>, <a class="el" href="../../d7/d8/clwinnls_8c-source.html#l00081">SendIMEMessageAll()</a>, <a class="el" href="../../d5/d7/jtranmsg_8c-source.html#l00582">WINNLSTranslateMessageJ()</a>, and <a class="el" href="../../d8/d9/ktranmsg_8c-source.html#l00128">WINNLSTranslateMessageK()</a>.
<p>
<pre class="fragment"><div>00029 {
00030     <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a126">IS_IME_ENABLED</a>()) {
00031         <span class="keywordflow">return</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00032     }
00033     <span class="keywordflow">if</span> (<a class="code" href="../../d3/d8/aug98_2test_2main_8c.html#a29">hWnd</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00034         <span class="comment">/*</span>
00035 <span class="comment">         * Query default IME window of current thread.</span>
00036 <span class="comment">         */</span>
00037         <span class="keywordflow">return</span> (HWND)<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a287">NtUserGetThreadState</a>(UserThreadStateDefaultImeWindow);
00038     }
00039 
00040     <span class="keywordflow">return</span> (HWND)<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a328">NtUserQueryWindow</a>(hWnd, WindowDefaultImeWindow);
00041 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a19" doxytag="w32/ntuser/imm/misc.c::ImmGetIMCCLockCount" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> WINAPI ImmGetIMCCLockCount           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HIMCC&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hIMCC</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00505">505</a> of file <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html">w32/ntuser/imm/misc.c</a>.
<p>
References <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, and <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>.
<p>
Referenced by <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00837">SelectInputContext()</a>.
<p>
<pre class="fragment"><div>00507 {
00508     <span class="keywordflow">if</span> (hIMCC == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00509         <span class="keywordflow">return</span> 0;
00510     }
00511 
00512     <span class="keywordflow">return</span> (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)(LocalFlags(hIMCC) &amp; LMEM_LOCKCOUNT);
00513 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a21" doxytag="w32/ntuser/imm/misc.c::ImmGetIMCCSize" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> WINAPI ImmGetIMCCSize           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HIMCC&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hIMCC</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00540">540</a> of file <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html">w32/ntuser/imm/misc.c</a>.
<p>
References <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, and <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>.
<p>
Referenced by <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00837">SelectInputContext()</a>.
<p>
<pre class="fragment"><div>00542 {
00543     <span class="keywordflow">if</span> (hIMCC == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00544         <span class="keywordflow">return</span> 0;
00545     }
00546 
00547     <span class="keywordflow">return</span> (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)LocalSize(hIMCC);
00548 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a14" doxytag="w32/ntuser/imm/misc.c::ImmGetIMCLockCount" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> WINAPI ImmGetIMCLockCount           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HIMC&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hImc</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00412">412</a> of file <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html">w32/ntuser/imm/misc.c</a>.
<p>
References <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d0/d0/immuser_8h-source.html#l00024">tagCLIENTIMC::hInputContext</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00689">ImmLockClientImc()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00747">ImmUnlockClientImc()</a>, and <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>.
<p>
<pre class="fragment"><div>00414 {
00415     <a class="code" href="../../d3/d0/structtagCLIENTIMC.html">PCLIENTIMC</a> pClientImc;
00416     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>      dwRet = 0;
00417 
00418     <span class="keywordflow">if</span> ((pClientImc = <a class="code" href="../../d9/d0/immuser_8h.html#a43">ImmLockClientImc</a>(hImc)) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00419         <span class="keywordflow">return</span> dwRet;
00420 
00421     <span class="keywordflow">if</span> (pClientImc-&gt;<a class="code" href="../../d3/d0/structtagCLIENTIMC.html#o0">hInputContext</a> != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00422         dwRet = (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)(LocalFlags(pClientImc-&gt;<a class="code" href="../../d3/d0/structtagCLIENTIMC.html#o0">hInputContext</a>) &amp; LMEM_LOCKCOUNT);
00423 
00424     <a class="code" href="../../d9/d0/immuser_8h.html#a44">ImmUnlockClientImc</a>(pClientImc);
00425 
00426     <span class="keywordflow">return</span> dwRet;
00427 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a30" doxytag="w32/ntuser/imm/misc.c::ImmGetImeDpi" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d2/d7/structtagIMEDPI.html">PIMEDPI</a> WINAPI ImmGetImeDpi           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HKL&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hKL</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00769">769</a> of file <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html">w32/ntuser/imm/misc.c</a>.
<p>
References <a class="el" href="../../d3/d5/ntuser_2imm_2globals_8c-source.html#l00034">gcsImeDpi</a>, <a class="el" href="../../d3/d5/ntuser_2imm_2globals_8c-source.html#l00033">gpImeDpi</a>, <a class="el" href="../../d0/d0/immuser_8h-source.html#l00069">tagIMEDPI::hKL</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d0/d0/immuser_8h-source.html#l00067">tagIMEDPI::pNext</a>.
<p>
Referenced by <a class="el" href="../../d7/d9/immime_8c-source.html#l00346">ImmLoadIME()</a>, and <a class="el" href="../../d7/d9/immime_8c-source.html#l00234">LoadImeDpi()</a>.
<p>
<pre class="fragment"><div>00771 {
00772     <a class="code" href="../../d2/d7/structtagIMEDPI.html">PIMEDPI</a> pImeDpi;
00773 
00774     RtlEnterCriticalSection(&amp;gcsImeDpi);
00775 
00776     pImeDpi = <a class="code" href="../../d2/d6/ntuser_2imm_2globals_8c.html#a7">gpImeDpi</a>;
00777 
00778     <span class="keywordflow">while</span> (pImeDpi != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> &amp;&amp; pImeDpi-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o2">hKL</a> != hKL)
00779         pImeDpi = pImeDpi-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o0">pNext</a>;
00780 
00781     RtlLeaveCriticalSection(&amp;gcsImeDpi);
00782 
00783     <span class="keywordflow">return</span> (<a class="code" href="../../d2/d7/structtagIMEDPI.html">PIMEDPI</a>)pImeDpi;
00784 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a33" doxytag="w32/ntuser/imm/misc.c::ImmGetImeInfoEx" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL WINAPI ImmGetImeInfoEx           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d8/structtagIMEINFOEX.html">PIMEINFOEX</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>piiex</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d8/d0/immstruc_8h.html#a42">IMEINFOEXCLASS</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>SearchType</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PVOID&nbsp;</td>
          <td class="mdname" nowrap> <em>pvSearchKey</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00876">876</a> of file <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html">w32/ntuser/imm/misc.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d9/d9/immstruc_8h-source.html#l00100">tagIMEINFOEX::hkl</a>, <a class="el" href="../../d8/d0/immstruc_8h.html#a75a54">ImeInfoExImeFileName</a>, <a class="el" href="../../d8/d0/immstruc_8h.html#a75a52">ImeInfoExKeyboardLayout</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00059">ImmAssert</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00149">IS_IME_KBDLAYOUT</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l12769">NtUserGetImeInfoEx()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d9/d9/immstruc_8h-source.html#l00109">tagIMEINFOEX::wszImeFile</a>.
<p>
Referenced by <a class="el" href="../../d3/d0/fareast_8c-source.html#l00238">_InitializeImmEntryTable()</a>, <a class="el" href="../../d5/d0/layout_8c-source.html#l00087">ImmGetDescriptionA()</a>, <a class="el" href="../../d5/d0/layout_8c-source.html#l00046">ImmGetDescriptionW()</a>, <a class="el" href="../../d5/d0/layout_8c-source.html#l00165">ImmGetIMEFileNameA()</a>, <a class="el" href="../../d5/d0/layout_8c-source.html#l00124">ImmGetIMEFileNameW()</a>, <a class="el" href="../../d5/d0/layout_8c-source.html#l00202">ImmGetProperty()</a>, <a class="el" href="../../d7/d8/clwinnls_8c-source.html#l00250">ImmIMPQueryIMEW()</a>, <a class="el" href="../../d7/d8/clwinnls_8c-source.html#l00374">ImmIMPSetIMEW()</a>, <a class="el" href="../../d5/d0/layout_8c-source.html#l00266">ImmInstallIMEW()</a>, <a class="el" href="../../d5/d0/layout_8c-source.html#l00468">ImmIsIME()</a>, <a class="el" href="../../d7/d8/clwinnls_8c-source.html#l00230">IMPGetIMEWorker()</a>, and <a class="el" href="../../d7/d9/immime_8c-source.html#l00234">LoadImeDpi()</a>.
<p>
<pre class="fragment"><div>00880 {
00881     <a class="code" href="../../d4/d0/immcli_8h.html#a2">ImmAssert</a>(piiex != NULL &amp;&amp; pvSearchKey != NULL);
00882 
00883     <span class="keywordflow">switch</span> (SearchType) {
00884     <span class="keywordflow">case</span> <a class="code" href="../../d8/d0/immstruc_8h.html#a75a52">ImeInfoExKeyboardLayout</a>:
00885         piiex-&gt;<a class="code" href="../../d0/d8/structtagIMEINFOEX.html#o0">hkl</a> = *((HKL *)pvSearchKey);
00886         <span class="comment">/*</span>
00887 <span class="comment">         * Quick return for non-IME based keyboard layout</span>
00888 <span class="comment">         */</span>
00889         <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d5/conimep_8h.html#a49">IS_IME_KBDLAYOUT</a>(piiex-&gt;<a class="code" href="../../d0/d8/structtagIMEINFOEX.html#o0">hkl</a>))
00890             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00891         <span class="keywordflow">break</span>;
00892 
00893     <span class="keywordflow">case</span> <a class="code" href="../../d8/d0/immstruc_8h.html#a75a54">ImeInfoExImeFileName</a>:
00894         wcscpy(piiex-&gt;<a class="code" href="../../d0/d8/structtagIMEINFOEX.html#o9">wszImeFile</a>, (PWSTR)pvSearchKey);
00895         <span class="keywordflow">break</span>;
00896 
00897     <span class="keywordflow">default</span>:
00898         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00899     }
00900 
00901     <span class="keywordflow">return</span> <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a391">NtUserGetImeInfoEx</a>(piiex, SearchType);
00902 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a10" doxytag="w32/ntuser/imm/misc.c::ImmGetVirtualKey" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> UINT WINAPI ImmGetVirtualKey           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hWnd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00271">271</a> of file <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html">w32/ntuser/imm/misc.c</a>.
<p>
References <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00110">hWnd</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00201">ImmGetContext()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00371">ImmLockIMC()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00383">ImmUnlockIMC()</a>, and <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>.
<p>
<pre class="fragment"><div>00273 {
00274     HIMC          hImc;
00275     PINPUTCONTEXT pInputContext;
00276     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>          uVirtKey;
00277 
00278     hImc = <a class="code" href="../../d7/d6/w32_2ntuser_2imm_2context_8c.html#a5">ImmGetContext</a>(hWnd);
00279 
00280     pInputContext = <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a12">ImmLockIMC</a>(hImc);
00281     <span class="keywordflow">if</span> (!pInputContext) {
00282         RIPMSG1(RIP_WARNING, <span class="stringliteral">"ImmGetVirtualKey: lock IMC %x failure"</span>, hImc);
00283         <span class="keywordflow">return</span> (VK_PROCESSKEY);
00284     }
00285 
00286     <span class="keywordflow">if</span> (pInputContext-&gt;fChgMsg) {
00287         uVirtKey = pInputContext-&gt;uSavedVKey;
00288     } <span class="keywordflow">else</span> {
00289         uVirtKey = VK_PROCESSKEY;
00290     }
00291 
00292     <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a13">ImmUnlockIMC</a>(hImc);
00293     <span class="keywordflow">return</span> (uVirtKey);
00294 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a6" doxytag="w32/ntuser/imm/misc.c::ImmIsUIMessageA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL WINAPI ImmIsUIMessageA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hIMEWnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>message</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00076">76</a> of file <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html">w32/ntuser/imm/misc.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00115">ImmIsUIMessageWorker()</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
<pre class="fragment"><div>00081 {
00082     <span class="keywordflow">return</span> <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a8">ImmIsUIMessageWorker</a>(hIMEWnd, message, wParam, lParam, TRUE);
00083 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a7" doxytag="w32/ntuser/imm/misc.c::ImmIsUIMessageW" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL WINAPI ImmIsUIMessageW           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hIMEWnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>message</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00094">94</a> of file <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html">w32/ntuser/imm/misc.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, and <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00115">ImmIsUIMessageWorker()</a>.
<p>
<pre class="fragment"><div>00099 {
00100     <span class="keywordflow">return</span> <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a8">ImmIsUIMessageWorker</a>(hIMEWnd, message, wParam, lParam, FALSE);
00101 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a8" doxytag="w32/ntuser/imm/misc.c::ImmIsUIMessageWorker" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL ImmIsUIMessageWorker           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hIMEWnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>message</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fAnsi</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00115">115</a> of file <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html">w32/ntuser/imm/misc.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d3/d9/imemenu_8c-source.html#l00017">D</a>, <a class="el" href="../../d7/d5/memprint_8h-source.html#l00079">DbgPrint</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00277">IsWindow()</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00076">ImmIsUIMessageA()</a>, and <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00094">ImmIsUIMessageW()</a>.
<p>
<pre class="fragment"><div>00121 {
00122     <a class="code" href="../../d2/d0/imemenu_8c.html#a0">D</a>(<a class="code" href="../../d6/d6/memprint_8h.html#a7">DbgPrint</a>(<span class="stringliteral">"ImmIsUIMessageWorker(wnd[%08X], msg[%04X], wp[%08X], lp[%08X], Ansi[%d]\n"</span>,
00123       hIMEWnd, message, wParam, lParam, fAnsi));
00124 
00125     <span class="keywordflow">switch</span> (message) {
00126     <span class="keywordflow">case</span> WM_IME_STARTCOMPOSITION:
00127     <span class="keywordflow">case</span> WM_IME_ENDCOMPOSITION:
00128     <span class="keywordflow">case</span> WM_IME_COMPOSITION:
00129     <span class="keywordflow">case</span> WM_IME_SETCONTEXT:
00130     <span class="keywordflow">case</span> WM_IME_COMPOSITIONFULL:
00131     <span class="keywordflow">case</span> WM_IME_SELECT:
00132     <span class="keywordflow">case</span> WM_IME_NOTIFY:
00133     <span class="keywordflow">case</span> WM_IME_SYSTEM:
00134 
00135         <span class="keywordflow">if</span> (!hIMEWnd)
00136             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00137 
00138 <span class="preprocessor">#if DBG</span>
00139 <span class="preprocessor"></span>        <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d9/client_2wow_8c.html#a11">IsWindow</a>(hIMEWnd)) {
00140             RIPMSG1(RIP_WARNING,
00141                   <span class="stringliteral">"ImmIsUIMessage: Invalid window handle %x"</span>, hIMEWnd);
00142             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00143         }
00144 <span class="preprocessor">#endif</span>
00145 <span class="preprocessor"></span>
00146         <span class="keywordflow">if</span> (fAnsi) {
00147             SendMessageA(hIMEWnd, message, wParam, lParam);
00148         }
00149         <span class="keywordflow">else</span> {
00150             SendMessageW(hIMEWnd, message, wParam, lParam);
00151         }
00152 
00153         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00154 
00155     <span class="keywordflow">default</span>:
00156         <span class="keywordflow">break</span>;
00157     }
00158 
00159     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00160 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a22" doxytag="w32/ntuser/imm/misc.c::ImmLocalAlloc" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a5">LPVOID</a> ImmLocalAlloc           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>uFlag</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>uBytes</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00557">557</a> of file <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html">w32/ntuser/imm/misc.c</a>.
<p>
References <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">LPVOID</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d3/d5/ntuser_2imm_2globals_8c-source.html#l00028">pImmHeap</a>.
<p>
Referenced by <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l01259">BuildHimcList()</a>, <a class="el" href="../../d5/d0/layout_8c-source.html#l00516">CopyImeFile()</a>, <a class="el" href="../../d7/d6/regword_8c-source.html#l00749">EnumRegisterWordProcA()</a>, <a class="el" href="../../d7/d6/regword_8c-source.html#l00819">EnumRegisterWordProcW()</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00436">GetImeModeSaver()</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00492">GetImePrivateModeSaver()</a>, <a class="el" href="../../d7/d9/immime_8c-source.html#l00575">ImmConfigureIMEA()</a>, <a class="el" href="../../d7/d9/immime_8c-source.html#l00707">ImmConfigureIMEW()</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00026">ImmCreateContext()</a>, <a class="el" href="../../d7/d6/regword_8c-source.html#l00539">ImmEnumRegisterWordA()</a>, <a class="el" href="../../d7/d6/regword_8c-source.html#l00642">ImmEnumRegisterWordW()</a>, <a class="el" href="../../d7/d9/immime_8c-source.html#l00416">ImmFreeLayout()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00171">ImmGenerateMessage()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01841">ImmGetConversionListA()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01964">ImmGetConversionListW()</a>, <a class="el" href="../../d3/d9/imemenu_8c-source.html#l00759">ImmGetImeMenuItemsWorker()</a>, <a class="el" href="../../d7/d6/regword_8c-source.html#l00397">ImmGetRegisterWordStyleA()</a>, <a class="el" href="../../d7/d6/regword_8c-source.html#l00469">ImmGetRegisterWordStyleW()</a>, <a class="el" href="../../d7/d8/clwinnls_8c-source.html#l00250">ImmIMPQueryIMEW()</a>, <a class="el" href="../../d7/d8/clwinnls_8c-source.html#l00374">ImmIMPSetIMEW()</a>, <a class="el" href="../../d5/d0/layout_8c-source.html#l00407">ImmInstallIMEA()</a>, <a class="el" href="../../d5/d0/layout_8c-source.html#l00266">ImmInstallIMEW()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00689">ImmLockClientImc()</a>, <a class="el" href="../../d7/d9/immime_8c-source.html#l01128">ImmPenAuxInput()</a>, <a class="el" href="../../d5/d2/ntuser_2imm_2input_8c-source.html#l00408">ImmPostMessages()</a>, <a class="el" href="../../d5/d2/ntuser_2imm_2input_8c-source.html#l00030">ImmProcessKey()</a>, <a class="el" href="../../d3/d9/imemenu_8c-source.html#l00325">ImmPutImeMenuItemsIntoMappedFile()</a>, <a class="el" href="../../d7/d6/regword_8c-source.html#l00025">ImmRegisterWordA()</a>, <a class="el" href="../../d7/d6/regword_8c-source.html#l00116">ImmRegisterWordW()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l03349">ImmRequestMessageWorker()</a>, <a class="el" href="../../d5/d2/ntuser_2imm_2input_8c-source.html#l00196">ImmTranslateMessage()</a>, <a class="el" href="../../d7/d6/regword_8c-source.html#l00211">ImmUnregisterWordA()</a>, <a class="el" href="../../d7/d6/regword_8c-source.html#l00302">ImmUnregisterWordW()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l02339">InternalGetCompositionStringA()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l02619">InternalGetCompositionStringW()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l00388">InternalSCS_CHANGEATTR()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l00493">InternalSCS_CHANGECLAUSE()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l00559">InternalSCS_RECONVERTSTRING()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l00324">InternalSCS_SETSTR()</a>, <a class="el" href="../../d7/d9/immime_8c-source.html#l00234">LoadImeDpi()</a>, <a class="el" href="../../d4/d0/layime_8c-source.html#l00305">LoadVersionInfo()</a>, and <a class="el" href="../../d5/d7/jtranmsg_8c-source.html#l00582">WINNLSTranslateMessageJ()</a>.
<p>
<pre class="fragment"><div>00560 {
00561     <span class="keywordflow">if</span> (<a class="code" href="../../d2/d6/ntuser_2imm_2globals_8c.html#a3">pImmHeap</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00562         <a class="code" href="../../d2/d6/ntuser_2imm_2globals_8c.html#a3">pImmHeap</a> = RtlProcessHeap();
00563         <span class="keywordflow">if</span> (<a class="code" href="../../d2/d6/ntuser_2imm_2globals_8c.html#a3">pImmHeap</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00564             RIPMSG0(RIP_WARNING, <span class="stringliteral">"ImmLocalAlloc: NULL pImmHeap!"</span>);
00565             <span class="keywordflow">return</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00566         }
00567     }
00568 
00569     <span class="keywordflow">return</span> HeapAlloc(pImmHeap, uFlag, uBytes);
00570 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a28" doxytag="w32/ntuser/imm/misc.c::ImmLockClientImc" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d3/d0/structtagCLIENTIMC.html">PCLIENTIMC</a> WINAPI ImmLockClientImc           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HIMC&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hImc</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00689">689</a> of file <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html">w32/ntuser/imm/misc.c</a>.
<p>
References <a class="el" href="../../d0/d0/immuser_8h-source.html#l00025">tagCLIENTIMC::cLockObj</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02065">tagIMC::dwClientImcData</a>, <a class="el" href="../../d0/d0/immuser_8h-source.html#l00027">tagCLIENTIMC::dwImeCompatFlags</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00150">HMValidateHandle()</a>, <a class="el" href="../../d9/d9/immstruc_8h-source.html#l00041">IMCF_DEFAULTIMC</a>, <a class="el" href="../../d9/d9/immstruc_8h-source.html#l00039">IMCF_INDESTROY</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00557">ImmLocalAlloc()</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00137">ImmLocalFree</a>, <a class="el" href="../../d0/d0/immuser_8h-source.html#l00032">InitImcCrit</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l07799">NtUserGetThreadState()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l12654">NtUserUpdateInputContext()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d9/d9/immstruc_8h-source.html#l00025">NULL_HIMC</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00162">SetICF</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00166">TestICF</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00598">TestInputContextProcess()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00922">TYPE_INPUTCONTEXT</a>, and <a class="el" href="../../d8/d0/immstruc_8h.html#a73a46">UpdateClientInputContext</a>.
<p>
Referenced by <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00563">CreateInputContext()</a>, <a class="el" href="../../d7/d8/clwinnls_8c-source.html#l00484">ImmEnableIME()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00171">ImmGenerateMessage()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00912">ImmGetAppCompatFlags()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l00879">ImmGetCandidateListCountWorker()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01014">ImmGetCandidateListWorker()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01583">ImmGetCompositionFontA()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01643">ImmGetCompositionFontW()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l00036">ImmGetCompositionStringA()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l00099">ImmGetCompositionStringW()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01173">ImmGetGuideLineWorker()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00412">ImmGetIMCLockCount()</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00225">ImmGetSaveContext()</a>, <a class="el" href="../../d5/d2/ntuser_2imm_2input_8c-source.html#l00408">ImmPostMessages()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l03349">ImmRequestMessageWorker()</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00309">ImmSetActiveContext()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01694">ImmSetCompositionFontA()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01764">ImmSetCompositionFontW()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00383">ImmUnlockIMC()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00303">InternalImmLockIMC()</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00456">IsAnsiIMC()</a>, <a class="el" href="../../d3/d4/transsub_8c-source.html#l01328">MySetCompFont()</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00837">SelectInputContext()</a>, and <a class="el" href="../../d3/d4/transsub_8c-source.html#l01222">SetFontForMCWVERTICAL()</a>.
<p>
<pre class="fragment"><div>00691 {
00692     <a class="code" href="../../d1/d7/structtagIMC.html">PIMC</a>       pImc;
00693     <a class="code" href="../../d3/d0/structtagCLIENTIMC.html">PCLIENTIMC</a> pClientImc;
00694 
00695     <span class="keywordflow">if</span> (hImc == <a class="code" href="../../d8/d0/immstruc_8h.html#a0">NULL_HIMC</a>)
00696         <span class="keywordflow">return</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00697 
00698     pImc = <a class="code" href="../../d6/d9/rtl_2wow_8c.html#a6">HMValidateHandle</a>((HANDLE)hImc, TYPE_INPUTCONTEXT);
00699 
00700     <span class="comment">/*</span>
00701 <span class="comment">     * Cannot access input context from other process.</span>
00702 <span class="comment">     */</span>
00703     <span class="keywordflow">if</span> (pImc == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> || !<a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a24">TestInputContextProcess</a>(pImc))
00704         <span class="keywordflow">return</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00705 
00706     pClientImc = (<a class="code" href="../../d3/d0/structtagCLIENTIMC.html">PCLIENTIMC</a>)pImc-&gt;<a class="code" href="../../d1/d7/structtagIMC.html#o2">dwClientImcData</a>;
00707 
00708     <span class="keywordflow">if</span> (pClientImc == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00709         <span class="comment">/*</span>
00710 <span class="comment">         * We delay the creation of client side per-thread default Imc.</span>
00711 <span class="comment">         * Now, this is the time to create it.</span>
00712 <span class="comment">         */</span>
00713         pClientImc = <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a22">ImmLocalAlloc</a>(HEAP_ZERO_MEMORY, <span class="keyword">sizeof</span>(<a class="code" href="../../d3/d0/structtagCLIENTIMC.html">CLIENTIMC</a>));
00714         <span class="keywordflow">if</span> (pClientImc == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00715             <span class="keywordflow">return</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00716 
00717         <a class="code" href="../../d9/d0/immuser_8h.html#a0">InitImcCrit</a>(pClientImc);
00718         pClientImc-&gt;<a class="code" href="../../d3/d0/structtagCLIENTIMC.html#o3">dwImeCompatFlags</a> = (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a287">NtUserGetThreadState</a>(UserThreadStateImeCompatFlags);
00719 
00720         <span class="comment">/*</span>
00721 <span class="comment">         * Update the kernel side input context.</span>
00722 <span class="comment">         */</span>
00723         <span class="keywordflow">if</span> (!<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a388">NtUserUpdateInputContext</a>(hImc,
00724                 UpdateClientInputContext, (ULONG_PTR)pClientImc)) {
00725             <a class="code" href="../../d4/d0/immcli_8h.html#a8">ImmLocalFree</a>(pClientImc);
00726             <span class="keywordflow">return</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00727         }
00728 
00729         <span class="comment">/*</span>
00730 <span class="comment">         * Marks with default input context signature.</span>
00731 <span class="comment">         */</span>
00732         <a class="code" href="../../d4/d0/immcli_8h.html#a19">SetICF</a>(pClientImc, IMCF_DEFAULTIMC);
00733     }
00734     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d4/d0/immcli_8h.html#a21">TestICF</a>(pClientImc, IMCF_INDESTROY)) {
00735         <span class="comment">/*</span>
00736 <span class="comment">         * Cannot access destroyed input context.</span>
00737 <span class="comment">         */</span>
00738         <span class="keywordflow">return</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00739     }
00740 
00741     InterlockedIncrement(&amp;pClientImc-&gt;<a class="code" href="../../d3/d0/structtagCLIENTIMC.html#o1">cLockObj</a>);
00742 
00743     <span class="keywordflow">return</span> pClientImc;
00744 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a12" doxytag="w32/ntuser/imm/misc.c::ImmLockIMC" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> PINPUTCONTEXT WINAPI ImmLockIMC           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HIMC&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hImc</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00371">371</a> of file <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html">w32/ntuser/imm/misc.c</a>.
<p>
References <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00303">InternalImmLockIMC()</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d3/d0/fareast_8c-source.html#l00238">_InitializeImmEntryTable()</a>, <a class="el" href="../../d3/d1/hotkey_8c-source.html#l00245">CIMENonIMEToggle()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l00197">CompositionString()</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00563">CreateInputContext()</a>, <a class="el" href="../../d3/d1/hotkey_8c-source.html#l00365">CSymbolToggle()</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00718">DestroyInputContext()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00171">ImmGenerateMessage()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l00879">ImmGetCandidateListCountWorker()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01014">ImmGetCandidateListWorker()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l02240">ImmGetCandidateWindow()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01583">ImmGetCompositionFontA()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01643">ImmGetCompositionFontW()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l00036">ImmGetCompositionStringA()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l00099">ImmGetCompositionStringW()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l02160">ImmGetCompositionWindow()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01368">ImmGetConversionStatus()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01173">ImmGetGuideLineWorker()</a>, <a class="el" href="../../d3/d9/imemenu_8c-source.html#l00759">ImmGetImeMenuItemsWorker()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01494">ImmGetOpenStatus()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l02090">ImmGetStatusWindowPos()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00271">ImmGetVirtualKey()</a>, <a class="el" href="../../d5/d2/ntuser_2imm_2input_8c-source.html#l00030">ImmProcessKey()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l03586">ImmRequestMessageAorW()</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00309">ImmSetActiveContext()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l02266">ImmSetCandidateWindow()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01694">ImmSetCompositionFontA()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01764">ImmSetCompositionFontW()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l02185">ImmSetCompositionWindow()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01402">ImmSetConversionStatus()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01525">ImmSetOpenStatus()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l02115">ImmSetStatusWindowPos()</a>, <a class="el" href="../../d5/d2/ntuser_2imm_2input_8c-source.html#l00196">ImmTranslateMessage()</a>, <a class="el" href="../../d3/d1/hotkey_8c-source.html#l00155">JCloseOpen()</a>, <a class="el" href="../../d3/d1/hotkey_8c-source.html#l00464">KEnglishHangul()</a>, <a class="el" href="../../d3/d1/hotkey_8c-source.html#l00519">KHanjaConvert()</a>, <a class="el" href="../../d3/d1/hotkey_8c-source.html#l00492">KShapeToggle()</a>, <a class="el" href="../../d3/d4/transsub_8c-source.html#l01441">MySetCandidateWindow()</a>, <a class="el" href="../../d3/d4/transsub_8c-source.html#l01328">MySetCompFont()</a>, <a class="el" href="../../d3/d4/transsub_8c-source.html#l01396">MySetCompWindow()</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l01157">SendNotificationProc()</a>, <a class="el" href="../../d6/d7/sftkbdc1_8c-source.html#l00914">SKC1ButtonUp()</a>, <a class="el" href="../../d7/d7/sftkbdt1_8c-source.html#l01099">SKT1ButtonUp()</a>, <a class="el" href="../../d7/d7/sftkbdt1_8c-source.html#l01258">SKWndProcT1()</a>, <a class="el" href="../../d3/d4/transsub_8c-source.html#l00989">TransSetConversionFontEx()</a>, <a class="el" href="../../d3/d4/transsub_8c-source.html#l00450">TransSetConversionWindow()</a>, <a class="el" href="../../d3/d4/transsub_8c-source.html#l00331">TransSetOpenJ()</a>, <a class="el" href="../../d3/d1/hotkey_8c-source.html#l00415">TShapeToggle()</a>, and <a class="el" href="../../d5/d2/ntuser_2imm_2input_8c-source.html#l00478">WINNLSTranslateMessage()</a>.
<p>
<pre class="fragment"><div>00373 {
00374     <span class="keywordflow">return</span> <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a11">InternalImmLockIMC</a>(hImc, TRUE);
00375 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a17" doxytag="w32/ntuser/imm/misc.c::ImmLockIMCC" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a5">LPVOID</a> WINAPI ImmLockIMCC           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HIMCC&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hIMCC</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00471">471</a> of file <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html">w32/ntuser/imm/misc.c</a>.
<p>
References <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">LPVOID</a>, and <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>.
<p>
Referenced by <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l00197">CompositionString()</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00563">CreateInputContext()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00171">ImmGenerateMessage()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l00879">ImmGetCandidateListCountWorker()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01014">ImmGetCandidateListWorker()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l00036">ImmGetCompositionStringA()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l00099">ImmGetCompositionStringW()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01173">ImmGetGuideLineWorker()</a>, <a class="el" href="../../d5/d2/ntuser_2imm_2input_8c-source.html#l00196">ImmTranslateMessage()</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00837">SelectInputContext()</a>, and <a class="el" href="../../d5/d2/ntuser_2imm_2input_8c-source.html#l00478">WINNLSTranslateMessage()</a>.
<p>
<pre class="fragment"><div>00473 {
00474     <span class="keywordflow">if</span> (hIMCC == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00475         <span class="keywordflow">return</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00476     }
00477 
00478     <span class="keywordflow">return</span> LocalLock(hIMCC);
00479 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a31" doxytag="w32/ntuser/imm/misc.c::ImmLockImeDpi" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d2/d7/structtagIMEDPI.html">PIMEDPI</a> WINAPI ImmLockImeDpi           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HKL&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hKL</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00793">793</a> of file <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html">w32/ntuser/imm/misc.c</a>.
<p>
References <a class="el" href="../../d0/d0/immuser_8h-source.html#l00073">tagIMEDPI::cLock</a>, <a class="el" href="../../d0/d0/immuser_8h-source.html#l00074">tagIMEDPI::dwFlag</a>, <a class="el" href="../../d3/d5/ntuser_2imm_2globals_8c-source.html#l00034">gcsImeDpi</a>, <a class="el" href="../../d3/d5/ntuser_2imm_2globals_8c-source.html#l00033">gpImeDpi</a>, <a class="el" href="../../d0/d0/immuser_8h-source.html#l00069">tagIMEDPI::hKL</a>, <a class="el" href="../../d0/d0/immuser_8h-source.html#l00063">IMEDPI_UNLOADED</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d0/d0/immuser_8h-source.html#l00067">tagIMEDPI::pNext</a>.
<p>
Referenced by <a class="el" href="../../d3/d0/fareast_8c-source.html#l00238">_InitializeImmEntryTable()</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00563">CreateInputContext()</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00718">DestroyInputContext()</a>, <a class="el" href="../../d7/d9/immime_8c-source.html#l00327">FindOrLoadImeDpi()</a>, <a class="el" href="../../d3/d1/hotkey_8c-source.html#l00087">HotKeyIDDispatcher()</a>, <a class="el" href="../../d7/d9/immime_8c-source.html#l00495">ImmActivateLayout()</a>, <a class="el" href="../../d2/d4/ntuser_2imm_2conime_8c-source.html#l00034">ImmCallImeConsoleIME()</a>, <a class="el" href="../../d7/d8/softkbd_8c-source.html#l00137">ImmCreateSoftKeyboard()</a>, <a class="el" href="../../d3/d9/imemenu_8c-source.html#l00759">ImmGetImeMenuItemsWorker()</a>, <a class="el" href="../../d7/d9/immime_8c-source.html#l01294">ImmNotifyIME()</a>, <a class="el" href="../../d5/d2/ntuser_2imm_2input_8c-source.html#l00030">ImmProcessKey()</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00309">ImmSetActiveContext()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l00610">ImmSetCompositionStringWorker()</a>, <a class="el" href="../../d5/d2/ntuser_2imm_2input_8c-source.html#l00196">ImmTranslateMessage()</a>, <a class="el" href="../../d3/d1/hotkey_8c-source.html#l00155">JCloseOpen()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l03158">MakeIMENotify()</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00837">SelectInputContext()</a>, and <a class="el" href="../../d3/d4/transsub_8c-source.html#l01042">TransHanjaMode()</a>.
<p>
<pre class="fragment"><div>00795 {
00796     <a class="code" href="../../d2/d7/structtagIMEDPI.html">PIMEDPI</a> pImeDpi;
00797 
00798     RtlEnterCriticalSection(&amp;gcsImeDpi);
00799 
00800     pImeDpi = <a class="code" href="../../d2/d6/ntuser_2imm_2globals_8c.html#a7">gpImeDpi</a>;
00801 
00802     <span class="keywordflow">while</span> (pImeDpi != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> &amp;&amp; pImeDpi-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o2">hKL</a> != hKL)
00803         pImeDpi = pImeDpi-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o0">pNext</a>;
00804 
00805     <span class="keywordflow">if</span> (pImeDpi != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00806         <span class="keywordflow">if</span> (pImeDpi-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o7">dwFlag</a> &amp; <a class="code" href="../../d9/d0/immuser_8h.html#a4">IMEDPI_UNLOADED</a>)
00807             pImeDpi = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00808         <span class="keywordflow">else</span>
00809             pImeDpi-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o6">cLock</a>++;
00810     }
00811 
00812     RtlLeaveCriticalSection(&amp;gcsImeDpi);
00813 
00814     <span class="keywordflow">return</span> (<a class="code" href="../../d2/d7/structtagIMEDPI.html">PIMEDPI</a>)pImeDpi;
00815 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a35" doxytag="w32/ntuser/imm/misc.c::ImmPtInRect" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL ImmPtInRect           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname" nowrap> <em>left</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>top</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>width</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>height</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPPOINT&nbsp;</td>
          <td class="mdname" nowrap> <em>lppt</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00933">933</a> of file <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html">w32/ntuser/imm/misc.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>.
<p>
Referenced by <a class="el" href="../../d6/d7/sftkbdc1_8c-source.html#l00679">SKC1MousePosition()</a>, and <a class="el" href="../../d7/d7/sftkbdt1_8c-source.html#l00803">SKT1MousePosition()</a>.
<p>
<pre class="fragment"><div>00939 {
00940     <span class="keywordflow">return</span> (lppt-&gt;x &gt;= left &amp;&amp; lppt-&gt;x &lt; (left + width) &amp;&amp;
00941             lppt-&gt;y &gt;= top  &amp;&amp; lppt-&gt;y &lt; (top + height));
00942 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a20" doxytag="w32/ntuser/imm/misc.c::ImmReSizeIMCC" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HIMCC WINAPI ImmReSizeIMCC           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HIMCC&nbsp;</td>
          <td class="mdname" nowrap> <em>hIMCC</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwSize</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00522">522</a> of file <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html">w32/ntuser/imm/misc.c</a>.
<p>
References <a class="el" href="../../d9/d5/ntuser_2client_2globals_8h-source.html#l00090">LHND</a>, and <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>.
<p>
Referenced by <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00837">SelectInputContext()</a>.
<p>
<pre class="fragment"><div>00525 {
00526     <span class="keywordflow">if</span> (hIMCC == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00527         <span class="keywordflow">return</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00528     }
00529 
00530     <span class="keywordflow">return</span> (HIMCC)LocalReAlloc(hIMCC, dwSize, LHND);
00531 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a36" doxytag="w32/ntuser/imm/misc.c::ImmSystemHandler" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LRESULT ImmSystemHandler           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HIMC&nbsp;</td>
          <td class="mdname" nowrap> <em>hImc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00955">955</a> of file <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html">w32/ntuser/imm/misc.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d9/immime_8c-source.html#l01294">ImmNotifyIME()</a>, and <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l01191">ImmSendNotification()</a>.
<p>
Referenced by <a class="el" href="../../d3/d0/fareast_8c-source.html#l00238">_InitializeImmEntryTable()</a>.
<p>
<pre class="fragment"><div>00959 {
00960     LRESULT lRet = 0;
00961 
00962     <span class="keywordflow">switch</span> (wParam) {
00963     <span class="keywordflow">case</span> IMS_SENDNOTIFICATION:
00964         <a class="code" href="../../d4/d0/immcli_8h.html#a86">ImmSendNotification</a>((BOOL)lParam);
00965         <span class="keywordflow">break</span>;
00966     <span class="keywordflow">case</span> IMS_FINALIZE_COMPSTR:
00967         <a class="code" href="../../d6/d0/immime_8c.html#a22">ImmNotifyIME</a>(hImc, NI_COMPOSITIONSTR, CPS_COMPLETE, 0);
00968         <span class="keywordflow">break</span>;
00969     }
00970 
00971     <span class="keywordflow">return</span> lRet;
00972 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a29" doxytag="w32/ntuser/imm/misc.c::ImmUnlockClientImc" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID WINAPI ImmUnlockClientImc           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d0/structtagCLIENTIMC.html">PCLIENTIMC</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pClientImc</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00747">747</a> of file <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html">w32/ntuser/imm/misc.c</a>.
<p>
References <a class="el" href="../../d0/d0/immuser_8h-source.html#l00025">tagCLIENTIMC::cLockObj</a>, <a class="el" href="../../d0/d0/immuser_8h-source.html#l00033">DeleteImcCrit</a>, <a class="el" href="../../d0/d0/immuser_8h-source.html#l00024">tagCLIENTIMC::hInputContext</a>, <a class="el" href="../../d9/d9/immstruc_8h-source.html#l00039">IMCF_INDESTROY</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00137">ImmLocalFree</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00166">TestICF</a>, and <a class="el" href="../../d2/d7/hal_8h.html#a212">VOID()</a>.
<p>
Referenced by <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00563">CreateInputContext()</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00718">DestroyInputContext()</a>, <a class="el" href="../../d7/d8/clwinnls_8c-source.html#l00484">ImmEnableIME()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00171">ImmGenerateMessage()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00912">ImmGetAppCompatFlags()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l00879">ImmGetCandidateListCountWorker()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01014">ImmGetCandidateListWorker()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01583">ImmGetCompositionFontA()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01643">ImmGetCompositionFontW()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l00036">ImmGetCompositionStringA()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l00099">ImmGetCompositionStringW()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01173">ImmGetGuideLineWorker()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00412">ImmGetIMCLockCount()</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00225">ImmGetSaveContext()</a>, <a class="el" href="../../d5/d2/ntuser_2imm_2input_8c-source.html#l00408">ImmPostMessages()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l03349">ImmRequestMessageWorker()</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00309">ImmSetActiveContext()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01694">ImmSetCompositionFontA()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01764">ImmSetCompositionFontW()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00383">ImmUnlockIMC()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00303">InternalImmLockIMC()</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00456">IsAnsiIMC()</a>, <a class="el" href="../../d3/d4/transsub_8c-source.html#l01328">MySetCompFont()</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00837">SelectInputContext()</a>, and <a class="el" href="../../d3/d4/transsub_8c-source.html#l01222">SetFontForMCWVERTICAL()</a>.
<p>
<pre class="fragment"><div>00749 {
00750     <span class="keywordflow">if</span> (InterlockedDecrement(&amp;pClientImc-&gt;<a class="code" href="../../d3/d0/structtagCLIENTIMC.html#o1">cLockObj</a>) == 0) {
00751         <span class="keywordflow">if</span> (<a class="code" href="../../d4/d0/immcli_8h.html#a21">TestICF</a>(pClientImc, IMCF_INDESTROY)) {
00752             <span class="keywordflow">if</span> (pClientImc-&gt;<a class="code" href="../../d3/d0/structtagCLIENTIMC.html#o0">hInputContext</a> != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00753                 LocalFree(pClientImc-&gt;<a class="code" href="../../d3/d0/structtagCLIENTIMC.html#o0">hInputContext</a>);
00754 
00755             <a class="code" href="../../d9/d0/immuser_8h.html#a1">DeleteImcCrit</a>(pClientImc);
00756             <a class="code" href="../../d4/d0/immcli_8h.html#a8">ImmLocalFree</a>(pClientImc);
00757         }
00758     }
00759 
00760     <span class="keywordflow">return</span>;
00761 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a13" doxytag="w32/ntuser/imm/misc.c::ImmUnlockIMC" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL WINAPI ImmUnlockIMC           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HIMC&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hImc</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00383">383</a> of file <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html">w32/ntuser/imm/misc.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d0/d0/immuser_8h-source.html#l00025">tagCLIENTIMC::cLockObj</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d0/d0/immuser_8h-source.html#l00024">tagCLIENTIMC::hInputContext</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00689">ImmLockClientImc()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00747">ImmUnlockClientImc()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d3/d0/fareast_8c-source.html#l00238">_InitializeImmEntryTable()</a>, <a class="el" href="../../d3/d1/hotkey_8c-source.html#l00245">CIMENonIMEToggle()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l00197">CompositionString()</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00563">CreateInputContext()</a>, <a class="el" href="../../d3/d1/hotkey_8c-source.html#l00365">CSymbolToggle()</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00718">DestroyInputContext()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00171">ImmGenerateMessage()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l00879">ImmGetCandidateListCountWorker()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01014">ImmGetCandidateListWorker()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l02240">ImmGetCandidateWindow()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01583">ImmGetCompositionFontA()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01643">ImmGetCompositionFontW()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l00036">ImmGetCompositionStringA()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l00099">ImmGetCompositionStringW()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l02160">ImmGetCompositionWindow()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01368">ImmGetConversionStatus()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01173">ImmGetGuideLineWorker()</a>, <a class="el" href="../../d3/d9/imemenu_8c-source.html#l00759">ImmGetImeMenuItemsWorker()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01494">ImmGetOpenStatus()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l02090">ImmGetStatusWindowPos()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00271">ImmGetVirtualKey()</a>, <a class="el" href="../../d5/d2/ntuser_2imm_2input_8c-source.html#l00030">ImmProcessKey()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l03586">ImmRequestMessageAorW()</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00309">ImmSetActiveContext()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l02266">ImmSetCandidateWindow()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01694">ImmSetCompositionFontA()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01764">ImmSetCompositionFontW()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l00610">ImmSetCompositionStringWorker()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l02185">ImmSetCompositionWindow()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01402">ImmSetConversionStatus()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01525">ImmSetOpenStatus()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l02115">ImmSetStatusWindowPos()</a>, <a class="el" href="../../d5/d2/ntuser_2imm_2input_8c-source.html#l00196">ImmTranslateMessage()</a>, <a class="el" href="../../d3/d1/hotkey_8c-source.html#l00155">JCloseOpen()</a>, <a class="el" href="../../d3/d1/hotkey_8c-source.html#l00464">KEnglishHangul()</a>, <a class="el" href="../../d3/d1/hotkey_8c-source.html#l00519">KHanjaConvert()</a>, <a class="el" href="../../d3/d1/hotkey_8c-source.html#l00492">KShapeToggle()</a>, <a class="el" href="../../d3/d4/transsub_8c-source.html#l01441">MySetCandidateWindow()</a>, <a class="el" href="../../d3/d4/transsub_8c-source.html#l01328">MySetCompFont()</a>, <a class="el" href="../../d3/d4/transsub_8c-source.html#l01396">MySetCompWindow()</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00837">SelectInputContext()</a>, <a class="el" href="../../d6/d7/sftkbdc1_8c-source.html#l00914">SKC1ButtonUp()</a>, <a class="el" href="../../d7/d7/sftkbdt1_8c-source.html#l01099">SKT1ButtonUp()</a>, <a class="el" href="../../d7/d7/sftkbdt1_8c-source.html#l01258">SKWndProcT1()</a>, <a class="el" href="../../d3/d4/transsub_8c-source.html#l00989">TransSetConversionFontEx()</a>, <a class="el" href="../../d3/d4/transsub_8c-source.html#l00450">TransSetConversionWindow()</a>, <a class="el" href="../../d3/d4/transsub_8c-source.html#l00331">TransSetOpenJ()</a>, <a class="el" href="../../d3/d1/hotkey_8c-source.html#l00415">TShapeToggle()</a>, and <a class="el" href="../../d5/d2/ntuser_2imm_2input_8c-source.html#l00478">WINNLSTranslateMessage()</a>.
<p>
<pre class="fragment"><div>00385 {
00386     <a class="code" href="../../d3/d0/structtagCLIENTIMC.html">PCLIENTIMC</a> pClientImc;
00387 
00388     <span class="keywordflow">if</span> ((pClientImc = <a class="code" href="../../d9/d0/immuser_8h.html#a43">ImmLockClientImc</a>(hImc)) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00389         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00390 
00391     <span class="keywordflow">if</span> (pClientImc-&gt;<a class="code" href="../../d3/d0/structtagCLIENTIMC.html#o0">hInputContext</a> != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00392         LocalUnlock(pClientImc-&gt;<a class="code" href="../../d3/d0/structtagCLIENTIMC.html#o0">hInputContext</a>);
00393 
00394     <span class="comment">/*</span>
00395 <span class="comment">     * Decrement lock count so that the ImmUnlockClientImc() can</span>
00396 <span class="comment">     * free up the pClientImc-&gt;hInputContext if required.</span>
00397 <span class="comment">     */</span>
00398     InterlockedDecrement(&amp;pClientImc-&gt;<a class="code" href="../../d3/d0/structtagCLIENTIMC.html#o1">cLockObj</a>);
00399 
00400     <a class="code" href="../../d9/d0/immuser_8h.html#a44">ImmUnlockClientImc</a>(pClientImc);
00401 
00402     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00403 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a18" doxytag="w32/ntuser/imm/misc.c::ImmUnlockIMCC" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL WINAPI ImmUnlockIMCC           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HIMCC&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hIMCC</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00488">488</a> of file <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html">w32/ntuser/imm/misc.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, and <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>.
<p>
Referenced by <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l00197">CompositionString()</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00563">CreateInputContext()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00171">ImmGenerateMessage()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l00879">ImmGetCandidateListCountWorker()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01014">ImmGetCandidateListWorker()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l00036">ImmGetCompositionStringA()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l00099">ImmGetCompositionStringW()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01173">ImmGetGuideLineWorker()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l00610">ImmSetCompositionStringWorker()</a>, <a class="el" href="../../d5/d2/ntuser_2imm_2input_8c-source.html#l00196">ImmTranslateMessage()</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00837">SelectInputContext()</a>, and <a class="el" href="../../d5/d2/ntuser_2imm_2input_8c-source.html#l00478">WINNLSTranslateMessage()</a>.
<p>
<pre class="fragment"><div>00490 {
00491     <span class="keywordflow">if</span> (hIMCC == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00492         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00493     }
00494 
00495     <span class="keywordflow">return</span> LocalUnlock(hIMCC);
00496 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a32" doxytag="w32/ntuser/imm/misc.c::ImmUnlockImeDpi" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID WINAPI ImmUnlockImeDpi           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d2/d7/structtagIMEDPI.html">PIMEDPI</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pImeDpi</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00824">824</a> of file <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html">w32/ntuser/imm/misc.c</a>.
<p>
References <a class="el" href="../../d0/d0/immuser_8h-source.html#l00073">tagIMEDPI::cLock</a>, <a class="el" href="../../d0/d0/immuser_8h-source.html#l00074">tagIMEDPI::dwFlag</a>, <a class="el" href="../../d3/d5/ntuser_2imm_2globals_8c-source.html#l00034">gcsImeDpi</a>, <a class="el" href="../../d3/d5/ntuser_2imm_2globals_8c-source.html#l00033">gpImeDpi</a>, <a class="el" href="../../d0/d0/immuser_8h-source.html#l00063">IMEDPI_UNLOADED</a>, <a class="el" href="../../d0/d0/immuser_8h-source.html#l00064">IMEDPI_UNLOCKUNLOAD</a>, <a class="el" href="../../d0/d0/immuser_8h-source.html#l00070">tagIMEDPI::ImeInfo</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00137">ImmLocalFree</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d0/d0/immuser_8h-source.html#l00067">tagIMEDPI::pNext</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d7/d9/immime_8c-source.html#l00212">UnloadIME()</a>, and <a class="el" href="../../d2/d7/hal_8h.html#a212">VOID()</a>.
<p>
Referenced by <a class="el" href="../../d3/d0/fareast_8c-source.html#l00238">_InitializeImmEntryTable()</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00563">CreateInputContext()</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00718">DestroyInputContext()</a>, <a class="el" href="../../d3/d1/hotkey_8c-source.html#l00087">HotKeyIDDispatcher()</a>, <a class="el" href="../../d7/d9/immime_8c-source.html#l00495">ImmActivateLayout()</a>, <a class="el" href="../../d7/d9/immime_8c-source.html#l00575">ImmConfigureIMEA()</a>, <a class="el" href="../../d7/d9/immime_8c-source.html#l00707">ImmConfigureIMEW()</a>, <a class="el" href="../../d7/d8/softkbd_8c-source.html#l00137">ImmCreateSoftKeyboard()</a>, <a class="el" href="../../d7/d6/regword_8c-source.html#l00539">ImmEnumRegisterWordA()</a>, <a class="el" href="../../d7/d6/regword_8c-source.html#l00642">ImmEnumRegisterWordW()</a>, <a class="el" href="../../d7/d9/immime_8c-source.html#l00849">ImmEscapeA()</a>, <a class="el" href="../../d7/d9/immime_8c-source.html#l00999">ImmEscapeW()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01841">ImmGetConversionListA()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01964">ImmGetConversionListW()</a>, <a class="el" href="../../d3/d9/imemenu_8c-source.html#l00759">ImmGetImeMenuItemsWorker()</a>, <a class="el" href="../../d5/d0/layout_8c-source.html#l00202">ImmGetProperty()</a>, <a class="el" href="../../d7/d6/regword_8c-source.html#l00397">ImmGetRegisterWordStyleA()</a>, <a class="el" href="../../d7/d6/regword_8c-source.html#l00469">ImmGetRegisterWordStyleW()</a>, <a class="el" href="../../d7/d9/immime_8c-source.html#l01294">ImmNotifyIME()</a>, <a class="el" href="../../d7/d9/immime_8c-source.html#l01128">ImmPenAuxInput()</a>, <a class="el" href="../../d5/d2/ntuser_2imm_2input_8c-source.html#l00030">ImmProcessKey()</a>, <a class="el" href="../../d7/d6/regword_8c-source.html#l00025">ImmRegisterWordA()</a>, <a class="el" href="../../d7/d6/regword_8c-source.html#l00116">ImmRegisterWordW()</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00309">ImmSetActiveContext()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l00610">ImmSetCompositionStringWorker()</a>, <a class="el" href="../../d5/d2/ntuser_2imm_2input_8c-source.html#l00196">ImmTranslateMessage()</a>, <a class="el" href="../../d7/d6/regword_8c-source.html#l00211">ImmUnregisterWordA()</a>, <a class="el" href="../../d7/d6/regword_8c-source.html#l00302">ImmUnregisterWordW()</a>, <a class="el" href="../../d3/d1/hotkey_8c-source.html#l00155">JCloseOpen()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l03158">MakeIMENotify()</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00837">SelectInputContext()</a>, and <a class="el" href="../../d3/d4/transsub_8c-source.html#l01042">TransHanjaMode()</a>.
<p>
<pre class="fragment"><div>00826 {
00827     <a class="code" href="../../d2/d7/structtagIMEDPI.html">PIMEDPI</a> pImeDpiT;
00828 
00829     <span class="keywordflow">if</span> (pImeDpi == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00830         <span class="keywordflow">return</span>;
00831 
00832     RtlEnterCriticalSection(&amp;gcsImeDpi);
00833 
00834     <span class="keywordflow">if</span> (--pImeDpi-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o6">cLock</a> == 0) {
00835 
00836         <span class="keywordflow">if</span> ((pImeDpi-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o7">dwFlag</a> &amp; <a class="code" href="../../d9/d0/immuser_8h.html#a4">IMEDPI_UNLOADED</a>) ||
00837             ((pImeDpi-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o7">dwFlag</a> &amp; <a class="code" href="../../d9/d0/immuser_8h.html#a5">IMEDPI_UNLOCKUNLOAD</a>) &amp;&amp;
00838              (pImeDpi-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o3">ImeInfo</a>.fdwProperty &amp; IME_PROP_END_UNLOAD)))
00839         {
00840             <span class="comment">/*</span>
00841 <span class="comment">             * Unlink it.</span>
00842 <span class="comment">             */</span>
00843             <span class="keywordflow">if</span> (<a class="code" href="../../d2/d6/ntuser_2imm_2globals_8c.html#a7">gpImeDpi</a> == pImeDpi) {
00844                 <a class="code" href="../../d2/d6/ntuser_2imm_2globals_8c.html#a7">gpImeDpi</a> = pImeDpi-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o0">pNext</a>;
00845             }
00846             <span class="keywordflow">else</span> {
00847                 pImeDpiT = <a class="code" href="../../d2/d6/ntuser_2imm_2globals_8c.html#a7">gpImeDpi</a>;
00848 
00849                 <span class="keywordflow">while</span> (pImeDpiT != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> &amp;&amp; pImeDpiT-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o0">pNext</a> != pImeDpi)
00850                     pImeDpiT = pImeDpiT-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o0">pNext</a>;
00851 
00852                 <span class="keywordflow">if</span> (pImeDpiT != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00853                     pImeDpiT-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o0">pNext</a> = pImeDpi-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o0">pNext</a>;
00854             }
00855 
00856             <span class="comment">/*</span>
00857 <span class="comment">             * Unload the IME DLL.</span>
00858 <span class="comment">             */</span>
00859             <a class="code" href="../../d6/d0/immime_8c.html#a9">UnloadIME</a>(pImeDpi, TRUE);
00860             <a class="code" href="../../d4/d0/immcli_8h.html#a8">ImmLocalFree</a>(pImeDpi);
00861         }
00862     }
00863 
00864     RtlLeaveCriticalSection(&amp;gcsImeDpi);
00865 
00866     <span class="keywordflow">return</span>;
00867 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a11" doxytag="w32/ntuser/imm/misc.c::InternalImmLockIMC" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> PINPUTCONTEXT WINAPI InternalImmLockIMC           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HIMC&nbsp;</td>
          <td class="mdname" nowrap> <em>hImc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fCanCallImeSelect</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00303">303</a> of file <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html">w32/ntuser/imm/misc.c</a>.
<p>
References <a class="el" href="../../d0/d0/immuser_8h-source.html#l00025">tagCLIENTIMC::cLockObj</a>, <a class="el" href="../../d4/d1/userk_8h.html#a2030">CreateInputContext()</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d0/d0/immuser_8h-source.html#l00034">EnterImcCrit</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l04502">GetKeyboardLayout()</a>, <a class="el" href="../../d0/d0/immuser_8h-source.html#l00024">tagCLIENTIMC::hInputContext</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00689">ImmLockClientImc()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00747">ImmUnlockClientImc()</a>, <a class="el" href="../../d8/d0/immstruc_8h.html#a74a50">InputContextDefaultImeWindow</a>, <a class="el" href="../../d8/d0/immstruc_8h.html#a74a49">InputContextThread</a>, <a class="el" href="../../d0/d0/immuser_8h-source.html#l00035">LeaveImcCrit</a>, <a class="el" href="../../d9/d5/ntuser_2client_2globals_8h-source.html#l00090">LHND</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l12674">NtUserQueryInputContext()</a>, and <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>.
<p>
Referenced by <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00371">ImmLockIMC()</a>, and <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00837">SelectInputContext()</a>.
<p>
<pre class="fragment"><div>00306 {
00307     <a class="code" href="../../d3/d0/structtagCLIENTIMC.html">PCLIENTIMC</a>    pClientImc;
00308     PINPUTCONTEXT pInputContext;
00309     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>         dwImcThreadId;
00310 
00311     <span class="keywordflow">if</span> ((pClientImc = <a class="code" href="../../d9/d0/immuser_8h.html#a43">ImmLockClientImc</a>(hImc)) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00312         <span class="keywordflow">return</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00313 
00314     <a class="code" href="../../d9/d0/immuser_8h.html#a2">EnterImcCrit</a>(pClientImc);
00315 
00316     <span class="keywordflow">if</span> (pClientImc-&gt;<a class="code" href="../../d3/d0/structtagCLIENTIMC.html#o0">hInputContext</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00317         <span class="comment">/*</span>
00318 <span class="comment">         * If the owner thread of this hImc does not have</span>
00319 <span class="comment">         * default IME window, don't bother to create the</span>
00320 <span class="comment">         * INPUTCONTEXT. It could happen when some other</span>
00321 <span class="comment">         * thread which call ImmGetContext() to retrieve</span>
00322 <span class="comment">         * the associate hImc before the default IME window</span>
00323 <span class="comment">         * is created.</span>
00324 <span class="comment">         */</span>
00325         <span class="keywordflow">if</span> ((HWND)<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a389">NtUserQueryInputContext</a>(hImc,
00326                 InputContextDefaultImeWindow) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00327             <a class="code" href="../../d9/d0/immuser_8h.html#a3">LeaveImcCrit</a>(pClientImc);
00328             <a class="code" href="../../d9/d0/immuser_8h.html#a44">ImmUnlockClientImc</a>(pClientImc);
00329             <span class="keywordflow">return</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00330         }
00331 
00332         <span class="comment">/*</span>
00333 <span class="comment">         * This is a delay creation of INPUTCONTEXT structure. Create</span>
00334 <span class="comment">         * it now for this hImc.</span>
00335 <span class="comment">         */</span>
00336         pClientImc-&gt;<a class="code" href="../../d3/d0/structtagCLIENTIMC.html#o0">hInputContext</a> = LocalAlloc(LHND, <span class="keyword">sizeof</span>(INPUTCONTEXT));
00337 
00338         <span class="keywordflow">if</span> (pClientImc-&gt;<a class="code" href="../../d3/d0/structtagCLIENTIMC.html#o0">hInputContext</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00339             <a class="code" href="../../d9/d0/immuser_8h.html#a3">LeaveImcCrit</a>(pClientImc);
00340             <a class="code" href="../../d9/d0/immuser_8h.html#a44">ImmUnlockClientImc</a>(pClientImc);
00341             <span class="keywordflow">return</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00342         }
00343 
00344         dwImcThreadId = (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a389">NtUserQueryInputContext</a>(hImc, InputContextThread);
00345 
00346         <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d1/userk_8h.html#a2030">CreateInputContext</a>(hImc, <a class="code" href="../../d3/d8/client_8c.html#a154">GetKeyboardLayout</a>(dwImcThreadId), fCanCallImeSelect)) {
00347             RIPMSG0(RIP_WARNING, <span class="stringliteral">"ImmLockIMC: CreateInputContext failed"</span>);
00348             LocalFree(pClientImc-&gt;<a class="code" href="../../d3/d0/structtagCLIENTIMC.html#o0">hInputContext</a>);
00349             pClientImc-&gt;<a class="code" href="../../d3/d0/structtagCLIENTIMC.html#o0">hInputContext</a> = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00350             <a class="code" href="../../d9/d0/immuser_8h.html#a3">LeaveImcCrit</a>(pClientImc);
00351             <a class="code" href="../../d9/d0/immuser_8h.html#a44">ImmUnlockClientImc</a>(pClientImc);
00352             <span class="keywordflow">return</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00353         }
00354     }
00355 
00356     <a class="code" href="../../d9/d0/immuser_8h.html#a3">LeaveImcCrit</a>(pClientImc);
00357 
00358     pInputContext = (PINPUTCONTEXT)LocalLock(pClientImc-&gt;<a class="code" href="../../d3/d0/structtagCLIENTIMC.html#o0">hInputContext</a>);
00359 
00360     <span class="comment">/*</span>
00361 <span class="comment">     * Increment lock count so that the ImmUnlockClientImc() won't</span>
00362 <span class="comment">     * free up the pClientImc-&gt;hInputContext.</span>
00363 <span class="comment">     */</span>
00364     InterlockedIncrement(&amp;pClientImc-&gt;<a class="code" href="../../d3/d0/structtagCLIENTIMC.html#o1">cLockObj</a>);
00365 
00366     <a class="code" href="../../d9/d0/immuser_8h.html#a44">ImmUnlockClientImc</a>(pClientImc);
00367 
00368     <span class="keywordflow">return</span> pInputContext;
00369 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a23" doxytag="w32/ntuser/imm/misc.c::PtiCurrent" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d2/d8/structtagTHREADINFO.html">PTHREADINFO</a> PtiCurrent           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">VOID&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00585">585</a> of file <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html">w32/ntuser/imm/misc.c</a>.
<p>
References <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l03173">ConnectIfNecessary</a>.
<p>
<pre class="fragment"><div>00586 {
00587     <a class="code" href="../../d1/d0/inc_2user_8h.html#a848">ConnectIfNecessary</a>();
00588     <span class="keywordflow">return</span> (<a class="code" href="../../d2/d8/structtagTHREADINFO.html">PTHREADINFO</a>)NtCurrentTebShared()-&gt;Win32ThreadInfo;
00589 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a24" doxytag="w32/ntuser/imm/misc.c::TestInputContextProcess" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL TestInputContextProcess           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/d7/structtagIMC.html">PIMC</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pImc</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00598">598</a> of file <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html">w32/ntuser/imm/misc.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00149">GetInputContextProcess</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00154">GETPROCESSID</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01547">GETPTI</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00058">PtiCurrent</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01512">PtoH</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00689">ImmLockClientImc()</a>.
<p>
<pre class="fragment"><div>00600 {
00601     <span class="comment">/*</span>
00602 <span class="comment">     * If the threads are the same, don't bother going to the kernel</span>
00603 <span class="comment">     * to get the input context's process id.</span>
00604 <span class="comment">     */</span>
00605     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a455">GETPTI</a>(pImc) == <a class="code" href="../../d4/d1/userk_8h.html#a9">PtiCurrent</a>()) {
00606         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00607     }
00608 
00609     <span class="keywordflow">return</span> (<a class="code" href="../../d4/d0/immcli_8h.html#a14">GetInputContextProcess</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a448">PtoH</a>(pImc)) == <a class="code" href="../../d6/d0/usercli_8h.html#a13">GETPROCESSID</a>());
00610 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a25" doxytag="w32/ntuser/imm/misc.c::TestWindowProcess" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL TestWindowProcess           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pwnd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00619">619</a> of file <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html">w32/ntuser/imm/misc.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00154">GETPROCESSID</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01547">GETPTI</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00153">GetWindowProcess</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01514">HW</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00058">PtiCurrent</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
<pre class="fragment"><div>00621 {
00622     <span class="comment">/*</span>
00623 <span class="comment">     * If the threads are the same, don't bother going to the kernel</span>
00624 <span class="comment">     * to get the window's process id.</span>
00625 <span class="comment">     */</span>
00626     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a455">GETPTI</a>(pwnd) == <a class="code" href="../../d4/d1/userk_8h.html#a9">PtiCurrent</a>()) {
00627         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00628     }
00629 
00630     <span class="keywordflow">return</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a12">GetWindowProcess</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a450">HW</a>(pwnd)) == <a class="code" href="../../d6/d0/usercli_8h.html#a13">GETPROCESSID</a>());
00631 }
</div></pre>    </td>
  </tr>
</table>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="a3" doxytag="w32/ntuser/imm/misc.c::CachedCP" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> UINT <a class="el" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a3">CachedCP</a> = CP_ACP<code> [static]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00641">641</a> of file <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html">w32/ntuser/imm/misc.c</a>.
<p>
Referenced by <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00643">GetKeyboardLayoutCP()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="w32/ntuser/imm/misc.c::CachedLCID" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LCID <a class="el" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a2">CachedLCID</a> = 0<code> [static]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00640">640</a> of file <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html">w32/ntuser/imm/misc.c</a>.
<p>
Referenced by <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00643">GetKeyboardLayoutCP()</a>.    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Sat May 15 19:44:43 2004 for test by
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>test: strings.c File Reference</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="../../main.html">Main&nbsp;Page</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Class&nbsp;List</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Class&nbsp;Members</a> | <a class="qindex" href="../../globals.html">File&nbsp;Members</a></div>
<h1>strings.c File Reference</h1><code>#include "<a class="el" href="../../d8/d2/w32_2ntuser_2client_2precomp_8h-source.html">precomp.h</a>"</code><br>

<p>
<a href="../../d6/d6/strings_8c-source.html">Go to the source code of this file.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d7/strings_8c.html#a0">LATIN_CAPITAL_LETTER_A_GRAVE</a>&nbsp;&nbsp;&nbsp;(<a class="el" href="../../d2/d1/bench_8h.html#a8">CHAR</a>)0xc0</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d7/strings_8c.html#a1">LATIN_CAPITAL_LETTER_THORN</a>&nbsp;&nbsp;&nbsp;(<a class="el" href="../../d2/d1/bench_8h.html#a8">CHAR</a>)0xde</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d7/strings_8c.html#a2">LATIN_SMALL_LETTER_SHARP_S</a>&nbsp;&nbsp;&nbsp;(<a class="el" href="../../d2/d1/bench_8h.html#a8">CHAR</a>)0xdf</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d7/strings_8c.html#a3">LATIN_SMALL_LETTER_Y_DIAERESIS</a>&nbsp;&nbsp;&nbsp;(<a class="el" href="../../d2/d1/bench_8h.html#a8">CHAR</a>)0xff</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d7/strings_8c.html#a4">DIVISION_SIGN</a>&nbsp;&nbsp;&nbsp;(<a class="el" href="../../d2/d1/bench_8h.html#a8">CHAR</a>)0xf7</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d7/strings_8c.html#a5">MULTIPLICATION_SIGN</a>&nbsp;&nbsp;&nbsp;(<a class="el" href="../../d2/d1/bench_8h.html#a8">CHAR</a>)0xd7</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d7/strings_8c.html#a6">CCH_LOCAL_BUFF</a>&nbsp;&nbsp;&nbsp;256</td></tr>

<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>LPSTR WINAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d7/strings_8c.html#a7">CharLowerA</a> (LPSTR psz)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LPSTR WINAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d7/strings_8c.html#a8">CharUpperA</a> (LPSTR psz)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LPSTR WINAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d7/strings_8c.html#a9">CharNextA</a> (LPCSTR lpCurrentChar)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LPSTR WINAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d7/strings_8c.html#a10">CharNextExA</a> (WORD CodePage, LPCSTR lpCurrentChar, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> <a class="el" href="../../d3/d8/propapi_8h.html#a34">dwFlags</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LPSTR WINAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d7/strings_8c.html#a11">CharPrevA</a> (LPCSTR lpStart, LPCSTR lpCurrentChar)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LPSTR WINAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d7/strings_8c.html#a12">CharPrevExA</a> (WORD CodePage, LPCSTR lpStart, LPCSTR lpCurrentChar, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> <a class="el" href="../../d3/d8/propapi_8h.html#a34">dwFlags</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> WINAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d7/strings_8c.html#a13">CharLowerBuffA</a> (LPSTR psz, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> nLength)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> WINAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d7/strings_8c.html#a14">CharUpperBuffA</a> (LPSTR psz, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> nLength)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL WINAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d7/strings_8c.html#a15">IsCharLowerA</a> (char cChar)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL WINAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d7/strings_8c.html#a16">IsCharUpperA</a> (char cChar)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL WINAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d7/strings_8c.html#a17">IsCharAlphaNumericA</a> (char cChar)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL WINAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d7/strings_8c.html#a18">IsCharAlphaA</a> (char cChar)</td></tr>

</table>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="a6" doxytag="strings.c::CCH_LOCAL_BUFF" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define CCH_LOCAL_BUFF&nbsp;&nbsp;&nbsp;256          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d6/strings_8c-source.html#l00333">333</a> of file <a class="el" href="../../d6/d6/strings_8c-source.html">strings.c</a>.
<p>
Referenced by <a class="el" href="../../d6/d6/strings_8c-source.html#l00335">CharLowerBuffA()</a>, and <a class="el" href="../../d6/d6/strings_8c-source.html#l00416">CharUpperBuffA()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="strings.c::DIVISION_SIGN" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define DIVISION_SIGN&nbsp;&nbsp;&nbsp;(<a class="el" href="../../d2/d1/bench_8h.html#a8">CHAR</a>)0xf7          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d6/strings_8c-source.html#l00026">26</a> of file <a class="el" href="../../d6/d6/strings_8c-source.html">strings.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a0" doxytag="strings.c::LATIN_CAPITAL_LETTER_A_GRAVE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define LATIN_CAPITAL_LETTER_A_GRAVE&nbsp;&nbsp;&nbsp;(<a class="el" href="../../d2/d1/bench_8h.html#a8">CHAR</a>)0xc0          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d6/strings_8c-source.html#l00022">22</a> of file <a class="el" href="../../d6/d6/strings_8c-source.html">strings.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="strings.c::LATIN_CAPITAL_LETTER_THORN" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define LATIN_CAPITAL_LETTER_THORN&nbsp;&nbsp;&nbsp;(<a class="el" href="../../d2/d1/bench_8h.html#a8">CHAR</a>)0xde          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d6/strings_8c-source.html#l00023">23</a> of file <a class="el" href="../../d6/d6/strings_8c-source.html">strings.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="strings.c::LATIN_SMALL_LETTER_SHARP_S" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define LATIN_SMALL_LETTER_SHARP_S&nbsp;&nbsp;&nbsp;(<a class="el" href="../../d2/d1/bench_8h.html#a8">CHAR</a>)0xdf          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d6/strings_8c-source.html#l00024">24</a> of file <a class="el" href="../../d6/d6/strings_8c-source.html">strings.c</a>.
<p>
Referenced by <a class="el" href="../../d6/d6/strings_8c-source.html#l00416">CharUpperBuffA()</a>, and <a class="el" href="../../d9/d9/wstrings_8c-source.html#l00298">CharUpperBuffW()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="strings.c::LATIN_SMALL_LETTER_Y_DIAERESIS" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define LATIN_SMALL_LETTER_Y_DIAERESIS&nbsp;&nbsp;&nbsp;(<a class="el" href="../../d2/d1/bench_8h.html#a8">CHAR</a>)0xff          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d6/strings_8c-source.html#l00025">25</a> of file <a class="el" href="../../d6/d6/strings_8c-source.html">strings.c</a>.
<p>
Referenced by <a class="el" href="../../d6/d6/strings_8c-source.html#l00416">CharUpperBuffA()</a>, and <a class="el" href="../../d9/d9/wstrings_8c-source.html#l00298">CharUpperBuffW()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="strings.c::MULTIPLICATION_SIGN" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define MULTIPLICATION_SIGN&nbsp;&nbsp;&nbsp;(<a class="el" href="../../d2/d1/bench_8h.html#a8">CHAR</a>)0xd7          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d6/strings_8c-source.html#l00027">27</a> of file <a class="el" href="../../d6/d6/strings_8c-source.html">strings.c</a>.    </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="a7" doxytag="strings.c::CharLowerA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LPSTR WINAPI CharLowerA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">LPSTR&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>psz</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d6/strings_8c-source.html#l00046">46</a> of file <a class="el" href="../../d6/d6/strings_8c-source.html">strings.c</a>.
<p>
References <a class="el" href="../../d0/d7/halvprnt_8c-source.html#l00031">BYTE</a>, <a class="el" href="../../d2/d0/bench_8c-source.html#l00050">CHAR</a>, <a class="el" href="../../d6/d6/strings_8c-source.html#l00335">CharLowerBuffA()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00590">IS_DBCS_ENABLED</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00410">IS_PTR</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00369">RtlMultiByteToUnicodeN()</a>, <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00905">RtlUnicodeToMultiByteN()</a>, and <a class="el" href="../../d2/d7/regtest_8c.html#a2">strlen()</a>.
<p>
<pre class="fragment"><div>00048 {
00049     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> st;
00050 
00051     <span class="comment">/*</span>
00052 <span class="comment">     * Early out for NULL string or '\0'</span>
00053 <span class="comment">     */</span>
00054     <span class="keywordflow">if</span> (psz == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00055         <span class="keywordflow">return</span> psz;
00056     }
00057 
00058     <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a98">IS_PTR</a>(psz)) {
00059         WCHAR wch;
00060 
00061 <span class="preprocessor">#ifdef FE_SB // CharLowerA()</span>
00062 <span class="preprocessor"></span>        <span class="comment">/*</span>
00063 <span class="comment">         * if only DBCS Leadbyte was passed, just return the character.</span>
00064 <span class="comment">         * Same behavior as Windows 3.1J and Windows 95 FarEast version.</span>
00065 <span class="comment">         */</span>
00066         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a125">IS_DBCS_ENABLED</a>() &amp;&amp; IsDBCSLeadByte((BYTE)(ULONG_PTR)psz)) {
00067             <span class="keywordflow">return</span> psz;
00068         }
00069 <span class="preprocessor">#endif // FE_SB</span>
00070 <span class="preprocessor"></span>
00071         <span class="comment">//</span>
00072         <span class="comment">// LATER 14 Feb 92 GregoryW</span>
00073         <span class="comment">//    For DBCS code pages is a double byte character ever</span>
00074         <span class="comment">//    passed in the low word of psz or is the high nibble</span>
00075         <span class="comment">//    of the low word always ignored?</span>
00076         <span class="comment">//</span>
00077         st = <a class="code" href="../../d9/d6/nlsxlat_8c.html#a33">RtlMultiByteToUnicodeN</a>(&amp;wch, <span class="keyword">sizeof</span>(WCHAR), NULL, (PCH)&amp;psz, <span class="keyword">sizeof</span>(CHAR));
00078         <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(st)) {
00079             <span class="comment">/*</span>
00080 <span class="comment">             * Failed!  Caller is not expecting failure, CharLowerA does not</span>
00081 <span class="comment">             * have a failure indicator, so just return the original character.</span>
00082 <span class="comment">             */</span>
00083             RIPMSG1(RIP_WARNING, <span class="stringliteral">"CharLowerA(%#p) failed\n"</span>, psz);
00084         } <span class="keywordflow">else</span> {
00085             <span class="comment">/*</span>
00086 <span class="comment">             * The next two calls never fail.</span>
00087 <span class="comment">             */</span>
00088             LCMapStringW(LOCALE_USER_DEFAULT, LCMAP_LOWERCASE, &amp;wch, 1, &amp;wch, 1);
00089             <a class="code" href="../../d9/d6/nlsxlat_8c.html#a37">RtlUnicodeToMultiByteN</a>((PCH)&amp;psz, <span class="keyword">sizeof</span>(CHAR), NULL, &amp;wch, <span class="keyword">sizeof</span>(WCHAR));
00090         }
00091         <span class="keywordflow">return</span> psz;
00092 
00093     }
00094 
00095     <span class="comment">/*</span>
00096 <span class="comment">     * psz is a null-terminated string</span>
00097 <span class="comment">     */</span>
00098     <a class="code" href="../../d5/d7/strings_8c.html#a13">CharLowerBuffA</a>(psz, <a class="code" href="../../d2/d7/regtest_8c.html#a2">strlen</a>(psz)+1);
00099     <span class="keywordflow">return</span> psz;
00100 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a13" doxytag="strings.c::CharLowerBuffA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> WINAPI CharLowerBuffA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">LPSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>psz</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>nLength</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d6/strings_8c-source.html#l00335">335</a> of file <a class="el" href="../../d6/d6/strings_8c-source.html">strings.c</a>.
<p>
References <a class="el" href="../../d6/d6/strings_8c-source.html#l00333">CCH_LOCAL_BUFF</a>, <a class="el" href="../../d9/d9/wstrings_8c-source.html#l00252">CharLowerBuffW()</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00590">IS_DBCS_ENABLED</a>, <a class="el" href="../../d6/d6/strings_8c-source.html#l00538">IsCharUpperA()</a>, <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00905">RtlUnicodeToMultiByteN()</a>, and <a class="el" href="../../d7/d9/usercli_8h-source.html#l00960">UserLocalFree</a>.
<p>
Referenced by <a class="el" href="../../d6/d6/strings_8c-source.html#l00046">CharLowerA()</a>, and <a class="el" href="../../d9/d3/editec_8c-source.html#l02059">ECInsertText()</a>.
<p>
<pre class="fragment"><div>00338 {
00339     ULONG cb;
00340     WCHAR awchLocal[<a class="code" href="../../d5/d7/strings_8c.html#a6">CCH_LOCAL_BUFF</a>];
00341     LPWSTR pwszT = awchLocal;
00342     <span class="keywordtype">int</span> cwch;
00343 
00344     <span class="keywordflow">if</span> (nLength == 0) {
00345         <span class="keywordflow">return</span>(0);
00346     }
00347 
00348     <span class="comment">/*</span>
00349 <span class="comment">     * Convert ANSI to Unicode.</span>
00350 <span class="comment">     * Use awchLocal if it is big enough, otherwise allocate space.</span>
00351 <span class="comment">     */</span>
00352     cwch = MBToWCS(
00353             psz,       <span class="comment">// ANSI buffer</span>
00354             nLength,   <span class="comment">// length of buffer</span>
00355             &amp;pwszT,    <span class="comment">// address of Unicode string</span>
00356             (nLength &gt; CCH_LOCAL_BUFF ? -1 : nLength),
00357             (nLength &gt; CCH_LOCAL_BUFF) );
00358 
00359     <span class="keywordflow">if</span> (cwch != 0) {
00360         <a class="code" href="../../d8/d0/wstrings_8c.html#a12">CharLowerBuffW</a>(pwszT, cwch);
00361 
00362         <span class="comment">/*</span>
00363 <span class="comment">         * This can't fail</span>
00364 <span class="comment">         */</span>
00365         <a class="code" href="../../d9/d6/nlsxlat_8c.html#a37">RtlUnicodeToMultiByteN</a>(
00366                   psz,                   <span class="comment">// ANSI string</span>
00367                   nLength,               <span class="comment">// given to us</span>
00368                   &amp;cb,                   <span class="comment">// result length</span>
00369                   pwszT,                 <span class="comment">// Unicode string</span>
00370                   cwch * <span class="keyword">sizeof</span>(WCHAR)); <span class="comment">// length IN BYTES</span>
00371 
00372         <span class="keywordflow">if</span> (pwszT != awchLocal) {
00373             <a class="code" href="../../d6/d0/usercli_8h.html#a138">UserLocalFree</a>(pwszT);
00374         }
00375 
00376         <span class="keywordflow">return</span> (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)cb;
00377     }
00378 
00379     <span class="comment">/*</span>
00380 <span class="comment">     * MBToWCS failed!  The caller is not expecting failure,</span>
00381 <span class="comment">     * so we convert the string to lower case as best we can.</span>
00382 <span class="comment">     */</span>
00383     RIPMSG2(RIP_WARNING,
00384             <span class="stringliteral">"CharLowerBuffA(%#p, %lx) failed\n"</span>, psz, nLength);
00385 
00386     <span class="keywordflow">for</span> (cb=0; cb &lt; nLength; cb++) {
00387 <span class="preprocessor">#ifdef FE_SB // CharLowerBuffA(): skip double byte character</span>
00388 <span class="preprocessor"></span>        <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a125">IS_DBCS_ENABLED</a>() &amp;&amp; IsDBCSLeadByte(psz[cb])) {
00389             cb++;
00390         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7/strings_8c.html#a16">IsCharUpperA</a>(psz[cb])) {
00391             psz[cb] += <span class="charliteral">'a'</span>-<span class="charliteral">'A'</span>;
00392         }
00393 <span class="preprocessor">#else</span>
00394 <span class="preprocessor"></span>        <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7/strings_8c.html#a16">IsCharUpperA</a>(psz[cb])) {
00395             psz[cb] += <span class="charliteral">'a'</span>-<span class="charliteral">'A'</span>;
00396         }
00397 <span class="preprocessor">#endif // FE_SB</span>
00398 <span class="preprocessor"></span>    }
00399 
00400     <span class="keywordflow">return</span> nLength;
00401 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a9" doxytag="strings.c::CharNextA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LPSTR WINAPI CharNextA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">LPCSTR&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>lpCurrentChar</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d6/strings_8c-source.html#l00190">190</a> of file <a class="el" href="../../d6/d6/strings_8c-source.html">strings.c</a>.
<p>
References <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00590">IS_DBCS_ENABLED</a>.
<p>
Referenced by <a class="el" href="../../d5/d7/jtranmsg_8c-source.html#l01423">CompStrAToCharA()</a>, and <a class="el" href="../../d5/d7/jtranmsg_8c-source.html#l01493">CompStrAToCharW()</a>.
<p>
<pre class="fragment"><div>00192 {
00193 <span class="preprocessor">#ifdef FE_SB // CharNextA(): dbcs enabling</span>
00194 <span class="preprocessor"></span>    <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a125">IS_DBCS_ENABLED</a>() &amp;&amp; IsDBCSLeadByte(*lpCurrentChar)) {
00195         lpCurrentChar++;
00196     }
00197     <span class="comment">/*</span>
00198 <span class="comment">     * if we have only DBCS LeadingByte, we will point string-terminaler.</span>
00199 <span class="comment">     */</span>
00200 <span class="preprocessor">#endif // FE_SB</span>
00201 <span class="preprocessor"></span>
00202     <span class="keywordflow">if</span> (*lpCurrentChar) {
00203         lpCurrentChar++;
00204     }
00205     <span class="keywordflow">return</span> (LPSTR)lpCurrentChar;
00206 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a10" doxytag="strings.c::CharNextExA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LPSTR WINAPI CharNextExA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">WORD&nbsp;</td>
          <td class="mdname" nowrap> <em>CodePage</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPCSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>lpCurrentChar</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwFlags</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d6/strings_8c-source.html#l00218">218</a> of file <a class="el" href="../../d6/d6/strings_8c-source.html">strings.c</a>.
<p>
References <a class="el" href="../../d4/d7/propapi_8h-source.html#l00043">dwFlags</a>, and <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>.
<p>
<pre class="fragment"><div>00222 {
00223     <span class="keywordflow">if</span> (lpCurrentChar == (LPSTR)<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00224     {
00225         <span class="keywordflow">return</span> (LPSTR)lpCurrentChar;
00226     }
00227 
00228     <span class="keywordflow">if</span> (IsDBCSLeadByteEx(CodePage, *lpCurrentChar))
00229     {
00230         lpCurrentChar++;
00231     }
00232 
00233     <span class="keywordflow">if</span> (*lpCurrentChar)
00234     {
00235         lpCurrentChar++;
00236     }
00237     <span class="keywordflow">return</span> (LPSTR)lpCurrentChar;
00238 
00239     UNREFERENCED_PARAMETER(dwFlags);
00240 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a11" doxytag="strings.c::CharPrevA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LPSTR WINAPI CharPrevA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">LPCSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>lpStart</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPCSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>lpCurrentChar</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d6/strings_8c-source.html#l00257">257</a> of file <a class="el" href="../../d6/d6/strings_8c-source.html">strings.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00590">IS_DBCS_ENABLED</a>.
<p>
<pre class="fragment"><div>00260 {
00261 <span class="preprocessor">#ifdef FE_SB // CharPrevA : dbcs enabling</span>
00262 <span class="preprocessor"></span>    <span class="keywordflow">if</span> (lpCurrentChar &gt; lpStart) {
00263         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a125">IS_DBCS_ENABLED</a>()) {
00264             LPCSTR lpChar;
00265             <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> bDBC = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00266 
00267             <span class="keywordflow">for</span> (lpChar = --lpCurrentChar - 1 ; lpChar &gt;= lpStart ; lpChar--) {
00268                 <span class="keywordflow">if</span> (!IsDBCSLeadByte(*lpChar))
00269                     <span class="keywordflow">break</span>;
00270                 bDBC = !bDBC;
00271             }
00272 
00273             <span class="keywordflow">if</span> (bDBC)
00274                 lpCurrentChar--;
00275         }
00276         <span class="keywordflow">else</span>
00277             lpCurrentChar--;
00278     }
00279     <span class="keywordflow">return</span> (LPSTR)lpCurrentChar;
00280 <span class="preprocessor">#else</span>
00281 <span class="preprocessor"></span>    <span class="keywordflow">if</span> (lpCurrentChar &gt; lpStart) {
00282         lpCurrentChar--;
00283     }
00284     <span class="keywordflow">return</span> (LPSTR)lpCurrentChar;
00285 <span class="preprocessor">#endif // FE_SB</span>
00286 <span class="preprocessor"></span>}
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a12" doxytag="strings.c::CharPrevExA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LPSTR WINAPI CharPrevExA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">WORD&nbsp;</td>
          <td class="mdname" nowrap> <em>CodePage</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPCSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>lpStart</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPCSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>lpCurrentChar</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwFlags</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d6/strings_8c-source.html#l00297">297</a> of file <a class="el" href="../../d6/d6/strings_8c-source.html">strings.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d4/d7/propapi_8h-source.html#l00043">dwFlags</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>.
<p>
<pre class="fragment"><div>00302 {
00303     <span class="keywordflow">if</span> (lpCurrentChar &gt; lpStart) {
00304         LPCSTR lpChar;
00305         <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> bDBC = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00306 
00307         <span class="keywordflow">for</span> (lpChar = --lpCurrentChar - 1 ; lpChar &gt;= lpStart ; lpChar--) {
00308             <span class="keywordflow">if</span> (!IsDBCSLeadByteEx(CodePage, *lpChar))
00309                 <span class="keywordflow">break</span>;
00310             bDBC = !bDBC;
00311         }
00312 
00313         <span class="keywordflow">if</span> (bDBC)
00314             lpCurrentChar--;
00315     }
00316     <span class="keywordflow">return</span> (LPSTR)lpCurrentChar;
00317 
00318     UNREFERENCED_PARAMETER(dwFlags);
00319 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a8" doxytag="strings.c::CharUpperA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LPSTR WINAPI CharUpperA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">LPSTR&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>psz</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d6/strings_8c-source.html#l00119">119</a> of file <a class="el" href="../../d6/d6/strings_8c-source.html">strings.c</a>.
<p>
References <a class="el" href="../../d0/d7/halvprnt_8c-source.html#l00031">BYTE</a>, <a class="el" href="../../d2/d0/bench_8c-source.html#l00050">CHAR</a>, <a class="el" href="../../d6/d6/strings_8c-source.html#l00416">CharUpperBuffA()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00590">IS_DBCS_ENABLED</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00410">IS_PTR</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00369">RtlMultiByteToUnicodeN()</a>, <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00905">RtlUnicodeToMultiByteN()</a>, and <a class="el" href="../../d2/d7/regtest_8c.html#a2">strlen()</a>.
<p>
<pre class="fragment"><div>00121 {
00122     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> st;
00123 
00124     <span class="comment">/*</span>
00125 <span class="comment">     * Early out for NULL string or '\0'</span>
00126 <span class="comment">     */</span>
00127     <span class="keywordflow">if</span> (psz == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00128         <span class="keywordflow">return</span> psz;
00129     }
00130 
00131     <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a98">IS_PTR</a>(psz)) {
00132         WCHAR wch;
00133 
00134 <span class="preprocessor">#ifdef FE_SB // CharLowerA()</span>
00135 <span class="preprocessor"></span>        <span class="comment">/*</span>
00136 <span class="comment">         * if only DBCS Leadbyte was passed, just return the character.</span>
00137 <span class="comment">         * Same behavior as Windows 3.1J and Windows 95 FarEast version.</span>
00138 <span class="comment">         */</span>
00139         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a125">IS_DBCS_ENABLED</a>() &amp;&amp; IsDBCSLeadByte((BYTE)(ULONG_PTR)psz)) {
00140             <span class="keywordflow">return</span> psz;
00141         }
00142 <span class="preprocessor">#endif // FE_SB</span>
00143 <span class="preprocessor"></span>
00144         <span class="comment">//</span>
00145         <span class="comment">// LATER 14 Feb 92 GregoryW</span>
00146         <span class="comment">//    For DBCS code pages is a double byte character ever</span>
00147         <span class="comment">//    passed in the low word of psz or is the high nibble</span>
00148         <span class="comment">//    of the low word always ignored?</span>
00149         <span class="comment">//</span>
00150         st = <a class="code" href="../../d9/d6/nlsxlat_8c.html#a33">RtlMultiByteToUnicodeN</a>(&amp;wch, <span class="keyword">sizeof</span>(WCHAR), NULL, (PCH)&amp;psz, <span class="keyword">sizeof</span>(CHAR));
00151         <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(st)) {
00152             <span class="comment">/*</span>
00153 <span class="comment">             * Failed!  Caller is not expecting failure, CharUpperA does not</span>
00154 <span class="comment">             * have a failure indicator, so return the original character.</span>
00155 <span class="comment">             */</span>
00156             RIPMSG1(RIP_WARNING, <span class="stringliteral">"CharUpperA(%#p) failed\n"</span>, psz);
00157         } <span class="keywordflow">else</span> {
00158             <span class="comment">/*</span>
00159 <span class="comment">             * The next two calls never fail.</span>
00160 <span class="comment">             */</span>
00161             LCMapStringW(LOCALE_USER_DEFAULT, LCMAP_UPPERCASE, &amp;wch, 1, &amp;wch, 1);
00162             <a class="code" href="../../d9/d6/nlsxlat_8c.html#a37">RtlUnicodeToMultiByteN</a>((PCH)&amp;psz, <span class="keyword">sizeof</span>(CHAR), NULL, &amp;wch, <span class="keyword">sizeof</span>(WCHAR));
00163         }
00164         <span class="keywordflow">return</span> psz;
00165 
00166     }
00167 
00168     <span class="comment">/*</span>
00169 <span class="comment">     * psz is a null-terminated string</span>
00170 <span class="comment">     */</span>
00171     <a class="code" href="../../d5/d7/strings_8c.html#a14">CharUpperBuffA</a>(psz, <a class="code" href="../../d2/d7/regtest_8c.html#a2">strlen</a>(psz)+1);
00172     <span class="keywordflow">return</span> psz;
00173 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a14" doxytag="strings.c::CharUpperBuffA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> WINAPI CharUpperBuffA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">LPSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>psz</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>nLength</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d6/strings_8c-source.html#l00416">416</a> of file <a class="el" href="../../d6/d6/strings_8c-source.html">strings.c</a>.
<p>
References <a class="el" href="../../d6/d6/strings_8c-source.html#l00333">CCH_LOCAL_BUFF</a>, <a class="el" href="../../d9/d9/wstrings_8c-source.html#l00298">CharUpperBuffW()</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00590">IS_DBCS_ENABLED</a>, <a class="el" href="../../d6/d6/strings_8c-source.html#l00502">IsCharLowerA()</a>, <a class="el" href="../../d6/d6/strings_8c-source.html#l00024">LATIN_SMALL_LETTER_SHARP_S</a>, <a class="el" href="../../d6/d6/strings_8c-source.html#l00025">LATIN_SMALL_LETTER_Y_DIAERESIS</a>, <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00905">RtlUnicodeToMultiByteN()</a>, and <a class="el" href="../../d7/d9/usercli_8h-source.html#l00960">UserLocalFree</a>.
<p>
Referenced by <a class="el" href="../../d6/d6/strings_8c-source.html#l00119">CharUpperA()</a>, and <a class="el" href="../../d9/d3/editec_8c-source.html#l02059">ECInsertText()</a>.
<p>
<pre class="fragment"><div>00419 {
00420     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> cb;
00421     WCHAR awchLocal[<a class="code" href="../../d5/d7/strings_8c.html#a6">CCH_LOCAL_BUFF</a>];
00422     LPWSTR pwszT = awchLocal;
00423     <span class="keywordtype">int</span> cwch;
00424 
00425     <span class="keywordflow">if</span> (nLength==0) {
00426         <span class="keywordflow">return</span>(0);
00427     }
00428 
00429     <span class="comment">/*</span>
00430 <span class="comment">     * Convert ANSI to Unicode.</span>
00431 <span class="comment">     * Use awchLocal if it is big enough, otherwise allocate space.</span>
00432 <span class="comment">     */</span>
00433     cwch = MBToWCS(
00434             psz,       <span class="comment">// ANSI buffer</span>
00435             nLength,   <span class="comment">// length of buffer</span>
00436             &amp;pwszT,    <span class="comment">// address of Unicode string</span>
00437             (nLength &gt; CCH_LOCAL_BUFF ? -1 : nLength),
00438             (nLength &gt; CCH_LOCAL_BUFF) );
00439 
00440     <span class="keywordflow">if</span> (cwch != 0) {
00441         <a class="code" href="../../d8/d0/wstrings_8c.html#a13">CharUpperBuffW</a>(pwszT, cwch);
00442 
00443         <a class="code" href="../../d9/d6/nlsxlat_8c.html#a37">RtlUnicodeToMultiByteN</a>(
00444                   psz,                   <span class="comment">// address of ANSI string</span>
00445                   nLength,               <span class="comment">// given to us</span>
00446                   &amp;cb,                   <span class="comment">// result length</span>
00447                   pwszT,                 <span class="comment">// Unicode string</span>
00448                   cwch * <span class="keyword">sizeof</span>(WCHAR)); <span class="comment">// length IN BYTES</span>
00449 
00450         <span class="keywordflow">if</span> (pwszT != awchLocal) {
00451             <a class="code" href="../../d6/d0/usercli_8h.html#a138">UserLocalFree</a>(pwszT);
00452         }
00453 
00454         <span class="keywordflow">return</span> (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)cb;
00455     }
00456 
00457     <span class="comment">/*</span>
00458 <span class="comment">     * MBToWCS failed!  The caller is not expecting failure,</span>
00459 <span class="comment">     * so we convert the string to upper case as best we can.</span>
00460 <span class="comment">     */</span>
00461     RIPMSG2(RIP_WARNING,
00462             <span class="stringliteral">"CharLowerBuffA(%#p, %lx) failed\n"</span>, psz, nLength);
00463 
00464     <span class="keywordflow">for</span> (cb=0; cb &lt; nLength; cb++) {
00465 <span class="preprocessor">#ifdef FE_SB // CharUpperBuffA(): skip double byte characters</span>
00466 <span class="preprocessor"></span>        <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a125">IS_DBCS_ENABLED</a>() &amp;&amp; IsDBCSLeadByte(psz[cb])) {
00467             cb++;
00468         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7/strings_8c.html#a15">IsCharLowerA</a>(psz[cb]) &amp;&amp;
00469                    <span class="comment">/*</span>
00470 <span class="comment">                    * Sometime, LATIN_xxxx code is DBCS LeadingByte depending on ACP.</span>
00471 <span class="comment">                    * In that case, we never come here...</span>
00472 <span class="comment">                    */</span>
00473                    (psz[cb] != <a class="code" href="../../d5/d7/strings_8c.html#a2">LATIN_SMALL_LETTER_SHARP_S</a>) &amp;&amp;
00474                    (psz[cb] != <a class="code" href="../../d5/d7/strings_8c.html#a3">LATIN_SMALL_LETTER_Y_DIAERESIS</a>)) {
00475             psz[cb] += <span class="charliteral">'A'</span>-<span class="charliteral">'a'</span>;
00476         }
00477 <span class="preprocessor">#else</span>
00478 <span class="preprocessor"></span>        <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7/strings_8c.html#a15">IsCharLowerA</a>(psz[cb]) &amp;&amp;
00479             (psz[cb] != <a class="code" href="../../d5/d7/strings_8c.html#a2">LATIN_SMALL_LETTER_SHARP_S</a>) &amp;&amp;
00480             (psz[cb] != <a class="code" href="../../d5/d7/strings_8c.html#a3">LATIN_SMALL_LETTER_Y_DIAERESIS</a>)) {
00481             psz[cb] += <span class="charliteral">'A'</span>-<span class="charliteral">'a'</span>;
00482         }
00483 <span class="preprocessor">#endif // FE_SB</span>
00484 <span class="preprocessor"></span>    }
00485 
00486     <span class="keywordflow">return</span> nLength;
00487 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a18" doxytag="strings.c::IsCharAlphaA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL WINAPI IsCharAlphaA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">char&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>cChar</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d6/strings_8c-source.html#l00623">623</a> of file <a class="el" href="../../d6/d6/strings_8c-source.html">strings.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d2/d0/bench_8c-source.html#l00050">CHAR</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00590">IS_DBCS_ENABLED</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00369">RtlMultiByteToUnicodeN()</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
<pre class="fragment"><div>00625 {
00626     WORD ctype1info = 0;
00627     WCHAR wChar = 0;
00628 
00629     <span class="comment">/*</span>
00630 <span class="comment">     * The following 2 calls cannot fail here</span>
00631 <span class="comment">     */</span>
00632     <a class="code" href="../../d9/d6/nlsxlat_8c.html#a33">RtlMultiByteToUnicodeN</a>(&amp;wChar, <span class="keyword">sizeof</span>(WCHAR), NULL, &amp;cChar, <span class="keyword">sizeof</span>(CHAR));
00633     GetStringTypeW(CT_CTYPE1, &amp;wChar, 1, &amp;ctype1info);
00634 <span class="preprocessor">#ifdef FE_SB // IsCharAlphaA()</span>
00635 <span class="preprocessor"></span>    <span class="keywordflow">if</span> ((ctype1info &amp; C1_ALPHA) == C1_ALPHA) {
00636         WORD ctype3info = 0;
00637         <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a125">IS_DBCS_ENABLED</a>()) {
00638             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00639         }
00640         <span class="comment">/*</span>
00641 <span class="comment">         * We don't want to return TRUE for halfwidth katakana.</span>
00642 <span class="comment">         * Katakana is linguistic character (C1_ALPHA), but it is not</span>
00643 <span class="comment">         * alphabet character.</span>
00644 <span class="comment">         */</span>
00645         GetStringTypeW(CT_CTYPE3, &amp;wChar, 1, &amp;ctype3info);
00646         <span class="keywordflow">return</span> ((ctype3info &amp; (C3_KATAKANA|C3_HIRAGANA)) ? <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a> : <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
00647     }
00648     <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00649 <span class="preprocessor">#else</span>
00650 <span class="preprocessor"></span>    <span class="keywordflow">return</span> (ctype1info &amp; C1_ALPHA) == C1_ALPHA;
00651 <span class="preprocessor">#endif // FE_SB</span>
00652 <span class="preprocessor"></span>}
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a17" doxytag="strings.c::IsCharAlphaNumericA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL WINAPI IsCharAlphaNumericA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">char&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>cChar</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d6/strings_8c-source.html#l00577">577</a> of file <a class="el" href="../../d6/d6/strings_8c-source.html">strings.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d2/d0/bench_8c-source.html#l00050">CHAR</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00590">IS_DBCS_ENABLED</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00369">RtlMultiByteToUnicodeN()</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
<pre class="fragment"><div>00579 {
00580     WORD ctype1info = 0;
00581     WCHAR wChar = 0;
00582 
00583     <span class="comment">/*</span>
00584 <span class="comment">     * The following 2 calls cannot fail here</span>
00585 <span class="comment">     */</span>
00586     <a class="code" href="../../d9/d6/nlsxlat_8c.html#a33">RtlMultiByteToUnicodeN</a>(&amp;wChar, <span class="keyword">sizeof</span>(WCHAR), NULL, &amp;cChar, <span class="keyword">sizeof</span>(CHAR));
00587     GetStringTypeW(CT_CTYPE1, &amp;wChar, 1, &amp;ctype1info);
00588 <span class="preprocessor">#ifdef FE_SB // IsCharAlphaNumericA()</span>
00589 <span class="preprocessor"></span>    <span class="keywordflow">if</span> (ctype1info &amp; C1_ALPHA) {
00590         WORD ctype3info = 0;
00591         <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a125">IS_DBCS_ENABLED</a>()) {
00592             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00593         }
00594         <span class="comment">/*</span>
00595 <span class="comment">         * We don't want to return TRUE for halfwidth katakana.</span>
00596 <span class="comment">         * Katakana is linguistic character (C1_ALPHA), but it is not</span>
00597 <span class="comment">         * alphabet character.</span>
00598 <span class="comment">         */</span>
00599         GetStringTypeW(CT_CTYPE3, &amp;wChar, 1, &amp;ctype3info);
00600         <span class="keywordflow">return</span> ((ctype3info &amp; (C3_KATAKANA|C3_HIRAGANA)) ? <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a> : <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
00601     }
00602     <span class="comment">/* Otherwise, it might be digits ? */</span>
00603     <span class="keywordflow">return</span> !!(ctype1info &amp; C1_DIGIT);
00604 <span class="preprocessor">#else</span>
00605 <span class="preprocessor"></span>    <span class="keywordflow">return</span> (ctype1info &amp; C1_ALPHA) || (ctype1info &amp; C1_DIGIT);
00606 <span class="preprocessor">#endif // FE_SB</span>
00607 <span class="preprocessor"></span>}
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a15" doxytag="strings.c::IsCharLowerA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL WINAPI IsCharLowerA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">char&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>cChar</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d6/strings_8c-source.html#l00502">502</a> of file <a class="el" href="../../d6/d6/strings_8c-source.html">strings.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d2/d0/bench_8c-source.html#l00050">CHAR</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00590">IS_DBCS_ENABLED</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00369">RtlMultiByteToUnicodeN()</a>.
<p>
Referenced by <a class="el" href="../../d6/d6/strings_8c-source.html#l00416">CharUpperBuffA()</a>, <a class="el" href="../../d9/d9/wstrings_8c-source.html#l00298">CharUpperBuffW()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02059">ECInsertText()</a>, and <a class="el" href="../../d9/d9/wstrings_8c-source.html#l00348">IsCharLowerW()</a>.
<p>
<pre class="fragment"><div>00504 {
00505     WORD ctype1info = 0;
00506     WCHAR wChar = 0;
00507 
00508 <span class="preprocessor">#ifdef FE_SB // IsCharLowerA()</span>
00509 <span class="preprocessor"></span>    <span class="comment">/*</span>
00510 <span class="comment">     * if only DBCS Leadbyte was passed, just return FALSE.</span>
00511 <span class="comment">     * Same behavior as Windows 3.1J and Windows 95 FarEast version.</span>
00512 <span class="comment">     */</span>
00513     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a125">IS_DBCS_ENABLED</a>() &amp;&amp; IsDBCSLeadByte(cChar)) {
00514         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00515     }
00516 <span class="preprocessor">#endif // FE_SB</span>
00517 <span class="preprocessor"></span>
00518     <span class="comment">/*</span>
00519 <span class="comment">     * The following 2 calls cannot fail here</span>
00520 <span class="comment">     */</span>
00521     <a class="code" href="../../d9/d6/nlsxlat_8c.html#a33">RtlMultiByteToUnicodeN</a>(&amp;wChar, <span class="keyword">sizeof</span>(WCHAR), NULL, &amp;cChar, <span class="keyword">sizeof</span>(CHAR));
00522     GetStringTypeW(CT_CTYPE1, &amp;wChar, 1, &amp;ctype1info);
00523     <span class="keywordflow">return</span> (ctype1info &amp; C1_LOWER) == C1_LOWER;
00524 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a16" doxytag="strings.c::IsCharUpperA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL WINAPI IsCharUpperA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">char&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>cChar</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d6/strings_8c-source.html#l00538">538</a> of file <a class="el" href="../../d6/d6/strings_8c-source.html">strings.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d2/d0/bench_8c-source.html#l00050">CHAR</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00590">IS_DBCS_ENABLED</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00369">RtlMultiByteToUnicodeN()</a>.
<p>
Referenced by <a class="el" href="../../d6/d6/strings_8c-source.html#l00335">CharLowerBuffA()</a>, <a class="el" href="../../d9/d9/wstrings_8c-source.html#l00252">CharLowerBuffW()</a>, and <a class="el" href="../../d9/d9/wstrings_8c-source.html#l00387">IsCharUpperW()</a>.
<p>
<pre class="fragment"><div>00540 {
00541     WORD ctype1info = 0;
00542     WCHAR wChar = 0;
00543 
00544 <span class="preprocessor">#ifdef FE_SB // IsCharUpperA()</span>
00545 <span class="preprocessor"></span>    <span class="comment">/*</span>
00546 <span class="comment">     * if only DBCS Leadbyte was passed, just return FALSE.</span>
00547 <span class="comment">     * Same behavior as Windows 3.1J and Windows 95 FarEast version.</span>
00548 <span class="comment">     */</span>
00549     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a125">IS_DBCS_ENABLED</a>() &amp;&amp; IsDBCSLeadByte(cChar)) {
00550         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00551     }
00552 <span class="preprocessor">#endif // FE_SB</span>
00553 <span class="preprocessor"></span>
00554     <span class="comment">/*</span>
00555 <span class="comment">     * The following 2 calls cannot fail here</span>
00556 <span class="comment">     */</span>
00557     <a class="code" href="../../d9/d6/nlsxlat_8c.html#a33">RtlMultiByteToUnicodeN</a>(&amp;wChar, <span class="keyword">sizeof</span>(WCHAR), NULL, &amp;cChar, <span class="keyword">sizeof</span>(CHAR));
00558     GetStringTypeW(CT_CTYPE1, &amp;wChar, 1, &amp;ctype1info);
00559     <span class="keywordflow">return</span> (ctype1info &amp; C1_UPPER) == C1_UPPER;
00560 }
</div></pre>    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Sat May 15 19:45:42 2004 for test by
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>test: classc.c File Reference</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="../../main.html">Main&nbsp;Page</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Class&nbsp;List</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Class&nbsp;Members</a> | <a class="qindex" href="../../globals.html">File&nbsp;Members</a></div>
<h1>classc.c File Reference</h1><code>#include "<a class="el" href="../../d8/d2/w32_2ntuser_2client_2precomp_8h-source.html">precomp.h</a>"</code><br>

<p>
<a href="../../d6/d6/classc_8c-source.html">Go to the source code of this file.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d7/classc_8c.html#a0">INDEX_OFFSET</a>&nbsp;&nbsp;&nbsp;GCLP_HICONSM</td></tr>

<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>ULONG_PTR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d7/classc_8c.html#a3">_GetClassData</a> (<a class="el" href="../../d7/d0/structtagCLS.html">PCLS</a> pcls, <a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, int index, BOOL bAnsi)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>ULONG_PTR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d7/classc_8c.html#a4">_GetClassLongPtr</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, int index, BOOL bAnsi)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>WORD&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d7/classc_8c.html#a5">GetClassWord</a> (HWND hwnd, int index)</td></tr>

<tr><td colspan=2><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>CONST <a class="el" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d7/classc_8c.html#a1">afClassDWord</a> []</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>CONST <a class="el" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d7/classc_8c.html#a2">aiClassOffset</a> []</td></tr>

</table>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="a0" doxytag="classc.c::INDEX_OFFSET" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define INDEX_OFFSET&nbsp;&nbsp;&nbsp;GCLP_HICONSM          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d6/classc_8c-source.html#l00084">84</a> of file <a class="el" href="../../d6/d6/classc_8c-source.html">classc.c</a>.
<p>
Referenced by <a class="el" href="../../d6/d6/classc_8c-source.html#l00100">_GetClassData()</a>, and <a class="el" href="../../d3/d6/class_8c-source.html#l01399">xxxSetClassData()</a>.    </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="a3" doxytag="classc.c::_GetClassData" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ULONG_PTR _GetClassData           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d0/structtagCLS.html">PCLS</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pcls</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>index</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>bAnsi</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d6/classc_8c-source.html#l00100">100</a> of file <a class="el" href="../../d6/d6/classc_8c-source.html">classc.c</a>.
<p>
References <a class="el" href="../../d6/d6/classc_8c-source.html#l00021">afClassDWord</a>, <a class="el" href="../../d6/d6/classc_8c-source.html#l00051">aiClassOffset</a>, <a class="el" href="../../d0/d7/halvprnt_8c-source.html#l00031">BYTE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01561">CPD_ANSI_TO_UNICODE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01562">CPD_UNICODE_TO_ANSI</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01568">CPD_WNDTOCLS</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01686">CSF_ANSIPROC</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01744">tagCLS::CSF_flags</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01685">CSF_SERVERSIDEPROC</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01689">CSF_WOWCLASS</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01690">CSF_WOWEXTRA</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d1/d4/ntuser_2kernel_2getset_8c-source.html#l00875">GetCPD()</a>, <a class="el" href="../../d6/d6/classc_8c-source.html#l00084">INDEX_OFFSET</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00410">IS_PTR</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01666">tagCLS::lpszClientAnsiMenuName</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01667">tagCLS::lpszClientUnicodeMenuName</a>, <a class="el" href="../../d3/d4/ntuser_2rtl_2getset_8c-source.html#l00049">MapClientNeuterToClientPfn()</a>, <a class="el" href="../../d3/d4/ntuser_2rtl_2getset_8c-source.html#l00022">MapServerToClientPfn()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04602">NtUserCallHwndParam()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01512">PtoH</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01617">PWCFromPCLS</a>.
<p>
Referenced by <a class="el" href="../../d6/d6/classc_8c-source.html#l00246">_GetClassLongPtr()</a>, <a class="el" href="../../d6/d6/classc_8c-source.html#l00305">GetClassWord()</a>, and <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00100">GetClassWOWWords()</a>.
<p>
<pre class="fragment"><div>00105 {
00106     KERNEL_ULONG_PTR dwData;
00107     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwCPDType = 0;
00108 
00109     index -= <a class="code" href="../../d5/d7/classc_8c.html#a0">INDEX_OFFSET</a>;
00110 
00111     <span class="keywordflow">if</span> (index &lt; 0) {
00112         RIPERR0(ERROR_INVALID_INDEX, RIP_VERBOSE, <span class="stringliteral">""</span>);
00113         <span class="keywordflow">return</span> 0;
00114     }
00115 
00116     UserAssert(index &gt;= 0);
00117     UserAssert(index &lt; <span class="keyword">sizeof</span>(afClassDWord));
00118     UserAssert(<span class="keyword">sizeof</span>(afClassDWord) == <span class="keyword">sizeof</span>(aiClassOffset));
00119     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7/classc_8c.html#a1">afClassDWord</a>[index] == <span class="keyword">sizeof</span>(<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)) {
00120         dwData = *(<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> *)(((<a class="code" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a> *)pcls) + <a class="code" href="../../d5/d7/classc_8c.html#a2">aiClassOffset</a>[index]);
00121     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7/classc_8c.html#a1">afClassDWord</a>[index] == <span class="keyword">sizeof</span>(KERNEL_ULONG_PTR)) {
00122         dwData = *(KERNEL_ULONG_PTR *)(((<a class="code" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a> *)pcls) + <a class="code" href="../../d5/d7/classc_8c.html#a2">aiClassOffset</a>[index]);
00123     } <span class="keywordflow">else</span> {
00124         dwData = (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)*(WORD *)(((<a class="code" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a> *)pcls) + <a class="code" href="../../d5/d7/classc_8c.html#a2">aiClassOffset</a>[index]);
00125     }
00126 
00127     index += <a class="code" href="../../d5/d7/classc_8c.html#a0">INDEX_OFFSET</a>;
00128 
00129     <span class="comment">/*</span>
00130 <span class="comment">     * If we're returning an icon or cursor handle, do the reverse</span>
00131 <span class="comment">     * mapping here.</span>
00132 <span class="comment">     */</span>
00133     <span class="keywordflow">switch</span>(index) {
00134     <span class="keywordflow">case</span> GCLP_MENUNAME:
00135         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a98">IS_PTR</a>(pcls-&gt;lpszMenuName)) {
00136             <span class="comment">/*</span>
00137 <span class="comment">             * The Menu Name is a real string: return the client-side address.</span>
00138 <span class="comment">             * (If the class was registered by another app this returns an</span>
00139 <span class="comment">             * address in that app's addr. space, but it's the best we can do)</span>
00140 <span class="comment">             */</span>
00141             dwData = bAnsi ?
00142                     (ULONG_PTR)pcls-&gt;<a class="code" href="../../d7/d0/structtagCLS.html#o8">lpszClientAnsiMenuName</a> :
00143                     (ULONG_PTR)pcls-&gt;<a class="code" href="../../d7/d0/structtagCLS.html#o9">lpszClientUnicodeMenuName</a>;
00144         }
00145         <span class="keywordflow">break</span>;
00146 
00147     <span class="keywordflow">case</span> GCLP_HICON:
00148     <span class="keywordflow">case</span> GCLP_HCURSOR:
00149     <span class="keywordflow">case</span> GCLP_HICONSM:
00150         <span class="comment">/*</span>
00151 <span class="comment">         * We have to go to the kernel to convert the pcursor to a handle because</span>
00152 <span class="comment">         * cursors are allocated out of POOL, which is not accessable from the client.</span>
00153 <span class="comment">         */</span>
00154         <span class="keywordflow">if</span> (dwData) {
00155             dwData = <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a178">NtUserCallHwndParam</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a448">PtoH</a>(pwnd), index, SFI_GETCLASSICOCUR);
00156         }
00157         <span class="keywordflow">break</span>;
00158 
00159     <span class="keywordflow">case</span> GCLP_WNDPROC:
00160         {
00161 
00162         <span class="comment">/*</span>
00163 <span class="comment">         * Always return the client wndproc in case this is a server</span>
00164 <span class="comment">         * window class.</span>
00165 <span class="comment">         */</span>
00166 
00167         <span class="keywordflow">if</span> (pcls-&gt;<a class="code" href="../../d7/d0/structtagCLS.html#o7">CSF_flags</a> &amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a492">CSF_SERVERSIDEPROC</a>) {
00168             dwData = <a class="code" href="../../d2/d5/ntuser_2rtl_2getset_8c.html#a0">MapServerToClientPfn</a>(dwData, bAnsi);
00169         } <span class="keywordflow">else</span> {
00170             KERNEL_ULONG_PTR dwT = dwData;
00171 
00172             dwData = <a class="code" href="../../d2/d5/ntuser_2rtl_2getset_8c.html#a1">MapClientNeuterToClientPfn</a>(pcls, dwT, bAnsi);
00173 
00174             <span class="comment">/*</span>
00175 <span class="comment">             * If the client mapping didn't change the window proc then see if</span>
00176 <span class="comment">             * we need a callproc handle.</span>
00177 <span class="comment">             */</span>
00178             <span class="keywordflow">if</span> (dwData == dwT) {
00179                 <span class="comment">/*</span>
00180 <span class="comment">                 * Need to return a CallProc handle if there is an Ansi/Unicode mismatch</span>
00181 <span class="comment">                 */</span>
00182                 <span class="keywordflow">if</span> (bAnsi != !!(pcls-&gt;<a class="code" href="../../d7/d0/structtagCLS.html#o7">CSF_flags</a> &amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a493">CSF_ANSIPROC</a>)) {
00183                     dwCPDType |= bAnsi ? <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a459">CPD_ANSI_TO_UNICODE</a> : <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a460">CPD_UNICODE_TO_ANSI</a>;
00184                 }
00185             }
00186         }
00187 
00188         <span class="keywordflow">if</span> (dwCPDType) {
00189             ULONG_PTR dwCPD;
00190 
00191             dwCPD = <a class="code" href="../../d0/d5/ntuser_2kernel_2getset_8c.html#a7">GetCPD</a>(pwnd, dwCPDType | CPD_WNDTOCLS, KERNEL_ULONG_PTR_TO_ULONG_PTR(dwData));
00192 
00193             <span class="keywordflow">if</span> (dwCPD) {
00194                 dwData = dwCPD;
00195             } <span class="keywordflow">else</span> {
00196                 RIPMSG0(RIP_WARNING, <span class="stringliteral">"GetClassLong unable to alloc CPD returning handle\n"</span>);
00197             }
00198         }
00199         }
00200         <span class="keywordflow">break</span>;
00201 
00202     <span class="keywordflow">case</span> GCL_CBCLSEXTRA:
00203         <span class="keywordflow">if</span> ((pcls-&gt;<a class="code" href="../../d7/d0/structtagCLS.html#o7">CSF_flags</a> &amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a496">CSF_WOWCLASS</a>) &amp;&amp; (pcls-&gt;<a class="code" href="../../d7/d0/structtagCLS.html#o7">CSF_flags</a> &amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a497">CSF_WOWEXTRA</a>)) {
00204             <span class="comment">/*</span>
00205 <span class="comment">             * The 16-bit app changed its Extra bytes value.  Return the changed</span>
00206 <span class="comment">             * value.  FritzS</span>
00207 <span class="comment">             */</span>
00208 
00209             <span class="keywordflow">return</span> <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a491">PWCFromPCLS</a>(pcls)-&gt;iClsExtra;
00210         }
00211         <span class="keywordflow">else</span>
00212             <span class="keywordflow">return</span> pcls-&gt;cbclsExtra;
00213 
00214         <span class="keywordflow">break</span>;
00215 
00216     <span class="comment">/*</span>
00217 <span class="comment">     * WOW uses a pointer straight into the class structure.</span>
00218 <span class="comment">     */</span>
00219     <span class="keywordflow">case</span> GCLP_WOWWORDS:
00220         <span class="keywordflow">if</span> (pcls-&gt;<a class="code" href="../../d7/d0/structtagCLS.html#o7">CSF_flags</a> &amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a496">CSF_WOWCLASS</a>) {
00221             <span class="keywordflow">return</span> ((ULONG_PTR)<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a491">PWCFromPCLS</a>(pcls));
00222         } <span class="keywordflow">else</span>
00223             <span class="keywordflow">return</span> 0;
00224 
00225     <span class="keywordflow">case</span> GCL_STYLE:
00226         dwData &amp;= CS_VALID;
00227         <span class="keywordflow">break</span>;
00228     }
00229 
00230     <span class="keywordflow">return</span> KERNEL_ULONG_PTR_TO_ULONG_PTR(dwData);
00231 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="classc.c::_GetClassLongPtr" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ULONG_PTR _GetClassLongPtr           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>index</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>bAnsi</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d6/classc_8c-source.html#l00246">246</a> of file <a class="el" href="../../d6/d6/classc_8c-source.html">classc.c</a>.
<p>
References <a class="el" href="../../d6/d6/classc_8c-source.html#l00100">_GetClassData()</a>, <a class="el" href="../../d0/d7/halvprnt_8c-source.html#l00031">BYTE</a>, and <a class="el" href="../../d7/d9/usercli_8h-source.html#l00210">REBASEALWAYS</a>.
<p>
<pre class="fragment"><div>00250 {
00251     <a class="code" href="../../d7/d0/structtagCLS.html">PCLS</a> pcls = <a class="code" href="../../d6/d0/usercli_8h.html#a24">REBASEALWAYS</a>(pwnd, pcls);
00252 
00253     <span class="keywordflow">if</span> (index &lt; 0) {
00254         <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a631">_GetClassData</a>(pcls, pwnd, index, bAnsi);
00255     } <span class="keywordflow">else</span> {
00256         <span class="keywordflow">if</span> (index + (<span class="keywordtype">int</span>)<span class="keyword">sizeof</span>(ULONG_PTR) &gt; pcls-&gt;cbclsExtra) {
00257             RIPERR0(ERROR_INVALID_INDEX, RIP_VERBOSE, <span class="stringliteral">""</span>);
00258             <span class="keywordflow">return</span> 0;
00259         } <span class="keywordflow">else</span> {
00260             ULONG_PTR UNALIGNED *pudw;
00261             pudw = (ULONG_PTR UNALIGNED *)((<a class="code" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a> *)(pcls + 1) + index);
00262             <span class="keywordflow">return</span> *pudw;
00263         }
00264     }
00265 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="classc.c::GetClassWord" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> WORD GetClassWord           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>index</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d6/classc_8c-source.html#l00305">305</a> of file <a class="el" href="../../d6/d6/classc_8c-source.html">classc.c</a>.
<p>
References <a class="el" href="../../d6/d6/classc_8c-source.html#l00100">_GetClassData()</a>, <a class="el" href="../../d0/d7/halvprnt_8c-source.html#l00031">BYTE</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00210">REBASEALWAYS</a>, and <a class="el" href="../../d5/d9/immcli_8h-source.html#l00120">ValidateHwnd</a>.
<p>
<pre class="fragment"><div>00308 {
00309     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwnd;
00310     <a class="code" href="../../d7/d0/structtagCLS.html">PCLS</a> pclsClient;
00311 
00312     pwnd = <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(hwnd);
00313 
00314     <span class="keywordflow">if</span> (pwnd == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00315         <span class="keywordflow">return</span> 0;
00316 
00317     pclsClient = (<a class="code" href="../../d7/d0/structtagCLS.html">PCLS</a>)<a class="code" href="../../d6/d0/usercli_8h.html#a24">REBASEALWAYS</a>(pwnd, pcls);
00318 
00319     <span class="keywordflow">if</span> (index == GCW_ATOM) {
00320         <span class="keywordflow">return</span> (WORD)<a class="code" href="../../d6/d0/usercli_8h.html#a631">_GetClassData</a>(pclsClient, pwnd, index, FALSE);
00321     } <span class="keywordflow">else</span> {
00322         <span class="keywordflow">if</span> ((index &lt; 0) || (index + (int)sizeof(WORD) &gt; pclsClient-&gt;cbclsExtra)) {
00323             RIPERR0(ERROR_INVALID_INDEX, RIP_VERBOSE, <span class="stringliteral">""</span>);
00324             <span class="keywordflow">return</span> 0;
00325         } <span class="keywordflow">else</span> {
00326             WORD UNALIGNED *puw;
00327             puw = (WORD UNALIGNED *)((<a class="code" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a> *)(pclsClient + 1) + index);
00328             <span class="keywordflow">return</span> *puw;
00329         }
00330     }
00331 }
</div></pre>    </td>
  </tr>
</table>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="a1" doxytag="classc.c::afClassDWord" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> CONST <a class="el" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a> <a class="el" href="../../d2/d7/class_8c.html#a1">afClassDWord</a>[]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Initial value:</b><pre class="fragment"><div> {
     <a class="code" href="../../d9/d0/pnpiop_8h.html#a100">FIELD_SIZE</a>(<a class="code" href="../../d7/d0/structtagCLS.html">CLS</a>, spicnSm),          
     0,
     <a class="code" href="../../d9/d0/pnpiop_8h.html#a100">FIELD_SIZE</a>(<a class="code" href="../../d7/d0/structtagCLS.html">CLS</a>, atomClassName),    
     0,
     0,
     0,
     0,
     0,
     <a class="code" href="../../d9/d0/pnpiop_8h.html#a100">FIELD_SIZE</a>(<a class="code" href="../../d7/d0/structtagCLS.html">CLS</a>, style),            
     0,
     <a class="code" href="../../d9/d0/pnpiop_8h.html#a100">FIELD_SIZE</a>(<a class="code" href="../../d7/d0/structtagCLS.html">CLS</a>, lpfnWndProc),      
     0,
     0,
     0,
     <a class="code" href="../../d9/d0/pnpiop_8h.html#a100">FIELD_SIZE</a>(<a class="code" href="../../d7/d0/structtagCLS.html">CLS</a>, cbclsExtra),       
     0,
     <a class="code" href="../../d9/d0/pnpiop_8h.html#a100">FIELD_SIZE</a>(<a class="code" href="../../d7/d0/structtagCLS.html">CLS</a>, cbwndExtra),       
     0,
     <a class="code" href="../../d9/d0/pnpiop_8h.html#a100">FIELD_SIZE</a>(<a class="code" href="../../d7/d0/structtagCLS.html">CLS</a>, hModule),          
     0,
     <a class="code" href="../../d9/d0/pnpiop_8h.html#a100">FIELD_SIZE</a>(<a class="code" href="../../d7/d0/structtagCLS.html">CLS</a>, spicn),            
     0,
     <a class="code" href="../../d9/d0/pnpiop_8h.html#a100">FIELD_SIZE</a>(<a class="code" href="../../d7/d0/structtagCLS.html">CLS</a>, spcur),            
     0,
     <a class="code" href="../../d9/d0/pnpiop_8h.html#a100">FIELD_SIZE</a>(<a class="code" href="../../d7/d0/structtagCLS.html">CLS</a>, hbrBackground),    
     0,
     <a class="code" href="../../d9/d0/pnpiop_8h.html#a100">FIELD_SIZE</a>(<a class="code" href="../../d7/d0/structtagCLS.html">CLS</a>, lpszMenuName)      
}
</div></pre>
<p>
Definition at line <a class="el" href="../../d6/d6/classc_8c-source.html#l00021">21</a> of file <a class="el" href="../../d6/d6/classc_8c-source.html">classc.c</a>.
<p>
Referenced by <a class="el" href="../../d6/d6/classc_8c-source.html#l00100">_GetClassData()</a>, and <a class="el" href="../../d3/d6/class_8c-source.html#l01399">xxxSetClassData()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="classc.c::aiClassOffset" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> CONST <a class="el" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a> <a class="el" href="../../d2/d7/class_8c.html#a2">aiClassOffset</a>[]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Initial value:</b><pre class="fragment"><div> {
    FIELD_OFFSET(<a class="code" href="../../d7/d0/structtagCLS.html">CLS</a>, spicnSm),         
    0,
    FIELD_OFFSET(<a class="code" href="../../d7/d0/structtagCLS.html">CLS</a>, atomClassName),   
    0,
    0,
    0,
    0,
    0,
    FIELD_OFFSET(<a class="code" href="../../d7/d0/structtagCLS.html">CLS</a>, style),           
    0,
    FIELD_OFFSET(<a class="code" href="../../d7/d0/structtagCLS.html">CLS</a>, lpfnWndProc),     
    0,
    0,
    0,
    FIELD_OFFSET(<a class="code" href="../../d7/d0/structtagCLS.html">CLS</a>, cbclsExtra),      
    0,
    FIELD_OFFSET(<a class="code" href="../../d7/d0/structtagCLS.html">CLS</a>, cbwndExtra),      
    0,
    FIELD_OFFSET(<a class="code" href="../../d7/d0/structtagCLS.html">CLS</a>, hModule),         
    0,
    FIELD_OFFSET(<a class="code" href="../../d7/d0/structtagCLS.html">CLS</a>, spicn),           
    0,
    FIELD_OFFSET(<a class="code" href="../../d7/d0/structtagCLS.html">CLS</a>, spcur),           
    0,
    FIELD_OFFSET(<a class="code" href="../../d7/d0/structtagCLS.html">CLS</a>, hbrBackground),   
    0,
    FIELD_OFFSET(<a class="code" href="../../d7/d0/structtagCLS.html">CLS</a>, lpszMenuName)     
}
</div></pre>
<p>
Definition at line <a class="el" href="../../d6/d6/classc_8c-source.html#l00051">51</a> of file <a class="el" href="../../d6/d6/classc_8c-source.html">classc.c</a>.
<p>
Referenced by <a class="el" href="../../d6/d6/classc_8c-source.html#l00100">_GetClassData()</a>, and <a class="el" href="../../d3/d6/class_8c-source.html#l01399">xxxSetClassData()</a>.    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Sat May 15 19:43:04 2004 for test by
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>

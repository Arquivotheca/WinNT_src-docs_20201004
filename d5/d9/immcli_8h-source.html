<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>test: immcli.h Source File</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="../../main.html">Main&nbsp;Page</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Class&nbsp;List</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Class&nbsp;Members</a> | <a class="qindex" href="../../globals.html">File&nbsp;Members</a></div>
<h1>immcli.h</h1><a href="../../d4/d0/immcli_8h.html">Go to the documentation of this file.</a><pre class="fragment"><div>00001 <span class="comment">/****************************** Module Header ******************************\</span>
00002 <span class="comment">* Module Name: immcli.h</span>
00003 <span class="comment">*</span>
00004 <span class="comment">* Copyright (c) 1985 - 1999, Microsoft Corporation</span>
00005 <span class="comment">*</span>
00006 <span class="comment">* Typedefs, defines, and prototypes that are used exclusively by the IMM</span>
00007 <span class="comment">* client-side DLL.</span>
00008 <span class="comment">*</span>
00009 <span class="comment">* History:</span>
00010 <span class="comment">* 11-Jan-96 wkwok      Created</span>
00011 <span class="comment">\***************************************************************************/</span>
00012 
00013 <span class="preprocessor">#ifndef _IMMCLI_</span>
00014 <span class="preprocessor"></span><span class="preprocessor">#define _IMMCLI_</span>
00015 <span class="preprocessor"></span>
00016 <span class="preprocessor">#pragma once</span>
00017 <span class="preprocessor"></span>
<a name="l00018"></a><a class="code" href="../../d4/d0/immcli_8h.html#a0">00018</a> <span class="preprocessor">#define OEMRESOURCE 1</span>
00019 <span class="preprocessor"></span>
00020 <span class="preprocessor">#include &lt;windows.h&gt;</span>
00021 
00022 <span class="preprocessor">#include &lt;stddef.h&gt;</span>
00023 <span class="preprocessor">#include &lt;w32err.h&gt;</span>
00024 <span class="preprocessor">#include &lt;w32gdip.h&gt;</span>
00025 <span class="preprocessor">#include "winuserp.h"</span>
00026 <span class="preprocessor">#include "winuserk.h"</span>
00027 <span class="preprocessor">#include "kbd.h"</span>
00028 <span class="preprocessor">#include &lt;wowuserp.h&gt;</span>
00029 <span class="preprocessor">#include &lt;memory.h&gt;</span>
00030 <span class="preprocessor">#include &lt;string.h&gt;</span>
00031 <span class="preprocessor">#include &lt;imm.h&gt;</span>
00032 <span class="preprocessor">#include &lt;immp.h&gt;</span>
00033 <span class="preprocessor">#include &lt;ime.h&gt;</span>
00034 <span class="preprocessor">#include &lt;imep.h&gt;</span>
00035 <span class="preprocessor">#include &lt;winnls32.h&gt;</span>
00036 
00037 <span class="preprocessor">#include "<a class="code" href="../../d8/d0/immstruc_8h.html">immstruc.h</a>"</span>
00038 <span class="preprocessor">#include "<a class="code" href="../../d9/d0/immuser_8h.html">immuser.h</a>"</span>
00039 
00040 <span class="preprocessor">#include "<a class="code" href="../../d1/d0/inc_2user_8h.html">user.h</a>"</span>
00041 
<a name="l00042"></a><a class="code" href="../../d7/d3/struct__ENUMREGWORDDATA.html">00042</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d7/d3/struct__ENUMREGWORDDATA.html">_ENUMREGWORDDATA</a> {
00043     <span class="keyword">union </span>{
<a name="l00044"></a><a class="code" href="../../d7/d3/struct__ENUMREGWORDDATA.html#o0">00044</a>         REGISTERWORDENUMPROCW <a class="code" href="../../d7/d3/struct__ENUMREGWORDDATA.html#o0">w</a>;
<a name="l00045"></a><a class="code" href="../../d7/d3/struct__ENUMREGWORDDATA.html#o1">00045</a>         REGISTERWORDENUMPROCA <a class="code" href="../../d7/d3/struct__ENUMREGWORDDATA.html#o1">a</a>;
00046     } lpfn;
<a name="l00047"></a><a class="code" href="../../d7/d3/struct__ENUMREGWORDDATA.html#o3">00047</a>     <a class="code" href="../../d0/d5/perfuser_8c.html#a5">LPVOID</a> <a class="code" href="../../d7/d3/struct__ENUMREGWORDDATA.html#o3">lpData</a>;
<a name="l00048"></a><a class="code" href="../../d7/d3/struct__ENUMREGWORDDATA.html#o4">00048</a>     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>  <a class="code" href="../../d7/d3/struct__ENUMREGWORDDATA.html#o4">dwCodePage</a>;
00049 } <a class="code" href="../../d7/d3/struct__ENUMREGWORDDATA.html">ENUMREGWORDDATA</a>, *<a class="code" href="../../d7/d3/struct__ENUMREGWORDDATA.html">PENUMREGWORDDATA</a>;
00050 
<a name="l00051"></a><a class="code" href="../../d4/d0/immcli_8h.html#a1">00051</a> <span class="preprocessor">#define HEX_ASCII_SIZE          20</span>
00052 <span class="preprocessor"></span>
<a name="l00053"></a><a class="code" href="../../d1/d8/structtagIMELAYOUT.html">00053</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d1/d8/structtagIMELAYOUT.html">tagIMELAYOUT</a> {
<a name="l00054"></a><a class="code" href="../../d1/d8/structtagIMELAYOUT.html#o0">00054</a>     HKL     <a class="code" href="../../d1/d8/structtagIMELAYOUT.html#o0">hImeKL</a>;
<a name="l00055"></a><a class="code" href="../../d1/d8/structtagIMELAYOUT.html#o1">00055</a>     WCHAR   <a class="code" href="../../d1/d8/structtagIMELAYOUT.html#o1">szKeyName</a>[<a class="code" href="../../d4/d0/immcli_8h.html#a1">HEX_ASCII_SIZE</a>];
<a name="l00056"></a><a class="code" href="../../d1/d8/structtagIMELAYOUT.html#o2">00056</a>     WCHAR   <a class="code" href="../../d1/d8/structtagIMELAYOUT.html#o2">szImeName</a>[<a class="code" href="../../d8/d0/immstruc_8h.html#a22">IM_FILE_SIZE</a>];
00057 } <a class="code" href="../../d1/d8/structtagIMELAYOUT.html">IMELAYOUT</a>, *<a class="code" href="../../d1/d8/structtagIMELAYOUT.html">PIMELAYOUT</a>;
00058 
<a name="l00059"></a><a class="code" href="../../d4/d0/immcli_8h.html#a2">00059</a> <span class="preprocessor">#define ImmAssert UserAssert</span>
00060 <span class="preprocessor"></span>
00061 <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d2/d5/structtagFE__KEYBOARDS.html">tagFE_KEYBOARDS</a> {
<a name="l00062"></a><a class="code" href="../../d2/d5/structtagFE__KEYBOARDS.html#o0">00062</a>     BOOLEAN <a class="code" href="../../d2/d5/structtagFE__KEYBOARDS.html#o0">fJPN</a> : 1;
<a name="l00063"></a><a class="code" href="../../d2/d5/structtagFE__KEYBOARDS.html#o1">00063</a>     BOOLEAN <a class="code" href="../../d2/d5/structtagFE__KEYBOARDS.html#o1">fCHT</a> : 1;
<a name="l00064"></a><a class="code" href="../../d2/d5/structtagFE__KEYBOARDS.html#o2">00064</a>     BOOLEAN <a class="code" href="../../d2/d5/structtagFE__KEYBOARDS.html#o2">fCHS</a> : 1;
<a name="l00065"></a><a class="code" href="../../d2/d5/structtagFE__KEYBOARDS.html#o3">00065</a>     BOOLEAN <a class="code" href="../../d2/d5/structtagFE__KEYBOARDS.html#o3">fKOR</a> : 1;
00066 } <a class="code" href="../../d2/d5/structtagFE__KEYBOARDS.html">FE_KEYBOARDS</a>;
00067 
00068 <span class="comment">/*</span>
00069 <span class="comment"> * Function pointers to registry routines in advapi32.dll.</span>
00070 <span class="comment"> */</span>
00071 <span class="keyword">typedef</span> <span class="keyword">struct </span>{
00072     LONG (WINAPI* RegCreateKeyW)(HKEY, LPCWSTR, PHKEY);
00073     LONG (WINAPI* RegOpenKeyW)(HKEY, LPCWSTR, PHKEY);
00074     LONG (WINAPI* RegCloseKey)(HKEY);
00075     LONG (WINAPI* RegDeleteKeyW)(HKEY, LPCWSTR);
<a name="l00076"></a><a class="code" href="../../d8/d0/structADVAPI__FN.html#o5">00076</a>     LONG (WINAPI* RegCreateKeyExW)(HKEY, LPCWSTR, <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>, LPWSTR, <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>, REGSAM, <a class="code" href="../../d6/d1/userrtl_8h.html#a30">LPSECURITY_ATTRIBUTES</a>, PHKEY, LPDWORD);
<a name="l00077"></a><a class="code" href="../../d8/d0/structADVAPI__FN.html#o8">00077</a>     LONG (WINAPI* RegSetValueExW)(HKEY, LPCWSTR, <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> Reserved, <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>, CONST <a class="code" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a>*, <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>);
<a name="l00078"></a><a class="code" href="../../d8/d0/structADVAPI__FN.html#o7">00078</a>     LONG (WINAPI* RegQueryValueExW)(HKEY, LPCWSTR, LPDWORD, LPDWORD, LPBYTE, LPDWORD);
<a name="l00079"></a><a class="code" href="../../d8/d0/structADVAPI__FN.html#o0">00079</a>     HMODULE hModule;
<a name="l00080"></a><a class="code" href="../../d8/d0/structADVAPI__FN.html#o12">00080</a>     BOOLEAN fOk;
00081 } <a class="code" href="../../d8/d0/structADVAPI__FN.html">ADVAPI_FN</a>;
00082 
00083 <span class="comment">/***************************************************************************\</span>
00084 <span class="comment">*</span>
00085 <span class="comment">* Globals declarations</span>
00086 <span class="comment">*</span>
00087 <span class="comment">\***************************************************************************/</span>
00088 
<a name="l00089"></a><a class="code" href="../../d4/d0/immcli_8h.html#a51">00089</a> <span class="keyword">extern</span> BOOLEAN <a class="code" href="../../d2/d6/ntuser_2imm_2globals_8c.html#a1">gfInitialized</a>;
<a name="l00090"></a><a class="code" href="../../d4/d0/immcli_8h.html#a52">00090</a> <span class="keyword">extern</span> HINSTANCE <a class="code" href="../../d2/d6/ntuser_2imm_2globals_8c.html#a2">ghInst</a>;
<a name="l00091"></a><a class="code" href="../../d4/d0/immcli_8h.html#a53">00091</a> <span class="keyword">extern</span> PVOID <a class="code" href="../../d2/d6/ntuser_2imm_2globals_8c.html#a3">pImmHeap</a>;
<a name="l00092"></a><a class="code" href="../../d4/d0/immcli_8h.html#a54">00092</a> <span class="keyword">extern</span> <a class="code" href="../../d2/d6/structtagSERVERINFO.html">PSERVERINFO</a> <a class="code" href="../../d1/d8/clglobal_8c.html#a4">gpsi</a>;
<a name="l00093"></a><a class="code" href="../../d4/d0/immcli_8h.html#a55">00093</a> <span class="keyword">extern</span> <a class="code" href="../../d4/d6/structtagSHAREDINFO.html">SHAREDINFO</a> <a class="code" href="../../d1/d8/clglobal_8c.html#a5">gSharedInfo</a>;
00094 
<a name="l00095"></a><a class="code" href="../../d4/d0/immcli_8h.html#a56">00095</a> <span class="keyword">extern</span> <a class="code" href="../../d2/d7/structtagIMEDPI.html">PIMEDPI</a> <a class="code" href="../../d2/d6/ntuser_2imm_2globals_8c.html#a7">gpImeDpi</a>;
<a name="l00096"></a><a class="code" href="../../d4/d0/immcli_8h.html#a57">00096</a> <span class="keyword">extern</span> CRITICAL_SECTION <a class="code" href="../../d2/d6/ntuser_2imm_2globals_8c.html#a8">gcsImeDpi</a>;
00097 
<a name="l00098"></a><a class="code" href="../../d4/d0/immcli_8h.html#a58">00098</a> <span class="keyword">extern</span> POINT     <a class="code" href="../../d4/d0/immcli_8h.html#a58">gptWorkArea</a>;
<a name="l00099"></a><a class="code" href="../../d4/d0/immcli_8h.html#a59">00099</a> <span class="keyword">extern</span> POINT     <a class="code" href="../../d2/d6/ntuser_2imm_2globals_8c.html#a9">gptRaiseEdge</a>;
<a name="l00100"></a><a class="code" href="../../d4/d0/immcli_8h.html#a60">00100</a> <span class="keyword">extern</span> <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>      <a class="code" href="../../d2/d6/ntuser_2imm_2globals_8c.html#a10">guScanCode</a>[0XFF];
00101 
<a name="l00102"></a><a class="code" href="../../d4/d0/immcli_8h.html#a61">00102</a> <span class="keyword">extern</span> CONST WCHAR     <a class="code" href="../../d2/d6/ntuser_2imm_2globals_8c.html#a11">gszRegKbdLayout</a>[];
00103 <span class="preprocessor">#ifdef LATER</span>
00104 <span class="preprocessor"></span><span class="keyword">extern</span> CONST <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a>       sizeof_gszRegKbdLayout;
00105 <span class="preprocessor">#endif</span>
<a name="l00106"></a><a class="code" href="../../d4/d0/immcli_8h.html#a62">00106</a> <span class="preprocessor"></span><span class="keyword">extern</span> CONST WCHAR     <a class="code" href="../../d2/d6/ntuser_2imm_2globals_8c.html#a12">gszRegKbdOrder</a>[];
<a name="l00107"></a><a class="code" href="../../d4/d0/immcli_8h.html#a63">00107</a> <span class="keyword">extern</span> CONST WCHAR     <a class="code" href="../../d2/d6/ntuser_2imm_2globals_8c.html#a13">gszValLayoutText</a>[];
<a name="l00108"></a><a class="code" href="../../d4/d0/immcli_8h.html#a64">00108</a> <span class="keyword">extern</span> CONST WCHAR     <a class="code" href="../../d2/d6/ntuser_2imm_2globals_8c.html#a14">gszValLayoutFile</a>[];
<a name="l00109"></a><a class="code" href="../../d4/d0/immcli_8h.html#a65">00109</a> <span class="keyword">extern</span> CONST WCHAR     <a class="code" href="../../d2/d6/ntuser_2imm_2globals_8c.html#a15">gszValImeFile</a>[];
00110 
00111 
00112 <span class="comment">/***************************************************************************\</span>
00113 <span class="comment">*</span>
00114 <span class="comment">* Validation handling</span>
00115 <span class="comment">*</span>
00116 <span class="comment">\***************************************************************************/</span>
00117 
<a name="l00118"></a><a class="code" href="../../d4/d0/immcli_8h.html#a3">00118</a> <span class="preprocessor">#define bUser32Initialized (gpsi != NULL)</span>
00119 <span class="preprocessor"></span>
<a name="l00120"></a><a class="code" href="../../d4/d0/immcli_8h.html#a4">00120</a> <span class="preprocessor">#define ValidateHwnd(hwnd)   (((hwnd) == (HWND)NULL || !bUser32Initialized) \</span>
00121 <span class="preprocessor">        ? (PWND)NULL : HMValidateHandle(hwnd, TYPE_WINDOW))</span>
00122 <span class="preprocessor"></span>
<a name="l00123"></a><a class="code" href="../../d4/d0/immcli_8h.html#a5">00123</a> <span class="preprocessor">#define ValidateHimc(himc)   (((himc) == (HIMC)NULL || !bUser32Initialized) \</span>
00124 <span class="preprocessor">        ? (PIMC)NULL : HMValidateHandle((HANDLE)himc, TYPE_INPUTCONTEXT))</span>
00125 <span class="preprocessor"></span>
<a name="l00126"></a><a class="code" href="../../d4/d0/immcli_8h.html#a6">00126</a> <span class="preprocessor">#define RevalidateHimc(himc) (((himc) == (HIMC)NULL || !bUser32Initialized) \</span>
00127 <span class="preprocessor">        ? (PIMC)NULL : HMValidateHandleNoRip((HANDLE)himc, TYPE_INPUTCONTEXT))</span>
00128 <span class="preprocessor"></span>
00129 <span class="comment">/***************************************************************************\</span>
00130 <span class="comment">*</span>
00131 <span class="comment">* Memory management macros</span>
00132 <span class="comment">*</span>
00133 <span class="comment">\***************************************************************************/</span>
00134 
00135 <a class="code" href="../../d0/d5/perfuser_8c.html#a5">LPVOID</a>  <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a22">ImmLocalAlloc</a>(DWORD uFlag, DWORD uBytes);
<a name="l00136"></a><a class="code" href="../../d4/d0/immcli_8h.html#a7">00136</a> <span class="preprocessor">#define ImmLocalReAlloc(p, uBytes, uFlags) HeapReAlloc(pImmHeap, uFlags, (LPSTR)(p), (uBytes))</span>
<a name="l00137"></a><a class="code" href="../../d4/d0/immcli_8h.html#a8">00137</a> <span class="preprocessor"></span><span class="preprocessor">#define ImmLocalFree(p)    HeapFree(pImmHeap, 0, (LPSTR)(p))</span>
<a name="l00138"></a><a class="code" href="../../d4/d0/immcli_8h.html#a9">00138</a> <span class="preprocessor"></span><span class="preprocessor">#define ImmLocalSize(p)    HeapSize(pImmHeap, 0, (LPSTR)(p))</span>
<a name="l00139"></a><a class="code" href="../../d4/d0/immcli_8h.html#a10">00139</a> <span class="preprocessor"></span><span class="preprocessor">#define ImmLocalLock(p)    (LPSTR)(p)</span>
<a name="l00140"></a><a class="code" href="../../d4/d0/immcli_8h.html#a11">00140</a> <span class="preprocessor"></span><span class="preprocessor">#define ImmLocalUnlock(p)</span>
<a name="l00141"></a><a class="code" href="../../d4/d0/immcli_8h.html#a12">00141</a> <span class="preprocessor"></span><span class="preprocessor">#define ImmLocalFlags(p)   0</span>
<a name="l00142"></a><a class="code" href="../../d4/d0/immcli_8h.html#a13">00142</a> <span class="preprocessor"></span><span class="preprocessor">#define ImmLocalHandle(p)  (HLOCAL)(p)</span>
00143 <span class="preprocessor"></span>
00144 <span class="comment">/***************************************************************************\</span>
00145 <span class="comment">*</span>
00146 <span class="comment">* Other Typedefs and Macros</span>
00147 <span class="comment">*</span>
00148 <span class="comment">\***************************************************************************/</span>
<a name="l00149"></a><a class="code" href="../../d4/d0/immcli_8h.html#a14">00149</a> <span class="preprocessor">#define GetInputContextProcess(himc) \</span>
00150 <span class="preprocessor">            (DWORD)NtUserQueryInputContext(himc, InputContextProcess)</span>
00151 <span class="preprocessor"></span>
<a name="l00152"></a><a class="code" href="../../d4/d0/immcli_8h.html#a15">00152</a> <span class="preprocessor">#define GetInputContextThread(himc) \</span>
00153 <span class="preprocessor">            (DWORD)NtUserQueryInputContext(himc, InputContextThread)</span>
00154 <span class="preprocessor"></span>
<a name="l00155"></a><a class="code" href="../../d4/d0/immcli_8h.html#a16">00155</a> <span class="preprocessor">#define GetWindowProcess(hwnd) \</span>
00156 <span class="preprocessor">            (ULONG_PTR)NtUserQueryWindow(hwnd, WindowProcess)</span>
00157 <span class="preprocessor"></span>
<a name="l00158"></a><a class="code" href="../../d4/d0/immcli_8h.html#a17">00158</a> <span class="preprocessor">#define GETPROCESSID() (ULONG_PTR)(NtCurrentTeb()-&gt;ClientId.UniqueProcess)</span>
00159 <span class="preprocessor"></span>
<a name="l00160"></a><a class="code" href="../../d4/d0/immcli_8h.html#a18">00160</a> <span class="preprocessor">#define DWORD_ALIGN(x) ((x+3)&amp;~3)</span>
00161 <span class="preprocessor"></span>
<a name="l00162"></a><a class="code" href="../../d4/d0/immcli_8h.html#a19">00162</a> <span class="preprocessor">#define SetICF(pClientImc, flag)  ((pClientImc)-&gt;dwFlags |= flag)</span>
00163 <span class="preprocessor"></span>
<a name="l00164"></a><a class="code" href="../../d4/d0/immcli_8h.html#a20">00164</a> <span class="preprocessor">#define ClrICF(pClientImc, flag)  ((pClientImc)-&gt;dwFlags &amp;= ~flag)</span>
00165 <span class="preprocessor"></span>
<a name="l00166"></a><a class="code" href="../../d4/d0/immcli_8h.html#a21">00166</a> <span class="preprocessor">#define TestICF(pClientImc, flag) ((pClientImc)-&gt;dwFlags &amp; flag)</span>
00167 <span class="preprocessor"></span>
<a name="l00168"></a><a class="code" href="../../d4/d0/immcli_8h.html#a22">00168</a> <span class="preprocessor">#define IsWndEqual(hWnd1, hWnd2) (LOWORD(HandleToUlong(hWnd1)) == LOWORD(HandleToUlong(hWnd2)) &amp;&amp; \</span>
00169 <span class="preprocessor">            ValidateHwnd(hWnd1) == ValidateHwnd(hWnd2))</span>
00170 <span class="preprocessor"></span>
<a name="l00171"></a><a class="code" href="../../d4/d0/immcli_8h.html#a23">00171</a> <span class="preprocessor">#define HKL_TO_LANGID(hkl)      (LOWORD(HandleToUlong(hkl)))</span>
00172 <span class="preprocessor"></span>
00173 <span class="comment">/*</span>
00174 <span class="comment"> * Obsolete, but keep this for backward compat. for a while</span>
00175 <span class="comment"> */</span>
<a name="l00176"></a><a class="code" href="../../d4/d0/immcli_8h.html#a24">00176</a> <span class="preprocessor">#define LANGIDFROMHKL(hkl)      (LOBYTE(LOWORD((ULONG_PTR)hkl)))</span>
00177 <span class="preprocessor"></span>
00178 <span class="preprocessor">#ifdef IMM_CONV_ON_HKL</span>
00179 <span class="preprocessor"></span><span class="preprocessor">#define IMECodePage(pImeDpi)        ((pImeDpi)-&gt;dwCodePage)</span>
00180 <span class="preprocessor"></span><span class="preprocessor">#define CImcCodePage(pClientImc)    ((pClientImc)-&gt;dwCodePage)</span>
00181 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l00182"></a><a class="code" href="../../d4/d0/immcli_8h.html#a25">00182</a> <span class="preprocessor"></span><span class="preprocessor">#define IMECodePage(pImeDpi)        (CP_ACP)</span>
<a name="l00183"></a><a class="code" href="../../d4/d0/immcli_8h.html#a26">00183</a> <span class="preprocessor"></span><span class="preprocessor">#define CImcCodePage(pClientImc)    (CP_ACP)</span>
00184 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00185 <span class="preprocessor"></span>
00186 <span class="comment">/***************************************************************************\</span>
00187 <span class="comment">*</span>
00188 <span class="comment">* Function declarations</span>
00189 <span class="comment">*</span>
00190 <span class="comment">\***************************************************************************/</span>
00191 
00192 <span class="comment">/*</span>
00193 <span class="comment"> * context.c</span>
00194 <span class="comment"> */</span>
00195 <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> <a class="code" href="../../d4/d1/userk_8h.html#a2030">CreateInputContext</a>(
00196     HIMC hImc,
00197     HKL  hKL,
00198     BOOL fCanCallImeSelect);
00199 
00200 <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> <a class="code" href="../../d4/d1/userk_8h.html#a2031">DestroyInputContext</a>(
00201     HIMC      hImc,
00202     HKL       hKL,
00203     BOOL      bTerminate);
00204 
00205 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a> <a class="code" href="../../d4/d0/immcli_8h.html#a70">SelectInputContext</a>(
00206     HKL  hSelKL,
00207     HKL  hUnSelKL,
00208     HIMC hImc);
00209 
00210 <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> <a class="code" href="../../d4/d1/userk_8h.html#a2037">BuildHimcList</a>(
00211     DWORD idThread,
00212     HIMC **pphimcFirst);
00213 
00214 HIMC <a class="code" href="../../d4/d0/immcli_8h.html#a72">ImmGetSaveContext</a>(
00215     HWND  hWnd,
00216     DWORD dwFlag);
00217 
00218 <span class="comment">/*</span>
00219 <span class="comment"> * ctxtinfo.c</span>
00220 <span class="comment"> */</span>
00221 <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> <a class="code" href="../../d4/d0/immcli_8h.html#a73">ImmSetCompositionStringWorker</a>(
00222     HIMC    hImc,
00223     DWORD   dwIndex,
00224     LPVOID lpComp,
00225     DWORD   dwCompLen,
00226     LPVOID lpRead,
00227     DWORD   dwReadLen,
00228     BOOL    fAnsi);
00229 
00230 <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> <a class="code" href="../../d4/d0/immcli_8h.html#a74">ImmGetCandidateListCountWorker</a>(
00231     HIMC    hImc,
00232     LPDWORD lpdwListCount,
00233     BOOL    fAnsi);
00234 
00235 <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> <a class="code" href="../../d4/d0/immcli_8h.html#a75">ImmGetCandidateListWorker</a>(
00236     HIMC            hImc,
00237     DWORD           dwIndex,
00238     LPCANDIDATELIST lpCandList,
00239     DWORD           dwBufLen,
00240     BOOL            fAnsi);
00241 
00242 <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> <a class="code" href="../../d4/d0/immcli_8h.html#a76">ImmGetGuideLineWorker</a>(
00243     HIMC    hImc,
00244     DWORD   dwIndex,
00245     LPBYTE  lpBuf,
00246     DWORD   dwBufLen,
00247     BOOL    fAnsi);
00248 
00249 LONG <a class="code" href="../../d4/d0/immcli_8h.html#a77">InternalGetCompositionStringA</a>(
00250     LPCOMPOSITIONSTRING lpCompStr,
00251     DWORD               dwIndex,
00252     LPVOID              lpBuf,
00253     DWORD               dwBufLen,
00254     BOOL                fAnsiImc,
00255     DWORD               dwCodePage);
00256 
00257 LONG <a class="code" href="../../d4/d0/immcli_8h.html#a78">InternalGetCompositionStringW</a>(
00258     LPCOMPOSITIONSTRING lpCompStr,
00259     DWORD               dwIndex,
00260     LPVOID              lpBuf,
00261     DWORD               dwBufLen,
00262     BOOL                fAnsiImc,
00263     DWORD               dwCodePage);
00264 
00265 <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> <a class="code" href="../../d4/d0/immcli_8h.html#a79">InternalGetCandidateListAtoW</a>(
00266     LPCANDIDATELIST     lpCandListA,
00267     LPCANDIDATELIST     lpCandListW,
00268     DWORD               dwBufLen,
00269     DWORD               dwCodePage);
00270 
00271 <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> <a class="code" href="../../d4/d0/immcli_8h.html#a80">InternalGetCandidateListWtoA</a>(
00272     LPCANDIDATELIST     lpCandListW,
00273     LPCANDIDATELIST     lpCandListA,
00274     DWORD               dwBufLen,
00275     DWORD               dwCodePage);
00276 
00277 <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> <a class="code" href="../../d4/d0/immcli_8h.html#a81">CalcCharacterPositionAtoW</a>(
00278     DWORD dwCharPosA,
00279     LPSTR lpszCharStr,
00280     DWORD dwCodePage);
00281 
00282 <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> <a class="code" href="../../d4/d0/immcli_8h.html#a82">CalcCharacterPositionWtoA</a>(
00283     DWORD dwCharPosW,
00284     LPWSTR lpwszCharStr,
00285     DWORD  dwCodePage);
00286 
00287 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a> <a class="code" href="../../d4/d0/immcli_8h.html#a83">LFontAtoLFontW</a>(
00288     LPLOGFONTA lfFontA,
00289     LPLOGFONTW lfFontW);
00290 
00291 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a> <a class="code" href="../../d4/d0/immcli_8h.html#a84">LFontWtoLFontA</a>(
00292     LPLOGFONTW lfFontW,
00293     LPLOGFONTA lfFontA);
00294 
00295 <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> <a class="code" href="../../d4/d0/immcli_8h.html#a85">MakeIMENotify</a>(
00296     HIMC   hImc,
00297     HWND   hWnd,
00298     DWORD  dwAction,
00299     DWORD  dwIndex,
00300     DWORD  dwValue,
00301     WPARAM wParam,
00302     LPARAM lParam);
00303 
00304 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a> <a class="code" href="../../d4/d0/immcli_8h.html#a86">ImmSendNotification</a>(
00305     BOOL fForProcess);
00306 
00307 
00308 <span class="comment">/*</span>
00309 <span class="comment"> * immime.c</span>
00310 <span class="comment"> */</span>
00311 <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> <a class="code" href="../../d6/d0/immime_8c.html#a7">InquireIme</a>(
00312     <a class="code" href="../../d2/d7/structtagIMEDPI.html">PIMEDPI</a> pImeDpi);
00313 
00314 <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> <a class="code" href="../../d6/d0/immime_8c.html#a8">LoadIME</a>(
00315     <a class="code" href="../../d0/d8/structtagIMEINFOEX.html">PIMEINFOEX</a> piiex,
00316     <a class="code" href="../../d2/d7/structtagIMEDPI.html">PIMEDPI</a>    pImeDpi);
00317 
00318 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a> <a class="code" href="../../d6/d0/immime_8c.html#a9">UnloadIME</a>(
00319     <a class="code" href="../../d2/d7/structtagIMEDPI.html">PIMEDPI</a> pImeDpi,
00320     BOOL    fTerminateIme);
00321 
00322 <a class="code" href="../../d2/d7/structtagIMEDPI.html">PIMEDPI</a> <a class="code" href="../../d6/d0/immime_8c.html#a10">LoadImeDpi</a>(
00323     HKL  hKL,
00324     BOOL fLock);
00325 
00326 <a class="code" href="../../d2/d7/structtagIMEDPI.html">PIMEDPI</a> <a class="code" href="../../d6/d0/immime_8c.html#a11">FindOrLoadImeDpi</a>(
00327     HKL hKL);
00328 
00329 <span class="comment">/*</span>
00330 <span class="comment"> * layime.c</span>
00331 <span class="comment"> */</span>
00332 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a> <a class="code" href="../../d3/d1/layime_8c.html#a17">GetSystemPathName</a>(PWSTR <span class="comment">/*OUT*/</span> pwszPath, PWSTR pwszFileName, UINT maxChar);
00333 
00334 <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> <a class="code" href="../../d3/d1/layime_8c.html#a22">LoadVersionInfo</a>(
00335     <a class="code" href="../../d0/d8/structtagIMEINFOEX.html">PIMEINFOEX</a> piiex);
00336 
00337 LPWSTR <a class="code" href="../../d4/d0/immcli_8h.html#a94">MakeStringFromRegFullInfo</a>(PKEY_VALUE_FULL_INFORMATION pKey, size_t limit);
00338 
00339 <span class="comment">/*</span>
00340 <span class="comment"> * misc.c</span>
00341 <span class="comment"> */</span>
00342 
00343 PINPUTCONTEXT <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a11">InternalImmLockIMC</a>(
00344     HIMC hImc,
00345     BOOL fCanCallImeSelect);
00346 
00347 <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a8">ImmIsUIMessageWorker</a>(
00348     HWND   hIMEWnd,
00349     UINT   message,
00350     WPARAM wParam,
00351     LPARAM lParam,
00352     BOOL   fAnsi);
00353 
00354 
00355 <a class="code" href="../../d2/d8/structtagTHREADINFO.html">PTHREADINFO</a> <a class="code" href="../../d4/d1/userk_8h.html#a9">PtiCurrent</a>(VOID);
00356 
00357 <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a24">TestInputContextProcess</a>(
00358     <a class="code" href="../../d1/d7/structtagIMC.html">PIMC</a> pImc);
00359 
00360 <a class="code" href="../../d2/d7/structtagIMEDPI.html">PIMEDPI</a> <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a30">ImmGetImeDpi</a>(HKL hKL);
00361 <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>   <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a34">ImmGetAppCompatFlags</a>(HIMC hImc);
00362 
00363 <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a35">ImmPtInRect</a>(
00364     <span class="keywordtype">int</span> left,
00365     <span class="keywordtype">int</span> top,
00366     <span class="keywordtype">int</span> width,
00367     <span class="keywordtype">int</span> height,
00368     LPPOINT lppt);
00369 
00370 <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a26">GetKeyboardLayoutCP</a>(
00371     HKL hKL);
00372 
00373 <span class="comment">/*</span>
00374 <span class="comment"> * regword.c</span>
00375 <span class="comment"> */</span>
00376 <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> CALLBACK <a class="code" href="../../d6/d7/regword_8c.html#a8">EnumRegisterWordProcA</a>(
00377     LPCSTR            lpszReading,
00378     DWORD             dwStyle,
00379     LPCSTR            lpszString,
00380     PENUMREGWORDDATA  pEnumRegWordData);
00381 
00382 <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> CALLBACK <a class="code" href="../../d6/d7/regword_8c.html#a9">EnumRegisterWordProcW</a>(
00383     LPCWSTR          lpwszReading,
00384     DWORD            dwStyle,
00385     LPCWSTR          lpwszString,
00386     PENUMREGWORDDATA pEnumRegWordData);
00387 
00388 <span class="comment">/*</span>
00389 <span class="comment"> * hotkey.c</span>
00390 <span class="comment"> */</span>
00391 
00392 
00393 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a> <a class="code" href="../../d4/d3/ntuser_2imm_2input_8c.html#a4">ImmPostMessages</a>(
00394     HWND hwnd,
00395     HIMC hImc,
00396     INT  iNum,
00397     PTRANSMSG pTransMsg);
00398 
00399 <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> <a class="code" href="../../d4/d0/immcli_8h.html#a105">HotKeyIDDispatcher</a>( HWND hWnd, HIMC hImc, HKL hKL, DWORD dwHotKeyID );
00400 
00401 <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> <a class="code" href="../../d4/d0/immcli_8h.html#a106">OpenRegApi</a>(<a class="code" href="../../d8/d0/structADVAPI__FN.html">ADVAPI_FN</a>* pfn);
00402 <span class="keywordtype">void</span> <a class="code" href="../../d4/d0/immcli_8h.html#a107">CloseRegApi</a>(<a class="code" href="../../d8/d0/structADVAPI__FN.html">ADVAPI_FN</a>* pfn);
00403 
00404 <span class="comment">/*</span>
00405 <span class="comment"> * transsub.c</span>
00406 <span class="comment"> */</span>
00407 LRESULT <a class="code" href="../../d2/d5/transsub_8c.html#a24">TranslateIMESubFunctions</a>(
00408     HWND hWndApp,
00409     LPIMESTRUCT lpIme,
00410     BOOL fAnsi);
00411 
00412 LRESULT <a class="code" href="../../d2/d5/transsub_8c.html#a25">TransGetLevel</a>( HWND hWndApp );
00413 LRESULT <a class="code" href="../../d2/d5/transsub_8c.html#a26">TransSetLevel</a>( HWND hWndApp, LPIMESTRUCT lpIme);
00414 
00415 <span class="comment">/*</span>
00416 <span class="comment"> * kcodecnv.c</span>
00417 <span class="comment"> */</span>
00418 LRESULT <a class="code" href="../../d6/d3/kcodecnv_8c.html#a18">TransCodeConvert</a>( HIMC hImc, LPIMESTRUCT lpIme);
00419 LRESULT <a class="code" href="../../d6/d3/kcodecnv_8c.html#a19">TransConvertList</a>( HIMC hImc, LPIMESTRUCT lpIme);
00420 LRESULT <a class="code" href="../../d6/d3/kcodecnv_8c.html#a20">TransGetMNTable</a>( HIMC hImc, LPIMESTRUCT lpIme);
00421 
00422 <span class="comment">/*</span>
00423 <span class="comment"> * ktranmsg.c</span>
00424 <span class="comment"> */</span>
00425 <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> <a class="code" href="../../d7/d0/ktranmsg_8c.html#a3">WINNLSTranslateMessageK</a>(
00426     <span class="keywordtype">int</span>                 iNumMsg,
00427     PTRANSMSG           pTransMsg,
00428     LPINPUTCONTEXT      lpIMC,
00429     LPCOMPOSITIONSTRING lpCompStr,
00430     BOOL bAnsiIMC);
00431 
00432 <span class="comment">/*</span>
00433 <span class="comment"> * jtranmsg.c</span>
00434 <span class="comment"> */</span>
00435 <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> <a class="code" href="../../d4/d8/jtranmsg_8c.html#a18">WINNLSTranslateMessageJ</a>(
00436     UINT                uiNumMsg,
00437     PTRANSMSG           pTransMsg,
00438     LPINPUTCONTEXT      lpIMC,
00439     LPCOMPOSITIONSTRING lpCompStr,
00440     BOOL bAnsiIMC );
00441 
00442 <span class="comment">/*</span>
00443 <span class="comment"> * input.c</span>
00444 <span class="comment"> */</span>
00445 <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> <a class="code" href="../../d4/d3/ntuser_2imm_2input_8c.html#a5">WINNLSTranslateMessage</a>(
00446     INT    iNum,         <span class="comment">// number of messages in the source buffer</span>
00447     PTRANSMSG pTransMsg, <span class="comment">// source buffer that contains 4.0 style messages</span>
00448     HIMC   hImc,         <span class="comment">// input context handle</span>
00449     BOOL   fAnsi,        <span class="comment">// TRUE if pdwt contains ANSI messages</span>
00450     DWORD  dwLangId );   <span class="comment">// language ID ( KOREAN or JAPANESE )</span>
00451 
00452 
00453 <span class="comment">/*</span>
00454 <span class="comment"> * support routine: IsAnsiClientIMC</span>
00455 <span class="comment"> */</span>
<a name="l00456"></a><a class="code" href="../../d4/d0/immcli_8h.html#a117">00456</a> __inline <span class="keywordtype">int</span> <a class="code" href="../../d4/d0/immcli_8h.html#a117">IsAnsiIMC</a>(HIMC hIMC)
00457 {
00458     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> bAnsi;
00459 
00460     <span class="comment">// get ansi mode of origin IMC</span>
00461     <a class="code" href="../../d3/d0/structtagCLIENTIMC.html">PCLIENTIMC</a> pClientIMC = <a class="code" href="../../d9/d0/immuser_8h.html#a43">ImmLockClientImc</a>(hIMC);
00462     <span class="keywordflow">if</span> (pClientIMC == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00463         <span class="keywordflow">return</span> -1;
00464     }
00465     bAnsi = !<a class="code" href="../../d4/d0/immcli_8h.html#a21">TestICF</a>(pClientIMC, <a class="code" href="../../d8/d0/immstruc_8h.html#a4">IMCF_UNICODE</a>);
00466     <a class="code" href="../../d9/d0/immuser_8h.html#a44">ImmUnlockClientImc</a>(pClientIMC);
00467     <span class="keywordflow">return</span> bAnsi;
00468 }
00469 
<a name="l00470"></a><a class="code" href="../../d4/d0/immcli_8h.html#a27">00470</a> <span class="preprocessor">#define TRACE(x)</span>
00471 <span class="preprocessor"></span>
00472 <span class="comment">//</span>
00473 <span class="comment">// Resources</span>
00474 <span class="comment">//</span>
00475 
00476 <span class="comment">// CHT software keyboard bitmaps</span>
<a name="l00477"></a><a class="code" href="../../d4/d0/immcli_8h.html#a28">00477</a> <span class="preprocessor">#define BACK_T1     100</span>
<a name="l00478"></a><a class="code" href="../../d4/d0/immcli_8h.html#a29">00478</a> <span class="preprocessor"></span><span class="preprocessor">#define TAB_T1      101</span>
<a name="l00479"></a><a class="code" href="../../d4/d0/immcli_8h.html#a30">00479</a> <span class="preprocessor"></span><span class="preprocessor">#define CAPS_T1     102</span>
<a name="l00480"></a><a class="code" href="../../d4/d0/immcli_8h.html#a31">00480</a> <span class="preprocessor"></span><span class="preprocessor">#define ENTER_T1    103</span>
<a name="l00481"></a><a class="code" href="../../d4/d0/immcli_8h.html#a32">00481</a> <span class="preprocessor"></span><span class="preprocessor">#define SHIFT_T1    104</span>
<a name="l00482"></a><a class="code" href="../../d4/d0/immcli_8h.html#a33">00482</a> <span class="preprocessor"></span><span class="preprocessor">#define CTRL_T1     105</span>
<a name="l00483"></a><a class="code" href="../../d4/d0/immcli_8h.html#a34">00483</a> <span class="preprocessor"></span><span class="preprocessor">#define ESC_T1      106</span>
<a name="l00484"></a><a class="code" href="../../d4/d0/immcli_8h.html#a35">00484</a> <span class="preprocessor"></span><span class="preprocessor">#define ALT_T1      107</span>
<a name="l00485"></a><a class="code" href="../../d4/d0/immcli_8h.html#a36">00485</a> <span class="preprocessor"></span><span class="preprocessor">#define LABEL_T1    108</span>
00486 <span class="preprocessor"></span>
00487 <span class="comment">// CHS software keyboard bitmaps</span>
<a name="l00488"></a><a class="code" href="../../d4/d0/immcli_8h.html#a37">00488</a> <span class="preprocessor">#define BACKSP_C1   201</span>
<a name="l00489"></a><a class="code" href="../../d4/d0/immcli_8h.html#a38">00489</a> <span class="preprocessor"></span><span class="preprocessor">#define TAB_C1      202</span>
<a name="l00490"></a><a class="code" href="../../d4/d0/immcli_8h.html#a39">00490</a> <span class="preprocessor"></span><span class="preprocessor">#define CAPS_C1     203</span>
<a name="l00491"></a><a class="code" href="../../d4/d0/immcli_8h.html#a40">00491</a> <span class="preprocessor"></span><span class="preprocessor">#define ENTER_C1    204</span>
<a name="l00492"></a><a class="code" href="../../d4/d0/immcli_8h.html#a41">00492</a> <span class="preprocessor"></span><span class="preprocessor">#define SHIFT_C1    205</span>
<a name="l00493"></a><a class="code" href="../../d4/d0/immcli_8h.html#a42">00493</a> <span class="preprocessor"></span><span class="preprocessor">#define INS_C1      206</span>
<a name="l00494"></a><a class="code" href="../../d4/d0/immcli_8h.html#a43">00494</a> <span class="preprocessor"></span><span class="preprocessor">#define DEL_C1      207</span>
<a name="l00495"></a><a class="code" href="../../d4/d0/immcli_8h.html#a44">00495</a> <span class="preprocessor"></span><span class="preprocessor">#define ESC_C1      208</span>
<a name="l00496"></a><a class="code" href="../../d4/d0/immcli_8h.html#a45">00496</a> <span class="preprocessor"></span><span class="preprocessor">#define LABEL_C1    209</span>
00497 <span class="preprocessor"></span>
00498 <span class="preprocessor">#endif // _IMMCLI_</span>
</div></pre><hr size="1"><address style="align: right;"><small>Generated on Sat May 15 19:40:21 2004 for test by
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>

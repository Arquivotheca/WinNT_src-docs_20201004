<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>test: cltxt.h File Reference</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="../../main.html">Main&nbsp;Page</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Class&nbsp;List</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Class&nbsp;Members</a> | <a class="qindex" href="../../globals.html">File&nbsp;Members</a></div>
<h1>cltxt.h File Reference</h1><code>#include "<a class="el" href="../../d8/d8/ntsend_8h-source.html">ntsend.h</a>"</code><br>
<code>#include "powrprof.h"</code><br>

<p>
<a href="../../d6/d8/cltxt_8h-source.html">Go to the source code of this file.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d9/cltxt_8h.html#a0">IS_ANSI</a>&nbsp;&nbsp;&nbsp;TRUE</td></tr>

<tr><td colspan=2><br><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>typedef BOOLEAN(*&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d9/cltxt_8h.html#a4">PFNGETACTIVEPWRSCHEME</a> )(<a class="el" href="../../d9/d5/ndismain_8h.html#a266">PUINT</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef BOOLEAN(*&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d9/cltxt_8h.html#a5">PFNSETACTIVEPWRSCHEME</a> )(UINT, PGLOBAL_POWER_POLICY, PPOWER_POLICY)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef BOOLEAN(*&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d9/cltxt_8h.html#a6">PFNREADPWRSCHEME</a> )(UINT, PPOWER_POLICY)</td></tr>

<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>HWND WINAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d9/cltxt_8h.html#a10">CreateWindowEx</a> (<a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwExStyle, LPCTSTR lpClassName, LPCTSTR lpWindowName, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwStyle, int X, int Y, int nWidth, int nHeight, HWND hWndParent, HMENU hMenu, HINSTANCE hModule, <a class="el" href="../../d0/d5/perfuser_8c.html#a5">LPVOID</a> lpParam)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LONG_PTR APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d9/cltxt_8h.html#a11">GetWindowLongPtr</a> (HWND hwnd, int nIndex)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LONG_PTR APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d9/cltxt_8h.html#a12">SetWindowLongPtr</a> (HWND <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a29">hWnd</a>, int nIndex, LONG_PTR dwNewLong)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>ULONG_PTR APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d9/cltxt_8h.html#a13">GetClassLongPtr</a> (HWND <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a29">hWnd</a>, int nIndex)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d9/cltxt_8h.html#a14">PeekMessage</a> (LPMSG lpMsg, HWND <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a29">hWnd</a>, UINT wMsgFilterMin, UINT wMsgFilterMax, UINT wRemoveMsg)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LRESULT APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d9/cltxt_8h.html#a15">DefWindowProc</a> (HWND hwnd, UINT message, WPARAM wParam, LPARAM lParam)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LRESULT APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a> (HWND hwnd, UINT message, WPARAM wParam, LPARAM lParam)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LRESULT APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d9/cltxt_8h.html#a17">SendMessageTimeout</a> (HWND hwnd, UINT message, WPARAM wParam, LPARAM lParam, UINT fuFlags, UINT uTimeout, PULONG_PTR lpdwResult)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LRESULT WINAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d9/cltxt_8h.html#a18">SendDlgItemMessage</a> (HWND hwnd, int id, UINT message, WPARAM wParam, LPARAM lParam)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>UINT&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d9/cltxt_8h.html#a19">GetDlgItemText</a> (HWND hwnd, int id, LPTSTR lpch, int cchMax)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d9/cltxt_8h.html#a20">SetDlgItemText</a> (HWND hwnd, int id, LPCTSTR lpch)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>int WINAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d9/cltxt_8h.html#a21">GetWindowText</a> (HWND hwnd, LPTSTR lpName, int nMaxCount)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>int WINAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d9/cltxt_8h.html#a22">GetWindowTextLength</a> (HWND hwnd)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL WINAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d9/cltxt_8h.html#a23">SetWindowText</a> (HWND hwnd, LPCTSTR pString)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LRESULT APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d9/cltxt_8h.html#a24">DispatchMessage</a> (CONST MSG *lpMsg)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d9/cltxt_8h.html#a25">SetVideoTimeout</a> (<a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwVideoTimeout)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d9/cltxt_8h.html#a26">SystemParametersInfo</a> (UINT wFlag, UINT wParam, PVOID lParam, UINT flags)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>HANDLE APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d9/cltxt_8h.html#a27">GetProp</a> (HWND hwnd, LPCTSTR pString)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d9/cltxt_8h.html#a28">GetMenuString</a> (HMENU hMenu, UINT wID, LPTSTR lpsz, int cchMax, UINT flags)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d9/cltxt_8h.html#a29">GetMenuItemInfo</a> (HMENU hMenu, UINT wID, BOOL fByPos, LPMENUITEMINFO lpmii)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d9/cltxt_8h.html#a30">SetMenuItemInfo</a> (HMENU hMenu, UINT uID, BOOL fByPosition, LPCMENUITEMINFO lpmii)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d9/cltxt_8h.html#a31">InsertMenuItem</a> (HMENU hMenu, UINT uID, BOOL fByPosition, LPCMENUITEMINFO lpmii)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d9/cltxt_8h.html#a32">InsertMenu</a> (HMENU hMenu, UINT uPosition, UINT uFlags, UINT_PTR uIDNewItem, LPCTSTR lpNewItem)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d9/cltxt_8h.html#a33">AppendMenu</a> (HMENU hMenu, UINT uFlags, UINT_PTR uIDNewItem, LPCTSTR lpNewItem)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d9/cltxt_8h.html#a34">ModifyMenu</a> (HMENU hMenu, UINT uPosition, UINT uFlags, UINT_PTR uIDNewItem, LPCTSTR lpNewItem)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>WINUSERAPI LONG&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d9/cltxt_8h.html#a35">BroadcastSystemMessage</a> (<a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> <a class="el" href="../../d3/d8/propapi_8h.html#a34">dwFlags</a>, LPDWORD lpdwRecipients, UINT uiMessage, WPARAM wParam, LPARAM lParam)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>WINUSERAPI UINT WINAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d9/cltxt_8h.html#a36">GetWindowModuleFileName</a> (HWND hwnd, LPTSTR pszFileName, UINT cchFileNameMax)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>WINUSERAPI HDEVNOTIFY WINAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d9/cltxt_8h.html#a37">RegisterDeviceNotification</a> (IN HANDLE hRecipient, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a5">LPVOID</a> NotificationFilter, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> Flags)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL WINUSERAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d9/cltxt_8h.html#a38">GetMonitorInfo</a> (HMONITOR hMonitor, LPMONITORINFO lpmi)</td></tr>

<tr><td colspan=2><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>LRESULT TEXT_FN(&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d9/cltxt_8h.html#a1">fnHkINLPCWPSTRUCT</a> )(<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, UINT message, WPARAM wParam, LPARAM lParam, ULONG_PTR xParam)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LRESULT TEXT_FN(&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d9/cltxt_8h.html#a2">fnHkINLPCWPRETSTRUCT</a> )(<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, UINT message, WPARAM wParam, LPARAM lParam, ULONG_PTR xParam)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LRESULT TEXT_FN(&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d9/cltxt_8h.html#a3">DispatchHook</a> )(int dw, WPARAM wParam, LPARAM lParam, HOOKPROC pfn)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>ATOM WINAPI TEXT_FN(&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d9/cltxt_8h.html#a7">RegisterClass</a> )(CONST WNDCLASS *lpWndClass)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>ATOM WINAPI TEXT_FN(&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d9/cltxt_8h.html#a8">RegisterClassEx</a> )(CONST WNDCLASSEX *lpWndClass)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL TEXT_FN(&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d9/cltxt_8h.html#a9">GetMenuItemInfoInternal</a> )(HMENU hMenu, UINT uID, BOOL fByPosition, LPMENUITEMINFOW lpInfo)</td></tr>

</table>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="a0" doxytag="cltxt.h::IS_ANSI" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define IS_ANSI&nbsp;&nbsp;&nbsp;TRUE          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00018">18</a> of file <a class="el" href="../../d6/d8/cltxt_8h-source.html">cltxt.h</a>.
<p>
Referenced by <a class="el" href="../../d6/d8/cltxt_8h-source.html#l01734">AppendMenu()</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l01760">BroadcastSystemMessage()</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00038">CreateWindowEx()</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00629">DefWindowProc()</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00874">DispatchMessage()</a>, <a class="el" href="../../d1/d7/ntcftxt_8h-source.html#l01610">GetAltTabInfo()</a>, <a class="el" href="../../d1/d7/ntcftxt_8h-source.html#l00079">GetClassInfo()</a>, <a class="el" href="../../d1/d7/ntcftxt_8h-source.html#l00129">GetClassInfoEx()</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00440">GetClassLongPtr()</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00388">GetWindowLongPtr()</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00781">GetWindowText()</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00825">GetWindowTextLength()</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l01720">InsertMenu()</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l01702">InsertMenuItem()</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l01747">ModifyMenu()</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00483">PeekMessage()</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l01792">RegisterDeviceNotification()</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00652">SendMessage()</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00697">SendMessageTimeout()</a>, <a class="el" href="../../d1/d7/ntcftxt_8h-source.html#l00579">SetClassLongPtr()</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l01685">SetMenuItemInfo()</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00408">SetWindowLongPtr()</a>, and <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00848">SetWindowText()</a>.    </td>
  </tr>
</table>
<hr><h2>Typedef Documentation</h2>
<a class="anchor" name="a4" doxytag="cltxt.h::PFNGETACTIVEPWRSCHEME" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef BOOLEAN(* <a class="el" href="../../d5/d9/cltxt_8h.html#a4">PFNGETACTIVEPWRSCHEME</a>)(<a class="el" href="../../d9/d5/ndismain_8h.html#a266">PUINT</a>)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00914">914</a> of file <a class="el" href="../../d6/d8/cltxt_8h-source.html">cltxt.h</a>.
<p>
Referenced by <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00918">SetVideoTimeout()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a6" doxytag="cltxt.h::PFNREADPWRSCHEME" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef BOOLEAN(* <a class="el" href="../../d5/d9/cltxt_8h.html#a6">PFNREADPWRSCHEME</a>)(UINT, PPOWER_POLICY)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00916">916</a> of file <a class="el" href="../../d6/d8/cltxt_8h-source.html">cltxt.h</a>.
<p>
Referenced by <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00918">SetVideoTimeout()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="cltxt.h::PFNSETACTIVEPWRSCHEME" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef BOOLEAN(* <a class="el" href="../../d5/d9/cltxt_8h.html#a5">PFNSETACTIVEPWRSCHEME</a>)(UINT, PGLOBAL_POWER_POLICY, PPOWER_POLICY)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00915">915</a> of file <a class="el" href="../../d6/d8/cltxt_8h-source.html">cltxt.h</a>.
<p>
Referenced by <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00918">SetVideoTimeout()</a>.    </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="a33" doxytag="cltxt.h::AppendMenu" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL AppendMenu           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HMENU&nbsp;</td>
          <td class="mdname" nowrap> <em>hMenu</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>uFlags</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT_PTR&nbsp;</td>
          <td class="mdname" nowrap> <em>uIDNewItem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPCTSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>lpNewItem</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d8/cltxt_8h-source.html#l01734">1734</a> of file <a class="el" href="../../d6/d8/cltxt_8h-source.html">cltxt.h</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00018">IS_ANSI</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02763">MFMWFP_NOITEM</a>, <a class="el" href="../../d6/d0/usercli_8h.html#a772">SetMenuItemInfoStruct()</a>, <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00377">ThunkedMenuItemInfo()</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d2/d6/ntcon_2server_2menu_8c-source.html#l00061">InitSystemMenu()</a>, and <a class="el" href="../../d0/d1/usrbench_8c-source.html#l00268">WndProc()</a>.
<p>
<pre class="fragment"><div>01735 {
01736     MENUITEMINFOW miiLocal;
01737 
01738     <a class="code" href="../../d6/d0/usercli_8h.html#a772">SetMenuItemInfoStruct</a>(hMenu, uFlags, uIDNewItem, (LPWSTR)lpNewItem, &amp;miiLocal);
01739     <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a771">ThunkedMenuItemInfo</a>(hMenu, MFMWFP_NOITEM, MF_BYPOSITION, TRUE, (LPMENUITEMINFOW)&amp;miiLocal, IS_ANSI);
01740 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a35" doxytag="cltxt.h::BroadcastSystemMessage" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> WINUSERAPI LONG BroadcastSystemMessage           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwFlags</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpdwRecipients</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>uiMessage</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d8/cltxt_8h-source.html#l01760">1760</a> of file <a class="el" href="../../d6/d8/cltxt_8h-source.html">cltxt.h</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l02439">BroadcastSystemMessageWorker()</a>, <a class="el" href="../../d4/d7/propapi_8h-source.html#l00043">dwFlags</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00018">IS_ANSI</a>, and <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>.
<p>
Referenced by <a class="el" href="../../d1/d6/server_2server_8c-source.html#l00479">HandleMediaChangeEvent()</a>, <a class="el" href="../../d1/d6/server_2server_8c-source.html#l00589">HandleRemoteNetDeviceChangeEvent()</a>, and <a class="el" href="../../d5/d5/server_2sendmsg_8c-source.html#l00089">RemoteDoBroadcastSystemMessage()</a>.
<p>
<pre class="fragment"><div>01762 {
01763     <span class="keyword">extern</span> LONG <a class="code" href="../../d8/d9/client_2ntstubs_8c.html#a44">BroadcastSystemMessageWorker</a>(DWORD dwFlags, LPDWORD lpdwRecipients,
01764     UINT uiMessage, WPARAM wParam, LPARAM lParam, BOOL fAnsi);
01765 
01766     <span class="keywordflow">return</span> <a class="code" href="../../d8/d9/client_2ntstubs_8c.html#a44">BroadcastSystemMessageWorker</a>(dwFlags, lpdwRecipients,
01767         uiMessage, wParam, lParam, IS_ANSI);
01768 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a10" doxytag="cltxt.h::CreateWindowEx" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HWND WINAPI CreateWindowEx           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwExStyle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPCTSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>lpClassName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPCTSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>lpWindowName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwStyle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>X</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>Y</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>nWidth</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>nHeight</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hWndParent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HMENU&nbsp;</td>
          <td class="mdname" nowrap> <em>hMenu</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HINSTANCE&nbsp;</td>
          <td class="mdname" nowrap> <em>hModule</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a5">LPVOID</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpParam</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00038">38</a> of file <a class="el" href="../../d6/d8/cltxt_8h-source.html">cltxt.h</a>.
<p>
References <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l01197">_CreateWindowEx()</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00018">IS_ANSI</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00728">WS_EX_ANSICREATOR</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00727">WS_EX_MDICHILD</a>.
<p>
Referenced by <a class="el" href="../../d7/d1/output_8c-source.html#l00834">CreateWindowsWindow()</a>, and <a class="el" href="../../d7/d8/softkbd_8c-source.html#l00137">ImmCreateSoftKeyboard()</a>.
<p>
<pre class="fragment"><div>00051 {
00052 
00053 <span class="preprocessor">#if 0</span>
00054 <span class="preprocessor"></span>    <span class="comment">/*</span>
00055 <span class="comment">     * We use some of the undocumented bits in dwExStyle to mark a window</span>
00056 <span class="comment">     * with certain attributes.  Make sure this bits aren't turned on by</span>
00057 <span class="comment">     * the app</span>
00058 <span class="comment">     */</span>
00059     dwExStyle &amp;= ~(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a187">WS_EX_MDICHILD</a> | <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a188">WS_EX_ANSICREATOR</a>);
00060 <span class="preprocessor">#endif</span>
00061 <span class="preprocessor"></span>
00062     <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a624">_CreateWindowEx</a>(dwExStyle, lpClassName, lpWindowName,
00063                 dwStyle, X, Y, nWidth, nHeight, hWndParent, hMenu,
00064                 hModule, lpParam, IS_ANSI);
00065 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a15" doxytag="cltxt.h::DefWindowProc" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LRESULT APIENTRY DefWindowProc           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>message</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00629">629</a> of file <a class="el" href="../../d6/d8/cltxt_8h-source.html">cltxt.h</a>.
<p>
References <a class="el" href="../../d2/d0/bench_8c-source.html#l00048">APIENTRY</a>, <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00574">DefWindowProcWorker()</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00018">IS_ANSI</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d5/d9/immcli_8h-source.html#l00120">ValidateHwnd</a>.
<p>
Referenced by <a class="el" href="../../d7/d1/output_8c-source.html#l04700">ConsoleWindowProc()</a>, <a class="el" href="../../d2/d0/bench_8c-source.html#l00609">CreateDestroyWndProc()</a>, <a class="el" href="../../d4/d3/ddemlwp_8c-source.html#l00376">DDEMLClientWndProc()</a>, <a class="el" href="../../d4/d3/ddemlwp_8c-source.html#l00027">DDEMLMotherWndProc()</a>, <a class="el" href="../../d4/d3/ddemlwp_8c-source.html#l00496">DDEMLServerWndProc()</a>, <a class="el" href="../../d6/d7/resizedlg_8cpp-source.html#l00075">CResizeDlg::DlgProc()</a>, <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00282">MainWndProc()</a>, <a class="el" href="../../d9/d4/reader_8c-source.html#l00158">ReaderWndProc()</a>, <a class="el" href="../../d6/d7/sftkbdc1_8c-source.html#l01042">SKWndProcC1()</a>, <a class="el" href="../../d7/d7/sftkbdt1_8c-source.html#l01258">SKWndProcT1()</a>, <a class="el" href="../../d2/d9/client_2help_8c-source.html#l00447">WinHelpA()</a>, and <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00288">WndProc()</a>.
<p>
<pre class="fragment"><div>00630 {
00631     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwnd;
00632 
00633     <span class="keywordflow">if</span> ((pwnd = <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(hwnd)) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00634         <span class="keywordflow">switch</span> (message) {
00635         <span class="keywordflow">case</span> WM_CTLCOLORBTN:
00636         <span class="keywordflow">case</span> WM_CTLCOLORSTATIC:
00637         <span class="keywordflow">case</span> WM_CTLCOLORDLG:
00638         <span class="keywordflow">case</span> WM_CTLCOLORMSGBOX:
00639 
00640             <span class="comment">/*</span>
00641 <span class="comment">             * Draw default colors</span>
00642 <span class="comment">             */</span>
00643             <span class="keywordflow">break</span>;
00644         <span class="keywordflow">default</span>:
00645             <span class="keywordflow">return</span> 0;
00646         }
00647     }
00648 
00649     <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a610">DefWindowProcWorker</a>(pwnd, message, wParam, lParam, IS_ANSI);
00650 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a24" doxytag="cltxt.h::DispatchMessage" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LRESULT APIENTRY DispatchMessage           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">CONST MSG *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>lpMsg</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00874">874</a> of file <a class="el" href="../../d6/d8/cltxt_8h-source.html">cltxt.h</a>.
<p>
References <a class="el" href="../../d2/d0/bench_8c-source.html#l00048">APIENTRY</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d1/d8/clmsg_8c-source.html#l01533">DispatchMessageWorker()</a>, and <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00018">IS_ANSI</a>.
<p>
Referenced by <a class="el" href="../../d4/d2/ntcon_2server_2input_8c-source.html#l01946">ConsoleInputThread()</a>, <a class="el" href="../../d1/d0/xact_8c-source.html#l00024">DdeClientTransaction()</a>, <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l01036">DialogBox2()</a>, <a class="el" href="../../d1/d8/clmsg_8c-source.html#l01533">DispatchMessageWorker()</a>, <a class="el" href="../../d4/d9/csrstubs_8c-source.html#l00084">ExitWindowsWorker()</a>, <a class="el" href="../../d6/d8/dlgmgr2_8c-source.html#l00317">IsDialogMessageW()</a>, <a class="el" href="../../d2/d0/bench_8c-source.html#l01559">msProfDispatchMessage()</a>, <a class="el" href="../../d2/d0/bench_8c-source.html#l01435">msProfMenu()</a>, <a class="el" href="../../d2/d0/bench_8c-source.html#l01705">SendMessageDiffThreadFunc()</a>, <a class="el" href="../../d4/d7/winmgrc_8c-source.html#l01210">SmoothScrollWindowEx()</a>, <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l00757">ThreadShutdownNotify()</a>, <a class="el" href="../../d7/d4/connect_8c-source.html#l01474">WaitForZombieTerminate()</a>, and <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00062">WinMain()</a>.
<p>
<pre class="fragment"><div>00875 {
00876     <span class="keyword">extern</span> LRESULT <a class="code" href="../../d0/d9/clmsg_8c.html#a28">DispatchMessageWorker</a>(CONST MSG *lpMsg, BOOL fAnsi);
00877 
00878     <span class="keywordflow">return</span> <a class="code" href="../../d0/d9/clmsg_8c.html#a28">DispatchMessageWorker</a>(lpMsg, IS_ANSI);
00879 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a13" doxytag="cltxt.h::GetClassLongPtr" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ULONG_PTR APIENTRY GetClassLongPtr           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hWnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>nIndex</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00440">440</a> of file <a class="el" href="../../d6/d8/cltxt_8h-source.html">cltxt.h</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l01469">_GetClassLongPtr</a>, <a class="el" href="../../d2/d0/bench_8c-source.html#l00048">APIENTRY</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00110">hWnd</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00018">IS_ANSI</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d5/d9/immcli_8h-source.html#l00120">ValidateHwnd</a>.
<p>
Referenced by <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l01312">EndTaskDlgProc()</a>, and <a class="el" href="../../d2/d0/bench_8c-source.html#l00262">msProfClassGroup()</a>.
<p>
<pre class="fragment"><div>00441 {
00442     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwnd;
00443 
00444     pwnd = <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(hWnd);
00445 
00446     <span class="keywordflow">if</span> (pwnd == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00447         <span class="keywordflow">return</span> 0;
00448 
00449     <span class="keywordflow">try</span> {
00450         <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a210">_GetClassLongPtr</a>(pwnd, nIndex, IS_ANSI);
00451     } except (W32ExceptionHandler(FALSE, RIP_WARNING)) {
00452         RIPERR1(ERROR_INVALID_WINDOW_HANDLE,
00453                 RIP_WARNING,
00454                 <span class="stringliteral">"Window %x no longer valid"</span>,
00455                 hWnd);
00456         <span class="keywordflow">return</span> 0;
00457     }
00458 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a19" doxytag="cltxt.h::GetDlgItemText" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> UINT GetDlgItemText           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>id</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPTSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>lpch</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>cchMax</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00740">740</a> of file <a class="el" href="../../d6/d8/cltxt_8h-source.html">cltxt.h</a>.
<p>
References <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00158">GetDlgItem()</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00781">GetWindowText()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00570">EnterNew()</a>, <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00669">FileOpenHookProc()</a>, <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00885">FileSaveHookProc()</a>, and <a class="el" href="../../d1/d3/find_8c-source.html#l00171">FindDialogProc()</a>.
<p>
<pre class="fragment"><div>00745 {
00746     <span class="keywordflow">if</span> ((hwnd = <a class="code" href="../../d3/d9/client_2wow_8c.html#a6">GetDlgItem</a>(hwnd, <span class="keywordtype">id</span>)) != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00747         <span class="keywordflow">return</span> <a class="code" href="../../d5/d9/cltxt_8h.html#a21">GetWindowText</a>(hwnd, lpch, cchMax);
00748     }
00749 
00750     <span class="comment">/*</span>
00751 <span class="comment">     * If we couldn't find the window, just null terminate lpch so that the</span>
00752 <span class="comment">     * app doesn't gp fault if it tries to run through the text.</span>
00753 <span class="comment">     */</span>
00754     <span class="keywordflow">if</span> (cchMax)
00755         *lpch = (TCHAR)0;
00756 
00757     <span class="keywordflow">return</span> 0;
00758 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a29" doxytag="cltxt.h::GetMenuItemInfo" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL GetMenuItemInfo           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HMENU&nbsp;</td>
          <td class="mdname" nowrap> <em>hMenu</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>wID</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fByPos</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPMENUITEMINFO&nbsp;</td>
          <td class="mdname" nowrap> <em>lpmii</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d8/cltxt_8h-source.html#l01643">1643</a> of file <a class="el" href="../../d6/d8/cltxt_8h-source.html">cltxt.h</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l01463">GetMenuItemInfoInternal</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01991">MENUAPI_GET</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00275">TEXT_FN</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, and <a class="el" href="../../d6/d0/usercli_8h.html#a769">ValidateMENUITEMINFO()</a>.
<p>
<pre class="fragment"><div>01644 {
01645     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> cbCallercbSize = lpmii-&gt;cbSize;
01646     MENUITEMINFOW miiLocal;
01647 
01648 
01649     <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d0/usercli_8h.html#a769">ValidateMENUITEMINFO</a>((LPMENUITEMINFOW)lpmii, &amp;miiLocal, MENUAPI_GET)) {
01650         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01651     }
01652 
01653     <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a36">TEXT_FN</a>(GetMenuItemInfoInternal)(hMenu, wID, fByPos, &amp;miiLocal)) {
01654         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01655     }
01656 
01657     <span class="comment">/*</span>
01658 <span class="comment">     * Copy the structure and map old flags back. Only requested fields were</span>
01659 <span class="comment">     *   modified, so it's OK  to copy all fields back.</span>
01660 <span class="comment">     */</span>
01661     RtlCopyMemory(lpmii, &amp;miiLocal, SIZEOFMENUITEMINFO95);
01662     lpmii-&gt;cbSize = cbCallercbSize;
01663     <span class="keywordflow">if</span> (cbCallercbSize &gt; SIZEOFMENUITEMINFO95) {
01664         lpmii-&gt;hbmpItem = miiLocal.hbmpItem;
01665     }
01666 
01667     <span class="keywordflow">if</span> (lpmii-&gt;fMask &amp; MIIM_TYPE) {
01668         <span class="keywordflow">if</span> ((miiLocal.hbmpItem != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) &amp;&amp; (miiLocal.dwTypeData == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)) {
01669             lpmii-&gt;fType |= MFT_BITMAP;
01670             lpmii-&gt;dwTypeData = (LPTSTR)miiLocal.hbmpItem;
01671         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (miiLocal.cch == 0) {
01672             lpmii-&gt;dwTypeData = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
01673         }
01674         lpmii-&gt;fMask &amp;= ~(MIIM_FTYPE | MIIM_BITMAP | MIIM_STRING);
01675     }
01676 
01677     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01678 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a28" doxytag="cltxt.h::GetMenuString" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int GetMenuString           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HMENU&nbsp;</td>
          <td class="mdname" nowrap> <em>hMenu</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>wID</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPTSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>lpsz</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>cchMax</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>flags</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d8/cltxt_8h-source.html#l01611">1611</a> of file <a class="el" href="../../d6/d8/cltxt_8h-source.html">cltxt.h</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l01463">GetMenuItemInfoInternal</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00275">TEXT_FN</a>.
<p>
<pre class="fragment"><div>01612 {
01613     MENUITEMINFOW    miiLocal;
01614 
01615     miiLocal.fMask      = MIIM_STRING;
01616     miiLocal.dwTypeData = (LPWSTR)lpsz;
01617     miiLocal.cch        = cchMax;
01618 
01619     <span class="keywordflow">if</span> (cchMax != 0) {
01620         *lpsz = (TCHAR)0;
01621     }
01622 
01623     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a36">TEXT_FN</a>(GetMenuItemInfoInternal)(hMenu, wID, (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>)(flags &amp; MF_BYPOSITION), &amp;miiLocal)) {
01624         <span class="keywordflow">return</span> miiLocal.cch;
01625     } <span class="keywordflow">else</span> {
01626         <span class="keywordflow">return</span> 0;
01627     }
01628 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a38" doxytag="cltxt.h::GetMonitorInfo" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL WINUSERAPI GetMonitorInfo           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HMONITOR&nbsp;</td>
          <td class="mdname" nowrap> <em>hMonitor</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPMONITORINFO&nbsp;</td>
          <td class="mdname" nowrap> <em>lpmi</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d8/cltxt_8h-source.html#l01824">1824</a> of file <a class="el" href="../../d6/d8/cltxt_8h-source.html">cltxt.h</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02604">GetPrimaryMonitor()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04648">NtUserCallTwoParam()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02157">tagMONITOR::rcMonitor</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02158">tagMONITOR::rcWork</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d7/d9/usercli_8h-source.html#l00197">VALIDATEHMONITOR</a>.
<p>
Referenced by <a class="el" href="../../d7/d1/output_8c-source.html#l00207">GetWindowLimits()</a>, and <a class="el" href="../../d7/d1/output_8c-source.html#l00765">PositionConsoleWindow()</a>.
<p>
<pre class="fragment"><div>01825 {
01826     <a class="code" href="../../d0/d2/structtagMONITOR.html">PMONITOR</a>    pMonitor;
01827     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>        bRetVal;
01828     <span class="keywordtype">int</span>         cbSize;
01829 
01830     pMonitor = <a class="code" href="../../d6/d0/usercli_8h.html#a23">VALIDATEHMONITOR</a>(hMonitor);
01831     <span class="keywordflow">if</span> (!pMonitor) {
01832         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01833     }
01834 
01835     cbSize = lpmi-&gt;cbSize;
01836     <span class="keywordflow">if</span> (cbSize == <span class="keyword">sizeof</span>(MONITORINFO)) {
01837         <span class="comment">/*</span>
01838 <span class="comment">         * Check for this first, since it is the most</span>
01839 <span class="comment">         * common size. All the work for filling in</span>
01840 <span class="comment">         * MONITORINFO fields is done after the else-if</span>
01841 <span class="comment">         * statements.</span>
01842 <span class="comment">         */</span>
01843 
01844     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cbSize == <span class="keyword">sizeof</span>(MONITORINFOEX)) {
01845         <span class="comment">/*</span>
01846 <span class="comment">         * The ANSI version has to translate the szDevice field</span>
01847 <span class="comment">         */</span>
01848         ULONG_PTR pName;
01849 <span class="preprocessor">#if IS_ANSI</span>
01850 <span class="preprocessor"></span>        WCHAR szDevice[CCHDEVICENAME];
01851         pName = (ULONG_PTR)szDevice;
01852 <span class="preprocessor">#else</span>
01853 <span class="preprocessor"></span>        pName = (ULONG_PTR)(((LPMONITORINFOEX)lpmi)-&gt;szDevice);
01854 <span class="preprocessor">#endif</span>
01855 <span class="preprocessor"></span>        bRetVal = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>)<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a180">NtUserCallTwoParam</a>((ULONG_PTR)(hMonitor),
01856                            pName,
01857                            SFI_GETHDEVNAME);
01858         <span class="keywordflow">if</span> (!bRetVal) {
01859             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01860         }
01861 <span class="preprocessor">#if IS_ANSI</span>
01862 <span class="preprocessor"></span>        WideCharToMultiByte(
01863             CP_ACP, 0,                                  <span class="comment">// ANSI -&gt; Unicode</span>
01864             (LPWSTR)pName, -1,                          <span class="comment">// source &amp; length</span>
01865             (LPSTR)((LPMONITORINFOEX)lpmi)-&gt;szDevice,   <span class="comment">// destination &amp; length</span>
01866             <span class="keyword">sizeof</span>(WCHAR)*CCHDEVICENAME,
01867             NULL, NULL);
01868 
01869 <span class="preprocessor">#endif</span>
01870 <span class="preprocessor"></span>    } <span class="keywordflow">else</span> {
01871         RIPERR1(ERROR_INVALID_PARAMETER,
01872                 RIP_WARNING,
01873                 <span class="stringliteral">"Invalid lpmi-&gt;cbSize, %d"</span>, lpmi-&gt;cbSize);
01874 
01875         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01876     }
01877 
01878     lpmi-&gt;dwFlags = (pMonitor == <a class="code" href="../../d6/d0/usercli_8h.html#a793">GetPrimaryMonitor</a>()) ? MONITORINFOF_PRIMARY : 0;
01879     lpmi-&gt;rcMonitor = pMonitor-&gt;<a class="code" href="../../d0/d2/structtagMONITOR.html#o3">rcMonitor</a>;
01880     lpmi-&gt;rcWork = pMonitor-&gt;<a class="code" href="../../d0/d2/structtagMONITOR.html#o4">rcWork</a>;
01881 
01882     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01883 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a27" doxytag="cltxt.h::GetProp" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HANDLE APIENTRY GetProp           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPCTSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>pString</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d8/cltxt_8h-source.html#l01387">1387</a> of file <a class="el" href="../../d6/d8/cltxt_8h-source.html">cltxt.h</a>.
<p>
References <a class="el" href="../../d8/d7/rtl_2winprop_8c-source.html#l00106">_GetProp()</a>, <a class="el" href="../../d2/d0/bench_8c-source.html#l00048">APIENTRY</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00410">IS_PTR</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00411">PTR_TO_ID</a>, and <a class="el" href="../../d5/d9/immcli_8h-source.html#l00120">ValidateHwnd</a>.
<p>
Referenced by <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l01312">EndTaskDlgProc()</a>, <a class="el" href="../../d7/d3/msgbox_8c-source.html#l01944">EndTaskModalDialog()</a>, <a class="el" href="../../d7/d3/msgbox_8c-source.html#l01648">MB_DlgProcWorker()</a>, <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00775">MDIActivateDlgInit()</a>, <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00849">MDIActivateDlgProcWorker()</a>, and <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00685">MDIActivateDlgSize()</a>.
<p>
<pre class="fragment"><div>01387                                                     {
01388     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwnd;
01389     <span class="keywordtype">int</span> iString;
01390 
01391     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a98">IS_PTR</a>(pString)) {
01392         iString = (<span class="keywordtype">int</span>)GlobalFindAtom(pString);
01393         <span class="keywordflow">if</span> (iString == 0)
01394             <span class="keywordflow">return</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
01395     } <span class="keywordflow">else</span>
01396         iString = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a99">PTR_TO_ID</a>(pString);
01397 
01398     pwnd = <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(hwnd);
01399 
01400     <span class="keywordflow">if</span> (pwnd == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
01401         <span class="keywordflow">return</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
01402 
01403     <span class="keywordflow">return</span> <a class="code" href="../../d7/d8/rtl_2winprop_8c.html#a2">_GetProp</a>(pwnd, (LPWSTR)UIntToPtr( iString ), FALSE);
01404 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a11" doxytag="cltxt.h::GetWindowLongPtr" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LONG_PTR APIENTRY GetWindowLongPtr           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>nIndex</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00388">388</a> of file <a class="el" href="../../d6/d8/cltxt_8h-source.html">cltxt.h</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l01191">_GetWindowLongPtr</a>, <a class="el" href="../../d2/d0/bench_8c-source.html#l00048">APIENTRY</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00018">IS_ANSI</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d5/d9/immcli_8h-source.html#l00120">ValidateHwnd</a>.
<p>
Referenced by <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l01601">_EndTask()</a>, <a class="el" href="../../d1/d0/xact_8c-source.html#l00532">AbandonEnumerateProc()</a>, <a class="el" href="../../d7/d4/connect_8c-source.html#l00607">ConnectConv()</a>, <a class="el" href="../../d7/d4/connect_8c-source.html#l00195">DdeConnectList()</a>, <a class="el" href="../../d7/d4/connect_8c-source.html#l01053">DdeDisconnectList()</a>, <a class="el" href="../../d4/d3/ddemlwp_8c-source.html#l00376">DDEMLClientWndProc()</a>, <a class="el" href="../../d4/d3/ddemlwp_8c-source.html#l00027">DDEMLMotherWndProc()</a>, <a class="el" href="../../d4/d3/ddemlwp_8c-source.html#l00496">DDEMLServerWndProc()</a>, <a class="el" href="../../d1/d0/xact_8c-source.html#l00665">DdePostAdvise()</a>, <a class="el" href="../../d7/d4/connect_8c-source.html#l00906">DdeQueryNextServer()</a>, <a class="el" href="../../d6/d7/sftkbdc1_8c-source.html#l00410">DestroyC1Window()</a>, <a class="el" href="../../d7/d7/sftkbdt1_8c-source.html#l00639">DestroyT1Window()</a>, <a class="el" href="../../d4/d2/ntcon_2server_2input_8c-source.html#l01726">DialogHookProc()</a>, <a class="el" href="../../d7/d7/proppage_8cpp-source.html#l00044">CPropertyPage::DialogProc()</a>, <a class="el" href="../../d9/d6/dialog_8cpp-source.html#l00083">CDialog::DialogProc()</a>, <a class="el" href="../../d9/d3/w32_2ntuser_2client_2callback_8c-source.html#l00295">EnableEnumProc()</a>, <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l01312">EndTaskDlgProc()</a>, <a class="el" href="../../d1/d3/find_8c-source.html#l00171">FindDialogProc()</a>, <a class="el" href="../../d7/d4/connect_8c-source.html#l00784">InitiateEnumerationProc()</a>, <a class="el" href="../../d7/d3/msgbox_8c-source.html#l01176">MB_CopyToClipboard()</a>, <a class="el" href="../../d0/d1/usrbench_8c-source.html#l01934">MDIChildWndProc()</a>, <a class="el" href="../../d4/d3/ddemlwp_8c-source.html#l00059">ProcessDDEMLInitiate()</a>, <a class="el" href="../../d0/d6/register_8c-source.html#l00090">ProcessRegistrationMessage()</a>, <a class="el" href="../../d7/d7/sftkbdt1_8c-source.html#l01186">SetSKT1Data()</a>, <a class="el" href="../../d6/d7/sftkbdc1_8c-source.html#l00449">ShowSKC1Window()</a>, <a class="el" href="../../d6/d7/sftkbdc1_8c-source.html#l00914">SKC1ButtonUp()</a>, <a class="el" href="../../d6/d7/sftkbdc1_8c-source.html#l00844">SKC1MouseMove()</a>, <a class="el" href="../../d6/d7/sftkbdc1_8c-source.html#l00783">SKC1SetCursor()</a>, <a class="el" href="../../d7/d7/sftkbdt1_8c-source.html#l01099">SKT1ButtonUp()</a>, <a class="el" href="../../d7/d7/sftkbdt1_8c-source.html#l01061">SKT1MouseMove()</a>, <a class="el" href="../../d7/d7/sftkbdt1_8c-source.html#l00968">SKT1SetCursor()</a>, <a class="el" href="../../d6/d7/sftkbdc1_8c-source.html#l01042">SKWndProcC1()</a>, <a class="el" href="../../d7/d7/sftkbdt1_8c-source.html#l01258">SKWndProcT1()</a>, <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l00757">ThreadShutdownNotify()</a>, <a class="el" href="../../d7/d4/connect_8c-source.html#l01153">UnlinkConvFromOthers()</a>, <a class="el" href="../../d6/d7/sftkbdc1_8c-source.html#l00489">UpdateSKC1Window()</a>, and <a class="el" href="../../d7/d7/sftkbdt1_8c-source.html#l00760">UpdateSKT1Window()</a>.
<p>
<pre class="fragment"><div>00389 {
00390     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwnd;
00391 
00392     pwnd = <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(hwnd);
00393 
00394     <span class="keywordflow">if</span> (pwnd == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00395         <span class="keywordflow">return</span> 0;
00396 
00397     <span class="keywordflow">try</span> {
00398         <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a165">_GetWindowLongPtr</a>(pwnd, nIndex, IS_ANSI);
00399     } except (W32ExceptionHandler(FALSE, RIP_WARNING)) {
00400         RIPERR1(ERROR_INVALID_WINDOW_HANDLE,
00401                 RIP_WARNING,
00402                 <span class="stringliteral">"Window %x no longer valid"</span>,
00403                 hwnd);
00404         <span class="keywordflow">return</span> 0;
00405     }
00406 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a36" doxytag="cltxt.h::GetWindowModuleFileName" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> WINUSERAPI UINT WINAPI GetWindowModuleFileName           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPTSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>pszFileName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>cchFileNameMax</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d8/cltxt_8h-source.html#l01771">1771</a> of file <a class="el" href="../../d6/d8/cltxt_8h-source.html">cltxt.h</a>.
<p>
References <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d5/d9/immcli_8h-source.html#l00120">ValidateHwnd</a>.
<p>
<pre class="fragment"><div>01772 {
01773     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwnd;
01774 
01775     pwnd = <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(hwnd);
01776 
01777     <span class="keywordflow">if</span> (pwnd == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01778         <span class="keywordflow">return</span> 0;
01779     }
01780 
01781     <span class="keywordflow">return</span> GetModuleFileName(pwnd-&gt;hModule, pszFileName, cchFileNameMax);
01782 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a21" doxytag="cltxt.h::GetWindowText" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int WINAPI GetWindowText           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPTSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>lpName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>nMaxCount</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00781">781</a> of file <a class="el" href="../../d6/d8/cltxt_8h-source.html">cltxt.h</a>.
<p>
References <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00574">DefWindowProcWorker()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00018">IS_ANSI</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00270">SendMessageWorker()</a>, <a class="el" href="../../d0/d7/kernel_2winmgr_8c-source.html#l01178">TestWindowProcess()</a>, and <a class="el" href="../../d5/d9/immcli_8h-source.html#l00120">ValidateHwnd</a>.
<p>
Referenced by <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l01312">EndTaskDlgProc()</a>, <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l00728">GetApplicationText()</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00740">GetDlgItemText()</a>, <a class="el" href="../../d8/d7/w32_2ntuser_2server_2harderr_8c-source.html#l00423">GetHardErrorText()</a>, <a class="el" href="../../d4/d6/stringar_8cpp-source.html#l00202">CString::Load()</a>, <a class="el" href="../../d2/d6/ntcon_2server_2menu_8c-source.html#l00236">SetWinText()</a>, <a class="el" href="../../d6/d9/dmmnem_8c-source.html#l00115">xxxGNM_FindNextMnem()</a>, and <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00611">xxxInitActivateDlg()</a>.
<p>
<pre class="fragment"><div>00785 {
00786     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwnd;
00787 
00788     <span class="comment">/*</span>
00789 <span class="comment">     * Don't try to fill a non-existent buffer</span>
00790 <span class="comment">     */</span>
00791     <span class="keywordflow">if</span> (lpName == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> || nMaxCount == 0) {
00792         <span class="keywordflow">return</span> 0;
00793     }
00794 
00795     <span class="keywordflow">try</span> {
00796         <span class="comment">/*</span>
00797 <span class="comment">         * Initialize string empty, in case SendMessage aborts validation</span>
00798 <span class="comment">         */</span>
00799         *lpName = TEXT(<span class="charliteral">'\0'</span>);
00800 
00801         <span class="comment">/*</span>
00802 <span class="comment">         * Make sure we have a valid window.</span>
00803 <span class="comment">         */</span>
00804         <span class="keywordflow">if</span> ((pwnd = <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(hwnd)) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00805             <span class="keywordflow">return</span> 0;
00806         }
00807 
00808         <span class="comment">/*</span>
00809 <span class="comment">         * This process comparison is bogus, but it is what win3.1 does.</span>
00810 <span class="comment">         */</span>
00811         <span class="keywordflow">if</span> (<a class="code" href="../../d9/d7/kernel_2winmgr_8c.html#a16">TestWindowProcess</a>(pwnd)) {
00812             <span class="keywordflow">return</span> (<span class="keywordtype">int</span>)<a class="code" href="../../d6/d0/usercli_8h.html#a600">SendMessageWorker</a>(pwnd, WM_GETTEXT, nMaxCount, (LPARAM)lpName, IS_ANSI);
00813         } <span class="keywordflow">else</span> {
00814             <span class="keywordflow">return</span> (<span class="keywordtype">int</span>)<a class="code" href="../../d6/d0/usercli_8h.html#a610">DefWindowProcWorker</a>(pwnd, WM_GETTEXT, nMaxCount, (LPARAM)lpName, IS_ANSI);
00815         }
00816     } except (W32ExceptionHandler(FALSE, RIP_WARNING)) {
00817         RIPERR1(ERROR_INVALID_WINDOW_HANDLE,
00818                 RIP_WARNING,
00819                 <span class="stringliteral">"Window %x no longer valid"</span>,
00820                 hwnd);
00821         <span class="keywordflow">return</span> 0;
00822     }
00823 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a22" doxytag="cltxt.h::GetWindowTextLength" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int WINAPI GetWindowTextLength           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hwnd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00825">825</a> of file <a class="el" href="../../d6/d8/cltxt_8h-source.html">cltxt.h</a>.
<p>
References <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00574">DefWindowProcWorker()</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00018">IS_ANSI</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00270">SendMessageWorker()</a>, <a class="el" href="../../d0/d7/kernel_2winmgr_8c-source.html#l01178">TestWindowProcess()</a>, and <a class="el" href="../../d5/d9/immcli_8h-source.html#l00120">ValidateHwnd</a>.
<p>
Referenced by <a class="el" href="../../d8/d7/w32_2ntuser_2server_2harderr_8c-source.html#l00423">GetHardErrorText()</a>, and <a class="el" href="../../d4/d6/stringar_8cpp-source.html#l00202">CString::Load()</a>.
<p>
<pre class="fragment"><div>00827 {
00828     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwnd;
00829 
00830     <span class="comment">/*</span>
00831 <span class="comment">     * Make sure we have a valid window.</span>
00832 <span class="comment">     */</span>
00833     <span class="keywordflow">if</span> ((pwnd = <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(hwnd)) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00834         <span class="keywordflow">return</span> 0;
00835     }
00836 
00837     <span class="comment">/*</span>
00838 <span class="comment">     * This process comparison is bogus, but it is what win3.1 does.</span>
00839 <span class="comment">     */</span>
00840     <span class="keywordflow">if</span> (<a class="code" href="../../d9/d7/kernel_2winmgr_8c.html#a16">TestWindowProcess</a>(pwnd)) {
00841         <span class="keywordflow">return</span> (<span class="keywordtype">int</span>)<a class="code" href="../../d6/d0/usercli_8h.html#a600">SendMessageWorker</a>(pwnd, WM_GETTEXTLENGTH, 0, 0, IS_ANSI);
00842     } <span class="keywordflow">else</span> {
00843         <span class="keywordflow">return</span> (<span class="keywordtype">int</span>)<a class="code" href="../../d6/d0/usercli_8h.html#a610">DefWindowProcWorker</a>(pwnd, WM_GETTEXTLENGTH, 0, 0, IS_ANSI);
00844     }
00845 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a32" doxytag="cltxt.h::InsertMenu" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL InsertMenu           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HMENU&nbsp;</td>
          <td class="mdname" nowrap> <em>hMenu</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>uPosition</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>uFlags</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT_PTR&nbsp;</td>
          <td class="mdname" nowrap> <em>uIDNewItem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPCTSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>lpNewItem</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d8/cltxt_8h-source.html#l01720">1720</a> of file <a class="el" href="../../d6/d8/cltxt_8h-source.html">cltxt.h</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00018">IS_ANSI</a>, <a class="el" href="../../d6/d0/usercli_8h.html#a772">SetMenuItemInfoStruct()</a>, <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00377">ThunkedMenuItemInfo()</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
<pre class="fragment"><div>01721 {
01722     MENUITEMINFOW miiLocal;
01723 
01724     <a class="code" href="../../d6/d0/usercli_8h.html#a772">SetMenuItemInfoStruct</a>(hMenu, uFlags, uIDNewItem, (LPWSTR)lpNewItem, &amp;miiLocal);
01725     <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a771">ThunkedMenuItemInfo</a>(hMenu, uPosition, (BOOL) (uFlags &amp; MF_BYPOSITION), TRUE, (LPMENUITEMINFOW)&amp;miiLocal, IS_ANSI);
01726 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a31" doxytag="cltxt.h::InsertMenuItem" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL InsertMenuItem           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HMENU&nbsp;</td>
          <td class="mdname" nowrap> <em>hMenu</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>uID</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fByPosition</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPCMENUITEMINFO&nbsp;</td>
          <td class="mdname" nowrap> <em>lpmii</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d8/cltxt_8h-source.html#l01702">1702</a> of file <a class="el" href="../../d6/d8/cltxt_8h-source.html">cltxt.h</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00018">IS_ANSI</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01992">MENUAPI_SET</a>, <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00377">ThunkedMenuItemInfo()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d6/d0/usercli_8h.html#a769">ValidateMENUITEMINFO()</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/editec_8c-source.html#l00278">ECSetIMEMenu()</a>.
<p>
<pre class="fragment"><div>01703 {
01704 
01705     MENUITEMINFOW miiLocal;
01706 
01707     <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d0/usercli_8h.html#a769">ValidateMENUITEMINFO</a>((LPMENUITEMINFOW)lpmii, &amp;miiLocal, MENUAPI_SET)) {
01708         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01709     }
01710 
01711     <span class="keywordflow">return</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a771">ThunkedMenuItemInfo</a>(hMenu, uID, fByPosition, TRUE, &amp;miiLocal, IS_ANSI));
01712 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a34" doxytag="cltxt.h::ModifyMenu" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL ModifyMenu           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HMENU&nbsp;</td>
          <td class="mdname" nowrap> <em>hMenu</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>uPosition</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>uFlags</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT_PTR&nbsp;</td>
          <td class="mdname" nowrap> <em>uIDNewItem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPCTSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>lpNewItem</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d8/cltxt_8h-source.html#l01747">1747</a> of file <a class="el" href="../../d6/d8/cltxt_8h-source.html">cltxt.h</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00018">IS_ANSI</a>, <a class="el" href="../../d6/d0/usercli_8h.html#a772">SetMenuItemInfoStruct()</a>, and <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00377">ThunkedMenuItemInfo()</a>.
<p>
<pre class="fragment"><div>01747                                                                                                   {
01748     MENUITEMINFOW miiLocal;
01749 
01750     <a class="code" href="../../d6/d0/usercli_8h.html#a772">SetMenuItemInfoStruct</a>(hMenu, uFlags, uIDNewItem, (LPWSTR)lpNewItem, &amp;miiLocal);
01751     <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a771">ThunkedMenuItemInfo</a>(hMenu, uPosition, (BOOL) (uFlags &amp; MF_BYPOSITION), FALSE, (LPMENUITEMINFOW)&amp;miiLocal, IS_ANSI);
01752 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a14" doxytag="cltxt.h::PeekMessage" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL APIENTRY PeekMessage           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">LPMSG&nbsp;</td>
          <td class="mdname" nowrap> <em>lpMsg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hWnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>wMsgFilterMin</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>wMsgFilterMax</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>wRemoveMsg</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00483">483</a> of file <a class="el" href="../../d6/d8/cltxt_8h-source.html">cltxt.h</a>.
<p>
References <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00556">_PeekMessage()</a>, <a class="el" href="../../d2/d0/bench_8c-source.html#l00048">APIENTRY</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d8/d2/ntuser_2rtl_2input_8c-source.html#l00043">CalcWakeMask()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02733">CSPINBACKGROUND</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00509">_CLIENTINFO::cSpins</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l03039">tagCLIENTTHREADINFO::CTIF_flags</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02875">CTIF_SYSQUEUELOCKED</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l00529">_CLIENTINFO::dwTIFlags</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l03040">tagCLIENTTHREADINFO::fsChangeBits</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l03041">tagCLIENTTHREADINFO::fsWakeBits</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02217">GetCallBackDbcsInfo</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00192">GetClientInfo</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00051">gpsi</a>, <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00110">hWnd</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00018">IS_ANSI</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00590">IS_DBCS_ENABLED</a>, <a class="el" href="../../d0/d5/gettickc_8c-source.html#l00026">NtGetTickCount()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l07799">NtUserGetThreadState()</a>, <a class="el" href="../../d7/d0/yield_8c-source.html#l00029">NtYieldExecution()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l00537">_CLIENTINFO::pClientThreadInfo</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02827">TIF_16BIT</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02845">TIF_DELAYEDEVENT</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02839">TIF_FIRSTIDLE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02836">TIF_SPINNING</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02840">TIF_WAITFORINPUTIDLE</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l03044">tagCLIENTTHREADINFO::timeLastRead</a>, and <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>.
<p>
Referenced by <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00556">_PeekMessage()</a>, <a class="el" href="../../d7/d1/output_8c-source.html#l04700">ConsoleWindowProc()</a>, <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l01036">DialogBox2()</a>, <a class="el" href="../../d4/d9/csrstubs_8c-source.html#l00084">ExitWindowsWorker()</a>, <a class="el" href="../../d8/d7/w32_2ntuser_2server_2harderr_8c-source.html#l01129">HardErrorHandler()</a>, <a class="el" href="../../d2/d0/bench_8c-source.html#l01435">msProfMenu()</a>, <a class="el" href="../../d4/d7/winmgrc_8c-source.html#l01210">SmoothScrollWindowEx()</a>, <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l00757">ThreadShutdownNotify()</a>, <a class="el" href="../../d7/d4/connect_8c-source.html#l01474">WaitForZombieTerminate()</a>, and <a class="el" href="../../d0/d1/usrbench_8c-source.html#l00103">WinMain()</a>.
<p>
<pre class="fragment"><div>00489 {
00490     <a class="code" href="../../d4/d0/structtagCLIENTTHREADINFO.html">PCLIENTTHREADINFO</a> pcti;
00491     <a class="code" href="../../d2/d2/struct__CLIENTINFO.html">PCLIENTINFO</a> pci;
00492     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> fsWakeMaskFilter;
00493     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> fsWakeMask;
00494     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> cSpinLimit;
00495 
00496     pci = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a16">GetClientInfo</a>();
00497 
00498     <span class="keywordflow">if</span> (<a class="code" href="../../d3/d8/aug98_2test_2main_8c.html#a29">hWnd</a> != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00499         <span class="keywordflow">goto</span> lbCallServer;
00500     }
00501 
00502 <span class="preprocessor">#if IS_ANSI</span>
00503 <span class="preprocessor"></span>    <span class="comment">/*</span>
00504 <span class="comment">     * If we have a DBCS TrailingByte that should be returned to App,</span>
00505 <span class="comment">     * we should pass it, never can fail....</span>
00506 <span class="comment">     */</span>
00507     UserAssert(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a125">IS_DBCS_ENABLED</a>() || <a class="code" href="../../d6/d0/usercli_8h.html#a292">GetCallBackDbcsInfo</a>()-&gt;wParam == 0);
00508     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a292">GetCallBackDbcsInfo</a>()-&gt;wParam) {    <span class="comment">// accesses fs:xxx, but no speed penalty</span>
00509         <span class="comment">/*</span>
00510 <span class="comment">         * Check message filter... WM_CHAR should be in the Range...</span>
00511 <span class="comment">         */</span>
00512         <span class="keywordflow">if</span> ((!wMsgFilterMin &amp;&amp; !wMsgFilterMax) ||
00513             (wMsgFilterMin &lt;= WM_CHAR &amp;&amp; wMsgFilterMax &gt;=WM_CHAR))
00514         {
00515             <span class="keywordflow">goto</span> lbCallServer;
00516         }
00517     }
00518 <span class="preprocessor">#endif</span>
00519 <span class="preprocessor"></span>
00520     <span class="keywordflow">if</span> (   (pci-&gt;<a class="code" href="../../d2/d2/struct__CLIENTINFO.html#o4">dwTIFlags</a> &amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a796">TIF_16BIT</a>)
00521         &amp;&amp; !(wRemoveMsg &amp; PM_NOYIELD)
00522         &amp;&amp; ((<a class="code" href="../../d1/d8/clglobal_8c.html#a4">gpsi</a>-&gt;nEvents != 0) || (pci-&gt;<a class="code" href="../../d2/d2/struct__CLIENTINFO.html#o4">dwTIFlags</a> &amp; (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a807">TIF_FIRSTIDLE</a> | <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a813">TIF_DELAYEDEVENT</a>)))) {
00523 
00524         <span class="keywordflow">goto</span> lbCallServer;
00525     }
00526 
00527     <span class="comment">/*</span>
00528 <span class="comment">     * If we can't see the client thread info, we need to go to the kernel.</span>
00529 <span class="comment">     */</span>
00530     <span class="keywordflow">if</span> ((pcti = pci-&gt;<a class="code" href="../../d2/d2/struct__CLIENTINFO.html#o13">pClientThreadInfo</a>) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00531         <span class="keywordflow">goto</span> lbCallServer;
00532     }
00533 
00534     fsWakeMaskFilter = HIWORD(wRemoveMsg);
00535 <span class="preprocessor">#if DBG</span>
00536 <span class="preprocessor"></span>    <span class="comment">/*</span>
00537 <span class="comment">     * New for NT5: HIWORD(wRemoveMsg) contains a QS_ mask. This is</span>
00538 <span class="comment">     *  validated for real in the kernel side.</span>
00539 <span class="comment">     */</span>
00540     <span class="keywordflow">if</span> (fsWakeMaskFilter &amp; ~QS_VALID) {
00541         RIPMSG1(RIP_WARNING, <span class="stringliteral">"PeekMessage: Invalid QS_ bits:%#lx"</span>, fsWakeMaskFilter);
00542     }
00543 <span class="preprocessor">#endif</span>
00544 <span class="preprocessor"></span>    <span class="comment">/*</span>
00545 <span class="comment">     * If any appropriate input is available, we need to go to the kernel.</span>
00546 <span class="comment">     */</span>
00547     <span class="keywordflow">if</span> (wMsgFilterMax == 0 &amp;&amp; fsWakeMaskFilter == 0) {
00548         fsWakeMask = (QS_ALLINPUT | QS_EVENT | QS_ALLPOSTMESSAGE);
00549     } <span class="keywordflow">else</span> {
00550         fsWakeMask = <a class="code" href="../../d7/d3/ntuser_2rtl_2input_8c.html#a1">CalcWakeMask</a>(wMsgFilterMin, wMsgFilterMax, fsWakeMaskFilter);
00551     }
00552     <span class="keywordflow">if</span> ((pcti-&gt;<a class="code" href="../../d4/d0/structtagCLIENTTHREADINFO.html#o1">fsChangeBits</a> | pcti-&gt;<a class="code" href="../../d4/d0/structtagCLIENTTHREADINFO.html#o2">fsWakeBits</a>) &amp; fsWakeMask) {
00553         <span class="keywordflow">goto</span> lbCallServer;
00554     }
00555 
00556     <span class="comment">/*</span>
00557 <span class="comment">     * If this thread has the queue locked, we have to go to the kernel</span>
00558 <span class="comment">     * or other threads on the same queue may be prevented from getting</span>
00559 <span class="comment">     * input messages.</span>
00560 <span class="comment">     */</span>
00561     <span class="keywordflow">if</span> (pcti-&gt;<a class="code" href="../../d4/d0/structtagCLIENTTHREADINFO.html#o0">CTIF_flags</a> &amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a822">CTIF_SYSQUEUELOCKED</a>) {
00562         <span class="keywordflow">goto</span> lbCallServer;
00563     }
00564 
00565     <span class="comment">/*</span>
00566 <span class="comment">     * This is the peek message count (not going idle count). If it gets</span>
00567 <span class="comment">     * to be 100 or greater, call the server. This'll cause this app to be</span>
00568 <span class="comment">     * put at background priority until it sleeps. This is really important</span>
00569 <span class="comment">     * for compatibility because win3.1 peek/getmessage usually takes a trip</span>
00570 <span class="comment">     * through the win3.1 scheduler and runs the next task.</span>
00571 <span class="comment">     */</span>
00572     pci-&gt;<a class="code" href="../../d2/d2/struct__CLIENTINFO.html#o1">cSpins</a>++;
00573 
00574     <span class="keywordflow">if</span> ((pci-&gt;<a class="code" href="../../d2/d2/struct__CLIENTINFO.html#o1">cSpins</a> &gt;= <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a767">CSPINBACKGROUND</a>) &amp;&amp; !(pci-&gt;<a class="code" href="../../d2/d2/struct__CLIENTINFO.html#o4">dwTIFlags</a> &amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a804">TIF_SPINNING</a>)) {
00575         <span class="keywordflow">goto</span> lbCallServer;
00576     }
00577 
00578     <span class="comment">/*</span>
00579 <span class="comment">     * We have to go to the server if someone is waiting on this event.</span>
00580 <span class="comment">     * We used to just wait until the spin cound got large but for some</span>
00581 <span class="comment">     * apps like terminal.  They always just call PeekMessage and after</span>
00582 <span class="comment">     * just a few calls they would blink their caret which bonks the spincount</span>
00583 <span class="comment">     */</span>
00584     <span class="keywordflow">if</span> (pci-&gt;<a class="code" href="../../d2/d2/struct__CLIENTINFO.html#o4">dwTIFlags</a> &amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a808">TIF_WAITFORINPUTIDLE</a>){
00585         <span class="keywordflow">goto</span> lbCallServer;
00586     }
00587 
00588     <span class="comment">/*</span>
00589 <span class="comment">     * Make sure we go to the kernel at least once a second so that</span>
00590 <span class="comment">     * hung app painting won't occur.</span>
00591 <span class="comment">     */</span>
00592     <span class="keywordflow">if</span> ((<a class="code" href="../../d9/d5/gettickc_8c.html#a0">NtGetTickCount</a>() - pcti-&gt;<a class="code" href="../../d4/d0/structtagCLIENTTHREADINFO.html#o5">timeLastRead</a>) &gt; 1000) {
00593         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a287">NtUserGetThreadState</a>(UserThreadStatePeekMessage);
00594     }
00595 
00596     <span class="comment">/*</span>
00597 <span class="comment">     * Determine the maximum number of spins before we yield. Yields</span>
00598 <span class="comment">     * are performed more frequently for 16 bit apps.</span>
00599 <span class="comment">     */</span>
00600     <span class="keywordflow">if</span> ((pci-&gt;<a class="code" href="../../d2/d2/struct__CLIENTINFO.html#o4">dwTIFlags</a> &amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a796">TIF_16BIT</a>) &amp;&amp; !(wRemoveMsg &amp; PM_NOYIELD)) {
00601         cSpinLimit = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a767">CSPINBACKGROUND</a> / 10;
00602     } <span class="keywordflow">else</span> {
00603         cSpinLimit = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a767">CSPINBACKGROUND</a>;
00604     }
00605 
00606     <span class="comment">/*</span>
00607 <span class="comment">     * If the PeekMessage() is just spinning, then we should sleep</span>
00608 <span class="comment">     * just enough so that we allow other processes to gain CPU time.</span>
00609 <span class="comment">     * A problem was found when an OLE app tries to communicate to a</span>
00610 <span class="comment">     * background app (via SendMessage) running at the same priority as a</span>
00611 <span class="comment">     * background/spinning process.  This will starve the CPU from those</span>
00612 <span class="comment">     * processes.  Sleep on every re-cycle of the spin-count.  This will</span>
00613 <span class="comment">     * assure that apps doing peeks are degraded.</span>
00614 <span class="comment">     *</span>
00615 <span class="comment">     */</span>
00616     <span class="keywordflow">if</span> ((pci-&gt;<a class="code" href="../../d2/d2/struct__CLIENTINFO.html#o4">dwTIFlags</a> &amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a804">TIF_SPINNING</a>) &amp;&amp; (pci-&gt;<a class="code" href="../../d2/d2/struct__CLIENTINFO.html#o1">cSpins</a> &gt;= cSpinLimit)) {
00617         pci-&gt;<a class="code" href="../../d2/d2/struct__CLIENTINFO.html#o1">cSpins</a> = 0;
00618         <a class="code" href="../../d6/d1/yield_8c.html#a0">NtYieldExecution</a>();
00619     }
00620 
00621     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00622 
00623 lbCallServer:
00624 
00625     <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a621">_PeekMessage</a>(lpMsg, hWnd, wMsgFilterMin, wMsgFilterMax,
00626             wRemoveMsg, IS_ANSI);
00627 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a37" doxytag="cltxt.h::RegisterDeviceNotification" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> WINUSERAPI HDEVNOTIFY WINAPI RegisterDeviceNotification           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hRecipient</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a5">LPVOID</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>NotificationFilter</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Flags</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d8/cltxt_8h-source.html#l01792">1792</a> of file <a class="el" href="../../d6/d8/cltxt_8h-source.html">cltxt.h</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00018">IS_ANSI</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">LPVOID</a>, and <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l02543">RegisterDeviceNotificationWorker()</a>.
<p>
Referenced by <a class="el" href="../../d5/d5/sti_8h-source.html#l00561">DECLARE_INTERFACE_()</a>.
<p>
<pre class="fragment"><div>01797 {
01798     <span class="keyword">extern</span> HDEVNOTIFY <a class="code" href="../../d8/d9/client_2ntstubs_8c.html#a45">RegisterDeviceNotificationWorker</a>(IN HANDLE hRecipient,
01799                                                        IN LPVOID NotificationFilter,
01800                                                        IN DWORD Flags,
01801                                                        IN BOOL IsAnsi
01802                                                        );
01803 
01804     <span class="comment">// translate strings in NotificationFilter (if any)</span>
01805 
01806     <span class="keywordflow">return</span> <a class="code" href="../../d8/d9/client_2ntstubs_8c.html#a45">RegisterDeviceNotificationWorker</a>(hRecipient,
01807                                             NotificationFilter,
01808                                             Flags,
01809                                             IS_ANSI
01810                                             );
01811 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a18" doxytag="cltxt.h::SendDlgItemMessage" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LRESULT WINAPI SendDlgItemMessage           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>id</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>message</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00717">717</a> of file <a class="el" href="../../d6/d8/cltxt_8h-source.html">cltxt.h</a>.
<p>
References <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00158">GetDlgItem()</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, and <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00652">SendMessage()</a>.
<p>
Referenced by <a class="el" href="../../d1/d3/find_8c-source.html#l00171">FindDialogProc()</a>, <a class="el" href="../../d0/d1/usrbench_8c-source.html#l01500">HelpDlgProc()</a>, <a class="el" href="../../d7/d3/msgbox_8c-source.html#l01648">MB_DlgProcWorker()</a>, <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00849">MDIActivateDlgProcWorker()</a>, <a class="el" href="../../d5/d7/propdlg_8cpp-source.html#l00124">CAdvancedPage::OnCommand()</a>, <a class="el" href="../../d5/d7/propdlg_8cpp-source.html#l00045">CInstallPage::OnCommand()</a>, <a class="el" href="../../d7/d4/profassoc_8cpp-source.html#l00220">CProfileAssociationPage::OnCommand()</a>, <a class="el" href="../../d2/d7/profprop_8cpp-source.html#l00126">CProfilePropertySheet::OnInit()</a>, <a class="el" href="../../d8/d6/profinfo_8cpp-source.html#l00051">CProfileInformationPage::OnInit()</a>, <a class="el" href="../../d7/d4/profassoc_8cpp-source.html#l00057">CProfileAssociationPage::OnInit()</a>, <a class="el" href="../../d7/d4/profassoc_8cpp-source.html#l00278">CProfileAssociationPage::OnNotify()</a>, <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l01875">OpenFiles()</a>, <a class="el" href="../../d5/d7/propdlg_8cpp-source.html#l00084">CAdvancedPage::Update()</a>, <a class="el" href="../../d7/d4/profassoc_8cpp-source.html#l00173">CProfileAssociationPage::UpdateDeviceListBox()</a>, and <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00611">xxxInitActivateDlg()</a>.
<p>
<pre class="fragment"><div>00723 {
00724     <span class="keywordflow">if</span> (hwnd == (HWND)-1 || hwnd == (HWND)0x0000FFFF)
00725         <span class="keywordflow">return</span> 0;
00726 
00727     <span class="keywordflow">if</span> (hwnd = <a class="code" href="../../d3/d9/client_2wow_8c.html#a6">GetDlgItem</a>(hwnd, <span class="keywordtype">id</span>))
00728         <span class="keywordflow">return</span> <a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(hwnd, message, wParam, lParam);
00729 
00730     <span class="keywordflow">return</span> 0<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>;
00731 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a16" doxytag="cltxt.h::SendMessage" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LRESULT APIENTRY SendMessage           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>message</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00652">652</a> of file <a class="el" href="../../d6/d8/cltxt_8h-source.html">cltxt.h</a>.
<p>
References <a class="el" href="../../d2/d0/bench_8c-source.html#l00048">APIENTRY</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00148">CsSendMessage</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00813">FNID_SENDMESSAGEFF</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00120">GetDesktopWindow()</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00018">IS_ANSI</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00133">RESERVED_MSG_BITS</a>, <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00270">SendMessageWorker()</a>, and <a class="el" href="../../d5/d9/immcli_8h-source.html#l00120">ValidateHwnd</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/winmgrc_8c-source.html#l00810">AnimateWindow()</a>, <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l00300">CheckDlgButton()</a>, <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l00409">CheckRadioButton()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l00207">ComboBoxWndProcWorker()</a>, <a class="el" href="../../d7/d4/connect_8c-source.html#l00607">ConnectConv()</a>, <a class="el" href="../../d7/d1/output_8c-source.html#l04700">ConsoleWindowProc()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02794">CreateMDIChild()</a>, <a class="el" href="../../d7/d1/output_8c-source.html#l00834">CreateWindowsWindow()</a>, <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l00460">DefDlgProcWorker()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02101">DefFrameProcWorker()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02531">DefMDIChildProcWorker()</a>, <a class="el" href="../../d6/d7/sftkbdc1_8c-source.html#l00410">DestroyC1Window()</a>, <a class="el" href="../../d7/d7/sftkbdt1_8c-source.html#l00639">DestroyT1Window()</a>, <a class="el" href="../../d7/d1/output_8c-source.html#l04454">DestroyWindowsWindow()</a>, <a class="el" href="../../d6/d7/resizedlg_8cpp-source.html#l01207">CScaleDlg::DeterminWeights()</a>, <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l01036">DialogBox2()</a>, <a class="el" href="../../d8/d7/proppage_8h-source.html#l00065">CPropertyPage::DisableApplyButton()</a>, <a class="el" href="../../d1/d1/lboxctl3_8c-source.html#l00682">DlgDirSelectHelper()</a>, <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l00152">DlgSetFocus()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00712">ECCutText()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00548">ECMenu()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02429">ECNotifyParent()</a>, <a class="el" href="../../d8/d7/proppage_8h-source.html#l00061">CPropertyPage::EnableApplyButton()</a>, <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00669">FileOpenHookProc()</a>, <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00885">FileSaveHookProc()</a>, <a class="el" href="../../d6/d6/devprop_8cpp-source.html#l01293">CMonitorProfileManagement::FillList()</a>, <a class="el" href="../../d6/d6/devprop_8cpp-source.html#l00741">CPrinterProfileManagement::FillList()</a>, <a class="el" href="../../d6/d6/devprop_8cpp-source.html#l00121">CDeviceProfileManagement::FillList()</a>, <a class="el" href="../../d0/d9/imectl_8c-source.html#l01020">ImeNotifyHandler()</a>, <a class="el" href="../../d7/d9/immime_8c-source.html#l00495">ImmActivateLayout()</a>, <a class="el" href="../../d7/d9/immime_8c-source.html#l00575">ImmConfigureIMEA()</a>, <a class="el" href="../../d7/d9/immime_8c-source.html#l00707">ImmConfigureIMEW()</a>, <a class="el" href="../../d3/d9/imemenu_8c-source.html#l00560">ImmGetImeMenuItemsInterProcess()</a>, <a class="el" href="../../d7/d9/immime_8c-source.html#l01272">ImmSendMessageToActiveDefImeWndW()</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00309">ImmSetActiveContext()</a>, <a class="el" href="../../d0/d1/usrbench_8c-source.html#l01995">InitializeInstance()</a>, <a class="el" href="../../d7/d4/connect_8c-source.html#l00784">InitiateEnumerationProc()</a>, <a class="el" href="../../d1/d8/dlgbegin_8c-source.html#l00553">InternalCreateDialog()</a>, <a class="el" href="../../d6/d8/dlgmgr2_8c-source.html#l00317">IsDialogMessageW()</a>, <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l00442">IsDlgButtonChecked()</a>, <a class="el" href="../../d3/d1/hotkey_8c-source.html#l00155">JCloseOpen()</a>, <a class="el" href="../../d7/d0/lb1_8c-source.html#l00032">ListBoxWndProcWorker()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l03158">MakeIMENotify()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01657">MDIClientWndProcWorker()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02735">MDICompleteChildCreation()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l02531">MLChar()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l03457">MLEditWndProc()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l02028">MLKeyDown()</a>, <a class="el" href="../../d6/d4/edmlrare_8c-source.html#l00556">MLUndo()</a>, <a class="el" href="../../d0/d7/menuddc_8c-source.html#l00074">mndtDragOver()</a>, <a class="el" href="../../d2/d0/bench_8c-source.html#l01613">msProfCallback()</a>, <a class="el" href="../../d2/d0/bench_8c-source.html#l01088">msProfListboxInsert1()</a>, <a class="el" href="../../d2/d0/bench_8c-source.html#l01153">msProfListboxInsert2()</a>, <a class="el" href="../../d2/d0/bench_8c-source.html#l01217">msProfListboxInsert3()</a>, <a class="el" href="../../d2/d0/bench_8c-source.html#l01435">msProfMenu()</a>, <a class="el" href="../../d2/d0/bench_8c-source.html#l01659">msProfSendMessage()</a>, <a class="el" href="../../d2/d0/bench_8c-source.html#l01752">msProfSendMessageDiffThread()</a>, <a class="el" href="../../d5/d7/propdlg_8cpp-source.html#l00124">CAdvancedPage::OnCommand()</a>, <a class="el" href="../../d7/d4/profassoc_8cpp-source.html#l00421">CAddDeviceDialog::OnCommand()</a>, <a class="el" href="../../d6/d6/devprop_8cpp-source.html#l01431">CMonitorProfileManagement::OnCommand()</a>, <a class="el" href="../../d6/d6/devprop_8cpp-source.html#l00950">CPrinterProfileManagement::OnCommand()</a>, <a class="el" href="../../d6/d6/devprop_8cpp-source.html#l00360">CDeviceProfileManagement::OnCommand()</a>, <a class="el" href="../../d8/d7/appui_8cpp-source.html#l00846">CColorMatchDialog::OnCommand()</a>, <a class="el" href="../../d2/d7/profprop_8cpp-source.html#l00126">CProfilePropertySheet::OnInit()</a>, <a class="el" href="../../d7/d4/profassoc_8cpp-source.html#l00389">CAddDeviceDialog::OnInit()</a>, <a class="el" href="../../d6/d6/devprop_8cpp-source.html#l00822">CPrinterProfileManagement::OnInit()</a>, <a class="el" href="../../d8/d7/appui_8cpp-source.html#l00638">CColorMatchDialog::OnInit()</a>, <a class="el" href="../../d2/d7/profprop_8cpp-source.html#l00180">CProfilePropertySheet::OnNotify()</a>, <a class="el" href="../../d1/d7/ntcftxt_8h-source.html#l00427">PostMessage()</a>, <a class="el" href="../../d4/d3/ddemlwp_8c-source.html#l00059">ProcessDDEMLInitiate()</a>, <a class="el" href="../../d9/d4/reader_8c-source.html#l00311">ReaderProcInternal()</a>, <a class="el" href="../../d5/d5/server_2sendmsg_8c-source.html#l00123">RemoteDoSendWindowMessage()</a>, <a class="el" href="../../d6/d7/resizedlg_8cpp-source.html#l01127">CScaleDlg::ResizeControls()</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00717">SendDlgItemMessage()</a>, <a class="el" href="../../d7/d3/msgbox_8c-source.html#l00136">SendHelpMessage()</a>, <a class="el" href="../../d7/d8/clwinnls_8c-source.html#l00081">SendIMEMessageAll()</a>, <a class="el" href="../../d0/d9/imectl_8c-source.html#l01234">SendOpenStatusNotify()</a>, <a class="el" href="../../d0/d6/register_8c-source.html#l00030">SendRegisterMessageToClass()</a>, <a class="el" href="../../d2/d9/client_2help_8c-source.html#l00039">SendWinHelpMessage()</a>, <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l01151">SetEndTaskDlgStatus()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l01304">SLChar()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l02520">SLEditWndProc()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l01529">SLKeyDown()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l02394">SLKillFocus()</a>, <a class="el" href="../../d4/d7/winmgrc_8c-source.html#l01210">SmoothScrollWindowEx()</a>, <a class="el" href="../../d6/d4/statctl_8c-source.html#l00812">StaticNotifyParent()</a>, <a class="el" href="../../d3/d4/transsub_8c-source.html#l01042">TransHanjaMode()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00096">TranslateMDISysAccel()</a>, <a class="el" href="../../d7/d4/profassoc_8cpp-source.html#l00173">CProfileAssociationPage::UpdateDeviceListBox()</a>, <a class="el" href="../../d0/d1/usrbench_8c-source.html#l00103">WinMain()</a>, <a class="el" href="../../d5/d7/jtranmsg_8c-source.html#l00582">WINNLSTranslateMessageJ()</a>, <a class="el" href="../../d0/d1/usrbench_8c-source.html#l00268">WndProc()</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l00310">xxxBNOwnerDraw()</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l00654">xxxBNReleaseCapture()</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l00625">xxxButtonNotifyParent()</a>, <a class="el" href="../../d4/d3/comboini_8c-source.html#l00253">xxxCBCalcControlRects()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l02028">xxxCBInternalUpdateEditWindow()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l01393">xxxCBMessageItemHandler()</a>, <a class="el" href="../../d6/d8/dlgmgr2_8c-source.html#l00084">xxxCheckDefPushButton()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02425">xxxChildResize()</a>, <a class="el" href="../../d1/d1/lboxctl3_8c-source.html#l00190">xxxDlgDirListHelper()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02802">xxxFindString()</a>, <a class="el" href="../../d6/d9/dmmnem_8c-source.html#l00115">xxxGNM_FindNextMnem()</a>, <a class="el" href="../../d6/d9/dmmnem_8c-source.html#l00219">xxxGotoNextMnem()</a>, <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l00722">xxxLBBinarySearchString()</a>, <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00062">xxxLBCreate()</a>, <a class="el" href="../../d1/d1/lboxctl3_8c-source.html#l00839">xxxLbDir()</a>, <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l00407">xxxLBInsertItem()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02183">xxxLBoxCtlKeyInput()</a>, <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l01053">xxxLBoxDeleteItem()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l03558">xxxLBoxDrawItem()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01237">xxxMDIActivate()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01540">xxxMDIDestroy()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01244">xxxNotifyOwner()</a>, <a class="el" href="../../d6/d8/dlgmgr2_8c-source.html#l00031">xxxRemoveDefaultButton()</a>, <a class="el" href="../../d6/d4/statctl_8c-source.html#l00419">xxxStaticPaint()</a>, and <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01290">xxxTrackMouse()</a>.
<p>
<pre class="fragment"><div>00653 {
00654     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwnd;
00655 
00656     <span class="comment">/*</span>
00657 <span class="comment">     * Prevent apps from setting hi 16 bits so we can use them internally.</span>
00658 <span class="comment">     */</span>
00659     <span class="keywordflow">if</span> (message &amp; <a class="code" href="../../d6/d0/usercli_8h.html#a8">RESERVED_MSG_BITS</a>) {
00660         RIPERR1(ERROR_INVALID_PARAMETER,
00661                 RIP_WARNING,
00662                 <span class="stringliteral">"Invalid parameter \"message\" (%ld) to SendMessage"</span>,
00663                 message);
00664 
00665         <span class="keywordflow">return</span> 0;
00666     }
00667 
00668     <span class="comment">/*</span>
00669 <span class="comment">     * Thunk through a special sendmessage for -1 hwnd's so that the general</span>
00670 <span class="comment">     * purpose thunks don't allow -1 hwnd's.</span>
00671 <span class="comment">     */</span>
00672     <span class="keywordflow">if</span> (hwnd == (HWND)-1 || hwnd == (HWND)0x0000FFFF) {
00673         <span class="comment">/*</span>
00674 <span class="comment">         * Get a real hwnd so the thunks will validation ok. Note that since</span>
00675 <span class="comment">         * -1 hwnd is really rare, calling GetDesktopWindow() here is not a</span>
00676 <span class="comment">         * big deal.</span>
00677 <span class="comment">         */</span>
00678         hwnd = <a class="code" href="../../d3/d9/client_2wow_8c.html#a4">GetDesktopWindow</a>();
00679 
00680         <span class="comment">/*</span>
00681 <span class="comment">         * Always send broadcast requests straight to the server.</span>
00682 <span class="comment">         * Note: if the xParam needs to be used, must update</span>
00683 <span class="comment">         * SendMsgTimeout, FNID_SENDMESSAGEFF uses it to id who</span>
00684 <span class="comment">         * it is from...</span>
00685 <span class="comment">         */</span>
00686         <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a11">CsSendMessage</a>(hwnd, message, wParam, lParam, 0L,
00687                 FNID_SENDMESSAGEFF, IS_ANSI);
00688     }
00689 
00690     <span class="keywordflow">if</span> ((pwnd = <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(hwnd)) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00691         <span class="keywordflow">return</span> 0;
00692 
00693     <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a600">SendMessageWorker</a>(pwnd, message, wParam, lParam, IS_ANSI);
00694 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a17" doxytag="cltxt.h::SendMessageTimeout" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LRESULT APIENTRY SendMessageTimeout           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>message</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>fuFlags</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>uTimeout</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PULONG_PTR&nbsp;</td>
          <td class="mdname" nowrap> <em>lpdwResult</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00697">697</a> of file <a class="el" href="../../d6/d8/cltxt_8h-source.html">cltxt.h</a>.
<p>
References <a class="el" href="../../d2/d0/bench_8c-source.html#l00048">APIENTRY</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00018">IS_ANSI</a>, and <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00498">SendMessageTimeoutWorker()</a>.
<p>
Referenced by <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l01227">ConsoleImeSendMessage()</a>, <a class="el" href="../../d3/d7/w32_2ntcon_2server_2handle_8c-source.html#l01110">FreeCon()</a>, and <a class="el" href="../../d2/d3/instdev_8c-source.html#l00037">SrvDeviceEvent()</a>.
<p>
<pre class="fragment"><div>00700 {
00701     <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a601">SendMessageTimeoutWorker</a>(hwnd, message, wParam, lParam,
00702             fuFlags, uTimeout, lpdwResult, IS_ANSI);
00703 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a20" doxytag="cltxt.h::SetDlgItemText" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL SetDlgItemText           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>id</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPCTSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>lpch</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00768">768</a> of file <a class="el" href="../../d6/d8/cltxt_8h-source.html">cltxt.h</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00158">GetDlgItem()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00848">SetWindowText()</a>.
<p>
Referenced by <a class="el" href="../../d6/d6/devprop_8cpp-source.html#l01293">CMonitorProfileManagement::FillList()</a>, <a class="el" href="../../d6/d6/devprop_8cpp-source.html#l00741">CPrinterProfileManagement::FillList()</a>, <a class="el" href="../../d5/d7/propdlg_8cpp-source.html#l00112">CAdvancedPage::OnInit()</a>, <a class="el" href="../../d5/d7/propdlg_8cpp-source.html#l00035">CInstallPage::OnInit()</a>, <a class="el" href="../../d8/d6/profinfo_8cpp-source.html#l00051">CProfileInformationPage::OnInit()</a>, <a class="el" href="../../d7/d4/profassoc_8cpp-source.html#l00057">CProfileAssociationPage::OnInit()</a>, <a class="el" href="../../d6/d6/devprop_8cpp-source.html#l01397">CMonitorProfileManagement::OnInit()</a>, <a class="el" href="../../d8/d7/appui_8cpp-source.html#l00638">CColorMatchDialog::OnInit()</a>, <a class="el" href="../../d6/d6/devprop_8cpp-source.html#l00579">CAddProfileDialog::OpenFileHookProc()</a>, <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l01151">SetEndTaskDlgStatus()</a>, and <a class="el" href="../../d1/d1/lboxctl3_8c-source.html#l00190">xxxDlgDirListHelper()</a>.
<p>
<pre class="fragment"><div>00772 {
00773     <span class="keywordflow">if</span> ((hwnd = <a class="code" href="../../d3/d9/client_2wow_8c.html#a6">GetDlgItem</a>(hwnd, <span class="keywordtype">id</span>)) != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00774         <span class="keywordflow">return</span> <a class="code" href="../../d5/d9/cltxt_8h.html#a23">SetWindowText</a>(hwnd, lpch);
00775     }
00776 
00777     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00778 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a30" doxytag="cltxt.h::SetMenuItemInfo" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL SetMenuItemInfo           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HMENU&nbsp;</td>
          <td class="mdname" nowrap> <em>hMenu</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>uID</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fByPosition</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPCMENUITEMINFO&nbsp;</td>
          <td class="mdname" nowrap> <em>lpmii</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d8/cltxt_8h-source.html#l01685">1685</a> of file <a class="el" href="../../d6/d8/cltxt_8h-source.html">cltxt.h</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00018">IS_ANSI</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01992">MENUAPI_SET</a>, <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00377">ThunkedMenuItemInfo()</a>, and <a class="el" href="../../d6/d0/usercli_8h.html#a769">ValidateMENUITEMINFO()</a>.
<p>
Referenced by <a class="el" href="../../d2/d6/ntcon_2server_2menu_8c-source.html#l00024">MyModifyMenuItem()</a>, and <a class="el" href="../../d8/d6/menuc_8c-source.html#l00296">SetMenuItemBitmaps()</a>.
<p>
<pre class="fragment"><div>01686 {
01687 
01688     MENUITEMINFOW miiLocal;
01689 
01690     <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d0/usercli_8h.html#a769">ValidateMENUITEMINFO</a>((LPMENUITEMINFOW)lpmii, &amp;miiLocal, MENUAPI_SET)) {
01691         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01692     }
01693 
01694     <span class="keywordflow">return</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a771">ThunkedMenuItemInfo</a>(hMenu, uID, fByPosition, FALSE, &amp;miiLocal, IS_ANSI));
01695 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a25" doxytag="cltxt.h::SetVideoTimeout" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL SetVideoTimeout           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>dwVideoTimeout</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00918">918</a> of file <a class="el" href="../../d6/d8/cltxt_8h-source.html">cltxt.h</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00914">PFNGETACTIVEPWRSCHEME</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00916">PFNREADPWRSCHEME</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00915">PFNSETACTIVEPWRSCHEME</a>, and <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>.
<p>
Referenced by <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00959">SystemParametersInfo()</a>.
<p>
<pre class="fragment"><div>00920 {
00921     POWER_POLICY pp;
00922     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> uiID;
00923     HINSTANCE hInstDLL;
00924     <a class="code" href="../../d5/d9/cltxt_8h.html#a4">PFNGETACTIVEPWRSCHEME</a> pfnGetActivePwrScheme;
00925     <a class="code" href="../../d5/d9/cltxt_8h.html#a5">PFNSETACTIVEPWRSCHEME</a> pfnSetActivePwrScheme;
00926     <a class="code" href="../../d5/d9/cltxt_8h.html#a6">PFNREADPWRSCHEME</a> pfnReadPwrScheme;
00927     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fRet = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00928 
00929     <span class="keywordflow">if</span> ((hInstDLL = LoadLibrary(TEXT(<span class="stringliteral">"powrprof.dll"</span>))) ==  <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00930         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00931     }
00932 
00933     pfnGetActivePwrScheme = (<a class="code" href="../../d5/d9/cltxt_8h.html#a4">PFNGETACTIVEPWRSCHEME</a>)GetProcAddress(hInstDLL, <span class="stringliteral">"GetActivePwrScheme"</span>);
00934     pfnSetActivePwrScheme = (<a class="code" href="../../d5/d9/cltxt_8h.html#a5">PFNSETACTIVEPWRSCHEME</a>)GetProcAddress(hInstDLL, <span class="stringliteral">"SetActivePwrScheme"</span>);
00935     pfnReadPwrScheme = (<a class="code" href="../../d5/d9/cltxt_8h.html#a6">PFNREADPWRSCHEME</a>)GetProcAddress(hInstDLL, <span class="stringliteral">"ReadPwrScheme"</span>);
00936 
00937     <span class="keywordflow">if</span> (pfnGetActivePwrScheme(&amp;uiID)) {
00938 
00939         <span class="keywordflow">if</span> (pfnReadPwrScheme(uiID, &amp;pp)) {
00940 
00941             pp.user.VideoTimeoutDc = dwVideoTimeout;
00942             pp.user.VideoTimeoutAc = dwVideoTimeout;
00943 
00944             fRet = pfnSetActivePwrScheme(uiID, NULL, &amp;pp);
00945         }
00946     }
00947     FreeLibrary (hInstDLL);
00948 
00949     <span class="keywordflow">return</span> fRet;
00950 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a12" doxytag="cltxt.h::SetWindowLongPtr" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LONG_PTR APIENTRY SetWindowLongPtr           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hWnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>nIndex</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LONG_PTR&nbsp;</td>
          <td class="mdname" nowrap> <em>dwNewLong</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00408">408</a> of file <a class="el" href="../../d6/d8/cltxt_8h-source.html">cltxt.h</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l01366">_SetWindowLongPtr</a>, <a class="el" href="../../d2/d0/bench_8c-source.html#l00048">APIENTRY</a>, <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00110">hWnd</a>, and <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00018">IS_ANSI</a>.
<p>
Referenced by <a class="el" href="../../d7/d4/connect_8c-source.html#l00607">ConnectConv()</a>, <a class="el" href="../../d6/d7/sftkbdc1_8c-source.html#l00342">CreateC1Window()</a>, <a class="el" href="../../d7/d7/sftkbdt1_8c-source.html#l00560">CreateT1Window()</a>, <a class="el" href="../../d4/d3/ddemlwp_8c-source.html#l00376">DDEMLClientWndProc()</a>, <a class="el" href="../../d7/d7/proppage_8cpp-source.html#l00044">CPropertyPage::DialogProc()</a>, <a class="el" href="../../d9/d6/dialog_8cpp-source.html#l00083">CDialog::DialogProc()</a>, <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l01312">EndTaskDlgProc()</a>, <a class="el" href="../../d1/d3/find_8c-source.html#l00171">FindDialogProc()</a>, <a class="el" href="../../d0/d9/imectl_8c-source.html#l00588">ImeSelectHandler()</a>, <a class="el" href="../../d0/d9/imectl_8c-source.html#l00798">ImeSetContextHandler()</a>, <a class="el" href="../../d0/d3/ddemlcli_8c-source.html#l00065">InternalDdeInitialize()</a>, <a class="el" href="../../d7/d3/msgbox_8c-source.html#l01648">MB_DlgProcWorker()</a>, <a class="el" href="../../d0/d1/usrbench_8c-source.html#l01934">MDIChildWndProc()</a>, <a class="el" href="../../d6/d6/devprop_8cpp-source.html#l01533">CMonitorProfileManagement::OnNotify()</a>, <a class="el" href="../../d6/d6/devprop_8cpp-source.html#l01075">CPrinterProfileManagement::OnNotify()</a>, <a class="el" href="../../d6/d6/devprop_8cpp-source.html#l00534">CDeviceProfileManagement::OnNotify()</a>, <a class="el" href="../../d4/d3/ddemlwp_8c-source.html#l00059">ProcessDDEMLInitiate()</a>, <a class="el" href="../../d9/d4/reader_8c-source.html#l00158">ReaderWndProc()</a>, <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00467">ShiftMenuIDs()</a>, <a class="el" href="../../d7/d4/connect_8c-source.html#l01153">UnlinkConvFromOthers()</a>, and <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01237">xxxMDIActivate()</a>.
<p>
<pre class="fragment"><div>00409 {
00410     <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a209">_SetWindowLongPtr</a>(hWnd, nIndex, dwNewLong, IS_ANSI);
00411 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a23" doxytag="cltxt.h::SetWindowText" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL WINAPI SetWindowText           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPCTSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>pString</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00848">848</a> of file <a class="el" href="../../d6/d8/cltxt_8h-source.html">cltxt.h</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00574">DefWindowProcWorker()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00018">IS_ANSI</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00270">SendMessageWorker()</a>, <a class="el" href="../../d0/d7/kernel_2winmgr_8c-source.html#l01178">TestWindowProcess()</a>, and <a class="el" href="../../d5/d9/immcli_8h-source.html#l00120">ValidateHwnd</a>.
<p>
Referenced by <a class="el" href="../../d7/d1/output_8c-source.html#l04700">ConsoleWindowProc()</a>, <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l01312">EndTaskDlgProc()</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00109">InitConsoleIME()</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00768">SetDlgItemText()</a>, <a class="el" href="../../d2/d6/ntcon_2server_2menu_8c-source.html#l00236">SetWinText()</a>, and <a class="el" href="../../d2/d3/combo_8c-source.html#l02028">xxxCBInternalUpdateEditWindow()</a>.
<p>
<pre class="fragment"><div>00851 {
00852     LRESULT lReturn;
00853     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwnd;
00854 
00855     <span class="comment">/*</span>
00856 <span class="comment">     * Make sure we have a valid window.</span>
00857 <span class="comment">     */</span>
00858     <span class="keywordflow">if</span> ((pwnd = <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(hwnd)) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00859         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00860     }
00861 
00862     <span class="comment">/*</span>
00863 <span class="comment">     * This process comparison is bogus, but it is what win3.1 does.</span>
00864 <span class="comment">     */</span>
00865     <span class="keywordflow">if</span> (<a class="code" href="../../d9/d7/kernel_2winmgr_8c.html#a16">TestWindowProcess</a>(pwnd)) {
00866         lReturn = <a class="code" href="../../d6/d0/usercli_8h.html#a600">SendMessageWorker</a>(pwnd, WM_SETTEXT, 0, (LPARAM)pString, IS_ANSI);
00867     } <span class="keywordflow">else</span> {
00868         lReturn = <a class="code" href="../../d6/d0/usercli_8h.html#a610">DefWindowProcWorker</a>(pwnd, WM_SETTEXT, 0, (LPARAM)pString, IS_ANSI);
00869     }
00870     <span class="keywordflow">return</span> (lReturn &gt;= 0);
00871 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a26" doxytag="cltxt.h::SystemParametersInfo" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL APIENTRY SystemParametersInfo           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>wFlag</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PVOID&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>flags</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00959">959</a> of file <a class="el" href="../../d6/d8/cltxt_8h-source.html">cltxt.h</a>.
<p>
References <a class="el" href="../../d2/d0/bench_8c-source.html#l00048">APIENTRY</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00075">ARRAY_SIZE</a>, <a class="el" href="../../d8/d8/ntsend_8h-source.html#l00027">BEGINCALL</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l03702">tagINTERNALSETHIGHCONTRAST::cbSize</a>, <a class="el" href="../../d8/d8/ntsend_8h-source.html#l00266">CLEANUPLPTSTR</a>, <a class="el" href="../../d6/d0/usercli_8h.html#a637">CopyLogFontAtoW()</a>, <a class="el" href="../../d6/d0/usercli_8h.html#a638">CopyLogFontWtoA()</a>, <a class="el" href="../../d8/d8/ntsend_8h-source.html#l00256">COPYLPTSTR</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l03703">tagINTERNALSETHIGHCONTRAST::dwFlags</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d8/d8/ntsend_8h-source.html#l00047">ENDCALL</a>, <a class="el" href="../../d8/d8/ntsend_8h-source.html#l00035">ERRORTRAP</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00316">_IN_STRING::fAllocated</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d6/d0/usercli_8h.html#a350">IN_STRING</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00025">INT</a>, <a class="el" href="../../d1/d0/inc_2user_8h.html#a1120">INTERNALSETHIGHCONTRAST</a>, <a class="el" href="../../d4/d8/arcinst_8c-source.html#l00065">MAX_PATH</a>, <a class="el" href="../../d6/d3/acpitabl_8h-source.html#l00366">min</a>, <a class="el" href="../../d6/d7/crecv_8c-source.html#l00069">MSGERROR</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l02400">NtUserSystemParametersInfo()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00069">pcHighContrastScheme</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00315">_IN_STRING::pstr</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00068">pwcHighContrastScheme</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00918">SetVideoTimeout()</a>, and <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>.
<p>
Referenced by <a class="el" href="../../d7/d1/output_8c-source.html#l04700">ConsoleWindowProc()</a>, <a class="el" href="../../d7/d8/softkbd_8c-source.html#l00103">GetAllMonitorSize()</a>, <a class="el" href="../../d0/d9/imectl_8c-source.html#l00417">ImeSystemHandler()</a>, <a class="el" href="../../d7/d1/output_8c-source.html#l00177">InitializeSystemMetrics()</a>, <a class="el" href="../../d0/d4/ntcon_2server_2getset_8c-source.html#l01385">SrvGetConsoleKeyboardLayoutName()</a>, and <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00049">UpdatePerUserSystemParameters()</a>.
<p>
<pre class="fragment"><div>00964 {
00965 <span class="preprocessor">#if IS_ANSI</span>
00966 <span class="preprocessor"></span>    NONCLIENTMETRICSW ClientMetricsW;
00967     ICONMETRICSW      IconMetricsW;
00968     LOGFONTW          LogFontW;
00969     <span class="comment">/*</span>
00970 <span class="comment">     * Bug 257718 - joejo</span>
00971 <span class="comment">     * Add SPI_GETDESKWALLPAPER to SystemParametersInfo</span>
00972 <span class="comment">     */</span>
00973     WCHAR             szTemp[<a class="code" href="../../d3/d9/arcinst_8c.html#a6">MAX_PATH</a>];
00974     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>              oldwParam = wParam;
00975 <span class="preprocessor">#endif</span>
00976 <span class="preprocessor"></span>    <a class="code" href="../../d8/d8/structtagINTERNALSETHIGHCONTRAST.html">INTERNALSETHIGHCONTRAST</a> ihc;
00977     <a class="code" href="../../d8/d1/struct__IN__STRING.html">IN_STRING</a>         strlParam;
00978     PVOID             oldlParam = lParam;
00979 
00980     <span class="comment">/*</span>
00981 <span class="comment">     * Make sure cleanup will work successfully</span>
00982 <span class="comment">     */</span>
00983     strlParam.<a class="code" href="../../d8/d1/struct__IN__STRING.html#o2">fAllocated</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00984 
00985     <a class="code" href="../../d7/d9/ntsend_8h.html#a1">BEGINCALL</a>();
00986 
00987     <span class="keywordflow">switch</span> (wFlag) {
00988     <span class="keywordflow">case</span> SPI_SETSCREENSAVERRUNNING:     <span class="comment">// same as SPI_SCREENSAVERRUNNING</span>
00989         <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>();
00990 
00991     <span class="keywordflow">case</span> SPI_SETDESKPATTERN:
00992 
00993         <span class="keywordflow">if</span> (wParam == 0x0000FFFF)
00994             wParam = (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)-1;
00995 
00996         <span class="comment">/*</span>
00997 <span class="comment">         * lParam not a string (and already copied)</span>
00998 <span class="comment">         */</span>
00999         <span class="keywordflow">if</span> (wParam == (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)-1)
01000             <span class="keywordflow">break</span>;
01001 
01002         <span class="comment">/*</span>
01003 <span class="comment">         * lParam is possibly 0 or -1 (filled in already) or a string</span>
01004 <span class="comment">         */</span>
01005         <span class="keywordflow">if</span> ((lParam != (PVOID)0) &amp;&amp; (lParam != (PVOID)-1)) {
01006             <a class="code" href="../../d7/d9/ntsend_8h.html#a45">COPYLPTSTR</a>(&amp;strlParam, (LPTSTR)lParam);
01007             lParam = strlParam.<a class="code" href="../../d8/d1/struct__IN__STRING.html#o1">pstr</a>;
01008         }
01009         <span class="keywordflow">break</span>;
01010 
01011     <span class="keywordflow">case</span> SPI_SETDESKWALLPAPER: {
01012 
01013             <span class="comment">/*</span>
01014 <span class="comment">             * lParam is possibly 0, -1 or -2 (filled in already) or a string.</span>
01015 <span class="comment">             * Get a pointer to the string so we can use it later.  We're</span>
01016 <span class="comment">             * going to a bit of normalizing here for consistency.</span>
01017 <span class="comment">             *</span>
01018 <span class="comment">             * If the caller passes in 0, -1 or -2, we're going to set</span>
01019 <span class="comment">             * the wParam to -1, and use the lParam to pass the string</span>
01020 <span class="comment">             * representation of the wallpaper.</span>
01021 <span class="comment">             */</span>
01022             <span class="keywordflow">if</span> ((lParam != (PVOID) 0) &amp;&amp;
01023                 (lParam != (PVOID)-1) &amp;&amp;
01024                 (lParam != (PVOID)-2)) {
01025 
01026                 <a class="code" href="../../d7/d9/ntsend_8h.html#a45">COPYLPTSTR</a>(&amp;strlParam, (LPTSTR)lParam);
01027                 lParam = strlParam.<a class="code" href="../../d8/d1/struct__IN__STRING.html#o1">pstr</a>;
01028                 wParam = 0;
01029 
01030             } <span class="keywordflow">else</span> {
01031                 wParam = (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)-1;
01032             }
01033         }
01034         <span class="keywordflow">break</span>;
01035 
01036     <span class="comment">/*</span>
01037 <span class="comment">     * Bug 257718 - joejo</span>
01038 <span class="comment">     * Add SPI_GETDESKWALLPAPER to SystemParametersInfo</span>
01039 <span class="comment">     */</span>
01040     <span class="keywordflow">case</span> SPI_GETDESKWALLPAPER:
01041         <span class="keywordflow">if</span> ((lParam == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) || (wParam == 0))
01042             <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>();
01043 <span class="preprocessor">#if IS_ANSI</span>
01044 <span class="preprocessor"></span>        lParam = szTemp;
01045         wParam = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a2">ARRAY_SIZE</a>(szTemp);
01046 <span class="preprocessor">#else</span>
01047 <span class="preprocessor"></span>        <span class="comment">/*</span>
01048 <span class="comment">         * Bug 283318 - joejo</span>
01049 <span class="comment">         * Leave space for a null termination</span>
01050 <span class="comment">         */</span>
01051         wParam--;
01052 <span class="preprocessor">#endif</span>
01053 <span class="preprocessor"></span>
01054         <span class="keywordflow">break</span>;
01055 
01056 
01057     <span class="keywordflow">case</span> SPI_GETANIMATION:
01058         <span class="keywordflow">if</span> ((lParam == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) || (*((<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> *)(lParam)) != <span class="keyword">sizeof</span>(ANIMATIONINFO)))
01059                 <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>();
01060         <span class="keywordflow">break</span>;
01061 
01062     <span class="keywordflow">case</span> SPI_GETNONCLIENTMETRICS:
01063 <span class="preprocessor">#if IS_ANSI</span>
01064 <span class="preprocessor"></span>        <span class="keywordflow">if</span> ((lParam == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) || (*((<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> *)(lParam)) != <span class="keyword">sizeof</span>(NONCLIENTMETRICSA)))
01065             <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>();
01066         lParam = &amp;ClientMetricsW;
01067 <span class="preprocessor">#else</span>
01068 <span class="preprocessor"></span>        <span class="keywordflow">if</span> ((lParam == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) || (*((<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> *)(lParam)) != <span class="keyword">sizeof</span>(NONCLIENTMETRICSW)))
01069             <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>();
01070 <span class="preprocessor">#endif</span>
01071 <span class="preprocessor"></span>        <span class="keywordflow">break</span>;
01072 
01073     <span class="keywordflow">case</span> SPI_GETMINIMIZEDMETRICS:
01074         <span class="keywordflow">if</span> ((lParam == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) || (*((<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> *)(lParam)) != <span class="keyword">sizeof</span>(MINIMIZEDMETRICS)))
01075             <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>();
01076         <span class="keywordflow">break</span>;
01077 
01078     <span class="keywordflow">case</span> SPI_GETICONMETRICS:
01079 <span class="preprocessor">#if IS_ANSI</span>
01080 <span class="preprocessor"></span>        <span class="keywordflow">if</span> ((lParam == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) || (*((<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> *)(lParam)) != <span class="keyword">sizeof</span>(ICONMETRICSA)))
01081             <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>();
01082         lParam = &amp;IconMetricsW;
01083 <span class="preprocessor">#else</span>
01084 <span class="preprocessor"></span>        <span class="keywordflow">if</span> ((lParam == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) || (*((<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> *)(lParam)) != <span class="keyword">sizeof</span>(ICONMETRICSW)))
01085             <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>();
01086 <span class="preprocessor">#endif</span>
01087 <span class="preprocessor"></span>        <span class="keywordflow">break</span>;
01088 
01089     <span class="keywordflow">case</span> SPI_GETHIGHCONTRAST:
01090 <span class="preprocessor">#if IS_ANSI</span>
01091 <span class="preprocessor"></span>        {
01092             LPHIGHCONTRASTA pHC = (HIGHCONTRASTA *)lParam;
01093             <span class="keywordflow">if</span> (!pHC || (pHC-&gt;cbSize != <span class="keyword">sizeof</span>(HIGHCONTRASTA))) {
01094                 <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>();
01095             }
01096             <span class="keywordflow">if</span> (!<a class="code" href="../../d1/d8/clglobal_8c.html#a17">pcHighContrastScheme</a>) {
01097                 <a class="code" href="../../d1/d8/clglobal_8c.html#a17">pcHighContrastScheme</a> = LocalAlloc(LPTR, MAX_SCHEME_NAME_SIZE * <span class="keyword">sizeof</span>(WCHAR));
01098                 <span class="keywordflow">if</span> (!<a class="code" href="../../d1/d8/clglobal_8c.html#a17">pcHighContrastScheme</a>)
01099                     <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>();
01100             }
01101             <span class="keywordflow">if</span> (!<a class="code" href="../../d1/d8/clglobal_8c.html#a16">pwcHighContrastScheme</a>) {
01102                 <a class="code" href="../../d1/d8/clglobal_8c.html#a16">pwcHighContrastScheme</a> = LocalAlloc(LPTR, MAX_SCHEME_NAME_SIZE * <span class="keyword">sizeof</span>(WCHAR));
01103                 <span class="keywordflow">if</span> (!<a class="code" href="../../d1/d8/clglobal_8c.html#a16">pwcHighContrastScheme</a>)
01104                     <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>();
01105             }
01106             ((LPHIGHCONTRASTW)(lParam))-&gt;lpszDefaultScheme = <a class="code" href="../../d1/d8/clglobal_8c.html#a16">pwcHighContrastScheme</a>;
01107         }
01108 <span class="preprocessor">#else</span>
01109 <span class="preprocessor"></span>        {
01110             LPHIGHCONTRASTW pHC = (HIGHCONTRASTW *)lParam;
01111             <span class="keywordflow">if</span> (!pHC || (pHC-&gt;cbSize != <span class="keyword">sizeof</span>(HIGHCONTRASTW)))
01112                 <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>();
01113             <span class="keywordflow">if</span> (!<a class="code" href="../../d1/d8/clglobal_8c.html#a16">pwcHighContrastScheme</a>) {
01114                 <a class="code" href="../../d1/d8/clglobal_8c.html#a16">pwcHighContrastScheme</a> = LocalAlloc(LPTR, MAX_SCHEME_NAME_SIZE * <span class="keyword">sizeof</span>(WCHAR));
01115                 <span class="keywordflow">if</span> (!<a class="code" href="../../d1/d8/clglobal_8c.html#a16">pwcHighContrastScheme</a>)
01116                     <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>();
01117             }
01118             pHC-&gt;lpszDefaultScheme = <a class="code" href="../../d1/d8/clglobal_8c.html#a16">pwcHighContrastScheme</a>;
01119         }
01120 <span class="preprocessor">#endif</span>
01121 <span class="preprocessor"></span>
01122         <span class="keywordflow">break</span>;
01123 
01124 <span class="preprocessor">#if IS_ANSI</span>
01125 <span class="preprocessor"></span>    <span class="keywordflow">case</span> SPI_GETICONTITLELOGFONT:
01126         lParam = &amp;LogFontW;
01127         <span class="keywordflow">break</span>;
01128 <span class="preprocessor">#endif</span>
01129 <span class="preprocessor"></span>
01130     <span class="keywordflow">case</span> SPI_SETANIMATION:
01131         {
01132             <span class="keywordflow">if</span> ((lParam == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) || (*((<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> *)(lParam)) != <span class="keyword">sizeof</span>(ANIMATIONINFO)))
01133                 <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>();
01134         }
01135         <span class="keywordflow">break</span>;
01136 
01137     <span class="keywordflow">case</span> SPI_SETHIGHCONTRAST:
01138         ihc.<a class="code" href="../../d8/d8/structtagINTERNALSETHIGHCONTRAST.html#o0">cbSize</a> = <span class="keyword">sizeof</span> (HIGHCONTRASTW);
01139         {
01140             LPHIGHCONTRAST pHC = (HIGHCONTRAST *)lParam;
01141             <span class="keywordflow">if</span> ((lParam == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) || (pHC-&gt;cbSize != <span class="keyword">sizeof</span>(HIGHCONTRAST)))
01142                 <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>();
01143 
01144             lParam = &amp;ihc;
01145             ihc.<a class="code" href="../../d8/d8/structtagINTERNALSETHIGHCONTRAST.html#o1">dwFlags</a> = pHC-&gt;dwFlags;
01146             <a class="code" href="../../d7/d9/ntsend_8h.html#a45">COPYLPTSTR</a>(&amp;strlParam, pHC-&gt;lpszDefaultScheme);
01147             ihc.usDefaultScheme = *strlParam.<a class="code" href="../../d8/d1/struct__IN__STRING.html#o1">pstr</a>;
01148         }
01149         <span class="keywordflow">break</span>;
01150 
01151     <span class="keywordflow">case</span> SPI_SETNONCLIENTMETRICS:
01152 <span class="preprocessor">#if IS_ANSI</span>
01153 <span class="preprocessor"></span>        {
01154             PNONCLIENTMETRICSA psrc = (PNONCLIENTMETRICSA)lParam;
01155 
01156             <span class="keywordflow">if</span> ((lParam == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) || (*((<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> *)(lParam)) != <span class="keyword">sizeof</span>(NONCLIENTMETRICSA)))
01157                 <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>();
01158 
01159             <span class="keywordflow">if</span>( psrc-&gt;iCaptionWidth &gt; 256 )
01160                 psrc-&gt;iCaptionWidth = 256;
01161 
01162             <span class="keywordflow">if</span>( psrc-&gt;iCaptionHeight &gt; 256 )
01163                 psrc-&gt;iCaptionHeight = 256;
01164 
01165             ClientMetricsW.cbSize           = psrc-&gt;cbSize;
01166             ClientMetricsW.iBorderWidth     = psrc-&gt;iBorderWidth;
01167             ClientMetricsW.iScrollWidth     = psrc-&gt;iScrollWidth;
01168             ClientMetricsW.iScrollHeight    = psrc-&gt;iScrollHeight;
01169             ClientMetricsW.iCaptionWidth    = psrc-&gt;iCaptionWidth;
01170             ClientMetricsW.iCaptionHeight   = psrc-&gt;iCaptionHeight;
01171             ClientMetricsW.iSmCaptionWidth  = psrc-&gt;iSmCaptionWidth;
01172             ClientMetricsW.iSmCaptionHeight = psrc-&gt;iSmCaptionHeight;
01173             ClientMetricsW.iMenuWidth       = psrc-&gt;iMenuWidth;
01174             ClientMetricsW.iMenuHeight      = psrc-&gt;iMenuHeight;
01175 
01176             <a class="code" href="../../d6/d0/usercli_8h.html#a637">CopyLogFontAtoW</a>(&amp;(ClientMetricsW.lfCaptionFont), &amp;(psrc-&gt;lfCaptionFont));
01177             <a class="code" href="../../d6/d0/usercli_8h.html#a637">CopyLogFontAtoW</a>(&amp;(ClientMetricsW.lfSmCaptionFont), &amp;(psrc-&gt;lfSmCaptionFont));
01178             <a class="code" href="../../d6/d0/usercli_8h.html#a637">CopyLogFontAtoW</a>(&amp;(ClientMetricsW.lfMenuFont), &amp;(psrc-&gt;lfMenuFont));
01179             <a class="code" href="../../d6/d0/usercli_8h.html#a637">CopyLogFontAtoW</a>(&amp;(ClientMetricsW.lfStatusFont), &amp;(psrc-&gt;lfStatusFont));
01180             <a class="code" href="../../d6/d0/usercli_8h.html#a637">CopyLogFontAtoW</a>(&amp;(ClientMetricsW.lfMessageFont), &amp;(psrc-&gt;lfMessageFont));
01181 
01182             lParam = &amp;ClientMetricsW;
01183         }
01184 <span class="preprocessor">#else</span>
01185 <span class="preprocessor"></span>        {
01186             PNONCLIENTMETRICSA psrc;
01187 
01188             <span class="keywordflow">if</span> ((lParam == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) || (*((<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> *)(lParam)) != <span class="keyword">sizeof</span>(NONCLIENTMETRICSW)))
01189                 <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>();
01190 
01191             psrc = (PNONCLIENTMETRICSA)lParam;
01192 
01193             <span class="keywordflow">if</span>( psrc-&gt;iCaptionWidth &gt; 256 )
01194                 psrc-&gt;iCaptionWidth = 256;
01195 
01196             <span class="keywordflow">if</span>( psrc-&gt;iCaptionHeight &gt; 256 )
01197                 psrc-&gt;iCaptionHeight = 256;
01198         }
01199 <span class="preprocessor">#endif</span>
01200 <span class="preprocessor"></span>        wParam = <span class="keyword">sizeof</span>(NONCLIENTMETRICSW);
01201         <span class="keywordflow">break</span>;
01202 
01203     <span class="keywordflow">case</span> SPI_SETMINIMIZEDMETRICS:
01204         <span class="keywordflow">if</span> ((lParam == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) || (*((<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> *)(lParam)) != <span class="keyword">sizeof</span>(MINIMIZEDMETRICS)))
01205             <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>();
01206         wParam = <span class="keyword">sizeof</span>(MINIMIZEDMETRICS);
01207         <span class="keywordflow">break</span>;
01208 
01209     <span class="keywordflow">case</span> SPI_SETICONMETRICS:
01210 <span class="preprocessor">#if IS_ANSI</span>
01211 <span class="preprocessor"></span>        {
01212             PICONMETRICSA psrc = (PICONMETRICSA)lParam;
01213 
01214             <span class="keywordflow">if</span> ((lParam == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) || (*((<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> *)(lParam)) != <span class="keyword">sizeof</span>(ICONMETRICSA)))
01215                 <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>();
01216 
01217             memcpy(&amp;IconMetricsW, psrc, <span class="keyword">sizeof</span>(ICONMETRICSA) - <span class="keyword">sizeof</span>(LOGFONTA));
01218 
01219             <a class="code" href="../../d6/d0/usercli_8h.html#a637">CopyLogFontAtoW</a>(&amp;(IconMetricsW.lfFont), &amp;(psrc-&gt;lfFont));
01220             lParam = &amp;IconMetricsW;
01221         }
01222 <span class="preprocessor">#else</span>
01223 <span class="preprocessor"></span>        <span class="keywordflow">if</span> ((lParam == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) || (*((<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> *)(lParam)) != <span class="keyword">sizeof</span>(ICONMETRICSW)))
01224             <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>();
01225 <span class="preprocessor">#endif</span>
01226 <span class="preprocessor"></span>        wParam = <span class="keyword">sizeof</span>(ICONMETRICSW);
01227         <span class="keywordflow">break</span>;
01228 
01229     <span class="keywordflow">case</span> SPI_SETICONTITLELOGFONT:
01230 <span class="preprocessor">#if IS_ANSI</span>
01231 <span class="preprocessor"></span>        <a class="code" href="../../d6/d0/usercli_8h.html#a637">CopyLogFontAtoW</a>(&amp;LogFontW, lParam);
01232         lParam = &amp;LogFontW;
01233 <span class="preprocessor">#endif</span>
01234 <span class="preprocessor"></span>        wParam = <span class="keyword">sizeof</span>(LOGFONTW);
01235         <span class="keywordflow">break</span>;
01236 
01237     <span class="keywordflow">case</span> SPI_GETFILTERKEYS:
01238         {
01239             <span class="keywordflow">if</span> ((((LPFILTERKEYS)lParam)-&gt;cbSize == 0) ||
01240                     (((LPFILTERKEYS)lParam)-&gt;cbSize) &gt; <span class="keyword">sizeof</span>(FILTERKEYS)) {
01241                 <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>();
01242             }
01243         }
01244         <span class="keywordflow">break</span>;
01245 
01246     <span class="keywordflow">case</span> SPI_GETSTICKYKEYS:
01247         {
01248             <span class="keywordflow">if</span> ((((LPSTICKYKEYS)lParam)-&gt;cbSize == 0) ||
01249                     (((LPSTICKYKEYS)lParam)-&gt;cbSize) &gt; <span class="keyword">sizeof</span>(STICKYKEYS)) {
01250                 <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>();
01251             }
01252         }
01253         <span class="keywordflow">break</span>;
01254 
01255     <span class="keywordflow">case</span> SPI_GETTOGGLEKEYS:
01256         {
01257             <span class="keywordflow">if</span> ((((LPTOGGLEKEYS)lParam)-&gt;cbSize == 0) ||
01258                     (((LPTOGGLEKEYS)lParam)-&gt;cbSize) &gt; <span class="keyword">sizeof</span>(TOGGLEKEYS)) {
01259                 <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>();
01260             }
01261         }
01262         <span class="keywordflow">break</span>;
01263 
01264     <span class="keywordflow">case</span> SPI_GETMOUSEKEYS:
01265         {
01266             <span class="keywordflow">if</span> ((((LPMOUSEKEYS)lParam)-&gt;cbSize == 0) ||
01267                     (((LPMOUSEKEYS)lParam)-&gt;cbSize) &gt; <span class="keyword">sizeof</span>(MOUSEKEYS)) {
01268                 <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>();
01269             }
01270         }
01271         <span class="keywordflow">break</span>;
01272 
01273     <span class="keywordflow">case</span> SPI_GETACCESSTIMEOUT:
01274         {
01275             <span class="keywordflow">if</span> ((((LPACCESSTIMEOUT)lParam)-&gt;cbSize == 0) ||
01276                     (((LPACCESSTIMEOUT)lParam)-&gt;cbSize) &gt; <span class="keyword">sizeof</span>(ACCESSTIMEOUT)) {
01277                 <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>();
01278             }
01279         }
01280         <span class="keywordflow">break</span>;
01281 
01282     <span class="keywordflow">case</span> SPI_GETSOUNDSENTRY:
01283         <span class="comment">/*</span>
01284 <span class="comment">         * Note: Currently we don't support the windows effect dll</span>
01285 <span class="comment">         * option for sound sentry.  Therefore, we don't have to</span>
01286 <span class="comment">         * deal with the lpszWindowsEffectDLL field (which can be</span>
01287 <span class="comment">         * ANSI or Unicode).</span>
01288 <span class="comment">         */</span>
01289         {
01290             <span class="keywordflow">if</span> ((((LPSOUNDSENTRY)lParam)-&gt;cbSize == 0) ||
01291                     (((LPSOUNDSENTRY)lParam)-&gt;cbSize) &gt; <span class="keyword">sizeof</span>(SOUNDSENTRY)) {
01292                 <a class="code" href="../../d5/d8/crecv_8c.html#a7">MSGERROR</a>();
01293             }
01294         }
01295         <span class="keywordflow">break</span>;
01296     }
01297 
01298     retval = <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a118">NtUserSystemParametersInfo</a>(wFlag, wParam, lParam, flags);
01299 
01300     <span class="keywordflow">switch</span> (wFlag) {
01301 <span class="preprocessor">#if IS_ANSI</span>
01302 <span class="preprocessor"></span>    <span class="keywordflow">case</span> SPI_GETNONCLIENTMETRICS:
01303         {
01304             PNONCLIENTMETRICSA pdst = (PNONCLIENTMETRICSA)oldlParam;
01305 
01306             pdst-&gt;cbSize           = <span class="keyword">sizeof</span>(NONCLIENTMETRICSA);
01307             pdst-&gt;iBorderWidth     = ClientMetricsW.iBorderWidth;
01308             pdst-&gt;iScrollWidth     = ClientMetricsW.iScrollWidth;
01309             pdst-&gt;iScrollHeight    = ClientMetricsW.iScrollHeight;
01310             pdst-&gt;iCaptionWidth    = ClientMetricsW.iCaptionWidth;
01311             pdst-&gt;iCaptionHeight   = ClientMetricsW.iCaptionHeight;
01312             pdst-&gt;iSmCaptionWidth  = ClientMetricsW.iSmCaptionWidth;
01313             pdst-&gt;iSmCaptionHeight = ClientMetricsW.iSmCaptionHeight;
01314             pdst-&gt;iMenuWidth       = ClientMetricsW.iMenuWidth;
01315             pdst-&gt;iMenuHeight      = ClientMetricsW.iMenuHeight;
01316 
01317             <a class="code" href="../../d6/d0/usercli_8h.html#a638">CopyLogFontWtoA</a>(&amp;(pdst-&gt;lfCaptionFont), &amp;(ClientMetricsW.lfCaptionFont));
01318             <a class="code" href="../../d6/d0/usercli_8h.html#a638">CopyLogFontWtoA</a>(&amp;(pdst-&gt;lfSmCaptionFont), &amp;(ClientMetricsW.lfSmCaptionFont));
01319             <a class="code" href="../../d6/d0/usercli_8h.html#a638">CopyLogFontWtoA</a>(&amp;(pdst-&gt;lfMenuFont), &amp;(ClientMetricsW.lfMenuFont));
01320             <a class="code" href="../../d6/d0/usercli_8h.html#a638">CopyLogFontWtoA</a>(&amp;(pdst-&gt;lfStatusFont), &amp;(ClientMetricsW.lfStatusFont));
01321             <a class="code" href="../../d6/d0/usercli_8h.html#a638">CopyLogFontWtoA</a>(&amp;(pdst-&gt;lfMessageFont), &amp;(ClientMetricsW.lfMessageFont));
01322         }
01323         <span class="keywordflow">break</span>;
01324 
01325     <span class="keywordflow">case</span> SPI_GETICONMETRICS:
01326         {
01327             PICONMETRICSA pdst = (PICONMETRICSA)oldlParam;
01328 
01329             memcpy(pdst, &amp;IconMetricsW, <span class="keyword">sizeof</span>(ICONMETRICSA) - <span class="keyword">sizeof</span>(LOGFONTA));
01330             pdst-&gt;cbSize = <span class="keyword">sizeof</span>(ICONMETRICSA);
01331 
01332             <a class="code" href="../../d6/d0/usercli_8h.html#a638">CopyLogFontWtoA</a>(&amp;(pdst-&gt;lfFont), &amp;(IconMetricsW.lfFont));
01333         }
01334         <span class="keywordflow">break</span>;
01335 
01336     <span class="keywordflow">case</span> SPI_GETICONTITLELOGFONT:
01337         {
01338             <a class="code" href="../../d6/d0/usercli_8h.html#a638">CopyLogFontWtoA</a>((PLOGFONTA)oldlParam, &amp;LogFontW);
01339         }
01340         <span class="keywordflow">break</span>;
01341 
01342     <span class="keywordflow">case</span> SPI_GETHIGHCONTRAST:
01343         WCSToMB(pwcHighContrastScheme, -1, &amp;pcHighContrastScheme, MAX_SCHEME_NAME_SIZE, FALSE);
01344         ((LPHIGHCONTRASTA)(lParam))-&gt;lpszDefaultScheme = <a class="code" href="../../d1/d8/clglobal_8c.html#a17">pcHighContrastScheme</a>;
01345         <span class="keywordflow">break</span>;
01346 
01347 <span class="preprocessor">#endif  // IS_ANSI</span>
01348 <span class="preprocessor"></span>
01349     <span class="comment">/*</span>
01350 <span class="comment">     * Bug 257718 - joejo</span>
01351 <span class="comment">     * Add SPI_GETDESKWALLPAPER to SystemParametersInfo</span>
01352 <span class="comment">     */</span>
01353     <span class="keywordflow">case</span> SPI_GETDESKWALLPAPER:
01354         {
01355         <span class="comment">/*</span>
01356 <span class="comment">         * Bug 283318 - joejo</span>
01357 <span class="comment">         * Make sure strings are null terminated.</span>
01358 <span class="comment">         */</span>
01359 <span class="preprocessor">#if IS_ANSI</span>
01360 <span class="preprocessor"></span>            <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a> cchAnsiCopy = WCSToMB(lParam,
01361                                         -1,
01362                                         (LPSTR*)&amp;oldlParam,
01363                                         oldwParam - 1,
01364                                         FALSE);
01365 
01366             cchAnsiCopy = <a class="code" href="../../d5/d4/acpitabl_8h.html#a69">min</a>(cchAnsiCopy, (INT)(oldwParam - 1));
01367             ((LPSTR)oldlParam)[cchAnsiCopy] = 0;
01368 <span class="preprocessor">#else   //UNICODE</span>
01369 <span class="preprocessor"></span>            ((LPWSTR)oldlParam)[wParam] = (WCHAR)0;
01370 <span class="preprocessor">#endif  //IS_ANSI</span>
01371 <span class="preprocessor"></span>            <span class="keywordflow">break</span>;
01372         }
01373     <span class="keywordflow">case</span> SPI_SETLOWPOWERTIMEOUT:
01374     <span class="keywordflow">case</span> SPI_SETPOWEROFFTIMEOUT:
01375         <span class="keywordflow">if</span> (retval &amp;&amp; (flags &amp; SPIF_UPDATEINIFILE)) {
01376             retval = <a class="code" href="../../d6/d0/usercli_8h.html#a553">SetVideoTimeout</a>(wParam);
01377         }
01378         <span class="keywordflow">break</span>;
01379     }
01380 
01381     <a class="code" href="../../d7/d9/ntsend_8h.html#a3">ERRORTRAP</a>(FALSE);
01382     <a class="code" href="../../d7/d9/ntsend_8h.html#a55">CLEANUPLPTSTR</a>(strlParam);
01383     <a class="code" href="../../d7/d9/ntsend_8h.html#a5">ENDCALL</a>(BOOL);
01384 }
</div></pre>    </td>
  </tr>
</table>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="a3" doxytag="cltxt.h::DispatchHook" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LRESULT TEXT_FN( <a class="el" href="../../d5/d9/cltxt_8h.html#a3">DispatchHook</a>)(int dw, WPARAM wParam, LPARAM lParam, HOOKPROC pfn)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00128">128</a> of file <a class="el" href="../../d6/d8/cltxt_8h-source.html">cltxt.h</a>.
<p>
<pre class="fragment"><div>00133 {
00134     <span class="keywordtype">int</span> dwHookSave;
00135     LRESULT nRet;
00136     <a class="code" href="../../d2/d2/struct__CLIENTINFO.html">PCLIENTINFO</a> pci;
00137 <span class="preprocessor">#ifdef WX86</span>
00138 <span class="preprocessor"></span>    HOOKPROC pfnHook;
00139 <span class="preprocessor">#endif</span>
00140 <span class="preprocessor"></span><span class="preprocessor">#if IS_ANSI</span>
00141 <span class="preprocessor"></span>    WPARAM wParamSave;
00142 <span class="preprocessor">#endif</span>
00143 <span class="preprocessor"></span>    <span class="comment">/* -FE-</span>
00144 <span class="comment">     * * THIS VARIABLE SHOULD BE THREAD AWARE *</span>
00145 <span class="comment">     */</span>
00146     <span class="keyword">static</span> EVENTMSG CachedEvent = {0,0,0,(<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)0,(HWND)0};
00147 
00148     <span class="comment">/*</span>
00149 <span class="comment">     * First save the current hook stored in the CTI structure in case we're</span>
00150 <span class="comment">     * being recursed into. dw contains MAKELONG(nCode, nFilterType).</span>
00151 <span class="comment">     */</span>
00152     pci = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a16">GetClientInfo</a>();
00153     dwHookSave = pci-&gt;<a class="code" href="../../d2/d2/struct__CLIENTINFO.html#o10">dwHookCurrent</a>;
00154     pci-&gt;<a class="code" href="../../d2/d2/struct__CLIENTINFO.html#o10">dwHookCurrent</a> = (dw &amp; 0xFFFF0000) | <a class="code" href="../../d5/d9/cltxt_8h.html#a0">IS_ANSI</a>;
00155 
00156 <span class="preprocessor">#ifdef WX86</span>
00157 <span class="preprocessor"></span>
00158     <span class="comment">//</span>
00159     <span class="comment">// If this is an x86 hook proc, fetch a risc thunk to call</span>
00160     <span class="comment">//</span>
00161 
00162     pfnHook = (PVOID)((ULONG_PTR)pfn &amp; ~0x80000000);
00163     <span class="keywordflow">if</span> (pfn != pfnHook) {
00164         <span class="keywordflow">if</span> (pfnWx86HookCallBack) {
00165             pfn = pfnWx86HookCallBack(HIWORD(dw),    <span class="comment">// filter type</span>
00166                                       pfnHook        <span class="comment">// hook proc</span>
00167                                       );
00168             }
00169     }
00170 
00171 <span class="preprocessor">#endif</span>
00172 <span class="preprocessor"></span>
00173 <span class="preprocessor">#if IS_ANSI       // TEXT_FN(DispatchHook)()</span>
00174 <span class="preprocessor"></span>    <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a125">IS_DBCS_ENABLED</a>()) {
00175         PMSG pMsg;
00176         PEVENTMSG pEMsg;
00177         <span class="keywordflow">switch</span> (HIWORD(dw)) {
00178         <span class="keywordflow">case</span> WH_JOURNALPLAYBACK:
00179             <span class="keywordflow">switch</span> (LOWORD(dw)) {
00180             <span class="keywordflow">case</span> HC_SKIP:
00181                 CachedEvent.message = 0;
00182                 <span class="keywordflow">break</span>;
00183             <span class="keywordflow">case</span> HC_GETNEXT:
00184             <span class="keywordflow">case</span> HC_NOREMOVE:
00185                 pEMsg = (PEVENTMSG)lParam;
00186                 <span class="keywordflow">if</span> (CachedEvent.message != 0 &amp;&amp; pEMsg != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00187                     RtlCopyMemory((PEVENTMSG)lParam,&amp;CachedEvent,<span class="keyword">sizeof</span>(EVENTMSG));
00188                     <span class="keywordflow">return</span> 0;
00189                 }
00190                 <span class="keywordflow">break</span>;
00191             }
00192             <span class="keywordflow">break</span>;
00193         <span class="keywordflow">case</span> WH_MSGFILTER:
00194         <span class="keywordflow">case</span> WH_SYSMSGFILTER:
00195         <span class="keywordflow">case</span> WH_GETMESSAGE:
00196             pMsg = (PMSG)lParam;
00197             <span class="keywordflow">if</span> (pMsg) {
00198                 <span class="comment">/*</span>
00199 <span class="comment">                 * Save original message.</span>
00200 <span class="comment">                 */</span>
00201                 wParamSave = pMsg-&gt;wParam;
00202                 <span class="keywordflow">switch</span> (pMsg-&gt;message) {
00203                 <span class="keywordflow">case</span> WM_CHAR:
00204                 <span class="keywordflow">case</span> EM_SETPASSWORDCHAR:
00205                     <span class="comment">/*</span>
00206 <span class="comment">                     * Here... pMsg-&gt;wParam contains..</span>
00207 <span class="comment">                     *</span>
00208 <span class="comment">                     * HIWORD(wParam)         = Information for DBCS messgaing.</span>
00209 <span class="comment">                     * HIBYTE(LOWORD(wParam)) = Dbcs LeadingByte Byte.</span>
00210 <span class="comment">                     * LOBYTE(LOWORD(wParam)) = Dbcs TrailingByte or Sbcs character.</span>
00211 <span class="comment">                     *</span>
00212 <span class="comment">                     */</span>
00213                     <span class="keywordflow">if</span> (pMsg-&gt;wParam &amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a119">WMCR_IR_DBCSCHAR</a>) {
00214                         <span class="comment">/*</span>
00215 <span class="comment">                         * Mask off DBCS messaging infomation area.</span>
00216 <span class="comment">                         * (Look up only DBCS character code data).</span>
00217 <span class="comment">                         */</span>
00218                         pMsg-&gt;wParam &amp;= 0x0000FFFF;
00219                     } <span class="keywordflow">else</span> {
00220                         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a120">IS_DBCS_MESSAGE</a>(LOWORD(pMsg-&gt;wParam))) {
00221                             PKERNEL_MSG pDbcsMsg = <a class="code" href="../../d6/d0/usercli_8h.html#a292">GetCallBackDbcsInfo</a>();
00222                             <span class="comment">/*</span>
00223 <span class="comment">                             * Copy this message to CLIENTINFO for next GetMessage</span>
00224 <span class="comment">                             * or PeekMesssage() call.</span>
00225 <span class="comment">                             */</span>
00226                             COPY_MSG_TO_KERNELMSG(pDbcsMsg,pMsg);
00227                             <span class="comment">/*</span>
00228 <span class="comment">                             * Only Dbcs Trailingbyte is nessesary for pushed message. we'll</span>
00229 <span class="comment">                             * pass this message when GetMessage/PeekMessage is called at next.</span>
00230 <span class="comment">                             */</span>
00231                             pDbcsMsg-&gt;wParam = (WPARAM)((pMsg-&gt;wParam &amp; 0x0000FF00) &gt;&gt; 8);
00232                             <span class="comment">/*</span>
00233 <span class="comment">                             * Return DbcsLeading byte to Apps.</span>
00234 <span class="comment">                             */</span>
00235                             pMsg-&gt;wParam = (WPARAM)(pMsg-&gt;wParam &amp; 0x000000FF);
00236                         } <span class="keywordflow">else</span> {
00237                             <span class="comment">/*</span>
00238 <span class="comment">                             * This is SBCS char, make sure it.</span>
00239 <span class="comment">                             */</span>
00240                             pMsg-&gt;wParam &amp;= 0x000000FF;
00241                         }
00242                     }
00243                 }
00244             } <span class="comment">/* if (pMsg) */</span>
00245         } <span class="comment">/* switch (HIWORD(dw)) */</span>
00246 GetNextHookData:
00247         ;
00248     }
00249 <span class="preprocessor">#endif // IS_ANSI</span>
00250 <span class="preprocessor"></span>
00251     <span class="comment">/*</span>
00252 <span class="comment">     * Call the hook. dw contains MAKELONG(nCode, nFilterType).</span>
00253 <span class="comment">     */</span>
00254     nRet = pfn(LOWORD(dw), wParam, lParam);
00255 
00256 <span class="preprocessor">#if IS_ANSI   // TEXT_FN(DispatchHook)()</span>
00257 <span class="preprocessor"></span>    <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a125">IS_DBCS_ENABLED</a>()) {
00258         PMSG pMsg;
00259         PEVENTMSG pEMsg;
00260         <span class="keywordflow">switch</span> (HIWORD(dw)) {
00261         <span class="keywordflow">case</span> WH_JOURNALPLAYBACK:
00262             <span class="keywordflow">switch</span> (LOWORD(dw)) {
00263             <span class="keywordflow">case</span> HC_GETNEXT:
00264             <span class="keywordflow">case</span> HC_NOREMOVE:
00265                 pEMsg = (PEVENTMSG)lParam;
00266                 <span class="keywordflow">if</span> ((nRet == 0) &amp;&amp; pEMsg) {
00267                     WPARAM dwAnsi = LOWORD(pEMsg-&gt;paramL);
00268                     <span class="keywordflow">switch</span>(pEMsg-&gt;message) {
00269                     <span class="keywordflow">case</span> WM_CHAR:
00270                     <span class="keywordflow">case</span> EM_SETPASSWORDCHAR:
00271                         <span class="comment">/*</span>
00272 <span class="comment">                         * Chech wParam is DBCS character or not.</span>
00273 <span class="comment">                         */</span>
00274                         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a120">IS_DBCS_MESSAGE</a>((dwAnsi))) {
00275                             <span class="comment">/*</span>
00276 <span class="comment">                             * DO NOT NEED TO MARK FOR IR_DBCSCHAR</span>
00277 <span class="comment">                             */</span>
00278                         } <span class="keywordflow">else</span> {
00279                             <a class="code" href="../../d9/d7/halvprnt_8c.html#a1">PBYTE</a> pchDbcsCF = <a class="code" href="../../d6/d0/usercli_8h.html#a290">GetDispatchDbcsInfo</a>();
00280                             <span class="comment">/*</span>
00281 <span class="comment">                             * If we have cached Dbcs LeadingByte character, build A Dbcs character</span>
00282 <span class="comment">                             * with the TrailingByte in wParam...</span>
00283 <span class="comment">                             */</span>
00284                             <span class="keywordflow">if</span> (*pchDbcsCF) {
00285                                 WORD DbcsLeadChar = (WORD)(*pchDbcsCF);
00286                                 <span class="comment">/*</span>
00287 <span class="comment">                                 * HIBYTE(LOWORD(dwAnsi)) = Dbcs LeadingByte.</span>
00288 <span class="comment">                                 * LOBYTE(LOWORD(dwAnsi)) = Dbcs TrailingByte.</span>
00289 <span class="comment">                                 */</span>
00290                                 dwAnsi |= (DbcsLeadChar &lt;&lt; 8);
00291                                 <span class="comment">/*</span>
00292 <span class="comment">                                 * Invalidate cached data..</span>
00293 <span class="comment">                                 */</span>
00294                                 *pchDbcsCF = 0;
00295                             } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (IsDBCSLeadByteEx(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a118">THREAD_CODEPAGE</a>(),<a class="code" href="../../d5/d9/ntrtlp_8h.html#a4">LOBYTE</a>(dwAnsi))) {
00296                                 <span class="comment">/*</span>
00297 <span class="comment">                                 * if this is Dbcs LeadByte character, we should wait Dbcs TrailingByte</span>
00298 <span class="comment">                                 * to convert this to Unicode. then we cached it here...</span>
00299 <span class="comment">                                 */</span>
00300                                 *pchDbcsCF = <a class="code" href="../../d5/d9/ntrtlp_8h.html#a4">LOBYTE</a>(dwAnsi);
00301                                 <span class="comment">/*</span>
00302 <span class="comment">                                 * Get DBCS TrailByte...</span>
00303 <span class="comment">                                 */</span>
00304                                 pfn(HC_SKIP,0,0);
00305                                 <span class="keywordflow">goto</span> GetNextHookData;
00306                             }
00307                         }
00308                         <span class="comment">/*</span>
00309 <span class="comment">                         * Convert to Unicode...</span>
00310 <span class="comment">                         */</span>
00311                         <a class="code" href="../../d5/d6/chartran_8c.html#a5">RtlMBMessageWParamCharToWCS</a>(pEMsg-&gt;message, &amp;dwAnsi);
00312                         <span class="comment">/*</span>
00313 <span class="comment">                         * Restore converted Unicode to EVENTMSG..</span>
00314 <span class="comment">                         */</span>
00315                         pEMsg-&gt;paramL = (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)dwAnsi;
00316                         <span class="comment">/*</span>
00317 <span class="comment">                         * Keep this EVENTMSG to local buffer...</span>
00318 <span class="comment">                         */</span>
00319                         RtlCopyMemory(&amp;CachedEvent,pEMsg,<span class="keyword">sizeof</span>(EVENTMSG));
00320                     } <span class="comment">/* switch(pEMsg-&gt;message) */</span>
00321                 } <span class="comment">/* if (pEMsg) */</span>
00322             }
00323             <span class="keywordflow">break</span>;
00324         <span class="keywordflow">case</span> WH_MSGFILTER:
00325         <span class="keywordflow">case</span> WH_SYSMSGFILTER:
00326         <span class="keywordflow">case</span> WH_GETMESSAGE:
00327             pMsg = (PMSG)lParam;
00328             <span class="keywordflow">if</span> (pMsg) {
00329                 <span class="keywordflow">switch</span> (pMsg-&gt;message) {
00330                 <span class="keywordflow">case</span> WM_CHAR:
00331                 <span class="keywordflow">case</span> EM_SETPASSWORDCHAR:
00332                     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a292">GetCallBackDbcsInfo</a>()-&gt;wParam) {
00333                         PKERNEL_MSG pmsgDbcs = <a class="code" href="../../d6/d0/usercli_8h.html#a292">GetCallBackDbcsInfo</a>();
00334                         <span class="comment">/*</span>
00335 <span class="comment">                         * Get pushed message.</span>
00336 <span class="comment">                         *</span>
00337 <span class="comment">                         * Backup current message. this backupped message will be used</span>
00338 <span class="comment">                         * when Apps peek (or get) message from thier WndProc.</span>
00339 <span class="comment">                         * (see GetMessageA(), PeekMessageA()...)</span>
00340 <span class="comment">                         *</span>
00341 <span class="comment">                         * pmsg-&gt;hwnd    = pmsgDbcs-&gt;hwnd;</span>
00342 <span class="comment">                         * pmsg-&gt;message = pmsgDbcs-&gt;message;</span>
00343 <span class="comment">                         * pmsg-&gt;wParam  = pmsgDbcs-&gt;wParam;</span>
00344 <span class="comment">                         * pmsg-&gt;lParam  = pmsgDbcs-&gt;lParam;</span>
00345 <span class="comment">                         * pmsg-&gt;time    = pmsgDbcs-&gt;time;</span>
00346 <span class="comment">                         * pmsg-&gt;pt      = pmsgDbcs-&gt;pt;</span>
00347 <span class="comment">                         */</span>
00348                         COPY_KERNELMSG_TO_MSG(pMsg,pmsgDbcs);
00349                         <span class="comment">/*</span>
00350 <span class="comment">                         * Invalidate pushed message in CLIENTINFO.</span>
00351 <span class="comment">                         */</span>
00352                         pmsgDbcs-&gt;wParam = 0;
00353                         <span class="comment">/*</span>
00354 <span class="comment">                         * Call the hook with DBCS TrailByte..</span>
00355 <span class="comment">                         */</span>
00356                         nRet = pfn(LOWORD(dw), wParam, lParam);
00357                     }
00358                     <span class="comment">/*</span>
00359 <span class="comment">                     * Restore original message..</span>
00360 <span class="comment">                     * #96571 [hiroyama]</span>
00361 <span class="comment">                     * Other messages than WM_CHAR and EM_SETPASSWORDCHAR can be</span>
00362 <span class="comment">                     * modifed by a hooker.</span>
00363 <span class="comment">                     * Wparam for WM_CHAR and EM_SETPASSWORDCHAR must be restored.</span>
00364 <span class="comment">                     * *by design*</span>
00365 <span class="comment">                     */</span>
00366                     pMsg-&gt;wParam = wParamSave;
00367                 }
00368             } <span class="comment">/* if (pMsg) */</span>
00369         } <span class="comment">/* switch (HIWORD(dw)) */</span>
00370     }
00371 <span class="preprocessor">#endif // IS_ANSI</span>
00372 <span class="preprocessor"></span>
00373     <span class="comment">/*</span>
00374 <span class="comment">     * Restore the hook number and return the return code.</span>
00375 <span class="comment">     */</span>
00376     pci-&gt;<a class="code" href="../../d2/d2/struct__CLIENTINFO.html#o10">dwHookCurrent</a> = dwHookSave;
00377     <span class="keywordflow">return</span> nRet;
00378 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="cltxt.h::fnHkINLPCWPRETSTRUCT" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LRESULT TEXT_FN( <a class="el" href="../../d5/d9/cltxt_8h.html#a2">fnHkINLPCWPRETSTRUCT</a>)(<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, UINT message, WPARAM wParam, LPARAM lParam, ULONG_PTR xParam)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00096">96</a> of file <a class="el" href="../../d6/d8/cltxt_8h-source.html">cltxt.h</a>.
<p>
<pre class="fragment"><div>00102 {
00103     CWPRETSTRUCT cwp;
00104     <a class="code" href="../../d2/d2/struct__CLIENTINFO.html">PCLIENTINFO</a> pci = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a16">GetClientInfo</a>();
00105 
00106     cwp.hwnd = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a450">HW</a>(pwnd);
00107     cwp.message = message;
00108     cwp.wParam = wParam;
00109     cwp.lParam = lParam;
00110     cwp.lResult = KERNEL_LRESULT_TO_LRESULT(pci-&gt;<a class="code" href="../../d2/d2/struct__CLIENTINFO.html#o14">dwHookData</a>);
00111 
00112     <span class="keywordflow">return</span> <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a36">TEXT_FN</a>(DispatchHook)(MAKELONG(HC_ACTION, WH_CALLWNDPROCRET),
00113             (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a16">GetClientInfo</a>()-&gt;CI_flags &amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a116">CI_INTERTHREAD_HOOK</a>) != 0,
00114             (LPARAM)&amp;cwp, (HOOKPROC)xParam);
00115 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="cltxt.h::fnHkINLPCWPSTRUCT" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LRESULT TEXT_FN( <a class="el" href="../../d5/d9/cltxt_8h.html#a1">fnHkINLPCWPSTRUCT</a>)(<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, UINT message, WPARAM wParam, LPARAM lParam, ULONG_PTR xParam)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00077">77</a> of file <a class="el" href="../../d6/d8/cltxt_8h-source.html">cltxt.h</a>.
<p>
<pre class="fragment"><div>00083 {
00084     CWPSTRUCT cwp;
00085 
00086     cwp.hwnd = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a450">HW</a>(pwnd);
00087     cwp.message = message;
00088     cwp.wParam = wParam;
00089     cwp.lParam = lParam;
00090 
00091     <span class="keywordflow">return</span> <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a36">TEXT_FN</a>(DispatchHook)(MAKELONG(HC_ACTION, WH_CALLWNDPROC),
00092             (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a16">GetClientInfo</a>()-&gt;CI_flags &amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a116">CI_INTERTHREAD_HOOK</a>) != 0,
00093             (LPARAM)&amp;cwp, (HOOKPROC)xParam);
00094 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a9" doxytag="cltxt.h::GetMenuItemInfoInternal" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL TEXT_FN( <a class="el" href="../../d5/d9/cltxt_8h.html#a9">GetMenuItemInfoInternal</a>)(HMENU hMenu, UINT uID, BOOL fByPosition, LPMENUITEMINFOW lpInfo)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d8/cltxt_8h-source.html#l01463">1463</a> of file <a class="el" href="../../d6/d8/cltxt_8h-source.html">cltxt.h</a>.
<p>
Referenced by <a class="el" href="../../d6/d8/cltxt_8h-source.html#l01643">GetMenuItemInfo()</a>, and <a class="el" href="../../d6/d8/cltxt_8h-source.html#l01611">GetMenuString()</a>.
<p>
<pre class="fragment"><div>01465 {
01466      VALIDATIONFNNAME(GetMenuItemInfoInternal)
01467 
01468      <a class="code" href="../../d0/d9/structtagITEM.html">PITEM</a> pItem;
01469      <a class="code" href="../../d1/d1/structtagMENU.html">PMENU</a> pMenu;
01470      <a class="code" href="../../d1/d1/structtagMENU.html">PMENU</a> pMenuT;
01471 
01472      pMenu = VALIDATEHMENU(hMenu);
01473      if (pMenu == NULL) {
01474         VALIDATIONFAIL(hMenu);
01475      }
01476 
01477      pMenuT = pMenu;         <span class="comment">// need to check the ORIGINAL menu if popup</span>
01478 
01479      pItem = <a class="code" href="../../d6/d9/rtl_2wow_8c.html#a10">MNLookUpItem</a>(pMenu, uID, fByPosition, &amp;pMenu);
01480     <span class="keywordflow">if</span> (pItem == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01481         <span class="comment">/*</span>
01482 <span class="comment">         * Don't display a warning. The explorer makes a lot of calls</span>
01483 <span class="comment">         *  that fail here.</span>
01484 <span class="comment">         * VALIDATIONFAIL(uID);</span>
01485 <span class="comment">         */</span>
01486         SetLastError(ERROR_MENU_ITEM_NOT_FOUND);
01487         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01488 
01489     }
01490 
01491     <span class="keywordflow">if</span> (lpInfo-&gt;fMask &amp; MIIM_STATE) {
01492         lpInfo-&gt;fState = pItem-&gt;fState &amp; MFS_MASK;
01493     }
01494 
01495     <span class="keywordflow">if</span> (lpInfo-&gt;fMask &amp; MIIM_ID) {
01496         lpInfo-&gt;wID = pItem-&gt;wID;
01497     }
01498 
01499     <span class="keywordflow">if</span> ((lpInfo-&gt;fMask &amp; MIIM_SUBMENU) &amp;&amp; (pItem-&gt;spSubMenu != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)) {
01500         lpInfo-&gt;hSubMenu = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a448">PtoH</a>(<a class="code" href="../../d6/d0/usercli_8h.html#a25">REBASEPTR</a>(pMenu, pItem-&gt;spSubMenu));
01501     } <span class="keywordflow">else</span> {
01502         lpInfo-&gt;hSubMenu = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
01503     }
01504 
01505     <span class="keywordflow">if</span> (lpInfo-&gt;fMask &amp; MIIM_CHECKMARKS) {
01506         lpInfo-&gt;hbmpChecked  = pItem-&gt;hbmpChecked;
01507         lpInfo-&gt;hbmpUnchecked= pItem-&gt;hbmpUnchecked;
01508     }
01509 
01510     <span class="keywordflow">if</span> (lpInfo-&gt;fMask &amp; MIIM_DATA) {
01511        lpInfo-&gt;dwItemData = KERNEL_ULONG_PTR_TO_ULONG_PTR(pItem-&gt;dwItemData);
01512     }
01513 
01514     <span class="keywordflow">if</span> (lpInfo-&gt;fMask &amp; MIIM_FTYPE) {
01515         lpInfo-&gt;fType = pItem-&gt;fType &amp; MFT_MASK;
01516         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a786">TestMF</a>(pMenuT,MFRTL))
01517             lpInfo-&gt;fType |= MFT_RIGHTORDER;
01518     }
01519 
01520     <span class="keywordflow">if</span> ( lpInfo-&gt;fMask &amp; MIIM_BITMAP) {
01521         lpInfo-&gt;hbmpItem = pItem-&gt;hbmp;
01522     }
01523 
01524     <span class="keywordflow">if</span> (lpInfo-&gt;fMask &amp; MIIM_STRING) {
01525         <span class="keywordflow">if</span> ((lpInfo-&gt;cch == 0)
01526             || (lpInfo-&gt;dwTypeData == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
01527 
01528             <span class="comment">/*</span>
01529 <span class="comment">             * If this is an old caller (MIIM_TYPE set), and this item</span>
01530 <span class="comment">             *  has a bitmap or it's ownerdraw, then don't attempt to</span>
01531 <span class="comment">             *  copy a string since they probably didn't pass a pointer</span>
01532 <span class="comment">            */</span>
01533 
01534             || ((lpInfo-&gt;fMask &amp; MIIM_TYPE)
01535                     &amp;&amp; ((lpInfo-&gt;fType &amp; MFT_OWNERDRAW)
01536                             <span class="comment">/*</span>
01537 <span class="comment">                             * Bug 278750 - jojoe</span>
01538 <span class="comment">                             *</span>
01539 <span class="comment">                             * Soemone forgot to check for separator in the list</span>
01540 <span class="comment">                             * of menuitems that do NOT return string data!</span>
01541 <span class="comment">                             */</span>
01542                             || (lpInfo-&gt;fType &amp; MFT_SEPARATOR)
01543                             || ((pItem-&gt;hbmp != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)  &amp;&amp; ((pItem-&gt;hbmp &lt; HBMMENU_POPUPFIRST) || (pItem-&gt;hbmp &gt; HBMMENU_POPUPLAST)))))) {
01544 
01545 
01546 
01547             <span class="comment">/*</span>
01548 <span class="comment">             * When DBCS is enabled, one UNICODE character may occupy two bytes.</span>
01549 <span class="comment">             * GetMenuItemInfoA should return the byte count, rather than the character count.</span>
01550 <span class="comment">             * On NT5, pItem-&gt;lpstr is guaranteed to be a valid string, if it is not NULL.</span>
01551 <span class="comment">             */</span>
01552             <span class="keywordflow">if</span> (<a class="code" href="../../d5/d9/cltxt_8h.html#a0">IS_ANSI</a> &amp;&amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a125">IS_DBCS_ENABLED</a>() &amp;&amp; pItem-&gt;lpstr != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01553                 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
01554                 ULONG cch;
01555 
01556                 <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d9/d6/nlsxlat_8c.html#a36">RtlUnicodeToMultiByteSize</a>(&amp;cch, <a class="code" href="../../d6/d0/usercli_8h.html#a25">REBASEPTR</a>(pMenu, pItem-&gt;lpstr), pItem-&gt;cch * <span class="keyword">sizeof</span>(WCHAR));
01557                 UserAssert(<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(Status)); <span class="comment">// RtlUnicodeToMultiByteSize is not expected to fail</span>
01558                 lpInfo-&gt;cch = cch;
01559             } <span class="keywordflow">else</span> {
01560                 lpInfo-&gt;cch = pItem-&gt;cch;
01561             }
01562             lpInfo-&gt;dwTypeData = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
01563 
01564 
01565         } <span class="keywordflow">else</span> {
01566             <span class="keywordtype">int</span> cch = 0;
01567 
01568             <span class="keywordflow">if</span> (pItem-&gt;lpstr != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01569 
01570                 <span class="comment">// originally:</span>
01571                 <span class="comment">// cch = min(lpInfo-&gt;cch - 1, (pItem-&gt;cch * sizeof(WORD)));</span>
01572                 cch = pItem-&gt;cch;
01573                 UserAssert(cch &gt;= 0);
01574                 <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a125">IS_DBCS_ENABLED</a>()) {
01575                     <span class="comment">/* pItem-&gt;cch contains Unicode character counts,</span>
01576 <span class="comment">                     * we guess max DBCS string size for the Unicode string.</span>
01577 <span class="comment">                     */</span>
01578                     cch *= <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a123">DBCS_CHARSIZE</a>;
01579                 }
01580                 cch = <a class="code" href="../../d5/d4/acpitabl_8h.html#a69">min</a>(lpInfo-&gt;cch - 1, (DWORD)cch);
01581 
01582 <span class="preprocessor">#if IS_ANSI</span>
01583 <span class="preprocessor"></span>                cch = WCSToMB(<a class="code" href="../../d6/d0/usercli_8h.html#a25">REBASEPTR</a>(pMenu, pItem-&gt;lpstr), pItem-&gt;cch,
01584                         (LPSTR *)&amp;(lpInfo-&gt;dwTypeData), cch, FALSE);
01585 <span class="preprocessor">#else</span>
01586 <span class="preprocessor"></span>                wcsncpy(lpInfo-&gt;dwTypeData, (LPWSTR)<a class="code" href="../../d6/d0/usercli_8h.html#a25">REBASEPTR</a>(pMenu, pItem-&gt;lpstr),
01587     cch);
01588 <span class="preprocessor">#endif</span>
01589 <span class="preprocessor"></span>            }
01590 
01591 <span class="preprocessor">#if IS_ANSI</span>
01592 <span class="preprocessor"></span>            *((LPSTR)lpInfo-&gt;dwTypeData + cch) = (<a class="code" href="../../d1/d1/bench_8c.html#a16">CHAR</a>)0;
01593 <span class="preprocessor">#else</span>
01594 <span class="preprocessor"></span>            *(lpInfo-&gt;dwTypeData + cch) = (WCHAR)0;
01595 <span class="preprocessor">#endif</span>
01596 <span class="preprocessor"></span>            lpInfo-&gt;cch = cch;
01597         }
01598      }
01599 
01600      <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01601 
01602      VALIDATIONERROR(FALSE);
01603 
01604 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a7" doxytag="cltxt.h::RegisterClass" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ATOM WINAPI TEXT_FN( <a class="el" href="../../d5/d9/cltxt_8h.html#a7">RegisterClass</a>)(CONST WNDCLASS *lpWndClass)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d8/cltxt_8h-source.html#l01415">1415</a> of file <a class="el" href="../../d6/d8/cltxt_8h-source.html">cltxt.h</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00185">InitApplication()</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00109">InitConsoleIME()</a>, <a class="el" href="../../d0/d1/usrbench_8c-source.html#l01995">InitializeInstance()</a>, <a class="el" href="../../d2/d0/bench_8c-source.html#l00262">msProfClassGroup()</a>, <a class="el" href="../../d2/d0/bench_8c-source.html#l00828">msProfCreateDestroyButton()</a>, <a class="el" href="../../d2/d0/bench_8c-source.html#l00555">msProfCreateDestroyChildWindow()</a>, <a class="el" href="../../d2/d0/bench_8c-source.html#l00880">msProfCreateDestroyCombobox()</a>, <a class="el" href="../../d2/d0/bench_8c-source.html#l00932">msProfCreateDestroyEdit()</a>, <a class="el" href="../../d2/d0/bench_8c-source.html#l00776">msProfCreateDestroyListbox()</a>, <a class="el" href="../../d2/d0/bench_8c-source.html#l01036">msProfCreateDestroyScrollbar()</a>, <a class="el" href="../../d2/d0/bench_8c-source.html#l00984">msProfCreateDestroyStatic()</a>, <a class="el" href="../../d2/d0/bench_8c-source.html#l00501">msProfCreateDestroyWindow()</a>, <a class="el" href="../../d2/d0/bench_8c-source.html#l01559">msProfDispatchMessage()</a>, <a class="el" href="../../d2/d0/bench_8c-source.html#l00674">msProfGetWindowLong()</a>, <a class="el" href="../../d2/d0/bench_8c-source.html#l01088">msProfListboxInsert1()</a>, <a class="el" href="../../d2/d0/bench_8c-source.html#l01153">msProfListboxInsert2()</a>, <a class="el" href="../../d2/d0/bench_8c-source.html#l01217">msProfListboxInsert3()</a>, <a class="el" href="../../d2/d0/bench_8c-source.html#l00224">msProfRegisterClass()</a>, <a class="el" href="../../d2/d0/bench_8c-source.html#l01659">msProfSendMessage()</a>, <a class="el" href="../../d2/d0/bench_8c-source.html#l00725">msProfSetWindowLong()</a>, <a class="el" href="../../d2/d0/bench_8c-source.html#l01843">msProfTranslateMessage()</a>, <a class="el" href="../../d2/d0/bench_8c-source.html#l01791">msProfUpdateWindow()</a>, and <a class="el" href="../../d2/d0/bench_8c-source.html#l01705">SendMessageDiffThreadFunc()</a>.
<p>
<pre class="fragment"><div>01417 {
01418     WNDCLASSEX wc;
01419 
01420     <span class="comment">/*</span>
01421 <span class="comment">     * On 64-bit plaforms we'll have 32-bits of padding between style and</span>
01422 <span class="comment">     * lpfnWndProc in WNDCLASS, so start the copy from the first 64-bit</span>
01423 <span class="comment">     * aligned field and hand copy the rest.</span>
01424 <span class="comment">     */</span>
01425     RtlCopyMemory(&amp;(wc.lpfnWndProc), &amp;(lpWndClass-&gt;lpfnWndProc), <span class="keyword">sizeof</span>(WNDCLASS) - FIELD_OFFSET(WNDCLASS, lpfnWndProc));
01426     wc.style = lpWndClass-&gt;style;
01427     wc.hIconSm = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
01428     wc.cbSize = <span class="keyword">sizeof</span>(WNDCLASSEX);
01429 
01430     <span class="keywordflow">return</span> <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a36">TEXT_FN</a>(RegisterClassExWOW)(&amp;wc, <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>, 0);
01431 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a8" doxytag="cltxt.h::RegisterClassEx" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ATOM WINAPI TEXT_FN( <a class="el" href="../../d5/d9/cltxt_8h.html#a8">RegisterClassEx</a>)(CONST WNDCLASSEX *lpWndClass)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d8/cltxt_8h-source.html#l01441">1441</a> of file <a class="el" href="../../d6/d8/cltxt_8h-source.html">cltxt.h</a>.
<p>
Referenced by <a class="el" href="../../d1/d4/srvinit_8c-source.html#l00590">InitWindowClass()</a>, and <a class="el" href="../../d7/d8/softkbd_8c-source.html#l00024">RegisterSoftKeyboard()</a>.
<p>
<pre class="fragment"><div>01443 {
01444     <span class="keywordflow">if</span> (lpWndClass-&gt;cbSize != <span class="keyword">sizeof</span>(WNDCLASSEX)) {
01445         RIPERR1(ERROR_INVALID_PARAMETER,
01446                 RIP_WARNING,
01447                 <span class="stringliteral">"RegisterClassEx: cbsize is wrong %lX"</span>,
01448                 lpWndClass-&gt;cbSize);
01449 
01450         <span class="keywordflow">return</span> 0;
01451     } <span class="keywordflow">else</span> {
01452         <span class="keywordflow">return</span> <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a36">TEXT_FN</a>(RegisterClassExWOW)((LPWNDCLASSEX)lpWndClass,
01453                 <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>, 0);
01454     }
01455 }
</div></pre>    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Sat May 15 19:43:06 2004 for test by
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>

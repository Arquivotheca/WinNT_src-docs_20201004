<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>test: ke.h Source File</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="../../main.html">Main&nbsp;Page</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Class&nbsp;List</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Class&nbsp;Members</a> | <a class="qindex" href="../../globals.html">File&nbsp;Members</a></div>
<h1>ke.h</h1><a href="../../d4/d9/ke_8h.html">Go to the documentation of this file.</a><pre class="fragment"><div>00001 <span class="comment">/*++ BUILD Version: 0028    // Increment this if a change has global effects</span>
00002 <span class="comment"></span>
00003 <span class="comment">Copyright (c) 1989  Microsoft Corporation</span>
00004 <span class="comment"></span>
00005 <span class="comment">Module Name:</span>
00006 <span class="comment"></span>
00007 <span class="comment">    ke.h</span>
00008 <span class="comment"></span>
00009 <span class="comment">Abstract:</span>
00010 <span class="comment"></span>
00011 <span class="comment">    This module contains the public (external) header file for the kernel.</span>
00012 <span class="comment"></span>
00013 <span class="comment">Author:</span>
00014 <span class="comment"></span>
00015 <span class="comment">    David N. Cutler (davec) 27-Feb-1989</span>
00016 <span class="comment"></span>
00017 <span class="comment">Revision History:</span>
00018 <span class="comment"></span>
00019 <span class="comment">--*/</span>
00020 
00021 <span class="preprocessor">#ifndef _KE_</span>
00022 <span class="preprocessor"></span><span class="preprocessor">#define _KE_</span>
00023 <span class="preprocessor"></span>
00024 <span class="comment">//</span>
00025 <span class="comment">// Define the default quantum decrement values.</span>
00026 <span class="comment">//</span>
00027 
<a name="l00028"></a><a class="code" href="../../d4/d9/ke_8h.html#a0">00028</a> <span class="preprocessor">#define CLOCK_QUANTUM_DECREMENT 3</span>
<a name="l00029"></a><a class="code" href="../../d4/d9/ke_8h.html#a1">00029</a> <span class="preprocessor"></span><span class="preprocessor">#define WAIT_QUANTUM_DECREMENT 1</span>
00030 <span class="preprocessor"></span>
00031 <span class="comment">//</span>
00032 <span class="comment">// Define the default ready skip and thread quantum values.</span>
00033 <span class="comment">//</span>
00034 
<a name="l00035"></a><a class="code" href="../../d4/d9/ke_8h.html#a2">00035</a> <span class="preprocessor">#define READY_SKIP_QUANTUM 2</span>
<a name="l00036"></a><a class="code" href="../../d4/d9/ke_8h.html#a3">00036</a> <span class="preprocessor"></span><span class="preprocessor">#define THREAD_QUANTUM (READY_SKIP_QUANTUM * CLOCK_QUANTUM_DECREMENT)</span>
00037 <span class="preprocessor"></span>
00038 <span class="comment">//</span>
00039 <span class="comment">// Define the round trip decrement count.</span>
00040 <span class="comment">//</span>
00041 
<a name="l00042"></a><a class="code" href="../../d4/d9/ke_8h.html#a4">00042</a> <span class="preprocessor">#define ROUND_TRIP_DECREMENT_COUNT 16</span>
00043 <span class="preprocessor"></span>
00044 <span class="comment">//</span>
00045 <span class="comment">// Performance data collection enable definitions.</span>
00046 <span class="comment">//</span>
00047 <span class="comment">// A definition turns on the respective data collection.</span>
00048 <span class="comment">//</span>
00049 
00050 <span class="comment">//#define _COLLECT_FLUSH_SINGLE_CALLDATA_ 1</span>
00051 <span class="comment">//#define _COLLECT_SET_EVENT_CALLDATA_ 1</span>
00052 <span class="comment">//#define _COLLECT_WAIT_SINGLE_CALLDATA_ 1</span>
00053 
00054 <span class="comment">//</span>
00055 <span class="comment">// Define thread switch performance data structure.</span>
00056 <span class="comment">//</span>
00057 
<a name="l00058"></a><a class="code" href="../../d2/d8/struct__KTHREAD__SWITCH__COUNTERS.html">00058</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d2/d8/struct__KTHREAD__SWITCH__COUNTERS.html">_KTHREAD_SWITCH_COUNTERS</a> {
<a name="l00059"></a><a class="code" href="../../d2/d8/struct__KTHREAD__SWITCH__COUNTERS.html#o0">00059</a>     ULONG <a class="code" href="../../d2/d8/struct__KTHREAD__SWITCH__COUNTERS.html#o0">FindAny</a>;
<a name="l00060"></a><a class="code" href="../../d2/d8/struct__KTHREAD__SWITCH__COUNTERS.html#o1">00060</a>     ULONG <a class="code" href="../../d2/d8/struct__KTHREAD__SWITCH__COUNTERS.html#o1">FindIdeal</a>;
<a name="l00061"></a><a class="code" href="../../d2/d8/struct__KTHREAD__SWITCH__COUNTERS.html#o2">00061</a>     ULONG <a class="code" href="../../d2/d8/struct__KTHREAD__SWITCH__COUNTERS.html#o2">FindLast</a>;
<a name="l00062"></a><a class="code" href="../../d2/d8/struct__KTHREAD__SWITCH__COUNTERS.html#o3">00062</a>     ULONG <a class="code" href="../../d2/d8/struct__KTHREAD__SWITCH__COUNTERS.html#o3">IdleAny</a>;
<a name="l00063"></a><a class="code" href="../../d2/d8/struct__KTHREAD__SWITCH__COUNTERS.html#o4">00063</a>     ULONG <a class="code" href="../../d2/d8/struct__KTHREAD__SWITCH__COUNTERS.html#o4">IdleCurrent</a>;
<a name="l00064"></a><a class="code" href="../../d2/d8/struct__KTHREAD__SWITCH__COUNTERS.html#o5">00064</a>     ULONG <a class="code" href="../../d2/d8/struct__KTHREAD__SWITCH__COUNTERS.html#o5">IdleIdeal</a>;
<a name="l00065"></a><a class="code" href="../../d2/d8/struct__KTHREAD__SWITCH__COUNTERS.html#o6">00065</a>     ULONG <a class="code" href="../../d2/d8/struct__KTHREAD__SWITCH__COUNTERS.html#o6">IdleLast</a>;
<a name="l00066"></a><a class="code" href="../../d2/d8/struct__KTHREAD__SWITCH__COUNTERS.html#o7">00066</a>     ULONG <a class="code" href="../../d2/d8/struct__KTHREAD__SWITCH__COUNTERS.html#o7">PreemptAny</a>;
<a name="l00067"></a><a class="code" href="../../d2/d8/struct__KTHREAD__SWITCH__COUNTERS.html#o8">00067</a>     ULONG <a class="code" href="../../d2/d8/struct__KTHREAD__SWITCH__COUNTERS.html#o8">PreemptCurrent</a>;
<a name="l00068"></a><a class="code" href="../../d2/d8/struct__KTHREAD__SWITCH__COUNTERS.html#o9">00068</a>     ULONG <a class="code" href="../../d2/d8/struct__KTHREAD__SWITCH__COUNTERS.html#o9">PreemptLast</a>;
<a name="l00069"></a><a class="code" href="../../d2/d8/struct__KTHREAD__SWITCH__COUNTERS.html#o10">00069</a>     ULONG <a class="code" href="../../d2/d8/struct__KTHREAD__SWITCH__COUNTERS.html#o10">SwitchToIdle</a>;
00070 } <a class="code" href="../../d2/d8/struct__KTHREAD__SWITCH__COUNTERS.html">KTHREAD_SWITCH_COUNTERS</a>, *<a class="code" href="../../d2/d8/struct__KTHREAD__SWITCH__COUNTERS.html">PKTHREAD_SWITCH_COUNTERS</a>;
00071 
00072 <span class="comment">//</span>
00073 <span class="comment">// Public (external) constant definitions.</span>
00074 <span class="comment">//</span>
00075 
<a name="l00076"></a><a class="code" href="../../d4/d9/ke_8h.html#a5">00076</a> <span class="preprocessor">#define BASE_PRIORITY_THRESHOLD NORMAL_BASE_PRIORITY // fast path base threshold</span>
00077 <span class="preprocessor"></span>
00078 <span class="comment">// begin_ntddk begin_wdm</span>
<a name="l00079"></a><a class="code" href="../../d4/d9/ke_8h.html#a6">00079</a> <span class="preprocessor">#define THREAD_WAIT_OBJECTS 3           // Builtin usable wait blocks</span>
00080 <span class="preprocessor"></span><span class="comment">// end_ntddk end_wdm</span>
00081 
<a name="l00082"></a><a class="code" href="../../d4/d9/ke_8h.html#a7">00082</a> <span class="preprocessor">#define EVENT_WAIT_BLOCK 2              // Builtin event pair wait block</span>
<a name="l00083"></a><a class="code" href="../../d4/d9/ke_8h.html#a8">00083</a> <span class="preprocessor"></span><span class="preprocessor">#define SEMAPHORE_WAIT_BLOCK 2          // Builtin semaphore wait block</span>
<a name="l00084"></a><a class="code" href="../../d4/d9/ke_8h.html#a9">00084</a> <span class="preprocessor"></span><span class="preprocessor">#define TIMER_WAIT_BLOCK 3              // Builtin timer wait block</span>
00085 <span class="preprocessor"></span>
00086 <span class="preprocessor">#if (EVENT_WAIT_BLOCK != SEMAPHORE_WAIT_BLOCK)</span>
00087 <span class="preprocessor"></span><span class="preprocessor">#error "wait event and wait semaphore must use same wait block"</span>
00088 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00089 <span class="preprocessor"></span>
00090 <span class="comment">//</span>
00091 <span class="comment">// Define timer table size.</span>
00092 <span class="comment">//</span>
00093 
<a name="l00094"></a><a class="code" href="../../d4/d9/ke_8h.html#a10">00094</a> <span class="preprocessor">#define TIMER_TABLE_SIZE 128</span>
00095 <span class="preprocessor"></span>
00096 <span class="comment">//</span>
00097 <span class="comment">// Get APC environment of current thread.</span>
00098 <span class="comment">//</span>
00099 
<a name="l00100"></a><a class="code" href="../../d4/d9/ke_8h.html#a11">00100</a> <span class="preprocessor">#define KeGetCurrentApcEnvironment() \</span>
00101 <span class="preprocessor">    KeGetCurrentThread()-&gt;ApcStateIndex</span>
00102 <span class="preprocessor"></span>
00103 
00104 <span class="comment">//</span>
00105 <span class="comment">// Enumerated kernel types</span>
00106 <span class="comment">//</span>
00107 <span class="comment">// Kernel object types.</span>
00108 <span class="comment">//</span>
00109 <span class="comment">//  N.B. There are really two types of event objects; NotificationEvent and</span>
00110 <span class="comment">//       SynchronizationEvent. The type value for a notification event is 0,</span>
00111 <span class="comment">//       and that for a synchronization event 1.</span>
00112 <span class="comment">//</span>
00113 <span class="comment">//  N.B. There are two types of new timer objects; NotificationTimer and</span>
00114 <span class="comment">//       SynchronizationTimer. The type value for a notification timer is</span>
00115 <span class="comment">//       8, and that for a synchronization timer is 9. These values are</span>
00116 <span class="comment">//       very carefully chosen so that the dispatcher object type AND'ed</span>
00117 <span class="comment">//       with 0x7 yields 0 or 1 for event objects and the timer objects.</span>
00118 <span class="comment">//</span>
00119 
<a name="l00120"></a><a class="code" href="../../d4/d9/ke_8h.html#a12">00120</a> <span class="preprocessor">#define DISPATCHER_OBJECT_TYPE_MASK 0x7</span>
00121 <span class="preprocessor"></span>
<a name="l00122"></a><a class="code" href="../../d4/d9/ke_8h.html#a402">00122</a> <span class="keyword">typedef</span> <span class="keyword">enum</span> <a class="code" href="../../d4/d9/ke_8h.html#a402">_KOBJECTS</a> {
00123     <a class="code" href="../../d4/d9/ke_8h.html#a402a157">EventNotificationObject</a> = 0,
00124     <a class="code" href="../../d4/d9/ke_8h.html#a402a158">EventSynchronizationObject</a> = 1,
00125     <a class="code" href="../../d4/d9/ke_8h.html#a402a159">MutantObject</a> = 2,
00126     <a class="code" href="../../d4/d9/ke_8h.html#a402a160">ProcessObject</a> = 3,
00127     <a class="code" href="../../d4/d9/ke_8h.html#a402a161">QueueObject</a> = 4,
00128     <a class="code" href="../../d4/d9/ke_8h.html#a402a162">SemaphoreObject</a> = 5,
00129     <a class="code" href="../../d4/d9/ke_8h.html#a402a163">ThreadObject</a> = 6,
00130     <a class="code" href="../../d4/d9/ke_8h.html#a402a164">Spare1Object</a> = 7,
00131     <a class="code" href="../../d4/d9/ke_8h.html#a402a165">TimerNotificationObject</a> = 8,
00132     <a class="code" href="../../d4/d9/ke_8h.html#a402a166">TimerSynchronizationObject</a> = 9,
00133     <a class="code" href="../../d4/d9/ke_8h.html#a402a167">Spare2Object</a> = 10,
00134     <a class="code" href="../../d4/d9/ke_8h.html#a402a168">Spare3Object</a> = 11,
00135     <a class="code" href="../../d4/d9/ke_8h.html#a402a169">Spare4Object</a> = 12,
00136     <a class="code" href="../../d4/d9/ke_8h.html#a402a170">Spare5Object</a> = 13,
00137     <a class="code" href="../../d4/d9/ke_8h.html#a402a171">Spare6Object</a> = 14,
00138     <a class="code" href="../../d4/d9/ke_8h.html#a402a172">Spare7Object</a> = 15,
00139     <a class="code" href="../../d4/d9/ke_8h.html#a402a173">Spare8Object</a> = 16,
00140     <a class="code" href="../../d4/d9/ke_8h.html#a402a174">Spare9Object</a> = 17,
00141     <a class="code" href="../../d4/d9/ke_8h.html#a402a175">ApcObject</a>,
00142     <a class="code" href="../../d4/d9/ke_8h.html#a402a176">DpcObject</a>,
00143     <a class="code" href="../../d4/d9/ke_8h.html#a402a177">DeviceQueueObject</a>,
00144     <a class="code" href="../../d4/d9/ke_8h.html#a402a178">EventPairObject</a>,
00145     <a class="code" href="../../d4/d9/ke_8h.html#a402a179">InterruptObject</a>,
00146     <a class="code" href="../../d4/d9/ke_8h.html#a402a180">ProfileObject</a>
00147     } <a class="code" href="../../d4/d9/ke_8h.html#a48">KOBJECTS</a>;
00148 
00149 <span class="comment">//</span>
00150 <span class="comment">// APC environments.</span>
00151 <span class="comment">//</span>
00152 
<a name="l00153"></a><a class="code" href="../../d4/d9/ke_8h.html#a403">00153</a> <span class="keyword">typedef</span> <span class="keyword">enum</span> <a class="code" href="../../d4/d9/ke_8h.html#a403">_KAPC_ENVIRONMENT</a> {
00154     <a class="code" href="../../d4/d9/ke_8h.html#a403a181">OriginalApcEnvironment</a>,
00155     <a class="code" href="../../d4/d9/ke_8h.html#a403a182">AttachedApcEnvironment</a>,
00156     <a class="code" href="../../d4/d9/ke_8h.html#a403a183">CurrentApcEnvironment</a>
00157     } <a class="code" href="../../d4/d9/ke_8h.html#a49">KAPC_ENVIRONMENT</a>;
00158 
00159 <span class="comment">// begin_ntddk begin_wdm begin_nthal begin_ntminiport begin_ntifs begin_ntndis</span>
00160 
00161 <span class="comment">//</span>
00162 <span class="comment">// Interrupt modes.</span>
00163 <span class="comment">//</span>
00164 
<a name="l00165"></a><a class="code" href="../../d4/d9/ke_8h.html#a404">00165</a> <span class="keyword">typedef</span> <span class="keyword">enum</span> <a class="code" href="../../d4/d9/ke_8h.html#a404">_KINTERRUPT_MODE</a> {
00166     <a class="code" href="../../d4/d9/ke_8h.html#a404a184">LevelSensitive</a>,
00167     <a class="code" href="../../d4/d9/ke_8h.html#a404a185">Latched</a>
00168     } <a class="code" href="../../d4/d9/ke_8h.html#a50">KINTERRUPT_MODE</a>;
00169 
00170 <span class="comment">// end_ntddk end_wdm end_nthal end_ntminiport end_ntifs end_ntndis</span>
00171 
00172 <span class="comment">//</span>
00173 <span class="comment">// Process states.</span>
00174 <span class="comment">//</span>
00175 
<a name="l00176"></a><a class="code" href="../../d4/d9/ke_8h.html#a405">00176</a> <span class="keyword">typedef</span> <span class="keyword">enum</span> <a class="code" href="../../d4/d9/ke_8h.html#a405">_KPROCESS_STATE</a> {
00177     <a class="code" href="../../d4/d9/ke_8h.html#a405a186">ProcessInMemory</a>,
00178     <a class="code" href="../../d4/d9/ke_8h.html#a405a187">ProcessOutOfMemory</a>,
00179     <a class="code" href="../../d4/d9/ke_8h.html#a405a188">ProcessInTransition</a>,
00180     <a class="code" href="../../d4/d9/ke_8h.html#a405a189">ProcessInSwap</a>,
00181     <a class="code" href="../../d4/d9/ke_8h.html#a405a190">ProcessOutSwap</a>
00182     } <a class="code" href="../../d4/d9/ke_8h.html#a51">KPROCESS_STATE</a>;
00183 
00184 <span class="comment">//</span>
00185 <span class="comment">// Thread scheduling states.</span>
00186 <span class="comment">//</span>
00187 
<a name="l00188"></a><a class="code" href="../../d4/d9/ke_8h.html#a406">00188</a> <span class="keyword">typedef</span> <span class="keyword">enum</span> <a class="code" href="../../d4/d9/ke_8h.html#a406">_KTHREAD_STATE</a> {
00189     <a class="code" href="../../d4/d9/ke_8h.html#a406a191">Initialized</a>,
00190     <a class="code" href="../../d4/d9/ke_8h.html#a406a192">Ready</a>,
00191     <a class="code" href="../../d4/d9/ke_8h.html#a406a193">Running</a>,
00192     <a class="code" href="../../d4/d9/ke_8h.html#a406a194">Standby</a>,
00193     <a class="code" href="../../d4/d9/ke_8h.html#a406a195">Terminated</a>,
00194     <a class="code" href="../../d4/d9/ke_8h.html#a406a196">Waiting</a>,
00195     <a class="code" href="../../d4/d9/ke_8h.html#a406a197">Transition</a>
00196     } <a class="code" href="../../d4/d9/ke_8h.html#a52">KTHREAD_STATE</a>;
00197 
00198 <span class="comment">// begin_ntddk begin_wdm begin_nthal begin_ntifs</span>
00199 <span class="comment">//</span>
00200 <span class="comment">// Wait reasons</span>
00201 <span class="comment">//</span>
00202 
<a name="l00203"></a><a class="code" href="../../d4/d9/ke_8h.html#a407">00203</a> <span class="keyword">typedef</span> <span class="keyword">enum</span> <a class="code" href="../../d4/d9/ke_8h.html#a407">_KWAIT_REASON</a> {
00204     <a class="code" href="../../d6/d7/halmips_8h.html#a455">Executive</a>,
00205     <a class="code" href="../../d4/d9/ke_8h.html#a407a199">FreePage</a>,
00206     <a class="code" href="../../d4/d9/ke_8h.html#a407a200">PageIn</a>,
00207     <a class="code" href="../../d4/d9/ke_8h.html#a407a201">PoolAllocation</a>,
00208     <a class="code" href="../../d4/d9/ke_8h.html#a407a202">DelayExecution</a>,
00209     <a class="code" href="../../d4/d9/ke_8h.html#a407a203">Suspended</a>,
00210     <a class="code" href="../../d4/d9/ke_8h.html#a407a204">UserRequest</a>,
00211     <a class="code" href="../../d6/d7/halmips_8h.html#a0">WrExecutive</a>,
00212     <a class="code" href="../../d4/d9/ke_8h.html#a407a206">WrFreePage</a>,
00213     <a class="code" href="../../d4/d9/ke_8h.html#a407a207">WrPageIn</a>,
00214     <a class="code" href="../../d4/d9/ke_8h.html#a407a208">WrPoolAllocation</a>,
00215     <a class="code" href="../../d4/d9/ke_8h.html#a407a209">WrDelayExecution</a>,
00216     <a class="code" href="../../d4/d9/ke_8h.html#a407a210">WrSuspended</a>,
00217     <a class="code" href="../../d4/d9/ke_8h.html#a407a211">WrUserRequest</a>,
00218     <a class="code" href="../../d4/d9/ke_8h.html#a407a212">WrEventPair</a>,
00219     <a class="code" href="../../d4/d9/ke_8h.html#a407a213">WrQueue</a>,
00220     <a class="code" href="../../d4/d9/ke_8h.html#a407a214">WrLpcReceive</a>,
00221     <a class="code" href="../../d4/d9/ke_8h.html#a407a215">WrLpcReply</a>,
00222     <a class="code" href="../../d4/d9/ke_8h.html#a407a216">WrVirtualMemory</a>,
00223     <a class="code" href="../../d4/d9/ke_8h.html#a407a217">WrPageOut</a>,
00224     <a class="code" href="../../d4/d9/ke_8h.html#a407a218">WrRendezvous</a>,
00225     <a class="code" href="../../d4/d9/ke_8h.html#a407a219">Spare2</a>,
00226     <a class="code" href="../../d4/d9/ke_8h.html#a407a220">Spare3</a>,
00227     <a class="code" href="../../d4/d9/ke_8h.html#a407a221">Spare4</a>,
00228     <a class="code" href="../../d4/d9/ke_8h.html#a407a222">Spare5</a>,
00229     <a class="code" href="../../d4/d9/ke_8h.html#a407a223">Spare6</a>,
00230     <a class="code" href="../../d4/d9/ke_8h.html#a407a224">WrKernel</a>,
00231     <a class="code" href="../../d4/d9/ke_8h.html#a407a225">MaximumWaitReason</a>
00232     } <a class="code" href="../../d4/d9/ke_8h.html#a53">KWAIT_REASON</a>;
00233 
00234 <span class="comment">// end_ntddk end_wdm end_nthal</span>
00235 
00236 <span class="comment">//</span>
00237 <span class="comment">// Miscellaneous type definitions</span>
00238 <span class="comment">//</span>
00239 <span class="comment">// APC state</span>
00240 <span class="comment">//</span>
00241 
<a name="l00242"></a><a class="code" href="../../d3/d5/struct__KAPC__STATE.html">00242</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d3/d5/struct__KAPC__STATE.html">_KAPC_STATE</a> {
<a name="l00243"></a><a class="code" href="../../d3/d5/struct__KAPC__STATE.html#o0">00243</a>     LIST_ENTRY <a class="code" href="../../d3/d5/struct__KAPC__STATE.html#o0">ApcListHead</a>[<a class="code" href="../../d0/d9/ntosdef_8h.html#a76a71">MaximumMode</a>];
<a name="l00244"></a><a class="code" href="../../d3/d5/struct__KAPC__STATE.html#o1">00244</a>     <span class="keyword">struct </span><a class="code" href="../../d5/d7/struct__KPROCESS.html">_KPROCESS</a> *<a class="code" href="../../d3/d5/struct__KAPC__STATE.html#o1">Process</a>;
<a name="l00245"></a><a class="code" href="../../d3/d5/struct__KAPC__STATE.html#o2">00245</a>     BOOLEAN <a class="code" href="../../d3/d5/struct__KAPC__STATE.html#o2">KernelApcInProgress</a>;
<a name="l00246"></a><a class="code" href="../../d3/d5/struct__KAPC__STATE.html#o3">00246</a>     BOOLEAN <a class="code" href="../../d3/d5/struct__KAPC__STATE.html#o3">KernelApcPending</a>;
<a name="l00247"></a><a class="code" href="../../d3/d5/struct__KAPC__STATE.html#o4">00247</a>     BOOLEAN <a class="code" href="../../d3/d5/struct__KAPC__STATE.html#o4">UserApcPending</a>;
00248 } <a class="code" href="../../d3/d5/struct__KAPC__STATE.html">KAPC_STATE</a>, *<a class="code" href="../../d3/d5/struct__KAPC__STATE.html">PKAPC_STATE</a>, *RESTRICTED_POINTER <a class="code" href="../../d3/d5/struct__KAPC__STATE.html">PRKAPC_STATE</a>;
00249 
00250 <span class="comment">// begin_ntddk begin_wdm begin_nthal begin_ntndis</span>
00251 <span class="comment">//</span>
00252 <span class="comment">// Common dispatcher object header</span>
00253 <span class="comment">//</span>
00254 <span class="comment">// N.B. The size field contains the number of dwords in the structure.</span>
00255 <span class="comment">//</span>
00256 
<a name="l00257"></a><a class="code" href="../../d1/d6/struct__DISPATCHER__HEADER.html">00257</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d1/d6/struct__DISPATCHER__HEADER.html">_DISPATCHER_HEADER</a> {
<a name="l00258"></a><a class="code" href="../../d1/d6/struct__DISPATCHER__HEADER.html#o0">00258</a>     UCHAR <a class="code" href="../../d1/d6/struct__DISPATCHER__HEADER.html#o0">Type</a>;
<a name="l00259"></a><a class="code" href="../../d1/d6/struct__DISPATCHER__HEADER.html#o1">00259</a>     UCHAR <a class="code" href="../../d1/d6/struct__DISPATCHER__HEADER.html#o1">Absolute</a>;
<a name="l00260"></a><a class="code" href="../../d1/d6/struct__DISPATCHER__HEADER.html#o2">00260</a>     UCHAR <a class="code" href="../../d8/d7/lh__open_2pi__mem_8h.html#a0">Size</a>;
<a name="l00261"></a><a class="code" href="../../d1/d6/struct__DISPATCHER__HEADER.html#o3">00261</a>     UCHAR <a class="code" href="../../d1/d6/struct__DISPATCHER__HEADER.html#o3">Inserted</a>;
<a name="l00262"></a><a class="code" href="../../d1/d6/struct__DISPATCHER__HEADER.html#o4">00262</a>     LONG <a class="code" href="../../d1/d6/struct__DISPATCHER__HEADER.html#o4">SignalState</a>;
<a name="l00263"></a><a class="code" href="../../d1/d6/struct__DISPATCHER__HEADER.html#o5">00263</a>     LIST_ENTRY <a class="code" href="../../d1/d6/struct__DISPATCHER__HEADER.html#o5">WaitListHead</a>;
00264 } <a class="code" href="../../d1/d6/struct__DISPATCHER__HEADER.html">DISPATCHER_HEADER</a>;
00265 
00266 <span class="comment">// end_ntddk end_wdm end_nthal end_ntifs end_ntndis</span>
00267 
00268 <span class="comment">//</span>
00269 <span class="comment">// Page frame</span>
00270 <span class="comment">//</span>
00271 
<a name="l00272"></a><a class="code" href="../../d4/d9/ke_8h.html#a58">00272</a> <span class="keyword">typedef</span> ULONG <a class="code" href="../../d4/d9/ke_8h.html#a58">KPAGE_FRAME</a>;
00273 
00274 <span class="comment">//</span>
00275 <span class="comment">// Wait block</span>
00276 <span class="comment">//</span>
00277 <span class="comment">// begin_ntddk begin_wdm begin_nthal begin_ntifs</span>
00278 
<a name="l00279"></a><a class="code" href="../../d4/d8/struct__KWAIT__BLOCK.html">00279</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d4/d8/struct__KWAIT__BLOCK.html">_KWAIT_BLOCK</a> {
<a name="l00280"></a><a class="code" href="../../d4/d8/struct__KWAIT__BLOCK.html#o0">00280</a>     LIST_ENTRY <a class="code" href="../../d4/d8/struct__KWAIT__BLOCK.html#o0">WaitListEntry</a>;
<a name="l00281"></a><a class="code" href="../../d4/d8/struct__KWAIT__BLOCK.html#o1">00281</a>     <span class="keyword">struct </span><a class="code" href="../../d1/d8/struct__KTHREAD.html">_KTHREAD</a> *RESTRICTED_POINTER <a class="code" href="../../d4/d8/struct__KWAIT__BLOCK.html#o1">Thread</a>;
<a name="l00282"></a><a class="code" href="../../d4/d8/struct__KWAIT__BLOCK.html#o2">00282</a>     PVOID <a class="code" href="../../d4/d8/struct__KWAIT__BLOCK.html#o2">Object</a>;
<a name="l00283"></a><a class="code" href="../../d4/d8/struct__KWAIT__BLOCK.html#o3">00283</a>     <span class="keyword">struct </span><a class="code" href="../../d4/d8/struct__KWAIT__BLOCK.html">_KWAIT_BLOCK</a> *RESTRICTED_POINTER <a class="code" href="../../d4/d8/struct__KWAIT__BLOCK.html#o3">NextWaitBlock</a>;
<a name="l00284"></a><a class="code" href="../../d4/d8/struct__KWAIT__BLOCK.html#o4">00284</a>     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> <a class="code" href="../../d4/d8/struct__KWAIT__BLOCK.html#o4">WaitKey</a>;
<a name="l00285"></a><a class="code" href="../../d4/d8/struct__KWAIT__BLOCK.html#o5">00285</a>     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> <a class="code" href="../../d4/d8/struct__KWAIT__BLOCK.html#o5">WaitType</a>;
00286 } <a class="code" href="../../d4/d8/struct__KWAIT__BLOCK.html">KWAIT_BLOCK</a>, *<a class="code" href="../../d4/d8/struct__KWAIT__BLOCK.html">PKWAIT_BLOCK</a>, *RESTRICTED_POINTER <a class="code" href="../../d4/d8/struct__KWAIT__BLOCK.html">PRKWAIT_BLOCK</a>;
00287 
00288 <span class="comment">// end_ntddk end_wdm end_nthal end_ntifs</span>
00289 
00290 <span class="comment">//</span>
00291 <span class="comment">// System service table descriptor.</span>
00292 <span class="comment">//</span>
00293 <span class="comment">// N.B. A system service number has a 12-bit service table offset and a</span>
00294 <span class="comment">//      3-bit service table number.</span>
00295 <span class="comment">//</span>
00296 <span class="comment">// N.B. Descriptor table entries must be a power of 2 in size. Currently</span>
00297 <span class="comment">//      this is 16 bytes on a 32-bit system and 32 bytes on a 64-bit</span>
00298 <span class="comment">//      system.</span>
00299 <span class="comment">//</span>
00300 
<a name="l00301"></a><a class="code" href="../../d4/d9/ke_8h.html#a13">00301</a> <span class="preprocessor">#define NUMBER_SERVICE_TABLES 4</span>
<a name="l00302"></a><a class="code" href="../../d4/d9/ke_8h.html#a14">00302</a> <span class="preprocessor"></span><span class="preprocessor">#define SERVICE_NUMBER_MASK ((1 &lt;&lt; 12) -  1)</span>
00303 <span class="preprocessor"></span>
00304 <span class="preprocessor">#if defined(_WIN64)</span>
00305 <span class="preprocessor"></span>
00306 <span class="preprocessor">#define SERVICE_TABLE_SHIFT (12 - 5)</span>
00307 <span class="preprocessor"></span><span class="preprocessor">#define SERVICE_TABLE_MASK (((1 &lt;&lt; 2) - 1) &lt;&lt; 5)</span>
00308 <span class="preprocessor"></span><span class="preprocessor">#define SERVICE_TABLE_TEST (WIN32K_SERVICE_INDEX &lt;&lt; 5)</span>
00309 <span class="preprocessor"></span>
00310 <span class="preprocessor">#else</span>
00311 <span class="preprocessor"></span>
<a name="l00312"></a><a class="code" href="../../d4/d9/ke_8h.html#a15">00312</a> <span class="preprocessor">#define SERVICE_TABLE_SHIFT (12 - 4)</span>
<a name="l00313"></a><a class="code" href="../../d4/d9/ke_8h.html#a16">00313</a> <span class="preprocessor"></span><span class="preprocessor">#define SERVICE_TABLE_MASK (((1 &lt;&lt; 2) - 1) &lt;&lt; 4)</span>
<a name="l00314"></a><a class="code" href="../../d4/d9/ke_8h.html#a17">00314</a> <span class="preprocessor"></span><span class="preprocessor">#define SERVICE_TABLE_TEST (WIN32K_SERVICE_INDEX &lt;&lt; 4)</span>
00315 <span class="preprocessor"></span>
00316 <span class="preprocessor">#endif</span>
00317 <span class="preprocessor"></span>
<a name="l00318"></a><a class="code" href="../../d9/d7/struct__KSERVICE__TABLE__DESCRIPTOR.html">00318</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d9/d7/struct__KSERVICE__TABLE__DESCRIPTOR.html">_KSERVICE_TABLE_DESCRIPTOR</a> {
<a name="l00319"></a><a class="code" href="../../d9/d7/struct__KSERVICE__TABLE__DESCRIPTOR.html#o0">00319</a>     PULONG_PTR <a class="code" href="../../d9/d7/struct__KSERVICE__TABLE__DESCRIPTOR.html#o0">Base</a>;
<a name="l00320"></a><a class="code" href="../../d9/d7/struct__KSERVICE__TABLE__DESCRIPTOR.html#o1">00320</a>     PULONG <a class="code" href="../../d9/d7/struct__KSERVICE__TABLE__DESCRIPTOR.html#o1">Count</a>;
<a name="l00321"></a><a class="code" href="../../d9/d7/struct__KSERVICE__TABLE__DESCRIPTOR.html#o2">00321</a>     ULONG <a class="code" href="../../d9/d7/struct__KSERVICE__TABLE__DESCRIPTOR.html#o2">Limit</a>;
00322 <span class="preprocessor">#if defined(_IA64_)</span>
00323 <span class="preprocessor"></span>    LONG TableBaseGpOffset;
00324 <span class="preprocessor">#endif</span>
<a name="l00325"></a><a class="code" href="../../d9/d7/struct__KSERVICE__TABLE__DESCRIPTOR.html#o3">00325</a> <span class="preprocessor"></span>    PUCHAR <a class="code" href="../../d9/d7/struct__KSERVICE__TABLE__DESCRIPTOR.html#o3">Number</a>;
00326 } <a class="code" href="../../d9/d7/struct__KSERVICE__TABLE__DESCRIPTOR.html">KSERVICE_TABLE_DESCRIPTOR</a>, *<a class="code" href="../../d9/d7/struct__KSERVICE__TABLE__DESCRIPTOR.html">PKSERVICE_TABLE_DESCRIPTOR</a>;
00327 
00328 <span class="comment">//</span>
00329 <span class="comment">// Procedure type definitions</span>
00330 <span class="comment">//</span>
00331 <span class="comment">// Debug routine</span>
00332 <span class="comment">//</span>
00333 
00334 <span class="keyword">typedef</span>
00335 BOOLEAN
<a name="l00336"></a><a class="code" href="../../d4/d9/ke_8h.html#a64">00336</a> (*PKDEBUG_ROUTINE) (
00337     IN PKTRAP_FRAME TrapFrame,
00338     IN PKEXCEPTION_FRAME ExceptionFrame,
00339     IN PEXCEPTION_RECORD ExceptionRecord,
00340     IN PCONTEXT ContextRecord,
00341     IN <a class="code" href="../../d0/d9/ntosdef_8h.html#a39">KPROCESSOR_MODE</a> PreviousMode,
00342     IN BOOLEAN SecondChance
00343     );
00344 
00345 <span class="keyword">typedef</span>
00346 BOOLEAN
<a name="l00347"></a><a class="code" href="../../d4/d9/ke_8h.html#a65">00347</a> (*PKDEBUG_SWITCH_ROUTINE) (
00348     IN PEXCEPTION_RECORD ExceptionRecord,
00349     IN PCONTEXT ContextRecord,
00350     IN BOOLEAN SecondChance
00351     );
00352 
<a name="l00353"></a><a class="code" href="../../d4/d9/ke_8h.html#a408">00353</a> <span class="keyword">typedef</span> <span class="keyword">enum</span> {
00354     <a class="code" href="../../d4/d9/ke_8h.html#a408a226">ContinueError</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>,
00355     <a class="code" href="../../d4/d9/ke_8h.html#a408a227">ContinueSuccess</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>,
00356     <a class="code" href="../../d4/d9/ke_8h.html#a408a228">ContinueProcessorReselected</a>,
00357     <a class="code" href="../../d4/d9/ke_8h.html#a408a229">ContinueNextProcessor</a>
00358 } <a class="code" href="../../d4/d9/ke_8h.html#a408">KCONTINUE_STATUS</a>;
00359 
00360 <span class="comment">// begin_ntddk begin_wdm begin_nthal begin_ntifs</span>
00361 <span class="comment">//</span>
00362 <span class="comment">// Thread start function</span>
00363 <span class="comment">//</span>
00364 
00365 <span class="keyword">typedef</span>
00366 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
<a name="l00367"></a><a class="code" href="../../d4/d9/ke_8h.html#a66">00367</a> (*PKSTART_ROUTINE) (
00368     IN PVOID StartContext
00369     );
00370 
00371 <span class="comment">// end_ntddk end_wdm end_nthal end_ntifs</span>
00372 
00373 <span class="comment">//</span>
00374 <span class="comment">// Thread system function</span>
00375 <span class="comment">//</span>
00376 
00377 <span class="keyword">typedef</span>
00378 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
<a name="l00379"></a><a class="code" href="../../d4/d9/ke_8h.html#a67">00379</a> (*PKSYSTEM_ROUTINE) (
00380     IN <a class="code" href="../../d4/d9/ke_8h.html#a66">PKSTART_ROUTINE</a> StartRoutine OPTIONAL,
00381     IN PVOID StartContext OPTIONAL
00382     );
00383 
00384 <span class="comment">// begin_ntddk begin_wdm begin_nthal begin_ntifs</span>
00385 <span class="comment">//</span>
00386 <span class="comment">// Kernel object structure definitions</span>
00387 <span class="comment">//</span>
00388 
00389 <span class="comment">//</span>
00390 <span class="comment">// Device Queue object and entry</span>
00391 <span class="comment">//</span>
00392 
<a name="l00393"></a><a class="code" href="../../d9/d5/struct__KDEVICE__QUEUE.html">00393</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d9/d5/struct__KDEVICE__QUEUE.html">_KDEVICE_QUEUE</a> {
<a name="l00394"></a><a class="code" href="../../d9/d5/struct__KDEVICE__QUEUE.html#o0">00394</a>     CSHORT <a class="code" href="../../d9/d5/struct__KDEVICE__QUEUE.html#o0">Type</a>;
<a name="l00395"></a><a class="code" href="../../d9/d5/struct__KDEVICE__QUEUE.html#o1">00395</a>     CSHORT <a class="code" href="../../d8/d7/lh__open_2pi__mem_8h.html#a0">Size</a>;
<a name="l00396"></a><a class="code" href="../../d9/d5/struct__KDEVICE__QUEUE.html#o2">00396</a>     LIST_ENTRY <a class="code" href="../../d9/d5/struct__KDEVICE__QUEUE.html#o2">DeviceListHead</a>;
<a name="l00397"></a><a class="code" href="../../d9/d5/struct__KDEVICE__QUEUE.html#o3">00397</a>     KSPIN_LOCK <a class="code" href="../../d9/d5/struct__KDEVICE__QUEUE.html#o3">Lock</a>;
<a name="l00398"></a><a class="code" href="../../d9/d5/struct__KDEVICE__QUEUE.html#o4">00398</a>     BOOLEAN <a class="code" href="../../d9/d5/struct__KDEVICE__QUEUE.html#o4">Busy</a>;
00399 } <a class="code" href="../../d9/d5/struct__KDEVICE__QUEUE.html">KDEVICE_QUEUE</a>, *<a class="code" href="../../d9/d5/struct__KDEVICE__QUEUE.html">PKDEVICE_QUEUE</a>, *RESTRICTED_POINTER <a class="code" href="../../d9/d5/struct__KDEVICE__QUEUE.html">PRKDEVICE_QUEUE</a>;
00400 
<a name="l00401"></a><a class="code" href="../../d0/d6/struct__KDEVICE__QUEUE__ENTRY.html">00401</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d0/d6/struct__KDEVICE__QUEUE__ENTRY.html">_KDEVICE_QUEUE_ENTRY</a> {
<a name="l00402"></a><a class="code" href="../../d0/d6/struct__KDEVICE__QUEUE__ENTRY.html#o0">00402</a>     LIST_ENTRY <a class="code" href="../../d0/d6/struct__KDEVICE__QUEUE__ENTRY.html#o0">DeviceListEntry</a>;
<a name="l00403"></a><a class="code" href="../../d0/d6/struct__KDEVICE__QUEUE__ENTRY.html#o1">00403</a>     ULONG <a class="code" href="../../d0/d6/struct__KDEVICE__QUEUE__ENTRY.html#o1">SortKey</a>;
<a name="l00404"></a><a class="code" href="../../d0/d6/struct__KDEVICE__QUEUE__ENTRY.html#o2">00404</a>     BOOLEAN <a class="code" href="../../d0/d6/struct__KDEVICE__QUEUE__ENTRY.html#o2">Inserted</a>;
00405 } <a class="code" href="../../d0/d6/struct__KDEVICE__QUEUE__ENTRY.html">KDEVICE_QUEUE_ENTRY</a>, *<a class="code" href="../../d0/d6/struct__KDEVICE__QUEUE__ENTRY.html">PKDEVICE_QUEUE_ENTRY</a>, *RESTRICTED_POINTER <a class="code" href="../../d0/d6/struct__KDEVICE__QUEUE__ENTRY.html">PRKDEVICE_QUEUE_ENTRY</a>;
00406 
00407 <span class="comment">// begin_ntndis</span>
00408 <span class="comment">//</span>
00409 <span class="comment">// Event object</span>
00410 <span class="comment">//</span>
00411 
<a name="l00412"></a><a class="code" href="../../d2/d6/struct__KEVENT.html">00412</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d2/d6/struct__KEVENT.html">_KEVENT</a> {
<a name="l00413"></a><a class="code" href="../../d2/d6/struct__KEVENT.html#o0">00413</a>     <a class="code" href="../../d1/d6/struct__DISPATCHER__HEADER.html">DISPATCHER_HEADER</a> <a class="code" href="../../d2/d6/struct__KEVENT.html#o0">Header</a>;
00414 } <a class="code" href="../../d2/d6/struct__KEVENT.html">KEVENT</a>, *<a class="code" href="../../d2/d6/struct__KEVENT.html">PKEVENT</a>, *RESTRICTED_POINTER <a class="code" href="../../d2/d6/struct__KEVENT.html">PRKEVENT</a>;
00415 
00416 <span class="comment">// end_ntddk end_wdm end_nthal end_ntifs end_ntndis</span>
00417 <span class="comment">//</span>
00418 <span class="comment">// Event pair object</span>
00419 <span class="comment">//</span>
00420 
<a name="l00421"></a><a class="code" href="../../d3/d6/struct__KEVENT__PAIR.html">00421</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d3/d6/struct__KEVENT__PAIR.html">_KEVENT_PAIR</a> {
<a name="l00422"></a><a class="code" href="../../d3/d6/struct__KEVENT__PAIR.html#o0">00422</a>     CSHORT <a class="code" href="../../d3/d6/struct__KEVENT__PAIR.html#o0">Type</a>;
<a name="l00423"></a><a class="code" href="../../d3/d6/struct__KEVENT__PAIR.html#o1">00423</a>     CSHORT <a class="code" href="../../d8/d7/lh__open_2pi__mem_8h.html#a0">Size</a>;
<a name="l00424"></a><a class="code" href="../../d3/d6/struct__KEVENT__PAIR.html#o2">00424</a>     <a class="code" href="../../d2/d6/struct__KEVENT.html">KEVENT</a> <a class="code" href="../../d3/d6/struct__KEVENT__PAIR.html#o2">EventLow</a>;
<a name="l00425"></a><a class="code" href="../../d3/d6/struct__KEVENT__PAIR.html#o3">00425</a>     <a class="code" href="../../d2/d6/struct__KEVENT.html">KEVENT</a> <a class="code" href="../../d3/d6/struct__KEVENT__PAIR.html#o3">EventHigh</a>;
00426 } <a class="code" href="../../d3/d6/struct__KEVENT__PAIR.html">KEVENT_PAIR</a>, *<a class="code" href="../../d3/d6/struct__KEVENT__PAIR.html">PKEVENT_PAIR</a>, *RESTRICTED_POINTER <a class="code" href="../../d3/d6/struct__KEVENT__PAIR.html">PRKEVENT_PAIR</a>;
00427 
00428 <span class="comment">// begin_nthal begin_ntddk begin_wdm begin_ntifs</span>
00429 <span class="comment">//</span>
00430 <span class="comment">// Define the interrupt service function type and the empty struct</span>
00431 <span class="comment">// type.</span>
00432 <span class="comment">//</span>
00433 <span class="comment">// end_ntddk end_wdm end_ntifs</span>
00434 
00435 <span class="keyword">struct </span><a class="code" href="../../d0/d7/struct__KINTERRUPT.html">_KINTERRUPT</a>;
00436 
00437 <span class="comment">// begin_ntddk begin_wdm begin_ntifs</span>
00438 <span class="keyword">typedef</span>
00439 BOOLEAN
<a name="l00440"></a><a class="code" href="../../d4/d9/ke_8h.html#a80">00440</a> (*PKSERVICE_ROUTINE) (
00441     IN <span class="keyword">struct </span><a class="code" href="../../d0/d7/struct__KINTERRUPT.html">_KINTERRUPT</a> *Interrupt,
00442     IN PVOID ServiceContext
00443     );
00444 <span class="comment">// end_ntddk end_wdm end_ntifs</span>
00445 
00446 <span class="comment">//</span>
00447 <span class="comment">// Interrupt object</span>
00448 <span class="comment">//</span>
00449 <span class="comment">// N.B. The layout of this structure cannot change. It is exported to HALs</span>
00450 <span class="comment">//      to short circuit interrupt dispatch.</span>
00451 <span class="comment">//</span>
00452 
00453 
<a name="l00454"></a><a class="code" href="../../d0/d7/struct__KINTERRUPT.html">00454</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d0/d7/struct__KINTERRUPT.html">_KINTERRUPT</a> {
<a name="l00455"></a><a class="code" href="../../d0/d7/struct__KINTERRUPT.html#o0">00455</a>     CSHORT <a class="code" href="../../d0/d7/struct__KINTERRUPT.html#o0">Type</a>;
<a name="l00456"></a><a class="code" href="../../d0/d7/struct__KINTERRUPT.html#o1">00456</a>     CSHORT <a class="code" href="../../d8/d7/lh__open_2pi__mem_8h.html#a0">Size</a>;
<a name="l00457"></a><a class="code" href="../../d0/d7/struct__KINTERRUPT.html#o2">00457</a>     LIST_ENTRY <a class="code" href="../../d0/d7/struct__KINTERRUPT.html#o2">InterruptListEntry</a>;
<a name="l00458"></a><a class="code" href="../../d0/d7/struct__KINTERRUPT.html#o3">00458</a>     <a class="code" href="../../d4/d9/ke_8h.html#a80">PKSERVICE_ROUTINE</a> <a class="code" href="../../d0/d7/struct__KINTERRUPT.html#o3">ServiceRoutine</a>;
<a name="l00459"></a><a class="code" href="../../d0/d7/struct__KINTERRUPT.html#o4">00459</a>     PVOID <a class="code" href="../../d0/d7/struct__KINTERRUPT.html#o4">ServiceContext</a>;
<a name="l00460"></a><a class="code" href="../../d0/d7/struct__KINTERRUPT.html#o5">00460</a>     KSPIN_LOCK <a class="code" href="../../d0/d7/struct__KINTERRUPT.html#o5">SpinLock</a>;
<a name="l00461"></a><a class="code" href="../../d0/d7/struct__KINTERRUPT.html#o6">00461</a>     ULONG <a class="code" href="../../d0/d7/struct__KINTERRUPT.html#o6">Spare1</a>;
<a name="l00462"></a><a class="code" href="../../d0/d7/struct__KINTERRUPT.html#o7">00462</a>     PKSPIN_LOCK <a class="code" href="../../d0/d7/struct__KINTERRUPT.html#o7">ActualLock</a>;
<a name="l00463"></a><a class="code" href="../../d0/d7/struct__KINTERRUPT.html#o8">00463</a>     PKINTERRUPT_ROUTINE <a class="code" href="../../d0/d7/struct__KINTERRUPT.html#o8">DispatchAddress</a>;
<a name="l00464"></a><a class="code" href="../../d0/d7/struct__KINTERRUPT.html#o9">00464</a>     ULONG <a class="code" href="../../d0/d7/struct__KINTERRUPT.html#o9">Vector</a>;
<a name="l00465"></a><a class="code" href="../../d0/d7/struct__KINTERRUPT.html#o10">00465</a>     KIRQL <a class="code" href="../../d0/d7/struct__KINTERRUPT.html#o10">Irql</a>;
<a name="l00466"></a><a class="code" href="../../d0/d7/struct__KINTERRUPT.html#o11">00466</a>     KIRQL <a class="code" href="../../d0/d7/struct__KINTERRUPT.html#o11">SynchronizeIrql</a>;
<a name="l00467"></a><a class="code" href="../../d0/d7/struct__KINTERRUPT.html#o12">00467</a>     BOOLEAN <a class="code" href="../../d0/d7/struct__KINTERRUPT.html#o12">FloatingSave</a>;
<a name="l00468"></a><a class="code" href="../../d0/d7/struct__KINTERRUPT.html#o13">00468</a>     BOOLEAN <a class="code" href="../../d0/d7/struct__KINTERRUPT.html#o13">Connected</a>;
<a name="l00469"></a><a class="code" href="../../d0/d7/struct__KINTERRUPT.html#o14">00469</a>     CCHAR <a class="code" href="../../d0/d7/struct__KINTERRUPT.html#o14">Number</a>;
<a name="l00470"></a><a class="code" href="../../d0/d7/struct__KINTERRUPT.html#o15">00470</a>     BOOLEAN <a class="code" href="../../d0/d7/struct__KINTERRUPT.html#o15">ShareVector</a>;
<a name="l00471"></a><a class="code" href="../../d0/d7/struct__KINTERRUPT.html#o16">00471</a>     <a class="code" href="../../d4/d9/ke_8h.html#a50">KINTERRUPT_MODE</a> <a class="code" href="../../d0/d7/struct__KINTERRUPT.html#o16">Mode</a>;
<a name="l00472"></a><a class="code" href="../../d0/d7/struct__KINTERRUPT.html#o17">00472</a>     ULONG <a class="code" href="../../d0/d7/struct__KINTERRUPT.html#o17">ServiceCount</a>;
<a name="l00473"></a><a class="code" href="../../d0/d7/struct__KINTERRUPT.html#o18">00473</a>     ULONG <a class="code" href="../../d0/d7/struct__KINTERRUPT.html#o18">Spare3</a>;
<a name="l00474"></a><a class="code" href="../../d0/d7/struct__KINTERRUPT.html#o19">00474</a>     ULONG <a class="code" href="../../d0/d7/struct__KINTERRUPT.html#o19">DispatchCode</a>[DISPATCH_LENGTH];
00475 } <a class="code" href="../../d0/d7/struct__KINTERRUPT.html">KINTERRUPT</a>;
00476 
<a name="l00477"></a><a class="code" href="../../d4/d9/ke_8h.html#a83">00477</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d0/d7/struct__KINTERRUPT.html">_KINTERRUPT</a> *<a class="code" href="../../d0/d7/struct__KINTERRUPT.html">PKINTERRUPT</a>, *RESTRICTED_POINTER <a class="code" href="../../d4/d9/ke_8h.html#a83">PRKINTERRUPT</a>; <span class="comment">// ntndis</span>
00478 
00479 <span class="comment">// begin_ntifs begin_ntddk begin_wdm</span>
00480 <span class="comment">//</span>
00481 <span class="comment">// Mutant object</span>
00482 <span class="comment">//</span>
00483 
<a name="l00484"></a><a class="code" href="../../d3/d7/struct__KMUTANT.html">00484</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d3/d7/struct__KMUTANT.html">_KMUTANT</a> {
<a name="l00485"></a><a class="code" href="../../d3/d7/struct__KMUTANT.html#o0">00485</a>     <a class="code" href="../../d1/d6/struct__DISPATCHER__HEADER.html">DISPATCHER_HEADER</a> <a class="code" href="../../d3/d7/struct__KMUTANT.html#o0">Header</a>;
<a name="l00486"></a><a class="code" href="../../d3/d7/struct__KMUTANT.html#o1">00486</a>     LIST_ENTRY <a class="code" href="../../d3/d7/struct__KMUTANT.html#o1">MutantListEntry</a>;
<a name="l00487"></a><a class="code" href="../../d3/d7/struct__KMUTANT.html#o2">00487</a>     <span class="keyword">struct </span><a class="code" href="../../d1/d8/struct__KTHREAD.html">_KTHREAD</a> *RESTRICTED_POINTER <a class="code" href="../../d3/d7/struct__KMUTANT.html#o2">OwnerThread</a>;
<a name="l00488"></a><a class="code" href="../../d3/d7/struct__KMUTANT.html#o3">00488</a>     BOOLEAN <a class="code" href="../../d3/d7/struct__KMUTANT.html#o3">Abandoned</a>;
<a name="l00489"></a><a class="code" href="../../d3/d7/struct__KMUTANT.html#o4">00489</a>     UCHAR <a class="code" href="../../d3/d7/struct__KMUTANT.html#o4">ApcDisable</a>;
00490 } <a class="code" href="../../d3/d7/struct__KMUTANT.html">KMUTANT</a>, *<a class="code" href="../../d3/d7/struct__KMUTANT.html">PKMUTANT</a>, *RESTRICTED_POINTER <a class="code" href="../../d3/d7/struct__KMUTANT.html">PRKMUTANT</a>, <a class="code" href="../../d3/d7/struct__KMUTANT.html">KMUTEX</a>, *<a class="code" href="../../d3/d7/struct__KMUTANT.html">PKMUTEX</a>, *RESTRICTED_POINTER <a class="code" href="../../d3/d7/struct__KMUTANT.html">PRKMUTEX</a>;
00491 
00492 <span class="comment">// end_ntddk end_wdm</span>
00493 <span class="comment">//</span>
00494 <span class="comment">// Queue object</span>
00495 <span class="comment">//</span>
00496 
<a name="l00497"></a><a class="code" href="../../d7/d7/struct__KQUEUE.html">00497</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d7/d7/struct__KQUEUE.html">_KQUEUE</a> {
<a name="l00498"></a><a class="code" href="../../d7/d7/struct__KQUEUE.html#o0">00498</a>     <a class="code" href="../../d1/d6/struct__DISPATCHER__HEADER.html">DISPATCHER_HEADER</a> <a class="code" href="../../d7/d7/struct__KQUEUE.html#o0">Header</a>;
<a name="l00499"></a><a class="code" href="../../d7/d7/struct__KQUEUE.html#o1">00499</a>     LIST_ENTRY <a class="code" href="../../d7/d7/struct__KQUEUE.html#o1">EntryListHead</a>;
<a name="l00500"></a><a class="code" href="../../d7/d7/struct__KQUEUE.html#o2">00500</a>     ULONG <a class="code" href="../../d7/d7/struct__KQUEUE.html#o2">CurrentCount</a>;
<a name="l00501"></a><a class="code" href="../../d7/d7/struct__KQUEUE.html#o3">00501</a>     ULONG <a class="code" href="../../d7/d7/struct__KQUEUE.html#o3">MaximumCount</a>;
<a name="l00502"></a><a class="code" href="../../d7/d7/struct__KQUEUE.html#o4">00502</a>     LIST_ENTRY <a class="code" href="../../d7/d7/struct__KQUEUE.html#o4">ThreadListHead</a>;
00503 } <a class="code" href="../../d7/d7/struct__KQUEUE.html">KQUEUE</a>, *<a class="code" href="../../d7/d7/struct__KQUEUE.html">PKQUEUE</a>, *RESTRICTED_POINTER <a class="code" href="../../d7/d7/struct__KQUEUE.html">PRKQUEUE</a>;
00504 
00505 <span class="comment">// begin_ntddk begin_wdm</span>
00506 <span class="comment">//</span>
00507 <span class="comment">//</span>
00508 <span class="comment">// Semaphore object</span>
00509 <span class="comment">//</span>
00510 
<a name="l00511"></a><a class="code" href="../../d8/d7/struct__KSEMAPHORE.html">00511</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d8/d7/struct__KSEMAPHORE.html">_KSEMAPHORE</a> {
<a name="l00512"></a><a class="code" href="../../d8/d7/struct__KSEMAPHORE.html#o0">00512</a>     <a class="code" href="../../d1/d6/struct__DISPATCHER__HEADER.html">DISPATCHER_HEADER</a> <a class="code" href="../../d8/d7/struct__KSEMAPHORE.html#o0">Header</a>;
<a name="l00513"></a><a class="code" href="../../d8/d7/struct__KSEMAPHORE.html#o1">00513</a>     LONG <a class="code" href="../../d8/d7/struct__KSEMAPHORE.html#o1">Limit</a>;
00514 } <a class="code" href="../../d8/d7/struct__KSEMAPHORE.html">KSEMAPHORE</a>, *<a class="code" href="../../d8/d7/struct__KSEMAPHORE.html">PKSEMAPHORE</a>, *RESTRICTED_POINTER <a class="code" href="../../d8/d7/struct__KSEMAPHORE.html">PRKSEMAPHORE</a>;
00515 
00516 <span class="comment">// begin_ntndis</span>
00517 <span class="comment">//</span>
00518 <span class="comment">// Timer object</span>
00519 <span class="comment">//</span>
00520 
<a name="l00521"></a><a class="code" href="../../d3/d8/struct__KTIMER.html">00521</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d3/d8/struct__KTIMER.html">_KTIMER</a> {
<a name="l00522"></a><a class="code" href="../../d3/d8/struct__KTIMER.html#o0">00522</a>     <a class="code" href="../../d1/d6/struct__DISPATCHER__HEADER.html">DISPATCHER_HEADER</a> <a class="code" href="../../d3/d8/struct__KTIMER.html#o0">Header</a>;
<a name="l00523"></a><a class="code" href="../../d3/d8/struct__KTIMER.html#o1">00523</a>     ULARGE_INTEGER <a class="code" href="../../d3/d8/struct__KTIMER.html#o1">DueTime</a>;
<a name="l00524"></a><a class="code" href="../../d3/d8/struct__KTIMER.html#o2">00524</a>     LIST_ENTRY <a class="code" href="../../d3/d8/struct__KTIMER.html#o2">TimerListEntry</a>;
<a name="l00525"></a><a class="code" href="../../d3/d8/struct__KTIMER.html#o3">00525</a>     <span class="keyword">struct </span><a class="code" href="../../d1/d6/struct__KDPC.html">_KDPC</a> *<a class="code" href="../../d3/d8/struct__KTIMER.html#o3">Dpc</a>;
<a name="l00526"></a><a class="code" href="../../d3/d8/struct__KTIMER.html#o4">00526</a>     LONG <a class="code" href="../../d3/d8/struct__KTIMER.html#o4">Period</a>;
00527 } <a class="code" href="../../d3/d8/struct__KTIMER.html">KTIMER</a>, *<a class="code" href="../../d3/d8/struct__KTIMER.html">PKTIMER</a>, *RESTRICTED_POINTER <a class="code" href="../../d3/d8/struct__KTIMER.html">PRKTIMER</a>;
00528 
00529 <span class="comment">// end_ntddk end_wdm end_nthal end_ntifs end_ntndis</span>
00530 
00531 <span class="comment">//</span>
00532 <span class="comment">// Thread object</span>
00533 <span class="comment">//</span>
00534 
00535 <span class="keyword">struct </span><a class="code" href="../../d9/d1/struct__ECHANNEL.html">_ECHANNEL</a>;
00536 
<a name="l00537"></a><a class="code" href="../../d1/d8/struct__KTHREAD.html">00537</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d1/d8/struct__KTHREAD.html">_KTHREAD</a> {
00538 
00539     <span class="comment">//</span>
00540     <span class="comment">// The dispatcher header and mutant listhead are fairly infrequently</span>
00541     <span class="comment">// referenced, but pad the thread to a 32-byte boundary (assumption</span>
00542     <span class="comment">// that pool allocation is in units of 32-bytes).</span>
00543     <span class="comment">//</span>
00544 
<a name="l00545"></a><a class="code" href="../../d1/d8/struct__KTHREAD.html#o0">00545</a>     <a class="code" href="../../d1/d6/struct__DISPATCHER__HEADER.html">DISPATCHER_HEADER</a> <a class="code" href="../../d1/d8/struct__KTHREAD.html#o0">Header</a>;
<a name="l00546"></a><a class="code" href="../../d1/d8/struct__KTHREAD.html#o1">00546</a>     LIST_ENTRY <a class="code" href="../../d1/d8/struct__KTHREAD.html#o1">MutantListHead</a>;
00547 
00548     <span class="comment">//</span>
00549     <span class="comment">// The following fields are referenced during trap, interrupts, or</span>
00550     <span class="comment">// context switches.</span>
00551     <span class="comment">//</span>
00552     <span class="comment">// N.B. The Teb address and TlsArray are loaded as a quadword quantity</span>
00553     <span class="comment">//      on MIPS and therefore must be on a quadword boundary.</span>
00554     <span class="comment">//</span>
00555 
<a name="l00556"></a><a class="code" href="../../d1/d8/struct__KTHREAD.html#o2">00556</a>     PVOID <a class="code" href="../../d1/d8/struct__KTHREAD.html#o2">InitialStack</a>;
<a name="l00557"></a><a class="code" href="../../d1/d8/struct__KTHREAD.html#o3">00557</a>     PVOID <a class="code" href="../../d1/d8/struct__KTHREAD.html#o3">StackLimit</a>;
00558 <span class="preprocessor">#if defined(_IA64_)</span>
00559 <span class="preprocessor"></span>    PVOID InitialBStore;
00560     PVOID BStoreLimit;
00561 <span class="preprocessor">#endif</span>
<a name="l00562"></a><a class="code" href="../../d1/d8/struct__KTHREAD.html#o4">00562</a> <span class="preprocessor"></span>    PVOID <a class="code" href="../../d1/d8/struct__KTHREAD.html#o4">Teb</a>;
<a name="l00563"></a><a class="code" href="../../d1/d8/struct__KTHREAD.html#o5">00563</a>     PVOID <a class="code" href="../../d1/d8/struct__KTHREAD.html#o5">TlsArray</a>;
<a name="l00564"></a><a class="code" href="../../d1/d8/struct__KTHREAD.html#o6">00564</a>     PVOID <a class="code" href="../../d1/d8/struct__KTHREAD.html#o6">KernelStack</a>;
00565 <span class="preprocessor">#if defined(_IA64_)</span>
00566 <span class="preprocessor"></span>    PVOID KernelBStore;
00567 <span class="preprocessor">#endif</span>
<a name="l00568"></a><a class="code" href="../../d1/d8/struct__KTHREAD.html#o7">00568</a> <span class="preprocessor"></span>    BOOLEAN <a class="code" href="../../d1/d8/struct__KTHREAD.html#o7">DebugActive</a>;
<a name="l00569"></a><a class="code" href="../../d1/d8/struct__KTHREAD.html#o8">00569</a>     UCHAR <a class="code" href="../../d1/d8/struct__KTHREAD.html#o8">State</a>;
<a name="l00570"></a><a class="code" href="../../d1/d8/struct__KTHREAD.html#o9">00570</a>     BOOLEAN <a class="code" href="../../d1/d8/struct__KTHREAD.html#o9">Alerted</a>[<a class="code" href="../../d0/d9/ntosdef_8h.html#a76a71">MaximumMode</a>];
<a name="l00571"></a><a class="code" href="../../d1/d8/struct__KTHREAD.html#o10">00571</a>     UCHAR <a class="code" href="../../d1/d8/struct__KTHREAD.html#o10">Iopl</a>;
<a name="l00572"></a><a class="code" href="../../d1/d8/struct__KTHREAD.html#o11">00572</a>     UCHAR <a class="code" href="../../d1/d8/struct__KTHREAD.html#o11">NpxState</a>;
<a name="l00573"></a><a class="code" href="../../d1/d8/struct__KTHREAD.html#o12">00573</a>     <a class="code" href="../../d1/d1/bench_8c.html#a16">CHAR</a> <a class="code" href="../../d1/d8/struct__KTHREAD.html#o12">Saturation</a>;
<a name="l00574"></a><a class="code" href="../../d1/d8/struct__KTHREAD.html#o13">00574</a>     SCHAR <a class="code" href="../../d1/d8/struct__KTHREAD.html#o13">Priority</a>;
<a name="l00575"></a><a class="code" href="../../d1/d8/struct__KTHREAD.html#o14">00575</a>     <a class="code" href="../../d3/d5/struct__KAPC__STATE.html">KAPC_STATE</a> <a class="code" href="../../d1/d8/struct__KTHREAD.html#o14">ApcState</a>;
<a name="l00576"></a><a class="code" href="../../d1/d8/struct__KTHREAD.html#o15">00576</a>     ULONG <a class="code" href="../../d1/d8/struct__KTHREAD.html#o15">ContextSwitches</a>;
00577 
00578     <span class="comment">//</span>
00579     <span class="comment">// The following fields are referenced during wait operations.</span>
00580     <span class="comment">//</span>
00581 
<a name="l00582"></a><a class="code" href="../../d1/d8/struct__KTHREAD.html#o16">00582</a>     LONG_PTR <a class="code" href="../../d1/d8/struct__KTHREAD.html#o16">WaitStatus</a>;
<a name="l00583"></a><a class="code" href="../../d1/d8/struct__KTHREAD.html#o17">00583</a>     KIRQL <a class="code" href="../../d1/d8/struct__KTHREAD.html#o17">WaitIrql</a>;
<a name="l00584"></a><a class="code" href="../../d1/d8/struct__KTHREAD.html#o18">00584</a>     <a class="code" href="../../d0/d9/ntosdef_8h.html#a39">KPROCESSOR_MODE</a> <a class="code" href="../../d1/d8/struct__KTHREAD.html#o18">WaitMode</a>;
<a name="l00585"></a><a class="code" href="../../d1/d8/struct__KTHREAD.html#o19">00585</a>     BOOLEAN <a class="code" href="../../d1/d8/struct__KTHREAD.html#o19">WaitNext</a>;
<a name="l00586"></a><a class="code" href="../../d1/d8/struct__KTHREAD.html#o20">00586</a>     UCHAR <a class="code" href="../../d1/d8/struct__KTHREAD.html#o20">WaitReason</a>;
<a name="l00587"></a><a class="code" href="../../d1/d8/struct__KTHREAD.html#o21">00587</a>     <a class="code" href="../../d4/d9/ke_8h.html#a61">PRKWAIT_BLOCK</a> <a class="code" href="../../d1/d8/struct__KTHREAD.html#o21">WaitBlockList</a>;
<a name="l00588"></a><a class="code" href="../../d1/d8/struct__KTHREAD.html#o22">00588</a>     LIST_ENTRY <a class="code" href="../../d1/d8/struct__KTHREAD.html#o22">WaitListEntry</a>;
<a name="l00589"></a><a class="code" href="../../d1/d8/struct__KTHREAD.html#o23">00589</a>     ULONG <a class="code" href="../../d1/d8/struct__KTHREAD.html#o23">WaitTime</a>;
<a name="l00590"></a><a class="code" href="../../d1/d8/struct__KTHREAD.html#o24">00590</a>     SCHAR <a class="code" href="../../d1/d8/struct__KTHREAD.html#o24">BasePriority</a>;
<a name="l00591"></a><a class="code" href="../../d1/d8/struct__KTHREAD.html#o25">00591</a>     UCHAR <a class="code" href="../../d1/d8/struct__KTHREAD.html#o25">DecrementCount</a>;
<a name="l00592"></a><a class="code" href="../../d1/d8/struct__KTHREAD.html#o26">00592</a>     SCHAR <a class="code" href="../../d1/d8/struct__KTHREAD.html#o26">PriorityDecrement</a>;
<a name="l00593"></a><a class="code" href="../../d1/d8/struct__KTHREAD.html#o27">00593</a>     SCHAR <a class="code" href="../../d1/d8/struct__KTHREAD.html#o27">Quantum</a>;
<a name="l00594"></a><a class="code" href="../../d1/d8/struct__KTHREAD.html#o28">00594</a>     <a class="code" href="../../d4/d8/struct__KWAIT__BLOCK.html">KWAIT_BLOCK</a> <a class="code" href="../../d1/d8/struct__KTHREAD.html#o28">WaitBlock</a>[<a class="code" href="../../d4/d9/ke_8h.html#a6">THREAD_WAIT_OBJECTS</a> + 1];
<a name="l00595"></a><a class="code" href="../../d1/d8/struct__KTHREAD.html#o29">00595</a>     PVOID <a class="code" href="../../d1/d8/struct__KTHREAD.html#o29">LegoData</a>;
<a name="l00596"></a><a class="code" href="../../d1/d8/struct__KTHREAD.html#o30">00596</a>     ULONG <a class="code" href="../../d1/d8/struct__KTHREAD.html#o30">KernelApcDisable</a>;
<a name="l00597"></a><a class="code" href="../../d1/d8/struct__KTHREAD.html#o31">00597</a>     KAFFINITY <a class="code" href="../../d1/d8/struct__KTHREAD.html#o31">UserAffinity</a>;
<a name="l00598"></a><a class="code" href="../../d1/d8/struct__KTHREAD.html#o32">00598</a>     BOOLEAN <a class="code" href="../../d1/d8/struct__KTHREAD.html#o32">SystemAffinityActive</a>;
<a name="l00599"></a><a class="code" href="../../d1/d8/struct__KTHREAD.html#o33">00599</a>     UCHAR <a class="code" href="../../d1/d8/struct__KTHREAD.html#o33">PowerState</a>;
<a name="l00600"></a><a class="code" href="../../d1/d8/struct__KTHREAD.html#o34">00600</a>     UCHAR <a class="code" href="../../d1/d8/struct__KTHREAD.html#o34">NpxIrql</a>;
<a name="l00601"></a><a class="code" href="../../d1/d8/struct__KTHREAD.html#o35">00601</a>     UCHAR <a class="code" href="../../d1/d8/struct__KTHREAD.html#o35">Pad</a>[1];
<a name="l00602"></a><a class="code" href="../../d1/d8/struct__KTHREAD.html#o36">00602</a>     PVOID <a class="code" href="../../d1/d8/struct__KTHREAD.html#o36">ServiceTable</a>;
00603 <span class="comment">//    struct _ECHANNEL *Channel;</span>
00604 <span class="comment">//    PVOID Section;</span>
00605 <span class="comment">//    PCHANNEL_MESSAGE SystemView;</span>
00606 <span class="comment">//    PCHANNEL_MESSAGE ThreadView;</span>
00607 
00608     <span class="comment">//</span>
00609     <span class="comment">// The following fields are referenced during queue operations.</span>
00610     <span class="comment">//</span>
00611 
<a name="l00612"></a><a class="code" href="../../d1/d8/struct__KTHREAD.html#o37">00612</a>     <a class="code" href="../../d4/d9/ke_8h.html#a92">PRKQUEUE</a> <a class="code" href="../../d1/d8/struct__KTHREAD.html#o37">Queue</a>;
<a name="l00613"></a><a class="code" href="../../d1/d8/struct__KTHREAD.html#o38">00613</a>     KSPIN_LOCK <a class="code" href="../../d1/d8/struct__KTHREAD.html#o38">ApcQueueLock</a>;
<a name="l00614"></a><a class="code" href="../../d1/d8/struct__KTHREAD.html#o39">00614</a>     <a class="code" href="../../d3/d8/struct__KTIMER.html">KTIMER</a> <a class="code" href="../../d1/d8/struct__KTHREAD.html#o39">Timer</a>;
<a name="l00615"></a><a class="code" href="../../d1/d8/struct__KTHREAD.html#o40">00615</a>     LIST_ENTRY <a class="code" href="../../d1/d8/struct__KTHREAD.html#o40">QueueListEntry</a>;
00616 
00617     <span class="comment">//</span>
00618     <span class="comment">// The following fields are referenced during read and find ready</span>
00619     <span class="comment">// thread.</span>
00620     <span class="comment">//</span>
00621 
<a name="l00622"></a><a class="code" href="../../d1/d8/struct__KTHREAD.html#o41">00622</a>     KAFFINITY <a class="code" href="../../d1/d8/struct__KTHREAD.html#o41">Affinity</a>;
<a name="l00623"></a><a class="code" href="../../d1/d8/struct__KTHREAD.html#o42">00623</a>     BOOLEAN <a class="code" href="../../d1/d8/struct__KTHREAD.html#o42">Preempted</a>;
<a name="l00624"></a><a class="code" href="../../d1/d8/struct__KTHREAD.html#o43">00624</a>     BOOLEAN <a class="code" href="../../d1/d8/struct__KTHREAD.html#o43">ProcessReadyQueue</a>;
<a name="l00625"></a><a class="code" href="../../d1/d8/struct__KTHREAD.html#o44">00625</a>     BOOLEAN <a class="code" href="../../d1/d8/struct__KTHREAD.html#o44">KernelStackResident</a>;
<a name="l00626"></a><a class="code" href="../../d1/d8/struct__KTHREAD.html#o45">00626</a>     UCHAR <a class="code" href="../../d1/d8/struct__KTHREAD.html#o45">NextProcessor</a>;
00627 
00628     <span class="comment">//</span>
00629     <span class="comment">// The following fields are referenced during system calls.</span>
00630     <span class="comment">//</span>
00631 
<a name="l00632"></a><a class="code" href="../../d1/d8/struct__KTHREAD.html#o46">00632</a>     PVOID <a class="code" href="../../d1/d8/struct__KTHREAD.html#o46">CallbackStack</a>;
00633 <span class="preprocessor">#if defined(_IA64_)</span>
00634 <span class="preprocessor"></span>    PVOID CallbackBStore;
00635 <span class="preprocessor">#endif</span>
<a name="l00636"></a><a class="code" href="../../d1/d8/struct__KTHREAD.html#o47">00636</a> <span class="preprocessor"></span>    PVOID <a class="code" href="../../d1/d8/struct__KTHREAD.html#o47">Win32Thread</a>;
<a name="l00637"></a><a class="code" href="../../d1/d8/struct__KTHREAD.html#o48">00637</a>     PKTRAP_FRAME TrapFrame;
<a name="l00638"></a><a class="code" href="../../d1/d8/struct__KTHREAD.html#o49">00638</a>     <a class="code" href="../../d4/d9/ke_8h.html#a55">PKAPC_STATE</a> <a class="code" href="../../d1/d8/struct__KTHREAD.html#o49">ApcStatePointer</a>[2];
<a name="l00639"></a><a class="code" href="../../d1/d8/struct__KTHREAD.html#o50">00639</a>     CCHAR PreviousMode;
<a name="l00640"></a><a class="code" href="../../d1/d8/struct__KTHREAD.html#o51">00640</a>     UCHAR <a class="code" href="../../d1/d8/struct__KTHREAD.html#o51">EnableStackSwap</a>;
<a name="l00641"></a><a class="code" href="../../d1/d8/struct__KTHREAD.html#o52">00641</a>     UCHAR <a class="code" href="../../d1/d8/struct__KTHREAD.html#o52">LargeStack</a>;
<a name="l00642"></a><a class="code" href="../../d1/d8/struct__KTHREAD.html#o53">00642</a>     UCHAR <a class="code" href="../../d1/d8/struct__KTHREAD.html#o53">ResourceIndex</a>;
00643 
00644     <span class="comment">//</span>
00645     <span class="comment">// The following entries are referenced during clock interrupts.</span>
00646     <span class="comment">//</span>
00647 
<a name="l00648"></a><a class="code" href="../../d1/d8/struct__KTHREAD.html#o54">00648</a>     ULONG <a class="code" href="../../d1/d8/struct__KTHREAD.html#o54">KernelTime</a>;
<a name="l00649"></a><a class="code" href="../../d1/d8/struct__KTHREAD.html#o55">00649</a>     ULONG <a class="code" href="../../d1/d8/struct__KTHREAD.html#o55">UserTime</a>;
00650 
00651     <span class="comment">//</span>
00652     <span class="comment">// The following fields are referenced during APC queuing and process</span>
00653     <span class="comment">// attach/detach.</span>
00654     <span class="comment">//</span>
00655 
<a name="l00656"></a><a class="code" href="../../d1/d8/struct__KTHREAD.html#o56">00656</a>     <a class="code" href="../../d3/d5/struct__KAPC__STATE.html">KAPC_STATE</a> <a class="code" href="../../d1/d8/struct__KTHREAD.html#o56">SavedApcState</a>;
<a name="l00657"></a><a class="code" href="../../d1/d8/struct__KTHREAD.html#o57">00657</a>     BOOLEAN <a class="code" href="../../d1/d8/struct__KTHREAD.html#o57">Alertable</a>;
<a name="l00658"></a><a class="code" href="../../d1/d8/struct__KTHREAD.html#o58">00658</a>     UCHAR <a class="code" href="../../d1/d8/struct__KTHREAD.html#o58">ApcStateIndex</a>;
<a name="l00659"></a><a class="code" href="../../d1/d8/struct__KTHREAD.html#o59">00659</a>     BOOLEAN <a class="code" href="../../d1/d8/struct__KTHREAD.html#o59">ApcQueueable</a>;
<a name="l00660"></a><a class="code" href="../../d1/d8/struct__KTHREAD.html#o60">00660</a>     BOOLEAN <a class="code" href="../../d1/d8/struct__KTHREAD.html#o60">AutoAlignment</a>;
00661 
00662     <span class="comment">//</span>
00663     <span class="comment">// The following fields are referenced when the thread is initialized</span>
00664     <span class="comment">// and very infrequently thereafter.</span>
00665     <span class="comment">//</span>
00666 
<a name="l00667"></a><a class="code" href="../../d1/d8/struct__KTHREAD.html#o61">00667</a>     PVOID <a class="code" href="../../d1/d8/struct__KTHREAD.html#o61">StackBase</a>;
<a name="l00668"></a><a class="code" href="../../d1/d8/struct__KTHREAD.html#o62">00668</a>     <a class="code" href="../../d1/d5/struct__KAPC.html">KAPC</a> <a class="code" href="../../d1/d8/struct__KTHREAD.html#o62">SuspendApc</a>;
<a name="l00669"></a><a class="code" href="../../d1/d8/struct__KTHREAD.html#o63">00669</a>     <a class="code" href="../../d8/d7/struct__KSEMAPHORE.html">KSEMAPHORE</a> <a class="code" href="../../d1/d8/struct__KTHREAD.html#o63">SuspendSemaphore</a>;
<a name="l00670"></a><a class="code" href="../../d1/d8/struct__KTHREAD.html#o64">00670</a>     LIST_ENTRY <a class="code" href="../../d1/d8/struct__KTHREAD.html#o64">ThreadListEntry</a>;
00671 
00672     <span class="comment">//</span>
00673     <span class="comment">// N.B. The below four UCHARs share the same DWORD and are modified</span>
00674     <span class="comment">//      by other threads. Therefore, they must ALWAYS be modified</span>
00675     <span class="comment">//      under the dispatcher lock to prevent granularity problems</span>
00676     <span class="comment">//      on Alpha machines.</span>
00677     <span class="comment">//</span>
00678 
<a name="l00679"></a><a class="code" href="../../d1/d8/struct__KTHREAD.html#o65">00679</a>     CCHAR <a class="code" href="../../d1/d8/struct__KTHREAD.html#o65">FreezeCount</a>;
<a name="l00680"></a><a class="code" href="../../d1/d8/struct__KTHREAD.html#o66">00680</a>     CCHAR <a class="code" href="../../d1/d8/struct__KTHREAD.html#o66">SuspendCount</a>;
<a name="l00681"></a><a class="code" href="../../d1/d8/struct__KTHREAD.html#o67">00681</a>     UCHAR <a class="code" href="../../d1/d8/struct__KTHREAD.html#o67">IdealProcessor</a>;
<a name="l00682"></a><a class="code" href="../../d1/d8/struct__KTHREAD.html#o68">00682</a>     UCHAR <a class="code" href="../../d1/d8/struct__KTHREAD.html#o68">DisableBoost</a>;
00683 
00684 } <a class="code" href="../../d1/d8/struct__KTHREAD.html">KTHREAD</a>, *<a class="code" href="../../d1/d8/struct__KTHREAD.html">PKTHREAD</a>, *RESTRICTED_POINTER <a class="code" href="../../d1/d8/struct__KTHREAD.html">PRKTHREAD</a>;
00685 
00686 <span class="comment">//</span>
00687 <span class="comment">// Process object structure definition</span>
00688 <span class="comment">//</span>
00689 
<a name="l00690"></a><a class="code" href="../../d5/d7/struct__KPROCESS.html">00690</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d5/d7/struct__KPROCESS.html">_KPROCESS</a> {
00691 
00692     <span class="comment">//</span>
00693     <span class="comment">// The dispatch header and profile listhead are fairly infrequently</span>
00694     <span class="comment">// referenced, but pad the process to a 32-byte boundary (assumption</span>
00695     <span class="comment">// that pool block allocation is in units of 32-bytes).</span>
00696     <span class="comment">//</span>
00697 
<a name="l00698"></a><a class="code" href="../../d5/d7/struct__KPROCESS.html#o0">00698</a>     <a class="code" href="../../d1/d6/struct__DISPATCHER__HEADER.html">DISPATCHER_HEADER</a> <a class="code" href="../../d5/d7/struct__KPROCESS.html#o0">Header</a>;
<a name="l00699"></a><a class="code" href="../../d5/d7/struct__KPROCESS.html#o1">00699</a>     LIST_ENTRY <a class="code" href="../../d5/d7/struct__KPROCESS.html#o1">ProfileListHead</a>;
00700 
00701     <span class="comment">//</span>
00702     <span class="comment">// The following fields are referenced during context switches.</span>
00703     <span class="comment">//</span>
00704 
<a name="l00705"></a><a class="code" href="../../d5/d7/struct__KPROCESS.html#o2">00705</a>     ULONG_PTR <a class="code" href="../../d5/d7/struct__KPROCESS.html#o2">DirectoryTableBase</a>[2];
00706 
00707 <span class="preprocessor">#if defined(_X86_)</span>
00708 <span class="preprocessor"></span>
00709     KGDTENTRY LdtDescriptor;
00710     KIDTENTRY Int21Descriptor;
00711     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> IopmOffset;
00712     UCHAR Iopl;
00713     BOOLEAN VdmFlag;
00714 
00715 <span class="preprocessor">#endif</span>
00716 <span class="preprocessor"></span>
00717 <span class="preprocessor">#if defined(_IA64_)</span>
00718 <span class="preprocessor"></span>
00719     KGDTENTRY LdtDescriptor;
00720     ULONGLONG UnscrambledLdtDescriptor;
00721     KIDTENTRY Int21Descriptor;
00722     BOOLEAN VdmFlag;
00723 
00724     REGION_MAP_INFO ProcessRegion;
00725     REGION_MAP_INFO SessionRegion;
00726     PREGION_MAP_INFO SessionMapInfo;
00727     ULONG_PTR SessionParentBase;
00728 
00729 <span class="preprocessor">#endif // _IA64_</span>
00730 <span class="preprocessor"></span>
00731 <span class="preprocessor">#if defined(_ALPHA_)</span>
00732 <span class="preprocessor"></span>
00733     <span class="keyword">union </span>{
00734         <span class="keyword">struct </span>{
00735             KAFFINITY <a class="code" href="../../d5/d7/struct__KPROCESS.html#o3">ActiveProcessors</a>;
00736             KAFFINITY RunOnProcessors;
00737         };
00738 
00739         ULONGLONG Alignment;
00740     };
00741 
00742     ULONGLONG ProcessSequence;
00743     ULONG ProcessAsn;
00744 
00745 <span class="preprocessor">#else</span>
00746 <span class="preprocessor"></span>
<a name="l00747"></a><a class="code" href="../../d5/d7/struct__KPROCESS.html#o3">00747</a>     KAFFINITY <a class="code" href="../../d5/d7/struct__KPROCESS.html#o3">ActiveProcessors</a>;
00748 
00749 <span class="preprocessor">#endif</span>
00750 <span class="preprocessor"></span>
00751     <span class="comment">//</span>
00752     <span class="comment">// The following fields are referenced during clock interrupts.</span>
00753     <span class="comment">//</span>
00754 
<a name="l00755"></a><a class="code" href="../../d5/d7/struct__KPROCESS.html#o4">00755</a>     ULONG <a class="code" href="../../d5/d7/struct__KPROCESS.html#o4">KernelTime</a>;
<a name="l00756"></a><a class="code" href="../../d5/d7/struct__KPROCESS.html#o5">00756</a>     ULONG <a class="code" href="../../d5/d7/struct__KPROCESS.html#o5">UserTime</a>;
00757 
00758     <span class="comment">//</span>
00759     <span class="comment">// The following fields are referenced infrequently.</span>
00760     <span class="comment">//</span>
00761 
<a name="l00762"></a><a class="code" href="../../d5/d7/struct__KPROCESS.html#o6">00762</a>     LIST_ENTRY <a class="code" href="../../d5/d7/struct__KPROCESS.html#o6">ReadyListHead</a>;
<a name="l00763"></a><a class="code" href="../../d5/d7/struct__KPROCESS.html#o7">00763</a>     LIST_ENTRY <a class="code" href="../../d5/d7/struct__KPROCESS.html#o7">SwapListEntry</a>;
<a name="l00764"></a><a class="code" href="../../d5/d7/struct__KPROCESS.html#o8">00764</a>     LIST_ENTRY <a class="code" href="../../d5/d7/struct__KPROCESS.html#o8">ThreadListHead</a>;
<a name="l00765"></a><a class="code" href="../../d5/d7/struct__KPROCESS.html#o9">00765</a>     KSPIN_LOCK <a class="code" href="../../d5/d7/struct__KPROCESS.html#o9">ProcessLock</a>;
<a name="l00766"></a><a class="code" href="../../d5/d7/struct__KPROCESS.html#o10">00766</a>     KAFFINITY <a class="code" href="../../d5/d7/struct__KPROCESS.html#o10">Affinity</a>;
<a name="l00767"></a><a class="code" href="../../d5/d7/struct__KPROCESS.html#o11">00767</a>     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> <a class="code" href="../../d5/d7/struct__KPROCESS.html#o11">StackCount</a>;
<a name="l00768"></a><a class="code" href="../../d5/d7/struct__KPROCESS.html#o12">00768</a>     SCHAR <a class="code" href="../../d5/d7/struct__KPROCESS.html#o12">BasePriority</a>;
<a name="l00769"></a><a class="code" href="../../d5/d7/struct__KPROCESS.html#o13">00769</a>     SCHAR <a class="code" href="../../d5/d7/struct__KPROCESS.html#o13">ThreadQuantum</a>;
<a name="l00770"></a><a class="code" href="../../d5/d7/struct__KPROCESS.html#o14">00770</a>     BOOLEAN <a class="code" href="../../d5/d7/struct__KPROCESS.html#o14">AutoAlignment</a>;
<a name="l00771"></a><a class="code" href="../../d5/d7/struct__KPROCESS.html#o15">00771</a>     UCHAR <a class="code" href="../../d5/d7/struct__KPROCESS.html#o15">State</a>;
<a name="l00772"></a><a class="code" href="../../d5/d7/struct__KPROCESS.html#o16">00772</a>     UCHAR <a class="code" href="../../d5/d7/struct__KPROCESS.html#o16">ThreadSeed</a>;
<a name="l00773"></a><a class="code" href="../../d5/d7/struct__KPROCESS.html#o17">00773</a>     BOOLEAN <a class="code" href="../../d5/d7/struct__KPROCESS.html#o17">DisableBoost</a>;
<a name="l00774"></a><a class="code" href="../../d5/d7/struct__KPROCESS.html#o18">00774</a>     UCHAR <a class="code" href="../../d5/d7/struct__KPROCESS.html#o18">PowerState</a>;
<a name="l00775"></a><a class="code" href="../../d5/d7/struct__KPROCESS.html#o19">00775</a>     BOOLEAN <a class="code" href="../../d5/d7/struct__KPROCESS.html#o19">DisableQuantum</a>;
<a name="l00776"></a><a class="code" href="../../d5/d7/struct__KPROCESS.html#o20">00776</a>     UCHAR <a class="code" href="../../d5/d7/struct__KPROCESS.html#o20">Spare</a>[2];
00777 } <a class="code" href="../../d5/d7/struct__KPROCESS.html">KPROCESS</a>, *<a class="code" href="../../d5/d7/struct__KPROCESS.html">PKPROCESS</a>, *RESTRICTED_POINTER <a class="code" href="../../d5/d7/struct__KPROCESS.html">PRKPROCESS</a>;
00778 
00779 <span class="comment">//</span>
00780 <span class="comment">// Profile object structure definition</span>
00781 <span class="comment">//</span>
00782 
<a name="l00783"></a><a class="code" href="../../d6/d7/struct__KPROFILE.html">00783</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d6/d7/struct__KPROFILE.html">_KPROFILE</a> {
<a name="l00784"></a><a class="code" href="../../d6/d7/struct__KPROFILE.html#o0">00784</a>     CSHORT <a class="code" href="../../d6/d7/struct__KPROFILE.html#o0">Type</a>;
<a name="l00785"></a><a class="code" href="../../d6/d7/struct__KPROFILE.html#o1">00785</a>     CSHORT <a class="code" href="../../d8/d7/lh__open_2pi__mem_8h.html#a0">Size</a>;
<a name="l00786"></a><a class="code" href="../../d6/d7/struct__KPROFILE.html#o2">00786</a>     LIST_ENTRY <a class="code" href="../../d6/d7/struct__KPROFILE.html#o2">ProfileListEntry</a>;
<a name="l00787"></a><a class="code" href="../../d6/d7/struct__KPROFILE.html#o3">00787</a>     <a class="code" href="../../d4/d9/ke_8h.html#a103">PKPROCESS</a> <a class="code" href="../../d6/d7/struct__KPROFILE.html#o3">Process</a>;
<a name="l00788"></a><a class="code" href="../../d6/d7/struct__KPROFILE.html#o4">00788</a>     PVOID <a class="code" href="../../d6/d7/struct__KPROFILE.html#o4">RangeBase</a>;
<a name="l00789"></a><a class="code" href="../../d6/d7/struct__KPROFILE.html#o5">00789</a>     PVOID <a class="code" href="../../d6/d7/struct__KPROFILE.html#o5">RangeLimit</a>;
<a name="l00790"></a><a class="code" href="../../d6/d7/struct__KPROFILE.html#o6">00790</a>     ULONG <a class="code" href="../../d6/d7/struct__KPROFILE.html#o6">BucketShift</a>;
<a name="l00791"></a><a class="code" href="../../d6/d7/struct__KPROFILE.html#o7">00791</a>     PVOID <a class="code" href="../../d6/d7/struct__KPROFILE.html#o7">Buffer</a>;
<a name="l00792"></a><a class="code" href="../../d6/d7/struct__KPROFILE.html#o8">00792</a>     ULONG <a class="code" href="../../d6/d7/struct__KPROFILE.html#o8">Segment</a>;
<a name="l00793"></a><a class="code" href="../../d6/d7/struct__KPROFILE.html#o9">00793</a>     KAFFINITY <a class="code" href="../../d6/d7/struct__KPROFILE.html#o9">Affinity</a>;
<a name="l00794"></a><a class="code" href="../../d6/d7/struct__KPROFILE.html#o10">00794</a>     CSHORT <a class="code" href="../../d6/d7/struct__KPROFILE.html#o10">Source</a>;
<a name="l00795"></a><a class="code" href="../../d6/d7/struct__KPROFILE.html#o11">00795</a>     BOOLEAN <a class="code" href="../../d6/d7/struct__KPROFILE.html#o11">Started</a>;
00796 } <a class="code" href="../../d6/d7/struct__KPROFILE.html">KPROFILE</a>, *<a class="code" href="../../d6/d7/struct__KPROFILE.html">PKPROFILE</a>, *RESTRICTED_POINTER <a class="code" href="../../d6/d7/struct__KPROFILE.html">PRKPROFILE</a>;
00797 
00798 <span class="comment">//</span>
00799 <span class="comment">// Define kernel channel object structure and types.</span>
00800 <span class="comment">//</span>
00801 
<a name="l00802"></a><a class="code" href="../../d4/d9/ke_8h.html#a18">00802</a> <span class="preprocessor">#define LISTEN_CHANNEL 0x1</span>
<a name="l00803"></a><a class="code" href="../../d4/d9/ke_8h.html#a19">00803</a> <span class="preprocessor"></span><span class="preprocessor">#define MESSAGE_CHANNEL 0x2</span>
00804 <span class="preprocessor"></span>
<a name="l00805"></a><a class="code" href="../../d4/d9/ke_8h.html#a409">00805</a> <span class="keyword">typedef</span> <span class="keyword">enum</span> <a class="code" href="../../d4/d9/ke_8h.html#a409">_ECHANNEL_STATE</a> {
00806     <a class="code" href="../../d4/d9/ke_8h.html#a409a230">ClientIdle</a>,
00807     <a class="code" href="../../d4/d9/ke_8h.html#a409a231">ClientSendWaitReply</a>,
00808     <a class="code" href="../../d4/d9/ke_8h.html#a409a232">ClientShutdown</a>,
00809     <a class="code" href="../../d4/d9/ke_8h.html#a409a233">ServerIdle</a>,
00810     <a class="code" href="../../d4/d9/ke_8h.html#a409a234">ServerReceiveMessage</a>,
00811     <a class="code" href="../../d4/d9/ke_8h.html#a409a235">ServerShutdown</a>
00812 } <a class="code" href="../../d4/d9/ke_8h.html#a108">ECHANNEL_STATE</a>;
00813 
<a name="l00814"></a><a class="code" href="../../d9/d1/struct__ECHANNEL.html">00814</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d9/d1/struct__ECHANNEL.html">_ECHANNEL</a> {
<a name="l00815"></a><a class="code" href="../../d9/d1/struct__ECHANNEL.html#o0">00815</a>     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> <a class="code" href="../../d9/d1/struct__ECHANNEL.html#o0">Type</a>;
<a name="l00816"></a><a class="code" href="../../d9/d1/struct__ECHANNEL.html#o1">00816</a>     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> <a class="code" href="../../d9/d1/struct__ECHANNEL.html#o1">State</a>;
<a name="l00817"></a><a class="code" href="../../d9/d1/struct__ECHANNEL.html#o2">00817</a>     <a class="code" href="../../d4/d9/ke_8h.html#a103">PKPROCESS</a> <a class="code" href="../../d9/d1/struct__ECHANNEL.html#o2">OwnerProcess</a>;
<a name="l00818"></a><a class="code" href="../../d9/d1/struct__ECHANNEL.html#o3">00818</a>     <a class="code" href="../../d4/d9/ke_8h.html#a100">PKTHREAD</a> <a class="code" href="../../d9/d1/struct__ECHANNEL.html#o3">ClientThread</a>;
<a name="l00819"></a><a class="code" href="../../d9/d1/struct__ECHANNEL.html#o4">00819</a>     <a class="code" href="../../d4/d9/ke_8h.html#a100">PKTHREAD</a> <a class="code" href="../../d9/d1/struct__ECHANNEL.html#o4">ServerThread</a>;
<a name="l00820"></a><a class="code" href="../../d9/d1/struct__ECHANNEL.html#o5">00820</a>     PVOID <a class="code" href="../../d9/d1/struct__ECHANNEL.html#o5">ServerContext</a>;
<a name="l00821"></a><a class="code" href="../../d9/d1/struct__ECHANNEL.html#o6">00821</a>     <span class="keyword">struct </span><a class="code" href="../../d9/d1/struct__ECHANNEL.html">_ECHANNEL</a> *<a class="code" href="../../d9/d1/struct__ECHANNEL.html#o6">ServerChannel</a>;
<a name="l00822"></a><a class="code" href="../../d9/d1/struct__ECHANNEL.html#o7">00822</a>     <a class="code" href="../../d2/d6/struct__KEVENT.html">KEVENT</a> <a class="code" href="../../d9/d1/struct__ECHANNEL.html#o7">ReceiveEvent</a>;
<a name="l00823"></a><a class="code" href="../../d9/d1/struct__ECHANNEL.html#o8">00823</a>     <a class="code" href="../../d2/d6/struct__KEVENT.html">KEVENT</a> <a class="code" href="../../d9/d1/struct__ECHANNEL.html#o8">ClearToSendEvent</a>;
00824 } <a class="code" href="../../d9/d1/struct__ECHANNEL.html">ECHANNEL</a>, *<a class="code" href="../../d9/d1/struct__ECHANNEL.html">PECHANNEL</a>, *RESTRICTED_POINTER <a class="code" href="../../d9/d1/struct__ECHANNEL.html">PRECHANNEL</a>;
00825 
00826 
00827 <span class="comment">//</span>
00828 <span class="comment">// Kernel control object functions</span>
00829 <span class="comment">//</span>
00830 <span class="comment">// APC object</span>
00831 <span class="comment">//</span>
00832 
00833 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
00834 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00835 <a class="code" href="../../d5/d7/apcobj_8c.html#a1">KeInitializeApc</a> (
00836     IN <a class="code" href="../../d1/d5/struct__KAPC.html">PRKAPC</a> Apc,
00837     IN PRKTHREAD Thread,
00838     IN KAPC_ENVIRONMENT Environment,
00839     IN PKKERNEL_ROUTINE KernelRoutine,
00840     IN PKRUNDOWN_ROUTINE RundownRoutine OPTIONAL,
00841     IN PKNORMAL_ROUTINE NormalRoutine OPTIONAL,
00842     IN KPROCESSOR_MODE ProcessorMode OPTIONAL,
00843     IN PVOID NormalContext OPTIONAL
00844     );
00845 
00846 PLIST_ENTRY
00847 <a class="code" href="../../d5/d7/apcobj_8c.html#a2">KeFlushQueueApc</a> (
00848     IN PKTHREAD Thread,
00849     IN KPROCESSOR_MODE ProcessorMode
00850     );
00851 
00852 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
00853 BOOLEAN
00854 <a class="code" href="../../d5/d7/apcobj_8c.html#a3">KeInsertQueueApc</a> (
00855     IN <a class="code" href="../../d1/d5/struct__KAPC.html">PRKAPC</a> Apc,
00856     IN PVOID SystemArgument1,
00857     IN PVOID SystemArgument2,
00858     IN KPRIORITY Increment
00859     );
00860 
00861 BOOLEAN
00862 <a class="code" href="../../d5/d7/apcobj_8c.html#a4">KeRemoveQueueApc</a> (
00863     IN <a class="code" href="../../d1/d5/struct__KAPC.html">PKAPC</a> Apc
00864     );
00865 
00866 <span class="comment">// begin_ntddk begin_wdm begin_nthal begin_ntifs</span>
00867 <span class="comment">//</span>
00868 <span class="comment">// DPC object</span>
00869 <span class="comment">//</span>
00870 
00871 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
00872 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00873 <a class="code" href="../../d4/d1/dpcobj_8c.html#a1">KeInitializeDpc</a> (
00874     IN <a class="code" href="../../d1/d6/struct__KDPC.html">PRKDPC</a> Dpc,
00875     IN PKDEFERRED_ROUTINE DeferredRoutine,
00876     IN PVOID DeferredContext
00877     );
00878 
00879 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
00880 BOOLEAN
00881 <a class="code" href="../../d4/d1/dpcobj_8c.html#a2">KeInsertQueueDpc</a> (
00882     IN <a class="code" href="../../d1/d6/struct__KDPC.html">PRKDPC</a> Dpc,
00883     IN PVOID SystemArgument1,
00884     IN PVOID SystemArgument2
00885     );
00886 
00887 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
00888 BOOLEAN
00889 <a class="code" href="../../d4/d1/dpcobj_8c.html#a3">KeRemoveQueueDpc</a> (
00890     IN <a class="code" href="../../d1/d6/struct__KDPC.html">PRKDPC</a> Dpc
00891     );
00892 
00893 <span class="comment">// end_wdm</span>
00894 
00895 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
00896 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00897 <a class="code" href="../../d4/d1/dpcobj_8c.html#a4">KeSetImportanceDpc</a> (
00898     IN <a class="code" href="../../d1/d6/struct__KDPC.html">PRKDPC</a> Dpc,
00899     IN KDPC_IMPORTANCE Importance
00900     );
00901 
00902 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
00903 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00904 <a class="code" href="../../d4/d1/dpcobj_8c.html#a5">KeSetTargetProcessorDpc</a> (
00905     IN <a class="code" href="../../d1/d6/struct__KDPC.html">PRKDPC</a> Dpc,
00906     IN CCHAR Number
00907     );
00908 
00909 <span class="comment">// begin_wdm</span>
00910 <span class="comment">//</span>
00911 <span class="comment">// Device queue object</span>
00912 <span class="comment">//</span>
00913 
00914 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
00915 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00916 <a class="code" href="../../d7/d7/devquobj_8c.html#a1">KeInitializeDeviceQueue</a> (
00917     IN PKDEVICE_QUEUE DeviceQueue
00918     );
00919 
00920 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
00921 BOOLEAN
00922 <a class="code" href="../../d7/d7/devquobj_8c.html#a2">KeInsertDeviceQueue</a> (
00923     IN PKDEVICE_QUEUE DeviceQueue,
00924     IN PKDEVICE_QUEUE_ENTRY DeviceQueueEntry
00925     );
00926 
00927 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
00928 BOOLEAN
00929 <a class="code" href="../../d7/d7/devquobj_8c.html#a3">KeInsertByKeyDeviceQueue</a> (
00930     IN PKDEVICE_QUEUE DeviceQueue,
00931     IN PKDEVICE_QUEUE_ENTRY DeviceQueueEntry,
00932     IN ULONG SortKey
00933     );
00934 
00935 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
00936 <a class="code" href="../../d4/d9/ke_8h.html#a72">PKDEVICE_QUEUE_ENTRY</a>
00937 <a class="code" href="../../d7/d7/devquobj_8c.html#a4">KeRemoveDeviceQueue</a> (
00938     IN PKDEVICE_QUEUE DeviceQueue
00939     );
00940 
00941 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
00942 <a class="code" href="../../d4/d9/ke_8h.html#a72">PKDEVICE_QUEUE_ENTRY</a>
00943 <a class="code" href="../../d7/d7/devquobj_8c.html#a5">KeRemoveByKeyDeviceQueue</a> (
00944     IN PKDEVICE_QUEUE DeviceQueue,
00945     IN ULONG SortKey
00946     );
00947 
00948 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
00949 BOOLEAN
00950 <a class="code" href="../../d7/d7/devquobj_8c.html#a6">KeRemoveEntryDeviceQueue</a> (
00951     IN PKDEVICE_QUEUE DeviceQueue,
00952     IN PKDEVICE_QUEUE_ENTRY DeviceQueueEntry
00953     );
00954 
00955 <span class="comment">// end_ntddk end_wdm end_nthal end_ntifs</span>
00956 
00957 <span class="comment">//</span>
00958 <span class="comment">// Interrupt object</span>
00959 <span class="comment">//</span>
00960 
00961 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>                                         <span class="comment">// nthal</span>
00962 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>                                                <span class="comment">// nthal</span>
00963 <a class="code" href="../../d7/d4/ppc_2intobj_8c.html#a0">KeInitializeInterrupt</a> (                             <span class="comment">// nthal</span>
00964     IN <a class="code" href="../../d0/d7/struct__KINTERRUPT.html">PKINTERRUPT</a> Interrupt,                       <span class="comment">// nthal</span>
00965     IN PKSERVICE_ROUTINE ServiceRoutine,            <span class="comment">// nthal</span>
00966     IN PVOID ServiceContext,                        <span class="comment">// nthal</span>
00967     IN PKSPIN_LOCK SpinLock OPTIONAL,               <span class="comment">// nthal</span>
00968     IN ULONG Vector,                                <span class="comment">// nthal</span>
00969     IN KIRQL Irql,                                  <span class="comment">// nthal</span>
00970     IN KIRQL SynchronizeIrql,                       <span class="comment">// nthal</span>
00971     IN KINTERRUPT_MODE InterruptMode,               <span class="comment">// nthal</span>
00972     IN BOOLEAN ShareVector,                         <span class="comment">// nthal</span>
00973     IN CCHAR ProcessorNumber,                       <span class="comment">// nthal</span>
00974     IN BOOLEAN FloatingSave                         <span class="comment">// nthal</span>
00975     );                                              <span class="comment">// nthal</span>
00976                                                     <span class="comment">// nthal</span>
00977 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>                                         <span class="comment">// nthal</span>
00978 BOOLEAN                                             <span class="comment">// nthal</span>
00979 <a class="code" href="../../d7/d4/ppc_2intobj_8c.html#a1">KeConnectInterrupt</a> (                                <span class="comment">// nthal</span>
00980     IN <a class="code" href="../../d0/d7/struct__KINTERRUPT.html">PKINTERRUPT</a> Interrupt                        <span class="comment">// nthal</span>
00981     );                                              <span class="comment">// nthal</span>
00982                                                     <span class="comment">// nthal</span>
00983 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
00984 BOOLEAN
00985 <a class="code" href="../../d7/d4/ppc_2intobj_8c.html#a2">KeDisconnectInterrupt</a> (
00986     IN <a class="code" href="../../d0/d7/struct__KINTERRUPT.html">PKINTERRUPT</a> Interrupt
00987     );
00988 
00989 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>                                         <span class="comment">// ntddk wdm nthal</span>
00990 BOOLEAN                                             <span class="comment">// ntddk wdm nthal</span>
00991 <a class="code" href="../../d4/d9/ke_8h.html#a273">KeSynchronizeExecution</a> (                            <span class="comment">// ntddk wdm nthal</span>
00992     IN <a class="code" href="../../d0/d7/struct__KINTERRUPT.html">PKINTERRUPT</a> Interrupt,                       <span class="comment">// ntddk wdm nthal</span>
00993     IN <a class="code" href="../../d0/d9/ntosdef_8h.html#a44">PKSYNCHRONIZE_ROUTINE</a> SynchronizeRoutine,    <span class="comment">// ntddk wdm nthal</span>
00994     IN PVOID SynchronizeContext                     <span class="comment">// ntddk wdm nthal</span>
00995     );                                              <span class="comment">// ntddk wdm nthal</span>
00996                                                     <span class="comment">// ntddk wdm nthal</span>
00997 <span class="comment">//</span>
00998 <span class="comment">// Profile object</span>
00999 <span class="comment">//</span>
01000 
01001 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01002 <a class="code" href="../../d0/d8/profobj_8c.html#a5">KeInitializeProfile</a> (
01003     IN PKPROFILE Profile,
01004     IN PKPROCESS Process OPTIONAL,
01005     IN PVOID RangeBase,
01006     IN SIZE_T RangeSize,
01007     IN ULONG BucketSize,
01008     IN ULONG Segment,
01009     IN KPROFILE_SOURCE ProfileSource,
01010     IN KAFFINITY Affinity
01011     );
01012 
01013 BOOLEAN
01014 <a class="code" href="../../d0/d8/profobj_8c.html#a8">KeStartProfile</a> (
01015     IN PKPROFILE Profile,
01016     IN PULONG Buffer
01017     );
01018 
01019 BOOLEAN
01020 <a class="code" href="../../d0/d8/profobj_8c.html#a9">KeStopProfile</a> (
01021     IN PKPROFILE Profile
01022     );
01023 
01024 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01025 <a class="code" href="../../d0/d8/profobj_8c.html#a7">KeSetIntervalProfile</a> (
01026     IN ULONG Interval,
01027     IN KPROFILE_SOURCE Source
01028     );
01029 
01030 ULONG
01031 <a class="code" href="../../d0/d8/profobj_8c.html#a6">KeQueryIntervalProfile</a> (
01032     IN KPROFILE_SOURCE Source
01033     );
01034 
01035 <span class="comment">// begin_ntddk begin_wdm begin_nthal begin_ntifs</span>
01036 <span class="comment">//</span>
01037 <span class="comment">// Kernel dispatcher object functions</span>
01038 <span class="comment">//</span>
01039 <span class="comment">// Event Object</span>
01040 <span class="comment">//</span>
01041 
01042 <span class="comment">//  end_wdm end_ntddk end_nthal end_ntifs</span>
01043 
01044 <span class="preprocessor">#if defined(_NTDRIVER_) || defined(_NTDDK_) || defined(_NTIFS_) || defined(_NTHAL_)</span>
01045 <span class="preprocessor"></span>
01046 <span class="comment">//  begin_wdm begin_ntddk begin_nthal begin_ntifs</span>
01047 
01048 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
01049 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01050 <a class="code" href="../../d4/d9/ke_8h.html#a20">KeInitializeEvent</a> (
01051     IN PRKEVENT Event,
01052     IN EVENT_TYPE Type,
01053     IN BOOLEAN State
01054     );
01055 
01056 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
01057 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01058 <a class="code" href="../../d4/d9/ke_8h.html#a21">KeClearEvent</a> (
01059     IN PRKEVENT Event
01060     );
01061 
01062 <span class="comment">//  end_wdm end_ntddk end_nthal end_ntifs</span>
01063 
01064 <span class="preprocessor">#else</span>
01065 <span class="preprocessor"></span>
<a name="l01066"></a><a class="code" href="../../d4/d9/ke_8h.html#a20">01066</a> <span class="preprocessor">#define KeInitializeEvent(_Event, _Type, _State)            \</span>
01067 <span class="preprocessor">    (_Event)-&gt;Header.Type = (UCHAR)_Type;                   \</span>
01068 <span class="preprocessor">    (_Event)-&gt;Header.Size =  sizeof(KEVENT) / sizeof(LONG); \</span>
01069 <span class="preprocessor">    (_Event)-&gt;Header.SignalState = _State;                  \</span>
01070 <span class="preprocessor">    InitializeListHead(&amp;(_Event)-&gt;Header.WaitListHead)</span>
01071 <span class="preprocessor"></span>
<a name="l01072"></a><a class="code" href="../../d4/d9/ke_8h.html#a21">01072</a> <span class="preprocessor">#define KeClearEvent(Event) (Event)-&gt;Header.SignalState = 0</span>
01073 <span class="preprocessor"></span>
01074 <span class="preprocessor">#endif</span>
01075 <span class="preprocessor"></span>
01076 
01077 <span class="comment">// begin_ntddk begin_ntifs</span>
01078 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
01079 LONG
01080 <a class="code" href="../../d2/d8/eventobj_8c.html#a5">KePulseEvent</a> (
01081     IN PRKEVENT Event,
01082     IN KPRIORITY Increment,
01083     IN BOOLEAN Wait
01084     );
01085 <span class="comment">// end_ntddk end_ntifs</span>
01086 
01087 <span class="comment">// begin_ntddk begin_nthal begin_ntifs</span>
01088 
01089 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
01090 LONG
01091 <a class="code" href="../../d2/d8/eventobj_8c.html#a6">KeReadStateEvent</a> (
01092     IN PRKEVENT Event
01093     );
01094 
01095 <span class="comment">//  begin_wdm</span>
01096 
01097 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
01098 LONG
01099 <a class="code" href="../../d2/d8/eventobj_8c.html#a7">KeResetEvent</a> (
01100     IN PRKEVENT Event
01101     );
01102 
01103 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
01104 LONG
01105 <a class="code" href="../../d2/d8/eventobj_8c.html#a8">KeSetEvent</a> (
01106     IN PRKEVENT Event,
01107     IN KPRIORITY Increment,
01108     IN BOOLEAN Wait
01109     );
01110 
01111 <span class="comment">// end_ntddk end_wdm end_nthal end_ntifs</span>
01112 
01113 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01114 <a class="code" href="../../d2/d8/eventobj_8c.html#a9">KeSetEventBoostPriority</a> (
01115     IN PRKEVENT Event,
01116     IN PRKTHREAD *Thread OPTIONAL
01117     );
01118 
01119 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01120 <a class="code" href="../../d2/d8/eventobj_8c.html#a3">KeInitializeEventPair</a> (
01121     IN PKEVENT_PAIR EventPair
01122     );
01123 
<a name="l01124"></a><a class="code" href="../../d4/d9/ke_8h.html#a22">01124</a> <span class="preprocessor">#define KeSetHighEventPair(EventPair, Increment, Wait) \</span>
01125 <span class="preprocessor">    KeSetEvent(&amp;((EventPair)-&gt;EventHigh),              \</span>
01126 <span class="preprocessor">               Increment,                              \</span>
01127 <span class="preprocessor">               Wait)</span>
01128 <span class="preprocessor"></span>
<a name="l01129"></a><a class="code" href="../../d4/d9/ke_8h.html#a23">01129</a> <span class="preprocessor">#define KeSetLowEventPair(EventPair, Increment, Wait)  \</span>
01130 <span class="preprocessor">    KeSetEvent(&amp;((EventPair)-&gt;EventLow),               \</span>
01131 <span class="preprocessor">               Increment,                              \</span>
01132 <span class="preprocessor">               Wait)</span>
01133 <span class="preprocessor"></span>
01134 <span class="comment">//</span>
01135 <span class="comment">// Mutant object</span>
01136 <span class="comment">//</span>
01137 
01138 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
01139 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01140 <a class="code" href="../../d3/d5/mutntobj_8c.html#a1">KeInitializeMutant</a> (
01141     IN PRKMUTANT Mutant,
01142     IN BOOLEAN InitialOwner
01143     );
01144 
01145 LONG
01146 <a class="code" href="../../d3/d5/mutntobj_8c.html#a3">KeReadStateMutant</a> (
01147     IN PRKMUTANT
01148     );
01149 
01150 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
01151 LONG
01152 <a class="code" href="../../d3/d5/mutntobj_8c.html#a4">KeReleaseMutant</a> (
01153     IN PRKMUTANT Mutant,
01154     IN KPRIORITY Increment,
01155     IN BOOLEAN Abandoned,
01156     IN BOOLEAN Wait
01157     );
01158 
01159 <span class="comment">// begin_ntddk begin_wdm begin_nthal begin_ntifs</span>
01160 <span class="comment">//</span>
01161 <span class="comment">// Mutex object</span>
01162 <span class="comment">//</span>
01163 
01164 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
01165 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01166 <a class="code" href="../../d3/d5/mutntobj_8c.html#a2">KeInitializeMutex</a> (
01167     IN PRKMUTEX Mutex,
01168     IN ULONG Level
01169     );
01170 
<a name="l01171"></a><a class="code" href="../../d4/d9/ke_8h.html#a24">01171</a> <span class="preprocessor">#define KeReadStateMutex(Mutex) KeReadStateMutant(Mutex)</span>
01172 <span class="preprocessor"></span>
01173 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
01174 LONG
01175 <a class="code" href="../../d3/d5/mutntobj_8c.html#a5">KeReleaseMutex</a> (
01176     IN PRKMUTEX Mutex,
01177     IN BOOLEAN Wait
01178     );
01179 
01180 <span class="comment">// end_ntddk end_wdm</span>
01181 <span class="comment">//</span>
01182 <span class="comment">// Queue Object.</span>
01183 <span class="comment">//</span>
01184 
01185 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
01186 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01187 <a class="code" href="../../d8/d3/queueobj_8c.html#a1">KeInitializeQueue</a> (
01188     IN PRKQUEUE Queue,
01189     IN ULONG Count OPTIONAL
01190     );
01191 
01192 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
01193 LONG
01194 <a class="code" href="../../d8/d3/queueobj_8c.html#a2">KeReadStateQueue</a> (
01195     IN PRKQUEUE Queue
01196     );
01197 
01198 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
01199 LONG
01200 <a class="code" href="../../d8/d3/queueobj_8c.html#a3">KeInsertQueue</a> (
01201     IN PRKQUEUE Queue,
01202     IN PLIST_ENTRY Entry
01203     );
01204 
01205 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
01206 LONG
01207 <a class="code" href="../../d8/d3/queueobj_8c.html#a4">KeInsertHeadQueue</a> (
01208     IN PRKQUEUE Queue,
01209     IN PLIST_ENTRY Entry
01210     );
01211 
01212 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
01213 PLIST_ENTRY
01214 <a class="code" href="../../d8/d3/queueobj_8c.html#a5">KeRemoveQueue</a> (
01215     IN PRKQUEUE Queue,
01216     IN KPROCESSOR_MODE WaitMode,
01217     IN PLARGE_INTEGER Timeout OPTIONAL
01218     );
01219 
01220 PLIST_ENTRY
01221 <a class="code" href="../../d8/d3/queueobj_8c.html#a6">KeRundownQueue</a> (
01222     IN PRKQUEUE Queue
01223     );
01224 
01225 <span class="comment">// begin_ntddk begin_wdm</span>
01226 <span class="comment">//</span>
01227 <span class="comment">// Semaphore object</span>
01228 <span class="comment">//</span>
01229 
01230 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
01231 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01232 <a class="code" href="../../d1/d6/semphobj_8c.html#a1">KeInitializeSemaphore</a> (
01233     IN PRKSEMAPHORE Semaphore,
01234     IN LONG Count,
01235     IN LONG Limit
01236     );
01237 
01238 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
01239 LONG
01240 <a class="code" href="../../d1/d6/semphobj_8c.html#a2">KeReadStateSemaphore</a> (
01241     IN PRKSEMAPHORE Semaphore
01242     );
01243 
01244 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
01245 LONG
01246 <a class="code" href="../../d1/d6/semphobj_8c.html#a3">KeReleaseSemaphore</a> (
01247     IN PRKSEMAPHORE Semaphore,
01248     IN KPRIORITY Increment,
01249     IN LONG Adjustment,
01250     IN BOOLEAN Wait
01251     );
01252 
01253 <span class="comment">// end_ntddk end_wdm end_nthal end_ntifs</span>
01254 
01255 <span class="comment">//</span>
01256 <span class="comment">// Process object</span>
01257 <span class="comment">//</span>
01258 
01259 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01260 <a class="code" href="../../d3/d5/procobj_8c.html#a3">KeInitializeProcess</a> (
01261     IN PRKPROCESS Process,
01262     IN KPRIORITY Priority,
01263     IN KAFFINITY Affinity,
01264     IN ULONG_PTR DirectoryTableBase[2],
01265     IN BOOLEAN Enable
01266     );
01267 
01268 LOGICAL
01269 <a class="code" href="../../d3/d5/procobj_8c.html#a5">KeForceAttachProcess</a> (
01270     IN PKPROCESS Process
01271     );
01272 
01273 <span class="comment">// begin_ntifs</span>
01274 
01275 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
01276 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01277 <a class="code" href="../../d3/d5/procobj_8c.html#a4">KeAttachProcess</a> (
01278     IN PRKPROCESS Process
01279     );
01280 
01281 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
01282 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01283 <a class="code" href="../../d3/d5/procobj_8c.html#a7">KeDetachProcess</a> (
01284     VOID
01285     );
01286 
01287 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
01288 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01289 <a class="code" href="../../d3/d5/procobj_8c.html#a6">KeStackAttachProcess</a> (
01290     IN PRKPROCESS PROCESS,
01291     OUT PRKAPC_STATE ApcState
01292     );
01293 
01294 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
01295 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01296 <a class="code" href="../../d3/d5/procobj_8c.html#a8">KeUnstackDetachProcess</a> (
01297     IN PRKAPC_STATE ApcState
01298     );
01299 
01300 <span class="comment">// end_ntifs</span>
01301 
<a name="l01302"></a><a class="code" href="../../d4/d9/ke_8h.html#a25">01302</a> <span class="preprocessor">#define KeIsAttachedProcess() \</span>
01303 <span class="preprocessor">    (KeGetCurrentThread()-&gt;ApcStateIndex == AttachedApcEnvironment)</span>
01304 <span class="preprocessor"></span>
01305 LONG
01306 <a class="code" href="../../d3/d5/procobj_8c.html#a9">KeReadStateProcess</a> (
01307     IN PRKPROCESS Process
01308     );
01309 
01310 BOOLEAN
01311 <a class="code" href="../../d8/d1/ppc_2thredini_8c.html#a3">KeSetAutoAlignmentProcess</a> (
01312     IN PRKPROCESS Process,
01313     IN BOOLEAN Enable
01314     );
01315 
01316 LONG
01317 <a class="code" href="../../d3/d5/procobj_8c.html#a10">KeSetProcess</a> (
01318     IN PRKPROCESS Process,
01319     IN KPRIORITY Increment,
01320     IN BOOLEAN Wait
01321     );
01322 
01323 KPRIORITY
01324 <a class="code" href="../../d3/d5/procobj_8c.html#a11">KeSetPriorityProcess</a> (
01325     IN PKPROCESS Process,
01326     IN KPRIORITY BasePriority
01327     );
01328 
01329 LOGICAL
01330 <a class="code" href="../../d3/d5/procobj_8c.html#a12">KeSetDisableQuantumProcess</a> (
01331     IN PKPROCESS Process,
01332     IN LOGICAL Disable
01333     );
01334 
<a name="l01335"></a><a class="code" href="../../d4/d9/ke_8h.html#a26">01335</a> <span class="preprocessor">#define KeTerminateProcess(Process) \</span>
01336 <span class="preprocessor">    (Process)-&gt;StackCount += 1;</span>
01337 <span class="preprocessor"></span>
01338 <span class="comment">//</span>
01339 <span class="comment">// Thread object</span>
01340 <span class="comment">//</span>
01341 
01342 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01343 <a class="code" href="../../d9/d1/thredobj_8c.html#a1">KeInitializeThread</a> (
01344     IN PKTHREAD Thread,
01345     IN PVOID KernelStack,
01346     IN PKSYSTEM_ROUTINE SystemRoutine,
01347     IN PKSTART_ROUTINE StartRoutine OPTIONAL,
01348     IN PVOID StartContext OPTIONAL,
01349     IN PCONTEXT ContextFrame OPTIONAL,
01350     IN PVOID Teb OPTIONAL,
01351     IN PKPROCESS Process
01352     );
01353 
01354 BOOLEAN
01355 <a class="code" href="../../d9/d1/thredobj_8c.html#a2">KeAlertThread</a> (
01356     IN PKTHREAD Thread,
01357     IN KPROCESSOR_MODE ProcessorMode
01358     );
01359 
01360 ULONG
01361 <a class="code" href="../../d9/d1/thredobj_8c.html#a3">KeAlertResumeThread</a> (
01362     IN PKTHREAD Thread
01363     );
01364 
01365 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
01366 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01367 <a class="code" href="../../d2/d7/waitsup_8c.html#a1">KeBoostCurrentThread</a> (
01368     VOID
01369     );
01370 
01371 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01372 <a class="code" href="../../d9/d1/thredobj_8c.html#a4">KeBoostPriorityThread</a> (
01373     IN PKTHREAD Thread,
01374     IN KPRIORITY Increment
01375     );
01376 
01377 KAFFINITY
01378 <a class="code" href="../../d9/d1/thredobj_8c.html#a5">KeConfineThread</a> (
01379     VOID
01380     );
01381 
01382 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>                                         <span class="comment">// ntddk wdm nthal ntifs</span>
01383 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>                                            <span class="comment">// ntddk wdm nthal ntifs</span>
01384 <a class="code" href="../../d1/d7/wait_8c.html#a2">KeDelayExecutionThread</a> (                            <span class="comment">// ntddk wdm nthal ntifs</span>
01385     IN KPROCESSOR_MODE WaitMode,                    <span class="comment">// ntddk wdm nthal ntifs</span>
01386     IN BOOLEAN Alertable,                           <span class="comment">// ntddk wdm nthal ntifs</span>
01387     IN PLARGE_INTEGER Interval                      <span class="comment">// ntddk wdm nthal ntifs</span>
01388     );                                              <span class="comment">// ntddk wdm nthal ntifs</span>
01389                                                     <span class="comment">// ntddk wdm nthal ntifs</span>
01390 BOOLEAN
01391 <a class="code" href="../../d9/d1/thredobj_8c.html#a6">KeDisableApcQueuingThread</a> (
01392     IN PKTHREAD Thread
01393     );
01394 
01395 BOOLEAN
01396 <a class="code" href="../../d9/d1/thredobj_8c.html#a7">KeEnableApcQueuingThread</a> (
01397     IN PKTHREAD
01398     );
01399 
01400 LOGICAL
01401 <a class="code" href="../../d9/d1/thredobj_8c.html#a21">KeSetDisableBoostThread</a> (
01402     IN PKTHREAD Thread,
01403     IN LOGICAL Disable
01404     );
01405 
01406 ULONG
01407 <a class="code" href="../../d9/d1/thredobj_8c.html#a8">KeForceResumeThread</a> (
01408     IN PKTHREAD Thread
01409     );
01410 
01411 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01412 <a class="code" href="../../d9/d1/thredobj_8c.html#a9">KeFreezeAllThreads</a> (
01413     VOID
01414     );
01415 
01416 BOOLEAN
01417 <a class="code" href="../../d9/d1/thredobj_8c.html#a10">KeQueryAutoAlignmentThread</a> (
01418     IN PKTHREAD Thread
01419     );
01420 
01421 LONG
01422 <a class="code" href="../../d9/d1/thredobj_8c.html#a11">KeQueryBasePriorityThread</a> (
01423     IN PKTHREAD Thread
01424     );
01425 
01426 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>                                         <span class="comment">// ntddk wdm nthal ntifs</span>
01427 KPRIORITY                                           <span class="comment">// ntddk wdm nthal ntifs</span>
01428 <a class="code" href="../../d9/d1/thredobj_8c.html#a12">KeQueryPriorityThread</a> (                             <span class="comment">// ntddk wdm nthal ntifs</span>
01429     IN PKTHREAD Thread                              <span class="comment">// ntddk wdm nthal ntifs</span>
01430     );                                              <span class="comment">// ntddk wdm nthal ntifs</span>
01431                                                     <span class="comment">// ntddk wdm nthal ntifs</span>
01432 BOOLEAN
01433 <a class="code" href="../../d9/d1/thredobj_8c.html#a13">KeReadStateThread</a> (
01434     IN PKTHREAD Thread
01435     );
01436 
01437 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01438 <a class="code" href="../../d9/d1/thredobj_8c.html#a14">KeReadyThread</a> (
01439     IN PKTHREAD Thread
01440     );
01441 
01442 ULONG
01443 <a class="code" href="../../d9/d1/thredobj_8c.html#a15">KeResumeThread</a> (
01444     IN PKTHREAD Thread
01445     );
01446 
01447 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>                                                <span class="comment">// nthal</span>
01448 <a class="code" href="../../d9/d1/thredobj_8c.html#a16">KeRevertToUserAffinityThread</a> (                      <span class="comment">// nthal</span>
01449     VOID                                            <span class="comment">// nthal</span>
01450     );                                              <span class="comment">// nthal</span>
01451 
01452 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01453 <a class="code" href="../../d9/d1/thredobj_8c.html#a17">KeRundownThread</a> (
01454     VOID
01455     );
01456 
01457 KAFFINITY
01458 <a class="code" href="../../d9/d1/thredobj_8c.html#a18">KeSetAffinityThread</a> (
01459     IN PKTHREAD Thread,
01460     IN KAFFINITY Affinity
01461     );
01462 
01463 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>                                                <span class="comment">// nthal</span>
01464 <a class="code" href="../../d9/d1/thredobj_8c.html#a19">KeSetSystemAffinityThread</a> (                         <span class="comment">// nthal</span>
01465     IN KAFFINITY Affinity                           <span class="comment">// nthal</span>
01466     );                                              <span class="comment">// nthal</span>
01467 
01468 BOOLEAN
01469 <a class="code" href="../../d8/d1/ppc_2thredini_8c.html#a4">KeSetAutoAlignmentThread</a> (
01470     IN PKTHREAD Thread,
01471     IN BOOLEAN Enable
01472     );
01473 
01474 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>                                         <span class="comment">// ntddk nthal ntifs</span>
01475 LONG                                                <span class="comment">// ntddk nthal ntifs</span>
01476 <a class="code" href="../../d9/d1/thredobj_8c.html#a20">KeSetBasePriorityThread</a> (                           <span class="comment">// ntddk nthal ntifs</span>
01477     IN PKTHREAD Thread,                             <span class="comment">// ntddk nthal ntifs</span>
01478     IN LONG Increment                               <span class="comment">// ntddk nthal ntifs</span>
01479     );                                              <span class="comment">// ntddk nthal ntifs</span>
01480                                                     <span class="comment">// ntddk nthal ntifs</span>
01481 
01482 <span class="comment">// begin_ntsrv</span>
01483 
01484 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
01485 CCHAR
01486 <a class="code" href="../../d9/d1/thredobj_8c.html#a22">KeSetIdealProcessorThread</a> (
01487     IN PKTHREAD Thread,
01488     IN CCHAR Processor
01489     );
01490 
01491 <span class="comment">// end_ntsrv</span>
01492 
01493 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
01494 BOOLEAN
01495 <a class="code" href="../../d9/d1/thredobj_8c.html#a23">KeSetKernelStackSwapEnable</a> (
01496     IN BOOLEAN Enable
01497     );
01498 
01499 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>                                         <span class="comment">// ntddk wdm nthal ntifs</span>
01500 KPRIORITY                                           <span class="comment">// ntddk wdm nthal ntifs</span>
01501 <a class="code" href="../../d9/d1/thredobj_8c.html#a24">KeSetPriorityThread</a> (                               <span class="comment">// ntddk wdm nthal ntifs</span>
01502     IN PKTHREAD Thread,                             <span class="comment">// ntddk wdm nthal ntifs</span>
01503     IN KPRIORITY Priority                           <span class="comment">// ntddk wdm nthal ntifs</span>
01504     );                                              <span class="comment">// ntddk wdm nthal ntifs</span>
01505                                                     <span class="comment">// ntddk wdm nthal ntifs</span>
01506 ULONG
01507 <a class="code" href="../../d9/d1/thredobj_8c.html#a25">KeSuspendThread</a> (
01508     IN PKTHREAD
01509     );
01510 
01511 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
01512 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01513 <a class="code" href="../../d9/d1/thredobj_8c.html#a26">KeTerminateThread</a> (
01514     IN KPRIORITY Increment
01515     );
01516 
01517 BOOLEAN
01518 <a class="code" href="../../d9/d1/thredobj_8c.html#a27">KeTestAlertThread</a> (
01519     IN KPROCESSOR_MODE
01520     );
01521 
01522 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01523 <a class="code" href="../../d9/d1/thredobj_8c.html#a28">KeThawAllThreads</a> (
01524     VOID
01525     );
01526 
01527 <span class="comment">//</span>
01528 <span class="comment">// Define leave critical region macro used for inline and function code</span>
01529 <span class="comment">// generation.</span>
01530 <span class="comment">//</span>
01531 <span class="comment">// Warning: assembly versions of this code are included directly in</span>
01532 <span class="comment">// ntgdi assembly routines mutexs.s for MIPS and locka.asm for i386.</span>
01533 <span class="comment">// Any changes made to KeEnterCriticalRegion/KeEnterCriticalRegion</span>
01534 <span class="comment">// must be reflected in these routines.</span>
01535 <span class="comment">//</span>
01536 
<a name="l01537"></a><a class="code" href="../../d4/d9/ke_8h.html#a27">01537</a> <span class="preprocessor">#define KiLeaveCriticalRegion() {                                       \</span>
01538 <span class="preprocessor">    PKTHREAD Thread;                                                    \</span>
01539 <span class="preprocessor">    Thread = KeGetCurrentThread();                                      \</span>
01540 <span class="preprocessor">    if (((*((volatile ULONG *)&amp;Thread-&gt;KernelApcDisable) += 1) == 0) &amp;&amp; \</span>
01541 <span class="preprocessor">        (((volatile LIST_ENTRY *)&amp;Thread-&gt;ApcState.ApcListHead[KernelMode])-&gt;Flink != \</span>
01542 <span class="preprocessor">         &amp;Thread-&gt;ApcState.ApcListHead[KernelMode])) {                  \</span>
01543 <span class="preprocessor">        Thread-&gt;ApcState.KernelApcPending = TRUE;                       \</span>
01544 <span class="preprocessor">        KiRequestSoftwareInterrupt(APC_LEVEL);                          \</span>
01545 <span class="preprocessor">    }                                                                   \</span>
01546 <span class="preprocessor">}</span>
01547 <span class="preprocessor"></span>
01548 <span class="comment">// begin_ntddk begin_nthal begin_ntifs</span>
01549 
01550 <span class="preprocessor">#if (defined(_NTDRIVER_) || defined(_NTDDK_) || defined(_NTIFS_) || defined(_NTHAL_)) &amp;&amp; !defined(_NTSYSTEM_DRIVER_)</span>
01551 <span class="preprocessor"></span>
01552 <span class="comment">// begin_wdm</span>
01553 
01554 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
01555 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01556 <a class="code" href="../../d4/d9/ke_8h.html#a28">KeEnterCriticalRegion</a> (
01557     VOID
01558     );
01559 
01560 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
01561 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01562 <a class="code" href="../../d4/d9/ke_8h.html#a29">KeLeaveCriticalRegion</a> (
01563     VOID
01564     );
01565 
01566 <span class="comment">// end_wdm</span>
01567 
01568 <span class="preprocessor">#else</span>
01569 <span class="preprocessor"></span>
01570 <span class="comment">//++</span>
01571 <span class="comment">//</span>
01572 <span class="comment">// VOID</span>
01573 <span class="comment">// KeEnterCriticalRegion (</span>
01574 <span class="comment">//    VOID</span>
01575 <span class="comment">//    )</span>
01576 <span class="comment">//</span>
01577 <span class="comment">//</span>
01578 <span class="comment">// Routine Description:</span>
01579 <span class="comment">//</span>
01580 <span class="comment">//    This function disables kernel APC's.</span>
01581 <span class="comment">//</span>
01582 <span class="comment">//    N.B. The following code does not require any interlocks. There are</span>
01583 <span class="comment">//         two cases of interest: 1) On an MP system, the thread cannot</span>
01584 <span class="comment">//         be running on two processors as once, and 2) if the thread is</span>
01585 <span class="comment">//         is interrupted to deliver a kernel mode APC which also calls</span>
01586 <span class="comment">//         this routine, the values read and stored will stack and unstack</span>
01587 <span class="comment">//         properly.</span>
01588 <span class="comment">//</span>
01589 <span class="comment">// Arguments:</span>
01590 <span class="comment">//</span>
01591 <span class="comment">//    None.</span>
01592 <span class="comment">//</span>
01593 <span class="comment">// Return Value:</span>
01594 <span class="comment">//</span>
01595 <span class="comment">//    None.</span>
01596 <span class="comment">//--</span>
01597 
<a name="l01598"></a><a class="code" href="../../d4/d9/ke_8h.html#a28">01598</a> <span class="preprocessor">#define KeEnterCriticalRegion() KeGetCurrentThread()-&gt;KernelApcDisable -= 1;</span>
01599 <span class="preprocessor"></span>
01600 <span class="comment">//++</span>
01601 <span class="comment">//</span>
01602 <span class="comment">// VOID</span>
01603 <span class="comment">// KeLeaveCriticalRegion (</span>
01604 <span class="comment">//    VOID</span>
01605 <span class="comment">//    )</span>
01606 <span class="comment">//</span>
01607 <span class="comment">//</span>
01608 <span class="comment">// Routine Description:</span>
01609 <span class="comment">//</span>
01610 <span class="comment">//    This function enables kernel APC's.</span>
01611 <span class="comment">//</span>
01612 <span class="comment">//    N.B. The following code does not require any interlocks. There are</span>
01613 <span class="comment">//         two cases of interest: 1) On an MP system, the thread cannot</span>
01614 <span class="comment">//         be running on two processors as once, and 2) if the thread is</span>
01615 <span class="comment">//         is interrupted to deliver a kernel mode APC which also calls</span>
01616 <span class="comment">//         this routine, the values read and stored will stack and unstack</span>
01617 <span class="comment">//         properly.</span>
01618 <span class="comment">//</span>
01619 <span class="comment">// Arguments:</span>
01620 <span class="comment">//</span>
01621 <span class="comment">//    None.</span>
01622 <span class="comment">//</span>
01623 <span class="comment">// Return Value:</span>
01624 <span class="comment">//</span>
01625 <span class="comment">//    None.</span>
01626 <span class="comment">//--</span>
01627 
<a name="l01628"></a><a class="code" href="../../d4/d9/ke_8h.html#a29">01628</a> <span class="preprocessor">#define KeLeaveCriticalRegion() KiLeaveCriticalRegion()</span>
01629 <span class="preprocessor"></span>
01630 <span class="preprocessor">#endif</span>
01631 <span class="preprocessor"></span>
01632 <span class="comment">//  begin_wdm</span>
01633 
01634 <span class="comment">//</span>
01635 <span class="comment">// Timer object</span>
01636 <span class="comment">//</span>
01637 
01638 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
01639 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01640 <a class="code" href="../../d3/d2/timerobj_8c.html#a1">KeInitializeTimer</a> (
01641     IN PKTIMER Timer
01642     );
01643 
01644 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
01645 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01646 <a class="code" href="../../d3/d2/timerobj_8c.html#a2">KeInitializeTimerEx</a> (
01647     IN PKTIMER Timer,
01648     IN TIMER_TYPE Type
01649     );
01650 
01651 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
01652 BOOLEAN
01653 <a class="code" href="../../d3/d2/timerobj_8c.html#a4">KeCancelTimer</a> (
01654     IN PKTIMER
01655     );
01656 
01657 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
01658 BOOLEAN
01659 <a class="code" href="../../d3/d2/timerobj_8c.html#a5">KeReadStateTimer</a> (
01660     PKTIMER Timer
01661     );
01662 
01663 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
01664 BOOLEAN
01665 <a class="code" href="../../d3/d2/timerobj_8c.html#a6">KeSetTimer</a> (
01666     IN PKTIMER Timer,
01667     IN LARGE_INTEGER DueTime,
01668     IN <a class="code" href="../../d1/d6/struct__KDPC.html">PKDPC</a> Dpc OPTIONAL
01669     );
01670 
01671 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
01672 BOOLEAN
01673 <a class="code" href="../../d3/d2/timerobj_8c.html#a7">KeSetTimerEx</a> (
01674     IN PKTIMER Timer,
01675     IN LARGE_INTEGER DueTime,
01676     IN LONG Period OPTIONAL,
01677     IN <a class="code" href="../../d1/d6/struct__KDPC.html">PKDPC</a> Dpc OPTIONAL
01678     );
01679 
01680 <span class="comment">// end_ntddk end_nthal end_ntifs end_wdm</span>
01681 
01682 PVOID
01683 <a class="code" href="../../d3/d2/timerobj_8c.html#a9">KeCheckForTimer</a>(
01684     IN PVOID p,
01685     IN ULONG Size
01686     );
01687 
01688 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01689 <a class="code" href="../../d3/d2/timerobj_8c.html#a3">KeClearTimer</a> (
01690     IN PKTIMER Timer
01691     );
01692 
01693 ULONGLONG
01694 <a class="code" href="../../d3/d2/timerobj_8c.html#a8">KeQueryTimerDueTime</a> (
01695     IN PKTIMER Timer
01696     );
01697 
01698 
01699 <span class="comment">//</span>
01700 <span class="comment">// Wait functions</span>
01701 <span class="comment">//</span>
01702 
01703 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
01704 <a class="code" href="../../d1/d7/wait_8c.html#a5">KiSetServerWaitClientEvent</a> (
01705     IN PKEVENT SeverEvent,
01706     IN PKEVENT ClientEvent,
01707     IN ULONG WaitMode
01708     );
01709 
01710 <span class="preprocessor">#if 0</span>
01711 <span class="preprocessor"></span><a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
01712 KeReleaseWaitForSemaphore (
01713     IN PKSEMAPHORE Server,
01714     IN PKSEMAPHORE Client,
01715     IN ULONG WaitReason,
01716     IN ULONG WaitMode
01717     );
01718 <span class="preprocessor">#endif</span>
01719 <span class="preprocessor"></span>
<a name="l01720"></a><a class="code" href="../../d4/d9/ke_8h.html#a30">01720</a> <span class="preprocessor">#define KeSetHighWaitLowEventPair(EventPair, WaitMode)                  \</span>
01721 <span class="preprocessor">    KiSetServerWaitClientEvent(&amp;((EventPair)-&gt;EventHigh),               \</span>
01722 <span class="preprocessor">                               &amp;((EventPair)-&gt;EventLow),                \</span>
01723 <span class="preprocessor">                               WaitMode)</span>
01724 <span class="preprocessor"></span>
<a name="l01725"></a><a class="code" href="../../d4/d9/ke_8h.html#a31">01725</a> <span class="preprocessor">#define KeSetLowWaitHighEventPair(EventPair, WaitMode)                  \</span>
01726 <span class="preprocessor">    KiSetServerWaitClientEvent(&amp;((EventPair)-&gt;EventLow),                \</span>
01727 <span class="preprocessor">                               &amp;((EventPair)-&gt;EventHigh),               \</span>
01728 <span class="preprocessor">                               WaitMode)</span>
01729 <span class="preprocessor"></span>
<a name="l01730"></a><a class="code" href="../../d4/d9/ke_8h.html#a32">01730</a> <span class="preprocessor">#define KeWaitForHighEventPair(EventPair, WaitMode, Alertable, TimeOut) \</span>
01731 <span class="preprocessor">    KeWaitForSingleObject(&amp;((EventPair)-&gt;EventHigh),                    \</span>
01732 <span class="preprocessor">                          WrEventPair,                                  \</span>
01733 <span class="preprocessor">                          WaitMode,                                     \</span>
01734 <span class="preprocessor">                          Alertable,                                    \</span>
01735 <span class="preprocessor">                          TimeOut)</span>
01736 <span class="preprocessor"></span>
<a name="l01737"></a><a class="code" href="../../d4/d9/ke_8h.html#a33">01737</a> <span class="preprocessor">#define KeWaitForLowEventPair(EventPair, WaitMode, Alertable, TimeOut)  \</span>
01738 <span class="preprocessor">    KeWaitForSingleObject(&amp;((EventPair)-&gt;EventLow),                     \</span>
01739 <span class="preprocessor">                          WrEventPair,                                  \</span>
01740 <span class="preprocessor">                          WaitMode,                                     \</span>
01741 <span class="preprocessor">                          Alertable,                                    \</span>
01742 <span class="preprocessor">                          TimeOut)</span>
01743 <span class="preprocessor"></span>
01744 <span class="comment">// begin_ntddk begin_wdm begin_nthal begin_ntifs</span>
01745 
<a name="l01746"></a><a class="code" href="../../d4/d9/ke_8h.html#a34">01746</a> <span class="preprocessor">#define KeWaitForMutexObject KeWaitForSingleObject</span>
01747 <span class="preprocessor"></span>
01748 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
01749 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
01750 <a class="code" href="../../d1/d7/wait_8c.html#a3">KeWaitForMultipleObjects</a> (
01751     IN ULONG Count,
01752     IN PVOID Object[],
01753     IN WAIT_TYPE WaitType,
01754     IN KWAIT_REASON WaitReason,
01755     IN KPROCESSOR_MODE WaitMode,
01756     IN BOOLEAN Alertable,
01757     IN PLARGE_INTEGER Timeout OPTIONAL,
01758     IN PKWAIT_BLOCK WaitBlockArray OPTIONAL
01759     );
01760 
01761 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
01762 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
01763 <a class="code" href="../../d1/d7/wait_8c.html#a4">KeWaitForSingleObject</a> (
01764     IN PVOID Object,
01765     IN KWAIT_REASON WaitReason,
01766     IN KPROCESSOR_MODE WaitMode,
01767     IN BOOLEAN Alertable,
01768     IN PLARGE_INTEGER Timeout OPTIONAL
01769     );
01770 
01771 <span class="comment">// end_ntddk end_wdm end_nthal end_ntifs</span>
01772 
01773 <span class="comment">//</span>
01774 <span class="comment">// Define internal kernel functions.</span>
01775 <span class="comment">//</span>
01776 <span class="comment">// N.B. These definitions are not public and are used elsewhere only under</span>
01777 <span class="comment">//      very special circumstances.</span>
01778 <span class="comment">//</span>
01779 
01780 <span class="comment">// begin_ntddk begin_wdm begin_nthal begin_ntifs begin_ntndis</span>
01781 
01782 <span class="comment">//</span>
01783 <span class="comment">// On X86 the following routines are defined in the HAL and imported by</span>
01784 <span class="comment">// all other modules.</span>
01785 <span class="comment">//</span>
01786 
01787 <span class="preprocessor">#if defined(_X86_) &amp;&amp; !defined(_NTHAL_)</span>
01788 <span class="preprocessor"></span>
01789 <span class="preprocessor">#define _DECL_HAL_KE_IMPORT  __declspec(dllimport)</span>
01790 <span class="preprocessor"></span>
01791 <span class="preprocessor">#else</span>
01792 <span class="preprocessor"></span>
<a name="l01793"></a><a class="code" href="../../d4/d9/ke_8h.html#a35">01793</a> <span class="preprocessor">#define _DECL_HAL_KE_IMPORT</span>
01794 <span class="preprocessor"></span>
01795 <span class="preprocessor">#endif</span>
01796 <span class="preprocessor"></span>
01797 <span class="comment">// end_ntddk end_wdm end_nthal end_ntifs end_ntndis</span>
01798 
01799 <span class="preprocessor">#if defined(_ALPHA_) || defined(_X86_)</span>
01800 <span class="preprocessor"></span><span class="preprocessor">#if defined(NT_UP)</span>
01801 <span class="preprocessor"></span>
01802 <span class="preprocessor">#define KeAcquireQueuedSpinLockRaiseToSynch(Number) \</span>
01803 <span class="preprocessor">    KeRaiseIrqlToSynchLevel()</span>
01804 <span class="preprocessor"></span>
01805 <span class="preprocessor">#define KeAcquireQueuedSpinLock(Number) \</span>
01806 <span class="preprocessor">    KfRaiseIrql(DISPATCH_LEVEL)</span>
01807 <span class="preprocessor"></span>
01808 <span class="preprocessor">#define KeReleaseQueuedSpinLock(Number, OldIrql) \</span>
01809 <span class="preprocessor">    KeLowerIrql(OldIrql)</span>
01810 <span class="preprocessor"></span>
01811 <span class="preprocessor">#define KeTryToAcquireQueuedSpinLockRaiseToSynch(Number, OldIrql) \</span>
01812 <span class="preprocessor">    (*(OldIrql) = KeRaiseIrqlToSynchLevel(), TRUE)</span>
01813 <span class="preprocessor"></span>
01814 <span class="preprocessor">#define KeTryToAcquireQueuedSpinLock(Number, OldIrql) \</span>
01815 <span class="preprocessor">    (KeRaiseIrql(DISPATCH_LEVEL, OldIrql), TRUE)</span>
01816 <span class="preprocessor"></span>
01817 <span class="preprocessor">#define KiAcquireQueuedSpinLock(LockQueue)</span>
01818 <span class="preprocessor"></span>
01819 <span class="preprocessor">#define KiReleaseQueuedSpinLock(LockQueue)</span>
01820 <span class="preprocessor"></span>
01821 <span class="preprocessor">#else // NT_UP</span>
01822 <span class="preprocessor"></span>
01823 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01824 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a0">FASTCALL</a>
01825 KiAcquireQueuedSpinLock (
01826     IN <a class="code" href="../../d0/d8/struct__KSPIN__LOCK__QUEUE.html">PKSPIN_LOCK_QUEUE</a> LockQueue
01827     );
01828 
01829 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01830 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a0">FASTCALL</a>
01831 KiReleaseQueuedSpinLock (
01832     IN <a class="code" href="../../d0/d8/struct__KSPIN__LOCK__QUEUE.html">PKSPIN_LOCK_QUEUE</a> LockQueue
01833     );
01834 
01835 <a class="code" href="../../d4/d9/ke_8h.html#a35">_DECL_HAL_KE_IMPORT</a>
01836 KIRQL
01837 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a0">FASTCALL</a>
01838 KeAcquireQueuedSpinLockRaiseToSynch (
01839     IN <a class="code" href="../../d0/d9/ntosdef_8h.html#a35">KSPIN_LOCK_QUEUE_NUMBER</a> Number
01840     );
01841 
01842 <a class="code" href="../../d4/d9/ke_8h.html#a35">_DECL_HAL_KE_IMPORT</a>
01843 KIRQL
01844 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a0">FASTCALL</a>
01845 KeAcquireQueuedSpinLock (
01846     IN KSPIN_LOCK_QUEUE_NUMBER Number
01847     );
01848 
01849 <a class="code" href="../../d4/d9/ke_8h.html#a35">_DECL_HAL_KE_IMPORT</a>
01850 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01851 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a0">FASTCALL</a>
01852 KeReleaseQueuedSpinLock (
01853     IN KSPIN_LOCK_QUEUE_NUMBER Number,
01854     IN KIRQL OldIrql
01855     );
01856 
01857 <a class="code" href="../../d4/d9/ke_8h.html#a35">_DECL_HAL_KE_IMPORT</a>
01858 LOGICAL
01859 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a0">FASTCALL</a>
01860 KeTryToAcquireQueuedSpinLockRaiseToSynch(
01861     IN KSPIN_LOCK_QUEUE_NUMBER Number,
01862     IN PKIRQL OldIrql
01863     );
01864 
01865 <a class="code" href="../../d4/d9/ke_8h.html#a35">_DECL_HAL_KE_IMPORT</a>
01866 LOGICAL
01867 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a0">FASTCALL</a>
01868 KeTryToAcquireQueuedSpinLock(
01869     IN KSPIN_LOCK_QUEUE_NUMBER Number,
01870     IN PKIRQL OldIrql
01871     );
01872 
01873 <span class="preprocessor">#endif  // NT_UP</span>
01874 <span class="preprocessor"></span><span class="preprocessor">#endif  // _ALPHA_ || _X86_</span>
01875 <span class="preprocessor"></span>
01876 <span class="preprocessor">#if defined(NT_UP)</span>
01877 <span class="preprocessor"></span>
01878 <span class="comment">//</span>
01879 <span class="comment">// On Uni-processor systems there is no real Dispatcher Database Lock</span>
01880 <span class="comment">// so raising to SYNCH won't help get the lock released any sooner.</span>
01881 <span class="comment">// On X86, these functions are implemented in the HAL and don't use</span>
01882 <span class="comment">// the KiSynchLevel variable, on other platforms, KiSynchLevel can</span>
01883 <span class="comment">// be set appropriately. </span>
01884 <span class="comment">//</span>
01885 
01886 <span class="preprocessor">#if defined(_X86_)</span>
01887 <span class="preprocessor"></span>
01888 <span class="preprocessor">#define KiLockDispatcherDatabase(OldIrql) \</span>
01889 <span class="preprocessor">    *(OldIrql) = KeRaiseIrqlToDpcLevel()</span>
01890 <span class="preprocessor"></span>
01891 <span class="preprocessor">#else</span>
01892 <span class="preprocessor"></span>
01893 <span class="preprocessor">#define KiLockDispatcherDatabase(OldIrql) \</span>
01894 <span class="preprocessor">    *(OldIrql) = KeRaiseIrqlToSynchLevel()</span>
01895 <span class="preprocessor"></span>
01896 <span class="preprocessor">#endif</span>
01897 <span class="preprocessor"></span>
01898 <span class="preprocessor">#else   // NT_UP</span>
01899 <span class="preprocessor"></span>
01900 <span class="preprocessor">#if defined(_ALPHA_) || defined(_X86_)</span>
01901 <span class="preprocessor"></span>
01902 <span class="preprocessor">#define KiLockDispatcherDatabase(OldIrql) \</span>
01903 <span class="preprocessor">    *(OldIrql) = KeAcquireQueuedSpinLockRaiseToSynch(LockQueueDispatcherLock)</span>
01904 <span class="preprocessor"></span>
01905 <span class="preprocessor">#else   // _ALPHA_ || _X86_</span>
01906 <span class="preprocessor"></span>
<a name="l01907"></a><a class="code" href="../../d4/d9/ke_8h.html#a36">01907</a> <span class="preprocessor">#define KiLockDispatcherDatabase(OldIrql) \</span>
01908 <span class="preprocessor">    *(OldIrql) = KeAcquireSpinLockRaiseToSynch(&amp;KiDispatcherLock)</span>
01909 <span class="preprocessor"></span>
01910 <span class="preprocessor">#endif  // _ALPHA_ || _X86_</span>
01911 <span class="preprocessor"></span><span class="preprocessor">#endif  // NT_UP</span>
01912 <span class="preprocessor"></span>
01913 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01914 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a0">FASTCALL</a>
01915 <a class="code" href="../../d0/d2/thredsup_8c.html#a5">KiSetPriorityThread</a> (
01916     IN PRKTHREAD Thread,
01917     IN KPRIORITY Priority
01918     );
01919 
01920 <span class="comment">// begin_ntddk begin_wdm begin_nthal begin_ntifs begin_ntndis</span>
01921 <span class="comment">//</span>
01922 <span class="comment">// spin lock functions</span>
01923 <span class="comment">//</span>
01924 
01925 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
01926 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01927 NTAPI
01928 <a class="code" href="../../d4/d9/ke_8h.html#a354">KeInitializeSpinLock</a> (
01929     IN PKSPIN_LOCK SpinLock
01930     );
01931 
01932 <span class="preprocessor">#if defined(_X86_)</span>
01933 <span class="preprocessor"></span>
01934 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
01935 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01936 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a0">FASTCALL</a>
01937 KefAcquireSpinLockAtDpcLevel (
01938     IN PKSPIN_LOCK SpinLock
01939     );
01940 
01941 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
01942 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01943 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a0">FASTCALL</a>
01944 KefReleaseSpinLockFromDpcLevel (
01945     IN PKSPIN_LOCK SpinLock
01946     );
01947 
01948 <span class="preprocessor">#define KeAcquireSpinLockAtDpcLevel(a)      KefAcquireSpinLockAtDpcLevel(a)</span>
01949 <span class="preprocessor"></span><span class="preprocessor">#define KeReleaseSpinLockFromDpcLevel(a)    KefReleaseSpinLockFromDpcLevel(a)</span>
01950 <span class="preprocessor"></span>
01951 <a class="code" href="../../d4/d9/ke_8h.html#a35">_DECL_HAL_KE_IMPORT</a>
01952 KIRQL
01953 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a0">FASTCALL</a>
01954 KfAcquireSpinLock (
01955     IN PKSPIN_LOCK SpinLock
01956     );
01957 
01958 <a class="code" href="../../d4/d9/ke_8h.html#a35">_DECL_HAL_KE_IMPORT</a>
01959 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01960 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a0">FASTCALL</a>
01961 KfReleaseSpinLock (
01962     IN PKSPIN_LOCK SpinLock,
01963     IN KIRQL NewIrql
01964     );
01965 
01966 <span class="comment">// end_wdm</span>
01967 
01968 <a class="code" href="../../d4/d9/ke_8h.html#a35">_DECL_HAL_KE_IMPORT</a>
01969 KIRQL
01970 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a0">FASTCALL</a>
01971 <a class="code" href="../../d4/d9/ke_8h.html#a355">KeAcquireSpinLockRaiseToSynch</a> (
01972     IN PKSPIN_LOCK SpinLock
01973     );
01974 
01975 <span class="comment">// begin_wdm</span>
01976 
01977 <span class="preprocessor">#define KeAcquireSpinLock(a,b)  *(b) = KfAcquireSpinLock(a)</span>
01978 <span class="preprocessor"></span><span class="preprocessor">#define KeReleaseSpinLock(a,b)  KfReleaseSpinLock(a,b)</span>
01979 <span class="preprocessor"></span>
01980 <span class="preprocessor">#else</span>
01981 <span class="preprocessor"></span>
01982 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
01983 KIRQL
01984 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a0">FASTCALL</a>
01985 <a class="code" href="../../d4/d9/ke_8h.html#a355">KeAcquireSpinLockRaiseToSynch</a> (
01986     IN PKSPIN_LOCK SpinLock
01987     );
01988 
01989 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
01990 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01991 <a class="code" href="../../d4/d9/ke_8h.html#a356">KeAcquireSpinLockAtDpcLevel</a> (
01992     IN PKSPIN_LOCK SpinLock
01993     );
01994 
01995 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
01996 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01997 <a class="code" href="../../d4/d9/ke_8h.html#a357">KeReleaseSpinLockFromDpcLevel</a> (
01998     IN PKSPIN_LOCK SpinLock
01999     );
02000 
02001 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
02002 KIRQL
02003 <a class="code" href="../../d4/d9/ke_8h.html#a358">KeAcquireSpinLockRaiseToDpc</a> (
02004     IN PKSPIN_LOCK SpinLock
02005     );
02006 
<a name="l02007"></a><a class="code" href="../../d4/d9/ke_8h.html#a37">02007</a> <span class="preprocessor">#define KeAcquireSpinLock(SpinLock, OldIrql) \</span>
02008 <span class="preprocessor">    *(OldIrql) = KeAcquireSpinLockRaiseToDpc(SpinLock)</span>
02009 <span class="preprocessor"></span>
02010 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
02011 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
02012 <a class="code" href="../../d9/d5/verifier_8c.html#a119">KeReleaseSpinLock</a> (
02013     IN PKSPIN_LOCK SpinLock,
02014     IN KIRQL NewIrql
02015     );
02016 
02017 <span class="preprocessor">#endif</span>
02018 <span class="preprocessor"></span>
02019 <span class="comment">//  end_wdm end_ntddk end_nthal end_ntifs end_ntndis</span>
02020 
02021 BOOLEAN
02022 <a class="code" href="../../d4/d9/ke_8h.html#a360">KeTryToAcquireSpinLock</a> (
02023     IN PKSPIN_LOCK SpinLock,
02024     OUT PKIRQL OldIrql
02025     );
02026 
02027 <span class="comment">//</span>
02028 <span class="comment">// Raise and lower IRQL functions.</span>
02029 <span class="comment">//</span>
02030 
02031 <span class="comment">//  begin_nthal begin_wdm begin_ntddk begin_ntifs</span>
02032 
02033 <span class="preprocessor">#if defined(_X86_)</span>
02034 <span class="preprocessor"></span>
02035 <a class="code" href="../../d4/d9/ke_8h.html#a35">_DECL_HAL_KE_IMPORT</a>
02036 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
02037 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a0">FASTCALL</a>
02038 KfLowerIrql (
02039     IN KIRQL NewIrql
02040     );
02041 
02042 <a class="code" href="../../d4/d9/ke_8h.html#a35">_DECL_HAL_KE_IMPORT</a>
02043 KIRQL
02044 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a0">FASTCALL</a>
02045 KfRaiseIrql (
02046     IN KIRQL NewIrql
02047     );
02048 
02049 <span class="comment">// end_wdm</span>
02050 
02051 <a class="code" href="../../d4/d9/ke_8h.html#a35">_DECL_HAL_KE_IMPORT</a>
02052 KIRQL
02053 KeRaiseIrqlToDpcLevel(
02054     VOID
02055     );
02056 
02057 <a class="code" href="../../d4/d9/ke_8h.html#a35">_DECL_HAL_KE_IMPORT</a>
02058 KIRQL
02059 KeRaiseIrqlToSynchLevel(
02060     VOID
02061     );
02062 
02063 <span class="comment">// begin_wdm</span>
02064 
02065 <span class="preprocessor">#define KeLowerIrql(a)      KfLowerIrql(a)</span>
02066 <span class="preprocessor"></span><span class="preprocessor">#define KeRaiseIrql(a,b)    *(b) = KfRaiseIrql(a)</span>
02067 <span class="preprocessor"></span>
02068 <span class="comment">// end_wdm</span>
02069 
02070 <span class="comment">// begin_wdm</span>
02071 
02072 <span class="preprocessor">#elif defined(_ALPHA_)</span>
02073 <span class="preprocessor"></span>
02074 <span class="preprocessor">#define KeLowerIrql(a)      __swpirql(a)</span>
02075 <span class="preprocessor"></span><span class="preprocessor">#define KeRaiseIrql(a,b)    *(b) = __swpirql(a)</span>
02076 <span class="preprocessor"></span>
02077 <span class="comment">// end_wdm</span>
02078 
02079 <span class="preprocessor">#define KfRaiseIrql(a)      __swpirql(a)</span>
02080 <span class="preprocessor"></span><span class="preprocessor">#define KeRaiseIrqlToDpcLevel() __swpirql(DISPATCH_LEVEL)</span>
02081 <span class="preprocessor"></span><span class="preprocessor">#define KeRaiseIrqlToSynchLevel() __swpirql((UCHAR)KiSynchIrql)</span>
02082 <span class="preprocessor"></span>
02083 <span class="comment">// begin_wdm</span>
02084 
02085 <span class="preprocessor">#elif defined(_IA64_)</span>
02086 <span class="preprocessor"></span>
02087 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
02088 <a class="code" href="../../d9/d5/verifier_8c.html#a117">KeLowerIrql</a> (
02089     IN KIRQL NewIrql
02090     );
02091 
02092 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
02093 <a class="code" href="../../d9/d5/verifier_8c.html#a116">KeRaiseIrql</a> (
02094     IN KIRQL NewIrql,
02095     OUT PKIRQL OldIrql
02096     );
02097 
02098 <span class="comment">// end_wdm</span>
02099 
02100 KIRQL
02101 KeRaiseIrqlToDpcLevel (
02102     VOID
02103     );
02104 
02105 KIRQL
02106 KeRaiseIrqlToSynchLevel (
02107     VOID
02108     );
02109 
02110 <span class="comment">// begin_wdm</span>
02111 
02112 <span class="preprocessor">#endif</span>
02113 <span class="preprocessor"></span>
02114 <span class="comment">//  end_nthal end_wdm end_ntddk end_ntifs</span>
02115 
02116 
02117 <span class="comment">//</span>
02118 <span class="comment">// Initialize kernel in phase 1.</span>
02119 <span class="comment">//</span>
02120 
02121 BOOLEAN
02122 <a class="code" href="../../d2/d0/kiinit_8c.html#a0">KeInitSystem</a>(
02123     VOID
02124     );
02125 
02126 <span class="comment">// begin_ntddk begin_wdm begin_nthal begin_ntifs</span>
02127 <span class="comment">//</span>
02128 <span class="comment">// Miscellaneous kernel functions</span>
02129 <span class="comment">//</span>
02130 
02131 <span class="comment">// end_wdm</span>
02132 
02133 BOOLEAN
02134 <a class="code" href="../../d9/d1/bugcheck_8c.html#a14">KeGetBugMessageText</a>(
02135     IN ULONG MessageId,
02136     IN PANSI_STRING ReturnedString OPTIONAL
02137     );
02138 
<a name="l02139"></a><a class="code" href="../../d4/d9/ke_8h.html#a410">02139</a> <span class="keyword">typedef</span> <span class="keyword">enum</span> <a class="code" href="../../d4/d9/ke_8h.html#a410">_KBUGCHECK_BUFFER_DUMP_STATE</a> {
02140     <a class="code" href="../../d4/d9/ke_8h.html#a410a236">BufferEmpty</a>,
02141     <a class="code" href="../../d4/d9/ke_8h.html#a410a237">BufferInserted</a>,
02142     <a class="code" href="../../d4/d9/ke_8h.html#a410a238">BufferStarted</a>,
02143     <a class="code" href="../../d4/d9/ke_8h.html#a410a239">BufferFinished</a>,
02144     <a class="code" href="../../d4/d9/ke_8h.html#a410a240">BufferIncomplete</a>
02145 } <a class="code" href="../../d4/d9/ke_8h.html#a112">KBUGCHECK_BUFFER_DUMP_STATE</a>;
02146 
02147 <span class="keyword">typedef</span>
02148 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
<a name="l02149"></a><a class="code" href="../../d4/d9/ke_8h.html#a113">02149</a> (*PKBUGCHECK_CALLBACK_ROUTINE) (
02150     IN PVOID <a class="code" href="../../d6/d2/rtqkey_8c.html#a3">Buffer</a>,
02151     IN ULONG Length
02152     );
02153 
<a name="l02154"></a><a class="code" href="../../d4/d5/struct__KBUGCHECK__CALLBACK__RECORD.html">02154</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d4/d5/struct__KBUGCHECK__CALLBACK__RECORD.html">_KBUGCHECK_CALLBACK_RECORD</a> {
<a name="l02155"></a><a class="code" href="../../d4/d5/struct__KBUGCHECK__CALLBACK__RECORD.html#o0">02155</a>     LIST_ENTRY <a class="code" href="../../d4/d5/struct__KBUGCHECK__CALLBACK__RECORD.html#o0">Entry</a>;
<a name="l02156"></a><a class="code" href="../../d4/d5/struct__KBUGCHECK__CALLBACK__RECORD.html#o1">02156</a>     <a class="code" href="../../d4/d9/ke_8h.html#a113">PKBUGCHECK_CALLBACK_ROUTINE</a> <a class="code" href="../../d4/d5/struct__KBUGCHECK__CALLBACK__RECORD.html#o1">CallbackRoutine</a>;
<a name="l02157"></a><a class="code" href="../../d4/d5/struct__KBUGCHECK__CALLBACK__RECORD.html#o2">02157</a>     PVOID <a class="code" href="../../d6/d2/rtqkey_8c.html#a3">Buffer</a>;
<a name="l02158"></a><a class="code" href="../../d4/d5/struct__KBUGCHECK__CALLBACK__RECORD.html#o3">02158</a>     ULONG <a class="code" href="../../d4/d5/struct__KBUGCHECK__CALLBACK__RECORD.html#o3">Length</a>;
<a name="l02159"></a><a class="code" href="../../d4/d5/struct__KBUGCHECK__CALLBACK__RECORD.html#o4">02159</a>     PUCHAR <a class="code" href="../../d4/d5/struct__KBUGCHECK__CALLBACK__RECORD.html#o4">Component</a>;
<a name="l02160"></a><a class="code" href="../../d4/d5/struct__KBUGCHECK__CALLBACK__RECORD.html#o5">02160</a>     ULONG_PTR <a class="code" href="../../d4/d5/struct__KBUGCHECK__CALLBACK__RECORD.html#o5">Checksum</a>;
<a name="l02161"></a><a class="code" href="../../d4/d5/struct__KBUGCHECK__CALLBACK__RECORD.html#o6">02161</a>     UCHAR <a class="code" href="../../d4/d5/struct__KBUGCHECK__CALLBACK__RECORD.html#o6">State</a>;
02162 } <a class="code" href="../../d4/d5/struct__KBUGCHECK__CALLBACK__RECORD.html">KBUGCHECK_CALLBACK_RECORD</a>, *<a class="code" href="../../d4/d5/struct__KBUGCHECK__CALLBACK__RECORD.html">PKBUGCHECK_CALLBACK_RECORD</a>;
02163 
02164 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
02165 DECLSPEC_NORETURN
02166 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
02167 NTAPI
02168 <a class="code" href="../../d9/d1/bugcheck_8c.html#a13">KeBugCheck</a> (
02169     IN ULONG BugCheckCode
02170     );
02171 
02172 <span class="comment">// begin_wdm</span>
02173 
02174 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
02175 DECLSPEC_NORETURN
02176 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
02177 <a class="code" href="../../d9/d1/bugcheck_8c.html#a19">KeBugCheckEx</a>(
02178     IN ULONG BugCheckCode,
02179     IN ULONG_PTR BugCheckParameter1,
02180     IN ULONG_PTR BugCheckParameter2,
02181     IN ULONG_PTR BugCheckParameter3,
02182     IN ULONG_PTR BugCheckParameter4
02183     );
02184 
02185 <span class="comment">// end_wdm</span>
02186 
<a name="l02187"></a><a class="code" href="../../d4/d9/ke_8h.html#a38">02187</a> <span class="preprocessor">#define KeInitializeCallbackRecord(CallbackRecord) \</span>
02188 <span class="preprocessor">    (CallbackRecord)-&gt;State = BufferEmpty</span>
02189 <span class="preprocessor"></span>
02190 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
02191 BOOLEAN
02192 <a class="code" href="../../d9/d1/bugcheck_8c.html#a21">KeDeregisterBugCheckCallback</a> (
02193     IN PKBUGCHECK_CALLBACK_RECORD CallbackRecord
02194     );
02195 
02196 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
02197 BOOLEAN
02198 <a class="code" href="../../d9/d1/bugcheck_8c.html#a22">KeRegisterBugCheckCallback</a> (
02199     IN PKBUGCHECK_CALLBACK_RECORD CallbackRecord,
02200     IN PKBUGCHECK_CALLBACK_ROUTINE CallbackRoutine,
02201     IN PVOID Buffer,
02202     IN ULONG Length,
02203     IN PUCHAR Component
02204     );
02205 
02206 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
02207 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
02208 <a class="code" href="../../d9/d1/bugcheck_8c.html#a20">KeEnterKernelDebugger</a> (
02209     VOID
02210     );
02211 
02212 <span class="comment">// end_ntddk end_nthal end_ntifs</span>
02213 
02214 <span class="keyword">typedef</span>
02215 PCHAR
<a name="l02216"></a><a class="code" href="../../d4/d9/ke_8h.html#a116">02216</a> (*PKE_BUGCHECK_UNICODE_TO_ANSI) (
02217     IN PUNICODE_STRING UnicodeString,
02218     OUT PCHAR AnsiBuffer,
02219     IN ULONG MaxAnsiLength
02220     );
02221 
02222 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
02223 <a class="code" href="../../d8/d0/ppc_2dmpstate_8c.html#a5">KeDumpMachineState</a> (
02224     IN PKPROCESSOR_STATE ProcessorState,
02225     IN PCHAR Buffer,
02226     IN PULONG_PTR BugCheckParameters,
02227     IN ULONG NumberOfParameters,
02228     IN PKE_BUGCHECK_UNICODE_TO_ANSI UnicodeToAnsiRoutine
02229     );
02230 
02231 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
02232 <a class="code" href="../../d2/d9/ppc_2exceptn_8c.html#a9">KeContextFromKframes</a> (
02233     IN PKTRAP_FRAME TrapFrame,
02234     IN PKEXCEPTION_FRAME ExceptionFrame,
02235     IN OUT PCONTEXT ContextFrame
02236     );
02237 
02238 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
02239 <a class="code" href="../../d2/d9/ppc_2exceptn_8c.html#a10">KeContextToKframes</a> (
02240     IN OUT PKTRAP_FRAME TrapFrame,
02241     IN OUT PKEXCEPTION_FRAME ExceptionFrame,
02242     IN PCONTEXT ContextFrame,
02243     IN ULONG ContextFlags,
02244     IN KPROCESSOR_MODE PreviousMode
02245     );
02246 
02247 
02248 <span class="comment">// begin_nthal</span>
02249 
02250 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
02251 __cdecl
02252 <a class="code" href="../../d6/d5/ia64_2getsetrg_8c.html#a7">KeSaveStateForHibernate</a>(
02253     IN PKPROCESSOR_STATE ProcessorState
02254     );
02255 
02256 <span class="comment">// end_nthal</span>
02257 
02258 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
02259 <a class="code" href="../../d4/d9/ke_8h.html#a372">KeCopyTrapDispatcher</a> (
02260     VOID
02261     );
02262 
02263 BOOLEAN
02264 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a0">FASTCALL</a>
02265 <a class="code" href="../../d4/d9/ke_8h.html#a373">KeInvalidAccessAllowed</a> (
02266     IN PVOID TrapInformation OPTIONAL
02267     );
02268 
02269 <span class="comment">//</span>
02270 <span class="comment">//  GDI TEB Batch Flush routine</span>
02271 <span class="comment">//</span>
02272 
02273 <span class="keyword">typedef</span>
02274 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
<a name="l02275"></a><a class="code" href="../../d4/d9/ke_8h.html#a117">02275</a> (*PGDI_BATCHFLUSH_ROUTINE) (
02276     <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
02277     );
02278 
02279 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>                                         <span class="comment">// nthal</span>
02280 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>                                                <span class="comment">// nthal</span>
02281 <a class="code" href="../../d4/d9/ke_8h.html#a374">KeFlushCurrentTb</a> (                                  <span class="comment">// nthal</span>
02282     VOID                                            <span class="comment">// nthal</span>
02283     );                                              <span class="comment">// nthal</span>
02284                                                     <span class="comment">// nthal</span>
02285 <span class="comment">//</span>
02286 <span class="comment">// UCHAR</span>
02287 <span class="comment">// FindFirstSetRightMember(Set)</span>
02288 <span class="comment">//</span>
02289 <span class="comment">// This function only works for MAXIMUM_PROCESSORS (which is currently 32),</span>
02290 <span class="comment">// and it assumes at least one bit is set</span>
02291 <span class="comment">//</span>
02292 
<a name="l02293"></a><a class="code" href="../../d4/d9/ke_8h.html#a39">02293</a> <span class="preprocessor">#define KeFindFirstSetRightMember(Set) \</span>
02294 <span class="preprocessor">    ((Set &amp; 0xFF) ? KiFindFirstSetRight[Set &amp; 0xFF] : \</span>
02295 <span class="preprocessor">    ((Set &amp; 0xFF00) ? KiFindFirstSetRight[(Set &gt;&gt; 8) &amp; 0xFF] + 8 : \</span>
02296 <span class="preprocessor">    ((Set &amp; 0xFF0000) ? KiFindFirstSetRight[(Set &gt;&gt; 16) &amp; 0xFF] + 16 : \</span>
02297 <span class="preprocessor">                           KiFindFirstSetRight[Set &gt;&gt; 24] + 24 )))</span>
02298 <span class="preprocessor"></span>
02299 <span class="comment">//</span>
02300 <span class="comment">// TB Flush routines</span>
02301 <span class="comment">//</span>
02302 
02303 <span class="preprocessor">#if defined(_M_IX86)</span>
02304 <span class="preprocessor"></span>
02305 <span class="preprocessor">#if !defined (_X86PAE_)</span>
02306 <span class="preprocessor"></span><span class="preprocessor">#define KI_FILL_PTE(_PointerPte, _PteContents)                          \</span>
02307 <span class="preprocessor">        *(_PointerPte) = (_PteContents);</span>
02308 <span class="preprocessor"></span>
02309 <span class="preprocessor">#define KI_SWAP_PTE(_PointerPte, _PteContents, _OldPte)                 \</span>
02310 <span class="preprocessor">        (_OldPte) = *(_PointerPte);                                     \</span>
02311 <span class="preprocessor">        *(_PointerPte) = (_PteContents);</span>
02312 <span class="preprocessor"></span><span class="preprocessor">#else</span>
02313 <span class="preprocessor"></span>
02314 HARDWARE_PTE
02315 KeInterlockedSwapPte (
02316     IN PHARDWARE_PTE PtePointer,
02317     IN PHARDWARE_PTE NewPteContents
02318     );
02319 
02320 <span class="preprocessor">#define KI_FILL_PTE(_PointerPte, _PteContents) {                            \</span>
02321 <span class="preprocessor">        if ((_PointerPte)-&gt;Valid == 0) {                                    \</span>
02322 <span class="preprocessor">            (_PointerPte)-&gt;HighPart = ((_PteContents).HighPart);            \</span>
02323 <span class="preprocessor">            (_PointerPte)-&gt;LowPart = ((_PteContents).LowPart);              \</span>
02324 <span class="preprocessor">        }                                                                   \</span>
02325 <span class="preprocessor">        else if ((_PteContents).Valid == 0) {                               \</span>
02326 <span class="preprocessor">            (_PointerPte)-&gt;LowPart = ((_PteContents).LowPart);              \</span>
02327 <span class="preprocessor">            (_PointerPte)-&gt;HighPart = ((_PteContents).HighPart);            \</span>
02328 <span class="preprocessor">        }                                                                   \</span>
02329 <span class="preprocessor">        else {                                                              \</span>
02330 <span class="preprocessor">            (VOID) KeInterlockedSwapPte((_PointerPte), &amp;(_PteContents));    \</span>
02331 <span class="preprocessor">        }                                                                   \</span>
02332 <span class="preprocessor">        }</span>
02333 <span class="preprocessor"></span>
02334 <span class="preprocessor">#define KI_SWAP_PTE(_PointerPte, _PteContents, _OldPte) {                   \</span>
02335 <span class="preprocessor">        (_OldPte) = *(_PointerPte);                                         \</span>
02336 <span class="preprocessor">        if ((_PointerPte)-&gt;Valid == 0) {                                    \</span>
02337 <span class="preprocessor">            (_PointerPte)-&gt;HighPart = (_PteContents).HighPart;              \</span>
02338 <span class="preprocessor">            (_PointerPte)-&gt;LowPart = (_PteContents).LowPart;                \</span>
02339 <span class="preprocessor">        }                                                                   \</span>
02340 <span class="preprocessor">        else if ((_PteContents).Valid == 0) {                               \</span>
02341 <span class="preprocessor">            (_PointerPte)-&gt;LowPart = (_PteContents).LowPart;                \</span>
02342 <span class="preprocessor">            (_PointerPte)-&gt;HighPart = (_PteContents).HighPart;              \</span>
02343 <span class="preprocessor">        }                                                                   \</span>
02344 <span class="preprocessor">        else {                                                              \</span>
02345 <span class="preprocessor">            (_OldPte) = KeInterlockedSwapPte(_PointerPte, &amp;(_PteContents)); \</span>
02346 <span class="preprocessor">        }                                                                   \</span>
02347 <span class="preprocessor">        }</span>
02348 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
02349 <span class="preprocessor"></span>
02350 <span class="preprocessor">#endif</span>
02351 <span class="preprocessor"></span>
02352 <span class="preprocessor">#if defined(_ALPHA_) &amp;&amp; defined(NT_UP) &amp;&amp;           \</span>
02353 <span class="preprocessor">    !defined(_NTDRIVER_) &amp;&amp; !defined(_NTDDK_) &amp;&amp; !defined(_NTIFS_) &amp;&amp; !defined(_NTHAL_)</span>
02354 <span class="preprocessor"></span>
02355 <span class="preprocessor">#define KeFlushEntireTb(Invalid, AllProcessors) __tbia()</span>
02356 <span class="preprocessor"></span>
02357 <span class="preprocessor">#define KeFlushMultipleTb(Number, Virtual, Invalid, AllProcessors, PtePointer, PteValue) \</span>
02358 <span class="preprocessor">{                                                                                        \</span>
02359 <span class="preprocessor">    ULONG _Index_;                                                                       \</span>
02360 <span class="preprocessor">                                                                                         \</span>
02361 <span class="preprocessor">    if (ARGUMENT_PRESENT(PtePointer)) {                                                  \</span>
02362 <span class="preprocessor">        for (_Index_ = 0; _Index_ &lt; (Number); _Index_ += 1) {                            \</span>
02363 <span class="preprocessor">            *((PHARDWARE_PTE *)(PtePointer))[_Index_] = (PteValue);                      \</span>
02364 <span class="preprocessor">        }                                                                                \</span>
02365 <span class="preprocessor">    }                                                                                    \</span>
02366 <span class="preprocessor">    KiFlushMultipleTb((Invalid), &amp;(Virtual)[0], (Number));                               \</span>
02367 <span class="preprocessor">}</span>
02368 <span class="preprocessor"></span>
02369 __inline
02370 HARDWARE_PTE
02371 <a class="code" href="../../d0/d6/ppc_2flushtb_8c.html#a2">KeFlushSingleTb</a>(
02372     IN PVOID Virtual,
02373     IN BOOLEAN Invalid,
02374     IN BOOLEAN AllProcesors,
02375     IN PHARDWARE_PTE PtePointer,
02376     IN HARDWARE_PTE PteValue
02377     )
02378 {
02379     HARDWARE_PTE OldPte;
02380 
02381     OldPte = *PtePointer;
02382     *PtePointer = PteValue;
02383     __tbis(Virtual);
02384     <span class="keywordflow">return</span>(OldPte);
02385 }
02386 
02387 <span class="preprocessor">#elif defined(_M_IX86) &amp;&amp; defined(NT_UP) &amp;&amp;           \</span>
02388 <span class="preprocessor">    !defined(_NTDRIVER_) &amp;&amp; !defined(_NTDDK_) &amp;&amp; !defined(_NTIFS_) &amp;&amp; !defined(_NTHAL_)</span>
02389 <span class="preprocessor"></span>
02390 <span class="preprocessor">#define KeFlushEntireTb(Invalid, AllProcessors) KeFlushCurrentTb()</span>
02391 <span class="preprocessor"></span>
02392 __inline
02393 HARDWARE_PTE
02394 <a class="code" href="../../d0/d6/ppc_2flushtb_8c.html#a2">KeFlushSingleTb</a>(
02395     IN PVOID Virtual,
02396     IN BOOLEAN Invalid,
02397     IN BOOLEAN AllProcesors,
02398     IN PHARDWARE_PTE PtePointer,
02399     IN HARDWARE_PTE PteValue
02400     )
02401 {
02402     HARDWARE_PTE OldPte;
02403 
02404     KI_SWAP_PTE (PtePointer, PteValue, OldPte);
02405     __asm {
02406         mov eax, <a class="code" href="../../d5/d9/alpha_2exdsptch_8c.html#a2">Virtual</a>
02407         invlpg [eax]
02408     }
02409     <span class="keywordflow">return</span>(OldPte);
02410 }
02411 
02412 <span class="preprocessor">#define KeFlushMultipleTb(Number, Virtual, Invalid, AllProcessors, PtePointer, PteValue) \</span>
02413 <span class="preprocessor">{                                                                                        \</span>
02414 <span class="preprocessor">    ULONG _Index_;                                                                       \</span>
02415 <span class="preprocessor">    PVOID _VA_;                                                                          \</span>
02416 <span class="preprocessor">                                                                                         \</span>
02417 <span class="preprocessor">    for (_Index_ = 0; _Index_ &lt; (Number); _Index_ += 1) {                                \</span>
02418 <span class="preprocessor">        if (ARGUMENT_PRESENT(PtePointer)) {                                              \</span>
02419 <span class="preprocessor">            KI_FILL_PTE ((((PHARDWARE_PTE *)(PtePointer))[_Index_]), (PteValue));                      \</span>
02420 <span class="preprocessor">        }                                                                                \</span>
02421 <span class="preprocessor">        _VA_ = (Virtual)[_Index_];                                                       \</span>
02422 <span class="preprocessor">        __asm { mov eax, _VA_ }                                                          \</span>
02423 <span class="preprocessor">        __asm { invlpg [eax] }                                                           \</span>
02424 <span class="preprocessor">    }                                                                                    \</span>
02425 <span class="preprocessor">}</span>
02426 <span class="preprocessor"></span>
02427 <span class="preprocessor">#else</span>
02428 <span class="preprocessor"></span>
02429 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
02430 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
02431 <a class="code" href="../../d0/d6/ppc_2flushtb_8c.html#a0">KeFlushEntireTb</a> (
02432     IN BOOLEAN Invalid,
02433     IN BOOLEAN AllProcessors
02434     );
02435 
02436 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
02437 <a class="code" href="../../d0/d6/ppc_2flushtb_8c.html#a1">KeFlushMultipleTb</a> (
02438     IN ULONG Number,
02439     IN PVOID *Virtual,
02440     IN BOOLEAN Invalid,
02441     IN BOOLEAN AllProcesors,
02442     IN PHARDWARE_PTE *PtePointer OPTIONAL,
02443     IN HARDWARE_PTE PteValue
02444     );
02445 
02446 HARDWARE_PTE
02447 <a class="code" href="../../d0/d6/ppc_2flushtb_8c.html#a2">KeFlushSingleTb</a> (
02448     IN PVOID Virtual,
02449     IN BOOLEAN Invalid,
02450     IN BOOLEAN AllProcesors,
02451     IN PHARDWARE_PTE PtePointer,
02452     IN HARDWARE_PTE PteValue
02453     );
02454 
02455 <span class="preprocessor">#endif</span>
02456 <span class="preprocessor"></span>
02457 <span class="preprocessor">#if defined(_ALPHA_) || defined(_IA64_)</span>
02458 <span class="preprocessor"></span>
02459 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
02460 <a class="code" href="../../d4/d1/xxflshtb_8c.html#a7">KeFlushMultipleTb64</a> (
02461     IN ULONG Number,
02462     IN PULONG_PTR Virtual,
02463     IN BOOLEAN Invalid,
02464     IN BOOLEAN AllProcesors,
02465     IN PHARDWARE_PTE *PtePointer OPTIONAL,
02466     IN HARDWARE_PTE PteValue
02467     );
02468 
02469 HARDWARE_PTE
02470 <a class="code" href="../../d4/d1/xxflshtb_8c.html#a9">KeFlushSingleTb64</a> (
02471     IN ULONG_PTR Virtual,
02472     IN BOOLEAN Invalid,
02473     IN BOOLEAN AllProcesors,
02474     IN PHARDWARE_PTE PtePointer,
02475     IN HARDWARE_PTE PteValue
02476     );
02477 
02478 <span class="preprocessor">#endif</span>
02479 <span class="preprocessor"></span>
02480 BOOLEAN
02481 <a class="code" href="../../d9/d4/ke_2debug_8c.html#a9">KeFreezeExecution</a> (
02482     IN PKTRAP_FRAME TrapFrame,
02483     IN PKEXCEPTION_FRAME ExceptionFrame
02484     );
02485 
02486 <a class="code" href="../../d4/d9/ke_8h.html#a408">KCONTINUE_STATUS</a>
02487 <a class="code" href="../../d9/d4/ke_2debug_8c.html#a11">KeSwitchFrozenProcessor</a> (
02488     IN ULONG ProcessorNumber
02489     );
02490 
02491 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
02492 <a class="code" href="../../d4/d9/ke_8h.html#a380">KeGetNonVolatileContextPointers</a> (
02493     IN PKNONVOLATILE_CONTEXT_POINTERS NonVolatileContext
02494     );
02495 
<a name="l02496"></a><a class="code" href="../../d4/d9/ke_8h.html#a40">02496</a> <span class="preprocessor">#define DMA_READ_DCACHE_INVALIDATE 0x1              // nthal</span>
<a name="l02497"></a><a class="code" href="../../d4/d9/ke_8h.html#a41">02497</a> <span class="preprocessor"></span><span class="preprocessor">#define DMA_READ_ICACHE_INVALIDATE 0x2              // nthal</span>
<a name="l02498"></a><a class="code" href="../../d4/d9/ke_8h.html#a42">02498</a> <span class="preprocessor"></span><span class="preprocessor">#define DMA_WRITE_DCACHE_SNOOP 0x4                  // nthal</span>
02499 <span class="preprocessor"></span>                                                    <span class="comment">// nthal</span>
02500 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>                                         <span class="comment">// nthal</span>
02501 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>                                                <span class="comment">// nthal</span>
02502 <a class="code" href="../../d7/d0/ke_2miscc_8c.html#a6">KeSetDmaIoCoherency</a> (                               <span class="comment">// nthal</span>
02503     IN ULONG Attributes                             <span class="comment">// nthal</span>
02504     );                                              <span class="comment">// nthal</span>
02505                                                     <span class="comment">// nthal</span>
02506 
02507 <span class="preprocessor">#if defined(i386)</span>
02508 <span class="preprocessor"></span>
02509 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>                                         <span class="comment">// nthal</span>
02510 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>                                                <span class="comment">// nthal</span>
02511 KeSetProfileIrql (                                  <span class="comment">// nthal</span>
02512     IN KIRQL ProfileIrql                            <span class="comment">// nthal</span>
02513     );                                              <span class="comment">// nthal</span>
02514                                                     <span class="comment">// nthal</span>
02515 <span class="preprocessor">#endif</span>
02516 <span class="preprocessor"></span>
02517 <span class="preprocessor">#if defined(_ALPHA_)</span>
02518 <span class="preprocessor"></span>
02519 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>                                         <span class="comment">// nthal</span>
02520 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>                                                <span class="comment">// nthal</span>
02521 KeSetSynchIrql (                                    <span class="comment">// nthal</span>
02522     IN KIRQL SynchIrql                              <span class="comment">// nthal</span>
02523     );                                              <span class="comment">// nthal</span>
02524                                                     <span class="comment">// nthal</span>
02525 ULONG
02526 KeReadMbTimeStamp (
02527     VOID
02528     );
02529 
02530 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
02531 <a class="code" href="../../d9/d4/alpha_2flush_8c.html#a9">KeSynchronizeMemoryAccess</a> (
02532     VOID
02533     );
02534 
02535 <span class="preprocessor">#endif</span>
02536 <span class="preprocessor"></span>
02537 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
02538 <a class="code" href="../../d7/d0/ke_2miscc_8c.html#a7">KeSetSystemTime</a> (
02539     IN PLARGE_INTEGER NewTime,
02540     OUT PLARGE_INTEGER OldTime,
02541     IN BOOLEAN AdjustInterruptTime,
02542     IN PLARGE_INTEGER HalTimeToSet OPTIONAL
02543     );
02544 
<a name="l02545"></a><a class="code" href="../../d4/d9/ke_8h.html#a43">02545</a> <span class="preprocessor">#define SYSTEM_SERVICE_INDEX 0</span>
<a name="l02546"></a><a class="code" href="../../d4/d9/ke_8h.html#a44">02546</a> <span class="preprocessor"></span><span class="preprocessor">#define WIN32K_SERVICE_INDEX 1</span>
<a name="l02547"></a><a class="code" href="../../d4/d9/ke_8h.html#a45">02547</a> <span class="preprocessor"></span><span class="preprocessor">#define IIS_SERVICE_INDEX 2</span>
02548 <span class="preprocessor"></span>
02549 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
02550 BOOLEAN
02551 <a class="code" href="../../d7/d0/ke_2miscc_8c.html#a11">KeAddSystemServiceTable</a>(
02552     IN PULONG_PTR Base,
02553     IN PULONG Count OPTIONAL,
02554     IN ULONG Limit,
02555     IN PUCHAR Number,
02556     IN ULONG Index
02557     );
02558 
02559 <span class="comment">// begin_ntddk begin_wdm begin_nthal begin_ntifs</span>
02560 
02561 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
02562 ULONGLONG
02563 <a class="code" href="../../d7/d0/ke_2miscc_8c.html#a2">KeQueryInterruptTime</a> (
02564     VOID
02565     );
02566 
02567 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
02568 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
02569 <a class="code" href="../../d7/d0/ke_2miscc_8c.html#a3">KeQuerySystemTime</a> (
02570     OUT PLARGE_INTEGER CurrentTime
02571     );
02572 
02573 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
02574 ULONG
02575 <a class="code" href="../../d7/d0/ke_2miscc_8c.html#a5">KeQueryTimeIncrement</a> (
02576     VOID
02577     );
02578 
02579 <span class="comment">// end_wdm</span>
02580 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
02581 KAFFINITY
02582 <a class="code" href="../../d7/d0/ke_2miscc_8c.html#a15">KeQueryActiveProcessors</a> (
02583     VOID
02584     );
02585 
02586 <span class="comment">// end_ntddk end_nthal end_ntifs</span>
02587 
02588 <span class="comment">// begin_nthal</span>
02589 
02590 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
02591 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
02592 <a class="code" href="../../d7/d0/ke_2miscc_8c.html#a10">KeSetTimeIncrement</a> (
02593     IN ULONG MaximumIncrement,
02594     IN ULONG MimimumIncrement
02595     );
02596 
02597 <span class="comment">// end_nthal</span>
02598 
02599 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
02600 <a class="code" href="../../d9/d4/ke_2debug_8c.html#a12">KeThawExecution</a> (
02601     IN BOOLEAN Enable
02602     );
02603 
02604 
02605 <span class="comment">// begin_nthal</span>
02606 
02607 <span class="comment">//</span>
02608 <span class="comment">// Define the firmware routine types</span>
02609 <span class="comment">//</span>
02610 
<a name="l02611"></a><a class="code" href="../../d4/d9/ke_8h.html#a411">02611</a> <span class="keyword">typedef</span> <span class="keyword">enum</span> <a class="code" href="../../d4/d9/ke_8h.html#a411">_FIRMWARE_REENTRY</a> {
02612     <a class="code" href="../../d4/d9/ke_8h.html#a411a241">HalHaltRoutine</a>,
02613     <a class="code" href="../../d4/d9/ke_8h.html#a411a242">HalPowerDownRoutine</a>,
02614     <a class="code" href="../../d4/d9/ke_8h.html#a411a243">HalRestartRoutine</a>,
02615     <a class="code" href="../../d4/d9/ke_8h.html#a411a244">HalRebootRoutine</a>,
02616     <a class="code" href="../../d4/d9/ke_8h.html#a411a245">HalInteractiveModeRoutine</a>,
02617     <a class="code" href="../../d4/d9/ke_8h.html#a411a246">HalMaximumRoutine</a>
02618 } <a class="code" href="../../d4/d9/ke_8h.html#a118">FIRMWARE_REENTRY</a>, *<a class="code" href="../../d4/d9/ke_8h.html#a119">PFIRMWARE_REENTRY</a>;
02619 <span class="comment">// end_nthal</span>
02620 
02621 
02622 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
02623 <a class="code" href="../../d9/d4/ke_2debug_8c.html#a13">KeReturnToFirmware</a> (
02624     IN FIRMWARE_REENTRY Routine
02625     );
02626 
02627 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
02628 <a class="code" href="../../d8/d6/ppc_2allproc_8c.html#a6">KeStartAllProcessors</a> (
02629     VOID
02630     );
02631 
02632 <span class="comment">//</span>
02633 <span class="comment">// Balance set manager thread startup function.</span>
02634 <span class="comment">//</span>
02635 
02636 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
02637 <a class="code" href="../../d9/d0/balmgr_8c.html#a24">KeBalanceSetManager</a> (
02638     IN PVOID Context
02639     );
02640 
02641 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
02642 <a class="code" href="../../d9/d0/balmgr_8c.html#a25">KeSwapProcessOrStack</a> (
02643     IN PVOID Context
02644     );
02645 
02646 <span class="comment">//</span>
02647 <span class="comment">// User mode callback.</span>
02648 <span class="comment">//</span>
02649 
02650 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
02651 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
02652 <a class="code" href="../../d7/d4/ke_2ppc_2callback_8c.html#a0">KeUserModeCallback</a> (
02653     IN ULONG ApiNumber,
02654     IN PVOID InputBuffer,
02655     IN ULONG InputLength,
02656     OUT PVOID *OutputBuffer,
02657     OUT PULONG OutputLength
02658     );
02659 
02660 <span class="preprocessor">#if defined(_IA64_)</span>
02661 <span class="preprocessor"></span>PVOID
02662 <a class="code" href="../../d4/d9/ke_8h.html#a395">KeSwitchKernelStack</a> (
02663     IN PVOID StackBase,
02664     IN PVOID StackLimit,
02665     IN PVOID BStoreLimit
02666     );
02667 <span class="preprocessor">#else</span>
02668 <span class="preprocessor"></span>PVOID
02669 <a class="code" href="../../d4/d9/ke_8h.html#a395">KeSwitchKernelStack</a> (
02670     IN PVOID StackBase,
02671     IN PVOID StackLimit
02672     );
02673 <span class="preprocessor">#endif // defined(_IA64_)</span>
02674 <span class="preprocessor"></span>
02675 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
02676 <a class="code" href="../../d2/d9/ppc_2exceptn_8c.html#a13">KeRaiseUserException</a>(
02677     IN NTSTATUS ExceptionCode
02678     );
02679 
02680 <span class="comment">// begin_nthal</span>
02681 <span class="comment">//</span>
02682 <span class="comment">// Find ARC configuration information function.</span>
02683 <span class="comment">//</span>
02684 
02685 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
02686 <a class="code" href="../../d5/d8/struct__CONFIGURATION__COMPONENT__DATA.html">PCONFIGURATION_COMPONENT_DATA</a>
02687 <a class="code" href="../../d9/d4/config_8c.html#a0">KeFindConfigurationEntry</a> (
02688     IN <a class="code" href="../../d5/d8/struct__CONFIGURATION__COMPONENT__DATA.html">PCONFIGURATION_COMPONENT_DATA</a> Child,
02689     IN CONFIGURATION_CLASS Class,
02690     IN CONFIGURATION_TYPE Type,
02691     IN PULONG Key OPTIONAL
02692     );
02693 
02694 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
02695 <a class="code" href="../../d5/d8/struct__CONFIGURATION__COMPONENT__DATA.html">PCONFIGURATION_COMPONENT_DATA</a>
02696 <a class="code" href="../../d9/d4/config_8c.html#a1">KeFindConfigurationNextEntry</a> (
02697     IN <a class="code" href="../../d5/d8/struct__CONFIGURATION__COMPONENT__DATA.html">PCONFIGURATION_COMPONENT_DATA</a> Child,
02698     IN CONFIGURATION_CLASS Class,
02699     IN CONFIGURATION_TYPE Type,
02700     IN PULONG Key OPTIONAL,
02701     IN <a class="code" href="../../d5/d8/struct__CONFIGURATION__COMPONENT__DATA.html">PCONFIGURATION_COMPONENT_DATA</a> *Resume
02702     );
02703 <span class="comment">// end_nthal</span>
02704 
02705 <span class="comment">//</span>
02706 <span class="comment">// begin_ntddk begin_nthal begin_ntifs</span>
02707 <span class="comment">//</span>
02708 <span class="comment">// Context swap notify routine.</span>
02709 <span class="comment">//</span>
02710 
02711 <span class="keyword">typedef</span>
02712 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
<a name="l02713"></a><a class="code" href="../../d4/d9/ke_8h.html#a120">02713</a> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a0">FASTCALL</a> *<a class="code" href="../../d4/d9/ke_8h.html#a120">PSWAP_CONTEXT_NOTIFY_ROUTINE</a>)(
02714     IN HANDLE OldThreadId,
02715     IN HANDLE NewThreadId
02716     );
02717 
02718 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
02719 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
02720 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a0">FASTCALL</a>
02721 <a class="code" href="../../d7/d0/ke_2miscc_8c.html#a12">KeSetSwapContextNotifyRoutine</a>(
02722     IN PSWAP_CONTEXT_NOTIFY_ROUTINE NotifyRoutine
02723     );
02724 
02725 <span class="comment">//</span>
02726 <span class="comment">// Thread select notify routine.</span>
02727 <span class="comment">//</span>
02728 
02729 <span class="keyword">typedef</span>
02730 LOGICAL
<a name="l02731"></a><a class="code" href="../../d4/d9/ke_8h.html#a121">02731</a> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a0">FASTCALL</a> *<a class="code" href="../../d4/d9/ke_8h.html#a121">PTHREAD_SELECT_NOTIFY_ROUTINE</a>)(
02732     IN HANDLE ThreadId
02733     );
02734 
02735 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
02736 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
02737 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a0">FASTCALL</a>
02738 <a class="code" href="../../d7/d0/ke_2miscc_8c.html#a13">KeSetThreadSelectNotifyRoutine</a>(
02739     IN PTHREAD_SELECT_NOTIFY_ROUTINE NotifyRoutine
02740     );
02741 
02742 <span class="comment">//</span>
02743 <span class="comment">// Time update notify routine.</span>
02744 <span class="comment">//</span>
02745 
02746 <span class="keyword">typedef</span>
02747 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
<a name="l02748"></a><a class="code" href="../../d4/d9/ke_8h.html#a122">02748</a> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a0">FASTCALL</a> *<a class="code" href="../../d4/d9/ke_8h.html#a122">PTIME_UPDATE_NOTIFY_ROUTINE</a>)(
02749     IN HANDLE ThreadId,
02750     IN <a class="code" href="../../d0/d9/ntosdef_8h.html#a39">KPROCESSOR_MODE</a> Mode
02751     );
02752 
02753 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
02754 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
02755 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a0">FASTCALL</a>
02756 <a class="code" href="../../d7/d0/ke_2miscc_8c.html#a14">KeSetTimeUpdateNotifyRoutine</a>(
02757     IN PTIME_UPDATE_NOTIFY_ROUTINE NotifyRoutine
02758     );
02759 
02760 <span class="comment">// end_ntddk end_nthal end_ntifs</span>
02761 
02762 <span class="comment">//</span>
02763 <span class="comment">// External references to public kernel data structures</span>
02764 <span class="comment">//</span>
02765 
<a name="l02766"></a><a class="code" href="../../d4/d9/ke_8h.html#a123">02766</a> <span class="keyword">extern</span> KAFFINITY <a class="code" href="../../d4/d9/ke_8h.html#a123">KeActiveProcessors</a>;
<a name="l02767"></a><a class="code" href="../../d4/d9/ke_8h.html#a124">02767</a> <span class="keyword">extern</span> LARGE_INTEGER <a class="code" href="../../d4/d9/ke_8h.html#a124">KeBootTime</a>;
<a name="l02768"></a><a class="code" href="../../d4/d9/ke_8h.html#a125">02768</a> <span class="keyword">extern</span> ULONGLONG <a class="code" href="../../d4/d9/ke_8h.html#a125">KeBootTimeBias</a>;
<a name="l02769"></a><a class="code" href="../../d4/d9/ke_8h.html#a126">02769</a> <span class="keyword">extern</span> ULONGLONG <a class="code" href="../../d4/d9/ke_8h.html#a126">KeInterruptTimeBias</a>;
<a name="l02770"></a><a class="code" href="../../d4/d9/ke_8h.html#a127">02770</a> <span class="keyword">extern</span> LIST_ENTRY <a class="code" href="../../d4/d9/ke_8h.html#a127">KeBugCheckCallbackListHead</a>;
<a name="l02771"></a><a class="code" href="../../d4/d9/ke_8h.html#a128">02771</a> <span class="keyword">extern</span> KSPIN_LOCK <a class="code" href="../../d4/d9/ke_8h.html#a128">KeBugCheckCallbackLock</a>;
<a name="l02772"></a><a class="code" href="../../d4/d9/ke_8h.html#a129">02772</a> <span class="keyword">extern</span> <a class="code" href="../../d4/d9/ke_8h.html#a117">PGDI_BATCHFLUSH_ROUTINE</a> <a class="code" href="../../d4/d9/ke_8h.html#a129">KeGdiFlushUserBatch</a>;
<a name="l02773"></a><a class="code" href="../../d4/d9/ke_8h.html#a130">02773</a> <span class="keyword">extern</span> <a class="code" href="../../d1/d2/struct__LOADER__PARAMETER__BLOCK.html">PLOADER_PARAMETER_BLOCK</a> <a class="code" href="../../d4/d9/ke_8h.html#a130">KeLoaderBlock</a>;
<a name="l02774"></a><a class="code" href="../../d4/d9/ke_8h.html#a131">02774</a> <span class="keyword">extern</span> ULONG <a class="code" href="../../d4/d9/ke_8h.html#a131">KeMaximumIncrement</a>;
<a name="l02775"></a><a class="code" href="../../d4/d9/ke_8h.html#a132">02775</a> <span class="keyword">extern</span> ULONG <a class="code" href="../../d4/d9/ke_8h.html#a132">KeMinimumIncrement</a>;
<a name="l02776"></a><a class="code" href="../../d4/d9/ke_8h.html#a133">02776</a> <span class="keyword">extern</span> CCHAR <a class="code" href="../../d4/d9/ke_8h.html#a133">KeNumberProcessors</a>;                    <span class="comment">// nthal</span>
<a name="l02777"></a><a class="code" href="../../d4/d9/ke_8h.html#a134">02777</a> <span class="keyword">extern</span> <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> <a class="code" href="../../d4/d9/ke_8h.html#a134">KeProcessorArchitecture</a>;
<a name="l02778"></a><a class="code" href="../../d4/d9/ke_8h.html#a135">02778</a> <span class="keyword">extern</span> <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> <a class="code" href="../../d4/d9/ke_8h.html#a135">KeProcessorLevel</a>;
<a name="l02779"></a><a class="code" href="../../d4/d9/ke_8h.html#a136">02779</a> <span class="keyword">extern</span> <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> <a class="code" href="../../d4/d9/ke_8h.html#a136">KeProcessorRevision</a>;
<a name="l02780"></a><a class="code" href="../../d4/d9/ke_8h.html#a137">02780</a> <span class="keyword">extern</span> ULONG <a class="code" href="../../d4/d9/ke_8h.html#a137">KeFeatureBits</a>;
<a name="l02781"></a><a class="code" href="../../d4/d9/ke_8h.html#a138">02781</a> <span class="keyword">extern</span> CCHAR <a class="code" href="../../d8/d0/hivecell_8c.html#a5">KiFindFirstSetRight</a>[256];
<a name="l02782"></a><a class="code" href="../../d4/d9/ke_8h.html#a139">02782</a> <span class="keyword">extern</span> PKPRCB <a class="code" href="../../d4/d9/ke_8h.html#a139">KiProcessorBlock</a>[];
<a name="l02783"></a><a class="code" href="../../d4/d9/ke_8h.html#a140">02783</a> <span class="keyword">extern</span> ULONG <a class="code" href="../../d4/d9/ke_8h.html#a140">KiStackProtectTime</a>;
<a name="l02784"></a><a class="code" href="../../d4/d9/ke_8h.html#a141">02784</a> <span class="keyword">extern</span> <a class="code" href="../../d2/d8/struct__KTHREAD__SWITCH__COUNTERS.html">KTHREAD_SWITCH_COUNTERS</a> <a class="code" href="../../d4/d9/ke_8h.html#a141">KeThreadSwitchCounters</a>;
02785 
02786 <span class="preprocessor">#if !defined(NT_UP)</span>
02787 <span class="preprocessor"></span>
<a name="l02788"></a><a class="code" href="../../d4/d9/ke_8h.html#a142">02788</a> <span class="keyword">extern</span> ULONG <a class="code" href="../../d4/d9/ke_8h.html#a142">KeRegisteredProcessors</a>;
<a name="l02789"></a><a class="code" href="../../d4/d9/ke_8h.html#a143">02789</a> <span class="keyword">extern</span> ULONG <a class="code" href="../../d4/d9/ke_8h.html#a143">KeLicensedProcessors</a>;
02790 
02791 <span class="preprocessor">#endif</span>
02792 <span class="preprocessor"></span>
<a name="l02793"></a><a class="code" href="../../d4/d9/ke_8h.html#a144">02793</a> <span class="keyword">extern</span> PULONG <a class="code" href="../../d4/d9/ke_8h.html#a144">KeServiceCountTable</a>;
<a name="l02794"></a><a class="code" href="../../d4/d9/ke_8h.html#a145">02794</a> <span class="keyword">extern</span> <a class="code" href="../../d9/d7/struct__KSERVICE__TABLE__DESCRIPTOR.html">KSERVICE_TABLE_DESCRIPTOR</a> <a class="code" href="../../d4/d9/ke_8h.html#a145">KeServiceDescriptorTable</a>[<a class="code" href="../../d4/d9/ke_8h.html#a13">NUMBER_SERVICE_TABLES</a>];
<a name="l02795"></a><a class="code" href="../../d4/d9/ke_8h.html#a146">02795</a> <span class="keyword">extern</span> <a class="code" href="../../d9/d7/struct__KSERVICE__TABLE__DESCRIPTOR.html">KSERVICE_TABLE_DESCRIPTOR</a> <a class="code" href="../../d4/d9/ke_8h.html#a146">KeServiceDescriptorTableShadow</a>[<a class="code" href="../../d4/d9/ke_8h.html#a13">NUMBER_SERVICE_TABLES</a>];
02796 
<a name="l02797"></a><a class="code" href="../../d4/d9/ke_8h.html#a147">02797</a> <span class="keyword">extern</span> <span class="keyword">volatile</span> KSYSTEM_TIME <a class="code" href="../../d4/d9/ke_8h.html#a147">KeTickCount</a>;           <span class="comment">// ntddk wdm nthal ntifs</span>
02798 
02799 <span class="comment">// begin_nthal</span>
02800 
02801 <span class="preprocessor">#if defined(_ALPHA_)</span>
02802 <span class="preprocessor"></span>
02803 <span class="keyword">extern</span> ULONG KeNumberProcessIds;
02804 <span class="keyword">extern</span> ULONG KeNumberTbEntries;
02805 
02806 <span class="preprocessor">#endif</span>
02807 <span class="preprocessor"></span>
<a name="l02808"></a><a class="code" href="../../d4/d9/ke_8h.html#a148">02808</a> <span class="keyword">extern</span> PVOID <a class="code" href="../../d4/d9/ke_8h.html#a148">KeUserApcDispatcher</a>;
<a name="l02809"></a><a class="code" href="../../d4/d9/ke_8h.html#a149">02809</a> <span class="keyword">extern</span> PVOID <a class="code" href="../../d4/d9/ke_8h.html#a149">KeUserCallbackDispatcher</a>;
<a name="l02810"></a><a class="code" href="../../d4/d9/ke_8h.html#a150">02810</a> <span class="keyword">extern</span> PVOID <a class="code" href="../../d4/d9/ke_8h.html#a150">KeUserExceptionDispatcher</a>;
<a name="l02811"></a><a class="code" href="../../d4/d9/ke_8h.html#a151">02811</a> <span class="keyword">extern</span> PVOID <a class="code" href="../../d4/d9/ke_8h.html#a151">KeRaiseUserExceptionDispatcher</a>;
<a name="l02812"></a><a class="code" href="../../d4/d9/ke_8h.html#a152">02812</a> <span class="keyword">extern</span> ULONG <a class="code" href="../../d4/d9/ke_8h.html#a152">KeTimeAdjustment</a>;
<a name="l02813"></a><a class="code" href="../../d4/d9/ke_8h.html#a153">02813</a> <span class="keyword">extern</span> ULONG <a class="code" href="../../d4/d9/ke_8h.html#a153">KeTimeIncrement</a>;
<a name="l02814"></a><a class="code" href="../../d4/d9/ke_8h.html#a154">02814</a> <span class="keyword">extern</span> BOOLEAN <a class="code" href="../../d4/d9/ke_8h.html#a154">KeTimeSynchronization</a>;
02815 
02816 <span class="comment">// end_nthal</span>
02817 
02818 <span class="comment">// begin_ntddk begin_wdm begin_nthal begin_ntifs</span>
02819 
<a name="l02820"></a><a class="code" href="../../d4/d9/ke_8h.html#a412">02820</a> <span class="keyword">typedef</span> <span class="keyword">enum</span> <a class="code" href="../../d4/d9/ke_8h.html#a412">_MEMORY_CACHING_TYPE_ORIG</a> {
02821     <a class="code" href="../../d4/d9/ke_8h.html#a412a247">MmFrameBufferCached</a> = 2
02822 } <a class="code" href="../../d4/d9/ke_8h.html#a155">MEMORY_CACHING_TYPE_ORIG</a>;
02823 
<a name="l02824"></a><a class="code" href="../../d4/d9/ke_8h.html#a413">02824</a> <span class="keyword">typedef</span> <span class="keyword">enum</span> <a class="code" href="../../d4/d9/ke_8h.html#a413">_MEMORY_CACHING_TYPE</a> {
02825     <a class="code" href="../../d4/d9/ke_8h.html#a413a248">MmNonCached</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>,
02826     <a class="code" href="../../d4/d9/ke_8h.html#a413a249">MmCached</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>,
02827     <a class="code" href="../../d4/d9/ke_8h.html#a413a250">MmWriteCombined</a> = <a class="code" href="../../d4/d9/ke_8h.html#a412a247">MmFrameBufferCached</a>,
02828     <a class="code" href="../../d4/d9/ke_8h.html#a413a251">MmHardwareCoherentCached</a>,
02829     <a class="code" href="../../d4/d9/ke_8h.html#a413a252">MmNonCachedUnordered</a>,       <span class="comment">// IA64</span>
02830     <a class="code" href="../../d4/d9/ke_8h.html#a413a253">MmUSWCCached</a>,
02831     <a class="code" href="../../d4/d9/ke_8h.html#a413a254">MmMaximumCacheType</a>
02832 } <a class="code" href="../../d4/d9/ke_8h.html#a156">MEMORY_CACHING_TYPE</a>;
02833 
02834 <span class="comment">// end_ntddk end_wdm end_nthal end_ntifs</span>
02835 
02836 <span class="preprocessor">#if defined(_X86_)</span>
02837 <span class="preprocessor"></span>
02838 <span class="comment">//</span>
02839 <span class="comment">// Routine for setting memory type for physical address ranges</span>
02840 <span class="comment">//</span>
02841 
02842 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
02843 <a class="code" href="../../d8/d4/mtrr_8c.html#a32">KeSetPhysicalCacheTypeRange</a> (
02844     IN PHYSICAL_ADDRESS PhysicalAddress,
02845     IN ULONG NumberOfBytes,
02846     IN MEMORY_CACHING_TYPE CacheType
02847     );
02848 
02849 <span class="preprocessor">#endif</span>
02850 <span class="preprocessor"></span>
02851 <span class="preprocessor">#if defined(_X86_)</span>
02852 <span class="preprocessor"></span>
02853 <span class="comment">//</span>
02854 <span class="comment">// Routine for zeroing a physical page.   These are defined</span>
02855 <span class="comment">// as calls through a function pointer which is set to point</span>
02856 <span class="comment">// at the optimal routine for this processor implementation.</span>
02857 <span class="comment">//</span>
02858 
02859 <span class="keyword">typedef</span>
02860 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
02861 (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a0">FASTCALL</a> *KE_ZERO_PAGE_ROUTINE)(
02862     IN PVOID PageBase
02863     );
02864 
02865 <span class="keyword">extern</span> KE_ZERO_PAGE_ROUTINE <a class="code" href="../../d6/d9/kernlini_8c.html#a24">KeZeroPage</a>;
02866 <span class="keyword">extern</span> KE_ZERO_PAGE_ROUTINE <a class="code" href="../../d6/d9/kernlini_8c.html#a25">KeZeroPageFromIdleThread</a>;
02867 
02868 <span class="preprocessor">#endif</span>
02869 <span class="preprocessor"></span>
02870 <span class="preprocessor">#if defined(_IA64_)</span>
02871 <span class="preprocessor"></span><a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
02872 <a class="code" href="../../d7/d6/ke_2ia64_2region_8c.html#a5">KeEnableSessionSharing</a>(
02873     PREGION_MAP_INFO SessionMapInfo
02874     );
02875 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a> 
02876 <a class="code" href="../../d7/d6/ke_2ia64_2region_8c.html#a9">KeDetachSessionSpace</a>(
02877     VOID 
02878     );
02879 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
02880 <a class="code" href="../../d7/d6/ke_2ia64_2region_8c.html#a10">KeAddSessionSpace</a>(
02881     PKPROCESS Process,
02882     PREGION_MAP_INFO SessionMapInfo
02883     );
02884 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
02885 <a class="code" href="../../d7/d6/ke_2ia64_2region_8c.html#a7">KeAttachSessionSpace</a>(
02886     PREGION_MAP_INFO SessionMapInfo
02887     );
02888 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
02889 <a class="code" href="../../d7/d6/ke_2ia64_2region_8c.html#a6">KeDisableSessionSharing</a>(
02890     PREGION_MAP_INFO SessionMapInfo
02891     );
02892 <span class="preprocessor">#endif</span>
02893 <span class="preprocessor"></span>
02894 <span class="preprocessor">#endif // _KE_</span>
02895 <span class="preprocessor"></span>
</div></pre><hr size="1"><address style="align: right;"><small>Generated on Sat May 15 19:40:35 2004 for test by
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>

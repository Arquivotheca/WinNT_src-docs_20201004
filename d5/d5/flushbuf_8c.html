<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>test: flushbuf.c File Reference</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="../../main.html">Main&nbsp;Page</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Class&nbsp;List</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Class&nbsp;Members</a> | <a class="qindex" href="../../globals.html">File&nbsp;Members</a></div>
<h1>flushbuf.c File Reference</h1><code>#include "<a class="el" href="../../d5/d7/mi_8h-source.html">mi.h</a>"</code><br>

<p>
<a href="../../d6/d4/flushbuf_8c-source.html">Go to the source code of this file.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d5/flushbuf_8c.html#a0">NtFlushWriteBuffer</a> (VOID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>ULONG&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d5/flushbuf_8c.html#a1">MiFlushRangeFilter</a> (IN PEXCEPTION_POINTERS ExceptionPointers, IN PVOID *BaseAddress, IN PULONG Length, IN PBOOLEAN Retry)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d5/flushbuf_8c.html#a2">NtFlushInstructionCache</a> (IN HANDLE ProcessHandle, IN PVOID BaseAddress OPTIONAL, IN ULONG Length)</td></tr>

</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="a1" doxytag="flushbuf.c::MiFlushRangeFilter" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ULONG MiFlushRangeFilter           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PEXCEPTION_POINTERS&nbsp;</td>
          <td class="mdname" nowrap> <em>ExceptionPointers</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PVOID *&nbsp;</td>
          <td class="mdname" nowrap> <em>BaseAddress</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>Length</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PBOOLEAN&nbsp;</td>
          <td class="mdname" nowrap> <em>Retry</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d4/flushbuf_8c-source.html#l00060">60</a> of file <a class="el" href="../../d6/d4/flushbuf_8c-source.html">flushbuf.c</a>.
<p>
References <a class="el" href="../../d7/d6/halmips_8h-source.html#l00055">EXCEPTION_EXECUTE_HANDLER</a>, <a class="el" href="../../d3/d0/mm_8h-source.html#l00117">ROUND_TO_PAGES</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d6/d4/flushbuf_8c-source.html#l00142">NtFlushInstructionCache()</a>.
<p>
<pre class="fragment"><div>00069                    :
00070 
00071     This <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> exception handler used by <a class="code" href="../../d5/d5/flushbuf_8c.html#a2">NtFlushInstructionCache</a> to protect
00072     against bad <span class="keyword">virtual</span> addresses passed to <a class="code" href="../../d9/d4/alpha_2flush_8c.html#a7">KeSweepIcacheRange</a>.  If an
00073     access violation occurs, <span class="keyword">this</span> routine causes <a class="code" href="../../d5/d5/flushbuf_8c.html#a2">NtFlushInstructionCache</a> to
00074     restart <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> sweep at <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> page following <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> failing page.
00075 
00076 Arguments:
00077 
00078     ExceptionPointers - Supplies exception information.
00079 
00080     BaseAddress - Supplies a pointer to address <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> base of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> region
00081         being flushed.  If <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> failing address <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> not in <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> last page
00082         of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> region, <span class="keyword">this</span> routine updates BaseAddress to point to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a>
00083         next page of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> region.
00084 
00085     Length - Supplies a pointer <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> length of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> region being flushed.
00086         If <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> failing address <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> not in <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> last page of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> region,
00087         <span class="keyword">this</span> routine updates Length to reflect restarting <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> flush at
00088         <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> next page of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> region.
00089 
00090     Retry - Supplies a pointer to a <span class="keywordtype">boolean</span> that <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> caller has initialized
00091         to <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>.  This routine sets <span class="keyword">this</span> <span class="keywordtype">boolean</span> to <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a> <span class="keywordflow">if</span> an access
00092         violation occurs in a page before <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> last page of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> flush region.
00093 
00094 Return Value:
00095 
00096     <a class="code" href="../../d6/d7/halmips_8h.html#a33">EXCEPTION_EXECUTE_HANDLER</a>.
00097 
00098 --*/
00099 
00100 {
00101     PEXCEPTION_RECORD ExceptionRecord;
00102     ULONG_PTR BadVa;
00103     ULONG_PTR NextVa;
00104     ULONG_PTR EndVa;
00105 
00106     ExceptionRecord = ExceptionPointers-&gt;ExceptionRecord;
00107 
00108     <span class="comment">//</span>
00109     <span class="comment">// If the exception was an access violation, skip the current page of the</span>
00110     <span class="comment">// region and move to the next page.</span>
00111     <span class="comment">//</span>
00112 
00113     <span class="keywordflow">if</span> ( ExceptionRecord-&gt;ExceptionCode == STATUS_ACCESS_VIOLATION ) {
00114 
00115         <span class="comment">//</span>
00116         <span class="comment">// Get the failing address, calculate the base address of the next page,</span>
00117         <span class="comment">// and calculate the address at the end of the region.</span>
00118         <span class="comment">//</span>
00119 
00120         BadVa = ExceptionRecord-&gt;ExceptionInformation[1];
00121         NextVa = <a class="code" href="../../d2/d1/mm_8h.html#a4">ROUND_TO_PAGES</a>( BadVa + 1 );
00122         EndVa = *(PULONG_PTR)BaseAddress + *Length;
00123 
00124         <span class="comment">//</span>
00125         <span class="comment">// If the next page didn't wrap, and the next page is below the end of</span>
00126         <span class="comment">// the region, update Length and BaseAddress appropriately and set Retry</span>
00127         <span class="comment">// to TRUE to indicate to NtFlushInstructionCache that it should call</span>
00128         <span class="comment">// KeSweepIcacheRange again.</span>
00129         <span class="comment">//</span>
00130 
00131         <span class="keywordflow">if</span> ( (NextVa &gt; BadVa) &amp;&amp; (NextVa &lt; EndVa) ) {
00132             *Length = (ULONG) (EndVa - NextVa);
00133             *BaseAddress = (PVOID)NextVa;
00134             *Retry = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00135         }
00136     }
00137 
00138     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a33">EXCEPTION_EXECUTE_HANDLER</a>;
00139 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="flushbuf.c::NtFlushInstructionCache" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS NtFlushInstructionCache           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>ProcessHandle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PVOID BaseAddress&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>Length</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d4/flushbuf_8c-source.html#l00142">142</a> of file <a class="el" href="../../d6/d4/flushbuf_8c-source.html">flushbuf.c</a>.
<p>
References <a class="el" href="../../d7/d6/halmips_8h-source.html#l00055">EXCEPTION_EXECUTE_HANDLER</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d4/d4/procobj_8c-source.html#l00166">KeAttachProcess()</a>, <a class="el" href="../../d4/d4/procobj_8c-source.html#l00405">KeDetachProcess()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00624">KernelMode</a>, <a class="el" href="../../d4/d4/ppc_2flush_8c-source.html#l00356">KeSweepIcache()</a>, <a class="el" href="../../d4/d4/ppc_2flush_8c-source.html#l00502">KeSweepIcacheRange()</a>, <a class="el" href="../../d1/d8/ntosdef_8h-source.html#l00174">KPROCESSOR_MODE</a>, <a class="el" href="../../d6/d4/flushbuf_8c-source.html#l00060">MiFlushRangeFilter()</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d9/ob_8h-source.html#l00494">ObDereferenceObject</a>, <a class="el" href="../../d8/d0/obref_8c-source.html#l00542">ObReferenceObjectByHandle()</a>, <a class="el" href="../../d1/d8/ntosdef_8h-source.html#l00462">PAGED_CODE</a>, <a class="el" href="../../d6/d7/ex_8h-source.html#l01209">ProbeForRead</a>, <a class="el" href="../../d0/d8/ntos_8h-source.html#l00088">PsProcessType</a>, and <a class="el" href="../../d3/d0/cttoken_8c-source.html#l00135">Status</a>.
<p>
Referenced by <a class="el" href="../../d3/d2/ldrsnap_8c-source.html#l03417">LdrpSetProtection()</a>, and <a class="el" href="../../d3/d2/ldrsnap_8c-source.html#l02258">LdrpSnapIAT()</a>.
<p>
<pre class="fragment"><div>00150                    :
00151 
00152     This function flushes <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> instruction cache <span class="keywordflow">for</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> specified process.
00153 
00154 Arguments:
00155 
00156     ProcessHandle - Supplies a handle to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> process in which <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> instruction
00157         cache <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> to be flushed. Must have PROCESS_VM_WRITE access to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a>
00158         specified process.
00159 
00160     BaseAddress - Supplies an optional pointer to base of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> region that
00161         <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> flushed.
00162 
00163     Length - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> length of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> region that <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> flushed <span class="keywordflow">if</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> base
00164         address <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> specified.
00165 
00166 Return Value:
00167 
00168     STATUS_SUCCESS.
00169 
00170 --*/
00171 
00172 {
00173 
00174     <a class="code" href="../../d0/d9/ntosdef_8h.html#a39">KPROCESSOR_MODE</a> PreviousMode;
00175     <a class="code" href="../../d0/d4/struct__EPROCESS.html">PEPROCESS</a> Process;
00176     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
00177     BOOLEAN Retry;
00178     PVOID RangeBase;
00179     ULONG RangeLength;
00180 
00181     <a class="code" href="../../d0/d9/ntosdef_8h.html#a28">PAGED_CODE</a>();
00182 
00183     PreviousMode = KeGetPreviousMode();
00184 
00185     <span class="comment">//</span>
00186     <span class="comment">// If the base address is not specified, or the base address is specified</span>
00187     <span class="comment">// and the length is not zero, then flush the specified instruction cache</span>
00188     <span class="comment">// range.</span>
00189     <span class="comment">//</span>
00190 
00191     <span class="keywordflow">if</span> ((ARGUMENT_PRESENT(BaseAddress) == <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>) || (Length != 0)) {
00192 
00193         <span class="comment">//</span>
00194         <span class="comment">// If previous mode is user and the range specified falls in kernel</span>
00195         <span class="comment">// address space, return an error.</span>
00196         <span class="comment">//</span>
00197 
00198         <span class="keywordflow">if</span> ((ARGUMENT_PRESENT(BaseAddress) != <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>) &amp;&amp;
00199             (PreviousMode != <a class="code" href="../../d6/d7/halmips_8h.html#a456">KernelMode</a>)) {
00200             <span class="keywordflow">try</span> {
00201                 <a class="code" href="../../d5/d8/ex_8h.html#a11">ProbeForRead</a>(BaseAddress, Length, <span class="keyword">sizeof</span>(UCHAR));
00202             } except(EXCEPTION_EXECUTE_HANDLER) {
00203                 <span class="keywordflow">return</span> GetExceptionCode();
00204             }
00205         }
00206 
00207         <span class="comment">//</span>
00208         <span class="comment">// If the specified process is not the current process, then</span>
00209         <span class="comment">// the process must be attached to during the flush.</span>
00210         <span class="comment">//</span>
00211 
00212         <span class="keywordflow">if</span> (ProcessHandle != NtCurrentProcess()) {
00213 
00214             <span class="comment">//</span>
00215             <span class="comment">// Reference the specified process checking for PROCESS_VM_WRITE</span>
00216             <span class="comment">// access.</span>
00217             <span class="comment">//</span>
00218 
00219             <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d7/d1/obref_8c.html#a4">ObReferenceObjectByHandle</a>(ProcessHandle,
00220                                                PROCESS_VM_WRITE,
00221                                                PsProcessType,
00222                                                PreviousMode,
00223                                                (PVOID *)&amp;Process,
00224                                                NULL);
00225 
00226             <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(Status)) {
00227                 <span class="keywordflow">return</span> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
00228             }
00229 
00230             <span class="comment">//</span>
00231             <span class="comment">// Attach to the process.</span>
00232             <span class="comment">//</span>
00233 
00234             <a class="code" href="../../d3/d5/procobj_8c.html#a4">KeAttachProcess</a>(&amp;Process-&gt;<a class="code" href="../../d0/d4/struct__EPROCESS.html#o0">Pcb</a>);
00235         }
00236 
00237         <span class="comment">//</span>
00238         <span class="comment">// If the base address is not specified, sweep the entire instruction</span>
00239         <span class="comment">// cache.  If the base address is specified, flush the specified range.</span>
00240         <span class="comment">//</span>
00241 
00242         <span class="keywordflow">if</span> (ARGUMENT_PRESENT(BaseAddress) == <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>) {
00243             <a class="code" href="../../d3/d5/ppc_2flush_8c.html#a7">KeSweepIcache</a>(FALSE);
00244 
00245         } <span class="keywordflow">else</span> {
00246 
00247             <span class="comment">//</span>
00248             <span class="comment">// Parts of the specified range may be invalid.  An exception</span>
00249             <span class="comment">// handler is used to skip over those parts.  Before calling</span>
00250             <span class="comment">// KeSweepIcacheRange, we set Retry to FALSE.  If an access</span>
00251             <span class="comment">// violation occurs in KeSweepIcacheRange, the MiFlushRangeFilter</span>
00252             <span class="comment">// exception filter is called.  It updates RangeBase and</span>
00253             <span class="comment">// RangeLength to skip over the failing page, and sets Retry to</span>
00254             <span class="comment">// TRUE.  As long as Retry is TRUE, we continue to call</span>
00255             <span class="comment">// KeSweepIcacheRange.</span>
00256             <span class="comment">//</span>
00257 
00258             RangeBase = BaseAddress;
00259             RangeLength = Length;
00260 
00261             <span class="keywordflow">do</span> {
00262                 Retry = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00263                 <span class="keywordflow">try</span> {
00264                     <a class="code" href="../../d3/d5/ppc_2flush_8c.html#a8">KeSweepIcacheRange</a>(FALSE, RangeBase, RangeLength);
00265                 } except(<a class="code" href="../../d5/d5/flushbuf_8c.html#a1">MiFlushRangeFilter</a>(GetExceptionInformation(),
00266                                             &amp;RangeBase,
00267                                             &amp;RangeLength,
00268                                             &amp;Retry)) {
00269                     <span class="keywordflow">if</span> (GetExceptionCode() != STATUS_ACCESS_VIOLATION) {
00270                         <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = GetExceptionCode();
00271                     }
00272                 }
00273             } <span class="keywordflow">while</span> (Retry != <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00274         }
00275 
00276         <span class="comment">//</span>
00277         <span class="comment">// If the specified process is not the current process, then</span>
00278         <span class="comment">// detach from it and dereference it.</span>
00279         <span class="comment">//</span>
00280 
00281         <span class="keywordflow">if</span> (ProcessHandle != NtCurrentProcess()) {
00282             <a class="code" href="../../d3/d5/procobj_8c.html#a7">KeDetachProcess</a>();
00283             <a class="code" href="../../d4/d0/ob_8h.html#a14">ObDereferenceObject</a>(Process);
00284         }
00285     }
00286 
00287     <span class="keywordflow">return</span> STATUS_SUCCESS;
00288 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a0" doxytag="flushbuf.c::NtFlushWriteBuffer" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS NtFlushWriteBuffer           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">VOID&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d4/flushbuf_8c-source.html#l00032">32</a> of file <a class="el" href="../../d6/d4/flushbuf_8c-source.html">flushbuf.c</a>.
<p>
References <a class="el" href="../../d2/d7/hal_8h.html#a169">KeFlushWriteBuffer()</a>, and <a class="el" href="../../d1/d8/ntosdef_8h-source.html#l00462">PAGED_CODE</a>.
<p>
<pre class="fragment"><div>00038                    :
00039 
00040     This function flushes <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> write buffer on <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> current processor.
00041 
00042 Arguments:
00043 
00044     None.
00045 
00046 Return Value:
00047 
00048     STATUS_SUCCESS.
00049 
00050 --*/
00051 
00052 {
00053     <a class="code" href="../../d0/d9/ntosdef_8h.html#a28">PAGED_CODE</a>();
00054 
00055     <a class="code" href="../../d2/d7/hal_8h.html#a169">KeFlushWriteBuffer</a>();
00056     <span class="keywordflow">return</span> STATUS_SUCCESS;
00057 }

</div></pre>    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Sat May 15 19:43:43 2004 for test by
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>

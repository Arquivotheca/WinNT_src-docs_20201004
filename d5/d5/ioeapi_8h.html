<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>test: ioeapi.h File Reference</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="../../main.html">Main&nbsp;Page</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Class&nbsp;List</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Class&nbsp;Members</a> | <a class="qindex" href="../../globals.html">File&nbsp;Members</a></div>
<h1>ioeapi.h File Reference</h1>
<p>
<a href="../../d6/d4/ioeapi_8h-source.html">Go to the source code of this file.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d2/d5/struct__errid.html">_errid</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d5/struct__errdata.html">_errdata</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d5/struct__errinfo.html">_errinfo</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d2/struct__infoblk.html">_infoblk</a></td></tr>

<tr><td colspan=2><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d5/ioeapi_8h.html#a0">STATUS_IOE_MESSAGE</a>&nbsp;&nbsp;&nbsp;0x11111111</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d5/ioeapi_8h.html#a1">STATUS_IOE_MODULE_ALREADY_REGISTERED</a>&nbsp;&nbsp;&nbsp;0x22222222</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d5/ioeapi_8h.html#a2">STATUS_IOE_DATABASE_NOT_READY</a>&nbsp;&nbsp;&nbsp;0x44444444</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d5/ioeapi_8h.html#a3">MAX_MSG_LEN</a>&nbsp;&nbsp;&nbsp;1023</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d5/ioeapi_8h.html#a4">IOEDATA_NONE</a>&nbsp;&nbsp;&nbsp;0x00000000</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d5/ioeapi_8h.html#a5">IOEDATA_PRIVATE</a>&nbsp;&nbsp;&nbsp;0x00000001</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d5/ioeapi_8h.html#a6">IOEDATA_WSTRING</a>&nbsp;&nbsp;&nbsp;0x00000002</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d5/ioeapi_8h.html#a7">IOEDATA_MAX</a>&nbsp;&nbsp;&nbsp;IOEDATA_WSTRING</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d5/ioeapi_8h.html#a8">IOEDATA_TEXT</a>&nbsp;&nbsp;&nbsp;0x80000000</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d5/ioeapi_8h.html#a9">IOEDATATAG_TYPE_MASK</a>&nbsp;&nbsp;&nbsp;0x000000ff</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d5/ioeapi_8h.html#a10">IOEDATATAG_TYPE_DEVNODE</a>&nbsp;&nbsp;&nbsp;0x00000001</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d5/ioeapi_8h.html#a11">IOEDATATAG_BITS</a>&nbsp;&nbsp;&nbsp;IOEDATATAG_TYPE_MASK</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d5/ioeapi_8h.html#a12">SIG_ERRINFO</a>&nbsp;&nbsp;&nbsp;'IRRE'</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d5/ioeapi_8h.html#a13">SIG_INFOBLK</a>&nbsp;&nbsp;&nbsp;'KLBI'</td></tr>

<tr><td colspan=2><br><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d2/d5/struct__errid.html">_errid</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d5/ioeapi_8h.html#a14">ERRID</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d2/d5/struct__errid.html">_errid</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d5/ioeapi_8h.html#a15">PERRID</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d0/d5/struct__errdata.html">_errdata</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d5/ioeapi_8h.html#a16">ERRDATA</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d0/d5/struct__errdata.html">_errdata</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d5/ioeapi_8h.html#a17">PERRDATA</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d3/d5/struct__errinfo.html">_errinfo</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d5/ioeapi_8h.html#a18">ERRINFO</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d3/d5/struct__errinfo.html">_errinfo</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d5/ioeapi_8h.html#a19">PERRINFO</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d1/d2/struct__infoblk.html">_infoblk</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d5/ioeapi_8h.html#a20">INFOBLK</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d1/d2/struct__infoblk.html">_infoblk</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d5/ioeapi_8h.html#a21">PINFOBLK</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef NTSTATUS(*&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d5/ioeapi_8h.html#a22">PERRHANDLER</a> )(PVOID, ULONG)</td></tr>

<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>HANDLE&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d5/ioeapi_8h.html#a23">IoErrInitErrLogByIrp</a> (IN <a class="el" href="../../d0/d2/struct__IRP.html">PIRP</a> <a class="el" href="../../d0/d6/iop_8h.html#a35">Irp</a>, IN ULONG ulFlags)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>HANDLE&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d5/ioeapi_8h.html#a24">IoErrInitErrLogByThreadID</a> (IN <a class="el" href="../../d1/d8/struct__KTHREAD.html">PKTHREAD</a> ThreadID, IN ULONG ulFlags)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d5/ioeapi_8h.html#a25">IoErrLogErrByIrp</a> (IN <a class="el" href="../../d0/d2/struct__IRP.html">PIRP</a> <a class="el" href="../../d0/d6/iop_8h.html#a35">Irp</a>, IN CONST GUID *ComponentGuid, IN ULONG ErrCode, IN PWSTR TextData OPTIONAL, IN ULONG DataBlkType, IN ULONG DataBlkLen OPTIONAL, IN PVOID DataBlock OPTIONAL, IN CONST GUID *MofGuid OPTIONAL)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d5/ioeapi_8h.html#a26">IoErrLogErrByThreadID</a> (IN <a class="el" href="../../d1/d8/struct__KTHREAD.html">PKTHREAD</a> ThreadID, IN CONST GUID *ComponentGuid, IN ULONG ErrCode, IN PWSTR TextData OPTIONAL, IN ULONG DataBlkType, IN ULONG DataBlkLen OPTIONAL, IN PVOID DataBlock OPTIONAL, IN CONST GUID *MofGuid OPTIONAL)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d5/ioeapi_8h.html#a27">IoErrPropagateErrLog</a> (IN HANDLE ErrLogHandle)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d5/ioeapi_8h.html#a28">IoErrTerminateErrLog</a> (IN HANDLE ErrLogHandle)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d5/ioeapi_8h.html#a29">IoErrRegisterErrHandlers</a> (IN CONST GUID *ModuleGuid, IN ULONG NumErrHandlers, IN <a class="el" href="../../d5/d5/ioeapi_8h.html#a22">PERRHANDLER</a> *HandlerTable)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d3/d5/struct__errinfo.html">PERRINFO</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d5/ioeapi_8h.html#a30">IoErrGetErrData</a> (IN HANDLE ErrLogHandle)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>HANDLE&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d5/ioeapi_8h.html#a31">IoErrSaveErrData</a> (IN HANDLE ErrLogHandle, IN PVOID DataTag OPTIONAL, IN ULONG TagFlags OPTIONAL)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d3/d5/struct__errinfo.html">PERRINFO</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d5/ioeapi_8h.html#a32">IoErrGetSavedData</a> (IN HANDLE SaveDataHandle)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d5/ioeapi_8h.html#a33">IoErrFreeSavedData</a> (IN HANDLE SaveDataHandle)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d5/ioeapi_8h.html#a34">IoErrMatchErrCase</a> (IN <a class="el" href="../../d3/d5/struct__errinfo.html">PERRINFO</a> ErrInfo, OUT PULONG ErrCaseID, OUT PHANDLE ErrCaseHandle OPTIONAL)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d5/ioeapi_8h.html#a35">IoErrFindErrCaseByID</a> (IN ULONG ErrCaseID, OUT PHANDLE ErrCaseHandle)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d5/ioeapi_8h.html#a36">IoErrHandleErrCase</a> (IN <a class="el" href="../../d3/d5/struct__errinfo.html">PERRINFO</a> ErrInfo, IN HANDLE ErrCaseHandle)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d5/ioeapi_8h.html#a37">IoErrGetLongErrMessage</a> (IN <a class="el" href="../../d3/d5/struct__errinfo.html">PERRINFO</a> ErrInfo, IN HANDLE ErrCaseHandle, OUT PUNICODE_STRING unicodeMsg)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d5/ioeapi_8h.html#a38">IoErrGetShortErrMessage</a> (IN <a class="el" href="../../d3/d5/struct__errinfo.html">PERRINFO</a> ErrInfo, IN HANDLE ErrCaseHandle, OUT PUNICODE_STRING unicodeMsg)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOLEAN&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d5/ioeapi_8h.html#a39">IoErrInitSystem</a> (VOID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d5/ioeapi_8h.html#a40">IoErrRetrieveSavedData</a> (OUT <a class="el" href="../../d1/d2/struct__infoblk.html">PINFOBLK</a> InfoBlk, IN ULONG BuffSize, OUT PULONG DataSize OPTIONAL, IN PVOID DataTag OPTIONAL, IN ULONG TagFlags OPTIONAL)</td></tr>

</table>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="a7" doxytag="ioeapi.h::IOEDATA_MAX" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define IOEDATA_MAX&nbsp;&nbsp;&nbsp;IOEDATA_WSTRING          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d4/ioeapi_8h-source.html#l00046">46</a> of file <a class="el" href="../../d6/d4/ioeapi_8h-source.html">ioeapi.h</a>.
<p>
Referenced by <a class="el" href="../../d8/d4/ioerr_8c-source.html#l00255">IoepLogErr()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="ioeapi.h::IOEDATA_NONE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define IOEDATA_NONE&nbsp;&nbsp;&nbsp;0x00000000          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d4/ioeapi_8h-source.html#l00043">43</a> of file <a class="el" href="../../d6/d4/ioeapi_8h-source.html">ioeapi.h</a>.
<p>
Referenced by <a class="el" href="../../d8/d4/ioerr_8c-source.html#l00255">IoepLogErr()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="ioeapi.h::IOEDATA_PRIVATE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define IOEDATA_PRIVATE&nbsp;&nbsp;&nbsp;0x00000001          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d4/ioeapi_8h-source.html#l00044">44</a> of file <a class="el" href="../../d6/d4/ioeapi_8h-source.html">ioeapi.h</a>.
<p>
Referenced by <a class="el" href="../../d8/d4/ioerr_8c-source.html#l01052">IoepCatMsgArg()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a8" doxytag="ioeapi.h::IOEDATA_TEXT" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define IOEDATA_TEXT&nbsp;&nbsp;&nbsp;0x80000000          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d4/ioeapi_8h-source.html#l00047">47</a> of file <a class="el" href="../../d6/d4/ioeapi_8h-source.html">ioeapi.h</a>.
<p>
Referenced by <a class="el" href="../../d8/d4/ioerr_8c-source.html#l01052">IoepCatMsgArg()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a6" doxytag="ioeapi.h::IOEDATA_WSTRING" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define IOEDATA_WSTRING&nbsp;&nbsp;&nbsp;0x00000002          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d4/ioeapi_8h-source.html#l00045">45</a> of file <a class="el" href="../../d6/d4/ioeapi_8h-source.html">ioeapi.h</a>.
<p>
Referenced by <a class="el" href="../../d8/d4/ioerr_8c-source.html#l01052">IoepCatMsgArg()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a11" doxytag="ioeapi.h::IOEDATATAG_BITS" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define IOEDATATAG_BITS&nbsp;&nbsp;&nbsp;IOEDATATAG_TYPE_MASK          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d4/ioeapi_8h-source.html#l00054">54</a> of file <a class="el" href="../../d6/d4/ioeapi_8h-source.html">ioeapi.h</a>.
<p>
Referenced by <a class="el" href="../../d5/d4/ioeapi_8c-source.html#l00538">IoErrSaveErrData()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a10" doxytag="ioeapi.h::IOEDATATAG_TYPE_DEVNODE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define IOEDATATAG_TYPE_DEVNODE&nbsp;&nbsp;&nbsp;0x00000001          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d4/ioeapi_8h-source.html#l00053">53</a> of file <a class="el" href="../../d6/d4/ioeapi_8h-source.html">ioeapi.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a9" doxytag="ioeapi.h::IOEDATATAG_TYPE_MASK" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define IOEDATATAG_TYPE_MASK&nbsp;&nbsp;&nbsp;0x000000ff          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d4/ioeapi_8h-source.html#l00052">52</a> of file <a class="el" href="../../d6/d4/ioeapi_8h-source.html">ioeapi.h</a>.
<p>
Referenced by <a class="el" href="../../d5/d4/ioeapi_8c-source.html#l00698">IoErrRetrieveSavedData()</a>, and <a class="el" href="../../d5/d4/ioeapi_8c-source.html#l00538">IoErrSaveErrData()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="ioeapi.h::MAX_MSG_LEN" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define MAX_MSG_LEN&nbsp;&nbsp;&nbsp;1023          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d4/ioeapi_8h-source.html#l00038">38</a> of file <a class="el" href="../../d6/d4/ioeapi_8h-source.html">ioeapi.h</a>.
<p>
Referenced by <a class="el" href="../../d8/d4/ioerr_8c-source.html#l00936">IoepGetErrMessage()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a12" doxytag="ioeapi.h::SIG_ERRINFO" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define SIG_ERRINFO&nbsp;&nbsp;&nbsp;'IRRE'          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d4/ioeapi_8h-source.html#l00083">83</a> of file <a class="el" href="../../d6/d4/ioeapi_8h-source.html">ioeapi.h</a>.
<p>
Referenced by <a class="el" href="../../d8/d4/ioerr_8c-source.html#l00501">IoepExtractErrData()</a>, <a class="el" href="../../d5/d4/ioeapi_8c-source.html#l00985">IoErrGetLongErrMessage()</a>, <a class="el" href="../../d5/d4/ioeapi_8c-source.html#l01041">IoErrGetShortErrMessage()</a>, <a class="el" href="../../d5/d4/ioeapi_8c-source.html#l00939">IoErrHandleErrCase()</a>, and <a class="el" href="../../d5/d4/ioeapi_8c-source.html#l00800">IoErrMatchErrCase()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a13" doxytag="ioeapi.h::SIG_INFOBLK" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define SIG_INFOBLK&nbsp;&nbsp;&nbsp;'KLBI'          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d4/ioeapi_8h-source.html#l00093">93</a> of file <a class="el" href="../../d6/d4/ioeapi_8h-source.html">ioeapi.h</a>.
<p>
Referenced by <a class="el" href="../../d5/d4/ioeapi_8c-source.html#l00698">IoErrRetrieveSavedData()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="ioeapi.h::STATUS_IOE_DATABASE_NOT_READY" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define STATUS_IOE_DATABASE_NOT_READY&nbsp;&nbsp;&nbsp;0x44444444          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d4/ioeapi_8h-source.html#l00036">36</a> of file <a class="el" href="../../d6/d4/ioeapi_8h-source.html">ioeapi.h</a>.
<p>
Referenced by <a class="el" href="../../d8/d4/ioerr_8c-source.html#l01052">IoepCatMsgArg()</a>, <a class="el" href="../../d8/d4/ioerr_8c-source.html#l00936">IoepGetErrMessage()</a>, <a class="el" href="../../d8/d4/ioerr_8c-source.html#l00680">IoepHandleErrCase()</a>, <a class="el" href="../../d5/d4/ioeapi_8c-source.html#l00882">IoErrFindErrCaseByID()</a>, and <a class="el" href="../../d5/d4/ioeapi_8c-source.html#l00800">IoErrMatchErrCase()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a0" doxytag="ioeapi.h::STATUS_IOE_MESSAGE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define STATUS_IOE_MESSAGE&nbsp;&nbsp;&nbsp;0x11111111          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d4/ioeapi_8h-source.html#l00034">34</a> of file <a class="el" href="../../d6/d4/ioeapi_8h-source.html">ioeapi.h</a>.
<p>
Referenced by <a class="el" href="../../d8/d4/ioerr_8c-source.html#l00680">IoepHandleErrCase()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="ioeapi.h::STATUS_IOE_MODULE_ALREADY_REGISTERED" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define STATUS_IOE_MODULE_ALREADY_REGISTERED&nbsp;&nbsp;&nbsp;0x22222222          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d4/ioeapi_8h-source.html#l00035">35</a> of file <a class="el" href="../../d6/d4/ioeapi_8h-source.html">ioeapi.h</a>.
<p>
Referenced by <a class="el" href="../../d5/d4/ioeapi_8c-source.html#l00383">IoErrRegisterErrHandlers()</a>.    </td>
  </tr>
</table>
<hr><h2>Typedef Documentation</h2>
<a class="anchor" name="a16" doxytag="ioeapi.h::ERRDATA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d0/d5/struct__errdata.html">_errdata</a>  <a class="el" href="../../d0/d5/struct__errdata.html">ERRDATA</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a14" doxytag="ioeapi.h::ERRID" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d2/d5/struct__errid.html">_errid</a>  <a class="el" href="../../d2/d5/struct__errid.html">ERRID</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a18" doxytag="ioeapi.h::ERRINFO" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d3/d5/struct__errinfo.html">_errinfo</a>  <a class="el" href="../../d3/d5/struct__errinfo.html">ERRINFO</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d5/d4/ioeapi_8c-source.html#l00698">IoErrRetrieveSavedData()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a20" doxytag="ioeapi.h::INFOBLK" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d1/d2/struct__infoblk.html">_infoblk</a>  <a class="el" href="../../d1/d2/struct__infoblk.html">INFOBLK</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d5/d4/ioeapi_8c-source.html#l00698">IoErrRetrieveSavedData()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a17" doxytag="ioeapi.h::PERRDATA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d0/d5/struct__errdata.html">_errdata</a> * <a class="el" href="../../d0/d5/struct__errdata.html">PERRDATA</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a22" doxytag="ioeapi.h::PERRHANDLER" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef NTSTATUS(* <a class="el" href="../../d5/d5/ioeapi_8h.html#a22">PERRHANDLER</a>)(PVOID, ULONG)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d4/ioeapi_8h-source.html#l00095">95</a> of file <a class="el" href="../../d6/d4/ioeapi_8h-source.html">ioeapi.h</a>.
<p>
Referenced by <a class="el" href="../../d8/d4/ioerr_8c-source.html#l01052">IoepCatMsgArg()</a>, <a class="el" href="../../d8/d4/ioerr_8c-source.html#l00824">IoepFindErrHandler()</a>, <a class="el" href="../../d8/d4/ioerr_8c-source.html#l00680">IoepHandleErrCase()</a>, and <a class="el" href="../../d5/d4/ioeapi_8c-source.html#l00383">IoErrRegisterErrHandlers()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a15" doxytag="ioeapi.h::PERRID" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d2/d5/struct__errid.html">_errid</a> * <a class="el" href="../../d2/d5/struct__errid.html">PERRID</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d5/d4/ioeapi_8c-source.html#l00800">IoErrMatchErrCase()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a19" doxytag="ioeapi.h::PERRINFO" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d3/d5/struct__errinfo.html">_errinfo</a> * <a class="el" href="../../d3/d5/struct__errinfo.html">PERRINFO</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a21" doxytag="ioeapi.h::PINFOBLK" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d1/d2/struct__infoblk.html">_infoblk</a> * <a class="el" href="../../d1/d2/struct__infoblk.html">PINFOBLK</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d5/d4/ioeapi_8c-source.html#l00698">IoErrRetrieveSavedData()</a>.    </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="a35" doxytag="ioeapi.h::IoErrFindErrCaseByID" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS IoErrFindErrCaseByID           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>ErrCaseID</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PHANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>ErrCaseHandle</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/ioeapi_8c-source.html#l00882">882</a> of file <a class="el" href="../../d5/d4/ioeapi_8c-source.html">ioeapi.c</a>.
<p>
References <a class="el" href="../../d7/d4/ioep_8h-source.html#l00067">DBGPRINT</a>, <a class="el" href="../../d8/d3/trace_8h-source.html#l00051">ENTER</a>, <a class="el" href="../../d4/d3/ecdb_8h-source.html#l00044">_errcase::ErrCaseID</a>, <a class="el" href="../../d4/d3/ecdb_8h-source.html#l00037">_errcasedb::ErrCaseOffset</a>, <a class="el" href="../../d4/d8/arcinst_8c-source.html#l00055">EXIT</a>, <a class="el" href="../../d8/d4/ioerr_8c-source.html#l01200">IoepGetErrCaseDB()</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d4/d3/ecdb_8h-source.html#l00038">_errcasedb::NumErrCases</a>, <a class="el" href="../../d1/d8/ntosdef_8h-source.html#l00462">PAGED_CODE</a>, <a class="el" href="../../d7/d4/ioep_8h-source.html#l00066">PROCNAME</a>, and <a class="el" href="../../d6/d4/ioeapi_8h-source.html#l00036">STATUS_IOE_DATABASE_NOT_READY</a>.
<p>
<pre class="fragment"><div>00888                    :
00889     This routine finds an error <span class="keywordflow">case</span> by <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> error <span class="keywordflow">case</span> <a class="code" href="../../d4/d9/smbtrsup_8c.html#a7">ID</a> and returns <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a>
00890     handle to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> error <span class="keywordflow">case</span>.
00891 
00892 Arguments:
00893     ErrCaseID - unique error <span class="keywordflow">case</span> <a class="code" href="../../d4/d9/smbtrsup_8c.html#a7">ID</a>
00894     ErrCaseHandle - points to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> variable to receive <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> error <span class="keywordflow">case</span> handle
00895 
00896 Return Value:
00897     Success - returns STATUS_SUCCESS
00898     Failure - returns NT status code
00899 
00900 --*/
00901 {
00902     <a class="code" href="../../d6/d5/ioep_8h.html#a20">PROCNAME</a>(<span class="stringliteral">"IoErrFindErrCaseByID"</span>);
00903     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> status;
00904     <a class="code" href="../../d9/d4/struct__errcasedb.html">PERRCASEDB</a> ErrCaseDB;
00905 
00906     <a class="code" href="../../d0/d9/ntosdef_8h.html#a28">PAGED_CODE</a>();
00907     <a class="code" href="../../d7/d4/trace_8h.html#a0">ENTER</a>(1, (<span class="stringliteral">"(ErrCaseID=%x,pErrCaseHandle=%p)\n"</span>, ErrCaseID, ErrCaseHandle));
00908 
00909     ErrCaseDB = <a class="code" href="../../d7/d5/ioerr_8c.html#a14">IoepGetErrCaseDB</a>();
00910     <span class="keywordflow">if</span> (ErrCaseDB != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00911     {
00912         <a class="code" href="../../d8/d4/struct__errcase.html">PERRCASE</a> ErrCaseTable;
00913         ULONG i;
00914 
00915         ErrCaseTable = (<a class="code" href="../../d8/d4/struct__errcase.html">PERRCASE</a>)((ULONG_PTR)ErrCaseDB +
00916                                   ErrCaseDB-&gt;<a class="code" href="../../d9/d4/struct__errcasedb.html#o4">ErrCaseOffset</a>);
00917 
00918         <span class="keywordflow">for</span> (i = 0, status = STATUS_NOT_FOUND; i &lt; ErrCaseDB-&gt;<a class="code" href="../../d9/d4/struct__errcasedb.html#o5">NumErrCases</a>; ++i)
00919         {
00920             <span class="keywordflow">if</span> (ErrCaseTable[i].<a class="code" href="../../d8/d4/struct__errcase.html#o0">ErrCaseID</a> == ErrCaseID)
00921             {
00922                 *ErrCaseHandle = &amp;ErrCaseTable[i];
00923                 status = STATUS_SUCCESS;
00924                 <span class="keywordflow">break</span>;
00925             }
00926         }
00927     }
00928     <span class="keywordflow">else</span>
00929     {
00930         status = <a class="code" href="../../d5/d5/ioeapi_8h.html#a2">STATUS_IOE_DATABASE_NOT_READY</a>;
00931         <a class="code" href="../../d6/d5/ioep_8h.html#a21">DBGPRINT</a>((<span class="stringliteral">"error case database not ready\n"</span>));
00932     }
00933 
00934     <a class="code" href="../../d3/d9/arcinst_8c.html#a2">EXIT</a>(1, (<span class="stringliteral">"=%x(ErrCase=%p)\n"</span>, status, *ErrCaseHandle));
00935     <span class="keywordflow">return</span> status;
00936 }       <span class="comment">//IoErrFindErrCaseByID</span>

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a33" doxytag="ioeapi.h::IoErrFreeSavedData" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID IoErrFreeSavedData           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HANDLE&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>SaveDataHandle</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/ioeapi_8c-source.html#l00647">647</a> of file <a class="el" href="../../d5/d4/ioeapi_8c-source.html">ioeapi.c</a>.
<p>
References <a class="el" href="../../d7/d4/ntgdi_2icm_2inc_2debug_8h-source.html#l00146">ASSERT</a>, <a class="el" href="../../d7/d4/ioep_8h-source.html#l00067">DBGPRINT</a>, <a class="el" href="../../d8/d3/trace_8h-source.html#l00051">ENTER</a>, <a class="el" href="../../d7/d4/ioep_8h-source.html#l00118">_savedata::ErrInfo</a>, <a class="el" href="../../d7/d2/cmwraper_8c-source.html#l00304">ExFreePool()</a>, <a class="el" href="../../d4/d8/arcinst_8c-source.html#l00055">EXIT</a>, <a class="el" href="../../d1/d1/data_8c-source.html#l00030">IoepErrListLock</a>, <a class="el" href="../../d7/d4/ioep_8h-source.html#l00117">_savedata::list</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d4/ioep_8h-source.html#l00066">PROCNAME</a>, <a class="el" href="../../d7/d4/ioep_8h-source.html#l00121">SIG_SAVEDATA</a>, <a class="el" href="../../d6/d4/ioeapi_8h-source.html#l00074">_errinfo::Signature</a>, and <a class="el" href="../../d7/d4/ioep_8h-source.html#l00116">_savedata::Signature</a>.
<p>
<pre class="fragment"><div>00652                    :
00653     This routine frees <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> storage associated with <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> saved error data.
00654     This function should <a class="code" href="../../d3/d0/imm32_8def.html#a1">only</a> be call <span class="keywordflow">if</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> error data has been previously
00655     saved via <a class="code" href="../../d5/d5/ioeapi_8h.html#a31">IoErrSaveErrData</a>.
00656 
00657 Arguments:
00658     SaveDataHandle - points to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> save data
00659 
00660 Return Value:
00661     None
00662 
00663 --*/
00664 {
00665     <a class="code" href="../../d6/d5/ioep_8h.html#a20">PROCNAME</a>(<span class="stringliteral">"IoErrFreeSavedData"</span>);
00666     <a class="code" href="../../d8/d7/struct__savedata.html">PSAVEDATA</a> SaveData = (<a class="code" href="../../d8/d7/struct__savedata.html">PSAVEDATA</a>)SaveDataHandle;
00667 
00668     <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>(SaveDataHandle != NULL);
00669     <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>(((<a class="code" href="../../d8/d7/struct__savedata.html">PSAVEDATA</a>)SaveDataHandle)-&gt;Signature == SIG_SAVEDATA);
00670     <a class="code" href="../../d7/d4/trace_8h.html#a0">ENTER</a>(1, (<span class="stringliteral">"(SaveData=%p)\n"</span>, SaveDataHandle));
00671 
00672     <span class="keywordflow">if</span> ((SaveDataHandle != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) &amp;&amp;
00673         (((<a class="code" href="../../d8/d7/struct__savedata.html">PSAVEDATA</a>)SaveDataHandle)-&gt;Signature == <a class="code" href="../../d6/d5/ioep_8h.html#a24">SIG_SAVEDATA</a>))
00674     {
00675         KIRQL Irql;
00676 
00677         ExAcquireSpinLock(&amp;IoepErrListLock, &amp;Irql);
00678         RemoveEntryList(&amp;SaveData-&gt;<a class="code" href="../../d8/d7/struct__savedata.html#o1">list</a>);
00679         <span class="keywordflow">if</span> (SaveData-&gt;<a class="code" href="../../d8/d7/struct__savedata.html#o2">ErrInfo</a> != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00680         {
00681             SaveData-&gt;<a class="code" href="../../d8/d7/struct__savedata.html#o2">ErrInfo</a>-&gt;<a class="code" href="../../d3/d5/struct__errinfo.html#o0">Signature</a> = 0;
00682             <a class="code" href="../../d5/d8/ex_8h.html#a224">ExFreePool</a>(SaveData-&gt;<a class="code" href="../../d8/d7/struct__savedata.html#o2">ErrInfo</a>);
00683             SaveData-&gt;<a class="code" href="../../d8/d7/struct__savedata.html#o2">ErrInfo</a> = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00684         }
00685         SaveData-&gt;<a class="code" href="../../d8/d7/struct__savedata.html#o0">Signature</a> = 0;
00686         <a class="code" href="../../d5/d8/ex_8h.html#a224">ExFreePool</a>(SaveData);
00687         ExReleaseSpinLock(&amp;IoepErrListLock, Irql);
00688     }
00689     <span class="keywordflow">else</span>
00690     {
00691         <a class="code" href="../../d6/d5/ioep_8h.html#a21">DBGPRINT</a>((<span class="stringliteral">"invalid handle\n"</span>))
00692     }
00693 
00694     <a class="code" href="../../d3/d9/arcinst_8c.html#a2">EXIT</a>(1, (<span class="stringliteral">"!\n"</span>));
00695 }       <span class="comment">//IoErrFreeSavedData</span>

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a30" doxytag="ioeapi.h::IoErrGetErrData" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d3/d5/struct__errinfo.html">PERRINFO</a> IoErrGetErrData           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HANDLE&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>ErrLogHandle</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/ioeapi_8c-source.html#l00452">452</a> of file <a class="el" href="../../d5/d4/ioeapi_8c-source.html">ioeapi.c</a>.
<p>
References <a class="el" href="../../d7/d4/ntgdi_2icm_2inc_2debug_8h-source.html#l00146">ASSERT</a>, <a class="el" href="../../d7/d4/ioep_8h-source.html#l00067">DBGPRINT</a>, <a class="el" href="../../d8/d3/trace_8h-source.html#l00051">ENTER</a>, <a class="el" href="../../d7/d4/ioep_8h-source.html#l00109">_errlog::ErrInfo</a>, <a class="el" href="../../d6/d7/ex_8h-source.html#l00253">ExAllocatePoolWithTag</a>, <a class="el" href="../../d7/d2/cmwraper_8c-source.html#l00304">ExFreePool()</a>, <a class="el" href="../../d4/d8/arcinst_8c-source.html#l00055">EXIT</a>, <a class="el" href="../../d8/d4/ioerr_8c-source.html#l00501">IoepExtractErrData()</a>, <a class="el" href="../../d7/d4/ioep_8h-source.html#l00133">IoepGetErrStack</a>, <a class="el" href="../../d7/d4/ioep_8h-source.html#l00041">IOETAG_ERRINFO</a>, <a class="el" href="../../d5/d8/ex_8h.html#a329a173">NonPagedPool</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d4/ioep_8h-source.html#l00066">PROCNAME</a>, <a class="el" href="../../d7/d4/ioep_8h-source.html#l00112">SIG_ERRLOG</a>, and <a class="el" href="../../d7/d4/ioep_8h-source.html#l00104">_errlog::Signature</a>.
<p>
Referenced by <a class="el" href="../../d5/d4/ioeapi_8c-source.html#l00538">IoErrSaveErrData()</a>, and <a class="el" href="../../d5/d4/ioeapi_8c-source.html#l00305">IoErrTerminateErrLog()</a>.
<p>
<pre class="fragment"><div>00457                    :
00458     This routine returns <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> error data from <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> error log session.
00459 
00460 Arguments:
00461     ErrLogHandle - points to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> error log session
00462 
00463 Return Value:
00464     Success - returns pointer to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> error info structure
00465     Failure - returns <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>
00466 
00467 --*/
00468 {
00469     <a class="code" href="../../d6/d5/ioep_8h.html#a20">PROCNAME</a>(<span class="stringliteral">"IoErrGetErrData"</span>);
00470     <a class="code" href="../../d3/d5/struct__errinfo.html">PERRINFO</a> ErrInfo = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00471     <a class="code" href="../../d4/d5/struct__errlog.html">PERRLOG</a> ErrLog = (<a class="code" href="../../d4/d5/struct__errlog.html">PERRLOG</a>)ErrLogHandle;
00472 
00473     <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>(ErrLogHandle != NULL);
00474     <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>(((<a class="code" href="../../d4/d5/struct__errlog.html">PERRLOG</a>)ErrLogHandle)-&gt;Signature == SIG_ERRLOG);
00475     <a class="code" href="../../d7/d4/trace_8h.html#a0">ENTER</a>(1, (<span class="stringliteral">"(ErrLog=%p)\n"</span>, ErrLogHandle));
00476 
00477     <span class="keywordflow">if</span> ((ErrLog != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) &amp;&amp; (ErrLog-&gt;<a class="code" href="../../d4/d5/struct__errlog.html#o0">Signature</a> == <a class="code" href="../../d6/d5/ioep_8h.html#a22">SIG_ERRLOG</a>))
00478     {
00479         <span class="keywordflow">if</span> (ErrLog-&gt;<a class="code" href="../../d4/d5/struct__errlog.html#o5">ErrInfo</a> != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00480         {
00481             ErrInfo = ErrLog-&gt;<a class="code" href="../../d4/d5/struct__errlog.html#o5">ErrInfo</a>;
00482         }
00483         <span class="keywordflow">else</span>
00484         {
00485             <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> status;
00486             ULONG len;
00487 
00488             status = <a class="code" href="../../d7/d5/ioerr_8c.html#a6">IoepExtractErrData</a>(<a class="code" href="../../d6/d5/ioep_8h.html#a25">IoepGetErrStack</a>(ErrLog),
00489                                         NULL,
00490                                         0,
00491                                         &amp;len);
00492             <span class="keywordflow">if</span> (status == STATUS_BUFFER_TOO_SMALL)
00493             {
00494                 ErrInfo = <a class="code" href="../../d5/d8/ex_8h.html#a4">ExAllocatePoolWithTag</a>(NonPagedPool,
00495                                                 len,
00496                                                 IOETAG_ERRINFO);
00497                 <span class="keywordflow">if</span> (ErrInfo != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00498                 {
00499                     status = <a class="code" href="../../d7/d5/ioerr_8c.html#a6">IoepExtractErrData</a>(
00500                                     <a class="code" href="../../d6/d5/ioep_8h.html#a25">IoepGetErrStack</a>(ErrLog),
00501                                     ErrInfo,
00502                                     len,
00503                                     NULL);
00504                     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(status))
00505                     {
00506                         ErrLog-&gt;<a class="code" href="../../d4/d5/struct__errlog.html#o5">ErrInfo</a> = ErrInfo;
00507                     }
00508                     <span class="keywordflow">else</span>
00509                     {
00510                         <a class="code" href="../../d5/d8/ex_8h.html#a224">ExFreePool</a>(ErrInfo);
00511                         ErrInfo = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00512                         <a class="code" href="../../d6/d5/ioep_8h.html#a21">DBGPRINT</a>((<span class="stringliteral">"failed to get error data (rc=%x)\n"</span>,
00513                                   status));
00514                     }
00515                 }
00516                 <span class="keywordflow">else</span>
00517                 {
00518                     <a class="code" href="../../d6/d5/ioep_8h.html#a21">DBGPRINT</a>((<span class="stringliteral">"failed to allocate error info buffer (len=%d)\n"</span>,
00519                               len));
00520                 }
00521             }
00522             <span class="keywordflow">else</span>
00523             {
00524                 <a class="code" href="../../d6/d5/ioep_8h.html#a21">DBGPRINT</a>((<span class="stringliteral">"failed to determine error data size (rc=%x)\n"</span>, status));
00525             }
00526         }
00527     }
00528     <span class="keywordflow">else</span>
00529     {
00530         <a class="code" href="../../d6/d5/ioep_8h.html#a21">DBGPRINT</a>((<span class="stringliteral">"invalid handle\n"</span>))
00531     }
00532 
00533     <a class="code" href="../../d3/d9/arcinst_8c.html#a2">EXIT</a>(1, (<span class="stringliteral">"=%p\n"</span>, ErrInfo));
00534     <span class="keywordflow">return</span> ErrInfo;
00535 }       <span class="comment">//IoErrGetErrData</span>

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a37" doxytag="ioeapi.h::IoErrGetLongErrMessage" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS IoErrGetLongErrMessage           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN <a class="el" href="../../d3/d5/struct__errinfo.html">PERRINFO</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ErrInfo</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>ErrCaseHandle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PUNICODE_STRING&nbsp;</td>
          <td class="mdname" nowrap> <em>unicodeMsg</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/ioeapi_8c-source.html#l00985">985</a> of file <a class="el" href="../../d5/d4/ioeapi_8c-source.html">ioeapi.c</a>.
<p>
References <a class="el" href="../../d7/d4/ntgdi_2icm_2inc_2debug_8h-source.html#l00146">ASSERT</a>, <a class="el" href="../../d7/d4/ioep_8h-source.html#l00067">DBGPRINT</a>, <a class="el" href="../../d8/d3/trace_8h-source.html#l00051">ENTER</a>, <a class="el" href="../../d4/d8/arcinst_8c-source.html#l00055">EXIT</a>, <a class="el" href="../../d7/d4/ioep_8h-source.html#l00049">IOEMETHOD_LONGMSG</a>, <a class="el" href="../../d8/d4/ioerr_8c-source.html#l00680">IoepHandleErrCase()</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d8/ntosdef_8h-source.html#l00462">PAGED_CODE</a>, <a class="el" href="../../d7/d4/ioep_8h-source.html#l00066">PROCNAME</a>, and <a class="el" href="../../d6/d4/ioeapi_8h-source.html#l00083">SIG_ERRINFO</a>.
<p>
<pre class="fragment"><div>00992                    :
00993     This routine handles <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> error <span class="keywordflow">case</span> by executing <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> <span class="keywordtype">long</span> message method
00994     and returns <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> resulting message.
00995 
00996 Arguments:
00997     ErrInfo - points to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> error info.
00998     ErrCaseHandle - points to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> error <span class="keywordflow">case</span> handle
00999     unicodeMsg - points to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> uninitialized unicode string message buffer
01000 
01001 Return Value:
01002     Success - returns STATUS_SUCCESS
01003     Failure - returns NT status code
01004 
01005 Note:
01006     This routine will allocate <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> actual string buffer of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> unicode message.
01007     Therefore, <a class="code" href="../../d1/d9/icmui_8def.html#a4">it</a> <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> caller's responsibility to free <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> message buffer
01008     via <a class="code" href="../../d6/d6/nls_8c.html#a34">RtlFreeUnicodeString</a>.
01009 
01010 --*/
01011 {
01012     <a class="code" href="../../d6/d5/ioep_8h.html#a20">PROCNAME</a>(<span class="stringliteral">"IoErrGetLongErrMessage"</span>);
01013     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> status;
01014 
01015     <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>(ErrInfo != NULL);
01016     <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>(ErrInfo-&gt;Signature == SIG_ERRINFO);
01017     <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>(ErrCaseHandle != NULL);
01018     <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>(unicodeMsg != NULL);
01019     <a class="code" href="../../d0/d9/ntosdef_8h.html#a28">PAGED_CODE</a>();
01020     <a class="code" href="../../d7/d4/trace_8h.html#a0">ENTER</a>(1, (<span class="stringliteral">"(ErrInfo=%p,ErrCase=%p,pMsg=%p)\n"</span>,
01021               ErrInfo, ErrCaseHandle, unicodeMsg));
01022 
01023     <span class="keywordflow">if</span> ((ErrInfo != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) &amp;&amp; (ErrInfo-&gt;Signature == <a class="code" href="../../d5/d5/ioeapi_8h.html#a12">SIG_ERRINFO</a>))
01024     {
01025         status = <a class="code" href="../../d7/d5/ioerr_8c.html#a8">IoepHandleErrCase</a>(ErrInfo,
01026                                    (<a class="code" href="../../d8/d4/struct__errcase.html">PERRCASE</a>)ErrCaseHandle,
01027                                    IOEMETHOD_LONGMSG,
01028                                    unicodeMsg);
01029     }
01030     <span class="keywordflow">else</span>
01031     {
01032         status = STATUS_INVALID_PARAMETER;
01033         <a class="code" href="../../d6/d5/ioep_8h.html#a21">DBGPRINT</a>((<span class="stringliteral">"invalid handle\n"</span>))
01034     }
01035 
01036     <a class="code" href="../../d3/d9/arcinst_8c.html#a2">EXIT</a>(1, (<span class="stringliteral">"=%x(Msg=%S)\n"</span>, status, unicodeMsg-&gt;Buffer));
01037     <span class="keywordflow">return</span> status;
01038 }       <span class="comment">//IoErrGetLongErrMessage</span>

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a32" doxytag="ioeapi.h::IoErrGetSavedData" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d3/d5/struct__errinfo.html">PERRINFO</a> IoErrGetSavedData           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HANDLE&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>SaveDataHandle</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/ioeapi_8c-source.html#l00607">607</a> of file <a class="el" href="../../d5/d4/ioeapi_8c-source.html">ioeapi.c</a>.
<p>
References <a class="el" href="../../d7/d4/ntgdi_2icm_2inc_2debug_8h-source.html#l00146">ASSERT</a>, <a class="el" href="../../d7/d4/ioep_8h-source.html#l00067">DBGPRINT</a>, <a class="el" href="../../d8/d3/trace_8h-source.html#l00051">ENTER</a>, <a class="el" href="../../d4/d8/arcinst_8c-source.html#l00055">EXIT</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d4/ioep_8h-source.html#l00066">PROCNAME</a>, and <a class="el" href="../../d7/d4/ioep_8h-source.html#l00121">SIG_SAVEDATA</a>.
<p>
<pre class="fragment"><div>00612                    :
00613     This routine returns <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> error info. from <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> saved error data.
00614 
00615 Arguments:
00616     SaveDataHandle - points to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> saved error data
00617 
00618 Return Value:
00619     Success - returns a pointer to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> saved error info.
00620     Failure - returns <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>
00621 
00622 --*/
00623 {
00624     <a class="code" href="../../d6/d5/ioep_8h.html#a20">PROCNAME</a>(<span class="stringliteral">"IoErrGetSavedData"</span>);
00625     <a class="code" href="../../d3/d5/struct__errinfo.html">PERRINFO</a> ErrInfo;
00626 
00627     <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>(SaveDataHandle != NULL);
00628     <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>(((<a class="code" href="../../d8/d7/struct__savedata.html">PSAVEDATA</a>)SaveDataHandle)-&gt;Signature == SIG_SAVEDATA);
00629     <a class="code" href="../../d7/d4/trace_8h.html#a0">ENTER</a>(1, (<span class="stringliteral">"(SaveData=%p)\n"</span>, SaveDataHandle));
00630 
00631     <span class="keywordflow">if</span> ((SaveDataHandle != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) &amp;&amp;
00632         (((<a class="code" href="../../d8/d7/struct__savedata.html">PSAVEDATA</a>)SaveDataHandle)-&gt;Signature == <a class="code" href="../../d6/d5/ioep_8h.html#a24">SIG_SAVEDATA</a>))
00633     {
00634         ErrInfo = ((<a class="code" href="../../d8/d7/struct__savedata.html">PSAVEDATA</a>)SaveDataHandle)-&gt;ErrInfo;
00635     }
00636     <span class="keywordflow">else</span>
00637     {
00638         ErrInfo = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00639         <a class="code" href="../../d6/d5/ioep_8h.html#a21">DBGPRINT</a>((<span class="stringliteral">"invalid handle\n"</span>))
00640     }
00641 
00642     <a class="code" href="../../d3/d9/arcinst_8c.html#a2">EXIT</a>(1, (<span class="stringliteral">"=%p\n"</span>, ErrInfo));
00643     <span class="keywordflow">return</span> ErrInfo;
00644 }       <span class="comment">//IoErrGetSavedData</span>

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a38" doxytag="ioeapi.h::IoErrGetShortErrMessage" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS IoErrGetShortErrMessage           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN <a class="el" href="../../d3/d5/struct__errinfo.html">PERRINFO</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ErrInfo</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>ErrCaseHandle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PUNICODE_STRING&nbsp;</td>
          <td class="mdname" nowrap> <em>unicodeMsg</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/ioeapi_8c-source.html#l01041">1041</a> of file <a class="el" href="../../d5/d4/ioeapi_8c-source.html">ioeapi.c</a>.
<p>
References <a class="el" href="../../d7/d4/ntgdi_2icm_2inc_2debug_8h-source.html#l00146">ASSERT</a>, <a class="el" href="../../d7/d4/ioep_8h-source.html#l00067">DBGPRINT</a>, <a class="el" href="../../d8/d3/trace_8h-source.html#l00051">ENTER</a>, <a class="el" href="../../d4/d8/arcinst_8c-source.html#l00055">EXIT</a>, <a class="el" href="../../d7/d4/ioep_8h-source.html#l00050">IOEMETHOD_SHORTMSG</a>, <a class="el" href="../../d8/d4/ioerr_8c-source.html#l00680">IoepHandleErrCase()</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d8/ntosdef_8h-source.html#l00462">PAGED_CODE</a>, <a class="el" href="../../d7/d4/ioep_8h-source.html#l00066">PROCNAME</a>, and <a class="el" href="../../d6/d4/ioeapi_8h-source.html#l00083">SIG_ERRINFO</a>.
<p>
<pre class="fragment"><div>01048                    :
01049     This routine handles <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> error <span class="keywordflow">case</span> by executing <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> <span class="keywordtype">short</span> message method
01050     and returns <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> resulting message.
01051 
01052 Arguments:
01053     ErrInfo - points to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> error info.
01054     ErrCaseHandle - points to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> error <span class="keywordflow">case</span> handle
01055     unicodeMsg - points to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> uninitialized unicode string message buffer
01056 
01057 Return Value:
01058     Success - returns STATUS_SUCCESS
01059     Failure - returns NT status code
01060 
01061 Note:
01062     This routine will allocate <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> actual string buffer of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> unicode message.
01063     Therefore, <a class="code" href="../../d1/d9/icmui_8def.html#a4">it</a> <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> caller's responsibility to free <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> message buffer
01064     via <a class="code" href="../../d6/d6/nls_8c.html#a34">RtlFreeUnicodeString</a>.
01065 
01066 --*/
01067 {
01068     <a class="code" href="../../d6/d5/ioep_8h.html#a20">PROCNAME</a>(<span class="stringliteral">"IoErrGetShortErrMessage"</span>);
01069     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> status;
01070 
01071     <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>(ErrInfo != NULL);
01072     <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>(ErrInfo-&gt;Signature == SIG_ERRINFO);
01073     <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>(ErrCaseHandle != NULL);
01074     <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>(unicodeMsg != NULL);
01075     <a class="code" href="../../d0/d9/ntosdef_8h.html#a28">PAGED_CODE</a>();
01076     <a class="code" href="../../d7/d4/trace_8h.html#a0">ENTER</a>(1, (<span class="stringliteral">"(ErrInfo=%p,ErrCase=%p,pMsg=%p)\n"</span>,
01077               ErrInfo, ErrCaseHandle, unicodeMsg));
01078 
01079     <span class="keywordflow">if</span> ((ErrInfo != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) &amp;&amp; (ErrInfo-&gt;Signature == <a class="code" href="../../d5/d5/ioeapi_8h.html#a12">SIG_ERRINFO</a>))
01080     {
01081         status = <a class="code" href="../../d7/d5/ioerr_8c.html#a8">IoepHandleErrCase</a>(ErrInfo,
01082                                    (<a class="code" href="../../d8/d4/struct__errcase.html">PERRCASE</a>)ErrCaseHandle,
01083                                    IOEMETHOD_SHORTMSG,
01084                                    unicodeMsg);
01085     }
01086     <span class="keywordflow">else</span>
01087     {
01088         status = STATUS_INVALID_PARAMETER;
01089         <a class="code" href="../../d6/d5/ioep_8h.html#a21">DBGPRINT</a>((<span class="stringliteral">"invalid handle\n"</span>))
01090     }
01091 
01092     <a class="code" href="../../d3/d9/arcinst_8c.html#a2">EXIT</a>(1, (<span class="stringliteral">"=%x(Msg=%S)\n"</span>, status, unicodeMsg-&gt;Buffer));
01093     <span class="keywordflow">return</span> status;
01094 }       <span class="comment">//IoErrGetShortErrMessage</span>
}       <span class="comment">//IoErrGetShortErrMessage</span>
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a36" doxytag="ioeapi.h::IoErrHandleErrCase" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS IoErrHandleErrCase           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN <a class="el" href="../../d3/d5/struct__errinfo.html">PERRINFO</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ErrInfo</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>ErrCaseHandle</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/ioeapi_8c-source.html#l00939">939</a> of file <a class="el" href="../../d5/d4/ioeapi_8c-source.html">ioeapi.c</a>.
<p>
References <a class="el" href="../../d7/d4/ntgdi_2icm_2inc_2debug_8h-source.html#l00146">ASSERT</a>, <a class="el" href="../../d7/d4/ioep_8h-source.html#l00067">DBGPRINT</a>, <a class="el" href="../../d8/d3/trace_8h-source.html#l00051">ENTER</a>, <a class="el" href="../../d4/d8/arcinst_8c-source.html#l00055">EXIT</a>, <a class="el" href="../../d7/d4/ioep_8h-source.html#l00048">IOEMETHOD_ANY</a>, <a class="el" href="../../d8/d4/ioerr_8c-source.html#l00680">IoepHandleErrCase()</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d8/ntosdef_8h-source.html#l00462">PAGED_CODE</a>, <a class="el" href="../../d7/d4/ioep_8h-source.html#l00066">PROCNAME</a>, and <a class="el" href="../../d6/d4/ioeapi_8h-source.html#l00083">SIG_ERRINFO</a>.
<p>
<pre class="fragment"><div>00945                    :
00946     This routine handles an error <span class="keywordflow">case</span> by executing <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> resolution method.
00947 
00948 Arguments:
00949     ErrInfo - points to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> error info.
00950     ErrCaseHandle - points to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> error <span class="keywordflow">case</span> handle
00951 
00952 Return Value:
00953     Success - returns STATUS_SUCCESS
00954     Failure - returns NT status code
00955 
00956 --*/
00957 {
00958     <a class="code" href="../../d6/d5/ioep_8h.html#a20">PROCNAME</a>(<span class="stringliteral">"IoErrHandleErrCase"</span>);
00959     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> status;
00960 
00961     <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>(ErrInfo != NULL);
00962     <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>(ErrInfo-&gt;Signature == SIG_ERRINFO);
00963     <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>(ErrCaseHandle != NULL);
00964     <a class="code" href="../../d0/d9/ntosdef_8h.html#a28">PAGED_CODE</a>();
00965     <a class="code" href="../../d7/d4/trace_8h.html#a0">ENTER</a>(1, (<span class="stringliteral">"(ErrInfo=%p,ErrCase=%p)\n"</span>, ErrInfo, ErrCaseHandle));
00966 
00967     <span class="keywordflow">if</span> ((ErrInfo != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) &amp;&amp; (ErrInfo-&gt;Signature == <a class="code" href="../../d5/d5/ioeapi_8h.html#a12">SIG_ERRINFO</a>))
00968     {
00969         status = <a class="code" href="../../d7/d5/ioerr_8c.html#a8">IoepHandleErrCase</a>(ErrInfo,
00970                                    (<a class="code" href="../../d8/d4/struct__errcase.html">PERRCASE</a>)ErrCaseHandle,
00971                                    IOEMETHOD_ANY,
00972                                    NULL);
00973     }
00974     <span class="keywordflow">else</span>
00975     {
00976         status = STATUS_INVALID_PARAMETER;
00977         <a class="code" href="../../d6/d5/ioep_8h.html#a21">DBGPRINT</a>((<span class="stringliteral">"invalid handle\n"</span>))
00978     }
00979 
00980     <a class="code" href="../../d3/d9/arcinst_8c.html#a2">EXIT</a>(1, (<span class="stringliteral">"=%x\n"</span>, status));
00981     <span class="keywordflow">return</span> status;
00982 }       <span class="comment">//IoErrHandleErrCase</span>

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a23" doxytag="ioeapi.h::IoErrInitErrLogByIrp" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HANDLE IoErrInitErrLogByIrp           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN <a class="el" href="../../d0/d2/struct__IRP.html">PIRP</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Irp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>ulFlags</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/ioeapi_8c-source.html#l00073">73</a> of file <a class="el" href="../../d5/d4/ioeapi_8c-source.html">ioeapi.c</a>.
<p>
References <a class="el" href="../../d8/d3/trace_8h-source.html#l00051">ENTER</a>, <a class="el" href="../../d4/d8/arcinst_8c-source.html#l00055">EXIT</a>, <a class="el" href="../../d8/d4/ioerr_8c-source.html#l00039">IoepInitErrLog()</a>, <a class="el" href="../../d1/d5/iop_8h-source.html#l00130">Irp</a>, <a class="el" href="../../d6/d5/ioep_8h.html#a32">PERRLOG</a>, <a class="el" href="../../d7/d4/ioep_8h-source.html#l00066">PROCNAME</a>, and <a class="el" href="../../d7/d4/ioep_8h-source.html#l00045">THREADKEY_IRP</a>.
<p>
<pre class="fragment"><div>00079                    :
00080     This routine initializes an error logging session that <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> keyed by an <a class="code" href="../../d0/d6/iop_8h.html#a35">Irp</a>.
00081 
00082 Arguments:
00083     <a class="code" href="../../d0/d6/iop_8h.html#a35">Irp</a> - points to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> <a class="code" href="../../d0/d6/iop_8h.html#a35">Irp</a> that <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> used as <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> key to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> logging session.
00084     ulFlags - log session flags
00085 
00086 Return Value:
00087     Success - returns <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> newly created error log handle.
00088     Failure - returns <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>.
00089 
00090 --*/
00091 {
00092     <a class="code" href="../../d6/d5/ioep_8h.html#a20">PROCNAME</a>(<span class="stringliteral">"IoErrInitErrLogByIrp"</span>);
00093     <a class="code" href="../../d4/d5/struct__errlog.html">PERRLOG</a> ErrLog;
00094 
00095     <a class="code" href="../../d7/d4/trace_8h.html#a0">ENTER</a>(1, (<span class="stringliteral">"(Irp=%p,ulFlags=%x)\n"</span>, Irp, ulFlags));
00096 
00097     ErrLog = <a class="code" href="../../d7/d5/ioerr_8c.html#a0">IoepInitErrLog</a>(THREADKEY_IRP, Irp, ulFlags);
00098 
00099     <a class="code" href="../../d3/d9/arcinst_8c.html#a2">EXIT</a>(1, (<span class="stringliteral">"=%p\n"</span>, ErrLog));
00100     <span class="keywordflow">return</span> ErrLog;
00101 }       <span class="comment">//IoErrInitErrLogByIrp</span>

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a24" doxytag="ioeapi.h::IoErrInitErrLogByThreadID" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HANDLE IoErrInitErrLogByThreadID           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN <a class="el" href="../../d1/d8/struct__KTHREAD.html">PKTHREAD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ThreadID</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>ulFlags</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/ioeapi_8c-source.html#l00104">104</a> of file <a class="el" href="../../d5/d4/ioeapi_8c-source.html">ioeapi.c</a>.
<p>
References <a class="el" href="../../d8/d3/trace_8h-source.html#l00051">ENTER</a>, <a class="el" href="../../d4/d8/arcinst_8c-source.html#l00055">EXIT</a>, <a class="el" href="../../d8/d4/ioerr_8c-source.html#l00039">IoepInitErrLog()</a>, <a class="el" href="../../d7/d4/ioep_8h-source.html#l00066">PROCNAME</a>, and <a class="el" href="../../d7/d4/ioep_8h-source.html#l00046">THREADKEY_THREADID</a>.
<p>
<pre class="fragment"><div>00110                    :
00111     This routine initializes an error logging session that <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> keyed by thread.
00112 
00113 Arguments:
00114     ThreadID - thread <a class="code" href="../../d4/d9/smbtrsup_8c.html#a7">ID</a>
00115     ulFlags - log session flags
00116 
00117 Return Value:
00118     Success - returns <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> newly created error log handle.
00119     Failure - returns <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>.
00120 
00121 --*/
00122 {
00123     <a class="code" href="../../d6/d5/ioep_8h.html#a20">PROCNAME</a>(<span class="stringliteral">"IoErrInitErrLogByThreadID"</span>);
00124     <a class="code" href="../../d4/d5/struct__errlog.html">PERRLOG</a> ErrLog;
00125 
00126     <a class="code" href="../../d7/d4/trace_8h.html#a0">ENTER</a>(1, (<span class="stringliteral">"(ThreadID=%p,ulFlags=%x)\n"</span>, ThreadID, ulFlags));
00127 
00128     ErrLog = <a class="code" href="../../d7/d5/ioerr_8c.html#a0">IoepInitErrLog</a>(THREADKEY_THREADID, ThreadID, ulFlags);
00129 
00130     <a class="code" href="../../d3/d9/arcinst_8c.html#a2">EXIT</a>(1, (<span class="stringliteral">"=%p\n"</span>, ErrLog));
00131     <span class="keywordflow">return</span> ErrLog;
00132 }       <span class="comment">//IoErrInitErrLogByThreadID</span>

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a39" doxytag="ioeapi.h::IoErrInitSystem" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOLEAN IoErrInitSystem           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">VOID&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/ioeapi_8c-source.html#l00038">38</a> of file <a class="el" href="../../d5/d4/ioeapi_8c-source.html">ioeapi.c</a>.
<p>
References <a class="el" href="../../d8/d3/trace_8h-source.html#l00051">ENTER</a>, <a class="el" href="../../d4/d8/arcinst_8c-source.html#l00055">EXIT</a>, <a class="el" href="../../d1/d1/data_8c-source.html#l00030">IoepErrListLock</a>, <a class="el" href="../../d1/d1/data_8c-source.html#l00032">IoepErrModuleListHead</a>, <a class="el" href="../../d1/d1/data_8c-source.html#l00031">IoepErrThreadListHead</a>, <a class="el" href="../../d1/d1/data_8c-source.html#l00034">IoepRegKeyStrIoErr</a>, <a class="el" href="../../d1/d1/data_8c-source.html#l00033">IoepSaveDataListHead</a>, <a class="el" href="../../d4/d9/ke_8h.html#a354">KeInitializeSpinLock()</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d7/d4/ioep_8h-source.html#l00066">PROCNAME</a>, <a class="el" href="../../d3/d6/string_8c-source.html#l00148">RtlInitUnicodeString()</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
<pre class="fragment"><div>00043                    :
00044     This routine initializes <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> whole error logging/handling system.
00045 
00046 Arguments:
00047     None
00048 
00049 Return Value:
00050     Success - returns <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>
00051     Failure - returns <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>
00052 
00053 --*/
00054 {
00055     <a class="code" href="../../d6/d5/ioep_8h.html#a20">PROCNAME</a>(<span class="stringliteral">"IoErrInitSystem"</span>);
00056     BOOLEAN rc = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00057 
00058     <a class="code" href="../../d7/d4/trace_8h.html#a0">ENTER</a>(1, (<span class="stringliteral">"()\n"</span>));
00059 
00060     <a class="code" href="../../d4/d9/ke_8h.html#a354">KeInitializeSpinLock</a>(&amp;IoepErrListLock);
00061     InitializeListHead(&amp;IoepErrThreadListHead);
00062     InitializeListHead(&amp;IoepErrModuleListHead);
00063     InitializeListHead(&amp;IoepSaveDataListHead);
00064     <a class="code" href="../../d2/d7/string_8c.html#a7">RtlInitUnicodeString</a>(
00065         &amp;IoepRegKeyStrIoErr,
00066         L<span class="stringliteral">"\\REGISTRY\\MACHINE\\SYSTEM\\CURRENTCONTROLSET\\SERVICES\\IOERR"</span>);
00067 
00068     <a class="code" href="../../d3/d9/arcinst_8c.html#a2">EXIT</a>(1, (<span class="stringliteral">"=%x\n"</span>, rc));
00069     <span class="keywordflow">return</span> rc;
00070 }       <span class="comment">//IoErrInitSystem</span>

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a25" doxytag="ioeapi.h::IoErrLogErrByIrp" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID IoErrLogErrByIrp           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN <a class="el" href="../../d0/d2/struct__IRP.html">PIRP</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Irp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN CONST GUID *&nbsp;</td>
          <td class="mdname" nowrap> <em>ComponentGuid</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>ErrCode</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PWSTR TextData&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>DataBlkType</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG DataBlkLen&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PVOID DataBlock&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN CONST GUID *MofGuid&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/ioeapi_8c-source.html#l00135">135</a> of file <a class="el" href="../../d5/d4/ioeapi_8c-source.html">ioeapi.c</a>.
<p>
References <a class="el" href="../../d8/d3/trace_8h-source.html#l00051">ENTER</a>, <a class="el" href="../../d4/d8/arcinst_8c-source.html#l00055">EXIT</a>, <a class="el" href="../../d8/d4/ioerr_8c-source.html#l00255">IoepLogErr()</a>, <a class="el" href="../../d1/d5/iop_8h-source.html#l00130">Irp</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d7/d4/ioep_8h-source.html#l00066">PROCNAME</a>, and <a class="el" href="../../d7/d4/ioep_8h-source.html#l00045">THREADKEY_IRP</a>.
<p>
<pre class="fragment"><div>00147                    :
00148     This routine logs <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> error data to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> error log session identified by
00149     <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> given <a class="code" href="../../d0/d6/iop_8h.html#a35">Irp</a>.
00150 
00151 Arguments:
00152     <a class="code" href="../../d0/d6/iop_8h.html#a35">Irp</a> - points to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> <a class="code" href="../../d0/d6/iop_8h.html#a35">Irp</a> that <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> used as <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> key to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> logging session.
00153     ComponentGuid - points to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> component GUID of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> caller
00154     ErrCode - unique error code
00155     TextData - points to an optional WSTR of <a class="code" href="../../d7/d1/genuedef_8c.html#a5">text</a> data
00156     DataBlkType - data <a class="code" href="../../d3/d5/i386_2trapc_8c.html#a9">type</a> of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> data block
00157     DataBlkLen - length of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> data block
00158     DataBlock - points to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> data block
00159     MofGuid - points to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> MOF GUID of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> data block <span class="keywordflow">if</span> applicable
00160 
00161 Return Value:
00162     None
00163 
00164 --*/
00165 {
00166     <a class="code" href="../../d6/d5/ioep_8h.html#a20">PROCNAME</a>(<span class="stringliteral">"IoErrLogErrByIrp"</span>);
00167 
00168     <a class="code" href="../../d7/d4/trace_8h.html#a0">ENTER</a>(1, (<span class="stringliteral">"(Irp=%p,pGuid=%p,ErrCode=%x,Text=%S,Type=%x,Len=%d,DataBlk=%p,MofGuid=%p)\n"</span>,
00169               Irp, ComponentGuid, ErrCode, TextData? TextData: L<span class="stringliteral">""</span>, DataBlkType,
00170               DataBlkLen, DataBlock, MofGuid));
00171 
00172     <a class="code" href="../../d7/d5/ioerr_8c.html#a3">IoepLogErr</a>(THREADKEY_IRP,
00173                Irp,
00174                ComponentGuid,
00175                ErrCode,
00176                TextData,
00177                DataBlkType,
00178                DataBlkLen,
00179                DataBlock,
00180                MofGuid);
00181 
00182     <a class="code" href="../../d3/d9/arcinst_8c.html#a2">EXIT</a>(1, (<span class="stringliteral">"!\n"</span>));
00183 }       <span class="comment">//IoErrLogErrByIrp</span>

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a26" doxytag="ioeapi.h::IoErrLogErrByThreadID" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID IoErrLogErrByThreadID           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN <a class="el" href="../../d1/d8/struct__KTHREAD.html">PKTHREAD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ThreadID</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN CONST GUID *&nbsp;</td>
          <td class="mdname" nowrap> <em>ComponentGuid</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>ErrCode</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PWSTR TextData&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>DataBlkType</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG DataBlkLen&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PVOID DataBlock&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN CONST GUID *MofGuid&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/ioeapi_8c-source.html#l00186">186</a> of file <a class="el" href="../../d5/d4/ioeapi_8c-source.html">ioeapi.c</a>.
<p>
References <a class="el" href="../../d8/d3/trace_8h-source.html#l00051">ENTER</a>, <a class="el" href="../../d4/d8/arcinst_8c-source.html#l00055">EXIT</a>, <a class="el" href="../../d8/d4/ioerr_8c-source.html#l00255">IoepLogErr()</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d7/d4/ioep_8h-source.html#l00066">PROCNAME</a>, and <a class="el" href="../../d7/d4/ioep_8h-source.html#l00046">THREADKEY_THREADID</a>.
<p>
<pre class="fragment"><div>00198                    :
00199     This routine logs <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> error data to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> error log session identified by
00200     <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> given ThreadID.
00201 
00202 Arguments:
00203     ThreadID - points to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> ThreadID that <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> used as <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> key to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> logging
00204                session.
00205     ComponentGuid - points to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> component GUID of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> caller
00206     ErrCode - unique error code
00207     TextData - points to an optional WSTR of <a class="code" href="../../d7/d1/genuedef_8c.html#a5">text</a> data
00208     DataBlkType - data <a class="code" href="../../d3/d5/i386_2trapc_8c.html#a9">type</a> of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> data block
00209     DataBlkLen - length of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> data block
00210     DataBlock - points to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> data block
00211     MofGuid - points to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> MOF GUID of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> data block <span class="keywordflow">if</span> applicable
00212 
00213 Return Value:
00214     None
00215 
00216 --*/
00217 {
00218     <a class="code" href="../../d6/d5/ioep_8h.html#a20">PROCNAME</a>(<span class="stringliteral">"IoErrLogErrByThreadID"</span>);
00219 
00220     <a class="code" href="../../d7/d4/trace_8h.html#a0">ENTER</a>(1, (<span class="stringliteral">"(ThreadID=%p,pGuid=%p,ErrCode=%x,Text=%S,Type=%x,Len=%d,DataBlk=%p,MofGuid=%p)\n"</span>,
00221               ThreadID, ComponentGuid, ErrCode, TextData? TextData: L<span class="stringliteral">""</span>,
00222               DataBlkType, DataBlkLen, DataBlock, MofGuid));
00223 
00224     <a class="code" href="../../d7/d5/ioerr_8c.html#a3">IoepLogErr</a>(THREADKEY_THREADID,
00225                ThreadID,
00226                ComponentGuid,
00227                ErrCode,
00228                TextData,
00229                DataBlkType,
00230                DataBlkLen,
00231                DataBlock,
00232                MofGuid);
00233 
00234     <a class="code" href="../../d3/d9/arcinst_8c.html#a2">EXIT</a>(1, (<span class="stringliteral">"!\n"</span>));
00235 }       <span class="comment">//IoErrLogErrByThreadID</span>

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a34" doxytag="ioeapi.h::IoErrMatchErrCase" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS IoErrMatchErrCase           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN <a class="el" href="../../d3/d5/struct__errinfo.html">PERRINFO</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ErrInfo</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>ErrCaseID</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PHANDLE ErrCaseHandle&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/ioeapi_8c-source.html#l00800">800</a> of file <a class="el" href="../../d5/d4/ioeapi_8c-source.html">ioeapi.c</a>.
<p>
References <a class="el" href="../../d7/d4/ntgdi_2icm_2inc_2debug_8h-source.html#l00146">ASSERT</a>, <a class="el" href="../../d7/d4/ioep_8h-source.html#l00067">DBGPRINT</a>, <a class="el" href="../../d8/d3/trace_8h-source.html#l00051">ENTER</a>, <a class="el" href="../../d4/d3/ecdb_8h-source.html#l00044">_errcase::ErrCaseID</a>, <a class="el" href="../../d4/d3/ecdb_8h-source.html#l00037">_errcasedb::ErrCaseOffset</a>, <a class="el" href="../../d4/d3/ecdb_8h-source.html#l00039">_errcasedb::ErrIDPathBlkOffset</a>, <a class="el" href="../../d4/d3/ecdb_8h-source.html#l00045">_errcase::ErrIDPathOffset</a>, <a class="el" href="../../d4/d8/arcinst_8c-source.html#l00055">EXIT</a>, <a class="el" href="../../d8/d4/ioerr_8c-source.html#l01200">IoepGetErrCaseDB()</a>, <a class="el" href="../../d8/d4/ioerr_8c-source.html#l00862">IoepMatchErrIDPath()</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d4/d3/ecdb_8h-source.html#l00038">_errcasedb::NumErrCases</a>, <a class="el" href="../../d1/d8/ntosdef_8h-source.html#l00462">PAGED_CODE</a>, <a class="el" href="../../d5/d5/ioeapi_8h.html#a15">PERRID</a>, <a class="el" href="../../d7/d4/ioep_8h-source.html#l00066">PROCNAME</a>, <a class="el" href="../../d6/d4/ioeapi_8h-source.html#l00083">SIG_ERRINFO</a>, and <a class="el" href="../../d6/d4/ioeapi_8h-source.html#l00036">STATUS_IOE_DATABASE_NOT_READY</a>.
<p>
<pre class="fragment"><div>00807                    :
00808     This routine gets <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> indexed error entry from <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> error stack.
00809 
00810 Arguments:
00811     ErrInfo - points to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> error info.
00812     ErrCaseID - points to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> variable to receive <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> error <span class="keywordflow">case</span> <a class="code" href="../../d4/d9/smbtrsup_8c.html#a7">ID</a>
00813     ErrCaseHandle - points to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> variable to receive <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> error <span class="keywordflow">case</span> handle
00814 
00815 Return Value:
00816     Success - returns STATUS_SUCCESS
00817     Failure - returns NT status code
00818 
00819 --*/
00820 {
00821     <a class="code" href="../../d6/d5/ioep_8h.html#a20">PROCNAME</a>(<span class="stringliteral">"IoErrMatchErrCase"</span>);
00822     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> status;
00823 
00824     <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>(ErrInfo != NULL);
00825     <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>(ErrInfo-&gt;Signature == SIG_ERRINFO);
00826     <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>(ErrCaseID != NULL);
00827     <a class="code" href="../../d0/d9/ntosdef_8h.html#a28">PAGED_CODE</a>();
00828     <a class="code" href="../../d7/d4/trace_8h.html#a0">ENTER</a>(1, (<span class="stringliteral">"(ErrInfo=%p,pErrCaseID=%p,pErrCaseHandle=%p)\n"</span>,
00829               ErrInfo, ErrCaseID, ErrCaseHandle));
00830 
00831     <span class="keywordflow">if</span> ((ErrInfo != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) &amp;&amp; (ErrInfo-&gt;Signature == <a class="code" href="../../d5/d5/ioeapi_8h.html#a12">SIG_ERRINFO</a>))
00832     {
00833         <a class="code" href="../../d9/d4/struct__errcasedb.html">PERRCASEDB</a> ErrCaseDB = <a class="code" href="../../d7/d5/ioerr_8c.html#a14">IoepGetErrCaseDB</a>();
00834 
00835         <span class="keywordflow">if</span> (ErrCaseDB != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00836         {
00837             <a class="code" href="../../d8/d4/struct__errcase.html">PERRCASE</a> ErrCaseTable;
00838             <a class="code" href="../../d2/d5/struct__errid.html">PERRID</a> ErrIDPath;
00839             ULONG i;
00840 
00841             ErrCaseTable = (<a class="code" href="../../d8/d4/struct__errcase.html">PERRCASE</a>)((ULONG_PTR)ErrCaseDB +
00842                                       ErrCaseDB-&gt;<a class="code" href="../../d9/d4/struct__errcasedb.html#o4">ErrCaseOffset</a>);
00843 
00844             <span class="keywordflow">for</span> (i = 0, status = STATUS_NOT_FOUND; i &lt; ErrCaseDB-&gt;<a class="code" href="../../d9/d4/struct__errcasedb.html#o5">NumErrCases</a>; ++i)
00845             {
00846                 ErrIDPath = (<a class="code" href="../../d2/d5/struct__errid.html">PERRID</a>)((ULONG_PTR)ErrCaseDB +
00847                                      ErrCaseDB-&gt;<a class="code" href="../../d9/d4/struct__errcasedb.html#o6">ErrIDPathBlkOffset</a> +
00848                                      ErrCaseTable[i].<a class="code" href="../../d8/d4/struct__errcase.html#o1">ErrIDPathOffset</a>);
00849 
00850                 <span class="keywordflow">if</span> (<a class="code" href="../../d7/d5/ioerr_8c.html#a10">IoepMatchErrIDPath</a>(ErrInfo,
00851                                        ErrIDPath,
00852                                        ErrCaseTable[i].NumErrIDs))
00853                 {
00854                     *ErrCaseID = ErrCaseTable[i].<a class="code" href="../../d8/d4/struct__errcase.html#o0">ErrCaseID</a>;
00855                     <span class="keywordflow">if</span> (ErrCaseHandle != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00856                     {
00857                         *ErrCaseHandle = &amp;ErrCaseTable[i];
00858                     }
00859                     status = STATUS_SUCCESS;
00860                     <span class="keywordflow">break</span>;
00861                 }
00862             }
00863         }
00864         <span class="keywordflow">else</span>
00865         {
00866             status = <a class="code" href="../../d5/d5/ioeapi_8h.html#a2">STATUS_IOE_DATABASE_NOT_READY</a>;
00867             <a class="code" href="../../d6/d5/ioep_8h.html#a21">DBGPRINT</a>((<span class="stringliteral">"error case database not ready\n"</span>));
00868         }
00869     }
00870     <span class="keywordflow">else</span>
00871     {
00872         status = STATUS_INVALID_PARAMETER;
00873         <a class="code" href="../../d6/d5/ioep_8h.html#a21">DBGPRINT</a>((<span class="stringliteral">"invalid handle\n"</span>))
00874     }
00875 
00876     <a class="code" href="../../d3/d9/arcinst_8c.html#a2">EXIT</a>(1, (<span class="stringliteral">"=%x(ErrCaseID=%x,ErrCase=%p)\n"</span>,
00877              status, *ErrCaseID, ErrCaseHandle? *ErrCaseHandle: 0));
00878     <span class="keywordflow">return</span> status;
00879 }       <span class="comment">//IoErrMatchErrCase</span>

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a27" doxytag="ioeapi.h::IoErrPropagateErrLog" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID IoErrPropagateErrLog           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HANDLE&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>ErrLogHandle</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/ioeapi_8c-source.html#l00238">238</a> of file <a class="el" href="../../d5/d4/ioeapi_8c-source.html">ioeapi.c</a>.
<p>
References <a class="el" href="../../d7/d4/ntgdi_2icm_2inc_2debug_8h-source.html#l00146">ASSERT</a>, <a class="el" href="../../d7/d4/ioep_8h-source.html#l00067">DBGPRINT</a>, <a class="el" href="../../d8/d3/trace_8h-source.html#l00051">ENTER</a>, <a class="el" href="../../d7/d4/ioep_8h-source.html#l00109">_errlog::ErrInfo</a>, <a class="el" href="../../d6/d5/ioep_8h.html#a31">ERRLOG</a>, <a class="el" href="../../d7/d4/ioep_8h-source.html#l00085">_errthread::ErrLogListHead</a>, <a class="el" href="../../d7/d4/ioep_8h-source.html#l00107">_errlog::ErrStack</a>, <a class="el" href="../../d7/d4/ioep_8h-source.html#l00108">_errlog::ErrThread</a>, <a class="el" href="../../d7/d2/cmwraper_8c-source.html#l00304">ExFreePool()</a>, <a class="el" href="../../d4/d8/arcinst_8c-source.html#l00055">EXIT</a>, <a class="el" href="../../d1/d1/data_8c-source.html#l00030">IoepErrListLock</a>, <a class="el" href="../../d7/d4/ioep_8h-source.html#l00133">IoepGetErrStack</a>, <a class="el" href="../../d7/d4/ioep_8h-source.html#l00106">_errlog::list</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d6/d5/ioep_8h.html#a28">PERRENTRY</a>, <a class="el" href="../../d7/d4/ioep_8h-source.html#l00066">PROCNAME</a>, <a class="el" href="../../d7/d4/ioep_8h-source.html#l00112">SIG_ERRLOG</a>, <a class="el" href="../../d7/d4/ioep_8h-source.html#l00104">_errlog::Signature</a>, <a class="el" href="../../d6/d4/ioeapi_8h-source.html#l00074">_errinfo::Signature</a>, and <a class="el" href="../../d7/d4/ioep_8h-source.html#l00074">_errentry::slist</a>.
<p>
<pre class="fragment"><div>00243                    :
00244     This routine propagates <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> error log stack from <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> current error log
00245     session to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> next nested error log session.
00246 
00247 Arguments:
00248     ErrLogHandle - points to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> error log session
00249 
00250 Return Value:
00251     None
00252 
00253 --*/
00254 {
00255     <a class="code" href="../../d6/d5/ioep_8h.html#a20">PROCNAME</a>(<span class="stringliteral">"IoErrPropagateErrLog"</span>);
00256     <a class="code" href="../../d4/d5/struct__errlog.html">PERRLOG</a> ErrLog = (<a class="code" href="../../d4/d5/struct__errlog.html">PERRLOG</a>)ErrLogHandle;
00257 
00258     <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>(ErrLogHandle != NULL);
00259     <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>(((<a class="code" href="../../d4/d5/struct__errlog.html">PERRLOG</a>)ErrLogHandle)-&gt;Signature == SIG_ERRLOG);
00260     <a class="code" href="../../d7/d4/trace_8h.html#a0">ENTER</a>(1, (<span class="stringliteral">"(ErrLog=%p)\n"</span>, ErrLogHandle));
00261 
00262     <span class="keywordflow">if</span> ((ErrLog != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) &amp;&amp; (ErrLog-&gt;<a class="code" href="../../d4/d5/struct__errlog.html#o0">Signature</a> == <a class="code" href="../../d6/d5/ioep_8h.html#a22">SIG_ERRLOG</a>))
00263     {
00264         <a class="code" href="../../d1/d5/struct__errentry.html">PERRENTRY</a> ErrStack;
00265         KIRQL Irql;
00266 
00267         ExAcquireSpinLock(&amp;IoepErrListLock, &amp;Irql);
00268         ErrStack = <a class="code" href="../../d6/d5/ioep_8h.html#a25">IoepGetErrStack</a>((<a class="code" href="../../d4/d5/struct__errlog.html">PERRLOG</a>)ErrLogHandle);
00269         <span class="keywordflow">if</span> (ErrStack != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00270         {
00271             <a class="code" href="../../d4/d5/struct__errlog.html">PERRLOG</a> ErrLogNext;
00272 
00273             ErrLogNext = CONTAINING_RECORD(ErrLog-&gt;<a class="code" href="../../d4/d5/struct__errlog.html#o2">list</a>.Flink, <a class="code" href="../../d4/d5/struct__errlog.html">ERRLOG</a>, list);
00274             <span class="keywordflow">if</span> (&amp;ErrLogNext-&gt;<a class="code" href="../../d4/d5/struct__errlog.html#o2">list</a> != &amp;ErrLog-&gt;<a class="code" href="../../d4/d5/struct__errlog.html#o4">ErrThread</a>-&gt;<a class="code" href="../../d9/d5/struct__errthread.html#o1">ErrLogListHead</a>)
00275             {
00276                 PSINGLE_LIST_ENTRY ErrTail;
00277 
00278                 <span class="keywordflow">for</span> (ErrTail = &amp;ErrStack-&gt;<a class="code" href="../../d1/d5/struct__errentry.html#o0">slist</a>;
00279                      ErrTail-&gt;Next != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00280                      ErrTail = ErrTail-&gt;Next)
00281                     ;
00282 
00283                 ErrTail-&gt;Next = ErrLogNext-&gt;<a class="code" href="../../d4/d5/struct__errlog.html#o3">ErrStack</a>.Next;
00284                 ErrLogNext-&gt;<a class="code" href="../../d4/d5/struct__errlog.html#o3">ErrStack</a>.Next = ErrStack-&gt;<a class="code" href="../../d1/d5/struct__errentry.html#o0">slist</a>.Next;
00285                 ErrLog-&gt;<a class="code" href="../../d4/d5/struct__errlog.html#o3">ErrStack</a>.Next = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00286                 <span class="keywordflow">if</span> (ErrLog-&gt;<a class="code" href="../../d4/d5/struct__errlog.html#o5">ErrInfo</a> != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00287                 {
00288                     ErrLog-&gt;<a class="code" href="../../d4/d5/struct__errlog.html#o5">ErrInfo</a>-&gt;<a class="code" href="../../d3/d5/struct__errinfo.html#o0">Signature</a> = 0;
00289                     <a class="code" href="../../d5/d8/ex_8h.html#a224">ExFreePool</a>(ErrLog-&gt;<a class="code" href="../../d4/d5/struct__errlog.html#o5">ErrInfo</a>);
00290                     ErrLog-&gt;<a class="code" href="../../d4/d5/struct__errlog.html#o5">ErrInfo</a> = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00291                 }
00292             }
00293         }
00294         ExReleaseSpinLock(&amp;IoepErrListLock, Irql);
00295     }
00296     <span class="keywordflow">else</span>
00297     {
00298         <a class="code" href="../../d6/d5/ioep_8h.html#a21">DBGPRINT</a>((<span class="stringliteral">"invalid handle\n"</span>))
00299     }
00300 
00301     <a class="code" href="../../d3/d9/arcinst_8c.html#a2">EXIT</a>(1, (<span class="stringliteral">"!\n"</span>));
00302 }       <span class="comment">//IoErrPropagateErrLog</span>

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a29" doxytag="ioeapi.h::IoErrRegisterErrHandlers" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS IoErrRegisterErrHandlers           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN CONST GUID *&nbsp;</td>
          <td class="mdname" nowrap> <em>ModuleGuid</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>NumErrHandlers</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d5/d5/ioeapi_8h.html#a22">PERRHANDLER</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>HandlerTable</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/ioeapi_8c-source.html#l00383">383</a> of file <a class="el" href="../../d5/d4/ioeapi_8c-source.html">ioeapi.c</a>.
<p>
References <a class="el" href="../../d7/d4/ntgdi_2icm_2inc_2debug_8h-source.html#l00146">ASSERT</a>, <a class="el" href="../../d7/d4/ioep_8h-source.html#l00125">_errmodule::ComponentGuid</a>, <a class="el" href="../../d7/d4/ioep_8h-source.html#l00067">DBGPRINT</a>, <a class="el" href="../../d8/d3/trace_8h-source.html#l00051">ENTER</a>, <a class="el" href="../../d6/d5/ioep_8h.html#a35">ERRMODULE</a>, <a class="el" href="../../d6/d7/ex_8h-source.html#l00253">ExAllocatePoolWithTag</a>, <a class="el" href="../../d5/d8/ex_8h.html#a238">ExInterlockedInsertTailList()</a>, <a class="el" href="../../d4/d8/arcinst_8c-source.html#l00055">EXIT</a>, <a class="el" href="../../d7/d4/ioep_8h-source.html#l00127">_errmodule::HandlerTable</a>, <a class="el" href="../../d1/d1/data_8c-source.html#l00030">IoepErrListLock</a>, <a class="el" href="../../d1/d1/data_8c-source.html#l00032">IoepErrModuleListHead</a>, <a class="el" href="../../d8/d4/ioerr_8c-source.html#l00456">IoepFindErrModule()</a>, <a class="el" href="../../d7/d4/ioep_8h-source.html#l00036">IOETAG_ERRMODULE</a>, <a class="el" href="../../d7/d4/ioep_8h-source.html#l00124">_errmodule::list</a>, <a class="el" href="../../d5/d8/ex_8h.html#a329a173">NonPagedPool</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d4/ioep_8h-source.html#l00126">_errmodule::NumErrHandlers</a>, <a class="el" href="../../d6/d4/ioeapi_8h-source.html#l00095">PERRHANDLER</a>, <a class="el" href="../../d6/d5/ioep_8h.html#a36">PERRMODULE</a>, <a class="el" href="../../d7/d4/ioep_8h-source.html#l00066">PROCNAME</a>, and <a class="el" href="../../d6/d4/ioeapi_8h-source.html#l00035">STATUS_IOE_MODULE_ALREADY_REGISTERED</a>.
<p>
<pre class="fragment"><div>00390                    :
00391     This routine registers error handlers <span class="keywordflow">for</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> caller module.
00392 
00393 Arguments:
00394     ComponentGuid - points to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> GUID of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> caller component
00395     NumErrHandlers - number of error handlers in <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> table
00396     HandlerTable - points to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> error handler table
00397 
00398 Return Value:
00399     Success - returns STATUS_SUCCESS
00400     Failure - returns NT status code
00401 
00402 --*/
00403 {
00404     <a class="code" href="../../d6/d5/ioep_8h.html#a20">PROCNAME</a>(<span class="stringliteral">"IoErrRegisterErrHandlers"</span>);
00405     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> status;
00406     <a class="code" href="../../d5/d5/struct__errmodule.html">PERRMODULE</a> ErrModule;
00407 
00408     <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>(ComponentGuid != NULL);
00409     <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>(NumErrHandlers &gt; 0);
00410     <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>(HandlerTable != NULL);
00411     <a class="code" href="../../d7/d4/trace_8h.html#a0">ENTER</a>(1, (<span class="stringliteral">"(pGuid=%p,NumHandlers=%d,HandleTable=%p)\n"</span>,
00412               ComponentGuid, NumErrHandlers, HandlerTable));
00413 
00414     ErrModule = <a class="code" href="../../d7/d5/ioerr_8c.html#a5">IoepFindErrModule</a>(ComponentGuid);
00415     <span class="keywordflow">if</span> (ErrModule == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00416     {
00417         ErrModule = <a class="code" href="../../d5/d8/ex_8h.html#a4">ExAllocatePoolWithTag</a>(
00418                         NonPagedPool,
00419                         <span class="keyword">sizeof</span>(<a class="code" href="../../d5/d5/struct__errmodule.html">ERRMODULE</a>) +
00420                         <span class="keyword">sizeof</span>(PERRHANDLER)*(NumErrHandlers - 1),
00421                         IOETAG_ERRMODULE);
00422 
00423         <span class="keywordflow">if</span> (ErrModule != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00424         {
00425             ErrModule-&gt;<a class="code" href="../../d5/d5/struct__errmodule.html#o1">ComponentGuid</a> = *ComponentGuid;
00426             ErrModule-&gt;<a class="code" href="../../d5/d5/struct__errmodule.html#o2">NumErrHandlers</a> = NumErrHandlers;
00427             RtlCopyMemory(ErrModule-&gt;<a class="code" href="../../d5/d5/struct__errmodule.html#o3">HandlerTable</a>,
00428                           HandlerTable,
00429                           <span class="keyword">sizeof</span>(PERRHANDLER)*NumErrHandlers);
00430             <a class="code" href="../../d5/d8/ex_8h.html#a238">ExInterlockedInsertTailList</a>(&amp;IoepErrModuleListHead,
00431                                         &amp;ErrModule-&gt;<a class="code" href="../../d5/d5/struct__errmodule.html#o0">list</a>,
00432                                         &amp;IoepErrListLock);
00433             status = STATUS_SUCCESS;
00434         }
00435         <span class="keywordflow">else</span>
00436         {
00437             status = STATUS_INSUFFICIENT_RESOURCES;
00438             <a class="code" href="../../d6/d5/ioep_8h.html#a21">DBGPRINT</a>((<span class="stringliteral">"failed to allocate error module\n"</span>));
00439         }
00440     }
00441     <span class="keywordflow">else</span>
00442     {
00443         status = <a class="code" href="../../d5/d5/ioeapi_8h.html#a1">STATUS_IOE_MODULE_ALREADY_REGISTERED</a>;
00444         <a class="code" href="../../d6/d5/ioep_8h.html#a21">DBGPRINT</a>((<span class="stringliteral">"error module already registered\n"</span>));
00445     }
00446 
00447     <a class="code" href="../../d3/d9/arcinst_8c.html#a2">EXIT</a>(1, (<span class="stringliteral">"=%x\n"</span>, status));
00448     <span class="keywordflow">return</span> status;
00449 }       <span class="comment">//IoErrRegisterErrHandlers</span>

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a40" doxytag="ioeapi.h::IoErrRetrieveSavedData" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS IoErrRetrieveSavedData           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">OUT <a class="el" href="../../d1/d2/struct__infoblk.html">PINFOBLK</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>InfoBlk</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>BuffSize</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PULONG DataSize&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PVOID DataTag&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG TagFlags&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/ioeapi_8c-source.html#l00698">698</a> of file <a class="el" href="../../d5/d4/ioeapi_8c-source.html">ioeapi.c</a>.
<p>
References <a class="el" href="../../d7/d4/ntgdi_2icm_2inc_2debug_8h-source.html#l00146">ASSERT</a>, <a class="el" href="../../d6/d4/ioeapi_8h-source.html#l00077">_errinfo::DataTag</a>, <a class="el" href="../../d7/d4/ioep_8h-source.html#l00067">DBGPRINT</a>, <a class="el" href="../../d8/d3/trace_8h-source.html#l00051">ENTER</a>, <a class="el" href="../../d5/d5/ioeapi_8h.html#a18">ERRINFO</a>, <a class="el" href="../../d7/d4/ioep_8h-source.html#l00118">_savedata::ErrInfo</a>, <a class="el" href="../../d4/d8/arcinst_8c-source.html#l00055">EXIT</a>, <a class="el" href="../../d5/d5/ioeapi_8h.html#a20">INFOBLK</a>, <a class="el" href="../../d7/d4/ioep_8h-source.html#l00054">IOE_INFOBLK_VERSION</a>, <a class="el" href="../../d6/d4/ioeapi_8h-source.html#l00052">IOEDATATAG_TYPE_MASK</a>, <a class="el" href="../../d1/d1/data_8c-source.html#l00033">IoepSaveDataListHead</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d5/ioeapi_8h.html#a21">PINFOBLK</a>, <a class="el" href="../../d7/d4/ioep_8h-source.html#l00066">PROCNAME</a>, <a class="el" href="../../d6/d4/ioeapi_8h-source.html#l00093">SIG_INFOBLK</a>, <a class="el" href="../../d6/d4/ioeapi_8h-source.html#l00076">_errinfo::Size</a>, and <a class="el" href="../../d6/d4/ioeapi_8h-source.html#l00078">_errinfo::TagFlags</a>.
<p>
<pre class="fragment"><div>00707                    :
00708     This routine returns <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> saved error info. in <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> given buffer.  If no
00709     DataTag <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> given, data of all saved error info. are returned.  Otherwise,
00710     <a class="code" href="../../d3/d0/imm32_8def.html#a1">only</a> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> data of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> error info. which matches <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> data tag <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> returned.
00711 
00712 Arguments:
00713     InfoBlk - points to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> buffer to receive <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> data
00714     BuffSize - specifies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> size of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> buffer
00715     DataSize - points to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> variable to receive <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> actual data size
00716     DataTag - tag associated with <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> data info.
00717     TagFlags - tag flags
00718 
00719 Return Value:
00720     Success - returns STATUS_SUCCESS
00721     Failure - returns NT status code
00722 
00723 --*/
00724 {
00725     <a class="code" href="../../d6/d5/ioep_8h.html#a20">PROCNAME</a>(<span class="stringliteral">"IoErrRetrieveSavedData"</span>);
00726     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> status = STATUS_SUCCESS;
00727     PLIST_ENTRY list;
00728     ULONG len, i;
00729     <a class="code" href="../../d8/d7/struct__savedata.html">PSAVEDATA</a> SaveData;
00730 
00731     <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>((InfoBlk != NULL) &amp;&amp; (BuffSize &gt; 0) || (DataSize != NULL));
00732     <a class="code" href="../../d7/d4/trace_8h.html#a0">ENTER</a>(1, (<span class="stringliteral">"(Buff=%p,BuffSize=%d,pDataSize=%p,DataTag=%p,TagFlags=%x)\n"</span>,
00733               InfoBlk, BuffSize, DataSize, DataTag, TagFlags));
00734 
00735     <span class="keywordflow">for</span> (list = <a class="code" href="../../d0/d2/data_8c.html#a4">IoepSaveDataListHead</a>.Flink,
00736          len = <span class="keyword">sizeof</span>(<a class="code" href="../../d1/d2/struct__infoblk.html">INFOBLK</a>) - <span class="keyword">sizeof</span>(<a class="code" href="../../d3/d5/struct__errinfo.html">ERRINFO</a>),
00737          i = 0;
00738          list != &amp;<a class="code" href="../../d0/d2/data_8c.html#a4">IoepSaveDataListHead</a>;
00739          list = list-&gt;Flink)
00740     {
00741         SaveData = CONTAINING_RECORD(list, <a class="code" href="../../d8/d7/struct__savedata.html">SAVEDATA</a>, list);
00742         <span class="keywordflow">if</span> ((DataTag == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) ||
00743             (DataTag == SaveData-&gt;<a class="code" href="../../d8/d7/struct__savedata.html#o2">ErrInfo</a>-&gt;<a class="code" href="../../d3/d5/struct__errinfo.html#o3">DataTag</a>) &amp;&amp;
00744             (TagFlags == SaveData-&gt;<a class="code" href="../../d8/d7/struct__savedata.html#o2">ErrInfo</a>-&gt;<a class="code" href="../../d3/d5/struct__errinfo.html#o4">TagFlags</a> &amp; <a class="code" href="../../d5/d5/ioeapi_8h.html#a9">IOEDATATAG_TYPE_MASK</a>))
00745         {
00746             i++;
00747             len += SaveData-&gt;<a class="code" href="../../d8/d7/struct__savedata.html#o2">ErrInfo</a>-&gt;<a class="code" href="../../d3/d5/struct__errinfo.html#o2">Size</a>;
00748         }
00749     }
00750 
00751     <span class="keywordflow">if</span> (len &lt;= BuffSize)
00752     {
00753         <span class="keywordflow">if</span> ((InfoBlk != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) &amp;&amp; (BuffSize &gt; 0))
00754         {
00755             <a class="code" href="../../d3/d5/struct__errinfo.html">PERRINFO</a> ErrInfo;
00756 
00757             InfoBlk-&gt;Signature = <a class="code" href="../../d5/d5/ioeapi_8h.html#a13">SIG_INFOBLK</a>;
00758             InfoBlk-&gt;Version = <a class="code" href="../../d6/d5/ioep_8h.html#a19">IOE_INFOBLK_VERSION</a>;
00759             InfoBlk-&gt;Size = len;
00760             InfoBlk-&gt;NumErrInfos = i;
00761 
00762             <span class="keywordflow">for</span> (list = <a class="code" href="../../d0/d2/data_8c.html#a4">IoepSaveDataListHead</a>.Flink,
00763                  ErrInfo = &amp;InfoBlk-&gt;ErrInfos[0];
00764                  list != &amp;<a class="code" href="../../d0/d2/data_8c.html#a4">IoepSaveDataListHead</a>;
00765                  list = list-&gt;Flink)
00766             {
00767                 SaveData = CONTAINING_RECORD(list, <a class="code" href="../../d8/d7/struct__savedata.html">SAVEDATA</a>, list);
00768                 <span class="keywordflow">if</span> ((DataTag == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) ||
00769                     (DataTag == SaveData-&gt;<a class="code" href="../../d8/d7/struct__savedata.html#o2">ErrInfo</a>-&gt;<a class="code" href="../../d3/d5/struct__errinfo.html#o3">DataTag</a>) &amp;&amp;
00770                     (TagFlags == SaveData-&gt;<a class="code" href="../../d8/d7/struct__savedata.html#o2">ErrInfo</a>-&gt;<a class="code" href="../../d3/d5/struct__errinfo.html#o4">TagFlags</a> &amp;
00771                      <a class="code" href="../../d5/d5/ioeapi_8h.html#a9">IOEDATATAG_TYPE_MASK</a>))
00772                 {
00773                     RtlCopyMemory(ErrInfo,
00774                                   SaveData-&gt;<a class="code" href="../../d8/d7/struct__savedata.html#o2">ErrInfo</a>,
00775                                   SaveData-&gt;<a class="code" href="../../d8/d7/struct__savedata.html#o2">ErrInfo</a>-&gt;<a class="code" href="../../d3/d5/struct__errinfo.html#o2">Size</a>);
00776                     ErrInfo = (<a class="code" href="../../d3/d5/struct__errinfo.html">PERRINFO</a>)((PUCHAR)ErrInfo +
00777                                          SaveData-&gt;<a class="code" href="../../d8/d7/struct__savedata.html#o2">ErrInfo</a>-&gt;<a class="code" href="../../d3/d5/struct__errinfo.html#o2">Size</a>);
00778                 }
00779             }
00780         }
00781 
00782         status = STATUS_SUCCESS;
00783     }
00784     <span class="keywordflow">else</span>
00785     {
00786         status = STATUS_BUFFER_TOO_SMALL;
00787         <a class="code" href="../../d6/d5/ioep_8h.html#a21">DBGPRINT</a>((<span class="stringliteral">"buffer too small (size=%d,need=%d)\n"</span>, BuffSize, len));
00788     }
00789 
00790     <span class="keywordflow">if</span> (DataSize != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00791     {
00792         *DataSize = len;
00793     }
00794 
00795     <a class="code" href="../../d3/d9/arcinst_8c.html#a2">EXIT</a>(1, (<span class="stringliteral">"=%x(len=%d)\n"</span>, status, len));
00796     <span class="keywordflow">return</span> status;
00797 }       <span class="comment">//IoErrRetrievedSavedData</span>

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a31" doxytag="ioeapi.h::IoErrSaveErrData" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HANDLE IoErrSaveErrData           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>ErrLogHandle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PVOID DataTag&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG TagFlags&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/ioeapi_8c-source.html#l00538">538</a> of file <a class="el" href="../../d5/d4/ioeapi_8c-source.html">ioeapi.c</a>.
<p>
References <a class="el" href="../../d7/d4/ntgdi_2icm_2inc_2debug_8h-source.html#l00146">ASSERT</a>, <a class="el" href="../../d6/d4/ioeapi_8h-source.html#l00077">_errinfo::DataTag</a>, <a class="el" href="../../d7/d4/ioep_8h-source.html#l00067">DBGPRINT</a>, <a class="el" href="../../d8/d3/trace_8h-source.html#l00051">ENTER</a>, <a class="el" href="../../d7/d4/ioep_8h-source.html#l00118">_savedata::ErrInfo</a>, <a class="el" href="../../d6/d7/ex_8h-source.html#l00253">ExAllocatePoolWithTag</a>, <a class="el" href="../../d5/d8/ex_8h.html#a237">ExInterlockedInsertHeadList()</a>, <a class="el" href="../../d4/d8/arcinst_8c-source.html#l00055">EXIT</a>, <a class="el" href="../../d6/d4/ioeapi_8h-source.html#l00054">IOEDATATAG_BITS</a>, <a class="el" href="../../d6/d4/ioeapi_8h-source.html#l00052">IOEDATATAG_TYPE_MASK</a>, <a class="el" href="../../d1/d1/data_8c-source.html#l00030">IoepErrListLock</a>, <a class="el" href="../../d1/d1/data_8c-source.html#l00033">IoepSaveDataListHead</a>, <a class="el" href="../../d5/d4/ioeapi_8c-source.html#l00452">IoErrGetErrData()</a>, <a class="el" href="../../d7/d4/ioep_8h-source.html#l00042">IOETAG_SAVEDATA</a>, <a class="el" href="../../d7/d4/ioep_8h-source.html#l00117">_savedata::list</a>, <a class="el" href="../../d5/d8/ex_8h.html#a329a173">NonPagedPool</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d4/ioep_8h-source.html#l00066">PROCNAME</a>, <a class="el" href="../../d6/d5/ioep_8h.html#a34">PSAVEDATA</a>, <a class="el" href="../../d6/d5/ioep_8h.html#a33">SAVEDATA</a>, <a class="el" href="../../d7/d4/ioep_8h-source.html#l00112">SIG_ERRLOG</a>, <a class="el" href="../../d7/d4/ioep_8h-source.html#l00121">SIG_SAVEDATA</a>, <a class="el" href="../../d7/d4/ioep_8h-source.html#l00116">_savedata::Signature</a>, and <a class="el" href="../../d6/d4/ioeapi_8h-source.html#l00078">_errinfo::TagFlags</a>.
<p>
<pre class="fragment"><div>00545                    :
00546     This routine saves <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> error data and returns a handle to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> saved data.
00547 
00548 Arguments:
00549     ErrLogHandle - points to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> error log session
00550     DataTag - tag to be associated with <span class="keywordflow">for</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> saved error data
00551     KeyFlags - flags about <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> DataTag:
00552         <a class="code" href="../../d5/d5/ioeapi_8h.html#a10">IOEDATATAG_TYPE_DEVNODE</a> - DataTag <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> a DevNode pointer
00553 
00554 Return Value:
00555     Success - returns <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> detached error log handle
00556     Failure - returns <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>
00557 
00558 --*/
00559 {
00560     <a class="code" href="../../d6/d5/ioep_8h.html#a20">PROCNAME</a>(<span class="stringliteral">"IoErrSaveErrData"</span>);
00561     <a class="code" href="../../d8/d7/struct__savedata.html">PSAVEDATA</a> SaveData = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00562 
00563     <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>(ErrLogHandle != NULL);
00564     <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>(((<a class="code" href="../../d4/d5/struct__errlog.html">PERRLOG</a>)ErrLogHandle)-&gt;Signature == SIG_ERRLOG);
00565     <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>((TagFlags &amp; ~IOEDATATAG_BITS) == 0);
00566     <a class="code" href="../../d7/d4/trace_8h.html#a0">ENTER</a>(1, (<span class="stringliteral">"(ErrLog=%p,DataTag=%p,TagFlags=%x)\n"</span>,
00567               ErrLogHandle, DataTag, TagFlags));
00568 
00569     <span class="keywordflow">if</span> ((ErrLogHandle != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) &amp;&amp;
00570         (((<a class="code" href="../../d4/d5/struct__errlog.html">PERRLOG</a>)ErrLogHandle)-&gt;Signature == <a class="code" href="../../d6/d5/ioep_8h.html#a22">SIG_ERRLOG</a>))
00571     {
00572         <a class="code" href="../../d3/d5/struct__errinfo.html">PERRINFO</a> ErrInfo;
00573 
00574         ErrInfo = <a class="code" href="../../d4/d5/ioeapi_8c.html#a8">IoErrGetErrData</a>(ErrLogHandle);
00575         <span class="keywordflow">if</span> (ErrInfo != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00576         {
00577             SaveData = <a class="code" href="../../d5/d8/ex_8h.html#a4">ExAllocatePoolWithTag</a>(NonPagedPool,
00578                                              <span class="keyword">sizeof</span>(<a class="code" href="../../d8/d7/struct__savedata.html">SAVEDATA</a>),
00579                                              IOETAG_SAVEDATA);
00580             <span class="keywordflow">if</span> (SaveData != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00581             {
00582                 ErrInfo-&gt;<a class="code" href="../../d3/d5/struct__errinfo.html#o3">DataTag</a> = DataTag;
00583                 ErrInfo-&gt;<a class="code" href="../../d3/d5/struct__errinfo.html#o4">TagFlags</a> = TagFlags &amp; <a class="code" href="../../d5/d5/ioeapi_8h.html#a9">IOEDATATAG_TYPE_MASK</a>;
00584                 SaveData-&gt;<a class="code" href="../../d8/d7/struct__savedata.html#o0">Signature</a> = <a class="code" href="../../d6/d5/ioep_8h.html#a24">SIG_SAVEDATA</a>;
00585                 SaveData-&gt;<a class="code" href="../../d8/d7/struct__savedata.html#o2">ErrInfo</a> = ErrInfo;
00586                 ((<a class="code" href="../../d4/d5/struct__errlog.html">PERRLOG</a>)ErrLogHandle)-&gt;ErrInfo = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00587                 <a class="code" href="../../d5/d8/ex_8h.html#a237">ExInterlockedInsertHeadList</a>(&amp;IoepSaveDataListHead,
00588                                             &amp;SaveData-&gt;<a class="code" href="../../d8/d7/struct__savedata.html#o1">list</a>,
00589                                             &amp;IoepErrListLock);
00590             }
00591             <span class="keywordflow">else</span>
00592             {
00593                 <a class="code" href="../../d6/d5/ioep_8h.html#a21">DBGPRINT</a>((<span class="stringliteral">"failed to allocate save data block\n"</span>));
00594             }
00595         }
00596     }
00597     <span class="keywordflow">else</span>
00598     {
00599         <a class="code" href="../../d6/d5/ioep_8h.html#a21">DBGPRINT</a>((<span class="stringliteral">"invalid handle\n"</span>))
00600     }
00601 
00602     <a class="code" href="../../d3/d9/arcinst_8c.html#a2">EXIT</a>(1, (<span class="stringliteral">"=%p\n"</span>, SaveData));
00603     <span class="keywordflow">return</span> SaveData;
00604 }       <span class="comment">//IoErrSaveErrData</span>

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a28" doxytag="ioeapi.h::IoErrTerminateErrLog" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID IoErrTerminateErrLog           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HANDLE&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>ErrLogHandle</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/ioeapi_8c-source.html#l00305">305</a> of file <a class="el" href="../../d5/d4/ioeapi_8c-source.html">ioeapi.c</a>.
<p>
References <a class="el" href="../../d7/d4/ntgdi_2icm_2inc_2debug_8h-source.html#l00146">ASSERT</a>, <a class="el" href="../../d0/d0/pnpiop_8h-source.html#l00357">ASSERT_PDO</a>, <a class="el" href="../../d7/d4/ioep_8h-source.html#l00067">DBGPRINT</a>, <a class="el" href="../../d8/d3/trace_8h-source.html#l00051">ENTER</a>, <a class="el" href="../../d7/d4/ioep_8h-source.html#l00109">_errlog::ErrInfo</a>, <a class="el" href="../../d7/d4/ioep_8h-source.html#l00085">_errthread::ErrLogListHead</a>, <a class="el" href="../../d7/d4/ioep_8h-source.html#l00107">_errlog::ErrStack</a>, <a class="el" href="../../d7/d4/ioep_8h-source.html#l00108">_errlog::ErrThread</a>, <a class="el" href="../../d7/d2/cmwraper_8c-source.html#l00304">ExFreePool()</a>, <a class="el" href="../../d4/d8/arcinst_8c-source.html#l00055">EXIT</a>, <a class="el" href="../../d0/d0/pnpiop_8h-source.html#l00177">_DEVICE_NODE::InstancePath</a>, <a class="el" href="../../d1/d1/data_8c-source.html#l00030">IoepErrListLock</a>, <a class="el" href="../../d8/d4/ioerr_8c-source.html#l00612">IoepFireWMIEvent()</a>, <a class="el" href="../../d8/d4/ioerr_8c-source.html#l00414">IoepFreeErrStack()</a>, <a class="el" href="../../d7/d4/ioep_8h-source.html#l00133">IoepGetErrStack</a>, <a class="el" href="../../d5/d4/ioeapi_8c-source.html#l00452">IoErrGetErrData()</a>, <a class="el" href="../../d7/d4/ioep_8h-source.html#l00106">_errlog::list</a>, <a class="el" href="../../d7/d4/ioep_8h-source.html#l00084">_errthread::list</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d4/ioep_8h-source.html#l00066">PROCNAME</a>, <a class="el" href="../../d7/d4/ioep_8h-source.html#l00112">SIG_ERRLOG</a>, <a class="el" href="../../d7/d4/ioep_8h-source.html#l00104">_errlog::Signature</a>, <a class="el" href="../../d6/d4/ioeapi_8h-source.html#l00074">_errinfo::Signature</a>, <a class="el" href="../../d9/d5/struct__errthread.html#o11">_errthread::ThreadKey</a>, <a class="el" href="../../d7/d4/ioep_8h-source.html#l00045">THREADKEY_IRP</a>, and <a class="el" href="../../d7/d4/ioep_8h-source.html#l00086">_errthread::ThreadKeyType</a>.
<p>
<pre class="fragment"><div>00310                    :
00311     This routine terminates an error log session.
00312 
00313 Arguments:
00314     ErrLogHandle - points to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> error log session
00315 
00316 Return Value:
00317     None
00318 
00319 --*/
00320 {
00321     <a class="code" href="../../d6/d5/ioep_8h.html#a20">PROCNAME</a>(<span class="stringliteral">"IoErrTerminateErrLog"</span>);
00322     <a class="code" href="../../d4/d5/struct__errlog.html">PERRLOG</a> ErrLog = (<a class="code" href="../../d4/d5/struct__errlog.html">PERRLOG</a>)ErrLogHandle;
00323 
00324     <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>(ErrLogHandle != NULL);
00325     <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>(((<a class="code" href="../../d4/d5/struct__errlog.html">PERRLOG</a>)ErrLogHandle)-&gt;Signature == SIG_ERRLOG);
00326     <a class="code" href="../../d7/d4/trace_8h.html#a0">ENTER</a>(1, (<span class="stringliteral">"(ErrLog=%p)\n"</span>, ErrLogHandle));
00327 
00328     <span class="keywordflow">if</span> ((ErrLog != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) &amp;&amp; (ErrLog-&gt;<a class="code" href="../../d4/d5/struct__errlog.html#o0">Signature</a> == <a class="code" href="../../d6/d5/ioep_8h.html#a22">SIG_ERRLOG</a>))
00329     {
00330         <a class="code" href="../../d1/d5/struct__errentry.html">PERRENTRY</a> ErrStack;
00331         KIRQL Irql;
00332 
00333         ErrStack = <a class="code" href="../../d6/d5/ioep_8h.html#a25">IoepGetErrStack</a>(ErrLog);
00334         <span class="keywordflow">if</span> (ErrStack != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00335         {
00336             <span class="comment">//</span>
00337             <span class="comment">// If we are at the top level log session by Irp and we have an</span>
00338             <span class="comment">// error, we fire a WMI event.</span>
00339             <span class="comment">//</span>
00340             <span class="keywordflow">if</span> ((ErrLog-&gt;<a class="code" href="../../d4/d5/struct__errlog.html#o4">ErrThread</a>-&gt;<a class="code" href="../../d9/d5/struct__errthread.html#o2">ThreadKeyType</a> == <a class="code" href="../../d6/d5/ioep_8h.html#a12">THREADKEY_IRP</a>) &amp;&amp;
00341                 (ErrLog-&gt;<a class="code" href="../../d4/d5/struct__errlog.html#o2">list</a>.Flink == &amp;ErrLog-&gt;<a class="code" href="../../d4/d5/struct__errlog.html#o4">ErrThread</a>-&gt;<a class="code" href="../../d9/d5/struct__errthread.html#o1">ErrLogListHead</a>))
00342             {
00343                 <a class="code" href="../../d4/d4/struct__DEVICE__NODE.html">PDEVICE_NODE</a> DevNode;
00344 
00345                 <a class="code" href="../../d9/d0/pnpiop_8h.html#a4">ASSERT_PDO</a>(ErrLog-&gt;<a class="code" href="../../d4/d5/struct__errlog.html#o4">ErrThread</a>-&gt;<a class="code" href="../../d9/d5/struct__errthread.html#o11">ThreadKey</a>.IrpKey.TargetDevice);
00346                 DevNode = ErrLog-&gt;<a class="code" href="../../d4/d5/struct__errlog.html#o4">ErrThread</a>-&gt;<a class="code" href="../../d9/d5/struct__errthread.html#o11">ThreadKey</a>.IrpKey.TargetDevice-&gt;DeviceObjectExtension-&gt;DeviceNode;
00347                 <a class="code" href="../../d7/d5/ioerr_8c.html#a7">IoepFireWMIEvent</a>(<a class="code" href="../../d4/d5/ioeapi_8c.html#a8">IoErrGetErrData</a>(ErrLogHandle),
00348                                  DevNode-&gt;<a class="code" href="../../d4/d4/struct__DEVICE__NODE.html#o13">InstancePath</a>.Buffer);
00349             }
00350 
00351             ErrLog-&gt;<a class="code" href="../../d4/d5/struct__errlog.html#o3">ErrStack</a>.Next = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00352             <a class="code" href="../../d7/d5/ioerr_8c.html#a4">IoepFreeErrStack</a>(ErrStack);
00353         }
00354 
00355         ExAcquireSpinLock(&amp;IoepErrListLock, &amp;Irql);
00356         <span class="keywordflow">if</span> (ErrLog-&gt;<a class="code" href="../../d4/d5/struct__errlog.html#o5">ErrInfo</a> != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00357         {
00358             ErrLog-&gt;<a class="code" href="../../d4/d5/struct__errlog.html#o5">ErrInfo</a>-&gt;<a class="code" href="../../d3/d5/struct__errinfo.html#o0">Signature</a> = 0;
00359             <a class="code" href="../../d5/d8/ex_8h.html#a224">ExFreePool</a>(ErrLog-&gt;<a class="code" href="../../d4/d5/struct__errlog.html#o5">ErrInfo</a>);
00360             ErrLog-&gt;<a class="code" href="../../d4/d5/struct__errlog.html#o5">ErrInfo</a> = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00361         }
00362 
00363         RemoveEntryList(&amp;ErrLog-&gt;<a class="code" href="../../d4/d5/struct__errlog.html#o2">list</a>);
00364         <span class="keywordflow">if</span> (IsListEmpty(&amp;ErrLog-&gt;<a class="code" href="../../d4/d5/struct__errlog.html#o4">ErrThread</a>-&gt;<a class="code" href="../../d9/d5/struct__errthread.html#o1">ErrLogListHead</a>))
00365         {
00366             RemoveEntryList(&amp;ErrLog-&gt;<a class="code" href="../../d4/d5/struct__errlog.html#o4">ErrThread</a>-&gt;<a class="code" href="../../d9/d5/struct__errthread.html#o0">list</a>);
00367             <a class="code" href="../../d5/d8/ex_8h.html#a224">ExFreePool</a>(ErrLog-&gt;<a class="code" href="../../d4/d5/struct__errlog.html#o4">ErrThread</a>);
00368             ErrLog-&gt;<a class="code" href="../../d4/d5/struct__errlog.html#o4">ErrThread</a> = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00369         }
00370         ErrLog-&gt;<a class="code" href="../../d4/d5/struct__errlog.html#o0">Signature</a> = 0;
00371         <a class="code" href="../../d5/d8/ex_8h.html#a224">ExFreePool</a>(ErrLog);
00372         ExReleaseSpinLock(&amp;IoepErrListLock, Irql);
00373     }
00374     <span class="keywordflow">else</span>
00375     {
00376         <a class="code" href="../../d6/d5/ioep_8h.html#a21">DBGPRINT</a>((<span class="stringliteral">"invalid handle\n"</span>))
00377     }
00378 
00379     <a class="code" href="../../d3/d9/arcinst_8c.html#a2">EXIT</a>(1, (<span class="stringliteral">"!\n"</span>));
00380 }       <span class="comment">//IoErrTerminateErrLog</span>

</div></pre>    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Sat May 15 19:44:17 2004 for test by
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>test: dbcs.c Source File</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="../../main.html">Main&nbsp;Page</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Class&nbsp;List</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Class&nbsp;Members</a> | <a class="qindex" href="../../globals.html">File&nbsp;Members</a></div>
<h1>dbcs.c</h1><a href="../../d8/d2/client_2dbcs_8c.html">Go to the documentation of this file.</a><pre class="fragment"><div>00001 <span class="comment">/*++</span>
00002 <span class="comment"></span>
00003 <span class="comment">Copyright (c) 1985 - 1999, Microsoft Corporation</span>
00004 <span class="comment"></span>
00005 <span class="comment">Module Name:</span>
00006 <span class="comment"></span>
00007 <span class="comment">    dbcs.c</span>
00008 <span class="comment"></span>
00009 <span class="comment">Abstract:</span>
00010 <span class="comment"></span>
00011 <span class="comment">Author:</span>
00012 <span class="comment"></span>
00013 <span class="comment">    KazuM May.11.1992</span>
00014 <span class="comment"></span>
00015 <span class="comment">Revision History:</span>
00016 <span class="comment"></span>
00017 <span class="comment">--*/</span>
00018 
00019 <span class="preprocessor">#include "<a class="code" href="../../d4/d3/w32_2ntcon_2client_2precomp_8h.html">precomp.h</a>"</span>
00020 <span class="preprocessor">#pragma hdrstop</span>
00021 <span class="preprocessor"></span>
00022 <span class="preprocessor">#if defined(FE_SB)</span>
00023 <span class="preprocessor"></span><span class="preprocessor">#include "<a class="code" href="../../d3/d5/conime_8h.html">conime.h</a>"</span>
00024 
00025 <span class="preprocessor">#if !defined(BUILD_WOW6432)</span>
00026 <span class="preprocessor"></span>
00027 <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>
00028 <a class="code" href="../../d1/d1/bench_8c.html#a0">APIENTRY</a>
00029 <a class="code" href="../../d8/d2/client_2dbcs_8c.html#a0">GetConsoleNlsMode</a>(
00030     IN HANDLE hConsoleHandle,
00031     OUT LPDWORD lpNlsMode
00032     )
00033 
00034 <span class="comment">/*++</span>
00035 <span class="comment"></span>
00036 <span class="comment">Parameters:</span>
00037 <span class="comment"></span>
00038 <span class="comment">    hConsoleHandle - Supplies a console input or output handle.</span>
00039 <span class="comment"></span>
00040 <span class="comment">    lpNlsMode - Supplies a pointer to the NLS mode.</span>
00041 <span class="comment"></span>
00042 <span class="comment">Return Value:</span>
00043 <span class="comment"></span>
00044 <span class="comment">    TRUE - The operation was successful.</span>
00045 <span class="comment"></span>
00046 <span class="comment">    FALSE/NULL - The operation failed. Extended error status is available</span>
00047 <span class="comment">        using GetLastError.</span>
00048 <span class="comment"></span>
00049 <span class="comment"></span>
00050 <span class="comment">--*/</span>
00051 
00052 {
00053 
00054 <span class="preprocessor">#if defined(FE_IME)</span>
00055 <span class="preprocessor"></span>    <a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html">CONSOLE_API_MSG</a> m;
00056     PCONSOLE_NLS_MODE_MSG a = &amp;m.<a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html#o77">u</a>.GetConsoleNlsMode;
00057     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
00058 
00059     a-&gt;ConsoleHandle = <a class="code" href="../../d6/d4/condll_8h.html#a1">GET_CONSOLE_HANDLE</a>;
00060     a-&gt;Handle = hConsoleHandle;
00061     a-&gt;Ready = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00062 
00063     <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d0/d8/ex_2event_8c.html#a5">NtCreateEvent</a>(&amp;(a-&gt;hEvent),
00064                            EVENT_ALL_ACCESS,
00065                            NULL,
00066                            SynchronizationEvent,
00067                            (BOOLEAN)FALSE
00068                            );
00069     <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(Status)) {
00070        <a class="code" href="../../d6/d4/condll_8h.html#a3">SET_LAST_NT_ERROR</a>(Status);
00071        <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00072     }
00073 
00074     <a class="code" href="../../d8/d9/wow64csr_8c.html#a4">CsrClientCallServer</a>( (PCSR_API_MSG)&amp;m,
00075                          NULL,
00076                          CSR_MAKE_API_NUMBER( CONSRV_SERVERDLL_INDEX,
00077                                               ConsolepGetNlsMode
00078                                             ),
00079                          <span class="keyword">sizeof</span>( *a )
00080                        );
00081 
00082     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>( m.ReturnValue )) {
00083         <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d1/d2/obwait_8c.html#a4">NtWaitForSingleObject</a>(a-&gt;hEvent, FALSE, NULL);
00084 
00085         <span class="keywordflow">if</span> (a-&gt;Ready == <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>)
00086         {
00087             <span class="comment">/*</span>
00088 <span class="comment">             * If not ready conversion status on this console,</span>
00089 <span class="comment">             * then one more try get status.</span>
00090 <span class="comment">             */</span>
00091             <a class="code" href="../../d8/d9/wow64csr_8c.html#a4">CsrClientCallServer</a>( (PCSR_API_MSG)&amp;m,
00092                                  NULL,
00093                                  CSR_MAKE_API_NUMBER( CONSRV_SERVERDLL_INDEX,
00094                                                       ConsolepGetNlsMode
00095                                                     ),
00096                                  <span class="keyword">sizeof</span>( *a )
00097                                );
00098             <span class="keywordflow">if</span> (! <a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>( m.ReturnValue )) {
00099                 <a class="code" href="../../d6/d4/condll_8h.html#a3">SET_LAST_NT_ERROR</a> (m.ReturnValue);
00100                 <a class="code" href="../../d5/d0/obclose_8c.html#a1">NtClose</a>(a-&gt;hEvent);
00101                 <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00102             }
00103             <span class="keywordflow">else</span>
00104             {
00105                 <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d1/d2/obwait_8c.html#a4">NtWaitForSingleObject</a>(a-&gt;hEvent, FALSE, NULL);
00106             }
00107         }
00108 
00109         <a class="code" href="../../d5/d0/obclose_8c.html#a1">NtClose</a>(a-&gt;hEvent);
00110 
00111         <span class="keywordflow">try</span> {
00112             *lpNlsMode = a-&gt;NlsMode;
00113         } except( EXCEPTION_EXECUTE_HANDLER ) {
00114             <a class="code" href="../../d6/d4/condll_8h.html#a2">SET_LAST_ERROR</a> (ERROR_INVALID_ACCESS);
00115             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00116         }
00117         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00118     } <span class="keywordflow">else</span> {
00119         <a class="code" href="../../d6/d4/condll_8h.html#a3">SET_LAST_NT_ERROR</a> (m.ReturnValue);
00120         <a class="code" href="../../d5/d0/obclose_8c.html#a1">NtClose</a>(a-&gt;hEvent);
00121         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00122     }
00123 <span class="preprocessor">#else</span>
00124 <span class="preprocessor"></span>    <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00125 <span class="preprocessor">#endif</span>
00126 <span class="preprocessor"></span>
00127 }
00128 
00129 <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>
00130 <a class="code" href="../../d1/d1/bench_8c.html#a0">APIENTRY</a>
00131 <a class="code" href="../../d8/d2/client_2dbcs_8c.html#a1">SetConsoleNlsMode</a>(
00132     IN HANDLE hConsoleHandle,
00133     IN DWORD dwNlsMode
00134     )
00135 
00136 <span class="comment">/*++</span>
00137 <span class="comment"></span>
00138 <span class="comment">Parameters:</span>
00139 <span class="comment"></span>
00140 <span class="comment">    hConsoleHandle - Supplies a console input or output handle.</span>
00141 <span class="comment"></span>
00142 <span class="comment">    dwNlsMode - Supplies NLS mode.</span>
00143 <span class="comment"></span>
00144 <span class="comment">Return Value:</span>
00145 <span class="comment"></span>
00146 <span class="comment">    TRUE - The operation was successful.</span>
00147 <span class="comment"></span>
00148 <span class="comment">    FALSE/NULL - The operation failed. Extended error status is available</span>
00149 <span class="comment">        using GetLastError.</span>
00150 <span class="comment"></span>
00151 <span class="comment">--*/</span>
00152 
00153 {
00154 
00155 <span class="preprocessor">#if defined(FE_IME)</span>
00156 <span class="preprocessor"></span>    <a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html">CONSOLE_API_MSG</a> m;
00157     PCONSOLE_NLS_MODE_MSG a = &amp;m.<a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html#o77">u</a>.SetConsoleNlsMode;
00158     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
00159 
00160     a-&gt;ConsoleHandle = <a class="code" href="../../d6/d4/condll_8h.html#a1">GET_CONSOLE_HANDLE</a>;
00161     a-&gt;Handle = hConsoleHandle;
00162     a-&gt;NlsMode = dwNlsMode;
00163 
00164     <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d0/d8/ex_2event_8c.html#a5">NtCreateEvent</a>(&amp;(a-&gt;hEvent),
00165                            EVENT_ALL_ACCESS,
00166                            NULL,
00167                            SynchronizationEvent,
00168                            (BOOLEAN)FALSE
00169                            );
00170     <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(Status)) {
00171        <a class="code" href="../../d6/d4/condll_8h.html#a3">SET_LAST_NT_ERROR</a>(Status);
00172        <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00173     }
00174 
00175     <a class="code" href="../../d8/d9/wow64csr_8c.html#a4">CsrClientCallServer</a>( (PCSR_API_MSG)&amp;m,
00176                          NULL,
00177                          CSR_MAKE_API_NUMBER( CONSRV_SERVERDLL_INDEX,
00178                                               ConsolepSetNlsMode
00179                                             ),
00180                          <span class="keyword">sizeof</span>( *a )
00181                        );
00182     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>( m.ReturnValue )) {
00183         <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d1/d2/obwait_8c.html#a4">NtWaitForSingleObject</a>(a-&gt;hEvent, FALSE, NULL);
00184         <a class="code" href="../../d5/d0/obclose_8c.html#a1">NtClose</a>(a-&gt;hEvent);     
00185         <span class="keywordflow">if</span> (<a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> != 0) {
00186             <a class="code" href="../../d6/d4/condll_8h.html#a3">SET_LAST_NT_ERROR</a>(Status);
00187             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00188         }
00189         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00190     } <span class="keywordflow">else</span> {
00191         <a class="code" href="../../d6/d4/condll_8h.html#a3">SET_LAST_NT_ERROR</a> (m.ReturnValue);
00192         <a class="code" href="../../d5/d0/obclose_8c.html#a1">NtClose</a>(a-&gt;hEvent);
00193         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00194     }
00195 <span class="preprocessor">#else</span>
00196 <span class="preprocessor"></span>    <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00197 <span class="preprocessor">#endif</span>
00198 <span class="preprocessor"></span>
00199 }
00200 
00201 <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>
00202 <a class="code" href="../../d1/d1/bench_8c.html#a0">APIENTRY</a>
00203 <a class="code" href="../../d8/d2/client_2dbcs_8c.html#a2">GetConsoleCharType</a>(
00204     IN HANDLE hConsoleHandle,
00205     IN COORD coordCheck,
00206     OUT PDWORD pdwType
00207     )
00208 
00209 <span class="comment">/*++</span>
00210 <span class="comment"></span>
00211 <span class="comment">Parameters:</span>
00212 <span class="comment"></span>
00213 <span class="comment">    hConsoleHandle - Supplies a console input or output handle.</span>
00214 <span class="comment"></span>
00215 <span class="comment">    coordCheck - set check position to these coordinates</span>
00216 <span class="comment"></span>
00217 <span class="comment">    pdwType - receive character type</span>
00218 <span class="comment"></span>
00219 <span class="comment">Return Value:</span>
00220 <span class="comment"></span>
00221 <span class="comment">    TRUE - The operation was successful.</span>
00222 <span class="comment"></span>
00223 <span class="comment">    FALSE/NULL - The operation failed. Extended error status is available</span>
00224 <span class="comment">        using GetLastError.</span>
00225 <span class="comment"></span>
00226 <span class="comment"></span>
00227 <span class="comment">--*/</span>
00228 
00229 {
00230 
00231     <a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html">CONSOLE_API_MSG</a> m;
00232     PCONSOLE_CHAR_TYPE_MSG a = &amp;m.<a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html#o77">u</a>.GetConsoleCharType;
00233 
00234     a-&gt;ConsoleHandle = <a class="code" href="../../d6/d4/condll_8h.html#a1">GET_CONSOLE_HANDLE</a>;
00235     a-&gt;Handle = hConsoleHandle;
00236     a-&gt;coordCheck = coordCheck;
00237     <a class="code" href="../../d8/d9/wow64csr_8c.html#a4">CsrClientCallServer</a>( (PCSR_API_MSG)&amp;m,
00238                          NULL,
00239                          CSR_MAKE_API_NUMBER( CONSRV_SERVERDLL_INDEX,
00240                                               ConsolepCharType
00241                                             ),
00242                          <span class="keyword">sizeof</span>( *a )
00243                        );
00244     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>( m.ReturnValue )) {
00245         <span class="keywordflow">try</span> {
00246             *pdwType = a-&gt;dwType;
00247         } except( EXCEPTION_EXECUTE_HANDLER ) {
00248             <a class="code" href="../../d6/d4/condll_8h.html#a2">SET_LAST_ERROR</a> (ERROR_INVALID_ACCESS);
00249             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00250         }
00251         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00252     } <span class="keywordflow">else</span> {
00253         <a class="code" href="../../d6/d4/condll_8h.html#a3">SET_LAST_NT_ERROR</a> (m.ReturnValue);
00254         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00255     }
00256 
00257 }
00258 
00259 <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>
00260 <a class="code" href="../../d1/d1/bench_8c.html#a0">APIENTRY</a>
00261 <a class="code" href="../../d8/d2/client_2dbcs_8c.html#a3">SetConsoleLocalEUDC</a>(
00262     IN HANDLE hConsoleHandle,
00263     IN WORD   wCodePoint,
00264     IN COORD  cFontSize,
00265     IN PCHAR  lpSB
00266     )
00267 
00268 <span class="comment">/*++</span>
00269 <span class="comment"></span>
00270 <span class="comment">Parameters:</span>
00271 <span class="comment"></span>
00272 <span class="comment">    hConsoleHandle - Supplies a console input or output handle.</span>
00273 <span class="comment"></span>
00274 <span class="comment">    wCodePoint - Code point of font by Shift JIS code.</span>
00275 <span class="comment"></span>
00276 <span class="comment">    cFontSize - FontSize of Font</span>
00277 <span class="comment"></span>
00278 <span class="comment">    lpSB - Pointer of font bitmap Buffer</span>
00279 <span class="comment"></span>
00280 <span class="comment">Return Value:</span>
00281 <span class="comment"></span>
00282 <span class="comment">    TRUE - The operation was successful.</span>
00283 <span class="comment"></span>
00284 <span class="comment">    FALSE/NULL - The operation failed. Extended error status is available</span>
00285 <span class="comment">        using GetLastError.</span>
00286 <span class="comment"></span>
00287 <span class="comment">--*/</span>
00288 
00289 {
00290 
00291     <a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html">CONSOLE_API_MSG</a> m;
00292     PCONSOLE_LOCAL_EUDC_MSG a = &amp;m.<a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html#o77">u</a>.SetConsoleLocalEUDC;
00293     PCSR_CAPTURE_HEADER CaptureBuffer;
00294     ULONG DataLength;
00295 
00296     a-&gt;ConsoleHandle = <a class="code" href="../../d6/d4/condll_8h.html#a1">GET_CONSOLE_HANDLE</a>;
00297     a-&gt;Handle = hConsoleHandle;
00298     a-&gt;CodePoint = wCodePoint;
00299     a-&gt;FontSize = cFontSize;
00300 
00301     DataLength = ((cFontSize.X + 7) / 8) * cFontSize.Y;
00302 
00303     CaptureBuffer = <a class="code" href="../../d8/d9/wow64csr_8c.html#a5">CsrAllocateCaptureBuffer</a>( 1,
00304                                               DataLength
00305                                             );
00306     <span class="keywordflow">if</span> (CaptureBuffer == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00307         <a class="code" href="../../d6/d4/condll_8h.html#a2">SET_LAST_ERROR</a>(ERROR_NOT_ENOUGH_MEMORY);
00308         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00309     }
00310     <a class="code" href="../../d8/d9/wow64csr_8c.html#a8">CsrCaptureMessageBuffer</a>( CaptureBuffer,
00311                              lpSB,
00312                              DataLength,
00313                              (PVOID *) &amp;a-&gt;FontFace
00314                            );
00315 
00316     <a class="code" href="../../d8/d9/wow64csr_8c.html#a4">CsrClientCallServer</a>( (PCSR_API_MSG)&amp;m,
00317                          CaptureBuffer,
00318                          CSR_MAKE_API_NUMBER( CONSRV_SERVERDLL_INDEX,
00319                                               ConsolepSetLocalEUDC
00320                                             ),
00321                          <span class="keyword">sizeof</span>( *a )
00322                        );
00323         <a class="code" href="../../d8/d9/wow64csr_8c.html#a6">CsrFreeCaptureBuffer</a>( CaptureBuffer );
00324 
00325     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>( m.ReturnValue )) {
00326         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00327     } <span class="keywordflow">else</span> {
00328         <a class="code" href="../../d6/d4/condll_8h.html#a3">SET_LAST_NT_ERROR</a> (m.ReturnValue);
00329         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00330     }
00331 
00332 }
00333 
00334 <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>
00335 <a class="code" href="../../d1/d1/bench_8c.html#a0">APIENTRY</a>
00336 <a class="code" href="../../d8/d2/client_2dbcs_8c.html#a4">SetConsoleCursorMode</a>(
00337     IN HANDLE hConsoleHandle,
00338     IN BOOL   Blink,
00339     IN BOOL   DBEnable
00340     )
00341 
00342 <span class="comment">/*++</span>
00343 <span class="comment"></span>
00344 <span class="comment">Parameters:</span>
00345 <span class="comment"></span>
00346 <span class="comment">    hConsoleHandle - Supplies a console input or output handle.</span>
00347 <span class="comment"></span>
00348 <span class="comment">    Blink - Blinking enable/disable switch.</span>
00349 <span class="comment"></span>
00350 <span class="comment">    DBEnable - Double Byte width enable/disable switch.</span>
00351 <span class="comment"></span>
00352 <span class="comment">Return Value:</span>
00353 <span class="comment"></span>
00354 <span class="comment">    TRUE - The operation was successful.</span>
00355 <span class="comment"></span>
00356 <span class="comment">    FALSE/NULL - The operation failed. Extended error status is available</span>
00357 <span class="comment">        using GetLastError.</span>
00358 <span class="comment"></span>
00359 <span class="comment">--*/</span>
00360 
00361 {
00362 
00363     <a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html">CONSOLE_API_MSG</a> m;
00364     PCONSOLE_CURSOR_MODE_MSG a = &amp;m.<a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html#o77">u</a>.SetConsoleCursorMode;
00365 
00366     a-&gt;ConsoleHandle = <a class="code" href="../../d6/d4/condll_8h.html#a1">GET_CONSOLE_HANDLE</a>;
00367     a-&gt;Handle = hConsoleHandle;
00368     a-&gt;Blink = Blink;
00369     a-&gt;DBEnable = DBEnable;
00370     <a class="code" href="../../d8/d9/wow64csr_8c.html#a4">CsrClientCallServer</a>( (PCSR_API_MSG)&amp;m,
00371                          NULL,
00372                          CSR_MAKE_API_NUMBER( CONSRV_SERVERDLL_INDEX,
00373                                               ConsolepSetCursorMode
00374                                             ),
00375                          <span class="keyword">sizeof</span>( *a )
00376                        );
00377     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>( m.ReturnValue )) {
00378         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00379     } <span class="keywordflow">else</span> {
00380         <a class="code" href="../../d6/d4/condll_8h.html#a3">SET_LAST_NT_ERROR</a> (m.ReturnValue);
00381         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00382     }
00383 
00384 }
00385 
00386 <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>
00387 <a class="code" href="../../d1/d1/bench_8c.html#a0">APIENTRY</a>
00388 <a class="code" href="../../d8/d2/client_2dbcs_8c.html#a5">GetConsoleCursorMode</a>(
00389     IN HANDLE hConsoleHandle,
00390     OUT PBOOL  pbBlink,
00391     OUT PBOOL  pbDBEnable
00392     )
00393 
00394 <span class="comment">/*++</span>
00395 <span class="comment"></span>
00396 <span class="comment">Parameters:</span>
00397 <span class="comment"></span>
00398 <span class="comment">    hConsoleHandle - Supplies a console input or output handle.</span>
00399 <span class="comment"></span>
00400 <span class="comment">    Blink - Blinking enable/disable switch.</span>
00401 <span class="comment"></span>
00402 <span class="comment">    DBEnable - Double Byte width enable/disable switch.</span>
00403 <span class="comment"></span>
00404 <span class="comment">Return Value:</span>
00405 <span class="comment"></span>
00406 <span class="comment">    TRUE - The operation was successful.</span>
00407 <span class="comment"></span>
00408 <span class="comment">    FALSE/NULL - The operation failed. Extended error status is available</span>
00409 <span class="comment">        using GetLastError.</span>
00410 <span class="comment"></span>
00411 <span class="comment">--*/</span>
00412 
00413 {
00414 
00415     <a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html">CONSOLE_API_MSG</a> m;
00416     PCONSOLE_CURSOR_MODE_MSG a = &amp;m.<a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html#o77">u</a>.GetConsoleCursorMode;
00417 
00418     a-&gt;ConsoleHandle = <a class="code" href="../../d6/d4/condll_8h.html#a1">GET_CONSOLE_HANDLE</a>;
00419     a-&gt;Handle = hConsoleHandle;
00420     <a class="code" href="../../d8/d9/wow64csr_8c.html#a4">CsrClientCallServer</a>( (PCSR_API_MSG)&amp;m,
00421                          NULL,
00422                          CSR_MAKE_API_NUMBER( CONSRV_SERVERDLL_INDEX,
00423                                               ConsolepGetCursorMode
00424                                             ),
00425                          <span class="keyword">sizeof</span>( *a )
00426                        );
00427     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>( m.ReturnValue )) {
00428         <span class="keywordflow">try</span> {
00429             *pbBlink = a-&gt;Blink;
00430             *pbDBEnable = a-&gt;DBEnable;
00431         } except( EXCEPTION_EXECUTE_HANDLER ) {
00432             <a class="code" href="../../d6/d4/condll_8h.html#a2">SET_LAST_ERROR</a> (ERROR_INVALID_ACCESS);
00433             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00434         }
00435         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00436     } <span class="keywordflow">else</span> {
00437         <a class="code" href="../../d6/d4/condll_8h.html#a3">SET_LAST_NT_ERROR</a> (m.ReturnValue);
00438         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00439     }
00440 
00441 }
00442 
00443 
00444 <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>
00445 <a class="code" href="../../d1/d1/bench_8c.html#a0">APIENTRY</a>
00446 <a class="code" href="../../d8/d2/client_2dbcs_8c.html#a6">RegisterConsoleOS2</a>(
00447     IN BOOL fOs2Register
00448     )
00449 
00450 <span class="comment">/*++</span>
00451 <span class="comment"></span>
00452 <span class="comment">Description:</span>
00453 <span class="comment"></span>
00454 <span class="comment">    This routine registers the OS/2 with the console.</span>
00455 <span class="comment"></span>
00456 <span class="comment">Parameters:</span>
00457 <span class="comment"></span>
00458 <span class="comment">Return Value:</span>
00459 <span class="comment"></span>
00460 <span class="comment">    TRUE - The operation was successful.</span>
00461 <span class="comment"></span>
00462 <span class="comment">    FALSE/NULL - The operation failed. Extended error status is available</span>
00463 <span class="comment">        using GetLastError.</span>
00464 <span class="comment"></span>
00465 <span class="comment">--*/</span>
00466 
00467 {
00468     <a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html">CONSOLE_API_MSG</a> m;
00469     PCONSOLE_REGISTEROS2_MSG a = &amp;m.<a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html#o77">u</a>.RegisterConsoleOS2;
00470     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
00471 
00472 
00473     a-&gt;ConsoleHandle = <a class="code" href="../../d6/d4/condll_8h.html#a1">GET_CONSOLE_HANDLE</a>;
00474     a-&gt;fOs2Register  = fOs2Register;
00475 
00476     <a class="code" href="../../d8/d9/wow64csr_8c.html#a4">CsrClientCallServer</a>( (PCSR_API_MSG)&amp;m,
00477                          NULL,
00478                          CSR_MAKE_API_NUMBER( CONSRV_SERVERDLL_INDEX,
00479                                               ConsolepRegisterOS2
00480                                             ),
00481                          <span class="keyword">sizeof</span>( *a )
00482                        );
00483     <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>( m.ReturnValue)) {
00484         <a class="code" href="../../d6/d4/condll_8h.html#a3">SET_LAST_NT_ERROR</a>(m.ReturnValue);
00485         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00486     }
00487     <span class="keywordflow">else</span> {
00488         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00489     }
00490 }
00491 
00492 <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>
00493 <a class="code" href="../../d1/d1/bench_8c.html#a0">APIENTRY</a>
00494 <a class="code" href="../../d8/d2/client_2dbcs_8c.html#a7">SetConsoleOS2OemFormat</a>(
00495     IN BOOL fOs2OemFormat
00496     )
00497 
00498 <span class="comment">/*++</span>
00499 <span class="comment"></span>
00500 <span class="comment">Description:</span>
00501 <span class="comment"></span>
00502 <span class="comment">    This routine sets the OS/2 OEM Format with the console.</span>
00503 <span class="comment"></span>
00504 <span class="comment">Parameters:</span>
00505 <span class="comment"></span>
00506 <span class="comment">Return Value:</span>
00507 <span class="comment"></span>
00508 <span class="comment">    TRUE - The operation was successful.</span>
00509 <span class="comment"></span>
00510 <span class="comment">    FALSE/NULL - The operation failed. Extended error status is available</span>
00511 <span class="comment">        using GetLastError.</span>
00512 <span class="comment"></span>
00513 <span class="comment">--*/</span>
00514 
00515 {
00516     <a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html">CONSOLE_API_MSG</a> m;
00517     PCONSOLE_SETOS2OEMFORMAT_MSG a = &amp;m.<a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html#o77">u</a>.SetConsoleOS2OemFormat;
00518 
00519     a-&gt;ConsoleHandle = <a class="code" href="../../d6/d4/condll_8h.html#a1">GET_CONSOLE_HANDLE</a>;
00520     a-&gt;fOs2OemFormat = fOs2OemFormat;
00521     <a class="code" href="../../d8/d9/wow64csr_8c.html#a4">CsrClientCallServer</a>( (PCSR_API_MSG)&amp;m,
00522                          NULL,
00523                          CSR_MAKE_API_NUMBER( CONSRV_SERVERDLL_INDEX,
00524                                               ConsolepSetOS2OemFormat
00525                                             ),
00526                          <span class="keyword">sizeof</span>( *a )
00527                        );
00528     <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>( m.ReturnValue)) {
00529         <a class="code" href="../../d6/d4/condll_8h.html#a3">SET_LAST_NT_ERROR</a>(m.ReturnValue);
00530         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00531     }
00532     <span class="keywordflow">else</span> {
00533         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00534     }
00535 }
00536 
00537 <span class="preprocessor">#endif </span>
00538 <span class="preprocessor"></span>
00539 <span class="preprocessor"></span><span class="preprocessor">#if defined(FE_IME)</span>
00540 <span class="preprocessor"></span>
00541 <span class="preprocessor">#if !defined(BUILD_WOW6432)</span>
00542 <span class="preprocessor"></span>
00543 <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>
00544 <a class="code" href="../../d1/d1/bench_8c.html#a0">APIENTRY</a>
00545 <a class="code" href="../../d6/d4/condll_8h.html#a17">RegisterConsoleIMEInternal</a>(
00546     IN HWND hWndConsoleIME,
00547     IN DWORD dwConsoleIMEThreadId,
00548     IN DWORD DesktopLength,
00549     IN LPWSTR Desktop,
00550     OUT DWORD *dwConsoleThreadId
00551     )
00552 {
00553 
00554    <a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html">CONSOLE_API_MSG</a> m;
00555    PCONSOLE_REGISTER_CONSOLEIME_MSG a = &amp;m.<a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html#o77">u</a>.RegisterConsoleIME;
00556    PCSR_CAPTURE_HEADER CaptureBuffer = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00557 
00558    a-&gt;ConsoleHandle        = <a class="code" href="../../d6/d4/condll_8h.html#a1">GET_CONSOLE_HANDLE</a>;
00559    a-&gt;hWndConsoleIME       = hWndConsoleIME;
00560    a-&gt;dwConsoleIMEThreadId = dwConsoleIMEThreadId;
00561    a-&gt;DesktopLength        = DesktopLength;
00562 
00563    CaptureBuffer = <a class="code" href="../../d8/d9/wow64csr_8c.html#a5">CsrAllocateCaptureBuffer</a>( 1,
00564                                              DesktopLength
00565                                             );
00566    <span class="keywordflow">if</span> (CaptureBuffer == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00567        <a class="code" href="../../d6/d4/condll_8h.html#a2">SET_LAST_ERROR</a>(ERROR_NOT_ENOUGH_MEMORY);
00568        <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00569    }
00570 
00571    <a class="code" href="../../d8/d9/wow64csr_8c.html#a8">CsrCaptureMessageBuffer</a>( CaptureBuffer,
00572                             Desktop,
00573                             a-&gt;DesktopLength,
00574                             (PVOID *) &amp;a-&gt;Desktop
00575                           );
00576 
00577    <span class="comment">//</span>
00578    <span class="comment">// Connect to the server process</span>
00579    <span class="comment">//</span>
00580 
00581    <a class="code" href="../../d8/d9/wow64csr_8c.html#a4">CsrClientCallServer</a>( (PCSR_API_MSG)&amp;m,
00582                         CaptureBuffer,
00583                         CSR_MAKE_API_NUMBER( CONSRV_SERVERDLL_INDEX,
00584                                              ConsolepRegisterConsoleIME
00585                                            ),
00586                         <span class="keyword">sizeof</span>( *a )
00587                       );
00588 
00589 <span class="comment">//HS Jan.20    if (CaptureBuffer) {</span>
00590        <a class="code" href="../../d8/d9/wow64csr_8c.html#a6">CsrFreeCaptureBuffer</a>( CaptureBuffer );
00591 <span class="comment">//HS Jan.20    }</span>
00592 
00593    <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>( m.ReturnValue)) {
00594        <a class="code" href="../../d6/d4/condll_8h.html#a3">SET_LAST_NT_ERROR</a>(m.ReturnValue);
00595        <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00596    }
00597    <span class="keywordflow">else</span> {
00598        <span class="keywordflow">try</span> {
00599            <span class="keywordflow">if</span> (<a class="code" href="../../d0/d5/ntcon_2conime_2conime_8c.html#a9">dwConsoleThreadId</a> != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00600                *<a class="code" href="../../d0/d5/ntcon_2conime_2conime_8c.html#a9">dwConsoleThreadId</a> = a-&gt;dwConsoleThreadId;
00601        } except( EXCEPTION_EXECUTE_HANDLER ) {
00602            <a class="code" href="../../d6/d4/condll_8h.html#a2">SET_LAST_ERROR</a> (ERROR_INVALID_ACCESS);
00603            <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00604        }
00605        <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00606     }
00607 
00608 }
00609 
00610 <span class="preprocessor">#endif </span>
00611 <span class="preprocessor"></span>
00612 <span class="preprocessor"></span><span class="preprocessor">#if !defined(BUILD_WOW64)</span>
00613 <span class="preprocessor"></span>
00614 <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>
00615 <a class="code" href="../../d1/d1/bench_8c.html#a0">APIENTRY</a>
00616 RegisterConsoleIME(
00617     IN HWND  hWndConsoleIME,
00618     OUT DWORD *dwConsoleThreadId
00619     )
00620 
00621 <span class="comment">/*++</span>
00622 <span class="comment"></span>
00623 <span class="comment">Description:</span>
00624 <span class="comment"></span>
00625 <span class="comment">    This routine register the Console IME on the current desktop.</span>
00626 <span class="comment"></span>
00627 <span class="comment">Parameters:</span>
00628 <span class="comment"></span>
00629 <span class="comment">Return Value:</span>
00630 <span class="comment"></span>
00631 <span class="comment">    TRUE - The operation was successful.</span>
00632 <span class="comment"></span>
00633 <span class="comment">    FALSE - The operation failed.</span>
00634 <span class="comment"></span>
00635 <span class="comment">--*/</span>
00636 
00637 {
00638     STARTUPINFOW StartupInfo;
00639     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwDesktopLength;
00640     GetStartupInfoW(&amp;StartupInfo);
00641 
00642     <span class="keywordflow">if</span> (StartupInfo.lpDesktop != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> &amp;&amp; *StartupInfo.lpDesktop != 0) {
00643         dwDesktopLength = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a>)((wcslen(StartupInfo.lpDesktop)+1)*<span class="keyword">sizeof</span>(WCHAR));
00644         dwDesktopLength = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a>)(<a class="code" href="../../d5/d4/acpitabl_8h.html#a69">min</a>(dwDesktopLength,MAX_TITLE_LENGTH));
00645     } <span class="keywordflow">else</span> {
00646         dwDesktopLength = 0;
00647     }
00648 
00649     <span class="keywordflow">return</span> <a class="code" href="../../d6/d4/condll_8h.html#a17">RegisterConsoleIMEInternal</a>(hWndConsoleIME,
00650                                       GetCurrentThreadId(),
00651                                       dwDesktopLength,
00652                                       StartupInfo.lpDesktop,
00653                                       dwConsoleThreadId);
00654 }
00655 
00656 <span class="preprocessor">#endif </span>
00657 <span class="preprocessor"></span>
00658 <span class="preprocessor"></span><span class="preprocessor">#if !defined(BUILD_WOW6432)</span>
00659 <span class="preprocessor"></span>
00660 <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>
00661 <a class="code" href="../../d1/d1/bench_8c.html#a0">APIENTRY</a>
00662 <a class="code" href="../../d6/d4/condll_8h.html#a18">UnregisterConsoleIMEInternal</a>(
00663     IN DWORD dwConsoleIMEThtreadId
00664     )
00665 {
00666     <a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html">CONSOLE_API_MSG</a> m;
00667     PCONSOLE_UNREGISTER_CONSOLEIME_MSG a = &amp;m.<a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html#o77">u</a>.UnregisterConsoleIME;
00668 
00669     a-&gt;ConsoleHandle        = <a class="code" href="../../d6/d4/condll_8h.html#a1">GET_CONSOLE_HANDLE</a>;
00670     a-&gt;dwConsoleIMEThreadId = dwConsoleIMEThtreadId;
00671 
00672     <span class="comment">//</span>
00673     <span class="comment">// Connect to the server process</span>
00674     <span class="comment">//</span>
00675 
00676     <a class="code" href="../../d8/d9/wow64csr_8c.html#a4">CsrClientCallServer</a>( (PCSR_API_MSG)&amp;m,
00677                          NULL,
00678                          CSR_MAKE_API_NUMBER( CONSRV_SERVERDLL_INDEX,
00679                                               ConsolepUnregisterConsoleIME
00680                                             ),
00681                          <span class="keyword">sizeof</span>( *a )
00682                        );
00683 
00684     <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>( m.ReturnValue)) {
00685         <a class="code" href="../../d6/d4/condll_8h.html#a3">SET_LAST_NT_ERROR</a>(m.ReturnValue);
00686         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00687     }
00688     <span class="keywordflow">else</span> {
00689         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00690     }
00691 }
00692 
00693 <span class="preprocessor">#endif </span>
00694 <span class="preprocessor"></span>
00695 <span class="preprocessor"></span><span class="preprocessor">#if !defined(BUILD_WOW64)</span>
00696 <span class="preprocessor"></span>
00697 <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>
00698 <a class="code" href="../../d1/d1/bench_8c.html#a0">APIENTRY</a>
00699 UnregisterConsoleIME(
00700     )
00701 
00702 <span class="comment">/*++</span>
00703 <span class="comment"></span>
00704 <span class="comment">Description:</span>
00705 <span class="comment"></span>
00706 <span class="comment">    This routine unregister the Console IME on the current desktop.</span>
00707 <span class="comment"></span>
00708 <span class="comment">Parameters:</span>
00709 <span class="comment"></span>
00710 <span class="comment">Return Value:</span>
00711 <span class="comment"></span>
00712 <span class="comment">    TRUE - The operation was successful.</span>
00713 <span class="comment"></span>
00714 <span class="comment">    FALSE - The operation failed.</span>
00715 <span class="comment"></span>
00716 <span class="comment">--*/</span>
00717 
00718 {
00719 
00720     <span class="keywordflow">return</span> <a class="code" href="../../d6/d4/condll_8h.html#a18">UnregisterConsoleIMEInternal</a>(GetCurrentThreadId());
00721 
00722 }
00723 
00724 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
00725 <a class="code" href="../../d0/d7/server_2server_8c.html#a44">MyRegOpenKey</a>(
00726     IN HANDLE hKey,
00727     IN LPWSTR lpSubKey,
00728     OUT PHANDLE phResult
00729     )
00730 {
00731     OBJECT_ATTRIBUTES   Obja;
00732     UNICODE_STRING      SubKey;
00733 
00734     <span class="comment">//</span>
00735     <span class="comment">// Convert the subkey to a counted Unicode string.</span>
00736     <span class="comment">//</span>
00737 
00738     <a class="code" href="../../d2/d7/string_8c.html#a7">RtlInitUnicodeString</a>( &amp;SubKey, lpSubKey );
00739 
00740     <span class="comment">//</span>
00741     <span class="comment">// Initialize the OBJECT_ATTRIBUTES structure and open the key.</span>
00742     <span class="comment">//</span>
00743 
00744     InitializeObjectAttributes(
00745         &amp;Obja,
00746         &amp;SubKey,
00747         OBJ_CASE_INSENSITIVE,
00748         hKey,
00749         NULL
00750         );
00751 
00752     <span class="keywordflow">return</span> <a class="code" href="../../d7/d7/ntapi_8c.html#a23">NtOpenKey</a>(
00753               phResult,
00754               KEY_READ,
00755               &amp;Obja
00756               );
00757 }
00758 
00759 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
00760 <a class="code" href="../../d0/d5/srvinit_8c.html#a41">MyRegQueryValue</a>(
00761     IN HANDLE hKey,
00762     IN LPWSTR lpValueName,
00763     IN DWORD dwValueLength,
00764     OUT LPBYTE lpData
00765     )
00766 {
00767     UNICODE_STRING <a class="code" href="../../d1/d1/rtdelval_8c.html#a3">ValueName</a>;
00768     ULONG BufferLength;
00769     ULONG ResultLength;
00770     PKEY_VALUE_FULL_INFORMATION KeyValueInformation;
00771     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
00772 
00773     <span class="comment">//</span>
00774     <span class="comment">// Convert the subkey to a counted Unicode string.</span>
00775     <span class="comment">//</span>
00776 
00777     <a class="code" href="../../d2/d7/string_8c.html#a7">RtlInitUnicodeString</a>( &amp;ValueName, lpValueName );
00778 
00779     BufferLength = <span class="keyword">sizeof</span>(KEY_VALUE_FULL_INFORMATION) + dwValueLength + <a class="code" href="../../d1/d1/rtdelval_8c.html#a3">ValueName</a>.Length;;
00780     KeyValueInformation = LocalAlloc(LPTR,BufferLength);
00781     <span class="keywordflow">if</span> (KeyValueInformation == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00782         <span class="keywordflow">return</span> STATUS_NO_MEMORY;
00783 
00784     <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d7/d7/ntapi_8c.html#a25">NtQueryValueKey</a>(
00785                 hKey,
00786                 &amp;ValueName,
00787                 KeyValueFullInformation,
00788                 KeyValueInformation,
00789                 BufferLength,
00790                 &amp;ResultLength
00791                 );
00792     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(Status)) {
00793         <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>(KeyValueInformation-&gt;DataLength &lt;= dwValueLength);
00794         RtlMoveMemory(lpData,
00795             (PBYTE)KeyValueInformation + KeyValueInformation-&gt;DataOffset,
00796             KeyValueInformation-&gt;DataLength);
00797         <span class="keywordflow">if</span> (KeyValueInformation-&gt;Type == REG_SZ) {
00798             <span class="keywordflow">if</span> (KeyValueInformation-&gt;DataLength + <span class="keyword">sizeof</span>(WCHAR) &gt; dwValueLength) {
00799                 KeyValueInformation-&gt;DataLength -= <span class="keyword">sizeof</span>(WCHAR);
00800             }
00801             lpData[KeyValueInformation-&gt;DataLength++] = 0;
00802             lpData[KeyValueInformation-&gt;DataLength] = 0;
00803         }
00804     }
00805     LocalFree(KeyValueInformation);
00806     <span class="keywordflow">return</span> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
00807 }
00808 
00809 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00810 GetCommandLineString(
00811     IN LPWSTR CommandLine,
00812     IN DWORD  dwSize
00813     )
00814 {
00815     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
00816     HANDLE hkRegistry;
00817     WCHAR awchBuffer[ 512 ];
00818     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwRet;
00819 
00820     dwRet = GetSystemDirectoryW(CommandLine, dwSize);
00821     <span class="keywordflow">if</span> (dwRet)
00822     {
00823         <a class="code" href="../../d2/d5/editreg_8c.html#a48">CommandLine</a>[dwRet++] = <a class="code" href="../../d2/d0/aw_8h.html#a3">L</a><span class="charliteral">'\\'</span>;
00824         <a class="code" href="../../d2/d5/editreg_8c.html#a48">CommandLine</a>[dwRet]   = <a class="code" href="../../d2/d0/aw_8h.html#a3">L</a><span class="charliteral">'\0'</span>;
00825         dwSize -= dwRet;
00826 
00827     }
00828     <span class="keywordflow">else</span>
00829     {
00830         <a class="code" href="../../d2/d5/editreg_8c.html#a48">CommandLine</a>[0] = <a class="code" href="../../d2/d0/aw_8h.html#a3">L</a><span class="charliteral">'\0'</span>;
00831     }
00832 
00833     <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d0/d7/server_2server_8c.html#a44">MyRegOpenKey</a>(NULL,
00834                           MACHINE_REGISTRY_CONSOLE,
00835                           &amp;hkRegistry);
00836     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>( Status ))
00837     {
00838         <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d0/d5/srvinit_8c.html#a41">MyRegQueryValue</a>(hkRegistry,
00839                                  MACHINE_REGISTRY_CONSOLEIME,
00840                                  <span class="keyword">sizeof</span>(awchBuffer), (PBYTE)&amp;awchBuffer);
00841         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>( Status ))
00842         {
00843             dwRet = wcslen(awchBuffer);
00844             <span class="keywordflow">if</span> (dwRet &lt; dwSize)
00845             {
00846                 wcscat(CommandLine, awchBuffer);
00847             }
00848             <span class="keywordflow">else</span>
00849             {
00850                 <a class="code" href="../../d2/d5/editreg_8c.html#a48">CommandLine</a>[0] = <a class="code" href="../../d2/d0/aw_8h.html#a3">L</a><span class="charliteral">'\0'</span>;
00851                 <span class="keywordflow">goto</span> <a class="code" href="../../d1/d0/tdisp_8c.html#a1">ErrorExit</a>;
00852             }
00853         }
00854         <span class="keywordflow">else</span>
00855         {
00856             <span class="keywordflow">goto</span> <a class="code" href="../../d1/d0/tdisp_8c.html#a1">ErrorExit</a>;
00857         }
00858 
00859         <a class="code" href="../../d5/d0/obclose_8c.html#a1">NtClose</a>(hkRegistry);
00860     }
00861     <span class="keywordflow">else</span>
00862     {
00863         <span class="keywordflow">goto</span> <a class="code" href="../../d1/d0/tdisp_8c.html#a1">ErrorExit</a>;
00864     }
00865 
00866     <span class="keywordflow">return</span>;
00867 
00868 <a class="code" href="../../d1/d0/tdisp_8c.html#a1">ErrorExit</a>:
00869     wcscat(CommandLine, L<span class="stringliteral">"conime.exe"</span>);
00870     <span class="keywordflow">return</span>;
00871 }
00872 
00873 
00874 <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>
00875 <a class="code" href="../../d6/d6/ntcon_2server_2globals_8h.html#a11">ConsoleIMERoutine</a>(
00876     IN LPVOID lpThreadParameter
00877     )
00878 
00879 <span class="comment">/*++</span>
00880 <span class="comment"></span>
00881 <span class="comment">Routine Description:</span>
00882 <span class="comment"></span>
00883 <span class="comment">    This thread is created when the create input thread.</span>
00884 <span class="comment">    It invokes the console IME process.</span>
00885 <span class="comment"></span>
00886 <span class="comment">Arguments:</span>
00887 <span class="comment"></span>
00888 <span class="comment">    lpThreadParameter - not use.</span>
00889 <span class="comment"></span>
00890 <span class="comment">Return Value:</span>
00891 <span class="comment"></span>
00892 <span class="comment">    STATUS_SUCCESS - function was successful</span>
00893 <span class="comment"></span>
00894 <span class="comment">--*/</span>
00895 
00896 {
00897     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
00898     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fRet;
00899     <span class="keyword">static</span> <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fInConIMERoutine = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00900 
00901     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> fdwCreate;
00902     STARTUPINFOW StartupInfo;
00903     STARTUPINFOW StartupInfoConsole;
00904     WCHAR <a class="code" href="../../d2/d5/editreg_8c.html#a48">CommandLine</a>[<a class="code" href="../../d3/d9/arcinst_8c.html#a6">MAX_PATH</a>*2];
00905     PROCESS_INFORMATION ProcessInformation;
00906     HANDLE hEvent;
00907     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwWait;
00908 
00909     <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = STATUS_SUCCESS;
00910 
00911     <span class="comment">//</span>
00912     <span class="comment">// Prevent the user from launching multiple applets attached</span>
00913     <span class="comment">// to a single console</span>
00914     <span class="comment">//</span>
00915 
00916     <span class="keywordflow">if</span> (fInConIMERoutine) {
00917         <span class="keywordflow">return</span> (ULONG)STATUS_UNSUCCESSFUL;
00918     }
00919 
00920     fInConIMERoutine = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00921 
00922     <span class="comment">//</span>
00923     <span class="comment">// Create event</span>
00924     <span class="comment">//</span>
00925     hEvent = CreateEventW(NULL,                 <span class="comment">// Security attributes</span>
00926                           FALSE,                <span class="comment">// Manual reset</span>
00927                           FALSE,                <span class="comment">// Initial state</span>
00928                           CONSOLEIME_EVENT);    <span class="comment">// Event object name</span>
00929     <span class="keywordflow">if</span> (hEvent == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00930     {
00931         <span class="keywordflow">goto</span> <a class="code" href="../../d1/d0/tdisp_8c.html#a1">ErrorExit</a>;
00932     }
00933     <span class="keywordflow">if</span> (GetLastError() == ERROR_ALREADY_EXISTS)
00934     {
00935         <span class="keywordflow">goto</span> <a class="code" href="../../d1/d0/tdisp_8c.html#a1">ErrorExit</a>;
00936     }
00937 
00938     <span class="comment">//</span>
00939     <span class="comment">// Get Console IME process name and event name</span>
00940     <span class="comment">//</span>
00941 
00942     GetCommandLineString(CommandLine, <span class="keyword">sizeof</span>(CommandLine)/<span class="keyword">sizeof</span>(WCHAR));
00943 
00944     GetStartupInfoW(&amp;StartupInfoConsole);
00945     RtlZeroMemory(&amp;StartupInfo, <span class="keyword">sizeof</span>(StartupInfo));
00946     StartupInfo.cb = <span class="keyword">sizeof</span>(StartupInfo);
00947     StartupInfo.wShowWindow = SW_HIDE;
00948     StartupInfo.dwFlags = STARTF_FORCEONFEEDBACK;
00949     StartupInfo.lpDesktop = StartupInfoConsole.lpDesktop;
00950 
00951     <span class="comment">//</span>
00952     <span class="comment">// create Console IME process</span>
00953     <span class="comment">//</span>
00954 
00955     fdwCreate = NORMAL_PRIORITY_CLASS | CREATE_DEFAULT_ERROR_MODE | CREATE_NEW_PROCESS_GROUP;
00956     fRet = CreateProcessW(NULL,                <span class="comment">// Application name</span>
00957                           CommandLine,         <span class="comment">// Command line</span>
00958                           NULL,                <span class="comment">// process security attributes</span>
00959                           NULL,                <span class="comment">// thread security attributes</span>
00960                           FALSE,               <span class="comment">// inherit handles</span>
00961                           fdwCreate,           <span class="comment">// create flags</span>
00962                           NULL,                <span class="comment">// environment</span>
00963                           NULL,                <span class="comment">// current directory</span>
00964                           &amp;StartupInfo,        <span class="comment">// Start up information</span>
00965                           &amp;ProcessInformation  <span class="comment">// process information</span>
00966                          );
00967     <span class="keywordflow">if</span> (! fRet)
00968     {
00969         <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = GetLastError();
00970     }
00971     <span class="keywordflow">else</span>
00972     {
00973         dwWait = WaitForSingleObject(hEvent, 10 * 1000);    <span class="comment">// wait 10 sec for console IME process</span>
00974         <span class="keywordflow">if</span> (dwWait == WAIT_TIMEOUT)
00975         {
00976             TerminateProcess(ProcessInformation.hProcess, 0);
00977         }
00978         CloseHandle(ProcessInformation.hThread) ;
00979         CloseHandle(ProcessInformation.hProcess) ;
00980     }
00981 
00982     CloseHandle(hEvent);
00983 
00984 <a class="code" href="../../d1/d0/tdisp_8c.html#a1">ErrorExit</a>:
00985 
00986     fInConIMERoutine = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00987 
00988     <span class="keywordflow">return</span> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
00989 }
00990 
00991 <span class="preprocessor">#endif </span>
00992 <span class="preprocessor"></span>
00993 <span class="preprocessor"></span><span class="preprocessor">#endif // FE_IME</span>
00994 <span class="preprocessor"></span>
00995 
00996 <span class="preprocessor">#else // FE_SB</span>
00997 <span class="preprocessor"></span>
00998 <span class="comment">// Followings are stub functions for FE Console Support</span>
00999 
01000 
01001 <span class="preprocessor">#if !defined(BUILD_WOW6432)</span>
01002 <span class="preprocessor"></span>
01003 <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>
01004 <a class="code" href="../../d1/d1/bench_8c.html#a0">APIENTRY</a>
<a name="l01005"></a><a class="code" href="../../d8/d2/client_2dbcs_8c.html#a0">01005</a> <a class="code" href="../../d8/d2/client_2dbcs_8c.html#a0">GetConsoleNlsMode</a>(
01006     IN HANDLE hConsoleHandle,
01007     OUT LPDWORD lpNlsMode
01008     )
01009 
01010 <span class="comment">/*++</span>
01011 <span class="comment"></span>
01012 <span class="comment">Parameters:</span>
01013 <span class="comment"></span>
01014 <span class="comment">    hConsoleHandle - Supplies a console input or output handle.</span>
01015 <span class="comment"></span>
01016 <span class="comment">    lpNlsMode - Supplies a pointer to the NLS mode.</span>
01017 <span class="comment"></span>
01018 <span class="comment">Return Value:</span>
01019 <span class="comment"></span>
01020 <span class="comment">    TRUE - The operation was successful.</span>
01021 <span class="comment"></span>
01022 <span class="comment">    FALSE/NULL - The operation failed. Extended error status is available</span>
01023 <span class="comment">        using GetLastError.</span>
01024 <span class="comment"></span>
01025 <span class="comment"></span>
01026 <span class="comment">--*/</span>
01027 
01028 {
01029     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01030 }
01031 
01032 <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>
01033 <a class="code" href="../../d1/d1/bench_8c.html#a0">APIENTRY</a>
<a name="l01034"></a><a class="code" href="../../d8/d2/client_2dbcs_8c.html#a1">01034</a> <a class="code" href="../../d8/d2/client_2dbcs_8c.html#a1">SetConsoleNlsMode</a>(
01035     IN HANDLE hConsoleHandle,
01036     IN DWORD dwNlsMode
01037     )
01038 
01039 <span class="comment">/*++</span>
01040 <span class="comment"></span>
01041 <span class="comment">Parameters:</span>
01042 <span class="comment"></span>
01043 <span class="comment">    hConsoleHandle - Supplies a console input or output handle.</span>
01044 <span class="comment"></span>
01045 <span class="comment">    dwNlsMode - Supplies NLS mode.</span>
01046 <span class="comment"></span>
01047 <span class="comment">Return Value:</span>
01048 <span class="comment"></span>
01049 <span class="comment">    TRUE - The operation was successful.</span>
01050 <span class="comment"></span>
01051 <span class="comment">    FALSE/NULL - The operation failed. Extended error status is available</span>
01052 <span class="comment">        using GetLastError.</span>
01053 <span class="comment"></span>
01054 <span class="comment">--*/</span>
01055 
01056 {
01057     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01058 }
01059 
01060 <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>
01061 <a class="code" href="../../d1/d1/bench_8c.html#a0">APIENTRY</a>
<a name="l01062"></a><a class="code" href="../../d8/d2/client_2dbcs_8c.html#a2">01062</a> <a class="code" href="../../d8/d2/client_2dbcs_8c.html#a2">GetConsoleCharType</a>(
01063     IN HANDLE hConsoleHandle,
01064     IN COORD coordCheck,
01065     OUT PDWORD pdwType
01066     )
01067 
01068 <span class="comment">/*++</span>
01069 <span class="comment"></span>
01070 <span class="comment">Parameters:</span>
01071 <span class="comment"></span>
01072 <span class="comment">    hConsoleHandle - Supplies a console input or output handle.</span>
01073 <span class="comment"></span>
01074 <span class="comment">    coordCheck - set check position to these coordinates</span>
01075 <span class="comment"></span>
01076 <span class="comment">    pdwType - receive character type</span>
01077 <span class="comment"></span>
01078 <span class="comment">Return Value:</span>
01079 <span class="comment"></span>
01080 <span class="comment">    TRUE - The operation was successful.</span>
01081 <span class="comment"></span>
01082 <span class="comment">    FALSE/NULL - The operation failed. Extended error status is available</span>
01083 <span class="comment">        using GetLastError.</span>
01084 <span class="comment"></span>
01085 <span class="comment"></span>
01086 <span class="comment">--*/</span>
01087 
01088 {
01089     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01090 }
01091 
01092 <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>
01093 <a class="code" href="../../d1/d1/bench_8c.html#a0">APIENTRY</a>
<a name="l01094"></a><a class="code" href="../../d8/d2/client_2dbcs_8c.html#a3">01094</a> <a class="code" href="../../d8/d2/client_2dbcs_8c.html#a3">SetConsoleLocalEUDC</a>(
01095     IN HANDLE hConsoleHandle,
01096     IN WORD   wCodePoint,
01097     IN COORD  cFontSize,
01098     IN PCHAR  lpSB
01099     )
01100 
01101 <span class="comment">/*++</span>
01102 <span class="comment"></span>
01103 <span class="comment">Parameters:</span>
01104 <span class="comment"></span>
01105 <span class="comment">    hConsoleHandle - Supplies a console input or output handle.</span>
01106 <span class="comment"></span>
01107 <span class="comment">    wCodePoint - Code point of font by Shift JIS code.</span>
01108 <span class="comment"></span>
01109 <span class="comment">    cFontSize - FontSize of Font</span>
01110 <span class="comment"></span>
01111 <span class="comment">    lpSB - Pointer of font bitmap Buffer</span>
01112 <span class="comment"></span>
01113 <span class="comment">Return Value:</span>
01114 <span class="comment"></span>
01115 <span class="comment">    TRUE - The operation was successful.</span>
01116 <span class="comment"></span>
01117 <span class="comment">    FALSE/NULL - The operation failed. Extended error status is available</span>
01118 <span class="comment">        using GetLastError.</span>
01119 <span class="comment"></span>
01120 <span class="comment">--*/</span>
01121 
01122 {
01123     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01124 }
01125 
01126 <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>
01127 <a class="code" href="../../d1/d1/bench_8c.html#a0">APIENTRY</a>
<a name="l01128"></a><a class="code" href="../../d8/d2/client_2dbcs_8c.html#a4">01128</a> <a class="code" href="../../d8/d2/client_2dbcs_8c.html#a4">SetConsoleCursorMode</a>(
01129     IN HANDLE hConsoleHandle,
01130     IN BOOL   Blink,
01131     IN BOOL   DBEnable
01132     )
01133 
01134 <span class="comment">/*++</span>
01135 <span class="comment"></span>
01136 <span class="comment">Parameters:</span>
01137 <span class="comment"></span>
01138 <span class="comment">    hConsoleHandle - Supplies a console input or output handle.</span>
01139 <span class="comment"></span>
01140 <span class="comment">    Blink - Blinking enable/disable switch.</span>
01141 <span class="comment"></span>
01142 <span class="comment">    DBEnable - Double Byte width enable/disable switch.</span>
01143 <span class="comment"></span>
01144 <span class="comment">Return Value:</span>
01145 <span class="comment"></span>
01146 <span class="comment">    TRUE - The operation was successful.</span>
01147 <span class="comment"></span>
01148 <span class="comment">    FALSE/NULL - The operation failed. Extended error status is available</span>
01149 <span class="comment">        using GetLastError.</span>
01150 <span class="comment"></span>
01151 <span class="comment">--*/</span>
01152 
01153 {
01154     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01155 }
01156 
01157 <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>
01158 <a class="code" href="../../d1/d1/bench_8c.html#a0">APIENTRY</a>
<a name="l01159"></a><a class="code" href="../../d8/d2/client_2dbcs_8c.html#a5">01159</a> <a class="code" href="../../d8/d2/client_2dbcs_8c.html#a5">GetConsoleCursorMode</a>(
01160     IN HANDLE hConsoleHandle,
01161     OUT PBOOL  pbBlink,
01162     OUT PBOOL  pbDBEnable
01163     )
01164 
01165 <span class="comment">/*++</span>
01166 <span class="comment"></span>
01167 <span class="comment">Parameters:</span>
01168 <span class="comment"></span>
01169 <span class="comment">    hConsoleHandle - Supplies a console input or output handle.</span>
01170 <span class="comment"></span>
01171 <span class="comment">    Blink - Blinking enable/disable switch.</span>
01172 <span class="comment"></span>
01173 <span class="comment">    DBEnable - Double Byte width enable/disable switch.</span>
01174 <span class="comment"></span>
01175 <span class="comment">Return Value:</span>
01176 <span class="comment"></span>
01177 <span class="comment">    TRUE - The operation was successful.</span>
01178 <span class="comment"></span>
01179 <span class="comment">    FALSE/NULL - The operation failed. Extended error status is available</span>
01180 <span class="comment">        using GetLastError.</span>
01181 <span class="comment"></span>
01182 <span class="comment">--*/</span>
01183 
01184 {
01185     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01186 }
01187 
01188 <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>
01189 <a class="code" href="../../d1/d1/bench_8c.html#a0">APIENTRY</a>
<a name="l01190"></a><a class="code" href="../../d8/d2/client_2dbcs_8c.html#a6">01190</a> <a class="code" href="../../d8/d2/client_2dbcs_8c.html#a6">RegisterConsoleOS2</a>(
01191     IN BOOL fOs2Register
01192     )
01193 
01194 <span class="comment">/*++</span>
01195 <span class="comment"></span>
01196 <span class="comment">Description:</span>
01197 <span class="comment"></span>
01198 <span class="comment">    This routine registers the OS/2 with the console.</span>
01199 <span class="comment"></span>
01200 <span class="comment">Parameters:</span>
01201 <span class="comment"></span>
01202 <span class="comment">Return Value:</span>
01203 <span class="comment"></span>
01204 <span class="comment">    TRUE - The operation was successful.</span>
01205 <span class="comment"></span>
01206 <span class="comment">    FALSE/NULL - The operation failed. Extended error status is available</span>
01207 <span class="comment">        using GetLastError.</span>
01208 <span class="comment"></span>
01209 <span class="comment">--*/</span>
01210 
01211 {
01212     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01213 }
01214 
01215 <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>
01216 <a class="code" href="../../d1/d1/bench_8c.html#a0">APIENTRY</a>
<a name="l01217"></a><a class="code" href="../../d8/d2/client_2dbcs_8c.html#a7">01217</a> <a class="code" href="../../d8/d2/client_2dbcs_8c.html#a7">SetConsoleOS2OemFormat</a>(
01218     IN BOOL fOs2OemFormat
01219     )
01220 
01221 <span class="comment">/*++</span>
01222 <span class="comment"></span>
01223 <span class="comment">Description:</span>
01224 <span class="comment"></span>
01225 <span class="comment">    This routine sets the OS/2 OEM Format with the console.</span>
01226 <span class="comment"></span>
01227 <span class="comment">Parameters:</span>
01228 <span class="comment"></span>
01229 <span class="comment">Return Value:</span>
01230 <span class="comment"></span>
01231 <span class="comment">    TRUE - The operation was successful.</span>
01232 <span class="comment"></span>
01233 <span class="comment">    FALSE/NULL - The operation failed. Extended error status is available</span>
01234 <span class="comment">        using GetLastError.</span>
01235 <span class="comment"></span>
01236 <span class="comment">--*/</span>
01237 
01238 {
01239     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01240 }
01241 
01242 <span class="preprocessor">#endif </span>
01243 <span class="preprocessor"></span>
01244 <span class="preprocessor"></span><span class="preprocessor">#if defined(FE_IME)</span>
01245 <span class="preprocessor"></span>
01246 <span class="preprocessor">#if !defined(BUILD_WOW64)</span>
01247 <span class="preprocessor"></span>
01248 <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>
01249 <a class="code" href="../../d1/d1/bench_8c.html#a0">APIENTRY</a>
01250 RegisterConsoleIME(
01251     IN HWND  hWndConsoleIME,
01252     OUT DWORD *dwConsoleThreadId
01253     )
01254 
01255 <span class="comment">/*++</span>
01256 <span class="comment"></span>
01257 <span class="comment">Description:</span>
01258 <span class="comment"></span>
01259 <span class="comment">    This routine register the Console IME on the current desktop.</span>
01260 <span class="comment"></span>
01261 <span class="comment">Parameters:</span>
01262 <span class="comment"></span>
01263 <span class="comment">Return Value:</span>
01264 <span class="comment"></span>
01265 <span class="comment">    TRUE - The operation was successful.</span>
01266 <span class="comment"></span>
01267 <span class="comment">    FALSE - The operation failed.</span>
01268 <span class="comment"></span>
01269 <span class="comment">--*/</span>
01270 
01271 {
01272 
01273     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01274 
01275 }
01276 
01277 <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>
01278 <a class="code" href="../../d1/d1/bench_8c.html#a0">APIENTRY</a>
01279 UnregisterConsoleIME(
01280     )
01281 
01282 <span class="comment">/*++</span>
01283 <span class="comment"></span>
01284 <span class="comment">Description:</span>
01285 <span class="comment"></span>
01286 <span class="comment">    This routine unregister the Console IME on the current desktop.</span>
01287 <span class="comment"></span>
01288 <span class="comment">Parameters:</span>
01289 <span class="comment"></span>
01290 <span class="comment">Return Value:</span>
01291 <span class="comment"></span>
01292 <span class="comment">    TRUE - The operation was successful.</span>
01293 <span class="comment"></span>
01294 <span class="comment">    FALSE - The operation failed.</span>
01295 <span class="comment"></span>
01296 <span class="comment">--*/</span>
01297 
01298 {
01299 
01300     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01301 
01302 }
01303 
01304 <span class="preprocessor">#endif </span>
01305 <span class="preprocessor"></span>
01306 <span class="preprocessor"></span><span class="preprocessor">#endif // FE_IME</span>
01307 <span class="preprocessor"></span>
01308 <span class="preprocessor">#endif // FE_SB</span>
</div></pre><hr size="1"><address style="align: right;"><small>Generated on Sat May 15 19:39:38 2004 for test by
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>

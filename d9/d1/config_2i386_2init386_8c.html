<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>test: config/i386/init386.c File Reference</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="../../main.html">Main&nbsp;Page</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Class&nbsp;List</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Class&nbsp;Members</a> | <a class="qindex" href="../../globals.html">File&nbsp;Members</a></div>
<h1>init386.c File Reference</h1><code>#include "<a class="el" href="../../d2/d1/cmp_8h-source.html">cmp.h</a>"</code><br>
<code>#include "stdio.h"</code><br>

<p>
<a href="../../d0/d1/config_2i386_2init386_8c-source.html">Go to the source code of this file.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d1/config_2i386_2init386_8c.html#a0">TITLE_INDEX_VALUE</a>&nbsp;&nbsp;&nbsp;0</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d1/config_2i386_2init386_8c.html#a1">BIOS_DATE_LENGTH</a>&nbsp;&nbsp;&nbsp;11</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d1/config_2i386_2init386_8c.html#a2">MAXIMUM_BIOS_VERSION_LENGTH</a>&nbsp;&nbsp;&nbsp;128</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d1/config_2i386_2init386_8c.html#a3">SYSTEM_BIOS_START</a>&nbsp;&nbsp;&nbsp;0xF0000</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d1/config_2i386_2init386_8c.html#a4">SYSTEM_BIOS_LENGTH</a>&nbsp;&nbsp;&nbsp;0x10000</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d1/config_2i386_2init386_8c.html#a5">INT10_VECTOR</a>&nbsp;&nbsp;&nbsp;0x10</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d1/config_2i386_2init386_8c.html#a6">VIDEO_BIOS_START</a>&nbsp;&nbsp;&nbsp;0xC0000</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d1/config_2i386_2init386_8c.html#a7">VIDEO_BIOS_LENGTH</a>&nbsp;&nbsp;&nbsp;0x8000</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d1/config_2i386_2init386_8c.html#a8">VERSION_DATA_LENGTH</a>&nbsp;&nbsp;&nbsp;PAGE_SIZE</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d1/config_2i386_2init386_8c.html#a9">CPUID_PROCESSOR_NAME_STRING_SZ</a>&nbsp;&nbsp;&nbsp;49</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d1/config_2i386_2init386_8c.html#a10">CPUID_EXTFN_BASE</a>&nbsp;&nbsp;&nbsp;0x80000000</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d1/config_2i386_2init386_8c.html#a11">CPUID_EXTFN_PROCESSOR_NAME</a>&nbsp;&nbsp;&nbsp;0x80000002</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d1/config_2i386_2init386_8c.html#a12">CM_PROCESSOR_MISMATCH_VENDOR</a>&nbsp;&nbsp;&nbsp;0x01</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d1/config_2i386_2init386_8c.html#a13">CM_PROCESSOR_MISMATCH_STEPPING</a>&nbsp;&nbsp;&nbsp;0x02</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d1/config_2i386_2init386_8c.html#a14">CM_PROCESSOR_MISMATCH_L2</a>&nbsp;&nbsp;&nbsp;0x04</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d1/config_2i386_2init386_8c.html#a15">IS_DIGIT</a>(<a class="el" href="../../d7/d1/genuedef_8c.html#a8">c</a>)&nbsp;&nbsp;&nbsp;((<a class="el" href="../../d7/d1/genuedef_8c.html#a8">c</a>) &gt;= '0' &amp;&amp; (<a class="el" href="../../d7/d1/genuedef_8c.html#a8">c</a>) &lt;= '9')</td></tr>

<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>BOOLEAN&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d1/config_2i386_2init386_8c.html#a34">CmpGetBiosVersion</a> (PCHAR SearchArea, ULONG SearchLength, PCHAR VersionString)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOLEAN&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d1/config_2i386_2init386_8c.html#a35">CmpGetBiosDate</a> (PCHAR SearchArea, ULONG SearchLength, PCHAR DateString, BOOLEAN SystemBiosDate)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>ULONG&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d1/config_2i386_2init386_8c.html#a36">Ke386CyrixId</a> (VOID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d1/config_2i386_2init386_8c.html#a37">CmpInitializeMachineDependentConfiguration</a> (IN <a class="el" href="../../d1/d2/struct__LOADER__PARAMETER__BLOCK.html">PLOADER_PARAMETER_BLOCK</a> LoaderBlock)</td></tr>

<tr><td colspan=2><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>PCHAR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d1/config_2i386_2init386_8c.html#a16">SearchStrings</a> []</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>PCHAR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d1/config_2i386_2init386_8c.html#a17">BiosBegin</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>PCHAR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d1/config_2i386_2init386_8c.html#a18">Start</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>PCHAR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d1/config_2i386_2init386_8c.html#a19">End</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>UCHAR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d1/config_2i386_2init386_8c.html#a20">CmpID1</a> []</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>UCHAR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d1/config_2i386_2init386_8c.html#a21">CmpID2</a> []</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>WCHAR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d1/config_2i386_2init386_8c.html#a22">CmpVendorID</a> []</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>WCHAR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d1/config_2i386_2init386_8c.html#a23">CmpProcessorNameString</a> []</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>WCHAR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d1/config_2i386_2init386_8c.html#a24">CmpFeatureBits</a> []</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>WCHAR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d1/config_2i386_2init386_8c.html#a25">CmpMHz</a> []</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>WCHAR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d1/config_2i386_2init386_8c.html#a26">CmpUpdateSignature</a> []</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>WCHAR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d1/config_2i386_2init386_8c.html#a27">CmPhysicalAddressExtension</a> []</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>UCHAR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d1/config_2i386_2init386_8c.html#a28">CmpCyrixID</a> []</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>UCHAR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d1/config_2i386_2init386_8c.html#a29">CmpIntelID</a> []</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>UCHAR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d1/config_2i386_2init386_8c.html#a30">CmpAmdID</a> []</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>UCHAR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d1/config_2i386_2init386_8c.html#a31">CmProcessorMismatch</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>ULONG&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d1/config_2i386_2init386_8c.html#a32">CmpConfigurationAreaSize</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>PCM_FULL_RESOURCE_DESCRIPTOR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d1/config_2i386_2init386_8c.html#a33">CmpConfigurationData</a></td></tr>

</table>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="a1" doxytag="config/i386/init386.c::BIOS_DATE_LENGTH" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define BIOS_DATE_LENGTH&nbsp;&nbsp;&nbsp;11          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00067">67</a> of file <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html">config/i386/init386.c</a>.
<p>
Referenced by <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00141">CmpGetBiosDate()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a14" doxytag="config/i386/init386.c::CM_PROCESSOR_MISMATCH_L2" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define CM_PROCESSOR_MISMATCH_L2&nbsp;&nbsp;&nbsp;0x04          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00092">92</a> of file <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html">config/i386/init386.c</a>.
<p>
Referenced by <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00465">CmpInitializeMachineDependentConfiguration()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a13" doxytag="config/i386/init386.c::CM_PROCESSOR_MISMATCH_STEPPING" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define CM_PROCESSOR_MISMATCH_STEPPING&nbsp;&nbsp;&nbsp;0x02          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00091">91</a> of file <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html">config/i386/init386.c</a>.
<p>
Referenced by <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00465">CmpInitializeMachineDependentConfiguration()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a12" doxytag="config/i386/init386.c::CM_PROCESSOR_MISMATCH_VENDOR" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define CM_PROCESSOR_MISMATCH_VENDOR&nbsp;&nbsp;&nbsp;0x01          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00090">90</a> of file <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html">config/i386/init386.c</a>.
<p>
Referenced by <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00465">CmpInitializeMachineDependentConfiguration()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a10" doxytag="config/i386/init386.c::CPUID_EXTFN_BASE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define CPUID_EXTFN_BASE&nbsp;&nbsp;&nbsp;0x80000000          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00081">81</a> of file <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html">config/i386/init386.c</a>.
<p>
Referenced by <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00465">CmpInitializeMachineDependentConfiguration()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a11" doxytag="config/i386/init386.c::CPUID_EXTFN_PROCESSOR_NAME" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define CPUID_EXTFN_PROCESSOR_NAME&nbsp;&nbsp;&nbsp;0x80000002          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00082">82</a> of file <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html">config/i386/init386.c</a>.
<p>
Referenced by <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00465">CmpInitializeMachineDependentConfiguration()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a9" doxytag="config/i386/init386.c::CPUID_PROCESSOR_NAME_STRING_SZ" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define CPUID_PROCESSOR_NAME_STRING_SZ&nbsp;&nbsp;&nbsp;49          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00080">80</a> of file <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html">config/i386/init386.c</a>.
<p>
Referenced by <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00465">CmpInitializeMachineDependentConfiguration()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="config/i386/init386.c::INT10_VECTOR" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define INT10_VECTOR&nbsp;&nbsp;&nbsp;0x10          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00071">71</a> of file <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html">config/i386/init386.c</a>.
<p>
Referenced by <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00465">CmpInitializeMachineDependentConfiguration()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a15" doxytag="config/i386/init386.c::IS_DIGIT" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define IS_DIGIT          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d1/genuedef_8c.html#a8">c</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;((<a class="el" href="../../d7/d1/genuedef_8c.html#a8">c</a>) &gt;= '0' &amp;&amp; (<a class="el" href="../../d7/d1/genuedef_8c.html#a8">c</a>) &lt;= '9')</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00141">CmpGetBiosDate()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="config/i386/init386.c::MAXIMUM_BIOS_VERSION_LENGTH" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define MAXIMUM_BIOS_VERSION_LENGTH&nbsp;&nbsp;&nbsp;128          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00068">68</a> of file <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html">config/i386/init386.c</a>.
<p>
Referenced by <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00342">CmpGetBiosVersion()</a>, and <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00465">CmpInitializeMachineDependentConfiguration()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="config/i386/init386.c::SYSTEM_BIOS_LENGTH" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define SYSTEM_BIOS_LENGTH&nbsp;&nbsp;&nbsp;0x10000          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00070">70</a> of file <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html">config/i386/init386.c</a>.
<p>
Referenced by <a class="el" href="../../d0/d3/rules_8c-source.html#l02100">CmpGetPnPBIOSTableAddress()</a>, <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00465">CmpInitializeMachineDependentConfiguration()</a>, and <a class="el" href="../../d0/d3/rules_8c-source.html#l01035">CmpMatchPModeRule()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="config/i386/init386.c::SYSTEM_BIOS_START" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define SYSTEM_BIOS_START&nbsp;&nbsp;&nbsp;0xF0000          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00069">69</a> of file <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html">config/i386/init386.c</a>.
<p>
Referenced by <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00465">CmpInitializeMachineDependentConfiguration()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a0" doxytag="config/i386/init386.c::TITLE_INDEX_VALUE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define TITLE_INDEX_VALUE&nbsp;&nbsp;&nbsp;0          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00045">45</a> of file <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html">config/i386/init386.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a8" doxytag="config/i386/init386.c::VERSION_DATA_LENGTH" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define VERSION_DATA_LENGTH&nbsp;&nbsp;&nbsp;PAGE_SIZE          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00074">74</a> of file <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html">config/i386/init386.c</a>.
<p>
Referenced by <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00465">CmpInitializeMachineDependentConfiguration()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a7" doxytag="config/i386/init386.c::VIDEO_BIOS_LENGTH" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define VIDEO_BIOS_LENGTH&nbsp;&nbsp;&nbsp;0x8000          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00073">73</a> of file <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html">config/i386/init386.c</a>.
<p>
Referenced by <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00465">CmpInitializeMachineDependentConfiguration()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a6" doxytag="config/i386/init386.c::VIDEO_BIOS_START" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define VIDEO_BIOS_START&nbsp;&nbsp;&nbsp;0xC0000          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00072">72</a> of file <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html">config/i386/init386.c</a>.
<p>
Referenced by <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00465">CmpInitializeMachineDependentConfiguration()</a>.    </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="a35" doxytag="config/i386/init386.c::CmpGetBiosDate" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOLEAN CmpGetBiosDate           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">PCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>SearchArea</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>SearchLength</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>DateString</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOLEAN&nbsp;</td>
          <td class="mdname" nowrap> <em>SystemBiosDate</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00141">141</a> of file <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html">config/i386/init386.c</a>.
<p>
References <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00067">BIOS_DATE_LENGTH</a>, <a class="el" href="../../d2/d0/bench_8c-source.html#l00050">CHAR</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d9/d1/config_2i386_2init386_8c.html#a15">IS_DIGIT</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
<pre class="fragment"><div>00150                    :
00151 
00152     This routine finds <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> most recent date in <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> computer/video
00153     card's ROM.  When GetRomDate encounters a datae, <a class="code" href="../../d1/d9/icmui_8def.html#a4">it</a> checks <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a>
00154     previously found date to see <span class="keywordflow">if</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> <span class="keyword">new</span> date <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> more recent.
00155 
00156 Arguments:
00157 
00158     SearchArea - <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> area to search <span class="keywordflow">for</span> a date.
00159 
00160     SearchLength - Length of search.
00161 
00162     DateString - Supplies a pointer to a fixed length memory to receive
00163                  <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> date string.
00164 
00165 Return Value:
00166 
00167     <a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a> <span class="keywordflow">if</span> a date <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> found.
00168 
00169 --*/
00170 
00171 {
00172     <a class="code" href="../../d1/d1/bench_8c.html#a16">CHAR</a>    prevDate[<a class="code" href="../../d9/d1/config_2i386_2init386_8c.html#a1">BIOS_DATE_LENGTH</a>]; <span class="comment">// Newest date found so far (CCYY/MM/DD)</span>
00173     <a class="code" href="../../d1/d1/bench_8c.html#a16">CHAR</a>    currDate[<a class="code" href="../../d9/d1/config_2i386_2init386_8c.html#a1">BIOS_DATE_LENGTH</a>]; <span class="comment">// Date currently being examined (CCYY/MM/DD)</span>
00174     PCHAR   start;                      <span class="comment">// Start of the current search area.</span>
00175     PCHAR   end;                        <span class="comment">// End of the search area.    </span>
00176     ULONG   year;                       <span class="comment">// YY</span>
00177     ULONG   month;                      <span class="comment">// MM</span>
00178     ULONG   day;                        <span class="comment">// DD</span>
00179     ULONG   count;
00180 
00181 <span class="preprocessor">#define IS_DIGIT(c) ((c) &gt;= '0' &amp;&amp; (c) &lt;= '9')</span>
00182 <span class="preprocessor"></span>
00183     <span class="comment">//</span>
00184     <span class="comment">// Initialize previous date</span>
00185     <span class="comment">//</span>
00186 
00187     RtlZeroMemory(prevDate, BIOS_DATE_LENGTH);
00188 
00189     <span class="comment">//</span>
00190     <span class="comment">// We need to look ahead 5 characters to determine the </span>
00191     <span class="comment">// validity of the date pattern.</span>
00192     <span class="comment">//</span>
00193 
00194     start = SearchArea + 2;
00195     end = SearchArea + SearchLength - 5;
00196 
00197     <span class="comment">//</span>
00198     <span class="comment">// Process the entire search area.</span>
00199     <span class="comment">//</span>
00200     
00201     <span class="keywordflow">while</span> (start &lt; end) {
00202         
00203         <span class="comment">//</span>
00204         <span class="comment">// We consider the following byte pattern as a potential date.</span>
00205         <span class="comment">// We are assuming the following date pattern Month/Day/Year.</span>
00206         <span class="comment">// "n/nn/nn" where n is any digit. We allow month to be single</span>
00207         <span class="comment">// digit only.</span>
00208         <span class="comment">//</span>
00209 
00210         <span class="keywordflow">if</span> (    start[0] == <span class="charliteral">'/'</span> &amp;&amp; start[3] == <span class="charliteral">'/'</span> &amp;&amp;
00211                 <a class="code" href="../../d9/d1/config_2i386_2init386_8c.html#a15">IS_DIGIT</a>(*(start - 1)) &amp;&amp;
00212                 <a class="code" href="../../d9/d1/config_2i386_2init386_8c.html#a15">IS_DIGIT</a>(start[1]) &amp;&amp; <a class="code" href="../../d9/d1/config_2i386_2init386_8c.html#a15">IS_DIGIT</a>(start[2]) &amp;&amp;    
00213                 <a class="code" href="../../d9/d1/config_2i386_2init386_8c.html#a15">IS_DIGIT</a>(start[4]) &amp;&amp; <a class="code" href="../../d9/d1/config_2i386_2init386_8c.html#a15">IS_DIGIT</a>(start[5])) {
00214             
00215             <span class="comment">//</span>
00216             <span class="comment">// Copy MM/DD part into the currDate.</span>
00217             <span class="comment">//</span>
00218 
00219             RtlMoveMemory(&amp;currDate[5], start - 2, 5);
00220 
00221             <span class="comment">//</span>
00222             <span class="comment">// Handle single digit month correctly.</span>
00223             <span class="comment">//</span>
00224 
00225             <span class="keywordflow">if</span> (!<a class="code" href="../../d9/d1/config_2i386_2init386_8c.html#a15">IS_DIGIT</a>(currDate[5])) {
00226                 currDate[5] = <span class="charliteral">'0'</span>;
00227             }
00228             
00229             <span class="comment">//</span>
00230             <span class="comment">// Copy the year YY into currDate</span>
00231             <span class="comment">//</span>
00232 
00233             currDate[2] = start[4];
00234             currDate[3] = start[5];
00235             currDate[4] = currDate[7] = currDate[10] = <span class="charliteral">'\0'</span>;
00236 
00237             <span class="comment">//</span>
00238             <span class="comment">// Do basic validation for the date.</span>
00239             <span class="comment">// Only one field (YY) can be 0.</span>
00240             <span class="comment">// Only one field (YY) can be greater than 31.</span>
00241             <span class="comment">// We assume the ROM date to be in the format MM/DD/YY.        </span>
00242             <span class="comment">//</span>
00243 
00244             year = strtoul(&amp;currDate[2], NULL, 16);
00245             month = strtoul(&amp;currDate[5], NULL, 16);
00246             day = strtoul(&amp;currDate[8], NULL, 16);
00247 
00248             <span class="comment">//</span>
00249             <span class="comment">// Count the number of fields that are 0.</span>
00250             <span class="comment">//</span>
00251 
00252             count = ((day == 0)? 1 : 0) + ((month == 0)? 1 : 0) + ((year == 0)? 1 : 0);
00253             <span class="keywordflow">if</span> (count &lt;= 1) {
00254 
00255                 <span class="comment">//</span>
00256                 <span class="comment">// Count number of field that are greater than 31.</span>
00257                 <span class="comment">//</span>
00258 
00259                 count = ((day &gt; 0x31)? 1 : 0) + ((month &gt; 0x31)? 1 : 0) + ((year &gt; 0x31)? 1 : 0);
00260                 <span class="keywordflow">if</span> (count &lt;= 1) {
00261 
00262                     <span class="comment">//</span>
00263                     <span class="comment">// See if the ROM already has a 4 digit date. We do this only for System ROM</span>
00264                     <span class="comment">// since they have a consistent date format.</span>
00265                     <span class="comment">//</span>
00266 
00267                     <span class="keywordflow">if</span> (SystemBiosDate &amp;&amp; <a class="code" href="../../d9/d1/config_2i386_2init386_8c.html#a15">IS_DIGIT</a>(start[6]) &amp;&amp; <a class="code" href="../../d9/d1/config_2i386_2init386_8c.html#a15">IS_DIGIT</a>(start[7]) &amp;&amp;
00268                         (memcmp(&amp;start[4], <span class="stringliteral">"19"</span>, 2) == 0 || memcmp(&amp;start[4], <span class="stringliteral">"20"</span>, 2) == 0)) {
00269 
00270                         currDate[0] = start[4];
00271                         currDate[1] = start[5];
00272                         currDate[2] = start[6];
00273                         currDate[3] = start[7];
00274 
00275                     } <span class="keywordflow">else</span> {
00276                         
00277                         <span class="comment">//</span>
00278                         <span class="comment">// Internally, we treat year as a 4 digit quantity</span>
00279                         <span class="comment">// for comparison to determine the newest date.</span>
00280                         <span class="comment">// We treat year YY &lt; 80 as 20YY, otherwise 19YY.                </span>
00281                         <span class="comment">//</span>
00282 
00283                         <span class="keywordflow">if</span> (year &lt; 0x80) {
00284                             currDate[0] = <span class="charliteral">'2'</span>;
00285                             currDate[1] = <span class="charliteral">'0'</span>;
00286                         } <span class="keywordflow">else</span> {
00287                             currDate[0] = <span class="charliteral">'1'</span>;
00288                             currDate[1] = <span class="charliteral">'9'</span>;
00289                         }
00290                     }
00291 
00292                     <span class="comment">//</span>
00293                     <span class="comment">// Add the '/' delimiters into the date.</span>
00294                     <span class="comment">//</span>
00295 
00296                     currDate[4] = currDate[7] = <span class="charliteral">'/'</span>;
00297 
00298                     <span class="comment">//</span>
00299                     <span class="comment">// Compare the dates, and save the newer one.</span>
00300                     <span class="comment">//</span>
00301 
00302                     <span class="keywordflow">if</span> (memcmp (prevDate, currDate, BIOS_DATE_LENGTH - 1) &lt; 0) {
00303                         RtlMoveMemory(prevDate, currDate, BIOS_DATE_LENGTH - 1);
00304                     }
00305 
00306                     <span class="comment">//</span>
00307                     <span class="comment">// Next search should start at the second '/'.</span>
00308                     <span class="comment">//</span>
00309 
00310                     start += 2;            
00311                 }
00312             }
00313         }
00314         start++;
00315     }
00316 
00317     <span class="keywordflow">if</span> (prevDate[0] != <span class="charliteral">'\0'</span>) {
00318 
00319         <span class="comment">//</span>
00320         <span class="comment">// Convert from the internal CCYY/MM/DD format to</span>
00321         <span class="comment">// return MM/DD//YY format.</span>
00322         <span class="comment">//</span>
00323 
00324         RtlMoveMemory(DateString, &amp;prevDate[5], 5);
00325         DateString[5] = <span class="charliteral">'/'</span>;
00326         DateString[6] = prevDate[2];
00327         DateString[7] = prevDate[3];
00328         DateString[8] = <span class="charliteral">'\0'</span>;
00329 
00330         <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
00331     }
00332     
00333     <span class="comment">//</span>
00334     <span class="comment">// If we did not find a date, return an empty string.</span>
00335     <span class="comment">//</span>
00336 
00337     DateString[0] = <span class="charliteral">'\0'</span>;
00338     <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00339 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a34" doxytag="config/i386/init386.c::CmpGetBiosVersion" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOLEAN CmpGetBiosVersion           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">PCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>SearchArea</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>SearchLength</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>VersionString</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00342">342</a> of file <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html">config/i386/init386.c</a>.
<p>
References <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00048">BiosBegin</a>, <a class="el" href="../../d7/d1/rtqkey_8c-source.html#l00042">Buffer</a>, <a class="el" href="../../d2/d0/bench_8c-source.html#l00050">CHAR</a>, <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00050">End</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00068">MAXIMUM_BIOS_VERSION_LENGTH</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00047">SearchStrings</a>, <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00049">Start</a>, <a class="el" href="../../d5/d8/talloc_8c-source.html#l00027">String</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00064">USHORT</a>.
<p>
<pre class="fragment"><div>00350                    :
00351 
00352     This routine finds <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> version number stored in ROM, <span class="keywordflow">if</span> any.
00353 
00354 Arguments:
00355 
00356     SearchArea - <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> area to search <span class="keywordflow">for</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> version.
00357 
00358     SearchLength - Length of search
00359 
00360     VersionString - Supplies a pointer to a fixed length memory to receive
00361                  <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> version string.
00362 
00363 Return Value:
00364 
00365     <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a> <span class="keywordflow">if</span> a version number <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> found.  Else a value of <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a> <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> returned.
00366 
00367 --*/
00368 {
00369     PCHAR <a class="code" href="../../d4/d9/talloc_8c.html#a0">String</a>;
00370     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> Length;
00371     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> i;
00372     <a class="code" href="../../d1/d1/bench_8c.html#a16">CHAR</a> <a class="code" href="../../d6/d2/rtqkey_8c.html#a3">Buffer</a>[<a class="code" href="../../d9/d1/config_2i386_2init386_8c.html#a2">MAXIMUM_BIOS_VERSION_LENGTH</a>];
00373     PCHAR BufferPointer;
00374 
00375         <span class="keywordflow">if</span> (SearchArea != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00376 
00377         <span class="comment">//</span>
00378         <span class="comment">// If caller does not specify the search area, we will search</span>
00379         <span class="comment">// the area left from previous search.</span>
00380         <span class="comment">//</span>
00381 
00382         <a class="code" href="../../d9/d1/config_2i386_2init386_8c.html#a17">BiosBegin</a> = SearchArea;
00383         <a class="code" href="../../d9/d1/config_2i386_2init386_8c.html#a18">Start</a> = SearchArea + 1;
00384         <a class="code" href="../../d9/d1/config_2i386_2init386_8c.html#a19">End</a> = SearchArea + SearchLength - 2;
00385     }
00386 
00387     <span class="keywordflow">while</span> (1) {
00388 
00389          <span class="comment">//</span>
00390          <span class="comment">// Search for a period with a digit on either side</span>
00391          <span class="comment">//</span>
00392 
00393          <a class="code" href="../../d4/d9/talloc_8c.html#a0">String</a> = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00394          <span class="keywordflow">while</span> (<a class="code" href="../../d9/d1/config_2i386_2init386_8c.html#a18">Start</a> &lt;= <a class="code" href="../../d9/d1/config_2i386_2init386_8c.html#a19">End</a>) {
00395              <span class="keywordflow">if</span> (*<a class="code" href="../../d9/d1/config_2i386_2init386_8c.html#a18">Start</a> == <span class="charliteral">'.'</span> &amp;&amp; *(<a class="code" href="../../d9/d1/config_2i386_2init386_8c.html#a18">Start</a>+1) &gt;= <span class="charliteral">'0'</span> &amp;&amp; *(<a class="code" href="../../d9/d1/config_2i386_2init386_8c.html#a18">Start</a>+1) &lt;= <span class="charliteral">'9'</span> &amp;&amp;
00396                  *(<a class="code" href="../../d9/d1/config_2i386_2init386_8c.html#a18">Start</a>-1) &gt;= <span class="charliteral">'0'</span> &amp;&amp; *(<a class="code" href="../../d9/d1/config_2i386_2init386_8c.html#a18">Start</a>-1) &lt;= <span class="charliteral">'9'</span>) {
00397                  <a class="code" href="../../d4/d9/talloc_8c.html#a0">String</a> = <a class="code" href="../../d9/d1/config_2i386_2init386_8c.html#a18">Start</a>;
00398                  <span class="keywordflow">break</span>;
00399              } <span class="keywordflow">else</span> {
00400                  <a class="code" href="../../d9/d1/config_2i386_2init386_8c.html#a18">Start</a>++;
00401              }
00402          }
00403 
00404          <span class="keywordflow">if</span> (<a class="code" href="../../d9/d1/config_2i386_2init386_8c.html#a18">Start</a> &gt; <a class="code" href="../../d9/d1/config_2i386_2init386_8c.html#a19">End</a>) {
00405              <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00406          } <span class="keywordflow">else</span> {
00407              <a class="code" href="../../d9/d1/config_2i386_2init386_8c.html#a18">Start</a> += 2;
00408          }
00409 
00410          Length = 0;
00411          <a class="code" href="../../d6/d2/rtqkey_8c.html#a3">Buffer</a>[<a class="code" href="../../d9/d1/config_2i386_2init386_8c.html#a2">MAXIMUM_BIOS_VERSION_LENGTH</a> - 1] = <span class="charliteral">'\0'</span>;
00412          BufferPointer = &amp;<a class="code" href="../../d6/d2/rtqkey_8c.html#a3">Buffer</a>[<a class="code" href="../../d9/d1/config_2i386_2init386_8c.html#a2">MAXIMUM_BIOS_VERSION_LENGTH</a> - 1];
00413 
00414          <span class="comment">//</span>
00415          <span class="comment">// Search for the beginning of the string</span>
00416          <span class="comment">//</span>
00417 
00418          <a class="code" href="../../d4/d9/talloc_8c.html#a0">String</a>--;
00419          <span class="keywordflow">while</span> (Length &lt; <a class="code" href="../../d9/d1/config_2i386_2init386_8c.html#a2">MAXIMUM_BIOS_VERSION_LENGTH</a> - 8 &amp;&amp;
00420                 <a class="code" href="../../d4/d9/talloc_8c.html#a0">String</a> &gt;= <a class="code" href="../../d9/d1/config_2i386_2init386_8c.html#a17">BiosBegin</a> &amp;&amp;
00421                 *<a class="code" href="../../d4/d9/talloc_8c.html#a0">String</a> &gt;= <span class="charliteral">' '</span> &amp;&amp; *<a class="code" href="../../d4/d9/talloc_8c.html#a0">String</a> &lt;= 127 &amp;&amp;
00422                 *<a class="code" href="../../d4/d9/talloc_8c.html#a0">String</a> != <span class="charliteral">'$'</span>) {
00423              --BufferPointer;
00424              *BufferPointer = *<a class="code" href="../../d4/d9/talloc_8c.html#a0">String</a>;
00425              --<a class="code" href="../../d4/d9/talloc_8c.html#a0">String</a>, ++Length;
00426          }
00427          ++<a class="code" href="../../d4/d9/talloc_8c.html#a0">String</a>;
00428 
00429          <span class="comment">//</span>
00430          <span class="comment">// Can one of the search strings be found</span>
00431          <span class="comment">//</span>
00432 
00433          <span class="keywordflow">for</span> (i = 0; <a class="code" href="../../d9/d1/config_2i386_2init386_8c.html#a16">SearchStrings</a>[i]; i++) {
00434              <span class="keywordflow">if</span> (strstr(BufferPointer, SearchStrings[i])) {
00435                  <span class="keywordflow">goto</span> Found;
00436              }
00437          }
00438     }
00439 
00440 Found:
00441 
00442     <span class="comment">//</span>
00443     <span class="comment">// Skip leading white space</span>
00444     <span class="comment">//</span>
00445 
00446     <span class="keywordflow">for</span> (; *<a class="code" href="../../d4/d9/talloc_8c.html#a0">String</a> == <span class="charliteral">' '</span>; ++<a class="code" href="../../d4/d9/talloc_8c.html#a0">String</a>)
00447       ;
00448 
00449     <span class="comment">//</span>
00450     <span class="comment">// Copy the string to user supplied buffer</span>
00451     <span class="comment">//</span>
00452 
00453     <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../d9/d1/config_2i386_2init386_8c.html#a2">MAXIMUM_BIOS_VERSION_LENGTH</a> - 1 &amp;&amp;
00454          <a class="code" href="../../d4/d9/talloc_8c.html#a0">String</a> &lt;= (<a class="code" href="../../d9/d1/config_2i386_2init386_8c.html#a19">End</a> + 1) &amp;&amp;
00455          *<a class="code" href="../../d4/d9/talloc_8c.html#a0">String</a> &gt;= <span class="charliteral">' '</span> &amp;&amp; *<a class="code" href="../../d4/d9/talloc_8c.html#a0">String</a> &lt;= 127 &amp;&amp; *<a class="code" href="../../d4/d9/talloc_8c.html#a0">String</a> != <span class="charliteral">'$'</span>;
00456          ++i, ++<a class="code" href="../../d4/d9/talloc_8c.html#a0">String</a>) {
00457          VersionString[i] = *<a class="code" href="../../d4/d9/talloc_8c.html#a0">String</a>;
00458     }
00459     VersionString[i] = <span class="charliteral">'\0'</span>;
00460     <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
00461 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a37" doxytag="config/i386/init386.c::CmpInitializeMachineDependentConfiguration" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS CmpInitializeMachineDependentConfiguration           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN <a class="el" href="../../d1/d2/struct__LOADER__PARAMETER__BLOCK.html">PLOADER_PARAMETER_BLOCK</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>LoaderBlock</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00465">465</a> of file <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html">config/i386/init386.c</a>.
<p>
References <a class="el" href="../../d7/d1/rtqkey_8c-source.html#l00042">Buffer</a>, <a class="el" href="../../d1/d9/arc_8h.html#a315a188">CentralProcessor</a>, <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00092">CM_PROCESSOR_MISMATCH_L2</a>, <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00091">CM_PROCESSOR_MISMATCH_STEPPING</a>, <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00090">CM_PROCESSOR_MISMATCH_VENDOR</a>, <a class="el" href="../../d7/d9/cmdat_8c-source.html#l00052">CmClassName</a>, <a class="el" href="../../d5/d9/cmconfig_8c-source.html#l00064">CmpConfigurationAreaSize</a>, <a class="el" href="../../d5/d9/cmconfig_8c-source.html#l00065">CmpConfigurationData</a>, <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00059">CmpCyrixID</a>, <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00055">CmpFeatureBits</a>, <a class="el" href="../../d6/d1/config_2ia64_2initia64_8c-source.html#l00108">CmpGetBiosDate()</a>, <a class="el" href="../../d5/d2/config_2ia64_2initia64_8c.html#a28">CmpGetBiosVersion()</a>, <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00058">CmPhysicalAddressExtension</a>, <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00051">CmpID1</a>, <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00052">CmpID2</a>, <a class="el" href="../../d5/d9/cmconfig_8c-source.html#l00458">CmpInitializeRegistryNode()</a>, <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00056">CmpMHz</a>, <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00054">CmpProcessorNameString</a>, <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00088">CmProcessorMismatch</a>, <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00057">CmpUpdateSignature</a>, <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00053">CmpVendorID</a>, <a class="el" href="../../d7/d9/cmdat_8c-source.html#l00170">CmRegistryMachineHardwareDescriptionSystemName</a>, <a class="el" href="../../d7/d9/cmdat_8c-source.html#l00182">CmRegistryMachineSystemCurrentControlSetControlSessionManagerMemoryManagement</a>, <a class="el" href="../../d5/d3/i386_8h.html#a50">CPUID()</a>, <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00081">CPUID_EXTFN_BASE</a>, <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00082">CPUID_EXTFN_PROCESSOR_NAME</a>, <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00080">CPUID_PROCESSOR_NAME_STRING_SZ</a>, <a class="el" href="../../d6/d4/cc_8h-source.html#l00126">ExAllocatePool</a>, <a class="el" href="../../d7/d2/cmwraper_8c-source.html#l00304">ExFreePool()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d1/d9/arc_8h.html#a315a189">FloatingPointProcessor</a>, <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00071">INT10_VECTOR</a>, <a class="el" href="../../d9/d1/cyrix_8c.html#a24">Ke386CyrixId()</a>, <a class="el" href="../../d3/d6/alpha_2kdpcpu_8h-source.html#l00068">KeGetPcr</a>, <a class="el" href="../../d6/d2/i386_8h-source.html#l02694">KeI386NpxPresent</a>, <a class="el" href="../../d5/d8/ke_8h-source.html#l02776">KeNumberProcessors</a>, <a class="el" href="../../d0/d1/thredobj_8c-source.html#l01153">KeRevertToUserAffinityThread()</a>, <a class="el" href="../../d0/d1/thredobj_8c-source.html#l01467">KeSetSystemAffinityThread()</a>, <a class="el" href="../../d9/d9/rtbatcr_8c-source.html#l00059">KeyName</a>, <a class="el" href="../../d5/d8/ke_8h-source.html#l02782">KiProcessorBlock</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00068">MAXIMUM_BIOS_VERSION_LENGTH</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d6/d9/obclose_8c-source.html#l00037">NtClose()</a>, <a class="el" href="../../d8/d6/ntapi_8c-source.html#l00166">NtCreateKey()</a>, <a class="el" href="../../d8/d6/ntapi_8c-source.html#l01870">NtOpenKey()</a>, <a class="el" href="../../d8/d6/ntapi_8c-source.html#l02672">NtSetValueKey()</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d2/d1/cmp_8h-source.html#l00420">NUMBER_TYPES</a>, <a class="el" href="../../d8/d9/ctlnpqos_8c-source.html#l00027">ObjectAttributes</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00599">PAGE_SIZE</a>, <a class="el" href="../../d5/d8/ex_8h.html#a329a174">PagedPool</a>, <a class="el" href="../../d1/d9/arc_8h.html#a314a180">ProcessorClass</a>, <a class="el" href="../../d7/d5/nls_8c-source.html#l00082">RtlAnsiStringToUnicodeString()</a>, <a class="el" href="../../d7/d5/nls_8c-source.html#l01215">RtlFreeUnicodeString()</a>, <a class="el" href="../../d3/d6/string_8c-source.html#l00102">RtlInitAnsiString()</a>, <a class="el" href="../../d3/d6/string_8c-source.html#l00148">RtlInitUnicodeString()</a>, <a class="el" href="../../d6/d9/heappage_8c.html#a68">sprintf()</a>, <a class="el" href="../../d3/d0/cttoken_8c-source.html#l00135">Status</a>, <a class="el" href="../../d2/d7/regtest_8c.html#a2">strlen()</a>, <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00070">SYSTEM_BIOS_LENGTH</a>, <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00069">SYSTEM_BIOS_START</a>, <a class="el" href="../../d5/d0/config_2alpha_2init_8c-source.html#l00034">TITLE_INDEX_VALUE</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00064">USHORT</a>, <a class="el" href="../../d2/d0/rtdelval_8c-source.html#l00047">ValueName</a>, <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00074">VERSION_DATA_LENGTH</a>, <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00073">VIDEO_BIOS_LENGTH</a>, and <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00072">VIDEO_BIOS_START</a>.
<p>
<pre class="fragment"><div>00470                    :
00471 
00472     This routine creates x86 specific entries in <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> registry.
00473 
00474 Arguments:
00475 
00476     LoaderBlock - supplies a pointer to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> LoaderBlock passed in from <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a>
00477                   OS Loader.
00478 
00479 Returns:
00480 
00481     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> code <span class="keywordflow">for</span> sucess or <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a10">reason</a> of <a class="code" href="../../d8/d0/rtbatcr_8c.html#a1">failure</a>.
00482 
00483 --*/
00484 {
00485     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
00486     ULONG VideoBiosStart;
00487     UNICODE_STRING <a class="code" href="../../d8/d0/rtbatcr_8c.html#a3">KeyName</a>;
00488     UNICODE_STRING <a class="code" href="../../d1/d1/rtdelval_8c.html#a3">ValueName</a>;
00489     UNICODE_STRING ValueData;
00490     ANSI_STRING AnsiString;
00491     OBJECT_ATTRIBUTES <a class="code" href="../../d7/d0/ctlnpqos_8c.html#a4">ObjectAttributes</a>;
00492     ULONG Disposition;
00493     HANDLE ParentHandle;
00494     HANDLE BaseHandle, NpxHandle;
00495     HANDLE CurrentControlSet;
00496     <a class="code" href="../../d5/d8/struct__CONFIGURATION__COMPONENT__DATA.html">CONFIGURATION_COMPONENT_DATA</a> CurrentEntry;
00497     PUCHAR VendorID;
00498     UCHAR  <a class="code" href="../../d6/d2/rtqkey_8c.html#a3">Buffer</a>[<a class="code" href="../../d9/d1/config_2i386_2init386_8c.html#a2">MAXIMUM_BIOS_VERSION_LENGTH</a>];
00499     PKPRCB Prcb;
00500     ULONG  i, Junk;
00501     ULONG VersionsLength = 0, Length;
00502     PCHAR VersionStrings, VersionPointer;
00503     UNICODE_STRING SectionName;
00504     ULONG ViewSize;
00505     LARGE_INTEGER ViewBase;
00506     PVOID BaseAddress;
00507     HANDLE SectionHandle;
00508     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> DeviceIndexTable[<a class="code" href="../../d1/d2/cmp_8h.html#a68">NUMBER_TYPES</a>];
00509     ULONG CpuIdFunction;
00510     ULONG MaxExtFn;
00511     PULONG NameString = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00512     ULONG   P0L2Size = 0;
00513     ULONG   ThisProcessorL2Size;
00514     <span class="keyword">struct </span>{
00515         <span class="keyword">union </span>{
00516             UCHAR   Bytes[<a class="code" href="../../d9/d1/config_2i386_2init386_8c.html#a9">CPUID_PROCESSOR_NAME_STRING_SZ</a>];
00517             ULONG   DWords[1];
00518         } u;
00519     } ProcessorNameString;
00520 
00521 <span class="preprocessor">#ifdef _WANT_MACHINE_IDENTIFICATION</span>
00522 <span class="preprocessor"></span>    HANDLE  BiosInfo;
00523 <span class="preprocessor">#endif    </span>
00524 <span class="preprocessor"></span>
00525     <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../d1/d2/cmp_8h.html#a68">NUMBER_TYPES</a>; i++) {
00526         DeviceIndexTable[i] = 0;
00527     }
00528 
00529     InitializeObjectAttributes( &amp;ObjectAttributes,
00530                                 &amp;CmRegistryMachineSystemCurrentControlSetControlSessionManagerMemoryManagement,
00531                                 OBJ_CASE_INSENSITIVE,
00532                                 NULL,
00533                                 NULL
00534                                );
00535 
00536     <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d7/d7/ntapi_8c.html#a23">NtOpenKey</a>( &amp;BaseHandle,
00537                         KEY_READ | KEY_WRITE,
00538                         &amp;ObjectAttributes
00539                       );
00540 
00541     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(Status)) {
00542 
00543         ULONG paeEnabled;
00544 
00545         <span class="keywordflow">if</span> (SharedUserData-&gt;ProcessorFeatures[PF_PAE_ENABLED] == <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>) {
00546             paeEnabled = 0;
00547         } <span class="keywordflow">else</span> {
00548             paeEnabled = 1;
00549         }
00550 
00551         <a class="code" href="../../d2/d7/string_8c.html#a7">RtlInitUnicodeString</a>( &amp;ValueName,
00552                               CmPhysicalAddressExtension );
00553 
00554            
00555         <a class="code" href="../../d7/d7/ntapi_8c.html#a29">NtSetValueKey</a>( BaseHandle,
00556                        &amp;ValueName,
00557                        TITLE_INDEX_VALUE,
00558                        REG_DWORD,
00559                        &amp;paeEnabled,
00560                        <span class="keyword">sizeof</span>(paeEnabled) );
00561 
00562         <a class="code" href="../../d5/d0/obclose_8c.html#a1">NtClose</a>( BaseHandle );
00563    }
00564 
00565             
00566 
00567 
00568 
00569     InitializeObjectAttributes( &amp;ObjectAttributes,
00570                                 &amp;CmRegistryMachineHardwareDescriptionSystemName,
00571                                 OBJ_CASE_INSENSITIVE,
00572                                 NULL,
00573                                 NULL
00574                               );
00575 
00576     <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d7/d7/ntapi_8c.html#a23">NtOpenKey</a>( &amp;ParentHandle,
00577                         KEY_READ,
00578                         &amp;ObjectAttributes
00579                       );
00580 
00581     <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(Status)) {
00582         <span class="comment">// Something is really wrong...</span>
00583         <span class="keywordflow">return</span> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
00584     }
00585 
00586 <span class="preprocessor">#ifdef _WANT_MACHINE_IDENTIFICATION</span>
00587 <span class="preprocessor"></span>
00588     InitializeObjectAttributes( &amp;ObjectAttributes,
00589                                 &amp;CmRegistryMachineSystemCurrentControlSetControlBiosInfo,
00590                                 OBJ_CASE_INSENSITIVE,
00591                                 NULL,
00592                                 NULL
00593                               );
00594 
00595     <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d7/d7/ntapi_8c.html#a14">NtCreateKey</a>(   &amp;BiosInfo,
00596                             KEY_ALL_ACCESS,
00597                             &amp;ObjectAttributes,
00598                             0,
00599                             NULL,
00600                             REG_OPTION_NON_VOLATILE,
00601                             &amp;Disposition
00602                         );
00603 
00604     <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(Status)) {    
00605         <span class="comment">// Something is really wrong...</span>
00606         <span class="keywordflow">return</span> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
00607     }
00608 
00609 <span class="preprocessor">#endif</span>
00610 <span class="preprocessor"></span>
00611     <span class="comment">//</span>
00612     <span class="comment">// On an ARC machine the processor(s) are included in the hardware</span>
00613     <span class="comment">// configuration passed in from bootup.  Since there's no standard</span>
00614     <span class="comment">// way to get all the ARC information for each processor in an MP</span>
00615     <span class="comment">// machine via pc-ROMs the information will be added here (if it's</span>
00616     <span class="comment">// not already present).</span>
00617     <span class="comment">//</span>
00618 
00619     <a class="code" href="../../d2/d7/string_8c.html#a7">RtlInitUnicodeString</a>( &amp;KeyName,
00620                           L<span class="stringliteral">"CentralProcessor"</span>
00621                         );
00622 
00623     InitializeObjectAttributes(
00624         &amp;ObjectAttributes,
00625         &amp;KeyName,
00626         0,
00627         ParentHandle,
00628         NULL
00629         );
00630 
00631     <a class="code" href="../../d7/d0/ctlnpqos_8c.html#a4">ObjectAttributes</a>.Attributes |= OBJ_CASE_INSENSITIVE;
00632 
00633     <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d7/d7/ntapi_8c.html#a14">NtCreateKey</a>(
00634                 &amp;BaseHandle,
00635                 KEY_READ | KEY_WRITE,
00636                 &amp;ObjectAttributes,
00637                 TITLE_INDEX_VALUE,
00638                 &amp;CmClassName[ProcessorClass],
00639                 0,
00640                 &amp;Disposition
00641                 );
00642 
00643     <a class="code" href="../../d5/d0/obclose_8c.html#a1">NtClose</a> (BaseHandle);
00644 
00645     <span class="keywordflow">if</span> (Disposition == REG_CREATED_NEW_KEY) {
00646 
00647         <span class="comment">//</span>
00648         <span class="comment">// The ARC rom didn't add the processor(s) into the registry.</span>
00649         <span class="comment">// Do it now.</span>
00650         <span class="comment">//</span>
00651 
00652         <a class="code" href="../../d4/d0/cmconfig_8c.html#a10">CmpConfigurationData</a> = (PCM_FULL_RESOURCE_DESCRIPTOR)<a class="code" href="../../d5/d5/cc_8h.html#a10">ExAllocatePool</a>(
00653                                             PagedPool,
00654                                             CmpConfigurationAreaSize
00655                                             );
00656 
00657         <span class="comment">//</span>
00658         <span class="comment">// if (CmpConfigurationData == 0) {</span>
00659         <span class="comment">//     &lt;do something useful&gt;</span>
00660         <span class="comment">//     Note: we don't actually use it so it doesn't matter for now</span>
00661         <span class="comment">//     since it isn't used until the free.  go figure.</span>
00662         <span class="comment">// }</span>
00663         <span class="comment">//</span>
00664 
00665         <span class="keywordflow">for</span> (i=0; i &lt; (ULONG)<a class="code" href="../../d4/d9/ke_8h.html#a133">KeNumberProcessors</a>; i++) {
00666             Prcb = <a class="code" href="../../d4/d9/ke_8h.html#a139">KiProcessorBlock</a>[i];
00667 
00668             RtlZeroMemory (&amp;CurrentEntry, <span class="keyword">sizeof</span> CurrentEntry);
00669             CurrentEntry.<a class="code" href="../../d5/d8/struct__CONFIGURATION__COMPONENT__DATA.html#o3">ComponentEntry</a>.<a class="code" href="../../d4/d8/struct__CONFIGURATION__COMPONENT.html#o0">Class</a> = <a class="code" href="../../d1/d9/arc_8h.html#a314a180">ProcessorClass</a>;
00670             CurrentEntry.<a class="code" href="../../d5/d8/struct__CONFIGURATION__COMPONENT__DATA.html#o3">ComponentEntry</a>.<a class="code" href="../../d4/d8/struct__CONFIGURATION__COMPONENT.html#o1">Type</a> = <a class="code" href="../../d1/d9/arc_8h.html#a315a188">CentralProcessor</a>;
00671             CurrentEntry.<a class="code" href="../../d5/d8/struct__CONFIGURATION__COMPONENT__DATA.html#o3">ComponentEntry</a>.<a class="code" href="../../d4/d8/struct__CONFIGURATION__COMPONENT.html#o5">Key</a> = i;
00672             CurrentEntry.<a class="code" href="../../d5/d8/struct__CONFIGURATION__COMPONENT__DATA.html#o3">ComponentEntry</a>.<a class="code" href="../../d4/d8/struct__CONFIGURATION__COMPONENT.html#o6">AffinityMask</a> = 1 &lt;&lt; i;
00673 
00674             CurrentEntry.<a class="code" href="../../d5/d8/struct__CONFIGURATION__COMPONENT__DATA.html#o3">ComponentEntry</a>.<a class="code" href="../../d4/d8/struct__CONFIGURATION__COMPONENT.html#o9">Identifier</a> = <a class="code" href="../../d6/d2/rtqkey_8c.html#a3">Buffer</a>;
00675             <span class="keywordflow">if</span> (Prcb-&gt;CpuID == 0) {
00676 
00677                 <span class="comment">//</span>
00678                 <span class="comment">// Old style stepping format</span>
00679                 <span class="comment">//</span>
00680 
00681                 <a class="code" href="../../d6/d9/heappage_8c.html#a68">sprintf</a> (Buffer, CmpID1,
00682                     Prcb-&gt;CpuType,
00683                     (Prcb-&gt;CpuStep &gt;&gt; 8) + <span class="charliteral">'A'</span>,
00684                     Prcb-&gt;CpuStep &amp; 0xff
00685                     );
00686 
00687             } <span class="keywordflow">else</span> {
00688 
00689                 <span class="comment">//</span>
00690                 <span class="comment">// New style stepping format</span>
00691                 <span class="comment">//</span>
00692 
00693                 <a class="code" href="../../d6/d9/heappage_8c.html#a68">sprintf</a> (Buffer, CmpID2,
00694                     Prcb-&gt;CpuType,
00695                     (Prcb-&gt;CpuStep &gt;&gt; 8),
00696                     Prcb-&gt;CpuStep &amp; 0xff
00697                     );
00698             }
00699 
00700             CurrentEntry.<a class="code" href="../../d5/d8/struct__CONFIGURATION__COMPONENT__DATA.html#o3">ComponentEntry</a>.<a class="code" href="../../d4/d8/struct__CONFIGURATION__COMPONENT.html#o8">IdentifierLength</a> =
00701                 <a class="code" href="../../d2/d7/regtest_8c.html#a2">strlen</a> (Buffer) + 1;
00702 
00703             <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d1/d2/cmp_8h.html#a274">CmpInitializeRegistryNode</a>(
00704                 &amp;CurrentEntry,
00705                 ParentHandle,
00706                 &amp;BaseHandle,
00707                 -1,
00708                 (ULONG)-1,
00709                 DeviceIndexTable
00710                 );
00711 
00712             <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(Status)) {
00713                 <span class="keywordflow">return</span>(<a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>);
00714             }
00715 
00716 
00717             <span class="keywordflow">if</span> (<a class="code" href="../../d5/d3/i386_8h.html#a23">KeI386NpxPresent</a>) {
00718                 RtlZeroMemory (&amp;CurrentEntry, <span class="keyword">sizeof</span> CurrentEntry);
00719                 CurrentEntry.<a class="code" href="../../d5/d8/struct__CONFIGURATION__COMPONENT__DATA.html#o3">ComponentEntry</a>.<a class="code" href="../../d4/d8/struct__CONFIGURATION__COMPONENT.html#o0">Class</a> = <a class="code" href="../../d1/d9/arc_8h.html#a314a180">ProcessorClass</a>;
00720                 CurrentEntry.<a class="code" href="../../d5/d8/struct__CONFIGURATION__COMPONENT__DATA.html#o3">ComponentEntry</a>.<a class="code" href="../../d4/d8/struct__CONFIGURATION__COMPONENT.html#o1">Type</a> = <a class="code" href="../../d1/d9/arc_8h.html#a315a189">FloatingPointProcessor</a>;
00721                 CurrentEntry.<a class="code" href="../../d5/d8/struct__CONFIGURATION__COMPONENT__DATA.html#o3">ComponentEntry</a>.<a class="code" href="../../d4/d8/struct__CONFIGURATION__COMPONENT.html#o5">Key</a> = i;
00722                 CurrentEntry.<a class="code" href="../../d5/d8/struct__CONFIGURATION__COMPONENT__DATA.html#o3">ComponentEntry</a>.<a class="code" href="../../d4/d8/struct__CONFIGURATION__COMPONENT.html#o6">AffinityMask</a> = 1 &lt;&lt; i;
00723 
00724                 CurrentEntry.<a class="code" href="../../d5/d8/struct__CONFIGURATION__COMPONENT__DATA.html#o3">ComponentEntry</a>.<a class="code" href="../../d4/d8/struct__CONFIGURATION__COMPONENT.html#o9">Identifier</a> = <a class="code" href="../../d6/d2/rtqkey_8c.html#a3">Buffer</a>;
00725 
00726                 <span class="keywordflow">if</span> (Prcb-&gt;CpuType == 3) {
00727 
00728                     <span class="comment">//</span>
00729                     <span class="comment">// 386 processors have 387's installed, else</span>
00730                     <span class="comment">// use processor identifier as the NPX identifier</span>
00731                     <span class="comment">//</span>
00732 
00733                     strcpy (Buffer, <span class="stringliteral">"80387"</span>);
00734                 }
00735 
00736                 CurrentEntry.<a class="code" href="../../d5/d8/struct__CONFIGURATION__COMPONENT__DATA.html#o3">ComponentEntry</a>.<a class="code" href="../../d4/d8/struct__CONFIGURATION__COMPONENT.html#o8">IdentifierLength</a> =
00737                     <a class="code" href="../../d2/d7/regtest_8c.html#a2">strlen</a> (Buffer) + 1;
00738 
00739                 <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d1/d2/cmp_8h.html#a274">CmpInitializeRegistryNode</a>(
00740                     &amp;CurrentEntry,
00741                     ParentHandle,
00742                     &amp;NpxHandle,
00743                     -1,
00744                     (ULONG)-1,
00745                     DeviceIndexTable
00746                     );
00747 
00748                 <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(Status)) {
00749                     <a class="code" href="../../d5/d0/obclose_8c.html#a1">NtClose</a>(BaseHandle);
00750                     <span class="keywordflow">return</span>(<a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>);
00751                 }
00752 
00753                 <a class="code" href="../../d5/d0/obclose_8c.html#a1">NtClose</a>(NpxHandle);
00754             }
00755 
00756             <span class="comment">//</span>
00757             <span class="comment">// If processor supports Cpu Indentification then</span>
00758             <span class="comment">// go obtain that information for the registry</span>
00759             <span class="comment">//</span>
00760 
00761             VendorID = Prcb-&gt;CpuID ? Prcb-&gt;VendorString : <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00762 
00763             <span class="comment">//</span>
00764             <span class="comment">// Move to target processor and get other related</span>
00765             <span class="comment">// processor information for the registery</span>
00766             <span class="comment">//</span>
00767 
00768             <a class="code" href="../../d9/d1/thredobj_8c.html#a19">KeSetSystemAffinityThread</a>(Prcb-&gt;SetMember);
00769 
00770             <span class="keywordflow">if</span> (!Prcb-&gt;CpuID) {
00771 
00772                 <span class="comment">//</span>
00773                 <span class="comment">// Test for Cyrix processor</span>
00774                 <span class="comment">//</span>
00775 
00776                 <span class="keywordflow">if</span> (<a class="code" href="../../d9/d1/cyrix_8c.html#a24">Ke386CyrixId</a> ()) {
00777                     VendorID = <a class="code" href="../../d9/d1/config_2i386_2init386_8c.html#a28">CmpCyrixID</a>;
00778                 }
00779             } <span class="keywordflow">else</span> {
00780 
00781                 <span class="comment">//</span>
00782                 <span class="comment">// If this processor has extended CPUID functions, get</span>
00783                 <span class="comment">// the ProcessorNameString.  Although the Intel books</span>
00784                 <span class="comment">// say that for CpuID functions &gt; than the valued</span>
00785                 <span class="comment">// returned for function 0 will return undefined results,</span>
00786                 <span class="comment">// we have a guarantee from Intel that that result will</span>
00787                 <span class="comment">// never have the highest order bit set.  This enables</span>
00788                 <span class="comment">// us to determine if the extended functions are supported</span>
00789                 <span class="comment">// by issuing CpuID function 0x80000000.</span>
00790                 <span class="comment">//</span>
00791                 <span class="comment">// Note:  It is not known that this is true for all x86</span>
00792                 <span class="comment">// clones.  If/when we find exceptions we will support</span>
00793                 <span class="comment">// them.  In the mean time we are asking the clone makers</span>
00794                 <span class="comment">// to guarantee this behavior.</span>
00795                 <span class="comment">//</span>
00796 
00797                 <a class="code" href="../../d5/d3/i386_8h.html#a50">CPUID</a>(CPUID_EXTFN_BASE, &amp;MaxExtFn, &amp;Junk, &amp;Junk, &amp;Junk);
00798 
00799                 <span class="keywordflow">if</span> (MaxExtFn &gt;= (<a class="code" href="../../d9/d1/config_2i386_2init386_8c.html#a11">CPUID_EXTFN_PROCESSOR_NAME</a> + 2)) {
00800 
00801                     <span class="comment">//</span>
00802                     <span class="comment">// This processor supports extended CPUID functions</span>
00803                     <span class="comment">// up to and (at least) including processor name string.</span>
00804                     <span class="comment">//</span>
00805                     <span class="comment">// Each CPUID call for the processor name string will</span>
00806                     <span class="comment">// return 16 bytes, 48 bytes in all, zero terminated.</span>
00807                     <span class="comment">//</span>
00808 
00809                     NameString = &amp;ProcessorNameString.u.DWords[0];
00810 
00811                     <span class="keywordflow">for</span> (CpuIdFunction = <a class="code" href="../../d9/d1/config_2i386_2init386_8c.html#a11">CPUID_EXTFN_PROCESSOR_NAME</a>;
00812                          CpuIdFunction &lt;= (<a class="code" href="../../d9/d1/config_2i386_2init386_8c.html#a11">CPUID_EXTFN_PROCESSOR_NAME</a>+2);
00813                          CpuIdFunction++) {
00814 
00815                         <a class="code" href="../../d5/d3/i386_8h.html#a50">CPUID</a>(CpuIdFunction,
00816                               NameString,
00817                               NameString + 1,
00818                               NameString + 2,
00819                               NameString + 3);
00820                         NameString += 4;
00821                     }
00822 
00823                     <span class="comment">//</span>
00824                     <span class="comment">// Enforce 0 byte terminator.</span>
00825                     <span class="comment">//</span>
00826 
00827                     ProcessorNameString.u.Bytes[<a class="code" href="../../d9/d1/config_2i386_2init386_8c.html#a9">CPUID_PROCESSOR_NAME_STRING_SZ</a>-1] = 0;
00828                 }
00829             }
00830 
00831             ThisProcessorL2Size = <a class="code" href="../../d2/d7/alpha_2kdpcpu_8h.html#a1">KeGetPcr</a>()-&gt;SecondLevelCacheSize;
00832 
00833             <span class="comment">//</span>
00834             <span class="comment">// Restore thread's affinity to all processors</span>
00835             <span class="comment">//</span>
00836 
00837             <a class="code" href="../../d9/d1/thredobj_8c.html#a16">KeRevertToUserAffinityThread</a>();
00838 
00839             <span class="keywordflow">if</span> (NameString) {
00840 
00841                 <span class="comment">//</span>
00842                 <span class="comment">// Add Processor Name String to the registery</span>
00843                 <span class="comment">//</span>
00844 
00845                 <a class="code" href="../../d2/d7/string_8c.html#a7">RtlInitUnicodeString</a>(
00846                     &amp;ValueName,
00847                     CmpProcessorNameString
00848                     );
00849 
00850                 <a class="code" href="../../d2/d7/string_8c.html#a6">RtlInitAnsiString</a>(
00851                     &amp;AnsiString,
00852                     ProcessorNameString.u.Bytes
00853                     );
00854 
00855                 <a class="code" href="../../d6/d6/nls_8c.html#a21">RtlAnsiStringToUnicodeString</a>(
00856                     &amp;ValueData,
00857                     &amp;AnsiString,
00858                     TRUE
00859                     );
00860 
00861                 <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d7/d7/ntapi_8c.html#a29">NtSetValueKey</a>(
00862                             BaseHandle,
00863                             &amp;ValueName,
00864                             TITLE_INDEX_VALUE,
00865                             REG_SZ,
00866                             ValueData.Buffer,
00867                             ValueData.Length + <span class="keyword">sizeof</span>( UNICODE_NULL )
00868                             );
00869 
00870                 <a class="code" href="../../d6/d6/nls_8c.html#a34">RtlFreeUnicodeString</a>(&amp;ValueData);
00871             }
00872 
00873             <span class="keywordflow">if</span> (VendorID) {
00874 
00875                 <span class="comment">//</span>
00876                 <span class="comment">// Add Vendor Indentifier to the registery</span>
00877                 <span class="comment">//</span>
00878 
00879                 <a class="code" href="../../d2/d7/string_8c.html#a7">RtlInitUnicodeString</a>(
00880                     &amp;ValueName,
00881                     CmpVendorID
00882                     );
00883 
00884                 <a class="code" href="../../d2/d7/string_8c.html#a6">RtlInitAnsiString</a>(
00885                     &amp;AnsiString,
00886                     VendorID
00887                     );
00888 
00889                 <a class="code" href="../../d6/d6/nls_8c.html#a21">RtlAnsiStringToUnicodeString</a>(
00890                     &amp;ValueData,
00891                     &amp;AnsiString,
00892                     TRUE
00893                     );
00894 
00895                 <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d7/d7/ntapi_8c.html#a29">NtSetValueKey</a>(
00896                             BaseHandle,
00897                             &amp;ValueName,
00898                             TITLE_INDEX_VALUE,
00899                             REG_SZ,
00900                             ValueData.Buffer,
00901                             ValueData.Length + <span class="keyword">sizeof</span>( UNICODE_NULL )
00902                             );
00903 
00904                 <a class="code" href="../../d6/d6/nls_8c.html#a34">RtlFreeUnicodeString</a>(&amp;ValueData);
00905             }
00906 
00907             <span class="keywordflow">if</span> (Prcb-&gt;FeatureBits) {
00908                 <span class="comment">//</span>
00909                 <span class="comment">// Add processor feature bits to the registery</span>
00910                 <span class="comment">//</span>
00911 
00912                 <a class="code" href="../../d2/d7/string_8c.html#a7">RtlInitUnicodeString</a>(
00913                     &amp;ValueName,
00914                     CmpFeatureBits
00915                     );
00916 
00917                 <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d7/d7/ntapi_8c.html#a29">NtSetValueKey</a>(
00918                             BaseHandle,
00919                             &amp;ValueName,
00920                             TITLE_INDEX_VALUE,
00921                             REG_DWORD,
00922                             &amp;Prcb-&gt;FeatureBits,
00923                             sizeof (Prcb-&gt;FeatureBits)
00924                             );
00925             }
00926 
00927             <span class="keywordflow">if</span> (Prcb-&gt;MHz) {
00928                 <span class="comment">//</span>
00929                 <span class="comment">// Add processor MHz to the registery</span>
00930                 <span class="comment">//</span>
00931 
00932                 <a class="code" href="../../d2/d7/string_8c.html#a7">RtlInitUnicodeString</a>(
00933                     &amp;ValueName,
00934                     CmpMHz
00935                     );
00936 
00937                 <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d7/d7/ntapi_8c.html#a29">NtSetValueKey</a>(
00938                             BaseHandle,
00939                             &amp;ValueName,
00940                             TITLE_INDEX_VALUE,
00941                             REG_DWORD,
00942                             &amp;Prcb-&gt;MHz,
00943                             sizeof (Prcb-&gt;MHz)
00944                             );
00945             }
00946 
00947             <span class="keywordflow">if</span> (Prcb-&gt;UpdateSignature.QuadPart) {
00948                 <span class="comment">//</span>
00949                 <span class="comment">// Add processor MHz to the registery</span>
00950                 <span class="comment">//</span>
00951 
00952                 <a class="code" href="../../d2/d7/string_8c.html#a7">RtlInitUnicodeString</a>(
00953                     &amp;ValueName,
00954                     CmpUpdateSignature
00955                     );
00956 
00957                 <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d7/d7/ntapi_8c.html#a29">NtSetValueKey</a>(
00958                             BaseHandle,
00959                             &amp;ValueName,
00960                             TITLE_INDEX_VALUE,
00961                             REG_BINARY,
00962                             &amp;Prcb-&gt;UpdateSignature,
00963                             sizeof (Prcb-&gt;UpdateSignature)
00964                             );
00965             }
00966 
00967             <a class="code" href="../../d5/d0/obclose_8c.html#a1">NtClose</a>(BaseHandle);
00968 
00969             <span class="comment">//</span>
00970             <span class="comment">// Check processor steppings.</span>
00971             <span class="comment">//</span>
00972 
00973             <span class="keywordflow">if</span> (i == 0) {
00974 
00975                 P0L2Size = ThisProcessorL2Size;
00976 
00977             } <span class="keywordflow">else</span> {
00978 
00979                 <span class="comment">//</span>
00980                 <span class="comment">// Check all processors against processor 0. Compare</span>
00981                 <span class="comment">//     CPUID supported,</span>
00982                 <span class="comment">//     Vendor ID String</span>
00983                 <span class="comment">//     Family and Stepping</span>
00984                 <span class="comment">//     L2 cache size.</span>
00985                 <span class="comment">//</span>
00986 
00987                 <span class="keywordflow">if</span> (Prcb-&gt;CpuID) {
00988                     <span class="keywordflow">if</span> (strcmp(Prcb-&gt;VendorString,
00989                                KiProcessorBlock[0]-&gt;VendorString)) {
00990                         <a class="code" href="../../d9/d1/config_2i386_2init386_8c.html#a31">CmProcessorMismatch</a> |= <a class="code" href="../../d9/d1/config_2i386_2init386_8c.html#a12">CM_PROCESSOR_MISMATCH_VENDOR</a>;
00991                     }
00992                     <span class="keywordflow">if</span> (ThisProcessorL2Size != P0L2Size) {
00993                         <a class="code" href="../../d9/d1/config_2i386_2init386_8c.html#a31">CmProcessorMismatch</a> |= <a class="code" href="../../d9/d1/config_2i386_2init386_8c.html#a14">CM_PROCESSOR_MISMATCH_L2</a>;
00994                     }
00995                     <span class="keywordflow">if</span> ((Prcb-&gt;CpuType != <a class="code" href="../../d4/d9/ke_8h.html#a139">KiProcessorBlock</a>[0]-&gt;CpuType) ||
00996                         (Prcb-&gt;CpuStep != <a class="code" href="../../d4/d9/ke_8h.html#a139">KiProcessorBlock</a>[0]-&gt;CpuStep)) {
00997                         <a class="code" href="../../d9/d1/config_2i386_2init386_8c.html#a31">CmProcessorMismatch</a> |= <a class="code" href="../../d9/d1/config_2i386_2init386_8c.html#a13">CM_PROCESSOR_MISMATCH_STEPPING</a>;
00998                     }
00999                 } <span class="keywordflow">else</span> {
01000 
01001                     <span class="comment">//</span>
01002                     <span class="comment">// If this processor doesn't support CPUID, P0</span>
01003                     <span class="comment">// shouldn't support it either.</span>
01004                     <span class="comment">//</span>
01005 
01006                     <span class="keywordflow">if</span> (<a class="code" href="../../d4/d9/ke_8h.html#a139">KiProcessorBlock</a>[0]-&gt;CpuID) {
01007                         <a class="code" href="../../d9/d1/config_2i386_2init386_8c.html#a31">CmProcessorMismatch</a> |= <a class="code" href="../../d9/d1/config_2i386_2init386_8c.html#a13">CM_PROCESSOR_MISMATCH_STEPPING</a>;
01008                     }
01009                 }
01010             }
01011         }
01012 
01013         <span class="keywordflow">if</span> (0 != <a class="code" href="../../d4/d0/cmconfig_8c.html#a10">CmpConfigurationData</a>) {
01014             <a class="code" href="../../d5/d8/ex_8h.html#a224">ExFreePool</a>((PVOID)CmpConfigurationData);
01015         }
01016     }
01017 
01018     <span class="comment">//</span>
01019     <span class="comment">// Next we try to collect System BIOS date and version strings.</span>
01020     <span class="comment">// BUGBUG This code should be moved to ntdetect.com after product 1.</span>
01021     <span class="comment">//</span>
01022 
01023     <span class="comment">//</span>
01024     <span class="comment">// Open a physical memory section to map in physical memory.</span>
01025     <span class="comment">//</span>
01026 
01027     <a class="code" href="../../d2/d7/string_8c.html#a7">RtlInitUnicodeString</a>(
01028         &amp;SectionName,
01029         L<span class="stringliteral">"\\Device\\PhysicalMemory"</span>
01030         );
01031 
01032     InitializeObjectAttributes(
01033         &amp;ObjectAttributes,
01034         &amp;SectionName,
01035         OBJ_CASE_INSENSITIVE,
01036         (HANDLE) NULL,
01037         (PSECURITY_DESCRIPTOR) NULL
01038         );
01039 
01040     <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = ZwOpenSection(
01041         &amp;SectionHandle,
01042         SECTION_ALL_ACCESS,
01043         &amp;ObjectAttributes
01044         );
01045 
01046     <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(Status)) {
01047 
01048         <span class="comment">//</span>
01049         <span class="comment">// If fail, forget the bios data and version</span>
01050         <span class="comment">//</span>
01051 
01052         <span class="keywordflow">goto</span> AllDone;
01053     }
01054 
01055     <span class="comment">//</span>
01056     <span class="comment">// Examine the first page of physical memory for int 10 segment</span>
01057     <span class="comment">// address.</span>
01058     <span class="comment">//</span>
01059 
01060     BaseAddress = 0;
01061     ViewSize = 0x1000;
01062     ViewBase.LowPart = 0;
01063     ViewBase.HighPart = 0;
01064 
01065     <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> =ZwMapViewOfSection(
01066         SectionHandle,
01067         NtCurrentProcess(),
01068         &amp;BaseAddress,
01069         0,
01070         ViewSize,
01071         &amp;ViewBase,
01072         &amp;ViewSize,
01073         ViewUnmap,
01074         MEM_DOS_LIM,
01075         PAGE_READWRITE
01076         );
01077 
01078     <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(Status)) {
01079         VideoBiosStart = <a class="code" href="../../d9/d1/config_2i386_2init386_8c.html#a6">VIDEO_BIOS_START</a>;
01080     } <span class="keywordflow">else</span> {
01081         VideoBiosStart = (*((PULONG)BaseAddress + <a class="code" href="../../d9/d1/config_2i386_2init386_8c.html#a5">INT10_VECTOR</a>) &amp; 0xFFFF0000) &gt;&gt; 12;
01082         VideoBiosStart += (*((PULONG)BaseAddress + <a class="code" href="../../d9/d1/config_2i386_2init386_8c.html#a5">INT10_VECTOR</a>) &amp; 0x0000FFFF);
01083         VideoBiosStart &amp;= 0xffff8000;
01084         <span class="keywordflow">if</span> (VideoBiosStart &lt; <a class="code" href="../../d9/d1/config_2i386_2init386_8c.html#a6">VIDEO_BIOS_START</a>) {
01085             VideoBiosStart = <a class="code" href="../../d9/d1/config_2i386_2init386_8c.html#a6">VIDEO_BIOS_START</a>;
01086         }
01087         <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = ZwUnmapViewOfSection(
01088             NtCurrentProcess(),
01089             BaseAddress
01090             );
01091     }
01092 
01093     VersionStrings = <a class="code" href="../../d5/d5/cc_8h.html#a10">ExAllocatePool</a>(PagedPool, VERSION_DATA_LENGTH);
01094     BaseAddress = 0;
01095     ViewSize = <a class="code" href="../../d9/d1/config_2i386_2init386_8c.html#a4">SYSTEM_BIOS_LENGTH</a>;
01096     ViewBase.LowPart = <a class="code" href="../../d9/d1/config_2i386_2init386_8c.html#a3">SYSTEM_BIOS_START</a>;
01097     ViewBase.HighPart = 0;
01098 
01099     <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> =ZwMapViewOfSection(
01100         SectionHandle,
01101         NtCurrentProcess(),
01102         &amp;BaseAddress,
01103         0,
01104         ViewSize,
01105         &amp;ViewBase,
01106         &amp;ViewSize,
01107         ViewUnmap,
01108         MEM_DOS_LIM,
01109         PAGE_READWRITE
01110         );
01111 
01112     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(Status)) {
01113         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d2/config_2ia64_2initia64_8c.html#a29">CmpGetBiosDate</a>(BaseAddress, SYSTEM_BIOS_LENGTH, Buffer, TRUE)) {
01114 
01115             <span class="comment">//</span>
01116             <span class="comment">// Convert ascii date string to unicode string and</span>
01117             <span class="comment">// store it in registry.</span>
01118             <span class="comment">//</span>
01119 
01120             <a class="code" href="../../d2/d7/string_8c.html#a7">RtlInitUnicodeString</a>(
01121                 &amp;ValueName,
01122                 L<span class="stringliteral">"SystemBiosDate"</span>
01123                 );
01124 
01125             <a class="code" href="../../d2/d7/string_8c.html#a6">RtlInitAnsiString</a>(
01126                 &amp;AnsiString,
01127                 Buffer
01128                 );
01129 
01130             <a class="code" href="../../d6/d6/nls_8c.html#a21">RtlAnsiStringToUnicodeString</a>(
01131                 &amp;ValueData,
01132                 &amp;AnsiString,
01133                 TRUE
01134                 );
01135 
01136             <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d7/d7/ntapi_8c.html#a29">NtSetValueKey</a>(
01137                         ParentHandle,
01138                         &amp;ValueName,
01139                         TITLE_INDEX_VALUE,
01140                         REG_SZ,
01141                         ValueData.Buffer,
01142                         ValueData.Length + <span class="keyword">sizeof</span>( UNICODE_NULL )
01143                         );
01144 
01145             <a class="code" href="../../d6/d6/nls_8c.html#a34">RtlFreeUnicodeString</a>(&amp;ValueData);
01146 
01147 <span class="preprocessor">#ifdef _WANT_MACHINE_IDENTIFICATION</span>
01148 <span class="preprocessor"></span>
01149             memcpy(Buffer, (PCHAR)BaseAddress + 0xFFF5, 8);
01150             <a class="code" href="../../d6/d2/rtqkey_8c.html#a3">Buffer</a>[8] = <span class="charliteral">'\0'</span>;
01151 
01152             <a class="code" href="../../d2/d7/string_8c.html#a6">RtlInitAnsiString</a>(  
01153                 &amp;AnsiString,
01154                 Buffer
01155                 );
01156 
01157             <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d6/d6/nls_8c.html#a21">RtlAnsiStringToUnicodeString</a>(   
01158                         &amp;ValueData,
01159                         &amp;AnsiString,
01160                         TRUE
01161                         );
01162                                                 
01163             <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(Status)) {
01164             
01165                 <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d7/d7/ntapi_8c.html#a29">NtSetValueKey</a>( 
01166                             BiosInfo,
01167                             &amp;ValueName,
01168                             TITLE_INDEX_VALUE,
01169                             REG_SZ,
01170                             ValueData.Buffer,
01171                             ValueData.Length + <span class="keyword">sizeof</span>( UNICODE_NULL )
01172                             );
01173                                     
01174                 <a class="code" href="../../d6/d6/nls_8c.html#a34">RtlFreeUnicodeString</a>(&amp;ValueData);
01175             }
01176             
01177             <a class="code" href="../../d5/d0/obclose_8c.html#a1">NtClose</a> (BiosInfo);
01178             
01179 <span class="preprocessor">#endif</span>
01180 <span class="preprocessor"></span>            
01181         }
01182 
01183         <span class="keywordflow">if</span> (VersionStrings &amp;&amp; <a class="code" href="../../d5/d2/config_2ia64_2initia64_8c.html#a28">CmpGetBiosVersion</a>(BaseAddress, SYSTEM_BIOS_LENGTH, Buffer)) {
01184             VersionPointer = VersionStrings;
01185             <span class="keywordflow">do</span> {
01186 
01187                 <span class="comment">//</span>
01188                 <span class="comment">// Try to detect ALL the possible BIOS version strings.</span>
01189                 <span class="comment">// Convert them to unicode strings and copy them to our</span>
01190                 <span class="comment">// VersionStrings buffer.</span>
01191                 <span class="comment">//</span>
01192 
01193                 <a class="code" href="../../d2/d7/string_8c.html#a6">RtlInitAnsiString</a>(
01194                     &amp;AnsiString,
01195                     Buffer
01196                     );
01197 
01198                 <a class="code" href="../../d6/d6/nls_8c.html#a21">RtlAnsiStringToUnicodeString</a>(
01199                     &amp;ValueData,
01200                     &amp;AnsiString,
01201                     TRUE
01202                     );
01203 
01204                 Length = ValueData.Length + <span class="keyword">sizeof</span>(UNICODE_NULL);
01205                 RtlMoveMemory(VersionPointer,
01206                               ValueData.Buffer,
01207                               Length
01208                               );
01209                 VersionsLength += Length;
01210                 <a class="code" href="../../d6/d6/nls_8c.html#a34">RtlFreeUnicodeString</a>(&amp;ValueData);
01211                 <span class="keywordflow">if</span> (VersionsLength + (<a class="code" href="../../d9/d1/config_2i386_2init386_8c.html#a2">MAXIMUM_BIOS_VERSION_LENGTH</a> +
01212                     <span class="keyword">sizeof</span>(UNICODE_NULL)) * 2 &gt; <a class="code" href="../../d6/d7/halmips_8h.html#a446">PAGE_SIZE</a>) {
01213                     <span class="keywordflow">break</span>;
01214                 }
01215                 VersionPointer += Length;
01216             } <span class="keywordflow">while</span> (<a class="code" href="../../d5/d2/config_2ia64_2initia64_8c.html#a28">CmpGetBiosVersion</a>(NULL, 0, Buffer));
01217 
01218             <span class="keywordflow">if</span> (VersionsLength != 0) {
01219 
01220                 <span class="comment">//</span>
01221                 <span class="comment">// Append a UNICODE_NULL to the end of VersionStrings</span>
01222                 <span class="comment">//</span>
01223 
01224                 *(PWSTR)VersionPointer = UNICODE_NULL;
01225                 VersionsLength += <span class="keyword">sizeof</span>(UNICODE_NULL);
01226 
01227                 <span class="comment">//</span>
01228                 <span class="comment">// If any version string is found, we set up a ValueName and</span>
01229                 <span class="comment">// initialize its value to the string(s) we found.</span>
01230                 <span class="comment">//</span>
01231 
01232                 <a class="code" href="../../d2/d7/string_8c.html#a7">RtlInitUnicodeString</a>(
01233                     &amp;ValueName,
01234                     L<span class="stringliteral">"SystemBiosVersion"</span>
01235                     );
01236 
01237                 <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d7/d7/ntapi_8c.html#a29">NtSetValueKey</a>(
01238                             ParentHandle,
01239                             &amp;ValueName,
01240                             TITLE_INDEX_VALUE,
01241                             REG_MULTI_SZ,
01242                             VersionStrings,
01243                             VersionsLength
01244                             );
01245             }
01246         }
01247         ZwUnmapViewOfSection(NtCurrentProcess(), BaseAddress);
01248     }
01249 
01250     <span class="comment">//</span>
01251     <span class="comment">// Next we try to collect Video BIOS date and version strings.</span>
01252     <span class="comment">//</span>
01253 
01254     BaseAddress = 0;
01255     ViewSize = <a class="code" href="../../d9/d1/config_2i386_2init386_8c.html#a7">VIDEO_BIOS_LENGTH</a>;
01256     ViewBase.LowPart = VideoBiosStart;
01257     ViewBase.HighPart = 0;
01258 
01259     <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> =ZwMapViewOfSection(
01260         SectionHandle,
01261         NtCurrentProcess(),
01262         &amp;BaseAddress,
01263         0,
01264         ViewSize,
01265         &amp;ViewBase,
01266         &amp;ViewSize,
01267         ViewUnmap,
01268         MEM_DOS_LIM,
01269         PAGE_READWRITE
01270         );
01271 
01272     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(Status)) {
01273         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d2/config_2ia64_2initia64_8c.html#a29">CmpGetBiosDate</a>(BaseAddress, VIDEO_BIOS_LENGTH, Buffer, FALSE)) {
01274 
01275             <a class="code" href="../../d2/d7/string_8c.html#a7">RtlInitUnicodeString</a>(
01276                 &amp;ValueName,
01277                 L<span class="stringliteral">"VideoBiosDate"</span>
01278                 );
01279 
01280             <a class="code" href="../../d2/d7/string_8c.html#a6">RtlInitAnsiString</a>(
01281                 &amp;AnsiString,
01282                 Buffer
01283                 );
01284 
01285             <a class="code" href="../../d6/d6/nls_8c.html#a21">RtlAnsiStringToUnicodeString</a>(
01286                 &amp;ValueData,
01287                 &amp;AnsiString,
01288                 TRUE
01289                 );
01290 
01291             <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d7/d7/ntapi_8c.html#a29">NtSetValueKey</a>(
01292                         ParentHandle,
01293                         &amp;ValueName,
01294                         TITLE_INDEX_VALUE,
01295                         REG_SZ,
01296                         ValueData.Buffer,
01297                         ValueData.Length + <span class="keyword">sizeof</span>( UNICODE_NULL )
01298                         );
01299 
01300             <a class="code" href="../../d6/d6/nls_8c.html#a34">RtlFreeUnicodeString</a>(&amp;ValueData);
01301         }
01302 
01303         <span class="keywordflow">if</span> (VersionStrings &amp;&amp; <a class="code" href="../../d5/d2/config_2ia64_2initia64_8c.html#a28">CmpGetBiosVersion</a>(BaseAddress, VIDEO_BIOS_LENGTH, Buffer)) {
01304             VersionPointer = VersionStrings;
01305             <span class="keywordflow">do</span> {
01306 
01307                 <span class="comment">//</span>
01308                 <span class="comment">// Try to detect ALL the possible BIOS version strings.</span>
01309                 <span class="comment">// Convert them to unicode strings and copy them to our</span>
01310                 <span class="comment">// VersionStrings buffer.</span>
01311                 <span class="comment">//</span>
01312 
01313                 <a class="code" href="../../d2/d7/string_8c.html#a6">RtlInitAnsiString</a>(
01314                     &amp;AnsiString,
01315                     Buffer
01316                     );
01317 
01318                 <a class="code" href="../../d6/d6/nls_8c.html#a21">RtlAnsiStringToUnicodeString</a>(
01319                     &amp;ValueData,
01320                     &amp;AnsiString,
01321                     TRUE
01322                     );
01323 
01324                 Length = ValueData.Length + <span class="keyword">sizeof</span>(UNICODE_NULL);
01325                 RtlMoveMemory(VersionPointer,
01326                               ValueData.Buffer,
01327                               Length
01328                               );
01329                 VersionsLength += Length;
01330                 <a class="code" href="../../d6/d6/nls_8c.html#a34">RtlFreeUnicodeString</a>(&amp;ValueData);
01331                 <span class="keywordflow">if</span> (VersionsLength + (<a class="code" href="../../d9/d1/config_2i386_2init386_8c.html#a2">MAXIMUM_BIOS_VERSION_LENGTH</a> +
01332                     <span class="keyword">sizeof</span>(UNICODE_NULL)) * 2 &gt; <a class="code" href="../../d6/d7/halmips_8h.html#a446">PAGE_SIZE</a>) {
01333                     <span class="keywordflow">break</span>;
01334                 }
01335                 VersionPointer += Length;
01336             } <span class="keywordflow">while</span> (<a class="code" href="../../d5/d2/config_2ia64_2initia64_8c.html#a28">CmpGetBiosVersion</a>(NULL, 0, Buffer));
01337 
01338             <span class="keywordflow">if</span> (VersionsLength != 0) {
01339 
01340                 <span class="comment">//</span>
01341                 <span class="comment">// Append a UNICODE_NULL to the end of VersionStrings</span>
01342                 <span class="comment">//</span>
01343 
01344                 *(PWSTR)VersionPointer = UNICODE_NULL;
01345                 VersionsLength += <span class="keyword">sizeof</span>(UNICODE_NULL);
01346 
01347                 <a class="code" href="../../d2/d7/string_8c.html#a7">RtlInitUnicodeString</a>(
01348                     &amp;ValueName,
01349                     L<span class="stringliteral">"VideoBiosVersion"</span>
01350                     );
01351 
01352                 <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d7/d7/ntapi_8c.html#a29">NtSetValueKey</a>(
01353                             ParentHandle,
01354                             &amp;ValueName,
01355                             TITLE_INDEX_VALUE,
01356                             REG_MULTI_SZ,
01357                             VersionStrings,
01358                             VersionsLength
01359                             );
01360             }
01361         }
01362         ZwUnmapViewOfSection(NtCurrentProcess(), BaseAddress);
01363     }
01364     ZwClose(SectionHandle);
01365     <span class="keywordflow">if</span> (VersionStrings) {
01366         <a class="code" href="../../d5/d8/ex_8h.html#a224">ExFreePool</a>((PVOID)VersionStrings);
01367     }
01368 
01369 AllDone:
01370 
01371     <a class="code" href="../../d5/d0/obclose_8c.html#a1">NtClose</a> (ParentHandle);
01372 
01373     <span class="comment">//</span>
01374     <span class="comment">// Add any other x86 specific code here...</span>
01375     <span class="comment">//</span>
01376 
01377 <span class="preprocessor">#ifdef _WANT_MACHINE_IDENTIFICATION</span>
01378 <span class="preprocessor"></span>
01379     <span class="comment">//</span>
01380     <span class="comment">// Do machine identification.</span>
01381     <span class="comment">//</span>
01382     
01383     CmpPerformMachineIdentification(LoaderBlock);
01384     
01385 <span class="preprocessor">#endif    </span>
01386 <span class="preprocessor"></span>
01387     <span class="keywordflow">return</span> STATUS_SUCCESS;
01388 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a36" doxytag="config/i386/init386.c::Ke386CyrixId" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ULONG Ke386CyrixId           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">VOID&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d1/cyrix_8c-source.html#l00091">91</a> of file <a class="el" href="../../d0/d1/cyrix_8c-source.html">cyrix.c</a>.
<p>
References <a class="el" href="../../d4/d9/user32_8def-source.html#l00799">c</a>, <a class="el" href="../../d0/d1/cyrix_8c-source.html#l00039">CCR0</a>, <a class="el" href="../../d0/d1/cyrix_8c-source.html#l00042">CCR3</a>, <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00059">CmpCyrixID</a>, <a class="el" href="../../d0/d1/cyrix_8c-source.html#l00044">DIR0</a>, <a class="el" href="../../d3/d6/alpha_2kdpcpu_8h-source.html#l00069">KeGetCurrentPrcb</a>, <a class="el" href="../../d0/d1/cyrix_8c-source.html#l00190">ReadCyrixRegister()</a>, and <a class="el" href="../../d0/d1/cyrix_8c-source.html#l00230">WriteCyrixRegister()</a>.
<p>
<pre class="fragment"><div>00096                    :
00097 
00098     Detects and returns <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> Cyrix <a class="code" href="../../d4/d9/smbtrsup_8c.html#a7">ID</a> of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> processor.
00099     This function <a class="code" href="../../d3/d0/imm32_8def.html#a1">only</a> detects Cyrix processors which have internal
00100     cache support.
00101 
00102 Arguments:
00103 
00104     Configure   - If <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>, causes <span class="keyword">this</span> function to alter
00105                   <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> Cyrix CCR registers <span class="keywordflow">for</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> optimal NT
00106                   performance.
00107 
00108                   If <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>, <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> processors configuration <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a>
00109                   not altered.
00110 
00111 
00112 Return Value:
00113 
00114     Cyrix <a class="code" href="../../d4/d9/smbtrsup_8c.html#a7">ID</a> of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> processor
00115     0 <span class="keywordflow">if</span> not a Cyrix processor
00116 
00117 --*/
00118 
00119 {
00120     ULONG       CyrixID;
00121     UCHAR       r3, <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a35">c</a>;
00122     UCHAR       flags;
00123     PKPRCB      Prcb;
00124 
00125     CyrixID = 0;
00126 
00127     Prcb = <a class="code" href="../../d2/d7/alpha_2kdpcpu_8h.html#a2">KeGetCurrentPrcb</a>();
00128     <span class="keywordflow">if</span> (Prcb-&gt;CpuID  &amp;&amp;  strcmp (Prcb-&gt;VendorString, CmpCyrixID)) {
00129 
00130         <span class="comment">//</span>
00131         <span class="comment">// Not a Cyrix processor</span>
00132         <span class="comment">//</span>
00133 
00134         <span class="keywordflow">return</span> 0;
00135     }
00136 
00137     <span class="comment">//</span>
00138     <span class="comment">// Test Div instruction to see if the flags</span>
00139     <span class="comment">// do not get altered</span>
00140     <span class="comment">//</span>
00141 
00142     _asm {
00143         xor     eax, eax
00144         sahf                    ; flags = ah
00145 
00146         lahf                    ; ah = flags
00147         mov     flags, ah       ; save flags
00148 
00149         mov     eax, 5
00150         mov     ecx, 2
00151         div     cl              ; 5 / 2 = ?
00152 
00153         lahf
00154         sub     flags, ah       ; flags = orig_flags - new_flags
00155     }
00156 
00157     <span class="keywordflow">if</span> (flags == 0) {
00158 
00159         <span class="comment">//</span>
00160         <span class="comment">// See if the Cyrix CCR3 register bit 0x80 can be editted.</span>
00161         <span class="comment">//</span>
00162 
00163         r3 = <a class="code" href="../../d9/d1/cyrix_8c.html#a25">ReadCyrixRegister</a>(CCR3);       <span class="comment">// Read CCR3</span>
00164         <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a35">c</a>  = r3 ^ 0x80;                     <span class="comment">// flip bit 80</span>
00165         <a class="code" href="../../d9/d1/cyrix_8c.html#a26">WriteCyrixRegister</a>(CCR3, c);        <span class="comment">// Write CCR3</span>
00166         <a class="code" href="../../d9/d1/cyrix_8c.html#a25">ReadCyrixRegister</a>(CCR0);            <span class="comment">// select new register</span>
00167         <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a35">c</a> = <a class="code" href="../../d9/d1/cyrix_8c.html#a25">ReadCyrixRegister</a>(CCR3);        <span class="comment">// Read new CCR3 value</span>
00168 
00169         <span class="keywordflow">if</span> (<a class="code" href="../../d9/d1/cyrix_8c.html#a25">ReadCyrixRegister</a>(CCR3) != r3) {
00170 
00171             <span class="comment">//</span>
00172             <span class="comment">// Read the Cyrix ID type register</span>
00173             <span class="comment">//</span>
00174 
00175             CyrixID = <a class="code" href="../../d9/d1/cyrix_8c.html#a25">ReadCyrixRegister</a>(DIR0) + 1;
00176         }
00177 
00178         <a class="code" href="../../d9/d1/cyrix_8c.html#a26">WriteCyrixRegister</a>(CCR3, r3);       <span class="comment">// restore original CCR3 value</span>
00179     }
00180 
00181     <span class="keywordflow">if</span> (CyrixID &gt; 0x7f) {
00182         <span class="comment">// invalid setting</span>
00183         CyrixID = 0;
00184     }
00185 
00186     <span class="keywordflow">return</span> CyrixID;
00187 }

</div></pre>    </td>
  </tr>
</table>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="a17" doxytag="config/i386/init386.c::BiosBegin" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> PCHAR <a class="el" href="../../d5/d2/config_2ia64_2initia64_8c.html#a13">BiosBegin</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00048">48</a> of file <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html">config/i386/init386.c</a>.
<p>
Referenced by <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00342">CmpGetBiosVersion()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a30" doxytag="config/i386/init386.c::CmpAmdID" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> UCHAR <a class="el" href="../../d6/d9/kernlini_8c.html#a20">CmpAmdID</a>[]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00061">61</a> of file <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html">config/i386/init386.c</a>.
<p>
Referenced by <a class="el" href="../../d6/d1/config_2ia64_2initia64_8c-source.html#l00364">CmpInitializeMachineDependentConfiguration()</a>, and <a class="el" href="../../d7/d8/kernlini_8c-source.html#l01110">KiGetCpuVendor()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a32" doxytag="config/i386/init386.c::CmpConfigurationAreaSize" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ULONG <a class="el" href="../../d5/d2/config_2ia64_2initia64_8c.html#a26">CmpConfigurationAreaSize</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00095">95</a> of file <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html">config/i386/init386.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a33" doxytag="config/i386/init386.c::CmpConfigurationData" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> PCM_FULL_RESOURCE_DESCRIPTOR <a class="el" href="../../d5/d2/config_2ia64_2initia64_8c.html#a27">CmpConfigurationData</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00096">96</a> of file <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html">config/i386/init386.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a28" doxytag="config/i386/init386.c::CmpCyrixID" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> UCHAR <a class="el" href="../../d6/d9/kernlini_8c.html#a18">CmpCyrixID</a>[]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00059">59</a> of file <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html">config/i386/init386.c</a>.
<p>
Referenced by <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00465">CmpInitializeMachineDependentConfiguration()</a>, <a class="el" href="../../d0/d1/cyrix_8c-source.html#l00091">Ke386CyrixId()</a>, and <a class="el" href="../../d7/d8/kernlini_8c-source.html#l01110">KiGetCpuVendor()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a24" doxytag="config/i386/init386.c::CmpFeatureBits" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> WCHAR <a class="el" href="../../d5/d2/config_2ia64_2initia64_8c.html#a20">CmpFeatureBits</a>[]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00055">55</a> of file <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html">config/i386/init386.c</a>.
<p>
Referenced by <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00465">CmpInitializeMachineDependentConfiguration()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a27" doxytag="config/i386/init386.c::CmPhysicalAddressExtension" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> WCHAR <a class="el" href="../../d2/d2/i386_2initdat_8c.html#a12">CmPhysicalAddressExtension</a>[]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00058">58</a> of file <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html">config/i386/init386.c</a>.
<p>
Referenced by <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00465">CmpInitializeMachineDependentConfiguration()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a20" doxytag="config/i386/init386.c::CmpID1" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> UCHAR <a class="el" href="../../d5/d2/config_2ia64_2initia64_8c.html#a16">CmpID1</a>[]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00051">51</a> of file <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html">config/i386/init386.c</a>.
<p>
Referenced by <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00465">CmpInitializeMachineDependentConfiguration()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a21" doxytag="config/i386/init386.c::CmpID2" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> UCHAR <a class="el" href="../../d5/d2/config_2ia64_2initia64_8c.html#a17">CmpID2</a>[]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00052">52</a> of file <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html">config/i386/init386.c</a>.
<p>
Referenced by <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00465">CmpInitializeMachineDependentConfiguration()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a29" doxytag="config/i386/init386.c::CmpIntelID" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> UCHAR <a class="el" href="../../d6/d9/kernlini_8c.html#a19">CmpIntelID</a>[]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00060">60</a> of file <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html">config/i386/init386.c</a>.
<p>
Referenced by <a class="el" href="../../d7/d8/kernlini_8c-source.html#l01110">KiGetCpuVendor()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a25" doxytag="config/i386/init386.c::CmpMHz" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> WCHAR <a class="el" href="../../d5/d2/config_2ia64_2initia64_8c.html#a21">CmpMHz</a>[]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00056">56</a> of file <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html">config/i386/init386.c</a>.
<p>
Referenced by <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00465">CmpInitializeMachineDependentConfiguration()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a23" doxytag="config/i386/init386.c::CmpProcessorNameString" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> WCHAR <a class="el" href="../../d5/d2/config_2ia64_2initia64_8c.html#a19">CmpProcessorNameString</a>[]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00054">54</a> of file <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html">config/i386/init386.c</a>.
<p>
Referenced by <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00465">CmpInitializeMachineDependentConfiguration()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a31" doxytag="config/i386/init386.c::CmProcessorMismatch" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> UCHAR <a class="el" href="../../d9/d1/config_2i386_2init386_8c.html#a31">CmProcessorMismatch</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00088">88</a> of file <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html">config/i386/init386.c</a>.
<p>
Referenced by <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00465">CmpInitializeMachineDependentConfiguration()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a26" doxytag="config/i386/init386.c::CmpUpdateSignature" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> WCHAR <a class="el" href="../../d5/d2/config_2ia64_2initia64_8c.html#a22">CmpUpdateSignature</a>[]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00057">57</a> of file <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html">config/i386/init386.c</a>.
<p>
Referenced by <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00465">CmpInitializeMachineDependentConfiguration()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a22" doxytag="config/i386/init386.c::CmpVendorID" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> WCHAR <a class="el" href="../../d5/d2/config_2ia64_2initia64_8c.html#a18">CmpVendorID</a>[]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00053">53</a> of file <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html">config/i386/init386.c</a>.
<p>
Referenced by <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00465">CmpInitializeMachineDependentConfiguration()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a19" doxytag="config/i386/init386.c::End" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> PCHAR <a class="el" href="../../d5/d2/config_2ia64_2initia64_8c.html#a15">End</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00050">50</a> of file <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html">config/i386/init386.c</a>.
<p>
Referenced by <a class="el" href="../../d9/d7/arbiter_8c-source.html#l03028">ArbAddOrdering()</a>, <a class="el" href="../../d9/d7/arbiter_8c-source.html#l03120">ArbPruneOrdering()</a>, <a class="el" href="../../d2/d5/low_8c-source.html#l00980">CalculateCHSVals()</a>, <a class="el" href="../../d1/d9/cmboot_8c-source.html#l00837">CmpDoSort()</a>, <a class="el" href="../../d6/d1/config_2ia64_2initia64_8c-source.html#l00108">CmpGetBiosDate()</a>, <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00342">CmpGetBiosVersion()</a>, <a class="el" href="../../d8/d6/ntapi_8c-source.html#l03603">CmpNameFromAttributes()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l03324">FdCrosses1024Cylinder()</a>, <a class="el" href="../../d8/d0/hivemap_8c-source.html#l00853">HvpAllocateMap()</a>, <a class="el" href="../../d1/d1/hivesync_8c-source.html#l01233">HvpFindNextDirtyBlock()</a>, <a class="el" href="../../d8/d0/hivemap_8c-source.html#l00807">HvpFreeMap()</a>, <a class="el" href="../../d7/d0/hiveload_8c-source.html#l00847">HvpRecoverData()</a>, <a class="el" href="../../d1/d1/hivesync_8c-source.html#l01584">HvRefreshHive()</a>, <a class="el" href="../../d2/d4/alpha_2kdcpuapi_8c-source.html#l00036">KdpSetLoadState()</a>, <a class="el" href="../../d2/d4/alpha_2kdcpuapi_8c-source.html#l00098">KdpSetStateChange()</a>, <a class="el" href="../../d4/d1/timerobj_8c-source.html#l00467">KeCheckForTimer()</a>, <a class="el" href="../../d3/d2/ldrsnap_8c-source.html#l03970">LdrpDphInitializeTargetDll()</a>, <a class="el" href="../../d1/d8/protect_8c-source.html#l02244">MiCheckSecuredVad()</a>, <a class="el" href="../../d0/d5/verifier_8c-source.html#l03121">MiInitializeDriverVerifierList()</a>, <a class="el" href="../../d1/d2/mnkey_8c-source.html#l00124">MNFindItemInColumn()</a>, <a class="el" href="../../d6/d3/rxact_8c-source.html#l00900">RtlAddAttributeActionToRXact()</a>, <a class="el" href="../../d3/d4/range_8c-source.html#l00340">RtlAddRange()</a>, <a class="el" href="../../d3/d4/range_8c-source.html#l01071">RtlDeleteRange()</a>, <a class="el" href="../../d5/d0/rtl_2bitmap_8c-source.html#l02779">RtlFindLastBackwardRunClear()</a>, <a class="el" href="../../d5/d0/rtl_2bitmap_8c-source.html#l02635">RtlFindNextForwardRunClear()</a>, <a class="el" href="../../d3/d4/range_8c-source.html#l01744">RtlIsRangeAvailable()</a>, <a class="el" href="../../d3/d4/range_8c-source.html#l00771">RtlpCreateRangeListEntry()</a>, <a class="el" href="../../d3/d4/range_8c-source.html#l01839">RtlpIsRangeAvailable()</a>, and <a class="el" href="../../d0/d6/kernel_2server_8c-source.html#l03035">UserGlobalAtomTableCallout()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a16" doxytag="config/i386/init386.c::SearchStrings" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> PCHAR <a class="el" href="../../d5/d2/config_2ia64_2initia64_8c.html#a12">SearchStrings</a>[]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00047">47</a> of file <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html">config/i386/init386.c</a>.
<p>
Referenced by <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00342">CmpGetBiosVersion()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a18" doxytag="config/i386/init386.c::Start" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> PCHAR <a class="el" href="../../d5/d2/config_2ia64_2initia64_8c.html#a14">Start</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00049">49</a> of file <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html">config/i386/init386.c</a>.
<p>
Referenced by <a class="el" href="../../d9/d7/arbiter_8c-source.html#l03028">ArbAddOrdering()</a>, <a class="el" href="../../d9/d7/arbiter_8c-source.html#l03120">ArbPruneOrdering()</a>, <a class="el" href="../../d2/d5/low_8c-source.html#l00980">CalculateCHSVals()</a>, <a class="el" href="../../d6/d1/config_2ia64_2initia64_8c-source.html#l00108">CmpGetBiosDate()</a>, <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00342">CmpGetBiosVersion()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l03324">FdCrosses1024Cylinder()</a>, <a class="el" href="../../d3/d0/hivefree_8c-source.html#l00160">HvFreeHivePartial()</a>, <a class="el" href="../../d1/d1/hivesync_8c-source.html#l00401">HvMarkClean()</a>, <a class="el" href="../../d1/d1/hivesync_8c-source.html#l00270">HvMarkDirty()</a>, <a class="el" href="../../d8/d0/hivemap_8c-source.html#l00853">HvpAllocateMap()</a>, <a class="el" href="../../d1/d1/hivesync_8c-source.html#l01233">HvpFindNextDirtyBlock()</a>, <a class="el" href="../../d8/d0/hivemap_8c-source.html#l00807">HvpFreeMap()</a>, <a class="el" href="../../d7/d0/hiveload_8c-source.html#l00847">HvpRecoverData()</a>, <a class="el" href="../../d1/d1/hivesync_8c-source.html#l01584">HvRefreshHive()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l01607">InitializeFreeSpace()</a>, <a class="el" href="../../d9/d8/pnpbusno_8c-source.html#l00246">IopBusNumberPackResource()</a>, <a class="el" href="../../d9/d8/pnpbusno_8c-source.html#l00294">IopBusNumberUnpackResource()</a>, <a class="el" href="../../d5/d9/pnpdma_8c-source.html#l00233">IopDmaPackResource()</a>, <a class="el" href="../../d5/d9/pnpdma_8c-source.html#l00281">IopDmaUnpackResource()</a>, <a class="el" href="../../d4/d0/pnpmemio_8c-source.html#l00630">IopGenericPackResource()</a>, <a class="el" href="../../d4/d0/pnpmemio_8c-source.html#l00682">IopGenericUnpackResource()</a>, <a class="el" href="../../d2/d0/pnpirq_8c-source.html#l00338">IopIrqPackResource()</a>, <a class="el" href="../../d2/d0/pnpirq_8c-source.html#l00387">IopIrqUnpackResource()</a>, <a class="el" href="../../d4/d1/timerobj_8c-source.html#l00467">KeCheckForTimer()</a>, <a class="el" href="../../d0/d5/verifier_8c-source.html#l03121">MiInitializeDriverVerifierList()</a>, <a class="el" href="../../d4/d5/allocvm_8c-source.html#l00075">NtAllocateVirtualMemory()</a>, <a class="el" href="../../d4/d0/i386_2psldt_8c-source.html#l00108">PspQueryLdtInformation()</a>, <a class="el" href="../../d3/d4/range_8c-source.html#l00340">RtlAddRange()</a>, <a class="el" href="../../d3/d4/range_8c-source.html#l01071">RtlDeleteRange()</a>, <a class="el" href="../../d5/d0/rtl_2bitmap_8c-source.html#l02779">RtlFindLastBackwardRunClear()</a>, <a class="el" href="../../d5/d0/rtl_2bitmap_8c-source.html#l02635">RtlFindNextForwardRunClear()</a>, <a class="el" href="../../d3/d4/range_8c-source.html#l01954">RtlFindRange()</a>, <a class="el" href="../../d3/d4/range_8c-source.html#l01744">RtlIsRangeAvailable()</a>, <a class="el" href="../../d3/d4/range_8c-source.html#l00771">RtlpCreateRangeListEntry()</a>, and <a class="el" href="../../d3/d4/range_8c-source.html#l01839">RtlpIsRangeAvailable()</a>.    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Sat May 15 19:44:11 2004 for test by
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>test: dec97/dll32/profcrd.c File Reference</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="../../main.html">Main&nbsp;Page</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Class&nbsp;List</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Class&nbsp;Members</a> | <a class="qindex" href="../../globals.html">File&nbsp;Members</a></div>
<h1>profcrd.c File Reference</h1><code>#include "<a class="el" href="../../d1/d9/dec97_2dll32_2generic_8h-source.html">generic.h</a>"</code><br>
<code>#include "<a class="el" href="../../d7/d7/dec97_2dll32_2icmstr_8h-source.html">icmstr.h</a>"</code><br>

<p>
<a href="../../d0/d5/dec97_2dll32_2profcrd_8c-source.html">Go to the source code of this file.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d5/dec97_2dll32_2profcrd_8c.html#a0">ICMSEG</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d5/dec97_2dll32_2profcrd_8c.html#a1">MAXCOLOR8</a>&nbsp;&nbsp;&nbsp;255</td></tr>

<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d5/dec97_2dll32_2profcrd_8c.html#a2">CreateHostInputOutputArray</a> (<a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpMem, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a20">PMEMPTR</a> ppArray, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a> numChan, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a> tableSize, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a> <a class="el" href="../../d4/d9/heapdbg_8c.html#a3">Offset</a>, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a> Tag, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> Buff)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d5/dec97_2dll32_2profcrd_8c.html#a3">CheckInputOutputTable</a> (<a class="el" href="../../d8/d6/jul98_2test_2profcrd_8h.html#a3">LPHOSTCLUT</a> lpHostClut, float far *fTemp, BOOL, BOOL)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d5/dec97_2dll32_2profcrd_8c.html#a4">CheckColorLookupTable</a> (<a class="el" href="../../d8/d6/jul98_2test_2profcrd_8h.html#a3">LPHOSTCLUT</a> lpHostClut, float far *fTemp)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d5/dec97_2dll32_2profcrd_8c.html#a5">DoHostConversionCRD</a> (<a class="el" href="../../d8/d6/jul98_2test_2profcrd_8h.html#a3">LPHOSTCLUT</a> lpHostCRD, <a class="el" href="../../d8/d6/jul98_2test_2profcrd_8h.html#a3">LPHOSTCLUT</a> lpHostCSA, float far *Input, float far *Output, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a> ColorSpace, BOOL bCheckOutputTable)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d5/dec97_2dll32_2profcrd_8c.html#a6">DoHostConversionCSA</a> (<a class="el" href="../../d8/d6/jul98_2test_2profcrd_8h.html#a3">LPHOSTCLUT</a> lpHostClut, float far *Input, float far *Output)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d5/dec97_2dll32_2profcrd_8c.html#a7">GetCRDInputOutputArraySize</a> (<a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a> cp, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a28">Intent</a>, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a25">LPSINT</a> lpInTbSize, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a25">LPSINT</a> lpOutTbSize, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a27">LPCSIG</a> lpIntentTag, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a25">LPSINT</a> lpGrids)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d5/dec97_2dll32_2profcrd_8c.html#a8">LabToXYZ</a> (float far *Input, float far *Output, float far *whitePoint)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d5/dec97_2dll32_2profcrd_8c.html#a9">GetCLUTinfo</a> (<a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a> LutTag, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpLut, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a25">LPSINT</a> nInputCh, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a25">LPSINT</a> nOutputCh, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a25">LPSINT</a> nGrids, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a25">LPSINT</a> nInputTable, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a25">LPSINT</a> nOutputTable, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a25">LPSINT</a> size)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d5/dec97_2dll32_2profcrd_8c.html#a10">GetHostCSA</a> (<a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a> cp, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpMem, LPDWORD lpcbSize, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a> InputIntent, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a> <a class="el" href="../../d7/d0/cmdat2_8c.html#a27">Index</a>, int Type)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d5/dec97_2dll32_2profcrd_8c.html#a11">GetHostCSA_Intent</a> (<a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a> cp, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpBuffer, LPDWORD lpcbSize, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a> <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a28">Intent</a>, int Type)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d5/dec97_2dll32_2profcrd_8c.html#a12">GetHostColorSpaceArray</a> (<a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a> cp, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> InputIntent, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpBuffer, LPDWORD lpcbSize)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d5/dec97_2dll32_2profcrd_8c.html#a13">CreateHostLutCRD</a> (<a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a> cp, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a> <a class="el" href="../../d7/d0/cmdat2_8c.html#a27">Index</a>, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpMem, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> InputIntent)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d5/dec97_2dll32_2profcrd_8c.html#a14">GetHostColorRenderingDictionary</a> (<a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a> cp, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a28">Intent</a>, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpMem, LPDWORD lpcbSize)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>float&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d5/dec97_2dll32_2profcrd_8c.html#a15">g</a> (float f)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>float&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d5/dec97_2dll32_2profcrd_8c.html#a16">inverse_g</a> (float f)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d5/dec97_2dll32_2profcrd_8c.html#a17">TableInterp3</a> (<a class="el" href="../../d8/d6/jul98_2test_2profcrd_8h.html#a3">LPHOSTCLUT</a> lpHostClut, float far *fTemp)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d5/dec97_2dll32_2profcrd_8c.html#a18">TableInterp4</a> (<a class="el" href="../../d8/d6/jul98_2test_2profcrd_8h.html#a3">LPHOSTCLUT</a> lpHostClut, float far *fTemp)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d5/dec97_2dll32_2profcrd_8c.html#a19">XYZToLab</a> (float far *Input, float far *Output, float far *whitePoint)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d5/dec97_2dll32_2profcrd_8c.html#a20">CreateOutputArray</a> (<a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpMem, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a> nOutputCh, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a> nOutputTable, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a> <a class="el" href="../../d4/d9/heapdbg_8c.html#a3">Offset</a>, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a28">Intent</a>, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a> Tag, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> Buff, BOOL <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a27">AllowBinary</a>, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpHostClut)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d5/dec97_2dll32_2profcrd_8c.html#a21">CreateInputArray</a> (<a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpMem, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a> nInputCh, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a> nInputTable, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a28">Intent</a>, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a> Tag, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> Buff, BOOL bAllowBinary, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpHostClut)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d5/dec97_2dll32_2profcrd_8c.html#a22">SendCRDLMN</a> (<a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpMem, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a> <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a28">Intent</a>, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a26">LPSFLOAT</a> whitePoint, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a26">LPSFLOAT</a> mediaWP, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a> pcs)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d5/dec97_2dll32_2profcrd_8c.html#a23">SendCRDPQR</a> (<a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpMem, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a> <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a28">Intent</a>, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a26">LPSFLOAT</a> whitePoint)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d5/dec97_2dll32_2profcrd_8c.html#a24">SendCRDABC</a> (<a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpMem, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> PublicArrayName, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a> pcs, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a> nInputCh, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> Buff, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a26">LPSFLOAT</a> e, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a> LutTag, BOOL bAllowBinary)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d5/dec97_2dll32_2profcrd_8c.html#a25">SendCRDBWPoint</a> (<a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpMem, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a26">LPSFLOAT</a> whitePoint)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d5/dec97_2dll32_2profcrd_8c.html#a26">SendCRDOutputTable</a> (<a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpMem, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> PublicArrayName, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a> nOutputCh, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a> LutTag, BOOL bHost, BOOL bAllowBinary)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL EXTERN&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d5/dec97_2dll32_2profcrd_8c.html#a27">GetPS2PreviewColorRenderingDictionary</a> (<a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a> cpDev, <a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a> cpTarget, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a28">Intent</a>, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpMem, LPDWORD lpcbSize, BOOL bAllowBinary)</td></tr>

</table>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="a0" doxytag="dec97/dll32/profcrd.c::ICMSEG" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ICMSEG          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="dec97/dll32/profcrd.c::MAXCOLOR8" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define MAXCOLOR8&nbsp;&nbsp;&nbsp;255          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d5/dec97_2dll32_2profcrd_8c-source.html#l00006">6</a> of file <a class="el" href="../../d0/d5/dec97_2dll32_2profcrd_8c-source.html">dec97/dll32/profcrd.c</a>.    </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="a4" doxytag="dec97/dll32/profcrd.c::CheckColorLookupTable" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL CheckColorLookupTable           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d6/jul98_2test_2profcrd_8h.html#a3">LPHOSTCLUT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpHostClut</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>float far *&nbsp;</td>
          <td class="mdname" nowrap> <em>fTemp</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d5/dec97_2dll32_2profcrd_8c-source.html#l00846">846</a> of file <a class="el" href="../../d0/d5/dec97_2dll32_2profcrd_8c-source.html">dec97/dll32/profcrd.c</a>.
<p>
References <a class="el" href="../../d3/d8/ps2_8c-source.html#l06470">TableInterp3()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l06557">TableInterp4()</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
<pre class="fragment"><div>00847 {
00848     <span class="keywordflow">if</span> (lpHostClut-&gt;inputChan == 3)
00849     {
00850         <a class="code" href="../../d2/d9/ps2_8c.html#a246">TableInterp3</a>(lpHostClut, fTemp);
00851     }
00852     <span class="keywordflow">else</span> <span class="keywordflow">if</span>(lpHostClut-&gt;inputChan == 4)
00853     {
00854         <a class="code" href="../../d2/d9/ps2_8c.html#a247">TableInterp4</a>(lpHostClut, fTemp);
00855     }
00856     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00857 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="dec97/dll32/profcrd.c::CheckInputOutputTable" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL CheckInputOutputTable           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d6/jul98_2test_2profcrd_8h.html#a3">LPHOSTCLUT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpHostClut</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>float far *&nbsp;</td>
          <td class="mdname" nowrap> <em>fTemp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d5/dec97_2dll32_2profcrd_8c-source.html#l00870">870</a> of file <a class="el" href="../../d0/d5/dec97_2dll32_2profcrd_8c-source.html">dec97/dll32/profcrd.c</a>.
<p>
References <a class="el" href="../../d3/d5/aug98_2dll32_2profcrd_8h-source.html#l00004">MAXCHANNELS</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00082">PMEMPTR</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00085">PUSHORT</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00064">USHORT</a>.
<p>
<pre class="fragment"><div>00872 {
00873     <span class="keywordtype">int</span>     i;
00874     <span class="keywordtype">short</span>   Grids;
00875     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a>  floor1, ceiling1;
00876     <span class="keywordtype">float</span>   fIndex;
00877     <span class="keywordtype">int</span>     numChan;
00878     <span class="keywordtype">int</span>     numEnt;
00879     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a20">PMEMPTR</a> ppArray;
00880 
00881     <span class="keywordflow">if</span> (bInputTable)
00882     {
00883         numChan = lpHostClut-&gt;inputChan;
00884         numEnt = lpHostClut-&gt;inputEnt - 1;
00885         ppArray = lpHostClut-&gt;inputArray;
00886     }
00887     <span class="keywordflow">else</span>
00888     {
00889         numChan = lpHostClut-&gt;outputChan;
00890         numEnt = lpHostClut-&gt;outputEnt - 1;
00891         ppArray = lpHostClut-&gt;outputArray;
00892     }
00893 
00894     Grids = lpHostClut-&gt;clutPoints;
00895     <span class="keywordflow">for</span> (i = 0; (i &lt;= <a class="code" href="../../d2/d6/aug98_2dll32_2profcrd_8h.html#a0">MAXCHANNELS</a>) &amp;&amp; (i &lt; numChan); i++)
00896     {
00897         fTemp[i] = (fTemp[i] &lt; 0)? 0: ((fTemp[i] &gt; 1)? 1: fTemp[i]);
00898         fIndex = fTemp[i] * numEnt;
00899         <span class="keywordflow">if</span> (lpHostClut-&gt;lutBits == 8)
00900         {
00901             floor1 = ppArray[i][(<span class="keywordtype">int</span>)fIndex];
00902             ceiling1 = ppArray[i][((<span class="keywordtype">int</span>)fIndex) + 1];
00903             fTemp[i] = (<span class="keywordtype">float</span>)(floor1 + (ceiling1 - floor1) * (fIndex - floor(fIndex)));
00904             <span class="keywordflow">if</span> (bCSA &amp;&amp; !bInputTable)
00905                 fTemp[i] = (<span class="keywordtype">float</span>)(fTemp[i] / 127.0);
00906             <span class="keywordflow">else</span>
00907                 fTemp[i] = (<span class="keywordtype">float</span>)(fTemp[i] / 255.0);
00908         }
00909         <span class="keywordflow">else</span>
00910         {
00911             floor1 = ((<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a22">PUSHORT</a>)(ppArray[i]))[(<span class="keywordtype">int</span>)fIndex];
00912             ceiling1 = ((<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a22">PUSHORT</a>)(ppArray[i]))[((<span class="keywordtype">int</span>)fIndex) + 1];
00913             fTemp[i] = (<span class="keywordtype">float</span>)(floor1 + (ceiling1 - floor1) * (fIndex - floor(fIndex)));
00914             <span class="keywordflow">if</span> (bCSA &amp;&amp; !bInputTable)
00915                 fTemp[i] = (<span class="keywordtype">float</span>)(fTemp[i] / 32767.0);
00916             <span class="keywordflow">else</span>
00917                 fTemp[i] = (<span class="keywordtype">float</span>)(fTemp[i] / 65535.0);
00918 
00919         }
00920         <span class="keywordflow">if</span> (bInputTable)
00921         {
00922             fTemp[i] *= (Grids - 1);
00923             <span class="keywordflow">if</span> (fTemp[i] &gt; (Grids - 1))
00924                 fTemp[i] = (<span class="keywordtype">float</span>)(Grids - 1);
00925         }
00926     }
00927     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00928 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="dec97/dll32/profcrd.c::CreateHostInputOutputArray" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a> CreateHostInputOutputArray           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpMem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a20">PMEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ppArray</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>numChan</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>tableSize</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Offset</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Tag</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Buff</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d5/dec97_2dll32_2profcrd_8c-source.html#l00050">50</a> of file <a class="el" href="../../d0/d5/dec97_2dll32_2profcrd_8c-source.html">dec97/dll32/profcrd.c</a>.
<p>
References <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00221">icSigLut8Type</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00347">icUInt16Number</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00118">lpcpLut16Type</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00119">lpcpLut8Type</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00080">MEMPTR</a>, <a class="el" href="../../d5/d8/heapdbg_8c-source.html#l00033">Offset</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00085">PUSHORT</a>, <a class="el" href="../../d7/d6/aug98_2dll32_2icmdll_8h-source.html#l00011">SINT</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00135">ui16toSINT</a>, and <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00064">USHORT</a>.
<p>
<pre class="fragment"><div>00053 {
00054     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>    i, j;
00055     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a22">PUSHORT</a> lpMemPtr16;
00056     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>  lpMemPtr8;
00057     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>  lpTable;
00058 
00059     <span class="keywordflow">if</span> (Tag == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a91">icSigLut8Type</a>)
00060         lpMemPtr8 = lpMem;
00061     <span class="keywordflow">else</span>
00062         lpMemPtr16 = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a22">PUSHORT</a>)lpMem;
00063 
00064     <span class="keywordflow">for</span> (i = 0; i &lt; numChan; i++)
00065     {
00066         <span class="keywordflow">if</span> (Tag == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a91">icSigLut8Type</a>)
00067         {
00068             ppArray[i] = lpMemPtr8;
00069             lpTable = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>) (((<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a37">lpcpLut8Type</a>) Buff)-&gt;lut.data) +
00070                 <a class="code" href="../../d4/d9/heapdbg_8c.html#a3">Offset</a> +
00071                 tableSize * i;
00072             MemCopy(lpMemPtr8, lpTable, tableSize);
00073                 lpMemPtr8 += tableSize;
00074         }
00075         <span class="keywordflow">else</span>
00076         {
00077             ppArray[i] = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>)lpMemPtr16;
00078             lpTable = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>) (((<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a36">lpcpLut16Type</a>) Buff)-&gt;lut.data) +
00079                 2 * <a class="code" href="../../d4/d9/heapdbg_8c.html#a3">Offset</a> +
00080                 2 * tableSize * i;
00081             <span class="keywordflow">for</span> (j = 0; j &lt; tableSize; j++)
00082             {
00083                 *lpMemPtr16++ = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a>) <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a2">ui16toSINT</a> (lpTable);
00084                 lpTable += <span class="keyword">sizeof</span> (<a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a185">icUInt16Number</a>);
00085             }
00086         }
00087     }
00088     <span class="keywordflow">if</span> (Tag == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a91">icSigLut8Type</a>)
00089         <span class="keywordflow">return</span> ((<a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>) ((<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>)lpMemPtr8 - lpMem));
00090     <span class="keywordflow">else</span>
00091         <span class="keywordflow">return</span> ((<a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>) ((<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>)lpMemPtr16 - lpMem));
00092 
00093 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a13" doxytag="dec97/dll32/profcrd.c::CreateHostLutCRD" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a> CreateHostLutCRD           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Index</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpMem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>InputIntent</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d5/dec97_2dll32_2profcrd_8c-source.html#l00402">402</a> of file <a class="el" href="../../d0/d5/dec97_2dll32_2profcrd_8c-source.html">dec97/dll32/profcrd.c</a>.
<p>
References <a class="el" href="../../d0/d7/halvprnt_8c-source.html#l00031">BYTE</a>, <a class="el" href="../../d3/d8/aug98_2dll32_2csprof_8h-source.html#l00015">CIEXYZRange</a>, <a class="el" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a48a47">CP_POSTSCRIPT_ERR</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l05728">CreateHostInputOutputArray()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00074">CSIG</a>, <a class="el" href="../../d7/d6/aug98_2dll32_2icmdll_8h-source.html#l00010">FAR</a>, <a class="el" href="../../d9/d4/aug98_2dll32_2profcrd_8c-source.html#l00099">GetCLUTinfo()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l00069">GetCPConnSpace</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l00557">GetCPElement()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04143">GetCPElementSize()</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l00485">GetCPElementType()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04087">GetCPMediaWhitePoint()</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l00461">GetCPTagSig()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04074">GetCPWhitePoint()</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00358">icS15Fixed16Number</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00220">icSigLut16Type</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00221">icSigLut8Type</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00247">icSigXYZData</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00347">icUInt16Number</a>, <a class="el" href="../../d2/d9/cmchek_8c-source.html#l00095">Index</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00118">lpcpLut16Type</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00119">lpcpLut8Type</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00107">LPCSIG</a>, <a class="el" href="../../d3/d5/aug98_2dll32_2profcrd_8h-source.html#l00028">LPHOSTCLUT</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00109">LPMEMPTR</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00106">LPSFLOAT</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00105">LPSINT</a>, <a class="el" href="../../d3/d0/object_8c-source.html#l00205">MemAlloc()</a>, <a class="el" href="../../d3/d0/object_8c-source.html#l00260">MemFree()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00080">MEMPTR</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l00021">SetCPLastError()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00157">si16f16toSFLOAT</a>, <a class="el" href="../../d7/d6/aug98_2dll32_2icmdll_8h-source.html#l00011">SINT</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00135">ui16toSINT</a>, and <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00064">USHORT</a>.
<p>
<pre class="fragment"><div>00403 {
00404     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>     nInputCh, nOutputCh, nGrids;
00405     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>     nInputTable, nOutputTable, nNumbers;
00406     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a17">CSIG</a>     Tag, PCS;
00407     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a17">CSIG</a>     IntentSig;
00408 
00409     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>     Ret;
00410     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>     i, j;
00411     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>   lpTable;
00412 
00413     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>   Buff = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00414     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>     MemSize = 0;
00415     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>   lpOldMem = lpMem;
00416     HGLOBAL  hMem;
00417     <a class="code" href="../../d2/d6/aug98_2dll32_2profcrd_8h.html#a3">LPHOSTCLUT</a>  lpHostClut;
00418 
00419     <span class="comment">// Check if we can generate the CRD</span>
00420     <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a15">GetCPTagSig</a> (cp, Index, (LPCSIG) &amp; IntentSig) ||
00421         !<a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a16">GetCPElementType</a> (cp, Index, (LPCSIG) &amp; Tag) ||
00422         ((Tag != <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a91">icSigLut8Type</a>) &amp;&amp; (Tag != <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a90">icSigLut16Type</a>)) ||
00423         !<a class="code" href="../../d2/d9/ps2_8c.html#a40">GetCPConnSpace</a> (cp, (LPCSIG) &amp; PCS) ||
00424         !<a class="code" href="../../d2/d9/ps2_8c.html#a194">GetCPElementSize</a> (cp, Index, (LPSINT) &amp; MemSize) ||
00425         !<a class="code" href="../../d2/d1/object_8c.html#a7">MemAlloc</a> (MemSize, (HGLOBAL FAR *)&amp;hMem, (LPMEMPTR) &amp; Buff) ||
00426         !<a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a19">GetCPElement</a> (cp, Index, Buff, MemSize))
00427     {
00428         <span class="keywordflow">if</span> (<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> != Buff)
00429         {
00430             <a class="code" href="../../d2/d1/object_8c.html#a9">MemFree</a> (hMem);
00431         }
00432         <span class="keywordflow">return</span> (0);
00433     }
00434 
00435     <a class="code" href="../../d7/d4/jul98_2test_2getcsa_8h.html#a7">GetCLUTinfo</a>(Tag, Buff, &amp;nInputCh, &amp;nOutputCh, 
00436                 &amp;nGrids, &amp;nInputTable, &amp;nOutputTable, &amp;i);
00437 
00438     <span class="keywordflow">if</span> (((nOutputCh != 3) &amp;&amp; (nOutputCh != 4)) ||
00439         (nInputCh != 3))
00440     {
00441         <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a39">SetCPLastError</a> (CP_POSTSCRIPT_ERR);
00442         <a class="code" href="../../d2/d1/object_8c.html#a9">MemFree</a> (hMem);
00443         <span class="keywordflow">return</span> (0);
00444     }
00445 
00446     <span class="comment">// First Pass. This is a size request</span>
00447     <span class="keywordflow">if</span> (lpMem == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)       
00448     {
00449         Ret = nInputCh * nInputTable * i         +  <span class="comment">// Input table 8/16-bits</span>
00450             nOutputCh * nOutputTable * i         +  <span class="comment">// Output table 8/16-bits</span>
00451             nOutputCh * nGrids * nGrids * nGrids +  <span class="comment">// CLUT 8-bits only</span>
00452             <span class="keyword">sizeof</span>(<a class="code" href="../../d7/d6/structtagHOSTCLUT.html">HOSTCLUT</a>)                     +  <span class="comment">// Data structure </span>
00453             1024;                                   <span class="comment">// safe</span>
00454 
00455         <a class="code" href="../../d2/d1/object_8c.html#a9">MemFree</a> (hMem);
00456         <span class="keywordflow">return</span> (Ret);
00457     }
00458          
00459     <span class="comment">// Second Pass. Get a HostCRD</span>
00460     lpHostClut = (<a class="code" href="../../d2/d6/aug98_2dll32_2profcrd_8h.html#a3">LPHOSTCLUT</a>)lpMem;
00461     lpMem += <span class="keyword">sizeof</span>(<a class="code" href="../../d7/d6/structtagHOSTCLUT.html">HOSTCLUT</a>);
00462     lpHostClut-&gt;size = <span class="keyword">sizeof</span>(<a class="code" href="../../d7/d6/structtagHOSTCLUT.html">HOSTCLUT</a>);
00463     lpHostClut-&gt;pcs = PCS;
00464     lpHostClut-&gt;intent = InputIntent;
00465     lpHostClut-&gt;lutBits = (Tag == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a91">icSigLut8Type</a>)? 8:16;
00466 
00467     <a class="code" href="../../d2/d9/ps2_8c.html#a191">GetCPWhitePoint</a> (cp, (LPSFLOAT)lpHostClut-&gt;whitePoint);          <span class="comment">// .. Illuminant</span>
00468 
00469     <span class="comment">// Support absolute whitePoint</span>
00470     <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d9/ps2_8c.html#a192">GetCPMediaWhitePoint</a> (cp, (LPSFLOAT)lpHostClut-&gt;mediaWP)) <span class="comment">// .. Media WhitePoint</span>
00471     {
00472         lpHostClut-&gt;mediaWP[0] = lpHostClut-&gt;whitePoint[0];
00473         lpHostClut-&gt;mediaWP[1] = lpHostClut-&gt;whitePoint[1];
00474         lpHostClut-&gt;mediaWP[2] = lpHostClut-&gt;whitePoint[2];
00475     }
00476     lpHostClut-&gt;inputChan = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>)nInputCh;
00477     lpHostClut-&gt;outputChan = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>)nOutputCh;
00478     lpHostClut-&gt;clutPoints = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>)nGrids;
00479     lpHostClut-&gt;inputEnt = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a>)nInputTable;
00480     lpHostClut-&gt;outputEnt = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a>)nOutputTable;
00481 
00482 <span class="comment">//******** Input array</span>
00483     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a237">CreateHostInputOutputArray</a> (lpMem, lpHostClut-&gt;inputArray, 
00484              nInputCh, nInputTable, 0, Tag, Buff);
00485 <span class="comment">//******** the offset to the position of output array.</span>
00486     i = nInputTable * nInputCh +
00487         nGrids * nGrids * nGrids * nOutputCh;
00488 <span class="comment">//******** Output array</span>
00489     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a237">CreateHostInputOutputArray</a> (lpMem, lpHostClut-&gt;outputArray, 
00490              nOutputCh, nOutputTable, i, Tag, Buff);
00491 <span class="comment">//******** Matrix.</span>
00492     <span class="keywordflow">if</span> (PCS == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a109">icSigXYZData</a>)
00493     {
00494         <span class="keywordflow">if</span> (Tag == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a91">icSigLut8Type</a>)
00495         {
00496             lpTable = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>) &amp; ((<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a37">lpcpLut8Type</a>) Buff)-&gt;lut.e00;
00497         } <span class="keywordflow">else</span>
00498         {
00499             lpTable = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>) &amp; ((<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a36">lpcpLut16Type</a>) Buff)-&gt;lut.e00;
00500         }
00501         <span class="keywordflow">for</span> (i = 0; i &lt; 9; i++)
00502         {
00503             lpHostClut-&gt;e[i] = (<span class="keywordtype">float</span>)((<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a9">si16f16toSFLOAT</a> (lpTable)) / <a class="code" href="../../d2/d9/aug98_2dll32_2csprof_8h.html#a3">CIEXYZRange</a>);
00504             lpTable += <span class="keyword">sizeof</span> (<a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a192">icS15Fixed16Number</a>);
00505         }
00506     }
00507 <span class="comment">//********** RenderTable</span>
00508     nNumbers = nGrids * nGrids * nOutputCh;
00509     lpHostClut-&gt;clut = lpMem;
00510     <span class="keywordflow">for</span> (i = 0; i &lt; nGrids; i++)        <span class="comment">// Na strings should be sent</span>
00511     {
00512         <span class="keywordflow">if</span> (Tag == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a91">icSigLut8Type</a>)
00513         {
00514             lpTable = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>) (((<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a37">lpcpLut8Type</a>) Buff)-&gt;lut.data) +
00515                 nInputTable * nInputCh +
00516                 nNumbers * i;
00517         } <span class="keywordflow">else</span>
00518         {
00519             lpTable = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>) (((<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a36">lpcpLut16Type</a>) Buff)-&gt;lut.data) +
00520                 2 * nInputTable * nInputCh +
00521                 2 * nNumbers * i;
00522         }
00523         <span class="keywordflow">if</span> (Tag == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a91">icSigLut8Type</a>)
00524         {
00525             MemCopy(lpMem, lpTable, nNumbers);
00526             lpMem += nNumbers;
00527         }
00528         <span class="keywordflow">else</span>
00529         {
00530             <span class="keywordflow">for</span> (j = 0; j &lt; nNumbers; j++)
00531             {
00532                 *lpMem++ = (<a class="code" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a>)(<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a2">ui16toSINT</a> (lpTable) / 256);
00533                 lpTable += <span class="keyword">sizeof</span> (<a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a185">icUInt16Number</a>);
00534             }
00535         }
00536     }
00537 
00538     <a class="code" href="../../d2/d1/object_8c.html#a9">MemFree</a> (hMem);
00539     <span class="keywordflow">return</span> ((<a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>) ((<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>) (lpMem - lpOldMem)));
00540 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a21" doxytag="dec97/dll32/profcrd.c::CreateInputArray" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a> CreateInputArray           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpMem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>nInputCh</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>nInputTable</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Intent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Tag</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Buff</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>bAllowBinary</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpHostClut</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d5/dec97_2dll32_2profcrd_8c-source.html#l01322">1322</a> of file <a class="el" href="../../d0/d5/dec97_2dll32_2profcrd_8c-source.html">dec97/dll32/profcrd.c</a>.
<p>
References <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00007">BeginArray</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00005">BeginString</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00055">DefOp</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00008">EndArray</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00006">EndString</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00220">icSigLut16Type</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00221">icSigLut8Type</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00347">icUInt16Number</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00087">InputArray</a>, <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00109">Intent</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00118">lpcpLut16Type</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00119">lpcpLut8Type</a>, <a class="el" href="../../d3/d5/aug98_2dll32_2profcrd_8h-source.html#l00028">LPHOSTCLUT</a>, <a class="el" href="../../d3/d8/aug98_2dll32_2csprof_8h-source.html#l00016">MAX_LINELENG</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00080">MEMPTR</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00063">NewLine</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00089">PreViewInArray</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00085">PUSHORT</a>, <a class="el" href="../../d7/d6/aug98_2dll32_2icmdll_8h-source.html#l00011">SINT</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00064">Slash</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00135">ui16toSINT</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04401">WriteByteString()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04351">WriteHexBuffer()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04274">WriteHNAToken()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l00080">WriteInt</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04296">WriteIntStringU2S()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04324">WriteIntStringU2S_L()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l00072">WriteObject</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l01152">WriteObjectN()</a>, and <a class="el" href="../../d3/d8/ps2_8c-source.html#l04381">WriteStringToken()</a>.
<p>
<pre class="fragment"><div>01325 {
01326     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a> i, j;
01327     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpOldMem;
01328     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpTable;
01329     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpLineStart;
01330     lpOldMem = lpMem;
01331 
01332     <span class="keywordflow">if</span> (lpHostClut)
01333     {
01334         nInputCh = (<a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>)(((<a class="code" href="../../d2/d6/aug98_2dll32_2profcrd_8h.html#a3">LPHOSTCLUT</a>)lpHostClut)-&gt;inputChan);
01335         nInputTable = (<a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>)(((<a class="code" href="../../d2/d6/aug98_2dll32_2profcrd_8h.html#a3">LPHOSTCLUT</a>)lpHostClut)-&gt;inputEnt);
01336         Tag = (((<a class="code" href="../../d2/d6/aug98_2dll32_2profcrd_8h.html#a3">LPHOSTCLUT</a>)lpHostClut)-&gt;lutBits == 8)? 
01337                <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a91">icSigLut8Type</a> : <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a90">icSigLut16Type</a>;
01338     }
01339 
01340     <span class="keywordflow">for</span> (i = 0; i &lt; nInputCh; i++)
01341     {
01342         lpLineStart = lpMem;
01343         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
01344         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, Slash);
01345         <span class="keywordflow">if</span> (lpHostClut)
01346             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, PreViewInArray);
01347         <span class="keywordflow">else</span>
01348             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, InputArray);
01349         lpMem += <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a44">WriteObjectN</a> (lpMem, Intent, lstrlen (Intent));
01350         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a44">WriteInt</a> (lpMem, i);
01351 
01352         <span class="keywordflow">if</span> (lpHostClut)
01353         {
01354             lpTable = ((<a class="code" href="../../d2/d6/aug98_2dll32_2profcrd_8h.html#a3">LPHOSTCLUT</a>)lpHostClut)-&gt;inputArray[i];
01355         }
01356         <span class="keywordflow">else</span>
01357         {
01358             <span class="keywordflow">if</span> (Tag == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a91">icSigLut8Type</a>)
01359                 lpTable = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>) (((<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a37">lpcpLut8Type</a>) Buff)-&gt;lut.data) + nInputTable * i;
01360             <span class="keywordflow">else</span>
01361                 lpTable = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>) (((<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a36">lpcpLut16Type</a>) Buff)-&gt;lut.data) + 2 * nInputTable * i;
01362         }
01363         <span class="keywordflow">if</span> (!bAllowBinary)               <span class="comment">// Output ASCII CRD</span>
01364         {
01365             <span class="keywordflow">if</span> (Tag == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a91">icSigLut8Type</a>)
01366             {
01367                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginString);
01368                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a227">WriteHexBuffer</a> (lpMem, lpTable,lpLineStart, nInputTable);
01369                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndString);
01370             } <span class="keywordflow">else</span>
01371             {
01372                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginArray);
01373                 <span class="keywordflow">for</span> (j = 0; j &lt; nInputTable; j++)
01374                 {
01375                     <span class="keywordflow">if</span>(lpHostClut)
01376                         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a44">WriteInt</a> (lpMem, *((PUSHORT)lpTable));
01377                     <span class="keywordflow">else</span>
01378                         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a44">WriteInt</a> (lpMem, ui16toSINT (lpTable));
01379                     lpTable += <span class="keyword">sizeof</span> (<a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a185">icUInt16Number</a>);
01380                     <span class="keywordflow">if</span> (((<a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>) (lpMem - lpLineStart)) &gt; <a class="code" href="../../d2/d9/aug98_2dll32_2csprof_8h.html#a4">MAX_LINELENG</a>)
01381                     {
01382                         lpLineStart = lpMem;
01383                         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
01384                     }
01385                 }
01386                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndArray);
01387             }
01388         } <span class="keywordflow">else</span>
01389         {                               <span class="comment">// Output BINARY CRD</span>
01390             <span class="keywordflow">if</span> (Tag == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a91">icSigLut8Type</a>)
01391             {
01392                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a228">WriteStringToken</a> (lpMem, 143, 256);
01393                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a229">WriteByteString</a> (lpMem, lpTable, 256L);
01394             } <span class="keywordflow">else</span>
01395             {
01396                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a224">WriteHNAToken</a> (lpMem, 149, nInputTable);
01397                 <span class="keywordflow">if</span> (lpHostClut)
01398                     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a226">WriteIntStringU2S_L</a> (lpMem, lpTable, nInputTable);
01399                 <span class="keywordflow">else</span>
01400                     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a225">WriteIntStringU2S</a> (lpMem, lpTable, nInputTable);
01401             }
01402         }
01403         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, DefOp);
01404     }
01405 
01406     <span class="keywordflow">return</span> ((<a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>) (lpMem - lpOldMem));
01407 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a20" doxytag="dec97/dll32/profcrd.c::CreateOutputArray" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a> CreateOutputArray           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpMem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>nOutputCh</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>nOutputTable</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Offset</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Intent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Tag</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Buff</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>AllowBinary</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpHostClut</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d5/dec97_2dll32_2profcrd_8c-source.html#l01210">1210</a> of file <a class="el" href="../../d0/d5/dec97_2dll32_2profcrd_8c-source.html">dec97/dll32/profcrd.c</a>.
<p>
References <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00108">AllowBinary</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00007">BeginArray</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00005">BeginString</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00055">DefOp</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00008">EndArray</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00006">EndString</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00220">icSigLut16Type</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00221">icSigLut8Type</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00347">icUInt16Number</a>, <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00109">Intent</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00118">lpcpLut16Type</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00119">lpcpLut8Type</a>, <a class="el" href="../../d3/d5/aug98_2dll32_2profcrd_8h-source.html#l00028">LPHOSTCLUT</a>, <a class="el" href="../../d3/d8/aug98_2dll32_2csprof_8h-source.html#l00016">MAX_LINELENG</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00080">MEMPTR</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00063">NewLine</a>, <a class="el" href="../../d5/d8/heapdbg_8c-source.html#l00033">Offset</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00088">OutputArray</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00090">PreViewOutArray</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00085">PUSHORT</a>, <a class="el" href="../../d7/d6/aug98_2dll32_2icmdll_8h-source.html#l00011">SINT</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00064">Slash</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00135">ui16toSINT</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04401">WriteByteString()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04351">WriteHexBuffer()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04274">WriteHNAToken()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l00080">WriteInt</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04296">WriteIntStringU2S()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04324">WriteIntStringU2S_L()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l00072">WriteObject</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l01152">WriteObjectN()</a>, and <a class="el" href="../../d3/d8/ps2_8c-source.html#l04381">WriteStringToken()</a>.
<p>
<pre class="fragment"><div>01213 {
01214     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a> i, j;
01215     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpOldMem;
01216     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpTable;
01217     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpLineStart;
01218     lpOldMem = lpMem;
01219 
01220     <span class="keywordflow">if</span> (lpHostClut)
01221     {
01222         nOutputCh = (<a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>)(((<a class="code" href="../../d2/d6/aug98_2dll32_2profcrd_8h.html#a3">LPHOSTCLUT</a>)lpHostClut)-&gt;outputChan);
01223         nOutputTable = (<a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>)(((<a class="code" href="../../d2/d6/aug98_2dll32_2profcrd_8h.html#a3">LPHOSTCLUT</a>)lpHostClut)-&gt;outputEnt);
01224         Tag = (((<a class="code" href="../../d2/d6/aug98_2dll32_2profcrd_8h.html#a3">LPHOSTCLUT</a>)lpHostClut)-&gt;lutBits == 8)? 
01225               <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a91">icSigLut8Type</a> : <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a90">icSigLut16Type</a>;
01226     }
01227 
01228     <span class="keywordflow">for</span> (i = 0; i &lt; nOutputCh; i++)
01229     {
01230         lpLineStart = lpMem;
01231         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
01232         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, Slash);
01233         <span class="keywordflow">if</span> (lpHostClut)
01234             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, PreViewOutArray);
01235         <span class="keywordflow">else</span>
01236             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, OutputArray);
01237         lpMem += <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a44">WriteObjectN</a> (lpMem, Intent, lstrlen (Intent));
01238         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a44">WriteInt</a> (lpMem, i);
01239         
01240         <span class="keywordflow">if</span> (lpHostClut)
01241             lpTable = ((<a class="code" href="../../d2/d6/aug98_2dll32_2profcrd_8h.html#a3">LPHOSTCLUT</a>)lpHostClut)-&gt;outputArray[i];
01242         <span class="keywordflow">else</span>
01243         {
01244             <span class="keywordflow">if</span> (Tag == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a91">icSigLut8Type</a>)
01245                 lpTable = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>) (((<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a37">lpcpLut8Type</a>) Buff)-&gt;lut.data) +
01246                     <a class="code" href="../../d4/d9/heapdbg_8c.html#a3">Offset</a> +
01247                     nOutputTable * i;
01248             <span class="keywordflow">else</span>
01249                 lpTable = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>) (((<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a36">lpcpLut16Type</a>) Buff)-&gt;lut.data) +
01250                     2 * <a class="code" href="../../d4/d9/heapdbg_8c.html#a3">Offset</a> +
01251                     2 * nOutputTable * i;
01252         }
01253 
01254         <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d8/aug98_2test_2main_8c.html#a27">AllowBinary</a>)               <span class="comment">// Output ASCII CRD</span>
01255         {
01256             <span class="keywordflow">if</span> (Tag == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a91">icSigLut8Type</a>)
01257             {
01258                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginString);
01259                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a227">WriteHexBuffer</a> (lpMem, lpTable, lpLineStart, nOutputTable);
01260                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndString);
01261             } <span class="keywordflow">else</span>
01262             {
01263                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginArray);
01264                 <span class="keywordflow">for</span> (j = 0; j &lt; nOutputTable; j++)
01265                 {
01266                     <span class="keywordflow">if</span> (lpHostClut)
01267                         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a44">WriteInt</a> (lpMem, *((PUSHORT)lpTable));
01268                     <span class="keywordflow">else</span>
01269                         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a44">WriteInt</a> (lpMem, ui16toSINT (lpTable));
01270                     lpTable += <span class="keyword">sizeof</span> (<a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a185">icUInt16Number</a>);
01271                     <span class="keywordflow">if</span> (((<a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>) (lpMem - lpLineStart)) &gt; <a class="code" href="../../d2/d9/aug98_2dll32_2csprof_8h.html#a4">MAX_LINELENG</a>)
01272                     {
01273                         lpLineStart = lpMem;
01274                         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
01275                     }
01276                 }
01277                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndArray);
01278             }
01279         } <span class="keywordflow">else</span>
01280         {                               <span class="comment">// Output BINARY CRD</span>
01281             <span class="keywordflow">if</span> (Tag == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a91">icSigLut8Type</a>)
01282             {
01283                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a228">WriteStringToken</a> (lpMem, 143, 256);
01284                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a229">WriteByteString</a> (lpMem, lpTable, 256L);
01285             } <span class="keywordflow">else</span>
01286             {
01287                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a224">WriteHNAToken</a> (lpMem, 149, nOutputTable);
01288                 <span class="keywordflow">if</span> (lpHostClut)
01289                     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a226">WriteIntStringU2S_L</a> (lpMem, lpTable, nOutputTable);
01290                 <span class="keywordflow">else</span>
01291                     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a225">WriteIntStringU2S</a> (lpMem, lpTable, nOutputTable);
01292             }
01293         }
01294         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, DefOp);
01295     }
01296 
01297     <span class="keywordflow">return</span> ((<a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>) (lpMem - lpOldMem));
01298 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="dec97/dll32/profcrd.c::DoHostConversionCRD" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL DoHostConversionCRD           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d6/jul98_2test_2profcrd_8h.html#a3">LPHOSTCLUT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpHostCRD</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d8/d6/jul98_2test_2profcrd_8h.html#a3">LPHOSTCLUT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpHostCSA</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>float far *&nbsp;</td>
          <td class="mdname" nowrap> <em>Input</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>float far *&nbsp;</td>
          <td class="mdname" nowrap> <em>Output</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ColorSpace</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>bCheckOutputTable</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d5/dec97_2dll32_2profcrd_8c-source.html#l00969">969</a> of file <a class="el" href="../../d0/d5/dec97_2dll32_2profcrd_8c-source.html">dec97/dll32/profcrd.c</a>.
<p>
References <a class="el" href="../../d3/d8/ps2_8c-source.html#l06757">CheckColorLookupTable()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l06295">CheckInputOutputTable()</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00248">icSigLabData</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00247">icSigXYZData</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l06428">LabToXYZ()</a>, <a class="el" href="../../d3/d5/aug98_2dll32_2profcrd_8h-source.html#l00004">MAXCHANNELS</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d3/d8/ps2_8c-source.html#l06449">XYZToLab()</a>.
<p>
<pre class="fragment"><div>00972 {
00973     <span class="keywordtype">float</span>   fTemp[<a class="code" href="../../d2/d6/aug98_2dll32_2profcrd_8h.html#a0">MAXCHANNELS</a>];
00974     <span class="keywordtype">float</span>   fTemp1[<a class="code" href="../../d2/d6/aug98_2dll32_2profcrd_8h.html#a0">MAXCHANNELS</a>];
00975     <span class="keywordtype">int</span>     i, j;
00976 
00980     <span class="comment">// When sampling the deviceCRD, skip the input table.</span>
00981     <span class="comment">// If lpHostCSA is not NULL, the current CRD is targetCRD, we</span>
00982     <span class="comment">// need to do input table conversion</span>
00983     <span class="keywordflow">if</span> (lpHostCSA)
00984     {
00985         <span class="comment">// Convert Lab to XYZ  in range [ 0 whitePoint ]</span>
00986         <span class="keywordflow">if</span> ((lpHostCRD-&gt;pcs == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a109">icSigXYZData</a>) &amp;&amp; 
00987             (lpHostCSA-&gt;pcs == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a110">icSigLabData</a>))
00988         {
00989             <a class="code" href="../../d2/d9/ps2_8c.html#a248">LabToXYZ</a>(Input, fTemp1, lpHostCRD-&gt;whitePoint);
00990         }
00991         <span class="comment">// Convert XYZ to Lab in range [ 0 1]</span>
00992         <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((lpHostCRD-&gt;pcs == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a110">icSigLabData</a>) &amp;&amp; 
00993                  (lpHostCSA-&gt;pcs == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a109">icSigXYZData</a>))
00994         {
00995             <a class="code" href="../../d2/d9/ps2_8c.html#a249">XYZToLab</a>(Input, fTemp, lpHostCSA-&gt;whitePoint);
00996         }
00997         <span class="comment">// Convert Lab to range [ 0 1]</span>
00998         <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((lpHostCRD-&gt;pcs == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a110">icSigLabData</a>) &amp;&amp; 
00999                  (lpHostCSA-&gt;pcs == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a110">icSigLabData</a>))
01000         {
01001             <span class="keywordflow">for</span> (i = 0; i &lt; 3; i++)
01002                 fTemp[i] = Input[i] / 2;
01003         }
01004         <span class="comment">// Convert XYZ to XYZ (based on white point) to range [0 1]</span>
01005         <span class="keywordflow">else</span>
01006         {
01007             <span class="keywordflow">for</span> (i = 0; i &lt; 3; i++)
01008                 fTemp1[i] = Input[i] * lpHostCRD-&gt;whitePoint[i] / lpHostCSA-&gt;whitePoint[i];
01009         }
01010         <span class="comment">// Matrix, used for XYZ data only.</span>
01011         <span class="keywordflow">if</span> (lpHostCRD-&gt;pcs == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a109">icSigXYZData</a>)
01012         {
01013             <span class="keywordflow">for</span> (i = 0; i &lt; 3; i++)
01014             {
01015                 j = i*3;
01016                 fTemp[i] =  lpHostCRD-&gt;e[j ]    * fTemp1[0] +
01017                             lpHostCRD-&gt;e[j + 1] * fTemp1[1] +
01018                             lpHostCRD-&gt;e[j + 2] * fTemp1[2];
01019             }
01020         }
01021 
01022         <span class="comment">//Search input Table</span>
01023         <a class="code" href="../../d2/d9/ps2_8c.html#a240">CheckInputOutputTable</a>(lpHostCRD, fTemp, 0, 1);
01024     }
01025     <span class="comment">// If the current CRD is device CRD, we do not need to do input</span>
01026     <span class="comment">// table conversion.</span>
01027     <span class="keywordflow">else</span>
01028     {
01029         <span class="keywordtype">short</span>   Grids;
01030         Grids = lpHostCRD-&gt;clutPoints;
01031         <span class="comment">// Sample data may be XYZ or Lab. It depends on Target icc profile.</span>
01032         <span class="comment">// If the PCS of the target icc profile is XYZ, input data will be XYZ.</span>
01033         <span class="comment">// If the PCS of the target icc profile is Lab, input data will be Lab.</span>
01034 
01035         <span class="keywordflow">for</span> (i = 0; i &lt; 3; i++)
01036         {
01037             fTemp[i] = Input[i]* (Grids - 1);
01038             <span class="keywordflow">if</span> (fTemp[i] &gt; (Grids - 1))
01039                 fTemp[i] = (<span class="keywordtype">float</span>)(Grids - 1);
01040         }
01041     }   <span class="comment">// bCheckInputTable</span>
01042 
01043     <span class="comment">// Rendering table</span>
01044     <a class="code" href="../../d2/d9/ps2_8c.html#a241">CheckColorLookupTable</a>(lpHostCRD, fTemp);
01045 
01049     <span class="keywordflow">if</span> (bCheckOutputTable)
01050     {
01051         <span class="comment">//Output Table</span>
01052         <a class="code" href="../../d2/d9/ps2_8c.html#a240">CheckInputOutputTable</a>(lpHostCRD, fTemp, 0, 0);
01053     }
01054     <span class="keywordflow">for</span> (i = 0; (i &lt;= <a class="code" href="../../d2/d6/aug98_2dll32_2profcrd_8h.html#a0">MAXCHANNELS</a>) &amp;&amp; (i &lt; lpHostCRD-&gt;outputChan); i++)
01055     {
01056         Output[i] = fTemp[i];
01057     }
01058 
01059     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01060 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a6" doxytag="dec97/dll32/profcrd.c::DoHostConversionCSA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL DoHostConversionCSA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d6/jul98_2test_2profcrd_8h.html#a3">LPHOSTCLUT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpHostClut</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>float far *&nbsp;</td>
          <td class="mdname" nowrap> <em>Input</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>float far *&nbsp;</td>
          <td class="mdname" nowrap> <em>Output</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d5/dec97_2dll32_2profcrd_8c-source.html#l01075">1075</a> of file <a class="el" href="../../d0/d5/dec97_2dll32_2profcrd_8c-source.html">dec97/dll32/profcrd.c</a>.
<p>
References <a class="el" href="../../d3/d8/ps2_8c-source.html#l06757">CheckColorLookupTable()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l06295">CheckInputOutputTable()</a>, <a class="el" href="../../d3/d5/aug98_2dll32_2profcrd_8h-source.html#l00004">MAXCHANNELS</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
<pre class="fragment"><div>01076 {
01077     <span class="keywordtype">float</span>   fTemp[<a class="code" href="../../d2/d6/aug98_2dll32_2profcrd_8h.html#a0">MAXCHANNELS</a>];
01078     <span class="keywordtype">int</span>     i;
01079 
01083     <span class="keywordflow">for</span> (i = 0; (i &lt;= <a class="code" href="../../d2/d6/aug98_2dll32_2profcrd_8h.html#a0">MAXCHANNELS</a>) &amp;&amp; (i &lt; lpHostClut-&gt;inputChan); i++)
01084     {
01085         fTemp[i] = Input[i];
01086     }
01087     <span class="comment">//Search input Table</span>
01088     <a class="code" href="../../d2/d9/ps2_8c.html#a240">CheckInputOutputTable</a>(lpHostClut, fTemp, 1, 1);
01089 
01090     <span class="comment">// Rendering table</span>
01091     <a class="code" href="../../d2/d9/ps2_8c.html#a241">CheckColorLookupTable</a>(lpHostClut, fTemp);
01092 
01093     <span class="comment">//Output Table</span>
01094     <a class="code" href="../../d2/d9/ps2_8c.html#a240">CheckInputOutputTable</a>(lpHostClut, fTemp, 1, 0 );
01095 
01099     <span class="keywordflow">for</span> (i = 0; (i &lt;= <a class="code" href="../../d2/d6/aug98_2dll32_2profcrd_8h.html#a0">MAXCHANNELS</a>) &amp;&amp; (i &lt; lpHostClut-&gt;outputChan); i++)
01100     {
01101         Output[i] = fTemp[i];
01102     }
01103     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01104 }                               
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a15" doxytag="dec97/dll32/profcrd.c::g" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> float g           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">float&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>f</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d5/dec97_2dll32_2profcrd_8c-source.html#l00620">620</a> of file <a class="el" href="../../d0/d5/dec97_2dll32_2profcrd_8c-source.html">dec97/dll32/profcrd.c</a>.
<p>
<pre class="fragment"><div>00621 {
00622     <span class="keywordtype">float</span> frc;
00623     <span class="keywordflow">if</span> (f &gt;= (6/29))
00624     {
00625         frc = f * f * f;
00626     }
00627     <span class="keywordflow">else</span>
00628     {
00629         frc = f - (4.0f / 29.0f) * (108.0f / 841.0f);
00630     }
00631     <span class="keywordflow">return</span> frc;
00632 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a9" doxytag="dec97/dll32/profcrd.c::GetCLUTinfo" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID GetCLUTinfo           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>LutTag</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpLut</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a25">LPSINT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>nInputCh</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a25">LPSINT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>nOutputCh</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a25">LPSINT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>nGrids</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a25">LPSINT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>nInputTable</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a25">LPSINT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>nOutputTable</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a25">LPSINT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>size</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d5/dec97_2dll32_2profcrd_8c-source.html#l00096">96</a> of file <a class="el" href="../../d0/d5/dec97_2dll32_2profcrd_8c-source.html">dec97/dll32/profcrd.c</a>.
<p>
References <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00221">icSigLut8Type</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00118">lpcpLut16Type</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00119">lpcpLut8Type</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00135">ui16toSINT</a>, and <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00134">ui8toSINT</a>.
<p>
<pre class="fragment"><div>00098 {
00099     <span class="keywordflow">if</span> (LutTag == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a91">icSigLut8Type</a>)
00100     {
00101         *nInputCh = <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a1">ui8toSINT</a> (((lpcpLut8Type) lpLut)-&gt;lut.inputChan);
00102         *nOutputCh = <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a1">ui8toSINT</a> (((lpcpLut8Type) lpLut)-&gt;lut.outputChan);
00103         *nGrids = <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a1">ui8toSINT</a> (((lpcpLut8Type) lpLut)-&gt;lut.clutPoints);
00104         *nInputTable = 256<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>;
00105         *nOutputTable = 256<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>;
00106         *size = 1;  <span class="comment">// one byte for each input\output table entry</span>
00107     } <span class="keywordflow">else</span>
00108     {
00109         *nInputCh = <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a1">ui8toSINT</a> (((lpcpLut16Type) lpLut)-&gt;lut.inputChan);
00110         *nOutputCh = <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a1">ui8toSINT</a> (((lpcpLut16Type) lpLut)-&gt;lut.outputChan);
00111         *nGrids = <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a1">ui8toSINT</a> (((lpcpLut16Type) lpLut)-&gt;lut.clutPoints);
00112         *nInputTable = <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a2">ui16toSINT</a> (((lpcpLut16Type) lpLut)-&gt;lut.inputEnt);
00113         *nOutputTable = <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a2">ui16toSINT</a> (((lpcpLut16Type) lpLut)-&gt;lut.outputEnt);
00114         *size = 2;  <span class="comment">// two bytes for each input\output table entry</span>
00115     }
00116 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a7" doxytag="dec97/dll32/profcrd.c::GetCRDInputOutputArraySize" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL GetCRDInputOutputArraySize           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Intent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a25">LPSINT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpInTbSize</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a25">LPSINT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpOutTbSize</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a27">LPCSIG</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpIntentTag</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a25">LPSINT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpGrids</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d5/dec97_2dll32_2profcrd_8c-source.html#l01107">1107</a> of file <a class="el" href="../../d0/d5/dec97_2dll32_2profcrd_8c-source.html">dec97/dll32/profcrd.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00074">CSIG</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04007">DoesCPTagExist()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d6/aug98_2dll32_2icmdll_8h-source.html#l00010">FAR</a>, <a class="el" href="../../d9/d4/aug98_2dll32_2profcrd_8c-source.html#l00099">GetCLUTinfo()</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l00557">GetCPElement()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04143">GetCPElementSize()</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l00485">GetCPElementType()</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l00426">GetCPTagIndex()</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00306">icAbsoluteColorimetric</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00303">icPerceptual</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00304">icRelativeColorimetric</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00305">icSaturation</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00145">icSigBToA0Tag</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00146">icSigBToA1Tag</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00147">icSigBToA2Tag</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00220">icSigLut16Type</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00221">icSigLut8Type</a>, <a class="el" href="../../d2/d9/cmchek_8c-source.html#l00095">Index</a>, <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00109">Intent</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00107">LPCSIG</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00109">LPMEMPTR</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00105">LPSINT</a>, <a class="el" href="../../d3/d0/object_8c-source.html#l00205">MemAlloc()</a>, <a class="el" href="../../d3/d0/object_8c-source.html#l00260">MemFree()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00080">MEMPTR</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d6/aug98_2dll32_2icmdll_8h-source.html#l00011">SINT</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
<pre class="fragment"><div>01110 {
01111     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a17">CSIG</a>    Tag;
01112     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>    <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>;
01113     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>    Ret = 0;
01114     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>  Buff = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
01115     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>    MemSize = 0;
01116     HGLOBAL hMem;
01117     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>    outputChan, outputEnt;
01118     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>    inputChan, inputEnt;
01119     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>    Grids;
01120     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>    i;
01121 
01122     <span class="keywordflow">switch</span> (<a class="code" href="../../d3/d8/aug98_2test_2main_8c.html#a28">Intent</a>)
01123     {
01124         <span class="keywordflow">case</span> <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a142">icPerceptual</a>:
01125             *lpIntentTag = <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a23">icSigBToA0Tag</a>;
01126             <span class="keywordflow">break</span>;
01127 
01128         <span class="keywordflow">case</span> <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a143">icRelativeColorimetric</a>:
01129         <span class="keywordflow">case</span> <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a145">icAbsoluteColorimetric</a>:
01130             *lpIntentTag = <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a24">icSigBToA1Tag</a>;
01131             <span class="keywordflow">break</span>;
01132 
01133         <span class="keywordflow">case</span> <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a144">icSaturation</a>:
01134             *lpIntentTag = <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a25">icSigBToA2Tag</a>;
01135             <span class="keywordflow">break</span>;
01136 
01137         <span class="keywordflow">default</span>:
01138             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01139     }
01140     <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d9/ps2_8c.html#a189">DoesCPTagExist</a> (cp, *lpIntentTag) ||
01141         !<a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a12">GetCPTagIndex</a> (cp, *lpIntentTag, (LPSINT) &amp; Index) ||
01142         !<a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a16">GetCPElementType</a> (cp, Index, (LPCSIG) &amp; Tag) ||
01143         ((Tag != <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a91">icSigLut8Type</a>) &amp;&amp; (Tag != <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a90">icSigLut16Type</a>)) ||
01144         !<a class="code" href="../../d2/d9/ps2_8c.html#a194">GetCPElementSize</a> (cp, Index, (LPSINT) &amp; MemSize) ||
01145         !<a class="code" href="../../d2/d1/object_8c.html#a7">MemAlloc</a> (MemSize, (HGLOBAL FAR *)&amp;hMem, (LPMEMPTR) &amp; Buff) ||
01146         !<a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a19">GetCPElement</a> (cp, Index, Buff, MemSize))
01147     {
01148         <span class="keywordflow">if</span> (<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> != Buff)
01149         {
01150             <a class="code" href="../../d2/d1/object_8c.html#a9">MemFree</a> (hMem);
01151         }
01152         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01153     }
01154 
01155     <span class="keywordflow">if</span> (lpInTbSize)
01156     {
01157         <a class="code" href="../../d7/d4/jul98_2test_2getcsa_8h.html#a7">GetCLUTinfo</a>(Tag, Buff, &amp;inputChan, &amp;outputChan, 
01158                 &amp;Grids, &amp;inputEnt, &amp;outputEnt, &amp;i);
01159 
01160         <span class="keywordflow">if</span> (inputChan != 3)
01161         {
01162             <a class="code" href="../../d2/d1/object_8c.html#a9">MemFree</a> (hMem);
01163             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01164         }
01165 
01166         *lpInTbSize = inputChan * inputEnt * 6;  <span class="comment">// Number of INT bytes</span>
01167         *lpGrids = Grids;
01168     }
01169 
01170     <span class="keywordflow">if</span> (lpOutTbSize)
01171     {
01172         <a class="code" href="../../d7/d4/jul98_2test_2getcsa_8h.html#a7">GetCLUTinfo</a>(Tag, Buff, &amp;inputChan, &amp;outputChan, 
01173                 &amp;Grids, &amp;inputEnt, &amp;outputEnt, &amp;i);
01174 
01175         <span class="keywordflow">if</span> ((outputChan != 3) &amp;&amp; (outputChan != 4))
01176         {
01177             <a class="code" href="../../d2/d1/object_8c.html#a9">MemFree</a> (hMem);
01178             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01179         }
01180         *lpOutTbSize = outputChan * outputEnt * 6; <span class="comment">// Number of INT bytes</span>
01181         *lpGrids = Grids;
01182     }
01183 
01184     <a class="code" href="../../d2/d1/object_8c.html#a9">MemFree</a> (hMem);
01185     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01186 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a14" doxytag="dec97/dll32/profcrd.c::GetHostColorRenderingDictionary" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL GetHostColorRenderingDictionary           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Intent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpMem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpcbSize</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d5/dec97_2dll32_2profcrd_8c-source.html#l00559">559</a> of file <a class="el" href="../../d0/d5/dec97_2dll32_2profcrd_8c-source.html">dec97/dll32/profcrd.c</a>.
<p>
References <a class="el" href="../../d3/d8/ps2_8c-source.html#l05203">CreateHostLutCRD()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00074">CSIG</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04007">DoesCPTagExist()</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l00426">GetCPTagIndex()</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00306">icAbsoluteColorimetric</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00303">icPerceptual</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00304">icRelativeColorimetric</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00305">icSaturation</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00145">icSigBToA0Tag</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00146">icSigBToA1Tag</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00147">icSigBToA2Tag</a>, <a class="el" href="../../d2/d9/cmchek_8c-source.html#l00095">Index</a>, <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00109">Intent</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00105">LPSINT</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d7/d6/aug98_2dll32_2icmdll_8h-source.html#l00011">SINT</a>.
<p>
<pre class="fragment"><div>00561 {
00562     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a> <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>;
00563     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a> Ret;
00564     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a17">CSIG</a> BToAxTag;
00565 
00566     <span class="keywordflow">if</span> (!cp)
00567         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00568 
00569     <span class="keywordflow">if</span> ((lpMem == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) || (*lpcbSize == 0))
00570     {
00571         lpMem = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00572         *lpcbSize = 0;
00573     }
00574     Ret = 0;
00575 
00576     <span class="keywordflow">switch</span> (<a class="code" href="../../d3/d8/aug98_2test_2main_8c.html#a28">Intent</a>)
00577     {
00578         <span class="keywordflow">case</span> <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a142">icPerceptual</a>:
00579             BToAxTag = <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a23">icSigBToA0Tag</a>;
00580             <span class="keywordflow">break</span>;
00581 
00582         <span class="keywordflow">case</span> <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a143">icRelativeColorimetric</a>:
00583         <span class="keywordflow">case</span> <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a145">icAbsoluteColorimetric</a>:
00584             <span class="comment">// Use RelativeColorimetric to calculate this CRD.</span>
00585             BToAxTag = <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a24">icSigBToA1Tag</a>;
00586             <span class="keywordflow">break</span>;
00587 
00588         <span class="keywordflow">case</span> <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a144">icSaturation</a>:
00589             BToAxTag = <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a25">icSigBToA2Tag</a>;
00590             <span class="keywordflow">break</span>;
00591 
00592         <span class="keywordflow">default</span>:
00593            *lpcbSize = (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>) Ret;
00594             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00595     }
00596 
00597     <span class="keywordflow">if</span> (<a class="code" href="../../d2/d9/ps2_8c.html#a189">DoesCPTagExist</a> (cp, BToAxTag) &amp;&amp;
00598         <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a12">GetCPTagIndex</a> (cp, BToAxTag, (LPSINT) &amp; Index))
00599     {
00600         Ret = <a class="code" href="../../d2/d9/ps2_8c.html#a235">CreateHostLutCRD</a> (cp, Index, lpMem, Intent);
00601     }
00602 
00603     *lpcbSize = (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>) Ret;
00604     <span class="keywordflow">return</span> (Ret &gt; 0);
00605 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a12" doxytag="dec97/dll32/profcrd.c::GetHostColorSpaceArray" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL GetHostColorSpaceArray           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>InputIntent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpBuffer</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpcbSize</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d5/dec97_2dll32_2profcrd_8c-source.html#l00347">347</a> of file <a class="el" href="../../d0/d5/dec97_2dll32_2profcrd_8c-source.html">dec97/dll32/profcrd.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00074">CSIG</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l00070">GetCPDevSpace</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l00071">GetCPRenderIntent</a>, <a class="el" href="../../d0/d5/dec97_2dll32_2profcrd_8c-source.html#l00299">GetHostCSA_Intent()</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00256">icSigCmykData</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00252">icSigRgbData</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00307">icUseRenderingIntent</a>, <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00109">Intent</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00107">LPCSIG</a>, <a class="el" href="../../d3/d8/aug98_2dll32_2csprof_8h-source.html#l00012">TYPE_CIEBASEDDEF</a>, and <a class="el" href="../../d3/d8/aug98_2dll32_2csprof_8h-source.html#l00013">TYPE_CIEBASEDDEFG</a>.
<p>
<pre class="fragment"><div>00349 {
00350     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a17">CSIG</a> ColorSpace, <a class="code" href="../../d3/d8/aug98_2test_2main_8c.html#a28">Intent</a>;
00351     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> Success = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00352 
00353     <span class="keywordflow">if</span> (!cp)
00354         <span class="keywordflow">return</span> Success;
00355 
00356     <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d9/ps2_8c.html#a41">GetCPDevSpace</a> (cp, (LPCSIG) &amp; ColorSpace) ||
00357         !<a class="code" href="../../d2/d9/ps2_8c.html#a42">GetCPRenderIntent</a> (cp, (LPCSIG) &amp; Intent))
00358     {
00359         <span class="keywordflow">return</span> Success;
00360     }
00361     <span class="keywordflow">if</span> (InputIntent == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a146">icUseRenderingIntent</a>)
00362         InputIntent = (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)<a class="code" href="../../d3/d8/aug98_2test_2main_8c.html#a28">Intent</a>;
00363 
00364     <span class="keywordflow">if</span> (!Success)
00365     {
00366         <span class="keywordflow">switch</span> (ColorSpace)
00367         {
00368             <span class="keywordflow">case</span> <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a114">icSigRgbData</a>:
00369                 Success = <a class="code" href="../../d1/d6/jul98_2dll32_2profcrd_8c.html#a4">GetHostCSA_Intent</a> (cp, lpBuffer, lpcbSize,
00370                           (CSIG) InputIntent, TYPE_CIEBASEDDEF);
00371                 <span class="keywordflow">break</span>;
00372             <span class="keywordflow">case</span> <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a118">icSigCmykData</a>:
00373                 Success = <a class="code" href="../../d1/d6/jul98_2dll32_2profcrd_8c.html#a4">GetHostCSA_Intent</a> (cp, lpBuffer, lpcbSize,
00374                           (CSIG) InputIntent, TYPE_CIEBASEDDEFG);
00375                 <span class="keywordflow">break</span>;
00376             <span class="keywordflow">default</span>:
00377                 <span class="keywordflow">break</span>;
00378         }
00379     }
00380     <span class="keywordflow">return</span> Success;
00381 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a10" doxytag="dec97/dll32/profcrd.c::GetHostCSA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL GetHostCSA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpMem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpcbSize</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>InputIntent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Index</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>Type</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d5/dec97_2dll32_2profcrd_8c-source.html#l00135">135</a> of file <a class="el" href="../../d0/d5/dec97_2dll32_2profcrd_8c-source.html">dec97/dll32/profcrd.c</a>.
<p>
References <a class="el" href="../../d0/d7/halvprnt_8c-source.html#l00031">BYTE</a>, <a class="el" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a48a47">CP_POSTSCRIPT_ERR</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l05728">CreateHostInputOutputArray()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00074">CSIG</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d6/aug98_2dll32_2icmdll_8h-source.html#l00010">FAR</a>, <a class="el" href="../../d9/d4/aug98_2dll32_2profcrd_8c-source.html#l00099">GetCLUTinfo()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l00069">GetCPConnSpace</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l00557">GetCPElement()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04143">GetCPElementSize()</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l00485">GetCPElementType()</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l00461">GetCPTagSig()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04074">GetCPWhitePoint()</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00248">icSigLabData</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00220">icSigLut16Type</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00221">icSigLut8Type</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00247">icSigXYZData</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00347">icUInt16Number</a>, <a class="el" href="../../d2/d9/cmchek_8c-source.html#l00095">Index</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00118">lpcpLut16Type</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00119">lpcpLut8Type</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00107">LPCSIG</a>, <a class="el" href="../../d3/d5/aug98_2dll32_2profcrd_8h-source.html#l00028">LPHOSTCLUT</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00109">LPMEMPTR</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00106">LPSFLOAT</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00105">LPSINT</a>, <a class="el" href="../../d3/d0/object_8c-source.html#l00205">MemAlloc()</a>, <a class="el" href="../../d3/d0/object_8c-source.html#l00260">MemFree()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00080">MEMPTR</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l00021">SetCPLastError()</a>, <a class="el" href="../../d7/d6/aug98_2dll32_2icmdll_8h-source.html#l00011">SINT</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d3/d8/aug98_2dll32_2csprof_8h-source.html#l00012">TYPE_CIEBASEDDEF</a>, <a class="el" href="../../d3/d8/aug98_2dll32_2csprof_8h-source.html#l00013">TYPE_CIEBASEDDEFG</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00135">ui16toSINT</a>, and <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00064">USHORT</a>.
<p>
<pre class="fragment"><div>00137 {
00138     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a17">CSIG</a>    PCS, LutTag;
00139     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a17">CSIG</a>    IntentSig;
00140     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>    nInputCh, nOutputCh, nGrids, SecondGrids;
00141     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>    nInputTable, nOutputTable, nNumbers;
00142     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>    i, j, k;
00143     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>  lpTable;
00144     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>  lpOldMem = lpMem;
00145     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>  lpLut = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00146     HGLOBAL hLut = 0;
00147     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>    LutSize;
00148     <a class="code" href="../../d2/d6/aug98_2dll32_2profcrd_8h.html#a3">LPHOSTCLUT</a> lpHostClut;
00149 
00150     <span class="comment">// Check if we can generate the CS.</span>
00151     <span class="comment">// If we cannot find the required tag - we will return false</span>
00152     <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d9/ps2_8c.html#a40">GetCPConnSpace</a> (cp, (LPCSIG) &amp; PCS) ||
00153         (PCS != <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a110">icSigLabData</a>) &amp;&amp; (PCS != <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a109">icSigXYZData</a>) ||
00154         !<a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a15">GetCPTagSig</a> (cp, Index, (LPCSIG) &amp; IntentSig))
00155     {
00156         <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00157     }
00158     <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a16">GetCPElementType</a> (cp, Index, (LPCSIG) &amp; LutTag) ||
00159         ((LutTag != <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a91">icSigLut8Type</a>) &amp;&amp; (LutTag != <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a90">icSigLut16Type</a>)) ||
00160         !<a class="code" href="../../d2/d9/ps2_8c.html#a194">GetCPElementSize</a> (cp, Index, (LPSINT) &amp; LutSize) ||
00161         !<a class="code" href="../../d2/d1/object_8c.html#a7">MemAlloc</a> (LutSize, (HGLOBAL FAR *) &amp;hLut, (LPMEMPTR) &amp; lpLut) ||
00162         !<a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a19">GetCPElement</a> (cp, Index, lpLut, LutSize))
00163     {
00164         <span class="keywordflow">if</span> (0 != hLut)
00165         {
00166             <a class="code" href="../../d2/d1/object_8c.html#a9">MemFree</a> (hLut);
00167         }
00168         <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00169     }
00170 
00171     <span class="comment">// Estimate the memory size required to hold CS</span>
00172     <a class="code" href="../../d7/d4/jul98_2test_2getcsa_8h.html#a7">GetCLUTinfo</a>(LutTag, lpLut, &amp;nInputCh, &amp;nOutputCh, 
00173                 &amp;nGrids, &amp;nInputTable, &amp;nOutputTable, &amp;i);
00174 
00175     <span class="keywordflow">if</span> (!(nOutputCh == 3) ||
00176         !((nInputCh == 3) &amp;&amp; (Type == <a class="code" href="../../d2/d9/aug98_2dll32_2csprof_8h.html#a0">TYPE_CIEBASEDDEF</a>)) &amp;&amp;
00177         !((nInputCh == 4) &amp;&amp; (Type == <a class="code" href="../../d2/d9/aug98_2dll32_2csprof_8h.html#a1">TYPE_CIEBASEDDEFG</a>)))
00178     {
00179         <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a39">SetCPLastError</a> (CP_POSTSCRIPT_ERR);
00180         <a class="code" href="../../d2/d1/object_8c.html#a9">MemFree</a> (hLut);
00181         <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00182     }
00183         
00184     <span class="comment">// First Pass. This is a size request</span>
00185     <span class="keywordflow">if</span> (lpMem == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)                  
00186     {
00187         <span class="keywordflow">if</span> (Type == <a class="code" href="../../d2/d9/aug98_2dll32_2csprof_8h.html#a1">TYPE_CIEBASEDDEFG</a>)
00188             *lpcbSize = nOutputCh * nGrids * nGrids * nGrids * nGrids;
00189         <span class="keywordflow">else</span>
00190             *lpcbSize = nOutputCh * nGrids * nGrids * nGrids;
00191         *lpcbSize = *lpcbSize             +   <span class="comment">// size of RenderTable 8-bits only</span>
00192             nInputCh * nInputTable * i    +   <span class="comment">// size of input table 8/16-bits</span>
00193             nOutputCh * nOutputTable * i  +   <span class="comment">// size of output table 8/16-bits</span>
00194             <span class="keyword">sizeof</span>(<a class="code" href="../../d7/d6/structtagHOSTCLUT.html">HOSTCLUT</a>) + 1024;          <span class="comment">// data structure + extra safe space</span>
00195         <a class="code" href="../../d2/d1/object_8c.html#a9">MemFree</a> (hLut);
00196         <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
00197     }
00198 
00199     <span class="comment">// Second pass. constructure real HostCSA</span>
00200     lpHostClut = (<a class="code" href="../../d2/d6/aug98_2dll32_2profcrd_8h.html#a3">LPHOSTCLUT</a>)lpMem;
00201     lpMem += <span class="keyword">sizeof</span>(<a class="code" href="../../d7/d6/structtagHOSTCLUT.html">HOSTCLUT</a>);
00202     lpHostClut-&gt;size = <span class="keyword">sizeof</span>(<a class="code" href="../../d7/d6/structtagHOSTCLUT.html">HOSTCLUT</a>);
00203     lpHostClut-&gt;pcs = PCS;
00204     lpHostClut-&gt;intent = InputIntent;
00205     lpHostClut-&gt;lutBits = (LutTag == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a91">icSigLut8Type</a>)? 8:16;
00206 
00207     <span class="comment">// Get info about Illuminant White Point from the header</span>
00208     <a class="code" href="../../d2/d9/ps2_8c.html#a191">GetCPWhitePoint</a> (cp, (LPSFLOAT)lpHostClut-&gt;whitePoint);          <span class="comment">// .. Illuminant</span>
00209 
00210     lpHostClut-&gt;inputChan = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>)nInputCh;
00211     lpHostClut-&gt;outputChan = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>)nOutputCh;
00212     lpHostClut-&gt;clutPoints = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>)nGrids;
00213     lpHostClut-&gt;inputEnt = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a>)nInputTable;
00214     lpHostClut-&gt;outputEnt = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a>)nOutputTable;
00215     <span class="comment">// Input Array</span>
00216     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a237">CreateHostInputOutputArray</a> (lpMem, lpHostClut-&gt;inputArray, 
00217              nInputCh, nInputTable, 0, LutTag, lpLut);
00218 
00219     <span class="keywordflow">if</span> (Type == <a class="code" href="../../d2/d9/aug98_2dll32_2csprof_8h.html#a1">TYPE_CIEBASEDDEFG</a>)
00220     {
00221         i = nInputTable * nInputCh +
00222             nGrids * nGrids * nGrids * nGrids * nOutputCh;
00223     } <span class="keywordflow">else</span>
00224     {
00225         i = nInputTable * nInputCh +
00226             nGrids * nGrids * nGrids * nOutputCh;
00227     }
00228     <span class="comment">// ourput array</span>
00229     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a237">CreateHostInputOutputArray</a> (lpMem, lpHostClut-&gt;outputArray, 
00230              nOutputCh, nOutputTable, i, LutTag, lpLut);
00231  <span class="comment">//********** /Table</span>
00232 
00233     lpHostClut-&gt;clut = lpMem;
00234     nNumbers = nGrids * nGrids * nOutputCh;
00235     SecondGrids = 1;
00236     <span class="keywordflow">if</span> (Type == <a class="code" href="../../d2/d9/aug98_2dll32_2csprof_8h.html#a1">TYPE_CIEBASEDDEFG</a>)
00237     {
00238         SecondGrids = nGrids;
00239     }
00240     <span class="keywordflow">for</span> (i = 0; i &lt; nGrids; i++)        <span class="comment">// Nh strings should be sent</span>
00241     {
00242         <span class="keywordflow">for</span> (k = 0; k &lt; SecondGrids; k++)
00243         {
00244             <span class="keywordflow">if</span> (LutTag == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a91">icSigLut8Type</a>)
00245             {
00246                 lpTable = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>) (((<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a37">lpcpLut8Type</a>) lpLut)-&gt;lut.data) +
00247                     nInputTable * nInputCh +
00248                     nNumbers * (i * SecondGrids + k);
00249             } <span class="keywordflow">else</span>
00250             {
00251                 lpTable = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>) (((<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a36">lpcpLut16Type</a>) lpLut)-&gt;lut.data) +
00252                     2 * nInputTable * nInputCh +
00253                     2 * nNumbers * (i * SecondGrids + k);
00254             }
00255 
00256             <span class="keywordflow">if</span> (LutTag == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a91">icSigLut8Type</a>)
00257             {
00258                 <span class="comment">// Copy 8-bit data.</span>
00259                 MemCopy(lpMem, lpTable, nNumbers);
00260                 lpMem += nNumbers;
00261             }
00262             <span class="keywordflow">else</span>
00263             {
00264                 <span class="comment">// convert 16 bit integer to right format. then copy only 8 bits.</span>
00265                 <span class="keywordflow">for</span> (j = 0; j &lt; nNumbers; j++)
00266                 {
00267                     *lpMem++ = (<a class="code" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a>)(<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a2">ui16toSINT</a> (lpTable) / 256);
00268                     lpTable += <span class="keyword">sizeof</span> (<a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a185">icUInt16Number</a>);
00269                 }
00270             }
00271         }
00272     }
00273 
00274     *lpcbSize = (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>) (lpMem - lpOldMem);
00275 
00276     <a class="code" href="../../d2/d1/object_8c.html#a9">MemFree</a> (hLut);
00277     <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
00278 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a11" doxytag="dec97/dll32/profcrd.c::GetHostCSA_Intent" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL GetHostCSA_Intent           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpBuffer</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpcbSize</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Intent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>Type</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d5/dec97_2dll32_2profcrd_8c-source.html#l00299">299</a> of file <a class="el" href="../../d0/d5/dec97_2dll32_2profcrd_8c-source.html">dec97/dll32/profcrd.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00074">CSIG</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04007">DoesCPTagExist()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l00426">GetCPTagIndex()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l05792">GetHostCSA()</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00306">icAbsoluteColorimetric</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00303">icPerceptual</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00304">icRelativeColorimetric</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00305">icSaturation</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00139">icSigAToB0Tag</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00140">icSigAToB1Tag</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00141">icSigAToB2Tag</a>, <a class="el" href="../../d2/d9/cmchek_8c-source.html#l00095">Index</a>, <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00109">Intent</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00105">LPSINT</a>, and <a class="el" href="../../d7/d6/aug98_2dll32_2icmdll_8h-source.html#l00011">SINT</a>.
<p>
Referenced by <a class="el" href="../../d9/d4/aug98_2dll32_2profcrd_8c-source.html#l01331">GetCRDInputOutputArraySize()</a>, and <a class="el" href="../../d9/d4/aug98_2dll32_2profcrd_8c-source.html#l00532">GetHostColorSpaceArray()</a>.
<p>
<pre class="fragment"><div>00301 {
00302     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a> <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>;
00303     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> Success = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00304     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a17">CSIG</a> AToBxTag;
00305 
00306     <span class="keywordflow">switch</span> (<a class="code" href="../../d3/d8/aug98_2test_2main_8c.html#a28">Intent</a>)
00307     {
00308         <span class="keywordflow">case</span> <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a142">icPerceptual</a>:
00309             AToBxTag = <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a17">icSigAToB0Tag</a>;
00310             <span class="keywordflow">break</span>;
00311         <span class="keywordflow">case</span> <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a143">icRelativeColorimetric</a>:
00312         <span class="keywordflow">case</span> <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a145">icAbsoluteColorimetric</a>:
00313             <span class="comment">// use RelativeColorimetric data to build it.</span>
00314             AToBxTag = <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a18">icSigAToB1Tag</a>;
00315             <span class="keywordflow">break</span>;
00316         <span class="keywordflow">case</span> <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a144">icSaturation</a>:
00317             AToBxTag = <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a19">icSigAToB2Tag</a>;
00318             <span class="keywordflow">break</span>;
00319         <span class="keywordflow">default</span>:
00320             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00321             <span class="keywordflow">break</span>;
00322     }
00323     <span class="keywordflow">if</span> (<a class="code" href="../../d2/d9/ps2_8c.html#a189">DoesCPTagExist</a> (cp, AToBxTag) &amp;&amp;
00324         <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a12">GetCPTagIndex</a> (cp, AToBxTag, (LPSINT) &amp; Index))
00325     {
00326         Success = <a class="code" href="../../d2/d9/ps2_8c.html#a200">GetHostCSA</a>(cp, lpBuffer, lpcbSize, Intent, Index, Type);
00327     }
00328 
00329     <span class="keywordflow">return</span> Success;
00330 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a27" doxytag="dec97/dll32/profcrd.c::GetPS2PreviewColorRenderingDictionary" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL EXTERN GetPS2PreviewColorRenderingDictionary           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cpDev</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cpTarget</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Intent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpMem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpcbSize</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>bAllowBinary</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d5/dec97_2dll32_2profcrd_8c-source.html#l01715">1715</a> of file <a class="el" href="../../d0/d5/dec97_2dll32_2profcrd_8c-source.html">dec97/dll32/profcrd.c</a>.
<p>
References <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00007">BeginArray</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00011">BeginDict</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00005">BeginString</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00060">BYTES</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00066">CRDBegin</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00067">CRDEnd</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l02709">CreateInputArray()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l02834">CreateOutputArray()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00074">CSIG</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00014">DictType</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l06068">DoHostConversionCRD()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l06226">DoHostConversionCSA()</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04987">EnableGlobalDict()</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00008">EndArray</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00012">EndDict</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00057">EndOp</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00006">EndString</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d6/aug98_2dll32_2icmdll_8h-source.html#l00010">FAR</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l00070">GetCPDevSpace</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l05090">GetCRDInputOutputArraySize()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l05662">GetHostColorRenderingDictionary()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l06024">GetHostColorSpaceArray()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l02953">GetPublicArrayName()</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00256">icSigCmykData</a>, <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00109">Intent</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00107">LPCSIG</a>, <a class="el" href="../../d3/d5/aug98_2dll32_2profcrd_8h-source.html#l00028">LPHOSTCLUT</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00109">LPMEMPTR</a>, <a class="el" href="../../d3/d8/aug98_2dll32_2csprof_8h-source.html#l00016">MAX_LINELENG</a>, <a class="el" href="../../d3/d5/aug98_2dll32_2profcrd_8h-source.html#l00004">MAXCHANNELS</a>, <a class="el" href="../../d3/d0/object_8c-source.html#l00205">MemAlloc()</a>, <a class="el" href="../../d3/d0/object_8c-source.html#l00260">MemFree()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00080">MEMPTR</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00063">NewLine</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d3/monitor_8c.html#a2">pcs</a>, <a class="el" href="../../d3/d5/aug98_2dll32_2profcrd_8h-source.html#l00005">PREVIEWCRDGRID</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00034">RenderTableTag</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04762">SendCRDABC()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04587">SendCRDBWPoint()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04689">SendCRDLMN()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04893">SendCRDOutputTable()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04621">SendCRDPQR()</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00054">SetGlobalOp</a>, <a class="el" href="../../d7/d6/aug98_2dll32_2icmdll_8h-source.html#l00011">SINT</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l00006">TempBfSize</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00064">USHORT</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l00081">WriteHex</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l00080">WriteInt</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l00072">WriteObject</a>, and <a class="el" href="../../d3/d8/ps2_8c-source.html#l04381">WriteStringToken()</a>.
<p>
<pre class="fragment"><div>01721 {
01722     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>    lpTargetCRD, lpTargetCSA, lpDevCRD;
01723     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>     cbTargetCRD, cbTargetCSA, cbDevCRD;
01724     HGLOBAL   hTargetCRD, hTargetCSA, hDevCRD;
01725     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>      Success = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01726     <span class="keywordtype">float</span>     Input[<a class="code" href="../../d2/d6/aug98_2dll32_2profcrd_8h.html#a0">MAXCHANNELS</a>];
01727     <span class="keywordtype">float</span>     Output[<a class="code" href="../../d2/d6/aug98_2dll32_2profcrd_8h.html#a0">MAXCHANNELS</a>];
01728     <span class="keywordtype">float</span>     Temp[<a class="code" href="../../d2/d6/aug98_2dll32_2profcrd_8h.html#a0">MAXCHANNELS</a>];
01729     <span class="keywordtype">int</span>       i, j, k, l;
01730     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>    lpLineStart;
01731     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>    lpOldMem;
01732     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a17">CSIG</a>      ColorSpace;
01733     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a17">CSIG</a>      DevColorSpace;
01734     <span class="keyword">static</span> <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a17">CSIG</a>      IntentTag;
01735     <span class="keyword">static</span> <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>      PreviewCRDGrid;
01736     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>      OutArraySize, InArraySize;
01737     <span class="keywordtype">char</span>      PublicArrayName[<a class="code" href="../../d8/d8/aug98_2dll32_2csprof_8c.html#a1">TempBfSize</a>];
01738     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>      TargetGrids, DevGrids;
01739 
01740     <span class="comment">// First pass, return the size of Previewind CRD.</span>
01741     <span class="keywordflow">if</span> (lpMem == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
01742     {
01743         <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>   dwOutArraySizr = 0;
01744 
01745         i = 3;      <span class="comment">// Default output channal;</span>
01746         <span class="keywordflow">if</span> ((<a class="code" href="../../d2/d9/ps2_8c.html#a41">GetCPDevSpace</a> (cpDev, (LPCSIG) &amp; DevColorSpace)) &amp;&amp;
01747                           (DevColorSpace == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a118">icSigCmykData</a>))
01748         {
01749             i = 4;
01750         }
01751 
01752         <span class="comment">// Get the input array size IntentTag and Grid of the Target icc profile.</span>
01753         <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d9/ps2_8c.html#a199">GetCRDInputOutputArraySize</a>(cpTarget, Intent,
01754             &amp;InArraySize, NULL, &amp;IntentTag, &amp;TargetGrids ))
01755             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01756 
01757         <span class="comment">// Get the output array size IntentTag and Grid of the Dev icc profile.</span>
01758         <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d9/ps2_8c.html#a199">GetCRDInputOutputArraySize</a>(cpDev, Intent,
01759             NULL, &amp;OutArraySize, &amp;IntentTag, &amp;DevGrids ))
01760             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01761 
01762         PreviewCRDGrid = (TargetGrids &gt; DevGrids)? TargetGrids: DevGrids;
01763 
01764         <span class="comment">// Min proofing CRD grid will be PREVIEWCRDGRID</span>
01765         <span class="keywordflow">if</span> (PreviewCRDGrid &lt; <a class="code" href="../../d2/d6/aug98_2dll32_2profcrd_8h.html#a1">PREVIEWCRDGRID</a>)
01766             PreviewCRDGrid = <a class="code" href="../../d2/d6/aug98_2dll32_2profcrd_8h.html#a1">PREVIEWCRDGRID</a>;
01767         *lpcbSize = PreviewCRDGrid * PreviewCRDGrid * PreviewCRDGrid * 
01768                     i * 2 +           <span class="comment">// CLUT size (Hex output)</span>
01769                     OutArraySize +    <span class="comment">// Output Array size</span>
01770                     InArraySize  +    <span class="comment">// Input Array size</span>
01771                     4096;             <span class="comment">// Extra PostScript staff.</span>
01772          <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
01773     }
01774 
01775     <span class="comment">// Second pass, return the Previewind CRD.</span>
01776     lpOldMem = lpMem;
01777 
01778     <span class="comment">//Query the sizes of Host TargetCRD, TargetCSA and DevCRD.</span>
01779     <span class="keywordflow">if</span> (!(<a class="code" href="../../d2/d9/ps2_8c.html#a201">GetHostColorRenderingDictionary</a> (cpTarget, Intent, NULL, &amp;cbTargetCRD)) ||
01780         !(<a class="code" href="../../d2/d9/ps2_8c.html#a202">GetHostColorSpaceArray</a> (cpTarget, Intent, NULL, &amp;cbTargetCSA)) ||
01781         !(<a class="code" href="../../d2/d9/ps2_8c.html#a201">GetHostColorRenderingDictionary</a> (cpDev, Intent, NULL, &amp;cbDevCRD)))
01782     {
01783         <span class="keywordflow">return</span> (Success);
01784     }
01785 
01786     <span class="comment">//Alloc the buffers for Host TargetCRD, TargetCSA and DevCRD.</span>
01787     hTargetCRD = hTargetCSA = hDevCRD = 0;
01788     <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d1/object_8c.html#a7">MemAlloc</a> (cbTargetCRD, (HGLOBAL FAR *)&amp;hTargetCRD, (LPMEMPTR)&amp;lpTargetCRD) ||
01789         !<a class="code" href="../../d2/d1/object_8c.html#a7">MemAlloc</a> (cbTargetCSA, (HGLOBAL FAR *)&amp;hTargetCSA, (LPMEMPTR)&amp;lpTargetCSA) ||
01790         !<a class="code" href="../../d2/d1/object_8c.html#a7">MemAlloc</a> (cbDevCRD, (HGLOBAL FAR *)&amp;hDevCRD, (LPMEMPTR)&amp;lpDevCRD))
01791     {
01792         <span class="keywordflow">goto</span> Done;
01793     }
01794 
01795     <span class="comment">//Build Host TargetCRD, TargetCSA and DevCRD.</span>
01796     <span class="keywordflow">if</span> (!(<a class="code" href="../../d2/d9/ps2_8c.html#a201">GetHostColorRenderingDictionary</a> (cpTarget, Intent, lpTargetCRD, &amp;cbTargetCRD)) ||
01797         !(<a class="code" href="../../d2/d9/ps2_8c.html#a202">GetHostColorSpaceArray</a> (cpTarget, Intent, lpTargetCSA, &amp;cbTargetCSA)) ||
01798         !(<a class="code" href="../../d2/d9/ps2_8c.html#a201">GetHostColorRenderingDictionary</a> (cpDev, Intent, lpDevCRD, &amp;cbDevCRD)))
01799     {
01800         <span class="keywordflow">goto</span> Done;
01801     }
01802 
01803 <span class="comment">//  Build Proofing CRD based on Host TargetCRD TargetCSA and DevCRD.</span>
01804 <span class="comment">//  We use TargetCRD input tables and matrix as the</span>
01805 <span class="comment">//  input tables and matrix of the ProofCRD.</span>
01806 <span class="comment">//  We use DevCRD output tables as the output tables of the ProofCRD.</span>
01807 
01808 <span class="comment">//******** Define golbal array used in EncodeABC and RenderTaber</span>
01809     <a class="code" href="../../d2/d9/ps2_8c.html#a217">GetPublicArrayName</a> (cpDev, IntentTag, PublicArrayName);
01810     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
01811     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, CRDBegin);
01812 
01813     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a220">EnableGlobalDict</a>(lpMem);
01814 
01815     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a215">CreateInputArray</a> (lpMem, (SINT)0, (SINT)0, (MEMPTR)PublicArrayName, 
01816              (CSIG)0, NULL, bAllowBinary, lpTargetCRD);
01817 
01818     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a216">CreateOutputArray</a> (lpMem, (SINT)0, (SINT)0, (SINT)0, 
01819              (MEMPTR)PublicArrayName, (CSIG)0, NULL, bAllowBinary, lpDevCRD);
01820 
01821     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
01822     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, SetGlobalOp);
01823     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndOp);
01824 
01825 <span class="comment">//************* Start writing  CRD  ****************************</span>
01826     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
01827     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginDict);    <span class="comment">// Begin dictionary</span>
01828     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, DictType); <span class="comment">// Dictionary type</span>
01829 
01830 <span class="comment">//********** Send Black/White Point.</span>
01831     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a203">SendCRDBWPoint</a>(lpMem, 
01832         ((LPHOSTCLUT)lpTargetCRD)-&gt;whitePoint);
01833 
01834 <span class="comment">//********** Send PQR - For White Point correction</span>
01835     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a204">SendCRDPQR</a>(lpMem, Intent, 
01836         ((LPHOSTCLUT)lpTargetCRD)-&gt;whitePoint);
01837 
01838 <span class="comment">//********** Send LMN - For Absolute Colorimetric use WhitePoint's XYZs</span>
01839     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a205">SendCRDLMN</a>(lpMem, Intent, 
01840         ((LPHOSTCLUT)lpTargetCRD)-&gt;whitePoint,
01841         ((LPHOSTCLUT)lpTargetCRD)-&gt;mediaWP,
01842         ((LPHOSTCLUT)lpTargetCRD)-&gt;pcs);
01843 
01844 <span class="comment">//********** Create MatrixABC and  EncodeABC  stuff</span>
01845     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a206">SendCRDABC</a>(lpMem, PublicArrayName, 
01846         ((LPHOSTCLUT)lpTargetCRD)-&gt;pcs,
01847         ((LPHOSTCLUT)lpTargetCRD)-&gt;inputChan,
01848         NULL,
01849         ((LPHOSTCLUT)lpTargetCRD)-&gt;e,
01850         (((LPHOSTCLUT)lpTargetCRD)-&gt;lutBits == 8)? icSigLut8Type:icSigLut16Type,
01851         bAllowBinary);
01852 
01853 <span class="comment">//********** /RenderTable</span>
01854     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
01855     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, RenderTableTag);
01856     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginArray);
01857 
01858     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a44">WriteInt</a> (lpMem, PreviewCRDGrid);  <span class="comment">// Send down Na</span>
01859     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a44">WriteInt</a> (lpMem, PreviewCRDGrid);  <span class="comment">// Send down Nb</span>
01860     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a44">WriteInt</a> (lpMem, PreviewCRDGrid);  <span class="comment">// Send down Nc</span>
01861 
01862     lpLineStart = lpMem;
01863     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
01864     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginArray);
01865     ColorSpace = ((<a class="code" href="../../d2/d6/aug98_2dll32_2profcrd_8h.html#a3">LPHOSTCLUT</a>)lpDevCRD)-&gt;pcs;
01866     <span class="keywordflow">for</span> (i = 0; i &lt; PreviewCRDGrid; i++)        <span class="comment">// Na strings should be sent</span>
01867     {
01868         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
01869         lpLineStart = lpMem;
01870         <span class="keywordflow">if</span> (bAllowBinary)
01871         {
01872             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a228">WriteStringToken</a> (lpMem, 143, 
01873                 PreviewCRDGrid * PreviewCRDGrid * ((LPHOSTCLUT)lpDevCRD)-&gt;outputChan);
01874         }
01875         <span class="keywordflow">else</span>
01876         {
01877             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginString);
01878         }
01879         Input[0] = ((<span class="keywordtype">float</span>)i) / (PreviewCRDGrid - 1);
01880         <span class="keywordflow">for</span> (j = 0; j &lt; PreviewCRDGrid; j++)
01881         {
01882             Input[1] = ((<span class="keywordtype">float</span>)j) / (PreviewCRDGrid - 1);
01883             <span class="keywordflow">for</span> (k = 0; k &lt; PreviewCRDGrid; k++)
01884             {
01885                 Input[2] = ((<span class="keywordtype">float</span>)k) / (PreviewCRDGrid - 1);
01886 
01887                 <a class="code" href="../../d2/d9/ps2_8c.html#a243">DoHostConversionCRD</a> ((LPHOSTCLUT)lpTargetCRD, NULL, Input, Output, ColorSpace, 1);
01888                 <a class="code" href="../../d2/d9/ps2_8c.html#a242">DoHostConversionCSA</a> ((LPHOSTCLUT)lpTargetCSA, Output, Temp);
01889                 <a class="code" href="../../d2/d9/ps2_8c.html#a243">DoHostConversionCRD</a> ((LPHOSTCLUT)lpDevCRD, (LPHOSTCLUT)lpTargetCSA, 
01890                                      Temp, Output, 0, 0);
01891                 <span class="keywordflow">for</span> (l = 0; l &lt; ((<a class="code" href="../../d2/d6/aug98_2dll32_2profcrd_8h.html#a3">LPHOSTCLUT</a>)lpDevCRD)-&gt;outputChan; l++)
01892                 {
01893                     <span class="keywordflow">if</span> (bAllowBinary)
01894                     {
01895                         *lpMem++ = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a12">BYTES</a>)(Output[l]*255);
01896                     }
01897                     <span class="keywordflow">else</span>
01898                     {
01899                         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a45">WriteHex</a> (lpMem, (USHORT)(Output[l]*255));
01900                         <span class="keywordflow">if</span> (((<a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>) (lpMem - lpLineStart)) &gt; <a class="code" href="../../d2/d9/aug98_2dll32_2csprof_8h.html#a4">MAX_LINELENG</a>)
01901                         {
01902                             lpLineStart = lpMem;
01903                             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
01904                         }
01905                     }
01906                 }
01907             }
01908         }
01909         <span class="keywordflow">if</span> (!bAllowBinary)
01910             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndString);
01911     }
01912     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
01913     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndArray);
01914     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a44">WriteInt</a> (lpMem, ((LPHOSTCLUT)lpDevCRD)-&gt;outputChan);
01915 
01916 <span class="comment">//********** Send Output Table.</span>
01917     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a207">SendCRDOutputTable</a>(lpMem, PublicArrayName, 
01918         ((LPHOSTCLUT)lpDevCRD)-&gt;outputChan,
01919         (((LPHOSTCLUT)lpDevCRD)-&gt;lutBits == 8)? icSigLut8Type:icSigLut16Type,
01920         TRUE,
01921         bAllowBinary);
01922 
01923 
01924     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
01925     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndArray);
01926     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndDict); <span class="comment">// End dictionary definition</span>
01927     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
01928     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, CRDEnd);
01929     Success = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01930 
01931 Done:
01932     *lpcbSize = (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)(lpMem - lpOldMem);
01933 
01934     <span class="keywordflow">if</span> (hTargetCRD)
01935          <a class="code" href="../../d2/d1/object_8c.html#a9">MemFree</a>(hTargetCRD);
01936     <span class="keywordflow">if</span> (hTargetCSA)
01937          <a class="code" href="../../d2/d1/object_8c.html#a9">MemFree</a>(hTargetCSA);
01938     <span class="keywordflow">if</span> (hDevCRD)
01939          <a class="code" href="../../d2/d1/object_8c.html#a9">MemFree</a>(hDevCRD);
01940     <span class="keywordflow">return</span> (Success);
01941 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a16" doxytag="dec97/dll32/profcrd.c::inverse_g" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> float inverse_g           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">float&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>f</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d5/dec97_2dll32_2profcrd_8c-source.html#l00643">643</a> of file <a class="el" href="../../d0/d5/dec97_2dll32_2profcrd_8c-source.html">dec97/dll32/profcrd.c</a>.
<p>
<pre class="fragment"><div>00644 {
00645     <span class="keywordtype">double</span> frc;
00646     <span class="keywordflow">if</span> (f &gt;= (6.0*6.0*6.0)/(29.0*29.0*29.0))
00647     {
00648         frc = pow(f, 1.0 / 3.0);
00649     }
00650     <span class="keywordflow">else</span>
00651     {
00652         frc = f * (841.0 / 108.0) + (4.0 / 29.0);
00653     }
00654     <span class="keywordflow">return</span> (<span class="keywordtype">float</span>)frc;
00655 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a8" doxytag="dec97/dll32/profcrd.c::LabToXYZ" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void LabToXYZ           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">float far *&nbsp;</td>
          <td class="mdname" nowrap> <em>Input</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>float far *&nbsp;</td>
          <td class="mdname" nowrap> <em>Output</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>float far *&nbsp;</td>
          <td class="mdname" nowrap> <em>whitePoint</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d5/dec97_2dll32_2profcrd_8c-source.html#l00931">931</a> of file <a class="el" href="../../d0/d5/dec97_2dll32_2profcrd_8c-source.html">dec97/dll32/profcrd.c</a>.
<p>
References <a class="el" href="../../d3/d8/ps2_8c-source.html#l06379">g()</a>.
<p>
<pre class="fragment"><div>00932 {
00933     <span class="keywordtype">float</span>   fL, fa, fb;
00934 
00935     fL = (Input[0] * 50 + 16) / 116;
00936     fa = (Input[1] * 128 - 128) / 500;
00937     fb = (Input[2] * 128 - 128) / 200;
00938     Output[0] = whitePoint[0] * <a class="code" href="../../d2/d9/ps2_8c.html#a244">g</a>(fL + fa);
00939     Output[1] = whitePoint[1] * <a class="code" href="../../d2/d9/ps2_8c.html#a244">g</a>(fL);
00940     Output[2] = whitePoint[2] * <a class="code" href="../../d2/d9/ps2_8c.html#a244">g</a>(fL - fb);
00941 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a24" doxytag="dec97/dll32/profcrd.c::SendCRDABC" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a> SendCRDABC           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpMem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>PublicArrayName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pcs</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>nInputCh</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Buff</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a26">LPSFLOAT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>e</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>LutTag</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>bAllowBinary</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d5/dec97_2dll32_2profcrd_8c-source.html#l01511">1511</a> of file <a class="el" href="../../d0/d5/dec97_2dll32_2profcrd_8c-source.html">dec97/dll32/profcrd.c</a>.
<p>
References <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00007">BeginArray</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00009">BeginFunction</a>, <a class="el" href="../../d3/d8/aug98_2dll32_2csprof_8h-source.html#l00015">CIEXYZRange</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00147">EncodeABCLab1</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00148">EncodeABCLab2</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00030">EncodeABCTag</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00008">EndArray</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00128">EndClip</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00010">EndFunction</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00358">icS15Fixed16Number</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00248">icSigLabData</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00221">icSigLut8Type</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00247">icSigXYZData</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00115">IndexArray</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00110">IndexArray16b</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00087">InputArray</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00118">lpcpLut16Type</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00119">lpcpLut8Type</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00145">MatrixABCLabCRD</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00029">MatrixABCTag</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00080">MEMPTR</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00063">NewLine</a>, <a class="el" href="../../d7/d3/monitor_8c.html#a2">pcs</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00089">PreViewInArray</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00076">RangeABC</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00027">RangeABCTag</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00131">Scale16</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00130">Scale8</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00157">si16f16toSFLOAT</a>, <a class="el" href="../../d7/d6/aug98_2dll32_2icmdll_8h-source.html#l00011">SINT</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00127">StartClip</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l01193">WriteFloat()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l00080">WriteInt</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l00072">WriteObject</a>, and <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l01152">WriteObjectN()</a>.
<p>
<pre class="fragment"><div>01513 {
01514     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>  lpOldMem;
01515     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>    i, j;
01516     <span class="keywordtype">double</span> TempMatrixABC[9];
01517     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpTable;
01518     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpLineStart;
01519     lpOldMem = lpMem;
01520 
01521  <span class="comment">//********** /RangeABC</span>
01522     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
01523     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, RangeABCTag);
01524     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, RangeABC);
01525  <span class="comment">//********** /MatrixABC</span>
01526     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
01527     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, MatrixABCTag);
01528     <span class="keywordflow">if</span> (<a class="code" href="../../d7/d3/monitor_8c.html#a2">pcs</a> == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a109">icSigXYZData</a>)
01529     {
01530         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginArray);
01531         <span class="keywordflow">if</span> (e)
01532         {
01533             <span class="keywordflow">for</span> (i = 0; i &lt; 3; i++)
01534             {
01535                 <span class="keywordflow">for</span> (j = 0; j &lt; 3; j++)
01536                 {
01537                     lpMem += <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a46">WriteFloat</a> (lpMem, e[i + j * 3]);
01538                 }
01539             }
01540         }
01541         <span class="keywordflow">else</span>
01542         {
01543             <span class="keywordflow">if</span> (LutTag == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a91">icSigLut8Type</a>)
01544             {
01545                 lpTable = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>) &amp; ((<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a37">lpcpLut8Type</a>) Buff)-&gt;lut.e00;
01546             } <span class="keywordflow">else</span>
01547             {
01548                 lpTable = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>) &amp; ((<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a36">lpcpLut16Type</a>) Buff)-&gt;lut.e00;
01549             }
01550             <span class="keywordflow">for</span> (i = 0; i &lt; 9; i++)
01551             {
01552                 TempMatrixABC[i] = ((<span class="keywordtype">double</span>) <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a9">si16f16toSFLOAT</a> (lpTable)) / <a class="code" href="../../d2/d9/aug98_2dll32_2csprof_8h.html#a3">CIEXYZRange</a>;
01553                 lpTable += <span class="keyword">sizeof</span> (<a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a192">icS15Fixed16Number</a>);
01554             }
01555             <span class="keywordflow">for</span> (i = 0; i &lt; 3; i++)
01556             {
01557                 <span class="keywordflow">for</span> (j = 0; j &lt; 3; j++)
01558                 {
01559                     lpMem += <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a46">WriteFloat</a> (lpMem, TempMatrixABC[i + j * 3]);
01560                 }
01561             }
01562         }
01563         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndArray);
01564     } <span class="keywordflow">else</span>
01565     {
01566         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, MatrixABCLabCRD);
01567     }
01568  <span class="comment">//********** /EncodeABC</span>
01569     lpLineStart = lpMem;
01570     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
01571     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EncodeABCTag);
01572     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginArray);
01573     <span class="keywordflow">for</span> (i = 0; i &lt; nInputCh; i++)
01574     {
01575         lpLineStart = lpMem;
01576         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
01577 
01578         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginFunction);
01579         <span class="keywordflow">if</span> (<a class="code" href="../../d7/d3/monitor_8c.html#a2">pcs</a> == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a110">icSigLabData</a>)
01580         {
01581             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem,
01582                                   (0 == i) ? EncodeABCLab1 : EncodeABCLab2);
01583         }
01584         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, StartClip);
01585         <span class="keywordflow">if</span> (e)
01586             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, PreViewInArray);
01587         <span class="keywordflow">else</span>
01588             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, InputArray);
01589         lpMem += <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a44">WriteObjectN</a> (lpMem, (MEMPTR) PublicArrayName, lstrlen (PublicArrayName));
01590         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a44">WriteInt</a> (lpMem, i);
01591 
01592         <span class="keywordflow">if</span> (!bAllowBinary)              <span class="comment">// Output ASCII CRD</span>
01593         {
01594             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
01595             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, IndexArray);
01596         } <span class="keywordflow">else</span>
01597         {                               <span class="comment">// Output BINARY CRD</span>
01598             <span class="keywordflow">if</span> (LutTag == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a91">icSigLut8Type</a>)
01599             {
01600                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, IndexArray);
01601             } <span class="keywordflow">else</span>
01602             {
01603                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, IndexArray16b);
01604             }
01605         }
01606         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, (LutTag == icSigLut8Type) ? 
01607                               Scale8 : Scale16);
01608         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndClip);
01609         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndFunction);
01610     }
01611     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndArray);
01612     <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>)(lpMem - lpOldMem);
01613 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a25" doxytag="dec97/dll32/profcrd.c::SendCRDBWPoint" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a> SendCRDBWPoint           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpMem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a26">LPSFLOAT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>whitePoint</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d5/dec97_2dll32_2profcrd_8c-source.html#l01616">1616</a> of file <a class="el" href="../../d0/d5/dec97_2dll32_2profcrd_8c-source.html">dec97/dll32/profcrd.c</a>.
<p>
References <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00007">BeginArray</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00013">BlackPoint</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00022">BlackPointTag</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00008">EndArray</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00080">MEMPTR</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00063">NewLine</a>, <a class="el" href="../../d7/d6/aug98_2dll32_2icmdll_8h-source.html#l00011">SINT</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00021">WhitePointTag</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l01193">WriteFloat()</a>, and <a class="el" href="../../d3/d8/ps2_8c-source.html#l00072">WriteObject</a>.
<p>
<pre class="fragment"><div>01617 {
01618     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>  lpOldMem;
01619     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>    i;
01620 
01621     lpOldMem = lpMem;
01622 
01623 <span class="comment">//********** /BlackPoint</span>
01624     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
01625     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BlackPointTag);
01626     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BlackPoint);
01627 
01628 <span class="comment">//********** /WhitePoint</span>
01629     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
01630     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, WhitePointTag);
01631     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginArray);
01632     <span class="keywordflow">for</span> (i = 0; i &lt; 3; i++)
01633     {
01634         lpMem += <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a46">WriteFloat</a> (lpMem, (<span class="keywordtype">double</span>)(whitePoint[i]));
01635     }
01636     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndArray);
01637     <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>)(lpMem - lpOldMem);
01638 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a22" doxytag="dec97/dll32/profcrd.c::SendCRDLMN" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a> SendCRDLMN           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpMem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Intent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a26">LPSFLOAT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>whitePoint</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a26">LPSFLOAT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>mediaWP</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pcs</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d5/dec97_2dll32_2profcrd_8c-source.html#l01410">1410</a> of file <a class="el" href="../../d0/d5/dec97_2dll32_2profcrd_8c-source.html">dec97/dll32/profcrd.c</a>.
<p>
References <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00007">BeginArray</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00009">BeginFunction</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00061">DivOp</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00142">EncodeLMNLab</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00033">EncodeLMNTag</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00008">EndArray</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00010">EndFunction</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00306">icAbsoluteColorimetric</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00247">icSigXYZData</a>, <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00109">Intent</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00032">MatrixLMNTag</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00080">MEMPTR</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00063">NewLine</a>, <a class="el" href="../../d7/d3/monitor_8c.html#a2">pcs</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00141">RangeLMNLab</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00031">RangeLMNTag</a>, <a class="el" href="../../d7/d6/aug98_2dll32_2icmdll_8h-source.html#l00011">SINT</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l01193">WriteFloat()</a>, and <a class="el" href="../../d3/d8/ps2_8c-source.html#l00072">WriteObject</a>.
<p>
<pre class="fragment"><div>01411 {
01412     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>  lpOldMem;
01413     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>    i, j;
01414 
01415     lpOldMem = lpMem;
01416 
01417 <span class="comment">//********** /MatrixLMN</span>
01418     <span class="keywordflow">if</span> (<a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a145">icAbsoluteColorimetric</a> == <a class="code" href="../../d3/d8/aug98_2test_2main_8c.html#a28">Intent</a>)
01419     {
01420         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
01421         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, MatrixLMNTag);
01422 
01423         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginArray);
01424         <span class="keywordflow">for</span> (i = 0; i &lt; 3; i++)
01425         {
01426             <span class="keywordflow">for</span> (j = 0; j &lt; 3; j++)
01427                 lpMem += <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a46">WriteFloat</a> (lpMem,
01428                     (<span class="keywordtype">double</span>) (i == j) ? whitePoint[i] / mediaWP[i] : 0.0);
01429         }
01430         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndArray);
01431     }
01432  <span class="comment">//********** /RangeLMN</span>
01433     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
01434     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, RangeLMNTag);
01435     <span class="keywordflow">if</span> (<a class="code" href="../../d7/d3/monitor_8c.html#a2">pcs</a> == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a109">icSigXYZData</a>)
01436     {
01437         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginArray);
01438         <span class="keywordflow">for</span> (i = 0; i &lt; 3; i++)
01439         {
01440             lpMem += <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a46">WriteFloat</a> (lpMem, (<span class="keywordtype">double</span>) 0);
01441             lpMem += <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a46">WriteFloat</a> (lpMem, (<span class="keywordtype">double</span>) whitePoint[i]);
01442         }
01443         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndArray);
01444     } <span class="keywordflow">else</span>
01445     {
01446         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, RangeLMNLab);
01447     }
01448 
01449  <span class="comment">//********** /EncodeLMN</span>
01450     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
01451     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EncodeLMNTag);
01452     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginArray);
01453     <span class="keywordflow">for</span> (i = 0; i &lt; 3; i++)
01454     {
01455         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginFunction);
01456         <span class="keywordflow">if</span> (<a class="code" href="../../d7/d3/monitor_8c.html#a2">pcs</a> != <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a109">icSigXYZData</a>)
01457         {
01458             lpMem += <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a46">WriteFloat</a> (lpMem, (<span class="keywordtype">double</span>)whitePoint[i]);
01459             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, DivOp);
01460             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EncodeLMNLab);
01461         }
01462         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndFunction);
01463     }
01464     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndArray);
01465 
01466     <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>)(lpMem - lpOldMem);
01467 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a26" doxytag="dec97/dll32/profcrd.c::SendCRDOutputTable" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a> SendCRDOutputTable           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpMem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>PublicArrayName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>nOutputCh</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>LutTag</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>bHost</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>bAllowBinary</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d5/dec97_2dll32_2profcrd_8c-source.html#l01640">1640</a> of file <a class="el" href="../../d0/d5/dec97_2dll32_2profcrd_8c-source.html">dec97/dll32/profcrd.c</a>.
<p>
References <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00009">BeginFunction</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00083">Clip01</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00010">EndFunction</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00221">icSigLut8Type</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00115">IndexArray</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00110">IndexArray16b</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00080">MEMPTR</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00063">NewLine</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00088">OutputArray</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00090">PreViewOutArray</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00131">Scale16</a>, <a class="el" href="../../d7/d6/aug98_2dll32_2icmdll_8h-source.html#l00011">SINT</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00133">TFunction8</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l00080">WriteInt</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l00072">WriteObject</a>, and <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l01152">WriteObjectN()</a>.
<p>
<pre class="fragment"><div>01642 {
01643     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>  lpOldMem;
01644     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>    i;
01645 
01646     lpOldMem = lpMem;
01647 
01648     <span class="keywordflow">for</span> (i = 0; i &lt; nOutputCh; i++)
01649     {
01650         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
01651         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginFunction);
01652         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, Clip01);
01653         <span class="keywordflow">if</span> (bHost)
01654             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, PreViewOutArray);
01655         <span class="keywordflow">else</span>
01656             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, OutputArray);
01657         lpMem += <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a44">WriteObjectN</a> (lpMem, (MEMPTR) PublicArrayName, lstrlen (PublicArrayName));
01658         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a44">WriteInt</a> (lpMem, i);
01659 
01660         <span class="keywordflow">if</span> (!bAllowBinary)               <span class="comment">// Output ASCII CRD</span>
01661         {
01662             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
01663             <span class="keywordflow">if</span> (LutTag == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a91">icSigLut8Type</a>)
01664             {
01665                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, TFunction8);
01666             } <span class="keywordflow">else</span>
01667             {
01668                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, IndexArray);
01669                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, Scale16);
01670             }
01671         } <span class="keywordflow">else</span>
01672         {                               <span class="comment">// Output BINARY CRD</span>
01673             <span class="keywordflow">if</span> (LutTag == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a91">icSigLut8Type</a>)
01674             {
01675                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, TFunction8);
01676             } <span class="keywordflow">else</span>
01677             {
01678                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, IndexArray16b);
01679                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, Scale16);
01680             }
01681         }
01682 
01683         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndFunction);
01684     }
01685     <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>)(lpMem - lpOldMem);
01686 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a23" doxytag="dec97/dll32/profcrd.c::SendCRDPQR" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a> SendCRDPQR           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpMem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Intent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a26">LPSFLOAT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>whitePoint</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d5/dec97_2dll32_2profcrd_8c-source.html#l01471">1471</a> of file <a class="el" href="../../d0/d5/dec97_2dll32_2profcrd_8c-source.html">dec97/dll32/profcrd.c</a>.
<p>
References <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00007">BeginArray</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00009">BeginFunction</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00008">EndArray</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00010">EndFunction</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00306">icAbsoluteColorimetric</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00078">Identity</a>, <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00109">Intent</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00025">MatrixPQRTag</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00080">MEMPTR</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00063">NewLine</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00049">NullOp</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00023">RangePQRTag</a>, <a class="el" href="../../d7/d6/aug98_2dll32_2icmdll_8h-source.html#l00011">SINT</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00153">TransformPQR</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00024">TransformPQRTag</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l01193">WriteFloat()</a>, and <a class="el" href="../../d3/d8/ps2_8c-source.html#l00072">WriteObject</a>.
<p>
<pre class="fragment"><div>01472 {
01473     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>  lpOldMem;
01474     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>    i;
01475 
01476     lpOldMem = lpMem;
01477 
01478 <span class="comment">//********** /RangePQR</span>
01479     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
01480     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, RangePQRTag);
01481     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginArray);
01482     <span class="keywordflow">for</span> (i = 0; i &lt; 3; i++)
01483     {
01484         lpMem += <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a46">WriteFloat</a> (lpMem, (<span class="keywordtype">double</span>) 0);
01485         lpMem += <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a46">WriteFloat</a> (lpMem, (<span class="keywordtype">double</span>)(whitePoint[i]));
01486     }
01487     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndArray);
01488 
01489 <span class="comment">//********** /MatrixPQR</span>
01490     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
01491     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, MatrixPQRTag);
01492     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, Identity);
01493 
01494 <span class="comment">//********** /TransformPQR</span>
01495     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
01496     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, TransformPQRTag);
01497     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginArray);
01498     <span class="keywordflow">for</span> (i = 0; i &lt; 3; i++)
01499     {
01500         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginFunction);
01501         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem,
01502             (icAbsoluteColorimetric != Intent) ? TransformPQR[i] : NullOp);
01503         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndFunction);
01504     }
01505     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndArray);
01506    
01507     <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>)(lpMem - lpOldMem);
01508 } 
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a17" doxytag="dec97/dll32/profcrd.c::TableInterp3" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL TableInterp3           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d6/jul98_2test_2profcrd_8h.html#a3">LPHOSTCLUT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpHostClut</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>float far *&nbsp;</td>
          <td class="mdname" nowrap> <em>fTemp</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d5/dec97_2dll32_2profcrd_8c-source.html#l00660">660</a> of file <a class="el" href="../../d0/d5/dec97_2dll32_2profcrd_8c-source.html">dec97/dll32/profcrd.c</a>.
<p>
References <a class="el" href="../../d4/d9/user32_8def-source.html#l00799">c</a>, <a class="el" href="../../d9/d4/aug98_2dll32_2profcrd_8c-source.html#l00006">MAXCOLOR8</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00080">MEMPTR</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
<pre class="fragment"><div>00661 {
00662     <span class="keywordtype">int</span>    tmpA, tmpBC;
00663     <span class="keywordtype">int</span>    cellA, cellB, cellC;
00664     <span class="keywordtype">float</span>  a, b, <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a35">c</a>;
00665     <span class="keywordtype">short</span>  Grids;
00666     <span class="keywordtype">short</span>  outputChan;
00667     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> v000, v001, v010, v011;
00668     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> v100, v101, v110, v111;
00669     <span class="keywordtype">float</span>  vx0x, vx1x;
00670     <span class="keywordtype">float</span>  v0xx, v1xx;
00671     <span class="keywordtype">int</span>    idx;
00672 
00673     cellA = (<span class="keywordtype">int</span>)(fTemp[0]);
00674     a = fTemp[0] - cellA;
00675 
00676     cellB = (<span class="keywordtype">int</span>)(fTemp[1]);
00677     b = fTemp[1] - cellB;
00678 
00679     cellC = (<span class="keywordtype">int</span>)(fTemp[2]);
00680     <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a35">c</a> = fTemp[2] - cellC;
00681 
00682     Grids = lpHostClut-&gt;clutPoints;
00683     outputChan = lpHostClut-&gt;outputChan;
00684     tmpA  = outputChan * Grids * Grids; 
00685     tmpBC = outputChan * (Grids * cellB + cellC);
00686 
00687     <span class="comment">// Calculate 8 surrounding cells.</span>
00688     v000 = lpHostClut-&gt;clut + tmpA * cellA + tmpBC;
00689     v001 = (cellC &lt; (Grids - 1))? v000 + outputChan : v000;
00690     v010 = (cellB &lt; (Grids - 1))? v000 + outputChan * Grids : v000;
00691     v011 = (cellC &lt; (Grids - 1))? v010 + outputChan : v010 ;
00692 
00693     v100 = (cellA &lt; (Grids - 1))? v000 + tmpA : v000;
00694     v101 = (cellC &lt; (Grids - 1))? v100 + outputChan : v100;
00695     v110 = (cellB &lt; (Grids - 1))? v100 + outputChan * Grids : v100;
00696     v111 = (cellC &lt; (Grids - 1))? v110 + outputChan : v110;
00697 
00698     <span class="keywordflow">for</span> (idx = 0; idx &lt; outputChan; idx++)
00699     {
00700         <span class="comment">// Calculate the average of 4 bottom cells.</span>
00701         vx0x = *v000 + <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a35">c</a> * (<span class="keywordtype">int</span>)((<span class="keywordtype">int</span>)*v001 - (<span class="keywordtype">int</span>)*v000);
00702         vx1x = *v010 + <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a35">c</a> * (<span class="keywordtype">int</span>)((<span class="keywordtype">int</span>)*v011 - (<span class="keywordtype">int</span>)*v010);
00703         v0xx = vx0x + b * (vx1x - vx0x);
00704 
00705         <span class="comment">// Calculate the average of 4 upper cells.</span>
00706         vx0x = *v100 + <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a35">c</a> * (<span class="keywordtype">int</span>)((<span class="keywordtype">int</span>)*v101 - (<span class="keywordtype">int</span>)*v100);
00707         vx1x = *v110 + <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a35">c</a> * (<span class="keywordtype">int</span>)((<span class="keywordtype">int</span>)*v111 - (<span class="keywordtype">int</span>)*v110);
00708         v1xx = vx0x + b * (vx1x - vx0x);
00709 
00710         <span class="comment">// Calculate the bottom and upper average.</span>
00711         fTemp[idx] = (v0xx + a * (v1xx - v0xx)) / <a class="code" href="../../d8/d5/aug98_2dll32_2profcrd_8c.html#a1">MAXCOLOR8</a>;
00712 
00713         <span class="keywordflow">if</span> ( idx &lt; (outputChan - 1))
00714         {
00715             v000++;
00716             v001++;
00717             v010++;
00718             v011++;
00719             v100++;
00720             v101++;
00721             v110++;
00722             v111++;
00723         }
00724     }
00725 
00726     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00727 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a18" doxytag="dec97/dll32/profcrd.c::TableInterp4" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL TableInterp4           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d6/jul98_2test_2profcrd_8h.html#a3">LPHOSTCLUT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpHostClut</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>float far *&nbsp;</td>
          <td class="mdname" nowrap> <em>fTemp</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d5/dec97_2dll32_2profcrd_8c-source.html#l00730">730</a> of file <a class="el" href="../../d0/d5/dec97_2dll32_2profcrd_8c-source.html">dec97/dll32/profcrd.c</a>.
<p>
References <a class="el" href="../../d9/d4/aug98_2dll32_2profcrd_8c-source.html#l00006">MAXCOLOR8</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00080">MEMPTR</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
<pre class="fragment"><div>00731 {
00732     <span class="keywordtype">int</span>    tmpH, tmpI, tmpJK;
00733     <span class="keywordtype">int</span>    cellH, cellI, cellJ, cellK;
00734     <span class="keywordtype">float</span>  h, i, j, k;
00735     <span class="keywordtype">short</span>  Grids;
00736     <span class="keywordtype">short</span>  outputChan;
00737     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> v0000, v0001, v0010, v0011;
00738     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> v0100, v0101, v0110, v0111;
00739     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> v1000, v1001, v1010, v1011;
00740     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> v1100, v1101, v1110, v1111;
00741     <span class="keywordtype">float</span>  vxx0x, vxx1x;
00742     <span class="keywordtype">float</span>  vx0xx, vx1xx;
00743     <span class="keywordtype">float</span>  v0xxx, v1xxx;
00744     <span class="keywordtype">int</span>    idx;
00745 
00746     cellH = (<span class="keywordtype">int</span>)(fTemp[0]);
00747     h = fTemp[0] - cellH;
00748 
00749     cellI = (<span class="keywordtype">int</span>)(fTemp[1]);
00750     i = fTemp[1] - cellI;
00751 
00752     cellJ = (<span class="keywordtype">int</span>)(fTemp[2]);
00753     j = fTemp[2] - cellJ;
00754 
00755     cellK = (<span class="keywordtype">int</span>)(fTemp[3]);
00756     k = fTemp[3] - cellK;
00757 
00758     Grids = lpHostClut-&gt;clutPoints;
00759     outputChan = lpHostClut-&gt;outputChan;
00760     tmpI  = outputChan * Grids * Grids;
00761     tmpH  = tmpI * Grids; 
00762     tmpJK = outputChan * (Grids * cellJ + cellK);
00763 
00764     <span class="comment">// Calculate 16 surrounding cells.</span>
00765     v0000 = lpHostClut-&gt;clut + tmpH * cellH + tmpI * cellI + tmpJK;
00766     v0001 = (cellK &lt; (Grids - 1))? v0000 + outputChan : v0000;
00767     v0010 = (cellJ &lt; (Grids - 1))? v0000 + outputChan * Grids : v0000;
00768     v0011 = (cellK &lt; (Grids - 1))? v0010 + outputChan : v0010;
00769 
00770     v0100 = (cellI &lt; (Grids - 1))? v0000 + tmpI : v0000;
00771     v0101 = (cellK &lt; (Grids - 1))? v0100 + outputChan : v0100;
00772     v0110 = (cellJ &lt; (Grids - 1))? v0100 + outputChan * Grids : v0100;
00773     v0111 = (cellK &lt; (Grids - 1))? v0110 + outputChan : v0110;
00774 
00775     v1000 = (cellH &lt; (Grids - 1))? v0000 + tmpH : v0000;
00776     v1001 = (cellK &lt; (Grids - 1))? v1000 + outputChan : v1000;
00777     v1010 = (cellJ &lt; (Grids - 1))? v1000 + outputChan * Grids : v1000;
00778     v1011 = (cellK &lt; (Grids - 1))? v1010 + outputChan : v1010;
00779 
00780     v1100 = (cellI &lt; (Grids - 1))? v1000 + tmpI : v1000;
00781     v1101 = (cellK &lt; (Grids - 1))? v1100 + outputChan : v1100;
00782     v1110 = (cellJ &lt; (Grids - 1))? v1100 + outputChan * Grids : v1100;
00783     v1111 = (cellK &lt; (Grids - 1))? v1110 + outputChan : v1110;
00784 
00785     <span class="keywordflow">for</span> (idx = 0; idx &lt; outputChan; idx++)
00786     {
00787         <span class="comment">// Calculate the average of 8 bottom cells.</span>
00788         vxx0x = *v0000 + k * (<span class="keywordtype">int</span>)((<span class="keywordtype">int</span>)*v0001 - (<span class="keywordtype">int</span>)*v0000);
00789         vxx1x = *v0010 + k * (<span class="keywordtype">int</span>)((<span class="keywordtype">int</span>)*v0011 - (<span class="keywordtype">int</span>)*v0010);
00790         vx0xx = vxx0x + j * (vxx1x - vxx0x);
00791         vxx0x = *v0100 + k * (<span class="keywordtype">int</span>)((<span class="keywordtype">int</span>)*v0101 - (<span class="keywordtype">int</span>)*v0100);
00792         vxx1x = *v0110 + k * (<span class="keywordtype">int</span>)((<span class="keywordtype">int</span>)*v0111 - (<span class="keywordtype">int</span>)*v0110);
00793         vx1xx = vxx0x + j * (vxx1x - vxx0x);
00794         v0xxx = vx0xx + i * (vx1xx - vx0xx);
00795 
00796         <span class="comment">// Calculate the average of 8 upper cells.</span>
00797         vxx0x = *v1000 + k * (<span class="keywordtype">int</span>)((<span class="keywordtype">int</span>)*v1001 - (<span class="keywordtype">int</span>)*v1000);
00798         vxx1x = *v1010 + k * (<span class="keywordtype">int</span>)((<span class="keywordtype">int</span>)*v1011 - (<span class="keywordtype">int</span>)*v1010);
00799         vx0xx = vxx0x + j * (vxx1x - vxx0x);
00800         vxx0x = *v1100 + k * (<span class="keywordtype">int</span>)((<span class="keywordtype">int</span>)*v1101 - (<span class="keywordtype">int</span>)*v1100);
00801         vxx1x = *v1110 + k * (<span class="keywordtype">int</span>)((<span class="keywordtype">int</span>)*v1111 - (<span class="keywordtype">int</span>)*v1110);
00802         vx1xx = vxx0x + j * (vxx1x - vxx0x);
00803         v1xxx = vx0xx + i * (vx1xx - vx0xx);
00804 
00805         <span class="comment">// Calculate the bottom and upper average.</span>
00806         fTemp[idx] = (v0xxx + h * (v1xxx - v0xxx)) / <a class="code" href="../../d8/d5/aug98_2dll32_2profcrd_8c.html#a1">MAXCOLOR8</a>;
00807 
00808         <span class="keywordflow">if</span> ( idx &lt; (outputChan - 1))
00809         {
00810             v0000++;
00811             v0001++;
00812             v0010++;
00813             v0011++;
00814             v0100++;
00815             v0101++;
00816             v0110++;
00817             v0111++;
00818             v1000++;
00819             v1001++;
00820             v1010++;
00821             v1011++;
00822             v1100++;
00823             v1101++;
00824             v1110++;
00825             v1111++;
00826         }
00827     }
00828 
00829     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00830 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a19" doxytag="dec97/dll32/profcrd.c::XYZToLab" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void XYZToLab           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">float far *&nbsp;</td>
          <td class="mdname" nowrap> <em>Input</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>float far *&nbsp;</td>
          <td class="mdname" nowrap> <em>Output</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>float far *&nbsp;</td>
          <td class="mdname" nowrap> <em>whitePoint</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d5/dec97_2dll32_2profcrd_8c-source.html#l00944">944</a> of file <a class="el" href="../../d0/d5/dec97_2dll32_2profcrd_8c-source.html">dec97/dll32/profcrd.c</a>.
<p>
References <a class="el" href="../../d3/d8/ps2_8c-source.html#l06408">inverse_g()</a>.
<p>
<pre class="fragment"><div>00945 {
00946     <span class="keywordtype">float</span>   fL, fa, fb;
00947 
00948     fL = <a class="code" href="../../d2/d9/ps2_8c.html#a245">inverse_g</a>(Input[0] / whitePoint[0]);
00949     fa = <a class="code" href="../../d2/d9/ps2_8c.html#a245">inverse_g</a>(Input[1] / whitePoint[1]);
00950     fb = <a class="code" href="../../d2/d9/ps2_8c.html#a245">inverse_g</a>(Input[2] / whitePoint[2]);
00951     Output[0] = (fa * 116 - 16) / 100;
00952     Output[1] = (fL * 500 - fa * 500 + 128) / 255;
00953     Output[2] = (fa * 200 - fb * 200 + 128) / 255;
00954 }
</div></pre>    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Sat May 15 19:45:19 2004 for test by
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>

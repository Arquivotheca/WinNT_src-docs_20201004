<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>test: lfsdata.h Source File</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="../../main.html">Main&nbsp;Page</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Class&nbsp;List</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Class&nbsp;Members</a> | <a class="qindex" href="../../globals.html">File&nbsp;Members</a></div>
<h1>lfsdata.h</h1><a href="../../d8/d3/lfsdata_8h.html">Go to the documentation of this file.</a><pre class="fragment"><div>00001 <span class="comment">/*++ BUILD Version: 0000    // Increment this if a change has global effects</span>
00002 <span class="comment"></span>
00003 <span class="comment">Copyright (c) 1989  Microsoft Corporation</span>
00004 <span class="comment"></span>
00005 <span class="comment">Module Name:</span>
00006 <span class="comment"></span>
00007 <span class="comment">    LfsData.c</span>
00008 <span class="comment"></span>
00009 <span class="comment">Abstract:</span>
00010 <span class="comment"></span>
00011 <span class="comment">    This module declares the global data used by the Log File Service.</span>
00012 <span class="comment"></span>
00013 <span class="comment">Author:</span>
00014 <span class="comment"></span>
00015 <span class="comment">    Brian Andrew    [BrianAn]   20-June-1991</span>
00016 <span class="comment"></span>
00017 <span class="comment">Revision History:</span>
00018 <span class="comment"></span>
00019 <span class="comment">--*/</span>
00020 
00021 <span class="preprocessor">#ifndef _LFSDATA_</span>
00022 <span class="preprocessor"></span><span class="preprocessor">#define _LFSDATA_</span>
00023 <span class="preprocessor"></span>
00024 <span class="comment">//</span>
00025 <span class="comment">//  The global Lfs data record</span>
00026 <span class="comment">//</span>
00027 
<a name="l00028"></a><a class="code" href="../../d8/d3/lfsdata_8h.html#a5">00028</a> <span class="keyword">extern</span> <a class="code" href="../../d5/d0/struct__LFS__DATA.html">LFS_DATA</a> <a class="code" href="../../d7/d3/lfsdata_8c.html#a1">LfsData</a>;
00029 
00030 <span class="comment">//</span>
00031 <span class="comment">//  Various large integer constants.</span>
00032 <span class="comment">//</span>
00033 
<a name="l00034"></a><a class="code" href="../../d8/d3/lfsdata_8h.html#a0">00034</a> <span class="preprocessor">#define LfsMaximumFileSize (0x0000000100000000)</span>
00035 <span class="preprocessor"></span>
<a name="l00036"></a><a class="code" href="../../d8/d3/lfsdata_8h.html#a6">00036</a> <span class="keyword">extern</span> LARGE_INTEGER <a class="code" href="../../d7/d3/lfsdata_8c.html#a2">LfsLi0</a>;
<a name="l00037"></a><a class="code" href="../../d8/d3/lfsdata_8h.html#a7">00037</a> <span class="keyword">extern</span> LARGE_INTEGER <a class="code" href="../../d7/d3/lfsdata_8c.html#a3">LfsLi1</a>;
00038 
00039 <span class="comment">//</span>
00040 <span class="comment">//  The following Lsn is used as a starting point in the file.</span>
00041 <span class="comment">//</span>
00042 
<a name="l00043"></a><a class="code" href="../../d8/d3/lfsdata_8h.html#a8">00043</a> <span class="keyword">extern</span> <a class="code" href="../../d6/d3/lfs_8h.html#a10">LSN</a> <a class="code" href="../../d8/d3/lfsdata_8h.html#a8">LfsStartingLsn</a>;
00044 
00045 <span class="comment">//</span>
00046 <span class="comment">//  Turn on pseudo-asserts if NTFS_FREE_ASSERTS is defined.</span>
00047 <span class="comment">//</span>
00048 
00049 <span class="preprocessor">#if !DBG</span>
00050 <span class="preprocessor"></span><span class="preprocessor">#ifdef NTFS_FREE_ASSERTS</span>
00051 <span class="preprocessor"></span><span class="preprocessor">#undef ASSERT</span>
00052 <span class="preprocessor"></span><span class="preprocessor">#undef ASSERTMSG</span>
00053 <span class="preprocessor"></span><span class="preprocessor">#define ASSERT(exp)        if (!(exp)) { extern BOOLEAN KdDebuggerEnabled; DbgPrint("%s:%d %s\n",__FILE__,__LINE__,#exp); if (KdDebuggerEnabled) { DbgBreakPoint(); } }</span>
00054 <span class="preprocessor"></span><span class="preprocessor">#define ASSERTMSG(msg,exp) if (!(exp)) { extern BOOLEAN KdDebuggerEnabled; DbgPrint("%s:%d %s %s\n",__FILE__,__LINE__,msg,#exp); if (KdDebuggerEnabled) { DbgBreakPoint(); } }</span>
00055 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00056 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00057 <span class="preprocessor"></span>
00058 <span class="comment">//</span>
00059 <span class="comment">//  The global Lfs debug level variable, its values are:</span>
00060 <span class="comment">//</span>
00061 <span class="comment">//      0x00000000      Always gets printed (used when about to bug check)</span>
00062 <span class="comment">//</span>
00063 <span class="comment">//      0x00000001      Error conditions</span>
00064 <span class="comment">//      0x00000002      Debug hooks</span>
00065 <span class="comment">//      0x00000004      Catch exceptions before completing Irp</span>
00066 <span class="comment">//      0x00000008      Unwinding during error conditions</span>
00067 <span class="comment">//</span>
00068 <span class="comment">//      0x00000010      Lfs initialization</span>
00069 <span class="comment">//      0x00000020      Lfs query log records</span>
00070 <span class="comment">//      0x00000040      Lfs write log records</span>
00071 <span class="comment">//      0x00000080      Lfs registry routines</span>
00072 <span class="comment">//</span>
00073 <span class="comment">//      0x00000100      Lfs worker thread routines</span>
00074 <span class="comment">//      0x00000200</span>
00075 <span class="comment">//      0x00000400</span>
00076 <span class="comment">//      0x00000800</span>
00077 <span class="comment">//</span>
00078 <span class="comment">//      0x00001000      Log page support routines</span>
00079 <span class="comment">//      0x00002000      Lsn support routines</span>
00080 <span class="comment">//      0x00004000      Miscellaneous support routines</span>
00081 <span class="comment">//      0x00008000      Support routines for cache operations</span>
00082 <span class="comment">//</span>
00083 <span class="comment">//      0x00010000      Structure support routines</span>
00084 <span class="comment">//      0x00020000      Verify/validate support routines</span>
00085 <span class="comment">//      0x00040000      Synchronization routines</span>
00086 <span class="comment">//      0x00080000      Log buffer support routines</span>
00087 <span class="comment">//</span>
00088 <span class="comment">//      0x00100000      Support routines for manipulating log records</span>
00089 <span class="comment">//      0x00200000      Support routines for manipulation lfs restart areas</span>
00090 <span class="comment">//      0x00400000      Support routines for client restart operations</span>
00091 <span class="comment">//      0x00800000</span>
00092 <span class="comment">//</span>
00093 <span class="comment">//      0x01000000</span>
00094 <span class="comment">//      0x02000000</span>
00095 <span class="comment">//      0x04000000</span>
00096 <span class="comment">//      0x08000000</span>
00097 <span class="comment">//</span>
00098 <span class="comment">//      0x10000000</span>
00099 <span class="comment">//      0x20000000</span>
00100 <span class="comment">//      0x40000000</span>
00101 <span class="comment">//      0x80000000</span>
00102 <span class="comment">//</span>
00103 
00104 <span class="preprocessor">#ifdef LFSDBG</span>
00105 <span class="preprocessor"></span>
00106 <span class="preprocessor">#define DEBUG_TRACE_ERROR                (0x00000001)</span>
00107 <span class="preprocessor"></span><span class="preprocessor">#define DEBUG_TRACE_DEBUG_HOOKS          (0x00000002)</span>
00108 <span class="preprocessor"></span><span class="preprocessor">#define DEBUG_TRACE_CATCH_EXCEPTIONS     (0x00000004)</span>
00109 <span class="preprocessor"></span><span class="preprocessor">#define DEBUG_TRACE_UNWIND               (0x00000008)</span>
00110 <span class="preprocessor"></span><span class="preprocessor">#define DEBUG_TRACE_INITIALIZATION       (0x00000010)</span>
00111 <span class="preprocessor"></span><span class="preprocessor">#define DEBUG_TRACE_QUERY                (0x00000020)</span>
00112 <span class="preprocessor"></span><span class="preprocessor">#define DEBUG_TRACE_WRITE                (0x00000040)</span>
00113 <span class="preprocessor"></span><span class="preprocessor">#define DEBUG_TRACE_RESTART              (0x00000080)</span>
00114 <span class="preprocessor"></span><span class="preprocessor">#define DEBUG_TRACE_REGISTRY             (0x00000100)</span>
00115 <span class="preprocessor"></span><span class="preprocessor">#define DEBUG_TRACE_WORKER               (0x00000200)</span>
00116 <span class="preprocessor"></span><span class="preprocessor">#define DEBUG_TRACE_0x00000400           (0x00000400)</span>
00117 <span class="preprocessor"></span><span class="preprocessor">#define DEBUG_TRACE_0x00000800           (0x00000800)</span>
00118 <span class="preprocessor"></span><span class="preprocessor">#define DEBUG_TRACE_LOG_PAGE_SUP         (0x00001000)</span>
00119 <span class="preprocessor"></span><span class="preprocessor">#define DEBUG_TRACE_LSN_SUP              (0x00002000)</span>
00120 <span class="preprocessor"></span><span class="preprocessor">#define DEBUG_TRACE_MISC_SUP             (0x00004000)</span>
00121 <span class="preprocessor"></span><span class="preprocessor">#define DEBUG_TRACE_CACHE_SUP            (0x00008000)</span>
00122 <span class="preprocessor"></span><span class="preprocessor">#define DEBUG_TRACE_STRUC_SUP            (0x00010000)</span>
00123 <span class="preprocessor"></span><span class="preprocessor">#define DEBUG_TRACE_VERIFY_SUP           (0x00020000)</span>
00124 <span class="preprocessor"></span><span class="preprocessor">#define DEBUG_TRACE_SYNCH_SUP            (0x00040000)</span>
00125 <span class="preprocessor"></span><span class="preprocessor">#define DEBUG_TRACE_LBCB_SUP             (0x00080000)</span>
00126 <span class="preprocessor"></span><span class="preprocessor">#define DEBUG_TRACE_LOG_RECORD_SUP       (0x00100000)</span>
00127 <span class="preprocessor"></span><span class="preprocessor">#define DEBUG_TRACE_RESTART_SUP          (0x00200000)</span>
00128 <span class="preprocessor"></span><span class="preprocessor">#define DEBUG_TRACE_0x00400000           (0x00400000)</span>
00129 <span class="preprocessor"></span><span class="preprocessor">#define DEBUG_TRACE_0x00800000           (0x00800000)</span>
00130 <span class="preprocessor"></span><span class="preprocessor">#define DEBUG_TRACE_0x01000000           (0x01000000)</span>
00131 <span class="preprocessor"></span><span class="preprocessor">#define DEBUG_TRACE_0x02000000           (0x02000000)</span>
00132 <span class="preprocessor"></span><span class="preprocessor">#define DEBUG_TRACE_0x04000000           (0x04000000)</span>
00133 <span class="preprocessor"></span><span class="preprocessor">#define DEBUG_TRACE_0x08000000           (0x08000000)</span>
00134 <span class="preprocessor"></span><span class="preprocessor">#define DEBUG_TRACE_0x10000000           (0x10000000)</span>
00135 <span class="preprocessor"></span><span class="preprocessor">#define DEBUG_TRACE_0x20000000           (0x20000000)</span>
00136 <span class="preprocessor"></span><span class="preprocessor">#define DEBUG_TRACE_0x40000000           (0x40000000)</span>
00137 <span class="preprocessor"></span><span class="preprocessor">#define DEBUG_TRACE_0x80000000           (0x80000000)</span>
00138 <span class="preprocessor"></span>
00139 <span class="keyword">extern</span> LONG LfsDebugTraceLevel;
00140 <span class="keyword">extern</span> LONG LfsDebugTraceIndent;
00141 
00142 <span class="preprocessor">#define DebugTrace(INDENT,LEVEL,X,Y) {                      \</span>
00143 <span class="preprocessor">    LONG _i;                                                \</span>
00144 <span class="preprocessor">    if (((LEVEL) == 0) || (LfsDebugTraceLevel &amp; (LEVEL))) { \</span>
00145 <span class="preprocessor">        _i = (ULONG)PsGetCurrentThread();                   \</span>
00146 <span class="preprocessor">        DbgPrint("%08lx:",_i);                              \</span>
00147 <span class="preprocessor">        if ((INDENT) &lt; 0) {                                 \</span>
00148 <span class="preprocessor">            LfsDebugTraceIndent += (INDENT);                \</span>
00149 <span class="preprocessor">        }                                                   \</span>
00150 <span class="preprocessor">        if (LfsDebugTraceIndent &lt; 0) {                      \</span>
00151 <span class="preprocessor">            LfsDebugTraceIndent = 0;                        \</span>
00152 <span class="preprocessor">        }                                                   \</span>
00153 <span class="preprocessor">        for (_i = 0; _i &lt; LfsDebugTraceIndent; _i += 1) {   \</span>
00154 <span class="preprocessor">            DbgPrint(" ");                                  \</span>
00155 <span class="preprocessor">        }                                                   \</span>
00156 <span class="preprocessor">        DbgPrint(X,Y);                                      \</span>
00157 <span class="preprocessor">        if ((INDENT) &gt; 0) {                                 \</span>
00158 <span class="preprocessor">            LfsDebugTraceIndent += (INDENT);                \</span>
00159 <span class="preprocessor">        }                                                   \</span>
00160 <span class="preprocessor">    }                                                       \</span>
00161 <span class="preprocessor">}</span>
00162 <span class="preprocessor"></span>
00163 <span class="preprocessor">#define DebugDump(STR,LEVEL,PTR) {                          \</span>
00164 <span class="preprocessor">    ULONG _i;                                               \</span>
00165 <span class="preprocessor">    VOID LfsDump();                                         \</span>
00166 <span class="preprocessor">    if (((LEVEL) == 0) || (LfsDebugTraceLevel &amp; (LEVEL))) { \</span>
00167 <span class="preprocessor">        _i = (ULONG)PsGetCurrentThread();                   \</span>
00168 <span class="preprocessor">        DbgPrint("%08lx:",_i);                              \</span>
00169 <span class="preprocessor">        DbgPrint(STR);                                      \</span>
00170 <span class="preprocessor">        if (PTR != NULL) {LfsDump(PTR);}                    \</span>
00171 <span class="preprocessor">        DbgBreakPoint();                                    \</span>
00172 <span class="preprocessor">    }                                                       \</span>
00173 <span class="preprocessor">}</span>
00174 <span class="preprocessor"></span>
00175 <span class="preprocessor">#define DebugUnwind(X) {                                                      \</span>
00176 <span class="preprocessor">    if (AbnormalTermination()) {                                             \</span>
00177 <span class="preprocessor">        DebugTrace(0, DEBUG_TRACE_UNWIND, #X ", Abnormal termination.\n", 0); \</span>
00178 <span class="preprocessor">    }                                                                         \</span>
00179 <span class="preprocessor">}</span>
00180 <span class="preprocessor"></span>
00181 <span class="preprocessor">#define DebugDoit(X)                     {X;}</span>
00182 <span class="preprocessor"></span>
00183 <span class="preprocessor">#else</span>
00184 <span class="preprocessor"></span>
<a name="l00185"></a><a class="code" href="../../d8/d3/lfsdata_8h.html#a1">00185</a> <span class="preprocessor">#define DebugTrace(INDENT,LEVEL,X,Y)     {NOTHING;}</span>
<a name="l00186"></a><a class="code" href="../../d8/d3/lfsdata_8h.html#a2">00186</a> <span class="preprocessor"></span><span class="preprocessor">#define DebugDump(STR,LEVEL,PTR)         {NOTHING;}</span>
<a name="l00187"></a><a class="code" href="../../d8/d3/lfsdata_8h.html#a3">00187</a> <span class="preprocessor"></span><span class="preprocessor">#define DebugUnwind(X)                   {NOTHING;}</span>
<a name="l00188"></a><a class="code" href="../../d8/d3/lfsdata_8h.html#a4">00188</a> <span class="preprocessor"></span><span class="preprocessor">#define DebugDoit(X)                     {NOTHING;}</span>
00189 <span class="preprocessor"></span>
00190 <span class="preprocessor">#endif // LFSDBG</span>
00191 <span class="preprocessor"></span>
00192 <span class="preprocessor">#endif // _LFSDATA_</span>
00193 <span class="preprocessor"></span>
</div></pre><hr size="1"><address style="align: right;"><small>Generated on Sat May 15 19:40:38 2004 for test by
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>

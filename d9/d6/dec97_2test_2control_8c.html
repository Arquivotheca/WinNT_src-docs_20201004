<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>test: dec97/test/control.c File Reference</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="../../main.html">Main&nbsp;Page</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Class&nbsp;List</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Class&nbsp;Members</a> | <a class="qindex" href="../../globals.html">File&nbsp;Members</a></div>
<h1>control.c File Reference</h1><code>#include "<a class="el" href="../../d2/d9/dec97_2test_2generic_8h-source.html">generic.h</a>"</code><br>

<p>
<a href="../../d0/d6/dec97_2test_2control_8c-source.html">Go to the source code of this file.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/dec97_2test_2control_8c.html#a0">CreateINTENTControl</a> (LPSTR <a class="el" href="../../d8/d1/hivestat_8c.html#a9">FileName</a>, LPSTR SaveFileName, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> Inter_Intent)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/dec97_2test_2control_8c.html#a1">CreateCRDControl</a> (LPSTR <a class="el" href="../../d8/d1/hivestat_8c.html#a9">FileName</a>, LPSTR SaveFileName, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> Inter_Intent, BOOL <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a27">AllowBinary</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/dec97_2test_2control_8c.html#a2">CreateProfCRDControl</a> (LPSTR DevProfile, LPSTR TargetProfile, LPSTR SaveFileName, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> Inter_Intent, BOOL <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a27">AllowBinary</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/dec97_2test_2control_8c.html#a3">ColorSpaceControl</a> (LPSTR <a class="el" href="../../d8/d1/hivestat_8c.html#a9">FileName</a>, LPSTR SaveFileName, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> InpDrvClrSp, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a28">Intent</a>, WORD CSAType, BOOL <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a27">AllowBinary</a>)</td></tr>

</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="a3" doxytag="dec97/test/control.c::ColorSpaceControl" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void ColorSpaceControl           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">LPSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>FileName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>SaveFileName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>InpDrvClrSp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Intent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WORD&nbsp;</td>
          <td class="mdname" nowrap> <em>CSAType</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>AllowBinary</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/dec97_2test_2control_8c-source.html#l00232">232</a> of file <a class="el" href="../../d0/d6/dec97_2test_2control_8c-source.html">dec97/test/control.c</a>.
<p>
References <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00108">AllowBinary</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d3/d8/aug98_2dll32_2csprof_8h-source.html#l00039">CHANDLE</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d3/d1/rtload_8c-source.html#l00047">FileName</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l00212">FreeCP()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l00070">GetCPDevSpace</a>, <a class="el" href="../../d4/d7/winmgrc_8c-source.html#l00090">GetFocus()</a>, <a class="el" href="../../d1/d6/w32_2ntgdi_2icm_2mscms_2profile_8c-source.html#l01744">GetPS2ColorSpaceArray()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l01519">GetPS2CSA_ABC()</a>, <a class="el" href="../../d8/d2/aug98_2dll32_2getcsa_8c-source.html#l01502">GetPS2CSA_DEFG_Intent()</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00256">icSigCmykData</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00253">icSigGrayData</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00252">icSigRgbData</a>, <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00109">Intent</a>, <a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a8">LoadCP32()</a>, <a class="el" href="../../d3/d8/aug98_2dll32_2csprof_8h-source.html#l00039">LPCHANDLE</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00107">LPCSIG</a>, <a class="el" href="../../d3/d0/object_8c-source.html#l00205">MemAlloc()</a>, <a class="el" href="../../d3/d0/object_8c-source.html#l00260">MemFree()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00080">MEMPTR</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d3/d8/aug98_2dll32_2csprof_8h-source.html#l00012">TYPE_CIEBASEDDEF</a>, and <a class="el" href="../../d3/d8/aug98_2dll32_2csprof_8h-source.html#l00013">TYPE_CIEBASEDDEFG</a>.
<p>
<pre class="fragment"><div>00239 {
00240     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>        Ret;
00241     <a class="code" href="../../d2/d9/aug98_2dll32_2csprof_8h.html#a5">CHANDLE</a>     cp;
00242     HGLOBAL     hCP;
00243     HGLOBAL     hBuffer;
00244     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>      lpBuffer;
00245     OFSTRUCT    OfStruct;
00246     HFILE       hOutput;
00247     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>       cbSize;
00248 
00249     <span class="keywordflow">if</span>( !<a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a8">LoadCP32</a>( (LPCSTR) FileName, &amp;hCP, (LPCHANDLE) &amp;cp) )
00250     {
00251         <span class="keywordflow">return</span>;
00252     }
00253     <span class="keywordflow">switch</span> (InpDrvClrSp)
00254     {
00255         <span class="keywordflow">case</span> 0: <span class="keywordflow">break</span>;
00256         <span class="keywordflow">case</span> 1: InpDrvClrSp = <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a115">icSigGrayData</a>; <span class="keywordflow">break</span>;
00257         <span class="keywordflow">case</span> 3: InpDrvClrSp = <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a114">icSigRgbData</a>; <span class="keywordflow">break</span>;
00258         <span class="keywordflow">case</span> 4: InpDrvClrSp = <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a118">icSigCmykData</a>; <span class="keywordflow">break</span>;
00259         <span class="keywordflow">default</span>: InpDrvClrSp = 0; <span class="keywordflow">break</span>;
00260     }
00261 
00262     <span class="comment">// Create CieBasedDEF(G) first. if can not, create CieBasedABC.</span>
00263     <span class="keywordflow">if</span> (CSAType == 405)
00264     {
00265         Ret = <a class="code" href="../../d0/d7/w32_2ntgdi_2icm_2mscms_2profile_8c.html#a27">GetPS2ColorSpaceArray</a>(cp, Intent, InpDrvClrSp, NULL, &amp;cbSize, AllowBinary);
00266         <span class="keywordflow">if</span> (Ret)
00267         {
00268             <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d1/object_8c.html#a7">MemAlloc</a>(cbSize, &amp;hBuffer, &amp;lpBuffer))
00269                 <span class="keywordflow">return</span>;
00270             Ret = <a class="code" href="../../d0/d7/w32_2ntgdi_2icm_2mscms_2profile_8c.html#a27">GetPS2ColorSpaceArray</a>(cp, Intent, InpDrvClrSp, lpBuffer, &amp;cbSize, AllowBinary);
00271 
00272             hOutput = OpenFile(SaveFileName, &amp;OfStruct, OF_CREATE);
00273             cbSize = _lwrite(hOutput, lpBuffer, cbSize);
00274             _lclose(hOutput);
00275 
00276             <a class="code" href="../../d2/d1/object_8c.html#a9">MemFree</a>(hBuffer);
00277         }
00278     }
00279     <span class="comment">// Create CieBasedABC</span>
00280     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (CSAType == 406)
00281     {
00282         Ret = <a class="code" href="../../d0/d7/w32_2ntgdi_2icm_2mscms_2profile_8c.html#a27">GetPS2ColorSpaceArray</a>(cp, Intent, icSigRgbData, NULL, &amp;cbSize, AllowBinary);
00283         <span class="keywordflow">if</span> (Ret)
00284         {
00285             <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d1/object_8c.html#a7">MemAlloc</a>(cbSize, &amp;hBuffer, &amp;lpBuffer))
00286                 <span class="keywordflow">return</span>;
00287             Ret = <a class="code" href="../../d0/d7/w32_2ntgdi_2icm_2mscms_2profile_8c.html#a27">GetPS2ColorSpaceArray</a>(cp, Intent, icSigRgbData, lpBuffer, &amp;cbSize, AllowBinary);
00288 
00289             hOutput = OpenFile(SaveFileName, &amp;OfStruct, OF_CREATE);
00290             cbSize = _lwrite(hOutput, lpBuffer, cbSize);
00291             _lclose(hOutput);
00292 
00293             <a class="code" href="../../d2/d1/object_8c.html#a9">MemFree</a>(hBuffer);
00294         }
00295     }
00296 <span class="preprocessor">#if 0</span>
00297 <span class="preprocessor"></span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (CSAType == 406)
00298     {
00299         Ret = <a class="code" href="../../d2/d9/ps2_8c.html#a184">GetPS2CSA_ABC</a>( cp, NULL, &amp;cbSize, InpDrvClrSp, AllowBinary);
00300         <span class="keywordflow">if</span> (Ret)
00301         {
00302             <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d1/object_8c.html#a7">MemAlloc</a>(cbSize, &amp;hBuffer, &amp;lpBuffer))
00303                 <span class="keywordflow">return</span>;
00304             Ret = <a class="code" href="../../d2/d9/ps2_8c.html#a184">GetPS2CSA_ABC</a>( cp, lpBuffer, &amp;cbSize, InpDrvClrSp, AllowBinary);
00305 
00306             hOutput = OpenFile(SaveFileName, &amp;OfStruct, OF_CREATE);
00307             cbSize = _lwrite(hOutput, lpBuffer, cbSize);
00308             _lclose(hOutput);
00309 
00310             <a class="code" href="../../d2/d1/object_8c.html#a9">MemFree</a>(hBuffer);
00311         }
00312 
00313     }
00314     <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((CSAType == 407) &amp;&amp;
00315         (<a class="code" href="../../d2/d9/ps2_8c.html#a41">GetCPDevSpace</a>(cp, (LPCSIG) &amp;ColorSpace)))
00316     {
00317         <span class="keywordflow">if</span> (ColorSpace == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a114">icSigRgbData</a>)
00318             Ret = <a class="code" href="../../d7/d4/jul98_2test_2getcsa_8h.html#a1">GetPS2CSA_DEFG_Intent</a>(cp, NULL, &amp;cbSize, 
00319                     InpDrvClrSp, Intent, TYPE_CIEBASEDDEF, AllowBinary);
00320         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ColorSpace == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a118">icSigCmykData</a>)
00321             Ret = <a class="code" href="../../d7/d4/jul98_2test_2getcsa_8h.html#a1">GetPS2CSA_DEFG_Intent</a>(cp, NULL, &amp;cbSize, 
00322                     InpDrvClrSp, Intent, TYPE_CIEBASEDDEFG, AllowBinary);
00323         <span class="keywordflow">if</span> (Ret)
00324         {
00325             <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d1/object_8c.html#a7">MemAlloc</a>(cbSize, &amp;hBuffer, &amp;lpBuffer))
00326                 <span class="keywordflow">return</span>;
00327             <span class="keywordflow">if</span> (ColorSpace == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a114">icSigRgbData</a>)
00328                 Ret = <a class="code" href="../../d7/d4/jul98_2test_2getcsa_8h.html#a1">GetPS2CSA_DEFG_Intent</a>(cp, lpBuffer, &amp;cbSize, 
00329                     InpDrvClrSp, Intent, TYPE_CIEBASEDDEF, AllowBinary);
00330             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ColorSpace == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a118">icSigCmykData</a>)
00331                 Ret = <a class="code" href="../../d7/d4/jul98_2test_2getcsa_8h.html#a1">GetPS2CSA_DEFG_Intent</a>(cp, lpBuffer, &amp;cbSize, 
00332                     InpDrvClrSp, Intent, TYPE_CIEBASEDDEFG, AllowBinary);
00333             hOutput = OpenFile(SaveFileName, &amp;OfStruct, OF_CREATE);
00334             cbSize = _lwrite(hOutput, lpBuffer, cbSize);
00335             _lclose(hOutput);
00336 
00337             <a class="code" href="../../d2/d1/object_8c.html#a9">MemFree</a>(hBuffer);
00338         }
00339 
00340     }
00341 <span class="preprocessor">#endif</span>
00342 <span class="preprocessor"></span>    <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a9">FreeCP</a>(hCP);
00343     <span class="keywordflow">if</span> (!Ret)
00344          MessageBox( <a class="code" href="../../d3/d8/winmgrc_8c.html#a11">GetFocus</a>(), <span class="stringliteral">"No CRD created."</span>, NULL, MB_OK );
00345     <span class="keywordflow">return</span>;
00346 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="dec97/test/control.c::CreateCRDControl" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void CreateCRDControl           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">LPSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>FileName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>SaveFileName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Inter_Intent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>AllowBinary</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/dec97_2test_2control_8c-source.html#l00091">91</a> of file <a class="el" href="../../d0/d6/dec97_2test_2control_8c-source.html">dec97/test/control.c</a>.
<p>
References <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00108">AllowBinary</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d3/d8/aug98_2dll32_2csprof_8h-source.html#l00039">CHANDLE</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00074">CSIG</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d3/d1/rtload_8c-source.html#l00047">FileName</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l00212">FreeCP()</a>, <a class="el" href="../../d4/d7/winmgrc_8c-source.html#l00090">GetFocus()</a>, <a class="el" href="../../d1/d6/w32_2ntgdi_2icm_2mscms_2profile_8c-source.html#l02027">GetPS2ColorRenderingDictionary()</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00306">icAbsoluteColorimetric</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00303">icPerceptual</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00304">icRelativeColorimetric</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00305">icSaturation</a>, <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00109">Intent</a>, <a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a8">LoadCP32()</a>, <a class="el" href="../../d3/d8/aug98_2dll32_2csprof_8h-source.html#l00039">LPCHANDLE</a>, <a class="el" href="../../d3/d0/object_8c-source.html#l00205">MemAlloc()</a>, <a class="el" href="../../d3/d0/object_8c-source.html#l00260">MemFree()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00080">MEMPTR</a>, and <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>.
<p>
<pre class="fragment"><div>00096 {
00097     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>        Ret;
00098     <a class="code" href="../../d2/d9/aug98_2dll32_2csprof_8h.html#a5">CHANDLE</a>     cp;
00099     HGLOBAL     hCP;
00100     HGLOBAL     hBuffer;
00101     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>      lpBuffer;
00102     OFSTRUCT    OfStruct;
00103     HFILE       hOutput;
00104     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>       cbSize;
00105     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a17">CSIG</a>        <a class="code" href="../../d3/d8/aug98_2test_2main_8c.html#a28">Intent</a>;
00106 
00107     <span class="keywordflow">if</span>( !<a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a8">LoadCP32</a>( (LPCSTR) FileName, &amp;hCP, (LPCHANDLE) &amp;cp) )
00108     {
00109         <span class="keywordflow">return</span>;
00110     }
00111     
00112     <span class="keywordflow">switch</span> (Inter_Intent)
00113     {
00114         <span class="keywordflow">case</span> 0: <a class="code" href="../../d3/d8/aug98_2test_2main_8c.html#a28">Intent</a> = <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a142">icPerceptual</a>; <span class="keywordflow">break</span>;
00115         <span class="keywordflow">case</span> 1: <a class="code" href="../../d3/d8/aug98_2test_2main_8c.html#a28">Intent</a> = <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a143">icRelativeColorimetric</a>; <span class="keywordflow">break</span>;
00116         <span class="keywordflow">case</span> 2: <a class="code" href="../../d3/d8/aug98_2test_2main_8c.html#a28">Intent</a> = <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a144">icSaturation</a>; <span class="keywordflow">break</span>;
00117         <span class="keywordflow">case</span> 3: <a class="code" href="../../d3/d8/aug98_2test_2main_8c.html#a28">Intent</a> = <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a145">icAbsoluteColorimetric</a>; <span class="keywordflow">break</span>;
00118         <span class="keywordflow">default</span>: <span class="keywordflow">return</span>;
00119     }
00120 
00121     Ret = <a class="code" href="../../d0/d7/w32_2ntgdi_2icm_2mscms_2profile_8c.html#a29">GetPS2ColorRenderingDictionary</a>(cp, Intent, NULL, &amp;cbSize, AllowBinary);
00122     <span class="keywordflow">if</span> (Ret)
00123     {
00124         <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d1/object_8c.html#a7">MemAlloc</a>(cbSize, &amp;hBuffer, &amp;lpBuffer))
00125             <span class="keywordflow">return</span>;
00126         Ret = <a class="code" href="../../d0/d7/w32_2ntgdi_2icm_2mscms_2profile_8c.html#a29">GetPS2ColorRenderingDictionary</a>(cp, Intent, lpBuffer, &amp;cbSize, AllowBinary);
00127         hOutput = OpenFile(SaveFileName, &amp;OfStruct, OF_CREATE);
00128         cbSize = _lwrite(hOutput, lpBuffer, cbSize);
00129         _lclose(hOutput);
00130         <a class="code" href="../../d2/d1/object_8c.html#a9">MemFree</a>(hBuffer);
00131     }
00132     <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a9">FreeCP</a>(hCP);
00133 
00134     <span class="keywordflow">if</span> (!Ret)
00135          MessageBox( <a class="code" href="../../d3/d8/winmgrc_8c.html#a11">GetFocus</a>(), <span class="stringliteral">"No CRD created."</span>, NULL, MB_OK );
00136 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a0" doxytag="dec97/test/control.c::CreateINTENTControl" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void CreateINTENTControl           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">LPSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>FileName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>SaveFileName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Inter_Intent</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/dec97_2test_2control_8c-source.html#l00025">25</a> of file <a class="el" href="../../d0/d6/dec97_2test_2control_8c-source.html">dec97/test/control.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d3/d8/aug98_2dll32_2csprof_8h-source.html#l00039">CHANDLE</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00074">CSIG</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d3/d1/rtload_8c-source.html#l00047">FileName</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l00212">FreeCP()</a>, <a class="el" href="../../d4/d7/winmgrc_8c-source.html#l00090">GetFocus()</a>, <a class="el" href="../../d1/d6/w32_2ntgdi_2icm_2mscms_2profile_8c-source.html#l01887">GetPS2ColorRenderingIntent()</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00306">icAbsoluteColorimetric</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00303">icPerceptual</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00304">icRelativeColorimetric</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00305">icSaturation</a>, <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00109">Intent</a>, <a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a8">LoadCP32()</a>, <a class="el" href="../../d3/d8/aug98_2dll32_2csprof_8h-source.html#l00039">LPCHANDLE</a>, <a class="el" href="../../d3/d0/object_8c-source.html#l00205">MemAlloc()</a>, <a class="el" href="../../d3/d0/object_8c-source.html#l00260">MemFree()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00080">MEMPTR</a>, and <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>.
<p>
<pre class="fragment"><div>00029 {
00030     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>        Ret;
00031     <a class="code" href="../../d2/d9/aug98_2dll32_2csprof_8h.html#a5">CHANDLE</a>     cp;
00032     HGLOBAL     hCP;
00033     HGLOBAL     hBuffer;
00034     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>      lpBuffer;
00035     OFSTRUCT    OfStruct;
00036     HFILE       hOutput;
00037     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>       cbSize;
00038     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a17">CSIG</a>        <a class="code" href="../../d3/d8/aug98_2test_2main_8c.html#a28">Intent</a>;
00039 
00040     <span class="keywordflow">if</span>( !<a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a8">LoadCP32</a>( (LPCSTR) FileName, &amp;hCP, (LPCHANDLE) &amp;cp) )
00041     {
00042         <span class="keywordflow">return</span>;
00043     }
00044     
00045     <span class="keywordflow">switch</span> (Inter_Intent)
00046     {
00047         <span class="keywordflow">case</span> 0: <a class="code" href="../../d3/d8/aug98_2test_2main_8c.html#a28">Intent</a> = <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a142">icPerceptual</a>; <span class="keywordflow">break</span>;
00048         <span class="keywordflow">case</span> 1: <a class="code" href="../../d3/d8/aug98_2test_2main_8c.html#a28">Intent</a> = <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a143">icRelativeColorimetric</a>; <span class="keywordflow">break</span>;
00049         <span class="keywordflow">case</span> 2: <a class="code" href="../../d3/d8/aug98_2test_2main_8c.html#a28">Intent</a> = <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a144">icSaturation</a>; <span class="keywordflow">break</span>;
00050         <span class="keywordflow">case</span> 3: <a class="code" href="../../d3/d8/aug98_2test_2main_8c.html#a28">Intent</a> = <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a145">icAbsoluteColorimetric</a>; <span class="keywordflow">break</span>;
00051         <span class="keywordflow">default</span>: <span class="keywordflow">return</span>;
00052     }
00053 
00054     Ret = <a class="code" href="../../d0/d7/w32_2ntgdi_2icm_2mscms_2profile_8c.html#a28">GetPS2ColorRenderingIntent</a>(cp, Intent, NULL, &amp;cbSize);
00055     <span class="keywordflow">if</span> (Ret)
00056     {
00057         <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d1/object_8c.html#a7">MemAlloc</a>(cbSize, &amp;hBuffer, &amp;lpBuffer))
00058             <span class="keywordflow">return</span>;
00059         Ret = <a class="code" href="../../d0/d7/w32_2ntgdi_2icm_2mscms_2profile_8c.html#a28">GetPS2ColorRenderingIntent</a>(cp, Intent, lpBuffer, &amp;cbSize);
00060         hOutput = OpenFile(SaveFileName, &amp;OfStruct, OF_CREATE);
00061         cbSize = _lwrite(hOutput, lpBuffer, cbSize);
00062         _lclose(hOutput);
00063         <a class="code" href="../../d2/d1/object_8c.html#a9">MemFree</a>(hBuffer);
00064     }
00065     <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a9">FreeCP</a>(hCP);
00066 
00067     <span class="keywordflow">if</span> (!Ret)
00068          MessageBox( <a class="code" href="../../d3/d8/winmgrc_8c.html#a11">GetFocus</a>(), <span class="stringliteral">"No PS2 Intent created."</span>, NULL, MB_OK );
00069 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="dec97/test/control.c::CreateProfCRDControl" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void CreateProfCRDControl           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">LPSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>DevProfile</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>TargetProfile</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>SaveFileName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Inter_Intent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>AllowBinary</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/dec97_2test_2control_8c-source.html#l00158">158</a> of file <a class="el" href="../../d0/d6/dec97_2test_2control_8c-source.html">dec97/test/control.c</a>.
<p>
References <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00108">AllowBinary</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d3/d8/aug98_2dll32_2csprof_8h-source.html#l00039">CHANDLE</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00074">CSIG</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l00212">FreeCP()</a>, <a class="el" href="../../d4/d7/winmgrc_8c-source.html#l00090">GetFocus()</a>, <a class="el" href="../../d9/d4/aug98_2dll32_2profcrd_8c-source.html#l01954">GetPS2PreviewColorRenderingDictionary()</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00306">icAbsoluteColorimetric</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00303">icPerceptual</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00304">icRelativeColorimetric</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00305">icSaturation</a>, <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00109">Intent</a>, <a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a8">LoadCP32()</a>, <a class="el" href="../../d3/d8/aug98_2dll32_2csprof_8h-source.html#l00039">LPCHANDLE</a>, <a class="el" href="../../d3/d0/object_8c-source.html#l00205">MemAlloc()</a>, <a class="el" href="../../d3/d0/object_8c-source.html#l00260">MemFree()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00080">MEMPTR</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d3/d8/ntgdi_2icm_2icmui_2resource_8h-source.html#l00143">TargetProfile</a>.
<p>
<pre class="fragment"><div>00164 {
00165     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>        Ret;
00166     <a class="code" href="../../d2/d9/aug98_2dll32_2csprof_8h.html#a5">CHANDLE</a>     cpDev, cpTar;
00167     HGLOBAL     hDevCP = 0, hTarCP = 0;
00168     HGLOBAL     hBuffer;
00169     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>      lpBuffer;
00170     OFSTRUCT    OfStruct;
00171     HFILE       hOutput;
00172     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>       cbSize;
00173     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a17">CSIG</a>        <a class="code" href="../../d3/d8/aug98_2test_2main_8c.html#a28">Intent</a>;
00174 
00175     <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a8">LoadCP32</a>( (LPCSTR) DevProfile, &amp;hDevCP, (LPCHANDLE) &amp;cpDev);
00176     <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a8">LoadCP32</a>( (LPCSTR) TargetProfile, &amp;hTarCP, (LPCHANDLE) &amp;cpTar);
00177 
00178     <span class="keywordflow">if</span> (!hDevCP || !hTarCP)
00179     {
00180         <span class="keywordflow">if</span> (hDevCP)  <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a9">FreeCP</a>(hDevCP);
00181         <span class="keywordflow">if</span> (hTarCP)  <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a9">FreeCP</a>(hTarCP);
00182         <span class="keywordflow">return</span>;
00183     }
00184     
00185     <span class="keywordflow">switch</span> (Inter_Intent)
00186     {
00187         <span class="keywordflow">case</span> 0: <a class="code" href="../../d3/d8/aug98_2test_2main_8c.html#a28">Intent</a> = <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a142">icPerceptual</a>; <span class="keywordflow">break</span>;
00188         <span class="keywordflow">case</span> 1: <a class="code" href="../../d3/d8/aug98_2test_2main_8c.html#a28">Intent</a> = <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a143">icRelativeColorimetric</a>; <span class="keywordflow">break</span>;
00189         <span class="keywordflow">case</span> 2: <a class="code" href="../../d3/d8/aug98_2test_2main_8c.html#a28">Intent</a> = <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a144">icSaturation</a>; <span class="keywordflow">break</span>;
00190         <span class="keywordflow">case</span> 3: <a class="code" href="../../d3/d8/aug98_2test_2main_8c.html#a28">Intent</a> = <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a145">icAbsoluteColorimetric</a>; <span class="keywordflow">break</span>;
00191         <span class="keywordflow">default</span>: <span class="keywordflow">return</span>;
00192     }
00193 
00194     Ret = <a class="code" href="../../d8/d6/jul98_2test_2profcrd_8h.html#a4">GetPS2PreviewColorRenderingDictionary</a>(cpDev, cpTar, Intent, NULL, &amp;cbSize, AllowBinary);
00195     <span class="keywordflow">if</span> (Ret)
00196     {
00197         <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d1/object_8c.html#a7">MemAlloc</a>(cbSize, &amp;hBuffer, &amp;lpBuffer))
00198             <span class="keywordflow">return</span>;
00199         Ret = <a class="code" href="../../d8/d6/jul98_2test_2profcrd_8h.html#a4">GetPS2PreviewColorRenderingDictionary</a>(cpDev, cpTar, Intent, lpBuffer, &amp;cbSize, AllowBinary);
00200         hOutput = OpenFile(SaveFileName, &amp;OfStruct, OF_CREATE);
00201         cbSize = _lwrite(hOutput, lpBuffer, cbSize);
00202         _lclose(hOutput);
00203         <a class="code" href="../../d2/d1/object_8c.html#a9">MemFree</a>(hBuffer);
00204     }
00205     <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a9">FreeCP</a>(hDevCP);
00206     <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a9">FreeCP</a>(hTarCP);
00207 
00208     <span class="keywordflow">if</span> (!Ret)
00209          MessageBox( <a class="code" href="../../d3/d8/winmgrc_8c.html#a11">GetFocus</a>(), <span class="stringliteral">"No CRD created."</span>, NULL, MB_OK );
00210 }
</div></pre>    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Sat May 15 19:43:17 2004 for test by
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>

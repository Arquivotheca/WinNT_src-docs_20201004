<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>test: nlsxlat.c File Reference</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="../../main.html">Main&nbsp;Page</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Class&nbsp;List</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Class&nbsp;Members</a> | <a class="qindex" href="../../globals.html">File&nbsp;Members</a></div>
<h1>nlsxlat.c File Reference</h1><code>#include "<a class="el" href="../../d6/d8/ntrtlp_8h-source.html">ntrtlp.h</a>"</code><br>

<p>
<a href="../../d0/d6/nlsxlat_8c-source.html">Go to the source code of this file.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/nlsxlat_8c.html#a0">DBCS_TABLE_SIZE</a>&nbsp;&nbsp;&nbsp;256</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/nlsxlat_8c.html#a1">MB_TBL_SIZE</a>&nbsp;&nbsp;&nbsp;256             /* size of MB tables */</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/nlsxlat_8c.html#a2">GLYPH_TBL_SIZE</a>&nbsp;&nbsp;&nbsp;MB_TBL_SIZE     /* size of GLYPH tables */</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/nlsxlat_8c.html#a3">DBCS_TBL_SIZE</a>&nbsp;&nbsp;&nbsp;256             /* size of DBCS tables */</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/nlsxlat_8c.html#a4">GLYPH_HEADER</a>&nbsp;&nbsp;&nbsp;1               /* size of GLYPH table header */</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/nlsxlat_8c.html#a5">DBCS_HEADER</a>&nbsp;&nbsp;&nbsp;1               /* size of DBCS table header */</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/nlsxlat_8c.html#a6">LANG_HEADER</a>&nbsp;&nbsp;&nbsp;1               /* size of LANGUAGE file header */</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/nlsxlat_8c.html#a7">UP_HEADER</a>&nbsp;&nbsp;&nbsp;1               /* size of UPPERCASE table header */</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/nlsxlat_8c.html#a8">LO_HEADER</a>&nbsp;&nbsp;&nbsp;1               /* size of LOWERCASE table header */</td></tr>

<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/nlsxlat_8c.html#a31">RtlConsoleMultiByteToUnicodeN</a> (OUT PWCH UnicodeString, IN ULONG MaxBytesInUnicodeString, OUT PULONG BytesInUnicodeString OPTIONAL, IN PCH MultiByteString, IN ULONG BytesInMultiByteString, OUT PULONG pdwSpecialChar)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/nlsxlat_8c.html#a32">RtlpInitUpcaseTable</a> (IN <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a22">PUSHORT</a> TableBase, OUT PNLSTABLEINFO CodePageTable)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/nlsxlat_8c.html#a33">RtlMultiByteToUnicodeN</a> (OUT PWCH UnicodeString, IN ULONG MaxBytesInUnicodeString, OUT PULONG BytesInUnicodeString OPTIONAL, IN PCH MultiByteString, IN ULONG BytesInMultiByteString)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/nlsxlat_8c.html#a34">RtlOemToUnicodeN</a> (OUT PWCH UnicodeString, IN ULONG MaxBytesInUnicodeString, OUT PULONG BytesInUnicodeString OPTIONAL, IN PCH OemString, IN ULONG BytesInOemString)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/nlsxlat_8c.html#a35">RtlMultiByteToUnicodeSize</a> (OUT PULONG BytesInUnicodeString, IN PCH MultiByteString, IN ULONG BytesInMultiByteString)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/nlsxlat_8c.html#a36">RtlUnicodeToMultiByteSize</a> (OUT PULONG BytesInMultiByteString, IN PWCH UnicodeString, IN ULONG BytesInUnicodeString)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/nlsxlat_8c.html#a37">RtlUnicodeToMultiByteN</a> (OUT PCH MultiByteString, IN ULONG MaxBytesInMultiByteString, OUT PULONG BytesInMultiByteString OPTIONAL, IN PWCH UnicodeString, IN ULONG BytesInUnicodeString)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/nlsxlat_8c.html#a38">RtlUpcaseUnicodeToMultiByteN</a> (OUT PCH MultiByteString, IN ULONG MaxBytesInMultiByteString, OUT PULONG BytesInMultiByteString OPTIONAL, IN PWCH UnicodeString, IN ULONG BytesInUnicodeString)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/nlsxlat_8c.html#a39">RtlUnicodeToOemN</a> (OUT PCH OemString, IN ULONG MaxBytesInOemString, OUT PULONG BytesInOemString OPTIONAL, IN PWCH UnicodeString, IN ULONG BytesInUnicodeString)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/nlsxlat_8c.html#a40">RtlUpcaseUnicodeToOemN</a> (OUT PCH OemString, IN ULONG MaxBytesInOemString, OUT PULONG BytesInOemString OPTIONAL, IN PWCH UnicodeString, IN ULONG BytesInUnicodeString)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOLEAN&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/nlsxlat_8c.html#a41">RtlpDidUnicodeToOemWork</a> (IN POEM_STRING OemString, IN PUNICODE_STRING UnicodeString)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/nlsxlat_8c.html#a42">RtlCustomCPToUnicodeN</a> (IN PCPTABLEINFO CustomCP, OUT PWCH UnicodeString, IN ULONG MaxBytesInUnicodeString, OUT PULONG BytesInUnicodeString OPTIONAL, IN PCH CustomCPString, IN ULONG BytesInCustomCPString)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/nlsxlat_8c.html#a43">RtlUnicodeToCustomCPN</a> (IN PCPTABLEINFO CustomCP, OUT PCH CustomCPString, IN ULONG MaxBytesInCustomCPString, OUT PULONG BytesInCustomCPString OPTIONAL, IN PWCH UnicodeString, IN ULONG BytesInUnicodeString)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/nlsxlat_8c.html#a44">RtlUpcaseUnicodeToCustomCPN</a> (IN PCPTABLEINFO CustomCP, OUT PCH CustomCPString, IN ULONG MaxBytesInCustomCPString, OUT PULONG BytesInCustomCPString OPTIONAL, IN PWCH UnicodeString, IN ULONG BytesInUnicodeString)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/nlsxlat_8c.html#a45">RtlInitCodePageTable</a> (IN <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a22">PUSHORT</a> TableBase, OUT PCPTABLEINFO CodePageTable)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/nlsxlat_8c.html#a46">RtlInitNlsTables</a> (IN <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a22">PUSHORT</a> AnsiNlsBase, IN <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a22">PUSHORT</a> OemNlsBase, IN <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a22">PUSHORT</a> LanguageNlsBase, OUT PNLSTABLEINFO TableInfo)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/nlsxlat_8c.html#a47">RtlResetRtlTranslations</a> (PNLSTABLEINFO TableInfo)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/nlsxlat_8c.html#a48">RtlGetDefaultCodePage</a> (OUT <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a22">PUSHORT</a> AnsiCodePage, OUT <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a22">PUSHORT</a> OemCodePage)</td></tr>

<tr><td colspan=2><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a22">PUSHORT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/nlsxlat_8c.html#a9">Nls844UnicodeUpcaseTable</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a22">PUSHORT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/nlsxlat_8c.html#a10">Nls844UnicodeLowercaseTable</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a14">USHORT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/nlsxlat_8c.html#a11">NlsLeadByteInfoTable</a> [DBCS_TABLE_SIZE]</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a14">USHORT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/nlsxlat_8c.html#a12">NlsAnsiCodePage</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a14">USHORT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/nlsxlat_8c.html#a13">NlsOemCodePage</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a22">PUSHORT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/nlsxlat_8c.html#a14">NlsLeadByteInfo</a> = <a class="el" href="../../d9/d6/nlsxlat_8c.html#a11">NlsLeadByteInfoTable</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a22">PUSHORT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/nlsxlat_8c.html#a15">NlsMbAnsiCodePageTables</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a22">PUSHORT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/nlsxlat_8c.html#a16">NlsAnsiToUnicodeData</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>PCH&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/nlsxlat_8c.html#a17">NlsUnicodeToAnsiData</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a22">PUSHORT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/nlsxlat_8c.html#a18">NlsUnicodeToMbAnsiData</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOLEAN&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/nlsxlat_8c.html#a19">NlsMbCodePageTag</a> = FALSE</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a14">USHORT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/nlsxlat_8c.html#a20">NlsOemLeadByteInfoTable</a> [DBCS_TABLE_SIZE]</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a22">PUSHORT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/nlsxlat_8c.html#a21">NlsOemLeadByteInfo</a> = <a class="el" href="../../d9/d6/nlsxlat_8c.html#a20">NlsOemLeadByteInfoTable</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a22">PUSHORT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/nlsxlat_8c.html#a22">NlsMbOemCodePageTables</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a22">PUSHORT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/nlsxlat_8c.html#a23">NlsOemToUnicodeData</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>PCH&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/nlsxlat_8c.html#a24">NlsUnicodeToOemData</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a22">PUSHORT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/nlsxlat_8c.html#a25">NlsUnicodeToMbOemData</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOLEAN&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/nlsxlat_8c.html#a26">NlsMbOemCodePageTag</a> = FALSE</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a14">USHORT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/nlsxlat_8c.html#a27">UnicodeDefaultChar</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a14">USHORT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/nlsxlat_8c.html#a28">OemDefaultChar</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a14">USHORT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/nlsxlat_8c.html#a29">OemTransUniDefaultChar</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a14">USHORT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/nlsxlat_8c.html#a30">UnicodeNull</a> = 0x0000</td></tr>

</table>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="a5" doxytag="nlsxlat.c::DBCS_HEADER" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define DBCS_HEADER&nbsp;&nbsp;&nbsp;1               /* size of DBCS table header */          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l02347">2347</a> of file <a class="el" href="../../d0/d6/nlsxlat_8c-source.html">nlsxlat.c</a>.
<p>
Referenced by <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l02353">RtlInitCodePageTable()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a0" doxytag="nlsxlat.c::DBCS_TABLE_SIZE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define DBCS_TABLE_SIZE&nbsp;&nbsp;&nbsp;256          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00061">61</a> of file <a class="el" href="../../d0/d6/nlsxlat_8c-source.html">nlsxlat.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="nlsxlat.c::DBCS_TBL_SIZE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define DBCS_TBL_SIZE&nbsp;&nbsp;&nbsp;256             /* size of DBCS tables */          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l02345">2345</a> of file <a class="el" href="../../d0/d6/nlsxlat_8c-source.html">nlsxlat.c</a>.
<p>
Referenced by <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l02454">RtlResetRtlTranslations()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="nlsxlat.c::GLYPH_HEADER" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define GLYPH_HEADER&nbsp;&nbsp;&nbsp;1               /* size of GLYPH table header */          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l02346">2346</a> of file <a class="el" href="../../d0/d6/nlsxlat_8c-source.html">nlsxlat.c</a>.
<p>
Referenced by <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l02353">RtlInitCodePageTable()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="nlsxlat.c::GLYPH_TBL_SIZE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define GLYPH_TBL_SIZE&nbsp;&nbsp;&nbsp;MB_TBL_SIZE     /* size of GLYPH tables */          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l02344">2344</a> of file <a class="el" href="../../d0/d6/nlsxlat_8c-source.html">nlsxlat.c</a>.
<p>
Referenced by <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l02353">RtlInitCodePageTable()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a6" doxytag="nlsxlat.c::LANG_HEADER" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define LANG_HEADER&nbsp;&nbsp;&nbsp;1               /* size of LANGUAGE file header */          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l02348">2348</a> of file <a class="el" href="../../d0/d6/nlsxlat_8c-source.html">nlsxlat.c</a>.
<p>
Referenced by <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l02417">RtlpInitUpcaseTable()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a8" doxytag="nlsxlat.c::LO_HEADER" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define LO_HEADER&nbsp;&nbsp;&nbsp;1               /* size of LOWERCASE table header */          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l02350">2350</a> of file <a class="el" href="../../d0/d6/nlsxlat_8c-source.html">nlsxlat.c</a>.
<p>
Referenced by <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l02417">RtlpInitUpcaseTable()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="nlsxlat.c::MB_TBL_SIZE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define MB_TBL_SIZE&nbsp;&nbsp;&nbsp;256             /* size of MB tables */          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l02343">2343</a> of file <a class="el" href="../../d0/d6/nlsxlat_8c-source.html">nlsxlat.c</a>.
<p>
Referenced by <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l02353">RtlInitCodePageTable()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a7" doxytag="nlsxlat.c::UP_HEADER" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define UP_HEADER&nbsp;&nbsp;&nbsp;1               /* size of UPPERCASE table header */          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l02349">2349</a> of file <a class="el" href="../../d0/d6/nlsxlat_8c-source.html">nlsxlat.c</a>.
<p>
Referenced by <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l02417">RtlpInitUpcaseTable()</a>.    </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="a31" doxytag="nlsxlat.c::RtlConsoleMultiByteToUnicodeN" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS RtlConsoleMultiByteToUnicodeN           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">OUT PWCH&nbsp;</td>
          <td class="mdname" nowrap> <em>UnicodeString</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>MaxBytesInUnicodeString</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PULONG BytesInUnicodeString&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PCH&nbsp;</td>
          <td class="mdname" nowrap> <em>MultiByteString</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>BytesInMultiByteString</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>pdwSpecialChar</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00115">115</a> of file <a class="el" href="../../d0/d6/nlsxlat_8c-source.html">nlsxlat.c</a>.
<p>
References <a class="el" href="../../d7/d5/nls_8c-source.html#l00068">NlsAnsiToUnicodeData</a>, <a class="el" href="../../d7/d5/nls_8c-source.html#l00069">NlsLeadByteInfo</a>, <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00082">NlsMbAnsiCodePageTables</a>, <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00086">NlsMbCodePageTag</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00085">PUSHORT</a>, <a class="el" href="../../d6/d8/ntrtlp_8h-source.html#l00246">RTL_PAGED_CODE</a>, <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00369">RtlMultiByteToUnicodeN()</a>, <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00110">UnicodeNull</a>, and <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00064">USHORT</a>.
<p>
Referenced by <a class="el" href="../../d1/d2/__stream_8h-source.html#l01020">WWSB_DoSrvWriteConsole()</a>.
<p>
<pre class="fragment"><div>00125                    :
00126 
00127     This function <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> a superset of MultiByteToUnicode <span class="keywordflow">for</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a>
00128     console.  It works just like <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> other, except <a class="code" href="../../d1/d9/icmui_8def.html#a4">it</a> will detect
00129     <span class="keywordflow">if</span> any characters were under 0x20.
00130 
00131     This <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a16">functions</a> converts <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> specified ansi source string into a
00132     <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a96">Unicode</a> string. The <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a46">translation</a> <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> done with respect to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a>
00133     ANSI Code Page (ACP) installed at boot time.  Single byte characters
00134     in the range 0x00 - 0x7f are simply zero extended as a performance
00135     enhancement.  In some far eastern code pages 0x5c is defined as the
00136     Yen sign.  For system translation we always want to consider 0x5c
00137     to be the backslash character.  We get this for free by zero extending.
00138 
00139     NOTE: This routine only supports precomposed Unicode characters.
00140 
00141 Arguments:
00142 
00143     UnicodeString - Returns a unicode string that is equivalent to
00144         the ansi source string.
00145 
00146     MaxBytesInUnicodeString - Supplies the maximum number of bytes to be
00147         written to UnicodeString.  If this causes UnicodeString to be a
00148         truncated equivalent of MultiByteString, no error condition results.
00149 
00150     BytesInUnicodeString - Returns the number of bytes in the returned
00151         unicode string pointed to by UnicodeString.
00152 
00153     MultiByteString - Supplies the ansi source string that is to be
00154         converted to unicode.
00155 
00156     BytesInMultiByteString - The number of bytes in the string pointed to
00157         by MultiByteString.
00158 
00159     pdwSpecialChar - will be zero if non detected, else it will contain the
00160        approximate index (can be off by 32).
00161 
00162 Return Value:
00163 
00164     SUCCESS - The conversion was successful.
00165 
00166 
00167 --*/
00168 
00169 {
00170     ULONG LoopCount;
00171     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a22">PUSHORT</a> TranslateTable;
00172     ULONG MaxCharsInUnicodeString;
00173 
00174     <a class="code" href="../../d5/d9/ntrtlp_8h.html#a12">RTL_PAGED_CODE</a>();
00175 
00176     *pdwSpecialChar = 0;
00177 
00178     <span class="keywordflow">if</span> (!<a class="code" href="../../d9/d6/nlsxlat_8c.html#a19">NlsMbCodePageTag</a>) {
00179         MaxCharsInUnicodeString = MaxBytesInUnicodeString / <span class="keyword">sizeof</span>(WCHAR);
00180 
00181         LoopCount = (MaxCharsInUnicodeString &lt; BytesInMultiByteString) ?
00182                      MaxCharsInUnicodeString : BytesInMultiByteString;
00183 
00184         <span class="keywordflow">if</span> (ARGUMENT_PRESENT(BytesInUnicodeString))
00185             *BytesInUnicodeString = LoopCount * <span class="keyword">sizeof</span>(WCHAR);
00186 
00187         TranslateTable = <a class="code" href="../../d6/d6/nls_8c.html#a19">NlsAnsiToUnicodeData</a>;  <span class="comment">// used to help the mips compiler</span>
00188 
00189         quick_copy:
00190             <span class="keywordflow">switch</span>( LoopCount ) {
00191             <span class="keywordflow">default</span>:
00192                 <span class="keywordflow">if</span> ((UCHAR)MultiByteString[0x1F] &lt; 0x20)    <span class="keywordflow">goto</span>  bad_case;
00193                 UnicodeString[0x1F] = TranslateTable[(UCHAR)MultiByteString[0x1F]];
00194             <span class="keywordflow">case</span> 0x1F:
00195                 <span class="keywordflow">if</span> ((UCHAR)MultiByteString[0x1E] &lt; 0x20)    <span class="keywordflow">goto</span>  bad_case;
00196                 UnicodeString[0x1E] = TranslateTable[(UCHAR)MultiByteString[0x1E]];
00197             <span class="keywordflow">case</span> 0x1E:
00198                 <span class="keywordflow">if</span> ((UCHAR)MultiByteString[0x1D] &lt; 0x20)    <span class="keywordflow">goto</span>  bad_case;
00199                 UnicodeString[0x1D] = TranslateTable[(UCHAR)MultiByteString[0x1D]];
00200             <span class="keywordflow">case</span> 0x1D:
00201                 <span class="keywordflow">if</span> ((UCHAR)MultiByteString[0x1C] &lt; 0x20)    <span class="keywordflow">goto</span>  bad_case;
00202                 UnicodeString[0x1C] = TranslateTable[(UCHAR)MultiByteString[0x1C]];
00203             <span class="keywordflow">case</span> 0x1C:
00204                 <span class="keywordflow">if</span> ((UCHAR)MultiByteString[0x1B] &lt; 0x20)    <span class="keywordflow">goto</span>  bad_case;
00205                 UnicodeString[0x1B] = TranslateTable[(UCHAR)MultiByteString[0x1B]];
00206             <span class="keywordflow">case</span> 0x1B:
00207                 <span class="keywordflow">if</span> ((UCHAR)MultiByteString[0x1A] &lt; 0x20)    <span class="keywordflow">goto</span>  bad_case;
00208                 UnicodeString[0x1A] = TranslateTable[(UCHAR)MultiByteString[0x1A]];
00209             <span class="keywordflow">case</span> 0x1A:
00210                 <span class="keywordflow">if</span> ((UCHAR)MultiByteString[0x19] &lt; 0x20)    <span class="keywordflow">goto</span>  bad_case;
00211                 UnicodeString[0x19] = TranslateTable[(UCHAR)MultiByteString[0x19]];
00212             <span class="keywordflow">case</span> 0x19:
00213                 <span class="keywordflow">if</span> ((UCHAR)MultiByteString[0x18] &lt; 0x20)    <span class="keywordflow">goto</span>  bad_case;
00214                 UnicodeString[0x18] = TranslateTable[(UCHAR)MultiByteString[0x18]];
00215             <span class="keywordflow">case</span> 0x18:
00216                 <span class="keywordflow">if</span> ((UCHAR)MultiByteString[0x17] &lt; 0x20)    <span class="keywordflow">goto</span>  bad_case;
00217                 UnicodeString[0x17] = TranslateTable[(UCHAR)MultiByteString[0x17]];
00218             <span class="keywordflow">case</span> 0x17:
00219                 <span class="keywordflow">if</span> ((UCHAR)MultiByteString[0x16] &lt; 0x20)    <span class="keywordflow">goto</span>  bad_case;
00220                 UnicodeString[0x16] = TranslateTable[(UCHAR)MultiByteString[0x16]];
00221             <span class="keywordflow">case</span> 0x16:
00222                 <span class="keywordflow">if</span> ((UCHAR)MultiByteString[0x15] &lt; 0x20)    <span class="keywordflow">goto</span>  bad_case;
00223                 UnicodeString[0x15] = TranslateTable[(UCHAR)MultiByteString[0x15]];
00224             <span class="keywordflow">case</span> 0x15:
00225                 <span class="keywordflow">if</span> ((UCHAR)MultiByteString[0x14] &lt; 0x20)    <span class="keywordflow">goto</span>  bad_case;
00226                 UnicodeString[0x14] = TranslateTable[(UCHAR)MultiByteString[0x14]];
00227             <span class="keywordflow">case</span> 0x14:
00228                 <span class="keywordflow">if</span> ((UCHAR)MultiByteString[0x13] &lt; 0x20)    <span class="keywordflow">goto</span>  bad_case;
00229                 UnicodeString[0x13] = TranslateTable[(UCHAR)MultiByteString[0x13]];
00230             <span class="keywordflow">case</span> 0x13:
00231                 <span class="keywordflow">if</span> ((UCHAR)MultiByteString[0x12] &lt; 0x20)    <span class="keywordflow">goto</span>  bad_case;
00232                 UnicodeString[0x12] = TranslateTable[(UCHAR)MultiByteString[0x12]];
00233             <span class="keywordflow">case</span> 0x12:
00234                 <span class="keywordflow">if</span> ((UCHAR)MultiByteString[0x11] &lt; 0x20)    <span class="keywordflow">goto</span>  bad_case;
00235                 UnicodeString[0x11] = TranslateTable[(UCHAR)MultiByteString[0x11]];
00236             <span class="keywordflow">case</span> 0x11:
00237                 <span class="keywordflow">if</span> ((UCHAR)MultiByteString[0x10] &lt; 0x20)    <span class="keywordflow">goto</span>  bad_case;
00238                 UnicodeString[0x10] = TranslateTable[(UCHAR)MultiByteString[0x10]];
00239             <span class="keywordflow">case</span> 0x10:
00240                 <span class="keywordflow">if</span> ((UCHAR)MultiByteString[0x0F] &lt; 0x20)    <span class="keywordflow">goto</span>  bad_case;
00241                 UnicodeString[0x0F] = TranslateTable[(UCHAR)MultiByteString[0x0F]];
00242             <span class="keywordflow">case</span> 0x0F:
00243                 <span class="keywordflow">if</span> ((UCHAR)MultiByteString[0x0E] &lt; 0x20)    <span class="keywordflow">goto</span>  bad_case;
00244                 UnicodeString[0x0E] = TranslateTable[(UCHAR)MultiByteString[0x0E]];
00245             <span class="keywordflow">case</span> 0x0E:
00246                 <span class="keywordflow">if</span> ((UCHAR)MultiByteString[0x0D] &lt; 0x20)    <span class="keywordflow">goto</span>  bad_case;
00247                 UnicodeString[0x0D] = TranslateTable[(UCHAR)MultiByteString[0x0D]];
00248             <span class="keywordflow">case</span> 0x0D:
00249                 <span class="keywordflow">if</span> ((UCHAR)MultiByteString[0x0C] &lt; 0x20)    <span class="keywordflow">goto</span>  bad_case;
00250                 UnicodeString[0x0C] = TranslateTable[(UCHAR)MultiByteString[0x0C]];
00251             <span class="keywordflow">case</span> 0x0C:
00252                 <span class="keywordflow">if</span> ((UCHAR)MultiByteString[0x0B] &lt; 0x20)    <span class="keywordflow">goto</span>  bad_case;
00253                 UnicodeString[0x0B] = TranslateTable[(UCHAR)MultiByteString[0x0B]];
00254             <span class="keywordflow">case</span> 0x0B:
00255                 <span class="keywordflow">if</span> ((UCHAR)MultiByteString[0x0A] &lt; 0x20)    <span class="keywordflow">goto</span>  bad_case;
00256                 UnicodeString[0x0A] = TranslateTable[(UCHAR)MultiByteString[0x0A]];
00257             <span class="keywordflow">case</span> 0x0A:
00258                 <span class="keywordflow">if</span> ((UCHAR)MultiByteString[0x09] &lt; 0x20)    <span class="keywordflow">goto</span>  bad_case;
00259                 UnicodeString[0x09] = TranslateTable[(UCHAR)MultiByteString[0x09]];
00260             <span class="keywordflow">case</span> 0x09:
00261                 <span class="keywordflow">if</span> ((UCHAR)MultiByteString[0x08] &lt; 0x20)    <span class="keywordflow">goto</span>  bad_case;
00262                 UnicodeString[0x08] = TranslateTable[(UCHAR)MultiByteString[0x08]];
00263             <span class="keywordflow">case</span> 0x08:
00264                 <span class="keywordflow">if</span> ((UCHAR)MultiByteString[0x07] &lt; 0x20)    <span class="keywordflow">goto</span>  bad_case;
00265                 UnicodeString[0x07] = TranslateTable[(UCHAR)MultiByteString[0x07]];
00266             <span class="keywordflow">case</span> 0x07:
00267                 <span class="keywordflow">if</span> ((UCHAR)MultiByteString[0x06] &lt; 0x20)    <span class="keywordflow">goto</span>  bad_case;
00268                 UnicodeString[0x06] = TranslateTable[(UCHAR)MultiByteString[0x06]];
00269             <span class="keywordflow">case</span> 0x06:
00270                 <span class="keywordflow">if</span> ((UCHAR)MultiByteString[0x05] &lt; 0x20)    <span class="keywordflow">goto</span>  bad_case;
00271                 UnicodeString[0x05] = TranslateTable[(UCHAR)MultiByteString[0x05]];
00272             <span class="keywordflow">case</span> 0x05:
00273                 <span class="keywordflow">if</span> ((UCHAR)MultiByteString[0x04] &lt; 0x20)    <span class="keywordflow">goto</span>  bad_case;
00274                 UnicodeString[0x04] = TranslateTable[(UCHAR)MultiByteString[0x04]];
00275             <span class="keywordflow">case</span> 0x04:
00276                 <span class="keywordflow">if</span> ((UCHAR)MultiByteString[0x03] &lt; 0x20)    <span class="keywordflow">goto</span>  bad_case;
00277                 UnicodeString[0x03] = TranslateTable[(UCHAR)MultiByteString[0x03]];
00278             <span class="keywordflow">case</span> 0x03:
00279                 <span class="keywordflow">if</span> ((UCHAR)MultiByteString[0x02] &lt; 0x20)    <span class="keywordflow">goto</span>  bad_case;
00280                 UnicodeString[0x02] = TranslateTable[(UCHAR)MultiByteString[0x02]];
00281             <span class="keywordflow">case</span> 0x02:
00282                 <span class="keywordflow">if</span> ((UCHAR)MultiByteString[0x01] &lt; 0x20)    <span class="keywordflow">goto</span>  bad_case;
00283                 UnicodeString[0x01] = TranslateTable[(UCHAR)MultiByteString[0x01]];
00284             <span class="keywordflow">case</span> 0x01:
00285                 <span class="keywordflow">if</span> ((UCHAR)MultiByteString[0x00] &lt; 0x20)    <span class="keywordflow">goto</span>  bad_case;
00286                 UnicodeString[0x00] = TranslateTable[(UCHAR)MultiByteString[0x00]];
00287             <span class="keywordflow">case</span> 0x00:
00288                 ;
00289             }
00290 
00291             <span class="keywordflow">if</span> ( LoopCount &gt; 0x20 ) {
00292                 LoopCount -= 0x20;
00293                 UnicodeString += 0x20;
00294                 MultiByteString += 0x20;
00295 
00296                 <span class="keywordflow">goto</span>  quick_copy;
00297             }
00298         <span class="comment">/* end of copy... */</span>
00299     } <span class="keywordflow">else</span> {
00300         <span class="keyword">register</span> <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> Entry;
00301 
00302         PWCH UnicodeStringAnchor = UnicodeString;
00303         TranslateTable = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a22">PUSHORT</a>)<a class="code" href="../../d9/d6/nlsxlat_8c.html#a15">NlsMbAnsiCodePageTables</a>;
00304 
00305         <span class="comment">// yea, this line is duplicated, but the compiler can handle opt</span>
00306         <span class="comment">// better by moving it around</span>
00307         MaxCharsInUnicodeString = MaxBytesInUnicodeString / <span class="keyword">sizeof</span>(WCHAR);
00308 
00309         <span class="comment">//</span>
00310         <span class="comment">// The ACP is a multibyte code page.  Check each character</span>
00311         <span class="comment">// to see if it is a lead byte before doing the translation.</span>
00312         <span class="comment">//</span>
00313         <span class="keywordflow">while</span> (MaxCharsInUnicodeString &amp;&amp; BytesInMultiByteString) {
00314             MaxCharsInUnicodeString--;
00315             BytesInMultiByteString--;
00316             <span class="keywordflow">if</span> (<a class="code" href="../../d6/d6/nls_8c.html#a20">NlsLeadByteInfo</a>[*(PUCHAR)MultiByteString]) {
00317                 <span class="comment">//</span>
00318                 <span class="comment">// Lead byte - Make sure there is a trail byte.  If not,</span>
00319                 <span class="comment">// pass back a space rather than an error.  Some 3.x</span>
00320                 <span class="comment">// applications pass incorrect strings and don't expect</span>
00321                 <span class="comment">// to get an error.</span>
00322                 <span class="comment">//</span>
00323                 <span class="keywordflow">if</span> (BytesInMultiByteString == 0)
00324                 {
00325                     *UnicodeString++ = <a class="code" href="../../d9/d6/nlsxlat_8c.html#a30">UnicodeNull</a>;
00326                     <span class="keywordflow">break</span>;
00327                 }
00328 
00329                 <span class="comment">//</span>
00330                 <span class="comment">// Get the unicode character.</span>
00331                 <span class="comment">//</span>
00332                 Entry = <a class="code" href="../../d6/d6/nls_8c.html#a20">NlsLeadByteInfo</a>[*(PUCHAR)MultiByteString++];
00333                 *UnicodeString = (WCHAR)TranslateTable[ Entry + *(PUCHAR)MultiByteString++ ];
00334                 UnicodeString++;
00335 
00336                 <span class="comment">//</span>
00337                 <span class="comment">// Decrement count of bytes in multibyte string to account</span>
00338                 <span class="comment">// for the double byte character.</span>
00339                 <span class="comment">//</span>
00340                 BytesInMultiByteString--;
00341             } <span class="keywordflow">else</span> {
00342                 <span class="comment">//</span>
00343                 <span class="comment">// Single byte character.</span>
00344                 <span class="comment">//</span>
00345                 <span class="keywordflow">if</span> ((UCHAR)MultiByteString[0x00] &lt; 0x20)
00346                     *pdwSpecialChar = 1;
00347                 *UnicodeString++ = <a class="code" href="../../d6/d6/nls_8c.html#a19">NlsAnsiToUnicodeData</a>[*(PUCHAR)MultiByteString++];
00348             }
00349         }
00350 
00351         <span class="keywordflow">if</span> (ARGUMENT_PRESENT(BytesInUnicodeString))
00352             *BytesInUnicodeString = (ULONG)((PCH)UnicodeString - (PCH)UnicodeStringAnchor);
00353     }
00354 
00355     <span class="keywordflow">return</span> STATUS_SUCCESS;
00356 
00357     bad_case:
00358         <span class="comment">//</span>
00359         <span class="comment">// this is a low probability case, so we optimized the loop.  If have a</span>
00360         <span class="comment">// special char, finish trans and notify caller.</span>
00361         <span class="comment">//</span>
00362         *pdwSpecialChar = 1;
00363         <span class="keywordflow">return</span> <a class="code" href="../../d9/d6/nlsxlat_8c.html#a33">RtlMultiByteToUnicodeN</a>(UnicodeString, MaxBytesInUnicodeString,
00364                 NULL, MultiByteString, LoopCount);
00365 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a42" doxytag="nlsxlat.c::RtlCustomCPToUnicodeN" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS RtlCustomCPToUnicodeN           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PCPTABLEINFO&nbsp;</td>
          <td class="mdname" nowrap> <em>CustomCP</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PWCH&nbsp;</td>
          <td class="mdname" nowrap> <em>UnicodeString</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>MaxBytesInUnicodeString</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PULONG BytesInUnicodeString&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PCH&nbsp;</td>
          <td class="mdname" nowrap> <em>CustomCPString</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>BytesInCustomCPString</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l01757">1757</a> of file <a class="el" href="../../d0/d6/nlsxlat_8c-source.html">nlsxlat.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00085">PUSHORT</a>, <a class="el" href="../../d6/d8/ntrtlp_8h-source.html#l00246">RTL_PAGED_CODE</a>, <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00110">UnicodeNull</a>, and <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00064">USHORT</a>.
<p>
Referenced by <a class="el" href="../../d5/d9/w32_2ntcon_2server_2misc_8c-source.html#l01443">CharToWcharGlyph()</a>, <a class="el" href="../../d5/d9/w32_2ntcon_2server_2misc_8c-source.html#l01384">ConvertOutputToUnicode()</a>, and <a class="el" href="../../d5/d9/w32_2ntcon_2server_2misc_8c-source.html#l01676">FalseUnicodeToRealUnicode()</a>.
<p>
<pre class="fragment"><div>01767                    :
01768 
01769     This <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a16">functions</a> converts <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> specified CustomCP source string into a
01770     <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a96">Unicode</a> string. The <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a46">translation</a> <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> done with respect to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a>
01771     CustomCP Code Page specified.  Single byte characters
01772     in <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> range 0x00 - 0x7f are simply zero extended as a performance
01773     enhancement.  In some far eastern code pages 0x5c <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> defined as <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a>
01774     Yen sign.  For system <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a46">translation</a> we always want to consider 0x5c
01775     to be <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> backslash character.  We get <span class="keyword">this</span> <span class="keywordflow">for</span> free by zero extending.
01776 
01777     NOTE: This routine <a class="code" href="../../d3/d0/imm32_8def.html#a1">only</a> supports precomposed <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a96">Unicode</a> characters.
01778 
01779 Arguments:
01780 
01781     CustomCP - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> address of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> code page that <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a52">translations</a>
01782         are done relative to
01783 
01784     UnicodeString - Returns a unicode string that <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> equivalent to
01785         <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> CustomCP source string.
01786 
01787     MaxBytesInUnicodeString - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> maximum number of bytes to be
01788         written to UnicodeString.  If <span class="keyword">this</span> causes UnicodeString to be a
01789         truncated equivalent of CustomCPString, no error condition results.
01790 
01791     BytesInUnicodeString - Returns <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> number of bytes in <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> returned
01792         unicode string pointed to by UnicodeString.
01793 
01794     CustomCPString - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> CustomCP source string that <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> to be
01795         converted to unicode.
01796 
01797     BytesInCustomCPString - The number of bytes in <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> string pointed to
01798         by CustomCPString.
01799 
01800 Return Value:
01801 
01802     SUCCESS - The conversion was successful
01803 
01804     STATUS_ILLEGAL_CHARACTER - The <span class="keyword">final</span> CustomCP character was illegal
01805 
01806     STATUS_BUFFER_OVERFLOW - MaxBytesInUnicodeString was not enough to hold
01807         <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> whole CustomCP string.  It was converted correct to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> point though.
01808 
01809 --*/
01810 
01811 {
01812     ULONG LoopCount;
01813     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a22">PUSHORT</a> TranslateTable;
01814     ULONG MaxCharsInUnicodeString;
01815 
01816     <a class="code" href="../../d5/d9/ntrtlp_8h.html#a12">RTL_PAGED_CODE</a>();
01817 
01818     <span class="keywordflow">if</span> (!(CustomCP-&gt;DBCSCodePage)) {
01819         <span class="comment">//</span>
01820         <span class="comment">// The Custom CP is a single byte code page.</span>
01821         <span class="comment">//</span>
01822         MaxCharsInUnicodeString = MaxBytesInUnicodeString / <span class="keyword">sizeof</span>(WCHAR);
01823 
01824         LoopCount = (MaxCharsInUnicodeString &lt; BytesInCustomCPString) ?
01825                      MaxCharsInUnicodeString : BytesInCustomCPString;
01826 
01827         <span class="keywordflow">if</span> (ARGUMENT_PRESENT(BytesInUnicodeString))
01828             *BytesInUnicodeString = LoopCount * <span class="keyword">sizeof</span>(WCHAR);
01829 
01830 
01831         TranslateTable = CustomCP-&gt;MultiByteTable;
01832 
01833         quick_copy:
01834             <span class="keywordflow">switch</span>( LoopCount ) {
01835             <span class="keywordflow">default</span>:
01836                 UnicodeString[0x0F] = TranslateTable[(UCHAR)CustomCPString[0x0F]];
01837             <span class="keywordflow">case</span> 0x0F:
01838                 UnicodeString[0x0E] = TranslateTable[(UCHAR)CustomCPString[0x0E]];
01839             <span class="keywordflow">case</span> 0x0E:
01840                 UnicodeString[0x0D] = TranslateTable[(UCHAR)CustomCPString[0x0D]];
01841             <span class="keywordflow">case</span> 0x0D:
01842                 UnicodeString[0x0C] = TranslateTable[(UCHAR)CustomCPString[0x0C]];
01843             <span class="keywordflow">case</span> 0x0C:
01844                 UnicodeString[0x0B] = TranslateTable[(UCHAR)CustomCPString[0x0B]];
01845             <span class="keywordflow">case</span> 0x0B:
01846                 UnicodeString[0x0A] = TranslateTable[(UCHAR)CustomCPString[0x0A]];
01847             <span class="keywordflow">case</span> 0x0A:
01848                 UnicodeString[0x09] = TranslateTable[(UCHAR)CustomCPString[0x09]];
01849             <span class="keywordflow">case</span> 0x09:
01850                 UnicodeString[0x08] = TranslateTable[(UCHAR)CustomCPString[0x08]];
01851             <span class="keywordflow">case</span> 0x08:
01852                 UnicodeString[0x07] = TranslateTable[(UCHAR)CustomCPString[0x07]];
01853             <span class="keywordflow">case</span> 0x07:
01854                 UnicodeString[0x06] = TranslateTable[(UCHAR)CustomCPString[0x06]];
01855             <span class="keywordflow">case</span> 0x06:
01856                 UnicodeString[0x05] = TranslateTable[(UCHAR)CustomCPString[0x05]];
01857             <span class="keywordflow">case</span> 0x05:
01858                 UnicodeString[0x04] = TranslateTable[(UCHAR)CustomCPString[0x04]];
01859             <span class="keywordflow">case</span> 0x04:
01860                 UnicodeString[0x03] = TranslateTable[(UCHAR)CustomCPString[0x03]];
01861             <span class="keywordflow">case</span> 0x03:
01862                 UnicodeString[0x02] = TranslateTable[(UCHAR)CustomCPString[0x02]];
01863             <span class="keywordflow">case</span> 0x02:
01864                 UnicodeString[0x01] = TranslateTable[(UCHAR)CustomCPString[0x01]];
01865             <span class="keywordflow">case</span> 0x01:
01866                 UnicodeString[0x00] = TranslateTable[(UCHAR)CustomCPString[0x00]];
01867             <span class="keywordflow">case</span> 0x00:
01868                 ;
01869             }
01870 
01871             <span class="keywordflow">if</span> ( LoopCount &gt; 0x10 ) {
01872                 LoopCount -= 0x10;
01873                 CustomCPString += 0x10;
01874                 UnicodeString += 0x10;
01875 
01876                 <span class="keywordflow">goto</span>  quick_copy;
01877             }
01878         <span class="comment">/* end of copy... */</span>
01879     } <span class="keywordflow">else</span> {
01880         <span class="keyword">register</span> <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> Entry;
01881         PWCH UnicodeStringAnchor = UnicodeString;
01882         <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a22">PUSHORT</a> NlsCustomLeadByteInfo = CustomCP-&gt;DBCSOffsets;
01883 
01884         <span class="comment">//</span>
01885         <span class="comment">// The CP is a multibyte code page.  Check each character</span>
01886         <span class="comment">// to see if it is a lead byte before doing the translation.</span>
01887         <span class="comment">//</span>
01888         MaxCharsInUnicodeString = MaxBytesInUnicodeString / <span class="keyword">sizeof</span>(WCHAR);
01889         TranslateTable = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a22">PUSHORT</a>)(CustomCP-&gt;DBCSOffsets);
01890 
01891         <span class="keywordflow">while</span> (MaxCharsInUnicodeString &amp;&amp; BytesInCustomCPString) {
01892             MaxCharsInUnicodeString--;
01893             BytesInCustomCPString--;
01894             <span class="keywordflow">if</span> (NlsCustomLeadByteInfo[*(PUCHAR)CustomCPString]) {
01895                 <span class="comment">//</span>
01896                 <span class="comment">// Lead byte - Make sure there is a trail byte.  If not,</span>
01897                 <span class="comment">// pass back a space rather than an error.  Some 3.x</span>
01898                 <span class="comment">// applications pass incorrect strings and don't expect</span>
01899                 <span class="comment">// to get an error.</span>
01900                 <span class="comment">//</span>
01901                 <span class="keywordflow">if</span> (BytesInCustomCPString == 0)
01902                 {
01903                     *UnicodeString++ = <a class="code" href="../../d9/d6/nlsxlat_8c.html#a30">UnicodeNull</a>;
01904                     <span class="keywordflow">break</span>;
01905                 }
01906 
01907                 <span class="comment">//</span>
01908                 <span class="comment">// Get the unicode character.</span>
01909                 <span class="comment">//</span>
01910                 Entry = NlsCustomLeadByteInfo[*(PUCHAR)CustomCPString++];
01911                 *UnicodeString = TranslateTable[ Entry + *(PUCHAR)CustomCPString++ ];
01912                 UnicodeString++;
01913 
01914                 <span class="comment">//</span>
01915                 <span class="comment">// Decrement count of bytes in multibyte string to account</span>
01916                 <span class="comment">// for the double byte character.</span>
01917                 <span class="comment">//</span>
01918                 BytesInCustomCPString--;
01919             } <span class="keywordflow">else</span> {
01920                 <span class="comment">//</span>
01921                 <span class="comment">// Single byte character.</span>
01922                 <span class="comment">//</span>
01923                 *UnicodeString++ = (CustomCP-&gt;MultiByteTable)[*(PUCHAR)CustomCPString++];
01924             }
01925         }
01926 
01927         <span class="keywordflow">if</span> (ARGUMENT_PRESENT(BytesInUnicodeString))
01928             *BytesInUnicodeString = (ULONG)((PCH)UnicodeString - (PCH)UnicodeStringAnchor);
01929     }
01930 
01931     <span class="comment">//</span>
01932     <span class="comment">//  Check if we were able to use all of the source CustomCP String</span>
01933     <span class="comment">//</span>
01934     <span class="keywordflow">return</span> ( BytesInCustomCPString &lt;= MaxCharsInUnicodeString ) ?
01935            STATUS_SUCCESS :
01936            STATUS_BUFFER_OVERFLOW;
01937 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a48" doxytag="nlsxlat.c::RtlGetDefaultCodePage" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void RtlGetDefaultCodePage           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">OUT <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a22">PUSHORT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>AnsiCodePage</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a22">PUSHORT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>OemCodePage</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l02498">2498</a> of file <a class="el" href="../../d0/d6/nlsxlat_8c-source.html">nlsxlat.c</a>.
<p>
References <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00079">NlsAnsiCodePage</a>, <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00080">NlsOemCodePage</a>, and <a class="el" href="../../d6/d8/ntrtlp_8h-source.html#l00246">RTL_PAGED_CODE</a>.
<p>
<pre class="fragment"><div>02502 {
02503     <a class="code" href="../../d5/d9/ntrtlp_8h.html#a12">RTL_PAGED_CODE</a>();
02504     *AnsiCodePage = <a class="code" href="../../d9/d6/nlsxlat_8c.html#a12">NlsAnsiCodePage</a>;
02505     *OemCodePage = <a class="code" href="../../d9/d6/nlsxlat_8c.html#a13">NlsOemCodePage</a>;
02506 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a45" doxytag="nlsxlat.c::RtlInitCodePageTable" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID RtlInitCodePageTable           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a22">PUSHORT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>TableBase</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PCPTABLEINFO&nbsp;</td>
          <td class="mdname" nowrap> <em>CodePageTable</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l02353">2353</a> of file <a class="el" href="../../d0/d6/nlsxlat_8c-source.html">nlsxlat.c</a>.
<p>
References <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l02347">DBCS_HEADER</a>, <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l02346">GLYPH_HEADER</a>, <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l02344">GLYPH_TBL_SIZE</a>, <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l02343">MB_TBL_SIZE</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00085">PUSHORT</a>, <a class="el" href="../../d6/d8/ntrtlp_8h-source.html#l00246">RTL_PAGED_CODE</a>, and <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00064">USHORT</a>.
<p>
Referenced by <a class="el" href="../../d5/d9/w32_2ntcon_2server_2misc_8c-source.html#l01787">InitializeCustomCP()</a>, and <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l02438">RtlInitNlsTables()</a>.
<p>
<pre class="fragment"><div>02357 {
02358     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> offMB;
02359     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> offWC;
02360     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a22">PUSHORT</a> pGlyph;
02361     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a22">PUSHORT</a> pRange;
02362 
02363     <a class="code" href="../../d5/d9/ntrtlp_8h.html#a12">RTL_PAGED_CODE</a>();
02364 
02365     <span class="comment">//</span>
02366     <span class="comment">// Get the offsets.</span>
02367     <span class="comment">//</span>
02368 
02369     offMB = TableBase[0];
02370     offWC = offMB + TableBase[offMB];
02371 
02372 
02373     <span class="comment">//</span>
02374     <span class="comment">// Attach Code Page Info to CP hash node.</span>
02375     <span class="comment">//</span>
02376 
02377     CodePageTable-&gt;CodePage = TableBase[1];
02378     CodePageTable-&gt;MaximumCharacterSize = TableBase[2];
02379     CodePageTable-&gt;DefaultChar = TableBase[3];           <span class="comment">// default character (MB)</span>
02380     CodePageTable-&gt;UniDefaultChar = TableBase[4];        <span class="comment">// default character (Unicode)</span>
02381     CodePageTable-&gt;TransDefaultChar = TableBase[5];      <span class="comment">// trans of default char (Unicode)</span>
02382     CodePageTable-&gt;TransUniDefaultChar = TableBase[6];   <span class="comment">// trans of Uni default char (MB)</span>
02383     RtlMoveMemory(
02384         &amp;CodePageTable-&gt;LeadByte,
02385         &amp;TableBase[7],
02386         MAXIMUM_LEADBYTES
02387         );
02388     CodePageTable-&gt;MultiByteTable = (TableBase + offMB + 1);
02389 
02390     pGlyph = CodePageTable-&gt;MultiByteTable + <a class="code" href="../../d9/d6/nlsxlat_8c.html#a1">MB_TBL_SIZE</a>;
02391 
02392     <span class="keywordflow">if</span> (pGlyph[0] != 0) {
02393         pRange = CodePageTable-&gt;DBCSRanges = pGlyph + <a class="code" href="../../d9/d6/nlsxlat_8c.html#a4">GLYPH_HEADER</a> + <a class="code" href="../../d9/d6/nlsxlat_8c.html#a2">GLYPH_TBL_SIZE</a>;
02394         }
02395     <span class="keywordflow">else</span> {
02396         pRange = CodePageTable-&gt;DBCSRanges = pGlyph + <a class="code" href="../../d9/d6/nlsxlat_8c.html#a4">GLYPH_HEADER</a>;
02397         }
02398 
02399     <span class="comment">//</span>
02400     <span class="comment">//  Attach DBCS information to CP hash node.</span>
02401     <span class="comment">//</span>
02402 
02403     <span class="keywordflow">if</span> (pRange[0] &gt; 0) {
02404         CodePageTable-&gt;DBCSOffsets = pRange + <a class="code" href="../../d9/d6/nlsxlat_8c.html#a5">DBCS_HEADER</a>;
02405         CodePageTable-&gt;DBCSCodePage = 1;
02406         }
02407     <span class="keywordflow">else</span> {
02408         CodePageTable-&gt;DBCSCodePage = 0;
02409         CodePageTable-&gt;DBCSOffsets = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
02410         }
02411 
02412     CodePageTable-&gt;WideCharTable = (TableBase + offWC + 1);
02413 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a46" doxytag="nlsxlat.c::RtlInitNlsTables" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID RtlInitNlsTables           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a22">PUSHORT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>AnsiNlsBase</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a22">PUSHORT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>OemNlsBase</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a22">PUSHORT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>LanguageNlsBase</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PNLSTABLEINFO&nbsp;</td>
          <td class="mdname" nowrap> <em>TableInfo</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l02438">2438</a> of file <a class="el" href="../../d0/d6/nlsxlat_8c-source.html">nlsxlat.c</a>.
<p>
References <a class="el" href="../../d6/d8/ntrtlp_8h-source.html#l00246">RTL_PAGED_CODE</a>, <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l02353">RtlInitCodePageTable()</a>, and <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l02417">RtlpInitUpcaseTable()</a>.
<p>
Referenced by <a class="el" href="../../d9/d1/ldrinit_8c-source.html#l00616">LdrpInitializeProcess()</a>.
<p>
<pre class="fragment"><div>02444 {
02445     <a class="code" href="../../d5/d9/ntrtlp_8h.html#a12">RTL_PAGED_CODE</a>();
02446 
02447     <a class="code" href="../../d9/d6/nlsxlat_8c.html#a45">RtlInitCodePageTable</a>(AnsiNlsBase,&amp;TableInfo-&gt;AnsiTableInfo);
02448     <a class="code" href="../../d9/d6/nlsxlat_8c.html#a45">RtlInitCodePageTable</a>(OemNlsBase,&amp;TableInfo-&gt;OemTableInfo);
02449     <a class="code" href="../../d9/d6/nlsxlat_8c.html#a32">RtlpInitUpcaseTable</a>(LanguageNlsBase,TableInfo);
02450 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a33" doxytag="nlsxlat.c::RtlMultiByteToUnicodeN" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS RtlMultiByteToUnicodeN           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">OUT PWCH&nbsp;</td>
          <td class="mdname" nowrap> <em>UnicodeString</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>MaxBytesInUnicodeString</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PULONG BytesInUnicodeString&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PCH&nbsp;</td>
          <td class="mdname" nowrap> <em>MultiByteString</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>BytesInMultiByteString</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00369">369</a> of file <a class="el" href="../../d0/d6/nlsxlat_8c-source.html">nlsxlat.c</a>.
<p>
References <a class="el" href="../../d7/d5/nls_8c-source.html#l00068">NlsAnsiToUnicodeData</a>, <a class="el" href="../../d7/d5/nls_8c-source.html#l00069">NlsLeadByteInfo</a>, <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00082">NlsMbAnsiCodePageTables</a>, <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00086">NlsMbCodePageTag</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00085">PUSHORT</a>, <a class="el" href="../../d6/d8/ntrtlp_8h-source.html#l00246">RTL_PAGED_CODE</a>, <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00110">UnicodeNull</a>, and <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00064">USHORT</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/w32_2ntuser_2client_2callback_8c-source.html#l00129">_ClientEventCallback()</a>, <a class="el" href="../../d4/d4/ssend_8c-source.html#l00839">CaptureUnicodeCallbackData()</a>, <a class="el" href="../../d6/d6/strings_8c-source.html#l00046">CharLowerA()</a>, <a class="el" href="../../d6/d6/strings_8c-source.html#l00119">CharUpperA()</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l00199">CreateAcceleratorTableA()</a>, <a class="el" href="../../d1/d4/ntuser_2kernel_2getset_8c-source.html#l00028">DefSetText()</a>, <a class="el" href="../../d5/d3/client_2ddetrack_8c-source.html#l00208">FixupDdeExecuteIfNecessary()</a>, <a class="el" href="../../d6/d6/strings_8c-source.html#l00623">IsCharAlphaA()</a>, <a class="el" href="../../d6/d6/strings_8c-source.html#l00577">IsCharAlphaNumericA()</a>, <a class="el" href="../../d6/d6/strings_8c-source.html#l00502">IsCharLowerA()</a>, <a class="el" href="../../d6/d6/strings_8c-source.html#l00538">IsCharUpperA()</a>, <a class="el" href="../../d3/d2/tnlsxlat_8c-source.html#l00033">main()</a>, <a class="el" href="../../d6/d5/chartran_8c-source.html#l00191">MBToWCSEx()</a>, <a class="el" href="../../d5/d9/w32_2ntcon_2server_2misc_8c-source.html#l01573">RealUnicodeToFalseUnicode()</a>, <a class="el" href="../../d7/d5/nls_8c-source.html#l00171">RtlAnsiCharToUnicodeChar()</a>, <a class="el" href="../../d7/d5/nls_8c-source.html#l00082">RtlAnsiStringToUnicodeString()</a>, <a class="el" href="../../d2/d1/rtlinit_8c-source.html#l00030">RtlCaptureAnsiString()</a>, <a class="el" href="../../d2/d1/rtlinit_8c-source.html#l00095">RtlCaptureLargeAnsiString()</a>, <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00115">RtlConsoleMultiByteToUnicodeN()</a>, <a class="el" href="../../d6/d5/chartran_8c-source.html#l00490">RtlMBMessageWParamCharToWCS()</a>, and <a class="el" href="../../d1/d7/ntcftxt_8h-source.html#l01013">VkKeyScan()</a>.
<p>
<pre class="fragment"><div>00378                    :
00379 
00380     This <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a16">functions</a> converts <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> specified ansi source string into a
00381     <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a96">Unicode</a> string. The <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a46">translation</a> <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> done with respect to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a>
00382     ANSI Code Page (ACP) installed at boot time.  Single byte characters
00383     in the range 0x00 - 0x7f are simply zero extended as a performance
00384     enhancement.  In some far eastern code pages 0x5c is defined as the
00385     Yen sign.  For system translation we always want to consider 0x5c
00386     to be the backslash character.  We get this for free by zero extending.
00387 
00388     NOTE: This routine only supports precomposed Unicode characters.
00389 
00390 Arguments:
00391 
00392     UnicodeString - Returns a unicode string that is equivalent to
00393         the ansi source string.
00394 
00395     MaxBytesInUnicodeString - Supplies the maximum number of bytes to be
00396         written to UnicodeString.  If this causes UnicodeString to be a
00397         truncated equivalent of MultiByteString, no error condition results.
00398 
00399     BytesInUnicodeString - Returns the number of bytes in the returned
00400         unicode string pointed to by UnicodeString.
00401 
00402     MultiByteString - Supplies the ansi source string that is to be
00403         converted to unicode.  For single-byte character sets, this address
00404         CAN be the same as UnicodeString.
00405 
00406     BytesInMultiByteString - The number of bytes in the string pointed to
00407         by MultiByteString.
00408 
00409 Return Value:
00410 
00411     SUCCESS - The conversion was successful.
00412 
00413 
00414 --*/
00415 
00416 {
00417     ULONG LoopCount;
00418     ULONG TmpCount;
00419     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a22">PUSHORT</a> TranslateTable;
00420     ULONG MaxCharsInUnicodeString;
00421 
00422     <a class="code" href="../../d5/d9/ntrtlp_8h.html#a12">RTL_PAGED_CODE</a>();
00423 
00424     <span class="keywordflow">if</span> (!<a class="code" href="../../d9/d6/nlsxlat_8c.html#a19">NlsMbCodePageTag</a>) {
00425         MaxCharsInUnicodeString = MaxBytesInUnicodeString / <span class="keyword">sizeof</span>(WCHAR);
00426 
00427         LoopCount = (MaxCharsInUnicodeString &lt; BytesInMultiByteString) ?
00428                      MaxCharsInUnicodeString : BytesInMultiByteString;
00429 
00430         <span class="keywordflow">if</span> (ARGUMENT_PRESENT(BytesInUnicodeString))
00431             *BytesInUnicodeString = LoopCount * <span class="keyword">sizeof</span>(WCHAR);
00432 
00433         TranslateTable = <a class="code" href="../../d6/d6/nls_8c.html#a19">NlsAnsiToUnicodeData</a>;  <span class="comment">// used to help the mips compiler</span>
00434 
00435         TmpCount = LoopCount &amp; 0x1F;
00436         UnicodeString += (LoopCount - TmpCount);
00437         MultiByteString += (LoopCount - TmpCount);
00438         quick_copy:
00439             <span class="keywordflow">switch</span>( TmpCount ) {
00440             <span class="keywordflow">default</span>:
00441                 UnicodeString[0x1F] = TranslateTable[(UCHAR)MultiByteString[0x1F]];
00442             <span class="keywordflow">case</span> 0x1F:
00443                 UnicodeString[0x1E] = TranslateTable[(UCHAR)MultiByteString[0x1E]];
00444             <span class="keywordflow">case</span> 0x1E:
00445                 UnicodeString[0x1D] = TranslateTable[(UCHAR)MultiByteString[0x1D]];
00446             <span class="keywordflow">case</span> 0x1D:
00447                 UnicodeString[0x1C] = TranslateTable[(UCHAR)MultiByteString[0x1C]];
00448             <span class="keywordflow">case</span> 0x1C:
00449                 UnicodeString[0x1B] = TranslateTable[(UCHAR)MultiByteString[0x1B]];
00450             <span class="keywordflow">case</span> 0x1B:
00451                 UnicodeString[0x1A] = TranslateTable[(UCHAR)MultiByteString[0x1A]];
00452             <span class="keywordflow">case</span> 0x1A:
00453                 UnicodeString[0x19] = TranslateTable[(UCHAR)MultiByteString[0x19]];
00454             <span class="keywordflow">case</span> 0x19:
00455                 UnicodeString[0x18] = TranslateTable[(UCHAR)MultiByteString[0x18]];
00456             <span class="keywordflow">case</span> 0x18:
00457                 UnicodeString[0x17] = TranslateTable[(UCHAR)MultiByteString[0x17]];
00458             <span class="keywordflow">case</span> 0x17:
00459                 UnicodeString[0x16] = TranslateTable[(UCHAR)MultiByteString[0x16]];
00460             <span class="keywordflow">case</span> 0x16:
00461                 UnicodeString[0x15] = TranslateTable[(UCHAR)MultiByteString[0x15]];
00462             <span class="keywordflow">case</span> 0x15:
00463                 UnicodeString[0x14] = TranslateTable[(UCHAR)MultiByteString[0x14]];
00464             <span class="keywordflow">case</span> 0x14:
00465                 UnicodeString[0x13] = TranslateTable[(UCHAR)MultiByteString[0x13]];
00466             <span class="keywordflow">case</span> 0x13:
00467                 UnicodeString[0x12] = TranslateTable[(UCHAR)MultiByteString[0x12]];
00468             <span class="keywordflow">case</span> 0x12:
00469                 UnicodeString[0x11] = TranslateTable[(UCHAR)MultiByteString[0x11]];
00470             <span class="keywordflow">case</span> 0x11:
00471                 UnicodeString[0x10] = TranslateTable[(UCHAR)MultiByteString[0x10]];
00472             <span class="keywordflow">case</span> 0x10:
00473                 UnicodeString[0x0F] = TranslateTable[(UCHAR)MultiByteString[0x0F]];
00474             <span class="keywordflow">case</span> 0x0F:
00475                 UnicodeString[0x0E] = TranslateTable[(UCHAR)MultiByteString[0x0E]];
00476             <span class="keywordflow">case</span> 0x0E:
00477                 UnicodeString[0x0D] = TranslateTable[(UCHAR)MultiByteString[0x0D]];
00478             <span class="keywordflow">case</span> 0x0D:
00479                 UnicodeString[0x0C] = TranslateTable[(UCHAR)MultiByteString[0x0C]];
00480             <span class="keywordflow">case</span> 0x0C:
00481                 UnicodeString[0x0B] = TranslateTable[(UCHAR)MultiByteString[0x0B]];
00482             <span class="keywordflow">case</span> 0x0B:
00483                 UnicodeString[0x0A] = TranslateTable[(UCHAR)MultiByteString[0x0A]];
00484             <span class="keywordflow">case</span> 0x0A:
00485                 UnicodeString[0x09] = TranslateTable[(UCHAR)MultiByteString[0x09]];
00486             <span class="keywordflow">case</span> 0x09:
00487                 UnicodeString[0x08] = TranslateTable[(UCHAR)MultiByteString[0x08]];
00488             <span class="keywordflow">case</span> 0x08:
00489                 UnicodeString[0x07] = TranslateTable[(UCHAR)MultiByteString[0x07]];
00490             <span class="keywordflow">case</span> 0x07:
00491                 UnicodeString[0x06] = TranslateTable[(UCHAR)MultiByteString[0x06]];
00492             <span class="keywordflow">case</span> 0x06:
00493                 UnicodeString[0x05] = TranslateTable[(UCHAR)MultiByteString[0x05]];
00494             <span class="keywordflow">case</span> 0x05:
00495                 UnicodeString[0x04] = TranslateTable[(UCHAR)MultiByteString[0x04]];
00496             <span class="keywordflow">case</span> 0x04:
00497                 UnicodeString[0x03] = TranslateTable[(UCHAR)MultiByteString[0x03]];
00498             <span class="keywordflow">case</span> 0x03:
00499                 UnicodeString[0x02] = TranslateTable[(UCHAR)MultiByteString[0x02]];
00500             <span class="keywordflow">case</span> 0x02:
00501                 UnicodeString[0x01] = TranslateTable[(UCHAR)MultiByteString[0x01]];
00502             <span class="keywordflow">case</span> 0x01:
00503                 UnicodeString[0x00] = TranslateTable[(UCHAR)MultiByteString[0x00]];
00504             <span class="keywordflow">case</span> 0x00:
00505                 ;
00506             }
00507 
00508             <span class="keywordflow">if</span> ( LoopCount &gt;= 0x20 ) {
00509                 TmpCount = 0x20;
00510                 LoopCount -= 0x20;
00511                 UnicodeString -= 0x20;
00512                 MultiByteString -= 0x20;
00513 
00514                 <span class="keywordflow">goto</span>  quick_copy;
00515             }
00516         <span class="comment">/* end of copy... */</span>
00517     } <span class="keywordflow">else</span> {
00518         <span class="keyword">register</span> <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> Entry;
00519         PWCH UnicodeStringAnchor = UnicodeString;
00520         TranslateTable = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a22">PUSHORT</a>)<a class="code" href="../../d9/d6/nlsxlat_8c.html#a15">NlsMbAnsiCodePageTables</a>;
00521 
00522         <span class="comment">// yea, this line is duplicated, but the compiler can handle opt</span>
00523         <span class="comment">// better buy moving it around</span>
00524         MaxCharsInUnicodeString = MaxBytesInUnicodeString / <span class="keyword">sizeof</span>(WCHAR);
00525 
00526         <span class="comment">//</span>
00527         <span class="comment">// The ACP is a multibyte code page.  Check each character</span>
00528         <span class="comment">// to see if it is a lead byte before doing the translation.</span>
00529         <span class="comment">//</span>
00530         <span class="keywordflow">while</span> (MaxCharsInUnicodeString &amp;&amp; BytesInMultiByteString) {
00531             MaxCharsInUnicodeString--;
00532             BytesInMultiByteString--;
00533             <span class="keywordflow">if</span> (<a class="code" href="../../d6/d6/nls_8c.html#a20">NlsLeadByteInfo</a>[*(PUCHAR)MultiByteString]) {
00534                 <span class="comment">//</span>
00535                 <span class="comment">// Lead byte - Make sure there is a trail byte.  If not,</span>
00536                 <span class="comment">// pass back a space rather than an error.  Some 3.x</span>
00537                 <span class="comment">// applications pass incorrect strings and don't expect</span>
00538                 <span class="comment">// to get an error.</span>
00539                 <span class="comment">//</span>
00540                 <span class="keywordflow">if</span> (BytesInMultiByteString == 0)
00541                 {
00542                     *UnicodeString++ = <a class="code" href="../../d9/d6/nlsxlat_8c.html#a30">UnicodeNull</a>;
00543                     <span class="keywordflow">break</span>;
00544                 }
00545 
00546                 <span class="comment">//</span>
00547                 <span class="comment">// Get the unicode character.</span>
00548                 <span class="comment">//</span>
00549                 Entry = <a class="code" href="../../d6/d6/nls_8c.html#a20">NlsLeadByteInfo</a>[*(PUCHAR)MultiByteString++];
00550                 *UnicodeString = (WCHAR)TranslateTable[ Entry + *(PUCHAR)MultiByteString++ ];
00551                 UnicodeString++;
00552 
00553                 <span class="comment">//</span>
00554                 <span class="comment">// Decrement count of bytes in multibyte string to account</span>
00555                 <span class="comment">// for the double byte character.</span>
00556                 <span class="comment">//</span>
00557                 BytesInMultiByteString--;
00558             } <span class="keywordflow">else</span> {
00559                 <span class="comment">//</span>
00560                 <span class="comment">// Single byte character.</span>
00561                 <span class="comment">//</span>
00562                 *UnicodeString++ = <a class="code" href="../../d6/d6/nls_8c.html#a19">NlsAnsiToUnicodeData</a>[*(PUCHAR)MultiByteString++];
00563             }
00564         }
00565 
00566         <span class="keywordflow">if</span> (ARGUMENT_PRESENT(BytesInUnicodeString))
00567             *BytesInUnicodeString = (ULONG)((PCH)UnicodeString - (PCH)UnicodeStringAnchor);
00568     }
00569 
00570     <span class="keywordflow">return</span> STATUS_SUCCESS;
00571 
00572 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a35" doxytag="nlsxlat.c::RtlMultiByteToUnicodeSize" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS RtlMultiByteToUnicodeSize           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">OUT PULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>BytesInUnicodeString</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PCH&nbsp;</td>
          <td class="mdname" nowrap> <em>MultiByteString</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>BytesInMultiByteString</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00755">755</a> of file <a class="el" href="../../d0/d6/nlsxlat_8c-source.html">nlsxlat.c</a>.
<p>
References <a class="el" href="../../d7/d5/nls_8c-source.html#l00069">NlsLeadByteInfo</a>, <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00086">NlsMbCodePageTag</a>, and <a class="el" href="../../d6/d8/ntrtlp_8h-source.html#l00246">RTL_PAGED_CODE</a>.
<p>
Referenced by <a class="el" href="../../d7/d5/nls_8c-source.html#l01421">RtlxAnsiStringToUnicodeSize()</a>, and <a class="el" href="../../d7/d5/nls_8c-source.html#l01467">RtlxOemStringToUnicodeSize()</a>.
<p>
<pre class="fragment"><div>00762                    :
00763 
00764     This <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a16">functions</a> determines how many bytes would be needed to represent
00765     <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> specified ANSI source string in <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a96">Unicode</a> string (not counting the
00766     null terminator)
00767     The <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a46">translation</a> <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> done with respect to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> ANSI Code Page (ACP) installed
00768     at boot time.  Single byte characters in the range 0x00 - 0x7f are simply
00769     zero extended as a performance enhancement.  In some far eastern code pages
00770     0x5c is defined as the Yen sign.  For system translation we always want to
00771     consider 0x5c to be the backslash character.  We get this for free by zero
00772     extending.
00773 
00774     NOTE: This routine only supports precomposed Unicode characters.
00775 
00776 Arguments:
00777 
00778     BytesInUnicodeString - Returns the number of bytes a Unicode translation
00779         of the ANSI string pointed to by MultiByteString would contain.
00780 
00781     MultiByteString - Supplies the ansi source string whose Unicode length
00782         is to be calculated.
00783 
00784     BytesInMultiByteString - The number of bytes in the string pointed to
00785         by MultiByteString.
00786 
00787 Return Value:
00788 
00789     SUCCESS - The conversion was successful
00790 
00791 
00792 --*/
00793 
00794 {
00795     ULONG cbUnicode = 0;
00796 
00797     <a class="code" href="../../d5/d9/ntrtlp_8h.html#a12">RTL_PAGED_CODE</a>();
00798 
00799     <span class="keywordflow">if</span> (<a class="code" href="../../d9/d6/nlsxlat_8c.html#a19">NlsMbCodePageTag</a>) {
00800         <span class="comment">//</span>
00801         <span class="comment">// The ACP is a multibyte code page.  Check each character</span>
00802         <span class="comment">// to see if it is a lead byte before doing the translation.</span>
00803         <span class="comment">//</span>
00804         <span class="keywordflow">while</span> (BytesInMultiByteString--) {
00805             <span class="keywordflow">if</span> (<a class="code" href="../../d6/d6/nls_8c.html#a20">NlsLeadByteInfo</a>[*(PUCHAR)MultiByteString++]) {
00806                 <span class="comment">//</span>
00807                 <span class="comment">// Lead byte - translate the trail byte using the table</span>
00808                 <span class="comment">// that corresponds to this lead byte.  NOTE: make sure</span>
00809                 <span class="comment">// we have a trail byte to convert.</span>
00810                 <span class="comment">//</span>
00811                 <span class="keywordflow">if</span> (BytesInMultiByteString == 0) {
00812                     <span class="comment">//</span>
00813                     <span class="comment">// RtlMultibyteToUnicodeN() uses the unicode</span>
00814                     <span class="comment">// default character if the last multibyte</span>
00815                     <span class="comment">// character is a lead byte.</span>
00816                     <span class="comment">//</span>
00817                     cbUnicode += <span class="keyword">sizeof</span>(WCHAR);
00818                     <span class="keywordflow">break</span>;
00819                 } <span class="keywordflow">else</span> {
00820                     BytesInMultiByteString--;
00821                     MultiByteString++;
00822                 }
00823             }
00824             cbUnicode += <span class="keyword">sizeof</span>(WCHAR);
00825         }
00826         *BytesInUnicodeString = cbUnicode;
00827     } <span class="keywordflow">else</span> {
00828         <span class="comment">//</span>
00829         <span class="comment">// The ACP is a single byte code page.</span>
00830         <span class="comment">//</span>
00831         *BytesInUnicodeString = BytesInMultiByteString * <span class="keyword">sizeof</span>(WCHAR);
00832     }
00833 
00834     <span class="keywordflow">return</span> STATUS_SUCCESS;
00835 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a34" doxytag="nlsxlat.c::RtlOemToUnicodeN" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS RtlOemToUnicodeN           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">OUT PWCH&nbsp;</td>
          <td class="mdname" nowrap> <em>UnicodeString</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>MaxBytesInUnicodeString</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PULONG BytesInUnicodeString&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PCH&nbsp;</td>
          <td class="mdname" nowrap> <em>OemString</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>BytesInOemString</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00576">576</a> of file <a class="el" href="../../d0/d6/nlsxlat_8c-source.html">nlsxlat.c</a>.
<p>
References <a class="el" href="../../d6/d8/gen8dot3_8c-source.html#l00031">NlsMbOemCodePageTables</a>, <a class="el" href="../../d6/d8/gen8dot3_8c-source.html#l00032">NlsMbOemCodePageTag</a>, <a class="el" href="../../d6/d8/gen8dot3_8c-source.html#l00033">NlsOemLeadByteInfo</a>, <a class="el" href="../../d6/d8/gen8dot3_8c-source.html#l00029">NlsOemToUnicodeData</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00085">PUSHORT</a>, <a class="el" href="../../d6/d8/ntrtlp_8h-source.html#l00246">RTL_PAGED_CODE</a>, <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00110">UnicodeNull</a>, and <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00064">USHORT</a>.
<p>
Referenced by <a class="el" href="../../d5/d9/w32_2ntcon_2server_2misc_8c-source.html#l01469">CharToWchar()</a>, <a class="el" href="../../d5/d9/w32_2ntcon_2server_2misc_8c-source.html#l01345">ConvertInputToUnicode()</a>, <a class="el" href="../../d3/d6/notify_8c-source.html#l02286">FsRtlNotifyUpdateBuffer()</a>, <a class="el" href="../../d7/d5/nls_8c-source.html#l00716">RtlOemStringToCountedUnicodeString()</a>, and <a class="el" href="../../d7/d5/nls_8c-source.html#l00439">RtlOemStringToUnicodeString()</a>.
<p>
<pre class="fragment"><div>00585                    :
00586 
00587     This <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a16">functions</a> converts <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> specified oem source string into a
00588     <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a96">Unicode</a> string. The <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a46">translation</a> <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> done with respect to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a>
00589     OEM Code Page (OCP) installed at boot time.  Single byte characters
00590     in the range 0x00 - 0x7f are simply zero extended as a performance
00591     enhancement.  In some far eastern code pages 0x5c is defined as the
00592     Yen sign.  For system translation we always want to consider 0x5c
00593     to be the backslash character.  We get this for free by zero extending.
00594 
00595     NOTE: This routine only supports precomposed Unicode characters.
00596 
00597 Arguments:
00598 
00599     UnicodeString - Returns a unicode string that is equivalent to
00600         the oem source string.
00601 
00602     MaxBytesInUnicodeString - Supplies the maximum number of bytes to be
00603         written to UnicodeString.  If this causes UnicodeString to be a
00604         truncated equivalent of OemString, no error condition results.
00605 
00606     BytesInUnicodeString - Returns the number of bytes in the returned
00607         unicode string pointed to by UnicodeString.
00608 
00609     OemString - Supplies the oem source string that is to be
00610         converted to unicode.
00611 
00612     BytesInOemString - The number of bytes in the string pointed to
00613         by OemString.
00614 
00615 Return Value:
00616 
00617     SUCCESS - The conversion was successful
00618 
00619     STATUS_ILLEGAL_CHARACTER - The final Oem character was illegal
00620 
00621     STATUS_BUFFER_OVERFLOW - MaxBytesInUnicodeString was not enough to hold
00622         the whole Oem string.  It was converted correct to the point though.
00623 
00624 --*/
00625 
00626 {
00627     ULONG LoopCount;
00628     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a22">PUSHORT</a> TranslateTable;
00629     ULONG MaxCharsInUnicodeString;
00630 
00631     <a class="code" href="../../d5/d9/ntrtlp_8h.html#a12">RTL_PAGED_CODE</a>();
00632 
00633     <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d9/gen8dot3_8c.html#a5">NlsMbOemCodePageTag</a>) {
00634         <span class="comment">//</span>
00635         <span class="comment">// The OCP is a single byte code page.</span>
00636         <span class="comment">//</span>
00637         MaxCharsInUnicodeString = MaxBytesInUnicodeString / <span class="keyword">sizeof</span>(WCHAR);
00638 
00639         LoopCount = (MaxCharsInUnicodeString &lt; BytesInOemString) ?
00640                      MaxCharsInUnicodeString : BytesInOemString;
00641 
00642         <span class="keywordflow">if</span> (ARGUMENT_PRESENT(BytesInUnicodeString))
00643             *BytesInUnicodeString = LoopCount * <span class="keyword">sizeof</span>(WCHAR);
00644 
00645 
00646         TranslateTable = <a class="code" href="../../d5/d9/gen8dot3_8c.html#a2">NlsOemToUnicodeData</a>;  <span class="comment">// used to help the mips compiler</span>
00647 
00648         quick_copy:
00649             <span class="keywordflow">switch</span>( LoopCount ) {
00650             <span class="keywordflow">default</span>:
00651                 UnicodeString[0x0F] = TranslateTable[(UCHAR)OemString[0x0F]];
00652             <span class="keywordflow">case</span> 0x0F:
00653                 UnicodeString[0x0E] = TranslateTable[(UCHAR)OemString[0x0E]];
00654             <span class="keywordflow">case</span> 0x0E:
00655                 UnicodeString[0x0D] = TranslateTable[(UCHAR)OemString[0x0D]];
00656             <span class="keywordflow">case</span> 0x0D:
00657                 UnicodeString[0x0C] = TranslateTable[(UCHAR)OemString[0x0C]];
00658             <span class="keywordflow">case</span> 0x0C:
00659                 UnicodeString[0x0B] = TranslateTable[(UCHAR)OemString[0x0B]];
00660             <span class="keywordflow">case</span> 0x0B:
00661                 UnicodeString[0x0A] = TranslateTable[(UCHAR)OemString[0x0A]];
00662             <span class="keywordflow">case</span> 0x0A:
00663                 UnicodeString[0x09] = TranslateTable[(UCHAR)OemString[0x09]];
00664             <span class="keywordflow">case</span> 0x09:
00665                 UnicodeString[0x08] = TranslateTable[(UCHAR)OemString[0x08]];
00666             <span class="keywordflow">case</span> 0x08:
00667                 UnicodeString[0x07] = TranslateTable[(UCHAR)OemString[0x07]];
00668             <span class="keywordflow">case</span> 0x07:
00669                 UnicodeString[0x06] = TranslateTable[(UCHAR)OemString[0x06]];
00670             <span class="keywordflow">case</span> 0x06:
00671                 UnicodeString[0x05] = TranslateTable[(UCHAR)OemString[0x05]];
00672             <span class="keywordflow">case</span> 0x05:
00673                 UnicodeString[0x04] = TranslateTable[(UCHAR)OemString[0x04]];
00674             <span class="keywordflow">case</span> 0x04:
00675                 UnicodeString[0x03] = TranslateTable[(UCHAR)OemString[0x03]];
00676             <span class="keywordflow">case</span> 0x03:
00677                 UnicodeString[0x02] = TranslateTable[(UCHAR)OemString[0x02]];
00678             <span class="keywordflow">case</span> 0x02:
00679                 UnicodeString[0x01] = TranslateTable[(UCHAR)OemString[0x01]];
00680             <span class="keywordflow">case</span> 0x01:
00681                 UnicodeString[0x00] = TranslateTable[(UCHAR)OemString[0x00]];
00682             <span class="keywordflow">case</span> 0x00:
00683                 ;
00684             }
00685 
00686             <span class="keywordflow">if</span> ( LoopCount &gt; 0x10 ) {
00687                 LoopCount -= 0x10;
00688                 OemString += 0x10;
00689                 UnicodeString += 0x10;
00690 
00691                 <span class="keywordflow">goto</span>  quick_copy;
00692             }
00693         <span class="comment">/* end of copy... */</span>
00694     } <span class="keywordflow">else</span> {
00695         <span class="keyword">register</span> <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> Entry;
00696         PWCH UnicodeStringAnchor = UnicodeString;
00697 
00698         <span class="comment">//</span>
00699         <span class="comment">// The OCP is a multibyte code page.  Check each character</span>
00700         <span class="comment">// to see if it is a lead byte before doing the translation.</span>
00701         <span class="comment">//</span>
00702         MaxCharsInUnicodeString = MaxBytesInUnicodeString / <span class="keyword">sizeof</span>(WCHAR);
00703         TranslateTable = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a22">PUSHORT</a>)<a class="code" href="../../d5/d9/gen8dot3_8c.html#a4">NlsMbOemCodePageTables</a>;
00704 
00705         <span class="keywordflow">while</span> (MaxCharsInUnicodeString &amp;&amp; BytesInOemString) {
00706             MaxCharsInUnicodeString--;
00707             BytesInOemString--;
00708             <span class="keywordflow">if</span> (<a class="code" href="../../d5/d9/gen8dot3_8c.html#a6">NlsOemLeadByteInfo</a>[*(PUCHAR)OemString]) {
00709                 <span class="comment">//</span>
00710                 <span class="comment">// Lead byte - Make sure there is a trail byte.  If not,</span>
00711                 <span class="comment">// pass back a space rather than an error.  Some 3.x</span>
00712                 <span class="comment">// applications pass incorrect strings and don't expect</span>
00713                 <span class="comment">// to get an error.</span>
00714                 <span class="comment">//</span>
00715                 <span class="keywordflow">if</span> (BytesInOemString == 0)
00716                 {
00717                     *UnicodeString++ = <a class="code" href="../../d9/d6/nlsxlat_8c.html#a30">UnicodeNull</a>;
00718                     <span class="keywordflow">break</span>;
00719                 }
00720 
00721                 <span class="comment">//</span>
00722                 <span class="comment">// Get the unicode character.</span>
00723                 <span class="comment">//</span>
00724                 Entry = <a class="code" href="../../d5/d9/gen8dot3_8c.html#a6">NlsOemLeadByteInfo</a>[*(PUCHAR)OemString++];
00725                 *UnicodeString = TranslateTable[ Entry + *(PUCHAR)OemString++ ];
00726                 UnicodeString++;
00727 
00728                 <span class="comment">//</span>
00729                 <span class="comment">// Decrement count of bytes in oem string to account</span>
00730                 <span class="comment">// for the double byte character.</span>
00731                 <span class="comment">//</span>
00732                 BytesInOemString--;
00733             } <span class="keywordflow">else</span> {
00734                 <span class="comment">//</span>
00735                 <span class="comment">// Single byte character.</span>
00736                 <span class="comment">//</span>
00737                 *UnicodeString++ = <a class="code" href="../../d5/d9/gen8dot3_8c.html#a2">NlsOemToUnicodeData</a>[*(PUCHAR)OemString++];
00738             }
00739         }
00740 
00741         <span class="keywordflow">if</span> (ARGUMENT_PRESENT(BytesInUnicodeString))
00742             *BytesInUnicodeString = (ULONG)((PCH)UnicodeString - (PCH)UnicodeStringAnchor);
00743     }
00744 
00745     <span class="comment">//</span>
00746     <span class="comment">//  Check if we were able to use all of the source Oem String</span>
00747     <span class="comment">//</span>
00748     <span class="keywordflow">return</span> (BytesInOemString &lt;= MaxCharsInUnicodeString) ?
00749            STATUS_SUCCESS :
00750            STATUS_BUFFER_OVERFLOW;
00751 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a41" doxytag="nlsxlat.c::RtlpDidUnicodeToOemWork" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOLEAN RtlpDidUnicodeToOemWork           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN POEM_STRING&nbsp;</td>
          <td class="mdname" nowrap> <em>OemString</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PUNICODE_STRING&nbsp;</td>
          <td class="mdname" nowrap> <em>UnicodeString</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l01665">1665</a> of file <a class="el" href="../../d0/d6/nlsxlat_8c-source.html">nlsxlat.c</a>.
<p>
References <a class="el" href="../../d7/d4/ntgdi_2icm_2inc_2debug_8h-source.html#l00146">ASSERT</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d6/d8/gen8dot3_8c-source.html#l00032">NlsMbOemCodePageTag</a>, <a class="el" href="../../d6/d8/gen8dot3_8c-source.html#l00033">NlsOemLeadByteInfo</a>, <a class="el" href="../../d6/d8/gen8dot3_8c-source.html#l00034">OemDefaultChar</a>, <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00105">OemTransUniDefaultChar</a>, <a class="el" href="../../d6/d8/ntrtlp_8h-source.html#l00246">RTL_PAGED_CODE</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00064">USHORT</a>.
<p>
Referenced by <a class="el" href="../../d7/d5/nls_8c-source.html#l02519">RtlDnsHostNameToComputerName()</a>, <a class="el" href="../../d7/d5/nls_8c-source.html#l00816">RtlUnicodeStringToCountedOemString()</a>, <a class="el" href="../../d7/d5/nls_8c-source.html#l00927">RtlUpcaseUnicodeStringToCountedOemString()</a>, and <a class="el" href="../../d7/d5/nls_8c-source.html#l00617">RtlUpcaseUnicodeStringToOemString()</a>.
<p>
<pre class="fragment"><div>01672                    :
01673 
01674     This function looks <span class="keywordflow">for</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> <span class="keywordflow">default</span> character in <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> Oem string, making
01675     sure <a class="code" href="../../d1/d9/icmui_8def.html#a4">it</a> was not a correct <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a46">translation</a> from <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a96">Unicode</a> source string.
01676 
01677     This allows us to test whether or not a <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a46">translation</a> was really successful.
01678 
01679 Arguments:
01680 
01681     OemString - The result of conversion from <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> unicode string.
01682 
01683     UnicodeString - The source of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> Oem string.
01684 
01685 Return Value:
01686 
01687     <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a> <span class="keywordflow">if</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a96">Unicode</a> to Oem <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a46">translation</a> caused no <span class="keywordflow">default</span> characters to be
01688         inserted.  <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a> otherwise.
01689 
01690 --*/
01691 
01692 {
01693     ULONG OemOffset;
01694     BOOLEAN Result = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01695 
01696     <a class="code" href="../../d5/d9/ntrtlp_8h.html#a12">RTL_PAGED_CODE</a>();
01697 
01698     <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d9/gen8dot3_8c.html#a5">NlsMbOemCodePageTag</a>) {
01699 
01700         <span class="keywordflow">for</span> (OemOffset = 0;
01701              OemOffset &lt; OemString-&gt;Length;
01702              OemOffset += 1) {
01703 
01704             <span class="keywordflow">if</span> ((OemString-&gt;Buffer[OemOffset] == (UCHAR)<a class="code" href="../../d5/d9/gen8dot3_8c.html#a7">OemDefaultChar</a>) &amp;&amp;
01705                 (UnicodeString-&gt;Buffer[OemOffset] != <a class="code" href="../../d9/d6/nlsxlat_8c.html#a29">OemTransUniDefaultChar</a>)) {
01706 
01707                 Result = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01708                 <span class="keywordflow">break</span>;
01709             }
01710         }
01711 
01712     } <span class="keywordflow">else</span> {
01713 
01714         ULONG UnicodeOffset;
01715 
01716         <span class="keywordflow">for</span> (OemOffset = 0, UnicodeOffset = 0;
01717              OemOffset &lt; OemString-&gt;Length;
01718              OemOffset += 1, UnicodeOffset += 1) {
01719 
01720             <span class="comment">//</span>
01721             <span class="comment">//  If we landed on a DBCS character handle it accordingly</span>
01722             <span class="comment">//</span>
01723 
01724             <span class="keywordflow">if</span> (<a class="code" href="../../d5/d9/gen8dot3_8c.html#a6">NlsOemLeadByteInfo</a>[(UCHAR)OemString-&gt;Buffer[OemOffset]]) {
01725 
01726                 <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> DbcsChar;
01727 
01728                 <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>( OemOffset + 1 &lt; OemString-&gt;Length );
01729 
01730                 DbcsChar = (OemString-&gt;Buffer[OemOffset] &lt;&lt; 8) + (UCHAR)OemString-&gt;Buffer[OemOffset+1];
01731                 OemOffset++;
01732 
01733                 <span class="keywordflow">if</span> ((DbcsChar == <a class="code" href="../../d5/d9/gen8dot3_8c.html#a7">OemDefaultChar</a>) &amp;&amp;
01734                     (UnicodeString-&gt;Buffer[UnicodeOffset] != <a class="code" href="../../d9/d6/nlsxlat_8c.html#a29">OemTransUniDefaultChar</a>)) {
01735 
01736                     Result = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01737                     <span class="keywordflow">break</span>;
01738                 }
01739 
01740                 <span class="keywordflow">continue</span>;
01741             }
01742 
01743             <span class="keywordflow">if</span> ((OemString-&gt;Buffer[OemOffset] == (UCHAR)<a class="code" href="../../d5/d9/gen8dot3_8c.html#a7">OemDefaultChar</a>) &amp;&amp;
01744                 (UnicodeString-&gt;Buffer[UnicodeOffset] != <a class="code" href="../../d9/d6/nlsxlat_8c.html#a29">OemTransUniDefaultChar</a>)) {
01745 
01746                 Result = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01747                 <span class="keywordflow">break</span>;
01748             }
01749         }
01750     }
01751 
01752     <span class="keywordflow">return</span> Result;
01753 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a32" doxytag="nlsxlat.c::RtlpInitUpcaseTable" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID RtlpInitUpcaseTable           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a22">PUSHORT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>TableBase</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PNLSTABLEINFO&nbsp;</td>
          <td class="mdname" nowrap> <em>CodePageTable</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l02417">2417</a> of file <a class="el" href="../../d0/d6/nlsxlat_8c-source.html">nlsxlat.c</a>.
<p>
References <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l02348">LANG_HEADER</a>, <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l02350">LO_HEADER</a>, <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l02349">UP_HEADER</a>, and <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00064">USHORT</a>.
<p>
Referenced by <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l02438">RtlInitNlsTables()</a>.
<p>
<pre class="fragment"><div>02421 {
02422     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> offUP;
02423     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> offLO;
02424 
02425     <span class="comment">//</span>
02426     <span class="comment">// Get the offsets.</span>
02427     <span class="comment">//</span>
02428 
02429     offUP = <a class="code" href="../../d9/d6/nlsxlat_8c.html#a6">LANG_HEADER</a>;
02430     offLO = offUP + TableBase[offUP];
02431 
02432     CodePageTable-&gt;UpperCaseTable = TableBase + offUP + <a class="code" href="../../d9/d6/nlsxlat_8c.html#a7">UP_HEADER</a>;
02433     CodePageTable-&gt;LowerCaseTable = TableBase + offLO + <a class="code" href="../../d9/d6/nlsxlat_8c.html#a8">LO_HEADER</a>;
02434 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a47" doxytag="nlsxlat.c::RtlResetRtlTranslations" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID RtlResetRtlTranslations           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">PNLSTABLEINFO&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>TableInfo</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l02454">2454</a> of file <a class="el" href="../../d0/d6/nlsxlat_8c-source.html">nlsxlat.c</a>.
<p>
References <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l02345">DBCS_TBL_SIZE</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00073">Nls844UnicodeLowercaseTable</a>, <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00072">Nls844UnicodeUpcaseTable</a>, <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00079">NlsAnsiCodePage</a>, <a class="el" href="../../d7/d5/nls_8c-source.html#l00068">NlsAnsiToUnicodeData</a>, <a class="el" href="../../d7/d5/nls_8c-source.html#l00069">NlsLeadByteInfo</a>, <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00082">NlsMbAnsiCodePageTables</a>, <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00086">NlsMbCodePageTag</a>, <a class="el" href="../../d6/d8/gen8dot3_8c-source.html#l00031">NlsMbOemCodePageTables</a>, <a class="el" href="../../d6/d8/gen8dot3_8c-source.html#l00032">NlsMbOemCodePageTag</a>, <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00080">NlsOemCodePage</a>, <a class="el" href="../../d6/d8/gen8dot3_8c-source.html#l00033">NlsOemLeadByteInfo</a>, <a class="el" href="../../d6/d8/gen8dot3_8c-source.html#l00029">NlsOemToUnicodeData</a>, <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00084">NlsUnicodeToAnsiData</a>, <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00085">NlsUnicodeToMbAnsiData</a>, <a class="el" href="../../d6/d8/gen8dot3_8c-source.html#l00028">NlsUnicodeToMbOemData</a>, <a class="el" href="../../d6/d8/gen8dot3_8c-source.html#l00030">NlsUnicodeToOemData</a>, <a class="el" href="../../d6/d8/gen8dot3_8c-source.html#l00034">OemDefaultChar</a>, <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00105">OemTransUniDefaultChar</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00085">PUSHORT</a>, <a class="el" href="../../d6/d8/ntrtlp_8h-source.html#l00246">RTL_PAGED_CODE</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00102">UnicodeDefaultChar</a>, and <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00064">USHORT</a>.
<p>
Referenced by <a class="el" href="../../d9/d1/ldrinit_8c-source.html#l00616">LdrpInitializeProcess()</a>.
<p>
<pre class="fragment"><div>02457 {
02458     <a class="code" href="../../d5/d9/ntrtlp_8h.html#a12">RTL_PAGED_CODE</a>();
02459 
02460     <span class="keywordflow">if</span> ( TableInfo-&gt;AnsiTableInfo.DBCSCodePage ) {
02461         RtlMoveMemory(NlsLeadByteInfo,TableInfo-&gt;AnsiTableInfo.DBCSOffsets,DBCS_TBL_SIZE*<span class="keyword">sizeof</span>(USHORT));
02462         }
02463     <span class="keywordflow">else</span> {
02464         RtlZeroMemory(NlsLeadByteInfo,DBCS_TBL_SIZE*<span class="keyword">sizeof</span>(USHORT));
02465         }
02466 
02467     <a class="code" href="../../d9/d6/nlsxlat_8c.html#a15">NlsMbAnsiCodePageTables</a> = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a22">PUSHORT</a>)TableInfo-&gt;AnsiTableInfo.DBCSOffsets;
02468 
02469     <a class="code" href="../../d6/d6/nls_8c.html#a19">NlsAnsiToUnicodeData</a> = TableInfo-&gt;AnsiTableInfo.MultiByteTable;
02470     <a class="code" href="../../d9/d6/nlsxlat_8c.html#a17">NlsUnicodeToAnsiData</a> = (PCH)TableInfo-&gt;AnsiTableInfo.WideCharTable;
02471     <a class="code" href="../../d9/d6/nlsxlat_8c.html#a18">NlsUnicodeToMbAnsiData</a> = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a22">PUSHORT</a>)TableInfo-&gt;AnsiTableInfo.WideCharTable;
02472     <a class="code" href="../../d9/d6/nlsxlat_8c.html#a19">NlsMbCodePageTag</a> = TableInfo-&gt;AnsiTableInfo.DBCSCodePage ? <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a> : <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
02473     <a class="code" href="../../d9/d6/nlsxlat_8c.html#a12">NlsAnsiCodePage</a> = TableInfo-&gt;AnsiTableInfo.CodePage;
02474 
02475     <span class="keywordflow">if</span> ( TableInfo-&gt;OemTableInfo.DBCSCodePage ) {
02476         RtlMoveMemory(NlsOemLeadByteInfo,TableInfo-&gt;OemTableInfo.DBCSOffsets,DBCS_TBL_SIZE*<span class="keyword">sizeof</span>(USHORT));
02477         }
02478     <span class="keywordflow">else</span> {
02479         RtlZeroMemory(NlsOemLeadByteInfo,DBCS_TBL_SIZE*<span class="keyword">sizeof</span>(USHORT));
02480         }
02481 
02482     <a class="code" href="../../d5/d9/gen8dot3_8c.html#a4">NlsMbOemCodePageTables</a> = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a22">PUSHORT</a>)TableInfo-&gt;OemTableInfo.DBCSOffsets;
02483 
02484     <a class="code" href="../../d5/d9/gen8dot3_8c.html#a2">NlsOemToUnicodeData</a> = TableInfo-&gt;OemTableInfo.MultiByteTable;
02485     <a class="code" href="../../d5/d9/gen8dot3_8c.html#a3">NlsUnicodeToOemData</a> = (PCH)TableInfo-&gt;OemTableInfo.WideCharTable;
02486     <a class="code" href="../../d5/d9/gen8dot3_8c.html#a1">NlsUnicodeToMbOemData</a> = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a22">PUSHORT</a>)TableInfo-&gt;OemTableInfo.WideCharTable;
02487     <a class="code" href="../../d5/d9/gen8dot3_8c.html#a5">NlsMbOemCodePageTag</a> = TableInfo-&gt;OemTableInfo.DBCSCodePage ? <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a> : <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
02488     <a class="code" href="../../d9/d6/nlsxlat_8c.html#a13">NlsOemCodePage</a> = TableInfo-&gt;OemTableInfo.CodePage;
02489     <a class="code" href="../../d5/d9/gen8dot3_8c.html#a7">OemDefaultChar</a> = TableInfo-&gt;OemTableInfo.DefaultChar;
02490     <a class="code" href="../../d9/d6/nlsxlat_8c.html#a29">OemTransUniDefaultChar</a> = TableInfo-&gt;OemTableInfo.TransDefaultChar;
02491 
02492     <a class="code" href="../../d9/d6/nlsxlat_8c.html#a9">Nls844UnicodeUpcaseTable</a> = TableInfo-&gt;UpperCaseTable;
02493     <a class="code" href="../../d9/d6/nlsxlat_8c.html#a10">Nls844UnicodeLowercaseTable</a> = TableInfo-&gt;LowerCaseTable;
02494     <a class="code" href="../../d9/d6/nlsxlat_8c.html#a27">UnicodeDefaultChar</a> = TableInfo-&gt;AnsiTableInfo.UniDefaultChar;
02495 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a43" doxytag="nlsxlat.c::RtlUnicodeToCustomCPN" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS RtlUnicodeToCustomCPN           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PCPTABLEINFO&nbsp;</td>
          <td class="mdname" nowrap> <em>CustomCP</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PCH&nbsp;</td>
          <td class="mdname" nowrap> <em>CustomCPString</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>MaxBytesInCustomCPString</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PULONG BytesInCustomCPString&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PWCH&nbsp;</td>
          <td class="mdname" nowrap> <em>UnicodeString</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>BytesInUnicodeString</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l01941">1941</a> of file <a class="el" href="../../d0/d6/nlsxlat_8c-source.html">nlsxlat.c</a>.
<p>
References <a class="el" href="../../d6/d8/ntrtlp_8h-source.html#l00184">HIBYTE</a>, <a class="el" href="../../d6/d8/ntrtlp_8h-source.html#l00183">LOBYTE</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00085">PUSHORT</a>, <a class="el" href="../../d6/d8/ntrtlp_8h-source.html#l00246">RTL_PAGED_CODE</a>, and <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00064">USHORT</a>.
<p>
<pre class="fragment"><div>01951                    :
01952 
01953     This <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a16">functions</a> converts <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> specified unicode source string into an
01954     CustomCP string.  The <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a46">translation</a> <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> done with respect to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a>
01955     CustomCP Code Page specified by CustomCp.
01956 
01957 Arguments:
01958 
01959     CustomCP - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> address of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> code page that <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a52">translations</a>
01960         are done relative to
01961 
01962     CustomCPString - Returns an CustomCP string that <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> equivalent to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a>
01963         unicode source string.  If <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a46">translation</a> can not be done,
01964         an error <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> returned.
01965 
01966     MaxBytesInCustomCPString - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> maximum number of bytes to be
01967         written to CustomCPString.  If <span class="keyword">this</span> causes CustomCPString to be a
01968         truncated equivalent of UnicodeString, no error condition results.
01969 
01970     BytesInCustomCPString - Returns <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> number of bytes in <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> returned
01971         CustomCP string pointed to by CustomCPString.
01972 
01973     UnicodeString - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> unicode source string that <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> to be
01974         converted to CustomCP.
01975 
01976     BytesInUnicodeString - The number of bytes in <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> string pointed to by
01977         UnicodeString.
01978 
01979 Return Value:
01980 
01981     SUCCESS - The conversion was successful
01982 
01983     STATUS_BUFFER_OVERFLOW - MaxBytesInUnicodeString was not enough to hold
01984         <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> whole CustomCP string.  It was converted correct to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> point though.
01985 
01986 --*/
01987 
01988 {
01989     ULONG TmpCount;
01990     ULONG LoopCount;
01991     PCH TranslateTable;
01992     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a22">PUSHORT</a> WideTranslateTable;
01993     ULONG CharsInUnicodeString;
01994 
01995     <a class="code" href="../../d5/d9/ntrtlp_8h.html#a12">RTL_PAGED_CODE</a>();
01996 
01997     <span class="comment">//</span>
01998     <span class="comment">// Convert Unicode byte count to character count. Byte count of</span>
01999     <span class="comment">// multibyte string is equivalent to character count.</span>
02000     <span class="comment">//</span>
02001     <span class="keywordflow">if</span> (!(CustomCP-&gt;DBCSCodePage)) {
02002         CharsInUnicodeString = BytesInUnicodeString / <span class="keyword">sizeof</span>(WCHAR);
02003 
02004         LoopCount = (CharsInUnicodeString &lt; MaxBytesInCustomCPString) ?
02005                      CharsInUnicodeString : MaxBytesInCustomCPString;
02006 
02007         <span class="keywordflow">if</span> (ARGUMENT_PRESENT(BytesInCustomCPString))
02008             *BytesInCustomCPString = LoopCount;
02009 
02010         TranslateTable = CustomCP-&gt;WideCharTable;
02011 
02012         TmpCount = LoopCount &amp; 0x0F;
02013         UnicodeString += TmpCount;
02014         CustomCPString += TmpCount;
02015 
02016         <span class="keywordflow">do</span>
02017         {
02018             <span class="keywordflow">switch</span>( TmpCount ) {
02019             <span class="keywordflow">default</span>:
02020                 UnicodeString += 0x10;
02021                 CustomCPString += 0x10;
02022 
02023                 CustomCPString[-0x10] = TranslateTable[UnicodeString[-0x10]];
02024             <span class="keywordflow">case</span> 0x0F:
02025                 CustomCPString[-0x0F] = TranslateTable[UnicodeString[-0x0F]];
02026             <span class="keywordflow">case</span> 0x0E:
02027                 CustomCPString[-0x0E] = TranslateTable[UnicodeString[-0x0E]];
02028             <span class="keywordflow">case</span> 0x0D:
02029                 CustomCPString[-0x0D] = TranslateTable[UnicodeString[-0x0D]];
02030             <span class="keywordflow">case</span> 0x0C:
02031                 CustomCPString[-0x0C] = TranslateTable[UnicodeString[-0x0C]];
02032             <span class="keywordflow">case</span> 0x0B:
02033                 CustomCPString[-0x0B] = TranslateTable[UnicodeString[-0x0B]];
02034             <span class="keywordflow">case</span> 0x0A:
02035                 CustomCPString[-0x0A] = TranslateTable[UnicodeString[-0x0A]];
02036             <span class="keywordflow">case</span> 0x09:
02037                 CustomCPString[-0x09] = TranslateTable[UnicodeString[-0x09]];
02038             <span class="keywordflow">case</span> 0x08:
02039                 CustomCPString[-0x08] = TranslateTable[UnicodeString[-0x08]];
02040             <span class="keywordflow">case</span> 0x07:
02041                 CustomCPString[-0x07] = TranslateTable[UnicodeString[-0x07]];
02042             <span class="keywordflow">case</span> 0x06:
02043                 CustomCPString[-0x06] = TranslateTable[UnicodeString[-0x06]];
02044             <span class="keywordflow">case</span> 0x05:
02045                 CustomCPString[-0x05] = TranslateTable[UnicodeString[-0x05]];
02046             <span class="keywordflow">case</span> 0x04:
02047                 CustomCPString[-0x04] = TranslateTable[UnicodeString[-0x04]];
02048             <span class="keywordflow">case</span> 0x03:
02049                 CustomCPString[-0x03] = TranslateTable[UnicodeString[-0x03]];
02050             <span class="keywordflow">case</span> 0x02:
02051                 CustomCPString[-0x02] = TranslateTable[UnicodeString[-0x02]];
02052             <span class="keywordflow">case</span> 0x01:
02053                 CustomCPString[-0x01] = TranslateTable[UnicodeString[-0x01]];
02054             <span class="keywordflow">case</span> 0x00:
02055                 ;
02056             }
02057 
02058             LoopCount -= TmpCount;
02059             TmpCount = 0x10;
02060         } <span class="keywordflow">while</span> ( LoopCount &gt; 0 );
02061 
02062         <span class="comment">/* end of copy... */</span>
02063     } <span class="keywordflow">else</span> {
02064         <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> MbChar;
02065         PCH CustomCPStringAnchor = CustomCPString;
02066 
02067         WideTranslateTable = CustomCP-&gt;WideCharTable;
02068 
02069         CharsInUnicodeString = BytesInUnicodeString / <span class="keyword">sizeof</span>(WCHAR);
02070 
02071         <span class="keywordflow">while</span> (CharsInUnicodeString &amp;&amp; MaxBytesInCustomCPString) {
02072 
02073             MbChar = WideTranslateTable[ *UnicodeString++ ];
02074             <span class="keywordflow">if</span> (<a class="code" href="../../d5/d9/ntrtlp_8h.html#a5">HIBYTE</a>(MbChar) != 0) {
02075                 <span class="comment">//</span>
02076                 <span class="comment">// Need at least 2 bytes to copy a double byte char.</span>
02077                 <span class="comment">// Don't want to truncate in the middle of a DBCS char.</span>
02078                 <span class="comment">//</span>
02079                 <span class="keywordflow">if</span> (MaxBytesInCustomCPString-- &lt; 2) {
02080                     <span class="keywordflow">break</span>;
02081                 }
02082                 *CustomCPString++ = <a class="code" href="../../d5/d9/ntrtlp_8h.html#a5">HIBYTE</a>(MbChar);  <span class="comment">// lead byte</span>
02083             }
02084             *CustomCPString++ = <a class="code" href="../../d5/d9/ntrtlp_8h.html#a4">LOBYTE</a>(MbChar);
02085             MaxBytesInCustomCPString--;
02086 
02087             CharsInUnicodeString--;
02088         }
02089 
02090         <span class="keywordflow">if</span> (ARGUMENT_PRESENT(BytesInCustomCPString))
02091             *BytesInCustomCPString = (ULONG)(CustomCPString - CustomCPStringAnchor);
02092     }
02093 
02094     <span class="comment">//</span>
02095     <span class="comment">//  Check if we were able to use all of the source Unicode String</span>
02096     <span class="comment">//</span>
02097     <span class="keywordflow">return</span> ( CharsInUnicodeString &lt;= MaxBytesInCustomCPString ) ?
02098            STATUS_SUCCESS :
02099            STATUS_BUFFER_OVERFLOW;
02100 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a37" doxytag="nlsxlat.c::RtlUnicodeToMultiByteN" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS RtlUnicodeToMultiByteN           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">OUT PCH&nbsp;</td>
          <td class="mdname" nowrap> <em>MultiByteString</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>MaxBytesInMultiByteString</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PULONG BytesInMultiByteString&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PWCH&nbsp;</td>
          <td class="mdname" nowrap> <em>UnicodeString</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>BytesInUnicodeString</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00905">905</a> of file <a class="el" href="../../d0/d6/nlsxlat_8c-source.html">nlsxlat.c</a>.
<p>
References <a class="el" href="../../d6/d8/ntrtlp_8h-source.html#l00184">HIBYTE</a>, <a class="el" href="../../d6/d8/ntrtlp_8h-source.html#l00183">LOBYTE</a>, <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00086">NlsMbCodePageTag</a>, <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00084">NlsUnicodeToAnsiData</a>, <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00085">NlsUnicodeToMbAnsiData</a>, <a class="el" href="../../d6/d8/ntrtlp_8h-source.html#l00246">RTL_PAGED_CODE</a>, and <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00064">USHORT</a>.
<p>
Referenced by <a class="el" href="../../d6/d5/chartran_8c-source.html#l00016">__declspec()</a>, <a class="el" href="../../d9/d3/w32_2ntuser_2client_2callback_8c-source.html#l00129">_ClientEventCallback()</a>, <a class="el" href="../../d2/d2/tmswitch_8c-source.html#l02635">_GetAltTabInfo()</a>, <a class="el" href="../../d4/d4/ssend_8c-source.html#l00736">CaptureAnsiCallbackData()</a>, <a class="el" href="../../d6/d6/strings_8c-source.html#l00046">CharLowerA()</a>, <a class="el" href="../../d6/d6/strings_8c-source.html#l00335">CharLowerBuffA()</a>, <a class="el" href="../../d6/d6/strings_8c-source.html#l00119">CharUpperA()</a>, <a class="el" href="../../d6/d6/strings_8c-source.html#l00416">CharUpperBuffA()</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l00236">CopyAcceleratorTableA()</a>, <a class="el" href="../../d8/d3/conexts_8c-source.html#l00085">DebugConvertToAnsi()</a>, <a class="el" href="../../d5/d9/w32_2ntcon_2server_2misc_8c-source.html#l01676">FalseUnicodeToRealUnicode()</a>, <a class="el" href="../../d5/d3/client_2ddetrack_8c-source.html#l00208">FixupDdeExecuteIfNecessary()</a>, <a class="el" href="../../d3/d2/tnlsxlat_8c-source.html#l00033">main()</a>, <a class="el" href="../../d1/d7/ntcftxt_8h-source.html#l00339">MapVirtualKey()</a>, <a class="el" href="../../d7/d5/nls_8c-source.html#l00246">RtlUnicodeStringToAnsiString()</a>, <a class="el" href="../../d6/d5/chartran_8c-source.html#l00361">RtlWCSMessageWParamCharToMB()</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l01082">ToAscii()</a>, and <a class="el" href="../../d2/d9/client_2help_8c-source.html#l01116">WinHelpW()</a>.
<p>
<pre class="fragment"><div>00914                    :
00915 
00916     This <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a16">functions</a> converts <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> specified unicode source string into an
00917     ansi string. The <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a46">translation</a> <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> done with respect to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a>
00918     ANSI Code Page (ACP) loaded at boot time.
00919 
00920 Arguments:
00921 
00922     MultiByteString - Returns an ansi string that is equivalent to the
00923         unicode source string.  If the translation can not be done,
00924         an error is returned.
00925 
00926     MaxBytesInMultiByteString - Supplies the maximum number of bytes to be
00927         written to MultiByteString.  If this causes MultiByteString to be a
00928         truncated equivalent of UnicodeString, no error condition results.
00929 
00930     BytesInMultiByteString - Returns the number of bytes in the returned
00931         ansi string pointed to by MultiByteString.
00932 
00933     UnicodeString - Supplies the unicode source string that is to be
00934         converted to ansi.
00935 
00936     BytesInUnicodeString - The number of bytes in the the string pointed to by
00937         UnicodeString.
00938 
00939 Return Value:
00940 
00941     SUCCESS - The conversion was successful
00942 
00943 --*/
00944 
00945 {
00946     ULONG TmpCount;
00947     ULONG LoopCount;
00948     PCH TranslateTable;
00949     ULONG CharsInUnicodeString;
00950 
00951     <a class="code" href="../../d5/d9/ntrtlp_8h.html#a12">RTL_PAGED_CODE</a>();
00952 
00953     <span class="comment">//</span>
00954     <span class="comment">// Convert Unicode byte count to character count. Byte count of</span>
00955     <span class="comment">// multibyte string is equivalent to character count.</span>
00956     <span class="comment">//</span>
00957     <span class="keywordflow">if</span> (!<a class="code" href="../../d9/d6/nlsxlat_8c.html#a19">NlsMbCodePageTag</a>) {
00958         CharsInUnicodeString = BytesInUnicodeString / <span class="keyword">sizeof</span>(WCHAR);
00959 
00960         LoopCount = (CharsInUnicodeString &lt; MaxBytesInMultiByteString) ?
00961                      CharsInUnicodeString : MaxBytesInMultiByteString;
00962 
00963         <span class="keywordflow">if</span> (ARGUMENT_PRESENT(BytesInMultiByteString))
00964             *BytesInMultiByteString = LoopCount;
00965 
00966         TranslateTable = <a class="code" href="../../d9/d6/nlsxlat_8c.html#a17">NlsUnicodeToAnsiData</a>;  <span class="comment">// used to help the mips compiler</span>
00967 
00968         TmpCount = LoopCount &amp; 0x0F;
00969         UnicodeString += TmpCount;
00970         MultiByteString += TmpCount;
00971 
00972         <span class="keywordflow">do</span>
00973         {
00974             <span class="keywordflow">switch</span>( TmpCount ) {
00975             <span class="keywordflow">default</span>:
00976                 UnicodeString += 0x10;
00977                 MultiByteString += 0x10;
00978 
00979                 MultiByteString[-0x10] = TranslateTable[UnicodeString[-0x10]];
00980             <span class="keywordflow">case</span> 0x0F:
00981                 MultiByteString[-0x0F] = TranslateTable[UnicodeString[-0x0F]];
00982             <span class="keywordflow">case</span> 0x0E:
00983                 MultiByteString[-0x0E] = TranslateTable[UnicodeString[-0x0E]];
00984             <span class="keywordflow">case</span> 0x0D:
00985                 MultiByteString[-0x0D] = TranslateTable[UnicodeString[-0x0D]];
00986             <span class="keywordflow">case</span> 0x0C:
00987                 MultiByteString[-0x0C] = TranslateTable[UnicodeString[-0x0C]];
00988             <span class="keywordflow">case</span> 0x0B:
00989                 MultiByteString[-0x0B] = TranslateTable[UnicodeString[-0x0B]];
00990             <span class="keywordflow">case</span> 0x0A:
00991                 MultiByteString[-0x0A] = TranslateTable[UnicodeString[-0x0A]];
00992             <span class="keywordflow">case</span> 0x09:
00993                 MultiByteString[-0x09] = TranslateTable[UnicodeString[-0x09]];
00994             <span class="keywordflow">case</span> 0x08:
00995                 MultiByteString[-0x08] = TranslateTable[UnicodeString[-0x08]];
00996             <span class="keywordflow">case</span> 0x07:
00997                 MultiByteString[-0x07] = TranslateTable[UnicodeString[-0x07]];
00998             <span class="keywordflow">case</span> 0x06:
00999                 MultiByteString[-0x06] = TranslateTable[UnicodeString[-0x06]];
01000             <span class="keywordflow">case</span> 0x05:
01001                 MultiByteString[-0x05] = TranslateTable[UnicodeString[-0x05]];
01002             <span class="keywordflow">case</span> 0x04:
01003                 MultiByteString[-0x04] = TranslateTable[UnicodeString[-0x04]];
01004             <span class="keywordflow">case</span> 0x03:
01005                 MultiByteString[-0x03] = TranslateTable[UnicodeString[-0x03]];
01006             <span class="keywordflow">case</span> 0x02:
01007                 MultiByteString[-0x02] = TranslateTable[UnicodeString[-0x02]];
01008             <span class="keywordflow">case</span> 0x01:
01009                 MultiByteString[-0x01] = TranslateTable[UnicodeString[-0x01]];
01010             <span class="keywordflow">case</span> 0x00:
01011                 ;
01012             }
01013 
01014             LoopCount -= TmpCount;
01015             TmpCount = 0x10;
01016         } <span class="keywordflow">while</span> ( LoopCount &gt; 0 );
01017 
01018         <span class="comment">/* end of copy... */</span>
01019     } <span class="keywordflow">else</span> {
01020         <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> MbChar;
01021         PCH MultiByteStringAnchor = MultiByteString;
01022 
01023         CharsInUnicodeString = BytesInUnicodeString / <span class="keyword">sizeof</span>(WCHAR);
01024 
01025         <span class="keywordflow">while</span> ( CharsInUnicodeString &amp;&amp; MaxBytesInMultiByteString ) {
01026 
01027             MbChar = <a class="code" href="../../d9/d6/nlsxlat_8c.html#a18">NlsUnicodeToMbAnsiData</a>[ *UnicodeString++ ];
01028             <span class="keywordflow">if</span> (<a class="code" href="../../d5/d9/ntrtlp_8h.html#a5">HIBYTE</a>(MbChar) != 0) {
01029                 <span class="comment">//</span>
01030                 <span class="comment">// Need at least 2 bytes to copy a double byte char.</span>
01031                 <span class="comment">// Don't want to truncate in the middle of a DBCS char.</span>
01032                 <span class="comment">//</span>
01033                 <span class="keywordflow">if</span> (MaxBytesInMultiByteString-- &lt; 2) {
01034                     <span class="keywordflow">break</span>;
01035                 }
01036                 *MultiByteString++ = <a class="code" href="../../d5/d9/ntrtlp_8h.html#a5">HIBYTE</a>(MbChar);  <span class="comment">// lead byte</span>
01037             }
01038             *MultiByteString++ = <a class="code" href="../../d5/d9/ntrtlp_8h.html#a4">LOBYTE</a>(MbChar);
01039             MaxBytesInMultiByteString--;
01040 
01041             CharsInUnicodeString--;
01042         }
01043 
01044         <span class="keywordflow">if</span> (ARGUMENT_PRESENT(BytesInMultiByteString))
01045             *BytesInMultiByteString = (ULONG)(MultiByteString - MultiByteStringAnchor);
01046     }
01047 
01048     <span class="keywordflow">return</span> STATUS_SUCCESS;
01049 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a36" doxytag="nlsxlat.c::RtlUnicodeToMultiByteSize" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS RtlUnicodeToMultiByteSize           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">OUT PULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>BytesInMultiByteString</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PWCH&nbsp;</td>
          <td class="mdname" nowrap> <em>UnicodeString</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>BytesInUnicodeString</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00839">839</a> of file <a class="el" href="../../d0/d6/nlsxlat_8c-source.html">nlsxlat.c</a>.
<p>
References <a class="el" href="../../d6/d8/ntrtlp_8h-source.html#l00184">HIBYTE</a>, <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00086">NlsMbCodePageTag</a>, <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00085">NlsUnicodeToMbAnsiData</a>, <a class="el" href="../../d6/d8/ntrtlp_8h-source.html#l00246">RTL_PAGED_CODE</a>, and <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00064">USHORT</a>.
<p>
Referenced by <a class="el" href="../../d5/d7/jtranmsg_8c-source.html#l00940">CompStrAToUndetW()</a>, <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00574">DefWindowProcWorker()</a>, <a class="el" href="../../d1/d5/consubs_8c-source.html#l00312">IsUnicodeFullWidth()</a>, <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l00214">LBGetText()</a>, <a class="el" href="../../d7/d5/nls_8c-source.html#l01314">RtlxUnicodeStringToAnsiSize()</a>, <a class="el" href="../../d7/d5/nls_8c-source.html#l01364">RtlxUnicodeStringToOemSize()</a>, and <a class="el" href="../../d9/d2/dwp_8c-source.html#l01264">xxxDefWindowProc()</a>.
<p>
<pre class="fragment"><div>00846                    :
00847 
00848     This <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a16">functions</a> determines how many bytes would be needed to represent
00849     <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> specified <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a96">Unicode</a> source string as an ANSI string (not counting the
00850     null terminator)
00851 
00852 Arguments:
00853 
00854     BytesInMultiByteString - Returns <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> number of bytes an ANSI <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a46">translation</a>
00855         of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a96">Unicode</a> string pointed to by UnicodeString would contain.
00856 
00857     UnicodeString - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> unicode source string whose ANSI length
00858         <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> to be calculated.
00859 
00860     BytesInUnicodeString - The number of bytes in <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> string pointed to by
00861         UnicodeString.
00862 
00863 Return Value:
00864 
00865     SUCCESS - The conversion was successful
00866 
00867     !SUCCESS - The conversion failed.  <a class="code" href="../../d2/d1/bench_8h.html#a5">A</a> unicode character was encountered
00868         that has no <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a46">translation</a> <span class="keywordflow">for</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> current ANSI Code Page (ACP).
00869 
00870 --*/
00871 
00872 {
00873     ULONG cbMultiByte = 0;
00874     ULONG CharsInUnicodeString;
00875 
00876     <a class="code" href="../../d5/d9/ntrtlp_8h.html#a12">RTL_PAGED_CODE</a>();
00877 
00878     <span class="comment">/*</span>
00879 <span class="comment">     * convert from bytes to chars for easier loop handling.</span>
00880 <span class="comment">     */</span>
00881     CharsInUnicodeString = BytesInUnicodeString / <span class="keyword">sizeof</span>(WCHAR);
00882 
00883     <span class="keywordflow">if</span> (<a class="code" href="../../d9/d6/nlsxlat_8c.html#a19">NlsMbCodePageTag</a>) {
00884         <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> MbChar;
00885 
00886         <span class="keywordflow">while</span> (CharsInUnicodeString--) {
00887             MbChar = <a class="code" href="../../d9/d6/nlsxlat_8c.html#a18">NlsUnicodeToMbAnsiData</a>[ *UnicodeString++ ];
00888             <span class="keywordflow">if</span> (<a class="code" href="../../d5/d9/ntrtlp_8h.html#a5">HIBYTE</a>(MbChar) == 0) {
00889                 cbMultiByte++ ;
00890             } <span class="keywordflow">else</span> {
00891                 cbMultiByte += 2;
00892             }
00893         }
00894         *BytesInMultiByteString = cbMultiByte;
00895     }
00896     <span class="keywordflow">else</span> {
00897         *BytesInMultiByteString = CharsInUnicodeString;
00898     }
00899 
00900     <span class="keywordflow">return</span> STATUS_SUCCESS;
00901 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a39" doxytag="nlsxlat.c::RtlUnicodeToOemN" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS RtlUnicodeToOemN           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">OUT PCH&nbsp;</td>
          <td class="mdname" nowrap> <em>OemString</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>MaxBytesInOemString</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PULONG BytesInOemString&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PWCH&nbsp;</td>
          <td class="mdname" nowrap> <em>UnicodeString</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>BytesInUnicodeString</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l01277">1277</a> of file <a class="el" href="../../d0/d6/nlsxlat_8c-source.html">nlsxlat.c</a>.
<p>
References <a class="el" href="../../d6/d8/ntrtlp_8h-source.html#l00184">HIBYTE</a>, <a class="el" href="../../d6/d8/ntrtlp_8h-source.html#l00183">LOBYTE</a>, <a class="el" href="../../d6/d8/gen8dot3_8c-source.html#l00032">NlsMbOemCodePageTag</a>, <a class="el" href="../../d6/d8/gen8dot3_8c-source.html#l00028">NlsUnicodeToMbOemData</a>, <a class="el" href="../../d6/d8/gen8dot3_8c-source.html#l00030">NlsUnicodeToOemData</a>, <a class="el" href="../../d6/d8/ntrtlp_8h-source.html#l00246">RTL_PAGED_CODE</a>, and <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00064">USHORT</a>.
<p>
Referenced by <a class="el" href="../../d5/d9/w32_2ntcon_2server_2misc_8c-source.html#l01508">ConvertOutputToOem()</a>, <a class="el" href="../../d5/d9/w32_2ntcon_2server_2misc_8c-source.html#l01307">ConvertToOem()</a>, <a class="el" href="../../d5/d9/w32_2ntcon_2server_2misc_8c-source.html#l01573">RealUnicodeToFalseUnicode()</a>, <a class="el" href="../../d7/d5/nls_8c-source.html#l00816">RtlUnicodeStringToCountedOemString()</a>, <a class="el" href="../../d7/d5/nls_8c-source.html#l00528">RtlUnicodeStringToOemString()</a>, and <a class="el" href="../../d5/d9/w32_2ntcon_2server_2misc_8c-source.html#l01489">WcharToChar()</a>.
<p>
<pre class="fragment"><div>01286                    :
01287 
01288     This <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a16">functions</a> converts <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> specified unicode source string into an
01289     oem string. The <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a46">translation</a> <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> done with respect to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> OEM Code
01290     Page (OCP) loaded at boot time.
01291 
01292 Arguments:
01293 
01294     OemString - Returns an oem string that is equivalent to the
01295         unicode source string.  If the translation can not be done,
01296         an error is returned.
01297 
01298     MaxBytesInOemString - Supplies the maximum number of bytes to be
01299         written to OemString.  If this causes OemString to be a
01300         truncated equivalent of UnicodeString, no error condition results.
01301 
01302     BytesInOemString - Returns the number of bytes in the returned
01303         oem string pointed to by OemString.
01304 
01305     UnicodeString - Supplies the unicode source string that is to be
01306         converted to oem.
01307 
01308     BytesInUnicodeString - The number of bytes in the the string pointed to by
01309         UnicodeString.
01310 
01311 Return Value:
01312 
01313     SUCCESS - The conversion was successful
01314 
01315     STATUS_BUFFER_OVERFLOW - MaxBytesInUnicodeString was not enough to hold
01316         the whole Oem string.  It was converted correct to the point though.
01317 
01318 --*/
01319 
01320 {
01321     ULONG TmpCount;
01322     ULONG LoopCount;
01323     PCH TranslateTable;
01324     ULONG CharsInUnicodeString;
01325 
01326     <a class="code" href="../../d5/d9/ntrtlp_8h.html#a12">RTL_PAGED_CODE</a>();
01327 
01328     <span class="comment">//</span>
01329     <span class="comment">// Convert Unicode byte count to character count. Byte count of</span>
01330     <span class="comment">// multibyte string is equivalent to character count.</span>
01331     <span class="comment">//</span>
01332     <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d9/gen8dot3_8c.html#a5">NlsMbOemCodePageTag</a>) {
01333         CharsInUnicodeString = BytesInUnicodeString / <span class="keyword">sizeof</span>(WCHAR);
01334 
01335         LoopCount = (CharsInUnicodeString &lt; MaxBytesInOemString) ?
01336                      CharsInUnicodeString : MaxBytesInOemString;
01337 
01338         <span class="keywordflow">if</span> (ARGUMENT_PRESENT(BytesInOemString))
01339             *BytesInOemString = LoopCount;
01340 
01341         TranslateTable = <a class="code" href="../../d5/d9/gen8dot3_8c.html#a3">NlsUnicodeToOemData</a>;  <span class="comment">// used to help the mips compiler</span>
01342 
01343         TmpCount = LoopCount &amp; 0x0F;
01344         UnicodeString += TmpCount;
01345         OemString += TmpCount;
01346 
01347         <span class="keywordflow">do</span>
01348         {
01349             <span class="keywordflow">switch</span>( TmpCount ) {
01350             <span class="keywordflow">default</span>:
01351                 UnicodeString += 0x10;
01352                 OemString += 0x10;
01353 
01354                 OemString[-0x10] = TranslateTable[UnicodeString[-0x10]];
01355             <span class="keywordflow">case</span> 0x0F:
01356                 OemString[-0x0F] = TranslateTable[UnicodeString[-0x0F]];
01357             <span class="keywordflow">case</span> 0x0E:
01358                 OemString[-0x0E] = TranslateTable[UnicodeString[-0x0E]];
01359             <span class="keywordflow">case</span> 0x0D:
01360                 OemString[-0x0D] = TranslateTable[UnicodeString[-0x0D]];
01361             <span class="keywordflow">case</span> 0x0C:
01362                 OemString[-0x0C] = TranslateTable[UnicodeString[-0x0C]];
01363             <span class="keywordflow">case</span> 0x0B:
01364                 OemString[-0x0B] = TranslateTable[UnicodeString[-0x0B]];
01365             <span class="keywordflow">case</span> 0x0A:
01366                 OemString[-0x0A] = TranslateTable[UnicodeString[-0x0A]];
01367             <span class="keywordflow">case</span> 0x09:
01368                 OemString[-0x09] = TranslateTable[UnicodeString[-0x09]];
01369             <span class="keywordflow">case</span> 0x08:
01370                 OemString[-0x08] = TranslateTable[UnicodeString[-0x08]];
01371             <span class="keywordflow">case</span> 0x07:
01372                 OemString[-0x07] = TranslateTable[UnicodeString[-0x07]];
01373             <span class="keywordflow">case</span> 0x06:
01374                 OemString[-0x06] = TranslateTable[UnicodeString[-0x06]];
01375             <span class="keywordflow">case</span> 0x05:
01376                 OemString[-0x05] = TranslateTable[UnicodeString[-0x05]];
01377             <span class="keywordflow">case</span> 0x04:
01378                 OemString[-0x04] = TranslateTable[UnicodeString[-0x04]];
01379             <span class="keywordflow">case</span> 0x03:
01380                 OemString[-0x03] = TranslateTable[UnicodeString[-0x03]];
01381             <span class="keywordflow">case</span> 0x02:
01382                 OemString[-0x02] = TranslateTable[UnicodeString[-0x02]];
01383             <span class="keywordflow">case</span> 0x01:
01384                 OemString[-0x01] = TranslateTable[UnicodeString[-0x01]];
01385             <span class="keywordflow">case</span> 0x00:
01386                 ;
01387             }
01388 
01389             LoopCount -= TmpCount;
01390             TmpCount = 0x10;
01391         } <span class="keywordflow">while</span> ( LoopCount &gt; 0 );
01392 
01393         <span class="comment">/* end of copy... */</span>
01394     } <span class="keywordflow">else</span> {
01395         <span class="keyword">register</span> <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> MbChar;
01396         PCH OemStringAnchor = OemString;
01397 
01398         CharsInUnicodeString = BytesInUnicodeString / <span class="keyword">sizeof</span>(WCHAR);
01399 
01400         <span class="keywordflow">while</span> ( CharsInUnicodeString &amp;&amp; MaxBytesInOemString ) {
01401 
01402             MbChar = <a class="code" href="../../d5/d9/gen8dot3_8c.html#a1">NlsUnicodeToMbOemData</a>[ *UnicodeString++ ];
01403             <span class="keywordflow">if</span> (<a class="code" href="../../d5/d9/ntrtlp_8h.html#a5">HIBYTE</a>(MbChar) != 0) {
01404                 <span class="comment">//</span>
01405                 <span class="comment">// Need at least 2 bytes to copy a double byte char.</span>
01406                 <span class="comment">// Don't want to truncate in the middle of a DBCS char.</span>
01407                 <span class="comment">//</span>
01408                 <span class="keywordflow">if</span> (MaxBytesInOemString-- &lt; 2) {
01409                     <span class="keywordflow">break</span>;
01410                 }
01411                 *OemString++ = <a class="code" href="../../d5/d9/ntrtlp_8h.html#a5">HIBYTE</a>(MbChar);  <span class="comment">// lead byte</span>
01412             }
01413             *OemString++ = <a class="code" href="../../d5/d9/ntrtlp_8h.html#a4">LOBYTE</a>(MbChar);
01414             MaxBytesInOemString--;
01415 
01416             CharsInUnicodeString--;
01417         }
01418 
01419         <span class="keywordflow">if</span> (ARGUMENT_PRESENT(BytesInOemString))
01420             *BytesInOemString = (ULONG)(OemString - OemStringAnchor);
01421     }
01422 
01423     <span class="comment">//</span>
01424     <span class="comment">//  Check if we were able to use all of the source Unicode String</span>
01425     <span class="comment">//</span>
01426     <span class="keywordflow">return</span> ( CharsInUnicodeString &lt;= MaxBytesInOemString ) ?
01427            STATUS_SUCCESS :
01428            STATUS_BUFFER_OVERFLOW;
01429 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a44" doxytag="nlsxlat.c::RtlUpcaseUnicodeToCustomCPN" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS RtlUpcaseUnicodeToCustomCPN           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PCPTABLEINFO&nbsp;</td>
          <td class="mdname" nowrap> <em>CustomCP</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PCH&nbsp;</td>
          <td class="mdname" nowrap> <em>CustomCPString</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>MaxBytesInCustomCPString</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PULONG BytesInCustomCPString&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PWCH&nbsp;</td>
          <td class="mdname" nowrap> <em>UnicodeString</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>BytesInUnicodeString</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l02104">2104</a> of file <a class="el" href="../../d0/d6/nlsxlat_8c-source.html">nlsxlat.c</a>.
<p>
References <a class="el" href="../../d6/d8/ntrtlp_8h-source.html#l00184">HIBYTE</a>, <a class="el" href="../../d6/d8/ntrtlp_8h-source.html#l00183">LOBYTE</a>, <a class="el" href="../../d6/d8/ntrtlp_8h-source.html#l00219">NLS_UPCASE</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00085">PUSHORT</a>, <a class="el" href="../../d6/d8/ntrtlp_8h-source.html#l00246">RTL_PAGED_CODE</a>, and <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00064">USHORT</a>.
<p>
<pre class="fragment"><div>02114                    :
02115 
02116     This <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a16">functions</a> upper cases <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> specified unicode source string and
02117     converts <a class="code" href="../../d1/d9/icmui_8def.html#a4">it</a> into a CustomCP string.  The <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a46">translation</a> <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> done with
02118     respect to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> CustomCP Code Page specified by CustomCp.
02119 
02120 Arguments:
02121 
02122     CustomCP - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> address of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> code page that <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a52">translations</a>
02123         are done relative to
02124 
02125     CustomCPString - Returns an CustomCP string that <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> equivalent to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a>
02126         unicode source string.  If <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a46">translation</a> can not be done,
02127         an error <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> returned.
02128 
02129     MaxBytesInCustomCPString - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> maximum number of bytes to be
02130         written to CustomCPString.  If <span class="keyword">this</span> causes CustomCPString to be a
02131         truncated equivalent of UnicodeString, no error condition results.
02132 
02133     BytesInCustomCPString - Returns <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> number of bytes in <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> returned
02134         CustomCP string pointed to by CustomCPString.
02135 
02136     UnicodeString - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> unicode source string that <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> to be
02137         converted to CustomCP.
02138 
02139     BytesInUnicodeString - The number of bytes in <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> string pointed
02140         to by UnicodeString.
02141 
02142 Return Value:
02143 
02144     SUCCESS - The conversion was successful
02145 
02146     STATUS_BUFFER_OVERFLOW - MaxBytesInUnicodeString was not enough to
02147         hold <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> whole CustomCP string.  It was converted correctly to
02148         that point, though.
02149 
02150 --*/
02151 
02152 {
02153     ULONG TmpCount;
02154     ULONG LoopCount;
02155     PCH TranslateTable;
02156     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a22">PUSHORT</a> WideTranslateTable;
02157     ULONG CharsInUnicodeString;
02158     UCHAR SbChar;
02159     WCHAR UnicodeChar;
02160 
02161     <a class="code" href="../../d5/d9/ntrtlp_8h.html#a12">RTL_PAGED_CODE</a>();
02162 
02163     <span class="comment">//</span>
02164     <span class="comment">// Convert Unicode byte count to character count. Byte count of</span>
02165     <span class="comment">// multibyte string is equivalent to character count.</span>
02166     <span class="comment">//</span>
02167     <span class="keywordflow">if</span> (!(CustomCP-&gt;DBCSCodePage)) {
02168         CharsInUnicodeString = BytesInUnicodeString / <span class="keyword">sizeof</span>(WCHAR);
02169 
02170         LoopCount = (CharsInUnicodeString &lt; MaxBytesInCustomCPString) ?
02171                      CharsInUnicodeString : MaxBytesInCustomCPString;
02172 
02173         <span class="keywordflow">if</span> (ARGUMENT_PRESENT(BytesInCustomCPString))
02174             *BytesInCustomCPString = LoopCount;
02175 
02176         TranslateTable = CustomCP-&gt;WideCharTable;
02177 
02178         TmpCount = LoopCount &amp; 0x0F;
02179         UnicodeString += TmpCount;
02180         CustomCPString += TmpCount;
02181 
02182         <span class="keywordflow">do</span>
02183         {
02184             <span class="comment">//</span>
02185             <span class="comment">// Convert to Single Byte and back to Unicode before upper</span>
02186             <span class="comment">// casing to ensure the visual best fits are converted and</span>
02187             <span class="comment">// upper cased properly.</span>
02188             <span class="comment">//</span>
02189             <span class="keywordflow">switch</span>( TmpCount ) {
02190             <span class="keywordflow">default</span>:
02191                 UnicodeString += 0x10;
02192                 CustomCPString += 0x10;
02193 
02194                 SbChar = TranslateTable[UnicodeString[-0x10]];
02195                 UnicodeChar = (CustomCP-&gt;MultiByteTable)[SbChar];
02196                 UnicodeChar = (WCHAR)<a class="code" href="../../d5/d9/ntrtlp_8h.html#a10">NLS_UPCASE</a>(UnicodeChar);
02197                 CustomCPString[-0x10] = TranslateTable[UnicodeChar];
02198             <span class="keywordflow">case</span> 0x0F:
02199                 SbChar = TranslateTable[UnicodeString[-0x0F]];
02200                 UnicodeChar = (CustomCP-&gt;MultiByteTable)[SbChar];
02201                 UnicodeChar = (WCHAR)<a class="code" href="../../d5/d9/ntrtlp_8h.html#a10">NLS_UPCASE</a>(UnicodeChar);
02202                 CustomCPString[-0x0F] = TranslateTable[UnicodeChar];
02203             <span class="keywordflow">case</span> 0x0E:
02204                 SbChar = TranslateTable[UnicodeString[-0x0E]];
02205                 UnicodeChar = (CustomCP-&gt;MultiByteTable)[SbChar];
02206                 UnicodeChar = (WCHAR)<a class="code" href="../../d5/d9/ntrtlp_8h.html#a10">NLS_UPCASE</a>(UnicodeChar);
02207                 CustomCPString[-0x0E] = TranslateTable[UnicodeChar];
02208             <span class="keywordflow">case</span> 0x0D:
02209                 SbChar = TranslateTable[UnicodeString[-0x0D]];
02210                 UnicodeChar = (CustomCP-&gt;MultiByteTable)[SbChar];
02211                 UnicodeChar = (WCHAR)<a class="code" href="../../d5/d9/ntrtlp_8h.html#a10">NLS_UPCASE</a>(UnicodeChar);
02212                 CustomCPString[-0x0D] = TranslateTable[UnicodeChar];
02213             <span class="keywordflow">case</span> 0x0C:
02214                 SbChar = TranslateTable[UnicodeString[-0x0C]];
02215                 UnicodeChar = (CustomCP-&gt;MultiByteTable)[SbChar];
02216                 UnicodeChar = (WCHAR)<a class="code" href="../../d5/d9/ntrtlp_8h.html#a10">NLS_UPCASE</a>(UnicodeChar);
02217                 CustomCPString[-0x0C] = TranslateTable[UnicodeChar];
02218             <span class="keywordflow">case</span> 0x0B:
02219                 SbChar = TranslateTable[UnicodeString[-0x0B]];
02220                 UnicodeChar = (CustomCP-&gt;MultiByteTable)[SbChar];
02221                 UnicodeChar = (WCHAR)<a class="code" href="../../d5/d9/ntrtlp_8h.html#a10">NLS_UPCASE</a>(UnicodeChar);
02222                 CustomCPString[-0x0B] = TranslateTable[UnicodeChar];
02223             <span class="keywordflow">case</span> 0x0A:
02224                 SbChar = TranslateTable[UnicodeString[-0x0A]];
02225                 UnicodeChar = (CustomCP-&gt;MultiByteTable)[SbChar];
02226                 UnicodeChar = (WCHAR)<a class="code" href="../../d5/d9/ntrtlp_8h.html#a10">NLS_UPCASE</a>(UnicodeChar);
02227                 CustomCPString[-0x0A] = TranslateTable[UnicodeChar];
02228             <span class="keywordflow">case</span> 0x09:
02229                 SbChar = TranslateTable[UnicodeString[-0x09]];
02230                 UnicodeChar = (CustomCP-&gt;MultiByteTable)[SbChar];
02231                 UnicodeChar = (WCHAR)<a class="code" href="../../d5/d9/ntrtlp_8h.html#a10">NLS_UPCASE</a>(UnicodeChar);
02232                 CustomCPString[-0x09] = TranslateTable[UnicodeChar];
02233             <span class="keywordflow">case</span> 0x08:
02234                 SbChar = TranslateTable[UnicodeString[-0x08]];
02235                 UnicodeChar = (CustomCP-&gt;MultiByteTable)[SbChar];
02236                 UnicodeChar = (WCHAR)<a class="code" href="../../d5/d9/ntrtlp_8h.html#a10">NLS_UPCASE</a>(UnicodeChar);
02237                 CustomCPString[-0x08] = TranslateTable[UnicodeChar];
02238             <span class="keywordflow">case</span> 0x07:
02239                 SbChar = TranslateTable[UnicodeString[-0x07]];
02240                 UnicodeChar = (CustomCP-&gt;MultiByteTable)[SbChar];
02241                 UnicodeChar = (WCHAR)<a class="code" href="../../d5/d9/ntrtlp_8h.html#a10">NLS_UPCASE</a>(UnicodeChar);
02242                 CustomCPString[-0x07] = TranslateTable[UnicodeChar];
02243             <span class="keywordflow">case</span> 0x06:
02244                 SbChar = TranslateTable[UnicodeString[-0x06]];
02245                 UnicodeChar = (CustomCP-&gt;MultiByteTable)[SbChar];
02246                 UnicodeChar = (WCHAR)<a class="code" href="../../d5/d9/ntrtlp_8h.html#a10">NLS_UPCASE</a>(UnicodeChar);
02247                 CustomCPString[-0x06] = TranslateTable[UnicodeChar];
02248             <span class="keywordflow">case</span> 0x05:
02249                 SbChar = TranslateTable[UnicodeString[-0x05]];
02250                 UnicodeChar = (CustomCP-&gt;MultiByteTable)[SbChar];
02251                 UnicodeChar = (WCHAR)<a class="code" href="../../d5/d9/ntrtlp_8h.html#a10">NLS_UPCASE</a>(UnicodeChar);
02252                 CustomCPString[-0x05] = TranslateTable[UnicodeChar];
02253             <span class="keywordflow">case</span> 0x04:
02254                 SbChar = TranslateTable[UnicodeString[-0x04]];
02255                 UnicodeChar = (CustomCP-&gt;MultiByteTable)[SbChar];
02256                 UnicodeChar = (WCHAR)<a class="code" href="../../d5/d9/ntrtlp_8h.html#a10">NLS_UPCASE</a>(UnicodeChar);
02257                 CustomCPString[-0x04] = TranslateTable[UnicodeChar];
02258             <span class="keywordflow">case</span> 0x03:
02259                 SbChar = TranslateTable[UnicodeString[-0x03]];
02260                 UnicodeChar = (CustomCP-&gt;MultiByteTable)[SbChar];
02261                 UnicodeChar = (WCHAR)<a class="code" href="../../d5/d9/ntrtlp_8h.html#a10">NLS_UPCASE</a>(UnicodeChar);
02262                 CustomCPString[-0x03] = TranslateTable[UnicodeChar];
02263             <span class="keywordflow">case</span> 0x02:
02264                 SbChar = TranslateTable[UnicodeString[-0x02]];
02265                 UnicodeChar = (CustomCP-&gt;MultiByteTable)[SbChar];
02266                 UnicodeChar = (WCHAR)<a class="code" href="../../d5/d9/ntrtlp_8h.html#a10">NLS_UPCASE</a>(UnicodeChar);
02267                 CustomCPString[-0x02] = TranslateTable[UnicodeChar];
02268             <span class="keywordflow">case</span> 0x01:
02269                 SbChar = TranslateTable[UnicodeString[-0x01]];
02270                 UnicodeChar = (CustomCP-&gt;MultiByteTable)[SbChar];
02271                 UnicodeChar = (WCHAR)<a class="code" href="../../d5/d9/ntrtlp_8h.html#a10">NLS_UPCASE</a>(UnicodeChar);
02272                 CustomCPString[-0x01] = TranslateTable[UnicodeChar];
02273             <span class="keywordflow">case</span> 0x00:
02274                 ;
02275             }
02276 
02277             LoopCount -= TmpCount;
02278             TmpCount = 0x10;
02279         } <span class="keywordflow">while</span> ( LoopCount &gt; 0 );
02280 
02281         <span class="comment">/* end of copy... */</span>
02282     } <span class="keywordflow">else</span> {
02283         <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> MbChar;
02284         <span class="keyword">register</span> <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> Entry;
02285         PCH CustomCPStringAnchor = CustomCPString;
02286         <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a22">PUSHORT</a> NlsCustomLeadByteInfo = CustomCP-&gt;DBCSOffsets;
02287 
02288         WideTranslateTable = CustomCP-&gt;WideCharTable;
02289 
02290         CharsInUnicodeString = BytesInUnicodeString / <span class="keyword">sizeof</span>(WCHAR);
02291 
02292         <span class="keywordflow">while</span> ( CharsInUnicodeString &amp;&amp; MaxBytesInCustomCPString ) {
02293             <span class="comment">//</span>
02294             <span class="comment">// Convert to Single Byte and back to Unicode before upper</span>
02295             <span class="comment">// casing to ensure the visual best fits are converted and</span>
02296             <span class="comment">// upper cased properly.</span>
02297             <span class="comment">//</span>
02298             MbChar = WideTranslateTable[ *UnicodeString++ ];
02299             <span class="keywordflow">if</span> (NlsCustomLeadByteInfo[<a class="code" href="../../d5/d9/ntrtlp_8h.html#a5">HIBYTE</a>(MbChar)]) {
02300                 <span class="comment">//</span>
02301                 <span class="comment">// Lead byte - translate the trail byte using the table</span>
02302                 <span class="comment">// that corresponds to this lead byte.</span>
02303                 <span class="comment">//</span>
02304                 Entry = NlsCustomLeadByteInfo[<a class="code" href="../../d5/d9/ntrtlp_8h.html#a5">HIBYTE</a>(MbChar)];
02305                 UnicodeChar = NlsCustomLeadByteInfo[ Entry + <a class="code" href="../../d5/d9/ntrtlp_8h.html#a4">LOBYTE</a>(MbChar) ];
02306             } <span class="keywordflow">else</span> {
02307                 <span class="comment">//</span>
02308                 <span class="comment">// Single byte character.</span>
02309                 <span class="comment">//</span>
02310                 UnicodeChar = (CustomCP-&gt;MultiByteTable)[<a class="code" href="../../d5/d9/ntrtlp_8h.html#a4">LOBYTE</a>(MbChar)];
02311             }
02312             UnicodeChar = (WCHAR)<a class="code" href="../../d5/d9/ntrtlp_8h.html#a10">NLS_UPCASE</a>(UnicodeChar);
02313             MbChar = WideTranslateTable[UnicodeChar];
02314 
02315             <span class="keywordflow">if</span> (<a class="code" href="../../d5/d9/ntrtlp_8h.html#a5">HIBYTE</a>(MbChar) != 0) {
02316                 <span class="comment">//</span>
02317                 <span class="comment">// Need at least 2 bytes to copy a double byte char.</span>
02318                 <span class="comment">// Don't want to truncate in the middle of a DBCS char.</span>
02319                 <span class="comment">//</span>
02320                 <span class="keywordflow">if</span> (MaxBytesInCustomCPString-- &lt; 2) {
02321                     <span class="keywordflow">break</span>;
02322                 }
02323                 *CustomCPString++ = <a class="code" href="../../d5/d9/ntrtlp_8h.html#a5">HIBYTE</a>(MbChar);  <span class="comment">// lead byte</span>
02324             }
02325             *CustomCPString++ = <a class="code" href="../../d5/d9/ntrtlp_8h.html#a4">LOBYTE</a>(MbChar);
02326             MaxBytesInCustomCPString--;
02327 
02328             CharsInUnicodeString--;
02329         }
02330 
02331         <span class="keywordflow">if</span> (ARGUMENT_PRESENT(BytesInCustomCPString))
02332             *BytesInCustomCPString = (ULONG)(CustomCPString - CustomCPStringAnchor);
02333     }
02334 
02335     <span class="comment">//</span>
02336     <span class="comment">//  Check if we were able to use all of the source Unicode String</span>
02337     <span class="comment">//</span>
02338     <span class="keywordflow">return</span> ( CharsInUnicodeString &lt;= MaxBytesInCustomCPString ) ?
02339            STATUS_SUCCESS :
02340            STATUS_BUFFER_OVERFLOW;
02341 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a38" doxytag="nlsxlat.c::RtlUpcaseUnicodeToMultiByteN" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS RtlUpcaseUnicodeToMultiByteN           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">OUT PCH&nbsp;</td>
          <td class="mdname" nowrap> <em>MultiByteString</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>MaxBytesInMultiByteString</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PULONG BytesInMultiByteString&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PWCH&nbsp;</td>
          <td class="mdname" nowrap> <em>UnicodeString</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>BytesInUnicodeString</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l01053">1053</a> of file <a class="el" href="../../d0/d6/nlsxlat_8c-source.html">nlsxlat.c</a>.
<p>
References <a class="el" href="../../d6/d8/ntrtlp_8h-source.html#l00184">HIBYTE</a>, <a class="el" href="../../d6/d8/ntrtlp_8h-source.html#l00183">LOBYTE</a>, <a class="el" href="../../d6/d8/ntrtlp_8h-source.html#l00219">NLS_UPCASE</a>, <a class="el" href="../../d7/d5/nls_8c-source.html#l00068">NlsAnsiToUnicodeData</a>, <a class="el" href="../../d7/d5/nls_8c-source.html#l00069">NlsLeadByteInfo</a>, <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00082">NlsMbAnsiCodePageTables</a>, <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00086">NlsMbCodePageTag</a>, <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00084">NlsUnicodeToAnsiData</a>, <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00085">NlsUnicodeToMbAnsiData</a>, <a class="el" href="../../d6/d8/ntrtlp_8h-source.html#l00246">RTL_PAGED_CODE</a>, and <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00064">USHORT</a>.
<p>
Referenced by <a class="el" href="../../d7/d5/nls_8c-source.html#l00350">RtlUpcaseUnicodeStringToAnsiString()</a>.
<p>
<pre class="fragment"><div>01062                    :
01063 
01064     This <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a16">functions</a> upper cases <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> specified unicode source string and
01065     converts <a class="code" href="../../d1/d9/icmui_8def.html#a4">it</a> into an ansi string. The <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a46">translation</a> <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> done with respect
01066     to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> ANSI Code Page (ACP) loaded at boot time.
01067 
01068 Arguments:
01069 
01070     MultiByteString - Returns an ansi string that is equivalent to the
01071         upper case of the unicode source string.  If the translation can
01072         not be done, an error is returned.
01073 
01074     MaxBytesInMultiByteString - Supplies the maximum number of bytes to be
01075         written to MultiByteString.  If this causes MultiByteString to be a
01076         truncated equivalent of UnicodeString, no error condition results.
01077 
01078     BytesInMultiByteString - Returns the number of bytes in the returned
01079         ansi string pointed to by MultiByteString.
01080 
01081     UnicodeString - Supplies the unicode source string that is to be
01082         converted to ansi.
01083 
01084     BytesInUnicodeString - The number of bytes in the the string pointed to by
01085         UnicodeString.
01086 
01087 Return Value:
01088 
01089     SUCCESS - The conversion was successful
01090 
01091 --*/
01092 
01093 {
01094     ULONG TmpCount;
01095     ULONG LoopCount;
01096     PCH TranslateTable;
01097     ULONG CharsInUnicodeString;
01098     UCHAR SbChar;
01099     WCHAR UnicodeChar;
01100 
01101     <a class="code" href="../../d5/d9/ntrtlp_8h.html#a12">RTL_PAGED_CODE</a>();
01102 
01103     <span class="comment">//</span>
01104     <span class="comment">// Convert Unicode byte count to character count. Byte count of</span>
01105     <span class="comment">// multibyte string is equivalent to character count.</span>
01106     <span class="comment">//</span>
01107     <span class="keywordflow">if</span> (!<a class="code" href="../../d9/d6/nlsxlat_8c.html#a19">NlsMbCodePageTag</a>) {
01108         CharsInUnicodeString = BytesInUnicodeString / <span class="keyword">sizeof</span>(WCHAR);
01109 
01110         LoopCount = (CharsInUnicodeString &lt; MaxBytesInMultiByteString) ?
01111                      CharsInUnicodeString : MaxBytesInMultiByteString;
01112 
01113         <span class="keywordflow">if</span> (ARGUMENT_PRESENT(BytesInMultiByteString))
01114             *BytesInMultiByteString = LoopCount;
01115 
01116         TranslateTable = <a class="code" href="../../d9/d6/nlsxlat_8c.html#a17">NlsUnicodeToAnsiData</a>;  <span class="comment">// used to help the mips compiler</span>
01117 
01118         TmpCount = LoopCount &amp; 0x0F;
01119         UnicodeString += TmpCount;
01120         MultiByteString += TmpCount;
01121 
01122         <span class="keywordflow">do</span>
01123         {
01124             <span class="comment">//</span>
01125             <span class="comment">// Convert to ANSI and back to Unicode before upper casing</span>
01126             <span class="comment">// to ensure the visual best fits are converted and</span>
01127             <span class="comment">// upper cased properly.</span>
01128             <span class="comment">//</span>
01129             <span class="keywordflow">switch</span>( TmpCount ) {
01130             <span class="keywordflow">default</span>:
01131                 UnicodeString += 0x10;
01132                 MultiByteString += 0x10;
01133 
01134                 SbChar = TranslateTable[UnicodeString[-0x10]];
01135                 UnicodeChar = <a class="code" href="../../d6/d6/nls_8c.html#a19">NlsAnsiToUnicodeData</a>[SbChar];
01136                 UnicodeChar = (WCHAR)<a class="code" href="../../d5/d9/ntrtlp_8h.html#a10">NLS_UPCASE</a>(UnicodeChar);
01137                 MultiByteString[-0x10] = TranslateTable[UnicodeChar];
01138             <span class="keywordflow">case</span> 0x0F:
01139                 SbChar = TranslateTable[UnicodeString[-0x0F]];
01140                 UnicodeChar = <a class="code" href="../../d6/d6/nls_8c.html#a19">NlsAnsiToUnicodeData</a>[SbChar];
01141                 UnicodeChar = (WCHAR)<a class="code" href="../../d5/d9/ntrtlp_8h.html#a10">NLS_UPCASE</a>(UnicodeChar);
01142                 MultiByteString[-0x0F] = TranslateTable[UnicodeChar];
01143             <span class="keywordflow">case</span> 0x0E:
01144                 SbChar = TranslateTable[UnicodeString[-0x0E]];
01145                 UnicodeChar = <a class="code" href="../../d6/d6/nls_8c.html#a19">NlsAnsiToUnicodeData</a>[SbChar];
01146                 UnicodeChar = (WCHAR)<a class="code" href="../../d5/d9/ntrtlp_8h.html#a10">NLS_UPCASE</a>(UnicodeChar);
01147                 MultiByteString[-0x0E] = TranslateTable[UnicodeChar];
01148             <span class="keywordflow">case</span> 0x0D:
01149                 SbChar = TranslateTable[UnicodeString[-0x0D]];
01150                 UnicodeChar = <a class="code" href="../../d6/d6/nls_8c.html#a19">NlsAnsiToUnicodeData</a>[SbChar];
01151                 UnicodeChar = (WCHAR)<a class="code" href="../../d5/d9/ntrtlp_8h.html#a10">NLS_UPCASE</a>(UnicodeChar);
01152                 MultiByteString[-0x0D] = TranslateTable[UnicodeChar];
01153             <span class="keywordflow">case</span> 0x0C:
01154                 SbChar = TranslateTable[UnicodeString[-0x0C]];
01155                 UnicodeChar = <a class="code" href="../../d6/d6/nls_8c.html#a19">NlsAnsiToUnicodeData</a>[SbChar];
01156                 UnicodeChar = (WCHAR)<a class="code" href="../../d5/d9/ntrtlp_8h.html#a10">NLS_UPCASE</a>(UnicodeChar);
01157                 MultiByteString[-0x0C] = TranslateTable[UnicodeChar];
01158             <span class="keywordflow">case</span> 0x0B:
01159                 SbChar = TranslateTable[UnicodeString[-0x0B]];
01160                 UnicodeChar = <a class="code" href="../../d6/d6/nls_8c.html#a19">NlsAnsiToUnicodeData</a>[SbChar];
01161                 UnicodeChar = (WCHAR)<a class="code" href="../../d5/d9/ntrtlp_8h.html#a10">NLS_UPCASE</a>(UnicodeChar);
01162                 MultiByteString[-0x0B] = TranslateTable[UnicodeChar];
01163             <span class="keywordflow">case</span> 0x0A:
01164                 SbChar = TranslateTable[UnicodeString[-0x0A]];
01165                 UnicodeChar = <a class="code" href="../../d6/d6/nls_8c.html#a19">NlsAnsiToUnicodeData</a>[SbChar];
01166                 UnicodeChar = (WCHAR)<a class="code" href="../../d5/d9/ntrtlp_8h.html#a10">NLS_UPCASE</a>(UnicodeChar);
01167                 MultiByteString[-0x0A] = TranslateTable[UnicodeChar];
01168             <span class="keywordflow">case</span> 0x09:
01169                 SbChar = TranslateTable[UnicodeString[-0x09]];
01170                 UnicodeChar = <a class="code" href="../../d6/d6/nls_8c.html#a19">NlsAnsiToUnicodeData</a>[SbChar];
01171                 UnicodeChar = (WCHAR)<a class="code" href="../../d5/d9/ntrtlp_8h.html#a10">NLS_UPCASE</a>(UnicodeChar);
01172                 MultiByteString[-0x09] = TranslateTable[UnicodeChar];
01173             <span class="keywordflow">case</span> 0x08:
01174                 SbChar = TranslateTable[UnicodeString[-0x08]];
01175                 UnicodeChar = <a class="code" href="../../d6/d6/nls_8c.html#a19">NlsAnsiToUnicodeData</a>[SbChar];
01176                 UnicodeChar = (WCHAR)<a class="code" href="../../d5/d9/ntrtlp_8h.html#a10">NLS_UPCASE</a>(UnicodeChar);
01177                 MultiByteString[-0x08] = TranslateTable[UnicodeChar];
01178             <span class="keywordflow">case</span> 0x07:
01179                 SbChar = TranslateTable[UnicodeString[-0x07]];
01180                 UnicodeChar = <a class="code" href="../../d6/d6/nls_8c.html#a19">NlsAnsiToUnicodeData</a>[SbChar];
01181                 UnicodeChar = (WCHAR)<a class="code" href="../../d5/d9/ntrtlp_8h.html#a10">NLS_UPCASE</a>(UnicodeChar);
01182                 MultiByteString[-0x07] = TranslateTable[UnicodeChar];
01183             <span class="keywordflow">case</span> 0x06:
01184                 SbChar = TranslateTable[UnicodeString[-0x06]];
01185                 UnicodeChar = <a class="code" href="../../d6/d6/nls_8c.html#a19">NlsAnsiToUnicodeData</a>[SbChar];
01186                 UnicodeChar = (WCHAR)<a class="code" href="../../d5/d9/ntrtlp_8h.html#a10">NLS_UPCASE</a>(UnicodeChar);
01187                 MultiByteString[-0x06] = TranslateTable[UnicodeChar];
01188             <span class="keywordflow">case</span> 0x05:
01189                 SbChar = TranslateTable[UnicodeString[-0x05]];
01190                 UnicodeChar = <a class="code" href="../../d6/d6/nls_8c.html#a19">NlsAnsiToUnicodeData</a>[SbChar];
01191                 UnicodeChar = (WCHAR)<a class="code" href="../../d5/d9/ntrtlp_8h.html#a10">NLS_UPCASE</a>(UnicodeChar);
01192                 MultiByteString[-0x05] = TranslateTable[UnicodeChar];
01193             <span class="keywordflow">case</span> 0x04:
01194                 SbChar = TranslateTable[UnicodeString[-0x04]];
01195                 UnicodeChar = <a class="code" href="../../d6/d6/nls_8c.html#a19">NlsAnsiToUnicodeData</a>[SbChar];
01196                 UnicodeChar = (WCHAR)<a class="code" href="../../d5/d9/ntrtlp_8h.html#a10">NLS_UPCASE</a>(UnicodeChar);
01197                 MultiByteString[-0x04] = TranslateTable[UnicodeChar];
01198             <span class="keywordflow">case</span> 0x03:
01199                 SbChar = TranslateTable[UnicodeString[-0x03]];
01200                 UnicodeChar = <a class="code" href="../../d6/d6/nls_8c.html#a19">NlsAnsiToUnicodeData</a>[SbChar];
01201                 UnicodeChar = (WCHAR)<a class="code" href="../../d5/d9/ntrtlp_8h.html#a10">NLS_UPCASE</a>(UnicodeChar);
01202                 MultiByteString[-0x03] = TranslateTable[UnicodeChar];
01203             <span class="keywordflow">case</span> 0x02:
01204                 SbChar = TranslateTable[UnicodeString[-0x02]];
01205                 UnicodeChar = <a class="code" href="../../d6/d6/nls_8c.html#a19">NlsAnsiToUnicodeData</a>[SbChar];
01206                 UnicodeChar = (WCHAR)<a class="code" href="../../d5/d9/ntrtlp_8h.html#a10">NLS_UPCASE</a>(UnicodeChar);
01207                 MultiByteString[-0x02] = TranslateTable[UnicodeChar];
01208             <span class="keywordflow">case</span> 0x01:
01209                 SbChar = TranslateTable[UnicodeString[-0x01]];
01210                 UnicodeChar = <a class="code" href="../../d6/d6/nls_8c.html#a19">NlsAnsiToUnicodeData</a>[SbChar];
01211                 UnicodeChar = (WCHAR)<a class="code" href="../../d5/d9/ntrtlp_8h.html#a10">NLS_UPCASE</a>(UnicodeChar);
01212                 MultiByteString[-0x01] = TranslateTable[UnicodeChar];
01213             <span class="keywordflow">case</span> 0x00:
01214                 ;
01215             }
01216 
01217             LoopCount -= TmpCount;
01218             TmpCount = 0x10;
01219         } <span class="keywordflow">while</span> ( LoopCount &gt; 0 );
01220 
01221         <span class="comment">/* end of copy... */</span>
01222     } <span class="keywordflow">else</span> {
01223         <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> MbChar;
01224         <span class="keyword">register</span> <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> Entry;
01225         PCH MultiByteStringAnchor = MultiByteString;
01226 
01227         CharsInUnicodeString = BytesInUnicodeString / <span class="keyword">sizeof</span>(WCHAR);
01228 
01229         <span class="keywordflow">while</span> ( CharsInUnicodeString &amp;&amp; MaxBytesInMultiByteString ) {
01230             <span class="comment">//</span>
01231             <span class="comment">// Convert to ANSI and back to Unicode before upper casing</span>
01232             <span class="comment">// to ensure the visual best fits are converted and</span>
01233             <span class="comment">// upper cased properly.</span>
01234             <span class="comment">//</span>
01235             MbChar = <a class="code" href="../../d9/d6/nlsxlat_8c.html#a18">NlsUnicodeToMbAnsiData</a>[ *UnicodeString++ ];
01236             <span class="keywordflow">if</span> ( <a class="code" href="../../d6/d6/nls_8c.html#a20">NlsLeadByteInfo</a>[<a class="code" href="../../d5/d9/ntrtlp_8h.html#a5">HIBYTE</a>(MbChar)] ) {
01237                 <span class="comment">//</span>
01238                 <span class="comment">// Lead byte - translate the trail byte using the table</span>
01239                 <span class="comment">// that corresponds to this lead byte.</span>
01240                 <span class="comment">//</span>
01241                 Entry = <a class="code" href="../../d6/d6/nls_8c.html#a20">NlsLeadByteInfo</a>[<a class="code" href="../../d5/d9/ntrtlp_8h.html#a5">HIBYTE</a>(MbChar)];
01242                 UnicodeChar = (WCHAR)<a class="code" href="../../d9/d6/nlsxlat_8c.html#a15">NlsMbAnsiCodePageTables</a>[ Entry + <a class="code" href="../../d5/d9/ntrtlp_8h.html#a4">LOBYTE</a>(MbChar) ];
01243             } <span class="keywordflow">else</span> {
01244                 <span class="comment">//</span>
01245                 <span class="comment">// Single byte character.</span>
01246                 <span class="comment">//</span>
01247                 UnicodeChar = <a class="code" href="../../d6/d6/nls_8c.html#a19">NlsAnsiToUnicodeData</a>[<a class="code" href="../../d5/d9/ntrtlp_8h.html#a4">LOBYTE</a>(MbChar)];
01248             }
01249             UnicodeChar = (WCHAR)<a class="code" href="../../d5/d9/ntrtlp_8h.html#a10">NLS_UPCASE</a>(UnicodeChar);
01250             MbChar = <a class="code" href="../../d9/d6/nlsxlat_8c.html#a18">NlsUnicodeToMbAnsiData</a>[UnicodeChar];
01251 
01252             <span class="keywordflow">if</span> (<a class="code" href="../../d5/d9/ntrtlp_8h.html#a5">HIBYTE</a>(MbChar) != 0) {
01253                 <span class="comment">//</span>
01254                 <span class="comment">// Need at least 2 bytes to copy a double byte char.</span>
01255                 <span class="comment">// Don't want to truncate in the middle of a DBCS char.</span>
01256                 <span class="comment">//</span>
01257                 <span class="keywordflow">if</span> (MaxBytesInMultiByteString-- &lt; 2) {
01258                     <span class="keywordflow">break</span>;
01259                 }
01260                 *MultiByteString++ = <a class="code" href="../../d5/d9/ntrtlp_8h.html#a5">HIBYTE</a>(MbChar);  <span class="comment">// lead byte</span>
01261             }
01262             *MultiByteString++ = <a class="code" href="../../d5/d9/ntrtlp_8h.html#a4">LOBYTE</a>(MbChar);
01263             MaxBytesInMultiByteString--;
01264 
01265             CharsInUnicodeString--;
01266         }
01267 
01268         <span class="keywordflow">if</span> (ARGUMENT_PRESENT(BytesInMultiByteString))
01269             *BytesInMultiByteString = (ULONG)(MultiByteString - MultiByteStringAnchor);
01270     }
01271 
01272     <span class="keywordflow">return</span> STATUS_SUCCESS;
01273 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a40" doxytag="nlsxlat.c::RtlUpcaseUnicodeToOemN" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS RtlUpcaseUnicodeToOemN           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">OUT PCH&nbsp;</td>
          <td class="mdname" nowrap> <em>OemString</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>MaxBytesInOemString</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PULONG BytesInOemString&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PWCH&nbsp;</td>
          <td class="mdname" nowrap> <em>UnicodeString</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>BytesInUnicodeString</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l01433">1433</a> of file <a class="el" href="../../d0/d6/nlsxlat_8c-source.html">nlsxlat.c</a>.
<p>
References <a class="el" href="../../d6/d8/ntrtlp_8h-source.html#l00184">HIBYTE</a>, <a class="el" href="../../d6/d8/ntrtlp_8h-source.html#l00183">LOBYTE</a>, <a class="el" href="../../d6/d8/ntrtlp_8h-source.html#l00219">NLS_UPCASE</a>, <a class="el" href="../../d6/d8/gen8dot3_8c-source.html#l00031">NlsMbOemCodePageTables</a>, <a class="el" href="../../d6/d8/gen8dot3_8c-source.html#l00032">NlsMbOemCodePageTag</a>, <a class="el" href="../../d6/d8/gen8dot3_8c-source.html#l00033">NlsOemLeadByteInfo</a>, <a class="el" href="../../d6/d8/gen8dot3_8c-source.html#l00029">NlsOemToUnicodeData</a>, <a class="el" href="../../d6/d8/gen8dot3_8c-source.html#l00028">NlsUnicodeToMbOemData</a>, <a class="el" href="../../d6/d8/gen8dot3_8c-source.html#l00030">NlsUnicodeToOemData</a>, <a class="el" href="../../d6/d8/ntrtlp_8h-source.html#l00246">RTL_PAGED_CODE</a>, and <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00064">USHORT</a>.
<p>
Referenced by <a class="el" href="../../d6/d4/namesup_8c-source.html#l00056">NativeDosCharLength()</a>, <a class="el" href="../../d7/d5/nls_8c-source.html#l02519">RtlDnsHostNameToComputerName()</a>, <a class="el" href="../../d7/d5/nls_8c-source.html#l00927">RtlUpcaseUnicodeStringToCountedOemString()</a>, and <a class="el" href="../../d7/d5/nls_8c-source.html#l00617">RtlUpcaseUnicodeStringToOemString()</a>.
<p>
<pre class="fragment"><div>01442                    :
01443 
01444     This <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a16">functions</a> upper cases <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> specified unicode source string and
01445     converts <a class="code" href="../../d1/d9/icmui_8def.html#a4">it</a> into an oem string. The <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a46">translation</a> <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> done with respect
01446     to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> OEM Code Page (OCP) loaded at boot time.
01447 
01448 Arguments:
01449 
01450     OemString - Returns an oem string that is equivalent to the upper
01451         case of the unicode source string.  If the translation can not
01452         be done, an error is returned.
01453 
01454     MaxBytesInOemString - Supplies the maximum number of bytes to be
01455         written to OemString.  If this causes OemString to be a
01456         truncated equivalent of UnicodeString, no error condition results.
01457 
01458     BytesInOemString - Returns the number of bytes in the returned
01459         oem string pointed to by OemString.
01460 
01461     UnicodeString - Supplies the unicode source string that is to be
01462         converted to oem.
01463 
01464     BytesInUnicodeString - The number of bytes in the the string pointed
01465         to by UnicodeString.
01466 
01467 Return Value:
01468 
01469     SUCCESS - The conversion was successful
01470 
01471     STATUS_BUFFER_OVERFLOW - MaxBytesInUnicodeString was not enough to
01472         hold the whole Oem string.  It was converted correctly to that
01473         point, though.
01474 
01475 --*/
01476 
01477 {
01478     ULONG TmpCount;
01479     ULONG LoopCount;
01480     PCH TranslateTable;
01481     ULONG CharsInUnicodeString;
01482     UCHAR SbChar;
01483     WCHAR UnicodeChar;
01484 
01485     <a class="code" href="../../d5/d9/ntrtlp_8h.html#a12">RTL_PAGED_CODE</a>();
01486 
01487     <span class="comment">//</span>
01488     <span class="comment">// Convert Unicode byte count to character count. Byte count of</span>
01489     <span class="comment">// multibyte string is equivalent to character count.</span>
01490     <span class="comment">//</span>
01491     <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d9/gen8dot3_8c.html#a5">NlsMbOemCodePageTag</a>) {
01492         CharsInUnicodeString = BytesInUnicodeString / <span class="keyword">sizeof</span>(WCHAR);
01493 
01494         LoopCount = (CharsInUnicodeString &lt; MaxBytesInOemString) ?
01495                      CharsInUnicodeString : MaxBytesInOemString;
01496 
01497         <span class="keywordflow">if</span> (ARGUMENT_PRESENT(BytesInOemString))
01498             *BytesInOemString = LoopCount;
01499 
01500         TranslateTable = <a class="code" href="../../d5/d9/gen8dot3_8c.html#a3">NlsUnicodeToOemData</a>;  <span class="comment">// used to help the mips compiler</span>
01501 
01502         TmpCount = LoopCount &amp; 0x0F;
01503         UnicodeString += TmpCount;
01504         OemString += TmpCount;
01505 
01506         <span class="keywordflow">do</span>
01507         {
01508             <span class="comment">//</span>
01509             <span class="comment">// Convert to OEM and back to Unicode before upper casing</span>
01510             <span class="comment">// to ensure the visual best fits are converted and</span>
01511             <span class="comment">// upper cased properly.</span>
01512             <span class="comment">//</span>
01513             <span class="keywordflow">switch</span>( TmpCount ) {
01514             <span class="keywordflow">default</span>:
01515                 UnicodeString += 0x10;
01516                 OemString += 0x10;
01517 
01518                 SbChar = TranslateTable[UnicodeString[-0x10]];
01519                 UnicodeChar = <a class="code" href="../../d5/d9/gen8dot3_8c.html#a2">NlsOemToUnicodeData</a>[SbChar];
01520                 UnicodeChar = (WCHAR)<a class="code" href="../../d5/d9/ntrtlp_8h.html#a10">NLS_UPCASE</a>(UnicodeChar);
01521                 OemString[-0x10] = TranslateTable[UnicodeChar];
01522             <span class="keywordflow">case</span> 0x0F:
01523                 SbChar = TranslateTable[UnicodeString[-0x0F]];
01524                 UnicodeChar = <a class="code" href="../../d5/d9/gen8dot3_8c.html#a2">NlsOemToUnicodeData</a>[SbChar];
01525                 UnicodeChar = (WCHAR)<a class="code" href="../../d5/d9/ntrtlp_8h.html#a10">NLS_UPCASE</a>(UnicodeChar);
01526                 OemString[-0x0F] = TranslateTable[UnicodeChar];
01527             <span class="keywordflow">case</span> 0x0E:
01528                 SbChar = TranslateTable[UnicodeString[-0x0E]];
01529                 UnicodeChar = <a class="code" href="../../d5/d9/gen8dot3_8c.html#a2">NlsOemToUnicodeData</a>[SbChar];
01530                 UnicodeChar = (WCHAR)<a class="code" href="../../d5/d9/ntrtlp_8h.html#a10">NLS_UPCASE</a>(UnicodeChar);
01531                 OemString[-0x0E] = TranslateTable[UnicodeChar];
01532             <span class="keywordflow">case</span> 0x0D:
01533                 SbChar = TranslateTable[UnicodeString[-0x0D]];
01534                 UnicodeChar = <a class="code" href="../../d5/d9/gen8dot3_8c.html#a2">NlsOemToUnicodeData</a>[SbChar];
01535                 UnicodeChar = (WCHAR)<a class="code" href="../../d5/d9/ntrtlp_8h.html#a10">NLS_UPCASE</a>(UnicodeChar);
01536                 OemString[-0x0D] = TranslateTable[UnicodeChar];
01537             <span class="keywordflow">case</span> 0x0C:
01538                 SbChar = TranslateTable[UnicodeString[-0x0C]];
01539                 UnicodeChar = <a class="code" href="../../d5/d9/gen8dot3_8c.html#a2">NlsOemToUnicodeData</a>[SbChar];
01540                 UnicodeChar = (WCHAR)<a class="code" href="../../d5/d9/ntrtlp_8h.html#a10">NLS_UPCASE</a>(UnicodeChar);
01541                 OemString[-0x0C] = TranslateTable[UnicodeChar];
01542             <span class="keywordflow">case</span> 0x0B:
01543                 SbChar = TranslateTable[UnicodeString[-0x0B]];
01544                 UnicodeChar = <a class="code" href="../../d5/d9/gen8dot3_8c.html#a2">NlsOemToUnicodeData</a>[SbChar];
01545                 UnicodeChar = (WCHAR)<a class="code" href="../../d5/d9/ntrtlp_8h.html#a10">NLS_UPCASE</a>(UnicodeChar);
01546                 OemString[-0x0B] = TranslateTable[UnicodeChar];
01547             <span class="keywordflow">case</span> 0x0A:
01548                 SbChar = TranslateTable[UnicodeString[-0x0A]];
01549                 UnicodeChar = <a class="code" href="../../d5/d9/gen8dot3_8c.html#a2">NlsOemToUnicodeData</a>[SbChar];
01550                 UnicodeChar = (WCHAR)<a class="code" href="../../d5/d9/ntrtlp_8h.html#a10">NLS_UPCASE</a>(UnicodeChar);
01551                 OemString[-0x0A] = TranslateTable[UnicodeChar];
01552             <span class="keywordflow">case</span> 0x09:
01553                 SbChar = TranslateTable[UnicodeString[-0x09]];
01554                 UnicodeChar = <a class="code" href="../../d5/d9/gen8dot3_8c.html#a2">NlsOemToUnicodeData</a>[SbChar];
01555                 UnicodeChar = (WCHAR)<a class="code" href="../../d5/d9/ntrtlp_8h.html#a10">NLS_UPCASE</a>(UnicodeChar);
01556                 OemString[-0x09] = TranslateTable[UnicodeChar];
01557             <span class="keywordflow">case</span> 0x08:
01558                 SbChar = TranslateTable[UnicodeString[-0x08]];
01559                 UnicodeChar = <a class="code" href="../../d5/d9/gen8dot3_8c.html#a2">NlsOemToUnicodeData</a>[SbChar];
01560                 UnicodeChar = (WCHAR)<a class="code" href="../../d5/d9/ntrtlp_8h.html#a10">NLS_UPCASE</a>(UnicodeChar);
01561                 OemString[-0x08] = TranslateTable[UnicodeChar];
01562             <span class="keywordflow">case</span> 0x07:
01563                 SbChar = TranslateTable[UnicodeString[-0x07]];
01564                 UnicodeChar = <a class="code" href="../../d5/d9/gen8dot3_8c.html#a2">NlsOemToUnicodeData</a>[SbChar];
01565                 UnicodeChar = (WCHAR)<a class="code" href="../../d5/d9/ntrtlp_8h.html#a10">NLS_UPCASE</a>(UnicodeChar);
01566                 OemString[-0x07] = TranslateTable[UnicodeChar];
01567             <span class="keywordflow">case</span> 0x06:
01568                 SbChar = TranslateTable[UnicodeString[-0x06]];
01569                 UnicodeChar = <a class="code" href="../../d5/d9/gen8dot3_8c.html#a2">NlsOemToUnicodeData</a>[SbChar];
01570                 UnicodeChar = (WCHAR)<a class="code" href="../../d5/d9/ntrtlp_8h.html#a10">NLS_UPCASE</a>(UnicodeChar);
01571                 OemString[-0x06] = TranslateTable[UnicodeChar];
01572             <span class="keywordflow">case</span> 0x05:
01573                 SbChar = TranslateTable[UnicodeString[-0x05]];
01574                 UnicodeChar = <a class="code" href="../../d5/d9/gen8dot3_8c.html#a2">NlsOemToUnicodeData</a>[SbChar];
01575                 UnicodeChar = (WCHAR)<a class="code" href="../../d5/d9/ntrtlp_8h.html#a10">NLS_UPCASE</a>(UnicodeChar);
01576                 OemString[-0x05] = TranslateTable[UnicodeChar];
01577             <span class="keywordflow">case</span> 0x04:
01578                 SbChar = TranslateTable[UnicodeString[-0x04]];
01579                 UnicodeChar = <a class="code" href="../../d5/d9/gen8dot3_8c.html#a2">NlsOemToUnicodeData</a>[SbChar];
01580                 UnicodeChar = (WCHAR)<a class="code" href="../../d5/d9/ntrtlp_8h.html#a10">NLS_UPCASE</a>(UnicodeChar);
01581                 OemString[-0x04] = TranslateTable[UnicodeChar];
01582             <span class="keywordflow">case</span> 0x03:
01583                 SbChar = TranslateTable[UnicodeString[-0x03]];
01584                 UnicodeChar = <a class="code" href="../../d5/d9/gen8dot3_8c.html#a2">NlsOemToUnicodeData</a>[SbChar];
01585                 UnicodeChar = (WCHAR)<a class="code" href="../../d5/d9/ntrtlp_8h.html#a10">NLS_UPCASE</a>(UnicodeChar);
01586                 OemString[-0x03] = TranslateTable[UnicodeChar];
01587             <span class="keywordflow">case</span> 0x02:
01588                 SbChar = TranslateTable[UnicodeString[-0x02]];
01589                 UnicodeChar = <a class="code" href="../../d5/d9/gen8dot3_8c.html#a2">NlsOemToUnicodeData</a>[SbChar];
01590                 UnicodeChar = (WCHAR)<a class="code" href="../../d5/d9/ntrtlp_8h.html#a10">NLS_UPCASE</a>(UnicodeChar);
01591                 OemString[-0x02] = TranslateTable[UnicodeChar];
01592             <span class="keywordflow">case</span> 0x01:
01593                 SbChar = TranslateTable[UnicodeString[-0x01]];
01594                 UnicodeChar = <a class="code" href="../../d5/d9/gen8dot3_8c.html#a2">NlsOemToUnicodeData</a>[SbChar];
01595                 UnicodeChar = (WCHAR)<a class="code" href="../../d5/d9/ntrtlp_8h.html#a10">NLS_UPCASE</a>(UnicodeChar);
01596                 OemString[-0x01] = TranslateTable[UnicodeChar];
01597             <span class="keywordflow">case</span> 0x00:
01598                 ;
01599             }
01600 
01601             LoopCount -= TmpCount;
01602             TmpCount = 0x10;
01603         } <span class="keywordflow">while</span> ( LoopCount &gt; 0 );
01604 
01605         <span class="comment">/* end of copy... */</span>
01606     } <span class="keywordflow">else</span> {
01607         <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> MbChar;
01608         <span class="keyword">register</span> <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> Entry;
01609         PCH OemStringAnchor = OemString;
01610 
01611         CharsInUnicodeString = BytesInUnicodeString / <span class="keyword">sizeof</span>(WCHAR);
01612 
01613         <span class="keywordflow">while</span> ( CharsInUnicodeString &amp;&amp; MaxBytesInOemString ) {
01614             <span class="comment">//</span>
01615             <span class="comment">// Convert to OEM and back to Unicode before upper casing</span>
01616             <span class="comment">// to ensure the visual best fits are converted and</span>
01617             <span class="comment">// upper cased properly.</span>
01618             <span class="comment">//</span>
01619             MbChar = <a class="code" href="../../d5/d9/gen8dot3_8c.html#a1">NlsUnicodeToMbOemData</a>[ *UnicodeString++ ];
01620             <span class="keywordflow">if</span> (<a class="code" href="../../d5/d9/gen8dot3_8c.html#a6">NlsOemLeadByteInfo</a>[<a class="code" href="../../d5/d9/ntrtlp_8h.html#a5">HIBYTE</a>(MbChar)]) {
01621                 <span class="comment">//</span>
01622                 <span class="comment">// Lead byte - translate the trail byte using the table</span>
01623                 <span class="comment">// that corresponds to this lead byte.</span>
01624                 <span class="comment">//</span>
01625                 Entry = <a class="code" href="../../d5/d9/gen8dot3_8c.html#a6">NlsOemLeadByteInfo</a>[<a class="code" href="../../d5/d9/ntrtlp_8h.html#a5">HIBYTE</a>(MbChar)];
01626                 UnicodeChar = (WCHAR)<a class="code" href="../../d5/d9/gen8dot3_8c.html#a4">NlsMbOemCodePageTables</a>[ Entry + <a class="code" href="../../d5/d9/ntrtlp_8h.html#a4">LOBYTE</a>(MbChar) ];
01627             } <span class="keywordflow">else</span> {
01628                 <span class="comment">//</span>
01629                 <span class="comment">// Single byte character.</span>
01630                 <span class="comment">//</span>
01631                 UnicodeChar = <a class="code" href="../../d5/d9/gen8dot3_8c.html#a2">NlsOemToUnicodeData</a>[<a class="code" href="../../d5/d9/ntrtlp_8h.html#a4">LOBYTE</a>(MbChar)];
01632             }
01633             UnicodeChar = (WCHAR)<a class="code" href="../../d5/d9/ntrtlp_8h.html#a10">NLS_UPCASE</a>(UnicodeChar);
01634             MbChar = <a class="code" href="../../d5/d9/gen8dot3_8c.html#a1">NlsUnicodeToMbOemData</a>[UnicodeChar];
01635 
01636             <span class="keywordflow">if</span> (<a class="code" href="../../d5/d9/ntrtlp_8h.html#a5">HIBYTE</a>(MbChar) != 0) {
01637                 <span class="comment">//</span>
01638                 <span class="comment">// Need at least 2 bytes to copy a double byte char.</span>
01639                 <span class="comment">// Don't want to truncate in the middle of a DBCS char.</span>
01640                 <span class="comment">//</span>
01641                 <span class="keywordflow">if</span> (MaxBytesInOemString-- &lt; 2) {
01642                     <span class="keywordflow">break</span>;
01643                 }
01644                 *OemString++ = <a class="code" href="../../d5/d9/ntrtlp_8h.html#a5">HIBYTE</a>(MbChar);  <span class="comment">// lead byte</span>
01645             }
01646             *OemString++ = <a class="code" href="../../d5/d9/ntrtlp_8h.html#a4">LOBYTE</a>(MbChar);
01647             MaxBytesInOemString--;
01648 
01649             CharsInUnicodeString--;
01650         }
01651 
01652         <span class="keywordflow">if</span> (ARGUMENT_PRESENT(BytesInOemString))
01653             *BytesInOemString = (ULONG)(OemString - OemStringAnchor);
01654     }
01655 
01656     <span class="comment">//</span>
01657     <span class="comment">//  Check if we were able to use all of the source Unicode String</span>
01658     <span class="comment">//</span>
01659     <span class="keywordflow">return</span> ( CharsInUnicodeString &lt;= MaxBytesInOemString ) ?
01660            STATUS_SUCCESS :
01661            STATUS_BUFFER_OVERFLOW;
01662 }

</div></pre>    </td>
  </tr>
</table>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="a10" doxytag="nlsxlat.c::Nls844UnicodeLowercaseTable" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a22">PUSHORT</a> <a class="el" href="../../d5/d9/ntrtlp_8h.html#a21">Nls844UnicodeLowercaseTable</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00073">73</a> of file <a class="el" href="../../d0/d6/nlsxlat_8c-source.html">nlsxlat.c</a>.
<p>
Referenced by <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l02454">RtlResetRtlTranslations()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a9" doxytag="nlsxlat.c::Nls844UnicodeUpcaseTable" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a22">PUSHORT</a> <a class="el" href="../../d5/d9/ntrtlp_8h.html#a20">Nls844UnicodeUpcaseTable</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00072">72</a> of file <a class="el" href="../../d0/d6/nlsxlat_8c-source.html">nlsxlat.c</a>.
<p>
Referenced by <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l02454">RtlResetRtlTranslations()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a12" doxytag="nlsxlat.c::NlsAnsiCodePage" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a14">USHORT</a> <a class="el" href="../../d9/d6/nlsxlat_8c.html#a12">NlsAnsiCodePage</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00079">79</a> of file <a class="el" href="../../d0/d6/nlsxlat_8c-source.html">nlsxlat.c</a>.
<p>
Referenced by <a class="el" href="../../d0/d6/kernel_2server_8c-source.html#l02135">IsMidEastEnabledSystem()</a>, <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l02498">RtlGetDefaultCodePage()</a>, and <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l02454">RtlResetRtlTranslations()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a16" doxytag="nlsxlat.c::NlsAnsiToUnicodeData" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a22">PUSHORT</a> <a class="el" href="../../d2/d7/string_8c.html#a0">NlsAnsiToUnicodeData</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00083">83</a> of file <a class="el" href="../../d0/d6/nlsxlat_8c-source.html">nlsxlat.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a14" doxytag="nlsxlat.c::NlsLeadByteInfo" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a22">PUSHORT</a> <a class="el" href="../../d2/d7/string_8c.html#a2">NlsLeadByteInfo</a> = <a class="el" href="../../d9/d6/nlsxlat_8c.html#a11">NlsLeadByteInfoTable</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00081">81</a> of file <a class="el" href="../../d0/d6/nlsxlat_8c-source.html">nlsxlat.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a11" doxytag="nlsxlat.c::NlsLeadByteInfoTable" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a14">USHORT</a> <a class="el" href="../../d9/d6/nlsxlat_8c.html#a11">NlsLeadByteInfoTable</a>[DBCS_TABLE_SIZE]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00078">78</a> of file <a class="el" href="../../d0/d6/nlsxlat_8c-source.html">nlsxlat.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a15" doxytag="nlsxlat.c::NlsMbAnsiCodePageTables" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a22">PUSHORT</a> <a class="el" href="../../d9/d6/nlsxlat_8c.html#a15">NlsMbAnsiCodePageTables</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00082">82</a> of file <a class="el" href="../../d0/d6/nlsxlat_8c-source.html">nlsxlat.c</a>.
<p>
Referenced by <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00115">RtlConsoleMultiByteToUnicodeN()</a>, <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00369">RtlMultiByteToUnicodeN()</a>, <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l02454">RtlResetRtlTranslations()</a>, and <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l01053">RtlUpcaseUnicodeToMultiByteN()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a19" doxytag="nlsxlat.c::NlsMbCodePageTag" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOLEAN <a class="el" href="../../d2/d7/string_8c.html#a4">NlsMbCodePageTag</a> = FALSE          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00086">86</a> of file <a class="el" href="../../d0/d6/nlsxlat_8c-source.html">nlsxlat.c</a>.
<p>
Referenced by <a class="el" href="../../d5/d3/prefix_8c-source.html#l00843">CompareNamesCaseSensitive()</a>, <a class="el" href="../../d5/d3/prefix_8c-source.html#l00750">ComputeNameLength()</a>, <a class="el" href="../../d7/d7/ex_2harderr_8c-source.html#l00064">ExpSystemErrorHandler()</a>, <a class="el" href="../../d0/d6/kernel_2server_8c-source.html#l02118">IsDBCSEnabledSystem()</a>, <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00115">RtlConsoleMultiByteToUnicodeN()</a>, <a class="el" href="../../d7/d5/nls_8c-source.html#l02098">RtlIsTextUnicode()</a>, <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00369">RtlMultiByteToUnicodeN()</a>, <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00755">RtlMultiByteToUnicodeSize()</a>, <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l02454">RtlResetRtlTranslations()</a>, <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00905">RtlUnicodeToMultiByteN()</a>, <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00839">RtlUnicodeToMultiByteSize()</a>, <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l01053">RtlUpcaseUnicodeToMultiByteN()</a>, and <a class="el" href="../../d3/d6/string_8c-source.html#l00250">RtlUpperChar()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a22" doxytag="nlsxlat.c::NlsMbOemCodePageTables" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a22">PUSHORT</a> <a class="el" href="../../d9/d6/nlsxlat_8c.html#a22">NlsMbOemCodePageTables</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00093">93</a> of file <a class="el" href="../../d0/d6/nlsxlat_8c-source.html">nlsxlat.c</a>.
<p>
Referenced by <a class="el" href="../../d6/d8/gen8dot3_8c-source.html#l00459">RtlIsValidOemCharacter()</a>, <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00576">RtlOemToUnicodeN()</a>, <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l02454">RtlResetRtlTranslations()</a>, and <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l01433">RtlUpcaseUnicodeToOemN()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a26" doxytag="nlsxlat.c::NlsMbOemCodePageTag" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOLEAN <a class="el" href="../../d9/d6/nlsxlat_8c.html#a26">NlsMbOemCodePageTag</a> = FALSE          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00097">97</a> of file <a class="el" href="../../d0/d6/nlsxlat_8c-source.html">nlsxlat.c</a>.
<p>
Referenced by <a class="el" href="../../d2/d2/dbcsname_8c-source.html#l00771">FsRtlIsDbcsInExpression()</a>, <a class="el" href="../../d6/d8/gen8dot3_8c-source.html#l00081">RtlGenerate8dot3Name()</a>, <a class="el" href="../../d6/d8/gen8dot3_8c-source.html#l00729">RtlIsNameLegalDOS8Dot3()</a>, <a class="el" href="../../d6/d8/gen8dot3_8c-source.html#l00459">RtlIsValidOemCharacter()</a>, <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00576">RtlOemToUnicodeN()</a>, <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l01665">RtlpDidUnicodeToOemWork()</a>, <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l02454">RtlResetRtlTranslations()</a>, <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l01277">RtlUnicodeToOemN()</a>, and <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l01433">RtlUpcaseUnicodeToOemN()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a13" doxytag="nlsxlat.c::NlsOemCodePage" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a14">USHORT</a> <a class="el" href="../../d9/d6/nlsxlat_8c.html#a13">NlsOemCodePage</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00080">80</a> of file <a class="el" href="../../d0/d6/nlsxlat_8c-source.html">nlsxlat.c</a>.
<p>
Referenced by <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l02498">RtlGetDefaultCodePage()</a>, <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l02454">RtlResetRtlTranslations()</a>, and <a class="el" href="../../d3/d3/tounicod_8c-source.html#l00279">xxxInternalToUnicode()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a21" doxytag="nlsxlat.c::NlsOemLeadByteInfo" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a22">PUSHORT</a> <a class="el" href="../../d9/d6/nlsxlat_8c.html#a21">NlsOemLeadByteInfo</a> = <a class="el" href="../../d9/d6/nlsxlat_8c.html#a20">NlsOemLeadByteInfoTable</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00092">92</a> of file <a class="el" href="../../d0/d6/nlsxlat_8c-source.html">nlsxlat.c</a>.
<p>
Referenced by <a class="el" href="../../d6/d8/gen8dot3_8c-source.html#l00729">RtlIsNameLegalDOS8Dot3()</a>, <a class="el" href="../../d6/d8/gen8dot3_8c-source.html#l00459">RtlIsValidOemCharacter()</a>, <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00576">RtlOemToUnicodeN()</a>, <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l01665">RtlpDidUnicodeToOemWork()</a>, <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l02454">RtlResetRtlTranslations()</a>, and <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l01433">RtlUpcaseUnicodeToOemN()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a20" doxytag="nlsxlat.c::NlsOemLeadByteInfoTable" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a14">USHORT</a> <a class="el" href="../../d9/d6/nlsxlat_8c.html#a20">NlsOemLeadByteInfoTable</a>[DBCS_TABLE_SIZE]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00091">91</a> of file <a class="el" href="../../d0/d6/nlsxlat_8c-source.html">nlsxlat.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a23" doxytag="nlsxlat.c::NlsOemToUnicodeData" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a22">PUSHORT</a> <a class="el" href="../../d9/d6/nlsxlat_8c.html#a23">NlsOemToUnicodeData</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00094">94</a> of file <a class="el" href="../../d0/d6/nlsxlat_8c-source.html">nlsxlat.c</a>.
<p>
Referenced by <a class="el" href="../../d6/d8/gen8dot3_8c-source.html#l00459">RtlIsValidOemCharacter()</a>, <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00576">RtlOemToUnicodeN()</a>, <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l02454">RtlResetRtlTranslations()</a>, and <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l01433">RtlUpcaseUnicodeToOemN()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a17" doxytag="nlsxlat.c::NlsUnicodeToAnsiData" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> PCH <a class="el" href="../../d2/d7/string_8c.html#a1">NlsUnicodeToAnsiData</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00084">84</a> of file <a class="el" href="../../d0/d6/nlsxlat_8c-source.html">nlsxlat.c</a>.
<p>
Referenced by <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l02454">RtlResetRtlTranslations()</a>, <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00905">RtlUnicodeToMultiByteN()</a>, <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l01053">RtlUpcaseUnicodeToMultiByteN()</a>, and <a class="el" href="../../d3/d6/string_8c-source.html#l00250">RtlUpperChar()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a18" doxytag="nlsxlat.c::NlsUnicodeToMbAnsiData" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a22">PUSHORT</a> <a class="el" href="../../d2/d7/string_8c.html#a3">NlsUnicodeToMbAnsiData</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00085">85</a> of file <a class="el" href="../../d0/d6/nlsxlat_8c-source.html">nlsxlat.c</a>.
<p>
Referenced by <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l02454">RtlResetRtlTranslations()</a>, <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00905">RtlUnicodeToMultiByteN()</a>, <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00839">RtlUnicodeToMultiByteSize()</a>, <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l01053">RtlUpcaseUnicodeToMultiByteN()</a>, and <a class="el" href="../../d3/d6/string_8c-source.html#l00250">RtlUpperChar()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a25" doxytag="nlsxlat.c::NlsUnicodeToMbOemData" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a22">PUSHORT</a> <a class="el" href="../../d9/d6/nlsxlat_8c.html#a25">NlsUnicodeToMbOemData</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00096">96</a> of file <a class="el" href="../../d0/d6/nlsxlat_8c-source.html">nlsxlat.c</a>.
<p>
Referenced by <a class="el" href="../../d6/d8/gen8dot3_8c-source.html#l00459">RtlIsValidOemCharacter()</a>, <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l02454">RtlResetRtlTranslations()</a>, <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l01277">RtlUnicodeToOemN()</a>, and <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l01433">RtlUpcaseUnicodeToOemN()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a24" doxytag="nlsxlat.c::NlsUnicodeToOemData" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> PCH <a class="el" href="../../d9/d6/nlsxlat_8c.html#a24">NlsUnicodeToOemData</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00095">95</a> of file <a class="el" href="../../d0/d6/nlsxlat_8c-source.html">nlsxlat.c</a>.
<p>
Referenced by <a class="el" href="../../d6/d8/gen8dot3_8c-source.html#l00459">RtlIsValidOemCharacter()</a>, <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l02454">RtlResetRtlTranslations()</a>, <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l01277">RtlUnicodeToOemN()</a>, and <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l01433">RtlUpcaseUnicodeToOemN()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a28" doxytag="nlsxlat.c::OemDefaultChar" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a14">USHORT</a> <a class="el" href="../../d9/d6/nlsxlat_8c.html#a28">OemDefaultChar</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00104">104</a> of file <a class="el" href="../../d0/d6/nlsxlat_8c-source.html">nlsxlat.c</a>.
<p>
Referenced by <a class="el" href="../../d6/d8/gen8dot3_8c-source.html#l00459">RtlIsValidOemCharacter()</a>, <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l01665">RtlpDidUnicodeToOemWork()</a>, and <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l02454">RtlResetRtlTranslations()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a29" doxytag="nlsxlat.c::OemTransUniDefaultChar" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a14">USHORT</a> <a class="el" href="../../d9/d6/nlsxlat_8c.html#a29">OemTransUniDefaultChar</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00105">105</a> of file <a class="el" href="../../d0/d6/nlsxlat_8c-source.html">nlsxlat.c</a>.
<p>
Referenced by <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l01665">RtlpDidUnicodeToOemWork()</a>, and <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l02454">RtlResetRtlTranslations()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a27" doxytag="nlsxlat.c::UnicodeDefaultChar" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a14">USHORT</a> <a class="el" href="../../d9/d6/nlsxlat_8c.html#a27">UnicodeDefaultChar</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00102">102</a> of file <a class="el" href="../../d0/d6/nlsxlat_8c-source.html">nlsxlat.c</a>.
<p>
Referenced by <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l02454">RtlResetRtlTranslations()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a30" doxytag="nlsxlat.c::UnicodeNull" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a14">USHORT</a> <a class="el" href="../../d9/d6/nlsxlat_8c.html#a30">UnicodeNull</a> = 0x0000          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00110">110</a> of file <a class="el" href="../../d0/d6/nlsxlat_8c-source.html">nlsxlat.c</a>.
<p>
Referenced by <a class="el" href="../../d7/d0/cmhvlist_8c-source.html#l00042">CmpAddToHiveFileList()</a>, <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00115">RtlConsoleMultiByteToUnicodeN()</a>, <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l01757">RtlCustomCPToUnicodeN()</a>, <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00369">RtlMultiByteToUnicodeN()</a>, and <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00576">RtlOemToUnicodeN()</a>.    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Sat May 15 19:44:51 2004 for test by
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>

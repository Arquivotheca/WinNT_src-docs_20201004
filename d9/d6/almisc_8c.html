<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>test: almisc.c File Reference</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="../../main.html">Main&nbsp;Page</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Class&nbsp;List</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Class&nbsp;Members</a> | <a class="qindex" href="../../globals.html">File&nbsp;Members</a></div>
<h1>almisc.c File Reference</h1><code>#include "<a class="el" href="../../d4/d2/arcinst_2precomp_8h-source.html">precomp.h</a>"</code><br>

<p>
<a href="../../d0/d6/almisc_8c-source.html">Go to the source code of this file.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d9/struct__tagMENUITEM.html">_tagMENUITEM</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d9/struct__tagMENUCOOKIE.html">_tagMENUCOOKIE</a></td></tr>

<tr><td colspan=2><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/almisc_8c.html#a0">KEY_UP</a>&nbsp;&nbsp;&nbsp;1</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/almisc_8c.html#a1">KEY_DOWN</a>&nbsp;&nbsp;&nbsp;2</td></tr>

<tr><td colspan=2><br><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d1/d9/struct__tagMENUITEM.html">_tagMENUITEM</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/almisc_8c.html#a2">MENUITEM</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d1/d9/struct__tagMENUITEM.html">_tagMENUITEM</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/almisc_8c.html#a3">PMENUITEM</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d0/d9/struct__tagMENUCOOKIE.html">_tagMENUCOOKIE</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/almisc_8c.html#a4">MENUCOOKIE</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d0/d9/struct__tagMENUCOOKIE.html">_tagMENUCOOKIE</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/almisc_8c.html#a5">PMENUCOOKIE</a></td></tr>

<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/almisc_8c.html#a11">AlpFreeComponents</a> (IN PCHAR *EnvVarComponents)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOLEAN&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/almisc_8c.html#a12">AlpMatchComponent</a> (IN PCHAR Value1, IN PCHAR Value2)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/almisc_8c.html#a13">AlGetEnvVarComponents</a> (IN PCHAR EnvValue, OUT PCHAR **EnvVarComponents, OUT PULONG PNumComponents)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/almisc_8c.html#a14">AlFreeEnvVarComponents</a> (IN PCHAR *EnvVarComponents)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOLEAN&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/almisc_8c.html#a15">AlFindNextMatchComponent</a> (IN PCHAR EnvValue, IN PCHAR MatchValue, IN ULONG StartComponent, OUT PULONG MatchComponent OPTIONAL)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/almisc_8c.html#a16">AlAddSystemPartition</a> (IN PCHAR NewSystemPartition)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/almisc_8c.html#a17">MarkLine</a> (ULONG Line, BOOLEAN Selected, PCHAR <a class="el" href="../../d0/d0/tdetach_8c.html#a0">String</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOLEAN&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/almisc_8c.html#a18">CommonMenuDisplay</a> (<a class="el" href="../../d0/d9/struct__tagMENUCOOKIE.html">PMENUCOOKIE</a> Menu, BOOLEAN StaticMenu, PCHAR Items[], ULONG ItemCount, BOOLEAN PrintOnly, ULONG AssociatedDataOfDefaultChoice, ULONG *AssociatedDataOfChoice, PCHAR MenuName, ULONG Row)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>char&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/almisc_8c.html#a19">GetChar</a> (VOID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOLEAN&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/almisc_8c.html#a20">AlInitializeMenuPackage</a> (VOID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>ULONG&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/almisc_8c.html#a21">AlGetMenuNumberItems</a> (PVOID MenuID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>ULONG&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/almisc_8c.html#a22">AlGetMenuAssociatedData</a> (PVOID MenuID, ULONG <a class="el" href="../../d7/d0/exts_8h.html#a0">n</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOLEAN&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/almisc_8c.html#a23">AlNewMenu</a> (PVOID *MenuID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/almisc_8c.html#a24">AlFreeMenu</a> (PVOID MenuID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOLEAN&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/almisc_8c.html#a25">AlAddMenuItem</a> (PVOID MenuID, PCHAR Text, ULONG AssociatedData, ULONG Attributes)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOLEAN&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/almisc_8c.html#a26">AlAddMenuItems</a> (PVOID MenuID, PCHAR Text[], ULONG ItemCount)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOLEAN&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/almisc_8c.html#a27">AlDisplayMenu</a> (PVOID MenuID, BOOLEAN PrintOnly, ULONG AssociatedDataOfDefaultChoice, ULONG *AssociatedDataOfChoice, ULONG Row, PCHAR MenuName)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOLEAN&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/almisc_8c.html#a28">AlDisplayStaticMenu</a> (PCHAR Items[], ULONG ItemCount, ULONG DefaultChoice, ULONG Row, ULONG *IndexOfChoice)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/almisc_8c.html#a29">AlWaitKey</a> (PCHAR Prompt)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/almisc_8c.html#a30">vAlStatusMsg</a> (IN ULONG Row, IN BOOLEAN Error, IN PCHAR FormatString, IN va_list ArgumentList)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/almisc_8c.html#a31">AlStatusMsg</a> (IN ULONG TopRow, IN ULONG BottomRow, IN BOOLEAN Error, IN PCHAR FormatString,...)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/almisc_8c.html#a32">AlStatusMsgNoWait</a> (IN ULONG TopRow, IN ULONG BottomRow, IN BOOLEAN Error, IN PCHAR FormatString,...)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/almisc_8c.html#a33">AlClearStatusArea</a> (IN ULONG TopRow, IN ULONG BottomRow)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/almisc_8c.html#a34">AlGetMenuSelection</a> (IN PCHAR <a class="el" href="../../d5/d6/ntcon_2conime_2globals_8h.html#a2">szTitle</a>, IN PCHAR *rgszSelections, IN ULONG crgsz, IN ULONG crow, IN ULONG irgszDefault, OUT PULONG pirgsz, OUT PCHAR *pszSelection)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>PCHAR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/almisc_8c.html#a35">AlStrDup</a> (IN PCHAR szString)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>PCHAR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/almisc_8c.html#a36">AlCombinePaths</a> (IN PCHAR szPath1, IN PCHAR szPath2)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/almisc_8c.html#a37">AlFreeArray</a> (IN BOOLEAN fFreeArray, IN PCHAR *rgsz, IN ULONG csz)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/almisc_8c.html#a38">AlGetBase</a> (IN PCHAR szPath, OUT PCHAR *pszBase)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>PCHAR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/almisc_8c.html#a39">AlGetNextArcNamToken</a> (IN PCHAR TokenString, OUT PCHAR OutputToken, OUT PULONG UnitNumber)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>ULONG&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/almisc_8c.html#a40">AlMatchArcNamToken</a> (IN PCHAR TokenValue, IN TOKEN_TYPE TokenType)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>ULONG&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/almisc_8c.html#a41">AlPrint</a> (PCHAR Format,...)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOLEAN&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/almisc_8c.html#a42">AlGetString</a> (OUT PCHAR <a class="el" href="../../d0/d0/tdetach_8c.html#a0">String</a>, IN ULONG StringLength)</td></tr>

<tr><td colspan=2><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>char&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/almisc_8c.html#a6">MARGIN</a> [] = " "</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>char&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/almisc_8c.html#a7">MSGMARGIN</a> [] = " "</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>PCHAR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/almisc_8c.html#a8">AdapterTypes</a> [AdapterMaximum+1] = {"eisa","scsi", "multi", NULL}</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>PCHAR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/almisc_8c.html#a9">ControllerTypes</a> [ControllerMaximum+1] = {"cdrom", "disk", NULL}</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>PCHAR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/almisc_8c.html#a10">PeripheralTypes</a> [PeripheralMaximum+1] = {"rdisk", "fdisk", NULL}</td></tr>

</table>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="a1" doxytag="almisc.c::KEY_DOWN" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define KEY_DOWN&nbsp;&nbsp;&nbsp;2          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/almisc_8c-source.html#l00590">590</a> of file <a class="el" href="../../d0/d6/almisc_8c-source.html">almisc.c</a>.
<p>
Referenced by <a class="el" href="../../d0/d6/almisc_8c-source.html#l00788">CommonMenuDisplay()</a>, and <a class="el" href="../../d0/d6/almisc_8c-source.html#l00902">GetChar()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a0" doxytag="almisc.c::KEY_UP" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define KEY_UP&nbsp;&nbsp;&nbsp;1          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/almisc_8c-source.html#l00589">589</a> of file <a class="el" href="../../d0/d6/almisc_8c-source.html">almisc.c</a>.
<p>
Referenced by <a class="el" href="../../d0/d6/almisc_8c-source.html#l00788">CommonMenuDisplay()</a>, and <a class="el" href="../../d0/d6/almisc_8c-source.html#l00902">GetChar()</a>.    </td>
  </tr>
</table>
<hr><h2>Typedef Documentation</h2>
<a class="anchor" name="a4" doxytag="almisc.c::MENUCOOKIE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d0/d9/struct__tagMENUCOOKIE.html">_tagMENUCOOKIE</a>  <a class="el" href="../../d0/d9/struct__tagMENUCOOKIE.html">MENUCOOKIE</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="almisc.c::MENUITEM" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d1/d9/struct__tagMENUITEM.html">_tagMENUITEM</a>  <a class="el" href="../../d1/d9/struct__tagMENUITEM.html">MENUITEM</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="almisc.c::PMENUCOOKIE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d0/d9/struct__tagMENUCOOKIE.html">_tagMENUCOOKIE</a>* <a class="el" href="../../d0/d9/struct__tagMENUCOOKIE.html">PMENUCOOKIE</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d0/d6/almisc_8c-source.html#l00684">AlAddMenuItem()</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l00740">AlDisplayMenu()</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l00664">AlFreeMenu()</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l00638">AlGetMenuAssociatedData()</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l00629">AlGetMenuNumberItems()</a>, and <a class="el" href="../../d0/d6/almisc_8c-source.html#l00647">AlNewMenu()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="almisc.c::PMENUITEM" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d1/d9/struct__tagMENUITEM.html">_tagMENUITEM</a>* <a class="el" href="../../d1/d9/struct__tagMENUITEM.html">PMENUITEM</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d0/d6/almisc_8c-source.html#l00684">AlAddMenuItem()</a>.    </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="a25" doxytag="almisc.c::AlAddMenuItem" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOLEAN AlAddMenuItem           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">PVOID&nbsp;</td>
          <td class="mdname" nowrap> <em>MenuID</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>Text</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>AssociatedData</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>Attributes</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/almisc_8c-source.html#l00684">684</a> of file <a class="el" href="../../d0/d6/almisc_8c-source.html">almisc.c</a>.
<p>
References <a class="el" href="../../d5/d5/memory_8c-source.html#l01113">AlAllocateHeap()</a>, <a class="el" href="../../d5/d5/memory_8c-source.html#l01153">AlReallocateHeap()</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l00573">_tagMENUITEM::AssociatedData</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l00577">_tagMENUCOOKIE::ItemCount</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l00578">_tagMENUCOOKIE::Items</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d9/d6/almisc_8c.html#a5">PMENUCOOKIE</a>, <a class="el" href="../../d9/d6/almisc_8c.html#a3">PMENUITEM</a>, <a class="el" href="../../d2/d7/regtest_8c.html#a2">strlen()</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l00572">_tagMENUITEM::Text</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d0/d6/almisc_8c-source.html#l00720">AlAddMenuItems()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00149">ChooseDisk()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00573">DoMakePartitionSystemPartition()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00224">DoPartitionCreate()</a>, and <a class="el" href="../../d8/d2/partit_8c-source.html#l00409">DoPartitionDelete()</a>.
<p>
<pre class="fragment"><div>00690 {
00691     <a class="code" href="../../d0/d9/struct__tagMENUCOOKIE.html">PMENUCOOKIE</a> Menu = MenuID;
00692     <a class="code" href="../../d1/d9/struct__tagMENUITEM.html">PMENUITEM</a>   p;
00693 
00694     DBG_UNREFERENCED_PARAMETER(Attributes);
00695 
00696     <span class="keywordflow">if</span>(!Menu-&gt;<a class="code" href="../../d0/d9/struct__tagMENUCOOKIE.html#o0">ItemCount</a>) {
00697         <span class="keywordflow">if</span>((Menu-&gt;<a class="code" href="../../d0/d9/struct__tagMENUCOOKIE.html#o1">Items</a> = <a class="code" href="../../d4/d6/memory_8c.html#a22">AlAllocateHeap</a>(<span class="keyword">sizeof</span>(<a class="code" href="../../d1/d9/struct__tagMENUITEM.html">MENUITEM</a>))) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00698             <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00699         }
00700         Menu-&gt;<a class="code" href="../../d0/d9/struct__tagMENUCOOKIE.html#o0">ItemCount</a> = 1;
00701         p = Menu-&gt;<a class="code" href="../../d0/d9/struct__tagMENUCOOKIE.html#o1">Items</a>;
00702     } <span class="keywordflow">else</span> {
00703         <span class="keywordflow">if</span>((p = <a class="code" href="../../d4/d6/memory_8c.html#a24">AlReallocateHeap</a>(Menu-&gt;<a class="code" href="../../d0/d9/struct__tagMENUCOOKIE.html#o1">Items</a>,<span class="keyword">sizeof</span>(<a class="code" href="../../d1/d9/struct__tagMENUITEM.html">MENUITEM</a>)*(Menu-&gt;<a class="code" href="../../d0/d9/struct__tagMENUCOOKIE.html#o0">ItemCount</a>+1))) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00704             <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00705         }
00706         Menu-&gt;<a class="code" href="../../d0/d9/struct__tagMENUCOOKIE.html#o1">Items</a> = p;
00707         p = &amp;Menu-&gt;<a class="code" href="../../d0/d9/struct__tagMENUCOOKIE.html#o1">Items</a>[Menu-&gt;<a class="code" href="../../d0/d9/struct__tagMENUCOOKIE.html#o0">ItemCount</a>++];
00708     }
00709 
00710     <span class="keywordflow">if</span>((p-&gt;<a class="code" href="../../d1/d9/struct__tagMENUITEM.html#o0">Text</a> = <a class="code" href="../../d4/d6/memory_8c.html#a22">AlAllocateHeap</a>(<a class="code" href="../../d2/d7/regtest_8c.html#a2">strlen</a>(Text)+1)) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00711         <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00712     }
00713     strcpy(p-&gt;<a class="code" href="../../d1/d9/struct__tagMENUITEM.html#o0">Text</a>,Text);
00714     p-&gt;<a class="code" href="../../d1/d9/struct__tagMENUITEM.html#o1">AssociatedData</a> = AssociatedData;
00715     <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
00716 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a26" doxytag="almisc.c::AlAddMenuItems" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOLEAN AlAddMenuItems           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">PVOID&nbsp;</td>
          <td class="mdname" nowrap> <em>MenuID</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>Text</em>[], </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>ItemCount</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/almisc_8c-source.html#l00720">720</a> of file <a class="el" href="../../d0/d6/almisc_8c-source.html">almisc.c</a>.
<p>
References <a class="el" href="../../d0/d6/almisc_8c-source.html#l00684">AlAddMenuItem()</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l00629">AlGetMenuNumberItems()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d0/d6/almisc_8c-source.html#l01025">AlGetMenuSelection()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00681">ConfigureSystemPartitions()</a>, and <a class="el" href="../../d4/d8/arcinst_8c-source.html#l00090">main()</a>.
<p>
<pre class="fragment"><div>00725 {
00726     ULONG base,i;
00727 
00728     base = <a class="code" href="../../d4/d9/arcinst_8h.html#a96">AlGetMenuNumberItems</a>(MenuID);
00729 
00730     <span class="keywordflow">for</span>(i=0; i&lt;ItemCount; i++) {
00731     <span class="keywordflow">if</span>(!<a class="code" href="../../d4/d9/arcinst_8h.html#a93">AlAddMenuItem</a>(MenuID,Text[i],i+base,0)) {
00732             <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00733         }
00734     }
00735     <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
00736 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a16" doxytag="almisc.c::AlAddSystemPartition" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a> AlAddSystemPartition           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PCHAR&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>NewSystemPartition</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/almisc_8c-source.html#l00424">424</a> of file <a class="el" href="../../d0/d6/almisc_8c-source.html">almisc.c</a>.
<p>
References <a class="el" href="../../d2/d8/arc_8h-source.html#l00040">ARC_STATUS</a>, <a class="el" href="../../d2/d8/arc_8h-source.html#l01574">ArcGetEnvironmentVariable</a>, <a class="el" href="../../d2/d8/arc_8h-source.html#l01596">ArcSetEnvironmentVariable</a>, <a class="el" href="../../d2/d0/bench_8c-source.html#l00050">CHAR</a>, <a class="el" href="../../d2/d9/arccodes_8h.html#a24a2">E2BIG</a>, <a class="el" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>, <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00827">MAXIMUM_ENVIRONMENT_VALUE</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d3/d0/cttoken_8c-source.html#l00135">Status</a>, and <a class="el" href="../../d2/d7/regtest_8c.html#a2">strlen()</a>.
<p>
Referenced by <a class="el" href="../../d8/d2/partit_8c-source.html#l00573">DoMakePartitionSystemPartition()</a>, and <a class="el" href="../../d8/d2/partit_8c-source.html#l00542">DoSystemPartitionCreate()</a>.
<p>
<pre class="fragment"><div>00430                    :
00431 
00432     This routine adds a system partition to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> SystemPartition environment
00433     variable, and updates <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> Osloader, OsloadPartition, OsloadFilename,
00434     and OsloadOptions variables.
00435 
00436 Arguments:
00437 
00438     SystemPartition - Supplies a pointer to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> pathname of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> system
00439                       partition to add.
00440 
00441 Return Value:
00442 
00443     If <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> system partition was successfully added, <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a> <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> returned,
00444     otherwise an error code <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> returned.
00445 
00446     BUGBUG - This program <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> simplistic and doesn'<a class="code" href="../../d4/d1/genmips_8c.html#a17">t</a> attempt to make sure all
00447     <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> variables are consistent.  It also doesn'<a class="code" href="../../d4/d1/genmips_8c.html#a17">t</a> fail gracefully.
00448 
00449 --*/
00450 
00451 {
00452     <a class="code" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
00453     PCHAR SystemPartition;
00454     <a class="code" href="../../d1/d1/bench_8c.html#a16">CHAR</a> TempValue[<a class="code" href="../../d4/d9/arcinst_8h.html#a38">MAXIMUM_ENVIRONMENT_VALUE</a>];
00455     <span class="comment">//PCHAR Osloader;</span>
00456     <span class="comment">//PCHAR OsloadPartition;</span>
00457     <span class="comment">//PCHAR OsloadFilename;</span>
00458     <span class="comment">//PCHAR OsloadOptions;</span>
00459 
00460     <span class="comment">//</span>
00461     <span class="comment">// Get the system partition environment variable.</span>
00462     <span class="comment">//</span>
00463 
00464     SystemPartition = <a class="code" href="../../d1/d9/arc_8h.html#a39">ArcGetEnvironmentVariable</a>(<span class="stringliteral">"SystemPartition"</span>);
00465 
00466     <span class="comment">//</span>
00467     <span class="comment">// If the variable doesn't exist, add it and exit.</span>
00468     <span class="comment">//</span>
00469 
00470     <span class="keywordflow">if</span> (SystemPartition == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00471         <span class="keywordflow">if</span>(<a class="code" href="../../d2/d7/regtest_8c.html#a2">strlen</a>(NewSystemPartition) &lt; <a class="code" href="../../d4/d9/arcinst_8h.html#a38">MAXIMUM_ENVIRONMENT_VALUE</a>) {
00472             <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d1/d9/arc_8h.html#a40">ArcSetEnvironmentVariable</a>(<span class="stringliteral">"SystemPartition"</span>,
00473                                                NewSystemPartition);
00474         } <span class="keywordflow">else</span> {
00475             <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d2/d9/arccodes_8h.html#a24a2">E2BIG</a>;
00476         }
00477         <span class="keywordflow">return</span> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
00478     }
00479 
00480     <span class="comment">//</span>
00481     <span class="comment">// If the variable exists, add the new partition to the end.</span>
00482     <span class="comment">//</span>
00483     <span class="keywordflow">if</span>(<a class="code" href="../../d2/d7/regtest_8c.html#a2">strlen</a>(SystemPartition)+<a class="code" href="../../d2/d7/regtest_8c.html#a2">strlen</a>(NewSystemPartition)+2 &gt; <a class="code" href="../../d4/d9/arcinst_8h.html#a38">MAXIMUM_ENVIRONMENT_VALUE</a>) {
00484         <span class="keywordflow">return</span>(<a class="code" href="../../d2/d9/arccodes_8h.html#a24a2">E2BIG</a>);
00485     }
00486 
00487     strcpy(TempValue, SystemPartition);
00488     strcat(TempValue, <span class="stringliteral">";"</span>);
00489     strcat(TempValue, NewSystemPartition);
00490     <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d1/d9/arc_8h.html#a40">ArcSetEnvironmentVariable</a>(<span class="stringliteral">"SystemPartition"</span>,
00491                                        TempValue);
00492 
00493     <span class="keywordflow">if</span> (<a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> != <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>) {
00494         <span class="keywordflow">return</span> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
00495     }
00496 
00497 <span class="preprocessor">#if 0</span>
00498 <span class="preprocessor"></span>    <span class="comment">//</span>
00499     <span class="comment">// Add semicolons to the end of each of the associated variables.</span>
00500     <span class="comment">// If they don't exist add them.</span>
00501     <span class="comment">//</span>
00502 
00503     <span class="comment">//</span>
00504     <span class="comment">// Get the Osloader environment variable and add a semicolon to the end.</span>
00505     <span class="comment">//</span>
00506 
00507     Osloader = <a class="code" href="../../d1/d9/arc_8h.html#a39">ArcGetEnvironmentVariable</a>(<span class="stringliteral">"Osloader"</span>);
00508     <span class="keywordflow">if</span> (Osloader == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00509         *TempValue = 0;
00510     } <span class="keywordflow">else</span> {
00511         strcpy(TempValue, Osloader);
00512     }
00513     strcat(TempValue, <span class="stringliteral">";"</span>);
00514     <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d1/d9/arc_8h.html#a40">ArcSetEnvironmentVariable</a>(<span class="stringliteral">"Osloader"</span>,TempValue);
00515 
00516     <span class="keywordflow">if</span> (<a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> != <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>) {
00517         <span class="keywordflow">return</span> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
00518     }
00519 
00520     <span class="comment">//</span>
00521     <span class="comment">// Get the OsloadPartition environment variable and add a semicolon to the end.</span>
00522     <span class="comment">//</span>
00523 
00524     OsloadPartition = <a class="code" href="../../d1/d9/arc_8h.html#a39">ArcGetEnvironmentVariable</a>(<span class="stringliteral">"OsloadPartition"</span>);
00525     <span class="keywordflow">if</span> (OsloadPartition == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00526         *TempValue = 0;
00527     } <span class="keywordflow">else</span> {
00528         strcpy(TempValue, OsloadPartition);
00529     }
00530     strcat(TempValue, <span class="stringliteral">";"</span>);
00531     <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d1/d9/arc_8h.html#a40">ArcSetEnvironmentVariable</a>(<span class="stringliteral">"OsloadPartition"</span>,TempValue);
00532 
00533     <span class="keywordflow">if</span> (<a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> != <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>) {
00534         <span class="keywordflow">return</span> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
00535     }
00536 
00537     <span class="comment">//</span>
00538     <span class="comment">// Get the OsloadFilename environment variable and add a semicolon to the end.</span>
00539     <span class="comment">//</span>
00540 
00541     OsloadFilename = <a class="code" href="../../d1/d9/arc_8h.html#a39">ArcGetEnvironmentVariable</a>(<span class="stringliteral">"OsloadFilename"</span>);
00542     <span class="keywordflow">if</span> (OsloadFilename == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00543         *TempValue = 0;
00544     } <span class="keywordflow">else</span> {
00545         strcpy(TempValue, OsloadFilename);
00546     }
00547     strcat(TempValue, <span class="stringliteral">";"</span>);
00548     <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d1/d9/arc_8h.html#a40">ArcSetEnvironmentVariable</a>(<span class="stringliteral">"OsloadFilename"</span>,TempValue);
00549 
00550     <span class="keywordflow">if</span> (<a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> != <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>) {
00551         <span class="keywordflow">return</span> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
00552     }
00553 
00554     <span class="comment">//</span>
00555     <span class="comment">// Get the OsloadOptions environment variable and add a semicolon to the end.</span>
00556     <span class="comment">//</span>
00557 
00558     OsloadOptions = <a class="code" href="../../d1/d9/arc_8h.html#a39">ArcGetEnvironmentVariable</a>(<span class="stringliteral">"OsloadOptions"</span>);
00559     <span class="keywordflow">if</span> (OsloadOptions == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00560         *TempValue = 0;
00561     } <span class="keywordflow">else</span> {
00562         strcpy(TempValue, OsloadOptions);
00563     }
00564     strcat(TempValue, <span class="stringliteral">";"</span>);
00565     <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d1/d9/arc_8h.html#a40">ArcSetEnvironmentVariable</a>(<span class="stringliteral">"OsloadOptions"</span>,TempValue);
00566 <span class="preprocessor">#endif</span>
00567 <span class="preprocessor"></span>    <span class="keywordflow">return</span> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
00568 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a33" doxytag="almisc.c::AlClearStatusArea" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID AlClearStatusArea           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>TopRow</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>BottomRow</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/almisc_8c-source.html#l01010">1010</a> of file <a class="el" href="../../d0/d6/almisc_8c-source.html">almisc.c</a>.
<p>
References <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00302">AlClearLine</a>, and <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00321">AlSetPosition</a>.
<p>
Referenced by <a class="el" href="../../d0/d6/almisc_8c-source.html#l00974">AlStatusMsg()</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l00993">AlStatusMsgNoWait()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00074">Confirm()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00224">DoPartitionCreate()</a>, <a class="el" href="../../d4/d8/arcinst_8c-source.html#l00191">PrintError()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00093">PrintErrorMsg()</a>, and <a class="el" href="../../d8/d2/partit_8c-source.html#l00111">PrintMsg()</a>.
<p>
<pre class="fragment"><div>01014 {
01015     ULONG i;
01016 
01017     <span class="keywordflow">for</span>(i=BottomRow; i&gt;=TopRow; --i) {
01018         <a class="code" href="../../d4/d9/arcinst_8h.html#a19">AlSetPosition</a>(i,0);
01019         <a class="code" href="../../d4/d9/arcinst_8h.html#a16">AlClearLine</a>();
01020     }
01021 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a36" doxytag="almisc.c::AlCombinePaths" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> PCHAR AlCombinePaths           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>szPath1</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>szPath2</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/almisc_8c-source.html#l01150">1150</a> of file <a class="el" href="../../d0/d6/almisc_8c-source.html">almisc.c</a>.
<p>
References <a class="el" href="../../d5/d5/memory_8c-source.html#l01113">AlAllocateHeap()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d2/d7/regtest_8c.html#a2">strlen()</a>.
<p>
<pre class="fragment"><div>01158                    :
01159 
01160     This routine combines to strings. It allocate a <span class="keyword">new</span> string
01161     to hold both strings.
01162 
01163 Arguments:
01164 
01165     pointer to combined <a class="code" href="../../d3/d3/dumpuser_8c.html#a14">path</a>. <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> <span class="keywordflow">if</span> failed to allocate.
01166 
01167 Return Value:
01168 
01169 
01170 --*/
01171 {
01172 
01173     PCHAR   szT;
01174 
01175     <span class="keywordflow">if</span> (szT = <a class="code" href="../../d4/d6/memory_8c.html#a22">AlAllocateHeap</a>(<a class="code" href="../../d2/d7/regtest_8c.html#a2">strlen</a>(szPath1) + <a class="code" href="../../d2/d7/regtest_8c.html#a2">strlen</a>(szPath2) + 1)) {
01176 
01177         strcpy(szT, szPath1);
01178         strcat(szT, szPath2);
01179         <span class="keywordflow">return</span>( szT );
01180 
01181     } <span class="keywordflow">else</span> {
01182 
01183         <span class="keywordflow">return</span> ( <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> );
01184 
01185     }
01186 
01187 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a27" doxytag="almisc.c::AlDisplayMenu" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOLEAN AlDisplayMenu           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">PVOID&nbsp;</td>
          <td class="mdname" nowrap> <em>MenuID</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOLEAN&nbsp;</td>
          <td class="mdname" nowrap> <em>PrintOnly</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>AssociatedDataOfDefaultChoice</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>ULONG *&nbsp;</td>
          <td class="mdname" nowrap> <em>AssociatedDataOfChoice</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>Row</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>MenuName</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/almisc_8c-source.html#l00740">740</a> of file <a class="el" href="../../d0/d6/almisc_8c-source.html">almisc.c</a>.
<p>
References <a class="el" href="../../d0/d6/almisc_8c-source.html#l00788">CommonMenuDisplay()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d9/d6/almisc_8c.html#a5">PMENUCOOKIE</a>.
<p>
Referenced by <a class="el" href="../../d0/d6/almisc_8c-source.html#l01025">AlGetMenuSelection()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00149">ChooseDisk()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00681">ConfigureSystemPartitions()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00573">DoMakePartitionSystemPartition()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00224">DoPartitionCreate()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00409">DoPartitionDelete()</a>, and <a class="el" href="../../d4/d8/arcinst_8c-source.html#l00090">main()</a>.
<p>
<pre class="fragment"><div>00748 {
00749     <span class="keywordflow">return</span>(<a class="code" href="../../d9/d6/almisc_8c.html#a18">CommonMenuDisplay</a>((<a class="code" href="../../d0/d9/struct__tagMENUCOOKIE.html">PMENUCOOKIE</a>)MenuID,
00750                              FALSE,
00751                              NULL,
00752                              ((<a class="code" href="../../d0/d9/struct__tagMENUCOOKIE.html">PMENUCOOKIE</a>)MenuID)-&gt;ItemCount,
00753                              PrintOnly,
00754                              AssociatedDataOfDefaultChoice,
00755                              AssociatedDataOfChoice,
00756                              MenuName,
00757                              Row
00758                             )
00759           );
00760 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a28" doxytag="almisc.c::AlDisplayStaticMenu" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOLEAN AlDisplayStaticMenu           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">PCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>Items</em>[], </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>ItemCount</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>DefaultChoice</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>Row</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>ULONG *&nbsp;</td>
          <td class="mdname" nowrap> <em>IndexOfChoice</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/almisc_8c-source.html#l00764">764</a> of file <a class="el" href="../../d0/d6/almisc_8c-source.html">almisc.c</a>.
<p>
References <a class="el" href="../../d0/d6/almisc_8c-source.html#l00788">CommonMenuDisplay()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
<pre class="fragment"><div>00771 {
00772     <span class="keywordflow">return</span>(<a class="code" href="../../d9/d6/almisc_8c.html#a18">CommonMenuDisplay</a>(NULL,
00773                              TRUE,
00774                              Items,
00775                              ItemCount,
00776                              FALSE,
00777                              DefaultChoice,
00778                              IndexOfChoice,
00779                              NULL,
00780                              Row
00781                             )
00782           );
00783 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a15" doxytag="almisc.c::AlFindNextMatchComponent" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOLEAN AlFindNextMatchComponent           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>EnvValue</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>MatchValue</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>StartComponent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PULONG MatchComponent&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/almisc_8c-source.html#l00361">361</a> of file <a class="el" href="../../d0/d6/almisc_8c-source.html">almisc.c</a>.
<p>
References <a class="el" href="../../d0/d6/almisc_8c-source.html#l00209">AlFreeEnvVarComponents()</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l00026">AlGetEnvVarComponents()</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l00303">AlpMatchComponent()</a>, <a class="el" href="../../d2/d8/arc_8h-source.html#l00040">ARC_STATUS</a>, <a class="el" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d2/d9/cmchek_8c-source.html#l00095">Index</a>, <a class="el" href="../../d3/d0/cttoken_8c-source.html#l00135">Status</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d8/d2/partit_8c-source.html#l00129">IsBootSelectionPartition()</a>.
<p>
<pre class="fragment"><div>00370                    :
00371 
00372     This routine compares each component of EnvValue, starting with
00373     StartComponent, until a match <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> found or there are no more components.
00374 
00375 Arguments:
00376 
00377     EnvValue - Supplies a pointer to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> environment variable value.
00378 
00379     MatchValue - Supplies a pointer to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> value to match.
00380 
00381     StartComponent - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> component number to start <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> match.
00382 
00383     MatchComponent - Supplies an optional pointer to a variable to receive
00384                      <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> number of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> component that matched.
00385 
00386 Return Value:
00387 
00388     If a match <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> found, <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a> <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> returned, otherwise <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a> <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> returned.
00389 
00390 --*/
00391 
00392 {
00393     <a class="code" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
00394     PCHAR *EnvVarComponents;
00395     ULONG NumComponents;
00396     ULONG <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>;
00397     BOOLEAN Match;
00398 
00399 
00400     <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d4/d9/arcinst_8h.html#a81">AlGetEnvVarComponents</a>(EnvValue, &amp;EnvVarComponents, &amp;NumComponents);
00401 
00402     <span class="keywordflow">if</span> (<a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> != <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>) {
00403         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00404     }
00405 
00406     Match = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00407     <span class="keywordflow">for</span> (<a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a> = StartComponent ; <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a> &lt; NumComponents ; <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>++ ) {
00408         <span class="keywordflow">if</span> (<a class="code" href="../../d9/d6/almisc_8c.html#a12">AlpMatchComponent</a>(EnvVarComponents[Index], MatchValue)) {
00409             Match = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00410             <span class="keywordflow">break</span>;
00411         }
00412     }
00413 
00414     <span class="keywordflow">if</span> (ARGUMENT_PRESENT(MatchComponent)) {
00415         *MatchComponent = <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>;
00416     }
00417 
00418     <a class="code" href="../../d4/d9/arcinst_8h.html#a82">AlFreeEnvVarComponents</a>(EnvVarComponents);
00419     <span class="keywordflow">return</span> Match;
00420 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a37" doxytag="almisc.c::AlFreeArray" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID AlFreeArray           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN BOOLEAN&nbsp;</td>
          <td class="mdname" nowrap> <em>fFreeArray</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PCHAR *&nbsp;</td>
          <td class="mdname" nowrap> <em>rgsz</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>csz</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/almisc_8c-source.html#l01190">1190</a> of file <a class="el" href="../../d0/d6/almisc_8c-source.html">almisc.c</a>.
<p>
References <a class="el" href="../../d5/d5/memory_8c-source.html#l01134">AlDeallocateHeap()</a>.
<p>
<pre class="fragment"><div>01198                    :
01199 
01200     This routine iterates through an array of pointers to strings freeing
01201     each string and finally <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> array itself.
01202 
01203 Arguments:
01204 
01205     fFreeArray - flag wither to free <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> array itself.
01206     rgsz - pointer to array of strings.
01207     csz - size of array.
01208 
01209 Return Value:
01210 
01211 
01212 --*/
01213 
01214 {
01215 
01216     ULONG   irgsz;
01217 
01218     <span class="keywordflow">if</span> (!csz) {
01219 
01220         <span class="keywordflow">return</span>;
01221 
01222     }
01223 
01224     <span class="keywordflow">for</span>( irgsz = 0; irgsz &lt; csz; irgsz++ ) {
01225 
01226         <span class="keywordflow">if</span> (rgsz[irgsz]) {
01227 
01228             <a class="code" href="../../d4/d6/memory_8c.html#a23">AlDeallocateHeap</a>(rgsz[irgsz]);
01229 
01230         } <span class="keywordflow">else</span> {
01231 
01232             <span class="keywordflow">break</span>;
01233 
01234         }
01235 
01236     }
01237     <span class="keywordflow">if</span> (fFreeArray) {
01238         <a class="code" href="../../d4/d6/memory_8c.html#a23">AlDeallocateHeap</a>( rgsz );
01239     }
01240 
01241 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a14" doxytag="almisc.c::AlFreeEnvVarComponents" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a> AlFreeEnvVarComponents           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PCHAR *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>EnvVarComponents</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/almisc_8c-source.html#l00209">209</a> of file <a class="el" href="../../d0/d6/almisc_8c-source.html">almisc.c</a>.
<p>
References <a class="el" href="../../d5/d5/memory_8c-source.html#l01134">AlDeallocateHeap()</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l00265">AlpFreeComponents()</a>, <a class="el" href="../../d2/d8/arc_8h-source.html#l00040">ARC_STATUS</a>, <a class="el" href="../../d2/d9/arccodes_8h.html#a24a3">EACCES</a>, <a class="el" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d3/d0/cttoken_8c-source.html#l00135">Status</a>.
<p>
Referenced by <a class="el" href="../../d0/d6/almisc_8c-source.html#l00361">AlFindNextMatchComponent()</a>.
<p>
<pre class="fragment"><div>00214                    :
00215 
00216     This routine frees up all <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> components in <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> ptr array and frees
00217     up <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> storage <span class="keywordflow">for</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> ptr array itself too
00218 
00219 Arguments:
00220 
00221     EnvVarComponents: <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> ptr to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> PCHAR * <a class="code" href="../../d6/d2/rtqkey_8c.html#a3">Buffer</a>
00222 
00223 Return Value:
00224 
00225     <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a> <span class="keywordflow">if</span> freeing successful
00226     <a class="code" href="../../d2/d9/arccodes_8h.html#a24a3">EACCES</a>   <span class="keywordflow">if</span> memory ptr invalid
00227 
00228 
00229 
00230 --*/
00231 
00232 
00233 {
00234     <a class="code" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
00235 
00236     <span class="comment">//</span>
00237     <span class="comment">// if the pointer is NULL just return success</span>
00238     <span class="comment">//</span>
00239     <span class="keywordflow">if</span> (EnvVarComponents == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00240         <span class="keywordflow">return</span> (<a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>);
00241     }
00242 
00243     <span class="comment">//</span>
00244     <span class="comment">// free all the components first, if error in freeing return</span>
00245     <span class="comment">//</span>
00246     <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d9/d6/almisc_8c.html#a11">AlpFreeComponents</a>(EnvVarComponents);
00247     <span class="keywordflow">if</span> (<a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> != <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>) {
00248         <span class="keywordflow">return</span> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
00249     }
00250 
00251     <span class="comment">//</span>
00252     <span class="comment">// free the component holder too</span>
00253     <span class="comment">//</span>
00254     <span class="keywordflow">if</span>( <a class="code" href="../../d4/d6/memory_8c.html#a23">AlDeallocateHeap</a>(EnvVarComponents) != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00255         <span class="keywordflow">return</span> (<a class="code" href="../../d2/d9/arccodes_8h.html#a24a3">EACCES</a>);
00256     }
00257     <span class="keywordflow">else</span> {
00258         <span class="keywordflow">return</span> (<a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>);
00259     }
00260 
00261 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a24" doxytag="almisc.c::AlFreeMenu" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID AlFreeMenu           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">PVOID&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>MenuID</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/almisc_8c-source.html#l00664">664</a> of file <a class="el" href="../../d0/d6/almisc_8c-source.html">almisc.c</a>.
<p>
References <a class="el" href="../../d5/d5/memory_8c-source.html#l01134">AlDeallocateHeap()</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l00577">_tagMENUCOOKIE::ItemCount</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l00578">_tagMENUCOOKIE::Items</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d9/d6/almisc_8c.html#a5">PMENUCOOKIE</a>, and <a class="el" href="../../d0/d6/almisc_8c-source.html#l00572">_tagMENUITEM::Text</a>.
<p>
Referenced by <a class="el" href="../../d0/d6/almisc_8c-source.html#l01025">AlGetMenuSelection()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00681">ConfigureSystemPartitions()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00573">DoMakePartitionSystemPartition()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00224">DoPartitionCreate()</a>, and <a class="el" href="../../d8/d2/partit_8c-source.html#l00409">DoPartitionDelete()</a>.
<p>
<pre class="fragment"><div>00667 {
00668     <a class="code" href="../../d0/d9/struct__tagMENUCOOKIE.html">PMENUCOOKIE</a> p = MenuID;
00669     ULONG       i;
00670 
00671     <span class="keywordflow">for</span>(i=0; i&lt;p-&gt;<a class="code" href="../../d0/d9/struct__tagMENUCOOKIE.html#o0">ItemCount</a>; i++) {
00672         <span class="keywordflow">if</span>(p-&gt;<a class="code" href="../../d0/d9/struct__tagMENUCOOKIE.html#o1">Items</a>[i].<a class="code" href="../../d1/d9/struct__tagMENUITEM.html#o0">Text</a> != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00673             <a class="code" href="../../d4/d6/memory_8c.html#a23">AlDeallocateHeap</a>(p-&gt;<a class="code" href="../../d0/d9/struct__tagMENUCOOKIE.html#o1">Items</a>[i].<a class="code" href="../../d1/d9/struct__tagMENUITEM.html#o0">Text</a>);
00674         }
00675     }
00676     <span class="keywordflow">if</span>(p-&gt;<a class="code" href="../../d0/d9/struct__tagMENUCOOKIE.html#o1">Items</a>) {
00677         <a class="code" href="../../d4/d6/memory_8c.html#a23">AlDeallocateHeap</a>(p-&gt;<a class="code" href="../../d0/d9/struct__tagMENUCOOKIE.html#o1">Items</a>);
00678     }
00679     <a class="code" href="../../d4/d6/memory_8c.html#a23">AlDeallocateHeap</a>(p);
00680 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a38" doxytag="almisc.c::AlGetBase" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a> AlGetBase           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>szPath</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PCHAR *&nbsp;</td>
          <td class="mdname" nowrap> <em>pszBase</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/almisc_8c-source.html#l01244">1244</a> of file <a class="el" href="../../d0/d6/almisc_8c-source.html">almisc.c</a>.
<p>
References <a class="el" href="../../d5/d5/memory_8c-source.html#l01134">AlDeallocateHeap()</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l01113">AlStrDup()</a>, <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00029">EBADSYNTAX</a>, <a class="el" href="../../d2/d9/arccodes_8h.html#a24a17">ENOMEM</a>, <a class="el" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>, and <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>.
<p>
<pre class="fragment"><div>01251                    :
01252 
01253 
01254     This routine strips <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> filename off a <a class="code" href="../../d3/d3/dumpuser_8c.html#a14">path</a>.
01255 
01256 Arguments:
01257 
01258     szPath - <a class="code" href="../../d3/d3/dumpuser_8c.html#a14">path</a> to strip.
01259 
01260 Return Value:
01261 
01262     pszBaseh - pointer to buffer holding <span class="keyword">new</span> base. (<span class="keyword">this</span> <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> a copy)
01263 
01264 --*/
01265 
01266 {
01267 
01268     PCHAR   szPathT;
01269 
01270     <span class="comment">//</span>
01271     <span class="comment">// Make local copy of szArcInstPath so we can alter it</span>
01272     <span class="comment">//</span>
01273     *pszBase = <a class="code" href="../../d4/d9/arcinst_8h.html#a104">AlStrDup</a>(szPath);
01274     <span class="keywordflow">if</span> ( *pszBase == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> ) {
01275 
01276         <span class="keywordflow">return</span>( <a class="code" href="../../d2/d9/arccodes_8h.html#a24a17">ENOMEM</a> );
01277     }
01278 
01279     <span class="comment">//</span>
01280     <span class="comment">// The start of the path part should be either a \ or a ) where</span>
01281     <span class="comment">// ) is the end of the arc name</span>
01282     <span class="comment">//</span>
01283     <span class="keywordflow">if</span> ((szPathT = strrchr(*pszBase,<span class="charliteral">'\\'</span>)) == 0) {
01284         <span class="keywordflow">if</span> ((szPathT = strrchr(*pszBase, <span class="charliteral">')'</span>)) == 0) {
01285 
01286             <a class="code" href="../../d4/d6/memory_8c.html#a23">AlDeallocateHeap</a>(*pszBase);
01287             <span class="keywordflow">return</span>( <a class="code" href="../../d4/d9/arcinst_8h.html#a11">EBADSYNTAX</a> );
01288         }
01289     }
01290 
01291 
01292     <span class="comment">//</span>
01293     <span class="comment">// Cut filename out</span>
01294     <span class="comment">//</span>
01295     <span class="comment">// szPath points to either ')' or '\' so need to move over that</span>
01296     <span class="comment">// onto actual name</span>
01297     <span class="comment">//</span>
01298     *(szPathT + 1) = 0;
01299     <span class="keywordflow">return</span>( <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a> );
01300 
01301 
01302 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a13" doxytag="almisc.c::AlGetEnvVarComponents" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a> AlGetEnvVarComponents           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>EnvValue</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PCHAR **&nbsp;</td>
          <td class="mdname" nowrap> <em>EnvVarComponents</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>PNumComponents</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/almisc_8c-source.html#l00026">26</a> of file <a class="el" href="../../d0/d6/almisc_8c-source.html">almisc.c</a>.
<p>
References <a class="el" href="../../d5/d5/memory_8c-source.html#l01113">AlAllocateHeap()</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l00265">AlpFreeComponents()</a>, <a class="el" href="../../d2/d9/arccodes_8h.html#a24a3">EACCES</a>, <a class="el" href="../../d2/d9/arccodes_8h.html#a24a17">ENOMEM</a>, <a class="el" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>, <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00031">MAX_COMPONENTS</a>, and <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>.
<p>
Referenced by <a class="el" href="../../d0/d6/almisc_8c-source.html#l00361">AlFindNextMatchComponent()</a>.
<p>
<pre class="fragment"><div>00034                    :
00035 
00036     This routine takes an environment variable string and turns <a class="code" href="../../d1/d9/icmui_8def.html#a4">it</a> into
00037     <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> constituent value strings:
00038 
00039     Example EnvValue = <span class="stringliteral">"Value1;Value2;Value3"</span> <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> turned into:
00040 
00041     <span class="stringliteral">"Value1"</span>, <span class="stringliteral">"Value2"</span>, <span class="stringliteral">"Value3"</span>
00042 
00043     The following are valid value strings:
00044 
00045     1. <span class="stringliteral">"     "</span>                                      :one null value <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> found
00046     2. <span class="stringliteral">";;;;    "</span>                                   :five null values are found
00047     3. <span class="stringliteral">" ;Value1    ;   Value2;Value3;;;;;;;   ;"</span>   :12 value strings are found,
00048                                                     :9 of which are null
00049 
00050     If an invalid component (contains embedded white space) <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> found in <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a>
00051     string then <span class="keyword">this</span> routine attempts to resynch to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> next value, no error
00052     <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> returned, and a <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> first part of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> invalid value <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> returned <span class="keywordflow">for</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a>
00053     bad component.
00054 
00055     1.  <span class="stringliteral">"    Value1;Bad   Value2; Value3"</span>           : 2 value strings are found
00056 
00057     The value strings returned suppress all whitespace before and after <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a>
00058     value.
00059 
00060 
00061 Arguments:
00062 
00063     EnvValue:  ptr to zero terminated environment value string
00064 
00065     EnvVarComponents: ptr to a PCHAR * variable to receive <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> buffer of
00066                       ptrs to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> constituent value strings.
00067 
00068     PNumComponents: ptr to a ULONG to receive <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> number of value strings found
00069 
00070 Return Value:
00071 
00072     The function returns <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> following error codes:
00073          <a class="code" href="../../d2/d9/arccodes_8h.html#a24a3">EACCES</a> <span class="keywordflow">if</span> EnvValue <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>
00074          <a class="code" href="../../d2/d9/arccodes_8h.html#a24a17">ENOMEM</a> <span class="keywordflow">if</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> memory allocation fails
00075 
00076 
00077     The function returns <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> following success codes:
00078          <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>.
00079 
00080     When <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> function returns <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>:
00081          - *PNumComponent field gets <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> number of value strings found
00082          - <span class="keywordflow">if</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> number <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> non zero <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> *EnvVarComponents field gets <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a>
00083            ptr to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> buffer containing ptrs to value strings
00084 
00085 --*/
00086 
00087 
00088 {
00089     PCHAR pchStart, pchEnd, pchNext;
00090     PCHAR pchComponents[<a class="code" href="../../d4/d9/arcinst_8h.html#a12">MAX_COMPONENTS</a> + 1];
00091     ULONG NumComponents, i;
00092     PCHAR pch;
00093     ULONG size;
00094 
00095     <span class="comment">//</span>
00096     <span class="comment">// Validate the EnvValue</span>
00097     <span class="comment">//</span>
00098     <span class="keywordflow">if</span> (EnvValue == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00099         <span class="keywordflow">return</span> (<a class="code" href="../../d2/d9/arccodes_8h.html#a24a3">EACCES</a>);
00100     }
00101 
00102     <span class="comment">//</span>
00103     <span class="comment">// Initialise the ptr array with nulls</span>
00104     <span class="comment">//</span>
00105     <span class="keywordflow">for</span> (i = 0; i &lt; (<a class="code" href="../../d4/d9/arcinst_8h.html#a12">MAX_COMPONENTS</a>+1); i++) {
00106         pchComponents[i] = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00107     }
00108 
00109     <span class="comment">//</span>
00110     <span class="comment">// Initialise ptrs to search components</span>
00111     <span class="comment">//</span>
00112     pchStart      = EnvValue;
00113     NumComponents = 0;
00114 
00115 
00116     <span class="comment">//</span>
00117     <span class="comment">// search till either pchStart reaches the end or till max components</span>
00118     <span class="comment">// is reached, the below has been programmed from a dfsa.</span>
00119     <span class="comment">//</span>
00120     <span class="keywordflow">while</span> (*pchStart &amp;&amp; NumComponents &lt; <a class="code" href="../../d4/d9/arcinst_8h.html#a12">MAX_COMPONENTS</a>) {
00121 
00122         <span class="comment">//</span>
00123         <span class="comment">// STATE 1: find the beginning of next variable value</span>
00124         <span class="comment">//</span>
00125         <span class="keywordflow">while</span> (*pchStart!=0 &amp;&amp; isspace(*pchStart)) {
00126             pchStart++;
00127         }
00128 
00129 
00130         <span class="keywordflow">if</span> (*pchStart == 0) {
00131             <span class="keywordflow">break</span>;
00132         }
00133 
00134         <span class="comment">//</span>
00135         <span class="comment">// STATE 2: In the midst of a value</span>
00136         <span class="comment">//</span>
00137         pchEnd = pchStart;
00138         <span class="keywordflow">while</span> (*pchEnd!=0 &amp;&amp; !isspace(*pchEnd) &amp;&amp; *pchEnd!=<span class="charliteral">';'</span>) {
00139             pchEnd++;
00140         }
00141 
00142         <span class="comment">//</span>
00143         <span class="comment">// STATE 3: spit out the value found</span>
00144         <span class="comment">//</span>
00145 
00146         size = pchEnd - pchStart;
00147         <span class="keywordflow">if</span> ((pch = <a class="code" href="../../d4/d6/memory_8c.html#a22">AlAllocateHeap</a>(size+1)) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00148             <a class="code" href="../../d9/d6/almisc_8c.html#a11">AlpFreeComponents</a>(pchComponents);
00149             <span class="keywordflow">return</span> (<a class="code" href="../../d2/d9/arccodes_8h.html#a24a17">ENOMEM</a>);
00150         }
00151         strncpy (pch, pchStart, size);
00152         pch[size]=0;
00153         pchComponents[NumComponents++]=pch;
00154 
00155         <span class="comment">//</span>
00156         <span class="comment">// STATE 4: variable value end has been reached, find the beginning</span>
00157         <span class="comment">// of the next value</span>
00158         <span class="comment">//</span>
00159         <span class="keywordflow">if</span> ((pchNext = strchr(pchEnd, <span class="charliteral">';'</span>)) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00160             <span class="keywordflow">break</span>; <span class="comment">// out of the big while loop because we are done</span>
00161         }
00162 
00163         <span class="comment">//</span>
00164         <span class="comment">// Advance beyond the semicolon.</span>
00165         <span class="comment">//</span>
00166 
00167         pchNext++;
00168 
00169         <span class="comment">//</span>
00170         <span class="comment">// reinitialise to begin STATE 1</span>
00171         <span class="comment">//</span>
00172         pchStart = pchNext;
00173 
00174     } <span class="comment">// end while.</span>
00175 
00176     <span class="comment">//</span>
00177     <span class="comment">// Get memory to hold an environment pointer and return that</span>
00178     <span class="comment">//</span>
00179 
00180     <span class="keywordflow">if</span> ( NumComponents!=0 ) {
00181         PCHAR *pch;
00182 
00183         <span class="keywordflow">if</span> ((pch = (PCHAR *)<a class="code" href="../../d4/d6/memory_8c.html#a22">AlAllocateHeap</a>((NumComponents+1)*<span class="keyword">sizeof</span>(PCHAR))) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00184             <a class="code" href="../../d9/d6/almisc_8c.html#a11">AlpFreeComponents</a>(pchComponents);
00185             <span class="keywordflow">return</span> (<a class="code" href="../../d2/d9/arccodes_8h.html#a24a17">ENOMEM</a>);
00186         }
00187 
00188         <span class="comment">//</span>
00189         <span class="comment">// the last one is NULL because we initialised the array with NULLs</span>
00190         <span class="comment">//</span>
00191 
00192         <span class="keywordflow">for</span> ( i = 0; i &lt;= NumComponents; i++) {
00193             pch[i] = pchComponents[i];
00194         }
00195 
00196 
00197         *EnvVarComponents = pch;
00198     }
00199 
00200     <span class="comment">//</span>
00201     <span class="comment">// Update the number of elements field and return success</span>
00202     <span class="comment">//</span>
00203     *PNumComponents = NumComponents;
00204     <span class="keywordflow">return</span> (<a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>);
00205 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a22" doxytag="almisc.c::AlGetMenuAssociatedData" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ULONG AlGetMenuAssociatedData           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">PVOID&nbsp;</td>
          <td class="mdname" nowrap> <em>MenuID</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>n</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/almisc_8c-source.html#l00638">638</a> of file <a class="el" href="../../d0/d6/almisc_8c-source.html">almisc.c</a>.
<p>
References <a class="el" href="../../d8/d9/exts_8h-source.html#l00092">n</a>, and <a class="el" href="../../d9/d6/almisc_8c.html#a5">PMENUCOOKIE</a>.
<p>
<pre class="fragment"><div>00642 {
00643     <span class="keywordflow">return</span>(((<a class="code" href="../../d0/d9/struct__tagMENUCOOKIE.html">PMENUCOOKIE</a>)MenuID)-&gt;Items[<a class="code" href="../../d7/d0/exts_8h.html#a0">n</a>].AssociatedData);
00644 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a21" doxytag="almisc.c::AlGetMenuNumberItems" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ULONG AlGetMenuNumberItems           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">PVOID&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>MenuID</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/almisc_8c-source.html#l00629">629</a> of file <a class="el" href="../../d0/d6/almisc_8c-source.html">almisc.c</a>.
<p>
References <a class="el" href="../../d9/d6/almisc_8c.html#a5">PMENUCOOKIE</a>.
<p>
Referenced by <a class="el" href="../../d0/d6/almisc_8c-source.html#l00720">AlAddMenuItems()</a>.
<p>
<pre class="fragment"><div>00632 {
00633     <span class="keywordflow">return</span>(((<a class="code" href="../../d0/d9/struct__tagMENUCOOKIE.html">PMENUCOOKIE</a>)MenuID)-&gt;ItemCount);
00634 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a34" doxytag="almisc.c::AlGetMenuSelection" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a> AlGetMenuSelection           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>szTitle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PCHAR *&nbsp;</td>
          <td class="mdname" nowrap> <em>rgszSelections</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>crgsz</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>crow</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>irgszDefault</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>pirgsz</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PCHAR *&nbsp;</td>
          <td class="mdname" nowrap> <em>pszSelection</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/almisc_8c-source.html#l01025">1025</a> of file <a class="el" href="../../d0/d6/almisc_8c-source.html">almisc.c</a>.
<p>
References <a class="el" href="../../d0/d6/almisc_8c-source.html#l00720">AlAddMenuItems()</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l00740">AlDisplayMenu()</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l00664">AlFreeMenu()</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l00647">AlNewMenu()</a>, <a class="el" href="../../d2/d9/arccodes_8h.html#a24a17">ENOMEM</a>, <a class="el" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d6/d5/ntcon_2conime_2globals_8h-source.html#l00024">szTitle</a>.
<p>
<pre class="fragment"><div>01037                    :
01038 
01039     This routine takes an array of strings, turns them into a menu
01040     and gets a selection. If ESC hit then <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a> <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> returned with
01041     <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> *pszSelection <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>.
01042 
01043     crgsz <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> assume to be 1 or greater.
01044 
01045 
01046 Arguments:
01047 
01048     <a class="code" href="../../d5/d6/ntcon_2conime_2globals_8h.html#a2">szTitle</a> - Pointer to menu title to pass to <a class="code" href="../../d9/d6/almisc_8c.html#a27">AlDisplayMenu</a>
01049     prgszSelection - pointer to an array of strings <span class="keywordflow">for</span> menu
01050     crgsz - count of strings
01051     irgszDefault - index in rgszSelection to use as <span class="keywordflow">default</span> selection
01052 
01053 Return Value:
01054 
01055     irgsz - index to selection
01056     pszSelection - pointer <span class="keywordtype">int</span> rgszSelection <span class="keywordflow">for</span> selection. Note that
01057                    <span class="keyword">this</span> <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> not a dup and should not be freed seperately
01058                    then rgszSelections.
01059 
01060     Note: <span class="keywordflow">if</span> <a class="code" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a> == <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a> and pszSelection == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> then <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a>
01061           menu was successfully displayed but <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> user hit ESC to select
01062           nothing from <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> menu.
01063 
01064 --*/
01065 
01066 
01067 {
01068 
01069     PVOID  hdMenuId;
01070 
01071     *pszSelection = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
01072     <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d9/arcinst_8h.html#a91">AlNewMenu</a>(&amp;hdMenuId)) {
01073 
01074         <span class="keywordflow">return</span>( <a class="code" href="../../d2/d9/arccodes_8h.html#a24a17">ENOMEM</a> );
01075 
01076     }
01077 
01078     <span class="comment">//</span>
01079     <span class="comment">// BUGBUG for now 1 selection will also build a menu, in the</span>
01080     <span class="comment">// future once this is working we should just return that selection</span>
01081     <span class="comment">//</span>
01082 
01083     <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d9/arcinst_8h.html#a94">AlAddMenuItems</a>(hdMenuId, rgszSelections, crgsz)) {
01084 
01085         <a class="code" href="../../d4/d9/arcinst_8h.html#a92">AlFreeMenu</a>(hdMenuId);
01086         <span class="keywordflow">return</span>( <a class="code" href="../../d2/d9/arccodes_8h.html#a24a17">ENOMEM</a> );
01087 
01088     }
01089 
01090     <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d9/arcinst_8h.html#a95">AlDisplayMenu</a>(hdMenuId,
01091                        FALSE,
01092                        irgszDefault,
01093                        pirgsz,
01094                        crow,
01095                        szTitle)) {
01096 
01097         <span class="comment">//</span>
01098         <span class="comment">// User did not pick a system partition. return NULL</span>
01099         <span class="comment">// can caller should abort</span>
01100         <span class="comment">//</span>
01101         <a class="code" href="../../d4/d9/arcinst_8h.html#a92">AlFreeMenu</a>(hdMenuId);
01102         <span class="keywordflow">return</span>( <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a> );
01103 
01104     }
01105 
01106     <a class="code" href="../../d4/d9/arcinst_8h.html#a92">AlFreeMenu</a>(hdMenuId);
01107     *pszSelection = rgszSelections[*pirgsz];
01108     <span class="keywordflow">return</span>( <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a> );
01109 
01110 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a39" doxytag="almisc.c::AlGetNextArcNamToken" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> PCHAR AlGetNextArcNamToken           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>TokenString</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>OutputToken</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>UnitNumber</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/almisc_8c-source.html#l01318">1318</a> of file <a class="el" href="../../d0/d6/almisc_8c-source.html">almisc.c</a>.
<p>
References <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>.
<p>
Referenced by <a class="el" href="../../d8/d2/partit_8c-source.html#l00149">ChooseDisk()</a>.
<p>
<pre class="fragment"><div>01326                    :
01327 
01328     This routine scans <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> specified token string <span class="keywordflow">for</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> next token and
01329     unit number. The token <a class="code" href="../../d8/d0/rtbatcr_8c.html#a8">format</a> <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a>:
01330 
01331         name[(unit)]
01332 
01333 Arguments:
01334 
01335     TokenString - Supplies a pointer to a zero terminated token string.
01336 
01337     OutputToken - Supplies a pointer to a variable that receives <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> next
01338         token.
01339 
01340     UnitNumber - Supplies a pointer to a variable that receives <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> unit
01341         number.
01342 
01343 Return Value:
01344 
01345     If another token exists in <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> token string, then a pointer to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a>
01346     start of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> next token <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> returned. Otherwise, a value of <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a>
01347     returned.
01348 
01349 --*/
01350 
01351 {
01352 
01353     <span class="comment">//</span>
01354     <span class="comment">// If there are more characters in the token string, then parse the</span>
01355     <span class="comment">// next token. Otherwise, return a value of NULL.</span>
01356     <span class="comment">//</span>
01357 
01358     <span class="keywordflow">if</span> (*TokenString == <span class="charliteral">'\0'</span>) {
01359         <span class="keywordflow">return</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
01360 
01361     } <span class="keywordflow">else</span> {
01362         <span class="keywordflow">while</span> ((*TokenString != <span class="charliteral">'\0'</span>) &amp;&amp; (*TokenString != <span class="charliteral">'('</span>)) {
01363             *OutputToken++ = *TokenString++;
01364         }
01365 
01366         *OutputToken = <span class="charliteral">'\0'</span>;
01367 
01368         <span class="comment">//</span>
01369         <span class="comment">// If a unit number is specified, then convert it to binary.</span>
01370         <span class="comment">// Otherwise, default the unit number to zero.</span>
01371         <span class="comment">//</span>
01372 
01373         *UnitNumber = 0;
01374         <span class="keywordflow">if</span> (*TokenString == <span class="charliteral">'('</span>) {
01375             TokenString += 1;
01376             <span class="keywordflow">while</span> ((*TokenString != <span class="charliteral">'\0'</span>) &amp;&amp; (*TokenString != <span class="charliteral">')'</span>)) {
01377                 *UnitNumber = (*UnitNumber * 10) + (*TokenString++ - <span class="charliteral">'0'</span>);
01378             }
01379 
01380             <span class="keywordflow">if</span> (*TokenString == <span class="charliteral">')'</span>) {
01381                 TokenString += 1;
01382             }
01383         }
01384     }
01385 
01386     <span class="keywordflow">return</span> TokenString;
01387 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a42" doxytag="almisc.c::AlGetString" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOLEAN AlGetString           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">OUT PCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>String</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>StringLength</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/almisc_8c-source.html#l01508">1508</a> of file <a class="el" href="../../d0/d6/almisc_8c-source.html">almisc.c</a>.
<p>
References <a class="el" href="../../d2/d8/arc_8h-source.html#l00033">ARC_CONSOLE_INPUT</a>, <a class="el" href="../../d2/d8/arc_8h-source.html#l00034">ARC_CONSOLE_OUTPUT</a>, <a class="el" href="../../d2/d8/arc_8h-source.html#l01530">ArcRead</a>, <a class="el" href="../../d2/d8/arc_8h-source.html#l01538">ArcWrite</a>, <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00023">ASCI_ESC</a>, <a class="el" href="../../d7/d1/rtqkey_8c-source.html#l00042">Buffer</a>, <a class="el" href="../../d4/d9/user32_8def-source.html#l00799">c</a>, <a class="el" href="../../d2/d0/bench_8c-source.html#l00050">CHAR</a>, <a class="el" href="../../d5/d9/cmconfig_8c-source.html#l00051">Count</a>, <a class="el" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d5/d8/talloc_8c-source.html#l00027">String</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00449">StringLength()</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d0/d6/almisc_8c-source.html#l00934">AlWaitKey()</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l00788">CommonMenuDisplay()</a>, and <a class="el" href="../../d8/d2/partit_8c-source.html#l00224">DoPartitionCreate()</a>.
<p>
<pre class="fragment"><div>01515                    :
01516 
01517     This routine reads a string from standardin until a
01518     carriage <span class="keywordflow">return</span> or escape <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> found or <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a1158">StringLength</a> <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> reached.
01519 
01520 Arguments:
01521 
01522     <a class="code" href="../../d4/d9/talloc_8c.html#a0">String</a> - Supplies a pointer to where <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> string will be stored.
01523 
01524     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a1158">StringLength</a> - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> <a class="code" href="../../d3/d8/udfprocs_8h.html#a4">Max</a> Length to read.
01525 
01526 Return Value:
01527 
01528     <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a> <span class="keywordflow">if</span> user pressed esc, <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a> otherwise.
01529 
01530 --*/
01531 
01532 {
01533     <a class="code" href="../../d1/d1/bench_8c.html#a16">CHAR</a>    <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a35">c</a>;
01534     ULONG   <a class="code" href="../../d4/d0/cmconfig_8c.html#a6">Count</a>;
01535     PCHAR   <a class="code" href="../../d6/d2/rtqkey_8c.html#a3">Buffer</a>;
01536 
01537     <a class="code" href="../../d6/d2/rtqkey_8c.html#a3">Buffer</a> = <a class="code" href="../../d4/d9/talloc_8c.html#a0">String</a>;
01538     <span class="keywordflow">while</span> (<a class="code" href="../../d1/d9/arc_8h.html#a33">ArcRead</a>(ARC_CONSOLE_INPUT,&amp;c,1,&amp;Count)==<a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>) {
01539         <span class="keywordflow">if</span>(<a class="code" href="../../d2/d0/nt6_2user32_8def.html#a35">c</a> == <a class="code" href="../../d4/d9/arcinst_8h.html#a9">ASCI_ESC</a>) {
01540             <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
01541         }
01542         <span class="keywordflow">if</span> ((<a class="code" href="../../d2/d0/nt6_2user32_8def.html#a35">c</a>==<span class="charliteral">'\r'</span>) || (<a class="code" href="../../d2/d0/nt6_2user32_8def.html#a35">c</a>==<span class="charliteral">'\n'</span>) || ((ULONG)(<a class="code" href="../../d6/d2/rtqkey_8c.html#a3">Buffer</a>-<a class="code" href="../../d4/d9/talloc_8c.html#a0">String</a>) == <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a1158">StringLength</a>)) {
01543             *<a class="code" href="../../d6/d2/rtqkey_8c.html#a3">Buffer</a>=<span class="charliteral">'\0'</span>;
01544             <a class="code" href="../../d1/d9/arc_8h.html#a35">ArcWrite</a>(ARC_CONSOLE_OUTPUT,<span class="stringliteral">"\r\n"</span>,2,&amp;Count);
01545             <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
01546         }
01547         <span class="comment">//</span>
01548         <span class="comment">// Check for backspace;</span>
01549         <span class="comment">//</span>
01550         <span class="keywordflow">if</span> (<a class="code" href="../../d2/d0/nt6_2user32_8def.html#a35">c</a>==<span class="charliteral">'\b'</span>) {
01551             <span class="keywordflow">if</span> (((ULONG)<a class="code" href="../../d6/d2/rtqkey_8c.html#a3">Buffer</a> &gt; (ULONG)<a class="code" href="../../d4/d9/talloc_8c.html#a0">String</a>)) {
01552                 <a class="code" href="../../d6/d2/rtqkey_8c.html#a3">Buffer</a>--;
01553                 <a class="code" href="../../d1/d9/arc_8h.html#a35">ArcWrite</a>(ARC_CONSOLE_OUTPUT,<span class="stringliteral">"\b \b"</span>,3,&amp;Count);
01554             }
01555         } <span class="keywordflow">else</span> {
01556             <span class="comment">//</span>
01557             <span class="comment">// If it's a printable char store it and display it.</span>
01558             <span class="comment">//</span>
01559             <span class="keywordflow">if</span> (isprint(c)) {
01560                 *<a class="code" href="../../d6/d2/rtqkey_8c.html#a3">Buffer</a>++ = <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a35">c</a>;
01561                 <a class="code" href="../../d1/d9/arc_8h.html#a35">ArcWrite</a>(ARC_CONSOLE_OUTPUT,&amp;c,1,&amp;Count);
01562             }
01563         }
01564     }
01565 }
}
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a20" doxytag="almisc.c::AlInitializeMenuPackage" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOLEAN AlInitializeMenuPackage           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">VOID&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/almisc_8c-source.html#l00620">620</a> of file <a class="el" href="../../d0/d6/almisc_8c-source.html">almisc.c</a>.
<p>
References <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d4/d8/arcinst_8c-source.html#l00090">main()</a>.
<p>
<pre class="fragment"><div>00623 {
00624     <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
00625 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a40" doxytag="almisc.c::AlMatchArcNamToken" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ULONG AlMatchArcNamToken           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>TokenValue</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN TOKEN_TYPE&nbsp;</td>
          <td class="mdname" nowrap> <em>TokenType</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/almisc_8c-source.html#l01391">1391</a> of file <a class="el" href="../../d0/d6/almisc_8c-source.html">almisc.c</a>.
<p>
References <a class="el" href="../../d0/d6/almisc_8c-source.html#l01309">AdapterTypes</a>, <a class="el" href="../../d4/d9/arcinst_8h.html#a174a65">ControllerType</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l01311">ControllerTypes</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d2/d9/cmchek_8c-source.html#l00095">Index</a>, <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00248">INVALID_TOKEN_TYPE</a>, <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00249">INVALID_TOKEN_VALUE</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d4/d9/arcinst_8h.html#a174a66">PeripheralType</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l01313">PeripheralTypes</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
<pre class="fragment"><div>01398                    :
01399 
01400     This routine attempts to match a token with an array of possible
01401     values.
01402 
01403 Arguments:
01404 
01405     TokenValue - Supplies a pointer to a zero terminated token value.
01406 
01407     TokenType  - Indicates which <a class="code" href="../../d3/d5/i386_2trapc_8c.html#a9">type</a> of token we are dealing with
01408                  (AdapterType/<a class="code" href="../../d4/d9/arcinst_8h.html#a174a65">ControllerType</a>/<a class="code" href="../../d4/d9/arcinst_8h.html#a174a66">PeripheralType</a>)
01409 
01410 Return Value:
01411 
01412     If <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> token <a class="code" href="../../d3/d5/i386_2trapc_8c.html#a9">type</a> <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> invalid, <a class="code" href="../../d4/d9/arcinst_8h.html#a13">INVALID_TOKEN_TYPE</a> <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> returned.
01413 
01414     If a token match <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> not located, then a value <a class="code" href="../../d4/d9/arcinst_8h.html#a14">INVALID_TOKEN_VALUE</a>
01415     <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> returned.
01416 
01417     If a token match <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> located, then <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> ENUM value of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> token <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a>
01418     returned.
01419 
01420 --*/
01421 
01422 {
01423 
01424     ULONG   <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>;
01425     PCHAR   MatchString;
01426     PCHAR   TokenString;
01427     PCHAR   *TokenArray;
01428     BOOLEAN Found;
01429 
01430     <span class="comment">//</span>
01431     <span class="comment">// Depending on token type choose the appropriate token string array</span>
01432     <span class="comment">//</span>
01433     <span class="keywordflow">switch</span> (TokenType) {
01434         <span class="keywordflow">case</span> AdapterType:
01435             TokenArray = <a class="code" href="../../d9/d6/almisc_8c.html#a8">AdapterTypes</a>;
01436             <span class="keywordflow">break</span>;
01437 
01438         <span class="keywordflow">case</span> <a class="code" href="../../d4/d9/arcinst_8h.html#a174a65">ControllerType</a>:
01439             TokenArray =  <a class="code" href="../../d9/d6/almisc_8c.html#a9">ControllerTypes</a>;
01440             <span class="keywordflow">break</span>;
01441 
01442         <span class="keywordflow">case</span> <a class="code" href="../../d4/d9/arcinst_8h.html#a174a66">PeripheralType</a>:
01443             TokenArray = <a class="code" href="../../d9/d6/almisc_8c.html#a10">PeripheralTypes</a>;
01444             <span class="keywordflow">break</span>;
01445 
01446         <span class="keywordflow">default</span>:
01447             <span class="keywordflow">return</span> ((ULONG)<a class="code" href="../../d4/d9/arcinst_8h.html#a13">INVALID_TOKEN_TYPE</a>);
01448     }
01449 
01450     <span class="comment">//</span>
01451     <span class="comment">// Scan the match array until either a match is found or all of</span>
01452     <span class="comment">// the match strings have been scanned.</span>
01453     <span class="comment">//</span>
01454     <span class="comment">// BUGBUG** The code below can be easily implemented using _strcmpi.</span>
01455     <span class="comment">//</span>
01456 
01457     <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a> = 0;
01458     Found = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01459     <span class="keywordflow">while</span> (TokenArray[<a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>] != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01460         MatchString = TokenArray[<a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>];
01461         TokenString = TokenValue;
01462         <span class="keywordflow">while</span> ((*MatchString != <span class="charliteral">'\0'</span>) &amp;&amp; (*TokenString != <span class="charliteral">'\0'</span>)) {
01463             <span class="keywordflow">if</span> (toupper(*MatchString) != toupper(*TokenString)) {
01464                 <span class="keywordflow">break</span>;
01465             }
01466 
01467             MatchString += 1;
01468             TokenString += 1;
01469         }
01470 
01471         <span class="keywordflow">if</span> ((*MatchString == <span class="charliteral">'\0'</span>) &amp;&amp; (*TokenString == <span class="charliteral">'\0'</span>)) {
01472             Found = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01473             <span class="keywordflow">break</span>;
01474         }
01475 
01476         <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a> += 1;
01477     }
01478 
01479     <span class="keywordflow">return</span> (Found ? <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a> : <a class="code" href="../../d4/d9/arcinst_8h.html#a14">INVALID_TOKEN_VALUE</a>);
01480 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a23" doxytag="almisc.c::AlNewMenu" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOLEAN AlNewMenu           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">PVOID *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>MenuID</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/almisc_8c-source.html#l00647">647</a> of file <a class="el" href="../../d0/d6/almisc_8c-source.html">almisc.c</a>.
<p>
References <a class="el" href="../../d5/d5/memory_8c-source.html#l01113">AlAllocateHeap()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l00577">_tagMENUCOOKIE::ItemCount</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l00578">_tagMENUCOOKIE::Items</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d9/d6/almisc_8c.html#a5">PMENUCOOKIE</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d0/d6/almisc_8c-source.html#l01025">AlGetMenuSelection()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00149">ChooseDisk()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00681">ConfigureSystemPartitions()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00573">DoMakePartitionSystemPartition()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00224">DoPartitionCreate()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00409">DoPartitionDelete()</a>, and <a class="el" href="../../d4/d8/arcinst_8c-source.html#l00090">main()</a>.
<p>
<pre class="fragment"><div>00650 {
00651     <a class="code" href="../../d0/d9/struct__tagMENUCOOKIE.html">PMENUCOOKIE</a> p;
00652 
00653     <span class="keywordflow">if</span>(!(p = <a class="code" href="../../d4/d6/memory_8c.html#a22">AlAllocateHeap</a>(<span class="keyword">sizeof</span>(<a class="code" href="../../d0/d9/struct__tagMENUCOOKIE.html">MENUCOOKIE</a>)))) {
00654         <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00655     }
00656     p-&gt;<a class="code" href="../../d0/d9/struct__tagMENUCOOKIE.html#o0">ItemCount</a> = 0;
00657     p-&gt;<a class="code" href="../../d0/d9/struct__tagMENUCOOKIE.html#o1">Items</a> = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00658     *MenuID = p;
00659     <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
00660 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a11" doxytag="almisc.c::AlpFreeComponents" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a> AlpFreeComponents           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PCHAR *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>EnvVarComponents</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/almisc_8c-source.html#l00265">265</a> of file <a class="el" href="../../d0/d6/almisc_8c-source.html">almisc.c</a>.
<p>
References <a class="el" href="../../d5/d5/memory_8c-source.html#l01134">AlDeallocateHeap()</a>, <a class="el" href="../../d2/d9/arccodes_8h.html#a24a3">EACCES</a>, <a class="el" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>, and <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>.
<p>
Referenced by <a class="el" href="../../d0/d6/almisc_8c-source.html#l00209">AlFreeEnvVarComponents()</a>, and <a class="el" href="../../d0/d6/almisc_8c-source.html#l00026">AlGetEnvVarComponents()</a>.
<p>
<pre class="fragment"><div>00271                    :
00272 
00273    This routine frees up <a class="code" href="../../d3/d0/imm32_8def.html#a1">only</a> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> components in <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> ptr array, but doesn'<a class="code" href="../../d4/d1/genmips_8c.html#a17">t</a>
00274    free <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> ptr array storage itself.
00275 
00276 Arguments:
00277 
00278     EnvVarComponents: <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> ptr to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> PCHAR * <a class="code" href="../../d6/d2/rtqkey_8c.html#a3">Buffer</a>
00279 
00280 Return Value:
00281 
00282     <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a> <span class="keywordflow">if</span> freeing successful
00283     <a class="code" href="../../d2/d9/arccodes_8h.html#a24a3">EACCES</a>   <span class="keywordflow">if</span> memory ptr invalid
00284 
00285 --*/
00286 
00287 {
00288 
00289     <span class="comment">//</span>
00290     <span class="comment">// get all the components and free them</span>
00291     <span class="comment">//</span>
00292     <span class="keywordflow">while</span> (*EnvVarComponents != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00293         <span class="keywordflow">if</span>(<a class="code" href="../../d4/d6/memory_8c.html#a23">AlDeallocateHeap</a>(*EnvVarComponents++) != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00294             <span class="keywordflow">return</span>(<a class="code" href="../../d2/d9/arccodes_8h.html#a24a3">EACCES</a>);
00295         }
00296     }
00297 
00298     <span class="keywordflow">return</span>(<a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>);
00299 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a12" doxytag="almisc.c::AlpMatchComponent" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOLEAN AlpMatchComponent           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>Value1</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>Value2</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/almisc_8c-source.html#l00303">303</a> of file <a class="el" href="../../d0/d6/almisc_8c-source.html">almisc.c</a>.
<p>
References <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d0/d6/almisc_8c-source.html#l00361">AlFindNextMatchComponent()</a>.
<p>
<pre class="fragment"><div>00310                    :
00311 
00312     This routine compares two components to see <span class="keywordflow">if</span> they are equal.  This <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a>
00313     essentially comparing strings except that leading zeros are stripped from
00314     key values.
00315 
00316 Arguments:
00317 
00318     Value1 - Supplies a pointer to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> first value to match.
00319 
00320     Value2 - Supplies a pointer to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> second value to match.
00321 
00322 
00323 Return Value:
00324 
00325     If <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> components match, <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a> <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> returned, otherwise <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a> <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> returned.
00326 
00327 --*/
00328 
00329 {
00330     <span class="keywordflow">while</span> ((*Value1 != 0) &amp;&amp; (*Value2 != 0)) {
00331         <span class="keywordflow">if</span> (tolower(*Value1) != tolower(*Value2)) {
00332             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00333         }
00334 
00335         <span class="keywordflow">if</span> (*Value1 == <span class="charliteral">'('</span>) {
00336             <span class="keywordflow">do</span> {
00337                 *Value1++;
00338             } <span class="keywordflow">while</span> (*Value1 == <span class="charliteral">'0'</span>);
00339         } <span class="keywordflow">else</span> {
00340             *Value1++;
00341         }
00342 
00343         <span class="keywordflow">if</span> (*Value2 == <span class="charliteral">'('</span>) {
00344             <span class="keywordflow">do</span> {
00345                 *Value2++;
00346             } <span class="keywordflow">while</span> (*Value2 == <span class="charliteral">'0'</span>);
00347         } <span class="keywordflow">else</span> {
00348             *Value2++;
00349         }
00350     }
00351 
00352     <span class="keywordflow">if</span> ((*Value1 == 0) &amp;&amp; (*Value2 == 0)) {
00353         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00354     }
00355 
00356     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00357 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a41" doxytag="almisc.c::AlPrint" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ULONG AlPrint           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">PCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>Format</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>&nbsp;</td>
          <td class="mdname" nowrap> <em>...</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/almisc_8c-source.html#l01483">1483</a> of file <a class="el" href="../../d0/d6/almisc_8c-source.html">almisc.c</a>.
<p>
References <a class="el" href="../../d2/d8/arc_8h-source.html#l00034">ARC_CONSOLE_OUTPUT</a>, <a class="el" href="../../d2/d8/arc_8h-source.html#l01538">ArcWrite</a>, <a class="el" href="../../d7/d1/rtqkey_8c-source.html#l00042">Buffer</a>, and <a class="el" href="../../d5/d9/cmconfig_8c-source.html#l00051">Count</a>.
<p>
Referenced by <a class="el" href="../../d5/d5/memory_8c-source.html#l00365">AlRtAllocateHeap()</a>, <a class="el" href="../../d5/d5/memory_8c-source.html#l00555">AlRtFreeHeap()</a>, <a class="el" href="../../d5/d5/memory_8c-source.html#l00807">AlRtReAllocateHeap()</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l00934">AlWaitKey()</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l00788">CommonMenuDisplay()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00074">Confirm()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00224">DoPartitionCreate()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l00183">FdiskInitialize()</a>, <a class="el" href="../../d2/d5/fmtexp_8c-source.html#l00495">FmtVerifySectors()</a>, <a class="el" href="../../d4/d8/arcinst_8c-source.html#l00090">main()</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l00885">MarkLine()</a>, and <a class="el" href="../../d0/d6/almisc_8c-source.html#l00947">vAlStatusMsg()</a>.
<p>
<pre class="fragment"><div>01488 {
01489 
01490     va_list arglist;
01491     UCHAR <a class="code" href="../../d6/d2/rtqkey_8c.html#a3">Buffer</a>[256];
01492     ULONG <a class="code" href="../../d4/d0/cmconfig_8c.html#a6">Count</a>;
01493     ULONG Length;
01494 
01495     <span class="comment">//</span>
01496     <span class="comment">// Format the output into a buffer and then print it.</span>
01497     <span class="comment">//</span>
01498 
01499     va_start(arglist, Format);
01500     Length = vsprintf(Buffer, Format, arglist);
01501     <a class="code" href="../../d1/d9/arc_8h.html#a35">ArcWrite</a>( ARC_CONSOLE_OUTPUT, Buffer, Length, &amp;Count);
01502     va_end(arglist);
01503     <span class="keywordflow">return</span> 0;
01504 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a31" doxytag="almisc.c::AlStatusMsg" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID AlStatusMsg           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>TopRow</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>BottomRow</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN BOOLEAN&nbsp;</td>
          <td class="mdname" nowrap> <em>Error</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>FormatString</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>&nbsp;</td>
          <td class="mdname" nowrap> <em>...</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/almisc_8c-source.html#l00974">974</a> of file <a class="el" href="../../d0/d6/almisc_8c-source.html">almisc.c</a>.
<p>
References <a class="el" href="../../d0/d6/almisc_8c-source.html#l01010">AlClearStatusArea()</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l00934">AlWaitKey()</a>, <a class="el" href="../../d8/d9/ctlnpqos_8c-source.html#l00011">Error</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d0/d6/almisc_8c-source.html#l00947">vAlStatusMsg()</a>.
<p>
<pre class="fragment"><div>00981 {
00982     va_list ArgList;
00983 
00984     va_start(ArgList,FormatString);
00985     <a class="code" href="../../d4/d9/arcinst_8h.html#a100">vAlStatusMsg</a>(TopRow,Error,FormatString,ArgList);
00986 
00987     <a class="code" href="../../d4/d9/arcinst_8h.html#a99">AlWaitKey</a>(NULL);
00988     <a class="code" href="../../d4/d9/arcinst_8h.html#a103">AlClearStatusArea</a>(TopRow,BottomRow);
00989 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a32" doxytag="almisc.c::AlStatusMsgNoWait" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID AlStatusMsgNoWait           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>TopRow</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>BottomRow</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN BOOLEAN&nbsp;</td>
          <td class="mdname" nowrap> <em>Error</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>FormatString</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>&nbsp;</td>
          <td class="mdname" nowrap> <em>...</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/almisc_8c-source.html#l00993">993</a> of file <a class="el" href="../../d0/d6/almisc_8c-source.html">almisc.c</a>.
<p>
References <a class="el" href="../../d0/d6/almisc_8c-source.html#l01010">AlClearStatusArea()</a>, <a class="el" href="../../d8/d9/ctlnpqos_8c-source.html#l00011">Error</a>, and <a class="el" href="../../d0/d6/almisc_8c-source.html#l00947">vAlStatusMsg()</a>.
<p>
Referenced by <a class="el" href="../../d8/d2/partit_8c-source.html#l00542">DoSystemPartitionCreate()</a>.
<p>
<pre class="fragment"><div>01000 {
01001     va_list ArgList;
01002 
01003     <a class="code" href="../../d4/d9/arcinst_8h.html#a103">AlClearStatusArea</a>(TopRow,BottomRow);
01004     va_start(ArgList,FormatString);
01005     <a class="code" href="../../d4/d9/arcinst_8h.html#a100">vAlStatusMsg</a>(TopRow,Error,FormatString,ArgList);
01006 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a35" doxytag="almisc.c::AlStrDup" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> PCHAR AlStrDup           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PCHAR&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>szString</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/almisc_8c-source.html#l01113">1113</a> of file <a class="el" href="../../d0/d6/almisc_8c-source.html">almisc.c</a>.
<p>
References <a class="el" href="../../d5/d5/memory_8c-source.html#l01113">AlAllocateHeap()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d2/d7/regtest_8c.html#a2">strlen()</a>.
<p>
Referenced by <a class="el" href="../../d0/d6/almisc_8c-source.html#l01244">AlGetBase()</a>.
<p>
<pre class="fragment"><div>01120                    :
01121 
01122     This routine makes a copy of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> passed in string. I <span class="keywordflow">do</span> not use
01123     <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> CRT strdup since <a class="code" href="../../d1/d9/icmui_8def.html#a4">it</a> uses malloc.
01124 
01125 Arguments:
01126 
01127     szString - pointer of string to dup.
01128 
01129 Return Value:
01130 
01131     pointer to dup'd string. <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> <span class="keywordflow">if</span> could not allocate
01132 
01133 --*/
01134 {
01135 
01136     PCHAR   szT;
01137 
01138     <span class="keywordflow">if</span> (szT = <a class="code" href="../../d4/d6/memory_8c.html#a22">AlAllocateHeap</a>(<a class="code" href="../../d2/d7/regtest_8c.html#a2">strlen</a>(szString) + 1)) {
01139 
01140         strcpy(szT, szString);
01141         <span class="keywordflow">return</span>(szT);
01142 
01143     }
01144     <span class="keywordflow">return</span>( <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> );
01145 
01146 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a29" doxytag="almisc.c::AlWaitKey" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID AlWaitKey           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">PCHAR&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>Prompt</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/almisc_8c-source.html#l00934">934</a> of file <a class="el" href="../../d0/d6/almisc_8c-source.html">almisc.c</a>.
<p>
References <a class="el" href="../../d0/d6/almisc_8c-source.html#l01508">AlGetString()</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l01483">AlPrint()</a>, and <a class="el" href="../../d0/d6/almisc_8c-source.html#l00585">MSGMARGIN</a>.
<p>
Referenced by <a class="el" href="../../d0/d6/almisc_8c-source.html#l00974">AlStatusMsg()</a>, <a class="el" href="../../d4/d8/arcinst_8c-source.html#l00191">PrintError()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00093">PrintErrorMsg()</a>, and <a class="el" href="../../d8/d2/partit_8c-source.html#l00111">PrintMsg()</a>.
<p>
<pre class="fragment"><div>00937 {
00938     <span class="keywordtype">char</span> buff[1];
00939 
00940     <a class="code" href="../../d4/d9/arcinst_8h.html#a114">AlPrint</a>(MSGMARGIN);
00941     <a class="code" href="../../d4/d9/arcinst_8h.html#a114">AlPrint</a>(Prompt ? Prompt : <span class="stringliteral">"Press any key to continue..."</span>);
00942     <a class="code" href="../../d4/d9/arcinst_8h.html#a115">AlGetString</a>(buff,0);
00943 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a18" doxytag="almisc.c::CommonMenuDisplay" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOLEAN CommonMenuDisplay           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d9/struct__tagMENUCOOKIE.html">PMENUCOOKIE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Menu</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOLEAN&nbsp;</td>
          <td class="mdname" nowrap> <em>StaticMenu</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>Items</em>[], </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>ItemCount</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOLEAN&nbsp;</td>
          <td class="mdname" nowrap> <em>PrintOnly</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>AssociatedDataOfDefaultChoice</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>ULONG *&nbsp;</td>
          <td class="mdname" nowrap> <em>AssociatedDataOfChoice</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>MenuName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>Row</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/almisc_8c-source.html#l00788">788</a> of file <a class="el" href="../../d0/d6/almisc_8c-source.html">almisc.c</a>.
<p>
References <a class="el" href="../../d0/d6/almisc_8c-source.html#l01508">AlGetString()</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l01483">AlPrint()</a>, <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00321">AlSetPosition</a>, <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00309">AlSetScreenAttributes</a>, <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00305">AlSetScreenColor</a>, <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00021">ASCI_CR</a>, <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00022">ASCI_CSI</a>, <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00023">ASCI_ESC</a>, <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00018">ASCI_LF</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l00573">_tagMENUITEM::AssociatedData</a>, <a class="el" href="../../d4/d9/user32_8def-source.html#l00799">c</a>, <a class="el" href="../../d1/d1/config_2test_2init386_8c-source.html#l00027">dummy()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d1/d6/server_2stream_8c-source.html#l00263">GetChar()</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l00578">_tagMENUCOOKIE::Items</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l00590">KEY_DOWN</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l00589">KEY_UP</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l00584">MARGIN</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l00885">MarkLine()</a>, <a class="el" href="../../d5/d8/talloc_8c-source.html#l00027">String</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l00572">_tagMENUITEM::Text</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d0/d6/almisc_8c-source.html#l00740">AlDisplayMenu()</a>, and <a class="el" href="../../d0/d6/almisc_8c-source.html#l00764">AlDisplayStaticMenu()</a>.
<p>
<pre class="fragment"><div>00799 {
00800 <span class="comment">//    ULONG x;</span>
00801     ULONG i,MenuBaseLine,Selection;
00802     <span class="keywordtype">char</span>  <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a35">c</a>;
00803     PCHAR <a class="code" href="../../d4/d9/talloc_8c.html#a0">String</a>;
00804 
00805     <a class="code" href="../../d4/d9/arcinst_8h.html#a19">AlSetPosition</a>(Row,0);
00806     <a class="code" href="../../d4/d9/arcinst_8h.html#a114">AlPrint</a>(<span class="stringliteral">"%cJ"</span>,ASCI_CSI);            <span class="comment">// clear to end of screen.</span>
00807     MenuBaseLine = Row;
00808 
00809     <a class="code" href="../../d4/d9/arcinst_8h.html#a17">AlSetScreenColor</a>(7,4);              <span class="comment">// white on blue</span>
00810 
00811 <span class="comment">//    if(MenuName) {</span>
00812 <span class="comment">//        AlPrint("%s%s\r\n%s",MARGIN,MenuName,MARGIN);</span>
00813 <span class="comment">//        x = strlen(MenuName);</span>
00814 <span class="comment">//        for(i=0; i&lt;x; i++) {</span>
00815 <span class="comment">//            AlPrint("-");</span>
00816 <span class="comment">//        }</span>
00817 <span class="comment">//        AlPrint("\r\n\r\n");</span>
00818 <span class="comment">//        MenuBaseLine += 3;</span>
00819 <span class="comment">//    }</span>
00820 
00821     <span class="keywordflow">for</span>(i=0; i&lt;ItemCount; i++) {
00822         <a class="code" href="../../d4/d9/arcinst_8h.html#a18">AlSetScreenAttributes</a>(1,0,0);   <span class="comment">// hi intensity</span>
00823         <a class="code" href="../../d4/d9/arcinst_8h.html#a114">AlPrint</a>(<span class="stringliteral">"%s%s\r\n"</span>,MARGIN,StaticMenu ? Items[i] : Menu-&gt;<a class="code" href="../../d0/d9/struct__tagMENUCOOKIE.html#o1">Items</a>[i].<a class="code" href="../../d1/d9/struct__tagMENUITEM.html#o0">Text</a>);
00824     }
00825 
00826     <span class="keywordflow">if</span>(PrintOnly) {
00827 
00828         <span class="keywordtype">char</span> <a class="code" href="../../d0/d2/config_2test_2init386_8c.html#a0">dummy</a>;
00829         <a class="code" href="../../d4/d9/arcinst_8h.html#a114">AlPrint</a>(<span class="stringliteral">"\r\nPress any key to continue."</span>);
00830         <a class="code" href="../../d4/d9/arcinst_8h.html#a115">AlGetString</a>(&amp;dummy,0);
00831 
00832     } <span class="keywordflow">else</span> {
00833 
00834 <span class="comment">//        AlPrint("\r\n%sMake Selection using arrow keys and return,\r\n%sor escape to cancel",MARGIN,MARGIN);</span>
00835 
00836         Selection = 0;
00837         <span class="keywordflow">if</span>(StaticMenu) {
00838             Selection = AssociatedDataOfDefaultChoice;
00839         } <span class="keywordflow">else</span> {
00840             <span class="keywordflow">for</span>(i=0; i&lt;ItemCount; i++) {
00841                 <span class="keywordflow">if</span>(Menu-&gt;<a class="code" href="../../d0/d9/struct__tagMENUCOOKIE.html#o1">Items</a>[i].<a class="code" href="../../d1/d9/struct__tagMENUITEM.html#o1">AssociatedData</a> == AssociatedDataOfDefaultChoice) {
00842                     Selection = i;
00843                     <span class="keywordflow">break</span>;
00844                 }
00845             }
00846         }
00847 
00848         <a class="code" href="../../d4/d9/talloc_8c.html#a0">String</a> = StaticMenu ? Items[Selection] : Menu-&gt;<a class="code" href="../../d0/d9/struct__tagMENUCOOKIE.html#o1">Items</a>[Selection].<a class="code" href="../../d1/d9/struct__tagMENUITEM.html#o0">Text</a>;
00849         <a class="code" href="../../d9/d6/almisc_8c.html#a17">MarkLine</a>(MenuBaseLine+Selection,TRUE, String);
00850 
00851         <span class="keywordflow">while</span>(((<a class="code" href="../../d2/d0/nt6_2user32_8def.html#a35">c</a> = <a class="code" href="../../d0/d7/server_2stream_8c.html#a19">GetChar</a>()) != <a class="code" href="../../d4/d9/arcinst_8h.html#a9">ASCI_ESC</a>) &amp;&amp; (<a class="code" href="../../d2/d0/nt6_2user32_8def.html#a35">c</a> != <a class="code" href="../../d4/d9/arcinst_8h.html#a4">ASCI_LF</a>) &amp;&amp; (<a class="code" href="../../d2/d0/nt6_2user32_8def.html#a35">c</a> != <a class="code" href="../../d4/d9/arcinst_8h.html#a7">ASCI_CR</a>)) {
00852 
00853             <a class="code" href="../../d4/d9/talloc_8c.html#a0">String</a> = StaticMenu ? Items[Selection] : Menu-&gt;<a class="code" href="../../d0/d9/struct__tagMENUCOOKIE.html#o1">Items</a>[Selection].<a class="code" href="../../d1/d9/struct__tagMENUITEM.html#o0">Text</a>;
00854             <a class="code" href="../../d9/d6/almisc_8c.html#a17">MarkLine</a>(MenuBaseLine+Selection,FALSE,String);
00855 
00856             <span class="keywordflow">if</span>(<a class="code" href="../../d2/d0/nt6_2user32_8def.html#a35">c</a> == <a class="code" href="../../d9/d6/almisc_8c.html#a0">KEY_UP</a>) {
00857                 <span class="keywordflow">if</span>(!Selection--) {
00858                     Selection = ItemCount - 1;
00859                 }
00860             } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="../../d2/d0/nt6_2user32_8def.html#a35">c</a> == <a class="code" href="../../d9/d6/almisc_8c.html#a1">KEY_DOWN</a>) {
00861                 <span class="keywordflow">if</span>(++Selection == ItemCount) {
00862                     Selection = 0;
00863                 }
00864             }
00865 
00866             <a class="code" href="../../d4/d9/talloc_8c.html#a0">String</a> = StaticMenu ? Items[Selection] : Menu-&gt;<a class="code" href="../../d0/d9/struct__tagMENUCOOKIE.html#o1">Items</a>[Selection].<a class="code" href="../../d1/d9/struct__tagMENUITEM.html#o0">Text</a>;
00867             <a class="code" href="../../d9/d6/almisc_8c.html#a17">MarkLine</a>(MenuBaseLine+Selection,TRUE,String);
00868         }
00869 
00870         <span class="comment">// set cursor to a free place on the screen.</span>
00871         <a class="code" href="../../d4/d9/arcinst_8h.html#a19">AlSetPosition</a>(MenuBaseLine + ItemCount + 4,0);
00872 
00873         <span class="keywordflow">if</span>(<a class="code" href="../../d2/d0/nt6_2user32_8def.html#a35">c</a> == <a class="code" href="../../d4/d9/arcinst_8h.html#a9">ASCI_ESC</a>) {
00874             <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00875         }
00876 
00877         *AssociatedDataOfChoice = StaticMenu ? Selection : Menu-&gt;<a class="code" href="../../d0/d9/struct__tagMENUCOOKIE.html#o1">Items</a>[Selection].<a class="code" href="../../d1/d9/struct__tagMENUITEM.html#o1">AssociatedData</a>;
00878     }
00879     <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
00880 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a19" doxytag="almisc.c::GetChar" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> char GetChar           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">VOID&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/almisc_8c-source.html#l00902">902</a> of file <a class="el" href="../../d0/d6/almisc_8c-source.html">almisc.c</a>.
<p>
References <a class="el" href="../../d2/d8/arc_8h-source.html#l00033">ARC_CONSOLE_INPUT</a>, <a class="el" href="../../d2/d8/arc_8h-source.html#l01530">ArcRead</a>, <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00022">ASCI_CSI</a>, <a class="el" href="../../d4/d9/user32_8def-source.html#l00799">c</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l00590">KEY_DOWN</a>, and <a class="el" href="../../d0/d6/almisc_8c-source.html#l00589">KEY_UP</a>.
<p>
<pre class="fragment"><div>00905 {
00906     UCHAR <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a35">c</a>;
00907     ULONG count;
00908 
00909     <a class="code" href="../../d1/d9/arc_8h.html#a33">ArcRead</a>(ARC_CONSOLE_INPUT,&amp;c,1,&amp;count);
00910     <span class="keywordflow">switch</span>(<a class="code" href="../../d2/d0/nt6_2user32_8def.html#a35">c</a>) {
00911 <span class="comment">//  case ASCI_ESC:</span>
00912 <span class="comment">//      ArcRead(ARC_CONSOLE_INPUT,&amp;c,1,&amp;count);</span>
00913 <span class="comment">//      if(c != '[') {</span>
00914 <span class="comment">//          break;</span>
00915 <span class="comment">//      }</span>
00916     <span class="keywordflow">case</span> <a class="code" href="../../d4/d9/arcinst_8h.html#a8">ASCI_CSI</a>:
00917         <a class="code" href="../../d1/d9/arc_8h.html#a33">ArcRead</a>(ARC_CONSOLE_INPUT,&amp;c,1,&amp;count);
00918         <span class="keywordflow">switch</span>(<a class="code" href="../../d2/d0/nt6_2user32_8def.html#a35">c</a>) {
00919         <span class="keywordflow">case</span> <span class="charliteral">'A'</span>:
00920         <span class="keywordflow">case</span> <span class="charliteral">'D'</span>:
00921             <span class="keywordflow">return</span>(<a class="code" href="../../d9/d6/almisc_8c.html#a0">KEY_UP</a>);
00922         <span class="keywordflow">case</span> <span class="charliteral">'B'</span>:
00923         <span class="keywordflow">case</span> <span class="charliteral">'C'</span>:
00924             <span class="keywordflow">return</span>(<a class="code" href="../../d9/d6/almisc_8c.html#a1">KEY_DOWN</a>);
00925         }
00926     <span class="keywordflow">default</span>:
00927         <span class="keywordflow">return</span>(<a class="code" href="../../d2/d0/nt6_2user32_8def.html#a35">c</a>);
00928     }
00929 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a17" doxytag="almisc.c::MarkLine" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID MarkLine           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>Line</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOLEAN&nbsp;</td>
          <td class="mdname" nowrap> <em>Selected</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>String</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/almisc_8c-source.html#l00885">885</a> of file <a class="el" href="../../d0/d6/almisc_8c-source.html">almisc.c</a>.
<p>
References <a class="el" href="../../d0/d6/almisc_8c-source.html#l01483">AlPrint()</a>, <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00321">AlSetPosition</a>, <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00309">AlSetScreenAttributes</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l00584">MARGIN</a>, and <a class="el" href="../../d5/d8/talloc_8c-source.html#l00027">String</a>.
<p>
Referenced by <a class="el" href="../../d0/d6/almisc_8c-source.html#l00788">CommonMenuDisplay()</a>.
<p>
<pre class="fragment"><div>00890 {
00891     <a class="code" href="../../d4/d9/arcinst_8h.html#a19">AlSetPosition</a>(Line,<span class="keyword">sizeof</span>(MARGIN));
00892     <span class="keywordflow">if</span> (Selected) {
00893         <a class="code" href="../../d4/d9/arcinst_8h.html#a18">AlSetScreenAttributes</a>(1,0,1);   <span class="comment">// hi intensity, Reverse Video</span>
00894     }
00895     <a class="code" href="../../d4/d9/arcinst_8h.html#a114">AlPrint</a>(<span class="stringliteral">"%s\r\n"</span>, String);
00896     <a class="code" href="../../d4/d9/arcinst_8h.html#a18">AlSetScreenAttributes</a>(1,0,0);       <span class="comment">// hi intensity</span>
00897 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a30" doxytag="almisc.c::vAlStatusMsg" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID vAlStatusMsg           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>Row</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN BOOLEAN&nbsp;</td>
          <td class="mdname" nowrap> <em>Error</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>FormatString</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN va_list&nbsp;</td>
          <td class="mdname" nowrap> <em>ArgumentList</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/almisc_8c-source.html#l00947">947</a> of file <a class="el" href="../../d0/d6/almisc_8c-source.html">almisc.c</a>.
<p>
References <a class="el" href="../../d0/d6/almisc_8c-source.html#l01483">AlPrint()</a>, <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00321">AlSetPosition</a>, <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00309">AlSetScreenAttributes</a>, <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00305">AlSetScreenColor</a>, <a class="el" href="../../d2/d8/arc_8h-source.html#l00034">ARC_CONSOLE_OUTPUT</a>, <a class="el" href="../../d2/d8/arc_8h-source.html#l01538">ArcWrite</a>, <a class="el" href="../../d5/d9/cmconfig_8c-source.html#l00051">Count</a>, <a class="el" href="../../d8/d9/ctlnpqos_8c-source.html#l00011">Error</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l00585">MSGMARGIN</a>, and <a class="el" href="../../d8/d0/genuedef_8c-source.html#l00007">text</a>.
<p>
Referenced by <a class="el" href="../../d0/d6/almisc_8c-source.html#l00974">AlStatusMsg()</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l00993">AlStatusMsgNoWait()</a>, <a class="el" href="../../d4/d8/arcinst_8c-source.html#l00191">PrintError()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00093">PrintErrorMsg()</a>, and <a class="el" href="../../d8/d2/partit_8c-source.html#l00111">PrintMsg()</a>.
<p>
<pre class="fragment"><div>00953 {
00954     <span class="keywordtype">char</span>  <a class="code" href="../../d7/d1/genuedef_8c.html#a5">text</a>[256];
00955     ULONG Length,<a class="code" href="../../d4/d0/cmconfig_8c.html#a6">Count</a>;
00956 
00957     <a class="code" href="../../d4/d9/arcinst_8h.html#a19">AlSetPosition</a>(Row,0);
00958     <a class="code" href="../../d4/d9/arcinst_8h.html#a114">AlPrint</a>(MSGMARGIN);
00959     Length = vsprintf(text,FormatString,ArgumentList);
00960     <span class="keywordflow">if</span>(<a class="code" href="../../d7/d0/ctlnpqos_8c.html#a1">Error</a>) {
00961         <a class="code" href="../../d4/d9/arcinst_8h.html#a17">AlSetScreenColor</a>(1,4);         <span class="comment">// red on blue</span>
00962     } <span class="keywordflow">else</span> {
00963         <a class="code" href="../../d4/d9/arcinst_8h.html#a17">AlSetScreenColor</a>(3,4);         <span class="comment">// yellow on blue</span>
00964     }
00965     <a class="code" href="../../d4/d9/arcinst_8h.html#a18">AlSetScreenAttributes</a>(1,0,0);      <span class="comment">// hi intensity</span>
00966     <a class="code" href="../../d1/d9/arc_8h.html#a35">ArcWrite</a>(ARC_CONSOLE_OUTPUT,text,Length,&amp;Count);
00967     <a class="code" href="../../d4/d9/arcinst_8h.html#a114">AlPrint</a>(<span class="stringliteral">"\r\n"</span>);
00968     <a class="code" href="../../d4/d9/arcinst_8h.html#a17">AlSetScreenColor</a>(7,4);             <span class="comment">// white on blue</span>
00969     <a class="code" href="../../d4/d9/arcinst_8h.html#a18">AlSetScreenAttributes</a>(1,0,0);      <span class="comment">// hi intensity</span>
00970 }
</div></pre>    </td>
  </tr>
</table>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="a8" doxytag="almisc.c::AdapterTypes" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> PCHAR <a class="el" href="../../d9/d6/almisc_8c.html#a8">AdapterTypes</a>[AdapterMaximum+1] = {"eisa","scsi", "multi", NULL}          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/almisc_8c-source.html#l01309">1309</a> of file <a class="el" href="../../d0/d6/almisc_8c-source.html">almisc.c</a>.
<p>
Referenced by <a class="el" href="../../d0/d6/almisc_8c-source.html#l01391">AlMatchArcNamToken()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a9" doxytag="almisc.c::ControllerTypes" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> PCHAR <a class="el" href="../../d9/d6/almisc_8c.html#a9">ControllerTypes</a>[ControllerMaximum+1] = {"cdrom", "disk", NULL}          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/almisc_8c-source.html#l01311">1311</a> of file <a class="el" href="../../d0/d6/almisc_8c-source.html">almisc.c</a>.
<p>
Referenced by <a class="el" href="../../d0/d6/almisc_8c-source.html#l01391">AlMatchArcNamToken()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a6" doxytag="almisc.c::MARGIN" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> char <a class="el" href="../../d9/d6/almisc_8c.html#a6">MARGIN</a>[] = " "          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/almisc_8c-source.html#l00584">584</a> of file <a class="el" href="../../d0/d6/almisc_8c-source.html">almisc.c</a>.
<p>
Referenced by <a class="el" href="../../d0/d6/almisc_8c-source.html#l00788">CommonMenuDisplay()</a>, and <a class="el" href="../../d0/d6/almisc_8c-source.html#l00885">MarkLine()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a7" doxytag="almisc.c::MSGMARGIN" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> char <a class="el" href="../../d4/d9/arcinst_8h.html#a43">MSGMARGIN</a>[] = " "          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/almisc_8c-source.html#l00585">585</a> of file <a class="el" href="../../d0/d6/almisc_8c-source.html">almisc.c</a>.
<p>
Referenced by <a class="el" href="../../d0/d6/almisc_8c-source.html#l00934">AlWaitKey()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00074">Confirm()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00224">DoPartitionCreate()</a>, <a class="el" href="../../d2/d5/fmtexp_8c-source.html#l00495">FmtVerifySectors()</a>, and <a class="el" href="../../d0/d6/almisc_8c-source.html#l00947">vAlStatusMsg()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a10" doxytag="almisc.c::PeripheralTypes" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> PCHAR <a class="el" href="../../d9/d6/almisc_8c.html#a10">PeripheralTypes</a>[PeripheralMaximum+1] = {"rdisk", "fdisk", NULL}          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/almisc_8c-source.html#l01313">1313</a> of file <a class="el" href="../../d0/d6/almisc_8c-source.html">almisc.c</a>.
<p>
Referenced by <a class="el" href="../../d0/d6/almisc_8c-source.html#l01391">AlMatchArcNamToken()</a>.    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Sat May 15 19:42:52 2004 for test by
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>

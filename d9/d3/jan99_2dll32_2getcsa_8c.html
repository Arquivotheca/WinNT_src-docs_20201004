<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>test: jan99/dll32/getcsa.c File Reference</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="../../main.html">Main&nbsp;Page</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Class&nbsp;List</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Class&nbsp;Members</a> | <a class="qindex" href="../../globals.html">File&nbsp;Members</a></div>
<h1>getcsa.c File Reference</h1><code>#include "<a class="el" href="../../d3/d9/jan99_2dll32_2generic_8h-source.html">generic.h</a>"</code><br>
<code>#include "<a class="el" href="../../d9/d7/jan99_2dll32_2icmstr_8h-source.html">icmstr.h</a>"</code><br>

<p>
<a href="../../d0/d3/jan99_2dll32_2getcsa_8c-source.html">Go to the source code of this file.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d3/jan99_2dll32_2getcsa_8c.html#a0">ICMSEG</a></td></tr>

<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d3/jan99_2dll32_2getcsa_8c.html#a2">IsSRGB</a> (<a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a> cp)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d3/jan99_2dll32_2getcsa_8c.html#a3">CreateColSpArray</a> (<a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a> cp, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpMem, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a> CPTag, BOOL <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a27">AllowBinary</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d3/jan99_2dll32_2getcsa_8c.html#a4">CreateColSpProc</a> (<a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a> cp, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpMem, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a> CPTag, BOOL <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a27">AllowBinary</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d3/jan99_2dll32_2getcsa_8c.html#a5">CreateFloatString</a> (<a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a> cp, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpMem, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a> CPTag)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d3/jan99_2dll32_2getcsa_8c.html#a6">SendCSABWPoint</a> (<a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpMem, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a> <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a28">Intent</a>, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a26">LPSFLOAT</a> IlluminantWP, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a26">LPSFLOAT</a> MediaWP)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d3/jan99_2dll32_2getcsa_8c.html#a7">GetMediaWP</a> (<a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a> cp, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a> InputIntent, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a26">LPSFLOAT</a> IlluminantWP, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a26">LPSFLOAT</a> MediaWP)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d3/jan99_2dll32_2getcsa_8c.html#a8">GetDeviceRGB</a> (<a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpMem, LPDWORD lpcbSize, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> InpDrvClrSp, BOOL BackupCSA)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d3/jan99_2dll32_2getcsa_8c.html#a9">GetDeviceCMYK</a> (<a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpMem, LPDWORD lpcbSize, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> InpDrvClrSp)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d3/jan99_2dll32_2getcsa_8c.html#a10">GetDeviceGray</a> (<a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpMem, LPDWORD lpcbSize, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> InpDrvClrSp)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d3/jan99_2dll32_2getcsa_8c.html#a11">GetPublicArrayName</a> (<a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a> cp, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a> IntentSig, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> PublicArrayName)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d3/jan99_2dll32_2getcsa_8c.html#a12">BeginGlobalDict</a> (<a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpMem)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d3/jan99_2dll32_2getcsa_8c.html#a13">EndGlobalDict</a> (<a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpMem)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d3/jan99_2dll32_2getcsa_8c.html#a14">EnableGlobalDict</a> (<a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpMem)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d3/jan99_2dll32_2getcsa_8c.html#a15">GetPS2CSA_DEFG</a> (<a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a> cp, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpMem, LPDWORD lpcbSize, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a> InputIntent, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a> <a class="el" href="../../d7/d0/cmdat2_8c.html#a27">Index</a>, int Type, BOOL <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a27">AllowBinary</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d3/jan99_2dll32_2getcsa_8c.html#a16">GetPS2CSA_ABC</a> (<a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a> cp, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpMem, LPDWORD lpcbSize, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a> InputIntent, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> InpDrvClrSp, BOOL <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a27">AllowBinary</a>, BOOL BackupCSA)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d3/jan99_2dll32_2getcsa_8c.html#a17">GetPS2CSA_ABC_LAB</a> (<a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a> cp, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpMem, LPDWORD lpcbSize, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a> InputIntent, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> InpDrvClrSp, BOOL <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a27">AllowBinary</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d3/jan99_2dll32_2getcsa_8c.html#a18">GetPS2CSA_MONO_ABC</a> (<a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a> cp, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpMem, LPDWORD lpcbSize, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a> InputIntent, BOOL <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a27">AllowBinary</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d3/jan99_2dll32_2getcsa_8c.html#a19">GetPS2CSA_MONO_A</a> (<a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a> cp, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpMem, LPDWORD lpcbSize, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a> InputIntent, BOOL <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a27">AllowBinary</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d3/jan99_2dll32_2getcsa_8c.html#a20">GetPS2CSA_MONO</a> (<a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a> cp, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpMem, LPDWORD lpcbSize, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> InpDrvClrSp, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a> InputIntent, BOOL <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a27">AllowBinary</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d3/jan99_2dll32_2getcsa_8c.html#a21">GetCSAFromProfile</a> (<a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a> cp, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpMem, LPDWORD lpcbSize, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> InpDrvClrSp, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a> DrvColorSpace, BOOL <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a27">AllowBinary</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d3/jan99_2dll32_2getcsa_8c.html#a22">GetPS2CSA_DEFG_Intent</a> (<a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a> cp, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpBuffer, LPDWORD lpcbSize, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> InpDrvClrSp, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a> <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a28">Intent</a>, int Type, BOOL <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a27">AllowBinary</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL EXTERN&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d3/jan99_2dll32_2getcsa_8c.html#a23">GetPS2ColorSpaceArray</a> (<a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a> cp, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> InputIntent, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> InpDrvClrSp, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpBuffer, LPDWORD lpcbSize, BOOL <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a27">AllowBinary</a>)</td></tr>

<tr><td colspan=2><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>char *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d3/jan99_2dll32_2getcsa_8c.html#a1">DecodeABCLab</a> []</td></tr>

</table>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="a0" doxytag="jan99/dll32/getcsa.c::ICMSEG" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ICMSEG          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="a12" doxytag="jan99/dll32/getcsa.c::BeginGlobalDict" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a> BeginGlobalDict           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>lpMem</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d3/jan99_2dll32_2getcsa_8c-source.html#l00207">207</a> of file <a class="el" href="../../d0/d3/jan99_2dll32_2getcsa_8c-source.html">jan99/dll32/getcsa.c</a>.
<p>
References <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00056">BeginOp</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00052">GlobalDictOp</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00080">MEMPTR</a>, <a class="el" href="../../d7/d6/aug98_2dll32_2icmdll_8h-source.html#l00011">SINT</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04573">WriteNewLineObject()</a>, and <a class="el" href="../../d3/d8/ps2_8c-source.html#l00072">WriteObject</a>.
<p>
<pre class="fragment"><div>00208 {
00209     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpOldMem = lpMem;
00210 
00211     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, GlobalDictOp);
00212     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginOp);
00213 
00214     <span class="keywordflow">return</span> (lpMem - lpOldMem);
00215 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="jan99/dll32/getcsa.c::CreateColSpArray" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a> CreateColSpArray           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpMem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>CPTag</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>AllowBinary</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="jan99/dll32/getcsa.c::CreateColSpProc" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a> CreateColSpProc           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpMem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>CPTag</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>AllowBinary</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="jan99/dll32/getcsa.c::CreateFloatString" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a> CreateFloatString           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpMem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>CPTag</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a14" doxytag="jan99/dll32/getcsa.c::EnableGlobalDict" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a> EnableGlobalDict           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>lpMem</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d3/jan99_2dll32_2getcsa_8c-source.html#l00227">227</a> of file <a class="el" href="../../d0/d3/jan99_2dll32_2getcsa_8c-source.html">jan99/dll32/getcsa.c</a>.
<p>
References <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00053">CurrentGlobalOp</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00080">MEMPTR</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00054">SetGlobalOp</a>, <a class="el" href="../../d7/d6/aug98_2dll32_2icmdll_8h-source.html#l00011">SINT</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00058">TrueOp</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04573">WriteNewLineObject()</a>, and <a class="el" href="../../d3/d8/ps2_8c-source.html#l00072">WriteObject</a>.
<p>
<pre class="fragment"><div>00228 {
00229     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpOldMem = lpMem;
00230 
00231     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, CurrentGlobalOp);
00232     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, TrueOp);
00233     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, SetGlobalOp);
00234     <span class="keywordflow">return</span> (lpMem - lpOldMem);
00235 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a13" doxytag="jan99/dll32/getcsa.c::EndGlobalDict" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a> EndGlobalDict           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>lpMem</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d3/jan99_2dll32_2getcsa_8c-source.html#l00217">217</a> of file <a class="el" href="../../d0/d3/jan99_2dll32_2getcsa_8c-source.html">jan99/dll32/getcsa.c</a>.
<p>
References <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00057">EndOp</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00080">MEMPTR</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00054">SetGlobalOp</a>, <a class="el" href="../../d7/d6/aug98_2dll32_2icmdll_8h-source.html#l00011">SINT</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04573">WriteNewLineObject()</a>, and <a class="el" href="../../d3/d8/ps2_8c-source.html#l00072">WriteObject</a>.
<p>
<pre class="fragment"><div>00218 {
00219     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpOldMem = lpMem;
00220 
00221     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, EndOp);
00222     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, SetGlobalOp);
00223 
00224     <span class="keywordflow">return</span> (lpMem - lpOldMem);
00225 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a21" doxytag="jan99/dll32/getcsa.c::GetCSAFromProfile" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL GetCSAFromProfile           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpMem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpcbSize</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>InpDrvClrSp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>DrvColorSpace</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>AllowBinary</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d3/jan99_2dll32_2getcsa_8c-source.html#l01450">1450</a> of file <a class="el" href="../../d0/d3/jan99_2dll32_2getcsa_8c-source.html">jan99/dll32/getcsa.c</a>.
<p>
References <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00108">AllowBinary</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l01485">Convert2Ascii()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04007">DoesCPTagExist()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04180">GetCPElementData()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04121">GetCPElementDataSize()</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l00426">GetCPTagIndex()</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00253">icSigGrayData</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00172">icSigPs2CSATag</a>, <a class="el" href="../../d2/d9/cmchek_8c-source.html#l00095">Index</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00105">LPSINT</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d6/aug98_2dll32_2icmdll_8h-source.html#l00011">SINT</a>, <a class="el" href="../../d9/d6/lh__open_2pi__mem_8h-source.html#l00017">Size</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
<pre class="fragment"><div>01457 {
01458     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a> <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>;
01459     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a> <a class="code" href="../../d8/d7/lh__open_2pi__mem_8h.html#a0">Size</a>;
01460     <span class="keywordflow">if</span> ((DrvColorSpace == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a115">icSigGrayData</a>) &amp;&amp; (InpDrvClrSp != <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a115">icSigGrayData</a>))
01461         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01462 
01463     <span class="keywordflow">if</span> (<a class="code" href="../../d2/d9/ps2_8c.html#a189">DoesCPTagExist</a> (cp, icSigPs2CSATag) &amp;&amp;
01464         <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a12">GetCPTagIndex</a> (cp, icSigPs2CSATag, (LPSINT) &amp; Index) &amp;&amp;
01465         <a class="code" href="../../d2/d9/ps2_8c.html#a193">GetCPElementDataSize</a> (cp, Index, (LPSINT) &amp; Size) &amp;&amp;
01466         ((lpMem == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) || <a class="code" href="../../d2/d9/ps2_8c.html#a196">GetCPElementData</a> (cp, Index, lpMem, Size)) &amp;&amp;
01467         (*lpcbSize = <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a55">Convert2Ascii</a> (cp, Index, lpMem, *lpcbSize, Size, AllowBinary)))
01468     {
01469         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01470     } <span class="keywordflow">else</span>
01471     {
01472         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01473     }
01474 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a9" doxytag="jan99/dll32/getcsa.c::GetDeviceCMYK" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL GetDeviceCMYK           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpMem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpcbSize</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>InpDrvClrSp</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d3/jan99_2dll32_2getcsa_8c-source.html#l00092">92</a> of file <a class="el" href="../../d0/d3/jan99_2dll32_2getcsa_8c-source.html">jan99/dll32/getcsa.c</a>.
<p>
References <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00043">DeviceCMYKTag</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00256">icSigCmykData</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00080">MEMPTR</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d3/d8/ps2_8c-source.html#l04573">WriteNewLineObject()</a>.
<p>
<pre class="fragment"><div>00096 {
00097     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpOldMem = lpMem;
00098     <span class="keywordflow">if</span> ((InpDrvClrSp != <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a118">icSigCmykData</a>) &amp;&amp;
00099         (InpDrvClrSp != 0))
00100         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00101     <span class="keywordflow">if</span> (lpMem == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00102     {
00103         *lpcbSize = lstrlen (DeviceCMYKTag) + 8;
00104         <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
00105     }
00106     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, DeviceCMYKTag);
00107 
00108     *lpcbSize = (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>) (lpMem - lpOldMem);
00109     <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
00110 
00111 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a10" doxytag="jan99/dll32/getcsa.c::GetDeviceGray" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL GetDeviceGray           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpMem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpcbSize</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>InpDrvClrSp</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d3/jan99_2dll32_2getcsa_8c-source.html#l00117">117</a> of file <a class="el" href="../../d0/d3/jan99_2dll32_2getcsa_8c-source.html">jan99/dll32/getcsa.c</a>.
<p>
References <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00044">DeviceGrayTag</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00042">DeviceRGBTag</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00258">icSigDefData</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00253">icSigGrayData</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00252">icSigRgbData</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00080">MEMPTR</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d3/d8/ps2_8c-source.html#l04573">WriteNewLineObject()</a>.
<p>
<pre class="fragment"><div>00121 {
00122     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpOldMem = lpMem;
00123     <span class="keywordflow">if</span> ((InpDrvClrSp == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a114">icSigRgbData</a>) ||
00124         (InpDrvClrSp == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a120">icSigDefData</a>) ||
00125         (InpDrvClrSp == 0))
00126     {
00127         <span class="keywordflow">if</span> (lpMem == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00128         {
00129             *lpcbSize = lstrlen (DeviceRGBTag) + 8;
00130             <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
00131         }
00132         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, DeviceRGBTag);
00133 
00134         *lpcbSize = (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>) (lpMem - lpOldMem);
00135         <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
00136     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (InpDrvClrSp == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a115">icSigGrayData</a>)
00137     {
00138         <span class="keywordflow">if</span> (lpMem == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00139         {
00140             *lpcbSize = lstrlen (DeviceGrayTag) + 8;
00141             <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
00142         }
00143         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, DeviceGrayTag);
00144 
00145         *lpcbSize = (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>) (lpMem - lpOldMem);
00146         <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
00147     }
00148 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a8" doxytag="jan99/dll32/getcsa.c::GetDeviceRGB" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL GetDeviceRGB           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpMem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpcbSize</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>InpDrvClrSp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>BackupCSA</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d3/jan99_2dll32_2getcsa_8c-source.html#l00041">41</a> of file <a class="el" href="../../d0/d3/jan99_2dll32_2getcsa_8c-source.html">jan99/dll32/getcsa.c</a>.
<p>
References <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00042">DeviceRGBTag</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00258">icSigDefData</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00252">icSigRgbData</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00080">MEMPTR</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00124">NotSupportDEFG_S</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00125">SupportDEFG_E</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d3/d8/ps2_8c-source.html#l04573">WriteNewLineObject()</a>.
<p>
<pre class="fragment"><div>00046 {
00047     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpOldMem = lpMem;
00048     <span class="keywordflow">if</span> ((InpDrvClrSp != <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a114">icSigRgbData</a>) &amp;&amp;
00049         (InpDrvClrSp != <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a120">icSigDefData</a>) &amp;&amp;
00050         (InpDrvClrSp != 0))
00051         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00052 
00053     <span class="keywordflow">if</span> (lpMem == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00054     {
00055         *lpcbSize = lstrlen (DeviceRGBTag) + 8;
00056         <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
00057     }
00058 
00059     <span class="keywordflow">if</span> (BackupCSA)
00060     {
00061         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, NotSupportDEFG_S);
00062     }
00063 
00064     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, DeviceRGBTag);
00065 
00066     <span class="keywordflow">if</span> (BackupCSA)
00067     {
00068         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, SupportDEFG_E);
00069     }
00070 
00071     *lpcbSize = (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>) (lpMem - lpOldMem);
00072     <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
00073 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a7" doxytag="jan99/dll32/getcsa.c::GetMediaWP" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void GetMediaWP           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>InputIntent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a26">LPSFLOAT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>IlluminantWP</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a26">LPSFLOAT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>MediaWP</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d3/jan99_2dll32_2getcsa_8c-source.html#l00193">193</a> of file <a class="el" href="../../d0/d3/jan99_2dll32_2getcsa_8c-source.html">jan99/dll32/getcsa.c</a>.
<p>
References <a class="el" href="../../d3/d8/ps2_8c-source.html#l04087">GetCPMediaWhitePoint()</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00306">icAbsoluteColorimetric</a>, and <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00106">LPSFLOAT</a>.
<p>
<pre class="fragment"><div>00195 {
00196     <span class="keywordflow">if</span> (InputIntent == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a145">icAbsoluteColorimetric</a>)
00197     {
00198         <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d9/ps2_8c.html#a192">GetCPMediaWhitePoint</a> (cp, (LPSFLOAT) &amp; MediaWP)) <span class="comment">// .. Media WhitePoint</span>
00199         {
00200             MediaWP[0] = IlluminantWP[0];
00201             MediaWP[1] = IlluminantWP[1];
00202             MediaWP[2] = IlluminantWP[2];
00203         }
00204     }
00205 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a23" doxytag="jan99/dll32/getcsa.c::GetPS2ColorSpaceArray" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL EXTERN GetPS2ColorSpaceArray           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>InputIntent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>InpDrvClrSp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpBuffer</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpcbSize</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>AllowBinary</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d3/jan99_2dll32_2getcsa_8c-source.html#l01579">1579</a> of file <a class="el" href="../../d0/d3/jan99_2dll32_2getcsa_8c-source.html">jan99/dll32/getcsa.c</a>.
<p>
References <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00108">AllowBinary</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00074">CSIG</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l00070">GetCPDevSpace</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l00071">GetCPRenderIntent</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l01172">GetCSAFromProfile()</a>, <a class="el" href="../../d1/d3/jul98_2dll32_2getcsa_8c-source.html#l00090">GetDeviceCMYK()</a>, <a class="el" href="../../d1/d3/jul98_2dll32_2getcsa_8c-source.html#l00115">GetDeviceGray()</a>, <a class="el" href="../../d1/d3/jul98_2dll32_2getcsa_8c-source.html#l00039">GetDeviceRGB()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l01519">GetPS2CSA_ABC()</a>, <a class="el" href="../../d8/d2/aug98_2dll32_2getcsa_8c-source.html#l00812">GetPS2CSA_ABC_LAB()</a>, <a class="el" href="../../d8/d2/aug98_2dll32_2getcsa_8c-source.html#l01502">GetPS2CSA_DEFG_Intent()</a>, <a class="el" href="../../d1/d3/jul98_2dll32_2getcsa_8c-source.html#l01244">GetPS2CSA_MONO()</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00256">icSigCmykData</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00253">icSigGrayData</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00248">icSigLabData</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00252">icSigRgbData</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00307">icUseRenderingIntent</a>, <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00109">Intent</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00107">LPCSIG</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00080">MEMPTR</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00063">NewLine</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00124">NotSupportDEFG_S</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00125">SupportDEFG_E</a>, <a class="el" href="../../d3/d8/aug98_2dll32_2csprof_8h-source.html#l00012">TYPE_CIEBASEDDEF</a>, <a class="el" href="../../d3/d8/aug98_2dll32_2csprof_8h-source.html#l00013">TYPE_CIEBASEDDEFG</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04573">WriteNewLineObject()</a>, and <a class="el" href="../../d3/d8/ps2_8c-source.html#l00072">WriteObject</a>.
<p>
<pre class="fragment"><div>01586 {
01587     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a17">CSIG</a> ColorSpace, <a class="code" href="../../d3/d8/aug98_2test_2main_8c.html#a28">Intent</a>;
01588     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> Success = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01589     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwSaveSize;
01590     <span class="keywordflow">if</span> (!cp)
01591         <span class="keywordflow">return</span> Success;
01592 
01593     <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d9/ps2_8c.html#a41">GetCPDevSpace</a> (cp, (LPCSIG) &amp; ColorSpace) ||
01594         !<a class="code" href="../../d2/d9/ps2_8c.html#a42">GetCPRenderIntent</a> (cp, (LPCSIG) &amp; Intent))
01595     {
01596         <span class="keywordflow">return</span> Success;
01597     }
01598     dwSaveSize = *lpcbSize;
01599     <span class="keywordflow">if</span> (InputIntent == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a146">icUseRenderingIntent</a>)
01600         InputIntent = (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)<a class="code" href="../../d3/d8/aug98_2test_2main_8c.html#a28">Intent</a>;
01601 
01602  <span class="comment">// Get ColorSpace from Profile.</span>
01603     <span class="keywordflow">if</span> ((<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a17">CSIG</a>) InputIntent == <a class="code" href="../../d3/d8/aug98_2test_2main_8c.html#a28">Intent</a>)
01604     {
01605         Success = <a class="code" href="../../d2/d9/ps2_8c.html#a182">GetCSAFromProfile</a> (cp, lpBuffer, lpcbSize,
01606                                      InpDrvClrSp, ColorSpace, AllowBinary);
01607     }
01608     <span class="keywordflow">if</span> (!Success)
01609     {
01610         <span class="keywordflow">switch</span> (ColorSpace)
01611         {
01612             <span class="keywordflow">case</span> <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a114">icSigRgbData</a>:
01613                 Success = <a class="code" href="../../d7/d4/jul98_2test_2getcsa_8h.html#a1">GetPS2CSA_DEFG_Intent</a> (cp, lpBuffer, lpcbSize,
01614                                                  InpDrvClrSp, (CSIG) InputIntent, 
01615                                                  TYPE_CIEBASEDDEF, AllowBinary);
01616                 <span class="keywordflow">if</span> (Success)
01617                 {                       <span class="comment">// Create CieBasedABC or DeviceRGB</span>
01618                                         <span class="comment">// for the printer</span>
01619                                         <span class="comment">// which does not support CieBasedDEF(G).</span>
01620                     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> cbNewSize = 0;
01621                     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpNewBuffer;
01622                     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpOldBuffer;
01623                     <span class="keywordflow">if</span> (lpBuffer)
01624                     {
01625                         lpNewBuffer = lpBuffer + *lpcbSize;
01626                         lpOldBuffer = lpNewBuffer;
01627                         lpNewBuffer += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpNewBuffer, NewLine);
01628                         cbNewSize = dwSaveSize - (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>) (lpNewBuffer - lpBuffer);
01629                     } <span class="keywordflow">else</span>
01630                         lpNewBuffer = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
01631 
01632                     <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d9/ps2_8c.html#a184">GetPS2CSA_ABC</a> (cp, lpNewBuffer, &amp;cbNewSize,
01633                                         (CSIG)InputIntent, InpDrvClrSp, 
01634                                         AllowBinary, 1))   <span class="comment">// create a backup CSA</span>
01635                         <a class="code" href="../../d0/d4/jul98_2dll32_2getcsa_8c.html#a7">GetDeviceRGB</a> (lpNewBuffer, &amp;cbNewSize, InpDrvClrSp, 1);
01636 
01637                     <span class="keywordflow">if</span> (lpBuffer)
01638                     {
01639                         lpNewBuffer += cbNewSize;
01640                         *lpcbSize += (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>) (lpNewBuffer - lpOldBuffer);
01641                     } <span class="keywordflow">else</span>
01642                         *lpcbSize += cbNewSize;
01643 
01644                 }
01645                 <span class="keywordflow">if</span> (!Success)
01646                 {                           <span class="comment">// Create CieBasedABC</span>
01647                     Success = <a class="code" href="../../d2/d9/ps2_8c.html#a184">GetPS2CSA_ABC</a> (cp, lpBuffer, lpcbSize,
01648                                          (CSIG)InputIntent, InpDrvClrSp, 
01649                                          AllowBinary, 0);
01650                 }
01651                 <span class="keywordflow">if</span> (!Success)
01652                 {                           <span class="comment">// Create DeviceRGB</span>
01653                     Success = <a class="code" href="../../d0/d4/jul98_2dll32_2getcsa_8c.html#a7">GetDeviceRGB</a> (lpBuffer, lpcbSize, InpDrvClrSp, 0);
01654                     Success = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01655                 }
01656                 <span class="keywordflow">break</span>;
01657             <span class="keywordflow">case</span> <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a118">icSigCmykData</a>:
01658                 Success = <a class="code" href="../../d7/d4/jul98_2test_2getcsa_8h.html#a1">GetPS2CSA_DEFG_Intent</a> (cp, lpBuffer, lpcbSize,
01659                                                  InpDrvClrSp, (CSIG) InputIntent, 
01660                                                  TYPE_CIEBASEDDEFG, AllowBinary);
01661                 <span class="keywordflow">if</span> (Success)
01662                 {                       <span class="comment">// Create DeviceCMYK for the printer</span>
01663                                         <span class="comment">// which does not support CieBasedDEF(G).</span>
01664                     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> cbNewSize = 0;
01665                     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpNewBuffer;
01666                     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpOldBuffer;
01667                     <span class="keywordflow">if</span> (lpBuffer)
01668                     {
01669                         lpNewBuffer = lpBuffer + *lpcbSize;
01670                         lpOldBuffer = lpNewBuffer;
01671                         lpNewBuffer += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpNewBuffer, NewLine);
01672                         lpNewBuffer += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpNewBuffer, NotSupportDEFG_S);
01673                         cbNewSize = dwSaveSize - (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>) (lpNewBuffer - lpBuffer);
01674                     } <span class="keywordflow">else</span>
01675                         lpNewBuffer = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
01676 
01677                     <a class="code" href="../../d0/d4/jul98_2dll32_2getcsa_8c.html#a8">GetDeviceCMYK</a> (lpNewBuffer, &amp;cbNewSize, InpDrvClrSp);
01678 
01679                     <span class="keywordflow">if</span> (lpBuffer)
01680                     {
01681                         lpNewBuffer += cbNewSize;
01682                         lpNewBuffer += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpNewBuffer, SupportDEFG_E);
01683                         *lpcbSize += (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>) (lpNewBuffer - lpOldBuffer);
01684                     } <span class="keywordflow">else</span>
01685                         *lpcbSize += cbNewSize;
01686                 }
01687                 <span class="keywordflow">if</span> (!Success)
01688                 {                           <span class="comment">// Create DeviceCMYK</span>
01689                     Success = <a class="code" href="../../d0/d4/jul98_2dll32_2getcsa_8c.html#a8">GetDeviceCMYK</a> (lpBuffer, lpcbSize, InpDrvClrSp);
01690                     Success = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01691                 }
01692                 <span class="keywordflow">break</span>;
01693             <span class="keywordflow">case</span> <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a115">icSigGrayData</a>:
01694                 Success = <a class="code" href="../../d0/d4/jul98_2dll32_2getcsa_8c.html#a19">GetPS2CSA_MONO</a> (cp, lpBuffer, lpcbSize, InpDrvClrSp, 
01695                                           (CSIG)InputIntent, AllowBinary);
01696                 <span class="keywordflow">if</span> (!Success)
01697                 {                           <span class="comment">// Create DeviceGray</span>
01698                     Success = <a class="code" href="../../d0/d4/jul98_2dll32_2getcsa_8c.html#a9">GetDeviceGray</a> (lpBuffer, lpcbSize, InpDrvClrSp);
01699                     Success = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01700                 }
01701                 <span class="keywordflow">break</span>;
01702             <span class="keywordflow">case</span> <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a110">icSigLabData</a>:
01703                 Success = <a class="code" href="../../d7/d4/jul98_2test_2getcsa_8h.html#a1">GetPS2CSA_DEFG_Intent</a> (cp, lpBuffer, lpcbSize,
01704                                                  InpDrvClrSp, (CSIG) InputIntent, 
01705                                                  TYPE_CIEBASEDDEF, AllowBinary);
01706                 <span class="keywordflow">if</span> (Success)
01707                 {                       <span class="comment">// Create CieBasedABC or DeviceRGB</span>
01708                                         <span class="comment">// for the printer</span>
01709                                         <span class="comment">// which does not support CieBasedDEF(G).</span>
01710                     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> cbNewSize = 0;
01711                     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpNewBuffer;
01712                     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpOldBuffer;
01713                     <span class="keywordflow">if</span> (lpBuffer)
01714                     {
01715                         lpNewBuffer = lpBuffer + *lpcbSize;
01716                         lpOldBuffer = lpNewBuffer;
01717                         lpNewBuffer += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpNewBuffer, NewLine);
01718                         lpNewBuffer += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpNewBuffer, NotSupportDEFG_S);
01719                         cbNewSize = dwSaveSize - (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>) (lpNewBuffer - lpBuffer);
01720                     } <span class="keywordflow">else</span>
01721                         lpNewBuffer = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
01722 
01723                     <a class="code" href="../../d7/d4/jul98_2test_2getcsa_8h.html#a3">GetPS2CSA_ABC_LAB</a> (cp, lpNewBuffer, &amp;cbNewSize,
01724                                         (CSIG)InputIntent, InpDrvClrSp, AllowBinary);
01725 
01726                     <span class="keywordflow">if</span> (lpBuffer)
01727                     {
01728                         lpNewBuffer += cbNewSize;
01729                         lpNewBuffer += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpNewBuffer, SupportDEFG_E);
01730                         *lpcbSize += (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>) (lpNewBuffer - lpOldBuffer);
01731                     } <span class="keywordflow">else</span>
01732                         *lpcbSize += cbNewSize;
01733                 }
01734                 <span class="keywordflow">if</span> (!Success)
01735                 {                           <span class="comment">// Create CieBasedABC</span>
01736                     Success = <a class="code" href="../../d7/d4/jul98_2test_2getcsa_8h.html#a3">GetPS2CSA_ABC_LAB</a> (cp, lpBuffer, lpcbSize,
01737                                          (CSIG)InputIntent, InpDrvClrSp, AllowBinary);
01738                 }
01739                 <span class="keywordflow">break</span>;
01740 
01741             <span class="keywordflow">default</span>:
01742                 <span class="keywordflow">break</span>;
01743         }
01744     }
01745     <span class="keywordflow">return</span> Success;
01746 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a16" doxytag="jan99/dll32/getcsa.c::GetPS2CSA_ABC" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL GetPS2CSA_ABC           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpMem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpcbSize</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>InputIntent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>InpDrvClrSp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>AllowBinary</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>BackupCSA</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d3/jan99_2dll32_2getcsa_8c-source.html#l00642">642</a> of file <a class="el" href="../../d0/d3/jan99_2dll32_2getcsa_8c-source.html">jan99/dll32/getcsa.c</a>.
<p>
References <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00092">AdobeCSA</a>, <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00108">AllowBinary</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00007">BeginArray</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00011">BeginDict</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00009">BeginFunction</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l05001">BeginGlobalDict()</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00070">CieBasedABCBegin</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00074">CieBasedABCEnd</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00036">CIEBasedABCTag</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l02501">CreateColSpArray()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l02581">CreateColSpProc()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l02657">CreateFloatString()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00074">CSIG</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00040">DecodeABCTag</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00041">DecodeLMNTag</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04055">DoesTRCAndColorantTagExist()</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04987">EnableGlobalDict()</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00008">EndArray</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00012">EndDict</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00010">EndFunction</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00057">EndOp</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l00069">GetCPConnSpace</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l00070">GetCPDevSpace</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04074">GetCPWhitePoint()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l05068">GetMediaWP()</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00306">icAbsoluteColorimetric</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00143">icSigBlueColorantTag</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00144">icSigBlueTRCTag</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00258">icSigDefData</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00156">icSigGreenColorantTag</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00157">icSigGreenTRCTag</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00177">icSigRedColorantTag</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00178">icSigRedTRCTag</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00252">icSigRgbData</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00799">IsSRGB()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00107">LPCSIG</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00106">LPSFLOAT</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00029">MatrixABCTag</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00080">MEMPTR</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00060">MulOp</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00063">NewLine</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00124">NotSupportDEFG_S</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00077">RangeLMN</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00031">RangeLMNTag</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l05027">SendCSABWPoint()</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00054">SetGlobalOp</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00069">SFLOAT</a>, <a class="el" href="../../d7/d6/aug98_2dll32_2icmdll_8h-source.html#l00011">SINT</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00125">SupportDEFG_E</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l01193">WriteFloat()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04573">WriteNewLineObject()</a>, and <a class="el" href="../../d3/d8/ps2_8c-source.html#l00072">WriteObject</a>.
<p>
<pre class="fragment"><div>00645 {
00646     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a17">CSIG</a> PCS, Dev;
00647     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a16">SFLOAT</a> IlluminantWP[3];
00648     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a16">SFLOAT</a> MediaWP[3];
00649 
00650     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a> i;
00651     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpOldMem = lpMem;
00652     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a> Ret = 0; 
00653     
00654  <span class="comment">// Check if we can generate the CS.</span>
00655  <span class="comment">// Required  tags are: red, green and blue Colorants.</span>
00656  <span class="comment">// As for TRC tags - we are quite flexible here - if we cannot find the</span>
00657  <span class="comment">// required tag - we assume the linear responce</span>
00658     <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d9/ps2_8c.html#a40">GetCPConnSpace</a> (cp, (LPCSIG) &amp; PCS) ||
00659         !<a class="code" href="../../d2/d9/ps2_8c.html#a41">GetCPDevSpace</a> (cp, (LPCSIG) &amp; Dev) ||
00660         (Dev != <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a114">icSigRgbData</a>) ||
00661         !<a class="code" href="../../d2/d9/ps2_8c.html#a190">DoesTRCAndColorantTagExist</a>(cp))
00662     {
00663         <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00664     }
00665     <span class="keywordflow">if</span> ((InpDrvClrSp != <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a114">icSigRgbData</a>) &amp;&amp;
00666         (InpDrvClrSp != <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a120">icSigDefData</a>) &amp;&amp;
00667         (InpDrvClrSp != 0))
00668     {
00669         <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00670     }
00671  <span class="comment">// Estimate the memory size required to hold CS</span>
00672 
00673     <span class="keywordflow">if</span> (lpMem == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)                  <span class="comment">// This is a size request</span>
00674     {
00675         *lpcbSize = 65530;
00676         <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
00677     }
00678 
00679  <span class="comment">// Get info about Illuminant White Point from the header</span>
00680     <a class="code" href="../../d2/d9/ps2_8c.html#a191">GetCPWhitePoint</a> (cp, (LPSFLOAT) &amp; IlluminantWP);     <span class="comment">// .. Illuminant</span>
00681                                                             
00682  <span class="comment">// Support absolute whitePoint</span>
00683     <a class="code" href="../../d2/d9/ps2_8c.html#a209">GetMediaWP</a>(cp, InputIntent, IlluminantWP, MediaWP);
00684 
00685  <span class="comment">//*********** Creating global data</span>
00686 
00687     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, CieBasedABCBegin);
00688 
00689     <span class="keywordflow">if</span> (<a class="code" href="../../d9/d3/jan99_2dll32_2getcsa_8c.html#a2">IsSRGB</a>(cp))
00690     {
00691        lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, AdobeCSA);
00692     }
00693     <span class="keywordflow">else</span>
00694     {
00695        lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a220">EnableGlobalDict</a>(lpMem);
00696        
00697        <span class="keywordflow">if</span> (BackupCSA)
00698        {
00699            lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, NotSupportDEFG_S);
00700        }
00701    
00702        lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a221">BeginGlobalDict</a>(lpMem);
00703    
00704        lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a212">CreateColSpArray</a> (cp, lpMem, icSigRedTRCTag, AllowBinary);
00705        lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a212">CreateColSpArray</a> (cp, lpMem, icSigGreenTRCTag, AllowBinary);
00706        lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a212">CreateColSpArray</a> (cp, lpMem, icSigBlueTRCTag, AllowBinary);
00707    
00708        lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, EndOp);
00709    
00710        <span class="keywordflow">if</span> (BackupCSA)
00711        {
00712            lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, SupportDEFG_E);
00713        }
00714        lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, SetGlobalOp);
00715    
00716        <span class="keywordflow">if</span> (BackupCSA)
00717        {
00718            lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, NotSupportDEFG_S);
00719        }
00720    
00721     <span class="comment">//*********** Start creating the ColorSpace</span>
00722        lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, BeginArray);   <span class="comment">// Begin array</span>
00723     <span class="comment">//********** /CIEBasedABC</span>
00724        lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, CIEBasedABCTag);   <span class="comment">// Create entry</span>
00725        lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginDict);    <span class="comment">// Begin dictionary</span>
00726    
00727     <span class="comment">//********** Black/White Point</span>
00728        lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a208">SendCSABWPoint</a>(lpMem, InputIntent, IlluminantWP, MediaWP);
00729    
00730     <span class="comment">//********** /DecodeABC</span>
00731        lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, DecodeABCTag);
00732        lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginArray);
00733    
00734        lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
00735        lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a213">CreateColSpProc</a> (cp, lpMem, icSigRedTRCTag, AllowBinary);
00736        lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
00737        lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a213">CreateColSpProc</a> (cp, lpMem, icSigGreenTRCTag, AllowBinary);
00738        lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
00739        lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a213">CreateColSpProc</a> (cp, lpMem, icSigBlueTRCTag, AllowBinary);
00740        lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndArray);
00741    
00742     <span class="comment">//********** /MatrixABC</span>
00743        lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, MatrixABCTag);
00744        lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginArray);
00745    
00746        lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a214">CreateFloatString</a> (cp, lpMem, icSigRedColorantTag);
00747        lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a214">CreateFloatString</a> (cp, lpMem, icSigGreenColorantTag);
00748        lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a214">CreateFloatString</a> (cp, lpMem, icSigBlueColorantTag);
00749    
00750        lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndArray);
00751    
00752     <span class="comment">//********** /RangeLMN</span>
00753        lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, RangeLMNTag);
00754        lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, RangeLMN);
00755    
00756     <span class="comment">//********** /DecodeLMN</span>
00757        <span class="keywordflow">if</span> (InputIntent == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a145">icAbsoluteColorimetric</a>)
00758        {
00759            <span class="comment">// Support absolute whitePoint</span>
00760            lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, DecodeLMNTag);
00761            lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginArray);
00762            <span class="keywordflow">for</span> (i = 0; i &lt; 3; i ++)
00763            {
00764                lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginFunction);
00765                lpMem += <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a46">WriteFloat</a> (lpMem, (<span class="keywordtype">double</span>)MediaWP[i]/IlluminantWP[i]);
00766                lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, MulOp); 
00767                lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndFunction);
00768            }
00769            lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndArray);
00770        }
00771    
00772     <span class="comment">//********** End dictionary definition</span>
00773        lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, EndDict);
00774        lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndArray);
00775    
00776        <span class="keywordflow">if</span> (BackupCSA)
00777        {
00778            lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, SupportDEFG_E);
00779        }
00780    
00781     }
00782     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, CieBasedABCEnd);
00783     *lpcbSize = (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>) ((lpMem - lpOldMem));
00784     <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
00785 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a17" doxytag="jan99/dll32/getcsa.c::GetPS2CSA_ABC_LAB" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL GetPS2CSA_ABC_LAB           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpMem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpcbSize</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>InputIntent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>InpDrvClrSp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>AllowBinary</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d3/jan99_2dll32_2getcsa_8c-source.html#l00812">812</a> of file <a class="el" href="../../d0/d3/jan99_2dll32_2getcsa_8c-source.html">jan99/dll32/getcsa.c</a>.
<p>
References <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00007">BeginArray</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00011">BeginDict</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00009">BeginFunction</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00074">CieBasedABCEnd</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00036">CIEBasedABCTag</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00074">CSIG</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00136">DecodeABCLab1</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00040">DecodeABCTag</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00138">DecodeLMNLab</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00041">DecodeLMNTag</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00008">EndArray</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00012">EndDict</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00010">EndFunction</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l00069">GetCPConnSpace</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l00070">GetCPDevSpace</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04074">GetCPWhitePoint()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l05068">GetMediaWP()</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00306">icAbsoluteColorimetric</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00258">icSigDefData</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00248">icSigLabData</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00107">LPCSIG</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00106">LPSFLOAT</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00135">MatrixABCLab</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00029">MatrixABCTag</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00080">MEMPTR</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00060">MulOp</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00063">NewLine</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00079">RangeABC_Lab</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00027">RangeABCTag</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l05027">SendCSABWPoint()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00069">SFLOAT</a>, <a class="el" href="../../d7/d6/aug98_2dll32_2icmdll_8h-source.html#l00011">SINT</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l01193">WriteFloat()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04573">WriteNewLineObject()</a>, and <a class="el" href="../../d3/d8/ps2_8c-source.html#l00072">WriteObject</a>.
<p>
<pre class="fragment"><div>00814 {
00815     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a17">CSIG</a> PCS, Dev;
00816     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a16">SFLOAT</a> IlluminantWP[3];
00817     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a16">SFLOAT</a> MediaWP[3];
00818 
00819     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a> i;
00820     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpOldMem = lpMem;
00821     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a> Ret = 0;
00822  <span class="comment">// Check if we can generate the CS.</span>
00823  <span class="comment">// Required  tags are: red, green and blue Colorants.</span>
00824  <span class="comment">// As for TRC tags - we are quite flexible here - if we cannot find the</span>
00825  <span class="comment">// required tag - we assume the linear responce</span>
00826     <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d9/ps2_8c.html#a40">GetCPConnSpace</a> (cp, (LPCSIG) &amp; PCS) ||
00827         !<a class="code" href="../../d2/d9/ps2_8c.html#a41">GetCPDevSpace</a> (cp, (LPCSIG) &amp; Dev) ||
00828         (Dev != <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a110">icSigLabData</a>))
00829     {
00830         <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00831     }
00832     <span class="keywordflow">if</span> ((InpDrvClrSp != <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a110">icSigLabData</a>) &amp;&amp;
00833         (InpDrvClrSp != <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a120">icSigDefData</a>) &amp;&amp;
00834         (InpDrvClrSp != 0))
00835     {
00836         <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00837     }
00838  <span class="comment">// Estimate the memory size required to hold CS</span>
00839 
00840     <span class="keywordflow">if</span> (lpMem == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)                  <span class="comment">// This is a size request</span>
00841     {
00842         *lpcbSize = 65530;
00843         <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
00844     }
00845  <span class="comment">// Get info about Illuminant White Point from the header</span>
00846     <a class="code" href="../../d2/d9/ps2_8c.html#a191">GetCPWhitePoint</a> (cp, (LPSFLOAT) &amp; IlluminantWP);     <span class="comment">// .. Illuminant</span>
00847                                                          
00848  <span class="comment">// Support absolute whitePoint</span>
00849     <a class="code" href="../../d2/d9/ps2_8c.html#a209">GetMediaWP</a>(cp, InputIntent, IlluminantWP, MediaWP);
00850 
00851  <span class="comment">//*********** Start creating the ColorSpace</span>
00852     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, BeginArray);   <span class="comment">// Begin array</span>
00853 
00854  <span class="comment">//********** /CIEBasedABC</span>
00855     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, CIEBasedABCTag);   <span class="comment">// Create entry</span>
00856     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginDict);    <span class="comment">// Begin dictionary</span>
00857 
00858  <span class="comment">//********** Black/White Point</span>
00859     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a208">SendCSABWPoint</a>(lpMem, InputIntent, IlluminantWP, MediaWP);
00860 
00861  <span class="comment">//********** /RangeABC</span>
00862     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, RangeABCTag);
00863     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, RangeABC_Lab);
00864 
00865  <span class="comment">//********** /DecodeABC</span>
00866     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, DecodeABCTag);
00867     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, DecodeABCLab1);
00868 
00869  <span class="comment">//********** /MatrixABC</span>
00870     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, MatrixABCTag);
00871     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, MatrixABCLab);
00872 
00873  <span class="comment">//********** /DecodeLMN</span>
00874     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, DecodeLMNTag);
00875     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginArray);
00876     <span class="keywordflow">for</span> (i = 0; i &lt; 3; i ++)
00877     {
00878         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginFunction);
00879         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, DecodeLMNLab);
00880         <span class="keywordflow">if</span> (InputIntent == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a145">icAbsoluteColorimetric</a>)
00881         {
00882             lpMem += <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a46">WriteFloat</a> (lpMem, (<span class="keywordtype">double</span>) MediaWP[i]);
00883         }
00884         <span class="keywordflow">else</span>
00885         {
00886             lpMem += <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a46">WriteFloat</a> (lpMem, (<span class="keywordtype">double</span>) IlluminantWP[i]);
00887         }
00888         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, MulOp); 
00889         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndFunction);
00890         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
00891     }
00892     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndArray);
00893 
00894 
00895  <span class="comment">//********** End dictionary definition</span>
00896     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, EndDict);
00897     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndArray);
00898 
00899     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, CieBasedABCEnd);
00900     *lpcbSize = (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>) ((lpMem - lpOldMem));
00901     <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
00902 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a15" doxytag="jan99/dll32/getcsa.c::GetPS2CSA_DEFG" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL GetPS2CSA_DEFG           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpMem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpcbSize</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>InputIntent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Index</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>Type</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>AllowBinary</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d3/jan99_2dll32_2getcsa_8c-source.html#l00261">261</a> of file <a class="el" href="../../d0/d3/jan99_2dll32_2getcsa_8c-source.html">jan99/dll32/getcsa.c</a>.
<p>
References <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00108">AllowBinary</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00007">BeginArray</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00011">BeginDict</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00009">BeginFunction</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l05001">BeginGlobalDict()</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00005">BeginString</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00069">CieBasedDEFBegin</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00073">CieBasedDEFEnd</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00068">CieBasedDEFGBegin</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00072">CieBasedDEFGEnd</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00037">CIEBasedDEFGTag</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00038">CIEBasedDEFTag</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00083">Clip01</a>, <a class="el" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a48a47">CP_POSTSCRIPT_ERR</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l02709">CreateInputArray()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l02834">CreateOutputArray()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00074">CSIG</a>, <a class="el" href="../../d0/d3/jan99_2dll32_2getcsa_8c-source.html#l00006">DecodeABCLab</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00040">DecodeABCTag</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00046">DecodeDEFGTag</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00047">DecodeDEFTag</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00138">DecodeLMNLab</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00041">DecodeLMNTag</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04987">EnableGlobalDict()</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00147">EncodeABCLab1</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00148">EncodeABCLab2</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00008">EndArray</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00128">EndClip</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00012">EndDict</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00010">EndFunction</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00057">EndOp</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00006">EndString</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d6/aug98_2dll32_2icmdll_8h-source.html#l00010">FAR</a>, <a class="el" href="../../d9/d4/aug98_2dll32_2profcrd_8c-source.html#l00099">GetCLUTinfo()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l00069">GetCPConnSpace</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l00557">GetCPElement()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04143">GetCPElementSize()</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l00485">GetCPElementType()</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l00461">GetCPTagSig()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04074">GetCPWhitePoint()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l05068">GetMediaWP()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l02953">GetPublicArrayName()</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00306">icAbsoluteColorimetric</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00248">icSigLabData</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00220">icSigLut16Type</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00221">icSigLut8Type</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00247">icSigXYZData</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00347">icUInt16Number</a>, <a class="el" href="../../d2/d9/cmchek_8c-source.html#l00095">Index</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00115">IndexArray</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00110">IndexArray16b</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00087">InputArray</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00118">lpcpLut16Type</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00119">lpcpLut8Type</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00107">LPCSIG</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00109">LPMEMPTR</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00106">LPSFLOAT</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00105">LPSINT</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00135">MatrixABCLab</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00029">MatrixABCTag</a>, <a class="el" href="../../d3/d8/aug98_2dll32_2csprof_8h-source.html#l00016">MAX_LINELENG</a>, <a class="el" href="../../d3/d0/object_8c-source.html#l00205">MemAlloc()</a>, <a class="el" href="../../d3/d0/object_8c-source.html#l00260">MemFree()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00080">MEMPTR</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00060">MulOp</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00063">NewLine</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00088">OutputArray</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00077">RangeLMN</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00031">RangeLMNTag</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00131">Scale16</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00132">Scale16XYZ</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00130">Scale8</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l05027">SendCSABWPoint()</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l00021">SetCPLastError()</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00054">SetGlobalOp</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00069">SFLOAT</a>, <a class="el" href="../../d7/d6/aug98_2dll32_2icmdll_8h-source.html#l00011">SINT</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00127">StartClip</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00125">SupportDEFG_E</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00123">SupportDEFG_S</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00045">TableTag</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l00006">TempBfSize</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00120">TestingDEFG</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00134">TFunction8XYZ</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d3/d8/aug98_2dll32_2csprof_8h-source.html#l00012">TYPE_CIEBASEDDEF</a>, <a class="el" href="../../d3/d8/aug98_2dll32_2csprof_8h-source.html#l00013">TYPE_CIEBASEDDEFG</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00135">ui16toSINT</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04401">WriteByteString()</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l01193">WriteFloat()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l00081">WriteHex</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04351">WriteHexBuffer()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l00080">WriteInt</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04422">WriteInt2ByteString()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04573">WriteNewLineObject()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l00072">WriteObject</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l01152">WriteObjectN()</a>, and <a class="el" href="../../d3/d8/ps2_8c-source.html#l04381">WriteStringToken()</a>.
<p>
<pre class="fragment"><div>00269 {
00270     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a17">CSIG</a> PCS, LutTag;
00271     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a17">CSIG</a> IntentSig;
00272     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a16">SFLOAT</a> IlluminantWP[3];
00273     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a16">SFLOAT</a> MediaWP[3];
00274     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a> nInputCh, nOutputCh, nGrids, SecondGrids;
00275     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a> nInputTable, nOutputTable, nNumbers;
00276     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a> i, j, k;
00277     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpTable;
00278     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpOldMem = lpMem;
00279     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpLut = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00280     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpLineStart;
00281     HGLOBAL hLut = 0;
00282     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a> LutSize;
00283     <span class="keywordtype">char</span> PublicArrayName[<a class="code" href="../../d8/d8/aug98_2dll32_2csprof_8c.html#a1">TempBfSize</a>];
00284  <span class="comment">// Check if we can generate the CS.</span>
00285  <span class="comment">// Required  tags are: red, green and blue Colorants.</span>
00286  <span class="comment">// As for TRC tags - we are quite flexible here - if we cannot find the</span>
00287  <span class="comment">// required tag - we assume the linear responce</span>
00288     <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d9/ps2_8c.html#a40">GetCPConnSpace</a> (cp, (LPCSIG) &amp; PCS) ||
00289         (PCS != <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a110">icSigLabData</a>) &amp;&amp; (PCS != <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a109">icSigXYZData</a>) ||
00290         !<a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a15">GetCPTagSig</a> (cp, Index, (LPCSIG) &amp; IntentSig))
00291     {
00292         <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00293     }
00294     <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a16">GetCPElementType</a> (cp, Index, (LPCSIG) &amp; LutTag) ||
00295         ((LutTag != <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a91">icSigLut8Type</a>) &amp;&amp; (LutTag != <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a90">icSigLut16Type</a>)) ||
00296         !<a class="code" href="../../d2/d9/ps2_8c.html#a194">GetCPElementSize</a> (cp, Index, (LPSINT) &amp; LutSize) ||
00297         !<a class="code" href="../../d2/d1/object_8c.html#a7">MemAlloc</a> (LutSize, (HGLOBAL FAR *) &amp;hLut, (LPMEMPTR) &amp; lpLut) ||
00298         !<a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a19">GetCPElement</a> (cp, Index, lpLut, LutSize))
00299     {
00300         <span class="keywordflow">if</span> (0 != hLut)
00301         {
00302             <a class="code" href="../../d2/d1/object_8c.html#a9">MemFree</a> (hLut);
00303         }
00304         <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00305     }
00306  <span class="comment">// Estimate the memory size required to hold CS</span>
00307 
00308     <a class="code" href="../../d7/d4/jul98_2test_2getcsa_8h.html#a7">GetCLUTinfo</a>(LutTag, lpLut, &amp;nInputCh, &amp;nOutputCh, 
00309         &amp;nGrids, &amp;nInputTable, &amp;nOutputTable, &amp;i);
00310 
00311  <span class="comment">// Level 2 printers support only tri-component CIEBasedABC input,</span>
00312  <span class="comment">// but can have either 3 or 4 output channels.</span>
00313     <span class="keywordflow">if</span> (!(nOutputCh == 3) ||
00314         !((nInputCh == 3) &amp;&amp; (Type == <a class="code" href="../../d2/d9/aug98_2dll32_2csprof_8h.html#a0">TYPE_CIEBASEDDEF</a>)) &amp;&amp;
00315         !((nInputCh == 4) &amp;&amp; (Type == <a class="code" href="../../d2/d9/aug98_2dll32_2csprof_8h.html#a1">TYPE_CIEBASEDDEFG</a>)))
00316     {
00317         <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a39">SetCPLastError</a> (CP_POSTSCRIPT_ERR);
00318         <a class="code" href="../../d2/d1/object_8c.html#a9">MemFree</a> (hLut);
00319         <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00320     }
00321     <span class="keywordflow">if</span> (lpMem == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)                  <span class="comment">// This is a size request</span>
00322     {
00323         <span class="keywordflow">if</span> (Type == <a class="code" href="../../d2/d9/aug98_2dll32_2csprof_8h.html#a1">TYPE_CIEBASEDDEFG</a>)
00324             *lpcbSize = nOutputCh * nGrids * nGrids * nGrids * nGrids * 2;  <span class="comment">// LUT HEX bytes</span>
00325         <span class="keywordflow">else</span>
00326             *lpcbSize = nOutputCh * nGrids * nGrids * nGrids * 2;   <span class="comment">// LUT HEX bytes</span>
00327 
00328         *lpcbSize = *lpcbSize +
00329             nInputCh * nInputTable * 6 +
00330             nOutputCh * nOutputTable * 6 +  <span class="comment">// Number of INT bytes</span>
00331             nInputCh * (lstrlen (IndexArray) +
00332                         lstrlen (StartClip) +
00333                         lstrlen (EndClip)) +
00334             nOutputCh * (lstrlen (IndexArray) +
00335                          lstrlen (StartClip) +
00336                          lstrlen (EndClip)) +
00337             4096;                       <span class="comment">// + other PS stuff</span>
00338 
00339 
00340         <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
00341     }
00342  <span class="comment">// Get info about Illuminant White Point from the header</span>
00343     <a class="code" href="../../d2/d9/ps2_8c.html#a191">GetCPWhitePoint</a> (cp, (LPSFLOAT) &amp; IlluminantWP);          <span class="comment">// .. Illuminant</span>
00344 
00345  <span class="comment">// Support absolute whitePoint</span>
00346     <a class="code" href="../../d2/d9/ps2_8c.html#a209">GetMediaWP</a>(cp, InputIntent, IlluminantWP, MediaWP);
00347 
00348  <span class="comment">//*********** Testing CieBasedDEFG support</span>
00349     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, TestingDEFG);
00350 
00351  <span class="comment">//*********** Creating global data</span>
00352     <a class="code" href="../../d2/d9/ps2_8c.html#a217">GetPublicArrayName</a> (cp, IntentSig, PublicArrayName);
00353     <span class="keywordflow">if</span> (Type == <a class="code" href="../../d2/d9/aug98_2dll32_2csprof_8h.html#a1">TYPE_CIEBASEDDEFG</a>)
00354         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, CieBasedDEFGBegin);
00355     <span class="keywordflow">else</span>
00356         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, CieBasedDEFBegin);
00357 
00358     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a220">EnableGlobalDict</a>(lpMem);
00359     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, SupportDEFG_S);
00360     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a221">BeginGlobalDict</a>(lpMem);
00361 
00362     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a215">CreateInputArray</a> (lpMem, nInputCh, nInputTable,
00363              (MEMPTR) PublicArrayName, LutTag, lpLut, AllowBinary, NULL);
00364 
00365     <span class="keywordflow">if</span> (Type == <a class="code" href="../../d2/d9/aug98_2dll32_2csprof_8h.html#a1">TYPE_CIEBASEDDEFG</a>)
00366     {
00367         i = nInputTable * nInputCh +
00368             nGrids * nGrids * nGrids * nGrids * nOutputCh;
00369     } <span class="keywordflow">else</span>
00370     {
00371         i = nInputTable * nInputCh +
00372             nGrids * nGrids * nGrids * nOutputCh;
00373     }
00374     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a216">CreateOutputArray</a> (lpMem, nOutputCh, nOutputTable, i,
00375              (MEMPTR) PublicArrayName, LutTag, lpLut, AllowBinary, NULL);
00376 
00377     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, EndOp);
00378     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, SupportDEFG_E);
00379     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, SetGlobalOp);
00380     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, SupportDEFG_S);
00381 
00382  <span class="comment">//*********** Start creating the ColorSpace</span>
00383     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, BeginArray);   <span class="comment">// Begin array</span>
00384 
00385  <span class="comment">//********** /CIEBasedDEF(G)</span>
00386     <span class="keywordflow">if</span> (Type == <a class="code" href="../../d2/d9/aug98_2dll32_2csprof_8h.html#a1">TYPE_CIEBASEDDEFG</a>)
00387         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, CIEBasedDEFGTag);
00388     <span class="keywordflow">else</span>
00389         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, CIEBasedDEFTag);
00390     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginDict);    <span class="comment">// Begin dictionary</span>
00391 
00392  <span class="comment">//********** Black/White Point</span>
00393     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a208">SendCSABWPoint</a>(lpMem, InputIntent, IlluminantWP, MediaWP);
00394 
00395  <span class="comment">//********** /DecodeDEF(G)</span>
00396     lpLineStart = lpMem;
00397     <span class="keywordflow">if</span> (Type == <a class="code" href="../../d2/d9/aug98_2dll32_2csprof_8h.html#a1">TYPE_CIEBASEDDEFG</a>)
00398         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, DecodeDEFGTag);
00399     <span class="keywordflow">else</span>
00400         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, DecodeDEFTag);
00401 
00402     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginArray);
00403     <span class="keywordflow">for</span> (i = 0; i &lt; nInputCh; i++)
00404     {
00405         lpLineStart = lpMem;
00406 
00407         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, BeginFunction);
00408 <span class="preprocessor">#if 0</span>
00409 <span class="preprocessor"></span>        <span class="keywordflow">if</span> (PCS == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a110">icSigLabData</a>)
00410         {
00411             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem,
00412                                   (0 == i) ? EncodeABCLab1 : EncodeABCLab2);
00413         }
00414 <span class="preprocessor">#endif</span>
00415 <span class="preprocessor"></span>        lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, StartClip);
00416         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, InputArray);
00417         lpMem += <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a44">WriteObjectN</a> (lpMem, (MEMPTR) PublicArrayName, lstrlen (PublicArrayName));
00418         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a44">WriteInt</a> (lpMem, i);
00419 
00420         <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d8/aug98_2test_2main_8c.html#a27">AllowBinary</a>)               <span class="comment">// Output ASCII</span>
00421         {
00422             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, IndexArray);
00423         } <span class="keywordflow">else</span>
00424         {                               <span class="comment">// Output BINARY</span>
00425             <span class="keywordflow">if</span> (LutTag == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a91">icSigLut8Type</a>)
00426             {
00427                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, IndexArray);
00428             } <span class="keywordflow">else</span>
00429             {
00430                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, IndexArray16b);
00431             }
00432         }
00433         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, (LutTag == icSigLut8Type) ? Scale8 : Scale16);
00434         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndClip);
00435         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndFunction);
00436     }
00437     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndArray);
00438 
00439  <span class="comment">//********** /Table</span>
00440     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, TableTag);
00441     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginArray);
00442 
00443     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a44">WriteInt</a> (lpMem, nGrids);  <span class="comment">// Send down Nh</span>
00444     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a44">WriteInt</a> (lpMem, nGrids);  <span class="comment">// Send down Ni</span>
00445     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a44">WriteInt</a> (lpMem, nGrids);  <span class="comment">// Send down Nj</span>
00446     nNumbers = nGrids * nGrids * nOutputCh;
00447     SecondGrids = 1;
00448     <span class="keywordflow">if</span> (Type == <a class="code" href="../../d2/d9/aug98_2dll32_2csprof_8h.html#a1">TYPE_CIEBASEDDEFG</a>)
00449     {
00450         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a44">WriteInt</a> (lpMem, nGrids);  <span class="comment">// Send down Nk</span>
00451 <span class="comment">//       nNumbers = nGrids * nGrids * nGrids * nOutputCh ;</span>
00452         SecondGrids = nGrids;
00453     }
00454     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, BeginArray);
00455     <span class="keywordflow">for</span> (i = 0; i &lt; nGrids; i++)        <span class="comment">// Nh strings should be sent</span>
00456     {
00457         <span class="keywordflow">if</span> (Type == <a class="code" href="../../d2/d9/aug98_2dll32_2csprof_8h.html#a1">TYPE_CIEBASEDDEFG</a>)
00458         {
00459             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, BeginArray);
00460         }
00461         <span class="keywordflow">for</span> (k = 0; k &lt; SecondGrids; k++)
00462         {
00463             lpLineStart = lpMem;
00464             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
00465             <span class="keywordflow">if</span> (LutTag == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a91">icSigLut8Type</a>)
00466             {
00467                 lpTable = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>) (((<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a37">lpcpLut8Type</a>) lpLut)-&gt;lut.data) +
00468                     nInputTable * nInputCh +
00469                     nNumbers * (i * SecondGrids + k);
00470             } <span class="keywordflow">else</span>
00471             {
00472                 lpTable = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>) (((<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a36">lpcpLut16Type</a>) lpLut)-&gt;lut.data) +
00473                     2 * nInputTable * nInputCh +
00474                     2 * nNumbers * (i * SecondGrids + k);
00475             }
00476 
00477             <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d8/aug98_2test_2main_8c.html#a27">AllowBinary</a>)           <span class="comment">// Output ASCII</span>
00478             {
00479                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginString);
00480                 <span class="keywordflow">if</span> (LutTag == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a91">icSigLut8Type</a>)
00481                     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a227">WriteHexBuffer</a> (lpMem, lpTable, lpLineStart, nNumbers);
00482                 <span class="keywordflow">else</span>
00483                 {
00484                     <span class="keywordflow">for</span> (j = 0; j &lt; nNumbers; j++)
00485                     {
00486                         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a45">WriteHex</a> (lpMem, ui16toSINT (lpTable) / 256);
00487                         lpTable += <span class="keyword">sizeof</span> (<a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a185">icUInt16Number</a>);
00488                         <span class="keywordflow">if</span> (((<a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>) (lpMem - lpLineStart)) &gt; <a class="code" href="../../d2/d9/aug98_2dll32_2csprof_8h.html#a4">MAX_LINELENG</a>)
00489                         {
00490                             lpLineStart = lpMem;
00491                             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
00492                         }
00493                     }
00494                 }
00495                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndString);
00496             } <span class="keywordflow">else</span>
00497             {                           <span class="comment">// Output BINARY</span>
00498                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a228">WriteStringToken</a> (lpMem, 143, nNumbers);
00499                 <span class="keywordflow">if</span> (LutTag == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a91">icSigLut8Type</a>)
00500                     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a229">WriteByteString</a> (lpMem, lpTable, nNumbers);
00501                 <span class="keywordflow">else</span>
00502                     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a230">WriteInt2ByteString</a> (lpMem, lpTable, nNumbers);
00503             }
00504             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
00505         }
00506         <span class="keywordflow">if</span> (Type == <a class="code" href="../../d2/d9/aug98_2dll32_2csprof_8h.html#a1">TYPE_CIEBASEDDEFG</a>)
00507         {
00508             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndArray);
00509         }
00510     }
00511     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndArray);
00512     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndArray); <span class="comment">// End array</span>
00513 
00514  <span class="comment">//********** /DecodeABC</span>
00515     lpLineStart = lpMem;
00516     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, DecodeABCTag);
00517     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginArray);
00518     <span class="keywordflow">for</span> (i = 0; i &lt; nOutputCh; i++)
00519     {
00520         lpLineStart = lpMem;
00521         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, BeginFunction);
00522         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, Clip01);
00523         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, OutputArray);
00524         lpMem += <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a44">WriteObjectN</a> (lpMem, (MEMPTR) PublicArrayName, lstrlen (PublicArrayName));
00525         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a44">WriteInt</a> (lpMem, i);
00526 
00527         <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d8/aug98_2test_2main_8c.html#a27">AllowBinary</a>)               <span class="comment">// Output ASCII CRD</span>
00528         {
00529             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
00530 
00531             <span class="keywordflow">if</span> (LutTag == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a91">icSigLut8Type</a>)
00532             {
00533                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, TFunction8XYZ);
00534             } <span class="keywordflow">else</span>
00535             {
00536                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, IndexArray);
00537                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, Scale16XYZ);
00538             }
00539         } <span class="keywordflow">else</span>
00540         {                               <span class="comment">// Output BINARY CRD</span>
00541             <span class="keywordflow">if</span> (LutTag == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a91">icSigLut8Type</a>)
00542             {
00543                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, TFunction8XYZ);
00544             } <span class="keywordflow">else</span>
00545             {
00546                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, IndexArray16b);
00547                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, Scale16XYZ);
00548             }
00549         }
00550 
00551  <span class="comment">// Now, We get CieBasedXYZ output. Output range 0 --&gt; 1.99997</span>
00552  <span class="comment">// If the connection space is absolute XYZ, We need to convert </span>
00553  <span class="comment">// from relative XYZ to absolute XYZ.</span>
00554         <span class="keywordflow">if</span> ((PCS == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a109">icSigXYZData</a>) &amp;&amp;
00555             (InputIntent == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a145">icAbsoluteColorimetric</a>))
00556         {
00557             lpMem += <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a46">WriteFloat</a> (lpMem, (<span class="keywordtype">double</span>)MediaWP[i]/IlluminantWP[i]);
00558             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, MulOp); 
00559         }
00560  <span class="comment">// If the connection space is Lab, We need to convert XYZ to Lab.</span>
00561         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (PCS == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a110">icSigLabData</a>)
00562             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, DecodeABCLab[i]);
00563         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndFunction);
00564     }
00565     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndArray);
00566 
00567     <span class="keywordflow">if</span> (PCS == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a110">icSigLabData</a>)
00568     {
00569  <span class="comment">//********** /MatrixABC</span>
00570         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, MatrixABCTag);
00571         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, MatrixABCLab);
00572 
00573  <span class="comment">//********** /DecodeLMN</span>
00574         lpLineStart = lpMem;
00575         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, DecodeLMNTag);
00576         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginArray);
00577         <span class="keywordflow">for</span> (i = 0; i &lt; 3; i++)
00578         {
00579             lpLineStart = lpMem;
00580             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, BeginFunction);
00581             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, DecodeLMNLab);
00582             <span class="keywordflow">if</span> (InputIntent == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a145">icAbsoluteColorimetric</a>)
00583                 lpMem += <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a46">WriteFloat</a> (lpMem, (<span class="keywordtype">double</span>) MediaWP[i]);
00584             <span class="keywordflow">else</span> 
00585                 lpMem += <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a46">WriteFloat</a> (lpMem, (<span class="keywordtype">double</span>) IlluminantWP[i]);
00586             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, MulOp);
00587             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndFunction);
00588         }
00589         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndArray);
00590     } <span class="keywordflow">else</span>
00591     {
00592  <span class="comment">//********** /RangeLMN</span>
00593         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, RangeLMNTag);
00594         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, RangeLMN);
00595     }
00596 
00597  <span class="comment">//********** End dictionary definition</span>
00598     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, EndDict);
00599     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndArray);
00600 
00601     <span class="keywordflow">if</span> (Type == <a class="code" href="../../d2/d9/aug98_2dll32_2csprof_8h.html#a1">TYPE_CIEBASEDDEFG</a>)
00602         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, CieBasedDEFGEnd);
00603     <span class="keywordflow">else</span>
00604         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, CieBasedDEFEnd);
00605 
00606     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, SupportDEFG_E);
00607 
00608     *lpcbSize = (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>) (lpMem - lpOldMem);
00609 
00610     <a class="code" href="../../d2/d1/object_8c.html#a9">MemFree</a> (hLut);
00611     <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
00612 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a22" doxytag="jan99/dll32/getcsa.c::GetPS2CSA_DEFG_Intent" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL GetPS2CSA_DEFG_Intent           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpBuffer</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpcbSize</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>InpDrvClrSp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Intent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>Type</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>AllowBinary</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d3/jan99_2dll32_2getcsa_8c-source.html#l01502">1502</a> of file <a class="el" href="../../d0/d3/jan99_2dll32_2getcsa_8c-source.html">jan99/dll32/getcsa.c</a>.
<p>
References <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00108">AllowBinary</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00074">CSIG</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04007">DoesCPTagExist()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l00426">GetCPTagIndex()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l01895">GetPS2CSA_DEFG()</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00306">icAbsoluteColorimetric</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00303">icPerceptual</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00304">icRelativeColorimetric</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00305">icSaturation</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00139">icSigAToB0Tag</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00140">icSigAToB1Tag</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00141">icSigAToB2Tag</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00256">icSigCmykData</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00258">icSigDefData</a>, <a class="el" href="../../d2/d9/cmchek_8c-source.html#l00095">Index</a>, <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00109">Intent</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00105">LPSINT</a>, <a class="el" href="../../d7/d6/aug98_2dll32_2icmdll_8h-source.html#l00011">SINT</a>, <a class="el" href="../../d3/d8/aug98_2dll32_2csprof_8h-source.html#l00012">TYPE_CIEBASEDDEF</a>, and <a class="el" href="../../d3/d8/aug98_2dll32_2csprof_8h-source.html#l00013">TYPE_CIEBASEDDEFG</a>.
<p>
<pre class="fragment"><div>01510 {
01511     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a> <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>;
01512     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> Success = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01513     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a17">CSIG</a> icSigAToBx;
01514 
01515  <span class="comment">// Try to create CieBasedDEFG CSA first.</span>
01516     <span class="keywordflow">if</span> (((Type == <a class="code" href="../../d2/d9/aug98_2dll32_2csprof_8h.html#a1">TYPE_CIEBASEDDEFG</a>) &amp;&amp; (InpDrvClrSp != <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a118">icSigCmykData</a>) ||
01517          (Type == <a class="code" href="../../d2/d9/aug98_2dll32_2csprof_8h.html#a0">TYPE_CIEBASEDDEF</a>) &amp;&amp; (InpDrvClrSp != <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a120">icSigDefData</a>)) &amp;&amp;
01518         (InpDrvClrSp != 0))
01519     {
01520         <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
01521     }
01522     <span class="keywordflow">switch</span> (<a class="code" href="../../d3/d8/aug98_2test_2main_8c.html#a28">Intent</a>)
01523     {
01524         <span class="keywordflow">case</span> <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a142">icPerceptual</a>:
01525             icSigAToBx = <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a17">icSigAToB0Tag</a>;
01526             <span class="keywordflow">break</span>;
01527         <span class="keywordflow">case</span> <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a143">icRelativeColorimetric</a>:
01528             icSigAToBx = <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a18">icSigAToB1Tag</a>;
01529             <span class="keywordflow">break</span>;
01530         <span class="keywordflow">case</span> <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a144">icSaturation</a>:
01531             icSigAToBx = <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a19">icSigAToB2Tag</a>;
01532             <span class="keywordflow">break</span>;
01533         <span class="keywordflow">case</span> <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a145">icAbsoluteColorimetric</a>:
01534             icSigAToBx = <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a18">icSigAToB1Tag</a>;
01535             <span class="keywordflow">break</span>;
01536         <span class="keywordflow">default</span>:
01537             <span class="keywordflow">return</span> Success;
01538     }
01539 
01540     <span class="keywordflow">if</span> (<a class="code" href="../../d2/d9/ps2_8c.html#a189">DoesCPTagExist</a> (cp, icSigAToBx) &amp;&amp;
01541         <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a12">GetCPTagIndex</a> (cp, icSigAToBx, (LPSINT) &amp; Index))
01542     {
01543         Success = <a class="code" href="../../d2/d9/ps2_8c.html#a186">GetPS2CSA_DEFG</a> (cp, lpBuffer, lpcbSize, Intent, Index, Type, AllowBinary);
01544     }
01545 
01546     <span class="keywordflow">return</span> Success;
01547 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a20" doxytag="jan99/dll32/getcsa.c::GetPS2CSA_MONO" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL GetPS2CSA_MONO           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpMem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpcbSize</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>InpDrvClrSp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>InputIntent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>AllowBinary</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d3/jan99_2dll32_2getcsa_8c-source.html#l01253">1253</a> of file <a class="el" href="../../d0/d3/jan99_2dll32_2getcsa_8c-source.html">jan99/dll32/getcsa.c</a>.
<p>
References <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00108">AllowBinary</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l01279">GetPS2CSA_MONO_A()</a>, <a class="el" href="../../d1/d3/jul98_2dll32_2getcsa_8c-source.html#l00916">GetPS2CSA_MONO_ABC()</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00258">icSigDefData</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00253">icSigGrayData</a>, and <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00252">icSigRgbData</a>.
<p>
<pre class="fragment"><div>01255 {
01256     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> Success = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01257 <span class="preprocessor">#if 0</span>
01258 <span class="preprocessor"></span>    <span class="keywordflow">if</span> ((InpDrvClrSp == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a114">icSigRgbData</a>) ||
01259         (InpDrvClrSp == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a120">icSigDefData</a>) ||
01260         (InpDrvClrSp == 0))
01261     {
01262         Success = <a class="code" href="../../d0/d4/jul98_2dll32_2getcsa_8c.html#a17">GetPS2CSA_MONO_ABC</a> (cp, lpMem, lpcbSize, InputIntent, AllowBinary);
01263     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (InpDrvClrSp == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a115">icSigGrayData</a>)
01264     {
01265         Success = <a class="code" href="../../d2/d9/ps2_8c.html#a183">GetPS2CSA_MONO_A</a> (cp, lpMem, lpcbSize, InputIntent, AllowBinary);
01266     }
01267 <span class="preprocessor">#else</span>
01268 <span class="preprocessor"></span>    <span class="keywordflow">if</span> ((InpDrvClrSp == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a115">icSigGrayData</a>) ||
01269         (InpDrvClrSp == 0))
01270     {
01271         Success = <a class="code" href="../../d2/d9/ps2_8c.html#a183">GetPS2CSA_MONO_A</a> (cp, lpMem, lpcbSize, InputIntent, AllowBinary);
01272     }
01273     <span class="keywordflow">else</span>
01274     {
01275         Success = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01276     }
01277 <span class="preprocessor">#endif</span>
01278 <span class="preprocessor"></span>    <span class="keywordflow">return</span> Success;
01279 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a19" doxytag="jan99/dll32/getcsa.c::GetPS2CSA_MONO_A" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL GetPS2CSA_MONO_A           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpMem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpcbSize</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>InputIntent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>AllowBinary</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d3/jan99_2dll32_2getcsa_8c-source.html#l01087">1087</a> of file <a class="el" href="../../d0/d3/jan99_2dll32_2getcsa_8c-source.html">jan99/dll32/getcsa.c</a>.
<p>
References <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00007">BeginArray</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00011">BeginDict</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00009">BeginFunction</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00071">CieBasedABegin</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00075">CieBasedAEnd</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00035">CIEBasedATag</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00074">CSIG</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00084">DecodeA3</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00137">DecodeALab</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00039">DecodeATag</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00138">DecodeLMNLab</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04007">DoesCPTagExist()</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00008">EndArray</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00128">EndClip</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00012">EndDict</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00010">EndFunction</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d6/aug98_2dll32_2icmdll_8h-source.html#l00010">FAR</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l00069">GetCPConnSpace</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l00557">GetCPElement()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04143">GetCPElementSize()</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l00485">GetCPElementType()</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l00426">GetCPTagIndex()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04074">GetCPWhitePoint()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l05068">GetMediaWP()</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00306">icAbsoluteColorimetric</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00217">icSigCurveType</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00155">icSigGrayTRCTag</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00248">icSigLabData</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00347">icUInt16Number</a>, <a class="el" href="../../d2/d9/cmchek_8c-source.html#l00095">Index</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00115">IndexArray</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00117">lpcpCurveType</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00107">LPCSIG</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00109">LPMEMPTR</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00106">LPSFLOAT</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00105">LPSINT</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00028">MatrixATag</a>, <a class="el" href="../../d3/d8/aug98_2dll32_2csprof_8h-source.html#l00016">MAX_LINELENG</a>, <a class="el" href="../../d3/d0/object_8c-source.html#l00205">MemAlloc()</a>, <a class="el" href="../../d3/d0/object_8c-source.html#l00260">MemFree()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00080">MEMPTR</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00063">NewLine</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00077">RangeLMN</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00031">RangeLMNTag</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00131">Scale16</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l05027">SendCSABWPoint()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00069">SFLOAT</a>, <a class="el" href="../../d7/d6/aug98_2dll32_2icmdll_8h-source.html#l00011">SINT</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00127">StartClip</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00135">ui16toSINT</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00137">ui32toSINT</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l01193">WriteFloat()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l00080">WriteInt</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04573">WriteNewLineObject()</a>, and <a class="el" href="../../d3/d8/ps2_8c-source.html#l00072">WriteObject</a>.
<p>
<pre class="fragment"><div>01089 {
01090     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a> nCount;
01091     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a17">CSIG</a> Tag, PCS;
01092     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a> i, <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>;
01093     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpTable;
01094     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a16">SFLOAT</a> IlluminantWP[3];
01095     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a16">SFLOAT</a> MediaWP[3];
01096     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpBuff = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
01097     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a> MemSize = 0;
01098     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpOldMem = lpMem;
01099     HGLOBAL hBuff;
01100     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpLineStart;
01101  <span class="comment">// Check if we can generate the CS</span>
01102     <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d9/ps2_8c.html#a189">DoesCPTagExist</a> (cp, icSigGrayTRCTag) ||
01103         !<a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a12">GetCPTagIndex</a> (cp, icSigGrayTRCTag, &amp;Index) ||
01104         !<a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a16">GetCPElementType</a> (cp, Index, (LPCSIG) &amp; Tag) ||
01105         (Tag != <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a87">icSigCurveType</a>) ||
01106         !<a class="code" href="../../d2/d9/ps2_8c.html#a40">GetCPConnSpace</a> (cp, (LPCSIG) &amp; PCS) ||
01107         !<a class="code" href="../../d2/d9/ps2_8c.html#a194">GetCPElementSize</a> (cp, Index, (LPSINT) &amp; MemSize) ||
01108         !<a class="code" href="../../d2/d1/object_8c.html#a7">MemAlloc</a> (MemSize, (HGLOBAL FAR *)&amp;hBuff, (LPMEMPTR) &amp; lpBuff) ||
01109         !<a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a19">GetCPElement</a> (cp, Index, lpBuff, MemSize))
01110     {
01111         <span class="keywordflow">if</span> (<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> != lpBuff)
01112         {
01113             <a class="code" href="../../d2/d1/object_8c.html#a9">MemFree</a> (hBuff);
01114         }
01115         <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
01116     }
01117     nCount = <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a3">ui32toSINT</a> (((lpcpCurveType) lpBuff)-&gt;curve.count);
01118 
01119  <span class="comment">// Estimate the memory size required to hold CS</span>
01120     *lpcbSize = nCount * 6 +            <span class="comment">// Number of INT elements</span>
01121         3 * (lstrlen (IndexArray) +
01122              lstrlen (StartClip) +
01123              lstrlen (EndClip)) +
01124         2048;                           <span class="comment">// + other PS stuff</span>
01125     <span class="keywordflow">if</span> (lpMem == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)                  <span class="comment">// This is a size request</span>
01126     {
01127         <a class="code" href="../../d2/d1/object_8c.html#a9">MemFree</a> (hBuff);
01128         <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
01129     }
01130  <span class="comment">// Get info about Illuminant White Point from the header</span>
01131     <a class="code" href="../../d2/d9/ps2_8c.html#a191">GetCPWhitePoint</a> (cp, (LPSFLOAT) &amp; IlluminantWP);          <span class="comment">// .. Illuminant</span>
01132 
01133  <span class="comment">// Support absolute whitePoint</span>
01134     <a class="code" href="../../d2/d9/ps2_8c.html#a209">GetMediaWP</a>(cp, InputIntent, IlluminantWP, MediaWP);
01135 
01136  <span class="comment">//*********** Start creating the ColorSpace</span>
01137     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, CieBasedABegin);
01138 
01139     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, BeginArray);   <span class="comment">// Begin array</span>
01140  <span class="comment">//********** /CIEBasedA</span>
01141     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, CIEBasedATag); <span class="comment">// Create entry</span>
01142     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginDict);    <span class="comment">// Begin dictionary</span>
01143 
01144  <span class="comment">//********** Black/White Point</span>
01145     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a208">SendCSABWPoint</a>(lpMem, InputIntent, IlluminantWP, MediaWP);
01146 
01147  <span class="comment">//********** /DecodeA</span>
01148     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
01149     lpLineStart = lpMem;
01150 
01151     <span class="keywordflow">if</span> (nCount != 0)
01152     {
01153         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, DecodeATag);
01154 
01155         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginFunction);
01156         <span class="keywordflow">if</span> (nCount == 1)                <span class="comment">// Gamma supplied in ui16 format</span>
01157         {
01158             lpTable = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>) (((<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a35">lpcpCurveType</a>) lpBuff)-&gt;curve.data);
01159             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a44">WriteInt</a> (lpMem, ui16toSINT (lpTable));
01160             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, DecodeA3);
01161     <span class="comment">// If the PCS is Lab, we need to convert Lab to XYZ</span>
01162     <span class="comment">// Now, the range is from 0 --&gt; 0.99997.</span>
01163     <span class="comment">// Actually, the conversion from Lab to XYZ is not needed.</span>
01164             <span class="keywordflow">if</span> (PCS == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a110">icSigLabData</a>)
01165             {
01166                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, DecodeALab);
01167                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, DecodeLMNLab);
01168             }
01169         } <span class="keywordflow">else</span>
01170         {
01171             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, StartClip);
01172             lpTable = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>) (((<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a35">lpcpCurveType</a>) lpBuff)-&gt;curve.data);
01173             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginArray);
01174             <span class="keywordflow">for</span> (i = 0; i &lt; nCount; i++)
01175             {
01176                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a44">WriteInt</a> (lpMem, ui16toSINT (lpTable));
01177                 lpTable += <span class="keyword">sizeof</span> (<a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a185">icUInt16Number</a>);
01178                 <span class="keywordflow">if</span> (((<a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>) (lpMem - lpLineStart)) &gt; <a class="code" href="../../d2/d9/aug98_2dll32_2csprof_8h.html#a4">MAX_LINELENG</a>)
01179                 {
01180                     lpLineStart = lpMem;
01181                     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
01182                 }
01183             }
01184             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndArray);
01185             lpLineStart = lpMem;
01186             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
01187 
01188             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, IndexArray);
01189             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, Scale16);
01190     <span class="comment">// If the PCS is Lab, we need to convert Lab to XYZ</span>
01191     <span class="comment">// Now, the range is from 0 --&gt; .99997.</span>
01192     <span class="comment">// Actually, the conversion from Lab to XYZ is not needed.</span>
01193             <span class="keywordflow">if</span> (PCS == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a110">icSigLabData</a>)
01194             {
01195                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, DecodeALab);
01196                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, DecodeLMNLab);
01197             }
01198             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndClip);
01199         }
01200         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndFunction);
01201     }
01202 
01203  <span class="comment">//********** /MatrixA</span>
01204     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, MatrixATag);
01205     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginArray);
01206     <span class="keywordflow">for</span> (i = 0; i &lt; 3; i++)
01207     {
01208         <span class="keywordflow">if</span> (InputIntent == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a145">icAbsoluteColorimetric</a>)
01209             lpMem += <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a46">WriteFloat</a> (lpMem, (<span class="keywordtype">double</span>) MediaWP[i]);
01210         <span class="keywordflow">else</span>
01211             lpMem += <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a46">WriteFloat</a> (lpMem, (<span class="keywordtype">double</span>) IlluminantWP[i]);
01212     }
01213     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndArray);
01214 
01215  <span class="comment">//********** /RangeLMN</span>
01216     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, RangeLMNTag);
01217     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, RangeLMN);
01218 
01219  <span class="comment">//********** /End dictionary</span>
01220     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndDict);  <span class="comment">// End dictionary definition</span>
01221     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndArray);
01222 
01223     <a class="code" href="../../d2/d1/object_8c.html#a9">MemFree</a> (hBuff);
01224 
01225     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, CieBasedAEnd);
01226     *lpcbSize = (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>) (lpMem - lpOldMem);
01227     <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
01228 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a18" doxytag="jan99/dll32/getcsa.c::GetPS2CSA_MONO_ABC" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL GetPS2CSA_MONO_ABC           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpMem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpcbSize</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>InputIntent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>AllowBinary</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d3/jan99_2dll32_2getcsa_8c-source.html#l00927">927</a> of file <a class="el" href="../../d0/d3/jan99_2dll32_2getcsa_8c-source.html">jan99/dll32/getcsa.c</a>.
<p>
References <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00007">BeginArray</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00011">BeginDict</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00009">BeginFunction</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00070">CieBasedABCBegin</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00074">CieBasedABCEnd</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00036">CIEBasedABCTag</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00074">CSIG</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00084">DecodeA3</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00040">DecodeABCTag</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04007">DoesCPTagExist()</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00050">DupOp</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00008">EndArray</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00128">EndClip</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00012">EndDict</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00010">EndFunction</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d6/aug98_2dll32_2icmdll_8h-source.html#l00010">FAR</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l00069">GetCPConnSpace</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l00557">GetCPElement()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04143">GetCPElementSize()</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l00485">GetCPElementType()</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l00426">GetCPTagIndex()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04074">GetCPWhitePoint()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l05068">GetMediaWP()</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00306">icAbsoluteColorimetric</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00217">icSigCurveType</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00155">icSigGrayTRCTag</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00347">icUInt16Number</a>, <a class="el" href="../../d2/d9/cmchek_8c-source.html#l00095">Index</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00115">IndexArray</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00117">lpcpCurveType</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00107">LPCSIG</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00109">LPMEMPTR</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00106">LPSFLOAT</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00105">LPSINT</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00029">MatrixABCTag</a>, <a class="el" href="../../d3/d8/aug98_2dll32_2csprof_8h-source.html#l00016">MAX_LINELENG</a>, <a class="el" href="../../d3/d0/object_8c-source.html#l00205">MemAlloc()</a>, <a class="el" href="../../d3/d0/object_8c-source.html#l00260">MemFree()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00080">MEMPTR</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00063">NewLine</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00077">RangeLMN</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00031">RangeLMNTag</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00131">Scale16</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l05027">SendCSABWPoint()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00069">SFLOAT</a>, <a class="el" href="../../d7/d6/aug98_2dll32_2icmdll_8h-source.html#l00011">SINT</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00127">StartClip</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00135">ui16toSINT</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00137">ui32toSINT</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l01193">WriteFloat()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l00080">WriteInt</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04573">WriteNewLineObject()</a>, and <a class="el" href="../../d3/d8/ps2_8c-source.html#l00072">WriteObject</a>.
<p>
<pre class="fragment"><div>00929 {
00930     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a> nCount;
00931     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a17">CSIG</a> Tag, PCS;
00932     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a> i, j, <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>;
00933     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpTable;
00934     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a16">SFLOAT</a> IlluminantWP[3];
00935     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a16">SFLOAT</a> MediaWP[3];
00936     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpBuff = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00937     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a> MemSize = 0;
00938     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpOldMem = lpMem;
00939     HGLOBAL hBuff;
00940     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpLineStart;
00941  <span class="comment">// Check if we can generate the CS</span>
00942     <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d9/ps2_8c.html#a189">DoesCPTagExist</a> (cp, icSigGrayTRCTag) ||
00943         !<a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a12">GetCPTagIndex</a> (cp, icSigGrayTRCTag, &amp;Index) ||
00944         !<a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a16">GetCPElementType</a> (cp, Index, (LPCSIG) &amp; Tag) ||
00945         (Tag != <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a87">icSigCurveType</a>) ||
00946         !<a class="code" href="../../d2/d9/ps2_8c.html#a40">GetCPConnSpace</a> (cp, (LPCSIG) &amp; PCS) ||
00947         !<a class="code" href="../../d2/d9/ps2_8c.html#a194">GetCPElementSize</a> (cp, Index, (LPSINT) &amp; MemSize) ||
00948         !<a class="code" href="../../d2/d1/object_8c.html#a7">MemAlloc</a> (MemSize, (HGLOBAL FAR *)&amp;hBuff, (LPMEMPTR) &amp; lpBuff) ||
00949         !<a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a19">GetCPElement</a> (cp, Index, lpBuff, MemSize))
00950     {
00951         <span class="keywordflow">if</span> (<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> != lpBuff)
00952         {
00953             <a class="code" href="../../d2/d1/object_8c.html#a9">MemFree</a> (hBuff);
00954         }
00955         <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00956     }
00957     nCount = <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a3">ui32toSINT</a> (((lpcpCurveType) lpBuff)-&gt;curve.count);
00958 
00959  <span class="comment">// Estimate the memory size required to hold CS</span>
00960     *lpcbSize = nCount * 6 +            <span class="comment">// Number of INT elements</span>
00961         3 * (lstrlen (IndexArray) +
00962              lstrlen (StartClip) +
00963              lstrlen (EndClip)) +
00964         2048;                           <span class="comment">// + other PS stuff</span>
00965     <span class="keywordflow">if</span> (lpMem == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)                  <span class="comment">// This is a size request</span>
00966     {
00967         <a class="code" href="../../d2/d1/object_8c.html#a9">MemFree</a> (hBuff);
00968         <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
00969     }
00970  <span class="comment">// Get info about Illuminant White Point from the header</span>
00971     <a class="code" href="../../d2/d9/ps2_8c.html#a191">GetCPWhitePoint</a> (cp, (LPSFLOAT) &amp; IlluminantWP);          <span class="comment">// .. Illuminant</span>
00972 
00973  <span class="comment">// Support absolute whitePoint</span>
00974     <a class="code" href="../../d2/d9/ps2_8c.html#a209">GetMediaWP</a>(cp, InputIntent, IlluminantWP, MediaWP);
00975 
00976  <span class="comment">//*********** Start creating the ColorSpace</span>
00977     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, CieBasedABCBegin);
00978 
00979     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, BeginArray);   <span class="comment">// Begin array</span>
00980  <span class="comment">//********** /CIEBasedABC</span>
00981     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, CIEBasedABCTag);   <span class="comment">// Create entry</span>
00982     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginDict);    <span class="comment">// Begin dictionary</span>
00983 
00984  <span class="comment">//********** Black/White Point</span>
00985     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a208">SendCSABWPoint</a>(lpMem, InputIntent, IlluminantWP, MediaWP);
00986 
00987  <span class="comment">//********** /DecodeABC</span>
00988     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
00989     lpLineStart = lpMem;
00990 
00991     <span class="keywordflow">if</span> (nCount != 0)
00992     {
00993         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, DecodeABCTag);
00994         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginArray);
00995 
00996         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginFunction);
00997         <span class="keywordflow">if</span> (nCount == 1)                <span class="comment">// Gamma supplied in ui16 format</span>
00998         {
00999             lpTable = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>) (((<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a35">lpcpCurveType</a>) lpBuff)-&gt;curve.data);
01000             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a44">WriteInt</a> (lpMem, ui16toSINT (lpTable));
01001             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, DecodeA3);
01002         } <span class="keywordflow">else</span>
01003         {
01004             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, StartClip);
01005             lpTable = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>) (((<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a35">lpcpCurveType</a>) lpBuff)-&gt;curve.data);
01006             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginArray);
01007             <span class="keywordflow">for</span> (i = 0; i &lt; nCount; i++)
01008             {
01009                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a44">WriteInt</a> (lpMem, ui16toSINT (lpTable));
01010                 lpTable += <span class="keyword">sizeof</span> (<a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a185">icUInt16Number</a>);
01011                 <span class="keywordflow">if</span> (((<a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>) (lpMem - lpLineStart)) &gt; <a class="code" href="../../d2/d9/aug98_2dll32_2csprof_8h.html#a4">MAX_LINELENG</a>)
01012                 {
01013                     lpLineStart = lpMem;
01014                     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
01015                 }
01016             }
01017             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndArray);
01018             lpLineStart = lpMem;
01019             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
01020 
01021             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, IndexArray);
01022             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, Scale16);
01023             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndClip);
01024         }
01025         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndFunction);
01026         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, DupOp);
01027         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, DupOp);
01028         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndArray);
01029     }
01030  <span class="comment">//********** /MatrixABC</span>
01031     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, MatrixABCTag);
01032     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginArray);
01033     <span class="keywordflow">for</span> (i = 0; i &lt; 3; i ++)
01034     {
01035         <span class="keywordflow">for</span> (j = 0; j &lt; 3; j++)
01036         {
01037             <span class="keywordflow">if</span> (i != j)
01038                 lpMem += <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a46">WriteFloat</a> (lpMem, (<span class="keywordtype">double</span>)0);
01039             <span class="keywordflow">else</span>
01040             {
01041                 <span class="keywordflow">if</span> (InputIntent == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a145">icAbsoluteColorimetric</a>)
01042                     lpMem += <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a46">WriteFloat</a> (lpMem, (<span class="keywordtype">double</span>)MediaWP[i]);
01043                 <span class="keywordflow">else</span>
01044                     lpMem += <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a46">WriteFloat</a> (lpMem, (<span class="keywordtype">double</span>)IlluminantWP[i]);
01045             }
01046         }
01047     }
01048     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndArray);
01049 
01050  <span class="comment">//********** /RangeLMN</span>
01051     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, RangeLMNTag);
01052     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, RangeLMN);
01053 
01054 
01055     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndDict);  <span class="comment">// End dictionary definition</span>
01056     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndArray);
01057 
01058     <a class="code" href="../../d2/d1/object_8c.html#a9">MemFree</a> (hBuff);
01059 
01060     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, CieBasedABCEnd);
01061     *lpcbSize = (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>) (lpMem - lpOldMem);
01062     <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
01063 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a11" doxytag="jan99/dll32/getcsa.c::GetPublicArrayName" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a> GetPublicArrayName           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>IntentSig</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>PublicArrayName</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d3/jan99_2dll32_2getcsa_8c-source.html#l00154">154</a> of file <a class="el" href="../../d0/d3/jan99_2dll32_2getcsa_8c-source.html">jan99/dll32/getcsa.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00074">CSIG</a>, and <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00080">MEMPTR</a>.
<p>
<pre class="fragment"><div>00155 {
00156     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> OldPtr;
00157     OldPtr = PublicArrayName;
00158     PublicArrayName[0] = 0;
00159     MemCopy (PublicArrayName, (MEMPTR) &amp; IntentSig, <span class="keyword">sizeof</span> (CSIG));
00160     PublicArrayName += <span class="keyword">sizeof</span> (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a17">CSIG</a>);
00161     PublicArrayName[0] = 0;
00162     <span class="keywordflow">return</span> (PublicArrayName - OldPtr);
00163 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="jan99/dll32/getcsa.c::IsSRGB" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL IsSRGB           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>cp</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00799">799</a> of file <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html">aug98/dll32/getcrd.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l06843">crc32()</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d6/aug98_2dll32_2icmdll_8h-source.html#l00010">FAR</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l00557">GetCPElement()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04143">GetCPElementSize()</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l00426">GetCPTagIndex()</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00143">icSigBlueColorantTag</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00144">icSigBlueTRCTag</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00156">icSigGreenColorantTag</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00157">icSigGreenTRCTag</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00177">icSigRedColorantTag</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00178">icSigRedTRCTag</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00109">LPMEMPTR</a>, <a class="el" href="../../d3/d0/object_8c-source.html#l00205">MemAlloc()</a>, <a class="el" href="../../d3/d0/object_8c-source.html#l00260">MemFree()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00080">MEMPTR</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d6/aug98_2dll32_2icmdll_8h-source.html#l00011">SINT</a>, and <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00158">SRGBCRC</a>.
<p>
Referenced by <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00877">CreateMatrixCRD()</a>, and <a class="el" href="../../d8/d2/aug98_2dll32_2getcsa_8c-source.html#l00642">GetPS2CSA_ABC()</a>.
<p>
<pre class="fragment"><div>00800 {   
00801     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>    match = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00802     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>    RedTRCIndex, GreenTRCIndex, BlueTRCIndex, RedCIndex, GreenCIndex, BlueCIndex;
00803     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>    MemSize;
00804     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>    RedTRCSize=0, GreenTRCSize=0, BlueTRCSize=0, RedCSize=0, GreenCSize=0, BlueCSize=0;
00805     HGLOBAL hMem;
00806     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>  lpRed = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>,lpGreen, lpBlue, lpRedC, lpGreenC, lpBlueC;
00807     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>   crc;
00808 
00809     <span class="keywordflow">if</span> (<a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a12">GetCPTagIndex</a> (cp, icSigRedTRCTag, &amp;RedTRCIndex) &amp;&amp;
00810         <a class="code" href="../../d2/d9/ps2_8c.html#a194">GetCPElementSize</a> (cp, RedTRCIndex, &amp;RedTRCSize)  &amp;&amp;
00811             
00812         <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a12">GetCPTagIndex</a> (cp, icSigGreenTRCTag, &amp;GreenTRCIndex) &amp;&amp;
00813         <a class="code" href="../../d2/d9/ps2_8c.html#a194">GetCPElementSize</a> (cp, GreenTRCIndex, &amp;GreenTRCSize)  &amp;&amp;
00814             
00815         <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a12">GetCPTagIndex</a> (cp, icSigBlueTRCTag, &amp;BlueTRCIndex) &amp;&amp;
00816         <a class="code" href="../../d2/d9/ps2_8c.html#a194">GetCPElementSize</a> (cp, BlueTRCIndex, &amp;BlueTRCSize) &amp;&amp; 
00817             
00818         <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a12">GetCPTagIndex</a> (cp, icSigRedColorantTag, &amp;RedCIndex) &amp;&amp;
00819         <a class="code" href="../../d2/d9/ps2_8c.html#a194">GetCPElementSize</a> (cp, RedCIndex, &amp;RedCSize)  &amp;&amp;
00820             
00821         <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a12">GetCPTagIndex</a> (cp, icSigGreenColorantTag, &amp;GreenCIndex) &amp;&amp;
00822         <a class="code" href="../../d2/d9/ps2_8c.html#a194">GetCPElementSize</a> (cp, GreenCIndex, &amp;GreenCSize)  &amp;&amp;
00823             
00824         <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a12">GetCPTagIndex</a> (cp, icSigBlueColorantTag, &amp;BlueCIndex) &amp;&amp;
00825         <a class="code" href="../../d2/d9/ps2_8c.html#a194">GetCPElementSize</a> (cp, BlueCIndex, &amp;BlueCSize) )
00826     {
00827         MemSize = RedTRCSize + GreenTRCSize + BlueTRCSize + RedCSize + GreenCSize + BlueCSize;
00828 
00829         <span class="keywordflow">if</span> ( (MemSize == 6240) &amp;&amp; <span class="comment">// #bytes in sRGBColorTags</span>
00830              <a class="code" href="../../d2/d1/object_8c.html#a7">MemAlloc</a> (MemSize, (HGLOBAL FAR *)&amp;hMem, (LPMEMPTR)&amp;lpRed) )
00831         {
00832             lpGreen = lpRed + RedTRCSize;
00833             lpBlue = lpGreen + GreenTRCSize;
00834             lpRedC = lpBlue + BlueTRCSize;
00835             lpGreenC = lpRedC + RedCSize;
00836             lpBlueC = lpGreenC + GreenCSize;
00837             
00838             <span class="keywordflow">if</span> (<a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a19">GetCPElement</a> (cp, RedTRCIndex, lpRed, RedTRCSize) &amp;&amp;
00839                 <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a19">GetCPElement</a> (cp, GreenTRCIndex, lpGreen, GreenTRCSize ) &amp;&amp;
00840                 <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a19">GetCPElement</a> (cp, BlueTRCIndex, lpBlue, BlueTRCSize ) &amp;&amp;
00841                 <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a19">GetCPElement</a> (cp, RedCIndex, lpRedC, RedCSize) &amp;&amp;
00842                 <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a19">GetCPElement</a> (cp, GreenCIndex, lpGreenC, GreenCSize ) &amp;&amp;
00843                 <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a19">GetCPElement</a> (cp, BlueCIndex, lpBlueC, BlueCSize ))
00844             {   
00845                 crc = <a class="code" href="../../d2/d9/ps2_8c.html#a253">crc32</a>( lpRed, 6240 );    
00846                 match = (crc == <a class="code" href="../../d6/d2/aug98_2dll32_2getcrd_8c.html#a1">SRGBCRC</a>);
00847             }
00848             <a class="code" href="../../d2/d1/object_8c.html#a9">MemFree</a>(hMem);
00849         }    
00850     }            
00851     <span class="keywordflow">return</span> (match);
00852 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a6" doxytag="jan99/dll32/getcsa.c::SendCSABWPoint" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a> SendCSABWPoint           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpMem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Intent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a26">LPSFLOAT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>IlluminantWP</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a26">LPSFLOAT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>MediaWP</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d3/jan99_2dll32_2getcsa_8c-source.html#l00165">165</a> of file <a class="el" href="../../d0/d3/jan99_2dll32_2getcsa_8c-source.html">jan99/dll32/getcsa.c</a>.
<p>
References <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00007">BeginArray</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00013">BlackPoint</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00022">BlackPointTag</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00008">EndArray</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00306">icAbsoluteColorimetric</a>, <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00109">Intent</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00080">MEMPTR</a>, <a class="el" href="../../d7/d6/aug98_2dll32_2icmdll_8h-source.html#l00011">SINT</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00021">WhitePointTag</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l01193">WriteFloat()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04573">WriteNewLineObject()</a>, and <a class="el" href="../../d3/d8/ps2_8c-source.html#l00072">WriteObject</a>.
<p>
<pre class="fragment"><div>00167 {
00168     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>   i;
00169     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpOldMem = lpMem;
00170 
00171  <span class="comment">//********** /BlackPoint</span>
00172     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, BlackPointTag);
00173     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BlackPoint);
00174 
00175  <span class="comment">//********** /WhitePoint</span>
00176     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, WhitePointTag);
00177     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginArray);
00178     <span class="keywordflow">for</span> (i = 0; i &lt; 3; i++)
00179     {
00180         <span class="keywordflow">if</span> (<a class="code" href="../../d3/d8/aug98_2test_2main_8c.html#a28">Intent</a> == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a145">icAbsoluteColorimetric</a>)
00181         {
00182             lpMem += <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a46">WriteFloat</a> (lpMem, (<span class="keywordtype">double</span>) MediaWP[i]);
00183         }
00184         <span class="keywordflow">else</span>
00185         {
00186             lpMem += <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a46">WriteFloat</a> (lpMem, (<span class="keywordtype">double</span>) IlluminantWP[i]);
00187         }
00188     }
00189     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndArray);
00190     <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>)(lpMem - lpOldMem);
00191 }
</div></pre>    </td>
  </tr>
</table>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="a1" doxytag="jan99/dll32/getcsa.c::DecodeABCLab" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> char* <a class="el" href="../../d2/d9/ps2_8c.html#a172">DecodeABCLab</a>[]<code> [static]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Initial value:</b><pre class="fragment"><div> {<span class="stringliteral">"50 mul 16 add 116 div "</span>, 
                               <span class="stringliteral">"128 mul 128 sub 500 div"</span>, 
                               <span class="stringliteral">"128 mul 128 sub 200 div"</span>}
</div></pre>
<p>
Definition at line <a class="el" href="../../d0/d3/jan99_2dll32_2getcsa_8c-source.html#l00006">6</a> of file <a class="el" href="../../d0/d3/jan99_2dll32_2getcsa_8c-source.html">jan99/dll32/getcsa.c</a>.
<p>
Referenced by <a class="el" href="../../d0/d3/jan99_2dll32_2getcsa_8c-source.html#l00261">GetPS2CSA_DEFG()</a>.    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Sat May 15 19:43:53 2004 for test by
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>
